[{"tags": ["c", "linux", "process", "fork"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1503533760, "post_id": 45850922, "comment_id": 78660295, "body": "What&#39;s <code>server_id</code>?"}, {"owner": {"reputation": 134, "user_id": 5953672, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rdlzB.gif?s=128&g=1", "display_name": "OntologicalSin", "link": "https://stackoverflow.com/users/5953672/ontologicalsin"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1503535598, "post_id": 45850922, "comment_id": 78660721, "body": "<code>server_id</code> is just a <code>pid_t</code> integer variable that is the value of cid, or the child process id."}, {"owner": {"reputation": 59, "user_id": 8508972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bb91a81ee385402e61da0db98543f56?s=128&d=identicon&r=PG&f=1", "display_name": "Ace", "link": "https://stackoverflow.com/users/8508972/ace"}, "edited": false, "score": 1, "creation_date": 1503539862, "post_id": 45850922, "comment_id": 78669734, "body": "Did it print &quot;SERVER TERMINATED&quot; ? The server_id is child process pid indeed, could you rewrite SIGTERM signal handler in your server_path server binary?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1503540670, "post_id": 45850922, "comment_id": 78661845, "body": "what happens if you manually <code>kill -TERM &lt;your server pid&gt;</code> from the terminal ? does this terminates your server ? before issuing the <code>kill()</code> you might want to add a debug statement <code>fprintf(stderr, &quot;TERMINATING server %d\\n&quot;, server_id);</code> to make sure you are killing the right process"}, {"owner": {"reputation": 134, "user_id": 5953672, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rdlzB.gif?s=128&g=1", "display_name": "OntologicalSin", "link": "https://stackoverflow.com/users/5953672/ontologicalsin"}, "edited": false, "score": 0, "creation_date": 1503541833, "post_id": 45850922, "comment_id": 78662110, "body": "What this prints is <code>TERMINATING server 0</code>, for some reason the return from <code>fork()</code> is always 0"}, {"owner": {"reputation": 134, "user_id": 5953672, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rdlzB.gif?s=128&g=1", "display_name": "OntologicalSin", "link": "https://stackoverflow.com/users/5953672/ontologicalsin"}, "edited": false, "score": 0, "creation_date": 1503543185, "post_id": 45850922, "comment_id": 78662408, "body": "I figured out why it is happening but do not know how to fix it. I am executing the server with command line argument in the main program. The server is made to a process and then the main function terminates, so when I present the argument <code>-x</code> to terminate the server it has no reference to the previous execution."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1503614382, "post_id": 45850922, "comment_id": 78702740, "body": "And, what happened to argv[0] and argv[1]?"}], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 5953672, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rdlzB.gif?s=128&g=1", "display_name": "OntologicalSin", "link": "https://stackoverflow.com/users/5953672/ontologicalsin"}, "is_accepted": false, "score": 0, "last_activity_date": 1503614008, "creation_date": 1503614008, "answer_id": 45871892, "question_id": 45850922, "link": "https://stackoverflow.com/questions/45850922/child-processes-not-dying-with-killpid-t-sigterm/45871892#45871892", "title": "Child processes not dying with kill(pid_t, SIGTERM)", "body": "<p>Because the child pid is not persistent in the parent function and the child happens to be a server that listens to a port, I am doing</p>\n\n<pre><code>strcpy(command,\"lsof -t -i:\"); //get pid of process listening to port number\nstrcat(command,argv[2]); //concatenate port\nin = popen(command,\"r\");\nfgets(temp,5,in); //save output from running command\nprintf(\"%s\\n\",temp);\nserver_id = atoi(temp);\nfprintf(stderr, \"TERMINATING server %d\\n\", server_id);\nkill(server_id,SIGTERM);\nprintf(\"SERVER TERMINATED\\n\");\n</code></pre>\n"}], "owner": {"reputation": 134, "user_id": 5953672, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rdlzB.gif?s=128&g=1", "display_name": "OntologicalSin", "link": "https://stackoverflow.com/users/5953672/ontologicalsin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503614008, "creation_date": 1503532601, "last_edit_date": 1503555175, "question_id": 45850922, "link": "https://stackoverflow.com/questions/45850922/child-processes-not-dying-with-killpid-t-sigterm", "title": "Child processes not dying with kill(pid_t, SIGTERM)", "body": "<p>I am coding in C and attempting to fork a server that accepts connections from clients to its own process, however, the server persists to accept connection on the port specified after I use a command line argument to terminate it.</p>\n\n<pre><code>pid_t server_id;\n\n int spawn(char* func, char** argl)\n{\n    pid_t cid;\n    cid = fork();\n    server_id = cid;\n    if(cid!=0)\n        return cid;\n    else\n    {\n        execvp(func, argl);\n        int errcode = errno;\n        fprintf(stderr, \"Error reached: %s\\n\",strerror(errcode));\n        abort();\n    }\n\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>int main (int argc, char* argv[])\n{\n    //stuff\n\n    do{\n        next_option = getopt_long (argc, argv, short_options,long_options, NULL);\n        switch (next_option)\n        {\n            case 'h':   /* -h or --help */\n                print_usage (stdout, 0);\n\n            case 's':  ; /* -s or --start-server */\n                char* arglist[] = {\"server\",argv[2],NULL}; //argv[2] is the port number\n                spawn(server_path,arglist);\n                break;\n\n            case 'x':   /* -t or  --transport */\n                kill(server_id,SIGTERM);\n                printf(\"SERVER TERMINATED\\n\");\n                break;\n\n        //more stuff\n\n    return 0;\n}\n</code></pre>\n\n<p>server.c is a multithreaded server that can accept connections from multiple clients. I did not include the code for it, since I believe when terminating a process its threads are killed with it?</p>\n"}, {"tags": ["python", "c", "struct"], "comments": [{"owner": {"reputation": 1133, "user_id": 7790438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd56fe083be9265767941c6a049da6da?s=128&d=identicon&r=PG", "display_name": "Fady Saad", "link": "https://stackoverflow.com/users/7790438/fady-saad"}, "edited": false, "score": 0, "creation_date": 1503531156, "post_id": 45850687, "comment_id": 78659688, "body": "try this code: const char *string = &quot;\\x11\\x11\\x11\\x11&quot;; puts(string);"}, {"owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "reply_to_user": {"reputation": 1133, "user_id": 7790438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd56fe083be9265767941c6a049da6da?s=128&d=identicon&r=PG", "display_name": "Fady Saad", "link": "https://stackoverflow.com/users/7790438/fady-saad"}, "edited": false, "score": 0, "creation_date": 1503531303, "post_id": 45850687, "comment_id": 78659732, "body": "according to this: <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_puts.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/c_standard_library/c_function_puts.htm</a>, <code>puts</code> only print the string in the stdout? I need append it to this other string <code>header</code>."}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503533966, "post_id": 45850687, "comment_id": 78660356, "body": "Have you allocated the memory for <code>header</code> yet?"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1503570960, "post_id": 45850687, "comment_id": 78676425, "body": "You typically <code>memcpy</code> into consecutive locations of a memory block."}, {"owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503579276, "post_id": 45850687, "comment_id": 78682534, "body": "@IgnacioVazquez-Abrams yes (see the update)"}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503581107, "post_id": 45850687, "comment_id": 78683896, "body": "Your allocation uses the length of unallocated arrays, so that&#39;s a bad thing. You already know how large most of the fields are."}, {"owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503581468, "post_id": 45850687, "comment_id": 78684196, "body": "@IgnacioVazquez-Abrams but I not using unallocated arrays, I just trying figure out what the values for each one of elements (in the python code was used <code>struct.pack(...)</code> and <code>.decode(...)</code> functions)"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1503581478, "post_id": 45850687, "comment_id": 78684207, "body": "The reason C doesn&#39;t have a way to do this in strings is because it gives you direct access to the data, and it doesn&#39;t need a text based workaround. You can memcpy blocks of data based on known lengths. Instead of making a bits_pack, you memcpy bits directly, using sizeof(bits). Additionally strlen is obviously wrong because binary data will contain zeroes as data. If you try to use strlen you are using a variable length that won&#39;t work to find a length you already know from the data type itself."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1503581732, "post_id": 45850687, "comment_id": 78684424, "body": "same for strcpy and strcat. You cannot use them for binary data unless you can guarantee that the data never has zeroes, and also has additional zeroes to tell your string functions where to stop."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1503582289, "post_id": 45850687, "comment_id": 78684909, "body": "Just to clarify, you want C code for this struct, not a generic parser based on the format codes used by a python function? A hex dump of this header would help for testing purposes."}], "answers": [{"tags": [], "owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "is_accepted": true, "score": 0, "last_activity_date": 1503585669, "creation_date": 1503585669, "answer_id": 45864530, "question_id": 45850687, "link": "https://stackoverflow.com/questions/45850687/c-equivalent-to-the-pythons-struct-pack/45864530#45864530", "title": "C equivalent to the Python&#39;s struct.pack?", "body": "<p>The first problem is you need to understand is that char* is not a string type. Because you decode hex, you should expect to have any value, including several zeroes. Therefore you need to store the length separately for the binary data.</p>\n\n<p>Of course, it would be much easier in C++, with std::string, which would be much more like python strings (disclaimer, I am a c++ programmer).</p>\n\n<p>Second, do you want to store this buffer, or just stream it? It's much easier if you just stream this to a file (or whatever) by writing these pieces with known size. That's what I'd do in c++ if I wanted to put header in an std::string. And that's what I'd do if I were writing a file in C. Just call fwrite instead of memcpy.</p>\n\n<p>Storing the header in memory means you again must store the length, because it contains arbitrary binary data, and as before, it might have the null character as part of the data. Here's a sample:</p>\n\n<pre><code>int length = sizeof(ver) + prev_block_length + mrkl_root_length + sizeof(time_) + sizeof(bits) + sizeof(nonce);\nchar * header = (char*)malloc(length);\n\nchar * p = header; // placeholder which we advance as we write\nmemcpy(p, &amp;ver, sizeof(ver)); p += sizeof(ver);\nmemcpy(p, prev_block, prev_block_length); p += prev_block_length;\nmemcpy(p, mrkl_root, mrkl_root_length); p += mrkl_root_length;\nmemcpy(p, &amp;time_, sizeof(time_)); p += sizeof(time_);\nmemcpy(p, &amp;bits, sizeof(bits)); p += sizeof(bits);\nmemcpy(p, &amp;nonce, sizeof(nonce)); p += sizeof(nonce);\n\n// and eventually you must free (another good reason to just stream it)\nfree(header);\n</code></pre>\n"}], "owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 45864530, "answer_count": 1, "score": 0, "last_activity_date": 1503585669, "creation_date": 1503530689, "last_edit_date": 1503579237, "question_id": 45850687, "link": "https://stackoverflow.com/questions/45850687/c-equivalent-to-the-pythons-struct-pack", "title": "C equivalent to the Python&#39;s struct.pack?", "body": "<p>Is there any way to acomplish, using C, the same result acomplished with the function <code>struct.pack(...)</code> from Python? I am trying write with C a code originally written in Python, and this code has a line like that:</p>\n\n<pre><code>header = (struct.pack(\"&lt;L\", ver) + prev_block.decode('hex')[::-1]\n          + mrkl_root.decode('hex')[::-1]\n          + struct.pack(\"&lt;LLL\", time_, bits, nonce))\n</code></pre>\n\n<p>which I want rewrite in C.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I had put this preliminary C code in motion:</p>\n\n<pre><code>char* ver_pack;\nchar* prev_block_pack;\nchar* mkrl_root_pack;\nchar* time_pack;\nchar* bits_pack;\nchar* nonce_pack;\nchar* header = malloc(strlen(ver_pack)+strlen(prev_block_pack)+strlen(mkrl_root_pack)+strlen(time_pack)+strlen(bits_pack)+strlen(nonce_pack));\nstrcpy(header, ver_pack);\nstrcat(header, prev_block_pack);\nstrcat(header, mkrl_root_pack);\nstrcat(header, time_pack);\nstrcat(header, bits_pack);\nstrcat(header, nonce_pack);\n</code></pre>\n\n<p>now I need to figure out the values for each one of the elements in the header, which are:</p>\n\n<pre><code>int ver\nchar* prev_block\nchar* mrkl_root\nunsigned int time_\nunsigned int bits\nunsigned int nonce\n</code></pre>\n"}, {"tags": ["c", "pass-by-reference"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1503525462, "post_id": 45849878, "comment_id": 78658005, "body": "There is no such thing as pass by reference in C"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8488008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yb5jo.jpg?s=128&g=1", "display_name": "Pradeep Kumar", "link": "https://stackoverflow.com/users/8488008/pradeep-kumar"}, "edited": false, "score": 0, "creation_date": 1503525732, "post_id": 45849890, "comment_id": 78658098, "body": "But In the reverse function when I traverse l,It gives the reversed list. That means the l is pointing at the same list as m !"}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 77, "user_id": 8488008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yb5jo.jpg?s=128&g=1", "display_name": "Pradeep Kumar", "link": "https://stackoverflow.com/users/8488008/pradeep-kumar"}, "edited": false, "score": 0, "creation_date": 1503525857, "post_id": 45849890, "comment_id": 78658148, "body": "Yes inside the function. But you have to use double pointer to be possible to reflect it in main. Just try it."}, {"owner": {"reputation": 77, "user_id": 8488008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yb5jo.jpg?s=128&g=1", "display_name": "Pradeep Kumar", "link": "https://stackoverflow.com/users/8488008/pradeep-kumar"}, "edited": false, "score": 0, "creation_date": 1503526389, "post_id": 45849890, "comment_id": 78658331, "body": "l is already a pointer to a list . I have edited the question ."}, {"owner": {"reputation": 77, "user_id": 8488008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yb5jo.jpg?s=128&g=1", "display_name": "Pradeep Kumar", "link": "https://stackoverflow.com/users/8488008/pradeep-kumar"}, "edited": false, "score": 0, "creation_date": 1503527640, "post_id": 45849890, "comment_id": 78658757, "body": "Why is this happening...Please help !"}], "tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": false, "score": 2, "last_activity_date": 1503525400, "creation_date": 1503525400, "answer_id": 45849890, "question_id": 45849878, "link": "https://stackoverflow.com/questions/45849878/pointers-not-reflecting-change-when-value-changed-in-a-function/45849890#45849890", "title": "Pointers Not Reflecting Change when value changed in a function", "body": "<p>You have to pass a double pointer to be possible to change where does the pointer points.</p>\n\n<pre><code>void Reverse(List **l);\nReverse(&amp;l);\n</code></pre>\n\n<hr>\n\n<p>Its not possible in C to pass by reference, from <a href=\"http://www-cs-students.stanford.edu/~sjac/c-to-cpp-info/references\" rel=\"nofollow noreferrer\">www-cs-students.stanford.edu</a>:</p>\n\n<blockquote>\n  <p>In C, Pass-by-reference is simulated by passing the address of a\n  variable (a pointer) and dereferencing that address within the\n  function to read or write the actual variable. This will be referred\n  to as \"C style pass-by-reference.\"</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 8488008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yb5jo.jpg?s=128&g=1", "display_name": "Pradeep Kumar", "link": "https://stackoverflow.com/users/8488008/pradeep-kumar"}, "edited": false, "score": 0, "creation_date": 1503528983, "post_id": 45850383, "comment_id": 78659189, "body": "When I do *l=*m in the last line the code works but I dont know why !"}, {"owner": {"reputation": 77, "user_id": 8488008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yb5jo.jpg?s=128&g=1", "display_name": "Pradeep Kumar", "link": "https://stackoverflow.com/users/8488008/pradeep-kumar"}, "edited": false, "score": 0, "creation_date": 1503535342, "post_id": 45850383, "comment_id": 78660666, "body": "It seems to work fine though(*l=*m) even if the memory that l points to doesn&#39;t exist . Please tell me what does the function free() actually does in this case !"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 1, "last_activity_date": 1503588074, "last_edit_date": 1503588074, "creation_date": 1503528267, "answer_id": 45850383, "question_id": 45849878, "link": "https://stackoverflow.com/questions/45849878/pointers-not-reflecting-change-when-value-changed-in-a-function/45850383#45850383", "title": "Pointers Not Reflecting Change when value changed in a function", "body": "<p>When you do <code>l = m</code>, you are just setting <code>l</code> within <code>Reverse</code>. <code>l</code> is part of the argument list to <code>Reverse</code>. When you change the value, it only changes it for the duration of the call to <code>Reverse</code>. It never gets propagated to the caller.</p>\n\n<p>You can use Filip's method to propagate the value.</p>\n\n<p>Or, you can:</p>\n\n<ol>\n<li>redefine <code>Reverse</code> as: <code>List *Reverse(List *l)</code></li>\n<li>add <code>return m</code> as the last statement in it</li>\n<li>and call via: <code>l = Reverse(l)</code>.</li>\n</ol>\n\n<p>But, this is a bit wasteful. You can also do an in-place reversal:</p>\n\n<pre><code>void Reverse(List *l)\n{\n    int left = 0;\n    int right = l-&gt;count - 1;\n\n    // NOTE: this should be whatever the type of array[0] is:\n    int tmp;\n\n    for (;  left &lt; right;  ++left, --right) {\n        tmp = l-&gt;array[left];\n        l-&gt;array[left] = l-&gt;array[right];\n        l-&gt;array[right] = tmp;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<blockquote>\n  <p>When I do *l=*m in the last line the code works but I dont know why !</p>\n</blockquote>\n\n<p>Even that has a bug.</p>\n\n<p>That is because you are replacing the entire <em>contents</em> of what <code>l</code> points to. Essentially, you created a new [reversed] list <code>m</code>, filled it, then copied it back to <code>l</code>.</p>\n\n<p>Doing <code>free(l)</code> <em>before</em> doing <code>*l = *m</code> is a <em>bug</em>. You are dereferencing a pointer to freed memory.</p>\n\n<p>You <em>do</em> want to do <code>free(l-&gt;array)</code>, but <em>not</em> <code>free(l)</code>.</p>\n\n<p>Also, after doing <code>*l = *m</code>, you need to do <code>free(m)</code>. Otherwise, you have a memory leak on the <code>struct</code> that <code>m</code> points to [but <em>not</em> what <code>m-&gt;array</code> points to because it gets saved in <code>l-&gt;array</code>].</p>\n\n<p>This is needless complexity and error prone.</p>\n\n<p>And you did twice as much work as needed. When you do <code>*l = *m</code>, you are really doing:</p>\n\n<pre><code>l-&gt;count = m-&gt;count;\nfor (int i = 0;  i &lt; m-&gt;count;  ++i)\n    l-&gt;array[i] = m-&gt;array[i];\n</code></pre>\n\n<p>In other words, don't do the <code>*l = *m</code>, even if it seems to work. Use one of the three easier/correct ways.</p>\n\n<hr>\n\n<p><strong>UPDATE #2:</strong></p>\n\n<blockquote>\n  <p>It seems to work fine though(*l=*m) even if the memory that l points to doesn't exist . Please tell me what does the function free() actually does in this case</p>\n</blockquote>\n\n<p>Yes, it <em>seems</em> to work fine, but it does <em>not</em> work fine [in the general case].</p>\n\n<p>After you do <code>free(l)</code>, what <code>l</code> pointed to is unavailable. The memory allocator assumes that you have <em>no</em> further use for this memory [because when you do <code>free(l)</code>, you are <em>telling</em> it so]. The allocator is at liberty to do <em>whatever</em> it wishes with that memory:</p>\n\n<ol>\n<li>In a multithreaded environment, between the time you call <code>free(l)</code> and it returning control to you, another thread could have done a <code>malloc</code> and now you have two threads pointing to the same memory and using it for different purposes. Doing the subsequent <code>*l = *m</code> would corrupt the data that the <em>other</em> thread is storing there. This introduces a subtle, intermittent, hard to find bug.</li>\n<li>In a single threaded environment, the memory allocator might use the memory to store metadata for its own [internal] purposes. Again, <em>before</em> it returns from <code>free(l)</code>. So, when you do <code>*l = *m</code>, you could be corrupting the allocator's internal data structures (or vice versa). The next time you issue a <code>malloc</code>, the allocator might segfault.</li>\n<li>The next time you issue a <code>malloc</code>, it might return a pointer to the <em>same</em> memory that <code>l</code> is/was pointing to (e.g. you create a second list [in <code>main</code>] by calling <code>l2 = CreateList(10)</code>). Now, <code>l</code> and <code>l2</code> have the same value (i.e. they point to the same <code>struct</code>). So, instead of <code>l</code> and <code>l2</code> being separate lists, they <em>collide</em>. Or, <code>l2</code> might be different, but <code>l2-&gt;array</code> might overlap with <code>l</code></li>\n</ol>\n\n<p>Below is one example of a general resource allocation/release problem. Because you don't know what the allocate or release functions do internally, you can't be safe accessing <em>anything</em> inside the resource after it's been released/freed. The release function below adds one line to illustrate why it's unsafe to do what you did with <code>*l = *m</code></p>\n\n<pre><code>#include &lt;malloc.h&gt;\n\nstruct resource {\n    int count;\n    int *array;\n};\n\nstruct resource *\nallocate_resource(int count)\n{\n    struct resource *ptr;\n\n    ptr = malloc(sizeof(struct resource));\n    ptr-&gt;count = count;\n    ptr-&gt;array = malloc(sizeof(int) * count);\n\n    return ptr;\n}\n\nvoid\nfree_resource(struct resource *ptr)\n{\n\n    free(ptr-&gt;array);\n\n    // prevents \"*l = *m\" from \"seeming to work\"\n    ptr-&gt;array = NULL;\n\n    free(ptr);\n}\n\nint\nmain(void)\n{\n\n    while (1) {\n        struct resource *x = allocate_resource(20);\n\n        // x may be utilized here ...\n\n        free_resource(x);\n\n        // x may _not_ be utilized here ...\n        // this will segfault\n        x-&gt;array[0] = 23;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 1, "last_activity_date": 1503535172, "last_edit_date": 1503535172, "creation_date": 1503530742, "answer_id": 45850696, "question_id": 45849878, "link": "https://stackoverflow.com/questions/45849878/pointers-not-reflecting-change-when-value-changed-in-a-function/45850696#45850696", "title": "Pointers Not Reflecting Change when value changed in a function", "body": "<p>In C, function arguments are <em>always</em> passed by value. This means that in the function <code>ReverseList()</code> <code>l</code> is a <em>copy</em> of the pointer to <code>List</code> that was passed in the function call. So, when the reversed <code>List</code> is created, and the address is assigned to <code>l</code> within the function, this has no effect on the original pointer to <code>List</code> in <code>main()</code> (since <code>l</code> within <code>Reverse()</code> is only a copy of <code>l</code> within <code>main()</code>). It may help to give variables in functions names that are different from their corresponding names in callers to help keep this sort of thing straight.</p>\n\n<p>One solution is to pass a pointer to pointer to <code>List</code> into the <code>Reverse()</code> function:</p>\n\n<pre><code>void Reverse(List **lptr)\n{\n    List *m=CreateList(ListSize(*lptr));\n    for(int i=0;i&lt;(*lptr)-&gt;count;i++)\n    {\n        m-&gt;array[i]=(*lptr)-&gt;array[(*lptr)-&gt;count-i-1];\n        m-&gt;count++;\n    }\n    free((*lptr)-&gt;array);\n    free(*lptr);\n    *lptr=m;\n    //Traverse(l); Here it prints the reversed List\n}\n</code></pre>\n\n<p>Call this function with <code>Reverse(&amp;l)</code>. Here, since a copy of a pointer to a pointer to <code>List</code> is used in <code>Reverse()</code>, and <code>lptr</code> points to the pointer <code>l</code> in <code>main()</code>, <code>lptr</code> can be dereferenced and the value of <code>m</code> can be assigned to the actual pointer to <code>List</code> (<code>l</code>) found in <code>main()</code>.</p>\n\n<p>An alternative solution is to change the <code>Reverse()</code> function to return a pointer to <code>List</code> to the caller. Then the returned value is assigned to <code>l</code>:</p>\n\n<pre><code>List * Reverse(List *l)\n{\n    List *m=CreateList(ListSize(l));\n    for(int i=0;i&lt;l-&gt;count;i++)\n    {\n        m-&gt;array[i]=l-&gt;array[l-&gt;count-i-1];\n        m-&gt;count++;\n    }\n    free(l-&gt;array);\n    free(l);\n    return m;\n    //Traverse(l); Here it prints the reversed List\n}\n\nint main(void)\n{\n    size=5;\n    List *l=CreateList(size);\n    l = Reverse(l);\n    Traverse(l); //Here the list is not printing the reversed list !\n\n    return 0;\n}\n</code></pre>\n\n<p>Also, if <code>CreateList()</code> is not already checking for allocation errors, the code should be checking for these before <code>free</code>ing the previous allocations.</p>\n"}], "owner": {"reputation": 77, "user_id": 8488008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Yb5jo.jpg?s=128&g=1", "display_name": "Pradeep Kumar", "link": "https://stackoverflow.com/users/8488008/pradeep-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 45850383, "answer_count": 3, "score": 0, "last_activity_date": 1503588074, "creation_date": 1503525328, "last_edit_date": 1503534776, "question_id": 45849878, "link": "https://stackoverflow.com/questions/45849878/pointers-not-reflecting-change-when-value-changed-in-a-function", "title": "Pointers Not Reflecting Change when value changed in a function", "body": "<p>I am implementing a Linked List using an array.It has a function Reverse\ndefined below</p>\n\n<pre><code>void Reverse(List *l)\n{\n    List *m=CreateList(ListSize(l));\n    for(int i=0;i&lt;l-&gt;count;i++)\n    {\n        m-&gt;array[i]=l-&gt;array[l-&gt;count-i-1];\n        m-&gt;count++;\n    }\n    free(l-&gt;array);\n    free(l);\n    l=m;\n    //Traverse(l); Here it prints the reversed List\n\n}\n</code></pre>\n\n<p>It takes a List structure as a argument. I am calling it from main like this </p>\n\n<pre><code>int main()\n{\n    size=5;\n    List *l=CreateList(size);\n    Reverse(l);\n    Traverse(l); //Here the list is not printing the reversed list !\n\n}\n</code></pre>\n\n<p>Why are the changes I made to l in reverse not showing up in main() ?\nThanks !</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1503525250, "post_id": 45849846, "comment_id": 78657934, "body": "Why the pointer? I suggest <code>typedef char[8][8] Chessboard;</code> Or better, <code>#define</code> the dimensions since some chess board problems use a non-standard board, and so you don&#39;t confuse these <code>8</code>s with any other magic <code>8</code>s. For example there are usually 8 bits in a byte, and there are 8 pawns. Now, suppose at some later time you want to change the size of the board, or the number of pawns. You will have a tough time combing through the code deciding <i>which</i> <code>8</code>s need to be changed, so please avoid magic numbers."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1503525289, "post_id": 45849846, "comment_id": 78657951, "body": "Do you want to declare a <i>type</i> or a <i>variable</i>?  <code>typedef</code> is for <i>types</i>."}, {"owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 3, "creation_date": 1503525338, "post_id": 45849846, "comment_id": 78657966, "body": "I think what you&#39;re looking for is <code>extern char Chessboard[8][8];</code>, if you want to make a global <code>Chessboard</code> variable."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503525547, "post_id": 45849846, "comment_id": 78658039, "body": "<code>typedef char (*Chessboard)[8][8];</code> ?"}, {"owner": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "reply_to_user": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 0, "creation_date": 1503525758, "post_id": 45849846, "comment_id": 78658104, "body": "@AndrewSun has the right idea imo. In my experience getting fancy will hurt you more than help. just declare an extern global variable in the header file and comment it as a global and you should be good to go."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 0, "creation_date": 1503528186, "post_id": 45849846, "comment_id": 78658930, "body": "@AndrewSun Post that as an answer."}, {"owner": {"reputation": 113, "user_id": 7214714, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1209183315814708/picture?type=large", "display_name": "Vid Stropnik", "link": "https://stackoverflow.com/users/7214714/vid-stropnik"}, "edited": false, "score": 0, "creation_date": 1503528536, "post_id": 45849846, "comment_id": 78659054, "body": "I have to admit I&#39;m practicing for an upcoming test and this is just an old assignment (from one of the previous tests).  After some thought and study on how header files behave, I&#39;ve found that <code>char array[8][8]; char*** Chessboard = (char***)  malloc (sizeof (char**)); *(Chessboard) = array; </code> could work - however, I&#39;m supposed to declare a <i>type</i>..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1503528645, "post_id": 45849846, "comment_id": 78659090, "body": "@VidStropnik no that will not work at all"}, {"owner": {"reputation": 113, "user_id": 7214714, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1209183315814708/picture?type=large", "display_name": "Vid Stropnik", "link": "https://stackoverflow.com/users/7214714/vid-stropnik"}, "edited": false, "score": 0, "creation_date": 1503528752, "post_id": 45849846, "comment_id": 78659115, "body": "To clarify - I want to define a type &quot;Chessboard&quot;, that is a pointer to an 8x8 array."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503529347, "post_id": 45849846, "comment_id": 78659301, "body": "Now you unclarified it again, since <code>char*** Chessboard</code> in the previous comment is a variable, not a type. What&#39;s the problem with suggestions by Weather Vane, Andrew Sun and BLUEPIXY? &quot;Thought and study on how header files behave&quot; makes me think you don&#39;t understand how header files behave. They don&#39;t &quot;behave&quot;, they are just pasted in place by the preprocessor wherever you <code>#include</code> them. That&#39;s why a header file needs to mark variables at <code>extern</code>, while the actual variable definition has to sit in a .c file. Otherwise you will have a new static &quot;instance&quot; of your variable in each .c file."}, {"owner": {"reputation": 113, "user_id": 7214714, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1209183315814708/picture?type=large", "display_name": "Vid Stropnik", "link": "https://stackoverflow.com/users/7214714/vid-stropnik"}, "edited": false, "score": 0, "creation_date": 1503530666, "post_id": 45849846, "comment_id": 78659595, "body": "Yes, I understand this (how header files work) now, but I did not at the strat.  Weather Vane&#39;s suggestion doesn&#39;t declare a pointer to an array, rather just an array.  It is unclear to me if Andrew Sun&#39;s suggestion defines a type. I know my edit doesn&#39;t to that either, but this is something I want to do.  BLUEPIXY&#39;s option seems the best out of the bunch - If I understand his code correctly, that is."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503534254, "post_id": 45849846, "comment_id": 78660418, "body": "@WeatherVane <code>typedef char[8][8] Chessboard;</code> --&gt;  <code>typedef char Chessboard[8][8];</code>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1503537432, "post_id": 45849846, "comment_id": 78661163, "body": "Andrew Suns suggestion doesnt define a type, but then you really dont need a type. Just make a honking big global variable called ChessBoard as he suggests"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1503671231, "last_edit_date": 1503671231, "creation_date": 1503533424, "answer_id": 45851017, "question_id": 45849846, "link": "https://stackoverflow.com/questions/45849846/defining-an-array-of-a-set-size-in-header-file/45851017#45851017", "title": "Defining an array of a set size in header file", "body": "<blockquote>\n  <p>I want to define a type \"Chessboard\", that is a pointer to an 8x8 array.</p>\n</blockquote>\n\n<pre><code>// .h\ntypedef char (*Chessboard_T)[8][8];\nextern Chessboard_T Chessboard_Var;\n\n// .c\nstatic char board[8][8];\nChessboard_T Chessboard_Var = &amp;board;\n\n// Usage example\nvoid foo() {\n   (*Chessboard_Var)[0][4] = 'K';\n}\n</code></pre>\n\n<p>Hiding pointers in typedefs is usually frown upon.</p>\n\n<hr>\n\n<p>A more common solution to capture the state would employ <code>Chessboard</code> as a structure.  Example:</p>\n\n<pre><code>// Chessboard.h\ntypedef struct {\n  char board[8][8];\n  unsigned move_count;\n  int en_pass;\n  int castle;\n  int *history;\n  // etc.\n} Chessboard;\n\n// Various functions that operate with a Chessboard\nChessboard *Chessboard_Create(void);\nChessboard_Destroy(Chessboard *cb);\nChessboard_This(..);  \nChessboard_That(..);\n...\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 7214714, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1209183315814708/picture?type=large", "display_name": "Vid Stropnik", "link": "https://stackoverflow.com/users/7214714/vid-stropnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1503671231, "creation_date": 1503525129, "last_edit_date": 1503528689, "question_id": 45849846, "link": "https://stackoverflow.com/questions/45849846/defining-an-array-of-a-set-size-in-header-file", "title": "Defining an array of a set size in header file", "body": "<p>I want to define a pointer to an character array of a set value in a header file.\nEssentially - I want to declare a chessboard in a header file.</p>\n\n<p>Would something like this work, or should I be using #define?\nThank you.</p>\n\n<pre><code>#ifndef myHeader\n#define myHeader\n\ntypedef *char[8][8] Chessboard;\n\n#endif\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I have to admit I'm practicing for an upcoming test and this is just an old assignment (from one of the previous tests).\nAfter some thought and study on how header files behave, I've found that </p>\n\n<pre><code>char array[8][8]; \nchar*** Chessboard = (char***) malloc (sizeof (char**)); \n*(Chessboard) = array; \n</code></pre>\n\n<p>could work - however, I'm supposed to declare a type, and don't know how to do this.</p>\n\n<p>To clarify - I want to define a type \"Chessboard\", that is a pointer to an 8x8 array.</p>\n"}, {"tags": ["python", "c", "cython"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503524810, "post_id": 45849744, "comment_id": 78657735, "body": "Strange. Something appears to be treated as unsigned. The C <code>abs</code> returns a signed int..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503524852, "post_id": 45849744, "comment_id": 78657754, "body": "The code in C with all of the python related stuff removed is showing <code>-1009</code>. <a href=\"https://ideone.com/aOyfLu\" rel=\"nofollow noreferrer\">ideone.com/aOyfLu</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503525108, "post_id": 45849744, "comment_id": 78657863, "body": "Not familiar with cython, but it looks like it is producing an intermediate C source? Can we look at it?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1503525166, "post_id": 45849744, "comment_id": 78657891, "body": "Yeah, looking at <code>test.c</code> would be quite helpful for debugging this."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503526471, "post_id": 45849951, "comment_id": 78658372, "body": "Looking through the Cython source, I can confirm the existence of a <a href=\"https://github.com/cython/cython/blob/a0bbb940c847dfe92cac446c8784c34c28c92836/Cython/Includes/libc/stdlib.pxd#L51\" rel=\"nofollow noreferrer\">declaration of <code>abs</code></a> from the C stdlib with the correct return type, but also <a href=\"https://github.com/cython/cython/blob/c4ba71f488535cab6ea78c3e56e0a977d9a0f853/Cython/Utility/Builtins.c#L230\" rel=\"nofollow noreferrer\">other <code>abs</code> routines</a> that return unsigned types."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503526577, "post_id": 45849951, "comment_id": 78658404, "body": "The ones with unsigned return types appear to be used in the Cython compiler for <a href=\"https://github.com/cython/cython/blob/c4ba71f488535cab6ea78c3e56e0a977d9a0f853/Cython/Compiler/Builtin.py#L99\" rel=\"nofollow noreferrer\">calling the builtin <code>abs</code> on C ints</a>; this may be overriding your explicit <code>cimport</code>, although I feel like it shouldn&#39;t."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503527055, "post_id": 45849951, "comment_id": 78658564, "body": "I don&#39;t think Cython should have ever used an unsigned return type for the built-in <code>abs</code>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1503527164, "post_id": 45849951, "comment_id": 78658606, "body": "So why is the result 2130706744? I would expect 4294966287 (2**32 - 1009)."}], "tags": [], "owner": {"reputation": 111, "user_id": 8473731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740501f7e9adad9741ee8d755ee0ab6e?s=128&d=identicon&r=PG&f=1", "display_name": "ARN", "link": "https://stackoverflow.com/users/8473731/arn"}, "is_accepted": false, "score": 2, "last_activity_date": 1503785238, "last_edit_date": 1503785238, "creation_date": 1503525749, "answer_id": 45849951, "question_id": 45849744, "link": "https://stackoverflow.com/questions/45849744/bizarre-integer-behavior-in-cython/45849951#45849951", "title": "Bizarre integer behavior in cython", "body": "<p>Looks like this might be a bug in Cython. The relevant line in <code>test.c</code> is </p>\n\n<pre><code>__pyx_t_2 = __Pyx_PyInt_From_unsigned_int((-(__pyx_t_1 &amp; __pyx_v_4test_c)));\n</code></pre>\n\n<p>Clearly interpreting our number as unsigned gives a wrong answer. However if I remove the <code>abs</code> call, then I get</p>\n\n<pre><code>__pyx_t_1 = __Pyx_PyInt_From_int((-(__pyx_v_4test_b &amp; __pyx_v_4test_c)));\n</code></pre>\n\n<p>and the result is correct. If I add a cast to int like <code>print('%d'%(-(&lt;int&gt;abs(b)&amp;c)))</code> then I also get the right answer.</p>\n\n<p>Cross posted to the <a href=\"https://github.com/cython/cython/issues/1837\" rel=\"nofollow noreferrer\">Cython github page</a></p>\n\n<p><strong>Update:</strong> Here is the response to my github issue: </p>\n\n<blockquote>\n  <p>Basically, a signed int is not large enough to hold abs(-MAX_INT-1),\n  so the result was changed to return an unsigned value. On the other\n  hand, I agree that using an unsigned value is quite confusing as well,\n  especially as promotion of equally ranked integers is to the unsigned\n  type so it's contagious. Unclear what the best course of action is\n  here...</p>\n</blockquote>\n"}], "owner": {"reputation": 111, "user_id": 8473731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740501f7e9adad9741ee8d755ee0ab6e?s=128&d=identicon&r=PG&f=1", "display_name": "ARN", "link": "https://stackoverflow.com/users/8473731/arn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1503785238, "creation_date": 1503524562, "last_edit_date": 1503524968, "question_id": 45849744, "link": "https://stackoverflow.com/questions/45849744/bizarre-integer-behavior-in-cython", "title": "Bizarre integer behavior in cython", "body": "<p>I'm running into a strange issue with some integer manipulation in cython. When I compile this cython code ...</p>\n\n<p>test.pyx</p>\n\n<pre><code>from libc.math cimport abs\n\ncdef int c = 2047\ncdef int b = 1009\nprint('%d'%(-(abs(b)&amp;c)))\n</code></pre>\n\n<p>...like this</p>\n\n<pre><code>#!python\nfrom subprocess import check_output\n\nCFLAGS = check_output('python-config --cflags'.split()).decode('utf-8').strip()\nLDFLAGS = check_output('python-config --ldflags'.split()).decode('utf-8').strip()\n\ncheck_output('cython test.pyx'.split())\n\ncompile_call = ('clang -c test.c %s'%(CFLAGS)).split()\ncheck_output(compile_call)\n\nlink_call = ('clang test.o -o test.so -shared %s'%(LDFLAGS)).split()\ncheck_output(link_call)\n\nimport test\n</code></pre>\n\n<p>...I get <code>2130706744</code>, but the right answer is <code>-1009</code>.</p>\n"}, {"tags": ["c", "windows", "ascii", "midi"], "comments": [{"owner": {"reputation": 5673, "user_id": 2376156, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2s2R4.jpg?s=128&g=1", "display_name": "edtheprogrammerguy", "link": "https://stackoverflow.com/users/2376156/edtheprogrammerguy"}, "edited": false, "score": 0, "creation_date": 1503522792, "post_id": 45849284, "comment_id": 78656897, "body": "What code are you using to write the bytes?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1503522819, "post_id": 45849284, "comment_id": 78656908, "body": "just open your file in binary mode <code>fopen(&quot;file.out&quot;,&quot;wb&quot;)</code> to avoid linefeed conversion"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1503523006, "creation_date": 1503523006, "answer_id": 45849407, "question_id": 45849284, "link": "https://stackoverflow.com/questions/45849284/creating-mid-file-writing-a-n-causes-r-n-in-windows/45849407#45849407", "title": "creating .mid file: writing a &#39;\\n&#39; causes &#39;\\r\\n&#39; in Windows", "body": "<p>On linux/unix, it doesn't matter whether you specify <code>\"wb\"</code> or <code>\"w\"</code> to create a file.</p>\n\n<p>But creating a text file using <code>fopen</code> in windows means that all <code>\\n</code> are converted to <code>\\r\\n</code>, so if you're using this to create binary files, the binary files will be \"corrupt\" if there are some bytes with value \"10\" (linefeed)</p>\n\n<p>Simple solution: always use <code>fopen(\"file.bin\",\"wb\")</code> when creating a binary file, on all platforms so your code is portable.</p>\n"}], "owner": {"reputation": 15, "user_id": 8508404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014089265a672a2723edff54b0f3ffd0?s=128&d=identicon&r=PG&f=1", "display_name": "Sollertis", "link": "https://stackoverflow.com/users/8508404/sollertis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 45849407, "answer_count": 1, "score": 1, "last_activity_date": 1503524077, "creation_date": 1503522440, "last_edit_date": 1503524077, "question_id": 45849284, "link": "https://stackoverflow.com/questions/45849284/creating-mid-file-writing-a-n-causes-r-n-in-windows", "title": "creating .mid file: writing a &#39;\\n&#39; causes &#39;\\r\\n&#39; in Windows", "body": "<p>I have created a <code>.mid</code> file by writing bytes to a file and save it as <code>.midi</code>. I can run it and it works, but there are some special cases where it does not.</p>\n\n<p>If I write a byte containing <code>\\n</code> (ASCII <code>10</code>) then it will instead write 2 bytes <code>\\r\\n</code>, which makes the <code>.mid</code> not runnable. (This is normal for Windows machine to do, but not desirable in my case.) An example of writing <code>\\n</code> could be when picking the key which is being represented by <code>\\n</code>. </p>\n\n<p>Is there a workaround to write <code>\\n</code> and not <code>\\r\\n</code> or another way to make sure that byte written is ASCII <code>10</code> on a Windows machine? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "gcc", "macros", "c-preprocessor", "preprocessor"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 4, "creation_date": 1503520907, "post_id": 45848866, "comment_id": 78656044, "body": "No. You should generate the source. The preprocessor can concatenate tokens but not split them, and it&#39;s altogether quite limited."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 2, "creation_date": 1503521040, "post_id": 45848866, "comment_id": 78656100, "body": "BTW: you mean <code>uint8_t aes_key[] = {0x3B, Ox71, 0x16, 0xE6, 0x9E, 0x22, 0x22, 0x95, ...}</code> (note the <code>[]</code>), right?"}, {"owner": {"reputation": 611, "user_id": 1309032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tvx5A.jpg?s=128&g=1", "display_name": "Motla", "link": "https://stackoverflow.com/users/1309032/motla"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1503521161, "post_id": 45848866, "comment_id": 78656161, "body": "@StephanLechner indeed, just corrected it. thanks!"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 3, "creation_date": 1503521206, "post_id": 45848866, "comment_id": 78656189, "body": "use any other tool (even another program in C ) to create an .h file, then compile. All in the makefile"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1503521264, "post_id": 45848866, "comment_id": 78656214, "body": "Alternatively, you could split the string into integer sized chunks, or you could simply use the string as a string and parse it at runtime, saving  the individual bytes into an array. Unless you have many thousands of such strings, the few extra cycles spent at runtime shouldn&#39;t be noticable."}, {"owner": {"reputation": 611, "user_id": 1309032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tvx5A.jpg?s=128&g=1", "display_name": "Motla", "link": "https://stackoverflow.com/users/1309032/motla"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503521431, "post_id": 45848866, "comment_id": 78656304, "body": "@PeterJ_01 good idea, like a pre-build CLI script. complexifies the setup a bit but it will work!"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1503521737, "post_id": 45848866, "comment_id": 78656443, "body": "Or just a function, why don&#39;t you initialize the array in a function? You don;t need to allocate it dynamically."}, {"owner": {"reputation": 611, "user_id": 1309032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tvx5A.jpg?s=128&g=1", "display_name": "Motla", "link": "https://stackoverflow.com/users/1309032/motla"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1503522024, "post_id": 45848866, "comment_id": 78656558, "body": "@PSkocik sure, but the string takes twice the ROM size of the uint8_t array, plus the code to convert it and RAM to store the byte key. Not an ideal solution for an embedded device..."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1503522638, "post_id": 45848866, "comment_id": 78656834, "body": "An alternative may be to set the parameter to a format more suitable for the C side (e.g. a string literal like <code>&quot;\\x3b\\x71\\x16...&quot;</code>) and change the other post-build script to make it accept it."}, {"owner": {"reputation": 611, "user_id": 1309032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tvx5A.jpg?s=128&g=1", "display_name": "Motla", "link": "https://stackoverflow.com/users/1309032/motla"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1503522898, "post_id": 45848866, "comment_id": 78656939, "body": "@MatteoItalia great idea! had not thought about that. thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1503523536, "post_id": 45849366, "comment_id": 78657201, "body": "This works in C++ (although I&#39;m not sure that the compiler is required to evaluate it at compile-time), but not in C: &quot;test.c:13:22: error: initializer element is not constant&quot;."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1503523773, "post_id": 45849366, "comment_id": 78657298, "body": "@Matteo Italia: Hmm. for me it works: <code>gcc -std=c99 main.c -o main .&#47;main 3B 71 16 E6 9E 22 22 95 16 3F F1 CA A1 68 1F AC</code> using clang/LLVM8.0."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1503524116, "post_id": 45849366, "comment_id": 78657424, "body": "<a href=\"https://ideone.com/pq3Zgy\" rel=\"nofollow noreferrer\">ideone.com/pq3Zgy</a>; same result on my machine with gcc 6.3; clang 4 instead compiles it fine. To me the error is not unexpected - operations involving strings (however known at compile time) have never been treated as constant values."}, {"owner": {"reputation": 611, "user_id": 1309032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tvx5A.jpg?s=128&g=1", "display_name": "Motla", "link": "https://stackoverflow.com/users/1309032/motla"}, "edited": false, "score": 0, "creation_date": 1503524239, "post_id": 45849366, "comment_id": 78657483, "body": "@StephanLechner awesome answer!!! took me a while to understand it, but it&#39;s exactly what I was looking for. thanks a lot for your help! unfortunately I have the same error than Matteo with GCC (error: initializer element is not constant). I guess it&#39;s because it don&#39;t like the KEY+x... Any workaround? Would it help if the key is surrounded by double quotes and we call K[x]?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1503524520, "post_id": 45849366, "comment_id": 78657597, "body": "You can make it work moving the array inside a function, to workaround the rule that is violated here (<i>All the expressions in an initializer for an object that has static storage duration shall be constant expressions or string literals.</i>, C99 &#167;6.7.8 &#182;4); again, notice that <i>in theory</i> this could delay the calculation at runtime (although in practice gcc resolves it completely at compile time)."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1503524966, "post_id": 45849366, "comment_id": 78657804, "body": "Ok, so, checking the standard both gcc and clang are right; C99 &#167;6.7.8 &#182;4 mandates a constant expression for initialization of static storage duration objects (the idea being that their value should be baked straight into the executable); at &#167;6.6 &#182;7 it&#39;s explained that initializers require actually <i>arithmetic constant expressions</i> (or NULL or address constants +/- an integer constant expression); arithmetic constant expressions in turn may only contain integer/character/fp/enum constants and sizeof expressions as operands, so no string literals (which may be used in address constants, but ..."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1503525045, "post_id": 45849366, "comment_id": 78657832, "body": "... only to derive an address; no <i>actual</i> dereferencing is allowed). So, gcc is technically correct; clang&#39;s behavior is allowed as well, as &#182;10 says that &quot;An implementation may accept other forms of constant expressions.&quot;. However, relying on this of course makes the code non-portable."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1503525340, "post_id": 45849366, "comment_id": 78657967, "body": "does it work for &#39;odd&#39; number of digits in the line?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1503608017, "post_id": 45849366, "comment_id": 78700404, "body": "@Serge: yes; one would have to adapt it then to `HEXTONIBBLE(KEY+0), HEXTOBYTE(KEY+1), HEXTOBYTE(KEY+3),...&#39;"}, {"owner": {"reputation": 611, "user_id": 1309032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tvx5A.jpg?s=128&g=1", "display_name": "Motla", "link": "https://stackoverflow.com/users/1309032/motla"}, "edited": false, "score": 0, "creation_date": 1503694806, "post_id": 45849366, "comment_id": 78738170, "body": "I made some tests today, seems that GCC doesn&#39;t resolve the byte array at compile time when declaration is made inside a function (Matteo&#39;s workaround). There is a 36 byte difference in the compiled binary... too bad :( I guess it&#39;s not possible with GCC, I marked this answer as accepted for C++ or other compilers. Thanks a lot for your help guys!"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 5, "last_activity_date": 1503523124, "last_edit_date": 1503523124, "creation_date": 1503522811, "answer_id": 45849366, "question_id": 45848866, "link": "https://stackoverflow.com/questions/45848866/pre-processor-macro-to-convert-an-hex-string-to-a-byte-array/45849366#45849366", "title": "Pre-processor macro to convert an hex string to a byte array", "body": "<p>A bit clumsy, but if you know the length of your key in advance you could approach it as follows:</p>\n\n<ol>\n<li>define a macro <code>HEXTONIBBLE</code> that translates a hex digit into a number</li>\n<li>define a macro <code>HEXTOBYTE</code> that uses <code>HEXTONIBBLE</code> to get a byte from a hex</li>\n<li>initialize your array with <code>HEXTOBYTE</code> parameterized correctrly</li>\n</ol>\n\n<p>If your <code>KEY</code> is not in form of a string, i.e. enclosed in double quotes, then use the stringify-operator <code>#</code> (with a trick using a variadic macro in order to expand a macro when used as parameter or another one):</p>\n\n<pre><code>//           01234567890123456789012345678901\n#define K    3B7116E69E222295163FF1CAA1681FAC\n\n#define STRINGIFY_HELPER(A) #A\n#define STRINGIFY(...) STRINGIFY_HELPER(__VA_ARGS__)\n\n#define KEY  STRINGIFY(K)\n\n#define HEXTONIBBLE(c) (*(c) &gt;= 'A' ? (*(c) - 'A')+10 : (*(c)-'0'))\n\n#define HEXTOBYTE(c) (HEXTONIBBLE(c)*16 + HEXTONIBBLE(c+1))\n\nuint8_t aes_key[] = {\n    HEXTOBYTE(KEY+0),\n    HEXTOBYTE(KEY+2),\n    HEXTOBYTE(KEY+4),\n    HEXTOBYTE(KEY+6),\n    HEXTOBYTE(KEY+8),\n    HEXTOBYTE(KEY+10),\n    HEXTOBYTE(KEY+12),\n    HEXTOBYTE(KEY+14),\n    HEXTOBYTE(KEY+16),\n    HEXTOBYTE(KEY+18),\n    HEXTOBYTE(KEY+20),\n    HEXTOBYTE(KEY+22),\n    HEXTOBYTE(KEY+24),\n    HEXTOBYTE(KEY+26),\n    HEXTOBYTE(KEY+28),\n    HEXTOBYTE(KEY+30)\n};\n\nint main() {\n\n    for (int i=0; i&lt;sizeof(aes_key); i++) {\n        printf(\"%02X \", aes_key[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>3B 71 16 E6 9E 22 22 95 16 3F F1 CA A1 68 1F AC \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 1309032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tvx5A.jpg?s=128&g=1", "display_name": "Motla", "link": "https://stackoverflow.com/users/1309032/motla"}, "is_accepted": false, "score": 2, "last_activity_date": 1503752180, "creation_date": 1503752180, "answer_id": 45895612, "question_id": 45848866, "link": "https://stackoverflow.com/questions/45848866/pre-processor-macro-to-convert-an-hex-string-to-a-byte-array/45895612#45895612", "title": "Pre-processor macro to convert an hex string to a byte array", "body": "<p>This does not answer the original question but if the key can be written in this format instead:</p>\n\n<pre><code>#define AES_KEY 3B,71,16,E6,9E,22,22,95,16,3F,F1,CA,A1,68,1F,AC\n</code></pre>\n\n<p>The following macro will work, even under GCC:</p>\n\n<pre><code>#define BA(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p) {0x##a,0x##b,0x##c,0x##d,\\\n0x##e,0x##f,0x##g,0x##h,0x##i,0x##j,0x##k,0x##l,0x##m,0x##n,0x##o,0x##p}\n\n#define TO_BYTEARRAY(...) BA(__VA_ARGS__)\n\nuint8_t aes_key[] = TO_BYTEARRAY(AES_KEY);\n</code></pre>\n\n<p>See <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Concatenation.html\" rel=\"nofollow noreferrer\">Concatenation</a>, <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Argument-Prescan.html\" rel=\"nofollow noreferrer\">Argument Prescan</a> and <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html\" rel=\"nofollow noreferrer\">Variadic Macros</a></p>\n"}], "owner": {"reputation": 611, "user_id": 1309032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tvx5A.jpg?s=128&g=1", "display_name": "Motla", "link": "https://stackoverflow.com/users/1309032/motla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2794, "favorite_count": 0, "accepted_answer_id": 45849366, "answer_count": 2, "score": 3, "last_activity_date": 1503752180, "creation_date": 1503520573, "last_edit_date": 1503521067, "question_id": 45848866, "link": "https://stackoverflow.com/questions/45848866/pre-processor-macro-to-convert-an-hex-string-to-a-byte-array", "title": "Pre-processor macro to convert an hex string to a byte array", "body": "<p>I've defined an AES-128 key as a build symbol inside my IDE, so that it calls GCC like this:</p>\n\n<pre><code>arm-none-eabi-gcc -D\"AES_KEY=3B7116E69E222295163FF1CAA1681FAC\" ...\n</code></pre>\n\n<p>(which is equivalent to <code>#define AES_KEY 3B7116E69E222295163FF1CAA1681FAC</code>)</p>\n\n<p>The advantage is that the same symbol can also be passed automatically as a parameter to a post-build CLI script that encrypts the compiled code with this key (e.g. for a secure firmware update)...</p>\n\n<p>But how to store this key as a byte array in \n my code?\nI would like to define a pre-processor macro which does the conversion:</p>\n\n<pre><code>uint8_t aes_key[] = { SPLIT_MACRO(AES_KEY) };\n</code></pre>\n\n<p>to</p>\n\n<pre><code>uint8_t aes_key[] = {0x3B, 0x71, 0x16, 0xE6, 0x9E, 0x22, 0x22, 0x95, ...};\n</code></pre>\n\n<p>In other words, could the GCC pre-processor split the key string in 2-char blocks and add \"<code>, 0x</code>\" between them?</p>\n"}, {"tags": ["c", "io", "linux-kernel", "nfs", "nfsclient"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1503522541, "post_id": 45848862, "comment_id": 78656783, "body": "What behavior do you see on the older versions?"}, {"owner": {"reputation": 3210, "user_id": 1071840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/26d2a4d67f24f306427f359252b4a9eb?s=128&d=identicon&r=PG", "display_name": "user1071840", "link": "https://stackoverflow.com/users/1071840/user1071840"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1503523883, "post_id": 45848862, "comment_id": 78657342, "body": "@AndrewHenle, When I simultaneously run a writer and a reader on 2 different machines, such that the writer sleeps for 4min after 500+ iterations of the loop. I note that application prints a log that it has written <code>6500xnumber_of_iterations</code> bytes, but the reader claims to be few bytes short. This is seen only on 4.9 and not on 4.1."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1503523894, "post_id": 45848862, "comment_id": 78657346, "body": "O_DSYNC only refers to file buffers in your process.  NFS has its own SYNC option for doing immediate writes vs. caching.  You also would have to set sync in the NFS export."}, {"owner": {"reputation": 3210, "user_id": 1071840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/26d2a4d67f24f306427f359252b4a9eb?s=128&d=identicon&r=PG", "display_name": "user1071840", "link": "https://stackoverflow.com/users/1071840/user1071840"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1503523945, "post_id": 45848862, "comment_id": 78657361, "body": "@stark, NFS mount is configured to write through, not use cache"}], "answers": [{"tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": false, "score": 0, "last_activity_date": 1503524935, "creation_date": 1503524935, "answer_id": 45849809, "question_id": 45848862, "link": "https://stackoverflow.com/questions/45848862/nfs-client-aggregates-write-requests-even-when-application-opens-file-with-o-dsy/45849809#45849809", "title": "NFS client aggregates write requests even when application opens file with O_DSYNC", "body": "<p>Device writes can only be multiples of the storage block size:  512 bytes for old disks or 4096 for many new disks.  Since files aren't aligned with disk blocks, this could cause a read-modify-write of two disk blocks resulting in an 8k write to the device, even though the file write is much smaller.</p>\n"}], "owner": {"reputation": 3210, "user_id": 1071840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/26d2a4d67f24f306427f359252b4a9eb?s=128&d=identicon&r=PG", "display_name": "user1071840", "link": "https://stackoverflow.com/users/1071840/user1071840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503524935, "creation_date": 1503520568, "last_edit_date": 1503523660, "question_id": 45848862, "link": "https://stackoverflow.com/questions/45848862/nfs-client-aggregates-write-requests-even-when-application-opens-file-with-o-dsy", "title": "NFS client aggregates write requests even when application opens file with O_DSYNC", "body": "<p>I am running an application which opens a file in an NFS mount with <code>O_DSYNC</code> option. The application then writes <code>6500</code> bytes of data 1000 times to the file in a loop. </p>\n\n<p>I monitored the client behavior and noticed that it was sending the writes to the underlying filesystem in batches of 4096 and 8192 bytes. </p>\n\n<p>As per <code>man open</code>, Write operations on a file opened with <code>O_DSYNC</code> will complete according to the requirements of synchronized I/O data integrity completion. It further says that,</p>\n\n<pre><code>O_DSYNC provides synchronized I/O data integrity completion, meaning write operations will flush data to the underlying hardware, but will only flush metadata updates that are required to allow a subsequent read operation to complete successfully. \n</code></pre>\n\n<p>I assumed that with <code>O_DSYNC</code>, <code>write()</code> call will not return until the underlying filesystem has successfully written the data. That's not what's happening here. NFS client is caching writes and flushing them in multiples of 4k. Why is this so?</p>\n\n<p>Note that, I am using an Amazon EC2 instance running Linux version 4.9, with a page size of 4096. </p>\n"}, {"tags": ["c", "operators", "logical-operators", "short-circuiting"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1503520828, "post_id": 45848858, "comment_id": 78656004, "body": "Well, the answer is in the title of your question. What is confusing you?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1503520834, "post_id": 45848858, "comment_id": 78656007, "body": "What is your understanding of short-circuit evaluation?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1503520921, "post_id": 45848858, "comment_id": 78656052, "body": "<a href=\"https://softwareengineering.stackexchange.com/questions/201896/what-is-short-circuiting-in-c-like-languages\">What is \u201cshort-circuiting\u201d in C like languages?</a>"}, {"owner": {"reputation": 41, "user_id": 8508277, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DSzE1fsfFA8/AAAAAAAAAAI/AAAAAAAAA-s/_5hfCRjYBXE/photo.jpg?sz=128", "display_name": "drawtine", "link": "https://stackoverflow.com/users/8508277/drawtine"}, "edited": false, "score": 0, "creation_date": 1503521299, "post_id": 45848858, "comment_id": 78656231, "body": "You&#39;re right sorry, my english is bad so I didn&#39;t really understand Wikipedia. Thanks everyone"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503524228, "post_id": 45848858, "comment_id": 78657478, "body": "Related:<a href=\"https://stackoverflow.com/questions/31437095/conditional-execution-based-on-short-circuit-logical-operation\" title=\"conditional execution based on short circuit logical operation\">stackoverflow.com/questions/31437095/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1503521482, "post_id": 45848954, "comment_id": 78656322, "body": "The other key things to remember are that assignment has very low precedence (only the comma operator is lower) and that <code>a || b</code> evaluates to <code>0</code> or <code>1</code>."}], "tags": [], "owner": {"reputation": 1489, "user_id": 853961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ff9b77e9384eb22aa0932be8e98be875?s=128&d=identicon&r=PG", "display_name": "ailnlv", "link": "https://stackoverflow.com/users/853961/ailnlv"}, "is_accepted": true, "score": 5, "last_activity_date": 1503520959, "creation_date": 1503520959, "answer_id": 45848954, "question_id": 45848858, "link": "https://stackoverflow.com/questions/45848858/short-circuit-evaluation-on-c/45848954#45848954", "title": "Short-circuit evaluation on C", "body": "<p>The <code>&amp;&amp;</code> operator uses <a href=\"https://en.wikipedia.org/wiki/Lazy_evaluation\" rel=\"noreferrer\">lazy evaluation</a>. If either side of the <code>&amp;&amp;</code> operator is <code>false</code>, then the whole expression is <code>false</code>. </p>\n\n<p>C checks the truth value of the left hand side of the operator, which in your case is <code>0</code>. Since <code>0</code> is  false in c, then the right hand side expression of the operation, <code>(a = b = 777)</code>, is never evaluated.</p>\n\n<p>The second case is similar, except that <code>||</code> returns <code>true</code> if the left hand side expression returns <code>true</code>. Also remember that in c, anything that is not <code>0</code> is considered <code>true</code>.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 7, "last_activity_date": 1503522544, "last_edit_date": 1503522544, "creation_date": 1503522200, "answer_id": 45849239, "question_id": 45848858, "link": "https://stackoverflow.com/questions/45848858/short-circuit-evaluation-on-c/45849239#45849239", "title": "Short-circuit evaluation on C", "body": "<p>From the C Standard (6.5.13 Logical AND operator)</p>\n\n<blockquote>\n  <p>3 The &amp;&amp; operator shall <strong>yield 1 if both of its operands compare\n  unequal to 0; otherwise, it yields 0</strong>. The result has type int.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>4 Unlike the bitwise binary &amp; operator, the &amp;&amp; operator guarantees\n  left-to-right evaluation; if the second operand is evaluated, there is\n  a sequence point between the evaluations of the first and second\n  operands. <strong>If the first operand compares equal to 0, the second\n  operand is not evaluated.</strong></p>\n</blockquote>\n\n<p>In this expression statement</p>\n\n<pre><code>x = 0 &amp;&amp; (a = b = 777);\n</code></pre>\n\n<p>the first operand compares equal to 0. So the second operand is not evaluated that is the values of the variables <code>a</code> and <code>b</code> are not changed. So the variable <code>x</code> will be set to <code>0</code> according to the paragraph #3 of the section.</p>\n\n<p>From the C Standard (6.5.14 Logical OR operator)</p>\n\n<blockquote>\n  <p>3 The || operator <strong>shall yield 1 if either of its operands compare\n  unequal to 0; otherwise, it yields 0.</strong> The result has type int.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>4 Unlike the bitwise | operator, the || operator guarantees\n  left-to-right evaluation; if the second operand is evaluated, there is\n  a sequence point between the evaluations of the first and second\n  operands. I<strong>f the first operand compares unequal to 0, the second\n  operand is not evaluated.</strong></p>\n</blockquote>\n\n<p>In this expression statement </p>\n\n<pre><code>x = 777 || (a = ++b);\n</code></pre>\n\n<p>the first operand compares unequal to 0. So the second operand is not evaluated that is the values of the variables <code>a</code> and <code>b</code> are not changed.. So the variable <code>x</code> will be set to <code>1</code> according to the paragraph #3 of the section.</p>\n\n<p>If you will change the order of the operands in the expressions like</p>\n\n<pre><code>x = (a = b = 777) &amp;&amp; 0;\nx = (a = ++b) || 777;\n</code></pre>\n\n<p>you get the expected by you result.</p>\n"}], "owner": {"reputation": 41, "user_id": 8508277, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DSzE1fsfFA8/AAAAAAAAAAI/AAAAAAAAA-s/_5hfCRjYBXE/photo.jpg?sz=128", "display_name": "drawtine", "link": "https://stackoverflow.com/users/8508277/drawtine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2517, "favorite_count": 2, "accepted_answer_id": 45848954, "answer_count": 2, "score": 3, "last_activity_date": 1503522544, "creation_date": 1503520554, "last_edit_date": 1592644375, "question_id": 45848858, "link": "https://stackoverflow.com/questions/45848858/short-circuit-evaluation-on-c", "title": "Short-circuit evaluation on C", "body": "<p>I'm studying C from A Book on C by Kelley-Pohl, and there's this exercise that I don't understand:</p>\n<pre><code>int a = 0, b = 0, x;\n\nx = 0 &amp;&amp; (a = b = 777);\nprintf(&quot;%d %d %d\\n&quot;, a, b, x);\nx = 777 || (a = ++b);\nprintf(&quot;%d %d %d\\n&quot;, a, b, x);\n</code></pre>\n<p>They just say to imagine the output and compare it to the real one. I thought the output would have been</p>\n<blockquote>\n<p>777 777 0</p>\n<p>778 778 1</p>\n</blockquote>\n<p>but it is</p>\n<blockquote>\n<p>0 0 0</p>\n<p>0 0 1</p>\n</blockquote>\n"}, {"tags": ["android", "c", "compilation", "kernel"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503519135, "post_id": 45848497, "comment_id": 78655202, "body": "How do you compile it?"}, {"owner": {"reputation": 55, "user_id": 7619527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FT63AGxQ9g/AAAAAAAAAAI/AAAAAAAAAE8/6t9gsWP91qw/photo.jpg?sz=128", "display_name": "Federico Benedetti", "link": "https://stackoverflow.com/users/7619527/federico-benedetti"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503519221, "post_id": 45848497, "comment_id": 78655240, "body": "<code>export ARCH=arm64 &amp;&amp; export CROSS_COMPILE=..&#47;uber-7.x&#47;bin&#47;aarch64-linux-android- &amp;&amp; make name_defconfig &amp;&amp; make</code> Standard is -std=89"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503519246, "post_id": 45848497, "comment_id": 78655260, "body": "Remove <code>-std=89</code>"}, {"owner": {"reputation": 55, "user_id": 7619527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FT63AGxQ9g/AAAAAAAAAAI/AAAAAAAAAE8/6t9gsWP91qw/photo.jpg?sz=128", "display_name": "Federico Benedetti", "link": "https://stackoverflow.com/users/7619527/federico-benedetti"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503519279, "post_id": 45848497, "comment_id": 78655279, "body": "<code>-std=89</code> is into the Makefile, should i remove it anyway?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503519337, "post_id": 45848497, "comment_id": 78655315, "body": "Apparently the code is not conforming this standard version."}, {"owner": {"reputation": 55, "user_id": 7619527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FT63AGxQ9g/AAAAAAAAAAI/AAAAAAAAAE8/6t9gsWP91qw/photo.jpg?sz=128", "display_name": "Federico Benedetti", "link": "https://stackoverflow.com/users/7619527/federico-benedetti"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503520213, "post_id": 45848497, "comment_id": 78655721, "body": "Without using std=89 i get many more errors, i do need to fix that code in order to compile the whole kernel with standard C89"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503520259, "post_id": 45848497, "comment_id": 78655748, "body": "Is this your code or some third party that you have added to a vanilla kernel?"}, {"owner": {"reputation": 55, "user_id": 7619527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FT63AGxQ9g/AAAAAAAAAAI/AAAAAAAAAE8/6t9gsWP91qw/photo.jpg?sz=128", "display_name": "Federico Benedetti", "link": "https://stackoverflow.com/users/7619527/federico-benedetti"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503520967, "post_id": 45848497, "comment_id": 78656070, "body": "That file is the same as stock vanilla"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503522661, "post_id": 45848497, "comment_id": 78656841, "body": "Federico Benedetti -std=c99 I do not understand the reason of the ancient standard used, if the source is written according to newer one I do not believe Android ARM64 to be C89. Many of the develpers of it were not even planned at that time"}, {"owner": {"reputation": 55, "user_id": 7619527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FT63AGxQ9g/AAAAAAAAAAI/AAAAAAAAAE8/6t9gsWP91qw/photo.jpg?sz=128", "display_name": "Federico Benedetti", "link": "https://stackoverflow.com/users/7619527/federico-benedetti"}, "edited": false, "score": 0, "creation_date": 1503523755, "post_id": 45848497, "comment_id": 78657293, "body": "Unfortunately all kernels are made with -std=gnu89, even lastest 4.4.y are like that Do you know how to fix that error?"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 7619527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FT63AGxQ9g/AAAAAAAAAAI/AAAAAAAAAE8/6t9gsWP91qw/photo.jpg?sz=128", "display_name": "Federico Benedetti", "link": "https://stackoverflow.com/users/7619527/federico-benedetti"}, "is_accepted": false, "score": 0, "last_activity_date": 1503661868, "creation_date": 1503661868, "answer_id": 45880781, "question_id": 45848497, "link": "https://stackoverflow.com/questions/45848497/error-during-compilation-of-a-arm64-android-kernel/45880781#45880781", "title": "error during compilation of a ARM64 android kernel", "body": "<p>For everyone with the (kind of) same problem, this is the solution.</p>\n\n<p>The issue wasn't those lines that the compilator was telling me, but (in the same file) some lines before that. It was just some weird placed parenthesis, that were messing with the code after.</p>\n\n<p>If you got something like this, try to search deeper on the same file, you'll probably find something wrong with logic that is messing.</p>\n"}], "owner": {"reputation": 55, "user_id": 7619527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6FT63AGxQ9g/AAAAAAAAAAI/AAAAAAAAAE8/6t9gsWP91qw/photo.jpg?sz=128", "display_name": "Federico Benedetti", "link": "https://stackoverflow.com/users/7619527/federico-benedetti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503661868, "creation_date": 1503519015, "last_edit_date": 1503519077, "question_id": 45848497, "link": "https://stackoverflow.com/questions/45848497/error-during-compilation-of-a-arm64-android-kernel", "title": "error during compilation of a ARM64 android kernel", "body": "<p>Even with deep researches i couldn't find the answer.\nI'm compiling an Android ARM64 kernel, and in this file</p>\n\n<blockquote>\n  <p>drivers/misc/qcom/qdsp6v2/audio_amrwbplus</p>\n</blockquote>\n\n<p>i have those lines:</p>\n\n<pre><code>119 static long audio_ioctl(struct file *file, unsigned int cmd,\n120                 unsigned long arg)\n121 {\n122 struct q6audio_aio *audio = file-&gt;private_data;\n123 int rc = 0;\n\n    ...\n</code></pre>\n\n<p>that throws this error:</p>\n\n<pre><code>drivers/misc/qcom/qdsp6v2/audio_amrwbplus.c: In function 'audio_ioctl_shared':\ndrivers/misc/qcom/qdsp6v2/audio_amrwbplus.c:121:13: error: invalid storage \nclass for function 'audio_ioctl'\nstatic long audio_ioctl(struct file *file, unsigned int cmd,\n         ^\ndrivers/misc/qcom/qdsp6v2/audio_amrwbplus.c:121:1: warning: ISO C90 forbids \nmixed declarations and code [-Wdeclaration-after-statement]\nerror, forbidden warning: audio_amrwbplus.c:121\n</code></pre>\n\n<p>I'm compiling with both GCC 7.x and 5.x, both same result</p>\n\n<p>Also i've tried to set </p>\n\n<blockquote>\n  <p>-Wno-declaration-after-statement </p>\n</blockquote>\n\n<p>into Makefile, with no luck</p>\n"}, {"tags": ["c", "swift"], "comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1503518062, "post_id": 45848175, "comment_id": 78654685, "body": "Swift cannot import variables of incomplete type. The linked-to Q&amp;A shows a possible workaround."}, {"owner": {"reputation": 11, "user_id": 7405696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BYGcX.jpg?s=128&g=1", "display_name": "jmathews", "link": "https://stackoverflow.com/users/7405696/jmathews"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 1, "creation_date": 1503522610, "post_id": 45848175, "comment_id": 78656821, "body": "Thank you @MartinR for helping me find a solution. After reading the post you linked to, I was able to resolve my issue by introducing a new header that defines pointers to the consts:      <code>#include &quot;custom_params.h&quot;</code>      <code>static struct custom_params_struct * __nonnull PARAM_SET_1_ptr = &amp;PARAM_SET_1;</code>  With this new header included in my module map, Swift now has access to PARAM_SET_1_ptr as an OpaquePointer."}], "owner": {"reputation": 11, "user_id": 7405696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BYGcX.jpg?s=128&g=1", "display_name": "jmathews", "link": "https://stackoverflow.com/users/7405696/jmathews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1503518023, "answer_count": 0, "score": 1, "last_activity_date": 1503517997, "creation_date": 1503517645, "last_edit_date": 1503517997, "question_id": 45848175, "link": "https://stackoverflow.com/questions/45848175/accessing-constants-with-opaque-types-defined-in-c-header-from-swift", "closed_reason": "Duplicate", "title": "Accessing constants with opaque types defined in C header from Swift", "body": "<p>I have a library binary (a <code>lib*.a</code> file) and the corresponding header. I have tried both the <a href=\"https://spin.atomicobject.com/2015/02/23/c-libraries-swift/\" rel=\"nofollow noreferrer\">Obj-C Bridging Header method and the Module Map method</a> to make the API available to my Swift code.</p>\n\n<p>In Swift, I can access <em>almost</em> everything in the header's API. What I can't access is opaque structs, and constants with opaque structs as their type. For example, this is in the header, but Swift says the module doesn't have this member:</p>\n\n<pre><code>typedef struct custom_params_struct custom_params;\nextern const custom_params PARAM_SET_1;\nextern const custom_params PARAM_SET_2;\nextern const custom_params PARAM_SET_3;\n</code></pre>\n\n<p>If I add a (fake) definition for the opaque struct and add that to my module map, like this:</p>\n\n<pre><code>struct custom_params_struct {\n    int field_1;\n    int field_2;\n};\n</code></pre>\n\n<p>then the contants <code>PARAM_SET_1</code> etc are available.</p>\n\n<p>Assuming I don't know the real struct definition, how do I access these consts from Swift?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503517313, "post_id": 45848084, "comment_id": 78654311, "body": "This is the &quot;overlapping intervals&quot; algorithm or it&#39;s variation. Google it up."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503518121, "post_id": 45848084, "comment_id": 78654717, "body": "Step 1 easy: insure <code>addr &gt;= arr[i].start_addr</code> for all <code>i</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1503518206, "post_id": 45848084, "comment_id": 78654760, "body": "A <i>portable</i> answer would be easier if <code>addr</code> and <code>len</code> were the same type or at least the same <i>sign-ness</i>. else there are many corner cases with <code>int&#47;size_t</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1503522522, "post_id": 45848084, "comment_id": 78656777, "body": "Is the data in <code>arr</code> reliably sorted by start address, or merely coincidentally sorted in the sample data?  Do any of the ranges in the data overlap, or are they all disjoint, even though some ranges are adjacent?  Again, the sample data hints at &quot;all disjoint&quot;, but it could be misleading.  And are the types are integer types so we don&#39;t have to deal with floating point issues?  The answers to these questions critically affect the possible algorithms."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503522870, "post_id": 45848084, "comment_id": 78656924, "body": "@JonathanLeffler Good point.  &quot;within the union of all of these ranges&quot; can be interpreted different ways."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503523048, "post_id": 45848084, "comment_id": 78656999, "body": "Tyler, Should <code>start_addr = 170, length = 10</code> result in <code>true</code> or <code>false</code> and explain why."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503523136, "post_id": 45848084, "comment_id": 78657043, "body": "Also, if the data isn&#39;t conveniently organized, then you should determine how often you&#39;ll be searching and decide whether it is worth the effort to preprocess the array into a sorted array of disjoint, non-contiguous intervals, so the search becomes easy \u2014 find the largest start less than equal to the one being searched for (binary search) and check that it covers the entire interval.  You might note the smallest start and largest end addresses, and the biggest size.  If your candidate interval is too big or falls outside the range of possibly valid addresses, you can eliminate it quickly."}, {"owner": {"reputation": 575, "user_id": 3640355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8d07f5ffd8f9f987c2c15eb4887dcb06?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3640355/tyler"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1503580442, "post_id": 45848084, "comment_id": 78683357, "body": "@JonathanLeffler The data is not necessarily sorted, and the types will all be integer types. Also, the address will never be negative, so that can be a <code>uint32_t</code>, my bad."}, {"owner": {"reputation": 575, "user_id": 3640355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8d07f5ffd8f9f987c2c15eb4887dcb06?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3640355/tyler"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1503580600, "post_id": 45848084, "comment_id": 78683483, "body": "@chux <code>start_addr = 170, length = 10</code> should return <code>true</code> because the two sections <code>.start_addr = 150, ...  .start_addr = 175</code> will fully contain it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503603160, "post_id": 45848084, "comment_id": 78697977, "body": "Given the &#39;not sorted&#39; and &#39;not disjoint&#39; aspects, then I think you&#39;d probably do best to process the list to make an ordered set of the ranges covered by the static constant array \u2014 making each range in that list maximal and not contiguous with any other range.  That then makes the searching relatively straight-forward.  The build time for the optimized list is not extortionate, but not trivial either, at least, not if there are a lot of overlapping or contiguous ranges (and if you can find range 1000:100, then later 1200:100, and then later again 1100:100, that complicates the build)."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1503521090, "post_id": 45848867, "comment_id": 78656125, "body": "Pre-processing the <code>const arr[]</code> makes sense."}], "tags": [], "owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "is_accepted": false, "score": 2, "last_activity_date": 1503520575, "creation_date": 1503520575, "answer_id": 45848867, "question_id": 45848084, "link": "https://stackoverflow.com/questions/45848084/determine-if-a-range-is-contained-within-a-set-of-ranges/45848867#45848867", "title": "Determine if a range is contained within a set of ranges", "body": "<p>If there aren't many intervals and you just want to get the job done without thinking about algorithms, just search the array linearly in <code>O(n)</code>. If the intervals in the list don't overlap, sort them and use <a href=\"https://en.wikipedia.org/wiki/Binary_search_algorithm\" rel=\"nofollow noreferrer\">binary search</a> (<code>O(log n)</code>). If they overlap, <a href=\"https://en.wikipedia.org/wiki/Interval_tree\" rel=\"nofollow noreferrer\">interval tree</a> is the usual data structure to choose (again <code>O(log n)</code>), but it would be simpler to merge overlapping or adjacent intervals and do a binary search.</p>\n\n<p>If your addresses are really small integers, and <code>O(log n)</code> is too slow for you (wait, what?), you can use an array filled with all used addresses to trade a bunch of space for <code>O(1)</code> answers to your question, but it's unlikely you'll need to going this path.</p>\n\n<p>You can either merge adjacent ranges during preprocessing (i.e. create the union before hand), or you will just have to handle this special case.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503611886, "post_id": 45866723, "comment_id": 78701900, "body": "Note: if the sections are ordered by <code>addr</code> <code>if (!isEncapsulated_helper(Laddr, Llen, sec + 1, n-i-1)) {</code> simplifies to <code>if (1) {</code> Allowing the computation to complete in O(n) ."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1503592561, "last_edit_date": 1503592561, "creation_date": 1503591990, "answer_id": 45866723, "question_id": 45848084, "link": "https://stackoverflow.com/questions/45848084/determine-if-a-range-is-contained-within-a-set-of-ranges/45866723#45866723", "title": "Determine if a range is contained within a set of ranges", "body": "<blockquote>\n  <p>The primary difficulty I'm having is finding a way to account for the fact that the range provided may fall over the boundary of two defined ranges</p>\n</blockquote>\n\n<p>It is even worse.  A range may fall over many defined ranges and the order is interrogation may divide up what is left to match.  Consider the below where the <code>x</code> range is first found in <code>a</code>.  Later the left portion of <code>x</code> needs to match <code>b</code> and the right portion needs to match <code>c</code></p>\n\n<pre><code>Range:      xxxxxxxxxxxx\nDef range 1 ___aaaaaa___\nDef range 2 bbb_________\nDef range 3 _________ccc\n</code></pre>\n\n<p>Some  lightly tested code.  The main idea to to take the left and right address in range <code>addr/len</code> and test those in each section.  If it is trivially  all to one side, continue with next section.  Otherwise, shorten <code>addr/len</code>.  This possibly may divide into 2 portions. Then continue with the next section.</p>\n\n<pre><code>typedef struct {\n  int start_addr;\n  size_t length;\n} Section;\n\n// Is point `a` in the section?\n// return left:-1, right:1, else 0\nstatic int LeftInRight(intmax_t a, const Section *sec) {\n  if (a &lt; sec-&gt;start_addr) return -1;\n  if (a &gt;= sec-&gt;start_addr + (intmax_t) sec-&gt;length) return 1;\n  return 0;\n}\n\nbool isEncapsulated_helper(intmax_t addr, size_t len, const Section *sec, size_t n) {\n  for (size_t i = 0; i&lt;n; i++) {\n    if (len == 0) return true;\n    int LSide =  LeftInRight(addr, &amp;sec[i]);\n    if (LSide &gt; 0) continue;  // all of addr/len is to the right of this section\n    int RSide =  LeftInRight(addr + (intmax_t) (len - 1), &amp;sec[i]);\n    if (RSide &lt; 0) continue;  // all of addr/len is to the left of this section\n\n    if (LSide &lt; 0) {\n      // portion of addr/len is to the left of this section\n      intmax_t Laddr = addr;\n      size_t Llen = (size_t) (sec[i].start_addr - addr);\n      if (!isEncapsulated_helper(Laddr, Llen, sec + 1, n-i-1)) {\n        return false;\n      }\n    }\n    if (RSide &lt;= 0) return true;\n    // portion of addr/len is to the right of this section, continue with that\n    intmax_t Raddr = sec[i].start_addr + (intmax_t) sec[i].length;\n    size_t Rlen = (size_t) (addr + (intmax_t) len - Raddr);\n    addr = Raddr;\n    len = Rlen;\n  }\n  return len == 0;\n}\n</code></pre>\n\n<p>Test code</p>\n\n<pre><code>static const Section arr[] = { // x\n    { .start_addr = 0, .length = 100, }, // x\n    { .start_addr = 150, .length = 25, }, // x\n    { .start_addr = 175, .length = 25, }, };\n\n#define SECTION_N (sizeof arr/sizeof arr[0])\n\nbool isEncapsulated(int addr, size_t len) {\n  return isEncapsulated_helper(addr, len, arr, SECTION_N);\n}\n\nint main() {\n  printf(\"%d\\n\", isEncapsulated(170,10));\n}\n</code></pre>\n"}], "owner": {"reputation": 575, "user_id": 3640355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8d07f5ffd8f9f987c2c15eb4887dcb06?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3640355/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 45866723, "answer_count": 2, "score": 1, "last_activity_date": 1503609377, "creation_date": 1503517212, "last_edit_date": 1503609377, "question_id": 45848084, "link": "https://stackoverflow.com/questions/45848084/determine-if-a-range-is-contained-within-a-set-of-ranges", "title": "Determine if a range is contained within a set of ranges", "body": "<p>I have a set of ranges within an array. For example (but note that my set of ranges will be larger than this):</p>\n\n<pre><code>static const Section arr[] = {\n    {\n        .start_addr = 0,\n        .length = 100,\n    },\n    {\n        .start_addr = 150,\n        .length = 25,   \n    },\n    {\n        .start_addr = 175,\n        .length = 25,   \n    },\n\n    ...\n}\n</code></pre>\n\n<p>The data is not necessarily sorted, and the types will all be integer types. Also, the address will never be negative, so that can be a <code>uint32_t</code>.</p>\n\n<p>I then want to query whether another range would be contained within the union of all of these ranges via a function such as:</p>\n\n<pre><code>bool isEncapsulated(uint32_t addr, size_t len){\n    // Here I need some sort of algorithm to determine whether \n    // it is fully encapsulated. \n}\n</code></pre>\n\n<p>The primary difficulty I'm having is finding a way to account for the fact that the range provided may fall over the boundary of two defined ranges. eg. if <code>start_addr = 170, length = 10</code> where it falls over the boundary of two of the defined ranges. </p>\n\n<p>Is there an elegant way of achieving this?</p>\n\n<p>Edit:</p>\n\n<p><a href=\"https://i.imgur.com/aGcvQwW.jpg\" rel=\"nofollow noreferrer\">Here's</a> a graphical depiction of what I'm trying to do. Essentially the ranges 1, 2, 3 are what I will be defining in my array. I will then be requesting whether or not any of the ranges A-F are encapsulated within it. So, D and E are the only two that aren't. I don't just want overlap, I want the range to be fully contained within the predefined ranges. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503515826, "post_id": 45847726, "comment_id": 78653598, "body": "Aside: <code>char ch;</code> ==&gt; <code>int ch;</code> because the return values / arguments for the functions used are of type <code>int</code>. Even <code>&#39;A&#39;</code> is of type <code>int</code>."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503515960, "post_id": 45847726, "comment_id": 78653669, "body": "Arrays are passed by pointers in C."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1503515969, "post_id": 45847726, "comment_id": 78653671, "body": "The array is passed to the function as a pointer and each element can be changed."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1503516004, "post_id": 45847726, "comment_id": 78653698, "body": "The C language does not have string &quot;values&quot;. When you pass a &quot;string&quot; to a function, what you&#39;re really passing is (a local copy of) the memory address at which the string starts. It then assumes that the character values at that location and following ones up to a terminating 0 are your string."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1503516023, "post_id": 45847726, "comment_id": 78653715, "body": "<code>void read_word(int counts[26])</code> is equivalent to <code>void read_word(int* counts)</code> , arguments cannot be arrays, they will always decay to pointers."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1503516029, "post_id": 45847726, "comment_id": 78653721, "body": "The array passed to a function decays to a pointer, so although the function argument is <code>int counts[26]</code> it behaves as <code>int *counts</code> and takes no notice of the length <code>26</code> (unless a 2D array)."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 5182778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe165ff91015729c26d1f462d2e9c678?s=128&d=identicon&r=PG&f=1", "display_name": "asd", "link": "https://stackoverflow.com/users/5182778/asd"}, "edited": false, "score": 0, "creation_date": 1503516066, "post_id": 45847803, "comment_id": 78653747, "body": "Perfect, thank you. I must have missed that in the book I&#39;m reading from."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1503521065, "post_id": 45847803, "comment_id": 78656112, "body": "The closest thing to <i>reference types</i>  mentioned in the Standard is <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.5p20\" rel=\"nofollow noreferrer\"><i>referenced type</i></a> but this pertains to pointers, not arrays. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.5p20\" rel=\"nofollow noreferrer\">Arrays are <i>derived types</i>, and also <i>aggregate types</i></a>; an array is not a pointer, but &quot;a contiguously allocated nonempty set of objects with a particular member object type&quot;."}], "tags": [], "owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "is_accepted": false, "score": 1, "last_activity_date": 1503516011, "creation_date": 1503516011, "answer_id": 45847803, "question_id": 45847726, "link": "https://stackoverflow.com/questions/45847726/how-are-my-arrays-modified-when-c-passes-by-value/45847803#45847803", "title": "How are my arrays modified when C passes by value?", "body": "<p>Arrays are reference types in C. If a function takes an array, it will be passed a pointer, and any changes you make to it will also affect the original array.</p>\n"}, {"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503794526, "post_id": 45847808, "comment_id": 78760538, "body": "I&#39;m not one of the downvoters, but in C <i>everything</i> is passed by value. An array decays to a pointer to its first element in most expressions, including function calls, and it is this pointer that is passed by value to the function."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -2, "last_activity_date": 1503516024, "creation_date": 1503516024, "answer_id": 45847808, "question_id": 45847726, "link": "https://stackoverflow.com/questions/45847726/how-are-my-arrays-modified-when-c-passes-by-value/45847808#45847808", "title": "How are my arrays modified when C passes by value?", "body": "<p>C passes only the pointer. Only structs and simple types are passed by the value.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503518887, "post_id": 45847823, "comment_id": 78655092, "body": "Unsurprisingly, MSVC will not compile <code>void read_word(int counts[static 26])</code>."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503523624, "post_id": 45847823, "comment_id": 78657234, "body": "@WeatherVane The following <a href=\"https://ideone.com/I2CfhK\" rel=\"nofollow noreferrer\">program</a> compiles <a href=\"https://pastebin.com/raw/Wmm7dhrc\" rel=\"nofollow noreferrer\">with errors too</a>. It is a good thing I guess to take benefit of this."}], "tags": [], "owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "is_accepted": true, "score": 6, "last_activity_date": 1503516801, "last_edit_date": 1503516801, "creation_date": 1503516091, "answer_id": 45847823, "question_id": 45847726, "link": "https://stackoverflow.com/questions/45847726/how-are-my-arrays-modified-when-c-passes-by-value/45847823#45847823", "title": "How are my arrays modified when C passes by value?", "body": "<p>C indeed always passes by value, but when arrays are passed to functions they <strong>always</strong> decay to pointers, even when you specify the length in the parameter declaration. What happens is that your declaration of</p>\n\n<pre><code>void read_word(int counts[26])\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>void read_word(int * counts)\n</code></pre>\n\n<p>When you pass <code>word_one</code> and <code>word_two</code> to your functions, the value they recieve is the address of the first element of the array. These still point to the original arrays and therefore, when you modify them in the function, the result is also visible in the original array.</p>\n\n<p><strong>ADDIT</strong></p>\n\n<p>Interesting, but little-known side note: in C99 and beyond you can declare your functions with the length preceded by <code>static</code>, as follows:</p>\n\n<pre><code>void read_word(int counts[static 26])\n</code></pre>\n\n<p>This doesn't change the fact that the function receives a copy of the address and not the whole array, but it does allow the compiler to optimize and detect potential errors. In the case of the <code>read_word</code> above, the compiler can warn if you pass a <code>NULL</code>-pointer to the function, or an array with less than 26 elements. More can be read <a href=\"https://hamberg.no/erlend/posts/2013-02-18-static-array-indices.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 4, "last_activity_date": 1503528117, "last_edit_date": 1503528117, "creation_date": 1503517160, "answer_id": 45848074, "question_id": 45847726, "link": "https://stackoverflow.com/questions/45847726/how-are-my-arrays-modified-when-c-passes-by-value/45848074#45848074", "title": "How are my arrays modified when C passes by value?", "body": "<p>Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operator, or is a string literal used to initialize a character array in a declaration, an <em>expression</em> of type \"N-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array.</p>\n\n<p>When you call</p>\n\n<pre><code>read_word(word_one); \n</code></pre>\n\n<p>The <em>expression</em> <code>word_one</code> is converted from type \"26-element array of <code>int</code>\" to \"pointer to <code>int</code>\", so what actually gets passed to <code>read_word</code> is the <em>address</em> of the first element of <code>word_one</code>.  </p>\n\n<p>In the context of a function parameter declaration, <code>T a[N]</code> and <code>T a[]</code> are both interpreted as <code>T *a</code> - <code>a</code> is declared as a pointer to <code>T</code>, not an array of <code>T</code>.  Thus, the prototype</p>\n\n<pre><code>void read_word(int counts[26])\n</code></pre>\n\n<p>is interpreted as</p>\n\n<pre><code>void read_word(int *counts)\n</code></pre>\n\n<p>Thus, <code>read_word</code> does indeed modify the contents of <code>word_one</code> and <code>word_two</code>.  </p>\n\n<p>You'll want to pass the size of the array as a separate parameter:</p>\n\n<pre><code>read_word( word_one, sizeof word_one );\n...\nvoid read_word( int *counts, size_t size )\n{\n  ...\n}\n</code></pre>\n\n<p>since you won't know how big the target array is from the pointer alone.  </p>\n"}], "owner": {"reputation": 151, "user_id": 5182778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe165ff91015729c26d1f462d2e9c678?s=128&d=identicon&r=PG&f=1", "display_name": "asd", "link": "https://stackoverflow.com/users/5182778/asd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 45847823, "answer_count": 4, "score": 1, "last_activity_date": 1503528117, "creation_date": 1503515660, "question_id": 45847726, "link": "https://stackoverflow.com/questions/45847726/how-are-my-arrays-modified-when-c-passes-by-value", "title": "How are my arrays modified when C passes by value?", "body": "<p>I made a simple program in C to check if two words are anagrams. My question is that if I'm passing word_one and word_two as parameters, doesn't that mean that I'm not modifying the original arrays? I would think that I'm effectively working on a copy of these which are not returned.</p>\n\n<p>That means I shouldn't be able to compare them with my equal_array function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define MAXLENGTH ((int) (sizeof(letters) / sizeof(letters[0])))\n\nvoid read_word(int counts[26]);\nbool equal_array(int counts[26], int counts2[26]);\n\nint main(void){\n\n  int word_one[26] = { 0 };\n  int word_two[26] = { 0 };\n\n  printf(\"Enter first word: \");\n  read_word(word_one); \n\n  printf(\"Enter second word: \");\n  read_word(word_two); \n\n  if (equal_array(word_one, word_two))\n    printf(\"These words are anagrams!\");\n  else\n    printf(\"These words not are anagrams!\");\n\n  return 0;\n}\n\nvoid read_word(int counts[26]){\n  char ch;\n\n  while ((ch = getchar()) != '\\n'){\n    ch = toupper(ch);\n    if (ch &gt;= 'A' &amp;&amp; ch &lt;= 'Z'){\n      counts[(ch - 'A')]++;\n    } \n  }\n}\n\nbool equal_array(int counts1[26], int counts2[26]){\n    int i;\n    bool equal = true;\n\n    for (i = 0; i &lt; 26; i++) {\n      if (counts1[i] != counts2[i]) {\n        equal = false;\n        break;\n      }\n    }\n    return equal;\n}\n</code></pre>\n"}, {"tags": ["c", "snmp"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1503514588, "post_id": 45847389, "comment_id": 78652964, "body": "Off by 1? <code>malloc(packet-&gt;value_length + 1);</code> add 1 before <code>strcpy</code> for the <code>NUL</code> terminator. Or perhaps <code>packet-&gt;value_length = strlen(value_value) + 1;</code> instead."}, {"owner": {"reputation": 347, "user_id": 2609713, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d296719557a8ea3a01b2af97c4744ba7?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2609713/sam"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503514761, "post_id": 45847389, "comment_id": 78653063, "body": "@WeatherVane the problem is the same and if I add +1 the value length is wrong."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1503514905, "post_id": 45847389, "comment_id": 78653139, "body": "Your program overran the memory allocation and caused UB."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1503514952, "post_id": 45847389, "comment_id": 78653163, "body": "to answer the title of the question, the length field in the UDP header is an unsigned 16 bit field that contains the length of the header plus the length of the message in bytes. Theoretically this is 65,535 bytes. In reality the MTU size is going to be your limiting factor,, this is generally 1500 bytes. If you&#39;re doing everything on loopback then MTU size doesn&#39;t matter (at least on my linux system). Take a look <a href=\"https://en.wikipedia.org/wiki/User_Datagram_Protocol#Packet_structure\" rel=\"nofollow noreferrer\">here</a>. But there should be no problems sending a character string 87 long. (assuming byte=8 bits)"}, {"owner": {"reputation": 347, "user_id": 2609713, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d296719557a8ea3a01b2af97c4744ba7?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2609713/sam"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503515329, "post_id": 45847389, "comment_id": 78653351, "body": "@WeatherVane what can I do now. what is UB?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503515366, "post_id": 45847389, "comment_id": 78653371, "body": "<a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined behaviour</a>, but if you corrected that error, there is a different problem. You need to decide if the <code>NUL</code> terminator to the string is a part of the packet data. If not, use <code>memcpy</code> instead of <code>strcpy</code>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1503515646, "post_id": 45847389, "comment_id": 78653517, "body": "If the datagram is 1500&lt;datagram&lt;64k will the stack not just fragment the packet as &#39;normal&#39;, so allowing the datagram to be sent, but increasing the chance of a failed reassembly and so dropped datagram?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1503516707, "post_id": 45847389, "comment_id": 78654063, "body": "@MartinJames My (hardly exhaustive) experience has been that sending UDP packets larger than the MTU results in dropped data. Wireshark capture simply shows &quot;fragmented packet&quot; and the amount of received data is far smaller than expected. Perhaps there are systems with network stacks that will do this reassembly for you, but mine don&#39;t seem to have them. Given the lightweight-as-possible nature of UDP I&#39;d be surprised to learn such a thing exists."}, {"owner": {"reputation": 347, "user_id": 2609713, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d296719557a8ea3a01b2af97c4744ba7?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2609713/sam"}, "edited": false, "score": 0, "creation_date": 1503610444, "post_id": 45847389, "comment_id": 78701341, "body": "off by 1 is not needed, see my update :)"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1503610470, "post_id": 45850564, "comment_id": 78701349, "body": "<code>strcpy</code> is <b>not</b> evil anymore than any other library function is evil. (<code>strncpy</code> does have the inefficiency of zeroing all unused space). The issue is proper accounting for all characters required, including the <i>nul-terminating</i> character. (which is what distinguishes a <i>C-string</i> from a <i>character array</i>). Without a <i>nul-terminating</i> character, <code>strcpy</code> will happily continue off onto the stack copying values until the first stray <code>0</code> is encountered. With a proper <i>nul-terminated</i> string <code>strcpy</code> is perfectly fine."}], "tags": [], "owner": {"reputation": 518, "user_id": 4637938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dtHFq.png?s=128&g=1", "display_name": "bd2357", "link": "https://stackoverflow.com/users/4637938/bd2357"}, "is_accepted": false, "score": 0, "last_activity_date": 1503529545, "creation_date": 1503529545, "answer_id": 45850564, "question_id": 45847389, "link": "https://stackoverflow.com/questions/45847389/is-there-a-limit-how-many-character-can-be-send-over-udp-snmp/45850564#45850564", "title": "Is there a limit how many character can be send over udp/snmp?", "body": "<p>As someone pointer out in the comments, strcpy is evil and should never be used for anything. Your malloc actually allocated an array smaller than your original array because you did not take into account the trailing null. when you used strcpy you wrote past the end of the allocated array with the trailing null.</p>\n\n<p>Since you didn't include code related to packet structure I don't know how it is being used but if any code after this expects C null terminated strings it probable won't work as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 347, "user_id": 2609713, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d296719557a8ea3a01b2af97c4744ba7?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2609713/sam"}, "is_accepted": true, "score": 0, "last_activity_date": 1503617992, "creation_date": 1503617992, "answer_id": 45872423, "question_id": 45847389, "link": "https://stackoverflow.com/questions/45847389/is-there-a-limit-how-many-character-can-be-send-over-udp-snmp/45872423#45872423", "title": "Is there a limit how many character can be send over udp/snmp?", "body": "<p>The SNMP packet length <code>0x80</code> is wrong, see <a href=\"https://stackoverflow.com/questions/45871813/why-is-my-snmp-packet-not-valid\">here</a></p>\n\n<blockquote>\n  <p>The ASN.1 length field of 0x80 is wrong. The decoder sees the first\n  two octets of your packet are 0x30 0x80 and determines from that 0x80\n  that there should be no more octets following. And yet there are more\n  octets, so it is an invalid encoding and further not a valid SNMP\n  message. The 0x80 here does not mean 128 octets for content as you\n  intend, it means your length field is 0x80 &amp; ~0x80 == 0 octets long\n  following this octet. Instead, 0x81 would mean your length field is\n  0x81 &amp; ~0x80 == 1 following octets, and that following 0x80 octet\n  would indicate a content length of 128.</p>\n</blockquote>\n\n<p>Thats how the SNMP packet should look like,</p>\n\n<pre><code>char out_buf_1[] = {\n0x30, /* SNMP Packet start */\n0x81, 0x80, /* SNMP Packet length */\n0x02, 0x01, 0x00, /* Version */\n0x04, 0x06, 0x70, 0x75, 0x62, 0x6c, 0x69, 0x63, /* Community*/\n0xa2, /* GetResponsePDU */\n0x73, /* GetResponsePDU Length */\n0x02, 0x04, 0x2c, 0x80, 0x7e, 0x2f, /* Request id */\n0x02, 0x01, 0x00, /*Error status */\n0x02, 0x01, 0x00, /*Error index */\n0x30, /* Varbind list start */\n0x65, /* Varbind list length*/\n0x30, /* Varbind value start */\n0x63, /* Varbind value length */\n0x06, 0x08, 0x2b, 0x06, 0x01, 0x02, 0x01, 0x01, 0x01, 0x00, /* OID */\n0x04,  /* Value start, type octet-string*/\n0x57, /* Value length */\n0x61, 0x73, 0x64, 0x20, 0x61, /* Value */\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64 };\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 2609713, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d296719557a8ea3a01b2af97c4744ba7?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2609713/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 45872423, "answer_count": 2, "score": 1, "last_activity_date": 1503617992, "creation_date": 1503514384, "last_edit_date": 1503611285, "question_id": 45847389, "link": "https://stackoverflow.com/questions/45847389/is-there-a-limit-how-many-character-can-be-send-over-udp-snmp", "title": "Is there a limit how many character can be send over udp/snmp?", "body": "<p>I'm trying to send a string from server to client via UDP/SNMP. However, if I copy a string with length <code>86</code> to pdu <code>packet-&gt;value_value</code> everything works fine, I get the string on client side. If I add just one char more to the string, length is now <code>87</code>, the packet can not deliver to the client. The packet size raise correctly. Is there a limit how many char can be send? My packet is smaller than 1500.</p>\n\n<p>This code snippet shows how I copy the string to <code>packet-&gt;value_value</code></p>\n\n<pre><code>value_value = \"asd asd asd asd asd asd asd asd asd asd asd asd asd asd asd asd asd asd asd asd asd as\";\nprintf(\"String length: %d\\n\",strlen(value_value)); // 86 OK, 87or greater NOK\npacket-&gt;value_length = strlen(value_value);\npacket-&gt;value_value = malloc(packet-&gt;value_length);\nstrcpy(packet-&gt;value_value, value_value);\n</code></pre>\n\n<p>For some information, here a terminal output with some more informations about packet lengths</p>\n\n<p>Output with string length <code>86</code></p>\n\n<pre><code>src/agent.c:69:parse_request(): Input length=43\nsrc/agent.c:116:perform_snmp_request(): OID is: 1.3.6.1.2.1.1.1.0\nString length: 86\nsrc/mibservice.c:90:snmpget(): packet-&gt;value_type=04\nsrc/mibservice.c:91:snmpget(): packet-&gt;value_length=56\nsrc/mibservice.c:93:snmpget(): packet-&gt;value_value=61\n...\nsrc/mibservice.c:93:snmpget(): packet-&gt;value_value=73\nsrc/mibservice.c:95:snmpget(): Before packet-&gt;length=41\nsrc/mibservice.c:97:snmpget(): After packet-&gt;length=127\nsrc/mibservice.c:99:snmpget(): Before packet-&gt;pdu_length=28\nsrc/mibservice.c:101:snmpget(): After packet-&gt;pdu_length=114\nsrc/mibservice.c:103:snmpget(): Before packet-&gt;variablebindings_length=14\nsrc/mibservice.c:105:snmpget(): After packet-&gt;variablebindings_length=100\nsrc/mibservice.c:107:snmpget(): Before packet-&gt;varbind_length=12\nsrc/mibservice.c:109:snmpget(): After packet-&gt;varbind_length=98\nsrc/agent.c:96:create_response(): Output length=129\n</code></pre>\n\n<p>Output with string length <code>87</code></p>\n\n<pre><code>src/agent.c:69:parse_request(): Input length=43\nsrc/agent.c:116:perform_snmp_request(): OID is: 1.3.6.1.2.1.1.1.0\nString length: 87\nsrc/mibservice.c:90:snmpget(): packet-&gt;value_type=04\nsrc/mibservice.c:91:snmpget(): packet-&gt;value_length=57\nsrc/mibservice.c:93:snmpget(): packet-&gt;value_value=61\n...\nsrc/mibservice.c:93:snmpget(): packet-&gt;value_value=64\nsrc/mibservice.c:95:snmpget(): Before packet-&gt;length=41\nsrc/mibservice.c:97:snmpget(): After packet-&gt;length=128\nsrc/mibservice.c:99:snmpget(): Before packet-&gt;pdu_length=28\nsrc/mibservice.c:101:snmpget(): After packet-&gt;pdu_length=115\nsrc/mibservice.c:103:snmpget(): Before packet-&gt;variablebindings_length=14\nsrc/mibservice.c:105:snmpget(): After packet-&gt;variablebindings_length=101\nsrc/mibservice.c:107:snmpget(): Before packet-&gt;varbind_length=12\nsrc/mibservice.c:109:snmpget(): After packet-&gt;varbind_length=99\nsrc/agent.c:96:create_response(): Output length=130\n</code></pre>\n\n<p><strong>Update</strong>\nHere is a runnable example about my problem. Packet <code>out_buf_0</code> represent a valid SNMP packet and can send via UDP. Packet <code>out_buf_1</code> is the same packet like <code>out_buf_0</code> with one character more at the end <code>0x64</code>. Further, I raised all length + 1 because of the additional character. Why is <code>out_buf_1</code> not a valid SNMP packet/why can it not send via UDP? Note: The SNMP request can not display in terminal because the <code>request id</code> from client is different from <code>out_buf_0</code> and <code>out_buf_1</code>, take a look in wireshark to see the request/response.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#define MESSAGE_MAX_LEN  1500 /* MTU, IEEE Std 802.3TM-2015 */\n#define PORT 161 /* RFC 1157 */\n\nint out_buf_0_len = 129; /* 0x7f + 2 */\nchar out_buf_0[] = {\n0x30, /* SNMP Packet start */\n0x7f, /* SNMP Packet length */\n0x02, 0x01, 0x00, /* Version */\n0x04, 0x06, 0x70, 0x75, 0x62, 0x6c, 0x69, 0x63, /* Community*/\n0xa2, /* GetResponsePDU */\n0x72, /* GetResponsePDU Length */\n0x02, 0x04, 0x2c, 0x80, 0x7e, 0x2f, /* Request id */\n0x02, 0x01, 0x00, /*Error status */\n0x02, 0x01, 0x00, /*Error index */\n0x30, /* Varbind list start */\n0x64, /* Varbind list length*/\n0x30, /* Varbind value start */\n0x62, /* Varbind value length */\n0x06, 0x08, 0x2b, 0x06, 0x01, 0x02, 0x01, 0x01, 0x01, 0x00, /* OID */\n0x04,  /* Value start, type octet-string*/\n0x56, /* Value length */\n0x61, 0x73, 0x64, 0x20, 0x61, /* Value */\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73 };\n\nint out_buf_1_len = 130; /* 0x80 + 2 */\nchar out_buf_1[] = {\n0x30, /* SNMP Packet start */\n0x80, /* SNMP Packet length */\n0x02, 0x01, 0x00, /* Version */\n0x04, 0x06, 0x70, 0x75, 0x62, 0x6c, 0x69, 0x63, /* Community*/\n0xa2, /* GetResponsePDU */\n0x73, /* GetResponsePDU Length */\n0x02, 0x04, 0x2c, 0x80, 0x7e, 0x2f, /* Request id */\n0x02, 0x01, 0x00, /*Error status */\n0x02, 0x01, 0x00, /*Error index */\n0x30, /* Varbind list start */\n0x65, /* Varbind list length*/\n0x30, /* Varbind value start */\n0x63, /* Varbind value length */\n0x06, 0x08, 0x2b, 0x06, 0x01, 0x02, 0x01, 0x01, 0x01, 0x00, /* OID */\n0x04,  /* Value start, type octet-string*/\n0x57, /* Value length */\n0x61, 0x73, 0x64, 0x20, 0x61, /* Value */\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64, 0x20, 0x61, 0x73, 0x64, 0x20, 0x61,\n0x73, 0x64 };\n\nint my_socket;\nstruct sockaddr_in remote_addr;\nint socket_create()\n{\n    printf(\"Create socket\\n\");\n    struct sockaddr_in socket_addr;\n    if ((my_socket = socket(AF_INET, SOCK_DGRAM, 0)) &lt; 0)\n    {\n        printf(\"Cannot create socket. Exit.\\n\");\n        return -1;\n    }\n    memset((char *)&amp;socket_addr, 0, sizeof(socket_addr));\n    socket_addr.sin_family = AF_INET;\n    socket_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    socket_addr.sin_port = htons(PORT);\n    if (bind(my_socket, (struct sockaddr *)&amp;socket_addr, sizeof(socket_addr)) &lt; 0)\n    {\n        printf(\"Bind failed. Exit.\\n\");\n        return - 1;\n    }\n    printf(\"Listen on: %s:%d\\n\", inet_ntoa(socket_addr.sin_addr), PORT);\n    return 0;\n}\n\nsocklen_t addr_len = sizeof(remote_addr);\nvoid socket_listen(char *in_buf)\n{\n    int  recv_len; /* Bytes received */\n    int  nbyt; /* Bytes count */\n    char *out_buf[MESSAGE_MAX_LEN];\n    int  out_len = 0;\n\n    for (;;) { /* Receive snmp message from snmp manager */\n        recv_len = recvfrom(my_socket, in_buf, MESSAGE_MAX_LEN, 0, (struct sockaddr *)&amp;remote_addr, &amp;addr_len);\n        if (recv_len &gt; 0)\n            if (sendto(my_socket, out_buf_1, out_buf_1_len, 0, (struct sockaddr *)&amp;remote_addr, addr_len) &lt; 0)\n                printf(\"Cannot send data to destination.\\n\");\n    }\n}\n\n/* Disable SNMP on local machine. # systemctl stop snmpd \n * Execute main(): gcc &lt;filename&gt;.c &amp;&amp; ./a.out\n * Run SNMP Request: $ snmpget -v 1 -c public 0.0.0.0:161 1.3.6.1.2.1.1.1.0\n */\nchar in_buf[MESSAGE_MAX_LEN];\nint main(int argc, char **argv)\n{\n    if (socket_create() == -1)\n        exit(2);\n    socket_listen(in_buf);\n}\n</code></pre>\n\n<p>The whole frame length including my SNMPv1 packet <code>out_buf_0</code> is 1368 bits, <code>out_buf_1</code> should 1376 bits.</p>\n"}, {"tags": ["c", "conditional-statements"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1503513965, "post_id": 45847250, "comment_id": 78652635, "body": "Have you tried running it? Does it give you the expected result?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1503513984, "post_id": 45847250, "comment_id": 78652648, "body": "Short answer <i>No</i>, try it and read the compiler errors/warnings... If you add parens, you will end up with an expression that is always true or false."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1503514089, "post_id": 45847250, "comment_id": 78652714, "body": "Well, strictly speaking, you can. But it will give you something that is not equivalent to the same expression as in mathematics (or the first <code>&amp;&amp;</code> expression)."}, {"owner": {"reputation": 158, "user_id": 6566386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/394d3420b365b07d5133ca28a146cbd4?s=128&d=identicon&r=PG&f=1", "display_name": "chen", "link": "https://stackoverflow.com/users/6566386/chen"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1503514175, "post_id": 45847250, "comment_id": 78652761, "body": "@DavidC.Rankin I have compiled it but did not see the warning.  I just checked and found it. Thanks!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1503514272, "post_id": 45847250, "comment_id": 78652816, "body": "Yes, always compile with <code>-Wall -Wextra</code> at minimum (on Linux) and <code>&#47;Wall</code> on windoze. The compiler with point out the ambiguity and the result of any attempt to fix it. (although the gcc warnings and errors are far superior to what you will get on windoze)"}, {"owner": {"reputation": 158, "user_id": 6566386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/394d3420b365b07d5133ca28a146cbd4?s=128&d=identicon&r=PG&f=1", "display_name": "chen", "link": "https://stackoverflow.com/users/6566386/chen"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1503514293, "post_id": 45847250, "comment_id": 78652828, "body": "@tkausl Wanted to run it but I&#39;m working on an embedded platform and can&#39;t currently flash the controller."}, {"owner": {"reputation": 158, "user_id": 6566386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/394d3420b365b07d5133ca28a146cbd4?s=128&d=identicon&r=PG&f=1", "display_name": "chen", "link": "https://stackoverflow.com/users/6566386/chen"}, "edited": false, "score": 0, "creation_date": 1503514481, "post_id": 45847250, "comment_id": 78652919, "body": "relevant warning: <code>comparisons like X&lt;=Y&lt;=Z do not have their mathematical meaning</code>"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1503514492, "post_id": 45847250, "comment_id": 78652924, "body": "You could write it <code>if (7 &lt; x &amp;&amp; x &lt; 14)</code> if you wanted to."}, {"owner": {"reputation": 158, "user_id": 6566386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/394d3420b365b07d5133ca28a146cbd4?s=128&d=identicon&r=PG&f=1", "display_name": "chen", "link": "https://stackoverflow.com/users/6566386/chen"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1503514747, "post_id": 45847250, "comment_id": 78653053, "body": "@RichardChambers Thanks, I think that&#39;s the closest you can get to how it is written in math and it still works."}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 8, "last_activity_date": 1503514105, "creation_date": 1503514105, "answer_id": 45847311, "question_id": 45847250, "link": "https://stackoverflow.com/questions/45847250/can-you-use-more-than-one-in-an-if-condition/45847311#45847311", "title": "Can you use more than one &lt; in an if condition?", "body": "<p>You can write  <code>if( 7 &lt; x &lt; 14 ) something;</code> but that's basically a long-winded way of saying <code>something</code>.</p>\n\n<p><code>7 &lt; x &lt; 14</code> will be interpreted as <code>(7&lt;x) &lt; 14</code>, and <code>7&lt;x</code> will be either <code>0</code> or <code>1</code>, both of which are less than <code>14</code>, and therefore the condition will always be true.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 7662530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dBGAn.jpg?s=128&g=1", "display_name": "Sanat Deshpande", "link": "https://stackoverflow.com/users/7662530/sanat-deshpande"}, "is_accepted": false, "score": 2, "last_activity_date": 1503514390, "creation_date": 1503514390, "answer_id": 45847390, "question_id": 45847250, "link": "https://stackoverflow.com/questions/45847250/can-you-use-more-than-one-in-an-if-condition/45847390#45847390", "title": "Can you use more than one &lt; in an if condition?", "body": "<p>You can. It will simply compare the Boolean value from (7 &lt; x) with 14 resulting in a true condition. Always!</p>\n"}], "owner": {"reputation": 158, "user_id": 6566386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/394d3420b365b07d5133ca28a146cbd4?s=128&d=identicon&r=PG&f=1", "display_name": "chen", "link": "https://stackoverflow.com/users/6566386/chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 45847311, "answer_count": 2, "score": 1, "last_activity_date": 1503514390, "creation_date": 1503513884, "question_id": 45847250, "link": "https://stackoverflow.com/questions/45847250/can-you-use-more-than-one-in-an-if-condition", "title": "Can you use more than one &lt; in an if condition?", "body": "<p>Is it ok to have an if condition with more than one \"less than\" (&lt;) or \"greater than\" (>) symbol in it?</p>\n\n<p>For example, I usually see if conditions written like this:\n<code>if( x &gt; 7 &amp;&amp; x &lt; 14)</code>\nbut could you instead write it like this?\n<code>if( 7 &lt; x &lt; 14 )</code></p>\n\n<p>The second way compiles but I'm not sure if there are any drawbacks or unexpected results from doing it that way.</p>\n"}, {"tags": ["c++", "c", "redhat", "strace", "brk"], "comments": [{"owner": {"reputation": 45, "user_id": 3027028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2771e6ef9ecc4eb00edfa947477355?s=128&d=identicon&r=PG", "display_name": "Umesh C G", "link": "https://stackoverflow.com/users/3027028/umesh-c-g"}, "edited": false, "score": 0, "creation_date": 1503513140, "post_id": 45846961, "comment_id": 78652152, "body": "why &lt;b&gt; html tag is not coming?"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1503513178, "post_id": 45846961, "comment_id": 78652167, "body": "Last time I checked, <a href=\"https://linux.die.net/man/1/strace\" rel=\"nofollow noreferrer\"><code>strace</code></a> still reported in \u03bcs, not seconds, so that&#39;s more like 17.8 \u03bcs."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1503513197, "post_id": 45846961, "comment_id": 78652178, "body": "Because it was part of an (indented) code block. Those get rendered verbatim."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503513277, "post_id": 45846961, "comment_id": 78652224, "body": "Nice fix to the markup, @melpomene.  I trust you had a program do the grunt work for you."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503513304, "post_id": 45846961, "comment_id": 78652248, "body": "@JonathanLeffler vim and a few regex substitutions. :-)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 2, "creation_date": 1503513378, "post_id": 45846961, "comment_id": 78652295, "body": "@dhke <code>man strace</code>: &quot;<i><code>-ttt</code> ... the time printed will include the microseconds and the leading portion will be printed as the number of seconds since the epoch.</i>&quot; So the number before the <code>.</code> is still in seconds."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503513414, "post_id": 45846961, "comment_id": 78652315, "body": "@melpomene ah, thanks. I stand corrected."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503513530, "post_id": 45846961, "comment_id": 78652392, "body": "One possibility is that the system was rather busy with other processes while your program was hung up in the <code>brk()</code> system call.  The problem may be nothing to do with <code>brk()</code> except that it happened to be the system call that allowed the O/S to take control again and run other processes instead of yours."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3027028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2771e6ef9ecc4eb00edfa947477355?s=128&d=identicon&r=PG", "display_name": "Umesh C G", "link": "https://stackoverflow.com/users/3027028/umesh-c-g"}, "edited": false, "score": 0, "creation_date": 1503518794, "post_id": 45847222, "comment_id": 78655041, "body": "Thanks for reply. I too think about this, but got confused when saw this question and answer.    <a href=\"https://stackoverflow.com/q/42535397/3027028\">stackoverflow.com/q/42535397/3027028</a>"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1503513795, "creation_date": 1503513795, "answer_id": 45847222, "question_id": 45846961, "link": "https://stackoverflow.com/questions/45846961/is-brk0-taking-taking-too-much-time/45847222#45847222", "title": "is brk(0) taking taking too much time?", "body": "<p>To answer the question in the title: No, <code>brk(0)</code> is not taking too much time.</p>\n\n<p>You can see this by looking at the time reported for the syscall itself (<code>&lt;0.000003&gt;</code>, added by the <code>-T</code> option). That's only 3 microseconds.</p>\n\n<p>The values on the left are (absolute) timestamps. But that just means the process performed a <code>brk</code> syscall at 1503431273.935080 and another syscall at 1503431291.010338. That doesn't mean any single syscall took 17 seconds; it just means it took 17 seconds for the process to reach the next syscall.</p>\n\n<p>The process could have been doing many other things, such as doing raw computation (burning CPU), or not being scheduled (because the system was busy with other programs). The latter option is admittedly unlikely because you said this happened in multiple runs of the program. Therefore I think the most likely explanation is that the code just spends a lot of time computing things without needing to call the kernel (e.g. tight numeric code in a loop, with no memory allocation).</p>\n"}], "owner": {"reputation": 45, "user_id": 3027028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2771e6ef9ecc4eb00edfa947477355?s=128&d=identicon&r=PG", "display_name": "Umesh C G", "link": "https://stackoverflow.com/users/3027028/umesh-c-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503513795, "creation_date": 1503512750, "last_edit_date": 1503513157, "question_id": 45846961, "link": "https://stackoverflow.com/questions/45846961/is-brk0-taking-taking-too-much-time", "title": "is brk(0) taking taking too much time?", "body": "<p>This is an output of <code>strace -T -ttt -ff -x -y -o pid.trace -p 2145</code> . Trace given below.</p>\n\n<pre>1503431273.934716 semop(1204093022, {{0, 1, SEM_UNDO}}, 1) = 0 &lt;0.000004&gt;\n1503431273.934737 clock_gettime(CLOCK_REALTIME, {1503431273, 934741536}) = 0 &lt;0.000004&gt;\n1503431273.934763 write(6&lt;/home/red/samples/debug/hexa.debug&gt;, \"17.08.23 01:17:53 [     hexa:2145\"..., 79) = 79 &lt;0.000016&gt;\n1503431273.934960 brk(0)                = 0x1adc000 &lt;0.000004&gt;\n1503431273.934974 brk(0x1afd000)        = 0x1afd000 &lt;0.000006&gt;\n1503431273.934994 brk(0)                = 0x1afd000 &lt;0.000003&gt;\n1503431273.935006 brk(0)                = 0x1afd000 &lt;0.000004&gt;\n1503431273.935017 brk(0x1afc000)        = 0x1afc000 &lt;0.000008&gt;\n1503431273.935033 brk(0)                = 0x1afc000 &lt;0.000003&gt;\n1503431273.935045 brk(0)                = 0x1afc000 &lt;0.000004&gt;\n1503431273.935057 brk(0)                = 0x1afc000 &lt;0.000004&gt;\n1503431273.935068 brk(0x1afb000)        = 0x1afb000 &lt;0.000005&gt;\n<b>1503431273.935080 brk(0)                = 0x1afb000 &lt;0.000003&gt;\n1503431291.010338 brk(0)                = 0x1afb000 &lt;0.000006&gt;</b>\n1503431291.010366 brk(0x1b1c000)        = 0x1b1c000 &lt;0.000006&gt;\n1503431291.010391 brk(0)                = 0x1b1c000 &lt;0.000003&gt;\n1503431291.010403 brk(0)                = 0x1b1c000 &lt;0.000004&gt;\n1503431291.010414 brk(0x1b12000)        = 0x1b12000 &lt;0.000008&gt;\n1503431291.010430 brk(0)                = 0x1b12000 &lt;0.000004&gt;\n1503431291.010443 brk(0)                = 0x1b12000 &lt;0.000004&gt;\n1503431291.010455 brk(0)                = 0x1b12000 &lt;0.000003&gt;\n1503431291.010466 brk(0x1b11000)        = 0x1b11000 &lt;0.000004&gt;\n<b>1503431291.010478 brk(0)                = 0x1b11000 &lt;0.000004&gt;\n1503431301.277050 clock_gettime(CLOCK_REALTIME, {1503431301, 277067441}) = 0 &lt;0.000005&gt;</b>\n1503431301.277094 write(6&lt;/home/red/samples/debug/hexa.debug&gt;, \"17.08.23 01:18:21 [     hexa:2145\"..., 91) = 91 &lt;0.000019&gt;\n1503431301.277201 clock_gettime(CLOCK_REALTIME, {1503431301, 277216542}) = 0 &lt;0.000005&gt;\n1503431301.277234 write(6&lt;/home/red/samples/debug/hexa.debug&gt;, \"17.08.23 01:18:21 [     hexa:2145\"..., 126) = 126 &lt;0.000018&gt;\n1503431301.277296 clock_gettime(CLOCK_REALTIME, {1503431301, 277301142}) = 0 &lt;0.000004&gt;\n1503431301.277317 write(6&lt;/home/red/samples/debug/hexa.debug&gt;, \"17.08.23 01:18:21 [     hexa:2145\"..., 126) = 126 &lt;0.000012&gt;\n1503431301.288030 clock_gettime(CLOCK_REALTIME, {1503431301, 288037704}) = 0 &lt;0.000004&gt;</pre>\n\n<p>if you look at the above trace at two <strong>brk(0)s</strong> (please see 1503431273.935080 and 1503431291.010478) taking too much time, around <strong>17 seconds and 10 seconds</strong> respectively (comparing left side time). But execution time in the right side is just minimal. I have done multiple runs of this program, in the same <strong>Redhat Linux box (7.2)</strong>, all runs were giving same timings (with microseconds difference) at same place of system call (brk(0)).</p>\n\n<p>What could be the issue? is it at Programming Level or OS level? I am not having source code for this, but I know it is a c/c++ program.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 7, "creation_date": 1503512802, "post_id": 45846945, "comment_id": 78651974, "body": "Because the C standard says so."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1503512831, "post_id": 45846945, "comment_id": 78651992, "body": "The rules about <code>void</code> and <code>void *</code> are special cases.  <code>void</code> is an incomplete type that cannot be completed.  A <code>void *</code> is a pointer to an indeterminate type.  You can&#39;t use it directly to dereference the data; you have to convert it to a pointer to a complete type before you can do that."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1503512848, "post_id": 45846945, "comment_id": 78651997, "body": "What would you call it?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 3, "creation_date": 1503512863, "post_id": 45846945, "comment_id": 78652005, "body": "I don&#39;t think there needs to be any real logic behind this: the creators deemed a general pointer type handy, so they chose <code>void*</code> because it resembles the purpose the most."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503512867, "post_id": 45846945, "comment_id": 78652008, "body": "Pointing to nothing is very well done by <code>NULL</code>. Dedicating a whole type to it would be wasteful."}, {"owner": {"reputation": 25596, "user_id": 3140, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/84dbc773c808111cc4ce138bff33f482?s=128&d=identicon&r=PG", "display_name": "Jacob Krall", "link": "https://stackoverflow.com/users/3140/jacob-krall"}, "edited": false, "score": 0, "creation_date": 1503512871, "post_id": 45846945, "comment_id": 78652012, "body": "<a href=\"https://stackoverflow.com/a/40011911/3140\">stackoverflow.com/a/40011911/3140</a>"}, {"owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "edited": false, "score": 2, "creation_date": 1503513150, "post_id": 45846945, "comment_id": 78652156, "body": "In the beginning was the earth, and the earth was without form, and <code>void *</code>. I&#39;ll show myself out."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1503513174, "post_id": 45846945, "comment_id": 78652165, "body": "Didn&#39;t you just ask this? <a href=\"https://stackoverflow.com/questions/45846121/how-does-void-work-as-a-universal-reference-type\" title=\"how does void work as a universal reference type\">stackoverflow.com/questions/45846121/&hellip;</a>"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 4, "creation_date": 1503513209, "post_id": 45846945, "comment_id": 78652187, "body": "What&#39;s your obsession with generic questions? Do you really want to know all this or just collecting upvotes?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1503513432, "post_id": 45846945, "comment_id": 78652324, "body": "There&#39;s a pressure to keep the amount of keywords in a language to a minimum in order to prevent collisions with libraries.  You could certainly introduce an <code>any</code> keyword and declare that it may only be used to create pointers, but that&#39;s rather wasteful when you can, without much loss of clarity, simply reuse the <code>void</code> type."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1503513485, "post_id": 45846945, "comment_id": 78652359, "body": "@RustyX Whoa, careful there. Some people are curious, no need to accuse them of something you have no evidence of here."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1503516243, "post_id": 45846945, "comment_id": 78653855, "body": "Remember that C is a very low-level language. Even the concept of &quot;type&quot; is a fairly high-level one. In C, pointers (all of them. typed and void) are generally nothing but memory addresses. Type information helps the compiler fetch different kinds of info from the address, but the variable itself is nothing more or less than a memory address."}], "answers": [{"tags": [], "owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "is_accepted": false, "score": 2, "last_activity_date": 1503513368, "last_edit_date": 1503513368, "creation_date": 1503512938, "answer_id": 45847003, "question_id": 45846945, "link": "https://stackoverflow.com/questions/45846945/given-that-void-is-an-empty-type-why-is-void-a-pointer-type-which-can-point-to/45847003#45847003", "title": "Given that void is an empty type, why is void* a pointer type which can point to an object of any type?", "body": "<p>Rather than \"a pointer to an object of any type\", you could think of a <code>void *</code> as \"a pointer to something for which we don't know the type.\" It's basically a pointer without any type information associated with it, and the <code>void</code> can signify that lack of a type.</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1503513565, "creation_date": 1503513565, "answer_id": 45847160, "question_id": 45846945, "link": "https://stackoverflow.com/questions/45846945/given-that-void-is-an-empty-type-why-is-void-a-pointer-type-which-can-point-to/45847160#45847160", "title": "Given that void is an empty type, why is void* a pointer type which can point to an object of any type?", "body": "<p>The compiler does not need all the information about a type in order to assign pointers to each other, nor does it need any information to define a structure member or to pass such pointer as a parameter to a function, the reason is probably clear, all pointers have the same size.</p>\n\n<p>When the program attempts to read from or write to the underlying data &mdash; the data the pointer actually points to, then it needs all the type's information in order to perform <em>pointer arithmetic</em>. So it basically needs to know what is the offset to a member of a structure the pointer points to, or where exactly is <code>ptr[3]</code> when you need to dereference it. It needs the information necessary to compute such offsets.</p>\n\n<p>Since the compiler does not really need the type of a pointer for the mentioned operations, the pointer can have no type, so <code>void *</code> is the \"<em>type</em>\" of such pointer. But note, that you will need an actual type before you can do anything useful with it.</p>\n"}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "answer_count": 2, "score": -9, "last_activity_date": 1503513565, "creation_date": 1503512686, "last_edit_date": 1503513084, "question_id": 45846945, "link": "https://stackoverflow.com/questions/45846945/given-that-void-is-an-empty-type-why-is-void-a-pointer-type-which-can-point-to", "title": "Given that void is an empty type, why is void* a pointer type which can point to an object of any type?", "body": "<p>In C, <code>void</code> is a type without any value, i.e. an empty type.</p>\n\n<p>Following that meaning of <code>void</code>, <code>void*</code> should be a pointer pointing to nothing, while on the contrary, <code>void*</code> is actually a pointer type which can point to an object of any type. </p>\n\n<p>Do I misunderstand something here?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503511559, "post_id": 45846616, "comment_id": 78651273, "body": "Paste that code to question please"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503511662, "post_id": 45846616, "comment_id": 78651329, "body": "And state the specific problem."}, {"owner": {"reputation": 15, "user_id": 7610632, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u5ismEHKx94/AAAAAAAAAAI/AAAAAAAAADU/SehEV3P_1t4/photo.jpg?sz=128", "display_name": "Knowledge Facts", "link": "https://stackoverflow.com/users/7610632/knowledge-facts"}, "edited": false, "score": 0, "creation_date": 1503511694, "post_id": 45846616, "comment_id": 78651352, "body": "#include &lt;stdio.h&gt;  int main() {     int i, j, tmp=0;     int arr[10] = { 4, 7, 2, 4, 3, 1, 7, 9, 6, 5};     for(i = 0; i &lt; 10; i++){         for(j = i + 1; j &lt; 10; j++){             if(arr[i] == arr[j]){                 printf(&quot;arr[%d] = %d = arr[%d] = %d\\n&quot;, i, arr[i], j, arr[j]);                 tmp++;             }         }     }     printf(&quot;\\nSUM is %d\\n&quot;, i+ tmp);          return 0; }"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1503511765, "post_id": 45846616, "comment_id": 78651401, "body": "There is an <a href=\"https://stackoverflow.com/posts/45846616/edit\">edit</a> button."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 2, "creation_date": 1503511907, "post_id": 45846616, "comment_id": 78651487, "body": "<code>tmp += arr[i];</code> in condition"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503511975, "post_id": 45846616, "comment_id": 78651526, "body": "Is the expected result <code>11</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503512058, "post_id": 45846616, "comment_id": 78651567, "body": "If the array values are bounded by some small number, it can be done much simpler and effective."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1503512505, "post_id": 45846616, "comment_id": 78651837, "body": "Do you want to <i>sum</i> the duplicates (add everything that&#39;s duplicate together), or <i>count</i> the duplicates (find out how many duplicates there are)?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503512850, "post_id": 45846616, "comment_id": 78652000, "body": "Assuming you want the sum <code>4 + 7 = 11</code> as commented by @BLUEPIXY, initialise another flag array of the same length to zeros, to mark duplicate elements. Whenever you find a duplicate - if <i>neither</i> element was previously a duplicate, add the value to the sum and then set both the flag elements to 1."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503513247, "post_id": 45846616, "comment_id": 78652212, "body": ". . . two advantages: if instead you keep a list or array of the duplicate values, you have to search the list every time you find a duplicate, and, the outer loop can <code>continue</code> if its value is already a dup."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8327010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566a9962a55a9d5203bb26618337459d?s=128&d=identicon&r=PG", "display_name": "aatate98", "link": "https://stackoverflow.com/users/8327010/aatate98"}, "is_accepted": false, "score": 0, "last_activity_date": 1503512096, "creation_date": 1503512096, "answer_id": 45846783, "question_id": 45846616, "link": "https://stackoverflow.com/questions/45846616/how-to-find-duplicates-in-a-given-array-and-sum-them-in-c/45846783#45846783", "title": "how to find duplicates in a given array and sum them in c", "body": "<p>you could create a temp array and add to it by traversing through your original array. for every number in the original array, then add it to the temp array. if the number is already in the temp array than that means there was already an occurrence of it and dont add it to the temp array. once you iterated over all elements in the original array, the temp array should only contain unique numbers. then just iterate through the newer array and sum them all up.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503518444, "post_id": 45847406, "comment_id": 78654892, "body": "The first code, does not satisfy BLUEPIXY sum of 11 if you change the last element <code>5</code> to <code>4</code>."}, {"owner": {"reputation": 2083, "user_id": 5874320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4481e34d11cf24506c925b6bf255d062?s=128&d=identicon&r=PG&f=1", "display_name": "tdube", "link": "https://stackoverflow.com/users/5874320/tdube"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503521305, "post_id": 45847406, "comment_id": 78656236, "body": "@WeatherVane Agreed. I&#39;m waiting for more info/clarification from OP before investing more time in this question, though. :("}], "tags": [], "owner": {"reputation": 2083, "user_id": 5874320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4481e34d11cf24506c925b6bf255d062?s=128&d=identicon&r=PG&f=1", "display_name": "tdube", "link": "https://stackoverflow.com/users/5874320/tdube"}, "is_accepted": false, "score": 1, "last_activity_date": 1503514442, "creation_date": 1503514442, "answer_id": 45847406, "question_id": 45846616, "link": "https://stackoverflow.com/questions/45846616/how-to-find-duplicates-in-a-given-array-and-sum-them-in-c/45847406#45847406", "title": "how to find duplicates in a given array and sum them in c", "body": "<p>NOTE: It looks like there's a lot confusion with your question, because you didn't provide an expected output.</p>\n\n<h3>If you want to sum repeated numbers (as BLUEPIXY asked)...</h3>\n\n<p>You should add the value to <code>tmp</code> when you find the duplicate value instead of incrementing. Doing this would also alleviate the need to add <code>tmp</code> and <code>tmp</code> although I'm not sure what your intent was with that.</p>\n\n<pre><code>int main()\n{\n    int i, j, tmp=0;\n    int arr[10] = { 4, 7, 2, 4, 3, 1, 7, 9, 6, 5};\n    for(i = 0; i &lt; 10; i++){\n        for(j = i + 1; j &lt; 10; j++){\n\n                if(arr[i] == arr[j]){\n                    printf(\"arr[%d] = %d = arr[%d] = %d\\n\", i, arr[i], j, arr[j]);\n                    tmp += arr[i];\n                }\n        }\n    }\n    printf(\"\\nSUM is %d\\n\", tmp);\n    return 0;\n}\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>$ ./a.out\narr[0] = 4 = arr[3] = 4\narr[1] = 7 = arr[6] = 7\n\nSUM is 11\n</code></pre>\n\n<h3>If you just want to sum repeated numbers...</h3>\n\n<p>Simply sum them in the loop.</p>\n\n<pre><code>int main()\n{\n    int i, j, tmp=0;\n    int arr[10] = { 4, 7, 2, 4, 3, 1, 7, 9, 6, 5};\n    for(i = 0; i &lt; 10; i++){\n        for(j = i + 1; j &lt; 10; j++){\n\n                if(arr[i] == arr[j]){\n                    printf(\"arr[%d] = %d = arr[%d] = %d\\n\", i, arr[i], j, arr[j]);\n                    printf(\"SUM is %d\\n\\n\", arr[i] + arr[i]);\n                }\n        }\n    }\n    //printf(\"\\nSUM is %d\\n\", tmp + tmp);\n    return 0;\n}\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>$ ./a.out\narr[0] = 4 = arr[3] = 4\narr[1] = 7 = arr[6] = 7\n\nSUM is 11\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7610632, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u5ismEHKx94/AAAAAAAAAAI/AAAAAAAAADU/SehEV3P_1t4/photo.jpg?sz=128", "display_name": "Knowledge Facts", "link": "https://stackoverflow.com/users/7610632/knowledge-facts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1503514442, "creation_date": 1503511523, "last_edit_date": 1503513655, "question_id": 45846616, "link": "https://stackoverflow.com/questions/45846616/how-to-find-duplicates-in-a-given-array-and-sum-them-in-c", "title": "how to find duplicates in a given array and sum them in c", "body": "<p><a href=\"https://i.stack.imgur.com/FiKtB.png\" rel=\"nofollow noreferrer\">How to add duplicated number in array please help me</a></p>\n\n<pre><code>int main()\n{\n    int i, j, tmp=0;\n    int arr[10] = { 4, 7, 2, 4, 3, 1, 7, 9, 6, 5};\n    for(i = 0; i &lt; 10; i++){\n        for(j = i + 1; j &lt; 10; j++){\n\n                if(arr[i] == arr[j]){\n                    printf(\"arr[%d] = %d = arr[%d] = %d\\n\", i, arr[i], j, arr[j]);\n                    tmp++;\n                }\n        }\n    }\n    printf(\"\\nSUM is %d\\n\", tmp + tmp);\n    return 0;\n}\n</code></pre>\n\n<p>here is a code i can find only duplicate numbers but i can't find out duplicate sum of the numbers </p>\n"}, {"tags": ["c", "if-statement", "optimization"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 5, "creation_date": 1503509992, "post_id": 45846140, "comment_id": 78650312, "body": "<code>if (A || B)</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 2, "creation_date": 1503510361, "post_id": 45846140, "comment_id": 78650536, "body": "@AdiC which is, of course, completely optional!"}, {"owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1503510405, "post_id": 45846140, "comment_id": 78650569, "body": "@FelixPalmen True... But that&#39;s why I put &#39;<b><i>please</i></b>&#39;, as it&#39;s optional"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1503510520, "post_id": 45846140, "comment_id": 78650635, "body": "Well, some suggest waiting a bit with accepting the very first answer to encourage some additional answers.."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1503512216, "post_id": 45846140, "comment_id": 78651675, "body": "In fact, I greatly encourage questioners not to mark any answer correct for at least 24 hours--it should be a rule. Very often, an early answer might work in some limited way, and then a much better, more complete answer will come along."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 1, "creation_date": 1503514743, "post_id": 45846140, "comment_id": 78653049, "body": "@AdiC Consider <a href=\"https://meta.stackoverflow.com/q/297597/2410359\">What to do with user asking for upvote and accept?</a>  OP here has been around for 2 years.  comment flagged."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503510263, "post_id": 45846191, "comment_id": 78650476, "body": "This will even work if <code>A</code> or <code>B</code> are having side effects."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1503510282, "post_id": 45846191, "comment_id": 78650485, "body": "because of shortcut effect :)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503513738, "post_id": 45846191, "comment_id": 78652507, "body": "@Eugene Sh. I afraid not. The version before edit wont compile, version after the edit invalidates your comment"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503513874, "post_id": 45846191, "comment_id": 78652584, "body": "I am assuming it is a pseudo-code. Also not sure why the edit is invalidating it."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503514107, "post_id": 45846191, "comment_id": 78652717, "body": "@Eugene Sh. and you wrote something about side effects? It stops to be a pseudo code then. <a href=\"https://ideone.com/cCO9MM\" rel=\"nofollow noreferrer\">ideone.com/cCO9MM</a> <code>if (Condition A) || (Condition B) {</code> this syntax is illegal in C"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503514175, "post_id": 45846191, "comment_id": 78652763, "body": "@PeterJ_01 I don&#39;t see it on my level of pedantism."}], "tags": [], "owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "is_accepted": true, "score": 1, "last_activity_date": 1503512249, "last_edit_date": 1503512249, "creation_date": 1503510029, "answer_id": 45846191, "question_id": 45846140, "link": "https://stackoverflow.com/questions/45846140/simplifying-if-else-if-ladder-such-that-the-function-calls-are-made-only-once/45846191#45846191", "title": "Simplifying if-else-if ladder such that the function calls are made only once", "body": "<p>Change it to:</p>\n\n<pre><code>if ((Condition A) || (Condition B)) {\n    A();\n}\n</code></pre>\n\n<p>As you want the function <code>A()</code> to run if <code>Condition A</code> is <code>true</code> or if <code>Condition B</code> is <code>true</code>, you can use the <code>||</code> (OR) operator. This returns <code>true</code> if either conditions are <code>true</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1586028398, "post_id": 45847462, "comment_id": 107976865, "body": "The parentheses are simply in the wrong place in the last example."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1586044282, "post_id": 45847462, "comment_id": 107981366, "body": "No, but it makes it uninteresting.  Also, it should have been a comment on that answer, and there\u2019s no such code in the (one) other answer now."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1503514622, "creation_date": 1503514622, "answer_id": 45847462, "question_id": 45846140, "link": "https://stackoverflow.com/questions/45846140/simplifying-if-else-if-ladder-such-that-the-function-calls-are-made-only-once/45847462#45847462", "title": "Simplifying if-else-if ladder such that the function calls are made only once", "body": "<p>Unfortunately in general you cant simplify this \"tree\" of ifs.  If he second (or next) condition has a side effect. So it always good to consider why someone has done it this way.</p>\n\n<p>Examples:</p>\n\n<pre><code>if(readbytefromUART() == 'b' || readbytefromUART() == 'c') .......\n/* if condition ... == 'b' is met , there is no second call to the function\n</code></pre>\n\n<p>or more common mistake in the code </p>\n\n<pre><code>if(readbytefromUART() == 'b' &amp;&amp; readbytefromUART() == 'c') .......\n/* if condition ... == 'b' is not met , there is no second call to the function\n</code></pre>\n\n<p><a href=\"https://ideone.com/cCO9MM\" rel=\"nofollow noreferrer\">https://ideone.com/cCO9MM</a></p>\n\n<p>syntax proposed in the another answer </p>\n\n<pre><code>if (cond1) || (cond2) {\n</code></pre>\n\n<p>is illegal in C and it wont compile</p>\n"}], "owner": {"reputation": 159, "user_id": 4805944, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a695fab36e8cac27a47239d2cdf1285b?s=128&d=identicon&r=PG&f=1", "display_name": "AcidBurn", "link": "https://stackoverflow.com/users/4805944/acidburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 45846191, "answer_count": 2, "score": 0, "last_activity_date": 1503514622, "creation_date": 1503509879, "question_id": 45846140, "link": "https://stackoverflow.com/questions/45846140/simplifying-if-else-if-ladder-such-that-the-function-calls-are-made-only-once", "title": "Simplifying if-else-if ladder such that the function calls are made only once", "body": "<p>How would you simplify the following if-else-if ladder such that the function call is made only once? </p>\n\n<pre><code>if (Condition A){\n    A();\n}\nelse {\n    if (Condition B) {\n        A();\n    }\n} \n</code></pre>\n"}, {"tags": ["c++", "c", "types"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1503509933, "post_id": 45846121, "comment_id": 78650271, "body": "What do you mean by &quot;how does it work&quot;, specifically?"}, {"owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1503510005, "post_id": 45846121, "comment_id": 78650323, "body": "<code>void *</code> is always a pointer type, while a universal reference type contains all values, both pointers and nonpointers"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 4, "creation_date": 1503510020, "post_id": 45846121, "comment_id": 78650333, "body": "It can point to anything.  But, you have to tell the compiler what it is before you can actually get to what it points to."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1503510177, "post_id": 45846121, "comment_id": 78650428, "body": "Pointers are the closest you can get to a reference-like concept in C."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1503510205, "post_id": 45846121, "comment_id": 78650442, "body": "<b><i>In C and C++, how does void * work as a universal reference type?</i></b> I say it does not. It works as a universal pointer. However to dereference you need to cast."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1503510219, "post_id": 45846121, "comment_id": 78650447, "body": "I wouldn&#39;t use the words &quot;universal reference&quot;, these belong to Scott Myers  now and have a different meaning. I would use &quot;opaque references&quot; instead, because the meaning of the value is known to the class that &quot;owns&quot; the data."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1503510253, "post_id": 45846121, "comment_id": 78650468, "body": "@RustyX: &quot;<i>I wouldn&#39;t use the words &quot;universal reference&quot;, these belong to Scott Myers now and have a different meaning.</i>&quot; No, they don&#39;t. Those are called &quot;forwarding references&quot;."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1503510412, "post_id": 45846121, "comment_id": 78650572, "body": "C <b>or</b> C++, pick one. You can&#39;t meaningfully talk about &quot;references&quot; in a way that makes sense for both languages (unless you simply say C doesn&#39;t have them at all)."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 2, "creation_date": 1503510495, "post_id": 45846121, "comment_id": 78650621, "body": "@Leushenko The quote from the book makes it clear that &quot;reference&quot; here is the general computer science term, and not C++ references specifically."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503510732, "post_id": 45846121, "comment_id": 78650779, "body": "A pointer to a function may not fit in a <code>void*</code>.  <code>void*</code>, in C is <b>not</b> a universal reference type nor universal pointer type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1503510773, "post_id": 45846121, "comment_id": 78650803, "body": "In C++, you use templates, not containers of void pointers. Tagging this as C++ and C makes the question meaningless. I have removed the C++ tag."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1503510802, "post_id": 45846121, "comment_id": 78650826, "body": "Note that the excerpt states that a universal reference type can <i>reference</i> any object, not that it can <i>contain</i> any object. So while a <code>void *</code> might not be able to <i>contain</i> a <code>uint128_t</code>, it can still <i>reference</i> (or point to) it."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1503510937, "post_id": 45846121, "comment_id": 78650905, "body": "@NeilButterworth Since the text quoted in the question specifically refers to both C and C++ in the same breath, I think this is one of the rare cases where it <i>is</i> appropriate to tag with both, but answerers should be careful to address both languages."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1503515576, "post_id": 45846121, "comment_id": 78653480, "body": "@zwol Anyone is at liberty to retag it."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503511010, "post_id": 45846249, "comment_id": 78650954, "body": "&quot;A <code>void*</code> pointer will generally hold any pointer ...&quot;  --&gt; A <code>void*</code> may be insufficient to &quot;hold&quot; a function pointer.  I agree with <a href=\"https://stackoverflow.com/questions/45846121/how-does-void-work-as-a-universal-reference-type#comment78650980_45846249\">Oliver Charlesworth</a> that an attempt to save a function pointer in a <code>void*</code> is UB."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503511059, "post_id": 45846249, "comment_id": 78650980, "body": "@chux - It&#39;s UB I believe."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1503511228, "post_id": 45846249, "comment_id": 78651088, "body": "Very, very slight nitpick (if I&#39;m right) on &quot;<i>You also need to convert it to the same pointer type that it was converted from</i>&quot;, <b>before you use it</b>. I think you can covert to any pointer type you like in the mean time. Though, I think that&#39;s more language-layer level than anything practical."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503511231, "post_id": 45846249, "comment_id": 78651092, "body": "@chux UB per the letter of the standard, but required to &quot;work as expected&quot; by both POSIX and the de-facto Windows ABI."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1503511276, "post_id": 45846249, "comment_id": 78651120, "body": "@luk32 If you don&#39;t convert it to either a type compatible with the one you started with, or a character type, before dereferencing, you have UB because of the pointer-aliasing rules."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1503511340, "post_id": 45846249, "comment_id": 78651156, "body": "@zwol Aren&#39;t the conversions allowed, but using the result is an UB? My bad then."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1503511363, "post_id": 45846249, "comment_id": 78651168, "body": "@luk32 Er, yes, that&#39;s what I meant."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1503511618, "post_id": 45846249, "comment_id": 78651305, "body": "@zwol I think not only deference might be illegal, but using result as a parameter also, for e.g. <code>memcpy</code> I am not sure though. I was thinking about aliasing too. We obviously agree on dereferencing. That&#39;s what I meant by language-lawyer level thing. Cheers."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1503512170, "post_id": 45846249, "comment_id": 78651638, "body": "@chux can you expand on the restriction for function pointers? The only oddity I remember is long pointers on the segmented x86 architecture."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1503512352, "post_id": 45846249, "comment_id": 78651749, "body": "@zwol a compatible type might not be good enough. You&#39;ll get in trouble with multiply derived classes, since pointers to the base classes won&#39;t all have the same address. The compiler needs type information to properly adjust the pointer."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1503512646, "post_id": 45846249, "comment_id": 78651903, "body": "@MarkRansom I only know the rules for this in C, which doesn&#39;t have multiply derived anything.  C++ will be <i>similar</i>, but undoubtedly not the same. (Also, I mean &quot;compatible&quot; in the sense precisely defined by the C standard, which is a lot closer to &quot;exactly the same&quot; than most people realize.)"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1503513560, "post_id": 45846249, "comment_id": 78652411, "body": "@zwol originally the question was tagged with both C and C++. It looks like C++ was removed, so some of my answer and comments won&#39;t make sense. I can see that C might not have the same problem with compatible types."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1503513869, "post_id": 45846249, "comment_id": 78652580, "body": "@MarkRansom Your memory of segmented x86 architecture is an example of a possible wide function pointer (e.g. 32-bit) and a narrow <code>void*</code> (e.g. 16-bit) .  IAC, C (&#167;6.3 ...) specifies conversion to/from <i>object</i> pointers with <code>void*</code> and by omission, conversion to/from function pointers is UB.  A function pointer of one type converts to/from a function pointer of another type.  So <code>union { void *v; int (*f)(); }</code> is close to a universal &quot;ref&quot; type."}], "tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 8, "last_activity_date": 1503510255, "creation_date": 1503510255, "answer_id": 45846249, "question_id": 45846121, "link": "https://stackoverflow.com/questions/45846121/how-does-void-work-as-a-universal-reference-type/45846249#45846249", "title": "How does void* work as a universal reference type?", "body": "<p>A <code>void*</code> pointer will generally hold any pointer that is not a C++ pointer-to-member. It's rather inconvenient in practice, since you need to cast it to another pointer type before you can use it. You also need to convert it to the same pointer type that it was converted <em>from</em> to make the <code>void*</code>, otherwise you risk undefined behavior.</p>\n\n<p>A good example would be the <a href=\"http://en.cppreference.com/w/c/algorithm/qsort\" rel=\"noreferrer\"><code>qsort</code> function</a>. It takes a <code>void*</code> pointer as a parameter, meaning it can point to an array of anything. The comparison function you pass to <code>qsort</code> must know how to cast two <code>void*</code> pointers back to the types of the array elements in order to compare them.</p>\n"}, {"tags": [], "owner": {"reputation": 1063, "user_id": 6273701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276eef0a6e4fe33b94244a14824992f?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dmitry", "link": "https://stackoverflow.com/users/6273701/p-dmitry"}, "is_accepted": false, "score": 1, "last_activity_date": 1503510393, "creation_date": 1503510393, "answer_id": 45846295, "question_id": 45846121, "link": "https://stackoverflow.com/questions/45846121/how-does-void-work-as-a-universal-reference-type/45846295#45846295", "title": "How does void* work as a universal reference type?", "body": "<p>Probably the reason is that you can take address of any variable of any type and cast it to <code>void*</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1503510673, "post_id": 45846324, "comment_id": 78650739, "body": "Not in C++. This question makes no sense if it is tagged as both C and C++."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1503510809, "post_id": 45846324, "comment_id": 78650831, "body": "@NeilButterworth I&#39;ve edited in a supplement/clarification."}], "tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 1, "last_activity_date": 1503510772, "last_edit_date": 1503510772, "creation_date": 1503510507, "answer_id": 45846324, "question_id": 45846121, "link": "https://stackoverflow.com/questions/45846121/how-does-void-work-as-a-universal-reference-type/45846324#45846324", "title": "How does void* work as a universal reference type?", "body": "<p>It does by a silent contract that you know the actual type of object.</p>\n\n<p>So you can store different kinds of elements in a container, but you need to somehow know what is what when taking elements back, to interpret them correctly.</p>\n\n<p>The only convenience <code>void*</code> offers is that it's idiomatic for this, i.e. it's clear that dereferencing the pointer makes no sense, and <code>void*</code> is implicitly convertible to any pointer type. That is for c/</p>\n\n<p>In c++ this is called type erasure techniques preferred. Or special types, like <a href=\"http://en.cppreference.com/w/cpp/experimental/any\" rel=\"nofollow noreferrer\"><code>any</code></a> (there is a boost version of this too.)</p>\n"}, {"tags": [], "owner": {"reputation": 164, "user_id": 6521348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c09392e2895896614088b2af7d293df?s=128&d=identicon&r=PG&f=1", "display_name": "Loi Ly", "link": "https://stackoverflow.com/users/6521348/loi-ly"}, "is_accepted": false, "score": 1, "last_activity_date": 1503510826, "creation_date": 1503510826, "answer_id": 45846423, "question_id": 45846121, "link": "https://stackoverflow.com/questions/45846121/how-does-void-work-as-a-universal-reference-type/45846423#45846423", "title": "How does void* work as a universal reference type?", "body": "<p><code>void*</code> is no more <b>just a pointer</b>. Thus, it <b>holds</b> an address of an object (or an array and stuffs like that)</p>\n\n<p>When your program is running, every variable should have it owns address in memory, right? And pointer is somethings point to that address.</p>\n\n<p>In normal, each type of pointer should be the same type of object <code>int b = 5; int* p = &amp;b;</code> for example. But that is the case you know what the type is, it means the <code>specific type</code>.</p>\n\n<p>But sometimes, you just want to know that it stores somethings somewhere in memory and you know what \"type\" of that address, you can cast easily. For example, in OpenCV library which I am learning, there are a lot of functions where user can pass the arguments to instead of declaring global variables and most use in <code>callback</code> functions, like this:\n<code>void onChange(int v, void *ptr)</code>\nHere, the library does not care about what <code>ptr</code> point to, it just know that when you call the function, if you pass an address to like this <code>onChange(5,&amp;b)</code> then you must cast <code>ptr</code> to the same type before dealing with it <code>int b = static_cast&lt;int*&gt;(ptr);</code></p>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 4, "last_activity_date": 1503510876, "creation_date": 1503510876, "answer_id": 45846438, "question_id": 45846121, "link": "https://stackoverflow.com/questions/45846121/how-does-void-work-as-a-universal-reference-type/45846438#45846438", "title": "How does void* work as a universal reference type?", "body": "<p>The crux of your confusion is that neither an instance of <code>void *</code> nor an instance of Modula-3's <code>refany</code>, nor an instance of any other language's \"can refer to anything\" type, <em>contains</em> the object that it refers to.  A variable of type <code>void *</code> is always a pointer and a variable of type <code>refany</code> is always a reference.  But the <em>object that they refer to</em> can be of any type.</p>\n\n<p>A purist of programming-language theory would tell you that C does not have references at all, because pointers are not references.  It has a nearly-universal <em>pointer</em> type, <code>void *</code>, which can point to an <em>object</em> of any type (including integers, aggregates, and other pointers).  As a common but not ubiquitous extension, it can also point to any function (functions are not objects).</p>\n\n<p>The purist would also tell you that C++ does <em>not</em> have a (nearly-)universal pointer type, because of its stricter type system, and doesn't have a universal reference type either.</p>\n\n<p>They would also say that the book you are reading is being sloppy with its terminology, and they would caution you to not take any one such book for the gospel truth on terminological matters, or any other matters.  You should instead read widely in both books and CS journals and conference proceedings (collectively known as \"the literature\") until you gain an \"ear\" for what is generally-agreed-on terminology, what is specific to a subdiscipline or a community of practice, and so on.</p>\n\n<p>And finally they would remind you that C and C++ are two different languages, and anyone who speaks of them in the same breath is either glossing over the distinctions (which may or may not be relevant in context), decades out of date, or both.</p>\n"}, {"comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1503511717, "post_id": 45846572, "comment_id": 78651366, "body": "&quot;A pointer to void will never be equal to another pointer&quot; - is that true?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503514186, "post_id": 45846572, "comment_id": 78652770, "body": "<code>&quot;%p&quot;</code> matches a <code>void *</code>, not an <code>int *</code> as in this example code.  <code>printf(&quot;value of pi is %p\\n&quot;, pi);</code> is UB, even though it commonly &quot;works&quot;."}], "tags": [], "owner": {"reputation": 25296, "user_id": 2975396, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/33a5374a3c2e22b8895b38f14ef9b845?s=128&d=identicon&r=PG&f=1", "display_name": "TheGameiswar", "link": "https://stackoverflow.com/users/2975396/thegameiswar"}, "is_accepted": false, "score": 0, "last_activity_date": 1503511346, "creation_date": 1503511346, "answer_id": 45846572, "question_id": 45846121, "link": "https://stackoverflow.com/questions/45846121/how-does-void-work-as-a-universal-reference-type/45846572#45846572", "title": "How does void* work as a universal reference type?", "body": "<p>Probably this explanation from  <a href=\"http://shop.oreilly.com/product/0636920028000.do\" rel=\"nofollow noreferrer\">Understanding pointers from Richard Reese</a>  will help</p>\n\n<blockquote>\n  <p>A pointer to void is a general-purpose pointer used to hold references to any data type.</p>\n</blockquote>\n\n<p>It has two interesting properties:   </p>\n\n<ul>\n<li><p>A pointer to void will have the same representation and memory alignment as a pointer to char  </p></li>\n<li><p>A pointer to void will never be equal to another pointer. However, two void pointers assigned a NULL  value will be equal.</p></li>\n</ul>\n\n<p>Any pointer can be assigned to a pointer to void. It can then be cast back to its original pointer type. When this happens the value will be equal to the original pointer value.</p>\n\n<p>This  is  illustrated  in  the  following  sequence,  where  a  pointer  to \nint   is  assigned  to  a pointer to void and then back to a pointer to int</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid main()\n{\n    int num = 100;\n    int *pi = &amp;num;\n\n    printf(\"value of pi is %p\\n\", pi);\n\n    void* pv = pi;\n    pi = (int*)pv;\n\n    printf(\"value of pi is %p\\n\", pi);\n}\n</code></pre>\n\n<p>Pointers to void are used for data pointers, not function pointers</p>\n"}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "answer_count": 6, "score": -3, "last_activity_date": 1503515661, "creation_date": 1503509821, "last_edit_date": 1503515661, "question_id": 45846121, "link": "https://stackoverflow.com/questions/45846121/how-does-void-work-as-a-universal-reference-type", "title": "How does void* work as a universal reference type?", "body": "<p>From Programming Language Pragmatics, by Scott</p>\n\n<blockquote>\n  <p>For systems programming, or to facilitate the writing of\n  general-purpose con- tainer (collection) objects (lists, stacks,\n  queues, sets, etc.) that hold references to other objects, several\n  languages provide a universal reference type. <strong>In C and C++, this\n  type is called void *</strong>. In Clu it is called any; in Modula-2,\n  address; in Modula-3, refany; in Java, Object; in C#, object.</p>\n</blockquote>\n\n<p>In C and C++, how does <code>void *</code> work as a universal reference type?</p>\n\n<p><code>void *</code> is always only a pointer type, while a universal reference type contains all values, both pointers and nonpointers. So I can't see how <code>void *</code> is a universal reference type.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "struct", "enums", "expression"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503507979, "post_id": 45845557, "comment_id": 78649264, "body": "It doesn&#39;t store the enum values anywhere. Why would it have to?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1503508066, "post_id": 45845557, "comment_id": 78649304, "body": "enum just defines constants... so writing <code>id1</code> or <code>id2</code> is the same as writing <code>20</code> or <code>42</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503508086, "post_id": 45845557, "comment_id": 78649317, "body": "<code>enum</code> is a type definition. It&#39;s values are constants, which are not stored anywhere other than in the &quot;knowledge&quot; of the compiler."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1503508094, "post_id": 45845557, "comment_id": 78649322, "body": "<i><code>printf(&quot;%d&quot;,sizeof(var1)) ;</code> output is <code>4.</code></i> --&gt; <code>printf(&quot;%zu&quot;, sizeof(var1)) ;</code> output is <code>12, right?</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503508154, "post_id": 45845557, "comment_id": 78649348, "body": "@BLUEPIXY Why would it?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503508199, "post_id": 45845557, "comment_id": 78649381, "body": "@EugeneSh. read carefully what OP said about its structure..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1503508226, "post_id": 45845557, "comment_id": 78649396, "body": "@Jean-BaptisteYun&#232;s  Oh, so it is about the struct, not the <code>enum</code>."}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1503508401, "post_id": 45845557, "comment_id": 78649507, "body": "these are 2 distinct questions, structure and understanding of enum. Seems you want very special trick, to connett the two"}], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503509104, "post_id": 45845614, "comment_id": 78649878, "body": "to be precise: it can be char, unsigned int, or int."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503510036, "post_id": 45845614, "comment_id": 78650343, "body": "@PeterJ_01 there are more options."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503510263, "post_id": 45845614, "comment_id": 78650475, "body": "<code>Each enumerated type shall be compatible with char, a signed integer type, or an unsigned integer type.</code> so it can mean any enumerable type."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1503508007, "creation_date": 1503508007, "answer_id": 45845614, "question_id": 45845557, "link": "https://stackoverflow.com/questions/45845557/where-and-how-are-the-values-in-each-of-the-members-of-enum-stored-in-c/45845614#45845614", "title": "where and how are the values in each of the members of enum stored in C?", "body": "<p>You use <code>enum</code> to define a set of values allowed to be used in a variable of that type; as only one of them at a time can be in there, the size is what would be needed to hold that, regardless of how many possibilities there are.</p>\n"}, {"tags": [], "owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "is_accepted": false, "score": 0, "last_activity_date": 1503509419, "creation_date": 1503509419, "answer_id": 45846004, "question_id": 45845557, "link": "https://stackoverflow.com/questions/45845557/where-and-how-are-the-values-in-each-of-the-members-of-enum-stored-in-c/45846004#45846004", "title": "where and how are the values in each of the members of enum stored in C?", "body": "<p>The identifiers associated to values of en enumeration only exist in translation time. They are replaced by their numerical values during compilation, so they are not held anywhere as objects in storage space.  </p>\n\n<p>Ulterior variables declared as having the enumeration type you defined there will have an appropriate integer type, chosen by the compiler. Thus, you can assign integer values to these objects, not previously named in the enumeration.  </p>\n"}, {"tags": [], "owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "is_accepted": true, "score": 1, "last_activity_date": 1515162244, "last_edit_date": 1515162244, "creation_date": 1503511486, "answer_id": 45846609, "question_id": 45845557, "link": "https://stackoverflow.com/questions/45845557/where-and-how-are-the-values-in-each-of-the-members-of-enum-stored-in-c/45846609#45846609", "title": "where and how are the values in each of the members of enum stored in C?", "body": "<p>An <code>enum</code> type in C is basically a logical grouping of named <code>int</code> constants. An <code>enum</code> variable is only guaranteed to hold a <strong>single</strong> <code>int</code> value, regardless of how many named constants the type contains. And there isn't a way to \"enumerate\" all possible enum values in C. If you are using a compiler and architecture where <code>int</code> is 32-bit, all values of this enum (named constants) will have to fit inside these 4 bytes. </p>\n\n<p>Additionally, the variable doesn't even have to hold any of the constants defined in the enum type at runtime, it will behave as a plain <code>int</code> variable.  Some compilers won't even throw a warning if you mix different <code>enum</code> types, at least not until you enable additional warnings.</p>\n\n<p>So, actual values won't be stored anywhere after compilation (unless they are used), just as a <code>#define</code> macro won't be stored anywhere unless you reference it somehow.</p>\n\n<p>So, when you write this:</p>\n\n<pre><code>// define the enum \nenum my_enum { \n    id1 = 20,\n    id2 = 42,\n    id3 = 1 \n};\n\n// declare the variable 'my_val' and assign 'id2'\nenum my_enum my_val = id2;\n</code></pre>\n\n<p>It will be almost equivalent to:</p>\n\n<pre><code>#define id1 20\n#define id2 42\n#define id3 1\n\nint my_val = id2;\n</code></pre>\n\n<p>And the compiler will behave as you simply wrote:</p>\n\n<pre><code>int my_val = 42;\n</code></pre>\n\n<p>and throw everything else away.</p>\n\n<p>So, if you are asking where <code>42</code> is stored, then the answer is, somewhere between the instructions inside the code section of your executable. If you didn't use <code>id1</code> and <code>id3</code> anywhere, they won't exist anywhere.</p>\n\n<p>If you need to store a list of values in C, you'll either need to use an array of integers, an array of structs, or a more elaborate data structure (linked list, hash table, a tree, or whatever suits your use case).</p>\n"}], "owner": {"reputation": 7550, "user_id": 6665568, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5dac06cb071c09718d413ff3623953ce?s=128&d=identicon&r=PG&f=1", "display_name": "Natesh bhat", "link": "https://stackoverflow.com/users/6665568/natesh-bhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 45846609, "answer_count": 3, "score": 2, "last_activity_date": 1515162244, "creation_date": 1503507826, "last_edit_date": 1503508332, "question_id": 45845557, "link": "https://stackoverflow.com/questions/45845557/where-and-how-are-the-values-in-each-of-the-members-of-enum-stored-in-c", "title": "where and how are the values in each of the members of enum stored in C?", "body": "<p>The way structures allocate memory is that :-</p>\n\n<pre><code>struct mys\n{ \n   int a , b, c ;\n};\n</code></pre>\n\n<p>As we can see in structs, when I declare a struct variable say, <code>struct mys var1</code>, var1 takes the sum of all the basic datatypes inside it. (12 bytes here assuming the word length is 4 bytes)\n<code>printf(\"%d\",sizeof(var1)) ;</code>\noutput is <code>4</code>.</p>\n\n<hr>\n\n<p>In enum, we have, \n<code>enum myvar{ id1 , id2 , id3 };</code> and whenever I declare an enum variable and print its size, it only prints the size of integer(4 bytes).\nAnd the id1 ,id2, id3 would get 0 to 2 consecutively. So i thought it's analogous to generators in python (actual allocation of memory is just 2 bytes) and it adds 1 to each of the consecutive members of the enum type when we access it. </p>\n\n<p>But, what confused me about <code>enum</code> is that, even though we define an enum like this :-</p>\n\n<p><code>enum myvar{ id1 = 20 , id2 =42, id3=1 };</code></p>\n\n<p>If I declare an enum variable <code>enum myvar var1</code> , then var1 would still take 4 bytes of memory. Where are the values that I have given in the definition getting stored? Since I had given random values for the members of the enum, I thought it would allocate 6 bytes of memory since it's not the usual 0 to 2 default integers anymore after assigning them. So clearly I'm wrong. What is the reason behind this? If the size of enum is just the word length , how does it manage the memory allocation . Clear explanations please ......</p>\n"}, {"tags": ["c", "system-verilog", "vpi"], "comments": [{"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1503513635, "post_id": 45845384, "comment_id": 78652464, "body": "no, there is no such way in system verilog, unless you re-declare all those variously-named registers as a some type of an array. So, but now the question is: <i>what is the <b>Register</b></i>? is it a data struct or a module, or a block?"}, {"owner": {"reputation": 453, "user_id": 2737316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb6cb418e784a430f2baf9b689582fbf?s=128&d=identicon&r=PG", "display_name": "vrleboss", "link": "https://stackoverflow.com/users/2737316/vrleboss"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1503514956, "post_id": 45845384, "comment_id": 78653166, "body": "@Serge it is a module."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1503521251, "post_id": 45845384, "comment_id": 78656206, "body": "in this case you might want to look into arrayed instantiations and generate blocks. However, it could be a mess and the only reason to go there if you need a synthesizable model. otherwise, use Daves suggestion."}], "answers": [{"comments": [{"owner": {"reputation": 15943, "user_id": 1959732, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/K5lWy.png?s=128&g=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/1959732/greg"}, "edited": false, "score": 0, "creation_date": 1503510995, "post_id": 45845471, "comment_id": 78650945, "body": "Wouldn&#39;t enabling UVM and using the <code>uvm_hdl_*</code> methods suffice?"}, {"owner": {"reputation": 30055, "user_id": 2755607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b903bf594599a27ed5df3776e42c5b?s=128&d=identicon&r=PG", "display_name": "dave_59", "link": "https://stackoverflow.com/users/2755607/dave-59"}, "reply_to_user": {"reputation": 15943, "user_id": 1959732, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/K5lWy.png?s=128&g=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/1959732/greg"}, "edited": false, "score": 0, "creation_date": 1503514220, "post_id": 45845471, "comment_id": 78652786, "body": "Yes, that is essentially the same as using the VPI.  OP did not reveal if they were already using the UVM."}, {"owner": {"reputation": 453, "user_id": 2737316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb6cb418e784a430f2baf9b689582fbf?s=128&d=identicon&r=PG", "display_name": "vrleboss", "link": "https://stackoverflow.com/users/2737316/vrleboss"}, "edited": false, "score": 0, "creation_date": 1503515065, "post_id": 45845471, "comment_id": 78653219, "body": "@dave_59 pointed me in the right direction - I am now trying to implement the solution and will post it here when I succed. I am not currently using UVM but if the implementation is simple I am interested in learning it."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1503521410, "post_id": 45845471, "comment_id": 78656289, "body": "using &#39;c/c++&#39; instead of uvm functions will make it a bit more efficient though. You can do it from a dpi call.  ."}], "tags": [], "owner": {"reputation": 30055, "user_id": 2755607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b903bf594599a27ed5df3776e42c5b?s=128&d=identicon&r=PG", "display_name": "dave_59", "link": "https://stackoverflow.com/users/2755607/dave-59"}, "is_accepted": true, "score": 3, "last_activity_date": 1503507471, "creation_date": 1503507471, "answer_id": 45845471, "question_id": 45845384, "link": "https://stackoverflow.com/questions/45845384/systemverilog-looping-through-hierarchy/45845471#45845471", "title": "SystemVerilog looping through hierarchy", "body": "<p>There are ways to do this, but not within the SystemVerilog language itself. You can write VPI code in C to iterate over block names and apply the forces use the C API. Or you can use tool specific commands to iterate of block names and use commands (usually Tcl) to apply the forces. </p>\n\n<p>Both of those are beyond the scope of what can be shown in this forum. </p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 2737316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb6cb418e784a430f2baf9b689582fbf?s=128&d=identicon&r=PG", "display_name": "vrleboss", "link": "https://stackoverflow.com/users/2737316/vrleboss"}, "is_accepted": false, "score": 1, "last_activity_date": 1503896531, "last_edit_date": 1503896531, "creation_date": 1503533493, "answer_id": 45851028, "question_id": 45845384, "link": "https://stackoverflow.com/questions/45845384/systemverilog-looping-through-hierarchy/45851028#45851028", "title": "SystemVerilog looping through hierarchy", "body": "<p>Following dave's answer I implemented the VPI code in C to loop over all register within <code>RegBlock</code> and randomly force bit flips at some positions (register is 32 bit wide).</p>\n\n<pre><code>#include &lt;sv_vpi_user.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#define NULL 0\n\nvoid reg_flips() {\n  vpiHandle module_iter;\n  vpiHandle module_obj;\n  vpiHandle module_regblk;\n  vpiHandle reg_nets;\n  vpiHandle net;\n  //Starting from the RegBlock\n  module_regblk = vpi_handle_by_name(\"DUT.RegBlock\",NULL);\n  //Iterator over all register in RegBlock\n  module_iter = vpi_iterate(vpiModule,module_regblk);\n  while (module_iter) {\n    module_obj = vpi_scan(module_iter);\n    if (module_obj) {\n      reg_nets = vpi_iterate(vpiReg,module_obj);\n        while (reg_nets) {\n          net = vpi_scan(reg_nets);\n          if (net) {\n            s_vpi_value val;\n            val.format = vpiIntVal;\n            val.value.integer = rand()%2;\n            int position = rand()%32;\n            //Forcing the value at a given position.\n            vpi_put_value(vpi_handle_by_index(net,position),&amp;val,NULL,vpiNoDelay);\n          }\n          else {\n            reg_nets = NULL;\n          }\n        }\n      }\n    }\n    else {\n      module_iter = NULL;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 2737316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb6cb418e784a430f2baf9b689582fbf?s=128&d=identicon&r=PG", "display_name": "vrleboss", "link": "https://stackoverflow.com/users/2737316/vrleboss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 45845471, "answer_count": 2, "score": 1, "last_activity_date": 1503896568, "creation_date": 1503507177, "last_edit_date": 1503896568, "question_id": 45845384, "link": "https://stackoverflow.com/questions/45845384/systemverilog-looping-through-hierarchy", "title": "SystemVerilog looping through hierarchy", "body": "<p>I have registers instantiated in a Register block <code>Regblock</code> as such:</p>\n\n<pre><code>DUT.Regblock.Register1\nDUT.Regblock.RegisterA\nDUT.Regblock.RegisterABC\n...\n</code></pre>\n\n<p>All these registers have the same inner structure.\nI would like to simulate the effects of bit flips in these registers.</p>\n\n<pre><code>//Here an attempt to do bit flips\nbitFlipLocation = $random;\nforce  DUT.RegBlock.Register1.reg[bitFlipLocation] = ~DUT.RegBlock.Register1.reg[bitFlipLocation];\nrelease DUT.ABCStar1.RegBlock.Register1.reg[bitFlipLocation];\n</code></pre>\n\n<p>Is there a way to create a loop over all <code>DUT.Regblock.Register1, RegisterA, RegisterABC, ...</code> inside <code>RegBlock</code> and create these bit flips?</p>\n"}, {"tags": ["java", "python", "c", "xml"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1503504249, "post_id": 45844317, "comment_id": 78647063, "body": "Probably your C code is very inefficient. There are a lot of ways to code this in C inefficiently (e.g; using <code>strlen</code> of long strings inf the end condifion of a loop, <code>realloc</code>ating bytes too often, copying data around without need etc. . Hard to tell without actually seeing the code."}, {"owner": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "edited": false, "score": 2, "creation_date": 1503504378, "post_id": 45844317, "comment_id": 78647155, "body": "Spare yourself the time and debugging efforts and just use a library (unless you really enjoy writing the parser as an exercise, then by all means, continue)."}, {"owner": {"reputation": 269, "user_id": 1160201, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c0b79a263cb733a3438272c9f6c7d1f2?s=128&d=identicon&r=PG", "display_name": "Bala", "link": "https://stackoverflow.com/users/1160201/bala"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1503504958, "post_id": 45844317, "comment_id": 78647517, "body": "@Michael. Yes even i doubt that. Let me try to use libxml2 and get some performance results."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1503505237, "post_id": 45844317, "comment_id": 78647698, "body": "as <a href=\"https://github.com/miloyip/nativejson-benchmark\" rel=\"nofollow noreferrer\">these benchmarks prove</a> (read them <a href=\"https://rawgit.com/miloyip/nativejson-benchmark/master/sample/performance_Corei7-4980HQ@2.80GHz_mac64_clang7.0.html\" rel=\"nofollow noreferrer\">here</a>) there are significant differences within the same language (C) when it comes to coding and performance."}, {"owner": {"reputation": 269, "user_id": 1160201, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c0b79a263cb733a3438272c9f6c7d1f2?s=128&d=identicon&r=PG", "display_name": "Bala", "link": "https://stackoverflow.com/users/1160201/bala"}, "edited": false, "score": 0, "creation_date": 1503506215, "post_id": 45844317, "comment_id": 78648280, "body": "Thanks !!. I am still looking at the code. I think the issue is i am not buffering the data while reading from a file .I use fgetc() to get a char and parse it. All my logics will be performed on this char before it retrieves the next. I think i should use fread() for buffering . I am modifying the code to get the results.."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1503506848, "post_id": 45844317, "comment_id": 78648653, "body": "there is a bunch of libraries in java to deal with the html pages, i.e. jsoup, htmlcleaner, ..."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1503507558, "post_id": 45844317, "comment_id": 78649063, "body": "The C libraries provide buffering, so you don&#39;t need to do it yourself."}], "owner": {"reputation": 269, "user_id": 1160201, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c0b79a263cb733a3438272c9f6c7d1f2?s=128&d=identicon&r=PG", "display_name": "Bala", "link": "https://stackoverflow.com/users/1160201/bala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503504144, "creation_date": 1503503472, "last_edit_date": 1503504144, "question_id": 45844317, "link": "https://stackoverflow.com/questions/45844317/performance-difference-between-parsing-an-xml-in-c-vs-using-a-external-library-f", "title": "Performance Difference between parsing an XML in c vs Using a external Library for parsing and later implementing logic?", "body": "<p>I am working on a personal project, which requires me to parse a HTML4/5 webpages (typically a web page parser), and to apply certain filters and logics to collect artifacts. The project does not require to parse the content, i am interested only in the HTML tags and its relation. </p>\n\n<p>I have 2 workflows with me now,</p>\n\n<ol>\n<li><p>Use an existing library, like JAVA SAX / C - libxml2 / Python- lxml with Beautiful Soup. The problem i see is, if i use a library, there will be an initial operation to parse the whole structure, (lxml has ability to provide an iterator / or SAX for that matter an event based on open / close of tag), followed by me adding logic by again iterating over every tag and collecting artifacts.</p></li>\n<li><p>Write a minimal parser in C, which will parse only what i need. It will be a single iteration from start of web page to end of web page. I will keep collecting all the artifacts like parent -> child relation, siblings relation, attributes in the tag, .. etc. By the time, i reach the end node, i should be having a complete data structure which i can export it. I also have option to write other logical operations on a separate thread as i am parsing the main file.</p></li>\n</ol>\n\n<p>Which one is ideal and which one will be faster. </p>\n\n<p>Performance and CPU cycles is are concern here as i am planning to deploy it to AWS cloud. </p>\n\n<p>I have already started working on the 2nd approach. I am like 60% done with development. </p>\n\n<p>Here are some of the performance stats,</p>\n\n<p>Testing Page : Yahoo Home Page (has lot of tags and reference links)</p>\n\n<p>C Program  (custom parser - no external libs used) : Avg Time : 0.01576 seconds.\nPython Beautiful Soup (lxml) : Avg Time : 0.003 Seconds. (Confuse how this can be faster ?)</p>\n\n<p>I am really confused how this can be faster than c program ? Please let me know if my approach is correct or am i missing something here.</p>\n"}, {"tags": ["c", "protocol-buffers", "nanopb"], "answers": [{"tags": [], "owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "is_accepted": true, "score": 8, "last_activity_date": 1503504464, "last_edit_date": 1503504464, "creation_date": 1503503754, "answer_id": 45844409, "question_id": 45844168, "link": "https://stackoverflow.com/questions/45844168/using-repeated-field-rule-in-a-message-with-nanopb-in-c/45844409#45844409", "title": "using repeated field rule in a message with nanopb in c", "body": "<p>This depends on how you define the repeated field inside the proto file. According to <a href=\"https://jpa.kapsi.fi/nanopb/docs/concepts.html#data-types\" rel=\"noreferrer\">nanopb docs</a>, you either just specify the <code>repeated</code> field like you did, and then use a callback function to handle each item separately during encoding/decoding, or you use nanopb-specific settings so have a fixed length array:</p>\n\n<blockquote>\n  <ol>\n  <li>Strings, bytes and repeated fields of any type map to callback functions by default.</li>\n  <li>If there is a special option <code>(nanopb).max_size</code> specified in the <code>.proto</code> file, string maps to null-terminated char array and bytes map to a structure containing a char array and a size field.</li>\n  <li>If <code>(nanopb).fixed_length</code> is set to <code>true</code> and <code>(nanopb).max_size</code> is also set, then bytes map to an inline byte array of fixed size.</li>\n  <li>If there is a special option <code>(nanopb).max_count</code> specified on a repeated field, it maps to an array of whatever type is being repeated. Another field will be created for the actual number of entries stored.</li>\n  </ol>\n</blockquote>\n\n<p>For example, byte arrays need to use <code>max_size</code>:</p>\n\n<pre><code>required bytes data = 1 [(nanopb).max_size = 40, (nanopb).fixed_length = true];\n</code></pre>\n\n<p>And this would create the following field, when compiled using nanopb:</p>\n\n<pre><code>// byte arrays get a special treatment in nanopb\npb_byte_t data[40];\n</code></pre>\n\n<p>Or, for a <code>float</code>, you would use <code>max_count</code> according to rule 4.:</p>\n\n<pre><code>repeated float data = 1 [(nanopb).max_count = 40];\n</code></pre>\n\n<p>And then you'll get:</p>\n\n<pre><code>size_t data_count;\nfloat data[40];\n</code></pre>\n\n<p>If you simply define a <code>repeated</code> field like you did, then nanopb will create a callback function:</p>\n\n<pre><code>// repeated float value = 1;\npb_callback_t value;\n</code></pre>\n\n<p>Which means you will have to provide your own function which will handle each incoming item:</p>\n\n<pre><code>yourobject.value.arg = &amp;custom_args;\nyourobject.value.funcs.decode = custom_function_for_decoding;\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 8406203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/429a5d96ab0c03262f3f4e27dc99b912?s=128&d=identicon&r=PG&f=1", "display_name": "me and stuff", "link": "https://stackoverflow.com/users/8406203/me-and-stuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4559, "favorite_count": 0, "accepted_answer_id": 45844409, "answer_count": 1, "score": 3, "last_activity_date": 1503504464, "creation_date": 1503503044, "question_id": 45844168, "link": "https://stackoverflow.com/questions/45844168/using-repeated-field-rule-in-a-message-with-nanopb-in-c", "title": "using repeated field rule in a message with nanopb in c", "body": "<p>I'm having a hard time in realizing how to use the repeated field rule.\nfor example, this is my .proto:</p>\n\n<pre><code>message Test\n{\n   repeated float   value = 1;\n}\n</code></pre>\n\n<p>now, I'm initialize a new Test object:</p>\n\n<pre><code>Test test = test_init_zero()\n</code></pre>\n\n<p>Finally, I want to assign some values. For example:</p>\n\n<pre><code>float values[] = { 1.0, 2.2, 5.5, 7.13 }\n</code></pre>\n\n<p>My question is how can I assign them?\nis it like </p>\n\n<pre><code>test.value = values\n//or\ntest.value[0] = values[0] //... etc.\n</code></pre>\n\n<p>and then, how do I read them back?</p>\n"}, {"tags": ["c", "segmentation-fault", "binary-search-tree"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1503501360, "post_id": 45843548, "comment_id": 78645018, "body": "I recommend you do some research about <i>emulating pass by reference in c</i>."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 1, "creation_date": 1503501886, "post_id": 45843548, "comment_id": 78645367, "body": "Have you tried pointing a debugger at your binary to see where the crash occurs?"}, {"owner": {"reputation": 395, "user_id": 6816478, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6wti6.png?s=128&g=1", "display_name": "Mr. Sigma.", "link": "https://stackoverflow.com/users/6816478/mr-sigma"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1503501956, "post_id": 45843548, "comment_id": 78645418, "body": "@MortenJensen Debugger was closing the IDE repeatedly. couldn&#39;t use."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1503502203, "post_id": 45843548, "comment_id": 78645606, "body": "Please show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 6816478, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6wti6.png?s=128&g=1", "display_name": "Mr. Sigma.", "link": "https://stackoverflow.com/users/6816478/mr-sigma"}, "edited": false, "score": 0, "creation_date": 1503501913, "post_id": 45843657, "comment_id": 78645391, "body": "Thanks, but still showing segmentation fault. Actually I was trying using IDE debugger which was closing the IDE repeatedly."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 395, "user_id": 6816478, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6wti6.png?s=128&g=1", "display_name": "Mr. Sigma.", "link": "https://stackoverflow.com/users/6816478/mr-sigma"}, "edited": false, "score": 1, "creation_date": 1503502174, "post_id": 45843657, "comment_id": 78645590, "body": "@Rohit. Updated my answer with two other possible problems. After fixing the first, the last (third) is the most likely culprit."}, {"owner": {"reputation": 395, "user_id": 6816478, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6wti6.png?s=128&g=1", "display_name": "Mr. Sigma.", "link": "https://stackoverflow.com/users/6816478/mr-sigma"}, "edited": false, "score": 0, "creation_date": 1503505200, "post_id": 45843657, "comment_id": 78647676, "body": "Thanks. It was 3rd mistake. :-)"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1503501971, "last_edit_date": 1503501971, "creation_date": 1503501578, "answer_id": 45843657, "question_id": 45843548, "link": "https://stackoverflow.com/questions/45843548/segmentation-fault-in-a-function-of-bst-implementation/45843657#45843657", "title": "Segmentation fault in a function of BST implementation", "body": "<p>You probably have <em>infinite recursion</em>.</p>\n\n<p>With the initial call then <code>root</code> will be a null pointer, meaning you will create a new root node. Then we get to the check <code>if(item &lt; root-&gt;item)</code> which will be false, leading to the program executing the <code>else</code> clause and calling <code>insert</code> recursively.</p>\n\n<p>If <code>newNode</code> sets the <code>left</code> and <code>right</code> pointers to <code>NULL</code>, then the whole thing will start over, creating a new node and going to the <code>else</code> clause and calling itself recursively.</p>\n\n<p>The solution is <em>another</em> <code>else</code>, as in</p>\n\n<pre><code>if (root == NULL) {\n    ...\n} else if (item &lt; root-&gt;item) {\n    ...\n} else {\n    ...\n}\n</code></pre>\n\n<p>You would have found out the problem <em>very</em> quickly if you just used a <em>debugger</em> to either catch the crash or to step through the code. In the future, start by using a debugger first to catch the crash, and locate where and when it happens, and examine the function call stack.</p>\n\n<hr>\n\n<p>If on the other hand <code>newNode</code> does <em>not</em> initialize the <code>left</code> and <code>right</code> pointers of the node structure, then you will have <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>, which can often lead to crashes.</p>\n\n<p>Dynamic allocation functions like <code>malloc</code> does <em>not</em> initialize the memory it allocates. The contents of the memory is <em>indeterminate</em>. Dereferencing such a pointer leads to said UB (Undefine Behavior).</p>\n\n<p>This too could have been detected quickly with the help of a debugger.</p>\n\n<hr>\n\n<p>Finally a third possible reason for your crashing, if you fixed the above to problems, is that when you pass an argument to a function in C, it is passed <em>by value</em>. That means the value is <em>copied</em> into the argument, and the argument inside the function is like any other local variable, and all changes to the argument (assignments) are lost once the argument goes out of scope when the function returns.</p>\n\n<p>That means after the initial call to <code>insert</code> the variable <code>root</code> will <em>still</em> be a null pointer.</p>\n\n<p>The solution to this is mentioned in my comment.</p>\n"}], "owner": {"reputation": 395, "user_id": 6816478, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6wti6.png?s=128&g=1", "display_name": "Mr. Sigma.", "link": "https://stackoverflow.com/users/6816478/mr-sigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 45843657, "answer_count": 1, "score": 0, "last_activity_date": 1503501971, "creation_date": 1503501272, "question_id": 45843548, "link": "https://stackoverflow.com/questions/45843548/segmentation-fault-in-a-function-of-bst-implementation", "title": "Segmentation fault in a function of BST implementation", "body": "<p>Here is my implementation to insert an item in a Binary search tree. </p>\n\n<pre><code>void insert(struct Node* root,int item){\nif(root==NULL){\n    root = newNode(item); // newNode is a function which creates new node, initialized it with item &amp; return pointer of the new node.\n}\nif(item &lt; root-&gt;item)\n    insert(root-&gt;left,item);\nelse\n    insert(root-&gt;right,item);\n}\n</code></pre>\n\n<p>But I am clueless why it is giving segmentation fault with following invoking in driver program?</p>\n\n<pre><code>struct Node* root = NULL;\ninsert(root,50);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1503501398, "post_id": 45843523, "comment_id": 78645048, "body": "Have you tried stepping through it via paper/pencil or a debugger?"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1503501855, "post_id": 45843523, "comment_id": 78645346, "body": "Its a not so curious case of <code>backtracking</code>, I would look to understand how backtracking works and go from there."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1503504156, "post_id": 45843523, "comment_id": 78646996, "body": "This is a dup - already posted once today, advised to use a debugger and make notes.  Result - repost:("}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1503510790, "post_id": 45843523, "comment_id": 78650816, "body": "In a nutshell, it is recursively calling itself with the first if section detecting if a number is already in place.  The else section is actually plugging in every available number to make sure that it is a legal move.  Honestly, it is confusing as hell, so I don&#39;t blame you.  It might help to add a printf to each section so you can trace how it works."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1503505229, "creation_date": 1503505229, "answer_id": 45844853, "question_id": 45843523, "link": "https://stackoverflow.com/questions/45843523/c-sudoku-solver-help-understanding-a-function/45844853#45844853", "title": "C - Sudoku solver - Help Understanding a function", "body": "<p>your question: </p>\n\n<p><em>Does anyone understand the functionality/process the fillSudoku function is doing?</em></p>\n\n<p>the answer is <em>Yes</em>, most of us do understand the functionality/process.  </p>\n\n<p>Strongly suggest you edit your question to indicate that YOU don't understand and need some explanation.</p>\n\n<p>And don't repost the same question</p>\n"}], "owner": {"reputation": 11, "user_id": 8507035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bc1395506b41b914e86a2a6f222b1c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/8507035/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1503505229, "creation_date": 1503501196, "question_id": 45843523, "link": "https://stackoverflow.com/questions/45843523/c-sudoku-solver-help-understanding-a-function", "title": "C - Sudoku solver - Help Understanding a function", "body": "<p>I'm trying to figure out exactly what the fillSudoku function is doing in this Sudoku solver. The isAvailable checks if the number  will be stopped by numbers in the same row, column, and box. The main function executes everything with checks.</p>\n\n<p>Does anyone understand the functionality/process the fillSudoku function is doing?</p>\n\n<pre><code>int isAvailable(int puzzle[][9], int row, int col, int num)\n{\n    int rowStart = (row/3) * 3;\n    int colStart = (col/3) * 3;\n    int i, j;\n\n    for(i=0; i&lt;9; ++i)\n    {\n        if (puzzle[row][i] == num) return 0;\n        if (puzzle[i][col] == num) return 0;\n        if (puzzle[rowStart + (i%3)][colStart + (i/3)] == num) return 0;\n    }\n    return 1;\n}\n\nint fillSudoku(int puzzle[][9], int row, int col)\n{\n    int i;\n    if(row&lt;9 &amp;&amp; col&lt;9)\n    {\n        if(puzzle[row][col] != 0)\n        {\n            if((col+1)&lt;9) return fillSudoku(puzzle, row, col+1);\n            else if((row+1)&lt;9) return fillSudoku(puzzle, row+1, 0);\n            else return 1;\n        }\n        else\n        {\n            for(i=0; i&lt;9; ++i)\n            {\n                if(isAvailable(puzzle, row, col, i+1))\n                {\n                    puzzle[row][col] = i+1;\n                    if((col+1)&lt;9)\n                    {\n                        if(fillSudoku(puzzle, row, col +1)) return 1;\n                        else puzzle[row][col] = 0;\n                    }\n                    else if((row+1)&lt;9)\n                    {\n                        if(fillSudoku(puzzle, row+1, 0)) return 1;\n                        else puzzle[row][col] = 0;\n                    }\n                    else return 1;\n                }\n            }\n        }\n        return 0;\n    }\n    else return 1;\n}\n\nint main()\n{\n    int i, j;\n    int puzzle[9][9]={{0, 0, 0, 0, 0, 0, 0, 9, 0},\n                      {1, 9, 0, 4, 7, 0, 6, 0, 8},\n                      {0, 5, 2, 8, 1, 9, 4, 0, 7},\n                      {2, 0, 0, 0, 4, 8, 0, 0, 0},\n                      {0, 0, 9, 0, 0, 0, 5, 0, 0},\n                      {0, 0, 0, 7, 5, 0, 0, 0, 9},\n                      {9, 0, 7, 3, 6, 4, 1, 8, 0},\n                      {5, 0, 6, 0, 8, 1, 0, 7, 4},\n                      {0, 8, 0, 0, 0, 0, 0, 0, 0}};\n\n    if(fillSudoku(puzzle, 0, 0))\n    {\n        printf(\"\\n+-----+-----+-----+\\n\");\n        for(i=1; i&lt;10; ++i)\n        {\n            for(j=1; j&lt;10; ++j) printf(\"|%d\", puzzle[i-1][j-1]);\n            printf(\"|\\n\");\n            if (i%3 == 0) printf(\"+-----+-----+-----+\\n\");\n        }\n    }\n    else printf(\"\\n\\nNO SOLUTION\\n\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "gcc", "segmentation-fault"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 4, "creation_date": 1503500724, "post_id": 45843292, "comment_id": 78644557, "body": "Where the deuce is the memory allocated for <code>trimStr</code> in your first snippet?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1503500745, "post_id": 45843292, "comment_id": 78644577, "body": "In first one there is no string. It is not allocated, just a NULL pointer. Lazy to go over the rest, but evidently you need to revise what you know about working with pointers."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1503500996, "post_id": 45843292, "comment_id": 78644760, "body": "<code>char *trimStr = NULL; ... strncpy(trimStr, str, i-1);</code> --&gt; Attempting to write data to an invalid location."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503501101, "post_id": 45843292, "comment_id": 78644830, "body": "You cannot return a pointer to a stack based array from the <code>validString</code> function, because it goes out of scope after the function returns. All functions have the same problems, yes. You are either not allocating any strings, or you are writing to NULL pointers. Also, <code>str[i]</code> will read out of bounds when <code>i == len</code>."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503501499, "post_id": 45843292, "comment_id": 78645130, "body": "The correct type for array sizes is <code>size_t</code>; better to use this than <code>unsigned int</code>...."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503506867, "post_id": 45843292, "comment_id": 78648660, "body": "<code>isalnum((int)str[i])</code> --&gt; <code>isalnum((unsigned char)str[i])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1503504357, "post_id": 45843731, "comment_id": 78647143, "body": "Note: this line: <code>for( i = strlen( str ); i &gt; 0 &amp;&amp; &#39; &#39; == str[i]; i-- );</code> is assuming that there is (at least) one non space character in the string."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1503525904, "post_id": 45843731, "comment_id": 78658163, "body": "you will need to <code>free</code> the strings return by these functions"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1503504159, "last_edit_date": 1503504159, "creation_date": 1503501792, "answer_id": 45843731, "question_id": 45843292, "link": "https://stackoverflow.com/questions/45843292/c-3-problems-with-segmentation-fault-when-try-to-return-string/45843731#45843731", "title": "C - 3 problems with Segmentation fault when try to return string", "body": "<p>in the function: </p>\n\n<pre><code>char *validString(char *str)\n</code></pre>\n\n<p>this statement:</p>\n\n<pre><code>temp2 = temp;\n</code></pre>\n\n<p>is setting the pointer to point to a local variable.</p>\n\n<p>Then this statement: </p>\n\n<pre><code>return temp2;\n</code></pre>\n\n<p>is returning that pointer.</p>\n\n<p>The problem is when the local variable 'goes out of scope' (which happens when the function exits.) that stack variable no longer is usable.</p>\n\n<p>accessing the contents of that variable in the calling function is undefined behavior.</p>\n\n<p>I.E. the function can be reduced to :</p>\n\n<pre><code>/* the function get a string, and check if it's a valid string: a string inside \" \". if it's valid, it returns the string without \" \", and NULL otherwise. */\nchar *validString(char *str)\n{\n    if(str == NULL)\n        return NULL;\n\n    if(str[0] != '\"' || str[strlen(str) - 1] != '\"')\n        return NULL;\n\n    return strdup( str );\n} // end function: validString\n</code></pre>\n\n<p>the function: <code>trimRightSpaces()</code> does not actually trim the trailing spaces AND has the same problem as the <code>validString()</code> function.  Suggest:</p>\n\n<pre><code>/* the function gets a string, and return the string without blank spaces (is exists) in the end of the string */\nchar *trimRightSpaces( char *str )\n{\n    if(str == NULL)\n        return NULL;\n\n    size_t i;\n    for( i = strlen( str ); i &gt; 0 &amp;&amp; ' ' == str[i]; i-- );\n\n    char *trimstr = strdup( str );\n\n    if( trimstr )\n        trimstr[i] = '\\0';  // note: this may need to be [i+1]\n\n    return trimstr;\n}  // end function: trimRightSpaces\n</code></pre>\n\n<p>the function: <code>islabel()</code> has the same problem AND a few other problems.  Suggest:</p>\n\n<pre><code>/* The function gets a pointer to a string, and returns the name of label without ':' if it's a valid label, NULL if not. */\nchar *isLabel(char *str)\n{\n    if(str == NULL)\n        return NULL;\n\n    if(strlen(str) &gt; VALID_LABEL_LENGTH)\n        return NULL;\n\n    if(isLanguageWord(str))  // note: this 'may' not work, but function not posted so don't know\n        return NULL;\n\n    if(str[strlen( str ) -1] != ':') /* check it the word ends with ':', otherwise it's not a valid label */\n        return NULL;\n\n    /* if the first letter of the string is not small or capital letter, then it's not a valid label. */\n    if(!isalpha((int)str[0]))\n        return NULL;\n\n    for( size_t i = strlen(str); i ; i-- )\n    {\n        if(!isalnum((int)str[i]))\n            return NULL;\n    }\n\n    return strdup( str );\n} // end function: isLabel\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": false, "score": 0, "last_activity_date": 1503502368, "creation_date": 1503502368, "answer_id": 45843952, "question_id": 45843292, "link": "https://stackoverflow.com/questions/45843292/c-3-problems-with-segmentation-fault-when-try-to-return-string/45843952#45843952", "title": "C - 3 problems with Segmentation fault when try to return string", "body": "<p>There are various problems in your code.</p>\n\n<p>For example, if you declate pointer to char</p>\n\n<pre><code>char *trimStr = NULL;   // Points to NULL, cant dereference\nchar *trimStr;          // Uninitialized ptr, cant dereference\n</code></pre>\n\n<p>then you cant dereference <code>NULL</code> or uninitialized pointer. Whats worse you are trying to copy data inside. What you have to do is allocate enough memory on heap, for example</p>\n\n<pre><code>char *trimStr = malloc(len);\n</code></pre>\n\n<p>Then you can copy <code>len</code> bytes into trimStr.</p>\n\n<p>Second, you cant return pointer to local variable like you do in <code>validString</code> because after program counter returns back from function, the frame is destroyed and local variable is out of scope -> no more reachable. You have to return pointer to allocated memory on heap or pass an pointer to array to function, where you will fill this array.</p>\n\n<p>Also i can see some <em>logical</em> problems like</p>\n\n<pre><code>if(isspace((int)str[i]))\n</code></pre>\n\n<p>Where you want to trim spaces but <code>isspace</code> returns non-zero if its space. So you have to negate the expression</p>\n\n<pre><code>if(!isspace((int)str[i]))\n</code></pre>\n\n<p><strong><a href=\"https://ideone.com/1pxvZT\" rel=\"nofollow noreferrer\">Here is the example of trimRightSpaces function.</a></strong></p>\n"}], "owner": {"reputation": 7, "user_id": 8506931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7124e5e668084a530ac3ac5cecc19b93?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Shul", "link": "https://stackoverflow.com/users/8506931/dan-shul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1503525342, "creation_date": 1503500557, "last_edit_date": 1503525342, "question_id": 45843292, "link": "https://stackoverflow.com/questions/45843292/c-3-problems-with-segmentation-fault-when-try-to-return-string", "title": "C - 3 problems with Segmentation fault when try to return string", "body": "<p>I have 3 problems but I think they're essentially the same.</p>\n\n<p>I have 3 functions that are doing something on the String they get as parameter, but when I try to return the result, I get a segmentation fault every time and I can't understand why.</p>\n\n<pre><code>/* the function gets a string, and return the string without blank spaces (is exists) in the end of the string */\nchar *trimRightSpaces(char *str, unsigned int len)\n{\n    unsigned int i = len;\n    char *trimStr = NULL;\n\n    if(str == NULL)\n        return NULL;\n\n        while(i &gt; 0)\n    {\n        if(isspace((int)str[i]))\n                    break;\n        i--;\n    }\n\n    strncpy(trimStr, str, i-1);\n    trimStr[i+1] = '\\0';\n    return trimStr;\n}\n</code></pre>\n\n<p>and this function gets labels from my program, that are just strings with ':' character in the end:</p>\n\n<pre><code>/* The function gets a pointer to a string, and returns the name of label without ':' if it's a valid label, NULL if not. */\nchar *isLabel(char *str)\n{\n    int i;\n    char tempStr[80];\n\n    if(str == NULL)\n        return NULL;\n\n    if(strlen(str) &gt; VALID_LABEL_LENGTH)\n        return NULL;\n\n    for(i = 0; i &lt; strlen(str); i++)\n    {\n        if(i == 0)\n        {\n            /* if the first letter of the string is not small or capital letter, then it's not a valid label. */\n            if(!isalpha((int)str[0]))\n                return NULL;\n        }\n\n        if(i == (strlen(str) - 1))\n        {\n                if((int)str[i] != ':') /* check it the word ends with ':', otherwise it's not a valid label */\n                    return NULL;\n                break;\n        }\n\n        if(!isalnum((int)str[i]))\n            return NULL;\n    }\n\n    strncpy(tempStr, str, strlen(str) - 1);\n\n    if(isLanguageWord(tempStr))\n        return NULL;\n\n    return str;\n}   \n</code></pre>\n\n<p>and:</p>\n\n<pre><code>/* the function get a string, and check if it's a valid string: a string inside \" \". if it's valid, it returns the string without \" \", and NULL otherwise. */\nchar *validString(char *str)\n{\n    char temp[80];\n    char *temp2 = NULL;\n    int i;\n\n    if(str == NULL)\n        return NULL;\n\n    if(str[0] != '\"' || str[strlen(str) - 1] != '\"')\n        return NULL;\n\n    for(i = 1; i &lt; strlen(str) - 1; i++)\n    {\n        temp[i] = str[i];\n    }\n    temp2 = temp;\n    return temp2;\n}\n</code></pre>\n"}, {"tags": ["c", "list", "struct", "stack", "declaration"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1503499181, "post_id": 45842785, "comment_id": 78643316, "body": "<code>Node</code> vs <code>node</code>. By the way, don&#39;t use casts to get around errors because all that does is hide the errors, not fix them."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1503499183, "post_id": 45842785, "comment_id": 78643320, "body": "looks like a typo <code>struct node *next;</code> should be <code>struct Node *next;</code>"}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 1, "creation_date": 1503499378, "post_id": 45842785, "comment_id": 78643487, "body": "You should use <code>new_node-&gt;content</code> syntax instead of <code>(*new_node).content</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1503501225, "post_id": 45842785, "comment_id": 78644926, "body": "You should also not cast things to types they already have, like in <code>(struct Node *)*node</code>."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1503502498, "last_edit_date": 1503502498, "creation_date": 1503501790, "answer_id": 45843730, "question_id": 45842785, "link": "https://stackoverflow.com/questions/45842785/why-am-i-getting-an-incompatible-pointer-type-warning-here/45843730#45843730", "title": "Why am I getting an incompatible pointer type warning here ?", "body": "<p>Due to a typo in this declaration</p>\n\n<pre><code>struct Node {int content; struct node *next;};\n       ^^^^                      ^^^^\n</code></pre>\n\n<p>there are declared two types <code>struct Node</code> and <code>struct node</code> that are incompatible types.</p>\n\n<p>As for the functions then they can be defined simpler. For example the function <code>push</code> can be declared the following way.</p>\n\n<pre><code>int push( struct Node **node, int i )\n{\n    struct Node *new_node = malloc( sizeof( struct Node ) );\n    int success = new_node != NULL;\n\n    if ( success )\n    {\n        (*new_node).content = i;\n        (*new_node).next = *node;\n        *node = new_node;\n    }\n\n    return success;\n}\n</code></pre>\n\n<p>Also it is a bad idea to exit the program if the stack is empty. You should also rewrite the function <code>pop</code>.</p>\n\n<p>For example the function can be declared like</p>\n\n<pre><code>int pop( struct Node **node, int *i );\n</code></pre>\n\n<p>In case the stack is empty the function returns <code>0</code>. Otherwise it returns <code>1</code> and in the expression <code>*i</code> the value of the node.</p>\n"}], "owner": {"reputation": 439, "user_id": 7609016, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-drVjbP61pRI/AAAAAAAAAAI/AAAAAAAAABc/DgJ42w4NjrM/photo.jpg?sz=128", "display_name": "Nathu", "link": "https://stackoverflow.com/users/7609016/nathu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1503502879, "answer_count": 1, "score": 0, "last_activity_date": 1503502546, "creation_date": 1503499101, "last_edit_date": 1503502546, "question_id": 45842785, "link": "https://stackoverflow.com/questions/45842785/why-am-i-getting-an-incompatible-pointer-type-warning-here", "closed_reason": "Not suitable for this site", "title": "Why am I getting an incompatible pointer type warning here ?", "body": "<p>I've implemented a very basic stack here as an exercise, using a linked list.</p>\n\n<p>My program has the following three files.</p>\n\n<p><strong>stack.h</strong></p>\n\n<pre><code>#ifndef STACK_H\n#define STACK_H\n\n#include &lt;stdio.h&gt;\n\nstruct Node {int content; struct node *next;};\n\nvoid push(struct Node **node, int i);\nint pop(struct Node **node);\n\n#endif\n</code></pre>\n\n<p><strong>stack.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"stack.h\"\n\nvoid push(struct Node **node, int i)\n{\n    struct Node *new_node = malloc(sizeof(struct Node));\n\n    if (!(*node)){\n        (*new_node).content = i;\n        (*new_node).next = NULL;\n        *node = new_node;\n\n        return;\n    }\n\n    (*new_node).content = i;\n    (*new_node).next = (struct Node *)*node;\n    *node = new_node;\n\n    return;\n}\n\nint pop(struct Node **node)\n{\n    if (*node == NULL){\n        printf(\"Stack is empty\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    struct Node *temp = (**node).next;\n    int i = (**node).content;\n\n    free(*node);\n    *node = temp;\n\n    return i;\n}\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"stack.h\"\n\nstruct Node *top = NULL;\n\nint main(void)\n{\n    push(&amp;top, 2);\n    printf(\"%d\\n\\n\", pop(&amp;top));\n    return 0;\n}\n</code></pre>\n\n<p>When I compile this however, I get the following warnings</p>\n\n<pre><code>stack.c: In function \u2018push\u2019:\nstack.c:18:19: warning: assignment from incompatible pointer type\n  (*new_node).next = (struct Node *)*node;\n                   ^\nstack.c: In function \u2018pop\u2019:\nstack.c:31:22: warning: initialization from incompatible pointer type\n    struct Node *temp = (**node).next;\n                        ^\n</code></pre>\n\n<p>Though the program runs despite these warnings and gives the correct output, but I'd still like to understand why this is happening. </p>\n\n<p>Why am I getting these warnings ? And how do I fix them ?</p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1503499564, "post_id": 45842726, "comment_id": 78643655, "body": "<code>arr+n-d</code> is infact <code>&amp;arr[n-d]</code>"}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1503513922, "post_id": 45842726, "comment_id": 78652612, "body": "Note this doesn&#39;t work in most languages, only C and C++, and it&#39;s poor style in C++, so it should probably be tagged C. (Well, and with some rewriting in BCPL -- if you have that.)"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 6459577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d324c89f3519e8becf467e51fdf811?s=128&d=identicon&r=PG&f=1", "display_name": "Sahil", "link": "https://stackoverflow.com/users/6459577/sahil"}, "is_accepted": false, "score": 0, "last_activity_date": 1594482234, "creation_date": 1594482234, "answer_id": 62851266, "question_id": 45842726, "link": "https://stackoverflow.com/questions/45842726/in-block-swap-algorithm-for-else-case-how-come-arguments-for-leftrotate-are-arr/62851266#62851266", "title": "In block swap algorithm for else case how come arguments for leftrotate are arr+n-d", "body": "<p>Whenever you pass an array as a parameter, only the address of that array is passed. You can read about this <a href=\"https://www.geeksforgeeks.org/how-arrays-are-passed-to-functions-in-cc/\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Suppose you have declared an array arr as <code>int arr[] = {1,2,3,4,5,6,7,8,9,10};</code></p>\n<p>Now if you call <code>printf(arr);</code>  It returns the base address of <code>arr</code> (address of starting element of array)</p>\n<p>If you type <code>printf(arr[i])</code> the compiler interprets <code>arr[i]</code> as <code>*(arr + i)</code> and returns the value at address <code>arr + i</code>.\nArrays in C\\C++ are accessed using pointer arithmetic.</p>\n<p>Now coming to your question:</p>\n<pre><code>leftRotate(arr+n-d, 2*d-n, d); // HERE\n</code></pre>\n<p>We recursively call <code>leftRotate()</code> because we have shifted the B part of array with Al. Now the B part is at its final location and we can forget about it.</p>\n<p>We now focus our attention on arr starting from element arr[n-d] to put those elements at their correct place.\nSo, the first argument of above function gives the address of element arr[n-d] and like dave_thompson_085 commented it's a bad practice because the type of that argument is not explicitly mentioned.</p>\n<p>The second argument gives us the number of elements remaining to be shifted and the third argument gives us the size of array.</p>\n<p>You can read more about arrays and pointers here:</p>\n<p><a href=\"https://www.geeksforgeeks.org/difference-pointer-array-c/\" rel=\"nofollow noreferrer\">Difference between pointer and array in C</a></p>\n<p><a href=\"https://www.geeksforgeeks.org/pointer-vs-array-in-c/\" rel=\"nofollow noreferrer\">Pointer vs Array in C</a></p>\n<p><a href=\"https://icecube.wisc.edu/%7Edglo/c_class/array_ptr.html\" rel=\"nofollow noreferrer\">Arrays, String Constants and Pointers</a></p>\n"}], "owner": {"reputation": 21, "user_id": 8506075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096eaf9a9cde48f9d5ca0f17258067ff?s=128&d=identicon&r=PG&f=1", "display_name": "Daksh Sharma", "link": "https://stackoverflow.com/users/8506075/daksh-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1594482234, "creation_date": 1503498959, "last_edit_date": 1503514408, "question_id": 45842726, "link": "https://stackoverflow.com/questions/45842726/in-block-swap-algorithm-for-else-case-how-come-arguments-for-leftrotate-are-arr", "title": "In block swap algorithm for else case how come arguments for leftrotate are arr+n-d", "body": "<p>I'm unable to interpret how come we are giving <code>arr []</code> as <code>arr+n-d</code> in the <code>leftrotate</code> function. The comment <code>HERE</code> marks the line I'm talking about.</p>\n\n<p><strong>Block swap algorithm</strong>:</p>\n\n<pre><code>void printArray(int arr[], int size);\nvoid swap(int arr[], int fi, int si, int d);\n\nvoid leftRotate(int arr[], int d, int n)\n{ \n    if(d == 0 || d == n)\n        return;\n\n    if(n-d == d)\n    {\n        swap(arr, 0, n-d, d);   \n        return;\n    }  \n\n    if(d &lt; n-d)\n    {  \n        swap(arr, 0, n-d, d);\n        leftRotate(arr, d, n-d);    \n    }  \n    else            \n    {\n        swap(arr, 0, d, n-d);\n        leftRotate(arr+n-d, 2*d-n, d); // HERE\n    }\n}\n\nvoid swap(int arr[], int fi, int si, int d)\n{\n    int i, temp;\n\n    for(i = 0;i&lt;d;i++)   \n    {\n        temp = arr[fi + i];\n        arr[fi + i] = arr[si + i];\n        arr[si + i] = temp;\n    }     \n}     \n</code></pre>\n\n<p><a href=\"http://www.geeksforgeeks.org/block-swap-algorithm-for-array-rotation/\" rel=\"nofollow noreferrer\">http://www.geeksforgeeks.org/block-swap-algorithm-for-array-rotation/</a></p>\n"}, {"tags": ["c", "sdl", "clion"], "answers": [{"tags": [], "owner": {"reputation": 1080, "user_id": 4993526, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/10203437109768535/picture?type=large", "display_name": "dustinroepsch", "link": "https://stackoverflow.com/users/4993526/dustinroepsch"}, "is_accepted": true, "score": 4, "last_activity_date": 1503498162, "creation_date": 1503498162, "answer_id": 45842405, "question_id": 45842216, "link": "https://stackoverflow.com/questions/45842216/install-sdl-in-clion/45842405#45842405", "title": "Install SDL in CLION", "body": "<p>This problem is actually separate from CLion, you'll need to install SDL in whatever way is supported by or OS (win32 exe, apt-get, brew, etc). </p>\n\n<p>There is a cmake module called <a href=\"https://github.com/brendan-w/collector/blob/master/cmake/FindSDL2.cmake\" rel=\"nofollow noreferrer\">FindSDL2</a> which is basically the de-facto standard for making cmake include SDL2. You'll want to download this file and put it in a folder called cmake in the root of your project.</p>\n\n<p>After that, you'll want to modify your CMakeLists.txt file to be something like this :</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(Project1)\n\n# includes cmake/FindSDL2.cmake\nset(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)\n\nfind_package(SDL2 REQUIRED)\ninclude_directories(${SDL2_INCLUDE_DIR})\n\nset(SOURCE_FILES src/main.cpp)\n\nadd_executable(Project1 ${SOURCE_FILES})\ntarget_link_libraries(Project1 ${SDL2_LIBRARY})\n</code></pre>\n\n<p>This answer is paraphrased from <a href=\"https://brendanwhitfield.wordpress.com/2015/02/26/using-cmake-with-sdl2/\" rel=\"nofollow noreferrer\">this</a> blog post.</p>\n"}], "owner": {"reputation": 109, "user_id": 7131917, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e869ac6f0f143ce93c272c5eb5af80dd?s=128&d=identicon&r=PG&f=1", "display_name": "Stroumphette-ES", "link": "https://stackoverflow.com/users/7131917/stroumphette-es"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1744, "favorite_count": 0, "accepted_answer_id": 45842405, "answer_count": 1, "score": 1, "last_activity_date": 1503498162, "creation_date": 1503497610, "last_edit_date": 1503498057, "question_id": 45842216, "link": "https://stackoverflow.com/questions/45842216/install-sdl-in-clion", "title": "Install SDL in CLION", "body": "<p>I try to install SDL in Clion with a C project.\nI dowload the ZIP SDL ( librairies dev ), I add the include and lib folder and I change my CMakeList.txt like :</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.8)\nproject(Projet1)\n\nset(CMAKE_C_STANDARD 99)\ninclude_directories( ${PROJECT_SOURCE_DIR}/include)\nlink_directories(${PROJECT_SOURCE_DIR}/lib)\n\nset(SOURCE_FILES main.c include lib)\nadd_executable(Projet1 ${SOURCE_FILES})\n</code></pre>\n\n<p>I have this :</p>\n\n<p><a href=\"https://i.stack.imgur.com/LvGk7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LvGk7.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is it the good configuration?</p>\n"}, {"tags": ["c", "mips", "factorial"], "comments": [{"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1503497286, "post_id": 45841531, "comment_id": 78641643, "body": "All of this could easily be solved with a debugger, so I&#39;ll just leave it with a hint: you&#39;ve mistaken the purpose of the condition of the for-loop in your assembly-code. And a general hint: have a look at conventions on assembly-coding and specifically MIPS-assembly."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8506492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5808a77e84338a4639b1dc2ef09a34f2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Peterson", "link": "https://stackoverflow.com/users/8506492/christian-peterson"}, "edited": false, "score": 0, "creation_date": 1503497436, "post_id": 45841972, "comment_id": 78641786, "body": "Ok thanks, so I would want something like bgt $t2, $t4, end_loop? Where if i is bigger than k it ends right?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 33, "user_id": 8506492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5808a77e84338a4639b1dc2ef09a34f2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Peterson", "link": "https://stackoverflow.com/users/8506492/christian-peterson"}, "edited": false, "score": 0, "creation_date": 1503498972, "post_id": 45841972, "comment_id": 78643125, "body": "@ChristianPeterson, yes."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 2, "last_activity_date": 1503497027, "creation_date": 1503497027, "answer_id": 45841972, "question_id": 45841531, "link": "https://stackoverflow.com/questions/45841531/converting-c-code-to-mips-iterative-factorial-function/45841972#45841972", "title": "Converting C code to MIPS - Iterative Factorial Function", "body": "<pre><code>ble $t2, $t4, end_loop #i&lt;=k, end the loop\n</code></pre>\n\n<p>No, the second part of a C <code>for</code> statement is the condition for which you want to <em>continue</em> the loop, not end it.</p>\n\n<p>What you are doing here is not even <em>entering</em> the body of the loop, which is why <code>$t1</code> and <code>$t2</code> stay the same value as you initialised them to.</p>\n\n<p>You probably want to use <code>bgt</code> rather than <code>ble</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503497455, "post_id": 45842132, "comment_id": 78641801, "body": "@paxdiablo: His answer was the first when I started writing this."}, {"owner": {"reputation": 33, "user_id": 8506492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5808a77e84338a4639b1dc2ef09a34f2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Peterson", "link": "https://stackoverflow.com/users/8506492/christian-peterson"}, "edited": false, "score": 0, "creation_date": 1503497542, "post_id": 45842132, "comment_id": 78641868, "body": "Thanks for the help. I get it, essentially my condition right now is to continue the loop, but it ends it based on the label which it jumps to."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1503498940, "post_id": 45842132, "comment_id": 78643091, "body": "That&#39;s subtly different to the C <code>for</code> loop. Your loop will run at least once, it&#39;s possible for the C variant to run zero times."}], "tags": [], "owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "is_accepted": false, "score": 0, "last_activity_date": 1503503998, "last_edit_date": 1503503998, "creation_date": 1503497397, "answer_id": 45842132, "question_id": 45841531, "link": "https://stackoverflow.com/questions/45841531/converting-c-code-to-mips-iterative-factorial-function/45842132#45842132", "title": "Converting C code to MIPS - Iterative Factorial Function", "body": "<p>Your loop condition with <code>ble $t2, $t4, end_loop #i&lt;=k, end the loop</code> will end the loop if <code>i&lt;=k</code> but instead you want to run it as long as this condition meats. Your loop implementation doesn't even enter the loop for factorial inputs greater 1. </p>\n\n<p><strong>Edit:</strong> As said in the comments with the following code I've implemented a <code>do {...} while ();</code> loop which is not what the OP has asked for. However the code would work. Below the stroked text the real answer (<code>for</code> loop implementation) follows.</p>\n\n<p><strike>Remove the <code>end_loop:</code> label and jump to the <code>loop:</code> label with <code>ble</code> as last statement instead:</p>\n\n<pre><code>fac:\n    move $t4, $t0 #$t0 is the input from the user and $t4 is k in the C code\n    li $t1, 1 #$t1 is f in the C code, initialising it to 1\n    li $t2, 1 #$t2 is i in the C code, declaring it as 1\n    loop:\n    mul $t1, $t1, $t2 #f=f*i\n    addi $t2, $t2, 1\n    ble $t2, $t4, loop #i&lt;=k, loop goes on if not this doesn't jump\n</code></pre>\n\n<p></strike></p>\n\n<p>To implement the for loop you've asked for you need to change the <code>ble</code> (<code>&lt;=</code>):</p>\n\n<pre><code>ble $t2, $t4, end_loop #i&lt;=k, end the loop\n</code></pre>\n\n<p>to <code>bgt</code> (<code>&gt;</code>):</p>\n\n<pre><code>bgt $t2, $t4, end_loop #i&gt;k, end the loop\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8506492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5808a77e84338a4639b1dc2ef09a34f2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Peterson", "link": "https://stackoverflow.com/users/8506492/christian-peterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 0, "accepted_answer_id": 45841972, "answer_count": 2, "score": 1, "last_activity_date": 1503503998, "creation_date": 1503495951, "last_edit_date": 1503496302, "question_id": 45841531, "link": "https://stackoverflow.com/questions/45841531/converting-c-code-to-mips-iterative-factorial-function", "title": "Converting C code to MIPS - Iterative Factorial Function", "body": "<p>I'm pretty new to programming, only a few months in and was just fiddling around with some Assembly code. I ran into a problem with my MIPS code and I narrowed the problem down to my loop after printing the value of each variable. It only prints 1 as the result of any integer input. Essentially I am trying to convert this: </p>\n\n<pre><code>int fac(int k) {\n    int i, f = 1;\n    for (i = 1; i &lt;= k; i++) {\n        f = f * i;\n    }\n    return f;\n}\n</code></pre>\n\n<p>To this: </p>\n\n<pre><code>fac:\n    move $t4, $t0 #$t0 is the input from the user and $t4 is k in the C code\n    li $t1, 1 #$t1 is f in the C code, initialising it to 1\n    li $t2, 1 #$t2 is i in the C code, declaring it as 1\n    loop:\n    ble $t2, $t4, end_loop #i&lt;=k, end the loop\n    mul $t1, $t1, $t2 #f=f*i\n    addi $t2, $t2, 1\n    j loop\n    end_loop:\n</code></pre>\n\n<p>I tested the code by putting in a bunch of print statements and was able to get $t4 and $t0, as the input but both $t1, and $t2 remain as 1 after the loop. Do I have to jump into the loop?</p>\n"}, {"tags": ["c", "arrays", "audio", "fread"], "comments": [{"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "edited": false, "score": 0, "creation_date": 1503494427, "post_id": 45840865, "comment_id": 78639208, "body": "Could be a byte order issue. Btw you are calling <code>popen()</code> twice. Also a 16bit signed integer cannot reach 35,000..."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503494501, "post_id": 45840865, "comment_id": 78639276, "body": "Could also be a wrong format specifier problem. What is the exact array declaration and how do you print?"}, {"owner": {"reputation": 61, "user_id": 5450076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20cc09b680b6b5318d6f7f519d9d7e6d?s=128&d=identicon&r=PG&f=1", "display_name": "Niccol&#242; Cirone", "link": "https://stackoverflow.com/users/5450076/niccol%c3%b2-cirone"}, "edited": false, "score": 0, "creation_date": 1503494860, "post_id": 45840865, "comment_id": 78639580, "body": "You can find the exact array declaration in the question, it is an int array, containing num_samples positions. I print it with the following code: uint32_t i;             for (i=0; i&lt;numcampioni; i++) {            \tprintf(&quot;%d    &quot;, buf[i]);            }"}, {"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "edited": false, "score": 0, "creation_date": 1503494906, "post_id": 45840865, "comment_id": 78639616, "body": "Try declaring the <code>buf</code> array to be <code>int16_t</code>."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503494909, "post_id": 45840865, "comment_id": 78639618, "body": "Why you are using <code>popen()</code> 2 times? Also you have to read starting at the right position."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1503494939, "post_id": 45840865, "comment_id": 78639650, "body": "Did you read the specs? <a href=\"http://soundfile.sapp.org/doc/WaveFormat/\" rel=\"nofollow noreferrer\">soundfile.sapp.org/doc/WaveFormat</a>"}, {"owner": {"reputation": 61, "user_id": 5450076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20cc09b680b6b5318d6f7f519d9d7e6d?s=128&d=identicon&r=PG&f=1", "display_name": "Niccol&#242; Cirone", "link": "https://stackoverflow.com/users/5450076/niccol%c3%b2-cirone"}, "edited": false, "score": 0, "creation_date": 1503495203, "post_id": 45840865, "comment_id": 78639895, "body": "Very sorry, I made a mistake when I wrote the code in the question: the array buf[num_samples] is already declared as a uint16_t, but the problem, stays. Now I&#39;m going to correct the question. Anyway could you explain me why I&#39;m using popen() twice? Do you mean in the check I wrote in the &#39;if&#39;?"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503495411, "post_id": 45840865, "comment_id": 78640062, "body": "@Niccol&#242;Cirone: Yes you use it before the check and in the check. Because you are doing it before the if statement you just need <code>if (pipe == NULL)</code> or doing the assignment inside of the if and not before. Further to print your values the right way cast them in your printf:  <code>printf(&quot;%d &quot;, (int)buf[i]);</code>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1503495450, "post_id": 45840865, "comment_id": 78640096, "body": "Do you understand what <code>u</code> in <code>uint16_t</code> means? It means unsigned. It means that you will not ever see a negative value in such a variable!"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1503495674, "post_id": 45840865, "comment_id": 78640297, "body": "Furthermore, despite us helping you ages ago, you seem to be not reading <i>any</i> comments left to your questions, including the ones asking why the <code>popen</code> is being called twice in a question <a href=\"https://stackoverflow.com/questions/45775690/segmentation-fault-caused-by-popen\">that has now been deleted</a>, so you indeed <b>are</b> wasting our time."}, {"owner": {"reputation": 61, "user_id": 5450076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20cc09b680b6b5318d6f7f519d9d7e6d?s=128&d=identicon&r=PG&f=1", "display_name": "Niccol&#242; Cirone", "link": "https://stackoverflow.com/users/5450076/niccol%c3%b2-cirone"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1503495857, "post_id": 45840865, "comment_id": 78640449, "body": "@AnttiHaapala thank you a lot for your answer, it was not clear to me. Anyway can you explain me the reason why these values have totally no relation with a waveform? Even without a sign I expect to see a local wave behaviour of data, isn&#39;t it?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1503495947, "post_id": 45840865, "comment_id": 78640513, "body": "<b>You&#39;re reading signed 2&#39;s complement numbers as unsigned numbers. The waveform is there, you&#39;re just not seeing it, because the signed to unsigned conversion.</b>, thus -1 becomes 65535, -10 =&gt; 65525.Change the type to <b><code>int16_t</code></b> as suggested by Paul originally! Notice the lack of <code>u</code> in there. It is <code>int16_t</code>."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503496001, "post_id": 45840865, "comment_id": 78640572, "body": "Also reading this: <a href=\"https://stackoverflow.com/a/50632/8051589\">Signed to unsigned conversion in C</a> would help because that&#39;s what happens! Don&#39;t ignore what was said here. The answer is already here, read carefully."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1503496394, "post_id": 45840865, "comment_id": 78640915, "body": "Finally of the various answers to the question that I linked, please read <a href=\"https://stackoverflow.com/a/5789914/918959\">this one especially carefully</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503499509, "post_id": 45840865, "comment_id": 78643607, "body": "Niccol&#242;Cirone, &quot;more or less they should belong to the interval [-20000; 35000]&quot; is a problem for 2-byte values,  how about a more limited range, only up to 32,767?"}, {"owner": {"reputation": 61, "user_id": 5450076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20cc09b680b6b5318d6f7f519d9d7e6d?s=128&d=identicon&r=PG&f=1", "display_name": "Niccol&#242; Cirone", "link": "https://stackoverflow.com/users/5450076/niccol%c3%b2-cirone"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503503868, "post_id": 45840865, "comment_id": 78646802, "body": "@chux Yes, of course the maximum value is 32767, I&#39;ve been inaccurate! Thank you for the correction"}, {"owner": {"reputation": 146, "user_id": 8125573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h6JUR.jpg?s=128&g=1", "display_name": "Rafael Coelho", "link": "https://stackoverflow.com/users/8125573/rafael-coelho"}, "edited": false, "score": 0, "creation_date": 1503600196, "post_id": 45840865, "comment_id": 78696480, "body": "You can use sizeof() function to compute the amount of bytes that the function fread will read."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1503551000, "post_id": 45841147, "comment_id": 78664441, "body": "<code>perror</code> doesn&#39;t exit, so one needs to add exit too :)"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1503652535, "last_edit_date": 1503652535, "creation_date": 1503494959, "answer_id": 45841147, "question_id": 45840865, "link": "https://stackoverflow.com/questions/45840865/fill-an-array-with-fread/45841147#45841147", "title": "Fill an array with fread()", "body": "<p>Your type is wrong, You're using <code>uint16_t</code> as unsigned type and expect signed values between <code>[-20,000; 32,767]</code>.</p>\n\n<p>Declare buf as <code>int16_t buf[num_samples];</code> so the buffer is declared as elements of 2 (signed) bytes.</p>\n\n<p>Also, to open and check the pipe use</p>\n\n<pre><code>FILE *pipe;\nif ((pipe = popen(\"ffmpeg -i 45s.wav -f s16le -ac 1 -\", \"r\"))==NULL) {\n    perror(\"ERROR\\n\");\n    exit(1);\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5450076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/20cc09b680b6b5318d6f7f519d9d7e6d?s=128&d=identicon&r=PG&f=1", "display_name": "Niccol&#242; Cirone", "link": "https://stackoverflow.com/users/5450076/niccol%c3%b2-cirone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503652535, "creation_date": 1503494238, "last_edit_date": 1503504834, "question_id": 45840865, "link": "https://stackoverflow.com/questions/45840865/fill-an-array-with-fread", "title": "Fill an array with fread()", "body": "<p>I've just started programming in C. \nI'm trying to write a code able to analyse the values from a wav audio file and write them into the array <code>buf[num_samples]</code>; <code>num_samples</code> is defined by reading the info contained in the header of the audio file (it is defined as a <code>uint32_t</code> variable because the audio file can consist of a huge amount of samples). I found this piece of code:</p>\n\n<pre><code>uint16_t buf[num_samples];\n\n// Open WAV file with FFmpeg and read raw samples via the pipe.\nFILE *pipe = popen(\"ffmpeg -i 45s.wav -f s16le -ac 1 -\", \"r\");\n\n// check on the pipe work\nif ((pipe = popen(\"ffmpeg -i 45s.wav -f s16le -ac 1 -\", \"r\"))==NULL) {\n    perror(\"ERROR\\n\");\n}\n\nfread(buf, 2, num_samples, pipe);\npclose(pipe);\n</code></pre>\n\n<p>Where the second argument of <code>fread()</code> is 2 (referring to bytes) because I'm using a recorder which works with the parameter <code>Bit_per_sample = 16</code>.</p>\n\n<p>However there are problems, in fact the array is filled with \"illogical values\": I expect values representing a waveform (more or less they should belong to the interval <code>[-20,000; 32,767]</code>).<br>\nIn order to verify the correct filling of the array I have added a printf with <code>%d</code> of <code>buf[i]</code> in a cicle from <code>i=0</code> to <code>i=num_samples-1</code>. Below some of the values I got from the output:</p>\n\n<blockquote>\n<pre><code>64947    65002    65046    65080    65110    65150    65188    65236  \n65264    65306    65338    65378    65434    65472    65517    8    \n81       128      168      206      241      268      306      322    \n424      458      497      520      543      566      586      622       \n676      699      728      745      765      796      825      840    \n917      950      970      996      1018     1040     1064     1072 \n1106     1128     \n</code></pre>\n</blockquote>\n\n<p>Can anybody help me or give me some useful advises?<br>\nThank you in advance, hoping I didn't waste your time.</p>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1503494399, "post_id": 45840798, "comment_id": 78639191, "body": "<a href=\"https://sqlite.org/cintro.html\" rel=\"nofollow noreferrer\">sqlite.org/cintro.html</a>"}, {"owner": {"reputation": 2161, "user_id": 8332700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1zCdU.png?s=128&g=1", "display_name": "Verv", "link": "https://stackoverflow.com/users/8332700/verv"}, "edited": false, "score": 0, "creation_date": 1503496270, "post_id": 45840798, "comment_id": 78640808, "body": "You can&#39;t concatenate strings like this in C"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1503498587, "post_id": 45840798, "comment_id": 78642771, "body": "Use <a href=\"https://sqlite.org/c3ref/stmt.html\" rel=\"nofollow noreferrer\">prepared statements</a>.  You <i>don&#39;t</i> want to build an SQL string dynamically like that - it&#39;s ridiculously insecure."}], "answers": [{"comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1503507955, "post_id": 45842518, "comment_id": 78649253, "body": "Please do not omit <code>sqlite3_finalize</code>. All the error handling is horribly wrong."}, {"owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 1, "creation_date": 1503508991, "post_id": 45842518, "comment_id": 78649837, "body": "Very well, I&#39;ve included <code>sqlite3_finalize</code>, originally omitted for brevity, perhaps a poor choice. The error handling seems sufficient for an example such as this."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1503514001, "post_id": 45842518, "comment_id": 78652658, "body": "This code closes a DB it never opened, and forgets to clean up the statement."}, {"owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 1, "creation_date": 1503514227, "post_id": 45842518, "comment_id": 78652791, "body": "@CL. This is not a complete production-level code, it is an excerpt to show how to use parameter substitution. I&#39;m assuming that the OP has a handle on <code>sqlite3_open</code>."}], "tags": [], "owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1503514897, "last_edit_date": 1503514897, "creation_date": 1503498436, "answer_id": 45842518, "question_id": 45840798, "link": "https://stackoverflow.com/questions/45840798/c-how-to-use-variables-as-part-of-an-sql-query/45842518#45842518", "title": "C - How to use variables as part of an SQL Query?", "body": "<p>The C-API provides the functions <code>sqlite3_prepare_v2</code> and <code>sqlite3_bind</code> so that you can <a href=\"https://sqlite.org/lang_expr.html#varparam\" rel=\"nofollow noreferrer\">bind parameters</a> to <a href=\"https://sqlite.org/c3ref/bind_blob.html\" rel=\"nofollow noreferrer\">prepared statements</a>. What that means is, you can use a placeholder where you want to substitute parameters within a string. </p>\n\n<p>Each placeholder is referenced by an index, so you can use as many parameters as you like (up to the compile-time limit set by SQLITE_MAX_VARIABLE_NUMBER). You then bind a parameter to the placeholder at a specified index. </p>\n\n<p>There are a number of functions and methods to accomplish parameter substitution, but to get you started, here's an example which binds an integer to the 1st placeholder in an sql statement:</p>\n\n<pre><code>int rc;\nsqlite3 *db;\nsqlite3_stmt *stmt = NULL;\n...\n// here I assume you open the db, and provide any other working code as needed...\n...\n// the employee id number.\nint id_num;\n...\n\n// create the sql statement, with a single placeholder marked by '?'.\nchar *sql = \"UPDATE COMPANY set SALARY = 25000.00 where ID=?\";\n\n// prepare the sql statement.\nrc = sqlite3_prepare_v2(db, sql, strlen(sql)+1, &amp;stmt, NULL);\nif (rc != SQLITE_OK) {\n    printf(\"Failed to prepare statement: %s\\n\\r\", sqlite3_errstr(rc));\n    sqlite3_close(db);\n    return 1;\n} \nelse {\n    printf(\"SQL statement prepared: OK\\n\\n\\r\");\n}\n\n// bind an integer to the parameter placeholder. \nrc = sqlite3_bind_int(stmt, 1, id_num);\nif (rc != SQLITE_OK) {\n    printf(\"Failed to bind parameter: %s\\n\\r\", sqlite3_errstr(rc));\n    sqlite3_close(db);\n    return 1;\n} \nelse {\n    printf(\"SQL bind integer param: OK\\n\\n\\r\");\n}\n\n// evaluate the prepared statement.\nrc = sqlite3_step(stmt);\n// other successful return codes are possible...\nif (rc != SQLITE_DONE) {\n    printf(\"Failed to execute statement: %s\\n\\r\", sqlite3_errstr(rc));\n    sqlite3_close(db);\n    return 1;\n}\n\n// deallocate/finalize the prepared statement when you no longer need it.\n// you may also place this in any error handling sections.\nsqlite3_finalize(stmt);\n\n...\n// close the db when finished.\nsqlite3_close(db)\n...\n// finish your code.\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 8340857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8c04cc726e9708c29920e8afb5548e9?s=128&d=identicon&r=PG&f=1", "display_name": "digitalXmage", "link": "https://stackoverflow.com/users/8340857/digitalxmage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1943, "favorite_count": 0, "accepted_answer_id": 45842518, "answer_count": 1, "score": 1, "last_activity_date": 1503514897, "creation_date": 1503494055, "question_id": 45840798, "link": "https://stackoverflow.com/questions/45840798/c-how-to-use-variables-as-part-of-an-sql-query", "title": "C - How to use variables as part of an SQL Query?", "body": "<p><strong>Introduction</strong></p>\n\n<p><em>I'm attempting to incorporate variables into queries using C.</em> I'm following this tutorial using sqlite <a href=\"https://www.tutorialspoint.com/sqlite/sqlite_c_cpp.htm\" rel=\"nofollow noreferrer\">tutorialspoint</a> , and my first exposure to using SQL. The tutorial has shown me how to use Queries such as these:</p>\n\n<p><strong>Query</strong></p>\n\n<pre><code>sql = \"UPDATE COMPANY set SALARY = 25000.00 where ID=1; \" \\\n     \"SELECT * from COMPANY\";\n</code></pre>\n\n<p>*So how would i go about incorporating variables into this statement, for example if i wanted to replace 1  with a variable assigned to 'ID'.</p>\n\n<p><strong>For example(My failed attempt)</strong> </p>\n\n<pre><code>sql = \"UPDATE COMPANY set SALARY = 25000.00 where ID=\" + variable + \";\" \\\n     \"SELECT * from COMPANY\";\n</code></pre>\n\n<p>I've googling around however I couldn't really find any material on using variables in sql queries using the C language syntax. How would i go about this in the correct and safe way, to incorporate variables and without making a program vulnereable to SQL injection?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "driver"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7626778, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-613k63f1HHg/AAAAAAAAAAI/AAAAAAAAADI/JkbQjVyjIbo/photo.jpg?sz=128", "display_name": "manabinto", "link": "https://stackoverflow.com/users/7626778/manabinto"}, "edited": false, "score": 0, "creation_date": 1503648145, "post_id": 45842712, "comment_id": 78712119, "body": "Thank you for the reply. I&#39;ve updated the question. I hope it gives more information now."}], "tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": false, "score": 3, "last_activity_date": 1503499724, "last_edit_date": 1503499724, "creation_date": 1503498936, "answer_id": 45842712, "question_id": 45840769, "link": "https://stackoverflow.com/questions/45840769/how-to-copy-a-structure-containing-a-pointer-from-user-space-to-kernel/45842712#45842712", "title": "How to copy a structure containing a pointer from user space to kernel", "body": "<p>if you have the initial struct copied in, why can't you just copy_from(arg->buffer, ....) instead of playing games like arg + 4?</p>\n\n<p>since no code was shown it is hard to say for sure, but most likely the problem is in the above. offset of 'buffer' <em>is not</em> 4 bytes. It is 8 due to alignment requirements, assuming x86_64.</p>\n\n<p>to make it clear:</p>\n\n<ol>\n<li>copy from to a local object</li>\n<li>validate that the buffer sizes looks sane (e.g. it's not megabytes in size when you expect only kilobytes)</li>\n<li>create <em>another</em> local object. allocate enough memory for the buffer and assign to the local object</li>\n<li>take the address of the buffer from the copy made in step one (e.g. localobj->buffer) and copyfrom that.</li>\n</ol>\n"}], "owner": {"reputation": 31, "user_id": 7626778, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-613k63f1HHg/AAAAAAAAAAI/AAAAAAAAADI/JkbQjVyjIbo/photo.jpg?sz=128", "display_name": "manabinto", "link": "https://stackoverflow.com/users/7626778/manabinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1211, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1503648108, "creation_date": 1503493949, "last_edit_date": 1503648108, "question_id": 45840769, "link": "https://stackoverflow.com/questions/45840769/how-to-copy-a-structure-containing-a-pointer-from-user-space-to-kernel", "title": "How to copy a structure containing a pointer from user space to kernel", "body": "<p>Here is the structure I get :</p>\n\n<pre><code>struct my_struct {\n    int size;\n    int *buffer;\n};\n</code></pre>\n\n<p>Now, I want to copy a variable from user space to kernel space using <code>copy_from_user</code> but it does not seem to work. \nWhat I do is this:</p>\n\n<p>In user space I declare a variable <code>struct my_struct data</code> which I in initialize and pass it onto an ioctl, and in the kernel I call <code>copy_from_user(&amp;mydataInkernel, arg, sizeof(mydataInkernel))</code> after which I allocate the right memory for the pointer and call again <code>copy_from_user(mydataInkernel.buffer, arg + 4, mydataInkernel.size)</code>. I don't know what I am doing wrong but it is not working. </p>\n\n<p>Does the first copy also copy all the data pointed to by mydataInkernel.buffer ?</p>\n\n<p>Is there a way to do this simply using <code>copy_from_user</code> ?</p>\n\n<p><strong>UPDATE 1:</strong>\nFor the size of a pointer on my architecture, it is indeed 8 bytes (x86_64). To be more clear I'm writing a device driver and this is for the need to get a data from the user space to kernel space using an ioctl. So here is the code I try to do to get the buffer:</p>\n\n<pre><code>     ret_val = copy_from_user(dma_info, (ioctl_dma *)arg, sizeof(dma_info));\n     if (ret_val)\n           printk(KERN_WARNING \"COPY_FROM_USER failed !\");\n     else\n           ret_val = copy_from_user(dma_info-&gt;buffer, (ioctl_dma *)arg-&gt;buffer, dma_info-&gt;taille);\n\n     if (ret_val)\n            printk(KERN_WARNING \"COPY_FROM_USER failed !\");\n     else\n     {\n       //Do the treatment\n     }\n</code></pre>\n\n<p>And here is the prototype of the ioctl function:</p>\n\n<pre><code>long    pci_ioctl(struct file *filp, unsigned int cmd, unsigned long arg);\n</code></pre>\n\n<p>So I don't think my second copy_from_user is correct even after the cast.</p>\n\n<p>Nb: dma_info is of type the struct defined above.</p>\n"}, {"tags": ["c", "openssl", "linker-errors", "porting"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1503511399, "post_id": 45840732, "comment_id": 78651187, "body": "It looks like you are trying to use functions that are no longer public. I&#39;m guessing you are using OpenSSL 1.1.0. Also see <a href=\"https://wiki.openssl.org/index.php/OpenSSL_1.1.0_Changes#Compatibility_Layer\" rel=\"nofollow noreferrer\">OpenSSL 1.1.0 Changes | Compatibility Layer</a> on the OpenSSL wiki."}, {"owner": {"reputation": 59, "user_id": 8499897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JyNNk.png?s=128&g=1", "display_name": "TreesaL", "link": "https://stackoverflow.com/users/8499897/treesal"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1503639887, "post_id": 45840732, "comment_id": 78708468, "body": "@jww for `CRYPTO_memcmp&#39; there is macro before the definition : !defined(OPENSSL_CPUID_OBJ). because of that macro. my compiler is not able to read the function definition in cryptlib.c &amp; hence throwing the above error. will disabling that macro check result in any kind of breakage in security level?"}], "owner": {"reputation": 59, "user_id": 8499897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JyNNk.png?s=128&g=1", "display_name": "TreesaL", "link": "https://stackoverflow.com/users/8499897/treesal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503493864, "creation_date": 1503493864, "question_id": 45840732, "link": "https://stackoverflow.com/questions/45840732/linker-errors-in-forward-porting-of-openssl", "title": "Linker errors in forward porting of OpenSSL", "body": "<p>This is similar to this question: <a href=\"https://stackoverflow.com/questions/11004314/cant-link-openssl-code][1]\">Can&#39;t link OpenSSL code</a></p>\n\n<p>I have to update the OpenSSL being used in our code.\nOlder version present in our GIT repository is 0.9.8\nI have to now update it to version 1.1.0e</p>\n\n<p>When I downloaded the open source version of OpenSSL(version 1.1.0e) and gave <code>./config</code> and then <code>make</code> there was no issue with the compilation.\nAlso the <code>.h</code> was generated from the corresponding <code>.h.in</code> (e.g. opensslconf.h, bn_conf.h).</p>\n\n<p>But when I copied the crypto folder into my worktree (I have removed the older OpenSSL-version 0.9.8, from my makefile and have added the new folder into the make, i.e., now the compiler wont use older openssl folder and will compile the new folder containing the latest version of OpenSSL) and compiled it for my target, I am getting errors like below:</p>\n\n<pre><code>*** ERROR ***: init.c:(.text+0xbec): undefined reference to `OPENSSL_cpuid_setup'\n*** ERROR ***: dso_lib.c:(.text+0xdc4): undefined reference to `DSO_METHOD_openssl'\n*** ERROR ***: conf_lib.c:(.text+0x924): undefined reference to `NCONF_default'\n*** ERROR ***: conf_lib.c:(.text+0x934): undefined reference to `_CONF_get_section_values'\n*** ERROR ***: conf_lib.c:(.text+0x944): undefined reference to `_CONF_get_string'\n*** ERROR ***: e_chacha20_poly1305.c:(.text+0xdec): undefined reference to `CRYPTO_memcmp'\n*** ERROR ***: e_rc4_hmac_md5.c:(.text+0x8cc): undefined reference to `CRYPTO_memcmp'\n*** ERROR ***: async.c:(.text+0xe68): undefined reference to `async_wait_ctx_reset_counts'\n*** ERROR ***: conf_sap.c:(.text+0x124): undefined reference to `OPENSSL_load_builtin_modules'\n*** ERROR ***: p12_crpt.c:(.text+0x220): undefined reference to `PKCS12_key_gen_utf8'\n*** ERROR ***: p5_scrypt.c:(.text+0x89c): undefined reference to `EVP_PBE_scrypt'\n*** ERROR ***: e_des3.c:(.text+0x1540): undefined reference to `CRYPTO_memcmp'\n*** ERROR ***: e_aes.c:(.text+0x3a80): undefined reference to `aes_p8_set_encrypt_key'\n*** ERROR ***: e_aes.c:(.text+0x3a90): undefined reference to `aes_p8_set_decrypt_key'\n*** ERROR ***: e_aes.c:(.text+0x3ab0): undefined reference to `CRYPTO_gcm128_setiv'  \n*** ERROR ***: /export/git/tlouis/ssl_fwdport/dxx/fan/common/cryptlib_2/build/../evp/p_verify.c:47: undefined reference to `EVP_PKEY_verify_init'\n*** ERROR ***: /export/git/tlouis/ssl_fwdport/dxx/fan/common/cryptlib_2/build/../evp/p_verify.c:51: undefined reference to `EVP_PKEY_verify'\n*** ERROR ***: collect2: error: ld returned 1 exit status\nFATAL: make exited with nonzero exitcode\n</code></pre>\n\n<p>I copied the <code>libcrypto.so</code>, <code>libcrypto.so.1.1</code>, <code>libssl.so</code> and <code>libssl.so.1.1</code> also inside to my code where the library files are present.</p>\n\n<p>But still it is not fixing the issues.</p>\n"}, {"tags": ["c", "linux", "memory", "vxworks", "lynxos"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1503493813, "post_id": 45840590, "comment_id": 78638703, "body": "I guess you could try <code>mlock</code>, which would return an error if it is not mapped memory..."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1503493941, "post_id": 45840590, "comment_id": 78638815, "body": "@Antti Haapala <code>int *i=&amp;variable</code> will always be"}], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503494697, "post_id": 45840751, "comment_id": 78639450, "body": "on many systems (including Linux &amp; windows) you can have your own signal handling and not necessary it has to end the program. You may have procedures to recover from those events"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503495022, "post_id": 45840751, "comment_id": 78639723, "body": "@PeterJ_01 that&#39;s most of the time a <b>very bad idea</b> and there&#39;s no portably working way to recover from <code>SIGSEGV</code> anyways. Why bother, if you&#39;re sent such a signal, your program has a bug."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503495041, "post_id": 45840751, "comment_id": 78639740, "body": "<code>NULL does not necessary mean a value with all bits zero</code> according to the standard it has to. It allows IMO ridiculous <code>if (p)</code> or <code>if (!p)</code> checks."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1503495089, "post_id": 45840751, "comment_id": 78639791, "body": "@PeterJ_01 wrong again. the <code>NULL</code> pointer evaluates to false in a boolean context, no matter what its representation is."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 3, "creation_date": 1503495095, "post_id": 45840751, "comment_id": 78639797, "body": "@PeterJ_01: no the compiler could emit special tests for such cases."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503495477, "post_id": 45840751, "comment_id": 78640120, "body": "@Felix Palmen <code>An integer constant expression with the value 0, or such an expression cast to type void *, is called a null pointer constant.66)</code>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503495583, "post_id": 45840751, "comment_id": 78640212, "body": "@Felix Palmen just took a quick look. Where in the standard is this behaviour described? <code>wrong again. the NULL pointer evaluates to false in a boolean context, no matter what its representation is</code>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1503495928, "post_id": 45840751, "comment_id": 78640502, "body": "@Basile Starynkevitch <code>no the compiler could emit special tests for such cases</code> I do not understand. It is about the signal handler not the signal itself"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503495963, "post_id": 45840751, "comment_id": 78640533, "body": "@PeterJ_01 exactly in the part you cite. A <b>cast</b> is an explicit conversion, there&#39;s <b>nothing</b> said about the representation of this <i>null pointer</i>. An <b>expression</b> is entirely different from a <b>representation</b>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1503496003, "post_id": 45840751, "comment_id": 78640578, "body": "What I mean is that on the few weird <a href=\"https://en.wikipedia.org/wiki/Instruction_set_architecture\" rel=\"nofollow noreferrer\">ISA</a>s (I can&#39;t name any one) where <code>NULL</code> is <i>not</i> an all-zero bits word, the C compiler would emit ipso facto specific code to test the nullity of a pointer."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503496287, "post_id": 45840751, "comment_id": 78640821, "body": "Standard does not say anything about use of the lonely pointer in the boolean expressions. Only about two of them. And IMO no compiler will add any code to check it."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503496392, "post_id": 45840751, "comment_id": 78640912, "body": "@PeterJ_01: However, <code>gcc -fsanitize=address</code> <i>is adding</i> code to check most addresses."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1503496773, "post_id": 45840751, "comment_id": 78641232, "body": "That <code>-fsanitize=address</code> option also exists in <a href=\"http://clang.llvm.org/\" rel=\"nofollow noreferrer\">Clang</a>. But my point is that sometimes a compiler could add code to check addresses."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503496783, "post_id": 45840751, "comment_id": 78641236, "body": "@PeterJ_01 then your opinion is just wrong. See <b>&#167;6.5.3.3p5</b> and <b>&#167;6.5.9p5</b>. Together, <code>!p</code> translates to <code>p != 0</code> and this <code>0</code> is taken as a <i>null pointer constant</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1503496907, "post_id": 45840751, "comment_id": 78641339, "body": "See also the <a href=\"http://c-faq.com/null/\" rel=\"nofollow noreferrer\">C FAQ on NULL</a> (with references to the standard, but already explained)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503496924, "post_id": 45840751, "comment_id": 78641351, "body": "And everything to avoid <code>p != NULL</code> or <code>p == NULL</code> which makes code more human readable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503496974, "post_id": 45840751, "comment_id": 78641389, "body": "@PeterJ_01 I state the exact opposite ... very often, a simple <code>!p</code> is much closer to the <i>semantics</i> of the code."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503497895, "post_id": 45840751, "comment_id": 78642167, "body": "And does not work on any ARM Cortex project as the address 0 is valid there. or avr8"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503498066, "post_id": 45840751, "comment_id": 78642297, "body": "@PeterJ that would be a compiler bug (and would mean <code>!= NULL</code> wouldn&#39;t work either). If an all-bits-zero value is a valid pointer, it can&#39;t be used for a null pointer representation."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503498311, "post_id": 45840751, "comment_id": 78642517, "body": "compilers just follow the Standard. in many parts the quality if it is disputable - but of course it is a purely scholastic discussion with no practical use. I someone needs to read the address 0 knows how to do it and what the potential consequences are."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503498426, "post_id": 45840751, "comment_id": 78642619, "body": "As always, you just refuse to learn something. If your opinions disagree with the factual world, it&#39;s probably not the world that&#39;s wrong. Enough said."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 3, "last_activity_date": 1503497185, "last_edit_date": 1503497185, "creation_date": 1503493918, "answer_id": 45840751, "question_id": 45840590, "link": "https://stackoverflow.com/questions/45840590/how-to-validate-a-pointer-using-built-in-functions-other-than-a-null-check/45840751#45840751", "title": "how to validate a pointer using built in functions other than a NULL check?", "body": "<p>There are several misconceptions here:</p>\n\n<ul>\n<li><p>From the perspective of the language C, there's only <strong>one</strong> pointer value that's <strong>guaranteed</strong> to be invalid, and this is <code>NULL</code>. For other values, it depends on the context. A pointer is valid when it points to an object that is currently alive. (Note that this is trivially true in your <code>int *i = &amp;variable</code> example, as this is only valid syntax when there <strong>is</strong> a <code>variable</code> accessible from your current scope)</p></li>\n<li><p><code>NULL</code> does not necessarily mean a value with all bits zero. This is the <strong>most common case</strong>, but there can be platforms that use a different bit pattern for the <code>NULL</code> pointer. It's even allowed by the C standard that pointers of different types have different representations for <code>NULL</code>. Still, converting <code>0</code> to a pointer type is guaranteed to result in the <code>NULL</code> pointer for this type.</p></li>\n<li><p>I don't know what exactly you're referring to in VxWorks, but of course Linux checks memory accesses. If a process tries to access an address that's not mapped in the virtual address space, this process is sent a <code>SIGSEGV</code> signal, which causes immediate abnormal program termination (<em>Segmentation fault</em>).</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1503496466, "last_edit_date": 1503496466, "creation_date": 1503495012, "answer_id": 45841182, "question_id": 45840590, "link": "https://stackoverflow.com/questions/45840590/how-to-validate-a-pointer-using-built-in-functions-other-than-a-null-check/45841182#45841182", "title": "how to validate a pointer using built in functions other than a NULL check?", "body": "<p>In general you can't do what you want, as explained in <a href=\"https://stackoverflow.com/a/45840751/841108\">Felix Palmen's answer</a>.</p>\n\n<blockquote>\n  <p>I should get a warning or error which says that In my application I cannot assign the address value to the integer.</p>\n</blockquote>\n\n<p>Statically and reliably detecting all pointer faults is impossible (because it could be proven equivalent to solving the <a href=\"https://en.wikipedia.org/wiki/Halting_problem\" rel=\"nofollow noreferrer\">halting problem</a>). BTW you might consider using <a href=\"https://en.wikipedia.org/wiki/Static_program_analysis\" rel=\"nofollow noreferrer\">static program analysis</a> tools like <a href=\"http://frama-c.com/\" rel=\"nofollow noreferrer\">Frama-C</a>.</p>\n\n<p>On Linux, in principle, you might test at runtime if a given address is valid in your <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow noreferrer\">virtual address space</a> by e.g. using <code>/proc/</code>, e.g. by parsing the <code>/proc/self/maps</code> pseudo textual file (to understand what I mean try <code>cat /proc/$$/maps</code> in a terminal, then <code>cat /proc/self/maps</code>). See <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a>. In practice I don't recommend doing that often (it probably would be too slow), and of course it is not a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\">builtin</a> function of the compiler (you should code it yourself). BTW, be aware of <a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow noreferrer\">ASLR</a>.</p>\n\n<p>However, there are tools to help detect (some of) the faulty address uses, in particular <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> and the <a href=\"https://en.wikipedia.org/wiki/AddressSanitizer\" rel=\"nofollow noreferrer\">address sanitizer</a> facility, read about <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html\" rel=\"nofollow noreferrer\">instrumentation options</a> of GCC and try to compile with <code>-fsanitize=address</code> ...</p>\n\n<p>Don't forget to compile your code with all warnings and debug info, so use <code>gcc -Wall -Wextra -g</code> to compile it.</p>\n\n<p>BTW, if you store in some global pointer the address of some local variable and dereference that pointer after that local variable is in scope, you still have some <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> (even if your code don't crash, because you usually dereference some random address on your <a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow noreferrer\">call stack</a>) and you should be very <a href=\"https://stackoverflow.com/a/25636788/841108\">scared</a>. UB should be always avoided.</p>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1503573606, "post_id": 45842531, "comment_id": 78678319, "body": "Why is that accepted as the answer? The question is about doing something similar on Linux!"}, {"owner": {"reputation": 2532, "user_id": 2139094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b7f096622f36595ba50f9d65a39508a?s=128&d=identicon&r=PG", "display_name": "mjs", "link": "https://stackoverflow.com/users/2139094/mjs"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1504253573, "post_id": 45842531, "comment_id": 78951545, "body": "@BasileStarynkevitch Except, if you read the question, the very end is ... <i>or can guide how its done on VxWorks or LynxOS</i>"}], "tags": [], "owner": {"reputation": 501, "user_id": 7891784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea14cfcc958596c62c32e023a4b90346?s=128&d=identicon&r=PG&f=1", "display_name": "vxWizard", "link": "https://stackoverflow.com/users/7891784/vxwizard"}, "is_accepted": true, "score": 6, "last_activity_date": 1503498458, "creation_date": 1503498458, "answer_id": 45842531, "question_id": 45840590, "link": "https://stackoverflow.com/questions/45840590/how-to-validate-a-pointer-using-built-in-functions-other-than-a-null-check/45842531#45842531", "title": "how to validate a pointer using built in functions other than a NULL check?", "body": "<p>The function you seek in VxWorks is called <strong>vxMemProbe</strong>. </p>\n\n<p>Basically the vxMemProbe libraries insert special exception handling code to catch a page fault or bus error. The vxMemProbe function is used to check if the address is valid for read or write. It also allows you to test if the particular address is accessible with a given data width (8,16,32,64 bits) and alignment. </p>\n\n<p>The underlying mechanism of vxMemProbe is tied to the specific architectures exception handling mechanisms. The vxMemProbe libraries insert code into the exception handlers. When you probe an address that triggers an exception the handler checks to see if vxMemProbe triggered the exception. If so, then the handler restores the state processor prior to the exception and returns execution to where vxMemProbe was called while also returning value via the architectures given calling conventions. </p>\n"}], "owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 45842531, "answer_count": 3, "score": 3, "last_activity_date": 1503498458, "creation_date": 1503493480, "last_edit_date": 1503494202, "question_id": 45840590, "link": "https://stackoverflow.com/questions/45840590/how-to-validate-a-pointer-using-built-in-functions-other-than-a-null-check", "title": "how to validate a pointer using built in functions other than a NULL check?", "body": "<p>During a discussion today I came across that there are checks in the <strong>VxWorks</strong> and in <strong>LynxOS</strong> which tells you that the address you assign for a pointer is from a valid range. This the first time I am hearing about this code like I assign <code>int *i=&amp;variable;</code>.</p>\n\n<p>I should get a warning or error which says that In my application I cannot assign the address value to the integer.</p>\n\n<p>Like while I do a NULL check I am only checking the address <code>0x00000000</code>. But there can be the case the address might be <code>0x00000001</code>. Which is also an invalid case if its an unmapped area and might not be accessible. Is any one aware of some thing similar for Linux or can guide how its done in <strong>VxWorks</strong> or <strong>LynxOS</strong>.</p>\n\n<p>Any ideas?? </p>\n"}, {"tags": ["c", "struct", "header", "statistics"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1503492960, "post_id": 45840266, "comment_id": 78638005, "body": "The inclusion guards (those <code>#ifndef</code>/ <code>#define</code> / <code>#endif</code> directives around a source file) are needed only for headers, so that mutiple inclusion is prevented. You can&#39;t inlcude C files multiple times, because you don&#39;t nclude them at all. In your case, you have already signalled that the header was read by <code>#define</code>ing <code>mdr_stat_stuff</code> in <code>rd_stat.c</code>, so the header with the typedef for your struct isn&#39;t read."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1503492986, "post_id": 45840266, "comment_id": 78638023, "body": "Remove the inclusion guards from <code>rd_stat.c</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1503493499, "post_id": 45840266, "comment_id": 78638463, "body": "Since you typedef&#39;d BSTAT you don&#39;t need to write <code>struct</code> all over the place when accessing that type."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1503493785, "post_id": 45840266, "comment_id": 78638676, "body": "in <code>rd_stat.h</code>, the prototype <code>struct BSTAT init_bstat(double data[], int size);</code> is WRONG because there is no <code>struct BSTAT</code>, only a typedef <code>BSTAT</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503499443, "post_id": 45840266, "comment_id": 78643551, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503502010, "post_id": 45840266, "comment_id": 78645451, "body": "1. Don&#39;t include unnecessary headers, if you are not using them. And I am not even talking about the <code>FPT.h</code>, for which you are not &quot;positive what&#39;s in there&quot;. Your <code>rd_stat.h</code> <b>doesn&#39;t need a single</b> <code>#include</code>. 2. If you <code>#define mdr_stat_stuff</code> at the top of the <code>rd_stat.c</code> file, the entire header will be skipped then. Remove this define. 3. Already mentioned above, <code>BSTAT</code> is a typedef, <code>struct BSTAT</code> doesn&#39;t exist. So the last line in the header file has an error, and the rest of the file then won&#39;t compile at all."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8506163"}, "edited": false, "score": 0, "creation_date": 1503495914, "post_id": 45840547, "comment_id": 78640490, "body": "I made the first two changes and the program ran perfectly. Well, I also had to remove the &#39;struct&#39; before the header file declaration of the function init_bstat(), but after that it ran like a charm.  Thank you very much! I don&#39;t know if I would have gotten there without help.   As for the pointers, I actually don&#39;t know a whole lot about them. My classes were less about diving deep into the language and more about how to code maths, I took Numerical Analysis in C. Do you have any recommendations where I can learn more about pointers? Could you show me how I would use them in this case?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503496021, "post_id": 45840547, "comment_id": 78640591, "body": "pointers are the essence of C language. Actually I think you just need a good book."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 1, "last_activity_date": 1503499582, "last_edit_date": 1503499582, "creation_date": 1503493359, "answer_id": 45840547, "question_id": 45840266, "link": "https://stackoverflow.com/questions/45840266/i-am-building-a-basic-stat-header-file-in-c-and-having-problems/45840547#45840547", "title": "I am building a Basic Stat Header File in C and having problems", "body": "<ol>\n<li><p>Use the correct syntax of <code>#include \"...\"</code>. Your compiler may search in your home directory as well but <code>#include &lt;...&gt;</code> is for search in the system and directories added using <code>-I</code> option.</p></li>\n<li><p>Remove guards from the <code>.c</code> file. It prevents your <code>.h</code> file being compiled (its content is just ignored). </p></li>\n<li><p>I would suggest passing and returning pointers to the structures not the structures themselves; such a big ones will add a huge overhead on every call and return.</p></li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8506163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 45840547, "answer_count": 1, "score": 0, "last_activity_date": 1503501635, "creation_date": 1503492664, "last_edit_date": 1503501635, "question_id": 45840266, "link": "https://stackoverflow.com/questions/45840266/i-am-building-a-basic-stat-header-file-in-c-and-having-problems", "title": "I am building a Basic Stat Header File in C and having problems", "body": "<p>This is my first post, so I apologize if the syntax is incorrect. What I am trying to do is build a basic Header File to do some statistical analysis. I would rather write my own code in C than us programs like R or SPSS. It has been a few years, and I am a bit rusty. </p>\n\n<p>NOTE: I am a fairly novice programmer and I rely on many tools shown to me in college. For example, in school my professor wrote a compiler and header file called <code>FPT.h</code>. I am not positive what is in there, I think it is mostly graphics, but I add it to all my code anyway. I do not think I use it in the following code, so you should be able to comment it out without a problem. I also use his compiler, acom, which I will add to the bottom of the question. </p>\n\n<p>Here is the Header File, called <code>rd_stat.h</code>:</p>\n\n<pre><code>#ifndef mdr_stat_stuff\n#define mdr_stat_stuff \n\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;FPT.h&gt;\n\ntypedef struct {\n  double mean;\n  double median;\n  double mode;\n  double stddev;\n  double q1;\n  double q3;\n  double low;\n  double hi;\n} \nBSTAT;\n\nvoid  sort_doubles  (double data[], int size);\ndouble get_mean     (double data[], int size);\ndouble get_median   (double data[], int size);\ndouble get_q1 (double data[], int size);\ndouble get_q3 (double data[], int size);\nint    get_mode     (double data[], int size);\ndouble get_stddev   (double data[], int size);\n\nstruct BSTAT init_bstat(double data[], int size);\n\n#endif\n</code></pre>\n\n<p>Here is its compiler friend rd_stat.c:</p>\n\n<pre><code>#ifndef mdr_stat_stuff\n#define mdr_stat_stuff \n\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;FPT.h&gt;\n#include &lt;rd_stat.h&gt;\n\nvoid sort_doubles(double data[],int size){\n  int i, j;\n  double temp;\n\n  //Sorts the data in Ascending Order  \n  for (i = 0; i &lt; size; i++){\n    for (j = 0; j &lt; (size - i - 1); j++){\n      if (data[j] &gt; data[j + 1]){\n    temp = data[j];\n    data[j] = data[j + 1];\n    data[j + 1] = temp;\n      }\n    }\n  }\n}\n\n/////////////////////////////////////////////////////////////////////////\n\ndouble get_mean(double data[], int size){//to get the mean we need the array and its length\n  int i;\n  double mean = 0;\n  for(i = 0; i &lt; size; i++){\n    mean += data[i];\n  }\n  return mean / size;\n}\n/////////////////////////////////////////////////////////////////////////\n\n\ndouble get_median(double data[], int size){\n  //only returns one median even if SIZE is even\n  //if SIZE is even, it finds both medians and takes the average of the two\n  //DECISION because it is often done anyway when there are two Medians. Seems more practical. \n  int i, j;\n  double temp;\n\n  sort_doubles(data, size);\n\n  /* if(size % 2 == 0){//even cases */\n  /*   return (data[size / 2 - 1] + data[size / 2]) / 2; */\n  /* }else{//odd cases */\n  /*   return data[(size - 1) / 2]; */\n  /* }  */\n\n  printf(\"location for median is  %5.2lf\\n\", ((double)size-1) / 2);\n\n\n  return (data[(int)floor(((double)size-1) / 2)] + data[(int)ceil(((double)size-1) / 2)]) / 2;\n}\n\ndouble get_q1(double data[], int size){\n  int i, j;\n  double temp;\n\n  sort_doubles(data, size);\n\n  printf(\"location for q1 is  %5.2lf\\n\", (double)size / 4);\n\n  return (data[(int)floor((double)size / 4)] + data[(int)ceil((double)size / 4)]) / 2;\n}\n\ndouble get_q3(double data[], int size){\n  int i, j;\n  double temp;\n\n  sort_doubles(data, size);\n\n  printf(\"location for q3 is  %5.2lf\\n\", (double)(3*size-4) / 4);\n\n  return (data[(int)floor((3*(double)size-4) / 4)] + data[(int)ceil((3*(double)size-4) / 4)]) / 2;\n}\n\n\n/////////////////////////////////////////////////////////////////////////\n\nint get_mode(double data[],int size) {\n  //Code augmented from other user:\n  //https://www.tutorialspoint.com/learn_c_by_examples/mode_program_in_c.htm\n\n\n  //Function assumes there is EXCATLY ONE Mode in the data. \n  //I don't like this\n\n  int maxValue = 0, maxCount = 0, i, j;\n\n   sort_doubles(data, size);\n\n  //Finds Mode\n   for (i = 0; i &lt; size; ++i) {\n      int count = 0;      \n      for (j = 0; j &lt; size ; ++j) {\n         if (data[j] == data[i])\n         ++count;\n      }      \n      if (count &gt; maxCount) {\n         maxCount = count;\n         maxValue = data[i];\n      }      \n   } \n     return maxValue;\n}\n/////////////////////////////////////////////////////////////////////////\ndouble get_stddev(double data[], int size){\n\n  double mean = get_mean(data, size);\n  int i;\n  double sum=0;\n\n  for(i = 0 ; i &lt; size ; i++){\n    sum += pow(data[i] - mean, 2);\n  }\n  return sqrt(sum / size);\n}\n/////////////////////////////////////////////////////////////////////////\n\n\nBSTAT init_bstat(double data[], int size){\n\n  BSTAT a;\n  a.mean = get_mean(data, size);\n  a.q1 = get_q1(data, size);\n  a.median = get_median(data, size);\n  a.q3 = get_q3(data, size);\n  a.mode = get_mode(data, size);\n  a.stddev = get_stddev(data, size);\n\n  sort_doubles(data, size);\n  a.low = data[0];\n  a.hi = data[size - 1];\n\n\n  return a;\n\n}\n\n\n#endif\n</code></pre>\n\n<p>And here is the program I am trying to kick start, test_bstat.c: \n*NOTE: before I put the function init_bstat() in the header file and its compiler, I wrote is in test_bstat.c to make sure it worked. Once I got it all squared away I copied it into rd_stat.c and added its declaration to the rd_stat.h. That is when the problems began. </p>\n\n<pre><code>#include &lt;FPT.h&gt;\n#include &lt;rd_stat.h&gt;\n\n\n\n/* BSTAT init_bstat(double data[], int size){ */\n\n/*   BSTAT a; */\n/*   a.mean = get_mean(data, size);        */\n/*   a.median = get_median(data, size); */\n/*   a.mode = get_mode(data, size); */\n/*   a.stddev = get_stddev(data, size); */\n\n/*   sort_doubles(data, size); */\n/*   a.low = data[0]; */\n/*   a.hi = data[size - 1]; */\n/*   a.q1 = get_q1(data, size); */\n/*   a.q3 = get_q3(data, size); */\n\n/*   return a; */\n/* } */\n\n\n\nint main(){\n\n  int size = 10;\n  int i = 0;\n  double scores[10];\n\n  for(i = 0 ; i &lt; size ; i++){\n    scores[i] = floor(15*drand48() + 80);\n  }\n\n  for(i = 0 ; i &lt; size ; i++){\n    printf(\"Scores[%d] = %.2lf\\n\", i, scores[i]);\n  }\n\n\n  BSTAT LEANN;\n\n LEANN = init_bstat(scores, size);\n\n  printf(\"Mean = %5.1lf Median = %5.1lf Mode = %5.0lf\\n\", LEANN.mean, LEANN.median, LEANN.mode);\n  printf(\"Low = %5.1lf Hi = %5.1lf Stddev = %5.1lf Q1 = %5.1lf Q3 = %5.1lf\\n\", LEANN.low, LEANN.hi, LEANN.stddev, LEANN.q1, LEANN.q3);\n\n}\n</code></pre>\n\n<p>The way I am compiling this is all through my professor's compiler, acom:</p>\n\n<pre><code>acom test_bstat.c rd_stat.c -I. rd_stat.h\n</code></pre>\n\n<p>When I compile, these are the following errors I receive:</p>\n\n<pre><code>user@OptiPlex-780:~/CS/FOOTBALL$ acom test_bstat.c rd_stat.c -I. rd_stat.h\ntest_bstat.c: In function \u2018main\u2019:\ntest_bstat.c:44:2: error: invalid use of undefined type \u2018struct BSTAT\u2019\n  LEANN = init_bstat(scores, size);\n  ^\nrd_stat.c:126:1: error: unknown type name \u2018BSTAT\u2019\n BSTAT init_bstat(double data[], int size){\n ^\nrd_stat.c: In function \u2018init_bstat\u2019:\nrd_stat.c:128:3: error: unknown type name \u2018BSTAT\u2019\n   BSTAT a;\n   ^\nrd_stat.c:129:4: error: request for member \u2018mean\u2019 in something not a structure or union\n   a.mean = get_mean(data, size);\n    ^\nrd_stat.c:130:4: error: request for member \u2018q1\u2019 in something not a structure or union\n   a.q1 = get_q1(data, size);\n    ^\nrd_stat.c:131:4: error: request for member \u2018median\u2019 in something not a structure or union\n   a.median = get_median(data, size);\n    ^\nrd_stat.c:132:4: error: request for member \u2018q3\u2019 in something not a structure or union\n   a.q3 = get_q3(data, size);\n    ^\nrd_stat.c:133:4: error: request for member \u2018mode\u2019 in something not a structure or union\n   a.mode = get_mode(data, size);\n    ^\nrd_stat.c:134:4: error: request for member \u2018stddev\u2019 in something not a structure or union\n   a.stddev = get_stddev(data, size);\n    ^\nrd_stat.c:137:4: error: request for member \u2018low\u2019 in something not a structure or union\n   a.low = data[0];\n    ^\nrd_stat.c:138:4: error: request for member \u2018hi\u2019 in something not a structure or union\n   a.hi = data[size - 1];\n    ^\n</code></pre>\n\n<p>It seems like it is not recognizing the struct BSTAT as a valid return type and I am not sure why. Any clue as to why this could be the case?</p>\n\n<p>Also, if anyone knows an open source file that has some/most/all of these functions available, that could be helpful as well. </p>\n"}, {"tags": ["c", "split"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503491988, "post_id": 45839889, "comment_id": 78637242, "body": "<code>(  ... )</code> is extracted and processed each it."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1503492195, "post_id": 45839889, "comment_id": 78637397, "body": "<code>strchr()</code> may help you., Or, if you prefer <code>strtok()</code>, parst, then post format to re-insert the characters you need."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503492436, "post_id": 45839889, "comment_id": 78637590, "body": "Try <code>while(tuples!=NULL){         printf(&quot;(%s)&quot;, tuples);         tuples=strtok(NULL,&quot;()&quot;); putchar(tuples ? &#39; &#39; : &#39;\\n&#39;);     }</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503493413, "post_id": 45839889, "comment_id": 78638403, "body": "like <a href=\"https://ideone.com/H8Tt7U\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503493755, "post_id": 45839889, "comment_id": 78638648, "body": "<code>printf(&quot;%s&quot;,tuples);</code> --&gt; <code>if(strcmp(tuples, &quot;,&quot;)==0)     \t\tputchar(&#39; &#39;);     \telse \t        printf(&quot;(%s)&quot;,tuples);</code>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503494369, "post_id": 45839889, "comment_id": 78639170, "body": "@chux-- ^^^ this will also print the comma separating the tuples in parentheses...."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503494464, "post_id": 45839889, "comment_id": 78639238, "body": "@chux Your approach needs one more <code>strtok</code>. (And for <code>break</code> in the case of <code>NULL</code>, I think it is necessary to replace <code>?:;</code> with <code>if</code>.)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503498609, "post_id": 45839889, "comment_id": 78642788, "body": "@DavidBowling Yes there is a pesky <code>,</code> that needs attention.  Hmmm"}], "answers": [{"tags": [], "owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "is_accepted": false, "score": 0, "last_activity_date": 1503492195, "last_edit_date": 1503492195, "creation_date": 1503492086, "answer_id": 45840035, "question_id": 45839889, "link": "https://stackoverflow.com/questions/45839889/how-to-get-the-tuple-form-out-of-the-one-line-input/45840035#45840035", "title": "How to get the tuple form out of the one line input?", "body": "<p>You need to use more advanced parsing than <code>strtok</code>. <code>strtok</code>, as you learn if you read the manual page (<a href=\"https://linux.die.net/man/3/strtok\" rel=\"nofollow noreferrer\"><code>man strtok</code></a>), will return the strings between each occurance of one of the delimiter characters, which for you is <code>\"()\"</code>.</p>\n\n<p>To achieve the result you want, you need code that:</p>\n\n<ol>\n<li>Finds the opening parenthesis</li>\n<li>Collects all numbers until a closing parenthesis</li>\n<li>repeat from 1</li>\n</ol>\n\n<p>This parsing can be done with calls to <code>strtok</code>, <code>strstr</code>, other string functions, or manually by parsing the string char for char.</p>\n\n<p>When you have your list of touple contents you can print them surrounded by parentheses (without comma in between if you so desire).</p>\n"}, {"comments": [{"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503495148, "post_id": 45840608, "comment_id": 78639841, "body": "<a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\" title=\"how do i ask and answer homework questions\">meta.stackoverflow.com/questions/334822/&hellip;</a> quote: &quot;It&#39;s usually better not to provide a complete code sample&quot;"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503496513, "post_id": 45840608, "comment_id": 78641022, "body": "@HansPetterTaugb&#248;lKragset - Lol, Thank you for pointing this out.  I don&#39;t usually, but in this case, a compilable illustration was the best way to convey my thoughts.  Besides, you were pretty selective in choosing only the part of the quoted sentence that supports your view.   The rest of it: (for posterity): <i>...if you believe it would not help the student, using your best judgment.</i>.  In this case, I believe it helps the student."}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503496917, "post_id": 45840608, "comment_id": 78641346, "body": "Yes sorry for the cherry picking :) I think your example is good in that it shows a minimal viable solution, that can be improved upon a lot etc."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 2, "last_activity_date": 1503503748, "last_edit_date": 1503503748, "creation_date": 1503493522, "answer_id": 45840608, "question_id": 45839889, "link": "https://stackoverflow.com/questions/45839889/how-to-get-the-tuple-form-out-of-the-one-line-input/45840608#45840608", "title": "How to get the tuple form out of the one line input?", "body": "<p><em><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strchr.htm\" rel=\"nofollow noreferrer\">strchr()</a></em>  is an additional parsing tool that may help you. It provides a method to quickly locate a specific character within a string, and return a pointer to that location.  This capability, along with <em><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_sprintf.htm\" rel=\"nofollow noreferrer\">sprintf()</a></em> can be used to reconstruct the string without the middle \",\".  Following is an illustration.   </p>\n\n<pre><code>int main(void)\n{\n    char string[40] = {\"(12,34,56,78),(1,2,3)\"};\n    char *ret;\n    int len1,len2;\n    char *first = strdup(string);//a 2nd copy is needed to preserve the 1st half of string.\n    char last[20];\n\n    len1 = strlen(string);\n\n    //in your example, the ')' character is the closest unique char to the \n    //target ',', so select this unique character to get close...\n    ret = strchr(string, ')');//brings pointer to first ')'\n    ret += 2; //increment pointer past next occurring \",\" to get second half of string\n    strcpy(last, ret);\n\n    len2 = strlen(last);\n    first[len1-(len2+1)] = 0;//use length information to get first half\n\n    sprintf(string, \"%s %s\", first, last); \n    printf(string);                 \n    free(first);\n\n    return 0;\n}\n</code></pre>\n\n<p>Outputs: </p>\n\n<blockquote>\n  <p>(12,34,56,78) (1,2,3)</p>\n</blockquote>\n\n<p>A note on user input:<br>\nIt occurred to me that legal syntax (you have stated no rules) for this seemingly simple scenario can easily result in variations that will make a general solution for parsing and string re-construction difficult.  eg, input could be any of the following:</p>\n\n<pre><code>(12,34,56,78),(1,2,3)  \n( 12 , 34 , 56 , 78 ) , ( 1 , 2 , 3 )  \n(12,34,56,78)      ,       (1,2,3)  \n(and many more)    \n</code></pre>\n\n<p>Keep in mind, to build a general approach to handling user input, the complexity of the code needed to process the input will be inversely proportional to the bounds (rules) put on input. i.e. if there are zero rules, the complexity will be infinite. If there are many rules governing allowed input, the complexity of the code will be proportionally smaller.  </p>\n\n<p>A good example of unbounded input is the way people talk.  There is very little convention followed in the way people choose to convey their thoughts. (<em><a href=\"https://en.wikipedia.org/wiki/Natural_language\" rel=\"nofollow noreferrer\">natural language</a></em> is similar in it variations to user input)  A few examples illustrating the complexity needed to process natural language <em><a href=\"https://scholar.google.com/scholar?q=natural+language+processing+in+C&amp;hl=en&amp;as_sdt=0&amp;as_vis=1&amp;oi=scholart&amp;sa=X&amp;ved=0ahUKEwj5ptLkz-3VAhXCqlQKHWqNBVsQgQMIQTAA\" rel=\"nofollow noreferrer\">are listed here</a></em>. </p>\n\n<p>(The input rules in your post are not clearly stated, so any attempt at a trivial solution here, will not likely satisfy any but those with input having syntax similar to your example)</p>\n"}, {"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503510391, "post_id": 45841756, "comment_id": 78650557, "body": "@BLUEPIXY-- I don&#39;t think so, in that case <code>offset</code> has been set to zero already...."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1503510565, "post_id": 45841756, "comment_id": 78650669, "body": "sorry, I got it early. You already have notes and countermeasures."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503511095, "post_id": 45841756, "comment_id": 78650991, "body": "@BLUEPIXY-- that falls under the &quot;some care required&quot; part of the answer; this is one downside of using <code>sscanf()</code> for such tasks.... I didn&#39;t realize until just now that you had linked to a similar solution <a href=\"https://stackoverflow.com/questions/45839889/how-to-get-the-tuple-form-out-of-the-one-line-input/45841756#comment78638403_45839889\">in the comments under the original question</a>"}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 0, "last_activity_date": 1503504656, "last_edit_date": 1503504656, "creation_date": 1503496503, "answer_id": 45841756, "question_id": 45839889, "link": "https://stackoverflow.com/questions/45839889/how-to-get-the-tuple-form-out-of-the-one-line-input/45841756#45841756", "title": "How to get the tuple form out of the one line input?", "body": "<p>If the input format is constrained to two tuples, as in the example, then you can use a simple <code>sscanf()</code> construction to parse this. Note that in the solutions below, valid input consists of possible leading whitespace, followed by a <code>(</code> character, followed by a non-empty string, followed by a <code>)</code> character, possibly followed by more whitespace or a comma. Further input validation would be needed to verify that the strings between parentheses are indeed tuples.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    char input[] = \"(12, 34, 56, 78),(1, 2, 3)\";\n\n    char tuple1[100];\n    char tuple2[100];\n\n    if (sscanf(input, \" (%[^)]) , (%[^)]\", tuple1, tuple2) == 2) {\n        printf(\"(%s) (%s)\\n\", tuple1, tuple2);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>(12, 34, 56, 78) (1, 2, 3)\n</code></pre>\n\n<p>But, if the number of input tuples is unknown (a large number of tuples must not be expected, since <code>enter</code> has been declared <code>char enter[100]</code> in the example code), this method can be extended by using the <code>%n</code> <code>scanf()</code> directive. This directive stores the number of characters read thus far in its argument. A pointer to the next segment of the input string to be read can be formed by adding this offset value to a pointer to the initial input string.</p>\n\n<p>The program below expects the tuples to be separated by commas, and will simply stop parsing if two tuples occur without a comma between them, or otherwise malformed input is encountered. Some care is required to handle this case, since the assignment to <code>offset</code> is not made if the final comma of the format string is not matched. Here, <code>offset</code> is initialized to zero, and reset to zero at the end of each loop iteration. Before the reset, if <code>offset</code> is already zero, then no assignment was made, meaning that the final comma was not matched (signalling the end of input), and the loop is exited.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    char input[] = \"(12, 34, 56, 78),(1, 2, 3), (4, 5, 6, 7)\";\n\n    char tuple[100];\n    char *next = input;\n    int offset = 0;\n    int ret_val = 0;\n\n    do {\n        ret_val = sscanf(next, \" (%[^)]) ,%n\", tuple, &amp;offset);\n        if (ret_val == 1) {\n            printf(\"(%s) \", tuple);\n            next += offset;\n        }\n\n        if (offset) {\n            offset = 0;\n        } else {\n            break;\n        }\n\n    } while (ret_val == 1);\n    putchar('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>(12, 34, 56, 78) (1, 2, 3) (4, 5, 6, 7)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503500909, "post_id": 45843061, "comment_id": 78644691, "body": "Note that this doesn&#39;t handle input such as <code>(12,34,56,78)(1,2,3)</code> too gracefully, and treats <code>(12,34,56,78),(1,2,3)</code> and <code>)12,34,56,78(,)1,2,3(</code> as identical input"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503501447, "post_id": 45843061, "comment_id": 78645084, "body": "@David Bowling Of course. Any simple solution will fail on some inputs - your as well -  &quot;(12, 34, 56, 79),(),(5, 2, 3), (4, 5, 6, 7)&quot;; only proper parser will able to tokenize it but it is not the scope of the question"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503501738, "post_id": 45843061, "comment_id": 78645271, "body": "My version stops parsing when malformed input is encountered. The resulting output of my code from your example would be <code>(12, 34, 6, 79)</code>. Of course, I am assuming that an empty tuple is malformed input; OP has not stipulated this...."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503501900, "post_id": 45843061, "comment_id": 78645378, "body": "I am going to argue - 3 lines parser will never work. And his question as I understand it is not about it. He just did not know how to avoid the &quot;middle&quot; token in his strtok call and I just shown him how. I <b>agree</b> that is not the proper tokenizer and it never was claimed as one."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503501994, "post_id": 45843061, "comment_id": 78645436, "body": "Fair enough; OP solution was bound to have these difficulties anyway...."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1503499877, "creation_date": 1503499877, "answer_id": 45843061, "question_id": 45839889, "link": "https://stackoverflow.com/questions/45839889/how-to-get-the-tuple-form-out-of-the-one-line-input/45843061#45843061", "title": "How to get the tuple form out of the one line input?", "body": "<p>if tuples do not contain subtuples:</p>\n\n<pre><code>void printTuples(char *s)\n{\n    char *str;\n    char *tmps = s;\n    int flag = 0;\n\n    while (1)\n    {\n        str = strtok(tmps, \"()\");\n        tmps = NULL;\n        if (str == NULL) break;\n        if((flag = !flag)) printf(\"( %s )\", str);\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8476655"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 45840608, "answer_count": 4, "score": 1, "last_activity_date": 1503504656, "creation_date": 1503491652, "last_edit_date": 1503491967, "question_id": 45839889, "link": "https://stackoverflow.com/questions/45839889/how-to-get-the-tuple-form-out-of-the-one-line-input", "title": "How to get the tuple form out of the one line input?", "body": "<p>I got a code below.\nIf the user input <code>(12,34,56,78),(1,2,3)</code>,<br>\nit will only output: <code>12,34,56,78,1,2,3</code><br>\nbut I need to output <code>(12,34,56,78) (1,2,3)</code><br>\nwhat should I do?</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(){\n    char enter[100];\n    int a;\n\n    printf(\"Enter a string:\");    \n    scanf(\"%s\",enter);\n    char *tuples=strtok(enter,\"()\");\n    while(tuples!=NULL){\n        printf(\"%s\",tuples);\n        tuples=strtok(NULL,\"()\");\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "enums", "embedded"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1503489151, "post_id": 45838943, "comment_id": 78635011, "body": "and you are using <code>%d</code>, why? you must use <code>%zu</code> for an argument type <code>size_t</code>."}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 1, "creation_date": 1503489317, "post_id": 45838943, "comment_id": 78635128, "body": "On Linux with gcc 6.2 I get <code>4</code> for all sizes, both with <code>%d</code> and <code>%zu</code>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1503489673, "post_id": 45838943, "comment_id": 78635399, "body": "Would the downvoter care to enlighten us on their judgement of this well-written question, with example code, and documented behaviour?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503490036, "post_id": 45838943, "comment_id": 78635692, "body": "so my bet about short enums was right"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1503490781, "post_id": 45838943, "comment_id": 78636267, "body": "On Linux with gcc 6.2.1 and -fshort-enums both prints as <code>1</code> (using %zu)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1503494039, "post_id": 45838943, "comment_id": 78638897, "body": "What this all boils down to is that there should never be a reason to forward declare an enum in the first place. If you don&#39;t want really weird program behavior, then don&#39;t write really weird code."}], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1503489381, "post_id": 45838988, "comment_id": 78635173, "body": "it does not answer the question and for this range of numbers it actually doas not matter."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1503489420, "post_id": 45838988, "comment_id": 78635198, "body": "Actually it might matter. Undefined behaviour means the entire program behaviour is undefined."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 3, "creation_date": 1503489620, "post_id": 45838988, "comment_id": 78635362, "body": "@PeterJ_01 What? Do you think integers are passed using different sizes depending on the value? That&#39;s not how it works. If <code>size_t</code> is 8 bytes, but <code>int</code> is 4, printing <code>size_t</code> as <code>%d</code> will not do the right thing at all, regardless of the value being printed."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503489975, "post_id": 45838988, "comment_id": 78635635, "body": "little endian + 8 bytes size_t and %d will display the correct value - but of course it is the UB. But in this case with quite predictable behaviour :)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503490152, "post_id": 45838988, "comment_id": 78635791, "body": "@PeterJ_01: I&#39;ve noticed on more than one occasion that you have a somewhat relaxed attitude to undefined behaviour and portability. Such an approach is become progressively more harmful as optimising compilers become more aggressive."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 3, "creation_date": 1503490225, "post_id": 45838988, "comment_id": 78635854, "body": "But doess not explain the difference in sizes. So where is the actual answer?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503490532, "post_id": 45838988, "comment_id": 78636066, "body": "it is not the answer it a nitpicker comment"}, {"owner": {"reputation": 169, "user_id": 6000885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36eab89e78cb8fa2c9be1e4f18208b5c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6000885/ivan"}, "edited": false, "score": 1, "creation_date": 1503493330, "post_id": 45838988, "comment_id": 78638338, "body": "I use &quot;zu&quot; instead of &quot;%d&quot;, the output is no difference."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503494486, "post_id": 45838988, "comment_id": 78639262, "body": "@unwind it is arm-none-eabi-gcc so  <code>If size_t is 8 bytes,</code> is always <code>false</code>"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1503489554, "last_edit_date": 1503489554, "creation_date": 1503489149, "answer_id": 45838988, "question_id": 45838943, "link": "https://stackoverflow.com/questions/45838943/different-size-of-the-same-enum-type/45838988#45838988", "title": "different size of the same enum type", "body": "<p>This is undefined behavior.</p>\n\n<p>You must use <code>%zu</code> to make <code>printf()</code> format a value of type <code>size_t</code>.</p>\n\n<p>If the size of the value differs from that of <code>int</code>, the code in <code>printf()</code> will mis-read the varargs-argument and get the wrong idea of its value (<code>va_arg(args, int);</code> instead of <code>va_arg(args, size_t);</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1503493430, "post_id": 45839061, "comment_id": 78638415, "body": "good intuition, check Antti&#39;s answer. your answer <i>answers</i> the question."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1503493739, "last_edit_date": 1503493739, "creation_date": 1503489367, "answer_id": 45839061, "question_id": 45838943, "link": "https://stackoverflow.com/questions/45838943/different-size-of-the-same-enum-type/45839061#45839061", "title": "different size of the same enum type", "body": "<p>First of all, fix the <em>undefined behaviour</em> in your code. The correct format specifier for the <code>sizeof</code> expression type is <code>%zu</code>.</p>\n\n<p>The backing type of an enumerator in C can be <code>char</code>, <code>int</code>, or <code>unsigned</code>. The compiler can pick any of these so long as it is capable of storing all the enumerated values.</p>\n\n<p>So a value of 1 is feasible (as <code>sizeof(char)</code> is always 1), and you have asked some of your compilers to squeeze the <code>enum</code> backing types.</p>\n\n<p>The fact that an <code>int</code> appears to be chosen for the backing type for <code>foo</code> is due, I think, to your referring to <code>enum foo</code> before you define it, and your friendly C compiler is using some sort of implicit <code>int</code>. Such an implicit declaration is no longer standard C and your code is not strictly portable.</p>\n\n<p>Reference: <a href=\"http://en.cppreference.com/w/c/language/enum\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/language/enum</a></p>\n"}, {"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503494503, "post_id": 45839148, "comment_id": 78639278, "body": "Intresting no comments"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1503509844, "post_id": 45839148, "comment_id": 78650236, "body": "I don&#39;t understand the downvotes... revenge because criticizing high-rep below par answer? you have my UV."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -1, "last_activity_date": 1503490928, "last_edit_date": 1503490928, "creation_date": 1503489642, "answer_id": 45839148, "question_id": 45838943, "link": "https://stackoverflow.com/questions/45838943/different-size-of-the-same-enum-type/45839148#45839148", "title": "different size of the same enum type", "body": "<p>The answer is actually quite simple.</p>\n\n<p>As you have function prototype returning enum type, the compiler assumes it as the int and its size is hardware dependent (in your case 4 bytes) It is done for the optimisation purposes. For the another one is stored in the smallest possible data type. (probably -Os optimisation and / or -fshort-enums were used)</p>\n\n<p>For coders having the real programming experience this behaviour is well known, and that is the reason to do not declare functions as returning enums if you want to keep them short.</p>\n\n<p>For C standard fanatics <code>uint8_t foo();</code> and <code>return FOO_0;</code> might be unacceptable but the programming is a real, live and practical science.</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 6000885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36eab89e78cb8fa2c9be1e4f18208b5c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6000885/ivan"}, "edited": false, "score": 0, "creation_date": 1503535485, "post_id": 45840018, "comment_id": 78660699, "body": "The issue is cause by the &quot;forward references to \u2018enum\u2019 types [-Werror=pedantic]&quot;. Is there any other option, but not &quot;-Werror=pedantic&quot;, can be used to detect this case?"}, {"owner": {"reputation": 169, "user_id": 6000885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36eab89e78cb8fa2c9be1e4f18208b5c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6000885/ivan"}, "edited": false, "score": 0, "creation_date": 1503536321, "post_id": 45840018, "comment_id": 78660899, "body": "I am using some third party open source code in my project, &quot;-Werror=pedantic&quot; will cause many compiling error. And the case in the third party code is described as follows: * &quot;file_1.h&quot; define &quot;enum foo&quot;. * \u201cfile_2.h\u201d declare &quot;enum foo foo_test(void);&quot; * other c files may include &quot;file_1.h&quot; first, or &quot;file_2.h&quot; first, causing enum foo has different size in different c files.  I don&#39;t know how many issues in this third party open source, I want to detect &quot;forward references to \u2018enum\u2019 types&quot; as an error, and fix the issue."}, {"owner": {"reputation": 169, "user_id": 6000885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36eab89e78cb8fa2c9be1e4f18208b5c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6000885/ivan"}, "edited": false, "score": 0, "creation_date": 1503537766, "post_id": 45840018, "comment_id": 78661246, "body": "I have checked the gcc manual, but didn&#39;t find any other option to detect &quot;forward references to \u2018enum\u2019 types&quot;."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 169, "user_id": 6000885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36eab89e78cb8fa2c9be1e4f18208b5c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6000885/ivan"}, "edited": false, "score": 0, "creation_date": 1503549476, "post_id": 45840018, "comment_id": 78663961, "body": "@Ivan use <code>-pedantic</code> which would just give a warning; <code>-pedantic</code> with <code>-Werror</code> will give an error."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 6, "last_activity_date": 1503495001, "last_edit_date": 1503495001, "creation_date": 1503492044, "answer_id": 45840018, "question_id": 45838943, "link": "https://stackoverflow.com/questions/45838943/different-size-of-the-same-enum-type/45840018#45840018", "title": "different size of the same enum type", "body": "<p>As is so common with the questions asking about peculiar outcomes in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a>, the reason here is <strong>undefined behaviour</strong>. The C11 standard draft n1570 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.3p3\" rel=\"nofollow noreferrer\">6.7.2.3p3</a>:</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li><p>A type specifier of the form</p>\n\n<pre><code>enum identifier\n</code></pre>\n  \n  <p>without an enumerator list <strong>shall</strong> only appear after the type it specifies <strong>is complete.</strong> </p></li>\n  </ol>\n</blockquote>\n\n<p>And of completeness in <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.2p4\" rel=\"nofollow noreferrer\">C11 6.7.2.2p4</a>:</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>[...] The enumerated type is incomplete until immediately after the } that terminates the list of enumerator declarations, and complete thereafter. </li>\n  </ol>\n</blockquote>\n\n<p>As a <em>shall</em> in a <em>constraints</em> section was violated, a conforming compiler must output a diagnostics message - however GCC by default isn't a conforming implementation unless you ask it to be <code>-pedantic</code>:</p>\n\n<blockquote>\n<pre><code>ISO C forbids forward references to \u2018enum\u2019 types [-Werror=pedantic]\n enum foo foo_test(void);\n      ^\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>Now, it seems that the compiler there uses the <em>shortest</em> possible enums for any type. Since you used the <code>enum foo</code> <em>before</em> it was actually defined what was in there, the compiler had to resort to <code>int</code> for its type, otherwise <code>char</code> was used. It can be reproduced with <code>-fshort-enums</code>. Your program prints <code>4 1</code>, whereas this program prints <code>1 1</code> with <code>-fshort-enums</code> on my gcc.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nenum foo {\n    FOO_0\n};\n\nenum foo foo_test(void);    \n\nenum bar {\n    BAR_0\n};\n\nint main(int argc, char **argv)\n{\n    printf(\"sizeof(enum foo) %zu, sizeof(enum bar) %zu\\n\", \n            sizeof(enum foo), sizeof(enum bar));\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 6000885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36eab89e78cb8fa2c9be1e4f18208b5c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6000885/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 45840018, "answer_count": 4, "score": 5, "last_activity_date": 1503495001, "creation_date": 1503489038, "last_edit_date": 1503489888, "question_id": 45838943, "link": "https://stackoverflow.com/questions/45838943/different-size-of-the-same-enum-type", "title": "different size of the same enum type", "body": "<p>The sizes of enum types in the following code are different, why? Will the declararation of an enum type will cause gcc to treat it as <code>signed int</code>? And this feature cause a problem in my project, for example, the size of one enum type is 1 in \"file_1.c\", but the size of it is 4 in \"file_2.c\". </p>\n\n<p>My test code:</p>\n\n<pre><code>enum foo foo_test(void);\n\nenum foo {\n    FOO_0\n};\n\nenum bar {\n    BAR_0\n};\n\nint main(int argc, char **argv)\n{\n    printf(\"sizeof(enum foo) %d, sizeof(enum bar) %d\\n\", sizeof(enum foo), sizeof(enum bar));\n    return 0;\n}\n</code></pre>\n\n<ul>\n<li><p>When I compile it with arm-none-eabi-gcc v4.9.3 in my embedded project</p>\n\n<ul>\n<li>the output is <code>sizeof(enum foo) 4, sizeof(enum bar) 1</code>.</li>\n</ul></li>\n<li><p>When I compile it with gcc v4.8.3 in Windows</p>\n\n<ul>\n<li>compile with <code>gcc -Wall -o sizeofTest.exe sizeofTest.c</code>\n\n<ul>\n<li>the output is <code>sizeof(enum foo) 4, sizeof(enum bar) 4</code>.</li>\n</ul></li>\n<li>compile with <code>gcc -Wall -fshort-enums -o sizeofTest.exe sizeofTest.c</code>\n\n<ul>\n<li>the output is <code>sizeof(enum foo) 4, sizeof(enum bar) 1</code>.</li>\n</ul></li>\n</ul></li>\n</ul>\n"}, {"tags": ["c", "io"], "comments": [{"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1503487002, "post_id": 45838180, "comment_id": 78633446, "body": "It does not. What CPU instructions more than a simple write does it need to emit?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1503487005, "post_id": 45838180, "comment_id": 78633450, "body": "The <i>compiler</i> doesn&#39;t know. All it does is generate code to read from or write to that specific address. It&#39;s the hardware itself that handles it, or possibly the operating system."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1503487206, "post_id": 45838180, "comment_id": 78633586, "body": "If you need IO port mapped IO you need to use special functions from the compiler to generate the port access instructions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503487342, "post_id": 45838180, "comment_id": 78633679, "body": "Some compilers use different <i>address spaces</i> to disambiguate between RAM and port I/O (and, on a harvard architecture, program memory). They just add fixed offsets to the pointer values."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 5, "creation_date": 1503487343, "post_id": 45838180, "comment_id": 78633680, "body": "@MichaelFoukarakis instructions to read/write to an IO port are different from read/write to memory. E.g. IN/OUT instead of generig MOV/LD/... instructions"}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1503495390, "post_id": 45838180, "comment_id": 78640044, "body": "@Gerhardh true - I suppose I wrote the comment with only userspace in mind."}], "answers": [{"comments": [{"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1503492185, "post_id": 45838315, "comment_id": 78637383, "body": "While not having to use special instructions played a part, I suspect much of the reason for switching to memory-mapped I/O was the rise of larger address spaces and better options for &quot;glue&quot; logic (e.g. FPGAs/ASICs). For a Z80, you would need to &quot;fully decode&quot; the (few) memory-mapped addresses to avoid large holes in the address space, and that took lots of 7400-series chips. With GBs of memory space, you might only partially decode addresses (so <code>0xF0xxxxx1</code> works, for any <code>x</code>). If you still want to fully-decode, you can do it all in the FPGA/ASIC."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 4, "last_activity_date": 1503487192, "creation_date": 1503487192, "answer_id": 45838315, "question_id": 45838180, "link": "https://stackoverflow.com/questions/45838180/how-compiler-knows-if-a-pointer-address-in-c-is-port-mapped-or-ram/45838315#45838315", "title": "How compiler knows if a pointer address in C is port mapped or RAM?", "body": "<p>If you have non-memory-mapped I/O, you're not going to be able to access it from C as if it were memory.</p>\n\n<p>You must use some platform-specific trickery to get the proper I/O instructions. This is a pain, and might be one reason why modern hardware seems to favor memory-mapped I/O.</p>\n\n<p>C compilers for platforms with port-mapped I/O had to include this, see for instance the <a href=\"https://stackoverflow.com/questions/6539345/using-inp-on-16bit-dos-5with-turbo-c-3-0\"><code>inp()</code></a> function in the old Turbo C++ for DOS.</p>\n"}, {"comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1503498654, "post_id": 45838852, "comment_id": 78642829, "body": "Where does this answer adress &quot;Port mapped IO&quot;?"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -1, "last_activity_date": 1503489190, "last_edit_date": 1503489190, "creation_date": 1503488804, "answer_id": 45838852, "question_id": 45838180, "link": "https://stackoverflow.com/questions/45838180/how-compiler-knows-if-a-pointer-address-in-c-is-port-mapped-or-ram/45838852#45838852", "title": "How compiler knows if a pointer address in C is port mapped or RAM?", "body": "<p>Two steps:</p>\n\n<ol>\n<li>Install the correct toolchain for your target hardware.</li>\n<li>Use provided header files with all the necessary properly dome definitions </li>\n</ol>\n\n<p>For example if you want to program ARM STM uC bare metal gcc compiler - use <code>arm-none-eabi-gcc</code> and tools. Use header CMSIS header files provided by STM &amp; ARM (usually they are already included if you  choose a \"ready made\" toolchain)</p>\n\n<p>Example declarations and definitions (only for ADC1):</p>\n\n<pre><code>#define FLASH_BASE            ((uint32_t)0x08000000U) /*!&lt; FLASH base address in the alias region */\n#define CCMDATARAM_BASE       ((uint32_t)0x10000000U) /*!&lt; CCM(core coupled memory) data RAM base address in the alias region     */\n#define SRAM_BASE             ((uint32_t)0x20000000U) /*!&lt; SRAM base address in the alias region */\n#define PERIPH_BASE           ((uint32_t)0x40000000U) /*!&lt; Peripheral base address in the alias region */\n#define SRAM_BB_BASE          ((uint32_t)0x22000000U) /*!&lt; SRAM base address in the bit-band region */\n#define PERIPH_BB_BASE        ((uint32_t)0x42000000U) /*!&lt; Peripheral base address in the bit-band region */\n#define AHB3PERIPH_BASE       (PERIPH_BASE + 0x10000000U)\n#define ADC1_BASE             (AHB3PERIPH_BASE + 0x00000000U)\n\n#define ADC1                ((ADC_TypeDef *) ADC1_BASE)\n\n#ifdef __cplusplus\n  #define   __I     volatile             /*!&lt; Defines 'read only' permissions */\n#else\n  #define   __I     volatile const       /*!&lt; Defines 'read only' permissions */\n#endif\n#define     __O     volatile             /*!&lt; Defines 'write only' permissions */\n#define     __IO    volatile             /*!&lt; Defines 'read / write' permissions */\n\n/* following defines should be used for structure members */\n#define     __IM     volatile const      /*! Defines 'read only' structure member permissions */\n#define     __OM     volatile            /*! Defines 'write only' structure member permissions */\n#define     __IOM    volatile            /*! Defines 'read / write' structure member permissions */\ntypedef struct\n{\n  __IO uint32_t ISR;              /*!&lt; ADC Interrupt and Status Register,                 Address offset: 0x00 */\n  __IO uint32_t IER;              /*!&lt; ADC Interrupt Enable Register,                     Address offset: 0x04 */\n  __IO uint32_t CR;               /*!&lt; ADC control register,                              Address offset: 0x08 */\n  __IO uint32_t CFGR;             /*!&lt; ADC Configuration register,                        Address offset: 0x0C */\n  uint32_t      RESERVED0;        /*!&lt; Reserved, 0x010                                                         */\n  __IO uint32_t SMPR1;            /*!&lt; ADC sample time register 1,                        Address offset: 0x14 */\n  __IO uint32_t SMPR2;            /*!&lt; ADC sample time register 2,                        Address offset: 0x18 */\n  uint32_t      RESERVED1;        /*!&lt; Reserved, 0x01C                                                         */\n  __IO uint32_t TR1;              /*!&lt; ADC watchdog threshold register 1,                 Address offset: 0x20 */\n  __IO uint32_t TR2;              /*!&lt; ADC watchdog threshold register 2,                 Address offset: 0x24 */\n  __IO uint32_t TR3;              /*!&lt; ADC watchdog threshold register 3,                 Address offset: 0x28 */\n  uint32_t      RESERVED2;        /*!&lt; Reserved, 0x02C                                                         */\n  __IO uint32_t SQR1;             /*!&lt; ADC regular sequence register 1,                   Address offset: 0x30 */\n  __IO uint32_t SQR2;             /*!&lt; ADC regular sequence register 2,                   Address offset: 0x34 */\n  __IO uint32_t SQR3;             /*!&lt; ADC regular sequence register 3,                   Address offset: 0x38 */\n  __IO uint32_t SQR4;             /*!&lt; ADC regular sequence register 4,                   Address offset: 0x3C */\n  __IO uint32_t DR;               /*!&lt; ADC regular data register,                         Address offset: 0x40 */\n  uint32_t      RESERVED3;        /*!&lt; Reserved, 0x044                                                         */\n  uint32_t      RESERVED4;        /*!&lt; Reserved, 0x048                                                         */\n  __IO uint32_t JSQR;             /*!&lt; ADC injected sequence register,                    Address offset: 0x4C */\n  uint32_t      RESERVED5[4];     /*!&lt; Reserved, 0x050 - 0x05C                                                 */\n  __IO uint32_t OFR1;             /*!&lt; ADC offset register 1,                             Address offset: 0x60 */\n  __IO uint32_t OFR2;             /*!&lt; ADC offset register 2,                             Address offset: 0x64 */\n  __IO uint32_t OFR3;             /*!&lt; ADC offset register 3,                             Address offset: 0x68 */\n  __IO uint32_t OFR4;             /*!&lt; ADC offset register 4,                             Address offset: 0x6C */\n  uint32_t      RESERVED6[4];     /*!&lt; Reserved, 0x070 - 0x07C                                                 */\n  __IO uint32_t JDR1;             /*!&lt; ADC injected data register 1,                      Address offset: 0x80 */\n  __IO uint32_t JDR2;             /*!&lt; ADC injected data register 2,                      Address offset: 0x84 */\n  __IO uint32_t JDR3;             /*!&lt; ADC injected data register 3,                      Address offset: 0x88 */\n  __IO uint32_t JDR4;             /*!&lt; ADC injected data register 4,                      Address offset: 0x8C */\n  uint32_t      RESERVED7[4];     /*!&lt; Reserved, 0x090 - 0x09C                                                 */\n  __IO uint32_t AWD2CR;           /*!&lt; ADC  Analog Watchdog 2 Configuration Register,     Address offset: 0xA0 */\n  __IO uint32_t AWD3CR;           /*!&lt; ADC  Analog Watchdog 3 Configuration Register,     Address offset: 0xA4 */\n  uint32_t      RESERVED8;        /*!&lt; Reserved, 0x0A8                                                         */\n  uint32_t      RESERVED9;        /*!&lt; Reserved, 0x0AC                                                         */\n  __IO uint32_t DIFSEL;           /*!&lt; ADC  Differential Mode Selection Register,         Address offset: 0xB0 */\n  __IO uint32_t CALFACT;          /*!&lt; ADC  Calibration Factors,                          Address offset: 0xB4 */\n\n} ADC_TypeDef;\n</code></pre>\n\n<hr>\n\n<p>and it expands to: <code>((ADC_TypeDef *) ((((uint32_t)0x40000000U) + 0x10000000U) + 0x00000000U))</code></p>\n\n<p>It is not worth to do it manually.</p>\n"}], "owner": {"reputation": 648, "user_id": 5083784, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6dcd25741a5ad26bd8198ed0e081b75a?s=128&d=identicon&r=PG&f=1", "display_name": "sniper", "link": "https://stackoverflow.com/users/5083784/sniper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1503489190, "creation_date": 1503486864, "question_id": 45838180, "link": "https://stackoverflow.com/questions/45838180/how-compiler-knows-if-a-pointer-address-in-c-is-port-mapped-or-ram", "title": "How compiler knows if a pointer address in C is port mapped or RAM?", "body": "<p>I know that port mapped IO are accessed thorugh in/out CPU instructions and memory (&amp; memory mapped registers) are accessed through load/store CPU instructions (similar to memory). But, with a pointer in C code, how compiler knows if a address is port mapped IO register or memory and then inserts the correct CPU instructions? </p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>uint16_t const* uart_reg = 0x8000c000;\nuint16_t const* ram_addr = 0x4000c000;\n\n*uart_reg = 0x1;\n*ram_addr = 0x12;\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1503486334, "post_id": 45837938, "comment_id": 78632923, "body": "No there&#39;s no &quot;library or built-in function&quot; which does this. You have to build your own parser and evaluator."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1503486416, "post_id": 45837938, "comment_id": 78632995, "body": "@Someprogrammerdude this is in fact an answer already ;)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1503486424, "post_id": 45837938, "comment_id": 78633004, "body": "<code>scanf(&quot;%s&quot;, &amp;expression);</code> is wrong because <code>expression</code> only holds 1 char. use <code>scanf(&quot;%99s&quot;, expression);</code> with <code>char expression[100];</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1503486455, "post_id": 45837938, "comment_id": 78633026, "body": "1) This is not how strings work in C. 2) This is not valid C."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503486475, "post_id": 45837938, "comment_id": 78633040, "body": "Lex (lexer generator) and Yacc (parser generator) are great for that purpose: <a href=\"http://dinosaur.compilertools.net/\" rel=\"nofollow noreferrer\">dinosaur.compilertools.net</a>. Here is an example doing arithmetics like you want with Lex and Yacc: <a href=\"http://memphis.compilertools.net/interpreter.html\" rel=\"nofollow noreferrer\">memphis.compilertools.net/interpreter.html</a>"}, {"owner": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1503486599, "post_id": 45837938, "comment_id": 78633128, "body": "@Someprogrammerdude I am relatively new to this, so if can direct me to some tutorial or sample code or something similar"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503486645, "post_id": 45837938, "comment_id": 78633168, "body": "code is still wrong, <code>expression</code> would evaluate as a pointer to the first element of the array (type <code>char *</code>, so what <code>scanf()</code> wants), but <code>&amp;expression</code> is a <i>pointer to the array</i> (type <code>char (*)[100]</code>). Also wrong because of a possible buffer overflow, you need to use <code>%99s</code> to prevent writing out of bounds of <code>expression</code>."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503486831, "post_id": 45837938, "comment_id": 78633320, "body": "Further you mixed C and C++ in your question (title: C; text: C++; tag: C). Choose one!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503486916, "post_id": 45837938, "comment_id": 78633386, "body": "@AndreKampling I guess &quot;<i>Turbo C++</i>&quot; as a product comes with a C compiler .... anything about this question clearly <i>attempts to be</i> C ;)"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1503488722, "post_id": 45837938, "comment_id": 78634703, "body": "Do a Google search on &quot;build an expression parser in C&quot;. You&#39;ll find lots of hits to give you some ideas. At a high level, you first need to decide for yourself: what do valid expressions look like? What operations? How complicated? I voted to close this question on the bases of looking for offline resources, but it is also too broad."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503486564, "post_id": 45838048, "comment_id": 78633096, "body": "simpler: use an array like <code>char expression[1024];</code> and then read with <code>fgets(expression, 1024, stdin)</code> (or, not-so-ideal-but-possible <code>scanf(&quot;%1023s&quot;, expression)</code>)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503486751, "post_id": 45838048, "comment_id": 78633247, "body": "Oh and <code>readline()</code> isn&#39;t standard C, so as long as the question doesn&#39;t mention an implementation where it&#39;s available, this needs a disclaimer :)"}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503486837, "post_id": 45838048, "comment_id": 78633326, "body": "@FelixPalmen Thanks :)"}, {"owner": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "edited": false, "score": 0, "creation_date": 1503486914, "post_id": 45838048, "comment_id": 78633383, "body": "In my included syllabus book the syntax for declaring the code is like this and the code compiles just fine in Turbo. So is it better code or change in standard?"}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503487125, "post_id": 45838048, "comment_id": 78633531, "body": "Then you should tag your question with Turbo and C++ instead of <code>c</code> and <code>string</code>. The answers you are getting are one a general level. I have not heard about <i>Turbo</i> before and do not know how it works, if the code you have in your question runs in Turbo it is quite a way away from <code>c</code>..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503487217, "post_id": 45838048, "comment_id": 78633597, "body": "@HansPetterTaugb&#248;lKragset regarding edit: what <b>bug</b>? I don&#39;t remember seeing any wrong code here ..."}, {"owner": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "edited": false, "score": 1, "creation_date": 1503487237, "post_id": 45838048, "comment_id": 78633604, "body": "@HansPetterTaugb&#248;lKragset Turbo C++ is a C/C++ compiler for DOS by Borland International released in 1991"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1503487279, "post_id": 45838048, "comment_id": 78633636, "body": "@HansPetterTaugb&#248;lKragset Sorry if you didn&#39;t like my edit, but I liked your &quot;<i>No.</i>&quot; so much that I couldn&#39;t resist."}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503487287, "post_id": 45838048, "comment_id": 78633642, "body": "@FelixPalmen originally question said (as comments on question point to), <code>char expression</code> with no buffer size."}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1503487445, "post_id": 45838048, "comment_id": 78633750, "body": "@IharobAlAsimi I think your edit was removed because I edited it also."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503487471, "post_id": 45838048, "comment_id": 78633768, "body": "@HansPetterTaugb&#248;lKragset yes, and questions are supposed to not change anything that invalidates answers. The correct thing to do would be to roll back the offending edit on the question, not to delete the major part of your answer."}, {"owner": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "edited": false, "score": 0, "creation_date": 1503487773, "post_id": 45838048, "comment_id": 78634000, "body": "@HansPetterTaugb&#248;lKragset in regards to your edited answer, I had built a function that can perform such operation but need a parameter to know what operator is being used. I want to ask is that is there any way to read  &#39;+&#39;  inside the string and perform some action?"}, {"owner": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "edited": false, "score": 0, "creation_date": 1503487976, "post_id": 45838048, "comment_id": 78634147, "body": "@FelixPalmen Yes that was a mistake on my behalf that my program had such a problem but I am relatively new to stackoverflow as well, so my question is code in the question can&#39;t be modified if a mistake a bit irrelevant to question is edited?"}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503487994, "post_id": 45838048, "comment_id": 78634164, "body": "Inside this function you need to parse the string and find the operator and then use that operator on the operands...? Like <code>if(operator == &#39;+&#39;) {</code> and so on, right? If you don&#39;t understand what to do you can either write a more specific question, or read online or in a book and find the answers there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "edited": false, "score": 0, "creation_date": 1503488090, "post_id": 45838048, "comment_id": 78634237, "body": "@UbadahJ of course you can correct a mistake in your code, <b>unless</b> there&#39;s already an answer referring to <i>exactly that mistake</i>. The general rule is just: don&#39;t change anything in your question that renders existing answers invalid or makes them confusing :)"}, {"owner": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "edited": false, "score": 0, "creation_date": 1503488479, "post_id": 45838048, "comment_id": 78634520, "body": "@FelixPalmen Thanks and I will avoid such things."}, {"owner": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "edited": false, "score": 0, "creation_date": 1503488612, "post_id": 45838048, "comment_id": 78634623, "body": "@HansPetterTaugb&#248;lKragset should I ask a new question referring to this current situation? The code you described is exactly what I want to do in my own function."}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "reply_to_user": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "edited": false, "score": 0, "creation_date": 1503488838, "post_id": 45838048, "comment_id": 78634794, "body": "@UbadahJ You should look around stackoverflow, other websites and possibly your syllabus for the answer you need before asking (if you can&#39;t find the answer yourself)."}, {"owner": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "edited": false, "score": 0, "creation_date": 1503489048, "post_id": 45838048, "comment_id": 78634930, "body": "@HansPetterTaugb&#248;lKragset Actually this task is way out of my syllabus because it doesn&#39;t even includes array and string manipulations. Anyway I would look further for this problem."}], "tags": [], "owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "is_accepted": true, "score": 2, "last_activity_date": 1503487249, "last_edit_date": 1503487249, "creation_date": 1503486484, "answer_id": 45838048, "question_id": 45837938, "link": "https://stackoverflow.com/questions/45837938/use-string-as-mathematical-expression-in-c/45838048#45838048", "title": "Use string as mathematical expression in C", "body": "<p>No.</p>\n\n<p><code>answer = expression</code> makes no sense. If you intend <code>answer = find_answer(expression)</code>, and this function <code>find_answer()</code> is what you really want to know if exists, the answer remains \"No.\", there is no math-string parser built in to C. You can write it yourself, it's not super hard if you make it simple (only basic operators and two operands, for a start).</p>\n\n<hr>\n\n<p>EDIT: Question had bug that was fixed, removed parts of answer.</p>\n"}], "owner": {"reputation": 46, "user_id": 7770265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7966d6cecc830387fad230dfa2837ed?s=128&d=identicon&r=PG&f=1", "display_name": "UbadahJ", "link": "https://stackoverflow.com/users/7770265/ubadahj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 45838048, "answer_count": 1, "score": 0, "last_activity_date": 1503487249, "creation_date": 1503486237, "last_edit_date": 1503486505, "question_id": 45837938, "link": "https://stackoverflow.com/questions/45837938/use-string-as-mathematical-expression-in-c", "title": "Use string as mathematical expression in C", "body": "<p>I want to know if there is any way to get a expression as string and evaluate it as mathematical expression?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt; \n\nvoid main {\n char expression[100];\n int answer;\n scanf(\"%s\", &amp;expression);\n // Let expression = \"10+5\"\n answer = expression\n printf(\"%d\", answer);\n // Print 15\n getch();\n}\n</code></pre>\n\n<p>Is there any libary or built-in function which can help me accomplish this task? I am using Turbo C++ 3.0.</p>\n\n<hr>\n\n<p>P.S: I can't use modern compiler because it is included in our syllabus.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1503485972, "post_id": 45837726, "comment_id": 78632670, "body": "There are quite a few for loops in that code. Which one are you having trouble with, and what trouble are you having exactly?"}, {"owner": {"reputation": 9, "user_id": 8419796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e223c8e848ef17c16998e33b7f42ded?s=128&d=identicon&r=PG&f=1", "display_name": "meri", "link": "https://stackoverflow.com/users/8419796/meri"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1503489204, "post_id": 45837726, "comment_id": 78635042, "body": "@interjay    My problem is herr                                                                                                                                                                    inp[i]=y[i]; }   double MA,MI,MOY; float ectt;     MI= calcul__min(inp,640);     MA= calcul__max(inp,640);     MOY= calcul__moy(inp,640);     ectt= calcul__ect(inp,640);      printf(&quot;Le min de tableau est &quot;&quot;%f\\n&quot;,MI);     printf(&quot;Le max de tableau est &quot;&quot;%f\\n&quot;,MA);     printf (&quot;la moyenne est de &quot;&quot;%g\\n&quot;, MOY);     printf (&quot;ecart type est &quot;&quot;%g\\n&quot;, ectt);"}], "answers": [{"tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": false, "score": 0, "last_activity_date": 1503486641, "last_edit_date": 1503486641, "creation_date": 1503486154, "answer_id": 45837909, "question_id": 45837726, "link": "https://stackoverflow.com/questions/45837726/how-to-use-for-loop-to-use-a-partition-of-a-table/45837909#45837909", "title": "How to use for loop to use a partition of a table?", "body": "<p>As we know, arrays in C are passed as pointer to first byte.</p>\n\n<p>And also as we know we can apply pointer arithmetics on pointers in C (except <code>void</code>).</p>\n\n<p>Here is the example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(float *f)\n{\n    // Some stuff\n}\n\nint main()\n{\n    float inp[2560];\n    foo(inp);\n    foo(inp+(640));\n    foo(inp+(2*640));\n    foo(inp+(3*640));\n}\n</code></pre>\n\n<p><code>inp+X</code> skips <code>X</code> floats in array. Dont explicitly type <code>X * sizeof(float);</code> it would be wrong.</p>\n\n<blockquote>\n  <p>i have this code and i want to partion a table inp[2560] into 4 part\n  and for each part i want to calculate this :</p>\n</blockquote>\n\n<p>Here is an inspiration:</p>\n\n<pre><code>int i = 0;\nwhile (i &lt; 4)\n{\n    whatever = calcul__min(inp+(i * 640),640);\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8419796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e223c8e848ef17c16998e33b7f42ded?s=128&d=identicon&r=PG&f=1", "display_name": "meri", "link": "https://stackoverflow.com/users/8419796/meri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1522855008, "creation_date": 1503485723, "last_edit_date": 1522855008, "question_id": 45837726, "link": "https://stackoverflow.com/questions/45837726/how-to-use-for-loop-to-use-a-partition-of-a-table", "title": "How to use for loop to use a partition of a table?", "body": "<p>I have this code and I want to partition a table <code>inp[2560]</code> into 4 parts and for each part I want to calculate this:</p>\n\n<pre><code>MI = calcul__min(inp,640);\nMA = calcul__max(inp,640);\nMOY = calcul__moy(inp,640);\nectt = calcul__ect(inp,640);\n</code></pre>\n\n<p>I don't know how to use the for-loop for this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\n#define ORDER 65\n\n#define NP 2560\n\nfloat inp[2560];\nfloat ED1, ED2, ED3, ED4, Ap4;\nfloat d1, d2, d3, d4, a4, total;\nint i;\n\ndouble calcul__max(float tab[], int N)\n{\n    double max;\n    int i;\n    for (i = 0; i &lt; N; i++)\n    {\n        if(tab[i]&gt;max)\n        max=tab[i];\n    }\n    return max;\n}\n\ndouble calcul__min(float tab[], int N)\n{\n    double min;\n    int i;\n    for (i = 0; i &lt; N; i++)\n    {\n        if(tab[i]&lt;min)\n        min=tab[i];\n    }\n    return min;\n}\n\ndouble calcul__moy(float tab[],int N)\n{\n    double  moyenne,somme;\n    int i;\n    for (i = 0; i &lt; N; i++)\n    {\n        somme = somme + tab[i];\n        moyenne = somme /640;\n    }\n    return  moyenne;\n}\n\nfloat calcul__ect(float tab[], int N)\n{\n    double moyenne, TM, som, ec, ect;\n    moyenne = calcul__moy(inp,640);\n    int i;\n\n    for (i = 0; i &lt; N; i++)\n    {\n        TM = tab[i] - moyenne;\n        TM *= TM;\n        som += TM;\n    }\n    ec = som / 639;\n    ect = sqrt(ec);\n\n    return ect;\n}\n\nstruct Calculstat\n{\n    float Ea;\n    float amplitudemin;\n    float ecarttype;\n    float Ed2;\n    float amplitudemax;\n};\n\nfilter(int ord, float *a, float *b, int np, float *x, float *y) {\n    int i, j;\n    y[0] = b[0] * x[0];\n    for (i = 1; i &lt; ord + 1; i++) {\n        y[i] = 0.0;\n        for (j = 0; j &lt; i + 1; j++)\n            y[i] = y[i] + b[j] * x[i-j];\n        for (j = 0; j &lt; i; j++)\n            y[i] = y[i] - a[j+1] * y[i-j-1];\n    }\n    for (i = ord + 1; i &lt; np + 1; i++) {\n        y[i] = 0.0;\n        for (j = 0; j &lt; ord + 1; j++)\n            y[i] = y[i] + b[j] * x[i-j];\n        for (j = 0; j &lt; ord; j++)\n            y[i] = y[i] - a[j+1] * y[i-j-1];\n    }\n}\n\nmain()\n{\n    float x[NP]= { -84.786,...};\n    float y[NP], a[ORDER+1], b[ORDER+1];\n    int i, j;\n    b[0] = -0.005574892;\n    // [...]\n    b[65] = -0.005574892;\n\n    a[0] = 0;\n    // [...]\n    a[65] = 0;\n\n    filter(ORDER, a, b, NP, x, y);\n\n    for (i = 0; i &lt; NP; i++)\n    {\n        x[i]=y[NP-i-1];\n    }\n    filter(ORDER,a,b,NP,x,y);\n    for (i=0;i&lt;NP;i++)\n    {\n        x[i] = y[NP-i-1];\n    }\n    for (i = 0; i &lt; NP; i++)\n    {\n        y[i] = x[i];\n    }\n    for (i = 0; i &lt; NP; i++)\n    {\n        //printf(\"%f\\n\",y[i]);\n        inp[i]=y[i];\n    }\n\n    double MA,MI,MOY;\n    float ectt;\n\n    MI = calcul__min(inp,640);\n    MA = calcul__max(inp,640);\n    MOY = calcul__moy(inp,640);\n    ectt = calcul__ect(inp,640);\n\n    printf(\"Le min de tableau est \"\"%f\\n\",MI);\n    printf(\"Le max de tableau est \"\"%f\\n\",MA);\n    printf (\"la moyenne est de \"\"%g\\n\", MOY);\n    printf (\"ecart type est \"\"%g\\n\", ectt);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 8, "creation_date": 1503483264, "post_id": 45836880, "comment_id": 78630734, "body": "you are missing the <code>return</code> statement."}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 7, "creation_date": 1503483310, "post_id": 45836880, "comment_id": 78630774, "body": "also include <code>stdbool.h</code> to use <code>bool</code>."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 6, "creation_date": 1503483392, "post_id": 45836880, "comment_id": 78630833, "body": "<code>main</code> doesn&#39;t return a <code>bool</code>. Considering the number of issues you have in this short program, you are better off reading your book first."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1503483419, "post_id": 45836880, "comment_id": 78630851, "body": "I&#39;m confused...unclear or too broad?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1503483424, "post_id": 45836880, "comment_id": 78630856, "body": "The C specification says that <code>main</code> must return an <code>int</code>."}, {"owner": {"reputation": 103, "user_id": 8011349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GxptF.png?s=128&g=1", "display_name": "JonOsterman", "link": "https://stackoverflow.com/users/8011349/jonosterman"}, "edited": false, "score": 0, "creation_date": 1503483851, "post_id": 45836880, "comment_id": 78631170, "body": "Tried with return, it did the same Didn&#39;t know that main can&#39;t return something else than int, thanks"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1503484917, "post_id": 45836880, "comment_id": 78631889, "body": "You can simplify <code>(((nb &#47; 2) * 2) != nb)</code> to <code>nb &amp; 1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1503484152, "post_id": 45837068, "comment_id": 78631383, "body": "Answer is missing an important bit about <code>stdbool.h</code>."}], "tags": [], "owner": {"reputation": 91, "user_id": 8505558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fcc633c378c0e3ef3e82299f79659e9?s=128&d=identicon&r=PG&f=1", "display_name": "Arman Papikyan", "link": "https://stackoverflow.com/users/8505558/arman-papikyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1503483724, "creation_date": 1503483724, "answer_id": 45837068, "question_id": 45836880, "link": "https://stackoverflow.com/questions/45836880/return-boolean-with-ternary-operator/45837068#45837068", "title": "Return boolean with ternary operator", "body": "<p>Well, first of all I want to say, that instead of this,</p>\n\n<pre><code>(((nb / 2) * 2) != nb) ? false : true; \n</code></pre>\n\n<p>you could always use</p>\n\n<pre><code>!(((nb / 2) * 2) != nb)\n</code></pre>\n\n<p>(ofc == nb will also do the trick)</p>\n\n<p>If the compiler doesnt recognize the true and false, than most likely you have some problems with your code, maybe u've broken the syntax or made somehow compiler go crazy and it throws this kind of errors. Dont see any other reaso</p>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 4, "last_activity_date": 1503484240, "last_edit_date": 1503484240, "creation_date": 1503483963, "answer_id": 45837149, "question_id": 45836880, "link": "https://stackoverflow.com/questions/45836880/return-boolean-with-ternary-operator/45837149#45837149", "title": "Return boolean with ternary operator", "body": "<p>You have a number of issues in your code.</p>\n\n<p>First of all you miss the <code>return</code> keyword here:</p>\n\n<pre><code>return (((nb / 2) * 2) != nb) ? false : true;\n^^^^^^\n</code></pre>\n\n<p>Besides that you don't need a ternary operator as the first part is all ready a bool. So simply do:</p>\n\n<pre><code>return (((nb / 2) * 2) == nb);\n^^^^^^                 ^^\n</code></pre>\n\n<p>Further you don't have a <code>return</code> statement in the code when <code>ac</code> isn't equal 2.</p>\n\n<p>Also you should include <code>stdbool.h</code> to use <code>bool</code>.</p>\n\n<p>Finally the <code>main</code> function must return an <code>int</code> - not a <code>bool</code>.</p>\n\n<p>A rewrite of your code could be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdbool.h&gt;   // Include this to use bool\n\nbool foo(int ac, char **av)\n{\n  if (ac == 2)\n  {\n      int nb = atoi(av[1]);\n      return (((nb / 2) * 2) == nb); \n  }\n\n  return false;\n}\n\nint main(int ac, char **av)\n{\n    if (foo(ac, av))\n    {\n        printf(\"foo returned true\\n\");\n    }\n    else\n    {\n        printf(\"foo returned false\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8011349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GxptF.png?s=128&g=1", "display_name": "JonOsterman", "link": "https://stackoverflow.com/users/8011349/jonosterman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1622, "favorite_count": 0, "accepted_answer_id": 45837149, "answer_count": 2, "score": -4, "last_activity_date": 1503491086, "creation_date": 1503483219, "last_edit_date": 1503491086, "question_id": 45836880, "link": "https://stackoverflow.com/questions/45836880/return-boolean-with-ternary-operator", "title": "Return boolean with ternary operator", "body": "<p>I made this code to know if my input is a multiple of two</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nbool    main(int ac, char **av)\n{\n  if (ac == 2)\n  {\n      int nb = atoi(av[1]);\n      (((nb / 2) * 2) != nb) ? false : true; \n  }\n}\n</code></pre>\n\n<p>But gcc is returning me this : </p>\n\n<pre><code>test.c:5:1: error: unknown type name \u2018bool\u2019\nbool main(int ac, char **av)\n^\ntest.c: In function \u2018main\u2019:\ntest.c:10:32: error: \u2018false\u2019 undeclared (first use in this function)\n   (((nb / 2) * 2) != nb) ? false : true;\n                            ^\ntest.c:10:32: note: each undeclared identifier is reported only once for each function it appears in\ntest.c:10:40: error: \u2018true\u2019 undeclared (first use in this function)\n   (((nb / 2) * 2) != nb) ? false : true;\n</code></pre>\n\n<p>I'm under <em>Ubuntu bash for Windows</em> (I haven't access to any Linux now)</p>\n\n<p>I don't understand why I can't use <strong>bool</strong> type for my function, or why '<strong>false</strong>' and '<strong>true</strong>' aren't recognised</p>\n"}, {"tags": ["c", "arm", "gdb"], "comments": [{"owner": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1503483216, "post_id": 45836773, "comment_id": 78630709, "body": "does <code>(gdb) info all-registers</code> work?"}, {"owner": {"reputation": 327, "user_id": 4757525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/826402520746688/picture?type=large", "display_name": "Victor Signaevskyi", "link": "https://stackoverflow.com/users/4757525/victor-signaevskyi"}, "reply_to_user": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1503483341, "post_id": 45836773, "comment_id": 78630801, "body": "No, it will give a lot of registers with mysterious names, but there is no spsr_el3 register."}, {"owner": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1503483521, "post_id": 45836773, "comment_id": 78630910, "body": "Interesting. I&#39;m currently out of office so I cannot try on my devboards. Hopefully someone else will step in :-)"}, {"owner": {"reputation": 327, "user_id": 4757525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/826402520746688/picture?type=large", "display_name": "Victor Signaevskyi", "link": "https://stackoverflow.com/users/4757525/victor-signaevskyi"}, "reply_to_user": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1503483721, "post_id": 45836773, "comment_id": 78631065, "body": "I got it. Thanks for trying to help me :)"}, {"owner": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1503483775, "post_id": 45836773, "comment_id": 78631113, "body": "BTW, which arm core?"}, {"owner": {"reputation": 327, "user_id": 4757525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/826402520746688/picture?type=large", "display_name": "Victor Signaevskyi", "link": "https://stackoverflow.com/users/4757525/victor-signaevskyi"}, "reply_to_user": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1503484360, "post_id": 45836773, "comment_id": 78631529, "body": "The cores are ARM Cortex-A57 and ARM Cortex-A53."}], "owner": {"reputation": 327, "user_id": 4757525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/826402520746688/picture?type=large", "display_name": "Victor Signaevskyi", "link": "https://stackoverflow.com/users/4757525/victor-signaevskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 343, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1503483015, "creation_date": 1503482958, "last_edit_date": 1503483015, "question_id": 45836773, "link": "https://stackoverflow.com/questions/45836773/how-to-print-value-for-the-specific-registers-in-gdb", "title": "How to print value for the specific registers in GDB?", "body": "<p>Does anybody know how to print content of the scr_el3 register via GDB?\nIt is for the ARM platform.</p>\n\n<p>The dump of assembler code is given for example below:</p>\n\n<pre><code>   0x0000000000004394 &lt;+20&gt;:    msr     scr_el3, x18\n   0x0000000000004398 &lt;+24&gt;:    msr     spsr_el3, x16\n   0x000000000000439c &lt;+28&gt;:    msr     elr_el3, x17\n</code></pre>\n\n<p>I've tried:</p>\n\n<pre><code>(gdb) print $pc\n$10 = (void (*)()) 0x43a0 &lt;el3_exit+32&gt;\n(gdb) print $spsr_el3\n$11 = void\n</code></pre>\n\n<p>but it doesn't help.</p>\n"}, {"tags": ["c++", "c", "gcc", "g++"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1503482771, "post_id": 45836671, "comment_id": 78630379, "body": "For starters I recommend you use the <i>correct tags</i> for your question. C or C++? You can&#39;t have both."}, {"owner": {"reputation": 694, "user_id": 6528719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyH70.jpg?s=128&g=1", "display_name": "Dinesh Gowda", "link": "https://stackoverflow.com/users/6528719/dinesh-gowda"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1503482825, "post_id": 45836671, "comment_id": 78630432, "body": "the file is being converted from c to cpp. so i used both."}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503483545, "post_id": 45836856, "comment_id": 78630927, "body": "<code>basename</code> is a standard function so seems odd that they&#39;ve tried redefining it...or maybe they&#39;ve just picked a poor choice in function name"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1503483724, "post_id": 45836856, "comment_id": 78631069, "body": "Code in question is valid C, so there are no classes or overloads. The errors are elsewhere."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503483807, "post_id": 45836856, "comment_id": 78631139, "body": "@ChrisTurner they didn&#39;t try to redefine basename."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1503484543, "post_id": 45836856, "comment_id": 78631650, "body": "@n.m. first line in the error output says otherwise"}], "tags": [], "owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "is_accepted": false, "score": 0, "last_activity_date": 1503483159, "creation_date": 1503483159, "answer_id": 45836856, "question_id": 45836671, "link": "https://stackoverflow.com/questions/45836671/how-to-resolve-ambiguity-error-in-c-after-changing-my-file-extension-from-c-to/45836856#45836856", "title": "How to resolve ambiguity error in C++ after changing my file extension from c to cpp?", "body": "<pre><code>char* basename(const char*)\n\nconst char* basename(const char*)\n</code></pre>\n\n<p>Imagine what happens if you call the function like that:</p>\n\n<pre><code>basename(\"test\");\n</code></pre>\n\n<p>Will the result now be a <code>const char*</code> or <code>char*</code> ? Should the compiler generate a pseudo-random number and choose between them ?</p>\n\n<p>If you have a class you can do it like that:</p>\n\n<pre><code>class Test\n{\npublic:\n    char* basename(const char*);\n    const char* basename(const char*) const; //Assure that nothing in the class changes (except mutable)\n};\n</code></pre>\n\n<p>If you don't, then choose between one overload and throw the other one in your recycle bin.<br>\nThis is C++, not pure C.</p>\n"}, {"tags": [], "owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "is_accepted": true, "score": 1, "last_activity_date": 1503483446, "creation_date": 1503483446, "answer_id": 45836975, "question_id": 45836671, "link": "https://stackoverflow.com/questions/45836671/how-to-resolve-ambiguity-error-in-c-after-changing-my-file-extension-from-c-to/45836975#45836975", "title": "How to resolve ambiguity error in C++ after changing my file extension from c to cpp?", "body": "<p>C++ has different type-checking rules than C (at least than older \"C\").  It doesn't by default allow you to \"get away\" with things that C did.  </p>\n\n<p>You need to start learning how to interpret output errors.  Go open up \"address2lineutil.cpp\".  Go to line 74.  Look at the type being passed.  Undoubtedly it is type \"void*\".  But what is needed is type asymbol**.  Are you sure that what is being passed really <em>is</em> type asymbol**?  If so, you could just plain reinterpret_cast it.  </p>\n\n<p>In the same file, go to line 252.  You have a const char* and are trying to pass it (to a function probably) that wants char*.  A lot of older C functions require char* even though they don't change the string passed to them.  If you are certain this is the case, you could just const_cast it.</p>\n\n<p>The above is merely a description of what you <em>can</em> do to make this compile.  As to what you truly <em>should</em> do, that I cannot tell you because I don't know your code.  Perhaps that function in line 252 that wants a \"char*\" can have it's signature changed to take a const char*?  Or, on the other hand, if it actually  changes the string it's given, then you should <em>not</em> just cast, but instead should create a non-const string buffer and pass that.  </p>\n\n<p>Really, what you <em>should</em> do is beyond the scope of this answer.  </p>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1503510416, "last_edit_date": 1503510416, "creation_date": 1503492784, "answer_id": 45840309, "question_id": 45836671, "link": "https://stackoverflow.com/questions/45836671/how-to-resolve-ambiguity-error-in-c-after-changing-my-file-extension-from-c-to/45840309#45840309", "title": "How to resolve ambiguity error in C++ after changing my file extension from c to cpp?", "body": "<ol>\n<li>On redefinition of basename. This particular bug is in libiberty.h which isn't your code but from some third-party package. Update to a newer version of the package or fix it yourself. The easiest way is to just remove the bad redefinition from libiberty.h.</li>\n<li>On invalid conversion. In C <code>void*</code> can be implicitly converted to another pointer type, but not in C++. You need to insert a cast.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 5459, "user_id": 3553031, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b72880023e6290ffd3bf5623ae79bebc?s=128&d=identicon&r=PG&f=1", "display_name": "user3553031", "link": "https://stackoverflow.com/users/3553031/user3553031"}, "is_accepted": false, "score": 1, "last_activity_date": 1503607590, "creation_date": 1503607590, "answer_id": 45870604, "question_id": 45836671, "link": "https://stackoverflow.com/questions/45836671/how-to-resolve-ambiguity-error-in-c-after-changing-my-file-extension-from-c-to/45870604#45870604", "title": "How to resolve ambiguity error in C++ after changing my file extension from c to cpp?", "body": "<p>There's more to converting a program from C to C++ than simply changing the file name suffix and the compiler command that you use.  For instance, <code>stdlib.h</code>, <code>stdio.h</code> and <code>string.h</code> have been deprecated in C++ since 1998.  Instead, you should use <code>cstdlib</code>, <code>cstdio</code>, and <code>cstring</code>; then you can access their contents from the \"<code>std</code>\" namespace.  That should address your <code>basename</code> problem.</p>\n"}], "owner": {"reputation": 694, "user_id": 6528719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyH70.jpg?s=128&g=1", "display_name": "Dinesh Gowda", "link": "https://stackoverflow.com/users/6528719/dinesh-gowda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 1, "accepted_answer_id": 45836975, "answer_count": 4, "score": 0, "last_activity_date": 1503607590, "creation_date": 1503482675, "last_edit_date": 1503485000, "question_id": 45836671, "link": "https://stackoverflow.com/questions/45836671/how-to-resolve-ambiguity-error-in-c-after-changing-my-file-extension-from-c-to", "title": "How to resolve ambiguity error in C++ after changing my file extension from c to cpp?", "body": "<p>I changed the extension of my file <code>address2lineutil</code> from C to CPP.</p>\n\n<p>When I was compiling with GCC with <code>.c</code> extension it compiled properly and worked fine. After I changed its extension to <code>.cpp</code> it's throwing these errors:</p>\n\n<pre><code>./../include/libiberty.h:112:64: error: new declaration 'char* basename(const char*)'\nIn file included from sysdep.h:48:0,\n                 from address2lineutil.cpp:5:\n/usr/include/string.h:603:28: error: ambiguates old declaration 'const char* basename(const char*)'\n\naddress2lineutil.cpp: In function 'void slurp_symtab(bfd*)':\naddress2lineutil.cpp:74:26: error: invalid conversion from 'void*' to 'asymbol** {aka bfd_symbol**}' [-fpermissive]\naddress2lineutil.cpp: In function 'void translate_addresses(bfd*, asection*)':\naddress2lineutil.cpp:252:32: error: invalid conversion from 'const char*' to 'char*' [-fpermissive]\n</code></pre>\n\n<p>My address2lineutil.cpp headers:</p>\n\n<pre><code>       #include \"sysdep.h\"\n        #include \"bfd.h\"\n        #include \"getopt.h\"\n        #include \"libiberty.h\"\n        #include \"demangle.h\"\n        #include \"bucomm.h\"\n        #include \"elf-bfd.h\"\n        #include \"address2lineutil.h\"\n        #include &lt;string.h&gt;\n        #include &lt;execinfo.h&gt;\n        #include &lt;stdio.h&gt;\n        #include &lt;stdlib.h&gt;\n        #include &lt;dirent.h&gt;\n        #include &lt;unistd.h&gt;\n\n    static bfd_boolean unwind_inlines;  /* -i, unwind inlined functions. */\n    static bfd_boolean with_addresses;  /* -a, show addresses.  */\n    static bfd_boolean with_functions;  /* -f, show function names.  */\n    static bfd_boolean do_demangle;     /* -C, demangle names.  */\n    static bfd_boolean pretty_print;    /* -p, print on one line.  */\n    static bfd_boolean base_names;      /* -s, strip directory names.  */\n\n    static int naddr;       /* Number of addresses to process.  */\n    static char **addr;     /* Hex addresses to process.  */\n    static asymbol **syms;      /* Symbol table.  */\n\nstatic void slurp_symtab (bfd *);\nstatic void find_address_in_section (bfd *, asection *, void *);\nstatic void find_offset_in_section (bfd *, asection *);\nstatic void translate_addresses (bfd *, asection *);\n</code></pre>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1503482820, "post_id": 45836643, "comment_id": 78630421, "body": "You can only concatenate <i>strings</i>. <code>(10)</code> is not a string. Next time you have problem with macros, ask the compiler to stop after preprocessing you so you can see what it has expanded the macros as."}, {"owner": {"reputation": 887, "user_id": 1757475, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/81b2e2174322adc0c63695cae3c7b605?s=128&d=identicon&r=PG", "display_name": "ndarkness", "link": "https://stackoverflow.com/users/1757475/ndarkness"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1503482918, "post_id": 45836643, "comment_id": 78630491, "body": "@Someprogrammerdude thanks, then I can make the string using <code>#define EXP 10</code> but I won&#39;t be able to use that define for a numeric usage, right?"}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1503482930, "post_id": 45836643, "comment_id": 78630501, "body": "You are probably looking for the <code>*</code> specifier <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/io/c/fprintf</a>."}], "answers": [{"comments": [{"owner": {"reputation": 887, "user_id": 1757475, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/81b2e2174322adc0c63695cae3c7b605?s=128&d=identicon&r=PG", "display_name": "ndarkness", "link": "https://stackoverflow.com/users/1757475/ndarkness"}, "edited": false, "score": 0, "creation_date": 1503483000, "post_id": 45836759, "comment_id": 78630554, "body": "Thanks @unwind, so as last step <code>#define LOG_FLOAT_MARKER   JOIN2(LOG_FLOAT, EXP, &quot;d&quot;)</code> would be better?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 887, "user_id": 1757475, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/81b2e2174322adc0c63695cae3c7b605?s=128&d=identicon&r=PG", "display_name": "ndarkness", "link": "https://stackoverflow.com/users/1757475/ndarkness"}, "edited": false, "score": 1, "creation_date": 1503483069, "post_id": 45836759, "comment_id": 78630596, "body": "@ndarkness Sure, or rename the <code>D</code> to something else, or just hard-code it."}, {"owner": {"reputation": 887, "user_id": 1757475, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/81b2e2174322adc0c63695cae3c7b605?s=128&d=identicon&r=PG", "display_name": "ndarkness", "link": "https://stackoverflow.com/users/1757475/ndarkness"}, "edited": false, "score": 0, "creation_date": 1503483517, "post_id": 45836759, "comment_id": 78630907, "body": "Hi @unwind, it seems not to work if I print <code>LOG_FLOAT_MARKER</code> i get <code>%s%d.%0(10)d</code> instead of <code>%s%d.%010d</code>"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 887, "user_id": 1757475, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/81b2e2174322adc0c63695cae3c7b605?s=128&d=identicon&r=PG", "display_name": "ndarkness", "link": "https://stackoverflow.com/users/1757475/ndarkness"}, "edited": false, "score": 1, "creation_date": 1503485003, "post_id": 45836759, "comment_id": 78631952, "body": "@ndarkness Did you fix <code>EXP</code> like I said in the first line of the answer? I added a fixed version to the code for clarity&#39;s sake."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 4, "last_activity_date": 1503484981, "last_edit_date": 1503484981, "creation_date": 1503482920, "answer_id": 45836759, "question_id": 45836643, "link": "https://stackoverflow.com/questions/45836643/how-can-i-concatenate-three-defines-type-string-number-string/45836759#45836759", "title": "How can I concatenate three defines type: string + number + string?", "body": "<p>You can't have <code>(10)</code> for <code>EXP</code>, since you don't want the parentheses to be part of the result.</p>\n\n<p>You must use stringification, and some hoop-jumping:</p>\n\n<pre><code>#define EXP 10\n\n#define JOIN(a, b, c)      a #b c\n#define JOIN2(a, b, c)     JOIN(a, b, c)\n#define LOG_FLOAT_MARKER   JOIN2(LOG_FLOAT, EXP, D)\n</code></pre>\n\n<p>Also, I think using a preprocessor symbol named just <code>D</code> is asking for trouble.</p>\n"}, {"comments": [{"owner": {"reputation": 887, "user_id": 1757475, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/81b2e2174322adc0c63695cae3c7b605?s=128&d=identicon&r=PG", "display_name": "ndarkness", "link": "https://stackoverflow.com/users/1757475/ndarkness"}, "edited": false, "score": 0, "creation_date": 1503483757, "post_id": 45837006, "comment_id": 78631097, "body": "Thanks @ZDF but I don&#39;t want to use printf for matters of optimization"}], "tags": [], "owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "is_accepted": false, "score": 1, "last_activity_date": 1503483563, "creation_date": 1503483563, "answer_id": 45837006, "question_id": 45836643, "link": "https://stackoverflow.com/questions/45836643/how-can-i-concatenate-three-defines-type-string-number-string/45837006#45837006", "title": "How can I concatenate three defines type: string + number + string?", "body": "<p>I'm not sure that I understand what you're trying to do. You are probably looking for <code>*</code> specifier:</p>\n\n<pre><code>printf( \"%s%d.%0*d\", \"string\", 1, 1, 1 ); // output: string1.1\nprintf( \"%s%d.%0*d\", \"string\", 1, 2, 2 ); // output: string1.02\nprintf( \"%s%d.%0*d\", \"string\", 1, 3, 3 ); // output: string1.003\n</code></pre>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\">this</a> for a full explanation on <code>*</code>.</p>\n"}], "owner": {"reputation": 887, "user_id": 1757475, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/81b2e2174322adc0c63695cae3c7b605?s=128&d=identicon&r=PG", "display_name": "ndarkness", "link": "https://stackoverflow.com/users/1757475/ndarkness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 45836759, "answer_count": 2, "score": 1, "last_activity_date": 1503484981, "creation_date": 1503482611, "last_edit_date": 1503482811, "question_id": 45836643, "link": "https://stackoverflow.com/questions/45836643/how-can-i-concatenate-three-defines-type-string-number-string", "title": "How can I concatenate three defines type: string + number + string?", "body": "<p>I would like to construnct the following string using defines</p>\n\n<pre><code>#define LOG_FLOAT_MARKER \"%s%d.%010d\"\n</code></pre>\n\n<p>So far I have </p>\n\n<pre><code>  #define EXP (10)\n  #define LOG_FLOAT \"%s%d.%0\"\n  #define D \"d\"\n</code></pre>\n\n<p>I am trying to create a string like this</p>\n\n<pre><code>#define LOG_FLOAT_MARKER LOG_FLOAT EXP D \n</code></pre>\n\n<p>but not getting the expected output, some hint?</p>\n"}, {"tags": ["c", "arrays", "pointers", "types"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1503481904, "post_id": 45836300, "comment_id": 78629747, "body": "What happened when you tried the code? That should be the first step. If it doesn&#39;t work then ask a question based on that. Note that void has no size, so incrementing a void pointer isn&#39;t really something that is possible. On the other hand char is defined as size 1. This also depends on the architecture, memory management unit etc etc so is quite broad topic."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503481953, "post_id": 45836300, "comment_id": 78629776, "body": "You have many invalid operation. (<code>*pointer</code> : dereferencing <code>void *</code> pointer, <code>pointer++</code> and <code>pointer += 2</code> : pointer of type <code>void *</code> used in arithmetic)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1503481969, "post_id": 45836300, "comment_id": 78629792, "body": "If you want a <code>char</code> array, use <code>char*</code> throughout. There&#39;s no need to cast it to <code>void*</code> and back."}, {"owner": {"reputation": 5461, "user_id": 5366891, "user_type": "registered", "profile_image": "https://graph.facebook.com/718933983/picture?type=large", "display_name": "Daniel Tran", "link": "https://stackoverflow.com/users/5366891/daniel-tran"}, "edited": false, "score": 1, "creation_date": 1503482043, "post_id": 45836300, "comment_id": 78629860, "body": "Have you tried the code, it should not work. You can&#39;t dereference a void pointer nor using arithmetical operator on that."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 5461, "user_id": 5366891, "user_type": "registered", "profile_image": "https://graph.facebook.com/718933983/picture?type=large", "display_name": "Daniel Tran", "link": "https://stackoverflow.com/users/5366891/daniel-tran"}, "edited": false, "score": 2, "creation_date": 1503482153, "post_id": 45836300, "comment_id": 78629947, "body": "@DanielTran surprisingly, with gcc extension enabled, it will."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503481979, "post_id": 45836358, "comment_id": 78629802, "body": "So if i understood it right, i should just skip the void* step and cast the pointer as char* instead?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 1, "creation_date": 1503482112, "post_id": 45836358, "comment_id": 78629905, "body": "@CLover32 Yes, because, any object can be accessed legally via a pointer to character type."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503482944, "post_id": 45836358, "comment_id": 78630506, "body": "@CLover32 I have updated with some more info, please check the update."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1503482694, "last_edit_date": 1503482694, "creation_date": 1503481871, "answer_id": 45836358, "question_id": 45836300, "link": "https://stackoverflow.com/questions/45836300/reading-through-an-char-array-passed-as-void-with-pointer-incrementation-and-la/45836358#45836358", "title": "Reading through an char array passed as void* with pointer incrementation and later read as chars and other datatypes?", "body": "<p>UPDATE:</p>\n\n<p>in the updated code in the question</p>\n\n<pre><code>   uint16_t value1 = *(uint16_t*)pointer;\n</code></pre>\n\n<p>exactly <strong>violates <a href=\"https://stackoverflow.com/q/98650/2173917\">strict aliasing</a></strong>. It's invalid code.</p>\n\n<p>For more details, read the rest of the answer.</p>\n\n<hr>\n\n<p><em>Initial version:</em></p>\n\n<p>Technically, you are not allowed to dereference a <code>void</code> pointer in first place.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.5.3.2</p>\n\n<blockquote>\n  <p>[...] If the operand points to a function, the result is\n  a function designator; if it points to an object, the result is an lvalue designating the\n  object. If the operand has type \u2018\u2018pointer to type\u2019\u2019, the result has type \u2018\u2018type\u2019\u2019. [...]</p>\n</blockquote>\n\n<p>but, a <code>void</code> is a forever-incomplete type, so the storage size is not known, hence the dereference is not possible.</p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Pointer-Arith.html#Pointer-Arith\" rel=\"nofollow noreferrer\">A gcc extension</a> allows you to dereference the <code>void</code> pointer and perform arithmatic operation on them, considering it as alias for a <code>char</code> pointer, but better, do not reply on this. Please cast the pointer to either a character type or the actual type (or compatible) and then, go ahead with dereference. </p>\n\n<p>That said, if you cast the pointer itself to some other type than a character type or an incompatible type with the original pointer, you'll violate strict aliasing rule.</p>\n\n<p>As mentioned in chapter \u00a76.5,</p>\n\n<blockquote>\n  <p>An object shall have its stored value accessed only by an lvalue expression that has one of\n  the following types</p>\n  \n  <p>\u2014 a type compatible with the effective type of the object,</p>\n  \n  <p>\u2014 a qualified version of a type compatible with the effective type of the object,</p>\n  \n  <p>\u2014 a type that is the signed or unsigned type corresponding to the effective type of the\n  object,</p>\n  \n  <p>\u2014 a type that is the signed or unsigned type corresponding to a qualified version of the\n  effective type of the object,</p>\n  \n  <p>\u2014 an aggregate or union type that includes one of the aforementioned types among its\n  members (including, recursively, a member of a subaggregate or contained union), or</p>\n  \n  <p>\u2014 a character type.</p>\n</blockquote>\n\n<p>and, chapter \u00a76.3.2.3</p>\n\n<blockquote>\n  <p>[....] When a pointer to an object is converted to a pointer to a character type,\n  the result points to the lowest addressed byte of the object. Successive increments of the\n  result, up to the size of the object, yield pointers to the remaining bytes of the object.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1503482067, "post_id": 45836401, "comment_id": 78629887, "body": "I don&#39;t think OP is casting / assigning the pointer to any different type."}, {"owner": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503482113, "post_id": 45836401, "comment_id": 78629907, "body": "So it is not possible to read an char array as a different type?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1503482125, "post_id": 45836401, "comment_id": 78629921, "body": "@SouravGhosh indeed, but given the string contains two <code>0</code> bytes, that&#39;s probably what he <b>meant</b> to do :o"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503482179, "post_id": 45836401, "comment_id": 78629965, "body": "@CLover32 it&#39;s possible but forbidden. Btw, what you probably <i>meant</i> to do was something like <code>uint16_t value1 = *((uint16_t *)pointer);</code>."}, {"owner": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503482331, "post_id": 45836401, "comment_id": 78630077, "body": "@FelixPalmen you&#39;re right, im gonna fix it fast. And may i ask why it is forbidden?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503482996, "post_id": 45836401, "comment_id": 78630549, "body": "<code>which might do what you expect, but is technically undefined behaviour.</code> Technically is not - formally yes.  @Felix Palmen should provide any example of the actual UB in any practical situation - but not intentionly the abuse of use of types and pointers. So example like char <code>*x=&quot;hello world&quot;; void *y = x; float z = *(float *)y;</code> is not allowed. As we agree in the another topic I am too dumb to understand more abstract implications"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503483147, "post_id": 45836401, "comment_id": 78630660, "body": "@PeterJ_01 go do your own research. There are plenty of examples how violating strict aliasing could go wrong (and actually <b>went</b> wrong)."}, {"owner": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503485583, "post_id": 45836401, "comment_id": 78632373, "body": "@FelixPalmen So just to get it straight. I can not read lets say an int* from a random index in a char array, because i cant change where a void*/char* pointer is pointing. But i can still read an char[4] as an uint32_t? (i&#39;m sorry but english isn&#39;t my best language)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503486279, "post_id": 45836401, "comment_id": 78632872, "body": "@CLover32 I don&#39;t understand your comment. Of course you can increment a pointer to point somewhere in the middle of an array (even one past the end is allowed). You just can&#39;t increment a <code>void *</code>, as <code>void</code> doesn&#39;t have a size. And you can&#39;t access an object through a pointer of a different type, except <code>char *</code>."}, {"owner": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503486750, "post_id": 45836401, "comment_id": 78633245, "body": "Okay, i think i got it. I can cast every integer* as an char* and void* but not the other way around. So is it possible to do make an uint32_t* and cast it as an char* and then use it as an char array of size 4?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503486823, "post_id": 45836401, "comment_id": 78633314, "body": "@CLover32 yes, that&#39;s perfectly fine. And the <code>memcpy()</code> method suggested in another answer (where you just copy the bytes of the representation to a variable of your target type) is fine as well, <b>as long as</b> you can make sure not to hit <i>trap representations</i>."}, {"owner": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503487278, "post_id": 45836401, "comment_id": 78633634, "body": "Thanks a lot. if i use memcpy() in the above example i could do it like memcpy(value1, &amp;input[1], 2)? and memcpy(value2, &amp;input[4], 4)?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1503483493, "last_edit_date": 1503483493, "creation_date": 1503481953, "answer_id": 45836401, "question_id": 45836300, "link": "https://stackoverflow.com/questions/45836300/reading-through-an-char-array-passed-as-void-with-pointer-incrementation-and-la/45836401#45836401", "title": "Reading through an char array passed as void* with pointer incrementation and later read as chars and other datatypes?", "body": "<p>This is wrong in two ways:</p>\n\n<ol>\n<li><p><code>void</code> is an <em>incomplete type</em> that <em>cannot be completed</em>. An <em>incomplete type</em> is a type without a known <em>size</em>. In order to do pointer arithmetics, the size must be known. The same is true for <em>dereferencing</em> a pointer. Some compilers attribute the size of a <code>char</code> to void, but that's an extension you should never rely on. Incrementing a pointer to <code>void</code> is wrong and can't work.</p></li>\n<li><p>What you have is an array of <code>char</code>. Accessing this array through a pointer of a different type violates <em>strict aliasing</em>, you're not allowed to do that.</p>\n\n<p>That's actually not what your current code <em>does</em> -- looking at this line:</p>\n\n<pre><code>uint32_t value2 = (int)*pointer; //should be 1802135552\n</code></pre>\n\n<p>You're just converting the <strong>single byte</strong> (assuming your pointer points to <code>char</code>, see my first point) to an <code>uint32_t</code>. What you probably <em>meant</em> is</p>\n\n<pre><code>uint32_t value2 = *(uint32_t *)pointer; //should be 1802135552\n</code></pre>\n\n<p>which <strong>might</strong> do what you expect, but is technically undefined behavior.</p></li>\n</ol>\n\n<p>The relevant reference for this second point is e.g. in <strong>\u00a76.5 p7</strong> in N1570, the latest draft for C11:</p>\n\n<blockquote>\n  <p>An object shall have its stored value accessed only by an lvalue expression that has one of\n  the following types:<br>\n  \u2014 a type compatible with the effective type of the object,<br>\n  \u2014 a qualified version of a type compatible with the effective type of the object,<br>\n  \u2014 a type that is the signed or unsigned type corresponding to the effective type of the\n  object,<br>\n  \u2014 a type that is the signed or unsigned type corresponding to a qualified version of the\n  effective type of the object,<br>\n  \u2014 an aggregate or union type that includes one of the aforementioned types among its\n  members (including, recursively, a member of a subaggregate or contained union), or<br>\n  \u2014 a character type.</p>\n</blockquote>\n\n<p>The reasoning for this very strict rule is <em>for example</em> that it enables compilers to do optimizations based on the assumption that two pointers of different types (except <code>char *</code>) can <strong>never</strong> alias. Other reasons include <em>alignment restrictions</em> on some platforms.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503483865, "post_id": 45836478, "comment_id": 78631176, "body": "might want to add that this <b>can</b> copy a trap representation, so you have to be sure about the bit pattern <code>pointer</code> points to. Otherwise good solution."}, {"owner": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "edited": false, "score": 0, "creation_date": 1503486192, "post_id": 45836478, "comment_id": 78632809, "body": "@aragaer But this doesn&#39;t work on parts of the char array? Like from index 1-5. Doesnt it copy from the start?"}, {"owner": {"reputation": 15176, "user_id": 390363, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/662dda87a8ad559dca5570b7786cf6fb?s=128&d=identicon&r=PG", "display_name": "aragaer", "link": "https://stackoverflow.com/users/390363/aragaer"}, "edited": false, "score": 0, "creation_date": 1503486394, "post_id": 45836478, "comment_id": 78632983, "body": "If you update <code>pointer</code> so that it points to correct byte it will work. Otherwise you can copy with any offset you want - <code>memcpy(&amp;result, pointer+1, sizeof(result));</code> will not be much different."}], "tags": [], "owner": {"reputation": 15176, "user_id": 390363, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/662dda87a8ad559dca5570b7786cf6fb?s=128&d=identicon&r=PG", "display_name": "aragaer", "link": "https://stackoverflow.com/users/390363/aragaer"}, "is_accepted": false, "score": 1, "last_activity_date": 1503482176, "creation_date": 1503482176, "answer_id": 45836478, "question_id": 45836300, "link": "https://stackoverflow.com/questions/45836300/reading-through-an-char-array-passed-as-void-with-pointer-incrementation-and-la/45836478#45836478", "title": "Reading through an char array passed as void* with pointer incrementation and later read as chars and other datatypes?", "body": "<p>Even if you fix your code to cast pointer to correct type (like int *) before dereferencing it, you might have problems with alignment. For example on some architectures you simply can not read an 4-byte int if it is not aligned to 4-byte word boundary.</p>\n\n<p>A solution which would definitely work is to use something like this:</p>\n\n<pre><code>int result;\nmemcpy(&amp;result, pointer, sizeof(result));\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8253524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee0342c18a45ccd42fc6cb0fef9d43?s=128&d=identicon&r=PG&f=1", "display_name": "CLover32", "link": "https://stackoverflow.com/users/8253524/clover32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1503484882, "creation_date": 1503481695, "last_edit_date": 1503484882, "question_id": 45836300, "link": "https://stackoverflow.com/questions/45836300/reading-through-an-char-array-passed-as-void-with-pointer-incrementation-and-la", "title": "Reading through an char array passed as void* with pointer incrementation and later read as chars and other datatypes?", "body": "<p>So to clear out misunderstandings from the title (not sure how to ask the question in the title) I want to read from a file(char array), pass it as an <code>void*</code> so i can read undependable of datatype by incrementing the pointer. So here's an simple example of what I want to do in C code:</p>\n\n<pre><code>char input[] = \"D\\0\\0Ckjh\\0\";\nchar* pointer = &amp;input[0];       //lets say 0x00000010 \nchar type1 = *pointer;           //should be 'D'\npointer += sizeof(char);         //0x00000020\nuint16_t value1 = *(uint16_t*)pointer; //should be 0\npointer += sizeof(uint16_t);     //0x00000040\nchar type2 = *pointer;           //should be 'C'\npointer += sizeof(char);         //0x00000050\nuint32_t value2 = *(uint32_t*)pointer; //should be 1802135552\n</code></pre>\n\n<p>This is just for educational purpose, so I would just like to know if it is possible or if there is a way to achieve the same goal or something alike. Also the speed of this would be nice to know. Would it be faster to just keep the array and just make bitshifting on the chars as you read them or is this actually faster?</p>\n\n<p>Edit: edit on the c code and changed void* to char*;</p>\n"}, {"tags": ["c", "linux", "gcc", "shared-libraries", "dlopen"], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 1013875, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cce50cb41e08f84235b3bffa81b24e94?s=128&d=identicon&r=PG", "display_name": "saeed hardan", "link": "https://stackoverflow.com/users/1013875/saeed-hardan"}, "edited": false, "score": 0, "creation_date": 1503823440, "post_id": 45874937, "comment_id": 78765011, "body": "Thanks. there were some problems with symlinks . i just verified with tar to preserve symlinks and cp with -P ."}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1503870039, "post_id": 45874937, "comment_id": 78777882, "body": "Copying <code>ld-linux</code> from one machine to another is the <i>worst</i> possible advice ever. Either the original and the source are identical, in which case the operation is a no-op, or they are not, in which case the copied to machine will become trashed -- literally no commands will work -- and will require restoring from a rescue disk."}], "tags": [], "owner": {"reputation": 59, "user_id": 8508972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bb91a81ee385402e61da0db98543f56?s=128&d=identicon&r=PG&f=1", "display_name": "Ace", "link": "https://stackoverflow.com/users/8508972/ace"}, "is_accepted": true, "score": 0, "last_activity_date": 1503638888, "creation_date": 1503638888, "answer_id": 45874937, "question_id": 45836019, "link": "https://stackoverflow.com/questions/45836019/shared-library-undefined-symbol/45874937#45874937", "title": "Shared Library undefined symbol", "body": "<p>You can check /lib/libsdkpolicer.so.1 with ldd command, maybe the libpolicercomlib.so file which you copy just is a link file, and check it on your machine without yum GCC. If everything is correct\uff0c you can copy the /lib64/ld-linux-x86-64.so.2 loader from your complie machine to your new machine(backup it before) and try it.</p>\n"}], "owner": {"reputation": 465, "user_id": 1013875, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cce50cb41e08f84235b3bffa81b24e94?s=128&d=identicon&r=PG", "display_name": "saeed hardan", "link": "https://stackoverflow.com/users/1013875/saeed-hardan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "accepted_answer_id": 45874937, "answer_count": 1, "score": 0, "last_activity_date": 1503638888, "creation_date": 1503480975, "question_id": 45836019, "link": "https://stackoverflow.com/questions/45836019/shared-library-undefined-symbol", "title": "Shared Library undefined symbol", "body": "<p>Similar title question exist but not the same problem . \nI have two machines one with <strong>CentOS 7.3.1611</strong> and one with similar to CentOS you can say <strong>custom RedHat</strong> .<br>\ni have a SDK that i need to run on the custom machine but it doesn't have <strong>yum gcc</strong>.<br>\nso i had to compile and install the SDK on CentOS, after that i copied the result to the custom machine (shared libraries, scripts , binaries ...) in Order to run them there .<br>\nNaturally the SDK worked fine on CentOS, but on the custom machine while loading some of the drivers and other libraries fine , i got an error when loading a specific library as follow :  </p>\n\n<blockquote>\n  <p>dlopen (libsdkpolicerlib.so) failed: (/usr/local/bin/../lib/libsdkpolicer.so.1: undefined symbol: policer_validate_packet_type)  </p>\n</blockquote>\n\n<p>Notice there are three shared objects involved here :  </p>\n\n<ul>\n<li><strong>libsdkpolicerlib.so</strong> the one that dlopen tries to open </li>\n<li><strong>libsdkpolicer.so.1</strong> </li>\n<li><strong>libpolicercomlib.so</strong> that contains the symbol policer_validate_packet_type</li>\n</ul>\n\n<p>all of the shared object are in the same directory <strong>/usr/local/lib</strong> .<br>\n<strong>libpolicercomlib.so</strong> actually contains the symbol .  </p>\n\n<p>I have :  </p>\n\n<ul>\n<li>verified the ld.so.cache contains all of the above libraries . </li>\n<li>Also i have added /usr/local/lib to the LD_LIBRARY_PATH variable .  </li>\n<li>Executed ldconfig with \"-n\" with the path ...  </li>\n</ul>\n\n<p>I know this isn't the best way to do this sort of stuff, but this solution is temporary .  </p>\n\n<p>My question is what else do i have to verify in order for this to work ?<br>\nWhat am i missing here ?  </p>\n"}, {"tags": ["c++", "c", "comments"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1503480669, "post_id": 45835835, "comment_id": 78628817, "body": "Which language? The grammar of C++ is considerably more complex than C which makes it even harder in the former."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1503480674, "post_id": 45835835, "comment_id": 78628826, "body": "You need a parser for the C grammar to do this, at least. I doubt there&#39;s an entirely reliable way."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1503480745, "post_id": 45835835, "comment_id": 78628877, "body": "Question is, why do you need this? commened code is not compiled, anyway. Unless it&#39;s a huge chunk of code, there&#39;s not much point in removal. again, if it&#39;s a small block, a few lines, do it manually."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1503480766, "post_id": 45835835, "comment_id": 78628893, "body": "Have you tried any existing code &quot;beautifiers&quot; or reformatters that exist, for example <a href=\"https://clang.llvm.org/docs/ClangFormat.html\" rel=\"nofollow noreferrer\">clang-format</a>? They might be able to remove comments? <b><i>However</i></b> it would remove <i>all</i> comments."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1503480851, "post_id": 45835835, "comment_id": 78628943, "body": "&quot;is there a way&quot; - manually.  They&#39;re commented out already, so just remove them as you find them."}, {"owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "edited": false, "score": 0, "creation_date": 1503480892, "post_id": 45835835, "comment_id": 78628967, "body": "We have a large legacy code base with lots of code like the example above. I know that this is not a performance issue, but a readability one."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 5, "creation_date": 1503480920, "post_id": 45835835, "comment_id": 78628992, "body": "You could use some <i>heuristic</i> regular expressions (line ending with <code>;</code>, line starting with <code>{</code>, etc) but this <b>will</b> have <i>false positives</i>. For the future, better use some VCS (like <code>git</code>) and never check in code with commented code lines... they&#39;re unnecessary with a proper history."}, {"owner": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "edited": false, "score": 2, "creation_date": 1503481040, "post_id": 45835835, "comment_id": 78629094, "body": "@FelixPalmen Unfortunately a lot of people do not get this even if a VCS is in use."}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 6, "creation_date": 1503481099, "post_id": 45835835, "comment_id": 78629140, "body": "As some coments suggest I think a completely automated and 100% reliable tool is non-existent and very hard to create. My best suggestion is to write a shell-script or python-script that uses <code>awk</code>, <code>sed</code> or similar to do a regular expression parsing of all files and lines, and then print detected comment lines with some lines of context before asking for user permission to remove the comments in all cases. This will of course take some time, but to me sounds like the most feasible solution if parsing all files manually is not an option."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8377060"}, "reply_to_user": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503484822, "post_id": 45835835, "comment_id": 78631835, "body": "@HansPetterTaugb&#248;lKragset all we need is a small shell"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1503495174, "post_id": 45835835, "comment_id": 78639863, "body": "MISRA-C has a requirement stating that production code may not contain any code which was &quot;commented out&quot;. Because of this, most MISRA-C checkers implemented a way to find &quot;commented out code&quot;. So running such a tool might be a good way to spot such code. As for automatically removing it... well I&#39;m not so sure I would want that, sounds like a scary feature."}], "answers": [{"comments": [{"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503486055, "post_id": 45836944, "comment_id": 78632723, "body": "As mentioned in the comments on the question, this <i>will</i> result in <i>false positives</i> - comments with <code>;</code> in them will be removed even though they may be desirable, real comments."}, {"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 0, "creation_date": 1503488162, "post_id": 45836944, "comment_id": 78634295, "body": "This also produces false negatives. Lines such as <code>if (condition) {</code> and the corresponding <code>}</code> will not be removed. I guess it&#39;s less of a problem than deleting actual comments but I wanted to point it out in case you missed that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8377060"}, "reply_to_user": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 0, "creation_date": 1503493617, "post_id": 45836944, "comment_id": 78638544, "body": "@patatahooligan i know that, i have written the code pretty quickly. in that case we&#39;d wanna delete the lines that contain <code>&#47;&#47;</code> and <code>if</code>, it&#39;s all about how you want it to be done"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8377060"}, "is_accepted": true, "score": 0, "last_activity_date": 1503490852, "last_edit_date": 1503490852, "creation_date": 1503483353, "answer_id": 45836944, "question_id": 45835835, "link": "https://stackoverflow.com/questions/45835835/remove-code-which-is-commented-out-not-actual-commments/45836944#45836944", "title": "Remove code which is commented out not actual commments", "body": "<p>This really scratched my mind, so,</p>\n\n<p>I have written a small program in javascript real quick, which <strong>removes</strong> the lines that have <code>//</code> and <code>;</code> in a text just to show. </p>\n\n<p>You can write <em>your own</em> algorithm, and remove lines like that. For example, you can put <code>@</code> sign  to the lines you would like to get <strong>deleted</strong> and then run your program with it. You need to make your own algorithm or just a simple one like mine.</p>\n\n<p>Here is my js code: it deletes the rows and logs the result to the console as an <code>array</code> for example.\nYou should code a <em>program</em> like this or however you like.</p>\n\n<pre><code>&lt;html&gt;\n&lt;textarea id=\"txtArea\" rows=\"40\" cols=\"300\"&gt;\n// the function foo is doing foo\nvoid foo(){\n    // bar();\n     bar2();\n}\n&lt;/textarea&gt;\n\n&lt;/html&gt;\n&lt;script src=\"http://code.jquery.com/jquery-latest.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\n\nvar x = document.getElementById(\"txtArea\").value;\nvar lines = x.split(\"\\n\");\nvar count = lines.length;\n\nfor(var i =0; i&lt; lines.length; i++){\n\nif(lines[i].indexOf(\"//\")){\n\nconsole.log(\"haha\");\n\n}else{\n\n    if(lines[i].indexOf(\";\")){\n        lines[i] = \"\";\n    //remove row\n    }else{\n    }\n}\n}\ndocument.getElementById(\"txtArea\").value = lines;\nvar y;\n\nconsole.log(lines);\n\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "closed_date": 1503497800, "accepted_answer_id": 45836944, "answer_count": 1, "score": 2, "last_activity_date": 1503557375, "creation_date": 1503480554, "last_edit_date": 1503557375, "question_id": 45835835, "link": "https://stackoverflow.com/questions/45835835/remove-code-which-is-commented-out-not-actual-commments", "closed_reason": "Needs more focus", "title": "Remove code which is commented out not actual commments", "body": "<p>We have a large legacy code base with lots of code which is commented out and is now polluting our source code files. On the other hand we have real comments which I like to preserve. </p>\n\n<p>Is there a way to find comments in C/C++ which are source code and remove them in order to clean up the code base?</p>\n\n<p>Imagine the following code</p>\n\n<pre><code>// the function foo is doing foo\nvoid foo(){\n     // bar();\n     bar2();\n}\n</code></pre>\n\n<p>The old function bar() has been commented out and is no longer used. I like to have an automated way to remove the outdated source code but plain text comments should not be touched. Thus after the clean up the code would look like</p>\n\n<pre><code>// the function foo is doing foo\nvoid foo(){\n     bar2();\n}\n</code></pre>\n\n<p>I found <a href=\"http://www.commandlinefu.com/commands/view/8802/find-cc-source-code-comments\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://stackoverflow.com/questions/2394017/remove-comments-from-c-c-code\">that</a> to remove all comments. This is not what I like to do.</p>\n\n<p>Can <a href=\"http://clang.llvm.org/extra/clang-tidy/\" rel=\"nofollow noreferrer\">clang tidy</a> do this job?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1503478599, "post_id": 45834942, "comment_id": 78627219, "body": "Regular 4-byte <code>int</code>s should be okay for your problem. Your problem is that you store the occurrence of the number <code>x</code> in <code>a[x]</code>, but according to the link, each <code>x</code> (or each A\u1d62, as they put it) can be as big as 10\u2079, but your array has the dimension 10\u2075. (Hint: You don&#39;t need an array here, because you only need to keep track of the occurrences of the minium element.)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1503478601, "post_id": 45834942, "comment_id": 78627221, "body": "You don&#39;t clear <code>a</code> between test cases, that seems scary."}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1503478687, "post_id": 45834942, "comment_id": 78627273, "body": "Why is <code>a</code> global?"}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1503478844, "post_id": 45834942, "comment_id": 78627363, "body": "Sort the array, then increment until the first number no more appears."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1503478864, "post_id": 45834942, "comment_id": 78627372, "body": "&quot;thwre&#39;s no issue with the code&quot; &quot;it is failing for remaining test cases&quot;. These two statements contradict each other. Please choose one and invert the other."}, {"owner": {"reputation": 5, "user_id": 8355751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe1a5726e91fa1c695bf829b16fa6fe?s=128&d=identicon&r=PG&f=1", "display_name": "radha", "link": "https://stackoverflow.com/users/8355751/radha"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1503479316, "post_id": 45834942, "comment_id": 78627726, "body": "@MOehm , How can it be done without array since during scanning the minimum element can be found but when we have to count the frequency of minimum element then we need to store it somewhere otherwise how will we confirm what was the last seen frequency of element ,say for instance ."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1503480075, "post_id": 45834942, "comment_id": 78628326, "body": "@radha: You only need one count, that of the minimum element. At each step you know what the minimum so far is and how often it has occurred. When you find a new minimum, reset the count to zero. At the end you know what the actual minimum is and how often it has occurred. <a href=\"https://ideone.com/r26f6F\" rel=\"nofollow noreferrer\">Voil&#224;</a>."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503478372, "post_id": 45834962, "comment_id": 78627072, "body": "@AndreKampling: Interesting link but note an important divergence from C++14: a <code>signed char</code> <i>must</i> be 2&#39;s complement, as must a <code>char</code> if it&#39;s signed."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503480151, "post_id": 45834962, "comment_id": 78628399, "body": "@Bathsheba Did you program any system which is not 2 complement?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503480479, "post_id": 45834962, "comment_id": 78628664, "body": "@PeterJ_01: Yup. Plenty of cash registers use signed magnitude. Many moons ago though."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503480760, "post_id": 45834962, "comment_id": 78628889, "body": "Discreet electronics ones? But they were not programmed in C. Or maybe one of those: <a href=\"https://i.stack.imgur.com/s8V9C.jpg\" rel=\"nofollow noreferrer\">i.stack.imgur.com/s8V9C.jpg</a>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503480946, "post_id": 45834962, "comment_id": 78629011, "body": "@PeterJ_01: That&#39;s wonderful. Bonus if you can find a pre-1971 English one (pounds, shillings, pence)."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503481353, "post_id": 45834962, "comment_id": 78629338, "body": "@Bathsheba not 2.complement may be completelly ignored nowadays as there are no any (except some back compatible with the computers from &#39;60s, ot 70s - but people who do program them do not get their knowledge from SO). So please stop writing anout not 2scomplement as for the SO users they do not exist anymore"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1503481480, "post_id": 45834962, "comment_id": 78629431, "body": "With respect, I&#39;ll stop writing about them only if support is dropped from the relevant standards."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1503478787, "last_edit_date": 1503478787, "creation_date": 1503478243, "answer_id": 45834962, "question_id": 45834942, "link": "https://stackoverflow.com/questions/45834942/which-data-type-should-be-used-for-storing-an-integer-as-large-as-109-in-an-arr/45834962#45834962", "title": "Which data type should be used for storing an integer as large as 10^9 in an array?", "body": "<p>A <code>long long</code> is at least a 64 bit signed type, and more than capable of storing a number of that magnitude.</p>\n\n<p>Modern C compilers (C99 onwards) are required to support it.</p>\n\n<p>(By the way, you don't need to retain all the numbers in an array in order to compute the minimum or maximum - rather you can store the currently attained extremes.)</p>\n"}], "owner": {"reputation": 5, "user_id": 8355751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe1a5726e91fa1c695bf829b16fa6fe?s=128&d=identicon&r=PG&f=1", "display_name": "radha", "link": "https://stackoverflow.com/users/8355751/radha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 45834962, "answer_count": 1, "score": -1, "last_activity_date": 1503478787, "creation_date": 1503478178, "last_edit_date": 1503478585, "question_id": 45834942, "link": "https://stackoverflow.com/questions/45834942/which-data-type-should-be-used-for-storing-an-integer-as-large-as-109-in-an-arr", "title": "Which data type should be used for storing an integer as large as 10^9 in an array?", "body": "<p>I have to code for a problem wherein I have to find the frequency of minimum integer among all the integers scanned. I have declared the array to be of type <code>size_t</code> which on my machine has sizeof 8 bytes, I also tried with data type <code>unsigned long</code>, still I am getting runtime error on final submission on hackerearth of my code.</p>\n\n<p>I have checked and verified that there is no issue with the code since 3 test cases have passed on given input but it is failing for remaining test cases, so issue with the data type used for storing the number.</p>\n\n<p>Please guide me with the proper data type I should use. Problem is mentioned on below link:</p>\n\n<p><a href=\"https://www.hackerearth.com/practice/data-structures/arrays/1-d/practice-problems/algorithm/monk-and-lucky-minimum-3/\" rel=\"nofollow noreferrer\">https://www.hackerearth.com/practice/data-structures/arrays/1-d/practice-problems/algorithm/monk-and-lucky-minimum-3/</a></p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt; \nsize_t a[100001]={0};\nint main()\n{\n    int test_no,i;\n\n    scanf(\" %d\",&amp;test_no);\n    for(i=0;i&lt;test_no;i++)\n    {\n        int j,n ;\n        size_t x,min;\n        scanf(\" %d\",&amp;n);\n        for(j=0;j&lt;n;j++)\n        {\n            scanf(\" %zu\",&amp;x);\n            a[x]++;\n            if(j==0)\n            {\n                min=x;\n            }\n            if(x&lt;=min)\n            {\n                min=x;\n            }\n        }\n        if(a[min]%2==0 &amp;&amp; a[min]!=0) //In case if every integer occurs only once so all entries of count will be 0 , so he'll be unlucky \n        {\n            printf(\"Unlucky \\n\");\n        }\n        else\n        {\n            printf(\"Lucky \\n\") ;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 3, "creation_date": 1503477093, "post_id": 45834548, "comment_id": 78626219, "body": "I think <code>char inp[80]</code> is better than <code>int inp[80];</code>"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1503477120, "post_id": 45834548, "comment_id": 78626238, "body": "<i>&quot;It&#39;s not working&quot;</i> is not sufficient problem description. Please read on <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and tell us what the problem is."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1503477149, "post_id": 45834548, "comment_id": 78626253, "body": "To begin with, your code doesn&#39;t contain any strings... You need to read a C book."}, {"owner": {"reputation": 3222, "user_id": 4068240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c35facdddfc74d23ee378790b905226?s=128&d=identicon&r=PG", "display_name": "Clijsters", "link": "https://stackoverflow.com/users/4068240/clijsters"}, "edited": false, "score": 0, "creation_date": 1503477571, "post_id": 45834548, "comment_id": 78626537, "body": "Holy... Is it so hard to indent your code?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503505666, "post_id": 45834548, "comment_id": 78647953, "body": "@AndreKampling: &quot;<i><code>int presence[10]={0};</code> as you&#39;re setting the <code>10</code> to <code>0</code></i>&quot; err, what? The statement defines an array <code>presence</code> of 10 <code>int</code>s which are all initialised to <code>0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1503477503, "last_edit_date": 1503477503, "creation_date": 1503477147, "answer_id": 45834595, "question_id": 45834548, "link": "https://stackoverflow.com/questions/45834548/count-of-elements-in-array/45834595#45834595", "title": "Count of elements in array", "body": "<p>First problem is that by defining</p>\n\n<pre><code>int inp[80];\n</code></pre>\n\n<p><code>scanf</code> stores the data properly in memory (maybe with a warning from the compiler), but then <code>inp[i]</code> is an integer made of several characters (bogus result of mapping characters on an integer data). You have to store your string in <code>char</code>:</p>\n\n<pre><code>char inp[80];\n</code></pre>\n\n<p>Second problem is that comparing character codes of digits won't match against actual numbers. Try substracting the ascii code of <code>'0'</code>:</p>\n\n<pre><code>if(inp[i]-'0' == digit[j]){\n</code></pre>\n\n<p>which can also be achieved without the <code>digit</code> table, or with any string size and without the double loop by deducing the digit from ASCII code directly:</p>\n\n<pre><code>for(i = 0; i &lt; strlen(inp); i++) {\n    if ((inp[i]&gt;='0') &amp;&amp; (inp[i]&lt;='9') { \n           presence[inp[i]-'0']++;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1503477961, "creation_date": 1503477961, "answer_id": 45834862, "question_id": 45834548, "link": "https://stackoverflow.com/questions/45834548/count-of-elements-in-array/45834862#45834862", "title": "Count of elements in array", "body": "<p>As noted in the comments your array <code>inp</code> should be a <code>char</code> array for it to be a string. </p>\n\n<p>You don't need to use that inner loop to test if a character is a digit - you can use <code>isdigit</code> to test for that and subject <code>'0'</code> to find out which digit you've got.</p>\n\n<p>And the way you're processing through the string is also very inefficient as you were calculating the length of the string each iteration of the loop. I've replaced that with a <code>char</code> pointer as that will point to the start of the string and keep going until what it's pointing to is the terminating NUL character.</p>\n\n<pre><code>int i;\nint presence[10] = {0};\nchar inp[80], *p;\n\nscanf(\"%s\", inp);\n\nfor(p = inp; *p; p++) {\n    if(isdigit(*p)) {\n        presence[*p-'0']++;\n    }\n}\n\nfor(i = 0; i &lt; 10; i++) {\n    printf(\"%d\\t%d\\n\",i,presence[i]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 8125573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h6JUR.jpg?s=128&g=1", "display_name": "Rafael Coelho", "link": "https://stackoverflow.com/users/8125573/rafael-coelho"}, "is_accepted": false, "score": 0, "last_activity_date": 1503600733, "creation_date": 1503600733, "answer_id": 45869008, "question_id": 45834548, "link": "https://stackoverflow.com/questions/45834548/count-of-elements-in-array/45869008#45869008", "title": "Count of elements in array", "body": "<p>If i understend correctly what you want, the code below could be your answer:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(){ \n    int i, j;\n    char digit[10] = \"0123456789\";\n    int count[10] = {0,0,0,0,0,0,0,0,0,0};\n    char inp[10];\n\n    scanf(\"%s\", inp);\n    for(i = 0; i &lt; strlen(inp); i++) {\n        for(j = 0; j &lt; strlen(digit); j++) {\n            if(inp[i] == digit[j]) {\n                count[j]++;\n            }\n        }\n    }\n    for(i = 0; i &lt; 10; i++) {\n        printf(\"%d\\t%d\\n\", i, count[i]);\n    }\n}\n</code></pre>\n\n<p>inp is the string you read</p>\n\n<p>digit contains all possible digits (0 to 9)</p>\n\n<p>count counts all appearences of the digits in the respective position.</p>\n"}], "owner": {"reputation": 1, "user_id": 8495497, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FLjURnJQwPQ/AAAAAAAAAAI/AAAAAAAAAAs/LOXHwA6U2OQ/photo.jpg?sz=128", "display_name": "Pritesh Raka", "link": "https://stackoverflow.com/users/8495497/pritesh-raka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1503600733, "creation_date": 1503476984, "last_edit_date": 1503477310, "question_id": 45834548, "link": "https://stackoverflow.com/questions/45834548/count-of-elements-in-array", "title": "Count of elements in array", "body": "<p>This is one of the simplest question on hackerearth, here the is problem statement: </p>\n\n<blockquote>\n  <p>You are given a string S. Count the number of occurrences of all the digits in the string S.</p>\n</blockquote>\n\n<p>But I cant figure out why my solution is not working, I guess it has some problem with the input array, please help me to figure it out. (I want this solution using arrays).</p>\n\n<pre><code>int i, j;\nint digit[10] = {0,1,2,3,4,5,6,7,8,9};\nint presence[10] = {0};\nint inp[80];\nscanf(\"%s\", inp);\nfor(i = 0; i &lt; strlen(inp); i++) {\n    for(j = 0; j &lt; 10; j++) {\n       if(inp[i] == digit[j]) {\n           presence[j]++;\n       }\n    }\n}\nfor(i = 0; i &lt; 10; i++) {\n    printf(\"%d\\t%d\\n\",digit[i],presence[i]);\n}\n</code></pre>\n"}, {"tags": ["c", "fortran", "fortran-iso-c-binding"], "comments": [{"owner": {"reputation": 1956, "user_id": 423913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/044a270a95836821f6bfd2b5c0561f96?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/423913/claudiu"}, "edited": false, "score": 0, "creation_date": 1503477681, "post_id": 45834540, "comment_id": 78626591, "body": "To make sure I understand - is the problem that in the last printout (&quot;Received data from C&quot;), the values should be &quot;1.0&quot;?"}, {"owner": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "reply_to_user": {"reputation": 1956, "user_id": 423913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/044a270a95836821f6bfd2b5c0561f96?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/423913/claudiu"}, "edited": false, "score": 0, "creation_date": 1503477740, "post_id": 45834540, "comment_id": 78626632, "body": "Yes.  I expect that."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1503478176, "post_id": 45834540, "comment_id": 78626928, "body": "Here: <code>positions = windspeedalongblade;</code> you make <code>positions</code> point to somewhere else, probably some global location. That means that the data in the original <code>position</code>, the one the Fortran code knows about, isn&#39;t modified."}], "answers": [{"comments": [{"owner": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "edited": false, "score": 0, "creation_date": 1503480156, "post_id": 45835009, "comment_id": 78628403, "body": "Thanks for the clarification, at the end I added a <code>memcpy</code>."}, {"owner": {"reputation": 1956, "user_id": 423913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/044a270a95836821f6bfd2b5c0561f96?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/423913/claudiu"}, "reply_to_user": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "edited": false, "score": 1, "creation_date": 1503480402, "post_id": 45835009, "comment_id": 78628607, "body": "@OHL&#193;L&#193; if the entire array must be copied, yes that is an efficient solution"}], "tags": [], "owner": {"reputation": 1956, "user_id": 423913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/044a270a95836821f6bfd2b5c0561f96?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/423913/claudiu"}, "is_accepted": true, "score": 4, "last_activity_date": 1503480074, "last_edit_date": 1503480074, "creation_date": 1503478390, "answer_id": 45835009, "question_id": 45834540, "link": "https://stackoverflow.com/questions/45834540/exchanging-array-between-fortran-and-c/45835009#45835009", "title": "Exchanging array between Fortran and C", "body": "<p>The problem is that the following line:</p>\n\n<pre><code>positions = windspeedalongblade;\n</code></pre>\n\n<p>doesn't permanently assign <code>windspeedalongblade</code> to <code>positions</code> (see <a href=\"https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value\">here</a> the difference between passing by value and by reference).</p>\n\n<p>To do that you would need for positions to be passed as a pointer to the array:</p>\n\n<pre><code>int exchange_data(double** positions)\n{\n    ...\n    *positions = windspeedalongblade;\n    printf(\"Data will be send from C\");\n    for (int i = 0; i &lt; numbld; i++) {\n        for (int j = 0; j &lt; datapointnr; j++) {\n            printf(\"[\");\n            for (int k = 0; k &lt; 3; k++) {\n                printf(\"%5.4f \", *positions[3 * datapointnr * k + 3 * j + i]);\n        }\n            printf(\"]\\r\\n\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>But in this case you have to be sure that <code>windspeedalongblade</code> remains persistent until you get to use <code>positions</code>.</p>\n\n<p>The simpler solution is to leave the function as it is and assign the values of the <code>positions</code> array directly:</p>\n\n<pre><code>int exchange_data(double* positions)\n{\n\n    printf(\"Received data from Fortran\");\n    bladepositions = positions;\n    for (int i = 0; i &lt; numbld; i++) {\n        for (int j = 0; j &lt; datapointnr; j++) {\n            printf(\"[\");\n            for (int k = 0; k &lt; 3; k++) {\n\n                printf(\"%5.4f \", bladepositions[3 * datapointnr * k + 3 * j + i]);\n                windspeedalongblade[3 * datapointnr * k + 3 * j + i] = positions[3 * datapointnr * k + 3 * j + i] = 1.0;\n            }\n            printf(\"]\\r\\n\");\n        }\n    }\n\n    printf(\"Data will be send from C\");\n    for (int i = 0; i &lt; numbld; i++) {\n        for (int j = 0; j &lt; datapointnr; j++) {\n            printf(\"[\");\n            for (int k = 0; k &lt; 3; k++) {\n                printf(\"%5.4f \", positions[3 * datapointnr * k + 3 * j + i]);\n            }\n            printf(\"]\\r\\n\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>So in the end it depends whether you want <code>positions</code> to be an array or just a pointer to an array. From the looks of the Fortran code it seems that it is an array, in which case the second solution would be best.</p>\n"}], "owner": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 45835009, "answer_count": 1, "score": 3, "last_activity_date": 1503480074, "creation_date": 1503476960, "last_edit_date": 1503479396, "question_id": 45834540, "link": "https://stackoverflow.com/questions/45834540/exchanging-array-between-fortran-and-c", "title": "Exchanging array between Fortran and C", "body": "<p>I have the following C and Fortran code where I would like to exchange some data </p>\n\n<pre><code>FUNCTION exchange_data(data) bind(c,name='exchange_data')\n    use iso_c_binding\n    integer(kind=c_int)                                 :: exchange_data\n    real(kind=c_double), intent(inout), dimension(*)    :: data\n\nEND FUNCTION exchange_data\n\n....\n\nWRITE(*,*), \"Sent data to C\"\nDO I=1,NumBl\n    DO J=1,WindSpeedCoordNr\n        WRITE(*, FMT2), GLOBAL_COORD_ALONG_BEAM(I, J, :)\n    END DO\nEND DO\ncflag = exchange_data(GLOBAL_COORD_ALONG_BEAM)\n\nWRITE(*,*), \"Received data from C\"\nDO I=1,NumBl\n    DO J=1,WindSpeedCoordNr\n        WRITE(*, FMT2), GLOBAL_COORD_ALONG_BEAM(I, J, :)\n    END DO\nEND DO\n</code></pre>\n\n<p>And the following test C code:</p>\n\n<pre><code>int exchange_data(double* positions)\n{\n\n    printf(\"Received data from Fortran\");\n    bladepositions = positions;\n    for (int i = 0; i &lt; numbld; i++) {\n        for (int j = 0; j &lt; datapointnr; j++) {\n            printf(\"[\");\n            for (int k = 0; k &lt; 3; k++) {\n\n                printf(\"%5.4f \", bladepositions[3 * datapointnr * k + 3 * j + i]);\n                windspeedalongblade[3 * datapointnr * k + 3 * j + i] = 1.0;\n            }\n            printf(\"]\\r\\n\");\n        }\n    }\n\n\n    positions = windspeedalongblade;\n\n    printf(\"Data will be send from C\");\n    for (int i = 0; i &lt; numbld; i++) {\n        for (int j = 0; j &lt; datapointnr; j++) {\n            printf(\"[\");\n            for (int k = 0; k &lt; 3; k++) {\n                printf(\"%5.4f \", positions[3 * datapointnr * k + 3 * j + i]);\n            }\n            printf(\"]\\r\\n\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This has the following output</p>\n\n<pre><code>Sent data to C\n  -18.6593  -29.1175  137.0735\n  -18.8588  -29.1308  137.0803\n  -19.0582  -29.1441  137.0871\n\nReceived data from Fortran\n[-18.6593 -29.1175 137.0735 ]\n[-18.8588 -29.1308 137.0803 ]\n[-19.0582 -29.1441 137.0871 ]\n\nData will be send from C\n[1.0000 1.0000 1.0000 ]\n[1.0000 1.0000 1.0000 ]\n[1.0000 1.0000 1.0000 ]\n\nReceived data from C\n  -18.6593  -29.1175  137.0735\n  -18.8588  -29.1308  137.0803\n  -19.0582  -29.1441  137.0871\n</code></pre>\n\n<p>I seems I can transfer data to the C function but not back to Fortran code. How can I achieve that?</p>\n"}, {"tags": ["c", "string", "pointers", "tokenize"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 6, "creation_date": 1503477112, "post_id": 45834496, "comment_id": 78626233, "body": "<code>strtok()</code> treats consecutive separators as one. So, <i>empty</i> fields (between consecutive <code>;;</code> in your case) cannot be parsed. Simplest solution: don&#39;t use <code>strtok()</code>"}, {"owner": {"reputation": 458, "user_id": 4720686, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1e6d09785dc874defe437f269dbb7d56?s=128&d=identicon&r=PG&f=1", "display_name": "arjun gaur", "link": "https://stackoverflow.com/users/4720686/arjun-gaur"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1503477339, "post_id": 45834496, "comment_id": 78626370, "body": "thanks,can you suggest something else for this then ?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1503477450, "post_id": 45834496, "comment_id": 78626449, "body": "Use <code>strsep</code> if available."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503477452, "post_id": 45834496, "comment_id": 78626450, "body": "yes: 1) manually step through the string with a loop 2) use <code>strchr()</code> or <code>strspn()</code> / <code>strcspn()</code> (or <code>strsep()</code> tnx @BLUEPIXY )"}, {"owner": {"reputation": 458, "user_id": 4720686, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1e6d09785dc874defe437f269dbb7d56?s=128&d=identicon&r=PG&f=1", "display_name": "arjun gaur", "link": "https://stackoverflow.com/users/4720686/arjun-gaur"}, "edited": false, "score": 0, "creation_date": 1503490195, "post_id": 45834496, "comment_id": 78635825, "body": "strchr also returns delimiter with it"}], "answers": [{"tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": true, "score": 3, "last_activity_date": 1503477614, "creation_date": 1503477614, "answer_id": 45834755, "question_id": 45834496, "link": "https://stackoverflow.com/questions/45834496/strtok-showing-undesirable-behaviour/45834755#45834755", "title": "strtok showing undesirable behaviour", "body": "<p><a href=\"http://www.unix.com/man-page/FreeBSD/3/strsep/\" rel=\"nofollow noreferrer\">strsep MAN</a> says</p>\n\n<blockquote>\n  <p>The strsep() function is intended as a replacement for the strtok()\n  function. While the strtok() function should be preferred for\n  portability reasons (it conforms to ISO/IEC 9899:1990 (\"ISO C90\")) it\n  <strong>is unable to handle empty fields</strong>, i.e., detect fields delimited by two\n  adjacent delimiter characters, or to be used for more than a single\n  string at a time. The strsep() function first appeared in 4.4BSD.</p>\n</blockquote>\n\n<p><strong>Example</strong></p>\n\n<pre><code>char *t, *str, *save;\n\nsave = str = strdup(\"123;;False;CXL;;true\");\nwhile ((t = strsep(&amp;str, \";\")) != NULL)\n    printf(\"Token=%s\\n\", t);\n\nfree(save);\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Token=123\nToken=\nToken=False\nToken=CXL\nToken=\nToken=true\n</code></pre>\n"}], "owner": {"reputation": 458, "user_id": 4720686, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1e6d09785dc874defe437f269dbb7d56?s=128&d=identicon&r=PG&f=1", "display_name": "arjun gaur", "link": "https://stackoverflow.com/users/4720686/arjun-gaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 45834755, "answer_count": 1, "score": 1, "last_activity_date": 1503494038, "creation_date": 1503476865, "last_edit_date": 1503494038, "question_id": 45834496, "link": "https://stackoverflow.com/questions/45834496/strtok-showing-undesirable-behaviour", "title": "strtok showing undesirable behaviour", "body": "<p>Following is my code fragment:</p>\n\n<pre><code>int main()\n{\n   char *str[4];\n   char *ptr;\n\n   char Str[25];\n   char Str1[25];\n   memset(Str,32,25);\n   char temp[25];\n   sprintf(Str,\"123;;False;CXL;;true\");\n   printf(\"Old String [%s]\",Str);\n   ptr = &amp;Str ;\n   str[0]=strtok(ptr,\";\");\n   str[1]=strtok(NULL,\";\");\n   str[2]=strtok(NULL,\";\");\n   str[3]=strtok(NULL,\";\");\n\n   printf(\"str[0] =[%s]\",str[0]);\n   printf(\"str[1] =[%s]\",str[1]);\n   printf(\"str[2] =[%s]\",str[2]);\n   printf(\"str[3] =[%s]\",str[3]);\n\n   //strncpy(temp,str,25);\n   memcpy(str[0],\"345\",3);\n   sprintf(Str1,\"%s;%s;%s;%s\",str[0],str[1],str[2],str[3]);\n   printf(\"New String [%s]\",Str1);\n   return 0;\n}\n</code></pre>\n\n<p>My concern is why is it ignoring the 'null' values in my original string? As per the output I get 4 tokens but in fact I have 6 tokens with delimiter <code>';'</code>, it's ignoring the 'null' values in b/w and not considering them as separate tokens. </p>\n\n<p>Output is:</p>\n\n<pre><code>Old String [123;;False;CXL;;true]\nstr[0] =[123]str[1] =[False]str[2] =[CXL]str[3] =[true]\nNew String [345;False;CXL;true]\n</code></pre>\n\n<p>Is there a workaround for this that I'm not aware of?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 1, "creation_date": 1503475768, "post_id": 45833961, "comment_id": 78625312, "body": "&quot;prone to bugs if the text file changes slightly in layout&quot; - if you can&#39;t rely on some file format to be constant/consistent it is hard for anyone to write a parser, even Python package developers. Everything you can do in Python can also be done in C."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503475963, "post_id": 45833961, "comment_id": 78625443, "body": "If you&#39;re reading the file line by line <code>a</code>, <code>b</code> and <code>c</code> are simple to store because it&#39;s written like <code>a = value</code> in the file. But the <code>fft coefficients</code> are not that simple, however if the position of them is always the same (meaning e.g. that there is always written <code>fine FFT [...]</code> in that line) this is also easy."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1503476608, "post_id": 45833961, "comment_id": 78625890, "body": "Please give at least a link to the relevant specification of <code>fmt</code> format. I never heard of it."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1503488017, "post_id": 45833961, "comment_id": 78634181, "body": "BTW, where is that data coming from? Is it the output of some software whose source code you can study?"}], "answers": [{"comments": [{"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 1, "creation_date": 1503476091, "post_id": 45834033, "comment_id": 78625527, "body": "In my opinion a bison parser and the studying of lexical analysis is too overkill for this simple question, isn&#39;t it?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1503476116, "post_id": 45834033, "comment_id": 78625551, "body": "I don&#39;t know what is the file format, so I cannot answer."}, {"owner": {"reputation": 119, "user_id": 7450435, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5f595e355863a24ba91778ae97d563c8?s=128&d=identicon&r=PG&f=1", "display_name": "Will C", "link": "https://stackoverflow.com/users/7450435/will-c"}, "edited": false, "score": 0, "creation_date": 1503476263, "post_id": 45834033, "comment_id": 78625657, "body": "It is a fmt file"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 119, "user_id": 7450435, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5f595e355863a24ba91778ae97d563c8?s=128&d=identicon&r=PG&f=1", "display_name": "Will C", "link": "https://stackoverflow.com/users/7450435/will-c"}, "edited": false, "score": 1, "creation_date": 1503476406, "post_id": 45834033, "comment_id": 78625765, "body": "@WillC: but where is the formal specification of <code>fmt</code>? I never heard of it."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1503476734, "post_id": 45834033, "comment_id": 78625979, "body": "But that does not match at all your example. You need to find a more relevant file format specification."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1503477204, "last_edit_date": 1503477204, "creation_date": 1503475484, "answer_id": 45834033, "question_id": 45833961, "link": "https://stackoverflow.com/questions/45833961/reading-in-specific-data-from-text-file-c/45834033#45834033", "title": "Reading in Specific data from text file (C)", "body": "<p>You first should <strong>specify</strong> and formalize <strong>the <em>actual</em> <a href=\"https://en.wikipedia.org/wiki/File_format\" rel=\"nofollow noreferrer\">file format</a></strong> of your input (a single example is not enough). You might use, at least for documentation purposes, some <a href=\"https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form\" rel=\"nofollow noreferrer\">EBNF</a> notation (I could guess but am not sure that <code>BEGIN</code> and <code>Lattice</code> are important in it, but the <a href=\"https://en.wikipedia.org/wiki/Fmt_(Unix)\" rel=\"nofollow noreferrer\">fmt</a> wikipage don't mention them).</p>\n\n<blockquote>\n  <p>An example would be from this file</p>\n</blockquote>\n\n<p>That is a wrong approach. You need to know the <em>general</em> file format your program will be able to handle and that is part of your software design. So better specify it first. </p>\n\n<p>Then you'll use usual <a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a> techniques. Read also about <a href=\"https://en.wikipedia.org/wiki/Lexical_analysis\" rel=\"nofollow noreferrer\">lexical analysis</a>. Perhaps a <a href=\"https://en.wikipedia.org/wiki/Parser_generator\" rel=\"nofollow noreferrer\">parser generator</a> like <a href=\"https://www.gnu.org/software/bison/\" rel=\"nofollow noreferrer\">GNU bison</a> could be helpful, or perhaps a simple <a href=\"https://en.wikipedia.org/wiki/Recursive_descent_parser\" rel=\"nofollow noreferrer\">recursive descent parser</a> could be enough. Maybe your input format cares about lines, then you could read them one by one (e.g. with POSIX <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">getline</a>) and parse each of them.</p>\n\n<p>Reading the <a href=\"https://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools#Second_edition\" rel=\"nofollow noreferrer\">Dragon Book</a> is worthwhile.</p>\n\n<blockquote>\n  <p>Is there something similar to the python re module in C</p>\n</blockquote>\n\n<p>POSIX has <code>&lt;regex.h&gt;</code>; see <a href=\"http://man7.org/linux/man-pages/man3/regcomp.3.html\" rel=\"nofollow noreferrer\">regcomp(3)</a> ; Look also into <a href=\"http://man7.org/linux/man-pages/man3/pcre2.3.html\" rel=\"nofollow noreferrer\">pcre2</a>. I am not sure it is relevant here.</p>\n"}], "owner": {"reputation": 119, "user_id": 7450435, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5f595e355863a24ba91778ae97d563c8?s=128&d=identicon&r=PG&f=1", "display_name": "Will C", "link": "https://stackoverflow.com/users/7450435/will-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 45834033, "answer_count": 1, "score": -1, "last_activity_date": 1503477204, "creation_date": 1503475268, "last_edit_date": 1503476286, "question_id": 45833961, "link": "https://stackoverflow.com/questions/45833961/reading-in-specific-data-from-text-file-c", "title": "Reading in Specific data from text file (C)", "body": "<p>I am trying to read in specific data from a variable file in fmt format. The data needed is the value of <code>a</code>,<code>b</code> and <code>c</code> as well as the <code>fft coefficients (width,height,depth)</code> (25,300,300) in this case.</p>\n\n<p>An example would be from this file to assign the variables:\n<code>a = 2.467</code>\n<code>b = 30.000</code>\n<code>c = 30.000</code>\n <code>width = 25</code>\n <code>height = 300</code>\n <code>depth = 300</code>.\nThe values of these will change however as the input file changes.</p>\n\n<p>Currently the only way I can think of to read these in, is from their position in the text file. I do not like this however as it is prone to bugs if the text file changes slightly in layout. Can anyone suggest an alternate method (Is there something similar to the python re module in C)?</p>\n\n<p>Please see an example text file below:</p>\n\n<pre><code>BEGIN header\n\n       Real Lattice(A)               Lattice parameters(A)    Cell Angles\n   2.4675850   0.0000000   0.0000000     a =    2.467585  alpha =   90.000000\n   0.0000000  30.0000000   0.0000000     b =   30.000000  beta  =   90.000000\n   0.0000000   0.0000000  30.0000000     c =   30.000000  gamma =   90.000000\n\n 1                            ! nspins\n25   300   300                ! fine FFT grid along &lt;a,b,c&gt;\nEND header: data is \"&lt;a b c&gt; pot\" in units of Hartrees\n</code></pre>\n"}, {"tags": ["c", "pointers", "sonarqube", "static-code-analysis", "cppcheck"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503474933, "post_id": 45833805, "comment_id": 78624748, "body": "The code trivially looks fine, are you sure this is the <i>exact</i> code generating the warning?"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503474978, "post_id": 45833805, "comment_id": 78624777, "body": "Show the rest of the code. Also CppCheck will complain about a specifc line..."}, {"owner": {"reputation": 821, "user_id": 4953302, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6214968d94b08872c92ba43f392a5f49?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/4953302/federico"}, "edited": false, "score": 0, "creation_date": 1503475145, "post_id": 45833805, "comment_id": 78624894, "body": "I added the screenshot captured from SonarQube"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503475297, "post_id": 45833805, "comment_id": 78625004, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32839786/possible-null-pointer-dereference-otherwise-it-is-redundant-to-check-it-agains\">Possible null pointer dereference - otherwise it is redundant to check it against null</a>"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 1, "creation_date": 1503475355, "post_id": 45833805, "comment_id": 78625043, "body": "I&#39;ve marked it as duplicate. I think you&#39;re using <code>byteTransmitted</code> after the if statement (return). CppCheck analysis isn&#39;t deep enough for that. It&#39;s a false positive."}, {"owner": {"reputation": 821, "user_id": 4953302, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6214968d94b08872c92ba43f392a5f49?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/4953302/federico"}, "edited": false, "score": 0, "creation_date": 1503475474, "post_id": 45833805, "comment_id": 78625109, "body": "I attached the entire function code"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503475588, "post_id": 45833805, "comment_id": 78625193, "body": "As I said, it&#39;s because of this line: <code>*byteTransmitted = bytes;</code>. CppCheck doesn&#39;t know that you returned before this if <code>byteTransmitted == NULL</code> and sees no check before it. Your code is fine!"}, {"owner": {"reputation": 821, "user_id": 4953302, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6214968d94b08872c92ba43f392a5f49?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/4953302/federico"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503475718, "post_id": 45833805, "comment_id": 78625276, "body": "@AndreKampling Thanks for the explanation! Now it&#39;s clear!"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1503476665, "post_id": 45833805, "comment_id": 78625928, "body": "So, we have a wrapper function around a wrapper function around <code>write()</code> and we use a silly tool to check the wrapper functions, and the tool fails..."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 1, "creation_date": 1503492707, "post_id": 45833805, "comment_id": 78637793, "body": "@AndreKampling It&#39;s not a false positive: the problem is <code>*byteTransmitted = 0;</code> <i>before</i> the <code>NULL</code> check."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1503492824, "post_id": 45833805, "comment_id": 78637888, "body": "@wildplasser No, the tool worked. The code fails."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1503492918, "post_id": 45833805, "comment_id": 78637974, "body": "@TripeHound: Ahhh I did not see that line before the if statement because first he didn&#39;t post his full code. He edited that... Thank you!"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503493093, "post_id": 45833805, "comment_id": 78638118, "body": "@AndreKampling Sorry: it all says &quot;4 hours ago&quot; (at time of commenting) -- I assumed the full code was there when you commented."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1503493197, "post_id": 45833805, "comment_id": 78638219, "body": "@TripeHound: That&#39;s right but first it wasn&#39;t (watch edit history) and I assumed what I&#39;ve already explained. Then he posted the full code and I did not see the line and feeled like I was right but I was not. Thank you! Further watch at the screenshots in the edit history CppCheck complains about the if statement. But nevertheless also if he put the line below the if statement CppCheck will give the warning because of what I was saying."}], "answers": [{"comments": [{"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503493356, "post_id": 45838938, "comment_id": 78638361, "body": "I think CppCheck will still give the warning because of what I already mentioned in the above comments: <a href=\"https://stackoverflow.com/questions/32839786/possible-null-pointer-dereference-otherwise-it-is-redundant-to-check-it-agains\">Possible null pointer dereference - otherwise it is redundant to check it against null</a>. Nevertheless your answer fixes a problem with his code!"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503502407, "post_id": 45838938, "comment_id": 78645756, "body": "@PaulR: Yes sure! But I mean CppCheck will also warn after the correction."}, {"owner": {"reputation": 821, "user_id": 4953302, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6214968d94b08872c92ba43f392a5f49?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/4953302/federico"}, "edited": false, "score": 0, "creation_date": 1503502462, "post_id": 45838938, "comment_id": 78645799, "body": "@AndreyKarpov: Now I understand the reason behind the error! It&#39;s clear! Thanks for testing my code"}, {"owner": {"reputation": 2619, "user_id": 823177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c99db38b2f404b63d6b82666a5fbec?s=128&d=identicon&r=PG", "display_name": "Daniel Marjam&#228;ki", "link": "https://stackoverflow.com/users/823177/daniel-marjam%c3%a4ki"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503558278, "post_id": 45838938, "comment_id": 78667728, "body": "@AndreKampling I am a Cppcheck developer. I don&#39;t agree about &quot;CppCheck will also warn after the correction&quot;. Not for this example code at least. Perhaps for your real code. Then you might have one more bug in your real code."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 2619, "user_id": 823177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c99db38b2f404b63d6b82666a5fbec?s=128&d=identicon&r=PG", "display_name": "Daniel Marjam&#228;ki", "link": "https://stackoverflow.com/users/823177/daniel-marjam%c3%a4ki"}, "edited": false, "score": 0, "creation_date": 1503558466, "post_id": 45838938, "comment_id": 78667844, "body": "@Daniel: Hi thank you that you take part of the discussion. What&#39;s about the link I&#39;ve posted? It&#39;s the same case here: Check of a variable against NULL --&gt; return if NULL --&gt; After that use the variable. Does I get something wrong? Was this fixed long time ago?"}, {"owner": {"reputation": 2619, "user_id": 823177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c99db38b2f404b63d6b82666a5fbec?s=128&d=identicon&r=PG", "display_name": "Daniel Marjam&#228;ki", "link": "https://stackoverflow.com/users/823177/daniel-marjam%c3%a4ki"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503576941, "post_id": 45838938, "comment_id": 78680691, "body": "@AndreKampling About that link, I agree it is a false positive but as far as I see latest Cppcheck does not write a false positive for that. The code example is not complete so maybe I missed some detail when I tested it - please try on your real code also."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 2619, "user_id": 823177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c99db38b2f404b63d6b82666a5fbec?s=128&d=identicon&r=PG", "display_name": "Daniel Marjam&#228;ki", "link": "https://stackoverflow.com/users/823177/daniel-marjam%c3%a4ki"}, "edited": false, "score": 0, "creation_date": 1503579393, "post_id": 45838938, "comment_id": 78682634, "body": "@Daniel: I Have no real code as I&#39;m not the OP of this question."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 2619, "user_id": 823177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c99db38b2f404b63d6b82666a5fbec?s=128&d=identicon&r=PG", "display_name": "Daniel Marjam&#228;ki", "link": "https://stackoverflow.com/users/823177/daniel-marjam%c3%a4ki"}, "edited": false, "score": 0, "creation_date": 1503644704, "post_id": 45838938, "comment_id": 78710353, "body": "@Daniel: But yes you&#39;re right I&#39;ve tested the current Cppcheck version and it will not complain after the correction of the answerer."}], "tags": [], "owner": {"reputation": 965, "user_id": 7772356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6749606abf1529e3bf62e4ae18104d43?s=128&d=identicon&r=PG", "display_name": "AndreyKarpov", "link": "https://stackoverflow.com/users/7772356/andreykarpov"}, "is_accepted": true, "score": 6, "last_activity_date": 1503489018, "creation_date": 1503489018, "answer_id": 45838938, "question_id": 45833805, "link": "https://stackoverflow.com/questions/45833805/either-the-condition-is-redundant-or-there-is-possible-null-pointer-dereference/45838938#45838938", "title": "Either the condition is redundant or there is possible null pointer dereference", "body": "<p>I looked through the code and checked it, immediately using PVS-Studio and it also issued a warning:</p>\n\n<p><a href=\"https://www.viva64.com/en/w/V595/\" rel=\"noreferrer\">V595</a>: The 'byteTransmitted' pointer was utilized before it was verified against nullptr. Check lines: 39, 41. consoleapplication1.cpp 39</p>\n\n<p>Indeed, let's look at this code fragment:</p>\n\n<pre><code>*byteTransmitted = 0;\n\nif( dataBuffer == NULL || byteTransmitted == NULL )\n</code></pre>\n\n<p>In the beginning the pointer <code>byteTransmitted</code> is dereferenced, and only after that it is verified against <code>NULL</code>. It is an error. So, it is right that all analyzers complain about it. It will be correct firstly to verify and only then use the pointer:</p>\n\n<pre><code>if( dataBuffer == NULL || byteTransmitted == NULL )\n{\n  return WRONG_PARAMETER;\n}\n\n*byteTransmitted = 0;\n</code></pre>\n"}], "owner": {"reputation": 821, "user_id": 4953302, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6214968d94b08872c92ba43f392a5f49?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/4953302/federico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2974, "favorite_count": 0, "accepted_answer_id": 45838938, "answer_count": 1, "score": 4, "last_activity_date": 1503500631, "creation_date": 1503474807, "last_edit_date": 1503500631, "question_id": 45833805, "link": "https://stackoverflow.com/questions/45833805/either-the-condition-is-redundant-or-there-is-possible-null-pointer-dereference", "title": "Either the condition is redundant or there is possible null pointer dereference", "body": "<p>I wrote a C code for an embedded system and when I execute the code analysis with SonarQube and CppCheck plugin I get this bug:</p>\n\n<blockquote>\n  <p>Either the condition is redundant or there is possible null pointer dereference: pointer.</p>\n</blockquote>\n\n<p>This is the code that has the bug:</p>\n\n<pre><code>ReturnCode_e SocketTcpSecureWrite( SocketHandle_t socketHandle, \n                                   char* dataBuffer, \n                                   uint16_t dataBufferLen, uint16_t* byteTransmitted )\n{\n    uint32_t bytes = 0;\n    ReturnCode_e opResult = SSL_WRITE_ERROR;\n\n    *byteTransmitted = 0;\n\n    if( dataBuffer == NULL || byteTransmitted == NULL )\n    {\n        return WRONG_PARAMETER;\n    }\n\n    if( SEND_SOCKET( socketHandle, dataBuffer, dataBufferLen, 0, &amp;bytes ) == SUCCESS )\n    {\n        *byteTransmitted = bytes;\n        opResult = SUCCESS;\n    }\n\n    return opResult;\n}\n</code></pre>\n\n<p>I don't understand why the pointer consistency check appears as a bug. \nI want to verify that the pointer is not NULL before execute the function, otherwise I return an error.</p>\n\n<p>Is this the right way to check the pointer consistency?</p>\n"}, {"tags": ["c", "pointers", "memory"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 6, "creation_date": 1503473262, "post_id": 45833207, "comment_id": 78623598, "body": "Please avoid piecewise examples. Read about how to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1503473375, "post_id": 45833207, "comment_id": 78623671, "body": "&quot;<i>I&#39;m passing a variable by reference into a function</i>&quot; &lt;- that&#39;s impossible, you mean you pass a pointer to it. Now, what&#39;s <code>get_pn()</code>? The error <i>might</i> be there."}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 1, "creation_date": 1503473804, "post_id": 45833207, "comment_id": 78624028, "body": "have you tried running your code with <code>gdb</code> or <code>valgrind</code>? They usually give me the answers when I&#39;m as stuck as you seem, and I can&#39;t see the error based on the code you pasted either."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503474449, "post_id": 45833207, "comment_id": 78624448, "body": "@streblo Could you please finally provide <code>get_pn()</code> function so we can help you ? :-)"}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1503474729, "post_id": 45833207, "comment_id": 78624621, "body": "&quot;I have simplified the code to make it easier to understand&quot; Are you sure you haven&#39;t declared a variable <code>p</code> in local scope?"}, {"owner": {"reputation": 3, "user_id": 8504359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496e88a2a5499da0762843694da9dabb?s=128&d=identicon&r=PG&f=1", "display_name": "streblo", "link": "https://stackoverflow.com/users/8504359/streblo"}, "reply_to_user": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503476766, "post_id": 45833207, "comment_id": 78625997, "body": "@FilipKo\u010dica Sorry, I added it above.  The function <code>get_pn</code> returns a string.  <code>const char *get_pn(z_handle_t *z);</code>"}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503476873, "post_id": 45833207, "comment_id": 78626067, "body": "But we have to see all the funtion not just prototype :-)"}, {"owner": {"reputation": 3, "user_id": 8504359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496e88a2a5499da0762843694da9dabb?s=128&d=identicon&r=PG&f=1", "display_name": "streblo", "link": "https://stackoverflow.com/users/8504359/streblo"}, "reply_to_user": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503478252, "post_id": 45833207, "comment_id": 78626979, "body": "@FilipKo\u010dica Got it. By the way, why would <code>strcpy(*p,temp_p);</code> work as I noted at the bottom? Is is the reason I thought?"}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503479769, "post_id": 45833207, "comment_id": 78628074, "body": "@streblo Ive updated my answer. Your problem is explained at the bottom. If you wont understand ask me."}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 3368605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079502179c37f5b94262d400541344b8?s=128&d=identicon&r=PG&f=1", "display_name": "wing", "link": "https://stackoverflow.com/users/3368605/wing"}, "is_accepted": false, "score": -1, "last_activity_date": 1503474610, "creation_date": 1503474610, "answer_id": 45833739, "question_id": 45833207, "link": "https://stackoverflow.com/questions/45833207/why-does-pointer-variable-change-after-passed-through-multiple-functions/45833739#45833739", "title": "Why does pointer variable change after passed through multiple functions", "body": "<p>If after you pass for reference, you access to variable and find changed the value memorized in the variable, then somewhere in the code you assigned that value to that pointer</p>\n"}, {"comments": [{"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1503475238, "post_id": 45833761, "comment_id": 78624960, "body": "The multiple functions example would make more sense compared to the question if the function calls are nested."}, {"owner": {"reputation": 3, "user_id": 8504359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496e88a2a5499da0762843694da9dabb?s=128&d=identicon&r=PG&f=1", "display_name": "streblo", "link": "https://stackoverflow.com/users/8504359/streblo"}, "edited": false, "score": 0, "creation_date": 1503475884, "post_id": 45833761, "comment_id": 78625395, "body": "Yes, I meant pass by pointer. I realize there&#39;s no pass by reference in c, but the functionality can be replicated by passing a pointer address, which is what I meant. I&#39;ll clarify in my post."}, {"owner": {"reputation": 3, "user_id": 8504359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496e88a2a5499da0762843694da9dabb?s=128&d=identicon&r=PG&f=1", "display_name": "streblo", "link": "https://stackoverflow.com/users/8504359/streblo"}, "edited": false, "score": 1, "creation_date": 1503481773, "post_id": 45833761, "comment_id": 78629665, "body": "@FilipKo\u010dica Of course, that makes perfect sense. If I don&#39;t want to have to dynamically allocate memory in this situation, is using <code>strcpy</code> an acceptable solution? I don&#39;t want to have retain access to <code>z</code> so that I can free it later, and I don&#39;t want to pass it in as a pointer. Thanks for your help."}], "tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": true, "score": 1, "last_activity_date": 1503479737, "last_edit_date": 1503479737, "creation_date": 1503474675, "answer_id": 45833761, "question_id": 45833207, "link": "https://stackoverflow.com/questions/45833207/why-does-pointer-variable-change-after-passed-through-multiple-functions/45833761#45833761", "title": "Why does pointer variable change after passed through multiple functions", "body": "<blockquote>\n  <p>Why does pointer variable change after passed through multiple\n  functions</p>\n</blockquote>\n\n<p>It cant, if you dont modify the content (It might be a pointer pointing to same piece of memory) or where the does the pointer point it self.</p>\n\n<hr>\n\n<blockquote>\n  <p>I'm passing a variable by reference</p>\n</blockquote>\n\n<p>Its not possible in C, from <a href=\"http://www-cs-students.stanford.edu/~sjac/c-to-cpp-info/references\" rel=\"nofollow noreferrer\">www-cs-students.stanford.edu</a>:</p>\n\n<blockquote>\n  <p>In C, Pass-by-reference is simulated by passing the address of a\n  variable (a pointer) and dereferencing that address within the\n  function to read or write the actual variable. This will be referred\n  to as \"C style pass-by-reference.\"</p>\n</blockquote>\n\n<hr>\n\n<p>Look at the example below, we are passing pointer through various functions, but both pointer address and content are still same.</p>\n\n<pre><code>void f3(char **p)\n{\n    printf(\"f3: Address: %p, Value: %s\\n\", *p, *p);\n}\n\nvoid f2(char **p)\n{\n    printf(\"f2: Address: %p, Value: %s\\n\", *p, *p);\n    f3(p);\n}\n\nvoid f1(char **p)\n{\n    printf(\"f1: Address: %p, Value: %s\\n\", *p, *p);\n    f2(p);\n}\n\nint main(void)\n{\n    char *p = malloc((int)strlen(\"hello\"));\n    strcpy(p, \"hello\");\n\n    printf(\"Main 1: Address: %p, Value: %s\\n\", p, p);\n\n    f1(&amp;p);\n\n    printf(\"Main 2: Address: %p, Value: %s\\n\", p, p);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Main 1: Address: 0x1a7c010, Value: hello\nf1    : Address: 0x1a7c010, Value: hello\nf2    : Address: 0x1a7c010, Value: hello\nf3    : Address: 0x1a7c010, Value: hello\nMain 2: Address: 0x1a7c010, Value: hello\n</code></pre>\n\n<hr>\n\n<p>Take a look here (inside <code>zl_get_dsp</code> function)</p>\n\n<pre><code>z_handle_t *z = NULL;\n</code></pre>\n\n<p>You have created local variable <code>z</code> which contains an array <code>pn</code>. Here you assign some string to <code>pn</code> which is inside <code>z</code>.</p>\n\n<pre><code>z = z_open(hdl, ds)\n</code></pre>\n\n<p>Then if you print it inside same function, everything is ok and string shows up</p>\n\n<pre><code>fprintf(stdout, \"zl_get_dsp: '%s'\\n\", *p)\n</code></pre>\n\n<p>But after you return back to previous function, <code>z</code> is out of scope, which means the array <code>pn</code> is aswell out of scope and string inside <code>pn</code> doesnt exist anymore if you are trying to print him in another functions. If you want to return pointer to something it <strong>cant</strong> be local, becouse after return from function it out of scope, so you have to declare <code>z</code> as global or assign him some dynamical memory with <code>malloc</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 8504359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496e88a2a5499da0762843694da9dabb?s=128&d=identicon&r=PG&f=1", "display_name": "streblo", "link": "https://stackoverflow.com/users/8504359/streblo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 45833761, "answer_count": 2, "score": -2, "last_activity_date": 1503479737, "creation_date": 1503473090, "last_edit_date": 1503478078, "question_id": 45833207, "link": "https://stackoverflow.com/questions/45833207/why-does-pointer-variable-change-after-passed-through-multiple-functions", "title": "Why does pointer variable change after passed through multiple functions", "body": "<p>I'm passing a variable by reference into a function, and then in that function passing the variable by pointer into another function. In the final function the variable is assigned to and when I print it out in the final function it prints successfully.</p>\n\n<p>When I then try to access the variable in the outer functions the variable has changed. </p>\n\n<p>The variable <code>p</code> is a local variable in the outermost function, and I am passing the address in. I don't know why the variable is changing since I am passing a pointer in.</p>\n\n<p>Here's what my code looks like. I have simplified the code to make it easier to understand without needing to paste too much other code.</p>\n\n<p>I pass <code>p</code> into <code>get_dsp(root, &amp;p)</code></p>\n\n<pre><code>b_error\nrun_activate(int argc, char **argv){\n    b_error ret = B_SUCCESS;\n    char *root = \"example_root\";\n\n    char *p;\n\n    if ((ret = get_dsp(root, &amp;p)) != B_FAILURE) {\n        fprintf(stdout, \"run_activate: %s.\\n\", p);\n    }\n    return ret;\n}\n</code></pre>\n\n<p>I then pass it into another function within <code>get_dsp(...)</code>.</p>\n\n<pre><code>b_error\nget_dsp(char *ds, char **p) {\n    handle_t *hdl;\n    b_e_t *b_be = NULL;\n    b_error ret = B_SUCCESS;\n\n    if((hdl = zl_init()) != NULL) {\n\n        if (zl_get_dsp(hdl, ds, p) != ZL_SUCCESS) {\n            fprintf(stderr, \"b: Error getting p'\\n\");\n            ret = B_FAILURE;\n        }\n\n        zl_fini(hdl);\n    } else {\n        fprintf(stderr, \"b: Error initializing zl\\n\");\n        ret = B_FAILURE;\n    }\n    fprintf(stdout, \"get_dsp: p: %s'\\n\", *p);\n    return ret;\n}\n</code></pre>\n\n<p>In the last function <code>zl_get_dsp</code>, <code>p</code> is printed properly. </p>\n\n<pre><code>zl_error\nzl_get_dsp(handle_t *hdl, const char *ds, char **p){\n    z_handle_t *z = NULL;\n    zl_error ret = ZL_SUCCESS;\n\n    if (hdl == NULL) {\n        fprintf(stderr, \"zl: zl isn't initialized\\n\");\n        ret = ZL_FAILURE;\n    } else {\n        if ((z = z_open(hdl, ds)) == NULL) {\n            fprintf(stderr, \"zfslib: Failure opening handle to zl '%s'\\n\", dataset);\n            ret = ZL_FAILURE;\n        } else {\n\n            if ((*p = get_pn(z)) != NULL){\n                fprintf(stdout, \"zl_get_dsp: '%s'\\n\", *p);\n            } else {\n                fprintf(stderr, \"zl: Failure getting pn\\n\");\n                ret = ZL_FAILURE;\n            }\n\n            z_close(z);\n        }\n    }\n    return ret;\n}\n</code></pre>\n\n<p>The function <code>get_pn</code> returns a string.</p>\n\n<pre><code>const char *get_pn(z_handle_t *z){\n    return (z-&gt;zp_hdl-&gt;pn);\n}\n\ntypedef struct z_handle z_handle_t;\ntypedef struct zp_handle zp_handle_t;\n\nstruct z_handle {\n    zp_handle_t *zp_hdl;\n    // ...\n};\n\nstruct zp_handle {\n    char pn[MAX_LEN];\n};\n</code></pre>\n\n<p>When it returns to the two other functions and attempts to print <code>p</code>, nothing is printed.</p>\n\n<p>Here's the output. <code>p</code> prints correctly once in the last function <code>zl_get_dsp</code>, but not in the outer two.</p>\n\n<pre><code>zl_get_dsp: 'v_printed'\nget_dsp: p: '\nrun_activate: .\n</code></pre>\n\n<p>I have tried dynamically allocating the variable, but it doesn't help. I've also tried passing in a pointer directly, or passing in the address of a variable and it makes no difference. </p>\n\n<p>I would think since I'm using a local variable in the first function that my variable shouldn't change by itself. I would understand if I was attempting to return a pointer that I hadn't passed in, but that's not what I'm doing. </p>\n\n<p>Is there something obvious I'm doing wrong?</p>\n\n<hr>\n\n<p>I was getting frustrated and couldn't make it work, I saw a post about using <code>strcpy</code>, I tried that which works. </p>\n\n<pre><code>char *temp_p;\n// ...\nif ((temp_p = get_pn(zhp)) != NULL){\n// ...\nstrcpy(*p,temp_p);\n</code></pre>\n\n<p>Would this be because the variable I was pointing to is being changed by another function somehow? And when I used strcpy it made a copy of it so it doesn't matter that the other variable was changed?</p>\n"}, {"tags": ["c", "batch-file", "gcc", "compiler-errors"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1503472594, "post_id": 45832851, "comment_id": 78623188, "body": "What&#39;s the reason for not wanting to <i>install</i> it? If it&#39;s just missing administrative privileges, you can &quot;install&quot; e.g. <a href=\"http://www.msys2.org/\" rel=\"nofollow noreferrer\">msys2</a> in any directory you have write access to and it comes with a shell where everything is nicely set up to just go and compile (and install &quot;packages&quot; with <code>pacman</code>)."}, {"owner": {"reputation": 320, "user_id": 3211801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dshng.jpg?s=128&g=1", "display_name": "Nandha", "link": "https://stackoverflow.com/users/3211801/nandha"}, "edited": false, "score": 0, "creation_date": 1503473669, "post_id": 45832851, "comment_id": 78623904, "body": "@FelixPalmen Consider my code will do like, it will get the paths to different compilers(win64gcc, win32gcc =&gt; can be minGW or Cygwin) from user and it will compile the given c code using the specified compiler."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503474204, "post_id": 45832851, "comment_id": 78624286, "body": "That&#39;s a very unusual thing to do. Instead, provide means to build with whatever toolchain you support (e.g. a batch file or msbuild script for <code>msvc</code>, a Makefile for <code>gcc</code>/ <code>clang</code>, etc)."}, {"owner": {"reputation": 320, "user_id": 3211801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dshng.jpg?s=128&g=1", "display_name": "Nandha", "link": "https://stackoverflow.com/users/3211801/nandha"}, "edited": false, "score": 0, "creation_date": 1503490950, "post_id": 45832851, "comment_id": 78636407, "body": "Hmm.. Thank you @FelixPalmen"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1503920897, "post_id": 45832851, "comment_id": 78794892, "body": "FWIW, I&#39;ve finally ditched CygWin/MinGW now that Windows itself provides an Ubuntu subsystem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7460932"}, "edited": false, "score": 1, "creation_date": 1503921007, "post_id": 45832851, "comment_id": 78794973, "body": "The problem should be with &quot;MyModule.h&quot; . Investigate that file"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7460932"}, "is_accepted": true, "score": 0, "last_activity_date": 1503926412, "creation_date": 1503926412, "answer_id": 45920079, "question_id": 45832851, "link": "https://stackoverflow.com/questions/45832851/compile-c-code-using-gcc-without-installing-mingw-cygwin/45920079#45920079", "title": "Compile c code using gcc without installing mingW/cygwin", "body": "<p>Check whether you are defining <em>snprintf</em> using macros in any of your header files. This error may be caused due to incorrect/unnecessary macro.</p>\n"}], "owner": {"reputation": 320, "user_id": 3211801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dshng.jpg?s=128&g=1", "display_name": "Nandha", "link": "https://stackoverflow.com/users/3211801/nandha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 45920079, "answer_count": 1, "score": 0, "last_activity_date": 1503926412, "creation_date": 1503471983, "last_edit_date": 1503920522, "question_id": 45832851, "link": "https://stackoverflow.com/questions/45832851/compile-c-code-using-gcc-without-installing-mingw-cygwin", "title": "Compile c code using gcc without installing mingW/cygwin", "body": "<p>I have visual studio installed in my system. So its corresponding compiler and environment variables are set. When i try to compile c file using <strong><em>cl</em></strong> command, it works fine. Now i zipped mingW from another system and extracted it to my system. Say i have it in <em>D:/mingW</em>. Now i have created a batch file for compiling the c file. The contents of the batch file are,</p>\n\n<pre><code>set gccPath=D:/mingW/bin\n%gccPath%/gcc.exe -c -std=c99 -o myC.o ../myC.c -I..\\.\n</code></pre>\n\n<p>When i run this batch file, it is producing few errors. \nOne such error is </p>\n\n<pre><code>stdio.h:209:71: error: macro \"snprintf\" requires 5 arguments, but only 4 given\n</code></pre>\n\n<p>The above error might be due to the fact that compiler takes the stdio.h of visual studio instead of mingW's default header file. \nAnother error is,</p>\n\n<pre><code>error: previous declaration of 'xxxxFun' was here\n</code></pre>\n\n<p>What should i change in the batch script to compile the c file completely using mingW. \nCompilation process is successful when we use Visual Studio, but throws error if we use gcc for the same set of files</p>\n\n<p><strong>EDIT:</strong>\nI fixed the latter error. \nAlso the first error doesn't occur when stdio.h is included at first. But if we include stdio.h at the middle of the include section, the error comes.</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;minmax.h&gt;\n\n#include \"myFunctions.h\"\n#include \"MyModule.h\"\n#include &lt;stdio.h&gt;\n</code></pre>\n\n<p>When we have <strong><em>stdio.h</em></strong> at last as shown, the error is coming. If we move the line <code>#include &lt;stdio.h&gt;</code> to any other lines above <code>#include &lt;MyModule.h&gt;</code> , the specified error is not coming. Any reason behind this strange behavior?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1503470889, "post_id": 45832469, "comment_id": 78622150, "body": "what do you mean by <code>string</code>? how <code>M1</code> was declared?"}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "reply_to_user": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 5, "creation_date": 1503470946, "post_id": 45832469, "comment_id": 78622190, "body": "@CIsForCookies I think <code>&quot;M1[r2][r3]&quot;</code> is the content of the string."}, {"owner": {"reputation": 997, "user_id": 7273447, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ej7gq.jpg?s=128&g=1", "display_name": "Elon Salfati", "link": "https://stackoverflow.com/users/7273447/elon-salfati"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1503471024, "post_id": 45832469, "comment_id": 78622241, "body": "@Federico klez Culloca  Like you said, &quot;M1[r2][r3]&quot; is the string"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1503471204, "post_id": 45832469, "comment_id": 78622337, "body": "Show some other strings and which part of them you want, otherwise the answer is <code>printf(&quot;M1&quot;);</code>."}, {"owner": {"reputation": 365, "user_id": 3949885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r49SJ.jpg?s=128&g=1", "display_name": "Nahid Shaiket", "link": "https://stackoverflow.com/users/3949885/nahid-shaiket"}, "edited": false, "score": 1, "creation_date": 1503471245, "post_id": 45832469, "comment_id": 78622360, "body": "Try this: <a href=\"https://stackoverflow.com/questions/2114377/strings-in-c-how-to-get-substring\">https://stackoverflow.com/questions/2114377/strings-in-c-how&zwnj;&#8203;-to-get-substring</a> Or this: <a href=\"https://stackoverflow.com/questions/4214314/get-a-substring-of-a-char\">https://stackoverflow.com/questions/4214314/get-a-substring-&zwnj;&#8203;of-a-char</a> Hope this helps."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 1, "creation_date": 1503471275, "post_id": 45832469, "comment_id": 78622382, "body": "Use <a href=\"https://linux.die.net/man/3/strtok\" rel=\"nofollow noreferrer\">strtok()</a> to tokenize strings based on a separator like <code>&quot;[&quot;</code>."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503471394, "post_id": 45832469, "comment_id": 78622460, "body": "@AndreKampling I was writing this answer and only after that saw your comment :("}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1503471453, "post_id": 45832469, "comment_id": 78622509, "body": "The question is unclear. Is the code the declaration or the string itself? If it is the string, then why can&#39;t you use strchr as you propose yourself?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1503471551, "post_id": 45832469, "comment_id": 78622561, "body": "I thought this isn&#39;t a &quot;write my code&quot; site? The question is very poor quality."}, {"owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503471604, "post_id": 45832469, "comment_id": 78622596, "body": "@WeatherVane I agree. This isn&#39;t even trying."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503473110, "post_id": 45832469, "comment_id": 78623496, "body": "<code>char id[8]; sscanf(&quot;M1[r2][r3]&quot;, &quot; %7[^[]&quot;, id);</code> (<code>int len = 0; sscanf(&quot;M1[r2][r3]&quot;, &quot; %7[^[][%n&quot;, id, &amp;len);</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 1, "creation_date": 1503471434, "post_id": 45832648, "comment_id": 78622489, "body": "You should mention that <code>strtok()</code> changes the input buffer so that printing <code>str</code> will be <code>&quot;M1&quot;</code> too because every separator will be replaced by a null terminator. Further no <code>[2]</code> is needed use just <code>[]</code>."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503471734, "post_id": 45832648, "comment_id": 78622688, "body": "I don&#39;t get why this answer get downvotes. Yes it isn&#39;t a &quot;write the code for me&quot; site but the answer isn&#39;t wrong or lacks in quality. I would say if somebody isn&#39;t comfortable with an answer to such a question he/she shouldn&#39;t upvote but also not downvote."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 1, "creation_date": 1503471832, "post_id": 45832648, "comment_id": 78622735, "body": "I agree that <code>[]</code> will be ok, but why not use <code>[2]</code>? I think of it as a reminder (especially for beginners) that &quot;[&quot; is a string literal that has 2 <code>char</code>"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 1, "creation_date": 1503471879, "post_id": 45832648, "comment_id": 78622757, "body": "@ClsForCookies: Ah I didn&#39;t saw it that way :D. I was just thinking don&#39;t repeat yourself."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1503471949, "post_id": 45832648, "comment_id": 78622804, "body": "@AndreKampling it is usually considered <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\"><b>unhelpful</b></a> to supply a pat answer to &quot;gimme the code&quot; questions."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1503472078, "post_id": 45832648, "comment_id": 78622883, "body": "I hope I&#39;m not overstepping my bounds, but from my experience, when I was doing my first steps here at SO, these were the answers that were most helpful for me. I got to learn about new functions and how someone else would achieve my question goal. If the OP wasn&#39;t a noob here, my answer would be different"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1503477667, "post_id": 45832648, "comment_id": 78626580, "body": "@CIsForCookies  nice answer, +1, but please include the headers needed, some users might not be aware of them (although they can see it in the ref, but...)."}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": true, "score": 8, "last_activity_date": 1503478646, "last_edit_date": 1503478646, "creation_date": 1503471346, "answer_id": 45832648, "question_id": 45832469, "link": "https://stackoverflow.com/questions/45832469/get-the-beginning-of-a-string-until-a-given-char/45832648#45832648", "title": "Get the beginning of a string until a given char", "body": "<p>What about using <a href=\"https://linux.die.net/man/3/strtok\" rel=\"noreferrer\"><code>strtok</code></a> and <code>\"[\"</code> as a delimiter?</p>\n\n<pre><code>#include &lt;string.h&gt; /* for strtok */\n#include &lt;stdio.h&gt;  /* for printf */\nint main()\n{\n    char str[] = \"M1[r2][r3]\"; // str will be modified by strtok\n    const char deli[] = \"[\";   // deli could also be declared as [2] or as const char *. Take your pick...\n    char *token;\n\n    token = strtok(str, deli); // can also call strtok(str, \"[\"); and not use variable deli at all\n    printf(\"%s\", token);       // printf(\"%s\", str); will print the same result\n\n    /* OUTPUT: M1 */\n\n    return 0;    \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1503471472, "creation_date": 1503471472, "answer_id": 45832679, "question_id": 45832469, "link": "https://stackoverflow.com/questions/45832469/get-the-beginning-of-a-string-until-a-given-char/45832679#45832679", "title": "Get the beginning of a string until a given char", "body": "<p>Use <a href=\"http://www.cplusplus.com/reference/cstring/strtok/\" rel=\"nofollow noreferrer\"><code>strtok()</code></a> and the character to stop (a delimeter, in your case <code>[</code>) like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main ()\n{\n  char str[] =\"M1[r2][r3]\";\n  printf (\"Getting M1 from \\\"%s\\\":\\n\",str);\n  strtok (str,\"[\");\n  if (str != NULL)\n    printf (\"%s\\n\",str);\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Getting M1 from \"M1[r2][r3]\":\nM1\n</code></pre>\n\n<hr>\n\n<p>However, if you know the length of the substring, you should see <a href=\"https://stackoverflow.com/questions/4214314/get-a-substring-of-a-char\">Get a substring of a char*</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1503475009, "last_edit_date": 1503475009, "creation_date": 1503473972, "answer_id": 45833514, "question_id": 45832469, "link": "https://stackoverflow.com/questions/45832469/get-the-beginning-of-a-string-until-a-given-char/45833514#45833514", "title": "Get the beginning of a string until a given char", "body": "<p>Use <a href=\"http://www.cplusplus.com/reference/cstdio/sscanf/\" rel=\"nofollow noreferrer\"><code>sscanf()</code></a> like this:</p>\n\n<pre><code>char subStr[3];\nsscanf(\"M1[r2][r3]\", \" %2[^[]\", subStr);\n</code></pre>\n\n<p>where <code>[^[]</code> means a character except <code>[</code> and 2 guards the length of the string written into the substring (it's equal to <code>subStr</code>'s size - 1, so that space for the NULL terminator is available).</p>\n\n<p>as BLUEPIXY suggested.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1503493319, "creation_date": 1503493319, "answer_id": 45840521, "question_id": 45832469, "link": "https://stackoverflow.com/questions/45832469/get-the-beginning-of-a-string-until-a-given-char/45840521#45840521", "title": "Get the beginning of a string until a given char", "body": "<blockquote>\n  <p>something like strchr() a function that get the string and a char to stop at.</p>\n</blockquote>\n\n<p>If only a printing of the sub-string is needed, use <code>strcspn()</code> which find the offset when <code>'['</code> first occurs, (or the end if not found).  This does not alter the source string.</p>\n\n<pre><code>const char *s = \"M1[r2][r3]\";\nprintf(\"%.*s\\n\", strcspn(s, \"[\"), s);\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>M1\n</code></pre>\n"}], "owner": {"reputation": 997, "user_id": 7273447, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ej7gq.jpg?s=128&g=1", "display_name": "Elon Salfati", "link": "https://stackoverflow.com/users/7273447/elon-salfati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14607, "favorite_count": 0, "accepted_answer_id": 45832648, "answer_count": 4, "score": -4, "last_activity_date": 1503493319, "creation_date": 1503470784, "last_edit_date": 1503492924, "question_id": 45832469, "link": "https://stackoverflow.com/questions/45832469/get-the-beginning-of-a-string-until-a-given-char", "title": "Get the beginning of a string until a given char", "body": "<p>I know that is a simple question but I couldn't find the answer.</p>\n\n<p>I have this string: </p>\n\n<pre><code>\"M1[r2][r3]\"\n</code></pre>\n\n<p>I want to get only the <code>\"M1\"</code>, I'm looking for something like <code>strchr()</code>\na function that get the string and a <code>char</code> to stop at.</p>\n"}, {"tags": ["c", "text-parsing", "word2vec"], "answers": [{"tags": [], "owner": {"reputation": 39521, "user_id": 130288, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab7ddf1907847478bc7ad808cd176305?s=128&d=identicon&r=PG", "display_name": "gojomo", "link": "https://stackoverflow.com/users/130288/gojomo"}, "is_accepted": true, "score": 1, "last_activity_date": 1503470277, "creation_date": 1503470277, "answer_id": 45832291, "question_id": 45832134, "link": "https://stackoverflow.com/questions/45832134/how-to-modify-word2vec-code-to-build-embedding-for-tab-delimited-sequence-of-phr/45832291#45832291", "title": "How to modify word2vec code to build embedding for tab-delimited sequence of phrases?", "body": "<p>The line <a href=\"https://github.com/tmikolov/word2vec/blob/20c129af10659f7c50e86e3be406df663beff438/word2vec.c#L80\" rel=\"nofollow noreferrer\">https://github.com/tmikolov/word2vec/blob/20c129af10659f7c50e86e3be406df663beff438/word2vec.c#L80</a> defines the delimiters in <code>word2vec.c</code>; if you're compiling that file, you could edit that line &amp; re-compile to make it behave differently. </p>\n\n<p>But, it'd be easier and more robust (if in fact you're using some other word2vec implementation) if you simply pre-processed your text to transform it into the expected form. For example, you might change all spaces <code>' '</code> to underscores <code>'_'</code> (or some other plug character, if any original underscores are important to keep distinct). </p>\n\n<p>When later interpreting the results, remember to apply the same space-to-underscore transform on lookups, or reverse it by replacing underscore-with-space to display results. </p>\n"}], "owner": {"reputation": 781, "user_id": 4797348, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/gPYUQ.jpg?s=128&g=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/4797348/osiris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 45832291, "answer_count": 1, "score": 0, "last_activity_date": 1503470277, "creation_date": 1503469688, "last_edit_date": 1503470025, "question_id": 45832134, "link": "https://stackoverflow.com/questions/45832134/how-to-modify-word2vec-code-to-build-embedding-for-tab-delimited-sequence-of-phr", "title": "How to modify word2vec code to build embedding for tab-delimited sequence of phrases?", "body": "<p>Given text file with lines as follows:</p>\n\n<pre><code>Phrase foo\\tPhrase bla\\tPhrase blabla\\t...\nPhrase bar\\tPhrase blabla\\tPhrase blablabla\\t...\n</code></pre>\n\n<p>where each text line is a tab-delimited sequence of of phrases, which can contain <code>space</code> and other special characters. We are interested in embedding at phrase level, NOT word level.</p>\n\n<p>The current word2vec.c support \"space\", \"tab\", \"new line\" as delimiters. How to disable \"space\" and enable only \"tab\" and \"new line\" as delimiters in word2vec.c in this case?</p>\n\n<p>I got word2vec.c from Tomas Mikolov <a href=\"https://github.com/tmikolov/word2vec\" rel=\"nofollow noreferrer\">GitHub</a></p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 1, "creation_date": 1503474339, "post_id": 45832047, "comment_id": 78624367, "body": "One simple solution will be using a 2D array for factor data and 2 1D arrays for temperature and pressure value. Then relating all coloms and rows to respective temp and pressure values."}, {"owner": {"reputation": 1, "user_id": 8428978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b164cb6cfc6b4f61d38f2f16f060c77?s=128&d=identicon&r=PG&f=1", "display_name": "Upendra", "link": "https://stackoverflow.com/users/8428978/upendra"}, "reply_to_user": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 0, "creation_date": 1503475483, "post_id": 45832047, "comment_id": 78625117, "body": "Thank you ,can you please explain me with code"}, {"owner": {"reputation": 452, "user_id": 5898372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s33No.gif?s=128&g=1", "display_name": "John Forkosh", "link": "https://stackoverflow.com/users/5898372/john-forkosh"}, "edited": false, "score": 0, "creation_date": 1503475964, "post_id": 45832047, "comment_id": 78625445, "body": "Upendra, for code, see, for example, <a href=\"https://helloacm.com/cc-function-to-compute-the-bilinear-interpolation/\" rel=\"nofollow noreferrer\">helloacm.com/cc-function-to-compute-the-bilinear-interpolati&zwnj;&#8203;on</a> Or just google &quot;bilinear interpolation&quot; or &quot;two-dimensional interpolation&quot; or anything like that for many more examples. I believe you&#39;re going to want a function something like <b>double factor(double temp, double pressure)</b> that finds the four-point grid surrounding the input temp,pressure and interpolates between those points back to the input values. If you&#39;re talking about an ideal gas, then you probably want linear interpolation. Otherwise, depends on what you&#39;re dealing with."}, {"owner": {"reputation": 1, "user_id": 8428978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b164cb6cfc6b4f61d38f2f16f060c77?s=128&d=identicon&r=PG&f=1", "display_name": "Upendra", "link": "https://stackoverflow.com/users/8428978/upendra"}, "edited": false, "score": 0, "creation_date": 1503478479, "post_id": 45832047, "comment_id": 78627142, "body": "Thank you john,can anyone help me to solve this using arrays or array of structures in c programming ."}, {"owner": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 0, "creation_date": 1503481133, "post_id": 45832047, "comment_id": 78629169, "body": "@Upendra, this site for solving particular problems faced while programming or giving directions, not for solving homework problems."}, {"owner": {"reputation": 1, "user_id": 8428978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b164cb6cfc6b4f61d38f2f16f060c77?s=128&d=identicon&r=PG&f=1", "display_name": "Upendra", "link": "https://stackoverflow.com/users/8428978/upendra"}, "reply_to_user": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 0, "creation_date": 1503481500, "post_id": 45832047, "comment_id": 78629449, "body": "@Sma ,yes i know and i am asking for guidelines to implement it .thank you"}, {"owner": {"reputation": 1, "user_id": 8428978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b164cb6cfc6b4f61d38f2f16f060c77?s=128&d=identicon&r=PG&f=1", "display_name": "Upendra", "link": "https://stackoverflow.com/users/8428978/upendra"}, "reply_to_user": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 0, "creation_date": 1503484236, "post_id": 45832047, "comment_id": 78631438, "body": "@Sma, Could you please explain me this ?"}, {"owner": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 0, "creation_date": 1503486250, "post_id": 45832047, "comment_id": 78632846, "body": "@Upendra, 1 approach can be storing all the factor value in <code>NxM</code> 2D <code>float&#47;double</code> matrix, where N and M are number of Temp and pressure values respectively. Then next step is storing all these Temp and pressure vaules (axis) in seperate 1D <code>int&#47;float</code> matrix. Now during search match the value of temp and pressure in their respective matrix. The index of both searches will be the final index in factor matrix."}], "owner": {"reputation": 1, "user_id": 8428978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b164cb6cfc6b4f61d38f2f16f060c77?s=128&d=identicon&r=PG&f=1", "display_name": "Upendra", "link": "https://stackoverflow.com/users/8428978/upendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503498849, "creation_date": 1503469345, "last_edit_date": 1503498849, "question_id": 45832047, "link": "https://stackoverflow.com/questions/45832047/how-to-make-a-table-and-access-table-parameters-using-array-of-structures-in-c", "title": "How to make a table and access table parameters using array of structures in C?", "body": "<p>Rows are Temperature and columns are Pressure.</p>\n\n<pre><code>Temp   750   755  760   765(pressure)\n\n0      1.1   2     1     4\n1       3    4     2     1  (factors)\n2       4    5     5     9\n</code></pre>\n\n<p>I need a help in making this table in code with that i would like to access factor values for respective temp and pressure .</p>\n\n<p>For example if temp 0 and pressure 750 the factor value is 1.1 ,if temp 1 and pressure 750 factor value is 3.</p>\n\n<p><a href=\"https://i.stack.imgur.com/YrUW2.jpg\" rel=\"nofollow noreferrer\">My Sample Output image</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1503468911, "post_id": 45831932, "comment_id": 78621073, "body": "High time to use a debugger."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1503468965, "post_id": 45831932, "comment_id": 78621102, "body": "Unrelated to your question, but you don&#39;t need an explicit terminator in string literals, the compiler will automatically add one for you."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1503468980, "post_id": 45831932, "comment_id": 78621113, "body": "<code>strcpy(supermercado[i].nome, nomes[i]);</code> : You need allocate for <code>.nome</code>. or just <code>supermercado[i].nome = nomes[i];</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1503469015, "post_id": 45831932, "comment_id": 78621133, "body": "As for your problem, your structure have a pointer to <code>char</code> which is supposed to be a string, but <i>where does the pointer actually point?</i>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1503469049, "post_id": 45831932, "comment_id": 78621153, "body": "where is that near-canonical dupe? &quot;Strange segmentation fault....&quot;"}], "owner": {"reputation": 11, "user_id": 7601867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ktcjq.jpg?s=128&g=1", "display_name": "japanet", "link": "https://stackoverflow.com/users/7601867/japanet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1503469148, "answer_count": 0, "score": 0, "last_activity_date": 1503473669, "creation_date": 1503468821, "last_edit_date": 1503473669, "question_id": 45831932, "link": "https://stackoverflow.com/questions/45831932/adding-and-printing-off-a-structure-array-in-c", "closed_reason": "Duplicate", "title": "Adding and printing off a structure array in C", "body": "<pre><code>struct mercadoria {\n    int codigo;\n    char *nome;\n    int qtd;\n    float valor;\n};\nstruct mercadoria supermercado[5];\n</code></pre>\n\n<hr>\n\n<p>I want to populate the array supermercado [ ] with a FOR loop.</p>\n\n<p>Here's some arrays with the elements codigo, nome and valor:</p>\n\n<hr>\n\n<pre><code>char *nomes [5] = {\"limao\\0\", \"abacate\\0\", \"chiclete\\0\", \"bolacha\\0\", \"peixe\\0\"};\nint codes [5] = {15, 13, 17, 19, 3};\nfloat values [5] = {3.99, 2.99, 1.99, 4.44, 9.49};\n</code></pre>\n\n<hr>\n\n<p>Here is what i've been trying:</p>\n\n<hr>\n\n<pre><code>for (int i = 4; i &gt;= 0; i -= 1) {   \n    supermercado[i].codigo = codes[i];\n    strcpy(supermercado[i].nome, nomes[i]);\n    supermercado[i].qtd = (i+1);\n    supermercado[i].valor = values[i];\n\n    printf(\"\\n ########## \\n\");\n    printf(\"\\n supermercado[%d].nome: %s\", i, supermercado[i].nome);\n    printf(\"\\n supermercado[%d].codigo: %d\", i, supermercado[i].codigo);\n    printf(\"\\n supermercado[%d].qtd: %d\", i, supermercado[i].qtd);\n    printf(\"\\n supermercado[%d].valor: %.2f\", i, supermercado[i].valor);\n    printf(\"\\n ########## \\n\");\n\n}\n</code></pre>\n\n<hr>\n\n<p>I'm able to compile it, but it doesnt print anything. Just \"Segmentation fault\".</p>\n\n<p>I'm new to C programming and quite clueless here...</p>\n\n<hr>\n\n<p><strong>EDIT</strong>\ni tested this code and it prints exactly what is told to:</p>\n\n<pre><code>printf(\"%s\", nomes[1]);\nprintf(\"\\n%d\", codes[1]);\n</code></pre>\n\n<p>If I can print their values why im not able to copy them to the array supermercado[ ] ? I guess im being stubborn, i just dont see the point of having to allocate a pointer.</p>\n"}, {"tags": ["c", "malloc", "c-strings"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1503467616, "post_id": 45831559, "comment_id": 78620442, "body": "At first sight: Please call <code>srand</code> only once at the beginning of <code>main</code>. Calling it repeatedly won&#39;t make it &quot;more random&quot;. On the contrary, with one-second granularity you will repeatedly reset the seed to the same value."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1503467648, "post_id": 45831559, "comment_id": 78620450, "body": "<a href=\"https://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of malloc() and family in C..</a>"}, {"owner": {"reputation": 126, "user_id": 3336433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NPOJf.jpg?s=128&g=1", "display_name": "twooBeers", "link": "https://stackoverflow.com/users/3336433/twoobeers"}, "edited": false, "score": 0, "creation_date": 1503467693, "post_id": 45831559, "comment_id": 78620467, "body": "on which system/os do you run your program?   did you try to reduce the printf calls and in increase loop time ?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 4, "creation_date": 1503467714, "post_id": 45831559, "comment_id": 78620482, "body": "<code>if(spots[spot] == &quot;00-00-00-0000&quot;)</code> -- This doesn&#39;t do what you think it does. It compares pointers. It might be useful to initialise all <code>spots</code>to <code>NULL</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1503468053, "post_id": 45831559, "comment_id": 78620645, "body": "I suggest flushing the output buffer, either by adding a newline <code>\\n</code> at the end of each message, or with <code>fflush(stdout);</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1503468444, "post_id": 45831559, "comment_id": 78620846, "body": "You have a memory leak: you allocate memory for <code>char *licensePlate</code> but never <code>free</code> it."}], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 4, "last_activity_date": 1503469544, "last_edit_date": 1503469544, "creation_date": 1503468199, "answer_id": 45831761, "question_id": 45831559, "link": "https://stackoverflow.com/questions/45831559/c-program-for-parking-simulation-not-giving-output/45831761#45831761", "title": "C program for parking simulation not giving output", "body": "<p>Your program has an access violation: <code>spots</code> is an array of ten string literals:</p>\n\n<pre><code>char *spots[] = {\n    \"00-00-00-0000\",\n    \"00-00-00-0000\",\n    \"00-00-00-0000\",\n    ...\n};\n</code></pre>\n\n<p>These literals are immutable and it is an arror to try to change them.</p>\n\n<p>Instead, define an array of ten char arrays that can hold your number plates. You need space for your pattern 2-2-2-4 plus one char for the null terminator:</p>\n\n<pre><code>char spots[10][14] = {\"\"};\n</code></pre>\n\n<p>Now <code>spots</code>are ten empty strings of max. length 13. You can testwhether you have overwritten them already with:</p>\n\n<pre><code>if (*spots[spot] == '\\0') ... // string is empty\n</code></pre>\n\n<hr>\n\n<p>There are more problems to your code:</p>\n\n<ul>\n<li>The dynamic memory allocation is really unnecessary for such a small program and make it complicated. You have 10 slots with 13-letter licence plates, which can easily be created in automatic memory.</li>\n<li>Dont allocate memory forthe licence plate and then <code>strcpy</code>. Create the licence plate directly by passing the 14-char buffer to a function that fills it.</li>\n<li>The longish <code>strcat</code> sequences are very clumsy. Consider using <code>snprintf</code>, which will create a licence plate in nearly one go.</li>\n</ul>\n\n<p>Here's a concise implementation of your problem that is limited to 30 parking actions:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nvoid make_license(char str[])\n{\n    static const char *code[] = {\n        \"AN\", \"AP\", \"AR\", \"AS\", \"BR\", \"CG\", \"CH\", \"DD\", \"DL\",\n        \"DN\", \"GA\", \"GJ\", \"HR\", \"HP\", \"JH\", \"JK\", \"KA\", \"KL\",\n        \"LD\", \"MH\", \"ML\", \"MP\", \"MN\", \"MZ\", \"NL\", \"OD\", \"PB\",\n        \"PY\", \"RJ\", \"SK\", \"TN\", \"TR\", \"TS\", \"UK\", \"UP\", \"WB\"\n    };\n\n    snprintf(str, 14, \"%s-%02d-%c%c-%04d\",\n        code[rand() % 36], rand() % 100, \n        'A' + rand() % 26, 'A' + rand() % 26,\n        rand() % 10000);    \n}\n\nint main()\n{\n    char spots[10][14] = {\"\"};\n    int n = 30;\n\n    srand(time(NULL));\n\n    while (n--) {\n        int spot = rand() % 10;\n\n        if (*spots[spot]) {\n            printf(\"Car %s leaves spot %d.\\n\", spots[spot], spot + 1);\n\n            *spots[spot] = '\\0';            // remove licence plate\n        } else {\n            make_license(spots[spot]);      // create licence plate\n\n            printf(\"Car %s arrives at spot %d.\\n\", spots[spot], spot + 1);\n        }\n    }\n\n    puts(\"\");\n    puts(\"Final arrangement\");\n\n    for (n = 0; n &lt; 10; n++) {\n        printf(\"%4d %s\\n\", n + 1, spots[n]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>If you want to use dynamic allocation (perhaps it was a requirement of the assignment), you should Make the licenseplates pointers to strings. Initialise them to <code>NULL</code>, free them if you remove them from the list and also be sure to free any remaining strings after you're done:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nchar *make_license(void)\n{\n    static const char *code[] = {\n        \"AN\", \"AP\", \"AR\", \"AS\", \"BR\", \"CG\", \"CH\", \"DD\", \"DL\",\n        \"DN\", \"GA\", \"GJ\", \"HR\", \"HP\", \"JH\", \"JK\", \"KA\", \"KL\",\n        \"LD\", \"MH\", \"ML\", \"MP\", \"MN\", \"MZ\", \"NL\", \"OD\", \"PB\",\n        \"PY\", \"RJ\", \"SK\", \"TN\", \"TR\", \"TS\", \"UK\", \"UP\", \"WB\"\n    };\n\n    char *str = malloc(14);\n\n    snprintf(str, 14, \"%s-%02d-%c%c-%04d\",\n        code[rand() % 36], rand() % 100, \n        'A' + rand() % 26, 'A' + rand() % 26,\n        rand() % 10000);\n\n    return str; \n}\n\nint main()\n{\n    char *spots[10] = {NULL};\n    int n = 30;\n\n    srand(time(NULL));\n\n    while (n--) {\n        int spot = rand() % 10;\n\n        if (spots[spot]) {\n            printf(\"Car %s leaves spot %d.\\n\", spots[spot], spot + 1);\n\n            free(spots[spot]);\n            spots[spot] = NULL;             // remove licence plate\n        } else {\n            spots[spot] = make_license();   // create licence plate\n\n            printf(\"Car %s arrives at spot %d.\\n\", spots[spot], spot + 1);\n        }\n    }\n\n    puts(\"\");\n    puts(\"Final arrangement\");\n\n    for (n = 0; n &lt; 10; n++) {\n        printf(\"%4d %s\\n\", n + 1, spots[n] ? spots[n] : \"--\");\n        free(spots[n]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>But you should clearly decide which approach you take. Your program ist a bit in between: It allocates memory and then tries to <code>strcpy</code> around the data as if you were using automatic memory buffers.</p>\n"}], "owner": {"reputation": 29, "user_id": 6129300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1296701177011890/picture?type=large", "display_name": "Sneha Shailesh", "link": "https://stackoverflow.com/users/6129300/sneha-shailesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503469544, "creation_date": 1503467385, "question_id": 45831559, "link": "https://stackoverflow.com/questions/45831559/c-program-for-parking-simulation-not-giving-output", "title": "C program for parking simulation not giving output", "body": "<p>I want to write a C program, where I have an array of 10 strings, where each string denotes the license plate number of the car parked at spot i. A spot is picked at random and if it is vacant, a random license plate number is generated and assigned to that spot, and if it is occupied, then the spot is vacated and the license plate number is deleted. However, the program is going into an infinite loop, which is what I want, but it is not printing any statements I have written to debug the program. The code is as follows:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdint.h&gt;\n\nchar * generateLicense()\n{\n    srand((unsigned)time(NULL));\n    char const *code[] = {\"AN\",\"AP\",\"AR\",\"AS\",\"BR\",\"CG\",\"CH\",\"DD\",\"DL\",\"DN\",\"GA\",\"GJ\",\"HR\",\"HP\",\"JH\",\"JK\",\"KA\",\"KL\",\"LD\",\"MH\",\"ML\",\"MP\",\"MN\",\"MZ\",\"NL\",\"OD\",\"PB\",\"PY\",\"RJ\",\"SK\",\"TN\",\"TR\",\"TS\",\"UK\",\"UP\",\"WB\"};\n    char const *alphabets[] = {\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\"};\n    char const *numbers[] = {\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"};  \n    char *licensePlate = (char *)malloc(100*sizeof(char));\n    strcpy(licensePlate,code[rand()%36]);\n    strcat(licensePlate,\"-\");\n    strcat(licensePlate,numbers[rand()%10]);\n    strcat(licensePlate,numbers[rand()%10]);\n    strcat(licensePlate,\"-\");\n    strcat(licensePlate,alphabets[rand()%26]);\n    strcat(licensePlate,alphabets[rand()%26]);\n    strcat(licensePlate,\"-\");\n    strcat(licensePlate,numbers[rand()%10]);\n    strcat(licensePlate,numbers[rand()%10]);\n    strcat(licensePlate,numbers[rand()%10]);\n    strcat(licensePlate,numbers[rand()%10]);\n    return licensePlate;    \n}\n\nint main()\n{\n    char *messagebody = (char *)malloc(100*sizeof(char));\n    char *licensePlate = (char *)malloc(100*sizeof(char));\n    char *currentSpot = (char *)malloc(10*sizeof(char));\n    char *by = \", by: \";\n    char *client = \"From client 1, \";\n    char *spots[] = {\"00-00-00-0000\",\"00-00-00-0000\",\"00-00-00-0000\",\"00-00-00-0000\",\"00-00-00-0000\",\"00-00-00-0000\",\"00-00-00-0000\",\"00-00-00-0000\",\"00-00-00-0000\",\"00-00-00-0000\"};\n    int spot;\n    printf(\"variables declared\\n\");\n    srand((unsigned)time(NULL));\n    while(1)\n    {\n        printf(\"in while loop\\n\");\n        //messagebody = \"\";\n        //licensePlate = \"\";\n        spot = rand()%10;\n        //currentSpot = \"\";\n        sprintf(currentSpot, \"%d\", spot);\n        printf(\"%s\",currentSpot);\n        strcpy(messagebody,client);\n        printf(\"%s\",messagebody);\n        if(spots[spot] == \"00-00-00-0000\")\n        {\n            printf(\"%s\",messagebody);\n            strcpy(licensePlate, generateLicense());\n            printf(\"%s\",licensePlate);\n            strcpy(spots[spot], licensePlate);\n            strcat(messagebody,\"spot occupied: \");\n            printf(\"%s\",messagebody);\n            strcat(messagebody,currentSpot);\n            printf(\"%s\",messagebody);\n            strcat(messagebody,by);\n            printf(\"%s\",messagebody);\n            strcat(messagebody,licensePlate);\n            printf(\"%s\",messagebody);\n        }\n        else\n        {\n            printf(\"%s\",messagebody);\n            strcpy(licensePlate, spots[spot]);\n            strcpy(spots[spot],\"00-00-00-0000\");\n            strcat(messagebody,\"spot vacated: \");\n            printf(\"%s\",messagebody);\n            strcat(messagebody,currentSpot);\n            printf(\"%s\",messagebody);\n            strcat(messagebody,by);\n            printf(\"%s\",messagebody);\n            strcat(messagebody,licensePlate);\n            printf(\"%s\",messagebody);\n        }\n        printf(\"%s\",messagebody);\n        sleep(5);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I have included the statements I wrote to debug the program as well. What am I doing wrong here?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1503467662, "post_id": 45831544, "comment_id": 78620460, "body": "Many warnings are enabled only when the thing they warn about is more likely than not to be an actual error and not just a common sloppy pattern. The compiler could warn you about a magnitude more potential problems, but this would lead to alarm fatigue and just make people disable warnings."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1503467741, "post_id": 45831544, "comment_id": 78620491, "body": "<code>pseudo code get warning on func2 but not func2:</code>...wait, what?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 7, "creation_date": 1503468070, "post_id": 45831544, "comment_id": 78620657, "body": "All integral types are implicitly convertible to each other. Pointers to different integral types are not."}], "answers": [{"tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": true, "score": 0, "last_activity_date": 1503471593, "creation_date": 1503471593, "answer_id": 45832731, "question_id": 45831544, "link": "https://stackoverflow.com/questions/45831544/pointer-targets-in-passing-argument-of-xxx-differ-in-signedness/45832731#45832731", "title": "pointer targets in passing argument of xxx differ in signedness", "body": "<p><code>int *</code> &amp; <code>unsigned int *</code> are two different pointer types that are <strong>not</strong> compatible.</p>\n\n<p>You have to explicitly cast pointer to be possible convert him to the other one.</p>\n\n<pre><code>func2((int*)pMyVar2);\n</code></pre>\n\n<hr>\n\n<p>While non-pointer <code>int</code> and <code>unsigned int</code></p>\n\n<p>From C standard <a href=\"/questions/tagged/c99\" class=\"post-tag\" title=\"show questions tagged &#39;c99&#39;\" rel=\"tag\">c99</a> <strong>6.3.1.3</strong></p>\n\n<blockquote>\n  <p>When a value with integer type is converted to another integer type\n  other than _Bool, if the value can be represented by the new type, it\n  is unchanged.</p>\n  \n  <p>Otherwise, if the new type is unsigned, the value is converted by\n  repeatedly adding or subtracting one more than the maximum value that\n  can be represented in the new type until the value is in the range of\n  the new type.</p>\n  \n  <p>Otherwise, the new type is signed and the value cannot be represented\n  in it; either the result is implementation-defined or an\n  implementation-defined signal is raised.</p>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 6662620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec70553536cceb0be27f2c8a6ec9066?s=128&d=identicon&r=PG&f=1", "display_name": "Tuopeebug", "link": "https://stackoverflow.com/users/6662620/tuopeebug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2097, "favorite_count": 0, "accepted_answer_id": 45832731, "answer_count": 1, "score": 1, "last_activity_date": 1503474054, "creation_date": 1503467322, "last_edit_date": 1503474054, "question_id": 45831544, "link": "https://stackoverflow.com/questions/45831544/pointer-targets-in-passing-argument-of-xxx-differ-in-signedness", "title": "pointer targets in passing argument of xxx differ in signedness", "body": "<p>I go compile error: <code>\"pointer targets in passing argument 4 of xxx differ in signedness [-Werror=pointer-sign]\"</code> since in my project compile warning is treated as error.\nBut what confuse me is that the following pseudo code get warning on func2 but not func1:</p>\n\n<pre><code>func1(int  var1);\n\nfunc2(int* var2);\n\nmy_func()\n{\n\n    unsigned int myVar1 = xxx;\n    unsigned int* pMyVar2 = ooo;\n\n    func1(myVar1);   //no warning\n    func2(pMyVar2);  //warning\n}\n</code></pre>\n\n<p>I thought there should also have warning for func1 since differ signedness argument is used, but only func2 get warning. Does it means pass pointer of differ signedness is more dangerous than pass value of differ signedness into function?\nOr is it simply configured seperately by compile option?</p>\n"}, {"tags": ["c", "dictionary", "key-value", "stdmap", "c++-standard-library"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1503465476, "post_id": 45831119, "comment_id": 78619633, "body": "You can create a wrapper around the C++ maps and link it with your c code. Won&#39;t have templates though."}, {"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 1, "creation_date": 1503465576, "post_id": 45831119, "comment_id": 78619671, "body": "<a href=\"https://stackoverflow.com/questions/647054/porting-stdmap-to-c\">stackoverflow.com/questions/647054/porting-stdmap-to-c</a>"}, {"owner": {"reputation": 1652, "user_id": 1437043, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kFlcw.jpg?s=128&g=1", "display_name": "Hafnernuss", "link": "https://stackoverflow.com/users/1437043/hafnernuss"}, "edited": false, "score": 1, "creation_date": 1503465607, "post_id": 45831119, "comment_id": 78619683, "body": "<a href=\"http://troydhanson.github.io/uthash/index.html\" rel=\"nofollow noreferrer\">troydhanson.github.io/uthash/index.html</a> maybe something for you"}], "owner": {"reputation": 694, "user_id": 6528719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyH70.jpg?s=128&g=1", "display_name": "Dinesh Gowda", "link": "https://stackoverflow.com/users/6528719/dinesh-gowda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "closed_date": 1503465595, "answer_count": 0, "score": 1, "last_activity_date": 1539282200, "creation_date": 1503465338, "last_edit_date": 1539282200, "question_id": 45831119, "link": "https://stackoverflow.com/questions/45831119/how-to-use-c-maps-in-c-programming", "closed_reason": "Duplicate", "title": "How to use C++ maps in C programming?", "body": "<p><em>I have a C program, in which I want to store Key value pair of 2 strings.<br>\nI know we can use <code>std::map</code> in C++.<br>\nI want to know is there a way I can use<code>std::map</code> in C or is there any other substitute for storing data similar to it in C.</em></p>\n"}, {"tags": ["c", "windows", "sublimetext3"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503465430, "post_id": 45830798, "comment_id": 78619620, "body": "This &quot;solution&quot; doesn&#39;t make sense, these subsystems are mutually exclusive. Remove <code>-mwindows</code>."}], "answers": [{"tags": [], "owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "is_accepted": true, "score": 2, "last_activity_date": 1503464274, "creation_date": 1503464274, "answer_id": 45830927, "question_id": 45830798, "link": "https://stackoverflow.com/questions/45830798/windows-gui-c-build-system-in-sublime-text/45830927#45830927", "title": "Windows gui C build system in sublime text", "body": "<p>If you want to build a console application, then you need to also add the <code>-mconsole</code> option to your compiler command line.</p>\n\n<p>That will give you a Windows application that automatically creates and runs in the context of a console (text-based environment).</p>\n\n<p>If you just pass <code>-mwindows</code>, then you get a standard Windows application that expects to have a GUI. You (your code) is responsible for creating a window and outputting text/graphics to that window. It doesn't happen automatically.</p>\n"}], "owner": {"reputation": 23, "user_id": 6775880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8da086a69520b25a6ede4c661d234e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lpdnn", "link": "https://stackoverflow.com/users/6775880/lpdnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 45830927, "answer_count": 1, "score": 0, "last_activity_date": 1503465606, "creation_date": 1503463473, "last_edit_date": 1503465606, "question_id": 45830798, "link": "https://stackoverflow.com/questions/45830798/windows-gui-c-build-system-in-sublime-text", "title": "Windows gui C build system in sublime text", "body": "<p>I had linker error: undefined reference to windows.h functions like textout,selectobject,beginpaint. But I was able to remove the error \nby adding <code>\"-mwindows\"</code> in sublime build system. But now im not able to get any output in windows terminal. Eg: if i try to use <code>printf(\"test\");</code> it won't show any output in windows terminal and <code>textout()</code> will only output textout string in gui window.<p>\nI tried it with codeblocks and it was able to get output of printf in windows terminal and textout in another window.<p>\nIs there anyway i can make sublime build system do the same?</p>\n\n<pre><code>{\n\"cmd\": [\"gcc\", \"-Wall\",\"-mwindows\",\"-pedantic-errors\", \"$file_name\",\"-o\", \"${file_base_name}.exe\", \"&amp;&amp;\", \"start\", \"cmd\", \"/k\" , \"$file_base_name\"],\n\"selector\": \"source.c\",\n\"working_dir\": \"${file_path}\",\n\"shell\": true\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503461420, "post_id": 45830475, "comment_id": 78618422, "body": "First you need to increase the buffer. (<code>&quot;hello world&quot;</code> has 11 characters in length.)"}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503461675, "post_id": 45830475, "comment_id": 78618486, "body": "Lets say I enter &quot;hello world&quot; in. How do I exit out since that will go over the buffer. That is one of my questions. I will try to edit the post to make it clearer though."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1503461985, "post_id": 45830475, "comment_id": 78618572, "body": "@JoelHansson I have added an answer for case 2. But can you clarify more on what should happen in case there are 2 words? Do you want to report failure and exit?"}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503462225, "post_id": 45830475, "comment_id": 78618640, "body": "Yes I want to exit. Also I edited the post and responded to your answer clarifying some things."}, {"owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 0, "creation_date": 1503462340, "post_id": 45830475, "comment_id": 78618672, "body": "@JoelHansson Clarify. If the file has more than 10 characters in it, what do you want to do? Put 10 characters into a buffer? Not put 10 characters into a buffer?"}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503462514, "post_id": 45830475, "comment_id": 78618713, "body": "@Chitality If I exceed the buffer I want to print an error and exit the program."}, {"owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 0, "creation_date": 1503462613, "post_id": 45830475, "comment_id": 78618737, "body": "@JoelHansson At no point should you ever exceed the buffer. As a C programmer, you must ensure that your program never writes past the end of a buffer. That&#39;s undefined behavior."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503462733, "post_id": 45830475, "comment_id": 78618763, "body": "That is fixed with the %15s though right? If not then how do I do that? I want to exit out when that happens."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 1, "creation_date": 1503462007, "post_id": 45830566, "comment_id": 78618576, "body": "This means the file has to end though, right? There is more data in the file that I will have to continue reading in the program I will be using that for. I want to read just one line. I will edit the post to make this clearer."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503463805, "post_id": 45830566, "comment_id": 78619040, "body": "As I said Im not really that experienced. Could you explain a little further how this works? (I am also really tired because I have been pulling an all nighter. So assume I am really stupid)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503464188, "post_id": 45830566, "comment_id": 78619146, "body": "@JoelHansson I think you understood how I determined the end of the file. By seeking to the end and doing <code>ftell</code>.But since you only needed to go to the end of the line - I used &quot;%*[\\n]&quot; with <code>fscanf</code>. This reads any number of characters that are not <code>\\n</code> (end of line). Then the %n tells it to write the length read into <code>length</code>. This way you know how long the read is going to be. If it is more than your buffer length, you can discard."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503464251, "post_id": 45830566, "comment_id": 78619165, "body": "@JoelHansson For checking multiple words. I first calculate end of line using previous method. Then read a single word using <code>%s</code> with <code>fscanf</code>. If the length read is less that the line length, it must be multiple words."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503464603, "post_id": 45830566, "comment_id": 78619290, "body": "Ok I understand the multiple words thing. But I dont fully understand the &quot;previous method&quot; as you called it.   When I do:     int length;     fscanf(myFile, &quot;%*[^\\n]%n&quot;,&amp;length);  If I actually have a valid string. Where does that go?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503464694, "post_id": 45830566, "comment_id": 78619328, "body": "@JoelHansson since we have put a <code>*</code> between <code>%</code> and <code>[...]</code> it gets discarded. Basically read but not stored anywhere. You have to do a separate read after verifying that the length is correct. This is like validating before reading."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503464986, "post_id": 45830566, "comment_id": 78619455, "body": "So how do I get back to the start of the line then? &quot;Do remember to fseek back to where you were.&quot; I still dont know what this means. I think I understand everything except that though."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503465072, "post_id": 45830566, "comment_id": 78619489, "body": "@JoelHansson before doing this test do <code>size_t position = ftell(myFile);</code> and after the test <code>fseek(myFile, position, SEEK_SET);</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503465199, "post_id": 45830566, "comment_id": 78619528, "body": "@JoelHansson or you could just do <code>fseek(myFile, -length, SEEK_CUR);</code>. Both are equivalent."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503465200, "post_id": 45830566, "comment_id": 78619529, "body": "Ok I think I get it. Thanks alot."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 1, "last_activity_date": 1503465350, "last_edit_date": 1503465350, "creation_date": 1503461765, "answer_id": 45830566, "question_id": 45830475, "link": "https://stackoverflow.com/questions/45830475/fscanf-error-handling-for-unwanted-input/45830566#45830566", "title": "fscanf Error handling for unwanted input", "body": "<p>For 2. You can do an early detection as -</p>\n\n<pre><code>int length;\nfscanf(myFile, \"%*[^\\n]%n\",&amp;length);\nif(length &gt; 10)\n    //exit with failure\n</code></pre>\n\n<p>You can then again compare length with <code>10</code>. Do remember to <code>fseek</code> back to where you were using</p>\n\n<pre><code>fseek(myFile, -length, SEEK_CUR);        \n</code></pre>\n\n<p>For case 4 - since you already know the end all you have to do is read a word and check if you have read all as -</p>\n\n<pre><code>fscanf(myFile, \"%15s\", buffer);\nif (strlen(buffer) &lt; length)\n    //return failure and exit\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503462424, "post_id": 45830631, "comment_id": 78618699, "body": "Thanks for the pointers. I&#39;l try to edit the post. But this doesnt answer my questions though. Or am I missing something?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503462617, "post_id": 45830631, "comment_id": 78618738, "body": "Actually, above answers point 2 (1 and 3 are solved already), remains point 4. How do you want to handle &quot;hello world&quot; (point 4; just wanted to add some lines...)? Do you want to read the words independently (-&gt; loop) or into one single string (then fscanf is <i>out</i>)."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503462910, "post_id": 45830631, "comment_id": 78618808, "body": "If I get multiple words in one line when reading the file I want to report an error and exit the program.  So If I use that code and the first line of the file is &quot;Thisisaverylongstringthatislongerthen15characters&quot; will I catch that with your if()?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503463089, "post_id": 45830631, "comment_id": 78618856, "body": "Exactly. But fscanf will stop at <i>any</i> whitespace, so you won&#39;t detect multiple words this way. Give me some seconds and I&#39;ll post something for this problem, too..."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503463124, "post_id": 45830631, "comment_id": 78618862, "body": "Oh I see. Since you have the space for an extra character if I exceed the desired length that character slot will be filled and I can catch it. I understnd. Thanks."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1503465036, "last_edit_date": 1503465036, "creation_date": 1503462211, "answer_id": 45830631, "question_id": 45830475, "link": "https://stackoverflow.com/questions/45830475/fscanf-error-handling-for-unwanted-input/45830631#45830631", "title": "fscanf Error handling for unwanted input", "body": "<p>At very first, your buffer needs to be large enough to store the characters read from the file, <em>including</em> the terminating null character:</p>\n\n<pre><code>fscanf(myFile, \"%15s\", buffer)\n</code></pre>\n\n<p>So your buffer needs to be <em>16</em> characters large!</p>\n\n<p>Then for checking the string not to be cut off, read one character more(!):</p>\n\n<pre><code>char buffer[17]; // sufficiently large to store string + 0 character\nif (fscanf(myFile, \"%16s\", buffer) != 1)\n//                    ^ (!)\n</code></pre>\n\n<p>And then check the string length:</p>\n\n<pre><code>else if(strlen(buffer) &gt; 15)\n    // invalid string\n</code></pre>\n\n<p>Edit: handling the 'multiple words' problem...</p>\n\n<p>Assuming you've read the word successfully as above, you need yet to check if another one follows. So you need to analyze the rest of the following whitespace:</p>\n\n<pre><code>for(char c = fgetc(myFile); c != EOF &amp;&amp; c != '\\n'; c = fgetc(myFile))\n//                                        ^ not the desired one\n//                            ^ not end of file, we are not yet done\n{\n    if(!isspace((unsigned char)c))\n        exit(-1); // undesired non-whitespace (-&gt; multiple words)\n}\n</code></pre>\n\n<p>As you exit anyway, you do not need to care about losing the first character of the subsequent word either...</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503463896, "post_id": 45830824, "comment_id": 78619062, "body": "What does this mean? &quot;%32[^\\n]%*c&quot; Could you break it down for me?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503463999, "post_id": 45830824, "comment_id": 78619091, "body": "@JoelHansson <code>&quot;%32[^\\n]%*c&quot;</code> Read up to the newline within the specified size, and discard newlines (or extra single characters). For more information <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">fscanf</a>"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1503463642, "creation_date": 1503463642, "answer_id": 45830824, "question_id": 45830475, "link": "https://stackoverflow.com/questions/45830475/fscanf-error-handling-for-unwanted-input/45830824#45830824", "title": "fscanf Error handling for unwanted input", "body": "<p>try like this</p>\n\n<pre><code>char buffer[32+1];//First prepare a buffer of sufficient length.\nchar word[16+1], extra_word[4];\n\nif (fscanf(myFile, \"%32[^\\n]%*c\", buffer) != 1 || //try read one line (or use fgets)\n    strlen(buffer)&gt;16 || //Examine the length or length longer than the expected format\n    sscanf(buffer, \"%s %3s\", word, extra_word) == 2){//extra word exist ?\n    printf(\"The file is not formated correctly.\\n\");\n    fclose(myFile);\n    exit(-1);\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 45830566, "answer_count": 3, "score": 0, "last_activity_date": 1503465350, "creation_date": 1503461106, "last_edit_date": 1503462590, "question_id": 45830475, "link": "https://stackoverflow.com/questions/45830475/fscanf-error-handling-for-unwanted-input", "title": "fscanf Error handling for unwanted input", "body": "<p>I am trying to understand how you can handle some unwanted input with fscanf.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    FILE *myFile;\n    myFile = fopen(\"../map1.map\", \"r\");\n    if (myFile == NULL){\n        printf(\"Couldn't open file.\\n\");\n        exit(-1);\n    }\n\n    char buffer[16];\n\n    if (fscanf(myFile, \"%15s\", buffer) != 1){\n        printf(\"The file is not formated correctly.\\n\");;\n        fclose(myFile);\n        exit(-1);\n    }\n}\n</code></pre>\n\n<p>I have this code. I want to make sure that I print an error and then exit out of the program in these scenarios (I dont care what happens with the overflowing characters I just want to exit):</p>\n\n<ol>\n<li><p>Can't find/open the file. (This works)</p></li>\n<li><p>The buffer gets overflowed. I dont want it to just grab the first 15 characters in this case. I want the program to exit. I also want to be able to continue reading the file later in the program. It shouldnt matter if there are more lines in the file. (This is the main issue).</p></li>\n<li><p>I get no value at all (This works.)</p></li>\n<li><p>I get 2 words (example: \"hello\" = 1 words, \"hello world\" = 2 words) (I cant figure this out either)</p></li>\n</ol>\n\n<p>I want to know how I can test these things. What comparisons do I use etc.</p>\n\n<p>Im not a very experienced user so please point out any obvious flaws and I will fix them.</p>\n\n<p>To make it clearer. I dont want to make this work. I want to know how to exit out if it doesnt work. This works fine with the intended input.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1503461199, "post_id": 45830471, "comment_id": 78618367, "body": "What do you think the declaration <code>char ch == NULL;</code> do? What is the difference between null character and <code>NULL</code> pointer?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1503461617, "post_id": 45830471, "comment_id": 78618467, "body": "<code>char ch == NULL;</code> (<code>==</code> typo as <code>=</code>)--&gt; <code>char ch = 0;</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503470147, "post_id": 45830471, "comment_id": 78621705, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1503470124, "post_id": 45831124, "comment_id": 78621691, "body": "Or, better, <code>char ch = &#39;\\0&#39;;</code>."}, {"owner": {"reputation": 25894, "user_id": 35881, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/95ee2befbddbd112fbbd1c8b500fcfc9?s=128&d=identicon&r=PG", "display_name": "A. Levy", "link": "https://stackoverflow.com/users/35881/a-levy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503675848, "post_id": 45831124, "comment_id": 78728853, "body": "@JonathanLeffler Good point. Your &#39;\\0&#39; literal will have the type char, at least in a conforming C++ compiler. So that will, technically, have a more appropriate type. However, since the question is tagged &quot;c&quot; and we are being pedantic here, a character literal has the type int in plain old C. So, if you are using  a C compiler, &#39;\\0&#39; and 0 are exactly the same thing. You may want to use the character literal notation to remind yourself, and future readers of the code, that the value is indeed a character, but I&#39;d prefer to just skip the extraneous 3 keystrokes."}], "tags": [], "owner": {"reputation": 25894, "user_id": 35881, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/95ee2befbddbd112fbbd1c8b500fcfc9?s=128&d=identicon&r=PG", "display_name": "A. Levy", "link": "https://stackoverflow.com/users/35881/a-levy"}, "is_accepted": true, "score": 1, "last_activity_date": 1503465368, "creation_date": 1503465368, "answer_id": 45831124, "question_id": 45830471, "link": "https://stackoverflow.com/questions/45830471/how-can-i-solve-my-code-error-when-use-pointer-for-char/45831124#45831124", "title": "How can I solve my code error when use pointer for char", "body": "<p>The compiler is telling you that it expects NULL to be assigned to a pointer type. You are assigning NULL to a character, not a character pointer. So, it is implicitly converting the NULL pointer to a 0 integer before assigning it to the character ch.</p>\n\n<p>It is warning you that this is probably not what you intended and you should examine the code. In your case, you probably want to just assign 0 to the character.</p>\n\n<pre><code>char ch = 0;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7961547, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/zvTHT.jpg?s=128&g=1", "display_name": "No name", "link": "https://stackoverflow.com/users/7961547/no-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 45831124, "answer_count": 1, "score": 0, "last_activity_date": 1503465368, "creation_date": 1503461088, "question_id": 45830471, "link": "https://stackoverflow.com/questions/45830471/how-can-i-solve-my-code-error-when-use-pointer-for-char", "title": "How can I solve my code error when use pointer for char", "body": "<p>I got warning when I try to compile, I can not solve this problem. Could you guys please help me. Thank you.</p>\n\n<blockquote>\n  <p>warning: initialization makes integer from pointer without a cast\n  [-Wint-conversion]    char ch = NULL;\n               ^</p>\n</blockquote>\n\n<p>And here my codes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"order.h\"\nvoid readInts(int* ptr1, int*ptr2, int*ptr3, char* ptrChar);\n\nint main(void)\n{\n    int p1, p2, p3;\n    char ch == NULL;\n    readInts(&amp;p1, &amp;p2, &amp;p3, &amp;ch);\n\n    if (ch == 'A')\n    {\n    printf(\"%s\\n\", \"Ascending3\");\n    printf(\"%s %d %d %d\\n\", \"Before swap: \", p1, p2, p3);\n    ascending3(&amp;p1, &amp;p2, &amp;p3);\n    printf(\"%s %d %d %d\\n\\n\", \"After: \", p1, p2, p3);\n    }\n    else if (ch =='B')\n    {\n    printf(\"%s\\n\", \"Descending3\");\n    printf(\"%s %d %d %d\\n\", \"Before swap: \", p1, p2, p3);\n    descending3(&amp;p1, &amp;p2, &amp;p3);\n    printf(\"%s %d %d %d\\n\\n\", \"After swap: \", p1, p2, p3);\n    }\n    return 0;\n}\n\nvoid readInts(int* ptr1, int* ptr2, int* ptr3, char* ptrChar)\n{\n    printf(\"%s\\n\", \"Enter 3 numbers: \");\n    scanf(\"%d %d %d\", ptr1, ptr2, ptr3);\n    printf(\"%s\\n\", \"Enter a character A&amp;B\");\n    scanf(\" %c\", ptrChar);\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "concurrency", "server", "epoll"], "comments": [{"owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 0, "creation_date": 1503460359, "post_id": 45830135, "comment_id": 78618176, "body": "Why not have the server fork the process on a successful connection?"}, {"owner": {"reputation": 79, "user_id": 8033564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63548956fc5a34ba87863884509d5522?s=128&d=identicon&r=PG&f=1", "display_name": "buddy2891", "link": "https://stackoverflow.com/users/8033564/buddy2891"}, "reply_to_user": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 1, "creation_date": 1503460556, "post_id": 45830135, "comment_id": 78618223, "body": "@Chirality that would be horrible for performance which is why I&#39;ve chosen the even-driven approach"}, {"owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 0, "creation_date": 1503461205, "post_id": 45830135, "comment_id": 78618370, "body": "I should have clarified. Can you not fork the <code>readClientData</code> function so that the server (parent process) continues to accept and process connections in this event-driven approach? I&#39;m not sure you can get around waiting for it to execute the function otherwise."}, {"owner": {"reputation": 79, "user_id": 8033564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63548956fc5a34ba87863884509d5522?s=128&d=identicon&r=PG&f=1", "display_name": "buddy2891", "link": "https://stackoverflow.com/users/8033564/buddy2891"}, "reply_to_user": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 0, "creation_date": 1503461581, "post_id": 45830135, "comment_id": 78618459, "body": "@Chirality Won&#39;t that be same as having a child process per connection? If I have 50k clients all sending data, I&#39;ll have 50k child processes"}, {"owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 0, "creation_date": 1503461954, "post_id": 45830135, "comment_id": 78618563, "body": "That&#39;s definitely a worst-case scenario and assuming the server doesn&#39;t process a single request by the time they all finish connecting. There&#39;s absolutely no way around doing the <code>readClientData</code> function simultaneously. Whether you can thread it or fork it is up to you, but the current implementation, as you said, is a queue approach."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1503465673, "post_id": 45830135, "comment_id": 78619711, "body": "I suggest learning how node.js works - even if you don&#39;t write your application in it."}], "answers": [{"tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": false, "score": 1, "last_activity_date": 1503463843, "creation_date": 1503463843, "answer_id": 45830852, "question_id": 45830135, "link": "https://stackoverflow.com/questions/45830135/solutions-to-blocking-operations-inside-an-epoll-event-loop/45830852#45830852", "title": "Solutions to blocking operations inside an epoll event loop", "body": "<p>You can dedicate separate process for waited operations like database read, listening on socket as well, so that you can use your event loop to check send/recv completes for your DB process as well</p>\n\n<p>And Keep event loop in main process:\nRead from client,write to DB handling process in nowait mode,come back to event loop to check for DB process reply or new request from client</p>\n"}, {"tags": [], "owner": {"reputation": 6143, "user_id": 2147218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQVSl.jpg?s=128&g=1", "display_name": "bazza", "link": "https://stackoverflow.com/users/2147218/bazza"}, "is_accepted": false, "score": 0, "last_activity_date": 1503699801, "creation_date": 1503699801, "answer_id": 45890114, "question_id": 45830135, "link": "https://stackoverflow.com/questions/45830135/solutions-to-blocking-operations-inside-an-epoll-event-loop/45890114#45890114", "title": "Solutions to blocking operations inside an epoll event loop", "body": "<p><strong>Unnecessary Sequentialisation?</strong> </p>\n\n<p>Assuming that your mention of <code>readClientData()</code> making a database query is germane; databases are quite clever, any half decent engine these days can quite happily serve more than one client at a time. If there's no particular reason why a client shouldn't talk directly to the database, having them do so would likely make for a faster system.</p>\n\n<p><strong>More Than One Database Shim Required</strong></p>\n\n<p>If that's not an option, using a process/thread to be a shim between your main event loop and the database (as desribed by Pras) is one way of keeping the event loop response time low. </p>\n\n<p>However, you may as well have more than one of these, so that a client making a short request isn't held up by another client that's just made a long request. With a single shim, it'd be getting held up waiting for the long request to complete before even starting the new, short request.</p>\n\n<p>This starts getting complex; you need multiple processes/threads, you have to work out a way to divide up the incoming requests amongst the shims, etc. That's a lot of code to start writing.</p>\n\n<p><strong>ZeroMQ</strong></p>\n\n<p>Fortunately there is an answer; if you use ZeroMQ for the communications between the main event loop and the database shims, you can start exploiting its patterns (= you're not writing a ton of code yourself). PUSH/PULL comes to mind; that can be used to auto-magically farm out client requests amongst the shims. </p>\n\n<p>If you get the high water marks right, new client requests could \"overtake\" a long running request, because the long running shim simply wouldn't be given the new client request. Provided of course that the database engine itself can actually serve all the shims simultanously.</p>\n"}], "owner": {"reputation": 79, "user_id": 8033564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63548956fc5a34ba87863884509d5522?s=128&d=identicon&r=PG&f=1", "display_name": "buddy2891", "link": "https://stackoverflow.com/users/8033564/buddy2891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503699801, "creation_date": 1503458642, "question_id": 45830135, "link": "https://stackoverflow.com/questions/45830135/solutions-to-blocking-operations-inside-an-epoll-event-loop", "title": "Solutions to blocking operations inside an epoll event loop", "body": "<p>I have an epoll event loop in my TCP server to handle client connections and read data from clients.</p>\n\n<pre><code>while(1) {\n    int n, i;\n\n    n = epoll_wait(efd, events, 64, -1); // This is blocking. It waits till new events arrive\n\n    for(i = 0; i &lt; n; i++) {\n        if((events[i].events &amp; EPOLLERR) || (events[i].events &amp; EPOLLHUP) || (!(events[i].events &amp; EPOLLIN))) {\n          /* An error has occured on this fd, or the socket is not\n             ready for reading */\n      dzlog_error(\"epoll error: %s\", strerror(errno));\n      close(events[i].data.fd);\n\n      continue;\n    } else if(sock == events[i].data.fd) { // Event on the server socket. Accept client connection\n            while(1) {\n                if((cli = accept(sock, (struct sockaddr *)&amp;their_addr, &amp;addr_size)) == -1) {\n                    if((errno == EAGAIN) || (errno == EWOULDBLOCK)) { // We have processed all incoming connections\n                        break;\n                    } else {\n                        dzlog_error(\"accept: %s\", strerror(errno));\n                        break;\n                    }\n                }\n\n                dzlog_info(\"Client connected: Identifier - %d\", cli);\n\n                s = fcntl(cli, F_SETFL, O_NONBLOCK); // Make client socket non-blocking\n               if(s == -1) {\n                    dzlog_error(\"Client no block: %s\", strerror(errno));\n                    close(cli);\n                    break;\n                }\n\n                event.data.fd = cli;\n                event.events = EPOLLIN | EPOLLET;\n                s = epoll_ctl (efd, EPOLL_CTL_ADD, cli, &amp;event); // Add the client socket to the list of file descriptors to poll\n                if(s == -1) {\n                    dzlog_error(\"epoll_ctl: %s\", strerror(errno));\n                    close(cli);\n                    break;\n                }\n            }\n\n            continue;\n        } else {\n            readClientData(events[i].data.fd);\n        }\n    }\n}\n</code></pre>\n\n<p>When there is data to be read from the client socket, the <code>readClientData</code> function is called. Lets assume that inside that function, we have a call to a database that fetches some data from a table. If for some reason, the call to the database hangs or takes longer than expected, other clients waiting to be connected or send data will also be blocked. </p>\n\n<p>For example consider the following scenario:</p>\n\n<ol>\n<li>Client 1 connects to server</li>\n<li>Client 2 connects to server</li>\n<li>Client 1 sends data to server (this will cause the <code>readClientData</code> function to be called to process the data)</li>\n<li><code>readClientData</code> function calls the database and waits for response. (waits for 10 seconds or might hang indefinitely)</li>\n<li>Client 2 sends data. This data can't be processed as the server is still waiting for the <code>readClientData</code> to complete for Client 1</li>\n<li>A new Client 3 tries to connect but has to wait for its connection to be accepted because server is still processing data from Client 1</li>\n</ol>\n\n<p>Is there a way to solve this problem? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 0, "creation_date": 1503454347, "post_id": 45829551, "comment_id": 78616808, "body": "Why would you want to go <i>backwards</i> from the current index? That would overwrite 8 and 9, which are the most recent ones"}, {"owner": {"reputation": 209, "user_id": 8498049, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/026e998e24621716d72b732e8ae0587c?s=128&d=identicon&r=PG&f=1", "display_name": "skmiley1", "link": "https://stackoverflow.com/users/8498049/skmiley1"}, "reply_to_user": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 0, "creation_date": 1503454412, "post_id": 45829551, "comment_id": 78616831, "body": "I want to traverse the buffer, not overwrite 8 and 9. I just want to start from most recent data (9), and read each entry in this order: 9, 8, 13, 12, 11, 10."}, {"owner": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 0, "creation_date": 1503454485, "post_id": 45829551, "comment_id": 78616852, "body": "Then shouldn&#39;t the indices be traversed in this order? 10 11 12 13 8 9?"}, {"owner": {"reputation": 209, "user_id": 8498049, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/026e998e24621716d72b732e8ae0587c?s=128&d=identicon&r=PG&f=1", "display_name": "skmiley1", "link": "https://stackoverflow.com/users/8498049/skmiley1"}, "reply_to_user": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 0, "creation_date": 1503454581, "post_id": 45829551, "comment_id": 78616882, "body": "In that order, we are not starting from the most recent data which is 9."}, {"owner": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 0, "creation_date": 1503454924, "post_id": 45829551, "comment_id": 78616971, "body": "is this what you&#39;re looking for? <a href=\"https://stackoverflow.com/questions/3437477/how-do-you-iterate-backward-over-circular-buffer-without-a-conditional\" title=\"how do you iterate backward over circular buffer without a conditional\">stackoverflow.com/questions/3437477/&hellip;</a>"}, {"owner": {"reputation": 209, "user_id": 8498049, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/026e998e24621716d72b732e8ae0587c?s=128&d=identicon&r=PG&f=1", "display_name": "skmiley1", "link": "https://stackoverflow.com/users/8498049/skmiley1"}, "reply_to_user": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 0, "creation_date": 1503455081, "post_id": 45829551, "comment_id": 78617004, "body": "I looked at that, but I&#39;m having some trouble figuring out what should be my ending condition of the loop. I want to terminate once I reach 9 again (in a loop)"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503459737, "post_id": 45829551, "comment_id": 78618031, "body": "Re &quot;<i>I want to start from the last index (most recent data) populated.</i>&quot;, There&#39;s no reason to use a circular buffer for a stack."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503560110, "post_id": 45829551, "comment_id": 78668990, "body": "If any of the answers below has helped to solve your problem, you should <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept</a> by clicking on the checkmark next to that answer."}], "answers": [{"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 0, "last_activity_date": 1503455609, "creation_date": 1503455609, "answer_id": 45829727, "question_id": 45829551, "link": "https://stackoverflow.com/questions/45829551/circular-buffer-traversal/45829727#45829727", "title": "Circular Buffer traversal", "body": "<p>If you want to begin printing from the element previous to the last indexed value, you can use a <code>do</code> loop that decrements a non-zero array index, or assigns the last available index to the array index:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n {\n     size_t size = 6;\n     int buffer[size];\n     int input[] = { 1, 2, 10, 11, 12, 13, 8, 9 };\n\n     /* Populate array */\n     size_t currentIndex = 0;\n     size_t lastIndex = 0;\n     for (size_t i = 0; i &lt; 8; i++) {\n         buffer[currentIndex] = input[i];\n         currentIndex = (currentIndex + 1) % size;\n         lastIndex = currentIndex;\n     }\n\n     /* Print array contents */\n     for (size_t i = 0; i &lt; size; i++) {\n         printf(\"%5d\", buffer[i]);\n     }\n     putchar('\\n');\n\n     /* Print in reverse, starting before the last index */\n     size_t i = lastIndex;\n     do {\n         i ? --i : (i = size - 1);\n         printf(\"%5d\", buffer[i]);\n     } while (i != lastIndex);\n     putchar('\\n');\n\n     return 0;\n }     \n</code></pre>\n\n<p>Program output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>8    9   10   11   12   13\n9    8   13   12   11   10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1503459837, "last_edit_date": 1503459837, "creation_date": 1503459502, "answer_id": 45830242, "question_id": 45829551, "link": "https://stackoverflow.com/questions/45829551/circular-buffer-traversal/45830242#45830242", "title": "Circular Buffer traversal", "body": "<p>There's on reason to use a circular buffer for a stack. One uses a circular buffer to implement a lock-less queue with one writer and one reader.</p>\n\n<pre><code>int head = 0;\nint tail = 0;\nint buffer[BUF_SIZE];  // Holds one less than BUF_SIZE elements.\n\n// Returns true if successful, false if empty.\nint circular_buffer_read(int* val_ptr) {\n   if (head == tail)\n      return 0;\n\n   *val_ptr = buffer[tail];\n   tail = (tail + 1) % BUF_SIZE;\n   return 1;\n}\n\n// Returns true if successful, false if full.\nint circular_buffer_write(int val) {\n   buffer[head] = val;\n   int new_head = (head + 1) % BUF_SIZE;\n   if (new_head == tail)\n      return 0;\n\n   head = new_head;\n   return 1;\n}\n</code></pre>\n\n<p>If you have a single reader and a single writer, the above is thread-safe if the comparisons (<code>head == tail</code> and <code>new_head == tail</code>) are thread-safe.</p>\n\n<pre><code>void producer() {\n   int i = 0;\n   while (1) {\n      if (!circular_buffer_write(i)) {\n         sleep(1);\n         continue;\n      }\n\n      ++i;\n   }\n}\n\nvoid consumer() {\n   while (1) {\n      int i;\n      if (!circular_buffer_read(&amp;i)) {\n         sleep(1);\n         continue;\n      }\n\n      printf(\"Got %d\\n\", i);\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 1704615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84e0decdb649ad7ea0f4f8f6c3d1150b?s=128&d=identicon&r=PG", "display_name": "andyolivares", "link": "https://stackoverflow.com/users/1704615/andyolivares"}, "is_accepted": false, "score": 0, "last_activity_date": 1503461013, "creation_date": 1503461013, "answer_id": 45830463, "question_id": 45829551, "link": "https://stackoverflow.com/questions/45829551/circular-buffer-traversal/45830463#45830463", "title": "Circular Buffer traversal", "body": "<p>It seems like you need a LIFO kind of structure instead of the circular buffer (queue) which is typically used for FIFO.</p>\n\n<p>A stack might work better for your use case.</p>\n\n<p>As a producer puts elements on the top of the stack, the consumer takes out elements from the very same top, processing newest elements first.</p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1503461156, "creation_date": 1503461156, "answer_id": 45830481, "question_id": 45829551, "link": "https://stackoverflow.com/questions/45829551/circular-buffer-traversal/45830481#45830481", "title": "Circular Buffer traversal", "body": "<pre><code>for(int i = size; i &gt; 0; --i)\n{\n    printf(\"%d \", buffer[(currentIndex + i) % size]);\n}\n</code></pre>\n\n<p>Index calculations:</p>\n\n<pre><code>(currentIndex + size    ) % size ~ currentIndex\n(currentIndex + size - 1) % size ~ currentIndex - 1\n...\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 8498049, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/026e998e24621716d72b732e8ae0587c?s=128&d=identicon&r=PG&f=1", "display_name": "skmiley1", "link": "https://stackoverflow.com/users/8498049/skmiley1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 831, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1503461156, "creation_date": 1503454131, "question_id": 45829551, "link": "https://stackoverflow.com/questions/45829551/circular-buffer-traversal", "title": "Circular Buffer traversal", "body": "<p>I'm trying to write a for loop that starts from where my currentIndex variable leaves off, and traverses through the circular buffer.</p>\n\n<p>I am using the circular buffer to store load data. Data is periodically stored. </p>\n\n<p>Currently, this is how I populate data:</p>\n\n<pre><code>//currentIndex starts at 0\nbuffer[currentIndex] = data;\ncurrentIndex = (currentIndex + 1) % size;\n</code></pre>\n\n<p>Ex: size is 6. 8 entries (1 2 10 11 12 13 8 9) are stored, so 2 entries at index 0 and 1 get overwritten.</p>\n\n<p>Index : 0  1  2  3   4  5</p>\n\n<p>Buffer: 8  9  10 11 12 13</p>\n\n<p>After 9 is populated, currentIndex becomes 2.\nI want to traverse indices in this order: 9, 8, 13, 12, 11, 10.\nI want to start from the last index (most recent data) populated. </p>\n\n<p>I am having trouble coming up with the logic to do this in a for loop.</p>\n"}, {"tags": ["c", "algorithm", "time-complexity"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1503454285, "post_id": 45829510, "comment_id": 78616792, "body": "When you say reverse time complexity is <code>O(n&#47;2)</code>, what&#39;s <code>n</code>? The size of the word you are reversing? Isn&#39;t that a different thing from the <code>n</code> in the <code>O(n)</code> for the whole string? So why use the same variable for two different values?"}, {"owner": {"reputation": 2394, "user_id": 2559838, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/68b75dc3b6cd88e1ffb66708587c144c?s=128&d=identicon&r=PG", "display_name": "Newbie", "link": "https://stackoverflow.com/users/2559838/newbie"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1503454358, "post_id": 45829510, "comment_id": 78616813, "body": "I edited the question based on your question."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1503454401, "post_id": 45829510, "comment_id": 78616826, "body": "So what is the relationship between <code>n</code> and <code>m</code>? They&#39;re clearly not independent. For example, a sentence with 200 letters can&#39;t have 300 letter words in it, right? Also, <code>reverse</code> isn&#39;t called for every iteration, only on some. So you can&#39;t just multiply them. (Keep fixing your mistakes and you&#39;ll eventually agree with the given answer.)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1503454533, "post_id": 45829510, "comment_id": 78616864, "body": "<code>n * m</code> is the number of words in the array times the average size of a word... which is just the total number of letters in the array."}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": true, "score": 0, "last_activity_date": 1503455729, "creation_date": 1503455729, "answer_id": 45829738, "question_id": 45829510, "link": "https://stackoverflow.com/questions/45829510/why-is-time-complexity-of-reverse-of-a-sentence-of-words-on/45829738#45829738", "title": "Why is Time complexity of reverse of a sentence of words O(n)?", "body": "<blockquote>\n  <p>Why isn't the time complexity <code>O(n * (m / 2))</code> which is <code>O(nm)</code> ?</p>\n</blockquote>\n\n<p>Because you don't reverse a word per <em>each character</em>, you only do it once per <code>m</code> characters. So while scan through the word and then later reverse it gives you <code>O(m)</code> (twice <code>m</code> which is still <code>O(m)</code>), the whole process takes <code>n / m * O(m)</code> = <code>O(n)</code>, since there are only <code>n/m</code> words.</p>\n\n<p>(More exactly, for word lengths <code>m1</code>, <code>m2</code>, ..., each word taking <code>O(m_i)</code> steps, and overall amount of whitespace of <code>s</code>, the algorithm requires <code>O(m1) + O(m2) + ... + O(s) = O(m1 + m2 + ... + s) = O(n)</code>, word lengths and overall amount of whitespace summing up to <code>n</code>.)</p>\n"}], "owner": {"reputation": 2394, "user_id": 2559838, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/68b75dc3b6cd88e1ffb66708587c144c?s=128&d=identicon&r=PG", "display_name": "Newbie", "link": "https://stackoverflow.com/users/2559838/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 1, "accepted_answer_id": 45829738, "answer_count": 1, "score": 1, "last_activity_date": 1503455729, "creation_date": 1503453797, "last_edit_date": 1503454332, "question_id": 45829510, "link": "https://stackoverflow.com/questions/45829510/why-is-time-complexity-of-reverse-of-a-sentence-of-words-on", "title": "Why is Time complexity of reverse of a sentence of words O(n)?", "body": "<p>I came across this article <a href=\"http://www.geeksforgeeks.org/reverse-words-in-a-given-string/\" rel=\"nofollow noreferrer\">Reverse words in a given string</a></p>\n\n<p>The code is </p>\n\n<pre><code>void reverseWords(char *s)\n{\n    char *word_begin = NULL;\n    char *temp = s; /* temp is for word boundry */\n\n    /*STEP 1 of the above algorithm */\n    while( *temp )\n    {\n        /*This condition is to make sure that the string start with\n          valid character (not space) only*/\n        if (( word_begin == NULL ) &amp;&amp; (*temp != ' ') )\n        {\n            word_begin=temp;\n        }\n        if(word_begin &amp;&amp; ((*(temp+1) == ' ') || (*(temp+1) == '\\0')))\n        {\n            reverse(word_begin, temp);\n            word_begin = NULL;\n        }\n        temp++;\n    } /* End of while */\n\n    /*STEP 2 of the above algorithm */\n    reverse(s, temp-1);\n}\n</code></pre>\n\n<p>My understanding of time complexity for this problem :</p>\n\n<p>1) Iterating the entire string so <code>O(n)</code> , <code>n = length of the array</code></p>\n\n<p>2) Reverse time complexity is <code>O(m / 2)</code> <code>m = size of word reversing</code></p>\n\n<p>Why isn't the time complexity <code>O(n * (m / 2))</code> which is <code>O(nm) ?</code></p>\n\n<p>But the time complexity mentioned in the link is <code>O(n)</code> . Why are we ignoring time complexity of <code>reverse method?</code></p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1503452401, "post_id": 45829299, "comment_id": 78616309, "body": "<code>emp_arr[i]</code> is a pointer, you can&#39;t use <code>.</code> operator on a pointer. Maybe you meant <code>emp_arr[i]-&gt;id</code> ?"}, {"owner": {"reputation": 85, "user_id": 8002691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/i4J7O.jpg?s=128&g=1", "display_name": "Mohamed Moustafa", "link": "https://stackoverflow.com/users/8002691/mohamed-moustafa"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1503453448, "post_id": 45829299, "comment_id": 78616590, "body": "that is why i added * before the pointer for dereferencing it before i can use . the wrong thing i did has been fixed up in the comment below, u can check it :)"}], "answers": [{"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 1, "last_activity_date": 1503452610, "creation_date": 1503452610, "answer_id": 45829370, "question_id": 45829299, "link": "https://stackoverflow.com/questions/45829299/mixed-up-de-referencing-forms-of-pointers-in-an-array-of-pointers-to-struct/45829370#45829370", "title": "mixed up de-referencing forms of pointers in an array of pointers to struct", "body": "<p>The <code>.</code> operator has higher precedence than <code>*</code>, so you need to change your parentheses.</p>\n\n<pre><code>(*emp_arr[i]).id\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8002691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/i4J7O.jpg?s=128&g=1", "display_name": "Mohamed Moustafa", "link": "https://stackoverflow.com/users/8002691/mohamed-moustafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 1, "accepted_answer_id": 45829370, "answer_count": 1, "score": 1, "last_activity_date": 1503452610, "creation_date": 1503452109, "question_id": 45829299, "link": "https://stackoverflow.com/questions/45829299/mixed-up-de-referencing-forms-of-pointers-in-an-array-of-pointers-to-struct", "title": "mixed up de-referencing forms of pointers in an array of pointers to struct", "body": "<p>I have a function where i pass to it an array of pointers to structure as an argument<br>\n<code>void BubbleSort_ArrayOfEmployees(struct employee* emp_arr[],int size);</code>\nwhy i can't De-referencing any pointer of the array using this form <code>(*(emp_arr[i]).id)</code> the compiler state this error <code>//error: request for member 'id' in something not a structure or union|</code> while if i use <code>emp_arr[i]-&gt;id</code> form of De-referencing the code runs smoothly giving the expexted results</p>\n\n<p>aren't both forms the same ?</p>\n\n<p>p.s i can upload the full function and structure if it will make it easier for anyone to try it</p>\n"}, {"tags": ["c", "debugging", "winapi"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1503453373, "post_id": 45829159, "comment_id": 78616570, "body": "The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms681423.aspx\" rel=\"nofollow noreferrer\">documentation</a> says: &quot;<i>If the function fails, the return value is zero. To get extended error information, call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679360.aspx\" rel=\"nofollow noreferrer\"><code>GetLastError</code></a>.</i>&quot; What does <code>GetLastError()</code> return? The documentation also says: &quot;<b><i>Only the thread that created the process being debugged can call <code>WaitForDebugEvent</code>.</i></b>&quot; So a process cannot debug itself. It can only be debugged by the process that spawned it (or by a process that calls <code>DebugActiveProcess()</code>)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1503454646, "post_id": 45829159, "comment_id": 78616894, "body": "Also, your <code>proc</code> function is declared wrong. It needs to be declared as <code>DWORD WINAPI proc(LPVOID)</code>, then you can get rid of the erroneous <code>LPTHREAD_START_ROUTINE</code> type-cast when passing <code>proc</code> to <code>CreateThread()</code>."}, {"owner": {"reputation": 1970, "user_id": 5646176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lmKVM.jpg?s=128&g=1", "display_name": "RonTLV", "link": "https://stackoverflow.com/users/5646176/rontlv"}, "edited": false, "score": 0, "creation_date": 1503726296, "post_id": 45829159, "comment_id": 78743766, "body": "__debugbreak() , __asm { int 3 }"}], "answers": [{"tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 0, "last_activity_date": 1503498567, "creation_date": 1503498567, "answer_id": 45842580, "question_id": 45829159, "link": "https://stackoverflow.com/questions/45829159/setting-hardware-breakpoint-using-winapi-for-current-process/45842580#45842580", "title": "Setting hardware breakpoint using winapi for current process", "body": "<p>about debugging. for debug need create special <strong><em>DebugObject</em></strong> and associate process (which you want to debug) with this debug object. after this, when some events occur in process associated with debug object, system <strong>suspend all threads in process</strong>, insert debug event to debug object and set it to signal state. in debugger, thread which wait on debug object, say via <code>WaitForDebugEvent</code> (but possible direct pass handle of debug object to say <code>MsgWaitForMultipleObjectsEx</code>) awakened and handle this debug event. but if thread will be from debugged process - it will be suspended, as all threads in process and never handle this event. process hang in this case. so - process can not debug itself because system <strong>suspend all threads in process</strong> when debug event (exception for example) occur.</p>\n\n<p>about <code>WaitForDebugEvent</code> doesnt perfrorm any waiting. <code>WaitForDebugEvent</code> internally call <code>ZwWaitForDebugEvent</code> and from where is <code>HANDLE hDebugObject</code> is geted ? from thread <em>TEB</em> (here exist special field for save it). when you call <code>CreateProcess</code> with flag <code>DEBUG_PROCESS</code> or <code>DebugActiveProcess</code> system internally call <code>DbgUiConnectToDbg</code> - this api check - are thread already have accosiated debug object (in <em>TEB</em>) and if yet no - create new with <code>ZwCreateDebugObject</code> and store it in <em>TEB</em> (it can be accessed via <code>DbgUiGetThreadDebugObject</code> and changed via <code>DbgUiSetThreadDebugObject</code>). only after this you can call <code>WaitForDebugEvent</code>. because you not direct create debug object via <code>ZwCreateDebugObject</code>, and not call <code>CreateProcess</code> with flag <code>DEBUG_PROCESS</code> or <code>DebugActiveProcess</code> - no debug objects assosiated with your thread, and call <code>WaitForDebugEvent</code> of course fail</p>\n\n<p>only one option catch hardware breakpoint in own process - use <em>VEX</em>. for example:</p>\n\n<pre><code>LONG NTAPI OnVex(PEXCEPTION_POINTERS ExceptionInfo)\n{\n    WCHAR buf[1024], *sz = buf, wz[64];\n    PEXCEPTION_RECORD ExceptionRecord = ExceptionInfo-&gt;ExceptionRecord;\n\n    swprintf(wz, L\"%x&gt; %x at %p\", GetCurrentThreadId(), ExceptionRecord-&gt;ExceptionCode, ExceptionRecord-&gt;ExceptionAddress);\n\n    *buf = 0;\n\n    if (ULONG NumberParameters = ExceptionRecord-&gt;NumberParameters)\n    {\n        sz += swprintf(sz, L\"[ \");\n\n        PULONG_PTR ExceptionInformation = ExceptionRecord-&gt;ExceptionInformation;\n        do \n        {\n            sz += swprintf(sz, L\"%p, \", *ExceptionInformation++);\n        } while (--NumberParameters);\n\n        sz += swprintf(sz - 2, L\" ]\");\n    }\n\n    MessageBoxW(0, buf, wz, 0);\n\n    return ExceptionRecord-&gt;ExceptionCode == STATUS_SINGLE_STEP ? EXCEPTION_CONTINUE_EXECUTION : EXCEPTION_CONTINUE_SEARCH;\n}\n\nDWORD HardwareTest(PVOID pv)\n{\n    WCHAR sz[64];\n    swprintf(sz, L\"hThread = %p\\n\", *(void**)pv);\n    return MessageBoxW(0, 0, sz, MB_ICONINFORMATION);\n}\n\nvoid ep()\n{\n    if (PVOID handler = AddVectoredExceptionHandler(TRUE, OnVex))\n    {\n        if (HANDLE hThread = CreateThread(0, 0, HardwareTest, &amp;hThread, CREATE_SUSPENDED, 0))\n        {\n            CONTEXT ctx = {};\n            ctx.ContextFlags = CONTEXT_DEBUG_REGISTERS;\n            ctx.Dr3 = (ULONG_PTR)&amp;hThread;\n            ctx.Dr7 = 0xF0000040;\n\n            SetThreadContext(hThread, &amp;ctx);\n\n            ResumeThread(hThread);\n\n            WaitForSingleObject(hThread, INFINITE);\n\n            CloseHandle(hThread);\n        }\n\n        RemoveVectoredExceptionHandler(handler);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8502969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e314bc2f850bf37bb8f741bc2c915b7f?s=128&d=identicon&r=PG&f=1", "display_name": "TwisterFromKFC", "link": "https://stackoverflow.com/users/8502969/twisterfromkfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1254, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503498567, "creation_date": 1503450943, "last_edit_date": 1503453098, "question_id": 45829159, "link": "https://stackoverflow.com/questions/45829159/setting-hardware-breakpoint-using-winapi-for-current-process", "title": "Setting hardware breakpoint using winapi for current process", "body": "<p>I want to set a breakpoint on my variable, when i do the read access, i have this code:</p>\n\n<pre><code>char * lpBuffer = NULL;\n\nvoid proc(PVOID)\n{\n    for (int i = 0; i &lt; 10; i++) {\n        Sleep(100);\n\n        MessageBoxA(0, 0, 0, 0);\n        char * h = lpBuffer;\n\n        h[0x4] = 0x88;\n    }\n}\n\nint main()\n{\n    lpBuffer = malloc(20);\n    SetDebugPrivilege(TRUE);\n\n    HANDLE hThread = CreateThread(0, 0, (LPTHREAD_START_ROUTINE)proc, 0, CREATE_SUSPENDED, 0);\n\n    CONTEXT ctx = {};\n    BOOL st = GetThreadContext(hThread, &amp;ctx);\n\n    ctx.ContextFlags = CONTEXT_DEBUG_REGISTERS;\n    ctx.Dr0 = (DWORD)&amp;lpBuffer;\n    ctx.Dr7 = 0x30002;\n    st = SetThreadContext(hThread, &amp;ctx);\n\n    ResumeThread(hThread);\n\n    DEBUG_EVENT dbgEvent;\n\n    int status = WaitForDebugEvent(&amp;dbgEvent, INFINITE);\n\n    //..\n}\n</code></pre>\n\n<p>I always get 0 from <code>int status = WaitForDebugEvent(&amp;dbgEvent, INFINITE);</code> it doesnt perfrorm any waiting  just returns 0 immediatly, i placed <code>MessageBoxA</code> to test, basically i don't get any notifications and waiting that the read has performed on <code>lpBuffer</code>. I think i have done something wrong, maybe it has to do with dr7 flags? 0x30002 is \u202d00110000000000000010\u202c, so it should be hardware read/write bp.</p>\n"}, {"tags": ["c", "arrays", "vector"], "comments": [{"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 3, "creation_date": 1503450720, "post_id": 45829127, "comment_id": 78615999, "body": "The <code>vec</code> array size is 7."}, {"owner": {"reputation": 1, "user_id": 8503267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e302ab1a2d56248fd8e4eb7208f0a13?s=128&d=identicon&r=PG&f=1", "display_name": "MyNameIsJeff", "link": "https://stackoverflow.com/users/8503267/mynameisjeff"}, "reply_to_user": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 1, "creation_date": 1503450788, "post_id": 45829127, "comment_id": 78616011, "body": "@aristotll yes, I can see 7 elements. But see the loop: <code>for(i=0;i&lt;6;i++)</code>. It starts counting from 0 so it should count the <code>0</code> too since <code>0, 1, 2, 3, 4, 5, 6</code> are 7 elements."}, {"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 2, "creation_date": 1503450829, "post_id": 45829127, "comment_id": 78616017, "body": "But it stops at 5..."}, {"owner": {"reputation": 1, "user_id": 8503267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e302ab1a2d56248fd8e4eb7208f0a13?s=128&d=identicon&r=PG&f=1", "display_name": "MyNameIsJeff", "link": "https://stackoverflow.com/users/8503267/mynameisjeff"}, "reply_to_user": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 1, "creation_date": 1503450892, "post_id": 45829127, "comment_id": 78616029, "body": "@aristotll I don&#39;t understand. It should print <code>v[0], v[1], v[2], v[3], v[4], v[5], v[6]</code>, so why should it stop?"}, {"owner": {"reputation": 2426, "user_id": 8459403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnPdw.png?s=128&g=1", "display_name": "Dr. X", "link": "https://stackoverflow.com/users/8459403/dr-x"}, "edited": false, "score": 0, "creation_date": 1503451030, "post_id": 45829127, "comment_id": 78616058, "body": "Vector size is not 6. It will be 7"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1503451700, "post_id": 45829127, "comment_id": 78616182, "body": "<code>i &lt; 6</code> means <code>i</code> <b>less than</b> <code>6</code>, not &quot;less than or equal to&quot; . So <code>v[6]</code> won&#39;t happen"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 8468685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e9bbf9866f44e855eaa3eec92d1532?s=128&d=identicon&r=PG&f=1", "display_name": "U Gold", "link": "https://stackoverflow.com/users/8468685/u-gold"}, "is_accepted": false, "score": 2, "last_activity_date": 1503450917, "creation_date": 1503450917, "answer_id": 45829156, "question_id": 45829127, "link": "https://stackoverflow.com/questions/45829127/function-doesnt-print-all-my-vector-elements/45829156#45829156", "title": "Function doesn&#39;t print all my vector elements", "body": "<p>Working code is <a href=\"http://rextester.com/LBLJPN72634\" rel=\"nofollow noreferrer\">http://rextester.com/LBLJPN72634</a></p>\n\n<pre><code>#include  &lt;stdio.h&gt;\n\nint main(void)\n{\n    int vec[7]={32, 16, 8, 4, 2, 1, 0};\n\n    print(vec);\n    return 0;\n}\n\nvoid print(int v[])\n{\n    int i;\n    for(i=0;i&lt;7;i++)\n        printf(\"%d\\n\", v[i]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 8345159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adef4b35c4159e946277c8c84a7c04fe?s=128&d=identicon&r=PG&f=1", "display_name": "kalia", "link": "https://stackoverflow.com/users/8345159/kalia"}, "is_accepted": false, "score": 5, "last_activity_date": 1503450936, "creation_date": 1503450936, "answer_id": 45829157, "question_id": 45829127, "link": "https://stackoverflow.com/questions/45829127/function-doesnt-print-all-my-vector-elements/45829157#45829157", "title": "Function doesn&#39;t print all my vector elements", "body": "<p>You should change your for loop to:</p>\n\n<pre><code> for(i=0;i&lt;7;i++)\n</code></pre>\n\n<p>or to:</p>\n\n<pre><code>for(i=0;i&lt;=6;i++)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8503267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e302ab1a2d56248fd8e4eb7208f0a13?s=128&d=identicon&r=PG&f=1", "display_name": "MyNameIsJeff", "link": "https://stackoverflow.com/users/8503267/mynameisjeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503452173, "creation_date": 1503450664, "question_id": 45829127, "link": "https://stackoverflow.com/questions/45829127/function-doesnt-print-all-my-vector-elements", "title": "Function doesn&#39;t print all my vector elements", "body": "<p>I have this vector:</p>\n\n<pre><code>int vec[7]={32, 16, 8, 4, 2, 1, 0};\n</code></pre>\n\n<p>and this function:</p>\n\n<pre><code>void print(int v[])\n{\n    int i;\n    for(i=0;i&lt;6;i++)\n        printf(\"%d\", v[i]);\n}\n</code></pre>\n\n<p>but I don't understand why it doesn't print the <code>0</code> at the end. Why? How can I fix the issue?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 4, "creation_date": 1503450379, "post_id": 45829053, "comment_id": 78615934, "body": "See <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\"><b>How to debug small programs</b></a> and talk to the duck... Really, it helps <code>:)</code> He would really start quacking when he got to the question of <i>&quot;What is stored in <code>number</code>?&quot;</i>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1503450539, "post_id": 45829053, "comment_id": 78615957, "body": "The answers about printf and &amp;number are totally correct.  Also, you should consider the use of the % (MOD) operator for determining whether something is evenly divisible (by 10, 100, 1000, etc...).  I&#39;m assuming you&#39;re not counting the trailing zeroes in the actual <i>string</i> as a learning exercise, because that&#39;s the easier way to do it."}, {"owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1503450905, "post_id": 45829053, "comment_id": 78616032, "body": "@David C. Rankin It would start a veritable Quack Overflow. I&#39;ll see myself out now. ;-)"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1503452009, "post_id": 45829053, "comment_id": 78616234, "body": "There is no need for a leading space in the <code>scanf()</code> format string here, since the <code>%d</code> directive skips over whitespace characters anyway. But you should remove the trailing <code>\\n</code> from the <code>scanf()</code> format string (and the trailing space, too). This doesn&#39;t do what you probably think it does; it will match whitespace characters until a non-whitespace character is entered, and <code>scanf()</code> will not return when ENTER is pressed the first time. Trailing whitespace characters are almost always wrong in <code>scanf()</code> format strings,"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7543474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804d9a16ac2ad84e6d7a1aa58133d09b?s=128&d=identicon&r=PG&f=1", "display_name": "mie.ppa", "link": "https://stackoverflow.com/users/7543474/mie-ppa"}, "edited": false, "score": 0, "creation_date": 1503450427, "post_id": 45829075, "comment_id": 78615943, "body": "I tried by removing the ampersand sign but the code still gives the garbage values."}, {"owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "edited": false, "score": 0, "creation_date": 1503450759, "post_id": 45829075, "comment_id": 78616005, "body": "Because you never initialized <code>number</code>, so whatever it contains is going to be completely random whether you&#39;re reading it correctly or not."}], "tags": [], "owner": {"reputation": 3456, "user_id": 1484621, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/n3L70.jpg?s=128&g=1", "display_name": "Yu Jiaao", "link": "https://stackoverflow.com/users/1484621/yu-jiaao"}, "is_accepted": false, "score": 2, "last_activity_date": 1503450842, "last_edit_date": 1503450842, "creation_date": 1503450186, "answer_id": 45829075, "question_id": 45829053, "link": "https://stackoverflow.com/questions/45829053/program-to-find-trailing-number-of-zeroes-is-giving-wrong-output/45829075#45829075", "title": "Program to find trailing number of zeroes is giving wrong output", "body": "<p>warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018int *\u2019</p>\n\n<pre><code> printf(\" %d \\n\", number);\n</code></pre>\n\n<p>you must initialize it, <code>int number =0;</code></p>\n\n<p>or maybe you mean(?):</p>\n\n<pre><code> scanf(\" %d \\n\", &amp;number);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "is_accepted": true, "score": 3, "last_activity_date": 1503450220, "creation_date": 1503450220, "answer_id": 45829079, "question_id": 45829053, "link": "https://stackoverflow.com/questions/45829053/program-to-find-trailing-number-of-zeroes-is-giving-wrong-output/45829079#45829079", "title": "Program to find trailing number of zeroes is giving wrong output", "body": "<p>You're never initializing <code>number</code>, and then you're printing a pointer to it instead of the number itself. Of <em>course</em> you're going to print garbage results.</p>\n\n<p>Also, I don't understand how your algorithm is supposed to work. Dividing by five and adding that to the number of zeroes? If I did that with the number 100, that would add 20, but 100 doesn't have 20 trailing zeroes.</p>\n"}], "owner": {"reputation": 115, "user_id": 7543474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804d9a16ac2ad84e6d7a1aa58133d09b?s=128&d=identicon&r=PG&f=1", "display_name": "mie.ppa", "link": "https://stackoverflow.com/users/7543474/mie-ppa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 45829079, "answer_count": 2, "score": 0, "last_activity_date": 1503450842, "creation_date": 1503449962, "last_edit_date": 1503450459, "question_id": 45829053, "link": "https://stackoverflow.com/questions/45829053/program-to-find-trailing-number-of-zeroes-is-giving-wrong-output", "title": "Program to find trailing number of zeroes is giving wrong output", "body": "<p>My C program to find trailing number of zeroes is giving wrong output. The loop gets terminated after 1 test case and returns garbage outputs. Here is my code:</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;math.h&gt;\n int main()\n {\n      int testcase, no_of_zeroes, i, c, number;\n      scanf(\" %d \\n\", &amp;testcase);\n\n      for(i = 0; i&lt;testcase; i++)\n      {  \n           no_of_zeroes = 0;\n           printf(\" %d \\n\", &amp;number);\n           c = 5;\n\n           while((number/c) &gt; 0)\n           {\n                no_of_zeroes += (number/5);\n                c *= 5;\n           }\n           printf(\" %d \\n\", no_of_zeroes);\n      }\n      return 0;\n }     \n</code></pre>\n"}, {"tags": ["c", "batch-file", "linker", "embedded", "avr-gcc"], "comments": [{"owner": {"reputation": 14789, "user_id": 425738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58622287beb9cbbd6a1faff38c1c6ab3?s=128&d=identicon&r=PG", "display_name": "ldav1s", "link": "https://stackoverflow.com/users/425738/ldav1s"}, "edited": false, "score": 0, "creation_date": 1503445326, "post_id": 45828357, "comment_id": 78614907, "body": "<code>avr-objdump</code> needs to be after <code>avr-gcc ... -o AVR_comunic.elf</code> as that&#39;s what creates <code>AVR_comunic.elf</code>.  Second why aren&#39;t you using <code>main_f.elf</code> as that&#39;s where <code>main</code> should be part of the the object.  I don&#39;t see how <code>AVR_comunic.elf</code> contains <code>main</code> either, given it&#39;s only object file <code>AVR_comunic.o</code>."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503448290, "post_id": 45828357, "comment_id": 78615507, "body": "I would advise to use the IDE with automatic makefile generation. If you add libraries, C files they will be automatically compiled and linked. Batch files are not used for buiding targets. If you for some strange reasons do not want to use Atmel studio or eclipse with avr plugins - learn <code>make</code>"}, {"owner": {"reputation": 189, "user_id": 8476940, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8b2e64116a061cf3dcd2e24705d5189?s=128&d=identicon&r=PG&f=1", "display_name": "C Marius", "link": "https://stackoverflow.com/users/8476940/c-marius"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503471008, "post_id": 45828357, "comment_id": 78622231, "body": "@PeterJ_01 I use eclipse IDE with avr plugins, but somebody mentioned here about some linker script (I&#39;ve never done anything like that) and I thought that maybe I should get a little more comfortable with compiling and linking ..."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 8476940, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8b2e64116a061cf3dcd2e24705d5189?s=128&d=identicon&r=PG&f=1", "display_name": "C Marius", "link": "https://stackoverflow.com/users/8476940/c-marius"}, "edited": false, "score": 0, "creation_date": 1503471681, "post_id": 45829794, "comment_id": 78622658, "body": "Sir, thank you very much for your answer. I&#39;ve modified my code but as you can see, I get the same (similar) error."}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "reply_to_user": {"reputation": 189, "user_id": 8476940, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8b2e64116a061cf3dcd2e24705d5189?s=128&d=identicon&r=PG&f=1", "display_name": "C Marius", "link": "https://stackoverflow.com/users/8476940/c-marius"}, "edited": false, "score": 0, "creation_date": 1503473652, "post_id": 45829794, "comment_id": 78623889, "body": "@CMarius That&#39;s because you can&#39;t follow simple instructions. In particular, you left the broken command in instead of deleting it. You have 4 invocations of <code>avr-gcc</code>, and the last one is bogus and should be deleted."}, {"owner": {"reputation": 189, "user_id": 8476940, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8b2e64116a061cf3dcd2e24705d5189?s=128&d=identicon&r=PG&f=1", "display_name": "C Marius", "link": "https://stackoverflow.com/users/8476940/c-marius"}, "edited": false, "score": 0, "creation_date": 1503476009, "post_id": 45829794, "comment_id": 78625471, "body": "Or instead of deleting it (I&#39;ve learned that that file contains some info about memory ... ) I should write: <code>avr-gcc -g -mmcu=atmega8 -Wl,-Map,AVR_comunic.map -o AVR_comunic.elf AVR_comunic.o main_f.o</code> IS this correct (I does not give any error)?"}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "reply_to_user": {"reputation": 189, "user_id": 8476940, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8b2e64116a061cf3dcd2e24705d5189?s=128&d=identicon&r=PG&f=1", "display_name": "C Marius", "link": "https://stackoverflow.com/users/8476940/c-marius"}, "edited": false, "score": 0, "creation_date": 1503507449, "post_id": 45829794, "comment_id": 78649002, "body": "@CMarius Sorry I missed the <code>-Wl,-Map,AVR_communic.map</code> argument. You can add it to the 3rd invocation of <code>avr-gcc</code> (i.e. to the link line), and delete the 4th invocation."}, {"owner": {"reputation": 189, "user_id": 8476940, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8b2e64116a061cf3dcd2e24705d5189?s=128&d=identicon&r=PG&f=1", "display_name": "C Marius", "link": "https://stackoverflow.com/users/8476940/c-marius"}, "edited": false, "score": 0, "creation_date": 1503516265, "post_id": 45829794, "comment_id": 78653865, "body": "Sorry for keeping commenting ... but if the invocation remains as written now (it does compile now that I&#39;ve added main_f.o) is everything OK? I do not know much yet about this map file ... but before I learn, at least to know I have it correctly :)"}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1503456124, "creation_date": 1503456124, "answer_id": 45829794, "question_id": 45828357, "link": "https://stackoverflow.com/questions/45828357/linking-multiple-object-files-into-a-binary-avr-gcc/45829794#45829794", "title": "Linking multiple object files into a binary AVR GCC", "body": "<blockquote>\n  <p>I understand from the information on internet that the linker does thinks that there is no \"main\" function ... but it is ... what am I doing wrong?</p>\n</blockquote>\n\n<p>This command:</p>\n\n<pre><code>avr-objdump -h -S AVR_comunic.elf &gt; AVR_comunic.lst\n</code></pre>\n\n<p>attempts to extract info from <code>AVR_communic.elf</code>, which isn't produced yet. You want to move it after this command:</p>\n\n<pre><code>avr-gcc -g -mmcu=atmega8 -Wl,-Map,AVR_comunic.map -o AVR_comunic.elf AVR_comunic.o\n</code></pre>\n\n<p>The above command fails with <code>undefined reference to: 'main'</code> because you are <em>not</em> linking <code>main_f.o</code> into it.</p>\n\n<p>It appears that what you really want is:</p>\n\n<pre><code>avr-gcc -g -mmcu=atmega88p -o AVR_communic.elf main_f.o AVR_comunic.o\navr-objdump -h -S AVR_comunic.elf &gt; AVR_comunic.lst\navr-objcopy -j .text -j .data -O ihex AVR_comunic.elf AVR_comunic.hex\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 8476940, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8b2e64116a061cf3dcd2e24705d5189?s=128&d=identicon&r=PG&f=1", "display_name": "C Marius", "link": "https://stackoverflow.com/users/8476940/c-marius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 0, "accepted_answer_id": 45829794, "answer_count": 1, "score": 0, "last_activity_date": 1503471320, "creation_date": 1503444055, "last_edit_date": 1503471320, "question_id": 45828357, "link": "https://stackoverflow.com/questions/45828357/linking-multiple-object-files-into-a-binary-avr-gcc", "title": "Linking multiple object files into a binary AVR GCC", "body": "<p>I have the following headers and source files:</p>\n\n<p>AVR_comunic.h</p>\n\n<pre><code>#ifndef AVR_COMUNIC_H_\n#define AVR_COMUNIC_H_\n\n#include&lt;avr/io.h&gt;\n\n#define FOSC 20000000UL // Clock Speed\n#define BAUD 19200\n#define MYUBRR FOSC/16/BAUD-1\n\nvoid USART_Init( unsigned int);\nint USART_WriteChar(unsigned char);\n// int USART_Receive( unsigned char *);\nvoid USART_Flush(void);\n\n#endif /* AVR_COMUNIC_H_ */\n</code></pre>\n\n<p>AVR_comunic.c </p>\n\n<pre><code>#include \"AVR_comunic.h\"\n\nvoid USART_Flush( void )\n{\n    ...\n}\n\nvoid USART_Init( unsigned int ubrr)\n{\n    ...\n}\n\nint USART_WriteChar(unsigned char data)\n{\n   ...\n}\n</code></pre>\n\n<p>and main_f.c </p>\n\n<pre><code>#include\"AVR_comunic.h\"\n\nvoid init_ports()\n{\n    DDRD|= (1&lt;&lt;PD7);\n}\n\nint main(void)\n{\n    init_ports();\n    ...\n    while(1)\n    {\n        // now what?\n    }\nreturn 1;\n}\n</code></pre>\n\n<p>I wrote a batch file in Notepad++ to obtain the .hex file for this program </p>\n\n<p>COMPILE_BUILD.bat</p>\n\n<pre><code>ECHO OFF\nECHO ----------------------------------------------------------\nECHO ----- executing your commands : compile and build  -------\nECHO ----------------------------------------------------------\navr-gcc -g -Wall -Os -DF_CPU=20000000UL -mmcu=atmega88p -c AVR_comunic.c \navr-gcc -g -Wall -Os -DF_CPU=20000000UL -mmcu=atmega88p -c main_f.c\n\navr-gcc -g -mmcu=atmega88p -o AVR_comunic.elf main_f.o AVR_comunic.o\n\navr-objdump -h -S AVR_comunic.elf &gt; AVR_comunic.lst\navr-gcc -g -mmcu=atmega8 -Wl,-Map,AVR_comunic.map -o AVR_comunic.elf AVR_comunic.o\navr-objcopy -j .text -j .data -O ihex AVR_comunic.elf AVR_comunic.hex\nECHO ----------------------------------------------------------\nECHO ---------------------- happy ? ---------------------------\nECHO ----------------------------------------------------------\npause\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>... : undefined reference to 'main'\navr-objcopy: 'AVR_comunic.elf' no such file\n</code></pre>\n\n<p>I understand from the information on internet that the linker does thinks that there is no \"main\" function ... but it is ... what am I doing wrong? Or how should I write to compile multiple source files? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1503543571, "post_id": 45828214, "comment_id": 78662518, "body": "for ease of readability and understanding: 1) consistently indent the code.  Indent after every opening brace &#39;{&#39;.  Unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1503543694, "post_id": 45828214, "comment_id": 78662557, "body": "the posted code contains several &#39;magic&#39; numbers.  &#39;magic&#39; numbers are numbers with no basis.  I.E. 5, 80.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc.  Suggest using a <code>enum</code> statement or <code>#define</code> statements to give those &#39;magic&#39; numbers meaningful names,  then use those meaningful names throughout the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1503543744, "post_id": 45828214, "comment_id": 78662570, "body": "regarding: <code>for (i = 0; i &lt; 5; i++)</code>  the &#39;magic&#39; number 5 is the count of lines in the table <code>tracks[][80]</code>  1) it would be much better to declare the table as an array of pointers to char strings.  <code>char *table[] = ...</code>  then the <code>5</code> would be defined as: <code>sizeof( table ) &#47; sizeof( table[0] )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1503544132, "post_id": 45828214, "comment_id": 78662677, "body": "code should always check (!=NULL) the returned value from <code>fgets()</code> to assure the operation was successful."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8420753, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6Iifq2qtYp8/AAAAAAAAAAI/AAAAAAAAL18/Py4iKKJdfLI/photo.jpg?sz=128", "display_name": "Beeran", "link": "https://stackoverflow.com/users/8420753/beeran"}, "edited": false, "score": 0, "creation_date": 1503445912, "post_id": 45828278, "comment_id": 78615023, "body": "Thanks for the answer. Just confirming So if I put &#39;heart&#39; it was read like &#39;heart\\n\\0&#39; due to fgets . We did removed it through search_for[strlen(search_for) - 1] = &#39;\\0&#39;; I will appreciate if you can explain the syntax. I understood the logic not the syntax"}, {"owner": {"reputation": 106, "user_id": 5410166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa2ec901e6c8056e0e80a0956f65da16?s=128&d=identicon&r=PG", "display_name": "Giuseppe Luigi", "link": "https://stackoverflow.com/users/5410166/giuseppe-luigi"}, "edited": false, "score": 0, "creation_date": 1503478360, "post_id": 45828278, "comment_id": 78627066, "body": "You got it right, fgets gives you <code>heart\\n\\0</code>, you remove the <code>newline</code> character <code>\\n</code>, that represents the <code>&lt;intro&gt;</code> or <code>&lt;return&gt;</code> key in your keyboard."}, {"owner": {"reputation": 5782, "user_id": 2832398, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/356c99a077310a35816f852423859f4c?s=128&d=identicon&r=PG&f=1", "display_name": "lilezek", "link": "https://stackoverflow.com/users/2832398/lilezek"}, "edited": false, "score": 0, "creation_date": 1503595764, "post_id": 45828278, "comment_id": 78694028, "body": "Yes because you do not put <code>heart</code> only, you put <code>heart&lt;intro&gt;</code>. If you do not press intro fgets does not read anything."}], "tags": [], "owner": {"reputation": 5782, "user_id": 2832398, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/356c99a077310a35816f852423859f4c?s=128&d=identicon&r=PG&f=1", "display_name": "lilezek", "link": "https://stackoverflow.com/users/2832398/lilezek"}, "is_accepted": true, "score": 5, "last_activity_date": 1503444319, "last_edit_date": 1503444319, "creation_date": 1503443407, "answer_id": 45828278, "question_id": 45828214, "link": "https://stackoverflow.com/questions/45828214/head-first-c-program-text-search-program/45828278#45828278", "title": "Head First C Program ( text search program)", "body": "<p>According to cplusplus website, this line:</p>\n\n<pre><code>fgets(search_for, 80, stdin);\n</code></pre>\n\n<p>Is capturing the <code>newline</code> character, in the end of search_for.</p>\n\n<p>If you type:</p>\n\n<pre><code>heart&lt;intro&gt;\n</code></pre>\n\n<p>You will get also the character representing the <code>intro</code> keystroke, and you won't find <code>heart\\n</code> in the text. </p>\n\n<p>So doing:</p>\n\n<pre><code>search_for[strlen(search_for) - 1] = '\\0';\n</code></pre>\n\n<p>will <em>erase</em> the newline from the string (<code>heart\\n</code> to <code>heart</code>), because if you do not strip the newline the search will fail.</p>\n\n<blockquote>\n  <p>Reads characters from stream and stores them as a C string into str\n  until (num-1) characters have been read or either a newline or the\n  end-of-file is reached, whichever happens first.</p>\n  \n  <p>A newline character makes fgets stop reading, but it is considered a\n  valid character by the function and included in the string copied to\n  str.</p>\n</blockquote>\n\n<p><a href=\"http://www.cplusplus.com/reference/cstdio/fgets/\" rel=\"noreferrer\">http://www.cplusplus.com/reference/cstdio/fgets/</a></p>\n"}, {"comments": [{"owner": {"reputation": 5782, "user_id": 2832398, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/356c99a077310a35816f852423859f4c?s=128&d=identicon&r=PG&f=1", "display_name": "lilezek", "link": "https://stackoverflow.com/users/2832398/lilezek"}, "edited": false, "score": 1, "creation_date": 1503444268, "post_id": 45828351, "comment_id": 78614658, "body": "According to the standard yes, it does. <code>A terminating null character is automatically appended after the characters copied to str</code>."}], "tags": [], "owner": {"reputation": 29, "user_id": 8500639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/923d951c8f3d304ad38911cdfe3ebe6e?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/8500639/shawn"}, "is_accepted": false, "score": -1, "last_activity_date": 1503444655, "last_edit_date": 1503444655, "creation_date": 1503443983, "answer_id": 45828351, "question_id": 45828214, "link": "https://stackoverflow.com/questions/45828214/head-first-c-program-text-search-program/45828351#45828351", "title": "Head First C Program ( text search program)", "body": "<pre><code>search_for[strlen(search_for) - 1] = '\\0';\n</code></pre>\n\n<p>'\\0' is the explicit NULL terminator for string. A null-terminated string is a character string stored as an array containing the characters and terminated with a null character ('\\0', called NUL in ASCII).</p>\n"}], "owner": {"reputation": 23, "user_id": 8420753, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6Iifq2qtYp8/AAAAAAAAAAI/AAAAAAAAL18/Py4iKKJdfLI/photo.jpg?sz=128", "display_name": "Beeran", "link": "https://stackoverflow.com/users/8420753/beeran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 45828278, "answer_count": 2, "score": 1, "last_activity_date": 1503580007, "creation_date": 1503442952, "last_edit_date": 1503580007, "question_id": 45828214, "link": "https://stackoverflow.com/questions/45828214/head-first-c-program-text-search-program", "title": "Head First C Program ( text search program)", "body": "<p>I have a question regarding the below program from Head First C.\nIn the book under main function the writer did not used <code>search_for[strlen(search_for) - 1] = '\\0';</code>; still his program ran fine. However when I used original version of the program (as per book),it was not able to find the text which I input. I got the below version from github(which can find text in string) but I still can't understand why it was used . If somebody can explain me I will really appreciate.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar tracks[][80] = {\n    \"I left my heart in Harvad Med School\",\n    \"Newark, Newark -  Wonderful town\",\n    \"Dancing with a Dork\",\n    \"From here to maternity\",\n    \"The girl from Iwo Jima\",\n};\n\nvoid find_track(char search_for[])\n{\n    int i;\n    for (i = 0; i &lt; 5; i++) {\n        if (strstr(tracks[i], search_for))\n            printf(\"Track %i: '%s'\\n\", i, tracks[i]);\n    }\n}\n\nint main()\n{\n    char search_for[80];\n    printf(\"Search for :\");\n    fgets(search_for, 80, stdin);\n    search_for[strlen(search_for) - 1] = '\\0';\n    find_track(search_for);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 35, "user_id": 7578445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/766043890212084/picture?type=large", "display_name": "Ntirpang Louis", "link": "https://stackoverflow.com/users/7578445/ntirpang-louis"}, "edited": false, "score": 0, "creation_date": 1503438473, "post_id": 45827480, "comment_id": 78613046, "body": "i don&#39;t understand the meaning of the dot"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 6, "creation_date": 1503438490, "post_id": 45827480, "comment_id": 78613059, "body": "This isn&#39;t C and it makes little sense (without additional context). The best interpretation is that this is <i>pseudocode</i> for initializing an array of structs."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1503438771, "post_id": 45827480, "comment_id": 78613162, "body": "I consider it pseudo code for &quot;in a loop from 1 to n, set the correspondingly indexed member of array named t, struct member named mark to 0, struct member named num to 1&quot;. It implies a data structure of array of structs. I assume that you should have learned those things in the course and you can now start coding."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1503438873, "post_id": 45827480, "comment_id": 78613191, "body": "If I am right, it leaves to wonder what should happen to t[0]. It is not one of those teachers who count 1 and up, is it?"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1503439981, "post_id": 45827480, "comment_id": 78613592, "body": "@Yunnosch That might be intentional if the point of the homework problem is to translate something from pseudocode to C. Pseudocode is often 1-based, and an important skill is to be able to translate from 1-based pseudocode to 0-based code."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1503440179, "post_id": 45827480, "comment_id": 78613632, "body": "@JohnColeman Agreed. So adding an &quot;assuming counting from 1 and array indices from 0&quot; and then filling from 0 would demonstrate that ability by making clear a) noticed b) made intentional assumption as meaningful as possible."}], "answers": [{"comments": [{"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 2, "creation_date": 1503442735, "post_id": 45827541, "comment_id": 78614298, "body": "Please don&#39;t pressure the asker into accepting an answer just 10 minutes after asking a question."}], "tags": [], "owner": {"reputation": 4011, "user_id": 5490782, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Mg3c7.jpg?s=128&g=1", "display_name": "mruanova", "link": "https://stackoverflow.com/users/5490782/mruanova"}, "is_accepted": true, "score": 1, "last_activity_date": 1503438669, "creation_date": 1503438669, "answer_id": 45827541, "question_id": 45827480, "link": "https://stackoverflow.com/questions/45827480/understanding-part-of-an-algorithm/45827541#45827541", "title": "Understanding part of an algorithm", "body": "<p>The \"t\" seems to be an array of objects, and \"mark\" and \"num\" are properties of the object. \nThis may help you:\n<a href=\"https://stackoverflow.com/questions/19590865/from-an-array-of-objects-extract-value-of-a-property-as-array\">From an array of objects, extract value of a property as array</a></p>\n"}, {"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503495993, "post_id": 45827660, "comment_id": 78640558, "body": "<code>I &lt; 9</code> should be <code>I &lt; 10</code> (or even better, <code>I &lt; n</code>). It&#39;s also unusual to use uppercase letters for variables in C."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503504190, "post_id": 45827660, "comment_id": 78647017, "body": "I accept use n instead of hard coding 10. (9 is wrong thanks for catch my error). But i want to use uppercase letters for variables. suppose we have i,j as index, as these are very similar, I want to use I,K,M as loop iterator. I grab this idea from <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwj-t_ez3e3VAhUErRQKHdvwBMMQFggvMAE&amp;url=https%3A%2F%2Fwww.goodreads.com%2Fbook%2Fshow%2F12394453-art-of-programming-contest&amp;usg=AFQjCNFZLwdf6IRDpNhKlzJdCViHEnlpRg\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503504799, "post_id": 45827660, "comment_id": 78647407, "body": "Whichever coding convention works for you, it&#39;s fine, but keep in mind that programming for contests usually has quite opposite goals than programming for maintainability. I would never use the same casing for <code>struct</code> names (like <code>M</code>) and variables (like <code>I</code>), because casing is usually meant to differentiate the class of the identifier (struct, function, local variable, global variable). You could also argue that <code>I</code> is similar to <code>T</code>."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503504992, "post_id": 45827660, "comment_id": 78647542, "body": "It seems true, and you say i must use small letters for all variable in <code>C</code> and only use capitals for Globals, constants, and etc"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1503510753, "post_id": 45827660, "comment_id": 78650787, "body": "No, not specifically, people use various conventions (e.g. <code>struct SomeStruct</code>, <code>int variable = 5</code>, <code>void do_something(void)</code> or <code>void  doSomething()</code>, caps are usually macros like <code>#define MAX_NUM 5</code>, etc). As you can see <a href=\"https://stackoverflow.com/q/1722112/69809\">here</a>, for example, everyone has a different idea, but is always to differentiate different symbols <i>somehow</i> (but variables are almost universally lowercase in all the sources I&#39;ve seen so far). But again, if your company has a certain coding standard, it&#39;s what you should use to make all code consistent."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503511538, "post_id": 45827660, "comment_id": 78651261, "body": "@Groo first is my edition on post correct both in logical and coding style. second if you suggest to use special coding style for <code>C</code>, i am not restricted to use some special style, i code for hobby and learn."}], "tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": false, "score": 2, "last_activity_date": 1503506721, "last_edit_date": 1503506721, "creation_date": 1503439274, "answer_id": 45827660, "question_id": 45827480, "link": "https://stackoverflow.com/questions/45827480/understanding-part-of-an-algorithm/45827660#45827660", "title": "Understanding part of an algorithm", "body": "<p>This pseudo code can be translated to <code>C</code></p>\n\n<p><strong>Use <code>struct</code></strong></p>\n\n<pre><code>struct cm{\n    int mark;\n    int num;\n};\n\n\n#define N 10\n\nint main(void)\n{\n\n    struct cm t[N];\n\n    for (int i=0;i&lt;N;i++){\n        t[i].mark = 0;\n        t[i].num = -1;\n    }   \n\n    //print your struct elements field\n    for (int i=0;i&lt;N;i++){\n        printf(\"%d: %d, %d\\n\",i ,t[i].mark, t[i].num);\n    }\n\n} \n</code></pre>\n\n<p>We have an array of <code>struct</code> because of we need each element of it  have two field of data (i.e. mark,num). </p>\n\n<p><code>struct cm t[N];</code> define a <code>N</code> length array of structure <code>cm</code>.</p>\n\n<p>In loop we assign to each field of array elements proper values.</p>\n\n<p>For more readability you can use <code>typedef</code> instead of using <code>struct</code> to define your desire data structure in this case.\n<a href=\"https://stackoverflow.com/questions/1675351/typedef-struct-vs-struct-definitions\">typedef vs struct</a></p>\n\n<p><strong>Use <code>typedef</code></strong></p>\n\n<pre><code>typedef struct typecm{\n    int mark;\n    int num;\n}typecm;\n\n\n#define N 10\n\nint main(void)\n{\n\n    typecm s[N];\n\n    for (int i=0;i&lt;N;i++){\n        s[i].mark = 0;\n        s[i].num = -1;\n    }   \n\n    //print values\n    for (int i=0;i&lt;N;i++){\n        printf(\"%d: %d, %d\\n\",i ,s[i].mark, s[i].num);\n    }   \n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7578445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/766043890212084/picture?type=large", "display_name": "Ntirpang Louis", "link": "https://stackoverflow.com/users/7578445/ntirpang-louis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 45827541, "answer_count": 2, "score": -3, "last_activity_date": 1503506721, "creation_date": 1503438409, "question_id": 45827480, "link": "https://stackoverflow.com/questions/45827480/understanding-part-of-an-algorithm", "title": "Understanding part of an algorithm", "body": "<p>Below is a part of an algorithm i was given to use for a project, but as it's my first time to use an algorithm i don't understand the following lines. Please will need your help.</p>\n\n<pre><code>For i=1 to n do\n     t[i] .mark &lt;-- 0\n     t[i] .num &lt;-- -1\nEnd\n</code></pre>\n"}, {"tags": ["c", "palindrome"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1503437318, "post_id": 45827177, "comment_id": 78612608, "body": "You need to reset <code>m</code> to zero each time."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1503439024, "post_id": 45827177, "comment_id": 78613251, "body": "Project Euler problem #4 is an entry level question after the first three &quot;baby steps&quot;. The idea of these sites is to solve it yourself. That is why they are called &quot;challenge sites&quot;. They are personal challenges."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503441836, "post_id": 45827177, "comment_id": 78614083, "body": "You also don&#39;t need to calculate <code>length</code>, since <code>m</code> should contain the length after the <code>while</code> loop (but you need to reset it to <code>0</code> at the top). And all these variables should be local, and most of them (like <code>m</code>, <code>n</code>, <code>prod</code>) should be defined inside the inner loop, with a limited scope. <code>max</code> is the only one which needs to be preserved between iterations."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 8502664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97045de3274cbf95f8368fcb63d108f7?s=128&d=identicon&r=PG&f=1", "display_name": "seeess1", "link": "https://stackoverflow.com/users/8502664/seeess1"}, "is_accepted": true, "score": 0, "last_activity_date": 1503502202, "creation_date": 1503502202, "answer_id": 45843883, "question_id": 45827177, "link": "https://stackoverflow.com/questions/45827177/project-euler-palindrome-4-with-c/45843883#45843883", "title": "Project Euler Palindrome #4 with C", "body": "<p>Answers provided in comments:</p>\n\n<p>You need to reset m to zero each time. \u2013 Johnny Mopp</p>\n\n<p>You also don't need to calculate length, since m should contain the length after the while loop (but you need to reset it to 0 at the top). And all these variables should be local, and most of them (like m, n, prod) should be defined inside the inner loop, with a limited scope. max is the only one which needs to be preserved between iterations. \u2013 Groo </p>\n"}], "owner": {"reputation": 75, "user_id": 8502664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97045de3274cbf95f8368fcb63d108f7?s=128&d=identicon&r=PG&f=1", "display_name": "seeess1", "link": "https://stackoverflow.com/users/8502664/seeess1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 45843883, "answer_count": 1, "score": -1, "last_activity_date": 1503502202, "creation_date": 1503436967, "question_id": 45827177, "link": "https://stackoverflow.com/questions/45827177/project-euler-palindrome-4-with-c", "title": "Project Euler Palindrome #4 with C", "body": "<p>I found few posts regarding this problem using C. Most of the elements in my code work on their own but the iteration at the beginning is causing problems for some reason. First, I'm getting an \"exited with non-zero status\" error message. When I run the program with a smaller range for a and b, I don't get that message. I'm guessing there's a problem with the rev_array and for_array variables I created. I'm sure I'm doing something really dumb right here so I apologize in advance for that.</p>\n\n<p>But when I use a smaller range for a and b (like 10 to 25), the program is still showing that all two-digit numbers (even 11, 22, 33, 44) are not the same forward and backward. I used printf to check for this.</p>\n\n<p>I made a similar program that used fixed values for a and b instead of iterating over a range of values and it worked fine. But I couldn't figure out why this one isn't working.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint max;\nint a;\nint b;\nint prod;\nint m = 0;\nint rev_array[10000];\nint for_array[10000];\nint c;\nint d;\nint same = 0;\n\nint main(void)\n{\n  // iterate over all 3 digit numbers in lines 19-21\n  for(a = 10; a &lt;= 25; a++)\n  {\n    for(b = 10; b &lt;= 25; b++)\n    {\n      max = 0;\n      prod = a * b;\n      /* thanks to Zach Scrivena for the following formula converting an integer to an array of integers posted on stackoverflow on February 5, 2009 under the subject \"convert an integer number into an array\"\n      */\n      int n = prod;\n      while(n != 0)\n      {\n        rev_array[m] = n % 10;\n        n /= 10;\n        m++;\n      }\n      /* thanks to Jordan Lewis for the following int length formula posted to stackoverflow on June 18, 2010 in response to \"Finding the length of an integer in C\"\n      */\n      int length = floor(log10(abs(prod))) + 1;\n      // create the forward array of the ints in prod \n      for(c = length - 1, d = 0; c &gt;= 0; c--, d++)\n      {\n        for_array[d] = rev_array[c];\n      }\n      // compare the forward and reverse arrays to see if they match exactly\n      for(int e = 0; e &lt; length; e++)\n      {\n        if(for_array[e] != rev_array[e])\n        {\n          // if they don't match then set same equal to 1 for following step\n          same = 1;\n        }\n      }\n      /* if prod is greater than max and the forward and reverse arrays are identical, then replace max with prod\n      */\n      if(prod &gt; max &amp;&amp; same == 0)\n      {\n        max = prod;\n      }\n      // reset same and repeat the process\n      same = 0;\n    }\n  }\n  // print the final, greatest number that fits the preceding criteria\n  printf(\"new max: %i \\n\", max);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "optimization"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503436782, "post_id": 45827115, "comment_id": 78612375, "body": "Your <code>array</code> is all zeros. And the program doesn&#39;t have any output. So the optimized program will be the empty one. Update: Sorry, it should actually print &quot;CS201 - Asgmt 4 - I. Forgot\\n&quot;..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1503436785, "post_id": 45827115, "comment_id": 78612377, "body": "What makes you think there&#39;s gong to be any parallelism in the &#39;parallel&#39; code?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1503437084, "post_id": 45827115, "comment_id": 78612498, "body": "You don&#39;t need the outer <code>i</code> loop since it&#39;s all just repetitive additions. <code>for (j = 0; j &lt; ARRAY_SIZE; j++) { sum += N_TIMES * array[j] }</code>. Get rid of the <code>for (i = 0...</code> loop. Of course, <code>array</code> isn&#39;t initialized so you&#39;ll get zeroes or whatever. But I assume that&#39;s not the point of your code."}, {"owner": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 0, "creation_date": 1503437276, "post_id": 45827115, "comment_id": 78612582, "body": "@Dante you missed an obvious optimization (as recommended by information_interchange), but the process you followed in unrolling the loop and in determining the best number to unroll is a good skill to keep in your back pocket.  Some day, tricks like that will be very useful for you."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503437657, "post_id": 45827115, "comment_id": 78612731, "body": "@EugeneSh. C does not require floating-point zero to be bitwise zero. At best, the behavior is implementation defined."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503438405, "post_id": 45827115, "comment_id": 78613012, "body": "You do not use this table or the result so any compile time optimisation will remove both loops :)"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503438485, "post_id": 45827115, "comment_id": 78613054, "body": "Here, it&#39;s a duplicate: <a href=\"https://stackoverflow.com/q/32000917/69809\">C loop optimization help for final assignment</a>. As some answers state in the link, whoever wrote this assignment doesn&#39;t really understand what&#39;s important in algorithmic complexity, optimizing compilers, and probably programming in general. Another thread here too: <a href=\"https://stackoverflow.com/q/31918680/69809\">Optimized sum for an array of doubles</a>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1503439383, "post_id": 45827115, "comment_id": 78613390, "body": "Does the inner loop have to stay a loop? Your unrolling indicates that not. In that case use a flag to notice execution in the first time through the outer loop, execute the inner loop, store the result and in all following execution just add the stored sum. I.e. do not bother about optimising the first time, optimise all others by 99.99%."}], "answers": [{"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1503436923, "post_id": 45827155, "comment_id": 78612424, "body": "This should reduce running time ~600.000 times."}, {"owner": {"reputation": 117, "user_id": 8419779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/821b497c875751967147fc97cb814f38?s=128&d=identicon&r=PG&f=1", "display_name": "csStudent", "link": "https://stackoverflow.com/users/8419779/csstudent"}, "edited": false, "score": 0, "creation_date": 1503437731, "post_id": 45827155, "comment_id": 78612764, "body": "I should have mentioned I&#39;m only allowed to make changes to the inner loop, not to the outer one."}, {"owner": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 1, "creation_date": 1503437846, "post_id": 45827155, "comment_id": 78612807, "body": "hmm, so the outer loop is required for some reason?"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 117, "user_id": 8419779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/821b497c875751967147fc97cb814f38?s=128&d=identicon&r=PG&f=1", "display_name": "csStudent", "link": "https://stackoverflow.com/users/8419779/csstudent"}, "edited": false, "score": 1, "creation_date": 1503437963, "post_id": 45827155, "comment_id": 78612854, "body": "@DanteKiaunis: you should have mentioned this, yes. Now your question makes even less sense. Please post the actual code you are trying to optimize."}, {"owner": {"reputation": 117, "user_id": 8419779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/821b497c875751967147fc97cb814f38?s=128&d=identicon&r=PG&f=1", "display_name": "csStudent", "link": "https://stackoverflow.com/users/8419779/csstudent"}, "edited": false, "score": 0, "creation_date": 1503438108, "post_id": 45827155, "comment_id": 78612907, "body": "The code I&#39;m trying to optimize is the very first code I put up... It&#39;s a homework assignment it isn&#39;t supposed to be useful or anything"}], "tags": [], "owner": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "is_accepted": false, "score": 5, "last_activity_date": 1503437045, "last_edit_date": 1503437045, "creation_date": 1503436869, "answer_id": 45827155, "question_id": 45827115, "link": "https://stackoverflow.com/questions/45827115/optimizing-for-loop-addition/45827155#45827155", "title": "optimizing for loop addition", "body": "<p>Since j and i don't depend on one another, I think you can just do: </p>\n\n<pre><code>for (j = 0; j &lt; ARRAY_SIZE; j++) {\n    sum += array[j];\n}\n\nsum *= N_TIMES\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503449934, "post_id": 45827934, "comment_id": 78615857, "body": "This is most unlikely to affect performance."}], "tags": [], "owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1503440819, "creation_date": 1503440819, "answer_id": 45827934, "question_id": 45827115, "link": "https://stackoverflow.com/questions/45827115/optimizing-for-loop-addition/45827934#45827934", "title": "optimizing for loop addition", "body": "<p>You can move the declaration of variable 'j' out of the loop like so:</p>\n\n<pre><code> int j;\n for (i = 0; i &lt; N_TIMES; i++) {\n\n    //int     j; &lt;-- Move this line out of the loop\n    for (j = 0; j &lt; ARRAY_SIZE - 11; j+= 12) {\n        sum = sum + (array[j] + array[j+1] + array[j+2] + array[j+3] + array[j+4] + array[j+5] + array[j+6] + array[j+7] + array[j+8] + array[j+9] + array[j+10] + array[j+11]);\n    }\n }\n</code></pre>\n\n<p>You don't need to declare a new variable 'j' each time the loop runs.</p>\n"}], "owner": {"reputation": 117, "user_id": 8419779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/821b497c875751967147fc97cb814f38?s=128&d=identicon&r=PG&f=1", "display_name": "csStudent", "link": "https://stackoverflow.com/users/8419779/csstudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "closed_date": 1503442189, "answer_count": 2, "score": -1, "last_activity_date": 1503440819, "creation_date": 1503436680, "last_edit_date": 1503438447, "question_id": 45827115, "link": "https://stackoverflow.com/questions/45827115/optimizing-for-loop-addition", "closed_reason": "Duplicate", "title": "optimizing for loop addition", "body": "<p>I have an assignment to optimize a for loop so the compiler compiles code that runs faster. The objective is to get the code to run in 5 or less seconds, with the original run time being around 23 seconds. The original code looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define N_TIMES     600000\n#define ARRAY_SIZE   10000\n\nint main(void)\n{\n    double  *array = calloc(ARRAY_SIZE, sizeof(double));\n    double  sum = 0;\n    int     i;\n\n    printf(\"CS201 - Asgmt 4 - I. Forgot\\n\");\n\n    for (i = 0; i &lt; N_TIMES; i++) {\n\n        int     j;\n\n        for (j = 0; j &lt; ARRAY_SIZE; j++) {\n            sum += array[j];\n            }\n\n        }\n\n    return 0;\n}\n</code></pre>\n\n<p>My first thought was to do loop unrolling on the inner for loop which got it down to 5.7 seconds and that loop looked like this:</p>\n\n<pre><code> for (j = 0; j &lt; ARRAY_SIZE - 11; j+= 12) {\n            sum = sum + (array[j] + array[j+1] + array[j+2] + array[j+3] + array[j+4] + array[j+5] + array[j+6] + array[j+7] + array[j+8] + array[j+9] + array[j+10] + array[j+11]);\n                }\n</code></pre>\n\n<p>After taking it out to 12 spots in the array per loop the performance wasn't increasing anymore so my next thought was to try and introduce some parallelism so I did this:</p>\n\n<pre><code>   sum = sum + (array[j] + array[j+1] + array[j+2] + array[j+3] + array[j+4] + array[j+5]);\n   sum1 = sum1 + (array[j+6] + array[j+7] + array[j+8] + array[j+9] + array[j+10] + array[j+11]);\n</code></pre>\n\n<p>That actually ended up slowing down the code and each additional variable again slowed the code down more so. I'm not sure if parallelism doesn't work here or if I'm implementing it wrong or what but that didn't work so now I'm not really sure how I can optimize it anymore to get it below 5 seconds.</p>\n\n<p>EDIT: I forgot to mention I can't make any changes to the outer loop, only the inner loop</p>\n\n<p>EDIT2: This is the part of the code I'm trying to optimize for my assignment: </p>\n\n<pre><code>        for (j = 0; j &lt; ARRAY_SIZE; j++) {\n            sum += array[j];\n            }\n</code></pre>\n\n<p>Im using gcc compiler with the flags\ngcc -m32 -std=gnu11 -Wall -g a04.c -o a04\nAll compiler optimizations are turned off</p>\n"}, {"tags": ["c", "algorithm", "sorting", "quicksort"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1503436339, "post_id": 45826933, "comment_id": 78612133, "body": "Thought about using a degugger"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1503436353, "post_id": 45826933, "comment_id": 78612142, "body": "Use your debugger. Check the array after it has been partitioned. Does it indeed look partitioned?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1503436455, "post_id": 45826933, "comment_id": 78612193, "body": "By the way, consider using pointer+length to represent a slice of an array. pointer+startIndex+endIndex is too much work."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1503436465, "post_id": 45826933, "comment_id": 78612200, "body": "Is the <code>return</code> in the <code>partition</code> function meant to be inside or outside the loop?  Outside seems more plausible.  Your compiler is probably complaining that you don&#39;t always return a value from the function, too.  Heed your compiler; it knows more about C than you do.  (If it isn&#39;t complaining, turn up the warning level, or get a better compiler.)"}], "answers": [{"tags": [], "owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1503456054, "creation_date": 1503456054, "answer_id": 45829784, "question_id": 45826933, "link": "https://stackoverflow.com/questions/45826933/trouble-with-quicksort/45829784#45829784", "title": "Trouble with quicksort", "body": "<p>Problem is with your partition function .You were returning partitionIndex  inside the for loop </p>\n\n<p>corrected logic</p>\n\n<pre><code>int partition (int numbers[], int arrayStart, int arrayEnd)\n{\n    int pivot = numbers[arrayEnd];\n    int partitionIndex = arrayStart;\n\n    for (int i = arrayStart; i &lt; arrayEnd; i++)\n    {\n\n        if (numbers[i] &lt;= pivot)\n        {\n            int temp = numbers[partitionIndex];\n            numbers[partitionIndex] = numbers[i];\n            numbers[i] = temp;\n            partitionIndex = partitionIndex + 1;\n        }\n\n    }\n    int temp2 = numbers[partitionIndex];\n    numbers[partitionIndex] = numbers[arrayEnd];\n    numbers[arrayEnd] = temp2;\n    return partitionIndex;\n}\n</code></pre>\n\n<p>Full code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint partition (int numbers[], int arrayStart, int arrayEnd)\n{\n    int pivot = numbers[arrayEnd];\n    int partitionIndex = arrayStart;\n\n    for (int i = arrayStart; i &lt; arrayEnd; i++)\n    {\n\n        if (numbers[i] &lt;= pivot)\n        {\n            int temp = numbers[partitionIndex];\n            numbers[partitionIndex] = numbers[i];\n            numbers[i] = temp;\n            partitionIndex = partitionIndex + 1;\n        }\n\n    }\n    int temp2 = numbers[partitionIndex];\n    numbers[partitionIndex] = numbers[arrayEnd];\n    numbers[arrayEnd] = temp2;\n    return partitionIndex;\n}\n\n\nvoid QuickSort (int numbers[], int arrayStart, int arrayEnd)\n{\n\n    if (arrayStart &lt; arrayEnd)\n        {\n        int partitionIndex = partition (numbers, arrayStart, arrayEnd);\n        QuickSort(numbers, arrayStart, partitionIndex - 1);\n        QuickSort(numbers, partitionIndex + 1, arrayEnd);\n        }\n     else\n       {\n        return;\n       }\n}\n\nint main() {\n\n    int numbers[6] = {2, 5, 1, 6, 3, 4};\n\n    int arrayStart = 0;\n    int arrayEnd = 5;\n\n    QuickSort(numbers, arrayStart, arrayEnd);\n\n    for (int i = 0; i &lt; 6; i++) {\n        printf(\"%d \", numbers[i]);\n    }\n\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>1 2 3 4 5 6 Program ended with exit code: 0\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7354776, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1181340045235551/picture?type=large", "display_name": "Tom&#225;s Santiago", "link": "https://stackoverflow.com/users/7354776/tom%c3%a1s-santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503456054, "creation_date": 1503435801, "last_edit_date": 1503436504, "question_id": 45826933, "link": "https://stackoverflow.com/questions/45826933/trouble-with-quicksort", "title": "Trouble with quicksort", "body": "<p>I am having a bit of a problem with quick sort. the algorithm i have made executes and the numbers are printed at the end. But the are not ordered. Could you see if you can find any flaws? Could you please help me?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint partition (int numbers[], int arrayStart, int arrayEnd) {\n\n    int pivot = numbers[arrayEnd];\n    int partitionIndex = arrayStart;\n\n    for (int i = arrayStart; i &lt; arrayEnd; i++) {\n\n        if (numbers[i] &lt;= pivot) {\n           int temp = numbers[partitionIndex];\n           numbers[partitionIndex] = numbers[i];\n           numbers[i] = temp;\n           partitionIndex = partitionIndex + 1;\n       }\n\n       int temp2 = numbers[partitionIndex];\n       numbers[partitionIndex] = numbers[arrayEnd];\n       numbers[arrayEnd] = temp2;\n\n       return partitionIndex;\n   }\n}\n\n\nvoid QuickSort (int numbers[], int arrayStart, int arrayEnd) {\n\n    if (arrayStart &lt; arrayEnd) {\n        int partitionIndex = partition (numbers, arrayStart, arrayEnd);\n        QuickSort(numbers, arrayStart, partitionIndex - 1);\n        QuickSort(numbers, partitionIndex + 1, arrayEnd);\n   }\n   else {\n       return;\n   }\n}\n\nint main() {\n\n   int numbers[6] = {2, 5, 1, 6, 3, 4};\n\n   int arrayStart = 0;\n   int arrayEnd = 5;\n\n   QuickSort(numbers, arrayStart, arrayEnd);\n\n   for (int i = 0; i &lt; 6; i++) {\n       printf(\"%d \", numbers[i]);\n   }\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503435759, "post_id": 45826893, "comment_id": 78611888, "body": "Think about it not as about an RNG, but as a counter. And <code>srand</code> is resetting the counter to the given value. Now think how will it work."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1503435799, "post_id": 45826893, "comment_id": 78611911, "body": "also, this isn&#39;t c but c++ with c calls."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1503436282, "post_id": 45826893, "comment_id": 78612106, "body": "Calling <code>srand(1)</code> more than once is like saying &quot;give me a random number from the sequence beginning with <code>1</code>&quot; and expecting different results."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1503435769, "post_id": 45826903, "comment_id": 78611897, "body": "there&#39;s probably no interest calling srand more than once in a program..."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1503435820, "post_id": 45826903, "comment_id": 78611923, "body": "@Jean-Fran&#231;oisFabre It&#39;s not. But some programs actually set the seed if you need to. Like some old PC games (<i>you could choose a given game if you previously lost it</i>)."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1503435881, "post_id": 45826903, "comment_id": 78611954, "body": "the old games I know of ask to &quot;press a key&quot; and while doing this, they get a random value from random generator until keypress. The user <i>is</i> the seed."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1503435917, "last_edit_date": 1503435917, "creation_date": 1503435633, "answer_id": 45826903, "question_id": 45826893, "link": "https://stackoverflow.com/questions/45826893/srandtime-in-c-calling-once/45826903#45826903", "title": "srand(time()) in C - calling once?", "body": "<p>Because <code>time(NULL)</code> doesn't have enough resolution. For every call to <code>srand()</code> there is not enough time between the calls and <code>time(NULL)</code> returns the same for every call.</p>\n\n<p>So you are essentially setting the same seed for every call. If you use a more fine grained time function, with <em>nanoseconds</em> precision you might observe a difference.</p>\n\n<p>If you call <code>srand()</code> once at the beginning of the program, then the seed is set to the current <code>time(NULL)</code> value and every call generates a new <em>pseudo</em>-random value. If you call the program consecutively very quickly you could observe the same problem too.</p>\n"}], "owner": {"reputation": 37, "user_id": 5717258, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7dr1r.jpg?s=128&g=1", "display_name": "Kornelia", "link": "https://stackoverflow.com/users/5717258/kornelia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "closed_date": 1503435665, "answer_count": 1, "score": -1, "last_activity_date": 1503435917, "creation_date": 1503435601, "question_id": 45826893, "link": "https://stackoverflow.com/questions/45826893/srandtime-in-c-calling-once", "closed_reason": "Duplicate", "title": "srand(time()) in C - calling once?", "body": "<p>I've just figured out that seeding generator should be done once - e.g. in main function. Function like this:</p>\n\n<pre><code>int getRand(){\n    srand ( time(NULL) );\n    cout&lt;&lt;((double) rand() / (RAND_MAX))&lt;&lt;\" \";\n}\n</code></pre>\n\n<p>calling in main:</p>\n\n<pre><code>int main(){ \n    cout&lt;&lt;getlvl()&lt;&lt;\" \"&lt;&lt;getlvl()&lt;&lt;\" \"&lt;&lt;getlvl()&lt;&lt;\" \"&lt;&lt;getlvl();    \n    return 0;\n}\n</code></pre>\n\n<p>gives me the same output all the time. Why srand should be calling only once to work correctly?</p>\n"}, {"tags": ["c", "types", "64-bit", "c-preprocessor", "native"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1503435244, "post_id": 45826695, "comment_id": 78611638, "body": "&quot;enforce long to be guaranteed as 32-bit?&quot;. By using <code>int32_t</code> instead of <code>long</code>."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503435461, "post_id": 45826695, "comment_id": 78611755, "body": "<code>uint32_t t;</code> - <code>t</code> is guaranteed to be 32 bit @Groo"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503435686, "post_id": 45826695, "comment_id": 78611851, "body": "@PeterJ: well, that&#39;s what OP said too, I misread the question the first time, I thought it said <code>uint32_t</code> is 64-bit. Never mind. Of course the promotion happens in expressions according to promotion rules, it doesn&#39;t &quot;become&quot; 64-bit, that&#39;s what I wanted to say."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1503435796, "post_id": 45826695, "comment_id": 78611910, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12794603/making-long-4-bytes-in-gcc-on-a-64-bit-linux-machine\">Making &#39;long&#39; 4 bytes in gcc on a 64-bit Linux machine</a>"}, {"owner": {"reputation": 4777, "user_id": 375828, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PZNgw.gif?s=128&g=1", "display_name": "Jason R. Mick", "link": "https://stackoverflow.com/users/375828/jason-r-mick"}, "edited": false, "score": 0, "creation_date": 1503435807, "post_id": 45826695, "comment_id": 78611920, "body": "<code>uint32_t</code> isn&#39;t guaranteed to stay 32-bit if it say undergoes a math op, correct?  The linked question suggests that... let me update the wording of my question mildly to clarify the intent."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1503435846, "post_id": 45826695, "comment_id": 78611939, "body": "@JasonR.Mick: yes, the linked question decribes a valid UB case."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503436007, "post_id": 45826695, "comment_id": 78612004, "body": "You may be able to use <code>gcc -m32</code> to do a 32-bit compilation where the type of <code>long</code> will also be 32 bits.  However, even on iOS, 32-bit applications are going the way of the dodo.  You need to design the software so that it works correctly provided the architecture provides the minimum levels of support you need.  Note that compiling for 32-bit requires a 32-bit O/S API; that which works OK with 64-bit may not work at all, or may work incorrectly, with 32-bit.  It is a non-trivial exercise."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503436090, "post_id": 45826695, "comment_id": 78612030, "body": "@Jason R. Mick it is,"}, {"owner": {"reputation": 4777, "user_id": 375828, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PZNgw.gif?s=128&g=1", "display_name": "Jason R. Mick", "link": "https://stackoverflow.com/users/375828/jason-r-mick"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503436381, "post_id": 45826695, "comment_id": 78612152, "body": "Does <code>-m32</code> support ops as well?  Sorry, guys that was the crux of my question (to address your comment esp. @Groo)... I should have been clearer... I&#39;m interested in whether end-to-end sort of enforcement is possible, i.e. if any intermediates (per the math op post linked)  get promoted, then I&#39;d consider that a violation of the spirit of my question.  I&#39;ve read several posts on values, but I see people posting apparent work arounds to enforce op bit restrictions."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503436433, "post_id": 45826695, "comment_id": 78612179, "body": "Some platforms have even special instructions for it <a href=\"https://godbolt.org/g/bcLZPW\" rel=\"nofollow noreferrer\">godbolt.org/g/bcLZPW</a>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503436691, "post_id": 45826695, "comment_id": 78612328, "body": "gcc has those types built in for example <code>__UINT32_TYPE__</code>"}, {"owner": {"reputation": 4777, "user_id": 375828, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PZNgw.gif?s=128&g=1", "display_name": "Jason R. Mick", "link": "https://stackoverflow.com/users/375828/jason-r-mick"}, "edited": false, "score": 0, "creation_date": 1503437077, "post_id": 45826695, "comment_id": 78612496, "body": "Just to clarify... I have <code>uint32_t s1</code> and <code>uint32_t s2</code>, and I want to ensure <code>*</code> does not promote during <code>s1 * s2</code>.  It sounds like the types are not sufficient to enforce that. Does compiling with <code>-m32</code> and 32-bit libraries on a 64-bit platform prevent not only value promotion, but promotion during the <code>*</code> op as well?"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1503435838, "post_id": 45826798, "comment_id": 78611933, "body": "Theoretical rather than practical objection: those types don&#39;t exist if the platform doesn&#39;t support it.  OTOH, types such as <code>uint_least8_t</code> must exist."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1503435978, "post_id": 45826798, "comment_id": 78611995, "body": "This may be a good work-around advice but it doesn&#39;t really answer the question"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 1, "last_activity_date": 1503435233, "creation_date": 1503435233, "answer_id": 45826798, "question_id": 45826695, "link": "https://stackoverflow.com/questions/45826695/how-to-prevent-bit-size-promotion-in-c-language-ops/45826798#45826798", "title": "How to Prevent Bit-Size Promotion in C-Language Ops?", "body": "<p>You have special types in the stdint.h</p>\n\n<pre><code>uint8_t, uint16_t, uint32_t &amp; uint64_t - for unsigned\nint8_t, int16_t, int32_t &amp; int64_t - for signed\n</code></pre>\n\n<p>Those types guarantee the width of the object;</p>\n"}], "owner": {"reputation": 4777, "user_id": 375828, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PZNgw.gif?s=128&g=1", "display_name": "Jason R. Mick", "link": "https://stackoverflow.com/users/375828/jason-r-mick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 45826798, "answer_count": 1, "score": 1, "last_activity_date": 1503436726, "creation_date": 1503434868, "last_edit_date": 1503436726, "question_id": 45826695, "link": "https://stackoverflow.com/questions/45826695/how-to-prevent-bit-size-promotion-in-c-language-ops", "title": "How to Prevent Bit-Size Promotion in C-Language Ops?", "body": "<p>My understanding <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">per reading C99</a> [PDF] is that it declares types (e.g. <code>unsigned int</code>) in terms of rank, range, etc. in such a way that does not mandate a maximum true bit size, although a minimum size is implied.  I've read on <a href=\"https://stackoverflow.com/\">StackOverflow</a> that while <code>unsigned int</code> compiles as <code>uint32_t</code> on 32-bit platforms, it <a href=\"https://stackoverflow.com/questions/27001604/32-bit-unsigned-multiply-on-64-bit-causing-undefined-behavior\">may be promoted to 64-bit</a> on X86-64 platforms.  Further, Wikipedia says the <a href=\"https://en.wikipedia.org/wiki/64-bit_computing#64-bit_data_models\" rel=\"nofollow noreferrer\">Unix/Linux family of operating systems uses 64-bit</a> for <code>long</code> by default.  Posts indicate that the main concern is unexpected behavior; <a href=\"https://stackoverflow.com/questions/27012177/can-integer-promotion-affect-64-bit-performance\">performance issues of promoting or not promoting appear to be secondary</a>.</p>\n\n<p>To avoid potential unexpected behavior, when porting a program from one platform to another (e.g. porting a Windows app to Linux), is it possible to force the compiler (e.g. <code>gcc</code>) to not only abide by a certain maximum bit width for a specific type (e.g. enforce <code>long</code> to be guaranteed as 32-bit in the context of the current code, contrary general platform sizing), but to ALSO enforce such a restriction on <strong>all math ops / intermediate results in math ops</strong> involving that restricted value?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12794603/making-long-4-bytes-in-gcc-on-a-64-bit-linux-machine\">There's been discussion of how to restrict</a> <code>long</code> to a specific size by value, but that appears limited to restricting the values themselves, not ops.</p>\n\n<p>If promotion can still occur -- per the post regarding <code>int32_t</code> multiplication and unexpected overflows during automatic promotion in code compiled on X86-64 CPUs -- restricting by value doesn't ensure expected results / consistency.</p>\n\n<p>How can we restrict not only the values, but intermediates from ops, as well?</p>\n\n<p>Does the ability to enforce a maximum bit width in all operations relative a specific type (assuming that's possible) vary by compiler or is it standardized in some way?</p>\n\n<p>i.e. if <code>long</code> is natively 64-bit, can we force it to be 32-bit via certain preprocessor directives, etc.?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1503432421, "post_id": 45826113, "comment_id": 78610394, "body": "you&#39;re not checking the result of <code>fopen</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1503432422, "post_id": 45826113, "comment_id": 78610396, "body": "Why you don&#39;t check that <code>malloc()</code> did not return <code>NULL</code> and that <code>fopen()</code> didn&#39;t return <code>NULL</code> either. Also, <code>sizeof(char)</code> is 1 by definition."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1503432581, "post_id": 45826113, "comment_id": 78610458, "body": "if you allocate 51 bytes, then use <code>if (fscanf(myFile, &quot;%50s&quot;, buff) != 1){</code> it&#39;s safer"}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503432658, "post_id": 45826113, "comment_id": 78610481, "body": "Sorry, most of this has already been tried. My head is a mess. Il edit the post."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1503432957, "post_id": 45826113, "comment_id": 78610594, "body": "@JoelHansson Please try to execute my version of your program, it only has slight modifications, but you should not see any <code>valgrind</code> message. And if you do, the problem is somewhere else."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503433000, "post_id": 45826113, "comment_id": 78610611, "body": "&quot;Invalid read of size 4 ... __isoc99_fscanf (isoc99_fscanf.c:30)&quot; <code>fopen()</code> returned <code>NULL</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1503433139, "post_id": 45826113, "comment_id": 78610674, "body": "Is <code>scanf(&quot;%s&quot;, str);</code> the <i>true</i> code?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1503433626, "post_id": 45826113, "comment_id": 78610892, "body": "The downvoter should check the comments on my answer, just in case it is accepted and then I can&#39;t delete it though it will still have the downvote there."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503433725, "post_id": 45826113, "comment_id": 78610926, "body": "The thing in the end is just to stop the program from instantly turning of. It can be ignored. It works if I add tests to see if it returns NULL. But the code ran fine so it never actually returned NULL."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1503433849, "post_id": 45826113, "comment_id": 78610984, "body": "i suggest that this is most likely a harmless message which is a result of the optimization design of the function. Most likely they are reading something in 32 or 64 bit quantities. whether some bytes are outside of an allocated region. I see a lot of those from different libc functions in perfectly good programs."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1503434031, "post_id": 45826113, "comment_id": 78611067, "body": "@JoelHansson, Something was <code>NULL</code> somewhere and it&#39;s at the call to <code>fscanf()</code>. Try with <code>--track-origins=yes</code> and post the full output of valgrind please."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503434193, "post_id": 45826113, "comment_id": 78611129, "body": "You are correct. The filepath was different when I compiled it in the terminal from where I ran it in the IDE resulting in a NULL. This is why you do the tests I guess. I just feel stupid now."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1503434210, "post_id": 45826113, "comment_id": 78611138, "body": "Search for &quot;Address 0x0 is not stack&#39;d, malloc&#39;d or (recently) free&#39;d&quot; with the search engine of your choice. Pretty sure that you get valuable hints and explanations."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1503434281, "post_id": 45826113, "comment_id": 78611178, "body": "@JoelHansson my first comment was giving the solution :)"}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503434348, "post_id": 45826113, "comment_id": 78611206, "body": "The problem is solved now btw. Dont know if I can click a checkbox or anything.   I tried searching and didnt find anything simple enough for me to understand."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1503434388, "post_id": 45826113, "comment_id": 78611229, "body": "@JoelHansson If you had tested, then you would immediately know that the file path was wrong. So ALWAYS test for errors, it saves a lot of time, contrary to what you might be thinking when faced with writing code to do so. It also avoids some mysterious things. If you make sure that there is no possibility for UB then you can debug your programs without some <a href=\"https://es.wikipedia.org/wiki/Heisenbug\" rel=\"nofollow noreferrer\">heisenbugs</a> happening."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503434605, "post_id": 45826113, "comment_id": 78611328, "body": "Im not that experienced. I will check for errors from now on."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1503432970, "post_id": 45826183, "comment_id": 78610598, "body": "Not my DV but <code>fscanf(file, &quot;%s&quot;, buffer)</code> does <b>not</b> mean that <i>valgrind</i> chances 0 errors."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503433062, "post_id": 45826183, "comment_id": 78610632, "body": "This works. Can you explain why I get the error in my code? Or link me to something explaining it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503433136, "post_id": 45826183, "comment_id": 78610671, "body": "@JoelHansson Sadly, no! I can&#39;t. There is a concept called <i>undefined</i> behavior, if you run into it then magic things could happen. For instance, the code might seem to work but <i>valgrind</i> reports a problem WTF? Yes it&#39;s undefined so virtually ANYTHING can happen."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503433333, "post_id": 45826183, "comment_id": 78610764, "body": "@JoelHansson Also, the valgrind error means dereferencing a <code>NULL</code> pointer, because it says <i>address 0x0</i>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503433442, "post_id": 45826183, "comment_id": 78610807, "body": "@JoelHansson And add <code>--track-origins=yes</code> to your <i>valgrind</i> command line."}, {"owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503433490, "post_id": 45826183, "comment_id": 78610830, "body": "Ok, thank you. I changed some things in my original code. I guess valgrind gets cranky if you dont do all of these checks."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "edited": false, "score": 0, "creation_date": 1503433583, "post_id": 45826183, "comment_id": 78610875, "body": "@JoelHansson <i>valgrind</i> simply reports memory errors, it doesn&#39;t care about your checks, it is that your checks prevent these errors."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1503434049, "post_id": 45826183, "comment_id": 78611075, "body": "NMDV, but this sounds like cargo cult programming. UB is an important concept of the C standard, but shouldn&#39;t be an excuse not to understand what&#39;s going on. After compilation there&#39;s no magic - the CPU will do as told; valgrind checks are no black magic as well. OP&#39;s code is surely lacking in error checking, but AFAICT if the file is present and the lines are as short as they are, it should work fine. The right course of action in these cases is to get your hands dirty with the debugger and actually <i>understand</i> what&#39;s going on, not just moving stuff hoping to scare away the problem."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1503434270, "post_id": 45826183, "comment_id": 78611171, "body": "@MatteoItalia It&#39;s weird that I am actually familiar with the concept of the cargo cult because as far as I know it&#39;s not a wide spread idea, and it applies to our governments a lot in Venezuela, so that&#39;s how I know the concept. But UB might be something that causes undetectable problems and that&#39;s why it should be avoided. It&#39;s not just <i>avoiding it in the hope that nothing goes wrong</i>, there is no hope involved. If you avoid it then there will be no mysteries."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1503434405, "post_id": 45826183, "comment_id": 78611236, "body": "Unfortunately, this is a surprisingly widespread &quot;debug&quot; technique - there&#39;s a problem I don&#39;t understand, let&#39;s move around stuff until it goes away; that&#39;s a <i>terrible</i> habit to pick, especially in a language that has so much UB as C; if you didn&#39;t understand what was the problem in first place, how can you know that you actually removed it, and you didn&#39;t just hide it in a darker place?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1503434589, "post_id": 45826183, "comment_id": 78611320, "body": "@IharobAlAsimi: UB lies in every corner of C, even programmers with tens of years of experience fall in its traps; from your own admission you don&#39;t know what was the original problem in OP&#39;s code, which superficially looks correct; how can you know for sure that your code, which has more checks, but doesn&#39;t look particularly different from the original, is now UB free? Maybe you just managed to hide it better from valgrind, or avoided it in some code path. But again, the problem is not much this specific example, it&#39;s one of methodology. If valgrind cries, you get to the bottom of the issue."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1503434686, "post_id": 45826183, "comment_id": 78611357, "body": "@MatteoItalia Because I am preventing every possibility for it by checking every possible <code>NULL</code> pointer dereference and avoiding a buffer overflow at <code>fscanf()</code>. That&#39;s how I know for sure. If it was a more complicated program, then there is always a risk that one missed something and UB will occur anyway of course."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1503434820, "post_id": 45826183, "comment_id": 78611433, "body": "I downvoted at first because it didn&#39;t answer the question. Now that OP revealed (what a surprise) that he wasn&#39;t running the code from the same directory, I reverted &amp; upvoted (&amp; downvoted question, to be perfectly honest). I was tempted to answer about this NULL <code>FILE *</code> at first but refrained to do so because I hadn&#39;t enough elements to be sure it answered."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1503434893, "post_id": 45826183, "comment_id": 78611471, "body": "also, it may happen that I &quot;hide stuff under the carpet&quot; when I have non-reproducible crashes. But after a while, the crash happens 100% of the time: then it&#39;s much easier to debug."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1503434963, "post_id": 45826183, "comment_id": 78611505, "body": "@Jean-Fran&#231;oisFabre From my experience, writing code without checking errors is always a cause of mysterious errors. That&#39;s why I answered."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1503434974, "post_id": 45826183, "comment_id": 78611512, "body": "the devotion of Iharob in his comments also deserves some reward :)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1503435022, "post_id": 45826183, "comment_id": 78611536, "body": "@IharobAlAsimi okay, but that&#39;s more a &quot;codereview&quot; answer. Improving OP code isn&#39;t really answering. Well, never mind now."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1503433254, "last_edit_date": 1503433254, "creation_date": 1503432604, "answer_id": 45826183, "question_id": 45826113, "link": "https://stackoverflow.com/questions/45826113/invalid-read-of-size-4-valgrind-fscanf/45826183#45826183", "title": "Invalid read of size 4, valgrind fscanf", "body": "<p>There is the concept of <em>undefined behavior</em>, if you are not very careful you can trigger such undefined behavior and then, you wont be able to tell whether the program <em>is working</em> or not.</p>\n\n<p>I will post some code that I consider very robust and should not cause any <em>valgrind</em> reports at all, including the removal of the last statement which is doing nothing, every thing I changed was <strong>a probable the reason for the problem</strong>.</p>\n\n<p>You MUST check that every function succeeded when they return a value, a more robust version of your own program is</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    FILE *file;\n    const char *filepath;\n    char *buffer;\n\n    filepath = \"../map1.map\";\n    file = fopen(filepath, \"r\");\n    if (file == NULL) {\n        fprintf(stderr, \"error openning: %s\\n\", filepath);\n        return -1;\n    }\n\n    buffer = malloc(51);\n    if (buffer == NULL) {\n        fprintf(stderr, \"error, memory exhausted\\n\");\n        fclose(file);\n\n        return -1;\n    }\n\n\n    // Scanning for the amount of edges.\n    if (fscanf(file, \"%s\", buffer) != 1){\n        fprintf(stderr, \"error, cannot read from the file\\n\");\n    } else {\n        fprintf(stdout, \"%s\\n\", buffer);\n    }\n    // Release all resources\n    fclose(file);\n    free(buffer);\n\n    return 0;\n}\n</code></pre>\n\n<p>If you run this code with <em>valgrind</em> chances are that <em>0</em> errors will be reported regardless of whether the file exists or not. But you must be careful with,</p>\n\n<pre><code>fscanf(file, \"%s\", buffer)\n</code></pre>\n\n<p>because it can overflow <code>buffer</code>, so instead tell <code>fscanf()</code> to read a given number of bytes like this</p>\n\n<pre><code>fscanf(file, \"%50s\", buffer)\n</code></pre>\n\n<p>this, lets <code>fscanf()</code> scanf at most <code>50</code> bytes and leaves space for the terminating <code>null</code> character.</p>\n"}], "owner": {"reputation": 25, "user_id": 7017886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c528242f6d3819328d63d1a157f9400?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Hansson", "link": "https://stackoverflow.com/users/7017886/joel-hansson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "accepted_answer_id": 45826183, "answer_count": 1, "score": 0, "last_activity_date": 1503433254, "creation_date": 1503432283, "last_edit_date": 1503432899, "question_id": 45826113, "link": "https://stackoverflow.com/questions/45826113/invalid-read-of-size-4-valgrind-fscanf", "title": "Invalid read of size 4, valgrind fscanf", "body": "<p>I am working on an assignement but ran into a strange problem while debugging.\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==30771== Invalid read of size 4\n==30771==   at 0x4E9CC5D: __isoc99_fscanf (isoc99_fscanf.c:30)\n==30771==   by 0x400728: main main.c:13)\n==30771== Address 0x0 is not stack'd, malloc'd or (recently) free'd\n</code></pre>\n\n<p>I cant for the life of me figure out why I get this error in valgrind. The code works except for this.</p>\n\n<p>I made a test project to isolate the error:\n</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    FILE *myFile;\n    myFile = fopen(\"../map1.map\", \"r\");\n\n    char *buff = malloc(51*sizeof(char));\n\n    //Scanning for the amount of edges.\n    if (fscanf(myFile, \"%s\", buff) != 1){\n        printf(\"Something is wrong\\n\");\n    }\n\n    printf(\"%s\", buff);\n\n    fclose(myFile);\n\n    char str[20];\n    scanf(\"%s\", str);\n}\n</code></pre>\n\n<p>The file looks like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>9\nNod1 Nod2\n</code></pre>\n\n<p>It compiles correctly and prints 9.</p>\n\n<p>Compiled with these settings:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>gcc -g -std=c99 -Wall -Werror -O0 main.c -o myProgram\n</code></pre>\n\n<p>run in valgrind with these settings:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>valgrind --leak-check=yes --show-reachable=yes ./myProgram\n</code></pre>\n\n<p>Can anyone spot what I am doing wrong?</p>\n"}, {"tags": ["c", "switch-statement", "break", "labeled-statements"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 4, "creation_date": 1503431687, "post_id": 45825935, "comment_id": 78610012, "body": "But there is <code>goto</code>, which Java doesn&#39;t have."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1503433194, "post_id": 45825935, "comment_id": 78610694, "body": "you can think of the <code>break</code> statement as unlabeled break and <code>goto</code> as an extended labeled brake."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1503433763, "post_id": 45825935, "comment_id": 78610943, "body": "@Antony Nepgen  The labeled break statement in Java is a demonstration of a bad style of programming by the authors of the language and nothing more."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1503496499, "post_id": 45825935, "comment_id": 78641004, "body": "The best way to do such things in C and Java both, is to wrap the whole switch inside a function and use a <code>return</code>. That&#39;s the &quot;least spaghetti&quot; way."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503431786, "post_id": 45825968, "comment_id": 78610062, "body": "The way would be a bit twisted. Instead of breaking a labeled block, you will jump to a label outside the block."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503431841, "post_id": 45825968, "comment_id": 78610095, "body": "@EugeneSh. Yes exactly, the label would be in a different place in this case."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1503431804, "last_edit_date": 1503431804, "creation_date": 1503431711, "answer_id": 45825968, "question_id": 45825935, "link": "https://stackoverflow.com/questions/45825935/is-there-such-a-thing-as-labeled-or-unlabeled-break-in-c/45825968#45825968", "title": "Is there such a thing as labeled or unlabeled break in C?", "body": "<p>No, there is no such thing in c however, there is <code>goto</code> which does not exist in Java but I suspect can be used the same way.</p>\n\n<p>Although it is not recommended to use <code>goto</code> for flow control because it makes the code unnecessarily hard to understand, and there is always an option instead of <code>goto</code>, there are however some cases where a <code>goto</code> is the most elegant possible solution, but those cases do exclude using it as a labeled break.</p>\n\n<p>A good way to achieve similar results and that is actually cleaner and simpler is by writing functions. You can always return from a function at any point, and that's equivalent to what break actually does. This of course, is more complicated in Java because there are no functions, and the construct would not be idiomatic, but as well using <code>goto</code> to emulate a <em>labeled break</em> is not idiomatic in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1503496634, "post_id": 45826109, "comment_id": 78641120, "body": "Funny how this example of goto is actually much clearer than Java-spaghetti programming with labelled break/continue. They refused to implement goto in the language, then come up with something else ten times worse than goto..."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 6, "last_activity_date": 1503433129, "last_edit_date": 1503433129, "creation_date": 1503432265, "answer_id": 45826109, "question_id": 45825935, "link": "https://stackoverflow.com/questions/45825935/is-there-such-a-thing-as-labeled-or-unlabeled-break-in-c/45826109#45826109", "title": "Is there such a thing as labeled or unlabeled break in C?", "body": "<p>No, there are no labeled break-statements like in Java. \nYou can, however, use the <code>goto</code>-statement to achieve a similar effect. Just declare a label right after the loop you actually want to exit, and use a <code>goto</code> where you would have used a labeled break in Java:</p>\n\n<pre><code>int main() {\n\n    for (int i=0; i&lt;100; i++) {\n        switch(i) {\n            case 0: printf(\"just started\\n\"); break;\n            case 10: printf(\"reached 10\\n\"); break;\n            case 20: printf(\"reached 20; exiting loop.\\n\"); goto afterForLoop;\n            case 30: printf(\"Will never be reached.\"); break;\n        }\n    }\nafterForLoop:\n\n    printf(\"first statement after for-loop.\");\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>just started\nreached 10\nreached 20; exiting loop.\nfirst statement after for-loop.\n</code></pre>\n\n<p>Note that since Dijkstras famous paper <a href=\"http://homepages.cwi.nl/~storm/teaching/reader/Dijkstra68.pdf\" rel=\"nofollow noreferrer\">Go To Statement Considered Harmful</a> computer scientists have fought hard for banning <code>goto</code>-statements from code, because this statement often introduces much more complexity than control structures like <code>if</code> or <code>while</code>. So be aware what you do and use it wisely (= rarely).</p>\n"}], "owner": {"reputation": 67, "user_id": 5838332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0d4ee44859ac703f33cefee5f5319f00?s=128&d=identicon&r=PG&f=1", "display_name": "Antony Nepgen", "link": "https://stackoverflow.com/users/5838332/antony-nepgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2048, "favorite_count": 2, "accepted_answer_id": 45826109, "answer_count": 2, "score": 5, "last_activity_date": 1503433129, "creation_date": 1503431573, "question_id": 45825935, "link": "https://stackoverflow.com/questions/45825935/is-there-such-a-thing-as-labeled-or-unlabeled-break-in-c", "title": "Is there such a thing as labeled or unlabeled break in C?", "body": "<p>As is the case in Java where the <code>break</code> statement can be labeled or unlabeled, is there a statement in C which is either the equivalent or achieves the same process?</p>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1503432027, "post_id": 45825913, "comment_id": 78610189, "body": "You&#39;re missing the <code>arg0</code> which is normally the executable name. Try <code>_wspawnl(_P_WAIT, app, app, argv, NULL)</code>"}, {"owner": {"reputation": 29, "user_id": 8430359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ee37718054ae81a2d542137b21577a?s=128&d=identicon&r=PG&f=1", "display_name": "e. boyd", "link": "https://stackoverflow.com/users/8430359/e-boyd"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1503436053, "post_id": 45825913, "comment_id": 78612022, "body": "RustyX, that was it.  I didn&#39;t recognize that in the documentation.  thanks."}], "owner": {"reputation": 29, "user_id": 8430359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ee37718054ae81a2d542137b21577a?s=128&d=identicon&r=PG&f=1", "display_name": "e. boyd", "link": "https://stackoverflow.com/users/8430359/e-boyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503432980, "creation_date": 1503431469, "last_edit_date": 1503432980, "question_id": 45825913, "link": "https://stackoverflow.com/questions/45825913/using-wspawnl-to-spawn-a-proce", "title": "using _wspawnl to spawn a proce", "body": "<p>I'm building a Windows x64 bit application in Visual Studios and trying to use _wspawnl to spawn a process.  There are a few examples on Stack Overflow, but none that address my problem.  I can execute the command from a Windows Command window successfully:</p>\n\n<p><code>D:\\arinc629\\executable\\load_config eelab_rgcu_atp.cfg</code>.</p>\n\n<p>After this command is executed, I can see the process \"load_config\" running in the Windows Task Manager.</p>\n\n<p>This code compiles and executes, but I get a non-zero number for <code>loadHandle</code>, which indicates a abnormal exit in the Microsoft documentation.</p>\n\n<pre><code>int loadHandle = 0;\nconst wchar_t *app = L\"d:\\\\arinc629\\\\executable\\\\load_config.exe\";\nconst wchar_t *argv = L\"d:\\\\arinc629\\\\executable\\\\eelab_rgcu_atp.cfg\";\nloadHandle = _wspawnl(_P_WAIT, app, argv, NULL);\n</code></pre>\n\n<p>Not sure why it's not working.</p>\n"}, {"tags": ["python", "c", "gcc"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1503430693, "post_id": 45825592, "comment_id": 78609494, "body": "What is <code>&#47;home&#47;*censored*&#47;</code> for? What do you think can happen?"}, {"owner": {"reputation": 1, "user_id": 8502129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0f080bd59ee09624d1c1ee4ae0eab9?s=128&d=identicon&r=PG&f=1", "display_name": "PepeTheNewbie", "link": "https://stackoverflow.com/users/8502129/pepethenewbie"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1503430779, "post_id": 45825592, "comment_id": 78609536, "body": "i just censored my name."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1503430956, "post_id": 45825592, "comment_id": 78609619, "body": "C modules are built with <code>setup.py build_ext</code>, and you probably still won&#39;t be able to use yours without also installing it. The C error messages are simply a) incorrect include path (<code>-I</code> does not include path to <code>Python.h</code>), b) trying to link a shared library as an executable (<code>-shared</code> missing) and c) not supplying the necessary libraries to link with (<code>-lpython2.7 -L&lt;pathtolibpython&gt;</code> missing)."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1520924549, "post_id": 45825592, "comment_id": 85503524, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}], "owner": {"reputation": 1, "user_id": 8502129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0f080bd59ee09624d1c1ee4ae0eab9?s=128&d=identicon&r=PG&f=1", "display_name": "PepeTheNewbie", "link": "https://stackoverflow.com/users/8502129/pepethenewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1520923841, "creation_date": 1503430298, "last_edit_date": 1520923841, "question_id": 45825592, "link": "https://stackoverflow.com/questions/45825592/extending-python-with-c-error-reference-not-defined", "title": "Extending Python with C, error: reference not defined", "body": "<p>I'm learning how to extend Python in C.</p>\n\n<p>Before starting, I downloaded all needed packages:</p>\n\n<pre><code>sudo apt-get install python2.7-dev\nsudo apt-get install python3.5-dev\n</code></pre>\n\n<p>I picked up an example from internet to check if everything works fine.</p>\n\n<p>Here is the link: \n<a href=\"https://docs.python.org/2/extending/extending.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/extending/extending.html</a></p>\n\n<p>Created setup.py and built the module.</p>\n\n<pre><code>python2 setup.py build\n</code></pre>\n\n<p>It gave me no errors.<br>\nI created a test.py and i ran it.<br>\nit just said that the module I imported doesn't exist.<br>\nConfused i gcc'ed the C file and here is the result:</p>\n\n<blockquote>\n  <p>fatal error: Python.h: no such file or directory</p>\n</blockquote>\n\n<p>I didn't give up and I tried this:<br><code>locate Python.h</code> and the result was: <code>/home/*censored*/python/include/python2.7/</code><br>\nso i used the flag -I and tried to GCC the code again: <code>gcc -I /home/*censored*/python/include/python2.7/ myModule.c</code><br>\nThe result was:</p>\n\n<pre><code>/usr/lib/gcc/x86_64-linux-gnu/6/../../../x86_64-linux-gnu/Scrt1.o: in the function \"_start\":(.text+0x20): reference not defined a \"main\"\n</code></pre>\n\n<p>also<br></p>\n\n<pre><code>myModule.c:(.text+0x37): reference not defined a \"PyArg_ParseTuple\"\nmyModule.c:(.text+0x67): reference not defined a \"Py_BuildValue\"\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I also downloaded the tarball and ran <code>./configure make and make install</code> but nothing, still stuck with this problem.</p>\n\n<p>This is my first question on StackOverflow so be kind with me if I messed up something about text formatting. Thank you and have a good day.</p>\n"}, {"tags": ["c", "if-statement", "timestamp"], "comments": [{"owner": {"reputation": 1555, "user_id": 6313007, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/74799df08583d3fffcac5c333ee7bb06?s=128&d=identicon&r=PG&f=1", "display_name": "meow", "link": "https://stackoverflow.com/users/6313007/meow"}, "edited": false, "score": 0, "creation_date": 1503430250, "post_id": 45825394, "comment_id": 78609273, "body": "I don&#39;t really see why you are doing this? I mean why are you using nanoseconds to begin with? If you really have to why don&#39;t you consider using seconds/ milliseconds and rounding the nanoseconds respectively"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1503430460, "post_id": 45825394, "comment_id": 78609387, "body": "Too many global variables.  Setting <code>timeStampDifference = 0;</code> repeatedly is odd.  The <code>secondsUp</code> member should be omitted from the code to make an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1503430560, "post_id": 45825394, "comment_id": 78609426, "body": "A 16-bit integer like the <code>sint16 timeStampDifference</code> can&#39;t hold nanoseconds-worth of difference.  It needs to be <code>sint32</code> if not <code>sint64</code>."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1503433423, "post_id": 45825394, "comment_id": 78610798, "body": "Why can&#39;t the difference be represented as seconds + nanoseconds just like the timestamps?"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1503434984, "post_id": 45825394, "comment_id": 78611518, "body": "As @JonathanLeffler wrote, the comment inside the function is wrong and misleading, since the parameter is 16-bit. But anyway, whatever you are trying to do doesn&#39;t make any sense. Just have a single <code>struct { u32 unixtime; u32 nanoseconds; }</code> and don&#39;t do these silly conversions. The <code>secondsUp</code> field is poorly named and redundant; if you are afraid of unix time overflow in 2106 (if using unsigned unix timestamp), simply use <code>u64</code> for the seconds."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "edited": false, "score": 0, "creation_date": 1503460714, "post_id": 45825394, "comment_id": 78618262, "body": "Hi all, thanks for the comments. timeStampDifference is sint32.It was a typo error.I have corrected it.I know that some parts of the code is redundant but my doubt is how to convert seconds to nanoseconds with the constraints I have mentioned.I am concentrating just on GetTimeStamp function.How to avoid overflow,without the loss of values."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 1555, "user_id": 6313007, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/74799df08583d3fffcac5c333ee7bb06?s=128&d=identicon&r=PG&f=1", "display_name": "meow", "link": "https://stackoverflow.com/users/6313007/meow"}, "edited": false, "score": 0, "creation_date": 1503506263, "post_id": 45825394, "comment_id": 78648303, "body": "@meow Thanks for your insight.But the requirement is to provide the difference in nanoseconds.How can I convert seconds to nanoseconds with considering overflows."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503506366, "post_id": 45825394, "comment_id": 78648375, "body": "<code>if((timeStamp.secondsUp &gt; 0)||(timeStamp.seconds &gt; 3)  ||((timeStamp.seconds == 2)&amp;&amp;(timeStamp.nanoseconds &gt; 147483647))){</code> is certainly wrong.  I&#39;d expect <code>... (timeStamp.seconds &gt;= 3 ...</code> (<code>&gt;=</code> vs <code>&gt;</code>)"}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503506792, "post_id": 45825394, "comment_id": 78648615, "body": "@chux seconds can not be equal to 3 , because I can not represent 3seconds in sint32 parameter. the range is  -2147483647 to +2147483647.Since 1 second equals 1e+9 nanoseconds,then the seconds value can be in the range -2.147483647 to +2.147483647"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503506842, "post_id": 45825394, "comment_id": 78648648, "body": "An easy test would be <code>int64_t ns =((timeStamp.seconds)*(MAX_NS+1LL)                          +(timeStamp.nanoseconds)); if (ns &lt; INT16_MIN || ns &gt; INT16_MAX) { printf(&quot;TimeStamp value can not be represented ...&quot;); } else { *timeStampDifference = ns; }</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503507143, "post_id": 45825394, "comment_id": 78648822, "body": "@GopalaKrishna  &quot;since timeStampDifference is a sint32 parameter,&quot; and code <code>sint16* timeStampDifference</code> conflict.  Post is unclear."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503507236, "post_id": 45825394, "comment_id": 78648883, "body": "@chux thanks for the reply .Instead of INT16_x it should be INT32_x right?Oh..ya . I have edited the question now. Is there a way so that to check for overflow without using additional variables?Please help me."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503507391, "post_id": 45825394, "comment_id": 78648971, "body": "@GopalaKrishna the <a href=\"https://stackoverflow.com/questions/45825394/conversion-of-seconds-to-nanoseconds-in-timestamp-and-represent-using-signed-int#comment78648883_45825394\">comment</a> &quot;Instead of INT16_MIN it should be INT16_MIN&quot; does not make sense. It reads like &quot;Instead of XXX it should be XXX&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503507569, "post_id": 45825394, "comment_id": 78649069, "body": "@GopalaKrishna &quot;Is there a way so that to check for overflow without using additional variables&quot; --&gt; sure, but this post keeps changing.  A moving target is hard to answer with its morphing of sign-ness, width and non-standard type names."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503507894, "post_id": 45825394, "comment_id": 78649220, "body": "@chux No there are no more changes .kindly help"}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503508711, "post_id": 45825394, "comment_id": 78649683, "body": "@chux in timestamp, the second value can be negative also.What all changes can be made"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503508842, "post_id": 45825394, "comment_id": 78649754, "body": "@GopalaKrishna <code>uint32 seconds;</code> is never negative as it is unsigned so <a href=\"https://stackoverflow.com/questions/45825394/conversion-of-seconds-to-nanoseconds-in-timestamp-and-represent-using-signed-int?noredirect=1#comment78649683_45825394\">second value can be negative also</a> is not true."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503509832, "post_id": 45825394, "comment_id": 78650233, "body": "@chux i never looked it that way.I have edited the question.Can you please provide any hints now.(Appologies for changing the question so many times):)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503510583, "post_id": 45825394, "comment_id": 78650683, "body": "I suggest you 1) <i>carefully</i> re-think the question, types, sign-ness, etc. needed 2)  delete this post and 3) tomorrow post a new, well thought out, question with details, examples and code that compiles/runs."}, {"owner": {"reputation": 1555, "user_id": 6313007, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/74799df08583d3fffcac5c333ee7bb06?s=128&d=identicon&r=PG&f=1", "display_name": "meow", "link": "https://stackoverflow.com/users/6313007/meow"}, "edited": false, "score": 0, "creation_date": 1503522402, "post_id": 45825394, "comment_id": 78656724, "body": "Considered this again, it just makes NO SENSE. If you really want to go this utterly silly way, you should understand what happens on the bit level. You can obviously check for the MAX_INT value but cannot know whether it is just this or actually higher without either doing the arithmetic or using a larger unit. But anyways nanseconds and sint32 is probably just a very very very bad idea, which you should circumvent if anyhow possible."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503536753, "post_id": 45825394, "comment_id": 78660995, "body": "@chux I have rethought and made all the possible changes in my question.I thought of reposting my question but I am not able to since my question got downvotes.So i have edited in this post only.Can you please have a look and tell me how it can be done?Please I have a high stake on this."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 1555, "user_id": 6313007, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/74799df08583d3fffcac5c333ee7bb06?s=128&d=identicon&r=PG&f=1", "display_name": "meow", "link": "https://stackoverflow.com/users/6313007/meow"}, "edited": false, "score": 0, "creation_date": 1503536779, "post_id": 45825394, "comment_id": 78661002, "body": "@meow Can you please have a look now?"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "edited": false, "score": 0, "creation_date": 1504981592, "post_id": 45852099, "comment_id": 79229847, "body": "Thanks a lot man..You saved me.I am so thankful for the time you took to help me. You&#39;re a wonderful person,I want you to know that"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1503542455, "creation_date": 1503542455, "answer_id": 45852099, "question_id": 45825394, "link": "https://stackoverflow.com/questions/45825394/conversion-of-seconds-to-nanoseconds-in-timestamp-and-represent-using-signed-int/45852099#45852099", "title": "Conversion of seconds to nanoseconds in timestamp and represent using signed integer", "body": "<p>The question comes down to <code>seconds*1000000000 + ns</code> and will it overflow?</p>\n\n<pre><code>#define NS_PER_SEC 1000000000 \n\nint64_t sum_s_ns(int64_t s, int64_t ns) {\n  if (s &gt; INT64_MAX/NS_PER_SEC || s &lt; INT64_MIN/NS_PER_SEC) {\n    fail_overflow();\n    return 0;\n  } \n  s *= NS_PER_SEC;\n  if (s &lt; 0) {\n    // if s + ns &lt; min\n    if (ns &lt; INT64_MIN - s) {\n      fail_overflow();\n      return 0;\n    } \n  } else {\n    // if s + ns &gt; max\n    if (ns &gt; INT64_MAX - s) {\n      fail_overflow();\n      return 0;\n    } \n  }\n  return s + ns;\n}\n</code></pre>\n\n<p>See <a href=\"https://codereview.stackexchange.com/a/93699/29485\">Test if arithmetic operation will cause undefined behavior</a></p>\n"}], "owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 969, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1503542455, "creation_date": 1503429581, "last_edit_date": 1503536542, "question_id": 45825394, "link": "https://stackoverflow.com/questions/45825394/conversion-of-seconds-to-nanoseconds-in-timestamp-and-represent-using-signed-int", "title": "Conversion of seconds to nanoseconds in timestamp and represent using signed integer", "body": "<p>Here is my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef unsigned int uint32;\ntypedef unsigned short int uint16;\n\ntypedef signed short int sint32;\n\n#define MAX_NS 999999999\n#define MAX_S  4294967295\n\ntypedef struct\n{\n   sint64 nanoseconds;  \n   sint64 seconds; \n}TimeStampType;\n\nTimeStampType timeStamp;\n\nsint32 timeStampDifference;\n\n void GetTimeStamp(sint32* timeStampDifference)\n{\n        /* Since the range of signed int32 (sint32) is -2147483647 to        +2147483647 timestamp values can not be represented if it exceeds 3 seconds \n or 2 seconds and 147483647 nanoseconds */\n\n    if((timeStamp.seconds &gt; 3)||(timeStamp.seconds &lt; -3)||((timeStamp.seconds == 2)&amp;&amp;(timeStamp.nanoseconds &gt; 147483647))||((timestamp.seconds == -2)&amp;&amp;(timeStamp.nanoseconds&lt; -147483647))){\n\n        printf(\"TimeStamp value can not be represented since it overflows\");    \n    }\n\n    else{\n\n        *timeStampDifference = ((timeStamp.seconds)*(MAX_NS+1)\n                         +(timeStamp.nanoseconds));\n    }\n\n}\n</code></pre>\n\n<p>What I am trying to do is,in the GetTimeStamp function I have to convert seconds value of timestamp to nanoseconds.But since <code>timeStampDifference</code> is a <code>sint32</code> parameter,it can hold only the values in the range -2147483647 to +2147483647.So nanoseconds can only be in the mentioned range after converting seconds to nanseconds.</p>\n\n<p>So I am printing \"TimeStamp value can not be represented since it overflows\" if it exceeds the value. But I am not getting expected output.</p>\n\n<p>Is the Logic written for function GetTimeStamp correct?What are the ways to improve the functionality of GetTimeStamp function.</p>\n\n<p>I have edited the question as per the comments.Kindly help anyone,I have a high stake on this.</p>\n\n<p>(Since 1 second equals 1e+9 nanoseconds,which means the max seconds value can be  2.147483647 seconds.I will not consider secondsUp at all ,since 1 secondsUp equals 4294967296 seconds)</p>\n"}, {"tags": ["c", "sockets", "networking", "ip"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1503428208, "post_id": 45824594, "comment_id": 78608302, "body": "There are many errors.  Not handling completely and correctly the result of system calls, assuming NUL-terminated buffers when it&#39;s not guaranteed.  The usual."}, {"owner": {"reputation": 704, "user_id": 7488960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9e6e6f85903b38fb8e826f97ede366a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/7488960/akash"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1503428450, "post_id": 45824594, "comment_id": 78608414, "body": "Can you please elaborate on the errors @MartinJames. I want to learn how are they causing problems."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1503450733, "post_id": 45824594, "comment_id": 78616000, "body": "Try connecting to INADDR_LOOPBACK instead of INADDR_ANY?"}], "answers": [{"comments": [{"owner": {"reputation": 704, "user_id": 7488960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9e6e6f85903b38fb8e826f97ede366a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/7488960/akash"}, "edited": false, "score": 0, "creation_date": 1503428369, "post_id": 45824889, "comment_id": 78608372, "body": "This worked. What deos the <code>setsockopt</code> do? Does this enforces the bind ?"}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "reply_to_user": {"reputation": 704, "user_id": 7488960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9e6e6f85903b38fb8e826f97ede366a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/7488960/akash"}, "edited": false, "score": 1, "creation_date": 1503432115, "post_id": 45824889, "comment_id": 78610238, "body": "It allows the re-use of a port that still has <code>TIME_WAIT</code> connections in the OS connection table. After running your server/client once, execute <code>netstat -atn | grep 9002</code> to see the entries. Ordinarily these entries prevent re-use of that port for a time (the exact duration is OS-dependent). See also <a href=\"https://stackoverflow.com/a/3233082/1076479\">stackoverflow.com/a/3233082/1076479</a> for more explanation"}], "tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": true, "score": 1, "last_activity_date": 1503432507, "last_edit_date": 1503432507, "creation_date": 1503427726, "answer_id": 45824889, "question_id": 45824594, "link": "https://stackoverflow.com/questions/45824594/cant-make-a-tcp-connection-just-one-after-the-other/45824889#45824889", "title": "Cant make a tcp connection just one after the other", "body": "<p>You should be checking for errors for all system calls in your server. I'm guessing that your <code>bind</code> is failing, because the port is \"already in use\". The reason for this is that the connection from the previous instance of the server lingers for a while in the operating system's connection table.</p>\n\n<p>You want to use <code>setsockopt</code> with <code>SO_REUSEADDR</code> to avoid the <code>bind</code> failure. Specifically, add this prior to the <code>bind</code> call.</p>\n\n<pre><code>int reuse = 1;\nif (setsockopt(server_socket, SOL_SOCKET, SO_REUSEADDR, (const char*)&amp;reuse, sizeof(reuse)) &lt; 0)\n    perror(\"setsockopt(SO_REUSEADDR) failed\");\n</code></pre>\n\n<p>(And do check errors. Makes debugging these kinds of things much easier if you know when something fails. Also, use <code>perror</code> or <code>strerror(errno)</code> in order to find out exactly why it failed -- not just <em>that</em> it failed.)</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8377060"}, "is_accepted": false, "score": 1, "last_activity_date": 1503428840, "creation_date": 1503428840, "answer_id": 45825202, "question_id": 45824594, "link": "https://stackoverflow.com/questions/45824594/cant-make-a-tcp-connection-just-one-after-the-other/45825202#45825202", "title": "Cant make a tcp connection just one after the other", "body": "<p>Check out my whole code here and see how it runs.</p>\n\n<p>This is the server</p>\n\n<pre><code>int main(){\n    SOCKET s, newsocket;\n    struct sockaddr_in server, client;\n    int receiving;\n    char clientMessage[2000], *message;\n\n    if((s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == INVALID_SOCKET){\n        printf(\"socker error at %d\", GetLastError());\n    }else{\n        puts(\"socket created\");\n    }\n\n    server.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    server.sin_family = AF_INET;\n    server.sin_port = htons(8080);\n\n    if(bind(s, (struct sockaddr*)&amp;server, sizeof(server)) &lt; 0){\n        printf(\"err at binding %d\", GetLastError());\n    }else{\n        puts(\"binded.\");\n    }\n\n    listen(s, 3);\n\n    puts(\"listening to connections...\");\n\n    int c = sizeof(struct sockaddr_in);\n\n    while((newsocket = accept(s, (struct sockaddr*)&amp;client, &amp;c)) != INVALID_SOCKET){\n        puts(\"connection accepted\");\n        //send \n        message=\"hello client\";\n        send(newsocket, message, strlen(message), 0);\n        recv(newsocket, clientMessage, 50, 0);\n        puts(clientMessage);\n\n    }\n\n    puts(\"waiting for a machine\");\n\n    if(newsocket == INVALID_SOCKET){\n        printf(\"newsocket invalid at %d\", GetLastError());\n    }\n\n\n\n\n    getchar();\n    closesocket(s);\n    WSACleanup();\n}\n</code></pre>\n\n<p>This is the client</p>\n\n<pre><code>int main(){\n    SOCKET s;\n    struct sockaddr_in server;\n\n    if((s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == INVALID_SOCKET){\n        printf(\"socket error At %d\", GetLastError());\n    }else{\n        puts(\"socket initialised\");\n    }\n\n    server.sin_port = htons(8080);\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = inet_addr(\"176.40.201.72\");\n\n    printf(\"server values are defined.. \\n\");\n    printf(\"connecting..\\n\");\n\n    if(connect(s, (struct sockaddr*)&amp;server, sizeof(server)) &lt; 0){\n        printf(\"connection error %d\" , GetLastError());\n    }else{\n        puts(\"connected\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 704, "user_id": 7488960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9e6e6f85903b38fb8e826f97ede366a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/7488960/akash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 45824889, "answer_count": 2, "score": 1, "last_activity_date": 1503432507, "creation_date": 1503426541, "question_id": 45824594, "link": "https://stackoverflow.com/questions/45824594/cant-make-a-tcp-connection-just-one-after-the-other", "title": "Cant make a tcp connection just one after the other", "body": "<p>I am fairly new to socket programming. I saw a tutorial and tried implementing the programs in my Linux machine. The codes are :</p>\n\n<p>CLIENT :   </p>\n\n<pre><code>int main() {\n\nchar buf[256] = \"In client\";\n\n\n// create the socket\nint sock;\nsock = socket(AF_INET, SOCK_STREAM, 0);\n\n//setup an address\nstruct sockaddr_in server_address;\nserver_address.sin_family = AF_INET;\nserver_address.sin_addr.s_addr = INADDR_ANY;\nserver_address.sin_port = htons(9002);\n\nint status  =  connect(sock, (struct sockaddr *) &amp;server_address, sizeof(server_address));\nif(status == -1)\n{\n\n        printf(\"There Was an error!\");\n}\n\nrecv(sock, buf, sizeof(buf), 0);\n\nprintf(\"\\n %s \\n\", buf);\nclose(sock);\n\nreturn 0;\n}\n</code></pre>\n\n<p>SERVER:</p>\n\n<pre><code>int main() {\n\nchar server_message[256] = \"You have reached the server!\";\n\n// create the server socket\nint server_socket;\nserver_socket = socket(AF_INET, SOCK_STREAM, 0);\n\n\n// define the server address\nstruct sockaddr_in server_address;\nserver_address.sin_family = AF_INET;\nserver_address.sin_port = htons(9002);\nserver_address.sin_addr.s_addr =  INADDR_ANY;\n\n// bind the socket to our specified IP and port\nbind(server_socket, (struct sockaddr*) &amp;server_address, sizeof(server_address));\n\nlisten(server_socket, 5);\n\nint client_socket;\nclient_socket = accept(server_socket, NULL, NULL);\n\n// send the message\nsend(client_socket, server_message, sizeof(server_message), 0);\n\n// close the socket\nclose(server_socket);\n\nreturn 0;\n}\n</code></pre>\n\n<p>The code is self-explanatory. When I run the server and then the client, for the first time, it works. But when I do it again, just after the previous one, the Client gives the message - <code>There Was an error!</code>, that means the connection is not happening.</p>\n\n<p>Can anyone help why is this occurring?\nThanks in advance!</p>\n"}, {"tags": ["c", "casting", "char", "hex"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1503425407, "post_id": 45824186, "comment_id": 78606860, "body": "<code>char</code> --&gt; <code>unsigned char</code> then  <code>unsigned char msg_buff[148]; memset(msg_buff, 0, sizeof msg_buff); unsigned char a[8] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0}; memcpy(msg_buff, a, sizeof a); hexdump(msg_buff, sizeof msg_buff);</code>, <code>&quot;%02x &quot;</code> --&gt; <code>&quot;%02X &quot;</code>"}, {"owner": {"reputation": 805, "user_id": 803700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d70791dac0a642c7fe0c9d86219e8cd4?s=128&d=identicon&r=PG", "display_name": "c_prog_90", "link": "https://stackoverflow.com/users/803700/c-prog-90"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503425631, "post_id": 45824186, "comment_id": 78606961, "body": "This works..thanks"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1503425913, "post_id": 45824186, "comment_id": 78607091, "body": "@BLUEPIXY: you really like to fit all your answers inside the comment box. :)"}], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 803700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d70791dac0a642c7fe0c9d86219e8cd4?s=128&d=identicon&r=PG", "display_name": "c_prog_90", "link": "https://stackoverflow.com/users/803700/c-prog-90"}, "edited": false, "score": 0, "creation_date": 1503425278, "post_id": 45824257, "comment_id": 78606777, "body": "I need to have hex values in the message buffer with valid values."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 805, "user_id": 803700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d70791dac0a642c7fe0c9d86219e8cd4?s=128&d=identicon&r=PG", "display_name": "c_prog_90", "link": "https://stackoverflow.com/users/803700/c-prog-90"}, "edited": false, "score": 0, "creation_date": 1503425330, "post_id": 45824257, "comment_id": 78606811, "body": "what does it mean?, you have there exactly what you put there"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1503426145, "last_edit_date": 1503426145, "creation_date": 1503425121, "answer_id": 45824257, "question_id": 45824186, "link": "https://stackoverflow.com/questions/45824186/hex-to-char-conversion-and-dumping-output/45824257#45824257", "title": "Hex to char conversion and dumping output", "body": "<p>Change\n<code>hexdump(msg_buff, 148);</code></p>\n\n<p>to \n<code>hexdump(a, 8);</code></p>\n\n<p>In your code you are dumping the string </p>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 7974616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e31c1724e1dfcad9d0e05be08500d927?s=128&d=identicon&r=PG&f=1", "display_name": "Gena", "link": "https://stackoverflow.com/users/7974616/gena"}, "is_accepted": true, "score": 1, "last_activity_date": 1503636410, "last_edit_date": 1503636410, "creation_date": 1503435401, "answer_id": 45826842, "question_id": 45824186, "link": "https://stackoverflow.com/questions/45824186/hex-to-char-conversion-and-dumping-output/45826842#45826842", "title": "Hex to char conversion and dumping output", "body": "<p>Firstly, you need to delete <code>a[8]</code> from the following function in your code, because the length of <code>a[]</code> is 8, however your code has 9 members:</p>\n\n<p><code>sprintf(msg_buff, \"%02X %02X %02X %02X %02X %02X %02X %02X\", a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);</code></p>\n\n<p>Secondly, you need to change your defined variables type, your code should look like the following:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nstatic void hexdump(const char *src, int count)\n{\n    int i;\n\n    if (count == 0)\n        return;\n\n    for (i = 0; i &lt; count; ++i) {\n\n        printf(\"%02x \", src[i]);\n        if ((i + 1) % 16 == 0)\n            printf(\"\\n\");\n    }\n    printf(\"\\n\");\n}\n\nint main() {\n\n    unsigned char  msg_buff[148];\n    memset(msg_buff, 0, 148);\n    unsigned char  a[8] = { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0 };\n    sprintf(msg_buff, \"%02X %02X %02X %02X %02X %02X %02X %02X\", a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7]);\n    printf(\"packet %s \\n\", msg_buff); // 00 00 00 00 00 00 00 A0\n    hexdump(msg_buff, 148);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 805, "user_id": 803700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d70791dac0a642c7fe0c9d86219e8cd4?s=128&d=identicon&r=PG", "display_name": "c_prog_90", "link": "https://stackoverflow.com/users/803700/c-prog-90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 45826842, "answer_count": 2, "score": 0, "last_activity_date": 1503636410, "creation_date": 1503424829, "last_edit_date": 1503459693, "question_id": 45824186, "link": "https://stackoverflow.com/questions/45824186/hex-to-char-conversion-and-dumping-output", "title": "Hex to char conversion and dumping output", "body": "<p>I am trying to assign the first 8bytes of a character buffer with \"00 00 00 00 00 00 00 A0\". I am able to verify the buffer is constructed right. Whenever i try to hexdump using my utility, i get unexpected output. Not sure, if i am missing something else here.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nstatic void hexdump(const char *src, int count)\n{\n    int i;  \n\n    if (count == 0)\n        return;\n\n    for (i = 0; i &lt; count; ++i) {\n\n        printf(\"%02x \", src[i]);\n        if ((i + 1) % 16 == 0)\n            printf(\"\\n\");\n    }   \n    printf(\"\\n\");\n}\n\nint main() {\n   char msg_buff[148];\n   memset(msg_buff, 0, 148);\n   int a[8] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0};\n   sprintf(msg_buff, \"%02x %02X %02X %02X %02X %02X %02X %02X\", a[0], a[1], \n a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n   printf(\"packet %s \\n\", msg_buff); // 00 00 00 00 00 00 00 A0\n   hexdump(msg_buff, 148);\n}\n</code></pre>\n\n<p><strong>My output</strong></p>\n\n<pre><code>packet 00 00 00 00 00 00 00 A0 \n30 30 20 30 30 20 30 30 20 30 30 20 30 30 20 30 \n30 20 30 30 20 41 30 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 \n</code></pre>\n\n<p><strong>Expected output</strong></p>\n\n<pre><code>packet 00 00 00 00 00 00 00 A0 \n00 00 00 00 00 00 00 A0 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n00 00 00 00 \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503423953, "post_id": 45823883, "comment_id": 78605997, "body": "There are no function macros. Macro with parameters just replaces the text. During the preprocessing the dest and payload in the msgsend will be put (as a text) into the right side of the macro"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 2, "creation_date": 1503424100, "post_id": 45823883, "comment_id": 78606094, "body": "They are often referred to as &quot;function-like macros&quot;, so that&#39;s what OP probably meant."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 3, "creation_date": 1503424101, "post_id": 45823883, "comment_id": 78606097, "body": "What do you mean by &quot;implement&quot; exactly? Those are implementations of macros."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503424172, "post_id": 45823883, "comment_id": 78606148, "body": "it is wrong as people think that they can use maxcros as functions and some time ago someone asked why he cant recurse it."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503424372, "post_id": 45823883, "comment_id": 78606250, "body": "@MikeDi: can you give some background on where you got these macros? <code>SYSCALL</code> should likely be another macro which does a system call, <code>SYS_SEND</code> would be an identifier specifying the type of the system call. But it&#39;s impossible to suggest what <i>you</i> should do with these macros."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503424645, "post_id": 45823883, "comment_id": 78606409, "body": "if you want to see the macro expansion just preprocess the file (gcc option -E)"}, {"owner": {"reputation": 43, "user_id": 5863680, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c29e32ccc82ef3dc64e2a9824f175f76?s=128&d=identicon&r=PG&f=1", "display_name": "ikeDiM", "link": "https://stackoverflow.com/users/5863680/ikedim"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503425939, "post_id": 45823883, "comment_id": 78607108, "body": "@Groo It&#39;s for a message passing service for a microkernel. SYSCALL is not defined yet."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503426117, "post_id": 45823883, "comment_id": 78607198, "body": "@ikeDiM: yes, that&#39;s why I wrote you should give some background, since I am presuming you don&#39;t know how to do that, and nobody can suggest how to implement something for an unknown microkernel, running on an unknown platform."}, {"owner": {"reputation": 43, "user_id": 5863680, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c29e32ccc82ef3dc64e2a9824f175f76?s=128&d=identicon&r=PG&f=1", "display_name": "ikeDiM", "link": "https://stackoverflow.com/users/5863680/ikedim"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503427169, "post_id": 45823883, "comment_id": 78607724, "body": "@Groo yes I know but it&#39;s a lot of material. It&#39;s for an open source  ARM7TDMI emulator. You can find it here <a href=\"http://mellotanica.github.io/uARM/\" rel=\"nofollow noreferrer\">mellotanica.github.io/uARM</a>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5863680, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c29e32ccc82ef3dc64e2a9824f175f76?s=128&d=identicon&r=PG&f=1", "display_name": "ikeDiM", "link": "https://stackoverflow.com/users/5863680/ikedim"}, "edited": false, "score": 0, "creation_date": 1503424125, "post_id": 45823944, "comment_id": 78606112, "body": "Thanks,  so when I use msgsend(dest, payload) a SYSCALL with expanded parameters will be called. Therefore I should implement the SYSCALL function, right?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 43, "user_id": 5863680, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c29e32ccc82ef3dc64e2a9824f175f76?s=128&d=identicon&r=PG&f=1", "display_name": "ikeDiM", "link": "https://stackoverflow.com/users/5863680/ikedim"}, "edited": false, "score": 0, "creation_date": 1503424161, "post_id": 45823944, "comment_id": 78606137, "body": "Why down votes?  Did I do something wrong? Please leave a comment."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1503424199, "post_id": 45823944, "comment_id": 78606159, "body": "Well, for one thing, the simplification changes the meaning, given that <code>dest</code> and <code>payload</code> are placeholders."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1503424436, "post_id": 45823944, "comment_id": 78606290, "body": "@DavidSchwartz; Aaah! It just overlooked that when simplifying."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503424524, "post_id": 45823944, "comment_id": 78606334, "body": "(unsigned)(-2/2) != (unsigned)-2/2"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503424748, "post_id": 45823944, "comment_id": 78606471, "body": "your simplification still goes too far. You do not know what the SYSCALL is"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1503424970, "post_id": 45823944, "comment_id": 78606598, "body": "@PeterJ; I don&#39;t know much about this except this is an assembler instruction."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 1, "last_activity_date": 1503424588, "last_edit_date": 1503424588, "creation_date": 1503423945, "answer_id": 45823944, "question_id": 45823883, "link": "https://stackoverflow.com/questions/45823883/how-to-read-function-like-macros/45823944#45823944", "title": "How to read function-like macros?", "body": "<p>You define a macro <code>msgsend(dest, payload)</code> which will be expanded to  </p>\n\n<pre><code>(SYSCALL(SYS_SEND,(unsigned int) (dest), (unsigned int) (payload),0))   \n</code></pre>\n\n<p>Simplifying the above line  </p>\n\n<pre><code>SYSCALL(SYS_SEND, (unsigned int) (dest), (unsigned int) (payload), 0)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5863680, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c29e32ccc82ef3dc64e2a9824f175f76?s=128&d=identicon&r=PG&f=1", "display_name": "ikeDiM", "link": "https://stackoverflow.com/users/5863680/ikedim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 45823944, "answer_count": 1, "score": 1, "last_activity_date": 1503426196, "creation_date": 1503423746, "last_edit_date": 1503426196, "question_id": 45823883, "link": "https://stackoverflow.com/questions/45823883/how-to-read-function-like-macros", "title": "How to read function-like macros?", "body": "<p>I should implement these function-like macros, but I'm not sure I understand the syntax. Could somebody explain me how to read them?</p>\n\n<pre><code>#define msgsend(dest, payload) (SYSCALL(SYS_SEND,(unsigned int) (dest), (unsigned int) (payload),0))\n\n#define msgrecv(source, reply) (((struct tcb_t *) SYSCALL(SYS_RECV, (unsigned int) (source),(unsigned int) (reply),0)))\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "linked-list"], "answers": [{"comments": [{"owner": {"reputation": 1360, "user_id": 6593789, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-nfq6l0wyldk/AAAAAAAAAAI/AAAAAAAABY0/mHRz3aBVoLU/photo.jpg?sz=128", "display_name": "random_coder_101", "link": "https://stackoverflow.com/users/6593789/random-coder-101"}, "edited": false, "score": 0, "creation_date": 1503422644, "post_id": 45823586, "comment_id": 78605324, "body": "When I do that, I get the following error, initializing &#39;struct node *&#39; with an expression of       incompatible type &#39;struct node&#39;; remove *"}, {"owner": {"reputation": 1360, "user_id": 6593789, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-nfq6l0wyldk/AAAAAAAAAAI/AAAAAAAABY0/mHRz3aBVoLU/photo.jpg?sz=128", "display_name": "random_coder_101", "link": "https://stackoverflow.com/users/6593789/random-coder-101"}, "edited": false, "score": 0, "creation_date": 1503422834, "post_id": 45823586, "comment_id": 78605418, "body": "So, it compiles but when I run it I get a <code>segmentation fault: 11</code>. Is this because I am not assigning memory using <code>malloc</code> when I create a new node in my <code>void createNode</code> method?"}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 1360, "user_id": 6593789, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-nfq6l0wyldk/AAAAAAAAAAI/AAAAAAAABY0/mHRz3aBVoLU/photo.jpg?sz=128", "display_name": "random_coder_101", "link": "https://stackoverflow.com/users/6593789/random-coder-101"}, "edited": false, "score": 0, "creation_date": 1503422872, "post_id": 45823586, "comment_id": 78605443, "body": "Yes it is the problem."}, {"owner": {"reputation": 1360, "user_id": 6593789, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-nfq6l0wyldk/AAAAAAAAAAI/AAAAAAAABY0/mHRz3aBVoLU/photo.jpg?sz=128", "display_name": "random_coder_101", "link": "https://stackoverflow.com/users/6593789/random-coder-101"}, "edited": false, "score": 0, "creation_date": 1503423784, "post_id": 45823586, "comment_id": 78605916, "body": "Even after including the <code>malloc</code> line, I still get the Seg Fault error. Any idea why?"}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503425805, "post_id": 45823586, "comment_id": 78607030, "body": "<a href=\"https://ideone.com/f626RH\" rel=\"nofollow noreferrer\">Here(click)</a> is a working code, you may inspire there :-)"}], "tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": true, "score": 2, "last_activity_date": 1503423652, "last_edit_date": 1503423652, "creation_date": 1503422496, "answer_id": 45823586, "question_id": 45823558, "link": "https://stackoverflow.com/questions/45823558/linkedlist-in-c-error/45823586#45823586", "title": "LinkedList in C error", "body": "<p>You cant compare <code>NULL</code> with non-pointer type.</p>\n\n<p>Declare variable <code>current</code> as pointer + remove dereference of <code>head</code> and it will compile</p>\n\n<pre><code>struct node * current = lList-&gt;head;\n            ^          ^\nwhile(current != NULL)  // Now you can compare them\n</code></pre>\n\n<hr>\n\n<p>You are getting SEGFAULT because you are dereferencing uninitialized pointer. Allocate enough memory on heap (dynamic storage duration).</p>\n\n<pre><code>struct node *new_node = malloc(sizeof(struct node));\n</code></pre>\n\n<hr>\n\n<p>Since <code>current</code> is pointer</p>\n\n<pre><code>printf(\"%i\", current-&gt;key);\ncurrent = current-&gt;next;\n</code></pre>\n\n<p>should be OK now.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1503423004, "last_edit_date": 1503423004, "creation_date": 1503422569, "answer_id": 45823607, "question_id": 45823558, "link": "https://stackoverflow.com/questions/45823558/linkedlist-in-c-error/45823607#45823607", "title": "LinkedList in C error", "body": "<p>As the error states current is a structure, not the pointer</p>\n\n<p>change it to <code>struct node *current = lList -&gt; head;</code></p>\n\n<p>remember that pointer itself does not have the storage for the referenced object</p>\n"}, {"comments": [{"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503423383, "post_id": 45823716, "comment_id": 78605700, "body": "It wont work... :-) look at bottom lines, assigning <code>struct node</code> to <code>struct node*</code>."}, {"owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "reply_to_user": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1503423521, "post_id": 45823716, "comment_id": 78605774, "body": "which line u meant?"}], "tags": [], "owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1503423275, "last_edit_date": 1503423275, "creation_date": 1503423004, "answer_id": 45823716, "question_id": 45823558, "link": "https://stackoverflow.com/questions/45823558/linkedlist-in-c-error/45823716#45823716", "title": "LinkedList in C error", "body": "<pre><code>void createNode(int key, int value) {\n  struct node *new_node; // you need to malloc here\n  new_node-&gt;key = key;\n  new_node-&gt;value = value;\n  new_node-&gt;next = lList-&gt;head;\n  lList-&gt;head = new_node;\n}\n</code></pre>\n\n<p>You must malloc before access a pointer.</p>\n\n<pre><code>struct node *new_node = (struct node*)malloc(sizeof(struct node));\n</code></pre>\n\n<p>Also change like,</p>\n\n<pre><code>struct node current = *lList-&gt;head;\n</code></pre>\n\n<p>into,</p>\n\n<pre><code>struct node *current = *lList-&gt;head;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8327010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566a9962a55a9d5203bb26618337459d?s=128&d=identicon&r=PG", "display_name": "aatate98", "link": "https://stackoverflow.com/users/8327010/aatate98"}, "is_accepted": false, "score": 1, "last_activity_date": 1503423237, "creation_date": 1503423237, "answer_id": 45823773, "question_id": 45823558, "link": "https://stackoverflow.com/questions/45823558/linkedlist-in-c-error/45823773#45823773", "title": "LinkedList in C error", "body": "<pre><code>do{\nprintf(\"%i\", current-&gt;key);\ncurrent = current-&gt;next;\n} while(current != NULL)\n</code></pre>\n\n<p>doing this instead will check if your on the last node by seeing if the next node is null rather than the whole structure</p>\n"}], "owner": {"reputation": 1360, "user_id": 6593789, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-nfq6l0wyldk/AAAAAAAAAAI/AAAAAAAABY0/mHRz3aBVoLU/photo.jpg?sz=128", "display_name": "random_coder_101", "link": "https://stackoverflow.com/users/6593789/random-coder-101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 45823586, "answer_count": 4, "score": 0, "last_activity_date": 1503424369, "creation_date": 1503422389, "last_edit_date": 1503424369, "question_id": 45823558, "link": "https://stackoverflow.com/questions/45823558/linkedlist-in-c-error", "title": "LinkedList in C error", "body": "<p>I am attempting to write a LinkedList in C. Here are my two structs</p>\n\n<pre><code>struct node{\n  int key;\n  int value;\n  struct node *next;\n};\n\nstruct LinkedList {\n  struct node *head;\n};\n</code></pre>\n\n<p>And here is how I create a new node.</p>\n\n<pre><code>void createNode(int key, int value) {\n  struct node *new_node;\n  new_node-&gt;key = key;\n  new_node-&gt;value = value;\n  new_node-&gt;next = lList-&gt;head;\n  lList-&gt;head = new_node;\n}\n</code></pre>\n\n<p>I am trying to traverse through the LinkedList using the function below. </p>\n\n<pre><code>void traverseNode(struct LinkedList *lList) {\n  struct node current = *lList-&gt;head;\n  while(current != NULL) {\n    printf(\"%i\", current-&gt;key);\n    current = current-&gt;next;\n  }\n}\n</code></pre>\n\n<p>However, I keep getting an error saying </p>\n\n<pre><code>invalid operands to binary expression ('struct node'\n      and 'void *')\n</code></pre>\n\n<p>in relation to my <code>while</code> expression. </p>\n\n<p>Also, I get an error for the </p>\n\n<pre><code>printf(\"%i\", current-&gt;key);\ncurrent = current-&gt;next\n</code></pre>\n\n<p>with the error being </p>\n\n<blockquote>\n  <p>member reference type 'struct node' is not a pointer;\n        maybe you meant to use '.'</p>\n</blockquote>\n\n<p>I am confused because I thought in my node struct, the <code>*next</code> was defined as a pointer and could therefore be accessed only using the indirection(->) syntax. </p>\n\n<p>I am a beginner to pointers, so any help is appreciated. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503422417, "post_id": 45823525, "comment_id": 78605195, "body": "Your compiler will complain if it is told to."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503423284, "post_id": 45823525, "comment_id": 78605654, "body": "@IgnacioVazquez-Abrams How do I tell gcc/clang/tcc to do that?"}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1503423337, "post_id": 45823525, "comment_id": 78605672, "body": "@PSkocik: <code>-Wunused-result</code>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503423485, "post_id": 45823525, "comment_id": 78605759, "body": "@IgnacioVazquez-Abrams That doesn&#39;t do it. <code>-Wunused-result</code> should be on by default and it only warns for functions explicitly marked <code>__attribute__((__warn_unused_result__))</code>. Thanks anyway."}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1503423530, "post_id": 45823525, "comment_id": 78605781, "body": "@PSkocik: The GCC man page says that <code>-Wno-unused-result</code> is the default."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503423774, "post_id": 45823525, "comment_id": 78605906, "body": "@IgnacioVazquez-Abrams Empirically, <code>-Wunsued-result</code> is on by default in <code>gcc</code> and <code>clang</code>. Interestingly I just learned that a <code>(void)</code> cast in clang (but not gcc) does silence the WUR warning, but since it doesn&#39;t in gcc, I still havea  used for my ignore macro."}], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 3, "last_activity_date": 1503422566, "creation_date": 1503422566, "answer_id": 45823605, "question_id": 45823525, "link": "https://stackoverflow.com/questions/45823525/can-i-just-call-such-a-subroutine-which-returns-a-value-as-if-it-returned-void/45823605#45823605", "title": "Can I just call such a subroutine which returns a value as if it returned `void`?", "body": "<p>You aren't required to put the cast to void in. For example, the <code>printf</code> function returns a value (how many characters were written), but it's rare to see someone catch the return value or cast it to void.</p>\n\n<p>A void cast is often a good idea if you're calling a function specifically for the side effects in a way that's unusual or counterintuitive and you want to explicitly signal to other people reading the code that yes, you know you're ignoring the return value, and that yes, that was intentional.</p>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 1, "last_activity_date": 1503422592, "creation_date": 1503422592, "answer_id": 45823613, "question_id": 45823525, "link": "https://stackoverflow.com/questions/45823525/can-i-just-call-such-a-subroutine-which-returns-a-value-as-if-it-returned-void/45823613#45823613", "title": "Can I just call such a subroutine which returns a value as if it returned `void`?", "body": "<p>You don't violate any rules. The reason why you would want to explicitly do that cast is to let the compiler or a static code analyzer know that you're ignoring the return value on purpose else they might complain about a discarded return value. The reason that code analyzers or a compiler might warn you about this is because usually when a function returns something it's considered information that should be checked/processed.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1503422970, "creation_date": 1503422970, "answer_id": 45823708, "question_id": 45823525, "link": "https://stackoverflow.com/questions/45823525/can-i-just-call-such-a-subroutine-which-returns-a-value-as-if-it-returned-void/45823708#45823708", "title": "Can I just call such a subroutine which returns a value as if it returned `void`?", "body": "<p>I don't find the <code>void</code> casting very useful.\nAs far as I understand, it's just as good as a comment, and it won't silence\nwarnings from <code>__attribute__((__warn_unused_result__))</code> functions (a <code>gcc/clang</code> extension).</p>\n\n<p>I've been using an explicit ignore macro that does silence these (or to simply say I'm ignoring a return value).</p>\n\n<pre><code>/*Ignore macro ( NS == your libs namespace) */\n#define NS_ign(Expr)  do{__attribute__((__unused__)) __typeof(Expr) NS_ign = Expr; }while(0)\n\n/*example usage*/\n#include &lt;stdio.h&gt;\n__attribute__((__warn_unused_result__))\nint Puts(char const *X) { return puts(X); }\n\nint main()\n{\n    //puts returns an int -- no harm done if you silently ignore it\n    puts(\"hello world\"); \n    /*(void)Puts(\"hello world\");*/  //(void) cast doesn't silence WUR\n    NS_ign(Puts(\"hello world\"));    //this does\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1503422701, "answer_count": 3, "score": 2, "last_activity_date": 1503422970, "creation_date": 1503422206, "question_id": 45823525, "link": "https://stackoverflow.com/questions/45823525/can-i-just-call-such-a-subroutine-which-returns-a-value-as-if-it-returned-void", "closed_reason": "Duplicate", "title": "Can I just call such a subroutine which returns a value as if it returned `void`?", "body": "<p>From Programming Language Pragmatics, by Scott:</p>\n\n<blockquote>\n  <p>If the programmer wishes to call a subroutine that does return a\n  value, but the value is not needed in this particular case (all that\n  matters is the side effect[s]), then the return value in C can be\n  discarded by \u201ccasting\u201d it to void:</p>\n\n<pre><code>foo_index = insert_in_symbol_table(foo);\n...\n(void) insert_in_symbol_table(bar);\n</code></pre>\n</blockquote>\n\n<p>Can I just call such a subroutine which returns a value as if it returned <code>void</code>? </p>\n\n<pre><code>insert_in_symbol_table(bar);  \n</code></pre>\n\n<p>What syntax or semantics rules do I violate?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1503421564, "post_id": 45823284, "comment_id": 78604780, "body": "I think it works with float since some of the comparisons are made in double precision. With the double case they are not precise enough."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503421834, "post_id": 45823284, "comment_id": 78604910, "body": "Tip: Use <code>&quot;%a&quot;</code> to see all the details of <code>last_d&#47;DBL_MAX</code>."}, {"owner": {"reputation": 875, "user_id": 6049386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bcOrf.jpg?s=128&g=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/6049386/vladimir"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1503422266, "post_id": 45823284, "comment_id": 78605112, "body": "@Bathsheba - yes, i suppose the same, just right now out of ideas how to fix this :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503422351, "post_id": 45823284, "comment_id": 78605160, "body": "Please report your platform&#39;s <code>printf(&quot;%d\\n&quot;, FLT_EVAL_METHOD);</code> as that affects the answer.  It is 2,1,0, -1, etc?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1503422381, "post_id": 45823284, "comment_id": 78605175, "body": "I&#39;ll bet my job on it being down to this - answer below."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1503422387, "post_id": 45823284, "comment_id": 78605177, "body": "You seem to assume that If <code>d&lt;DBL_MAX</code>, then for some <i>representable</i> <code>epsilon&gt;0</code> <code>d*(1+epsilon) == DBL_MAX</code>. This is of course not true."}, {"owner": {"reputation": 875, "user_id": 6049386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bcOrf.jpg?s=128&g=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/6049386/vladimir"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503422556, "post_id": 45823284, "comment_id": 78605271, "body": "@chux this reports &#39;0&#39;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503422641, "post_id": 45823284, "comment_id": 78605321, "body": "@Vladimir So your <code>float</code> calculation are done with <code>float</code> and mine (2 is reported), is done with <code>long double</code>. and converges with the hoped for results.  Hmmm&#39;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503423658, "post_id": 45823284, "comment_id": 78605846, "body": "@Vladimir Please also report <code>printf(&quot;%d\\n&quot;, FLT_ROUNDS);</code> (The rounding mode for floating-point)."}, {"owner": {"reputation": 875, "user_id": 6049386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bcOrf.jpg?s=128&g=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/6049386/vladimir"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503423764, "post_id": 45823284, "comment_id": 78605902, "body": "@chux this one shows &#39;1&#39;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1503424045, "post_id": 45823284, "comment_id": 78606054, "body": "The last <code>step_d</code> would be interesting to know.  Is it 3.122502e-17?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1503424302, "post_id": 45823284, "comment_id": 78606210, "body": "The issue I see is with <code>d  = last_d * (1.0 + step_d);</code> vs. maybe <code>d  = last_d  + step_d*last_d;</code> as the first can make a <code>double</code> intermediate sum of <code>1.0 + step_d</code> that is <code>1.0</code>, even without <code>step_d != 0</code> whereas the 2nd form can use FP math that is a <i>bit</i> wider.  Do you get expected results using <code>d  = last_d  + step_d*last_d;</code>?"}, {"owner": {"reputation": 875, "user_id": 6049386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bcOrf.jpg?s=128&g=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/6049386/vladimir"}, "edited": false, "score": 0, "creation_date": 1503424490, "post_id": 45823284, "comment_id": 78606316, "body": "@chus Repect! This did the trick - please make an answer from it"}], "answers": [{"comments": [{"owner": {"reputation": 875, "user_id": 6049386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bcOrf.jpg?s=128&g=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/6049386/vladimir"}, "edited": false, "score": 0, "creation_date": 1503465035, "post_id": 45823554, "comment_id": 78619473, "body": "Neither &#39;f&#39; suffix in the float case, not &#39;L&#39; in the double case changed anything in the output - float is still correct, and the double calculation - still incorrect. Also tried <code>long double</code> instead of <code>double</code> for the variables with no success."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1503422356, "creation_date": 1503422356, "answer_id": 45823554, "question_id": 45823284, "link": "https://stackoverflow.com/questions/45823284/calculate-the-range-of-double/45823554#45823554", "title": "Calculate the range of double", "body": "<p>The expressions with the literals n.0 are all double precision floating point types. That allows the assignment to f to be calculated using a higher precision intermediate value.</p>\n\n<p>It's this effect that allows the algorithm to converge in the float case.</p>\n\n<p>With strict double precision floating point such convergence is not possible.</p>\n\n<p>If you had used the f suffix on the literals in the float case then convergence would not occur there either.</p>\n\n<p>A fix would be to use long double suffixes on the literals if your platform has a wider long double type.</p>\n"}, {"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503425046, "post_id": 45824141, "comment_id": 78606643, "body": "Why are your local variables marked <code>volatile</code>? Is <i>that</i> what forces the calculation to use <code>double</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1503425350, "post_id": 45824141, "comment_id": 78606821, "body": "@Groo Yes, partially.  If my <code>double</code> variables are not <code>volatile</code>, then with <code>FLT_EVEL_METHOD==2</code>, various FP math may occur are wider precision.  So try to force the calculations to only occur at <code>double</code> and break <code>last_f * (1.0 + step)</code> into 2 steps, insuring the <code>1.0 + step</code> sum is not retained internally at higher precision.  Then code is re-formed using <code>d  = last_d  + step_d*last_d;</code>  (or even <code>volatile double product = step_d*last_d; d  = last_d  + product;</code>) to exercise an alternate method that is more numerically accurate."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503425832, "post_id": 45824141, "comment_id": 78607045, "body": "Cool stuff, I never thought I would see it being used in such context. :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1503426289, "post_id": 45824141, "comment_id": 78607289, "body": "@Vladimir Some details: The core issue here is that when using FP near its limits of precision/range, it is important to form <i>exact</i> or nearly so  results as able.  With <i>binary</i> FP, <code>step_d = 1.0; ... step_d &#47;= 2.0;</code> is always exact (except for 1 case, <code>DBL_TRUE_MIN&#47;2</code>).  The compares are <i>exact</i>.  <code>d  = f(last_d, step_d);</code> is not always going to be exact, yet, letting intermediate values to be <i>exact</i> allows and inexactness (and its rounding) to be part of the last calculation rather than <a href=\"https://en.wikipedia.org/wiki/Rounding#Double_rounding\" rel=\"nofollow noreferrer\">double rounding</a> makes for the best result."}, {"owner": {"reputation": 875, "user_id": 6049386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bcOrf.jpg?s=128&g=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/6049386/vladimir"}, "edited": false, "score": 1, "creation_date": 1503464745, "post_id": 45824141, "comment_id": 78619355, "body": "Great answer and great explanation. I wish i could upvote you twice."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1503426623, "last_edit_date": 1503426623, "creation_date": 1503424689, "answer_id": 45824141, "question_id": 45823284, "link": "https://stackoverflow.com/questions/45823284/calculate-the-range-of-double/45824141#45824141", "title": "Calculate the range of double", "body": "<p>OP's approach works when calculations are done with wider precision than <code>float</code> in the first case and wider than <code>double</code> in the 2nd case.</p>\n\n<p>In the first case, OP reports <code>FLT_EVAL_METHOD == 0</code> so <code>float</code> calculations are done as <code>float</code> and <code>double</code> are done as <code>double</code>.  Note that <code>float step ... 1.0 + step</code> is a <code>double</code> calculation.</p>\n\n<hr>\n\n<p>The below code <em>forces</em> the calculation to <em>double</em> and so I can replicate OP's problem even with my <code>FLT_EVEL_METHOD==2</code>  (Use <code>long double</code> for internal calculations.)</p>\n\n<pre><code>  volatile double d = 1.0;\n  volatile double last_d;\n  volatile double step_d = 9.0;\n  while(1) {\n      last_d = d;\n      d *= (1.0 + step_d);\n      while (d == INFINITY) {\n          step_d /= 2.0;\n          volatile double sum = 1.0 + step_d;\n          d  = last_d * sum;\n          //d  = last_d  + step_d*last_d;\n      }\n      if (! (d &gt; last_d) ) {\n        break;\n      }\n  }\n\ndiff                 : 1.995840e+292\nThe expected value?  : no\n</code></pre>\n\n<p>Instead OP should use the following which does not form the <strong>inexact</strong> sum of <code>1.0 + step_d</code>  when <code>step_d</code> is small, rather it forms the <strong>exact</strong> product of <code>step_d*last_d</code>.  The 2nd form results in a more accurate calculation for the new <code>d</code>, by providing an additional <em>bit</em> of calculation precision in <code>d</code>.  Higher precision FP is not needed to employ OP's approach.</p>\n\n<pre><code>          d  = last_d  + step_d*last_d;\n\ndiff                 : 0x0p+0 0.000000e+00\nThe expected value?  : yes\n</code></pre>\n"}], "owner": {"reputation": 875, "user_id": 6049386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bcOrf.jpg?s=128&g=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/6049386/vladimir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "accepted_answer_id": 45824141, "answer_count": 2, "score": 1, "last_activity_date": 1503426623, "creation_date": 1503421213, "last_edit_date": 1503421928, "question_id": 45823284, "link": "https://stackoverflow.com/questions/45823284/calculate-the-range-of-double", "title": "Calculate the range of double", "body": "<p>As part of a exercise from \"The C programming Language\" i am trying to find a way to calculate the maximum possible float and the maximum possible double on my computer. The technique shown below works with <code>float</code>s (to calculate the max float) but not with <code>double</code>:</p>\n\n<pre><code>// max float:\nfloat f = 1.0;\nfloat last_f;\nfloat step = 9.0;\nwhile(1) {\n    last_f = f;\n    f *= (1.0 + step);\n    while (f == INFINITY) {\n        step /= 2.0;\n        f  = last_f * (1.0 + step);\n    }\n    if (! (f &gt; last_f) )\n        break;\n}\nprintf(\"calculated float max : %e\\n\", last_f);\nprintf(\"limits.h float max   : %e\\n\", FLT_MAX);\nprintf(\"diff                 : %e\\n\", FLT_MAX - last_f);\nprintf(\"The expected value?  : %s\\n\\n\", (FLT_MAX == last_f)? \"yes\":\"no\");\n\n// max double:\ndouble d = 1.0;\ndouble last_d;\ndouble step_d = 9.0;\nwhile(1) {\n    last_d = d;\n    d *= (1.0 + step_d);\n    while (d == INFINITY) {\n        step_d /= 2.0;\n        d  = last_d * (1.0 + step_d);\n    }\n    if (! (d &gt; last_d) )\n        break;\n}\nprintf(\"calculated double max: %e\\n\", last_d);\nprintf(\"limits.h double max  : %e\\n\", DBL_MAX);\nprintf(\"diff                 : %e\\n\", DBL_MAX - last_d);\nprintf(\"The expected value?  : %s\\n\\n\", (DBL_MAX == last_d)? \"yes\":\"no\");\n</code></pre>\n\n<p>and this results to: </p>\n\n<pre><code>calculated float max : 3.402823e+38\nlimits.h float max   : 3.402823e+38\ndiff                 : 0.000000e+00\nThe expected value?  : yes\n\ncalculated double max: 1.797693e+308\nlimits.h double max  : 1.797693e+308\ndiff                 : 1.995840e+292\nThe expected value?  : no\n</code></pre>\n\n<p>It looks to me like it still calculates using single precision in the second case.</p>\n\n<p>What am i missing?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1503418536, "post_id": 45822588, "comment_id": 78603151, "body": "Try compiling your  code with option <code>-std=c99</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 5, "creation_date": 1503418538, "post_id": 45822588, "comment_id": 78603154, "body": "Your C compiler could be ancient, those do not like the &quot;C++ style comments&quot;."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1503418597, "post_id": 45822588, "comment_id": 78603189, "body": "Does this mean that <code>&#47;&#47;</code> is a somewhat new addition to C?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 7, "creation_date": 1503418657, "post_id": 45822588, "comment_id": 78603227, "body": "If you consider 17 years old &quot;new&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1503418716, "post_id": 45822588, "comment_id": 78603246, "body": "@ClsForCookies it was added in C99, so <i>new</i> is kind of <i>relative</i>. Less than 20 years, oh well."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1503418773, "post_id": 45822588, "comment_id": 78603280, "body": "That&#39;s why the <b>somewhat</b>  :) I work on a very old code"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 2, "creation_date": 1503418987, "post_id": 45822588, "comment_id": 78603398, "body": "Specifying the actual compiler type and version is the only relevant information, and it&#39;s missing from the question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1503419191, "post_id": 45822588, "comment_id": 78603519, "body": "@ClsForCookies you might want to check the build system then. I have some not-so-old code myself that&#39;s compiled with <code>-std=c89</code> to keep it compatible with <code>msvc</code>. I don&#39;t do this any more as I consider Microsoft&#39;s C support a lost case now..."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1503468548, "post_id": 45822588, "comment_id": 78620908, "body": "Added details about the compiler flags. That indeed was the problem"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1503419386, "post_id": 45822622, "comment_id": 78603627, "body": "Or, if already fiddling with the build system, why not go directly for <code>-std=c11</code>? :)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1503419561, "post_id": 45822622, "comment_id": 78603723, "body": "@FelixPalmen; Yes. I thought the answer is in c99 context so simply give the option <code>-std=c99</code>."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 4, "last_activity_date": 1503423287, "last_edit_date": 1503423287, "creation_date": 1503418586, "answer_id": 45822622, "question_id": 45822588, "link": "https://stackoverflow.com/questions/45822588/parsing-issues-with-comments-causes-errors-while-does-not/45822622#45822622", "title": "parsing issues with comments: // causes errors while /* does not", "body": "<p>Single line comment <code>//</code> is introduced in C99. If you're using GCC or Clang, compile your program with the option <code>-std=c99</code> or <code>-std=c11</code>.  </p>\n\n<p>n1256-Foreword (p5): </p>\n\n<blockquote>\n  <p>Major changes from the previous edition include:<br>\n  [...]<br>\n   \u2014 <code>//</code> comments<br>\n  [...]</p>\n</blockquote>\n"}], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 45822622, "answer_count": 1, "score": 0, "last_activity_date": 1503468478, "creation_date": 1503418486, "last_edit_date": 1592644375, "question_id": 45822588, "link": "https://stackoverflow.com/questions/45822588/parsing-issues-with-comments-causes-errors-while-does-not", "title": "parsing issues with comments: // causes errors while /* does not", "body": "<p>I'm working on a large scale project and encountered this error: <em><code>error: expected expression before '/' token</code></em></p>\n<p>This happened when trying to comment out a line on my code using <code>// ...</code>. The error disappeared when I replaced it with <code>/* ... */</code></p>\n<p>From what I know, both of the comment formats are legal:</p>\n<blockquote>\n<p>1 Except within a character constant, a string literal, or a comment, the characters /* introduce a comment. The contents of such a comment are examined only to identify multibyte characters and to find the characters */ that terminate it.83)</p>\n<p>2 Except within a character constant, a string literal, or a comment, the characters // introduce a comment that includes all multibyte characters up to, but not including, the next new-line character. The contents of such a comment are examined only to identify multibyte characters and to find the terminating new-line character.</p>\n</blockquote>\n<p>Is this a platform specific issue?</p>\n<p><strong>EDIT :</strong> my project is compiled with <code>gnu compiler</code> and with the following flags: <code>-ansi -fno-zero-initialized-in-bss  -Wall</code>. Replacing the <code>-ansi</code> with <code>-std=c99</code> (or more up-to-date version) solves the problem.</p>\n"}, {"tags": ["c", "sockets", "networking", "ip"], "comments": [{"owner": {"reputation": 53946, "user_id": 113794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7fbfca0882062e4be43e0ee3514c6338?s=128&d=identicon&r=PG", "display_name": "Rubens Farias", "link": "https://stackoverflow.com/users/113794/rubens-farias"}, "edited": false, "score": 3, "creation_date": 1503418592, "post_id": 45822570, "comment_id": 78603184, "body": "It&#39;s not uncommon a given machine having several other IP addresses... you could write a server to listen for just a subnet..."}, {"owner": {"reputation": 704, "user_id": 7488960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9e6e6f85903b38fb8e826f97ede366a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/7488960/akash"}, "reply_to_user": {"reputation": 53946, "user_id": 113794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7fbfca0882062e4be43e0ee3514c6338?s=128&d=identicon&r=PG", "display_name": "Rubens Farias", "link": "https://stackoverflow.com/users/113794/rubens-farias"}, "edited": false, "score": 0, "creation_date": 1503418629, "post_id": 45822570, "comment_id": 78603211, "body": "Can you please elaborate. @RubensFarias"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 53946, "user_id": 113794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7fbfca0882062e4be43e0ee3514c6338?s=128&d=identicon&r=PG", "display_name": "Rubens Farias", "link": "https://stackoverflow.com/users/113794/rubens-farias"}, "edited": false, "score": 3, "creation_date": 1503418726, "post_id": 45822570, "comment_id": 78603257, "body": "@RubensFarias, if you had posted the comment as an answer, I would have up-voted the answer rather than the comment ;-)"}, {"owner": {"reputation": 53946, "user_id": 113794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7fbfca0882062e4be43e0ee3514c6338?s=128&d=identicon&r=PG", "display_name": "Rubens Farias", "link": "https://stackoverflow.com/users/113794/rubens-farias"}, "edited": false, "score": 1, "creation_date": 1503418889, "post_id": 45822570, "comment_id": 78603338, "body": "Imagine a machine with several network cards, as a bridge over several networks addresses (10.0.0.1, 192.168.0.1, etc). You could install a socket application in that machine that would work just within one of those networks."}, {"owner": {"reputation": 704, "user_id": 7488960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9e6e6f85903b38fb8e826f97ede366a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/7488960/akash"}, "edited": false, "score": 1, "creation_date": 1503418950, "post_id": 45822570, "comment_id": 78603371, "body": "^ Please post this as the answer so that I can accept it."}, {"owner": {"reputation": 53946, "user_id": 113794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7fbfca0882062e4be43e0ee3514c6338?s=128&d=identicon&r=PG", "display_name": "Rubens Farias", "link": "https://stackoverflow.com/users/113794/rubens-farias"}, "edited": false, "score": 0, "creation_date": 1503418995, "post_id": 45822570, "comment_id": 78603402, "body": "Take @nitarshs answer, it&#39;s almost the same thing ;-)"}, {"owner": {"reputation": 704, "user_id": 7488960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9e6e6f85903b38fb8e826f97ede366a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/7488960/akash"}, "edited": false, "score": 0, "creation_date": 1503419072, "post_id": 45822570, "comment_id": 78603449, "body": "Okay :-P . One more query, what will INADDR_ANY will do in the situation you mentioned?"}, {"owner": {"reputation": 53946, "user_id": 113794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7fbfca0882062e4be43e0ee3514c6338?s=128&d=identicon&r=PG", "display_name": "Rubens Farias", "link": "https://stackoverflow.com/users/113794/rubens-farias"}, "edited": false, "score": 1, "creation_date": 1503419113, "post_id": 45822570, "comment_id": 78603469, "body": "Yes, it will; that means &quot;any address&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 173, "user_id": 1960374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iUncOldEMRc/AAAAAAAAAAI/AAAAAAAAGoY/XUWSCMyuJUs/photo.jpg?sz=128", "display_name": "nitarshs", "link": "https://stackoverflow.com/users/1960374/nitarshs"}, "is_accepted": false, "score": 1, "last_activity_date": 1503425851, "last_edit_date": 1503425851, "creation_date": 1503418862, "answer_id": 45822696, "question_id": 45822570, "link": "https://stackoverflow.com/questions/45822570/why-do-we-require-the-ip-address-of-server-in-itself-in-socket-programming-in-c/45822696#45822696", "title": "Why do we require the ip address of server in itself in socket programming in C", "body": "<p>It is to bind to all available interfaces in your machine/device. Explanation taken from here:</p>\n\n<p><a href=\"https://www.cs.cmu.edu/~srini/15-441/F01.full/www/assignments/P2/htmlsim_split/node18.html\" rel=\"nofollow noreferrer\">The IP address <code>INADDR_ANY</code></a>:</p>\n\n<blockquote>\n  <p>When you wrote your simple FTP server in project 1, you probably bound\n  your listening socket to the special IP address INADDR_ANY. This\n  allowed your program to work without knowing the IP address of the\n  machine it was running on, or, in the case of a machine with multiple\n  network interfaces, it allowed your server to receive packets destined\n  to any of the interfaces. In reality, the semantics of INADDR_ANY are\n  more complex and involved.</p>\n  \n  <p>In the simulator, INADDR_ANY has the following semantics: When\n  receiving, a socket bound to this address receives packets from all\n  interfaces. For example, suppose that a host has interfaces 0, 1 and\n  2. If a UDP socket on this host is bound using INADDR_ANY and udp port 8000, then the socket will receive all packets for port 8000 that\n  arrive on interfaces 0, 1, or 2. If a second socket attempts to Bind\n  to port 8000 on interface 1, the Bind will fail since the first socket\n  already ``owns'' that port/interface.</p>\n  \n  <p>When sending, a socket bound with INADDR_ANY binds to the default IP\n  address, which is that of the lowest-numbered interface.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 260, "user_id": 2078544, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6be53573d46704815ecfd472f29899f9?s=128&d=identicon&r=PG", "display_name": "netikras", "link": "https://stackoverflow.com/users/2078544/netikras"}, "is_accepted": false, "score": 3, "last_activity_date": 1503419137, "creation_date": 1503419137, "answer_id": 45822769, "question_id": 45822570, "link": "https://stackoverflow.com/questions/45822570/why-do-we-require-the-ip-address-of-server-in-itself-in-socket-programming-in-c/45822769#45822769", "title": "Why do we require the ip address of server in itself in socket programming in C", "body": "<p>Now imagine a server. And the server has, say, 3 network cards. 1 is dedicated to production (dedicated to the application), another is for backups (so that during backups PROD NIC network would not get jammed) and the third one for maintenance (the one that has no access to outside world and is only used internally, for administrators to access the machine).</p>\n\n<p>And you have a ssh daemon running inside. Now the server MUST NOT be accessible via ssh from outside world (i.e. from PROD NIC), so you cannot bind ssh to NIC1 IP and you cannot bind it to 0.0.0.0. NIC3 is dedicated for administrational purposes and you bind the ssh daemon to its IP.</p>\n\n<p>Makes sense, doesn't it?</p>\n\n<p>The same applies to backups and main app. Quite often the main app is not meant to be accessible from LAN hence it must be bound to NIC1 IP. And backups scheduler listener shall not be possible to be triggered by connections from outside, so you will bind it to IP of a NIC whichever is connected to bkups server (NIC2).</p>\n\n<p>Usually local databases are bound to loopback ONLY so that they would not be accessible via any of the NICs. And general services are often available via any of the NICS installed on the server (think httpd, DNS @LAN, etc..)</p>\n\n<p>That's why you have to bind -- you have to choose how will the socket be accessible: via loopback, via either of the NICs or via whatever NIC/LO.</p>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": true, "score": 3, "last_activity_date": 1503425785, "last_edit_date": 1503425785, "creation_date": 1503419288, "answer_id": 45822813, "question_id": 45822570, "link": "https://stackoverflow.com/questions/45822570/why-do-we-require-the-ip-address-of-server-in-itself-in-socket-programming-in-c/45822813#45822813", "title": "Why do we require the ip address of server in itself in socket programming in C", "body": "<p>A host machine can have more than one <em>network interface</em> installed (ie, connected to multiple networks at a time), and there is at least one IP address associated with each interface (consider, for example, <em>IP aliasing</em>). </p>\n\n<p><code>INADDR_ANY</code> binds a socket to all available interfaces.  Otherwise, you have to specify an IP address of a particuar interface to bind to.</p>\n"}], "owner": {"reputation": 704, "user_id": 7488960, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9e6e6f85903b38fb8e826f97ede366a8?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/7488960/akash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 2, "accepted_answer_id": 45822813, "answer_count": 3, "score": 3, "last_activity_date": 1503425851, "creation_date": 1503418441, "question_id": 45822570, "link": "https://stackoverflow.com/questions/45822570/why-do-we-require-the-ip-address-of-server-in-itself-in-socket-programming-in-c", "title": "Why do we require the ip address of server in itself in socket programming in C", "body": "<p>I am fairly new to socket programming. While programming a simple client-server application, I observed that we bind the server to the server address structure.</p>\n\n<pre><code>// define the server address\nstruct sockaddr_in server_address;\nserver_address.sin_family = AF_INET;\nserver_address.sin_port = htons(9002);\nserver_address.sin_addr.s_addr =  INADDR_ANY; //focus on this line --- line 4\n\n// bind the socket to our specified IP and port\nbind(server_socket, (struct sockaddr*) &amp;server_address, sizeof(server_address));\n</code></pre>\n\n<p>As shown in the code, why do we require the line 4 ? We know the server socket is going to bind on the server machine-ip (itself), it can't bind to any other ip. What is the significance of <code>INADDR_ANY</code> (or any other ip?) in this context?</p>\n"}, {"tags": ["c", "security", "shellcode"], "comments": [{"owner": {"reputation": 2827, "user_id": 5360631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db9d7bd8c19e8f3ba6060d2a8f94efe?s=128&d=identicon&r=PG&f=1", "display_name": "smcd", "link": "https://stackoverflow.com/users/5360631/smcd"}, "edited": false, "score": 1, "creation_date": 1503430953, "post_id": 45822385, "comment_id": 78609618, "body": "<a href=\"https://cdecl.org/?q=%28int%28%2A%29%28%29%29code%3B\" rel=\"nofollow noreferrer\">cdecl.org</a> can help with translating C into English"}], "answers": [{"tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 2, "last_activity_date": 1503589381, "last_edit_date": 1503589381, "creation_date": 1503418115, "answer_id": 45822475, "question_id": 45822385, "link": "https://stackoverflow.com/questions/45822385/executing-machine-code-in-an-array-in-c-is-this-executing-an-integer/45822475#45822475", "title": "Executing machine code in an array in C. Is this executing an Integer?", "body": "<p>The cast turns the array, <code>code</code> into a pointer to a function and assigns it to the function pointer <code>ret</code>.  Since <code>ret</code> is a pointer to a function, when you call the function pointed to what happens is that the machine code in the array <code>code</code> is executed.</p>\n\n<p>That is the theory. Not sure what the actual machine code that has been stored into the array <code>code</code> is.</p>\n\n<p>So <code>ret</code> is a pointer to a function that returns an <code>int</code>.</p>\n\n<p>Function pointers are not <code>int</code> but are instead function pointers.</p>\n\n<p><strong>Function Pointer Definitions and Declarations</strong></p>\n\n<p>For a variable definitions such as <code>int (*ret)()</code> you have to parse the definition by starting with the variable name, <code>ret</code> in this case. What makes function pointer variable definitions more difficult to decipher is that parenthesis are used to define the order of how the expression is parsed and parenthesis are also used as special symbol to indicate that the variable is a function pointer.</p>\n\n<p>A standard function declaration looks like <code>int retFunc ();</code> which declares a function that returns an <code>int</code>. No arguments are specified in this old style of function declaration so we don't know if there are no arguments or several or their types, if there are arguments. By the way a standard integer variable declaration looks like <code>int intVar;</code>.</p>\n\n<p>To create a function pointer variable you need to specify the same information for the function pointer as you do for a function declaration with one additional piece of information, the indication that this is a declaration or definition of a function pointer and not the declaration of a function.</p>\n\n<p>Here is a bit of code with variations of syntax to show the differences between the declaration of a function and the declaration of a function pointer.</p>\n\n<pre><code>main () {\n    extern int retFunc();    // declaration of a function, returns int\n    extern int (*ret)();     // declaration of a function pointer, function returns int\n    extern int *retFunc2();  // declaration of a function, returns int pointer\n    extern int *(*retVar)(); // declaration of a function pointer, function returns a pointer to an int\n    extern int (*((*ret2)()))(); // declaration of a function pointer, function returns a function pointer which points to a function that returns an int\n}\n</code></pre>\n\n<p>What differentiates these five is the use of the pointer indicator in the second, fourth, and fifth declarations with parenthesis to enforce how the compiler is to interpret the declaration. The grouping parenthesis are needed due to the operator precedence rules which causes the compiler to place higher precedence on the parenthesis indicating a function so we override the precedence rules by using grouping parenthesis.</p>\n\n<p>The fifth one is especially interesting, <code>extern int (*((*ret2)()))();</code> which can be parsed out in two stages. The first is the piece <code>((*ret2)()))</code> which indicates the symbol <code>ret2</code> is a pointer to a function and the second stage is to determine the return type of the function pointed to, a pointer to a function that returns an <code>int</code> by replacing the first piece with an arbitrary symbol <em>x</em> as in <code>int (*x)();</code>.</p>\n\n<p>When creating a function pointer declaration we must be aware of operator precedence rules of C and how these may affect how the compiler interprets a declaration or a definition. We need to add the additional parenthesis around the <code>*ret</code> in the function pointer declaration so that the compiler sees this as a pointer to a function that returns an <code>int</code> rather than a function that returns a pointer to an <code>int</code>.</p>\n\n<p>The rules the C compiler uses sometimes requires that parenthesis be used to enforce an order of translation of an expression in order for the expression to have the desired meaning. And those rules sometimes result in the same character or symbol to have different meanings in different contexts. So <code>int ret();</code> the parenthesis makes the symbol <code>ret</code> to be a function and <code>int (ret);</code> the parenthesis are used to group symbols, in this case just a single symbol and <code>int (*ret)();</code> parenthesis are used to both group symbols and to indicate a function, in this case that <code>ret</code> is a pointer to a function.</p>\n\n<p>In your example rather than a declaration of a variable <code>ret</code> as a function pointer you are defining the variable and assigning it a value in the statement <code>int (*ret)() = (int(*)())code;</code>. The rules for parsing a definition are similar to the rules for parsing a declaration.</p>\n\n<p>In your example <code>code</code> is defined as an array of <code>unsigned char</code> with what I assume is machine code specified in the initialization of the array.</p>\n\n<p>In C an array variable can be considered a constant pointer variable in many ways. So you can dereference an array name which means that <code>code[1]</code> is the same as <code>*(code + 1)</code> however since it is a constant pointer you can not do something like <code>code = code + 1;</code> though you could do something like <code>unsigned char *code1 = (code + 1);</code> which is the same as <code>unsigned char *code1 = &amp;code[1];</code>.</p>\n\n<p>So in the statement <code>int (*ret)() = (int (*)())code;</code> you are casting the constant pointer <code>code</code> which points to an <code>unsigned char</code> to a function pointer to a function that returns an <code>int</code>. As long as there is some way to go from the type on the right hand side of the assignment operator to the type on the left hand side of the assignment operator, the C compiler is happy to oblige what ever fantasies you want to create.</p>\n\n<p>However just because the compiler is happy to generate machine code from an expression does not mean that the underlying operating system and hardware will be happy with the result when the program is actually run. These gray areas, areas of undefined behavior, may result in a program that runs sometimes and not other times or may run in one environment but not another.</p>\n\n<p>The cast of the array <code>code</code> makes this a bit more difficult to understand because the syntax of the cast to a function pointer that returns an <code>int</code> is similar to the syntax for declaring or defining a function pointer that returns an <code>int</code> except that there is no variable after the asterisk in the cast <code>(int(*)())</code>. So all those parenthesis can make it a bit confusing.</p>\n\n<p>In the case of this cast, we are using parenthesis to group the complete type cast, <code>(int(*)())</code> as well as parenthesis to enforce an order, <code>(*)</code>, and parenthesis to indicate that this is a function, <code>()</code>. So there are a lot of parenthesis flying about in this type cast.</p>\n\n<p>When it gets more complicated is something like <code>int *((*ret)()) = (int *((*)()))code;</code> which is a function pointer to a function that returns a pointer to an <code>int</code>.</p>\n\n<p>In cases like this I really prefer to explicitly use parenthesis to specify the order of interpretation rather than relying on my memory of order operator precedence.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 7203719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810fcc0689f33ca25ca1a708c9e888eb?s=128&d=identicon&r=PG&f=1", "display_name": "gatorface", "link": "https://stackoverflow.com/users/7203719/gatorface"}, "edited": false, "score": 0, "creation_date": 1503420546, "post_id": 45822487, "comment_id": 78604264, "body": "Ok, slowly unpacking this here...  So the left side: <code>int (*ret)()</code> is declaring the <code>ret</code> function pointer, pointing to a function that takes no arguments (<code>()</code>) and the function pointed to returns an int.      I&#39;m still confused on what the right side is doing, specifically: <code>int(*)()</code> It looks like that is casting our <code>unsigned char code[]</code> array into the type <code>int(*)()</code>? Is <code>int(*)()</code> just another function pointer, but with no name next to <code>*</code>?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 75, "user_id": 7203719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810fcc0689f33ca25ca1a708c9e888eb?s=128&d=identicon&r=PG&f=1", "display_name": "gatorface", "link": "https://stackoverflow.com/users/7203719/gatorface"}, "edited": false, "score": 0, "creation_date": 1503420616, "post_id": 45822487, "comment_id": 78604301, "body": "@gatorface That&#39;s exactly right, <code>int(*)()</code> is the same as <code>int(*ret)()</code>, with <code>ret</code> omitted."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 8, "last_activity_date": 1503418156, "creation_date": 1503418156, "answer_id": 45822487, "question_id": 45822385, "link": "https://stackoverflow.com/questions/45822385/executing-machine-code-in-an-array-in-c-is-this-executing-an-integer/45822487#45822487", "title": "Executing machine code in an array in C. Is this executing an Integer?", "body": "<blockquote>\n  <p>What I'm wondering though is why calling <code>ret()</code>, which appears to be an integer assigned to the value <code>(int(*)())code</code> works</p>\n</blockquote>\n\n<p><code>ret</code> is not an integer, it is a pointer to a function returning an integer. The \"inline\" syntax, i.e. <code>int (*ret)()</code> is harder to \"decipher\" than an equivalent <code>typedef</code>, i.e.</p>\n\n<pre><code>typedef int (*func_returning_int)();\n...\nfunc_returning_int ret = (func_returning_int)code;\n</code></pre>\n\n<p><strong>Note:</strong> It goes without saying that this is undefined behavior regardless of the way you go about casting pointers.</p>\n"}], "owner": {"reputation": 75, "user_id": 7203719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810fcc0689f33ca25ca1a708c9e888eb?s=128&d=identicon&r=PG&f=1", "display_name": "gatorface", "link": "https://stackoverflow.com/users/7203719/gatorface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 45822487, "answer_count": 2, "score": 1, "last_activity_date": 1503589381, "creation_date": 1503417781, "last_edit_date": 1503486488, "question_id": 45822385, "link": "https://stackoverflow.com/questions/45822385/executing-machine-code-in-an-array-in-c-is-this-executing-an-integer", "title": "Executing machine code in an array in C. Is this executing an Integer?", "body": "<p>I am trying to understand why <code>ret();</code> works in the following C program:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nunsigned char code[] = \\\n\"\\x31\\xc0\\x50\\x68\\x2f\\x2f\\x73\\x68\\x68\\x2f\\x62\\x69\"\n\"\\x6e\\x89\\xe3\\x50\\x53\\x89\\xe1\\xb0\\x0b\\xcd\\x80\";\n\nmain()\n{\n    printf(\"Shellcode Length:  %d\\n\", strlen(code));\n    int (*ret)() = (int(*)())code;\n    ret();\n}\n</code></pre>\n\n<p>In order for this to work you must compile the above with no stack protections, allowing the stack to be executable.</p>\n\n<p>What I'm wondering though is <em>why</em> calling <code>ret();</code>, which appears to be an integer assigned to the value <code>(int(*)())code;</code> works.</p>\n\n<p>I am guessing it has something to do with function pointers really being integers, but I have not been able to mentally unpack the meaning of the expression <code>int (*ret)() = (int(*)())code;</code></p>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["c", "tree", "binary-tree"], "comments": [{"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503417461, "post_id": 45822234, "comment_id": 78602433, "body": "Please post the solution you were working on."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1503417538, "post_id": 45822234, "comment_id": 78602484, "body": "Your solution looks OK to me, but you shouldn&#39;t have an array of <code>product_t</code> but an array of pointers to <code>product_t</code>. Sorting the array is easy with <code>qsort</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503417552, "post_id": 45822234, "comment_id": 78602496, "body": "First thing you do when designing a data structure is to define the operations on it and the desired complexity of each (printing is an operation too). Who said you need a tree at all?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1503417881, "post_id": 45822234, "comment_id": 78602710, "body": "This could also be an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>. In other words: what are you <i>actually</i> trying to achieve?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1503420623, "post_id": 45822234, "comment_id": 78604308, "body": "1) Traverse to to find size.  2) allocate memory of pointers to node 3) traverse tree again and copy node address to the array elements. 4) Sort array <code>qsort()</code>.  5) print 6) free allocation."}], "owner": {"reputation": 25, "user_id": 8501280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91542ef40235094e395d9c753406a14f?s=128&d=identicon&r=PG&f=1", "display_name": "Z3r0", "link": "https://stackoverflow.com/users/8501280/z3r0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516700219, "creation_date": 1503417327, "last_edit_date": 1516700219, "question_id": 45822234, "link": "https://stackoverflow.com/questions/45822234/print-binary-tree-using-different-keys", "title": "Print binary tree using different keys", "body": "<p>I have this structure c code for a tree:</p>\n\n<pre><code>typedef struct product{\n    char name[50];\n    char id[5];\n    double price;\n    int amount;\n    struct product *left_p, *right_p;\n}product_t;\n</code></pre>\n\n<p>I use the id to insert/remove/print the records, but I also need to print them in order of the name, price or amount.</p>\n\n<p>I thought to copy the tree to an array then order the array or make a new tree with a new key and delete the old one, but I don't think the last one is a good solution, considering that I only need to print the records and not do operations on them. Do you think the first solution is nice or do you have some tips on how I can handle this ?</p>\n\n<p>I have to use a tree because the exercise I'm working on requires it. </p>\n"}, {"tags": ["c", "coding-style", "whois"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1503416349, "post_id": 45821893, "comment_id": 78601617, "body": "&#39;when changing the functionality of one, I wouldn&#39;t have to visit every one of the relevant functions, to modify the code there as well&#39; - shoulda been 51 functions."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 4, "creation_date": 1503416382, "post_id": 45821893, "comment_id": 78601639, "body": "Just splitting into more functions isn&#39;t the question. It&#39;s about breaking a problem down into smaller, useful, and encapsulated pieces. The resulting code is more modular, making it easier to maintain, more flexible, and more re-usable for similar tasks. If the code you&#39;re talking about has redundant code in each of the smaller functions that must always be synchronized, that&#39;s just poorly written code (poor encapsulation) having nothing to do with it being more functions. Well-written, modular code would limit the amount of code that needs to be considered for a given change."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1503416409, "post_id": 45821893, "comment_id": 78601659, "body": "Readability, maintainability, reusability."}, {"owner": {"reputation": 1618, "user_id": 593177, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EAUeh.jpg?s=128&g=1", "display_name": "Fausto Carvalho Marques Silva", "link": "https://stackoverflow.com/users/593177/fausto-carvalho-marques-silva"}, "edited": false, "score": 1, "creation_date": 1503416430, "post_id": 45821893, "comment_id": 78601676, "body": "Look here: <a href=\"https://stackoverflow.com/questions/250284/best-practices-many-small-functions-methods-or-bigger-functions-with-logical-p\" title=\"best practices many small functions methods or bigger functions with logical p\">stackoverflow.com/questions/250284/&hellip;</a>"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1503416452, "post_id": 45821893, "comment_id": 78601697, "body": "If you really have identical functions, their size isn&#39;t the problem."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1503416461, "post_id": 45821893, "comment_id": 78601703, "body": "&quot;Hey, don&#39;t touch what&#39;s already there - make a new function.  If you break something that worked OK before, it&#39;s your job&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1503416760, "post_id": 45821893, "comment_id": 78601955, "body": "If the functions are split the way you describe it, this isn&#39;t a good practice. <i>Many small functions</i> are good, but they should follow the <i>single responsibility</i> (SRP) principle as well as the <i>don&#39;t repeat yourself</i> (DRY) principle. That would mean, take these two functions, factor out the common code in <b>yet another function</b>. For the reasons, google for these terms :)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1503417144, "post_id": 45821893, "comment_id": 78602222, "body": "C doesn&#39;t support multiple exits easily, so the alternatives are a long sequence of gotos and cleanups, or small functions. The latter is generally more maintainable and easier to understand and refactor."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 0, "creation_date": 1503417157, "post_id": 45821893, "comment_id": 78602225, "body": "@FelixPalmen So in this case, is it a good idea to code your suggestion for the <code>pwhois</code> database?  Or, is it a big enough project, that I should not propose a change of this magnitude until I am really familiar with how it works?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1503417206, "post_id": 45821893, "comment_id": 78602264, "body": "Anyway, it&#39;s usually not code, but data that it the problem.  In C, you can&#39;t just pop another member var into a class declaration - you have to explicitly arrange for persistent data to.. well.. be persistent.  It&#39;s all too easy to resort to globals or statics, and then we get crap like strtok() :*"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503417637, "post_id": 45821893, "comment_id": 78602560, "body": "@Alex: if the code inside these functions is duplicated, then it&#39;s an awful idea."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503418938, "post_id": 45821893, "comment_id": 78603360, "body": "@Alex can&#39;t tell you, I don&#39;t know this project. I&#39;m just saying a complicated <i>generalist</i> function typically isn&#39;t something you want either."}], "answers": [{"comments": [{"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 0, "creation_date": 1503417016, "post_id": 45822033, "comment_id": 78602131, "body": "How is the consistent with DRY though?  The code in those functions does seem to repeat itself at this time..."}, {"owner": {"reputation": 311, "user_id": 4382834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7wzEt.gif?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4382834/will"}, "reply_to_user": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 0, "creation_date": 1503417301, "post_id": 45822033, "comment_id": 78602316, "body": "@Alex - Its best to remember that no programming practice is perfect. But by using DRY, we can cut down on the amount of keys we have to press to get an output. It also cuts down on file size, which can sometimes be an issue. At times, code will repeat itself with slight variation and that&#39;s to be expected, but DRY significantly reduces the excess."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503417777, "post_id": 45822033, "comment_id": 78602644, "body": "In this case, if these 50 functions work almost the same way, and contain most of the same functionality copy/pasted 50 times, then it&#39;s the wrong approach."}, {"owner": {"reputation": 311, "user_id": 4382834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7wzEt.gif?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4382834/will"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1503417912, "post_id": 45822033, "comment_id": 78602729, "body": "@Groo - Precisely. From a metaphorical perspective, its similar to having a software office with two people from every department in each office. Yes, they are all good at what they do, but it would be much more efficient to put all the back-end developers into one office, the front-end in another, the DBAs into the other office and so on. As long as communication between the functional units is strong, then things will move smoother and easier!"}], "tags": [], "owner": {"reputation": 311, "user_id": 4382834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7wzEt.gif?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4382834/will"}, "is_accepted": false, "score": 3, "last_activity_date": 1503416678, "creation_date": 1503416678, "answer_id": 45822033, "question_id": 45821893, "link": "https://stackoverflow.com/questions/45821893/in-c-why-is-a-larger-number-of-functions-more-preferable-than-a-more-complicate/45822033#45822033", "title": "In C, why is a larger number of functions more preferable than a more complicated function?", "body": "<p>Having a multitude of functions that all work together does a number of things.</p>\n\n<ul>\n<li>Firstly, it creates more reusable components. Functions that may be included in the operation of the program are accessible not only to the program itself, but also any developers who want to take a look and modify it.</li>\n<li>Secondly, it breaks down tasks to make them more manageable. If you have one big function, it requires a hell of a lot of code to work harmoniously without fault, but when taking a more modular approach, there is more wiggle room.</li>\n</ul>\n\n<p>Think of a program that is required to do some hard maths. Which approach would you take?</p>\n\n<ol>\n<li>A function which calculates an output based on a fixed formula, one which is almost unique and only has one application. All the mathematical operations are defined privately.</li>\n<li>A function which calculates an output based on a fixed formula, one which is almost unique and only has one application. <strong>But,</strong> all the mathematical operations are broken down and made reusable.</li>\n</ol>\n\n<p>The idea is that when you're working later down the line, or attempting to fix a bug, you never know when a function you've written before might come in handy! This is part of the DRY (Don't Repeat Yourself) approach to programming and <a href=\"http://programmer.97things.oreilly.com/wiki/index.php/Don&#39;t_Repeat_Yourself\" rel=\"nofollow noreferrer\">I'd recommend reading this article</a> to help reduce your workload and keep your code efficient! :D</p>\n"}, {"comments": [{"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 0, "creation_date": 1503419085, "post_id": 45822722, "comment_id": 78603456, "body": "Even though this is not as well-written as the other answer-- it does a better job addressing what I asked."}], "tags": [], "owner": {"reputation": 326, "user_id": 8486747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sF0mp.png?s=128&g=1", "display_name": "geekymoose", "link": "https://stackoverflow.com/users/8486747/geekymoose"}, "is_accepted": true, "score": 2, "last_activity_date": 1503418970, "creation_date": 1503418970, "answer_id": 45822722, "question_id": 45821893, "link": "https://stackoverflow.com/questions/45821893/in-c-why-is-a-larger-number-of-functions-more-preferable-than-a-more-complicate/45822722#45822722", "title": "In C, why is a larger number of functions more preferable than a more complicated function?", "body": "<p>It's hard to say if a design is actually good or bad but I'd say that, generally, functions with lot of parameters that change its behavior altogether are hard to use and understand, specially later for code review and debug. For instance, thing like calling <code>w_lookup_all_pwhois(wsess, addr, 1)</code> (Or imagine worst, with function like <code>foo(param1, param2, true, 0, NULL, true)</code> may be weird. For that reason, it may be better breaking down into several functions with one specific goal (See the Single Responsibility Principle SRP).</p>\n\n<p>However, as you pointed out, it's better to avoid code duplicate. One possibility I'm using is to write internal multi-purpose function (Like private function) hidden to end user. Then create a set of one purpose functions that call it with the right parameters. In your case with pwhois, it would be something like <code>w_lookup_all_pwhois</code> and <code>w_lookup_all_pwhois</code> calling the same 'private' function with specific parameters. It's not always the best solution, though works for several situations. (For instance, sometime it's hard to have this general function as efficient as single-purpose one).</p>\n\n<p>To make a long story short, it helps code re-usability (See Open/Close Principle OCP) and comprehension.</p>\n"}], "owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "closed_date": 1503419227, "accepted_answer_id": 45822722, "answer_count": 2, "score": 2, "last_activity_date": 1503418970, "creation_date": 1503416228, "last_edit_date": 1503416463, "question_id": 45821893, "link": "https://stackoverflow.com/questions/45821893/in-c-why-is-a-larger-number-of-functions-more-preferable-than-a-more-complicate", "closed_reason": "Opinion-based", "title": "In C, why is a larger number of functions more preferable than a more complicated function?", "body": "<p>I have run into this phenomenon many times before, but none were as clear for demonstrating my point as the following:</p>\n\n<p>The <a href=\"http://www.pwhois.org/lft/index.who\" rel=\"nofollow noreferrer\">source code for pwhois</a> has two functions:</p>\n\n<pre><code>w_lookup_all_pwhois(whois_session_params * wsess, char *addr)\nw_lookup_as_pwhois(whois_session_params * wsess, char *addr)\n</code></pre>\n\n<p>These are 40-to-60-line functions, and are identical except the <code>...as_pwhois</code> function only saves the \"origin-as\" field, whereas <code>...all_pwhois</code> saves all fields.</p>\n\n<p>If I were writing these, I would instead write a single function, with another variable that says whether to fetch all fields or just a single one.  Depending on the application, this variable could even flag, which of the fields to fetch.  One advantage would be that, when reading code from scratch, I wouldn't have to read two identical functions (which are not adjacent in the code), to figure out that they do the exact same thing.  Also, when changing the functionality of one, I wouldn't have to visit every one of the relevant functions, to modify the code there as well.  The disadvantage: a more complicated function-- a seemingly minor disadvantage.</p>\n\n<p>However, most developers in my company seem to prefer the multi-function approach, as seems to be the case everywhere else as well, judging by the available open-source code on the internet.  As a result, the <code>pwhois</code> has on the order of 50 functions, and I have to remember which one does what-- when 10 multi-purpose functions could easily do the job.  What am I missing, that makes the 50-function approach more preferable?  Is there a way to read source code from scratch, in a way which avoids reading these very similar functions more than once?  (Since the functions are not adjacent in the code, I would guess maybe there's some \"standard\" comment file that I've not run into yet.)</p>\n"}, {"tags": ["c", "arrays", "for-loop", "optimization"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 4, "creation_date": 1503415860, "post_id": 45821730, "comment_id": 78601294, "body": "If this is working code, you should take it to <a href=\"https://codereview.stackexchange.com/\">codereview</a> instead. But <b>before you do that</b>, make sure to <b>write a good explanation</b> of your code, e.g. <b>document it</b>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1503416003, "post_id": 45821730, "comment_id": 78601378, "body": "What this code is <i>supposed to do</i>?"}, {"owner": {"reputation": 10287, "user_id": 2545784, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4zVa6.png?s=128&g=1", "display_name": "LS_\u1d05\u1d07\u1d20", "link": "https://stackoverflow.com/users/2545784/ls-%e1%b4%85%e1%b4%87%e1%b4%a0"}, "edited": false, "score": 0, "creation_date": 1503416140, "post_id": 45821730, "comment_id": 78601469, "body": "Taking a quick look, there are many ways to optimize this code..."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1503416171, "post_id": 45821730, "comment_id": 78601491, "body": "<code>while(bricks[j]&gt;=height){bricks[j]--; count++;}</code> can easily be changed to <code>if (bricks[j]&gt;=height){count+=heigth-bricks[j]+1;bricks[j]=heig&zwnj;&#8203;ht-1;}</code> for a start."}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503416274, "post_id": 45821730, "comment_id": 78601558, "body": "That is actually running in <code>O^3</code> runtime , 2 <code>for</code> loops and 1 <code>while</code> loop"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1503420372, "post_id": 45821730, "comment_id": 78604159, "body": "when asking about a run time problem, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1503421448, "creation_date": 1503421448, "answer_id": 45823349, "question_id": 45821730, "link": "https://stackoverflow.com/questions/45821730/optimizing-double-iteration-over-arrays/45823349#45823349", "title": "Optimizing double iteration over arrays", "body": "<p>I'm not sure of the objective of the posted code snippet, but the following proposed code may help with the execution duration:</p>\n\n<pre><code>for ( i=n; i&gt;0; i-- )\n{\n    int index  = linearSearch(seq,i,n);\n    int height = bricks[index];\n\n    for ( j=0; j&lt;n ; j++ )\n    {\n        if( j != index )\n        {\n            if( bricks[j] &gt;= height )\n            {\n                count += bricks[j] - height;\n                bricks[j] -= bricks[j] - height;\n            }\n        }\n    }\n\n    bricks[index] = 0;\n    seq[index] = 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 8489292, "user_type": "registered", "profile_image": "https://graph.facebook.com/1723353614359757/picture?type=large", "display_name": "Shawn Lee", "link": "https://stackoverflow.com/users/8489292/shawn-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503421448, "creation_date": 1503415762, "question_id": 45821730, "link": "https://stackoverflow.com/questions/45821730/optimizing-double-iteration-over-arrays", "title": "Optimizing double iteration over arrays", "body": "<p>I have the following code that I wrote for a practice problem in a coding competition, but when I run it I go over time. The main culprit (I'm guessing) is the double for loop which runs in O(n^2). Is there any way to go about optimizing this code? I've tried messing with memoization, but I can't figure out how to do so.</p>\n\n<pre><code>for (i=n;i&gt;0;i--){\n    int index = linearSearch(seq,i,n);\n    int height = bricks[index];\n    for (j=0;j&lt;n;j++){\n        if (j != index){\n            if (bricks[j] &gt;= height){\n                while(bricks[j]&gt;=height){\n                    bricks[j]--;\n                    count++;\n                }\n\n                if(bricks[j] &lt; 0){\n                    printf(\"-1\\n\");\n                    return 0;\n                }\n\n            }\n        }\n    }\n\n    bricks[index] = 0;\n    seq[index] = 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1503415123, "post_id": 45821467, "comment_id": 78600774, "body": "You should be using <code>%c</code> in your <code>printf</code>. Or just print your <code>out</code> as a string with <code>%s</code> in one instruction, not in a loop (but in that case, don&#39;t forget to add a NULL terminator, so need to increase array size by 1)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503415147, "post_id": 45821467, "comment_id": 78600788, "body": "<code>printf(&quot;%s\\n&quot;, out);</code>. And you need to make your <code>out</code> bigger. <code>sprintf</code> is overflowing it with <code>\\0</code>."}, {"owner": {"reputation": 347, "user_id": 2609713, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d296719557a8ea3a01b2af97c4744ba7?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2609713/sam"}, "edited": false, "score": 0, "creation_date": 1503415360, "post_id": 45821467, "comment_id": 78600941, "body": "Function <code>printf</code> is not really important in this case, I use it to proof weather <code>out</code> contains <code>4e</code>. Making <code>out</code> bigger does not solve my problem."}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1503415469, "post_id": 45821467, "comment_id": 78601037, "body": "It is important, as that&#39;s where your issue is. <code>out</code> is holding the value after the 2 transformations (char * to int, int to hex), so <code>out</code> contains what you&#39;re expecting, i.e. &quot;4e&quot;. But you&#39;re printing the hex values of those characters. You have the right answer, just displaying it wrong."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503415505, "post_id": 45821467, "comment_id": 78601058, "body": "So your &quot;proof&quot; is wrong and not showing what it is supposed to show. Before you are using a tool to prove something, you should show your tool is working."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1503415708, "post_id": 45821467, "comment_id": 78601203, "body": "@haccks not sure about this duplicate because, although the <i>goal</i> is the same, this here is a <i>why doesn&#39;t this code work</i>-question ..."}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1503415944, "post_id": 45821467, "comment_id": 78601350, "body": "@FelixPalmen While I agree that it shouldn&#39;t have been closed as duplicate (because of reasons you stated), I do think it should have been closed. The code is working (almost, as you did say that <code>out</code> should be one byte longer for NULL terminator), but the issue is OP is displaying the hex values of the hex characters, and not the hex characters themselves."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1503416011, "post_id": 45821467, "comment_id": 78601388, "body": "@AntonH I don&#39;t see a matching close reason for that. Although this &quot;<i>double hexing</i>&quot; is quite peculiar, it&#39;s not unclear, not too broad, and beyond a &quot;simple typo&quot; ... :o (and the question contains MCVE as well)"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1503416113, "post_id": 45821467, "comment_id": 78601459, "body": "@FelixPalmen I was thinking of the &quot;typographical&quot; (replace %x with %c in printf), although I do admit it is a bit of a stretch. Or &quot;code not working ...&quot;, simply because the code <i>is</i> working."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1503416447, "post_id": 45821467, "comment_id": 78601691, "body": "@AntonH hmm <code>%c</code> for <code>%x</code> <b>would</b> work here when also using <code>snprintf()</code> instead of <code>sprintf()</code>. So, maybe that&#39;s enough for <i>typo</i>, but yes, it&#39;s a bit of a stretch. Because of this rather strange error, I bet you don&#39;t find a <b>good</b> duplicate as well. Leaving it closed because I <i>feel</i> it shouldn&#39;t be reopened, but really unsure about the reasoning..."}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 2609713, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d296719557a8ea3a01b2af97c4744ba7?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2609713/sam"}, "edited": false, "score": 0, "creation_date": 1503415959, "post_id": 45821534, "comment_id": 78601353, "body": "and how can I store the result which is printed in a char * or char[] ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 347, "user_id": 2609713, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d296719557a8ea3a01b2af97c4744ba7?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2609713/sam"}, "edited": false, "score": 1, "creation_date": 1503416080, "post_id": 45821534, "comment_id": 78601430, "body": "You already do that with your <code>sprintf()</code>? The only problem there is the array was one too small, as I wrote."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 3, "last_activity_date": 1503415208, "creation_date": 1503415208, "answer_id": 45821534, "question_id": 45821467, "link": "https://stackoverflow.com/questions/45821467/how-to-convert-from-char-to-int-to-hex-decimal-in-c/45821534#45821534", "title": "How to convert from char * to int to hex decimal in C", "body": "<p>This is wrong:</p>\n\n<pre><code>char out[2];\nsprintf(out, \"%x\", num); // to hex\n</code></pre>\n\n<p>because you write beyond the bounds of the array. Your number has two hexadecimal places, and you need an <strong>additional</strong> byte for the <code>\\0</code> terminator of the string. It has to be at least <code>char out[3]</code>.</p>\n\n<p>This is even wronger:</p>\n\n<pre><code>for(int i=0;i&lt;2;i++)\n  printf(\"%x\\n\", out[i]);\n</code></pre>\n\n<p>You <strong>already</strong> have a hexadecimal string representation of the number and now take the individual <strong>characters</strong> and interpret them as hexadecimal numbers. Just output your <code>out</code> string instead, e.g. <code>puts(out)</code> or <code>printf(\"%s\\n\", out)</code> (requires the <code>\\0</code> terminator to be present).</p>\n\n<p>You can condense the whole thing to just</p>\n\n<pre><code>int main(void)\n{\n  char *input = \"78\";\n  long num = strtol(input, NULL, 10); // to int\n  printf(\"%lx\\n\", num); // to hex\n}\n</code></pre>\n\n<p>(note that <code>strtol()</code> returns <code>long</code> -- with larger numbers you'd get a problem converting this to <code>int</code>.)</p>\n"}], "owner": {"reputation": 347, "user_id": 2609713, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d296719557a8ea3a01b2af97c4744ba7?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2609713/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "closed_date": 1503415103, "accepted_answer_id": 45821534, "answer_count": 1, "score": -1, "last_activity_date": 1503415208, "creation_date": 1503415003, "question_id": 45821467, "link": "https://stackoverflow.com/questions/45821467/how-to-convert-from-char-to-int-to-hex-decimal-in-c", "closed_reason": "Duplicate", "title": "How to convert from char * to int to hex decimal in C", "body": "<p>How can I convert from char * to int to hex decimal? My input is <code>78</code> and I expect <code>4e</code> but get <code>3465</code> as result.</p>\n\n<pre><code>int main()\n{\n  char *input = \"78\";\n  int num = strtol(input, NULL, 10); // to int\n  char out[2];\n  sprintf(out, \"%x\", num); // to hex\n  for(int i=0;i&lt;2;i++)\n    printf(\"%x\\n\", out[i]);\n}\n</code></pre>\n"}]