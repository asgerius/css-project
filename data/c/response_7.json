[{"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1424907300, "post_id": 28731769, "comment_id": 45749640, "body": "<code>input = &quot;\\0&quot;;</code> is wrong. Replace with <code>input[0] = &#39;\\0&#39;;</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424924370, "post_id": 28731769, "comment_id": 45754010, "body": "this line: &#39;input = &quot;\\0&quot;;&#39; places the address of &quot;\\0&quot; into input, thereby overlying the address returned from malloc.  this results in a memory leak.  and the code should free() the pointer returned from malloc before exiting, and the returned value from malloc, in C, should not be cast, and the returned value from malloc should be checked (!= NULL) to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424924495, "post_id": 28731769, "comment_id": 45754042, "body": "this line: &#39;scanf(&quot;%s\\n&quot;, input);&#39; is trying to write to where ;input&#39; points, however, at that point in the code it is pointing to the read-only literal &quot;\\0&quot;  That is why the buss error, but not the root cause of the problem"}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 4, "last_activity_date": 1424909581, "last_edit_date": 1424909581, "creation_date": 1424907343, "answer_id": 28731833, "question_id": 28731769, "link": "https://stackoverflow.com/questions/28731769/bus-error-caused-while-reading-in-a-string/28731833#28731833", "title": "Bus error caused while reading in a string", "body": "<p>You set <code>input</code> to point to the first element of a string literal (while leaking the recently allocated buffer):</p>\n\n<pre><code>input = \"\\0\"; // now the malloc'd buffer is lost\n</code></pre>\n\n<p>Then you try to modify said literal:</p>\n\n<pre><code>scanf(\"%s\\n\", input);\n</code></pre>\n\n<p>That is undefined behaviour. You can't write to that location. You can fix that problem by removing the first line, <code>input = \"\\0\";</code>.</p>\n\n<p>Next, note that you're only allocating space for one character:</p>\n\n<pre><code>char *input = (char *)malloc(sizeof(char));\n</code></pre>\n\n<p>Once you fix the memory leak and the undefined behaviour, you can think about allocating more space. How much space you need is for you to say, but you need enough to contain the longest string you want to read in plus an extra character for the null terminator. For example,</p>\n\n<pre><code>char *input = malloc(257);\n</code></pre>\n\n<p>would allow you to read in strings up to 256 characters long.</p>\n"}, {"comments": [{"owner": {"reputation": 8216, "user_id": 4569307, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QZ5S5.jpg?s=128&g=1", "display_name": "BaseZen", "link": "https://stackoverflow.com/users/4569307/basezen"}, "edited": false, "score": 1, "creation_date": 1424907491, "post_id": 28731835, "comment_id": 45749720, "body": "Technically my answer&#39;s wrong because I misread: <code>input = &quot;\\0&quot;</code> as: <code>strcpy(input, &quot;&quot;);</code> but if the incorrect assignment is removed, you&#39;ll still run into the bug provided by my analysis."}, {"owner": {"reputation": 845, "user_id": 4101319, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/JselF.jpg?s=128&g=1", "display_name": "Joseph Seung Jae Dollar", "link": "https://stackoverflow.com/users/4101319/joseph-seung-jae-dollar"}, "edited": false, "score": 0, "creation_date": 1424907500, "post_id": 28731835, "comment_id": 45749723, "body": "Thanks a ton, it&#39;s hard trying to understand all these coming from Python background."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1424907512, "post_id": 28731835, "comment_id": 45749731, "body": "So fix your answer, no?"}, {"owner": {"reputation": 8216, "user_id": 4569307, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QZ5S5.jpg?s=128&g=1", "display_name": "BaseZen", "link": "https://stackoverflow.com/users/4569307/basezen"}, "edited": false, "score": 0, "creation_date": 1424907963, "post_id": 28731835, "comment_id": 45749852, "body": "Fixed and for reference on overruns: <a href=\"http://en.wikipedia.org/wiki/Scanf_format_string#Security\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Scanf_format_string#Security</a>"}, {"owner": {"reputation": 8216, "user_id": 4569307, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QZ5S5.jpg?s=128&g=1", "display_name": "BaseZen", "link": "https://stackoverflow.com/users/4569307/basezen"}, "edited": false, "score": 0, "creation_date": 1424908188, "post_id": 28731835, "comment_id": 45749928, "body": "Perhaps we&#39;re quibbling about semantics, but how so? Seems pretty straightforward."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1424908331, "post_id": 28731835, "comment_id": 45749975, "body": "Because the amount allocated has nothing to do with the error. The problem is writing to the location of a string literal."}, {"owner": {"reputation": 8216, "user_id": 4569307, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QZ5S5.jpg?s=128&g=1", "display_name": "BaseZen", "link": "https://stackoverflow.com/users/4569307/basezen"}, "edited": false, "score": 0, "creation_date": 1424908573, "post_id": 28731835, "comment_id": 45750054, "body": "The statements in the first paragraph are true, and helpful. So I might say tangential, but not wrong. Will rearrange."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1424908764, "post_id": 28731835, "comment_id": 45750122, "body": "THe statements in the first paragraph are wrong, and unhelpful, and may have confused OP and whoever up-voted your answer. You claim the allocated buffer is being overrun. It isn&#39;t, by any stretch of the imagination."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424909711, "post_id": 28731835, "comment_id": 45750387, "body": "There is point in trying to initialize it, because then if <code>scanf</code> fails and the code goes on to reads the contents of the buffer, it will see the previously-set default instead of accessing indeterminate values."}, {"owner": {"reputation": 6085, "user_id": 3940749, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2720eedf618e62e66422950fed961041?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Redway", "link": "https://stackoverflow.com/users/3940749/sam-redway"}, "edited": false, "score": 0, "creation_date": 1424909752, "post_id": 28731835, "comment_id": 45750400, "body": "As Juan said your answer is misleading. He is assigning the char pointer to a string literal and causing a memory leak then trying to write to read only memory. Actually I tend to wonder why he even needs to dynamically allocate memory within this scope. Best avoided if unnecessary.  And advise using fgets rather than scanf. .. its much simpler to avoid problems that way."}], "tags": [], "owner": {"reputation": 8216, "user_id": 4569307, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QZ5S5.jpg?s=128&g=1", "display_name": "BaseZen", "link": "https://stackoverflow.com/users/4569307/basezen"}, "is_accepted": false, "score": 0, "last_activity_date": 1424908831, "last_edit_date": 1424908831, "creation_date": 1424907349, "answer_id": 28731835, "question_id": 28731769, "link": "https://stackoverflow.com/questions/28731769/bus-error-caused-while-reading-in-a-string/28731835#28731835", "title": "Bus error caused while reading in a string", "body": "<p>The immediate problem, (thanks to another answer) is that you're initializing <code>input</code> wrong, by pointing it at read-only data, then later trying to write to it via <code>scanf</code>. (Yes, even the lowly literal \"\" is a pointer to a memory area where the empty string is stored.)</p>\n\n<p>The next problem is semantic: there's no point in <em>trying</em> to initialize it when <code>scanf()</code> will soon overwrite whatever you put there. But if you <em>wanted</em> to, a valid way is input[0] = '\\0', which would be appropriate for, say, a loop using <code>strcat()</code>.</p>\n\n<p>And finally, waiting in the wings to bite you is a deeper issue: You need to understand <code>malloc()</code> and <code>sizeof()</code> better. You're only allocating enough space for one character, then overrunning the 1-char buffer with a string of arbitrary length (up to the maximum that your terminal will allow on a line.)</p>\n\n<p>A rough cut would be to allocate far more, say 256 chars, than you'll ever need, but <code>scanf</code> is an awful function for this reason -- makes buffer overruns painfully easy especially for novices. I'll leave it to others to suggest alternatives.</p>\n\n<p>Interestingly, the <em>type</em> of crash can indicate something about what you did wrong. A Bus error often relates to modifying read-only memory (which is still a mapped page), such as you're trying to do, but a Segmentation Violation often indicates overrunning a buffer of a writable memory range, by hitting an unmapped page.</p>\n"}, {"tags": [], "owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "is_accepted": false, "score": 0, "last_activity_date": 1424909787, "creation_date": 1424909787, "answer_id": 28732276, "question_id": 28731769, "link": "https://stackoverflow.com/questions/28731769/bus-error-caused-while-reading-in-a-string/28732276#28732276", "title": "Bus error caused while reading in a string", "body": "<pre><code>input = \"\\0\";\n</code></pre>\n\n<p>is wrong.</p>\n\n<p><strong>'input' is pointer, not memory.</strong></p>\n\n<p><strong>\"\\0\" is string, not char.</strong></p>\n\n<p>You assigning pointer to a new value which points to a segment of memory which holds constants because \"\\0\" is constant string literal.</p>\n\n<p>Now when you are trying to modify this constant memory, you are getting bus error which is expected.</p>\n\n<p>In your case i assume you wanted to initialize 'input' with empty string.\nUse</p>\n\n<pre><code>input[0]='\\0';\n</code></pre>\n\n<p>note single quotes around 0.</p>\n\n<p>Next problem is malloc:</p>\n\n<pre><code>char *input = (char *)malloc(sizeof(char));\n</code></pre>\n\n<p>you are allocating memory for 1 character only.</p>\n\n<p>When user will enter \"0 0 0\" which is 5 characters + zero you will get buffer overflow and will probably corrupt some innocent variable.</p>\n\n<p>Allocate enough memory upfront to store all user input. Usual values are 256, 8192 bytes it doesn't matter.</p>\n\n<p>Then, </p>\n\n<pre><code>scanf(\"%s\\n\", input);\n</code></pre>\n\n<p>may still overrun the buffer if user enters alot of text. Use fgets(buf, limit(like 8192), stdin), that would be safer.</p>\n"}], "owner": {"reputation": 845, "user_id": 4101319, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/JselF.jpg?s=128&g=1", "display_name": "Joseph Seung Jae Dollar", "link": "https://stackoverflow.com/users/4101319/joseph-seung-jae-dollar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 28731833, "answer_count": 3, "score": 0, "last_activity_date": 1424909787, "creation_date": 1424907041, "question_id": 28731769, "link": "https://stackoverflow.com/questions/28731769/bus-error-caused-while-reading-in-a-string", "title": "Bus error caused while reading in a string", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include &lt;stdio.h&gt;\r\n#include &lt;string.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n\r\nint main() {\r\n\tchar *input = (char *)malloc(sizeof(char));\r\n\tinput = \"\\0\";\r\n\r\n\twhile (1){\r\n\t\tscanf(\"%s\\n\", input);\r\n\r\n\t\tif (strcmp(input, \"0 0 0\") == 0) break;\r\n\r\n\t\tprintf(\"%s\\n\",input);\r\n\t}\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I'm trying to read in a string of integers until \"0 0 0\" is entered in.\nThe program spits out bus error as soon as it executes the scanf line, and I have no clue how to fix it.\nBelow is the error log.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>[1]    59443 bus error</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c", "unix", "stdin"], "comments": [{"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 1, "creation_date": 1424907701, "post_id": 28731746, "comment_id": 45749777, "body": "I&#39;m confused. What&#39;s your question, exactly? It looks like you figured everything out already. Is there something wrong with the <code>scanf</code> call you have? My only suggestion is to add newlines (<code>\\n</code>) to each of your <code>printf</code> calls."}, {"owner": {"reputation": 336, "user_id": 3661591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/66aa38864c58111b5a03f6e6512be08c?s=128&d=identicon&r=PG&f=1", "display_name": "Leo103", "link": "https://stackoverflow.com/users/3661591/leo103"}, "reply_to_user": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1424958288, "post_id": 28731746, "comment_id": 45770703, "body": "The program showed a &quot;Wall time-limit exceeded&quot; on their checker. So how can I break the &#39;for&#39; loop when it&#39;s EOF (of stdin) ?"}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 3661591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/66aa38864c58111b5a03f6e6512be08c?s=128&d=identicon&r=PG&f=1", "display_name": "Leo103", "link": "https://stackoverflow.com/users/3661591/leo103"}, "edited": false, "score": 0, "creation_date": 1425118777, "post_id": 28747013, "comment_id": 45838150, "body": "maybe <code>while (scanf(&quot;%d&quot;, &amp;N) !=EOF)</code> is better?"}, {"owner": {"reputation": 336, "user_id": 3661591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/66aa38864c58111b5a03f6e6512be08c?s=128&d=identicon&r=PG&f=1", "display_name": "Leo103", "link": "https://stackoverflow.com/users/3661591/leo103"}, "edited": false, "score": 0, "creation_date": 1425119313, "post_id": 28747013, "comment_id": 45838307, "body": "and does this do the same: <code>while( feof(stdin)!=EOF) (scanf(&quot;%d&quot;, &amp;N);</code> ?"}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 1, "last_activity_date": 1424966296, "creation_date": 1424966296, "answer_id": 28747013, "question_id": 28731746, "link": "https://stackoverflow.com/questions/28731746/how-to-read-numbers-from-stdin-until-end/28747013#28747013", "title": "How to read numbers from stdin until end", "body": "<p>Check the return value of <code>scanf</code>. It returns the number of items successfully matched, so if it doesn't return 1 then you're done.</p>\n\n<pre><code>while (scanf(\"%d\", &amp;N) == 1)\n    ;\n</code></pre>\n"}], "owner": {"reputation": 336, "user_id": 3661591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/66aa38864c58111b5a03f6e6512be08c?s=128&d=identicon&r=PG&f=1", "display_name": "Leo103", "link": "https://stackoverflow.com/users/3661591/leo103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1450, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424966296, "creation_date": 1424906923, "last_edit_date": 1424907515, "question_id": 28731746, "link": "https://stackoverflow.com/questions/28731746/how-to-read-numbers-from-stdin-until-end", "title": "How to read numbers from stdin until end", "body": "<p>Where there is <code>for(;;)</code> I need something to read from stdin and save to <code>N</code>.\nSomething with <code>read(stdin,N,sizeof(float))</code> and <code>while(s!=EOF)</code> <code>s=getc(stdin)</code> maybe?  <em>I'm assuming a list of numbers is saved on stdin separated end of lines</em></p>\n\n<p>The question was something like:</p>\n\n<blockquote>\n  <p>Your program must print its pid to standard output. Then it should start to read values of N from standard input until the end of the file. After receiving a signal (SIGUSR1) your program should subtract (then multiply, then divide, then subtract) the value of N from sum (first value of sum=0) as a cycle. After receiving SIGUSR2 your program should print the current sum.</p>\n</blockquote>\n\n<p>How I interpreted the question and attempt:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n\nfloat N,sum=0;\nint count=0;\n\nvoid handler(int s){\n    count++;\n    if (s==SIGUSR1){\n        if (count==1){\n            sum-=N;\n        }   \n        if (count==2){\n            sum*=N;\n        }\n        if (count==3){\n            sum/=N;\n        }\n        if (count==4){\n            sum+=N;\n            count==0;\n        }\n\n    }\n\n    else if (s==SIGUSR2){\n        printf(\"sum=%d\",sum);\n    }\n}\n\n\nint main(){\n    pid_t pid=getpid();\n    signal(SIGUSR1,handler);\n    signal(SIGUSR2,handler);\n    printf(\"%d\",pid);\n    fflush(stdout); \n\n    for(;;)\n    scanf(\"%d\",&amp;N);\n\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "echo"], "comments": [{"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1424906675, "post_id": 28731612, "comment_id": 45749426, "body": "I think you want to use <code>|</code> (or) rather than <code>&amp;&amp;</code> (and) in your second while loop."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424907003, "post_id": 28731612, "comment_id": 45749545, "body": "Properly indented code would make it easier to see your loop structure and fix it."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4607950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c1a5eca866284767c7373bdcd6efc6f?s=128&d=identicon&r=PG&f=1", "display_name": "Sosa", "link": "https://stackoverflow.com/users/4607950/sosa"}, "edited": false, "score": 0, "creation_date": 1424916496, "post_id": 28731723, "comment_id": 45752144, "body": "Ok im going to make these changes and try to alter the loop conditon, thanks a lot!"}], "tags": [], "owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "is_accepted": true, "score": 2, "last_activity_date": 1424907102, "last_edit_date": 1424907102, "creation_date": 1424906794, "answer_id": 28731723, "question_id": 28731612, "link": "https://stackoverflow.com/questions/28731612/how-to-echo-user-input-and-skip-over-punctuation-and-spaces-language-c/28731723#28731723", "title": "How to echo user input and skip over punctuation and spaces? (Language C)", "body": "<blockquote>\n  <p><code>//gets incoming char and outputs it</code></p>\n</blockquote>\n\n<p>This comment says it all. Your <code>do</code> loop outputs the character before the <code>while</code> test checks it. The <code>while</code> only stops when the input character is a punctuation mark, but by that time the character has already been sent. And then the outer <code>while (1)</code> loop causes the whole thing to happen all over again.</p>\n\n<p>The way to fix the issue is to test the character <em>before</em> sending it to output. For example:</p>\n\n<pre><code>while(1) {\n    phrase[i] = getchar();\n    if (isPunctuation(phrase[i]) == false) {\n        putchar(phrase[i]);\n    }\n    else {\n        printf(\"\\n\");\n        i++;\n    }\n}\n</code></pre>\n\n<p>Note that you don't <em>really</em> want the <code>while (1)</code> since that means the loop will continue forever. After the 500th character, you'll exceed the capacity of the <code>phrase</code> array and start writing into memory that doesn't belong to you. I'll leave it to you to think up a more reasonable loop condition.</p>\n"}], "owner": {"reputation": 39, "user_id": 4607950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1c1a5eca866284767c7373bdcd6efc6f?s=128&d=identicon&r=PG&f=1", "display_name": "Sosa", "link": "https://stackoverflow.com/users/4607950/sosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 28731723, "answer_count": 1, "score": 0, "last_activity_date": 1424907102, "creation_date": 1424906321, "last_edit_date": 1424906440, "question_id": 28731612, "link": "https://stackoverflow.com/questions/28731612/how-to-echo-user-input-and-skip-over-punctuation-and-spaces-language-c", "title": "How to echo user input and skip over punctuation and spaces? (Language C)", "body": "<p>I've already got the part of my program that echoes user input to work, but my code seems to ignore the while line where I specify not to echo the characters in the array if they are spaces or punctuation. My code is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n int main()\n {\n    int word = 0, punct = 0;\n    int i = 0;\n    char phrase[500];\n    printf(\"Enter any phrase.\");\n    while (1)\n    {\n        do\n        {\n           phrase[i] = getchar(); //gets incoming char and outputs it\n           putchar(phrase[i]);\n        } while (phrase[i] != ' ' &amp;&amp; phrase[i] != '.' &amp;&amp; phrase[i] != '!' &amp;&amp; phrase[i] != '@' &amp;&amp; phrase[i] != '#' &amp;&amp; phrase[i] != '$' &amp;&amp; phrase[i] != '%' &amp;&amp; phrase[i] != '%' &amp;&amp; phrase[i] != '^' &amp;&amp; phrase[i] != '&amp;' &amp;&amp; phrase[i] != '*' &amp;&amp; phrase[i] != '(' &amp;&amp; phrase[i] != ')' &amp;&amp; phrase[i] != '-' &amp;&amp; phrase[i] != '_' &amp;&amp; phrase[i] != '=' &amp;&amp; phrase[i] != '+' &amp;&amp; phrase[i] != '\\\\' &amp;&amp; phrase[i] != '|' &amp;&amp; phrase[i] != '{' &amp;&amp; phrase[i] != '}' &amp;&amp; phrase[i] != '[' &amp;&amp; phrase[i] != ']' &amp;&amp; phrase[i] != ':' &amp;&amp; phrase[i] != ';' &amp;&amp; phrase[i] != '\\'' &amp;&amp; phrase[i] != '\\\"' &amp;&amp; phrase[i] != '&lt;' &amp;&amp; phrase[i] != '&gt;' &amp;&amp; phrase[i] != ',' &amp;&amp; phrase[i] != '?' &amp;&amp; phrase[i] != '/'); //prevents punctuation and spaces from bein outputted\n            printf(\"\\n\");\n            i++;\n        }\n    }\n</code></pre>\n\n<p>When I run the program the user input is all echoed, including the punctuation and spaces, what exactly is wrong and how do I make it so that the code outputs everything char by char and skip over the punctuation and spaces? And how would I keep the loop going after punctuation is skipped?</p>\n"}, {"tags": ["c", "linux", "system"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1424908624, "post_id": 28731589, "comment_id": 45750078, "body": "And your question is?"}], "answers": [{"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 0, "last_activity_date": 1424912741, "last_edit_date": 1424912741, "creation_date": 1424912192, "answer_id": 28732659, "question_id": 28731589, "link": "https://stackoverflow.com/questions/28731589/nonblocking-code-in-unix/28732659#28732659", "title": "Nonblocking code in Unix", "body": "<p>You can use select() to determine when STDIN_FILENO has more bytes to read, like this:</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/select.h&gt;\n\nvoid set_fl(int fd, int flags);\n\nchar fullBuf[1024] = \"\";  // initialized to an empty string, so we can strncat() to it below\n\nint main()\n{\n    set_fl(STDIN_FILENO, O_NONBLOCK); //code for nonblocking\n\n    while(1)\n    {\n       fd_set inFDs;\n       FD_SET(STDIN_FILENO, &amp;inFDs);\n\n       int maxFD = STDIN_FILENO;  /* set this to the maximum of all fd's in the inFDs set */\n       if (select(maxFD+1, &amp;inFDs, NULL, NULL, NULL) &gt;= 0)  /* select() won't return the user has entered a line of text */\n       {\n          char buf[128];\n          memset(buf, 0, sizeof(buf));\n\n          int noread = read(0, buf, sizeof(buf));\n          if (noread &lt; 0)\n          {\n             printf(\"Error reading from stdin!\\n\");\n             break;\n          }\n\n          printf(\"read %i bytes\\n\", noread);\n\n          strncat(fullBuf, buf, sizeof(fullBuf)-strlen(fullBuf)-1);\n\n          if ((strchr(buf, '\\n'))||(strchr(buf, '\\r'))) break;  /** We'll stop gathering input after one line */\n       }\n    }\n\n    printf(\"INPUT: %s\\n\", fullBuf);\n\n    return 0;\n}\n\nvoid set_fl(int fd, int flags)\n{\n    int val;\n\n    if ((val = fcntl(fd, F_GETFL, 0)) &lt; 0)\n            printf(\"ERROR: %s\\n\", \"fcntl F_GETFL error\");\n\n    val |= flags;     //changes the bit\n\n    if (fcntl(fd, F_SETFL, val) &lt; 0)\n            printf(\"ERROR: %s\\n\", \"fcntl F_SETFL error\");\n}\n</code></pre>\n\n<p>Note that this is more complex that just using blocking reads, but doing it this way does have an advantage in that you can you pass a pointer to a non-NULL timeval struct as the last argument to select(), to implement a timeout.</p>\n"}], "owner": {"reputation": 1031, "user_id": 4595807, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H_5g8j4ZKcU/AAAAAAAAAAI/AAAAAAAAAWY/VgPt7U-6hK8/photo.jpg?sz=128", "display_name": "oya163", "link": "https://stackoverflow.com/users/4595807/oya163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1424912741, "creation_date": 1424906243, "last_edit_date": 1424912359, "question_id": 28731589, "link": "https://stackoverflow.com/questions/28731589/nonblocking-code-in-unix", "title": "Nonblocking code in Unix", "body": "<p>How to give an input to nonblocking code in unix ?\nThe code is as follows:</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid set_fl(int fd, int flags);\n\nchar buf[10];\n\nint main()\n{\n    int noread;\n\n    set_fl(STDIN_FILENO, O_NONBLOCK); //code for nonblocking\n    set_fl(0, O_NONBLOCK);            //code for nonblocking\n    noread = read(0, buf, sizeof(buf));\n\n    printf(\"INPUT: %s\\n\", buf); \n\n    return 0;\n}\n\nvoid set_fl(int fd, int flags)\n{\n    int val;\n\n    if ((val = fcntl(fd, F_GETFL, 0)) &lt; 0)\n            printf(\"ERROR: %s\\n\", \"fcntl F_GETFL error\");\n\n    val |= flags;     //changes the bit \n\n    if (fcntl(fd, F_SETFL, val) &lt; 0)\n            printf(\"ERROR: %s\\n\", \"fcntl F_SETFL error\");\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1424905776, "post_id": 28731372, "comment_id": 45749042, "body": "Actually, you are dereferencing it twice through the use of the <code>[]</code> operator. Remember that <code>a[b]</code> is <i>defined</i> to be equivalent to <code>*(a+b)</code>, so when you write <code>mat[1][1]</code> you are doing <code>*(*(mat+1)+1)</code>, which, as you see, is dereferencing <code>mat</code> twice, getting from <code>int **</code> to <code>int</code>."}, {"owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1424906020, "post_id": 28731372, "comment_id": 45749144, "body": "@MatteoItalia -- you should consider posting that as an answer rather than a comment."}], "answers": [{"comments": [{"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "edited": false, "score": 0, "creation_date": 1424906304, "post_id": 28731482, "comment_id": 45749276, "body": "Thanks for the answer!"}], "tags": [], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": false, "score": 1, "last_activity_date": 1424905751, "creation_date": 1424905751, "answer_id": 28731482, "question_id": 28731372, "link": "https://stackoverflow.com/questions/28731372/why-is-my-pointer-giving-back-value-at-address-directly/28731482#28731482", "title": "Why is my pointer giving back value at address directly?", "body": "<p><code>A.matrix</code> is a pointer to a 2 pointers, which each point to 2 ints.<br>\n<code>A.matrix[1]</code> gets the second of those pointers - a pointer to 2 ints.<br>\n<code>A.matrix[1][1]</code> gets the second of those ints.</p>\n"}, {"comments": [{"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "edited": false, "score": 0, "creation_date": 1424906227, "post_id": 28731488, "comment_id": 45749233, "body": "in your code <code>int *p = array;</code> should it not instead be <code>int *p = &amp;array;</code>? And thanks for the explanation!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1424905768, "creation_date": 1424905768, "answer_id": 28731488, "question_id": 28731372, "link": "https://stackoverflow.com/questions/28731372/why-is-my-pointer-giving-back-value-at-address-directly/28731488#28731488", "title": "Why is my pointer giving back value at address directly?", "body": "<p>When you use:</p>\n\n<pre><code>int i;\nint* p = &amp;i;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>int* p = malloc(sizeof(int));\n</code></pre>\n\n<p><code>p</code> points to a single integer.</p>\n\n<p>When you use:</p>\n\n<pre><code>int array[10];\nint *p = array;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int *p = malloc(sizeof(int)*10);\n</code></pre>\n\n<p><code>p</code> points to an array of 10 integers.</p>\n\n<p>Similarly, a variable declared with:</p>\n\n<pre><code>int** mat;\n</code></pre>\n\n<p>can point to one <code>int*</code> or an array of <code>int*</code>s.</p>\n\n<p>In your case, <code>mat</code> points to an array of 2 <code>int*</code>, each of which points to an array of 2 <code>int</code>s.</p>\n\n<p>That makes use of <code>mat[1][1]</code> perfectly valid code.</p>\n"}], "owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 28731488, "answer_count": 2, "score": 0, "last_activity_date": 1424905768, "creation_date": 1424905353, "question_id": 28731372, "link": "https://stackoverflow.com/questions/28731372/why-is-my-pointer-giving-back-value-at-address-directly", "title": "Why is my pointer giving back value at address directly?", "body": "<p>Here is my code:</p>\n\n<pre><code>typedef struct {\n    int** matrix;\n    int rows;\n    int cols;\n}intMat;\nintMat create_intMat(int rows,int cols,int matrix[rows][cols]){\n        intMat A;\n        A.rows = rows;\n        A.cols = cols;\n        int** mat;\n        mat = malloc(A.rows*sizeof(int*)); // Pointer for matrix rows\n        for(int i=0;i&lt;A.rows;i++) mat[i] = malloc(A.cols*sizeof(int)); // Pointer of each matrix row to a matrix column\n        for (int i=0;i&lt;A.rows;i++){\n            for (int j=0;j&lt;A.cols;j++){\n                mat[i][j]=matrix[i][j];\n            }\n        }\n        A.matrix = mat;\n        return A;\n}\nint main() {\n\n        int mat[2][2] = {{1,2},{3,4}};\n        intMat A;\n        A = create_intMat(2,2,mat);\n\n        printf(\"%d\\n\",A.matrix[1][1]);\n\n        return 0;\n}\n</code></pre>\n\n<p>I'm a beginner to pointers and got the pointer part of the code from another forum. I don't get it, though. int** mat is a pointer to a pointer to an int, so if I call it as is then it should give me back gibberish address, not the int being pointed to. However, the printf statement returns 4, which is the value of the int being pointed to! How come this is happening?</p>\n"}, {"tags": ["c", "debugging"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1424905061, "post_id": 28731257, "comment_id": 45748756, "body": "I assume that you meant to compile with the <code>-c</code> option, and that <code>main</code> is in another file."}, {"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1424905284, "post_id": 28731257, "comment_id": 45748846, "body": "You have multiple accounts to ask same question  <a href=\"http://stackoverflow.com/questions/28729505\">stackoverflow.com/questions/28729505</a>"}, {"owner": {"reputation": 3, "user_id": 4608000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360df1aaa0e11c59407e5142b844f42e?s=128&d=identicon&r=PG&f=1", "display_name": "VarunR", "link": "https://stackoverflow.com/users/4608000/varunr"}, "edited": false, "score": 0, "creation_date": 1424905712, "post_id": 28731257, "comment_id": 45749013, "body": "I need an answer quickly and I wasnt being allowed to ask again.  I am new here and I wasnt able to figure out wat to do. my previous Question went into hold and I dont know how to remove it. I deleted the previous question."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4608000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360df1aaa0e11c59407e5142b844f42e?s=128&d=identicon&r=PG&f=1", "display_name": "VarunR", "link": "https://stackoverflow.com/users/4608000/varunr"}, "edited": false, "score": 0, "creation_date": 1424905528, "post_id": 28731337, "comment_id": 45748944, "body": "Could you give me tje difference of when I define &#39;a&#39; as a stack variable and change it to short foo(short a) to short foo()??   What is the difference between the two initializations??"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 3, "user_id": 4608000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360df1aaa0e11c59407e5142b844f42e?s=128&d=identicon&r=PG&f=1", "display_name": "VarunR", "link": "https://stackoverflow.com/users/4608000/varunr"}, "edited": false, "score": 0, "creation_date": 1424905903, "post_id": 28731337, "comment_id": 45749101, "body": "<code>a</code> in <code>short foo(short a)</code> is a function parameter, so that calling <code>foo(10)</code> will enter <code>foo</code> with <code>a</code> set to <code>10</code>. If you declare <code>foo</code> as <code>short foo()</code>, it will be callable as <code>foo()</code> instead (without a parameter), and if you declare <code>a</code> locally in <code>foo</code>, it will have whatever value you give it there (or an unspecified one, if you don&#39;t give it one). But what does that have to do with your question about the linker error?"}, {"owner": {"reputation": 3, "user_id": 4608000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360df1aaa0e11c59407e5142b844f42e?s=128&d=identicon&r=PG&f=1", "display_name": "VarunR", "link": "https://stackoverflow.com/users/4608000/varunr"}, "edited": false, "score": 0, "creation_date": 1424907269, "post_id": 28731337, "comment_id": 45749627, "body": "I was trying to compare thee two codes by running both separately to understand how they were being compiled."}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 3, "last_activity_date": 1424905230, "creation_date": 1424905230, "answer_id": 28731337, "question_id": 28731257, "link": "https://stackoverflow.com/questions/28731257/compiler-error-in-c-code-that-i-cannot-understand/28731337#28731337", "title": "Compiler error in C code that I cannot understand", "body": "<p>This is not a compiler error but a linker error. The code you showed is not broken, it is incomplete. The message</p>\n\n<pre><code>undefined reference to `main'\n</code></pre>\n\n<p>tells you that you have not defined a <code>main</code> function, which is needed as the starting point of the program. Add</p>\n\n<pre><code>int main(void) {\n  // code here that is supposed to run when the program is executed\n}\n</code></pre>\n\n<p>to the code.</p>\n"}], "owner": {"reputation": 3, "user_id": 4608000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360df1aaa0e11c59407e5142b844f42e?s=128&d=identicon&r=PG&f=1", "display_name": "VarunR", "link": "https://stackoverflow.com/users/4608000/varunr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "closed_date": 1424905685, "answer_count": 1, "score": -2, "last_activity_date": 1424905230, "creation_date": 1424904889, "question_id": 28731257, "link": "https://stackoverflow.com/questions/28731257/compiler-error-in-c-code-that-i-cannot-understand", "closed_reason": "Duplicate", "title": "Compiler error in C code that I cannot understand", "body": "<p>I wrote this code:</p>\n\n<pre><code>short foo(short a)\n{\nshort b,c;\nb=10;\n\nc = a + b;\n\nreturn c; \n}\n</code></pre>\n\n<p>I am getting a compiler error as : </p>\n\n<pre><code>usr/lib/gcc/x86_64-redhat-linux/4.9.2/../../../../lib64/crt1.o: In function `_start':                                                                                                                        \n(.text+0x20): undefined reference to `main'                                                                                                                                                                   \ncollect2: error: ld returned 1 exit status  \n</code></pre>\n\n<p>Could where I am going wrong?</p>\n\n<p>Does a remain indeterminate here?  I am little new to C programming and so please excuse my ignorance of a few obvious things.</p>\n"}, {"tags": ["c", "file", "directory", "subdirectory"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1424905187, "post_id": 28731159, "comment_id": 45748813, "body": "You seem to be reinventing the wheel here. Why not try using an existing utility like <code>find</code>? For example, <code>find . -name &quot;*.pdf&quot; -print</code> should give you a hierarchical list of all the PDF files in the current directory and its subdirectories. This could be piped to a C program, or run from within C via a system call."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1424905243, "post_id": 28731159, "comment_id": 45748832, "body": "Which OS are you using?"}, {"owner": {"reputation": 169, "user_id": 3622094, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a69d8bbdea0cc758f6c80704e468652e?s=128&d=identicon&r=PG&f=1", "display_name": "Dounchan", "link": "https://stackoverflow.com/users/3622094/dounchan"}, "edited": false, "score": 0, "creation_date": 1424906556, "post_id": 28731159, "comment_id": 45749378, "body": "I also have Cygwin terminal"}, {"owner": {"reputation": 169, "user_id": 3622094, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a69d8bbdea0cc758f6c80704e468652e?s=128&d=identicon&r=PG&f=1", "display_name": "Dounchan", "link": "https://stackoverflow.com/users/3622094/dounchan"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1424907157, "post_id": 28731159, "comment_id": 45749596, "body": "@user3386109 Windows ...I have tried <code>find</code> command, but no option <code>-print</code> there"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1424907572, "post_id": 28731159, "comment_id": 45749749, "body": "I think squeamish was assuming linux. On windows, I&#39;ve used the <code>_findfirst</code> <code>_findnext</code> and <code>_findclose</code> functions to scan directories."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1424923970, "post_id": 28731159, "comment_id": 45753915, "body": "From the command line you can use attrib *.pdf /s &gt;list.txt to generate a text file. For a program do to this you may want to implement a recursive function with two loops. The first loop handles all the files, the second loop handles all the directories using recursion. This method groups all the files that belong to a directory together in a listing, before dealing with any sub-directories in a directory. This sequence is commonly used by backup programs."}, {"owner": {"reputation": 169, "user_id": 3622094, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a69d8bbdea0cc758f6c80704e468652e?s=128&d=identicon&r=PG&f=1", "display_name": "Dounchan", "link": "https://stackoverflow.com/users/3622094/dounchan"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1424943674, "post_id": 28731159, "comment_id": 45761560, "body": "@rcgldr <code>attrib</code> served me well. Thanks"}], "owner": {"reputation": 169, "user_id": 3622094, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a69d8bbdea0cc758f6c80704e468652e?s=128&d=identicon&r=PG&f=1", "display_name": "Dounchan", "link": "https://stackoverflow.com/users/3622094/dounchan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424904465, "creation_date": 1424904465, "question_id": 28731159, "link": "https://stackoverflow.com/questions/28731159/how-to-list-names-of-files-in-all-directories-and-subdirectories-in-txt-file-in", "title": "How to list names of files in all directories and subdirectories in txt file in C?", "body": "<p>I would like to list all PDF files (CAD drawings) placed in directories and subdirectories corresponding with place in 3D model assembly also retaining information about level of each subdirectory. Drawing tree looks something like this (\"[A]\" states for assembly drawing\"  - level is the same as that of parent directory):</p>\n\n<pre><code>DIR100\n  DIR101\n  DIR102\n    [A]DRW102\n    DRW1021\n    DRW1022\n    ...\n  DIR103\n    [A]DRW103\n    DRW1031\n    DRW1032\n    ...\n  ...\n  [A]DRW100\n  DRW1001\n  DRW1002\n</code></pre>\n\n<p>So after executing a program, txt file should look like this:</p>\n\n<pre><code>LVL1 DIR100\n  LVL2 DIR101\n  LVL2 DIR102\n    LVL2 [A]DRW102\n    LVL3 DRW1021\nLVL3 DRW1022\n    ...\n</code></pre>\n\n<p>This is the first step for the project. As soon as I have list of files, I am able to automatically rename them.</p>\n"}, {"tags": ["c", "cygwin", "file-permissions"], "comments": [{"owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 0, "creation_date": 1424903406, "post_id": 28730870, "comment_id": 45747967, "body": "Did you try <a href=\"http://stackoverflow.com/questions/7716357/usr-bin-env-bad-interpreter-permission-denied-how-to-change-the-fstab\">this solution</a>?"}, {"owner": {"reputation": 93, "user_id": 3052160, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06891645c459ea6e64db53f01f445cd1?s=128&d=identicon&r=PG&f=1", "display_name": "FancyPants", "link": "https://stackoverflow.com/users/3052160/fancypants"}, "reply_to_user": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 0, "creation_date": 1424903568, "post_id": 28730870, "comment_id": 45748045, "body": "Yes I did, fruitless"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 0, "creation_date": 1424903661, "post_id": 28730870, "comment_id": 45748094, "body": "@DanielKleinstein: That&#39;s unlikely to help if <code>&#47;usr&#47;bin&#47;python</code> itself is not executable, which seems to be the problem here."}, {"owner": {"reputation": 93, "user_id": 3052160, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06891645c459ea6e64db53f01f445cd1?s=128&d=identicon&r=PG&f=1", "display_name": "FancyPants", "link": "https://stackoverflow.com/users/3052160/fancypants"}, "edited": false, "score": 0, "creation_date": 1424903884, "post_id": 28730870, "comment_id": 45748192, "body": "I don&#39;t even know to what is it referring, The cygwin directory does not have the path specified."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3052160, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06891645c459ea6e64db53f01f445cd1?s=128&d=identicon&r=PG&f=1", "display_name": "FancyPants", "link": "https://stackoverflow.com/users/3052160/fancypants"}, "edited": false, "score": 0, "creation_date": 1424903621, "post_id": 28730943, "comment_id": 45748070, "body": "ls: cannot access /usr/bin/python.exe: No such file or directory. I have not been messing around with anything. Last week I reinstalled my OS and while installing cygwin i did not change anything. Why would i mess around with something unfamiliar to me?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 93, "user_id": 3052160, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06891645c459ea6e64db53f01f445cd1?s=128&d=identicon&r=PG&f=1", "display_name": "FancyPants", "link": "https://stackoverflow.com/users/3052160/fancypants"}, "edited": false, "score": 1, "creation_date": 1424903793, "post_id": 28730943, "comment_id": 45748151, "body": "That&#39;s not the error message I&#39;d expect if Python isn&#39;t installed. But as I recall Cygwin doesn&#39;t install Python by default. Run the Cygwin setup command (<code>setup-x86.exe</code> or <code>setup-x86_64.exe</code>, depending on which one you&#39;re using) and install (or reinstall) Python. (I&#39;m not saying <i>you&#39;d</i> mess around with something unfamiliar, but plenty of people do.)"}, {"owner": {"reputation": 93, "user_id": 3052160, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06891645c459ea6e64db53f01f445cd1?s=128&d=identicon&r=PG&f=1", "display_name": "FancyPants", "link": "https://stackoverflow.com/users/3052160/fancypants"}, "edited": false, "score": 0, "creation_date": 1424903991, "post_id": 28730943, "comment_id": 45748243, "body": "I do not have python on my laptop and I did not install anything related to python. EDIT: while reinstalling found some python related packages"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 93, "user_id": 3052160, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06891645c459ea6e64db53f01f445cd1?s=128&d=identicon&r=PG&f=1", "display_name": "FancyPants", "link": "https://stackoverflow.com/users/3052160/fancypants"}, "edited": false, "score": 0, "creation_date": 1424904631, "post_id": 28730943, "comment_id": 45748565, "body": "@FancyPants: Well, if you don&#39;t have Python on your laptop, and <code>.&#47;cu&#47;cu-check-regressions</code> is a Python script, that would certainly explain why you can&#39;t run it."}, {"owner": {"reputation": 93, "user_id": 3052160, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06891645c459ea6e64db53f01f445cd1?s=128&d=identicon&r=PG&f=1", "display_name": "FancyPants", "link": "https://stackoverflow.com/users/3052160/fancypants"}, "edited": false, "score": 0, "creation_date": 1424905612, "post_id": 28730943, "comment_id": 45748965, "body": "Might be.  I reinstalled it fully and it worked. Thank you for your help"}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 3, "last_activity_date": 1424903922, "last_edit_date": 1424903922, "creation_date": 1424903535, "answer_id": 28730943, "question_id": 28730870, "link": "https://stackoverflow.com/questions/28730870/cygwin-permission-denied/28730943#28730943", "title": "cygwin &quot;Permission denied&quot;", "body": "<p>The error message indicates that <code>/usr/bin/python</code>, the Python interpreter, is not executable.</p>\n\n<p>Run</p>\n\n<pre><code>ls -l /usr/bin/python\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ls -l /usr/bin/python.exe\n</code></pre>\n\n<p>to confirm this.</p>\n\n<p>Running</p>\n\n<pre><code>chmod +x /usr/bin/python\n</code></pre>\n\n<p>is likely to fix the immediate problem. But the question remains: Why is <code>/usr/bin/python</code> not executable? Execution permission is set when it's installed. Have you been messing around with the <code>/usr/bin</code> directory? Its contents are managed by Cygwin; there should rarely be any need to touch it.</p>\n\n<p>Based on your comment, it seems likely that Python just isn't installed (though that's not the error message I'd expect in that case). As I recall, Cygwin doesn't install Python by default. Re-run the installation command (<code>setup-x86.exe</code> or <code>setup-x86_64.exe</code>, depending on which one you're using) and install (or reinstall) the <code>python</code> package; I think it's under \"Interpreters\".</p>\n"}], "owner": {"reputation": 93, "user_id": 3052160, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06891645c459ea6e64db53f01f445cd1?s=128&d=identicon&r=PG&f=1", "display_name": "FancyPants", "link": "https://stackoverflow.com/users/3052160/fancypants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6797, "favorite_count": 1, "accepted_answer_id": 28730943, "answer_count": 1, "score": 1, "last_activity_date": 1424903922, "creation_date": 1424903263, "question_id": 28730870, "link": "https://stackoverflow.com/questions/28730870/cygwin-permission-denied", "title": "cygwin &quot;Permission denied&quot;", "body": "<p>Trying to launch a file</p>\n\n<pre><code>./cu/cu-check-regressions --help\n</code></pre>\n\n<p>Get this:</p>\n\n<pre><code>-bash: ./cu/cu-check-regressions: /usr/bin/python: bad interpreter: Permission denied\n</code></pre>\n\n<p>Already changed permission in properties>security my account has full control over the folder. Tried running cygwin as Administrator did not work as well. Googled the issue for the past two hours.</p>\n"}, {"tags": ["c", "linux", "ipc", "notify", "low-latency"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1424900159, "post_id": 28729965, "comment_id": 45746413, "body": "wouldn&#39;t polling be the opposite of what you want (ie. busy waiting)? Wouldn&#39;t you be less effective than <code>select</code> on that? Isn&#39;t that analogous to getting <code>shmget</code>, and the stuff you already mention, considering the man pages for the shm functionality explicitely tell you that tmpfs is a shmfs thing?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1424902897, "post_id": 28729965, "comment_id": 45747723, "body": "I&#39;m missing it.  Surely any mechanism for <i>inter-process</i> communication involves a context switch.  A message dispatched by (a context associated with) one process must be received in (a context associated with) a different process to effect IPC at all."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424903216, "post_id": 28729965, "comment_id": 45747879, "body": "@JohnBollinger: I think OP is reffering to mode switching: userland-kernel-userland, which he wants to avoid."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1424903991, "post_id": 28729965, "comment_id": 45748242, "body": "@MarcusM&#252;ller, I could buy that, but I&#39;m still missing how such a mechanism makes sense.  IPC inherently breaks process isolation.  If you can do that without ever entering kernel mode then you have a serious problem."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1424932048, "post_id": 28729965, "comment_id": 45756229, "body": "I know the kernel <i>is</i> responsible for any ipc since <i>it</i> knows the different addresses in the table. I guess my mind went the wrong way on this one.. It happens just once in a while in my design after all. Shame on me."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1424955059, "post_id": 28729965, "comment_id": 45768685, "body": "Not possible without busy waiting. You cannot tell the scheduler, living in the kernel, to make another process runnable without communicating with the kernel and incurring a context switch. So you&#39;re left with finding a mechanism that have the lowest latency - you might get even lower latency if you run your processes under one of the realtime schedulers though."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1424972111, "post_id": 28729965, "comment_id": 45779999, "body": "@nos : Thanks nos, yeah, I went the wrong path on this one."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 1, "creation_date": 1425122259, "post_id": 28729965, "comment_id": 45838978, "body": "&gt; very low latency ( &#181;s order of magnitude max or about) &lt; It took years for microkernel guys and required complete redisgn (take a closer look at L4 or L4-Linux) - see here: <a href=\"http://homes.cs.washington.edu/~bershad/590s/papers/towards-ukernels.pdf\" rel=\"nofollow noreferrer\">Towards Real Microkernels</a>. Don&#39;t expect that from general purpose OS like Linux."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1425123746, "post_id": 28729965, "comment_id": 45839376, "body": "@myaut: you are definitely right. Linux is not my man here. + 1"}], "answers": [{"comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1424968723, "post_id": 28742904, "comment_id": 45777839, "body": "You mean, <i>you have decided you cannot do so</i>. Just for giggles, I wrote a named pipe test program pair. On a stock Ubuntu 3.13.0-46-generic x86_64 kernel running on an Intel Core i5-4200U processor (a cheap HP laptop) using single-character messages, this yields a change notify latency of about 3.6&#181;s, median. (Measured a few hundred thousand roundtrips, i.e. notification pairs, of which half were under 7.2 &#181;s). <i>This is already well within the microsecond order of magnitude you specified</i>. So, your claim is therefore proven wrong. Or, are you just trolling?"}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1424971978, "post_id": 28742904, "comment_id": 45779922, "body": "@NominalAnimal: &quot;Trolling&quot; ? Seriously ? Which claim ?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1425065747, "post_id": 28742904, "comment_id": 45824225, "body": "Your problem statement was <i>&quot;I would like a very lightweight way to notify between two processes in userspace, without the context switch if possible, and a very low latency (&#181;s order of magnitude max or about)&quot;</i>. Even a trivial test code seems to fulfill the latency requirement, and as other commenters to the original question have mentioned, context switches cannot be avoided. Instead, you gave up, with a sweeping generalization stated as if it were a fact: <i>&quot;What I wish cannot be done in the unmodified gnu/linux&quot;</i>. That falsehood irks me. What is it, if not trolling? Just lying?"}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1425121140, "post_id": 28742904, "comment_id": 45838723, "body": "Nope. You are very despising with people trying to set things up, and that is <i>not</i> servicing you. The context is unavoidable. As I mentioned all the things I tried, you should have known that i am aware of the context switch thing. What i want is not possible with the linux kernel, except if i code a kernel module which I don&#39;t want because i want the userspace. So please, stop being sarcastic. My requirements cannot be met. And by the way, you should try relaxation. Irritation doesn&#39;t get anyone anywhere."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1425142457, "post_id": 28742904, "comment_id": 45844833, "body": "You misunderstand. Because you don&#39;t want to poll, you will have to have a blocking syscall to wait for a change notification. When a change arrives, the kernel has to wake up the blocking syscall. In other words, your own rules, not kernel design or anything else, make at least one context switch necessary -- regardless of which OS or kernel or kernel module you use; this is not Linux-specific. Context switch thing is irrelevant. What irks me is you claiming that this is impossible, when it is not. Even a trivial named pipe test program on a stock kernel yields &lt; 4us latencies here."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1425145607, "post_id": 28742904, "comment_id": 45845934, "body": "I ended up recreating a new kernel eventfd module anyway + atomics. Will try to turn it into a framework. It will still consume some cpu cycles but it enables to reduce the system call volume over multiple applications. A system call is so expensive. I will make some tests and report. But the more I look into the kernel, the more I find some places that are (relatively) slow and inefficient (linked lists..) due to the generic thing &quot;it has to work for everyone. In a sense, it is the way to go. But it all add up latency. Let&#39;s see if we can reach the nano order of magnitude."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1425145968, "post_id": 28742904, "comment_id": 45846051, "body": "By the way, bare metal programming is an alternative. But too huge of a project."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1425152563, "post_id": 28742904, "comment_id": 45848187, "body": "Using <code>fcntl()</code> file locks (unlocking used to notify the event so you can use <code>F_SETLKW</code> to block until the event occurs), seems to yield the smallest latencies (just under 1&#181;s between unrelated processes) here. Did you already rule this approach out? (I used two one-byte write locks, flip-flopping in sync; median period was about 1850 ns. It should be correct, but I haven&#39;t fully verified it. You&#39;ll probably want to use a more complicated locking scheme; it will have higher runtime cost and limit the event rate, but the latency of a single event should not increase.)"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1425181331, "post_id": 28742904, "comment_id": 45855106, "body": "Scratch that. I rewrote the test using three locks (so no risk of slippage), and with that, I get 5.960 &#181;s median latencies comparing <code>CLOCK_REALTIME</code> measurements on sender and receiver separately (unrelated processes, three-record <code>fcntl()</code> locks). The full notification cycle on the event sender was a stable 12.088 &#181;s median. However, I still think your claim <i>&quot;... cannot be done&quot;</i> is nonsense; just because you don&#39;t know how to do it (in a vanilla kernel), does not mean it is impossible. Hubris, you know?"}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1425206482, "post_id": 28742904, "comment_id": 45859970, "body": "Thanks God. Citius, Altius, Fortius. You are right that someday someone could tell me &quot;it is possible&quot;, but not right now in this context; It seems you don&#39;t know either how to make it possible because it <i>is</i> not possible by design. But since you love having the last word, I can, if you will let you talk there while I take my family out. Life, you know. Of course you know, God knows it all. Bye, thanks nonetheless."}], "tags": [], "owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "is_accepted": false, "score": 0, "last_activity_date": 1425121574, "last_edit_date": 1425121574, "creation_date": 1424954829, "answer_id": 28742904, "question_id": 28729965, "link": "https://stackoverflow.com/questions/28729965/linux-c-ipc-notification-without-context-switch-and-low-overhead/28742904#28742904", "title": "Linux - c - ipc notification without context switch and low overhead?", "body": "<p>I finally went the eventfd route; </p>\n\n<p>What I wish cannot be done in the unmodified gnu/linux.</p>\n\n<p>To satisfy Nominal Animal appetite : the context switch matters in the question i asked. Since it cannot be done without it, there are no other ways to do the job the way I would like.</p>\n\n<p>So I will keep using eventfd, and other traditional tools.</p>\n"}, {"tags": [], "owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "is_accepted": true, "score": 1, "last_activity_date": 1425285491, "creation_date": 1425285491, "answer_id": 28805527, "question_id": 28729965, "link": "https://stackoverflow.com/questions/28729965/linux-c-ipc-notification-without-context-switch-and-low-overhead/28805527#28805527", "title": "Linux - c - ipc notification without context switch and low overhead?", "body": "<p>The solution is a complete change in the logic; Forget about poll and all this fuss.</p>\n\n<p>Busy polling will be the way to go with no ops assembly operations.</p>\n"}], "owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 2, "accepted_answer_id": 28805527, "answer_count": 2, "score": 2, "last_activity_date": 1425285491, "creation_date": 1424899709, "last_edit_date": 1592644375, "question_id": 28729965, "link": "https://stackoverflow.com/questions/28729965/linux-c-ipc-notification-without-context-switch-and-low-overhead", "title": "Linux - c - ipc notification without context switch and low overhead?", "body": "<h3>Context :</h3>\n<p>Linux 64bits.</p>\n<p>I am very well versed in shared memories, different IPCs mechanisms.</p>\n<p>Currently, I am seeking something that could be used in userspace to notify change between two polled processes, to save cpu cycles.</p>\n<p>I already know about <code>futexes</code>, <code>eventfd</code>, slow <code>signals</code> and even <code>char devices</code>.</p>\n<p>But I am concerned about the latency involved.</p>\n<h3>Question :</h3>\n<p>I would like a very lightweight way to notify between two processes in userspace, <strong>without the context switch if possible, and a very low latency ( \u00b5s order of magnitude max or about)</strong>.</p>\n<p>No major constraints : no race condition prevention, no locking needed, but <strong><em>no</em></strong> busy waiting please (I manage the rushes and the slow pace periods already, and busy waiting would seriously deceive any optimizations on the long run).</p>\n<p>If mmap could notify the changes without a msync()... I would not be asking.</p>\n<p>Do you have an idea in your toolbox ?</p>\n<p>Thanks</p>\n<h3>idea :</h3>\n<p>Just after asking, may come an idea : putting a file in a tmpfs and poll it... i expect the latency to be quite low, but I am not very sure..</p>\n"}, {"tags": ["c", "segmentation-fault", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 1306, "user_id": 2807749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3884afad2069925c2c0ca50d49e4b093?s=128&d=identicon&r=PG&f=1", "display_name": "user0815", "link": "https://stackoverflow.com/users/2807749/user0815"}, "is_accepted": false, "score": 1, "last_activity_date": 1424899909, "creation_date": 1424899909, "answer_id": 28730017, "question_id": 28729743, "link": "https://stackoverflow.com/questions/28729743/segmentation-fault-after-pthread-create/28730017#28730017", "title": "Segmentation Fault after pthread_create()", "body": "<p>I think you should change the assignment as follows:</p>\n\n<pre><code>conn.sockfd = (int)sockfd;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 4524445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df533077ff4ffcb8aecb722dd3352df8?s=128&d=identicon&r=PG&f=1", "display_name": "Garcia Sylvain", "link": "https://stackoverflow.com/users/4524445/garcia-sylvain"}, "is_accepted": true, "score": 2, "last_activity_date": 1424900095, "creation_date": 1424900095, "answer_id": 28730069, "question_id": 28729743, "link": "https://stackoverflow.com/questions/28729743/segmentation-fault-after-pthread-create/28730069#28730069", "title": "Segmentation Fault after pthread_create()", "body": "<p>In your case, consider replacing</p>\n\n<pre><code>conn.sockfd = *((int*)sockfd);\n</code></pre>\n\n<p>by</p>\n\n<pre><code>conn.sockfd = (int)sockfd;\n</code></pre>\n\n<blockquote>\n  <p>You didn't have passed the <em>sockfd</em> variable as a pointer so you cannot dereference it. Take a look at : <a href=\"http://en.wikipedia.org/wiki/Dereference_operator\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Dereference_operator</a></p>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 4465805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e6d1cee55d1ce035ed8f15a7644c4a?s=128&d=identicon&r=PG&f=1", "display_name": "salza", "link": "https://stackoverflow.com/users/4465805/salza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "accepted_answer_id": 28730069, "answer_count": 2, "score": 0, "last_activity_date": 1424977462, "creation_date": 1424898896, "last_edit_date": 1424977462, "question_id": 28729743, "link": "https://stackoverflow.com/questions/28729743/segmentation-fault-after-pthread-create", "title": "Segmentation Fault after pthread_create()", "body": "<p>Creating a thread with this:</p>\n\n<pre><code>pthread_t thread; \npthread_create(&amp;thread, NULL, (void*)&amp;serve_connection, (void*)sockfd);\n</code></pre>\n\n<p>The function I am calling is defined as:</p>\n\n<pre><code>void serve_connection (void* sockfd) {\nssize_t  n, result;\nchar line[MAXLINE];\nconnection_t conn;\nconnection_init (&amp;conn);\nconn.sockfd = *((int*)sockfd);\nwhile (! shutting_down) {\n...\n...\n}}\n</code></pre>\n\n<p>The rest of the function is in the '...' but it is irrelevant because I have traced the seg fault to </p>\n\n<pre><code>conn.sockfd = *((int*)sockfd);\n</code></pre>\n\n<p>Where conn.sockfd is of type 'int'.</p>\n\n<p>Originally serve_connection was:</p>\n\n<pre><code>void serve_connection (int sockfd){\n...\nconn.sockfd = sockfd;\n...\n}\n</code></pre>\n\n<p>But I am calling it from a thread so that had to be changed. I should also note that the sockfd being passed to pthread_create is an int with a value.</p>\n\n<p>I'm also getting these warnings on compiling:</p>\n\n<pre><code>warning: ISO C forbids conversion of function pointer to object pointer type\nwarning: cast to pointer from integer of different size\nwarning: ISO C forbids passing argument 3 of \u00e2pthread_create\u00e2 between function pointer and \u00e2void *\u00e2\nnote: expected \u00e2void * (*)(void *)\u00e2 but argument is of type \u00e2void *\u00e2\n</code></pre>\n\n<p>These all refer to the line where I call pthread_create. I've ignored the warnings until now because the program runs up until the line specified above so I assume the function is being called correctly. I just can't figure out what is causing the segmentation fault it as I'm still new to working with pthreads (I'm assuming I'm calling or declaring something wrong, but looking at the libraries hasn't really helped).</p>\n"}, {"tags": ["c", "type-conversion", "initialization", "arguments"], "comments": [{"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 0, "creation_date": 1424898237, "post_id": 28729505, "comment_id": 45745313, "body": "a Is not defined! Here it begins"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1424898286, "post_id": 28729505, "comment_id": 45745340, "body": "Use of uninitialized <code>a</code> is cause for undefined behavior."}, {"owner": {"reputation": 13, "user_id": 4607672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204737938740922/picture?type=large", "display_name": "Varun S. Ranipeta", "link": "https://stackoverflow.com/users/4607672/varun-s-ranipeta"}, "edited": false, "score": 0, "creation_date": 1424900979, "post_id": 28729505, "comment_id": 45746836, "body": "What if the function signature is changed to short foo(short a) and a is removed as a stack variable?"}], "answers": [{"comments": [{"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 1, "creation_date": 1424898439, "post_id": 28729556, "comment_id": 45745421, "body": "There is a point for closing: <code>Questions seeking debugging help</code> You are free to use it"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1424898314, "creation_date": 1424898314, "answer_id": 28729556, "question_id": 28729505, "link": "https://stackoverflow.com/questions/28729505/what-are-potential-issues-with-the-following-code-short-foo-short-a-b-c-b/28729556#28729556", "title": "What are potential issues with the following code? short foo() { short a,b,c; b=10; c = a + b; return c; }", "body": "<p>Variable a was not initialized. It has an indeterminate value.</p>\n"}], "owner": {"reputation": 13, "user_id": 4607672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204737938740922/picture?type=large", "display_name": "Varun S. Ranipeta", "link": "https://stackoverflow.com/users/4607672/varun-s-ranipeta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1424900132, "accepted_answer_id": 28729556, "answer_count": 1, "score": -3, "last_activity_date": 1616139314, "creation_date": 1424898181, "last_edit_date": 1616139314, "question_id": 28729505, "link": "https://stackoverflow.com/questions/28729505/what-are-potential-issues-with-the-following-code-short-foo-short-a-b-c-b", "closed_reason": "Not suitable for this site", "title": "What are potential issues with the following code? short foo() { short a,b,c; b=10; c = a + b; return c; }", "body": "<p>What are potential issues with the following code?</p>\n\n<pre><code>short foo()\n{\n    short a,b,c;\n    b=10;\n\n   c = a + b;\n\n   return c; \n }\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 3, "creation_date": 1424898404, "post_id": 28729488, "comment_id": 45745404, "body": "In <code>main</code>, you want <code>elapsedTime(t1, t2);</code>"}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 1, "creation_date": 1424898465, "post_id": 28729488, "comment_id": 45745438, "body": "In a real program, you&#39;ll probably want to pass the structure via a pointer. The way it&#39;s currently written implies a copy of the structure being made when passing it."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1424901012, "post_id": 28729488, "comment_id": 45746851, "body": "@DanielKamilKozar: For a small structure consisting of just 3 <code>int</code> members, passing by value is not unreasonable."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1424901124, "post_id": 28729488, "comment_id": 45746913, "body": "The line <code>struct time elapsedTime(struct time t1,struct time t2);</code> is a declaration of the function. It&#39;s not necessary if the full definition precedes <code>main</code>. Just as a matter of style, it&#39;s more common to put function declarations at file scope, outside any function."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1424901139, "post_id": 28729488, "comment_id": 45746922, "body": "@KeithThompson - of course. That&#39;s why I put &quot;probably&quot; in there. :)"}], "answers": [{"tags": [], "owner": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "is_accepted": false, "score": 2, "last_activity_date": 1424898379, "creation_date": 1424898379, "answer_id": 28729572, "question_id": 28729488, "link": "https://stackoverflow.com/questions/28729488/difficulty-passing-struct-to-a-function/28729572#28729572", "title": "Difficulty passing struct to a function", "body": "<p>You never called your function</p>\n\n<pre><code>elapsedTime( t1, t2 );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424898964, "post_id": 28729594, "comment_id": 45745701, "body": "am i able to make this function return a struct type?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424900805, "post_id": 28729594, "comment_id": 45746764, "body": "@JerrySingh sure. I just didn&#39;t handle the return value in <code>main</code> in my example, but you can do that. See my edit of the answer."}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424902356, "post_id": 28729594, "comment_id": 45747481, "body": "Unfortunately, I can&#39;t use pointers yet.  Also, the exercise calls for a function that takes two arguments.  Im sure the restrictions are frustrating, if it helps ive been tearing my hair out over here."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424903103, "post_id": 28729594, "comment_id": 45747814, "body": "@JerrySingh yep I was just indicating it&#39;s appropriate here, but also show the direct <code>struct</code> return case."}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424903947, "post_id": 28729594, "comment_id": 45748216, "body": "with the struct time mt = elapsedTime(struct time t1, struct time t2) i get an error: invalid initializer"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424913508, "post_id": 28729594, "comment_id": 45751480, "body": "@JerrySingh what compiler and version are you using? It compiled fine for me."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424919066, "post_id": 28729594, "comment_id": 45752762, "body": "<code>codeblocks</code> is an IDE, but it&#39;s not the compiler (see the <a href=\"http://wiki.codeblocks.org/index.php?title=FAQ-General#Q:_What_Code::Blocks_is_not.3F\" rel=\"nofollow noreferrer\"><code>Code::Blocks</code> FAQ</a>). Do you know what C compiler it&#39;s using? Regardless, you could try separating the declaration from the call: <code>struct time tm;</code> then separately, <code>tm = elapstedTime(t1, t2);</code>."}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424919385, "post_id": 28729594, "comment_id": 45752842, "body": "woops, i mean its the GNU GCC compiler"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424919689, "post_id": 28729594, "comment_id": 45752913, "body": "@JerrySingh I am using <code>gcc 4.7.2</code> and the code compiles fine."}], "tags": [], "owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "is_accepted": true, "score": 2, "last_activity_date": 1424901379, "last_edit_date": 1424901379, "creation_date": 1424898425, "answer_id": 28729594, "question_id": 28729488, "link": "https://stackoverflow.com/questions/28729488/difficulty-passing-struct-to-a-function/28729594#28729594", "title": "Difficulty passing struct to a function", "body": "<p>You are declaring the function in main, but not calling it.</p>\n\n<p>Instead of:</p>\n\n<pre><code>int main (void)\n{\n    struct time elapsedTime(struct time t1,struct time t2);\n\n    return 0;\n}\n</code></pre>\n\n<p>You need:</p>\n\n<pre><code>struct time elapsedTime(struct time t1,struct time t2);\n\nint main (void)\n{\n    struct time mt = elapsedTime(t1, t2);\n\n    // Do something with mt...\n\n    return 0;\n}\n</code></pre>\n\n<p>A more common way to return a \"bulky\" data item would be as a pointer:</p>\n\n<pre><code>typedef struct my_time {\n    int hour;\n    int minute;\n    int second;\n} my_time_t;\n\nvoid elapsedTime(my_time_t t1, my_time_t t2, my_time_t *t3)\n{\n    t3-&gt;hour = ...;\n    t3-&gt;minute = ...;\n    t3-&gt;second = ...;\n\n    ...\n}\n</code></pre>\n\n<p>NOTE: I would strongly recommend avoiding a generic, common name such as <code>time</code> for your <code>struct</code> since it has the potential of conflicting with some system defined value (now or later). Avoid naming your own variables names like like <code>time</code>, <code>file</code>, <code>string</code>, etc...</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424899430, "post_id": 28729649, "comment_id": 45745942, "body": "am i able to make the function return a type struct?"}, {"owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424899572, "post_id": 28729649, "comment_id": 45746038, "body": "@JerrySingh You could but you&#39;re returning nothing in your function anyway, that&#39;s why I changed it to void."}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424899862, "post_id": 28729649, "comment_id": 45746233, "body": "true, id wanted to reduce the code as much as possible.  the goal of the exercise is to pass the two struct types (in this case times of day) and have the function determine how much time has passed.  My thinking was to have the parts subtract in the function, then return a t3 struct to main.  im finding that whatever prefix i put to the function i get some sort of error.  How do i return the struct from the function?"}, {"owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424947938, "post_id": 28729649, "comment_id": 45764363, "body": "@JerrySingh I can only think of a way with pointers, for future references.   Check out my updated answer."}], "tags": [], "owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "is_accepted": false, "score": 0, "last_activity_date": 1424948103, "last_edit_date": 1424948103, "creation_date": 1424898607, "answer_id": 28729649, "question_id": 28729488, "link": "https://stackoverflow.com/questions/28729488/difficulty-passing-struct-to-a-function/28729649#28729649", "title": "Difficulty passing struct to a function", "body": "<p>I have found a solution:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nstruct time\n{\n  int hour;\n  int minute;\n  int second;\n};\n\nvoid elapsedTime(struct time t1, struct time t2)\n{\n  printf(\"%i:%i:%i\\n\", t1.hour, t1.minute, t1.second);\n  printf(\"%i:%i:%i\\n\", t2.hour, t2.minute, t2.second);\n}\n\nint main()\n{\n  struct time t1 = { 3, 45, 15 };\n  struct time t2 = { 9, 44, 03 };\n  elapsedTime(t1, t2);\n  return 0;\n}\n</code></pre>\n\n<p>Compiles to the expected result for me.</p>\n\n<p>As other have said, you need to call the function with just <code>elapsedTime(t1, t2);</code>.</p>\n\n<p>EDIT:</p>\n\n<p>To get what you said in your comment below with pointers, you can use the following concept:</p>\n\n<pre><code>struct time\n{\n  int hour;\n  int minute;\n  int second;\n};\n\nvoid elapsedTime(struct time t1, struct time t2, struct time *t3)\n{\n  printf(\"%i:%i:%i\\n\", t1.hour, t1.minute, t1.second);\n  printf(\"%i:%i:%i\\n\", t2.hour, t2.minute, t2.second);\n  t3-&gt;hour = 100;\n  t3-&gt;minute = 50;\n  t3-&gt;second = 25;\n}\n\nint main()\n{\n  struct time t1 = { 3, 45, 15 };\n  struct time t2 = { 9, 44, 03 };\n  struct time t3 = { 0, 0, 0 };\n\n  elapsedTime(t1, t2, &amp;t3);\n  printf(\"%i:%i:%i\\n\", t3.hour, t3.minute, t3.second);\n  return 0;\n}\n</code></pre>\n\n<p>As you can see I passed a third struct to the function and change the struct values by reference in the function. (The values get changed outside of the function)</p>\n\n<p>Then I print the struct outside of the function to check whether it worked.</p>\n\n<p>Hope this will help when you can use pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 1049, "user_id": 481111, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4212a65ed49b519e47c6ca78d89ce70?s=128&d=identicon&r=PG&f=1", "display_name": "skimon", "link": "https://stackoverflow.com/users/481111/skimon"}, "is_accepted": false, "score": 0, "last_activity_date": 1424901230, "creation_date": 1424901230, "answer_id": 28730394, "question_id": 28729488, "link": "https://stackoverflow.com/questions/28729488/difficulty-passing-struct-to-a-function/28730394#28730394", "title": "Difficulty passing struct to a function", "body": "<p>Most likely the behavior described is caused by hiding the global variables t1 and t2 with the parameters of identical name. (There are other problems with the code as written that others have covered).</p>\n\n<p>I would change the argument names ,for example:</p>\n\n<pre><code>struct time t1 = {3, 45, 15};\nstruct time t2 = {9, 44, 03};\n\nstruct time elapsedTime(struct time time1,struct time time2)\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 28729594, "answer_count": 4, "score": 1, "last_activity_date": 1424948103, "creation_date": 1424898130, "last_edit_date": 1424901447, "question_id": 28729488, "link": "https://stackoverflow.com/questions/28729488/difficulty-passing-struct-to-a-function", "title": "Difficulty passing struct to a function", "body": "<p>Though there are many threads on this matter, i cannot find one that addresses my question, apologies if im being thick.  An important distinction is that my solution cannot use pointers.  I've started the chapter on structures and the problem i am working on calls for a function that takes two arguments t1 and t2, which are two different times in the framework of a structure.  ive reduced that code as much as possible, and am finding that the values of my struct items arent getting through to the function.  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nstruct time\n{\n    int hour;\n    int minute;\n    int second;\n};\n\nstruct time t1 = {3, 45, 15};\nstruct time t2 = {9, 44, 03};\n\nint main (void)\n{\n    struct time elapsedTime(struct time t1,struct time t2);\n\n    return 0;\n}\n\nstruct time elapsedTime(struct time t1,struct time t2)\n{\n    printf (\"%i:%i:%i\\n\", t1.hour, t1.minute, t1.second);\n    printf (\"%i:%i:%i\\n\", t2.hour, t2.minute, t2.second);\n\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "singly-linked-list", "circular-list"], "comments": [{"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1424897576, "post_id": 28729307, "comment_id": 45744945, "body": "Are you familiar with merge sort? This is basically the merge step, and it can be done in-place in a linked list."}, {"owner": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 3, "creation_date": 1424897728, "post_id": 28729307, "comment_id": 45745027, "body": "You can break the two lists at the end node ( you know its the last because the next node has a smaller values) Now question reduces to merging to linked lists in place which is easy to do. After they are merged again make it cyclic by pointing last next to first element"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1424897852, "post_id": 28729307, "comment_id": 45745106, "body": "You should show what you consider to be your best attempt.  There&#39;s no real need for a recursive algorithm, though it can certainly be written recursively if you prefer.  What&#39;s causing you to stumble?  Is it the circular linked lists?"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "reply_to_user": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 2, "creation_date": 1424898220, "post_id": 28729307, "comment_id": 45745300, "body": "@sasha This logic fails for a linked list with all elements with the same value (<code>1-&gt;1-&gt;1-&gt;1-&gt;...-&gt;1</code> is a valid sorted linked list). You need to mark the head and end the merge when reaching it."}, {"owner": {"reputation": 171, "user_id": 3674287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/lWdwu.jpg?s=128&g=1", "display_name": "MathNerd", "link": "https://stackoverflow.com/users/3674287/mathnerd"}, "reply_to_user": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 0, "creation_date": 1424899024, "post_id": 28729307, "comment_id": 45745724, "body": "@sasha Thanks, breaking the circular lists seems great. Now the problem reduces to merging two ordinary linked lists which is easy to do. I think I got it."}, {"owner": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 1, "creation_date": 1424899536, "post_id": 28729307, "comment_id": 45746015, "body": "@Saita as amit said take care of the case if all elements are the same . You can do that by choosing any element as head , noting down its value and traversing the list until you meet a different value or end up again at the head. If you end up again at the head all values are same."}], "answers": [{"tags": [], "owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "is_accepted": false, "score": 2, "last_activity_date": 1424897695, "creation_date": 1424897695, "answer_id": 28729375, "question_id": 28729307, "link": "https://stackoverflow.com/questions/28729307/merging-two-sorted-circular-singly-linked-lists/28729375#28729375", "title": "Merging two Sorted Circular Singly Linked Lists", "body": "<p>This is basically the merge step from <a href=\"http://en.wikipedia.org/wiki/Merge_sort\" rel=\"nofollow\">merge sort</a>.</p>\n\n<p>In a linked list, it can be done in place.</p>\n\n<p>The idea is to have an iterator for each list, and until the data in the merged list is exhausted, compare node from list1 to node from list2, if list2_iterator\n\n<p>Inserting a node before the current node is done by maintaining an extra <code>prev</code> iterator.</p>\n\n<p>Note that in the entire process of this algorithm - not a single new node was created, all you did was \"move\" nodes from <code>list2</code> to <code>list1</code>.</p>\n\n<p>Complexity if this procedure is <code>O(n)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 1, "creation_date": 1424902769, "post_id": 28730422, "comment_id": 45747657, "body": "The OP wants it in place merging , not to create a new list ( even if you delete from corresponding list , free memory and add in new list, I don&#39;t think even that is in place, although in nutshell extra memory is not used)"}], "tags": [], "owner": {"reputation": 1963, "user_id": 3287033, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/f6dcd0f36aba0da6569c9611964a44b5?s=128&d=identicon&r=PG&f=1", "display_name": "OldSchool", "link": "https://stackoverflow.com/users/3287033/oldschool"}, "is_accepted": false, "score": 1, "last_activity_date": 1424901684, "last_edit_date": 1424901684, "creation_date": 1424901319, "answer_id": 28730422, "question_id": 28729307, "link": "https://stackoverflow.com/questions/28729307/merging-two-sorted-circular-singly-linked-lists/28730422#28730422", "title": "Merging two Sorted Circular Singly Linked Lists", "body": "<p>Maintain a queue with two linked list firstly.Following is the pseudo code for it:-</p>\n\n<pre><code> queue* merge_queues (queue* first, queue* second)\n       {\n\n           queue* merged_queue = create_queue(first-&gt;capacity + second-&gt;capacity);\n           if (first != NULL &amp;&amp; second != NULL){\n              while ( !is_empty (first) &amp;&amp; !is_empty (second)){\n           int max;\n           if ( peekqueue (first) &gt; peekqueue (second)){\n               max = peekqueue (first);\n               dequeue (first);\n           }\n           else{\n                max = peekqueue (second);\n                dequeue (second);\n           }\n           enqueue( merged_queue, max);\n        }\n         while ( !is_empty (first)){\n              enqueue( merged_queue, peekqueue(first));\n              dequeue (first);\n         }\n         while (!is_empty (second)){\n             enqueue (merged_queue, peekqueue(second));\n             dequeue (second);\n        }\n    }\n    return merged_queue;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1425055893, "last_edit_date": 1425055893, "creation_date": 1424924270, "answer_id": 28734392, "question_id": 28729307, "link": "https://stackoverflow.com/questions/28729307/merging-two-sorted-circular-singly-linked-lists/28734392#28734392", "title": "Merging two Sorted Circular Singly Linked Lists", "body": "<p>Example code to merge two already sorted lists. To check for the end node of a circular list, check for pointer to head node of list instead of NULL, and after reaching the end of one list you'll need to link the remaining nodes one at a time from the other list since the terminator isn't NULL. After the merge, you'll need to set the last node's next pointer to the head node to make it a circular list. The code checks for Src2 &lt; Src1 to be similar to C++ standard library sort compares which use &lt; and not &lt;=.</p>\n\n<pre><code>NODE * MergeLists(NODE *pSrc1, NODE *pSrc2)\n{\nNODE *pDst = NULL;                      /* destination head ptr */\nNODE **ppDst = &amp;pDst;                   /* ptr to head or prev-&gt;next */\n    while(1){\n        if(pSrc1 == NULL){              /* if end of Src1 */\n            *ppDst = pSrc2;             /*   append remainder of Src2 */\n            break;                      /*   and break out of loop */\n        }\n        if(pSrc2 == NULL){              /* if end of Src2 */\n            *ppDst = pSrc1;             /*   append remainder of Src1 */\n            break;                      /*   and break out of loop */\n        }\n        if(pSrc2-&gt;data &lt; pSrc1-&gt;data){  /* if Src2 &lt; Src1 */\n            *ppDst = pSrc2;             /*   append node from Src2 */\n            pSrc2 = *(ppDst = &amp;(pSrc2-&gt;next));\n            continue;\n        } else {                        /* else Src1 &lt;= Src2 */\n            *ppDst = pSrc1;             /*   append node from Src1 */\n            pSrc1 = *(ppDst = &amp;(pSrc1-&gt;next));\n            continue;\n        }\n    }\n    return pDst;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1425147918, "creation_date": 1425147918, "answer_id": 28785243, "question_id": 28729307, "link": "https://stackoverflow.com/questions/28729307/merging-two-sorted-circular-singly-linked-lists/28785243#28785243", "title": "Merging two Sorted Circular Singly Linked Lists", "body": "<p>This merges two cyclic linked list. The code assumes both lists are already sorted and start a the correct point.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct llist {\n        struct llist *next;\n        int value;\n        };\n\nstruct llist wheel[] =\n{{ wheel+1, 0 }\n,{ wheel+2, 2 }\n,{ wheel+3, 4 }\n,{ wheel+0, 6 }\n};\nstruct llist cycle[] =\n{{ cycle+1, 0 }\n,{ cycle+2, 3 }\n,{ cycle+3, 6 }\n,{ cycle+0, 9 }\n};\n\nstruct llist *mergelists(struct llist *one, struct llist *two)\n{\nstruct llist *einz, *zwei;\nstruct llist *result ,**pp;\n\nif (!one) return two;\nif (!two) return one;\n\nresult = NULL; pp= &amp;result;\n\nfor (einz=one, zwei=two; einz || zwei; pp = &amp;(*pp)-&gt;next ) {\n        if ( !zwei || einz &amp;&amp; einz-&gt;value &lt;= zwei-&gt;value) {\n                *pp = einz; einz = einz-&gt;next == one ? NULL : einz-&gt;next;\n                }\n        else    {\n                *pp = zwei; zwei = zwei-&gt;next == two ? NULL : zwei-&gt;next;\n                }\n        }\n*pp = result; /* close the loop */\nreturn result;\n}\n\nint main(void)\n{\nstruct llist *p;\n\n        /* This loops.  forever ... */\nfor(p = mergelists( wheel, cycle); p ; p = p-&gt;next) {\n        printf(\"%p = %d\\n\", (void*) p, p-&gt;value );\n        }\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 3674287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/lWdwu.jpg?s=128&g=1", "display_name": "MathNerd", "link": "https://stackoverflow.com/users/3674287/mathnerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3215, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1425147918, "creation_date": 1424897417, "question_id": 28729307, "link": "https://stackoverflow.com/questions/28729307/merging-two-sorted-circular-singly-linked-lists", "title": "Merging two Sorted Circular Singly Linked Lists", "body": "<p>I am practicing some algorithm problems before an exam in a C language course and and I got stuck (for at least 3 or even 4 hours) at this question which I don't know how to answer:</p>\n\n<p>You have two <strong>circular</strong> singly linked lists that are already sorted, you have to merge them and return the head of the new <strong>circular</strong> linked list without creating any new extra nodes. The returned list should be sorted as well.</p>\n\n<p>The node structure is:</p>\n\n<pre><code>typedef struct Node {\n   int data;\n   struct Node* next;\n} Node;\n</code></pre>\n\n<p>I tried many ways (recursive and non recursive) but none solved the problem.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c", "pointers", "struct", "linked-list", "typedef"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1424897715, "post_id": 28729272, "comment_id": 45745021, "body": "Describe your file structure fully: what file contains what piece of code."}], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 3829538, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Xn7si.jpg?s=128&g=1", "display_name": "Ian Pennebaker", "link": "https://stackoverflow.com/users/3829538/ian-pennebaker"}, "edited": false, "score": 0, "creation_date": 1424899440, "post_id": 28729330, "comment_id": 45745948, "body": "That got rid of the dereferencing error but it was replaced with a &quot;Request for member in something not a struct or union&quot; error. Do you know why this happened?"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1424897501, "creation_date": 1424897501, "answer_id": 28729330, "question_id": 28729272, "link": "https://stackoverflow.com/questions/28729272/dereferencing-pointer-to-incomplete-type-linked-list-c/28729330#28729330", "title": "Dereferencing Pointer to incomplete type Linked List - C", "body": "<p>Apparently, you placed your struct declaration into some implementation file, and a <em>wrong</em> implementation file at that.</p>\n\n<p>The typedef declaration that you have in your header</p>\n\n<pre><code>typedef struct listStruct list;\n</code></pre>\n\n<p>declares an incomplete type. You have to place this</p>\n\n<pre><code>typedef struct listStruct{\n  char *name;\n  int size;\n  boolean inRestStatus;\n  list *next;\n} list;\n</code></pre>\n\n<p>into the header or at least into the same implementation file that uses the data fields of your struct. Where is it now? You have to describe your file structure in full detail.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1424898228, "last_edit_date": 1424898228, "creation_date": 1424897646, "answer_id": 28729362, "question_id": 28729272, "link": "https://stackoverflow.com/questions/28729272/dereferencing-pointer-to-incomplete-type-linked-list-c/28729362#28729362", "title": "Dereferencing Pointer to incomplete type Linked List - C", "body": "<p>It seems that you declared only typedef name in the header</p>\n\n<pre><code>typedef struct listStruct list;\n</code></pre>\n\n<p>Thus the module where function </p>\n\n<pre><code>void addToList(list *l, char * name, int size);\n</code></pre>\n\n<p>is defined does not know the definition of the structure. </p>\n\n<p>You have to include the structure definition in the header as for example</p>\n\n<pre><code>typedef struct listStruct{\n char *name;\n int size;\n boolean inRestStatus;\n struct listStruct *next;\n }list;\n</code></pre>\n\n<p>that it would be accessible in the module where the function is defined.</p>\n\n<p>Take into account that this method</p>\n\n<pre><code>void addToList(list *l, char * name, int size){\nlist *tmp;\nwhile(l-&gt;next != NULL){\n        l = l-&gt;next;\n        }\ntmp = malloc(sizeof(list));\ntmp-&gt;name = name;\ntmp-&gt;size = size;\ntmp-&gt;inRestStatus = NO;\ntmp-&gt;next = NULL;\nl-&gt;next = tmp;\n}\n</code></pre>\n\n<p>is also wrong. For example l can be equal to NULL can't it? </p>\n\n<p>Also simple copying pointers </p>\n\n<pre><code>tmp-&gt;name = name;\n</code></pre>\n\n<p>looks questionably. Should you allocate memory to store a copy of a string pointed to by argument name? </p>\n"}], "owner": {"reputation": 233, "user_id": 3829538, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Xn7si.jpg?s=128&g=1", "display_name": "Ian Pennebaker", "link": "https://stackoverflow.com/users/3829538/ian-pennebaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2770, "favorite_count": 0, "accepted_answer_id": 28729362, "answer_count": 2, "score": 1, "last_activity_date": 1424899373, "creation_date": 1424897308, "last_edit_date": 1424899373, "question_id": 28729272, "link": "https://stackoverflow.com/questions/28729272/dereferencing-pointer-to-incomplete-type-linked-list-c", "title": "Dereferencing Pointer to incomplete type Linked List - C", "body": "<p>I've been trying to figure this out for a while now, but cannot find a solution. I am building a linked list and when I try to pass the list as a pointer to anything I get an error: Dereferencing Pointer to incomplete type.</p>\n\n<p>Here is my struct declaration</p>\n\n<pre><code>typedef struct listStruct{\n char *name;\n int size;\n boolean inRestStatus;\n list *next;\n }list;\n</code></pre>\n\n<p>and one of the many functions that do not work. </p>\n\n<pre><code>void addToList(list *l, char * name, int size){\nlist *tmp;\nwhile(l-&gt;next != NULL){\n        l = l-&gt;next;\n        }\ntmp = malloc(sizeof(list));\ntmp-&gt;name = name;\ntmp-&gt;size = size;\ntmp-&gt;inRestStatus = NO;\ntmp-&gt;next = NULL;\nl-&gt;next = tmp;\n}\n</code></pre>\n\n<p>and the header</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct listStruct list;\n</code></pre>\n\n<p>I have tried changing the struct declaration to</p>\n\n<pre><code>typedef struct listStruct list{\n...\n};\n</code></pre>\n\n<p>and received the error: request for member in something not structure or union.\nIf anyone has any ideas that'd be awesome.</p>\n\n<p><em>Edit</em></p>\n\n<p>The struct definition is/was in a main function in a seperate file than the function, I have since moved the definition to the header file.</p>\n"}, {"tags": ["c", "file", "stdio", "string.h"], "comments": [{"owner": {"reputation": 1683, "user_id": 1098041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3277172b7213117c165e42611c0749a?s=128&d=identicon&r=PG", "display_name": "F&#233;lix Cantournet", "link": "https://stackoverflow.com/users/1098041/f%c3%a9lix-cantournet"}, "edited": false, "score": 0, "creation_date": 1424896190, "post_id": 28728880, "comment_id": 45744153, "body": "How big is your file? How many records in it. How is the text formatted? Do you control the formatting of the texte or is it a file that is given to you by a 3rd party ?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1424896423, "post_id": 28728880, "comment_id": 45744292, "body": "So you read the file and display it and once it&#39;s over you ask for the ID ? three times reading the same  ID ??  No very user friendly !  And where do you actually search for the data ?"}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 2348540, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/e3ad07e289e1135e31a916d8eb513e97?s=128&d=identicon&r=PG", "display_name": "Anastasis", "link": "https://stackoverflow.com/users/2348540/anastasis"}, "is_accepted": false, "score": 0, "last_activity_date": 1424906352, "last_edit_date": 1424906352, "creation_date": 1424899158, "answer_id": 28729809, "question_id": 28728880, "link": "https://stackoverflow.com/questions/28728880/search-file-and-compare-strings-it-contains-with-inputted-variable/28729809#28729809", "title": "Search file and compare strings it contains with inputted variable", "body": "<p>I'm not sure I understand your problem, but you can try this:</p>\n\n<pre><code>typedef struct record {\n  char *fname;\n  char *lname;\n  int code;\n} information;\n\nint main (void) {\n  char ffname[28], flname[28];\n  int fID, i, id_;\n  information array[3];\n  FILE *kfile;\n  i = 0;\n\n  if ((kfile = fopen(\"C:\\\\Users\\\\Student\\\\Downloads\\\\information.txt\",\"r\")) == NULL) {\n    perror(\"Error while opening file\");\n  } else {\n    while (!feof(kfile)) {\n      fscanf(kfile, \"%s %s %d\", ffname, flname, &amp;fID);\n      array[i].fname = strdup(ffname);\n      array[i].lname = strdup(flname);\n      array[i].code = fID;\n      i++;\n    }\n    fclose(kfile);\n  }\n\n  printf(\"Please enter your ID: \");\n  scanf(\"%d\", &amp;id_);\n  for (i = 0; i &lt; 3; i++) {\n    if (array[i].code == id_) {\n      // print the record\n      printf(\"%s %s \\n\", array[i].fname, array[i].lname);\n    }\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4607458, "user_type": "registered", "profile_image": "https://graph.facebook.com/915385635152484/picture?type=large", "display_name": "Keneil Ricketts", "link": "https://stackoverflow.com/users/4607458/keneil-ricketts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1424906372, "creation_date": 1424895848, "last_edit_date": 1424906372, "question_id": 28728880, "link": "https://stackoverflow.com/questions/28728880/search-file-and-compare-strings-it-contains-with-inputted-variable", "title": "Search file and compare strings it contains with inputted variable", "body": "<p>I'm trying to search a file containing information on a group of people, for example: their first name, last name and ID. </p>\n\n<p>I'm prompting the user to enter their ID code. The program should search the text file and ensure that their code matches the one within the file so that the program can continue by comparing the string from the file and the variable inputted by the user.</p>\n\n<p>I'm not sure how to implement this. Below is a snippet of the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct record {\n  char (fname[3])[20];\n  char (lname[3])[20];\n  int code[3];\n} information;\n\nint main (void) {\n  char ffname[20], flname[20];\n  int fID, i;\n  FILE *kfile;\n\n  if ((kfile = fopen(\"C:\\\\Users\\\\Student\\\\Downloads\\\\information.txt\",\"r\")) == NULL) {\n    perror(\"Error while opening file\");\n  } else {\n    printf(\"%-20s %-20s %s\\n\", \"First Name\", \"Last Name\", \"ID\");\n    fscanf(kfile, \"%19s %19s %d\", ffname, flname, &amp;fID);\n    printf(\"\\n\");\n    while (!feof(kfile)) {\n      printf(\"%-20s %-20s %04d\\n\", ffname, flname, fID);\n      fscanf(kfile, \"%19s %19s %d\", ffname, flname, &amp;fID);\n    }\n    fclose(kfile);\n  }\n\n  information info;\n  for (i = 0; i &lt; 3; i++) {\n    printf(\"Please enter your ID.\");\n    scanf(\"%04d\", &amp;info.code);\n  }\n  getch();\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "xv6"], "comments": [{"owner": {"reputation": 32568, "user_id": 142446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8190d89907e24bf6b4438eaef71af4?s=128&d=identicon&r=PG", "display_name": "Brett Kail", "link": "https://stackoverflow.com/users/142446/brett-kail"}, "edited": false, "score": 0, "creation_date": 1424895990, "post_id": 28728848, "comment_id": 45744037, "body": "Are you sure it&#39;s not <code>[SYS_fork] = sys_fork</code>, etc.? At least, I thought that was the C99 designated initialized syntax."}, {"owner": {"reputation": 39, "user_id": 4591697, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5e8a375256e85748f260bade13629c3e?s=128&d=identicon&r=PG&f=1", "display_name": "RUstar", "link": "https://stackoverflow.com/users/4591697/rustar"}, "reply_to_user": {"reputation": 32568, "user_id": 142446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8190d89907e24bf6b4438eaef71af4?s=128&d=identicon&r=PG", "display_name": "Brett Kail", "link": "https://stackoverflow.com/users/142446/brett-kail"}, "edited": false, "score": 0, "creation_date": 1424896022, "post_id": 28728848, "comment_id": 45744054, "body": "@bkail no.. I copied directly from the source code."}, {"owner": {"reputation": 32568, "user_id": 142446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8190d89907e24bf6b4438eaef71af4?s=128&d=identicon&r=PG", "display_name": "Brett Kail", "link": "https://stackoverflow.com/users/142446/brett-kail"}, "edited": false, "score": 0, "creation_date": 1424897822, "post_id": 28728848, "comment_id": 45745089, "body": "Then I don&#39;t know.  I&#39;ve added the <code>c</code> tag, so hopefully someone else can help."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1424897881, "post_id": 28728848, "comment_id": 45745123, "body": "What compiler is used on that system?"}, {"owner": {"reputation": 39, "user_id": 4591697, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5e8a375256e85748f260bade13629c3e?s=128&d=identicon&r=PG&f=1", "display_name": "RUstar", "link": "https://stackoverflow.com/users/4591697/rustar"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1424897961, "post_id": 28728848, "comment_id": 45745158, "body": "@Jens erm.. I do not know. I guess.. gcc..?"}, {"owner": {"reputation": 157, "user_id": 805362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e83203103059de660835fa0443053e?s=128&d=identicon&r=PG", "display_name": "remmy", "link": "https://stackoverflow.com/users/805362/remmy"}, "edited": false, "score": 0, "creation_date": 1424904192, "post_id": 28728848, "comment_id": 45748343, "body": "To be clear, xv6 is an OS made by and used in MIT as a replacement for Sixth Edition UNIX for their OS engineering courses because they wanted a more modern OS, and they use gcc. (Though apparently an ancient one still..)"}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1424898532, "last_edit_date": 1424898532, "creation_date": 1424898042, "answer_id": 28729465, "question_id": 28728848, "link": "https://stackoverflow.com/questions/28728848/need-help-to-understand-the-syntax-in-xv6-kernel/28729465#28729465", "title": "Need help to understand the syntax in xv6 kernel", "body": "<p>This is most likely a non-standard way of initializing an array of function pointers. The identifiers <code>SYS_fork</code> etc. are very likely macros or enum constants specifying the element index.</p>\n\n<p>Another possibility is that this is not a C file, but is turned into a syntactically valid C file using some filtering tool prior to compilation.</p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 805362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e83203103059de660835fa0443053e?s=128&d=identicon&r=PG", "display_name": "remmy", "link": "https://stackoverflow.com/users/805362/remmy"}, "is_accepted": true, "score": 1, "last_activity_date": 1424903048, "creation_date": 1424903048, "answer_id": 28730828, "question_id": 28728848, "link": "https://stackoverflow.com/questions/28728848/need-help-to-understand-the-syntax-in-xv6-kernel/28730828#28730828", "title": "Need help to understand the syntax in xv6 kernel", "body": "<p>That code is making an array of function pointers, using an old alternative GNU extension for designated initialization.</p>\n\n<p>Designated initializations is a feature that was added to C in C99 that lets you specify which array index to assign a specific value for arrays, so they need not be in order. The same feature exists for struct initializations where you can specify the specific field to assign a given value to.</p>\n\n<p>The C99 syntax for array designated initializations is <code>[index] = value</code>. This code in particular though is using an older alternative syntax from GCC, which as per <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html\" rel=\"nofollow\">this document</a> has been obsolete since GCC 2.5, in which there is no equals sign used.</p>\n\n<p>In <code>syscall.c</code> the indices are specified using macros defined in <code>syscall.h</code>, the first of which is defined to <code>1</code> in <code>syscall.h</code>, et.c.</p>\n"}], "owner": {"reputation": 39, "user_id": 4591697, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5e8a375256e85748f260bade13629c3e?s=128&d=identicon&r=PG&f=1", "display_name": "RUstar", "link": "https://stackoverflow.com/users/4591697/rustar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 28730828, "answer_count": 2, "score": 0, "last_activity_date": 1424903048, "creation_date": 1424895714, "last_edit_date": 1424897800, "question_id": 28728848, "link": "https://stackoverflow.com/questions/28728848/need-help-to-understand-the-syntax-in-xv6-kernel", "title": "Need help to understand the syntax in xv6 kernel", "body": "<p>I am reading files of xv6 kernel and I cannot understand what the following means:</p>\n\n<pre><code>static int (*syscalls[])(void) = {\n [SYS_fork]    sys_fork,\n [SYS_exit]    sys_exit,\n [SYS_wait]    sys_wait,\n [SYS_pipe]    sys_pipe,\n...\n\n}\n</code></pre>\n\n<p>Can someone explain this to me? Especially what square brackets (e.g [SYS_fork]) mean.\nThank you</p>\n"}, {"tags": ["c++", "c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 2200, "user_id": 1519323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zUWVH.png?s=128&g=1", "display_name": "davepmiller", "link": "https://stackoverflow.com/users/1519323/davepmiller"}, "edited": false, "score": 1, "creation_date": 1424894960, "post_id": 28728588, "comment_id": 45743482, "body": "Why are these macros necessary? Maybe we need a better explanation on their use case. Couldn&#39;t you just print out member variables for a quick sanity check?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1424895349, "post_id": 28728588, "comment_id": 45743700, "body": "What is it C or C++? Answers might be different, provided you give us a better description of what you are really after."}, {"owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "edited": false, "score": 0, "creation_date": 1424895434, "post_id": 28728588, "comment_id": 45743741, "body": "Updated more information"}], "answers": [{"comments": [{"owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "edited": false, "score": 0, "creation_date": 1424895518, "post_id": 28728647, "comment_id": 45743798, "body": "I would prefer something that will not need additional variable / defined. One reason is, I may have not just classX/classY but could be more in the future to decide."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 3, "last_activity_date": 1424894984, "creation_date": 1424894984, "answer_id": 28728647, "question_id": 28728588, "link": "https://stackoverflow.com/questions/28728588/c-test-macro-defined-value-of-type-information/28728647#28728647", "title": "C++ Test macro defined value of type information", "body": "<p>The conventional way is to use a separate macro to select between the definitions</p>\n\n<pre><code>#ifdef USE_X\n#define MYDEFINE classX\n#else\n#define MYDEFINE classY\n#endif\n</code></pre>\n\n<p>and use that when you need to know</p>\n\n<pre><code>#ifdef USE_X\n// ...\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1448621227, "creation_date": 1448621227, "answer_id": 33955683, "question_id": 28728588, "link": "https://stackoverflow.com/questions/28728588/c-test-macro-defined-value-of-type-information/33955683#33955683", "title": "C++ Test macro defined value of type information", "body": "<p>What is your intention? If you need to execute some code, you can use function overloading:</p>\n\n<pre><code>void f(classX *)\n{\n    // Some actions for classX\n}\nvoid f(classY *)\n{\n    // Some actions for classY\n}\n\nf((MYDEFINE *) 0);\n</code></pre>\n\n<p>Or if you need to define something:</p>\n\n<pre><code>template&lt;class &gt; class traits; // not defined\n\ntemplate&lt;&gt;\nclass traits&lt;classX&gt;\n{\n    typedef &lt;type-for-classX&gt; type;\n};\n\ntemplate&lt;&gt;\nclass traits&lt;classY&gt;\n{\n    typedef &lt;type-for-classY&gt; type;\n};\n\ntraits&lt;MYDEFINE&gt;::type var;\n</code></pre>\n"}], "owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1448621227, "creation_date": 1424894769, "last_edit_date": 1448619237, "question_id": 28728588, "link": "https://stackoverflow.com/questions/28728588/c-test-macro-defined-value-of-type-information", "title": "C++ Test macro defined value of type information", "body": "<p>I have a macro like this:</p>\n\n<pre><code>#define MYDEFINE classX\n</code></pre>\n\n<p>And it could be</p>\n\n<pre><code>#define MYDEFINE classY\n</code></pre>\n\n<p>in some other places</p>\n\n<p>where classX and classY is some typename.</p>\n\n<p>What is the best way to check if the <code>MYDEFINE</code> is <code>classX</code> or <code>classY</code> ? (It could be more than 2 types here, so I'm seeking some flexible solutions)</p>\n\n<p>Edit: More on the usecase, I have a <code>config.h</code> file for the user to define what type to use. I have some compile time decision to make depending on this config value, but it's undesirable to change the way <code>config.h</code> works.</p>\n\n<p>I'm open to solution available in C++/C++11</p>\n"}, {"tags": ["c", "text-based"], "comments": [{"owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "edited": false, "score": 0, "creation_date": 1424894875, "post_id": 28728538, "comment_id": 45743432, "body": "Are you searching the rooms based on the <code>x</code> field ? Then you can just initialize the values of each room serially (row wise) and the search becomes trivial."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1424894942, "post_id": 28728538, "comment_id": 45743468, "body": "Add an &#39;already searched&#39; bool and recursively hunt around?  You may be better off with two bools, and alternate between them on each search so that you can reset one set while searching the other."}, {"owner": {"reputation": 83, "user_id": 4236586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3c8025a06087ca191d2f59cb941fc485?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/4236586/markus"}, "reply_to_user": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "edited": false, "score": 0, "creation_date": 1424895489, "post_id": 28728538, "comment_id": 45743775, "body": "@Akash Pradhan: I don&#39;t think this will work. If I want the program to &quot;find room Nr. 47&quot; it should not only find the index, it should also find the location. To do this, it has to iterate quad-directional through each room one by one."}, {"owner": {"reputation": 2812, "user_id": 1539858, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vRC08.png?s=128&g=1", "display_name": "arunmoezhi", "link": "https://stackoverflow.com/users/1539858/arunmoezhi"}, "edited": false, "score": 1, "creation_date": 1424895514, "post_id": 28728538, "comment_id": 45743793, "body": "i think you are trying to solve the standard &quot;Escape the maze&quot; problem"}, {"owner": {"reputation": 83, "user_id": 4236586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3c8025a06087ca191d2f59cb941fc485?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/4236586/markus"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1424895530, "post_id": 28728538, "comment_id": 45743803, "body": "@Martin James yeah that could work. Thanks."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1424895590, "post_id": 28728538, "comment_id": 45743832, "body": "This &quot;question&quot;, which in fact isn&#39;t one, doesn&#39;t seem to be appropriate for SO. What have you tried? Why don&#39;t any of the standard graph search techniques BFS, DFS ... suffice?"}], "answers": [{"tags": [], "owner": {"reputation": 251, "user_id": 4601602, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x9nFFDLeiRw/AAAAAAAAAAI/AAAAAAAAADQ/BT7NKo18E5c/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/4601602/anton"}, "is_accepted": false, "score": 1, "last_activity_date": 1424898148, "last_edit_date": 1424898148, "creation_date": 1424895713, "answer_id": 28728845, "question_id": 28728538, "link": "https://stackoverflow.com/questions/28728538/im-looking-for-a-specific-search-algorithm/28728845#28728845", "title": "I&#39;m looking for a specific search algorithm", "body": "<p>A simple solution would be to create an array of <code>Room</code>, or an array of <code>Room *</code></p>\n\n<p>Then, you can search in the array with a loop, until you find the room with the searched value of <code>x</code>, or reach the end of the array.</p>\n\n<hr>\n\n<p>If you are starting from an initial room, you can try the recursive search of a chained list.</p>\n\n<p>However, we must add a bool in the struct Room to avoid infinite search, because your rooms might loop on each other like this :</p>\n\n<pre><code> O--O\n |  |\n O--O\n  O : room, - and | : link between rooms\n</code></pre>\n\n<p>The <code>checked</code> value should be initialised to <code>false</code> before starting to search, and that parameter gets to <code>true</code> when the room is checked once.</p>\n\n<p>principle :</p>\n\n<pre><code>Room* search_room (int x_search, Room* current_room)\n{\n//if current_room is NULL, return NULL\n//if checked is true, return NULL\n//checked becomes true\n//if current_room-&gt;x equals x_search, return current_room\n\n//store the result of search_room(x_search, current_room-&gt;north) somewhere\n//if it's not null, return what it has returned\n//if not, then proceed to the store and check of the 3 others calls :\n//search_room(x_search, current_room-&gt;east)\n//search_room(x_search, current_room-&gt;south)\n//search_room(x_search, current_room-&gt;west)\n\n//if all the 4 calls returned NULL, return NULL\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245, "user_id": 3253038, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/tjQnp.jpg?s=128&g=1", "display_name": "Robin Halder", "link": "https://stackoverflow.com/users/3253038/robin-halder"}, "is_accepted": false, "score": 2, "last_activity_date": 1424896413, "creation_date": 1424896413, "answer_id": 28729022, "question_id": 28728538, "link": "https://stackoverflow.com/questions/28728538/im-looking-for-a-specific-search-algorithm/28729022#28729022", "title": "I&#39;m looking for a specific search algorithm", "body": "<p>I think You can use a depth first search technique for finding the desired value.As there may be possible four side to found so this algorithm will help You to find.</p>\n\n<p>For learning DFS (depth first search) You can read these :)</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Depth-first_search\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Depth-first_search</a></p>\n\n<p><a href=\"http://www.ics.uci.edu/~eppstein/161/960215.html\" rel=\"nofollow\">http://www.ics.uci.edu/~eppstein/161/960215.html</a></p>\n\n<p><a href=\"http://www.geeksforgeeks.org/applications-of-depth-first-search/\" rel=\"nofollow\">http://www.geeksforgeeks.org/applications-of-depth-first-search/</a></p>\n"}, {"tags": [], "owner": {"reputation": 1963, "user_id": 3287033, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/f6dcd0f36aba0da6569c9611964a44b5?s=128&d=identicon&r=PG&f=1", "display_name": "OldSchool", "link": "https://stackoverflow.com/users/3287033/oldschool"}, "is_accepted": true, "score": 1, "last_activity_date": 1424899541, "last_edit_date": 1424899541, "creation_date": 1424898804, "answer_id": 28729717, "question_id": 28728538, "link": "https://stackoverflow.com/questions/28728538/im-looking-for-a-specific-search-algorithm/28729717#28729717", "title": "I&#39;m looking for a specific search algorithm", "body": "<p>It will be easy with a recursive algorithm, treat your quad list as of <code>graph</code> which have <code>left</code>, <code>right</code> , <code>top</code> and <code>bottom</code> connection.Following is the pseudo code for your searching algorithm:-</p>\n\n<pre><code>typedef enum{\n    VISITED,\n    NOT_VISITED\n}status;\ntypedef struct vertex{\n    int x;\n    struct vertex* up;\n    struct vertex* down;\n    struct vertex* left;\n    struct vertex* right;\n    status node_status;\n}node;\ntypedef struct{\n    node* g_nodes;\n    int capacity, length, width,curr_filled;\n    int row_index, col_index;\n}graph;\ng_node* search_graph (graph* gph, int key)\n{\n    static g_node = get_first_node ( gph ); //you can get any node.\n    if ( g_node-&gt;x == key){\n        return g_node;\n    }\n    if ( g_node-&gt;node_status == VISITED){\n        return NULL;\n    } \n    g_node-&gt;node_status = VISITED;\n    if (g_node-&gt;left != NULL){\n        return search_graph (gph, g_node-&gt;left);\n    }\n    if (g_node-&gt;right != NULL){\n        return print_graph (gph, g_node-&gt;right);\n    }\n    if (g_node-&gt;up != NULL){\n        return print_graph (gph, g_node-&gt;up);\n    }\n    if (g_node-&gt;down != NULL){\n        return print_graph (gph, g_node-&gt;down);\n    }\n\n} \u00a0\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4236586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3c8025a06087ca191d2f59cb941fc485?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/4236586/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 28729717, "answer_count": 3, "score": -1, "last_activity_date": 1424899541, "creation_date": 1424894611, "question_id": 28728538, "link": "https://stackoverflow.com/questions/28728538/im-looking-for-a-specific-search-algorithm", "title": "I&#39;m looking for a specific search algorithm", "body": "<p>Currently I am trying to create a little text based dungeon crawler in C where the map should be randomly generated.\nI try to accomplish this by using a quad-linked list, where every node(room) can have up to four connections to next rooms.</p>\n\n<pre><code>typedef struct Room {\n    int x; //each room got its own number to be identified.\n    struct Room *north;\n    struct Room *east;\n    struct Room *south;\n    struct Room *west; } room;\n</code></pre>\n\n<p>It should also be possible for some rooms to have only one or two or three connections while the unused pointers to next nodes remains NULL.\nFor varius reasons I need a search algorithm which iterates through the rooms to find a specific one. I have no idea how to implement something like this. Any ideas?</p>\n"}, {"tags": ["c", "arrays", "vector"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1424895352, "post_id": 28728414, "comment_id": 45743702, "body": "Phew! There is a <i>lot</i> of unnecessary<code>*</code> in there. For example <code>stergere(... int *m, ...)</code> does not alter the <code>m</code> passed. And in <code>citireM(... int *m, ...)</code> the statement <code>scanf_s(&quot;%d&quot;, &amp;(*m));</code> would be so much easier to follow as <code>scanf_s(&quot;%d&quot;, m);</code>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1424896022, "post_id": 28728414, "comment_id": 45744053, "body": "<i>delete lines</i> sounds like you want to see spreadsheet behavior, i.e. when a row is deleted, it all goes away, and another row comes up and replaces it.  Arrays in C do not work that way.  Once you create space for an array dynamically, you can copy values from the space by navigating the pointers and copy to another space.  Or you can initialize all values in a <i>row</i>, or a <i>column</i> to <code>&quot;&quot;</code>, or <code>0</code>.  but  space cannot be <i>deleted</i> from just a <i>row</i> or <i>column</i>."}, {"owner": {"reputation": 2717, "user_id": 2883184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dae17306841de73b2e27aae5359292af?s=128&d=identicon&r=PG&f=1", "display_name": "bamtheboozle", "link": "https://stackoverflow.com/users/2883184/bamtheboozle"}, "edited": false, "score": 0, "creation_date": 1424896183, "post_id": 28728414, "comment_id": 45744150, "body": "I know about the scanf_s, but since I&#39;m just starting with dynamically allocated arrays I figured it would be easier for me to write it like that, even if they do sort of cancel out. I&#39;m still trying to understand the concept!"}, {"owner": {"reputation": 2717, "user_id": 2883184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dae17306841de73b2e27aae5359292af?s=128&d=identicon&r=PG&f=1", "display_name": "bamtheboozle", "link": "https://stackoverflow.com/users/2883184/bamtheboozle"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1424896807, "post_id": 28728414, "comment_id": 45744511, "body": "@ryyker That&#39;s sort of how I wanted to do it. Is it not possible to sort of copy the X+1 line(X being the one to be deleted) to the X line, then subtract 1 from the total number of lines? Basically replace X line with X+1 and just somehow remove the last line?"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424896997, "post_id": 28728414, "comment_id": 45744610, "body": "Of course it&#39;s possible to do that. Remember to shift every other line after X as well."}, {"owner": {"reputation": 2717, "user_id": 2883184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dae17306841de73b2e27aae5359292af?s=128&d=identicon&r=PG&f=1", "display_name": "bamtheboozle", "link": "https://stackoverflow.com/users/2883184/bamtheboozle"}, "edited": false, "score": 0, "creation_date": 1424898277, "post_id": 28728414, "comment_id": 45745334, "body": "Okay! So by using the 2 for sequnces in stergere(), shouldn&#39;t that be exactly what&#39;s needed? What am I doing wrong there? For some reason, that&#39;s the part that causes the program to crash."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 1, "creation_date": 1424901069, "post_id": 28728414, "comment_id": 45746884, "body": "<code>stergere</code> doesn&#39;t actually change the values of <code>a</code>, <code>m</code>, or <code>n</code>, so change its signature to accept a <code>float **</code>. Change every <code>*(a)[][]</code> to <code>a[][]</code>, (and <code>*m</code> to <code>m</code>, and <code>*n</code> to <code>n</code>) and call it as <code>stergere(a, v, m, n, x)</code>."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 1, "creation_date": 1424901182, "post_id": 28728414, "comment_id": 45746947, "body": "<code>*(a)[i][j]</code> means &quot;the thing pointed at by the thing found j indexes away from the thing found i indexes away from a&quot;. You meant <code>(*a)[i][j]</code>."}, {"owner": {"reputation": 2717, "user_id": 2883184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dae17306841de73b2e27aae5359292af?s=128&d=identicon&r=PG&f=1", "display_name": "bamtheboozle", "link": "https://stackoverflow.com/users/2883184/bamtheboozle"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424906677, "post_id": 28728414, "comment_id": 45749427, "body": "@AustinMullins I was under the impression that m will be changed because after each iteration and copying line x+1 to x, after subtracting 1 from m, the final m value would change. The program works now, but those lines that were supposed to be deleted are still taking double space, I just have to show on screen by calling the afisare() function with m-x elements, because the number of elements in the V vector will be the number of lines to be deleted."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 1, "creation_date": 1424908976, "post_id": 28728414, "comment_id": 45750177, "body": "You <i>could</i> change m and pass it as a pointer. You didn&#39;t though. Just delete the rows you don&#39;t use."}, {"owner": {"reputation": 2717, "user_id": 2883184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dae17306841de73b2e27aae5359292af?s=128&d=identicon&r=PG&f=1", "display_name": "bamtheboozle", "link": "https://stackoverflow.com/users/2883184/bamtheboozle"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424952781, "post_id": 28728414, "comment_id": 45767290, "body": "@AustinMullins I&#39;ve figured it out. It works fine now. I&#39;ll update the main post with the final code. I allocated another array called B with the total size of m-x lines(lines of A - total lines to be deleted), then simply copied the lines from A that weren&#39;t found in the V vector to B. Also added another function to check if there are any duplicate numbers in the V vector, since if there were any they would cause the program to crash. Pretty happy with the outcome, thank you so much!"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1424955356, "post_id": 28728414, "comment_id": 45768875, "body": "Please don&#39;t be a <a href=\"http://c2.com/cgi/wiki?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">three-star programmer</a>."}, {"owner": {"reputation": 2717, "user_id": 2883184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dae17306841de73b2e27aae5359292af?s=128&d=identicon&r=PG&f=1", "display_name": "bamtheboozle", "link": "https://stackoverflow.com/users/2883184/bamtheboozle"}, "edited": false, "score": 0, "creation_date": 1424956432, "post_id": 28728414, "comment_id": 45769489, "body": "My teacher is forcing us to use the three stars when modifying arrays in functions. From what I understood, you have ** because it&#39;s an array, and another * because you&#39;re modifying its values within said function, and those values need to be returned to the array in main(). Is there a better way to modify an array in a function without using *** ?"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424961152, "post_id": 28728414, "comment_id": 45772636, "body": "If you solved the problem, reduce the code in your question to just the problematic part and add the solution as an answer."}], "owner": {"reputation": 2717, "user_id": 2883184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dae17306841de73b2e27aae5359292af?s=128&d=identicon&r=PG&f=1", "display_name": "bamtheboozle", "link": "https://stackoverflow.com/users/2883184/bamtheboozle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424953015, "creation_date": 1424894182, "last_edit_date": 1424953015, "question_id": 28728414, "link": "https://stackoverflow.com/questions/28728414/deleting-x-lines-from-a-dynamically-allocated-array-in-c-by-using-a-function", "title": "Deleting X lines from a dynamically allocated array in C by using a function?", "body": "<p>I have a vector V with lines to be deleted. I need to use functions for:\n- reading and writing the matrix A where a list of firms are stored\n- reading and writing V, where the lines to be deleted are.\n- deleting the lines from A, where the X lines are stored as values in V.</p>\n\n<p>My problems:</p>\n\n<ol>\n<li><p>How do I use a function to read the X lines to be deleted and store them in V? I can do it just fine in main(), but I can't figure out how to do the reading in a function.</p></li>\n<li><p>What am I doing wrong in the stergere() function? If I replace the elements in the X line with 0 and then ignore said elements when I write the matrix after deleting, it works fine, but that's not optimal. I want to actually delete said elements so the overall size of the matrix scales down as well.</p></li>\n</ol>\n\n<p>ALSO, if you could point me in the right direction with not having to ask the user first how many lines s/he wants deleted, that would be great. Right now, I have to use a variable that will store the number of lines to be deleted (read from keyboard), then dynamically allocate V with the size read from keyboard. Is there any way to have the user constantly read X values until a certain key is pressed, and store those elements in V? Sort of like a vector::push_back in c++?</p>\n\n<p>Thank you, here's the code:</p>\n\n<pre><code>// ConsoleApplication76.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include&lt;stdio.h&gt;\n#include&lt;malloc.h&gt;\n\n// alocarea matricei B in memorie in functie de numarul de linii de sters din vectorul x\nvoid alocare(float*** b, int* y, int m, int *n, int x){\n    *y = m - x;\n    (*b) = (float**)malloc((*y)*sizeof(float*));\n    for (int i = 0; i&lt;(*y); i++)\n        (*b)[i] = (float*)malloc((*n)*sizeof(float));\n}\n\n//citirea matricei A\nvoid citireA(float*** a, int *m, int *n){\n    printf(\"Nr linii m al matricei a   : \");\n    scanf_s(\"%d\", &amp;(*m));\n    printf(\"Nr coloane n al matricei a : \");\n    scanf_s(\"%d\", &amp;(*n));\n    (*a) = (float**)malloc((*m)*sizeof(float*));\n    for (int i = 0; i &lt; (*m); i++)\n        (*a)[i] = (float*)malloc((*n)*sizeof(float));\n    for (int i = 0; i &lt; (*m); i++)\n    for (int j = 0; j &lt; (*n); j++){\n        printf(\"a[%d][%d]: \", i, j);\n        scanf_s(\"%f\", &amp;(*a)[i][j]);\n    }\n    printf(\"\\n\");\n}\n\n// afisarea matricei A\nvoid afisareA(float **a, int m, int n){\n    for (int i = 0; i&lt;m; i++){\n        printf(\"%d: \", i);\n        for (int j = 0; j &lt; n; j++){\n            printf(\" %5.2f \", a[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    printf(\"\\n\");\n}\n\n// citirea vectorului V\nvoid citireV(int** v, int *x){\n    printf(\"Numar de linii de sters: \");\n    scanf_s(\"%d\", &amp;(*x));\n    *(v) = (int*)malloc(*(x)*sizeof(int));\n    for (int i = 0; i &lt; *(x); i++){\n        printf(\"Linia ce va fi stearsa: \");\n        scanf_s(\"%d\", &amp;(*v)[i]);\n    }\n}\n\n// afisarea vectorului V\nvoid afisareV(int* v, int x){\n    printf(\"\\nLiniile ce vor fi sterse: \");\n    for (int i = 0; i &lt; x; i++)\n        printf(\"%d \", v[i]);\n    printf(\"\\n\");\n}\n\nbool nullT(int m, int x){\n    if (m == x){\n        printf(\"Matricea rezultata va fi nula\\n\");\n        return true;\n    }\n    return false;\n}\n\n// functie pentru a sterge valorile care se afla de mai multe ori in vectorul v. in caz ca aceeasi linie\n// se afla de 2 ori in vectorul V, in matricea A nu va putea fi gasita linia v[i] in a doua iteratie, cauzand un crash.\nvoid stergereDup(int** v, int *x){\n    for (int i = 0; i &lt; (*x)-1; i++)\n    for (int j = i + 1; j &lt; (*x); j++)\n        if ( (*v)[i] == (*v)[j] ) {\n            for (int ii = i; ii &lt; (*x) - 1; ii++)\n                (*v)[ii] = (*v)[ii + 1];\n            (*x)--;\n        }\n    }\n\n// afisarea matricei B\nvoid afisareB(float **b, int y, int n){\n    for (int i = 0; i&lt;y; i++){\n        printf(\"%d: \", i);\n        for (int j = 0; j &lt; n; j++){\n            printf(\" %5.2f \", b[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    printf(\"\\n\");\n}\n\n// functia principala de stergere a linillor v[i] din matricea A\nvoid stergere(float** a, float*** b, int* v, int* y, int *m, int n, int x){\n    int kb = 0;\n    int q = 0;\n    bool test = false;\n    while (q != *m){\n        for (int i = 0; i &lt; x; i++)\n        if (v[i] == q) test = true;\n        if (!test){\n            for (int i = 0; i &lt; n; i++){\n                (*b)[kb][i] = a[q][i];\n            }\n            kb++;\n            printf(\"\\n\");\n        }\n        test = false;\n        q++;\n    }\n}\n\n\nint main(){\n    float** a;\n    float** b;\n    int* v;\n    int m, n, x, y;\n\n    citireA(&amp;a, &amp;m, &amp;n);\n    afisareA(a, m, n);\n\n    citireV(&amp;v, &amp;x);\n    stergereDup(&amp;v, &amp;x);\n    afisareV(v, x);\n\n    if (nullT(m, x)) return 0;\n    else {\n        alocare(&amp;b, &amp;y, m, &amp;n, x);\n        stergere(a, &amp;b, v, &amp;y, &amp;m, n, x);\n        afisareB(b, y, n);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "tcp"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1424894269, "post_id": 28728176, "comment_id": 45743117, "body": "There is no loop in the server for the accepted socket, it can just read and write once."}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1424895979, "post_id": 28728176, "comment_id": 45744034, "body": "you should probably make the sockets non-blocking using <code>fcntl</code> or <code>setsockopt</code> and have some event handling mechanism using <code>epoll</code> or <code>select</code> but before all this read more about non-blocking sockets and event handling the Beej&#39;s socket programming guide would be a good start here is the link <a href=\"http://beej.us/guide/bgnet/output/html/multipage/advanced.html\" rel=\"nofollow noreferrer\">beej.us/guide/bgnet/output/html/multipage/advanced.html</a>"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424901143, "post_id": 28728176, "comment_id": 45746925, "body": "You have to check both read() results for zero as well as -1. It means the peer disconnected."}], "owner": {"reputation": 301, "user_id": 4128992, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a10535d8cc47362d19b79ebbf3421e7e?s=128&d=identicon&r=PG&f=1", "display_name": "f0unix", "link": "https://stackoverflow.com/users/4128992/f0unix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 643, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1424893419, "creation_date": 1424893419, "question_id": 28728176, "link": "https://stackoverflow.com/questions/28728176/tcp-ip-socket-infinite-loop", "title": "TCP/IP Socket infinite loop", "body": "<p>I have the following two files.\nserver.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;sys/types.h&gt; \n#include &lt;sys/socket.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;netinet/in.h&gt;\n#include \"lib/colors.h\"\n\nvoid dostuff(int);\nvoid error(char *msg){\n    perror(msg);\n    exit(1);\n}\n\nint main(int argc, char *argv[]){\n    int sockfd, newsockfd, portno, clilen, pid;\n    struct sockaddr_in serv_addr, cli_addr;\n\n    if (argc &lt; 2) {\n        fprintf(stderr,\"ERROR, no port provided\\n\");\n        exit(1);\n    }\n\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n\n    if (sockfd &lt; 0) \n        error(\"ERROR opening socket\");\n\n    bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n    portno = atoi(argv[1]);\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr = INADDR_ANY;\n    serv_addr.sin_port = htons(portno);\n\n    if (bind(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr)) &lt; 0){\n        error(\"ERROR on binding\");\n    }\n\n    listen(sockfd,5);\n    clilen = sizeof(cli_addr);\n\n    while(1){\n        newsockfd = accept(sockfd, (struct sockaddr *) &amp;cli_addr, &amp;clilen);\n\n        if (newsockfd &lt; 0){\n            error(\"ERROR on accept\");\n        }\n        pid = fork();\n\n        if (pid &lt; 0){\n            error(\"ERROR on fork\");\n        }\n\n        if (pid == 0)  {\n            close(sockfd);\n            append_new(newsockfd);\n            exit(0);\n        }\n\n        else close(newsockfd);\n    }\n    return 0;\n}\n\nvoid append_new(int sock){\n    int n;\n    char buffer[256];\n\n    bzero(buffer,256);\n    n = read(sock,buffer,255);\n    if (n &lt; 0){\n        error(\"ERROR reading from socket\");\n    }\n    printf(\"Here is the message: %s\\n\",buffer);\n    n = write(sock,\"I got your message\",18);\n    if (n &lt; 0){\n        error(\"ERROR writing to socket\");\n    }\n}\n</code></pre>\n\n<p>and client.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;sys/types.h&gt; \n#include &lt;sys/socket.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;netinet/in.h&gt;\n#include \"lib/colors.h\"\n\n\nvoid error(char *msg){\n    perror(msg);\n    exit(0);\n}\n\nint main(int argc, char *argv[]){\n    int sockfd, portno, n;\n\n    struct sockaddr_in serv_addr;\n    struct hostent *server;\n\n    char buffer[256];\n    if (argc &lt; 3) {\n        fprintf(stderr,\"usage %s hostname port\\n\", argv[0]);\n        exit(0);\n    }\n\n    portno = atoi(argv[2]);\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n\n    if (sockfd &lt; 0){\n        error(\"ERROR opening socket\");\n    }\n    server = gethostbyname(argv[1]);\n\n    if (server == NULL) {\n        fprintf(stderr,\"ERROR, no such host\\n\");\n        exit(0);\n    }\n\n    bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET;\n    bcopy((char *)server-&gt;h_addr, \n        (char *)&amp;serv_addr.sin_addr.s_addr,\n        server-&gt;h_length);\n    serv_addr.sin_port = htons(portno);\n\n    if (connect(sockfd,(struct sockaddr *)&amp;serv_addr,sizeof(serv_addr)) &lt; 0){\n        error(\"ERROR connecting\");\n    }\n\n    while(1){\n        printf(\"Please enter the message: \");\n        bzero(buffer,256);\n        fgets(buffer,255,stdin);\n        n = write(sockfd,buffer,strlen(buffer));\n        if (n &lt; 0){\n            error(\"ERROR writing to socket\");\n        }\n        bzero(buffer,256);\n        n = read(sockfd,buffer,255);\n        if (n &lt; 0){ \n            error(\"ERROR reading from socket\");\n        }\n        printf(\"%s\\n\",buffer);\n    } \n    return 0;\n}\n</code></pre>\n\n<p>The server code is working properly, and client code is working for the first time.\nMy question is I need to be able to send consecutive messages from client to server, it doesn't seem the server is replying on the second message sent from client.\nAnd I I want to send a message from one client to another with the server as an interface, how can that be possible ?  </p>\n"}, {"tags": ["c", "antlr3", "zos", "ebcdic", "mvs"], "comments": [{"owner": {"reputation": 8847, "user_id": 624463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/995rN.png?s=128&g=1", "display_name": "cschneid", "link": "https://stackoverflow.com/users/624463/cschneid"}, "edited": false, "score": 1, "creation_date": 1424899246, "post_id": 28728160, "comment_id": 45745837, "body": "Googling &quot;antlr z/os&quot; comes up with this link <a href=\"https://groups.google.com/forum/#!topic/il-antlr-interest/U5P7berIQO8\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!topic/il-antlr-interest/U5P7berIQO&zwnj;&#8203;8</a> which seems relevant.  The principle appears to have a Stack Overflow ID, and may show up with a more direct answer."}, {"owner": {"reputation": 41, "user_id": 3803240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a02e613525602bf44ae3a5a4e8066?s=128&d=identicon&r=PG&f=1", "display_name": "user3803240", "link": "https://stackoverflow.com/users/3803240/user3803240"}, "reply_to_user": {"reputation": 8847, "user_id": 624463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/995rN.png?s=128&g=1", "display_name": "cschneid", "link": "https://stackoverflow.com/users/624463/cschneid"}, "edited": false, "score": 0, "creation_date": 1424904778, "post_id": 28728160, "comment_id": 45748640, "body": "It&#39;s relevant for sure.  Will try what Jim Idle is suggesting.  I understand this to mean, compile for ascii and use ebcdic/ascii conversion for i/o.  Will comment on the results after we try this. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3803240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a02e613525602bf44ae3a5a4e8066?s=128&d=identicon&r=PG&f=1", "display_name": "user3803240", "link": "https://stackoverflow.com/users/3803240/user3803240"}, "edited": false, "score": 1, "creation_date": 1426518054, "post_id": 28966196, "comment_id": 46393284, "body": "Thanks, Joe.  That worked.  With the right code page, things appear to work pretty well."}, {"owner": {"reputation": 4168, "user_id": 344249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OQ3ss.jpg?s=128&g=1", "display_name": "Joe Zitzelberger", "link": "https://stackoverflow.com/users/344249/joe-zitzelberger"}, "reply_to_user": {"reputation": 41, "user_id": 3803240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a02e613525602bf44ae3a5a4e8066?s=128&d=identicon&r=PG&f=1", "display_name": "user3803240", "link": "https://stackoverflow.com/users/3803240/user3803240"}, "edited": false, "score": 0, "creation_date": 1426566242, "post_id": 28966196, "comment_id": 46414655, "body": "Glad I could help :-)"}, {"owner": {"reputation": 4168, "user_id": 344249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OQ3ss.jpg?s=128&g=1", "display_name": "Joe Zitzelberger", "link": "https://stackoverflow.com/users/344249/joe-zitzelberger"}, "reply_to_user": {"reputation": 41, "user_id": 3803240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a02e613525602bf44ae3a5a4e8066?s=128&d=identicon&r=PG&f=1", "display_name": "user3803240", "link": "https://stackoverflow.com/users/3803240/user3803240"}, "edited": false, "score": 0, "creation_date": 1426805503, "post_id": 28966196, "comment_id": 46533465, "body": "At the risk of shamelessly pumping up my reputation, if the answer helped you, an up-vote would be nice. <i>hint</i> <i>hint</i>"}], "tags": [], "owner": {"reputation": 4168, "user_id": 344249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OQ3ss.jpg?s=128&g=1", "display_name": "Joe Zitzelberger", "link": "https://stackoverflow.com/users/344249/joe-zitzelberger"}, "is_accepted": false, "score": 2, "last_activity_date": 1425997248, "creation_date": 1425997248, "answer_id": 28966196, "question_id": 28728160, "link": "https://stackoverflow.com/questions/28728160/how-can-i-get-a-parser-generated-by-antlr3-5-in-c-to-work-in-an-mvs-ebcdic-envir/28966196#28966196", "title": "How can I get a parser generated by ANTLR3.5 in C to work in an MVS EBCDIC environment?", "body": "<p>You can switch the code page of the generated files to EBCDIC Latin-1 using:</p>\n\n<pre><code> ??=pragma filetag (\"IBM-1047\")\n</code></pre>\n\n<p>Then your parser will be searching for the EBCDIC characters at the correct code points.  You might want to give the generated file a good eyeballing to see if ANTLR has generated explicit ASCII ordinals (e.g. using 0x13 instead of a CR symbolic) and you might need to fix those up, but it shouldn't.</p>\n"}], "owner": {"reputation": 41, "user_id": 3803240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a02e613525602bf44ae3a5a4e8066?s=128&d=identicon&r=PG&f=1", "display_name": "user3803240", "link": "https://stackoverflow.com/users/3803240/user3803240"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1425997248, "creation_date": 1424893358, "question_id": 28728160, "link": "https://stackoverflow.com/questions/28728160/how-can-i-get-a-parser-generated-by-antlr3-5-in-c-to-work-in-an-mvs-ebcdic-envir", "title": "How can I get a parser generated by ANTLR3.5 in C to work in an MVS EBCDIC environment?", "body": "<p>We are using ANTLR 3.5.2 on linux to generate a parser in C.  We have been able to compile and link the generated C parser and the ANTLR C runtime on z/OS with the LE C compiler.   Of course, we'd like the parser to be able to work in the EBCDIC environment. </p>\n\n<p>What do we need to set or modify to get this to happen?  Is it easier to run ANTLR on MVS to get code that runs on MVS, or can we continue to generate code on Linux and run (with minor modifications) on z/OS?\nThanks very much,\nTony</p>\n"}, {"tags": ["c", "compilation", "cs50"], "comments": [{"owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 4, "creation_date": 1424893476, "post_id": 28728142, "comment_id": 45742634, "body": "<code>if (int row == 0)</code> This is not valid C.. It looks like you meant <code>if (row == 0)</code>. You should brush up on C syntax. Also your loop as it&#39;s currently written is an infinite loop, you never update <code>column</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4607367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0b3df800669d3c4c491a3a80fd3ceb?s=128&d=identicon&r=PG&f=1", "display_name": "betterthancrawling", "link": "https://stackoverflow.com/users/4607367/betterthancrawling"}, "edited": false, "score": 0, "creation_date": 1424894308, "post_id": 28728279, "comment_id": 45743137, "body": "Thank you for your help!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4064342"}, "is_accepted": false, "score": 1, "last_activity_date": 1424893761, "creation_date": 1424893761, "answer_id": 28728279, "question_id": 28728142, "link": "https://stackoverflow.com/questions/28728142/newbie-getting-expected-expression-error-when-compiling-c-code/28728279#28728279", "title": "Newbie getting expected expression error when compiling c code", "body": "<p>I fixed the problem areas. Once you declare an integer, you can't redeclare it in the same function. Also, the for loop requires three parameters, not two. </p>\n\n<pre><code>int height=100; // change 100 to desired height higher than 2.\nint row; // declared here (don't use int row again in function)\nint column;\nfor (row = 0; row &lt; height; row++)\n{\n    if (row == 0)\n    {\n        for (column = (height - 2); column &gt; 0;column--)\n        {\n            printf(\" \");\n        }\n    }\n        printf(\"##\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4607367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0b3df800669d3c4c491a3a80fd3ceb?s=128&d=identicon&r=PG&f=1", "display_name": "betterthancrawling", "link": "https://stackoverflow.com/users/4607367/betterthancrawling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1472248497, "creation_date": 1424893316, "last_edit_date": 1472248497, "question_id": 28728142, "link": "https://stackoverflow.com/questions/28728142/newbie-getting-expected-expression-error-when-compiling-c-code", "title": "Newbie getting expected expression error when compiling c code", "body": "<p>I'm taking an introductory class (CS50), and I'm having trouble compiling my code. </p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n\nint main (void)\n{\n    int height;\n    do\n    {\n        printf(\"Make your own pyramid!\\nDetermine its height by entering an integer from 0 to 23.\");\n        height = GetInt();\n    }\n    while (height &lt; 0 &amp;&amp; height &gt; 23);\n\n    int row;\n    int column;\n    for (int row = 0; row &lt; height; row++)\n    {\n        if (int row == 0)\n        {\n        for (int column = (height - 2); column &gt; 0;)\n        {\n            printf(\" \");\n        }\n        {\n            printf(\"##\");\n        } \n    }\n    else\n    {\n        //etc\n</code></pre>\n\n<p>The error that comes up is:</p>\n\n<pre><code>mario.c:18:13: error: expected expression\n        if (int row == 0)\n            ^\n1 error generated.\nmake: *** [mario] Error 1\n</code></pre>\n\n<p>I've tried looking up what \"expected expression\" means, but all the definitions are beyond my understanding. How do I fix this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1424893252, "post_id": 28728096, "comment_id": 45742499, "body": "In C all conversions from <code>void*</code> to pointer to any object are always valid. C tag removed and title edited."}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 1, "creation_date": 1424893533, "post_id": 28728096, "comment_id": 45742669, "body": "You just cast from void* to void*... what&#39;s the point"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1424894695, "post_id": 28728096, "comment_id": 45743347, "body": "@Shane: Could you print the value of <code>__cplusplus__</code> from within your file somewhere? It&#39;s fairly likely that you are accidentally compiling with a c++ compiler instead of a c compiler."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1424894776, "post_id": 28728096, "comment_id": 45743386, "body": "@Shane: Additionally, what is the name of the file that is producing these errors? In particular, I&#39;m interested in the file extension."}, {"owner": {"reputation": 682, "user_id": 2182775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41287912c263bf293f3e93bd6bce8b46?s=128&d=identicon&r=PG", "display_name": "fvannee", "link": "https://stackoverflow.com/users/2182775/fvannee"}, "edited": false, "score": 0, "creation_date": 1424895266, "post_id": 28728096, "comment_id": 45743647, "body": "Cast to <code>fabl_infod_twamp_reply_t*</code> instead of to <code>void*</code>"}, {"owner": {"reputation": 311, "user_id": 2924044, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2b7ae170baf0908adfd2211bd636d542?s=128&d=identicon&r=PG&f=1", "display_name": "Shandeep Murugasamy", "link": "https://stackoverflow.com/users/2924044/shandeep-murugasamy"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1424895660, "post_id": 28728096, "comment_id": 45743873, "body": "@Bill: It&#39;s *.c, and its taken care of now. Thank you though."}, {"owner": {"reputation": 31934, "user_id": 50049, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/5aBzi.jpg?s=128&g=1", "display_name": "Tim Post", "link": "https://stackoverflow.com/users/50049/tim-post"}, "edited": false, "score": 0, "creation_date": 1429723189, "post_id": 28728096, "comment_id": 47737078, "body": "This was <b><i>not</i></b> a C++ question. It could be, though, if the OP was actually using C++. What <i>compiler</i> they were using was probably the root of it. Sorry about that, @Shane."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 3, "last_activity_date": 1424895546, "creation_date": 1424895546, "answer_id": 28728806, "question_id": 28728096, "link": "https://stackoverflow.com/questions/28728096/typecasting-error-in-c/28728806#28728806", "title": "Typecasting error in C", "body": "<p>Casting a <code>void*</code> to a <code>void*</code> has very little effect.</p>\n\n<p>If the actual return value from <code>fabl_infod_extract_from_message</code> (i.e. \"behind\" the <code>void*</code>) is a <code>fabl_infod_twamp_reply_t*</code>, you should cast it to that type:</p>\n\n<pre><code>reply_hdr = (fabl_infod_twamp_reply_t*) fabl_infod_extract_from_message ...\n</code></pre>\n\n<p>or, using a C++-style cast:</p>\n\n<pre><code>reply_hdr = static_cast&lt;fabl_infod_twamp_reply_t*&gt;(fabl_infod_extract_from_message...\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 2924044, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2b7ae170baf0908adfd2211bd636d542?s=128&d=identicon&r=PG&f=1", "display_name": "Shandeep Murugasamy", "link": "https://stackoverflow.com/users/2924044/shandeep-murugasamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 28728806, "answer_count": 1, "score": 2, "last_activity_date": 1429723053, "creation_date": 1424893192, "last_edit_date": 1429723053, "question_id": 28728096, "link": "https://stackoverflow.com/questions/28728096/typecasting-error-in-c", "title": "Typecasting error in C", "body": "<pre><code>873: error: invalid conversion from 'void*' to 'fabl_infod_twamp_reply_t*'\n</code></pre>\n\n<p>And the code in lines 870-873 is;</p>\n\n<pre><code>     870:        reply_hdr = \n     871:              fabl_infod_extract_from_message(sizeof(fabl_infod_twamp_reply_t), \n     872:                                   &amp;buffer_pos,\n     873:                                   &amp;buffer_length);\n</code></pre>\n\n<p>The function parameters for \"fabl_infod_extract_from_message\";</p>\n\n<pre><code>static inline void * fabl_infod_extract_from_message (uint32_t struct_size, \n                                  uint8_t **buffer_pos, \n                                  uint32_t *buffer_length)\n</code></pre>\n\n<p>Any suggestions appreciated!</p>\n\n<p>Though I have tried typecating as;</p>\n\n<pre><code>reply_hdr =  (void *)fabl_infod_extract_from_message(sizeof(fabl_infod_twamp_reply_t), \n                                        &amp;buffer_pos,\n                                        &amp;buffer_length); \n</code></pre>\n"}, {"tags": ["c++", "c", "string", "global-variables"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1424892969, "post_id": 28727945, "comment_id": 45742322, "body": "In C++ <code>const</code> implies <code>static</code> by default. One way to deal with this is to put the definition <code>const char SINGLE_MSG[] = &quot;single message&quot;;</code> into a header, and include it in every file where used. The linker will then merge the separate instances into one."}, {"owner": {"reputation": 1049, "user_id": 3170912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65c53d46b9f9d295bd161f60ac97c16?s=128&d=identicon&r=PG&f=1", "display_name": "iwolf", "link": "https://stackoverflow.com/users/3170912/iwolf"}, "edited": false, "score": 0, "creation_date": 1424893076, "post_id": 28727945, "comment_id": 45742408, "body": "Is there a solid reason to be messing with global character arrays here instead of just using pointers to the string literal pool?"}, {"owner": {"reputation": 2134, "user_id": 1600770, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b030b4b6aaf0cb02919d5e9cf9f96f8b?s=128&d=identicon&r=PG", "display_name": "Agostino", "link": "https://stackoverflow.com/users/1600770/agostino"}, "edited": false, "score": 0, "creation_date": 1424895455, "post_id": 28727945, "comment_id": 45743758, "body": "I edited the answer to specify why I can&#39;t include these particular headers one into another. I need another way to declare this global constant."}], "answers": [{"comments": [{"owner": {"reputation": 2134, "user_id": 1600770, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b030b4b6aaf0cb02919d5e9cf9f96f8b?s=128&d=identicon&r=PG", "display_name": "Agostino", "link": "https://stackoverflow.com/users/1600770/agostino"}, "edited": false, "score": 0, "creation_date": 1424898782, "post_id": 28728080, "comment_id": 45745593, "body": "Thanks. I&#39;ll create a separate header file with the global definitions. This will simplify my code as well. I just need to specify a custom include directory."}], "tags": [], "owner": {"reputation": 560, "user_id": 4604776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cXKU6.jpg?s=128&g=1", "display_name": "Nonanon", "link": "https://stackoverflow.com/users/4604776/nonanon"}, "is_accepted": true, "score": 1, "last_activity_date": 1424893138, "creation_date": 1424893138, "answer_id": 28728080, "question_id": 28727945, "link": "https://stackoverflow.com/questions/28727945/proper-way-to-create-global-constant-c-strings/28728080#28728080", "title": "Proper way to create global constant C strings", "body": "<p>When you create a global constant variable in the header, then that variable never actually gets committed to memory.</p>\n\n<p>What happens instead is that any code that uses that variable simply replaces any reference with \"single msg\".</p>\n\n<p>This means there is no need use extern, but in turn does mean you must always include that header if you use the variable.</p>\n\n<p>What extern is actually used for is exposing a variable that has been declared in a .cpp file, and therefore is in memory somewhere, to other cpp files. This is only necessary if you want a global but dynamic variable.</p>\n"}], "owner": {"reputation": 2134, "user_id": 1600770, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b030b4b6aaf0cb02919d5e9cf9f96f8b?s=128&d=identicon&r=PG", "display_name": "Agostino", "link": "https://stackoverflow.com/users/1600770/agostino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2100, "favorite_count": 0, "accepted_answer_id": 28728080, "answer_count": 1, "score": 1, "last_activity_date": 1424898731, "creation_date": 1424892660, "last_edit_date": 1495542664, "question_id": 28727945, "link": "https://stackoverflow.com/questions/28727945/proper-way-to-create-global-constant-c-strings", "title": "Proper way to create global constant C strings", "body": "<p>I'm using C and this is what I'm doing to instantiate a global C string</p>\n\n<p>In the header of a single file</p>\n\n<pre><code>const char SINGLE_MSG[] = \"single msg\";\n</code></pre>\n\n<p>In the headers of all other files</p>\n\n<pre><code>extern const char SINGLE_MSG[];\n</code></pre>\n\n<p>It always works fine when compiling in C mode, but seems to create binder errors when compiling in C++ mode. Here is an example of such errors:</p>\n\n<pre><code>pksw_nd_proc_test2.dev32.i0.pr.obj : error LNK2001: unresolved external symbol \"char const * const SINGLE_MSG\" (?SINGLE_MSG@@3QBDB)\n</code></pre>\n\n<p>I've seen a similar <a href=\"https://stackoverflow.com/questions/7670816/create-extern-char-array-in-c\">question</a> where they also specify the buffer length. I'd rather not, since if don't want to have to remember changing that if I decide to change the string value in the source. That's the whole point to make this global, so every instance sees the same value.</p>\n\n<p>Am I doing something wrong?</p>\n\n<p>Since it's a constant, would it be better to make it static as well? It would be fine for me to have extra copies of it, as long as I don't have to copy the string value manually in the source to do the initialization.</p>\n\n<p>Edit: please note that I'm using a program that I don't fully control. It's a network simulator that lets me define a \"header block\" for each node. I do not have any way to explicitly include the header of a node in the header of another node.</p>\n\n<p>That's why I was using extern in C, and the different way globals work between the 2 languages is probably the reason I get the linker errors.</p>\n\n<p>According to the answers, the solution is to make a new, separate header file containing the definitions of the global variables and include that in all other headers.</p>\n"}, {"tags": ["python", "c", "python-c-extension"], "comments": [{"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1424898280, "post_id": 28727792, "comment_id": 45745337, "body": "Why do you need to know the type? What if it&#39;s neither?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1424908083, "post_id": 28727792, "comment_id": 45749890, "body": "@IgnacioVazquez-Abrams because I want to provide two methods to fetch the elements, one by index and by element name, there is a name associated with each one, and it&#39;s really important to use it to be able to access the element."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1424911933, "post_id": 28727792, "comment_id": 45751042, "body": "How would you do it in Python? Look for appropriate C-api equivalents to the Python tools you would use."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1424912041, "post_id": 28727792, "comment_id": 45751082, "body": "@user2357112 I have no idea because i have limited python knowledge. That&#39;s why I am asking, and that&#39;s why initially I didn&#39;t add the <a href=\"http://stackoverflow.com/tags/c\">c</a> tag to the question."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1424990882, "last_edit_date": 1424990882, "creation_date": 1424953299, "answer_id": 28742344, "question_id": 28727792, "link": "https://stackoverflow.com/questions/28727792/how-to-handle-the-key-argument-in-pyobject-getitem-function/28742344#28742344", "title": "How to handle the `key&#39; argument in PyObject_GetItem() function", "body": "<p>I just found out the way to do it properly, there is a <a href=\"https://docs.python.org/3/c-api/unicode.html\" rel=\"nofollow\"><code>PyUnicode_Check()</code></a> macro that takes a single <code>PyObject</code> parameter and returns <code>0</code> if the object is not a <code>unicode</code> object, so it returns <code>0</code> for the <code>int</code> key, and non-zero for the string key. </p>\n\n<p>That was exactly what I needed since now I can proceed to extract the text and perform a binary search in my list.</p>\n\n<p>Also, there is a <a href=\"https://docs.python.org/3/c-api/object.html\" rel=\"nofollow\"><code>PyObject_TypeCheck()</code></a> function which returns the type of an object, very useful in this case too.</p>\n"}], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 28742344, "answer_count": 1, "score": 2, "last_activity_date": 1424990882, "creation_date": 1424892141, "last_edit_date": 1424911737, "question_id": 28727792, "link": "https://stackoverflow.com/questions/28727792/how-to-handle-the-key-argument-in-pyobject-getitem-function", "title": "How to handle the `key&#39; argument in PyObject_GetItem() function", "body": "<p>I am writing a <code>python</code> module from a c library of my own, I need to know how to handle the <a href=\"https://docs.python.org/2/c-api/object.html#c.PyObject_GetItem\" rel=\"nofollow\"><code>PyObject_GetItem()</code></a> function, specifically the <code>key</code> argument, the documentation is not very helpful and I have seen an example where the solution is</p>\n\n<pre><code>Py_hash_t hash;\n\nhash = PyObject_Hash(key);\n</code></pre>\n\n<p>but the problem is, that I would like to be able to know whether <code>key</code> is a string or an integer.</p>\n\n<p>I could use the <code>PyObject_Hash()</code> methdod if there is a way to differentitate a string key from an integer key since I can also compute the hash value corresponding to the string using the Python hash function, but i'd rather not do that because I already have a binary search implemented on the list that I am trying to be able to access via subscripting in python.</p>\n\n<p>I also tried</p>\n\n<pre><code>PyArg_ParseTuple(key, \"i\", ...);\n</code></pre>\n\n<p>and for the string to check which one succeeds, but then the interpreter throws an exception because the <code>key</code> is not a tuple.</p>\n"}, {"tags": ["c", "strcat"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1424891647, "post_id": 28727561, "comment_id": 45741601, "body": "Because <code>strcat()</code> takes two string arguments, and because <code>&amp;s2[1]</code> isn&#39;t a character, its the string <code>&quot;sklsdksdhkjadsfhjkld&quot;;</code>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1424891808, "post_id": 28727561, "comment_id": 45741697, "body": "Not only that, it&#39;s UB because s1 isn&#39;t large enough to hold any more characters."}], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 4056398, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/1006402712/picture?type=large", "display_name": "Hazim", "link": "https://stackoverflow.com/users/4056398/hazim"}, "edited": false, "score": 0, "creation_date": 1424891796, "post_id": 28727655, "comment_id": 45741684, "body": "So how would I add just the one character at some index of s2 to s1?"}], "tags": [], "owner": {"reputation": 26053, "user_id": 2082964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Iybex.jpg?s=128&g=1", "display_name": "Chris Maes", "link": "https://stackoverflow.com/users/2082964/chris-maes"}, "is_accepted": true, "score": 2, "last_activity_date": 1424891934, "last_edit_date": 1424891934, "creation_date": 1424891630, "answer_id": 28727655, "question_id": 28727561, "link": "https://stackoverflow.com/questions/28727561/using-strcat-with-a-char-from-a-string/28727655#28727655", "title": "Using strcat() with a char from a string?", "body": "<p>since a char * is only a pointer to the start of a string; <code>C</code> supposes the end of the string is a <code>\\0</code> character. So all characters are added until he meets the <code>\\0</code> character</p>\n\n<p>you suppose <code>&amp;s2[1]</code> points to \"s\", (which is true), but since it is a char pointer, it points to the whole char array, until the <code>\\0</code> character at the end. Try this for example:</p>\n\n<pre><code>printf(\"%s\\n\", &amp;s2[1]);\n</code></pre>\n\n<p>which will yield:</p>\n\n<pre><code>sklsdksdhkjadsfhjkld\n</code></pre>\n\n<p>from the reference of strcat: </p>\n\n<blockquote>\n  <p>Concatenate strings\n  Appends a copy of the source string to the destination string. The terminating null character in destination is overwritten by the first character of source, and a null-character is included at the end of the new string formed by the concatenation of both in destination.</p>\n</blockquote>\n\n<p><strong>EDIT</strong>\nif you want to add only one (or some) characters, use <code>strncat</code>:</p>\n\n<pre><code>strncat(s1, &amp;s2[1], 1 /*number of chars to append*/);\n</code></pre>\n\n<p><strong>EDIT2</strong>\nmake sure your char arrays are large enough, as suggested by @PaulR:</p>\n\n<pre><code>char s1[32] = \"cat\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1424891917, "creation_date": 1424891917, "answer_id": 28727738, "question_id": 28727561, "link": "https://stackoverflow.com/questions/28727561/using-strcat-with-a-char-from-a-string/28727738#28727738", "title": "Using strcat() with a char from a string?", "body": "<p>Both arguments to <code>strcat</code> are pointers to <code>char</code> objects, and both are assumed to point to (the initial character of) a <em>string</em>.</p>\n\n<p>For example, this:</p>\n\n<pre><code>strcat(s1, &amp;s2[0]);\n</code></pre>\n\n<p>is equivalent to this:</p>\n\n<pre><code>strcat(s1, s2);\n</code></pre>\n\n<p>In both cases, the second argument is a pointer to the initial character of a string, which <code>strcat</code> uses to access the entire string up to and including the terminating <code>'\\0'</code> null character.</p>\n\n<p>But your program has undefined behavior. By declaring</p>\n\n<pre><code>char s1[] = \"cat\";\n</code></pre>\n\n<p>you let the compiler determine the size of <code>s1</code> based on the initializer. In this case, <code>s1</code> is an array of 4 <code>char</code>s (including the terminating <code>'\\0'</code>). There is no room to append anything to it. Apparently when you ran it, it copied characters into the memory space immediately following <code>s1</code>, which is why it <em>seemed</em> to \"work\".</p>\n\n<p>A working version of your program is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main(void)\n{\n    char s1[50] = \"cat\";\n    char s2[] = \"hsklsdksdhkjadsfhjkld\";   \n\n    strcat(s1, &amp;s2[1]);\n\n    printf(\"s1 is now %s\\n\", s1);\n}\n</code></pre>\n\n<p>Note the <code>#include</code> directives. These are not optional, even though you <em>might</em> get away with omitting them.</p>\n"}, {"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1424891921, "creation_date": 1424891921, "answer_id": 28727741, "question_id": 28727561, "link": "https://stackoverflow.com/questions/28727561/using-strcat-with-a-char-from-a-string/28727741#28727741", "title": "Using strcat() with a char from a string?", "body": "<p>You can use <a href=\"http://linux.die.net/man/3/strncat\" rel=\"nofollow\">strncat</a> instead of <a href=\"http://linux.die.net/man/3/strcat\" rel=\"nofollow\">strcat</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char s1[32] = \"cat\"; // NB: s1 needs to be large enough to hold additional chars !\n    char s2[32] = \"hsklsdksdhkjadsfhjkld\";   \n\n    strncat(s1, &amp;s2[1], 1);\n\n    printf(\"s1 is now %s\\n\", s1);\n\n    return 0;\n}\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/9569cfdd2faa89de\" rel=\"nofollow\">LIVE DEMO</a></kbd></p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1424892076, "creation_date": 1424892076, "answer_id": 28727774, "question_id": 28727561, "link": "https://stackoverflow.com/questions/28727561/using-strcat-with-a-char-from-a-string/28727774#28727774", "title": "Using strcat() with a char from a string?", "body": "<p>Because <code>strcat()</code> takes two string arguments, and because <code>&amp;s2[1]</code> isn't a character, it's the string <code>\"sklsdksdhkjadsfhjkld\";</code></p>\n\n<p>So <code>strcat(s1, &amp;s2[1]);</code> concatenates</p>\n\n<pre><code>\"cat\" + \"sklsdksdhkjadsfhjkld\"\n</code></pre>\n\n<p>Giving the result </p>\n\n<pre><code>\"catsklsdksdhkjadsfhjkld\"\n</code></pre>\n\n<p>If you want to append a single character you could do this</p>\n\n<pre><code>len = strlen (s1);\ns1[len] = s2[1];\ns1[len+1] = '\\0';       // new string terminator\n</code></pre>\n\n<p>but you would have to ensure there is enough array (string) space available.</p>\n"}], "owner": {"reputation": 351, "user_id": 4056398, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/1006402712/picture?type=large", "display_name": "Hazim", "link": "https://stackoverflow.com/users/4056398/hazim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3744, "favorite_count": 0, "accepted_answer_id": 28727655, "answer_count": 4, "score": 0, "last_activity_date": 1424892076, "creation_date": 1424891280, "question_id": 28727561, "link": "https://stackoverflow.com/questions/28727561/using-strcat-with-a-char-from-a-string", "title": "Using strcat() with a char from a string?", "body": "<p>I'm trying to append characters from a string into a new string. For the code below:</p>\n\n<pre><code>int main(void)\n{\n\nchar s1[] = \"cat\";\nchar s2[] = \"hsklsdksdhkjadsfhjkld\";   \n\nstrcat(s1, &amp;s2[1]);\n\nprintf(\"s1 is now %s\\n\", s1);\n\n}\n</code></pre>\n\n<p>Why is the output catsklsdksdhkjadsfhjkld and not cats? Why is the whole string added, instead of just the 's' located at s2[1]?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["java", "c", "linux", "unix", "operating-system"], "comments": [{"owner": {"reputation": 73, "user_id": 4265564, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ab7bb06c16c759cbfc4308ad6970c42?s=128&d=identicon&r=PG&f=1", "display_name": "mik", "link": "https://stackoverflow.com/users/4265564/mik"}, "reply_to_user": {"reputation": 5929, "user_id": 676877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb52e51002fe05e9a142c42184e7873?s=128&d=identicon&r=PG", "display_name": "Brett Okken", "link": "https://stackoverflow.com/users/676877/brett-okken"}, "edited": false, "score": 0, "creation_date": 1424891438, "post_id": 28727476, "comment_id": 45741446, "body": "I don&#39;t think that it will work on Unix based system"}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1424891806, "post_id": 28727476, "comment_id": 45741692, "body": "Check out blkid(8) -- <a href=\"http://linux.die.net/man/8/blkid\" rel=\"nofollow noreferrer\">linux.die.net/man/8/blkid</a>"}, {"owner": {"reputation": 5929, "user_id": 676877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb52e51002fe05e9a142c42184e7873?s=128&d=identicon&r=PG", "display_name": "Brett Okken", "link": "https://stackoverflow.com/users/676877/brett-okken"}, "edited": false, "score": 0, "creation_date": 1424897170, "post_id": 28727476, "comment_id": 45744706, "body": "Look at this answer: <a href=\"http://stackoverflow.com/a/5482977/676877\">stackoverflow.com/a/5482977/676877</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2141, "user_id": 3710044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd665eb6cb69cfcdbf5537974a78a17?s=128&d=identicon&r=PG&f=1", "display_name": "user3710044", "link": "https://stackoverflow.com/users/3710044/user3710044"}, "is_accepted": false, "score": 0, "last_activity_date": 1424894609, "creation_date": 1424894609, "answer_id": 28728536, "question_id": 28727476, "link": "https://stackoverflow.com/questions/28727476/how-to-get-serial-number-id-hard-disk-in-linux-using-c-or-java/28728536#28728536", "title": "how to get serial number id Hard Disk in Linux using C or Java?", "body": "<p>How to get the serial number of a hard disk is different for every Unix variant.</p>\n\n<p>For Linux, if you're running as root, the most direct way is to either use 'hdparm -i /dev/sda' or more correctly the C code (ioctl's) that it uses.</p>\n\n<p>The serial numbers aren't generally useful in Linux so if you aren't running as root you have to interrogate one of the few subsystems that actually has a use -- udev. It uses the serial numbers to uniquely identify devices and stores this information under /run/udev/data ( or /var/run/udev/data) in a file with a name based on the device numbers assigned by Linux.</p>\n\n<p>The data for the first disk found is in  /var/run/udev/data/b8:0 <br>\nthe second is in /var/run/udev/data/b8:16</p>\n\n<p>This is a text file.</p>\n\n<p>BTW: The disk serial number is NOT a good encryption key, as you see it's easy to find and is no where as random as it might look.</p>\n"}], "owner": {"reputation": 73, "user_id": 4265564, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ab7bb06c16c759cbfc4308ad6970c42?s=128&d=identicon&r=PG&f=1", "display_name": "mik", "link": "https://stackoverflow.com/users/4265564/mik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1133, "favorite_count": 0, "closed_date": 1424903413, "answer_count": 1, "score": 0, "last_activity_date": 1424894609, "creation_date": 1424891000, "question_id": 28727476, "link": "https://stackoverflow.com/questions/28727476/how-to-get-serial-number-id-hard-disk-in-linux-using-c-or-java", "closed_reason": "Duplicate", "title": "how to get serial number id Hard Disk in Linux using C or Java?", "body": "<p>I want make a system in which I can encrypt/decrypt something based on Hard Disk serial number so that key can't be shared across the computer.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1424889676, "post_id": 28727046, "comment_id": 45740509, "body": "Great.  So did you step through the code in the debugger?"}, {"owner": {"reputation": 5024, "user_id": 1239665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/yvQDs.jpg?s=128&g=1", "display_name": "Zubair", "link": "https://stackoverflow.com/users/1239665/zubair"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1424889748, "post_id": 28727046, "comment_id": 45740540, "body": "Program received signal SIGBUS, Bus error."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 5, "creation_date": 1424889776, "post_id": 28727046, "comment_id": 45740555, "body": "<code>while( input != EOF )</code> infinite loop."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1424889811, "post_id": 28727046, "comment_id": 45740572, "body": "Might want to take a look at the <code>scanf</code> documentation for what it returns."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1424889828, "post_id": 28727046, "comment_id": 45740580, "body": "<code>input</code> will only be equal to <code>EOF</code> if the user enters the value representing <code>EOF</code> (<code>-1</code>). I recommend you read e.g. <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">this <code>scanf</code> reference</a>."}, {"owner": {"reputation": 5024, "user_id": 1239665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/yvQDs.jpg?s=128&g=1", "display_name": "Zubair", "link": "https://stackoverflow.com/users/1239665/zubair"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1424889846, "post_id": 28727046, "comment_id": 45740587, "body": "@ouah, I am passing it ^D as the last argument."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 1, "creation_date": 1424889878, "post_id": 28727046, "comment_id": 45740604, "body": "Move scanf inside the loop?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1424889940, "post_id": 28727046, "comment_id": 45740632, "body": "<i>What</i> &quot;last&quot; argument? You only have <i>one</i> <code>scanf</code> call, followed by a (possibly infinite) loop where you don&#39;t read any more input from the user."}], "answers": [{"comments": [{"owner": {"reputation": 5024, "user_id": 1239665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/yvQDs.jpg?s=128&g=1", "display_name": "Zubair", "link": "https://stackoverflow.com/users/1239665/zubair"}, "edited": false, "score": 0, "creation_date": 1424890076, "post_id": 28727156, "comment_id": 45740692, "body": "In that case how the first digit will be scaned ? it will be &#39;0&#39; alway."}], "tags": [], "owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "is_accepted": true, "score": 1, "last_activity_date": 1424889958, "creation_date": 1424889958, "answer_id": 28727156, "question_id": 28727046, "link": "https://stackoverflow.com/questions/28727046/segmentation-fault-error-code-11/28727156#28727156", "title": "Segmentation Fault : error code 11", "body": "<p>Your scanf call is not in the loop, so this runs forever and then overruns the array buffer:</p>\n\n<pre><code>while( input != EOF ){\n        inputNumber[i] = input;\n        i++;\n};\n</code></pre>\n\n<p>Change to:</p>\n\n<pre><code>while( input != EOF ){\n        inputNumber[i] = input;\n        i++;\n       scanf(\"%llu\", &amp;input);\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64980, "user_id": 954986, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9bc332a4fccaf3e527fdc258b6990f2d?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/954986/nathan"}, "is_accepted": false, "score": 1, "last_activity_date": 1424891302, "last_edit_date": 1424891302, "creation_date": 1424890035, "answer_id": 28727175, "question_id": 28727046, "link": "https://stackoverflow.com/questions/28727046/segmentation-fault-error-code-11/28727175#28727175", "title": "Segmentation Fault : error code 11", "body": "<p>As ouah mentioned in the comments, you have an infinite loop. <code>Input</code> is never being consumed-- it's simple a value that's being copied into every element of <code>inputNumber</code>. As the value of input remains constant over time, it will never equal EOF and the loop will never end (unless the user simply entered the value representing EOF). So you're trying to write the value <code>input</code> to an infinite progression higher and higher in the <code>inputNumber</code> array, way out of bounds of the array.</p>\n\n<p>Perhaps you want to move scanf inside of the loop?</p>\n\n<p>Edit: Also, I'm not quite sure what you're trying to do, if you're trying to read in a number character by character (\"digit by digit\") and store it in the array, you could do that with the <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_getchar.htmhttp://\" rel=\"nofollow\" title=\"getchar\">getchar</a> function, which would return buffered input (i.e., standard input after you press enter) character by character as a <code>char</code> data type. In which case your <code>inputNumber</code> array would have to be a char array, and you would have to parse it into an integer with some code. Again, not sure if this is what you're trying to do, but I figured I'd mention it.</p>\n"}], "owner": {"reputation": 5024, "user_id": 1239665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/yvQDs.jpg?s=128&g=1", "display_name": "Zubair", "link": "https://stackoverflow.com/users/1239665/zubair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 28727156, "answer_count": 2, "score": 0, "last_activity_date": 1424891302, "creation_date": 1424889606, "question_id": 28727046, "link": "https://stackoverflow.com/questions/28727046/segmentation-fault-error-code-11", "title": "Segmentation Fault : error code 11", "body": "<p>The programe generates Segmentation fault: 11, on Yostemite </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;string.h&gt;\n\nint main (){\n\nunsigned long long int inputNumber[99]={0};\nint i = 0;\n\nunsigned long long int input= 0;\nscanf(\"%llu\", &amp;input);\n\n\nwhile( input != EOF ){\n        inputNumber[i] = input;\n</code></pre>\n\n<p>/** while debugging with gdb it gives : \nProgram received signal SIGBUS, Bus error. \non above line. \n*/\n            i++;\n    };</p>\n\n<pre><code>for( ; i &gt; 0; i--){\n    printf(\"%.4f\\n\", sqrt(inputNumber[i]));\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "compilation", "token", "c-preprocessor"], "answers": [{"comments": [{"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424894166, "post_id": 28727447, "comment_id": 45743076, "body": "What would be an example of an invalid <code>pp-number</code>?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424903740, "post_id": 28727447, "comment_id": 45748131, "body": "@fredoverflow: Some examples: 3q, 3.14159U, 019, 0y21, and my alltime favorite 0x7E+2 (which, unlike 0x7F+1, is a single token)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424918831, "post_id": 28727447, "comment_id": 45752708, "body": "@FredOverflow: Another pp-number which cannot be assigned a value in translation phase 7 (as the standard says) is <code>192.168.0.1</code>. That is, however, a single preprocessor token (which makes a difference if you need to use the <code>##</code> operator with it.)"}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424940160, "post_id": 28727447, "comment_id": 45759561, "body": "Indeed, the C++ standard says <code>The program fragment 1Ex is parsed as a preprocessing number token (one that is not a valid floating or integer literal token)</code>... so what happens to such a preprocessor token later on? Does it result in a compiler error, because it cannot be converted into a token? Then what exactly is the point of having preprocessor number tokens be a strict superset of the number tokens?"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424950762, "post_id": 28727447, "comment_id": 45766097, "body": "@FredOverflow: Either a preprocessing token is a valid token after preprocessing or the program is invalid (can&#39;t find if it&#39;s simply undefined or if a diagnostic is required atm), they&#39;re neither split into several tokens (<code>0x7E+2</code> is invalid, not re-parsed as <code>0x7E + 2</code>)  nor concatenated (given <code>#define MINUS -</code>, <code>MINUS-x</code> are two unary minus operators, not pre-decrement)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424978727, "post_id": 28727447, "comment_id": 45783974, "body": "@FredOverflow: Stringize (#) will work on any sequence of tokens (although commas and parentheses are difficult to insert into macro arguments :-) ), but concatenate (##) insists on single tokens. See <a href=\"http://ideone.com/b4caYK\" rel=\"nofollow noreferrer\">ideone.com/b4caYK</a>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 2, "creation_date": 1424979669, "post_id": 28727447, "comment_id": 45784534, "body": "@mafso: It&#39;s a constraint violation (6.4/2 &quot;Each preprocessing token that is converted to a token shall have the lexical form of a keyword, an identifier, a constant, a string literal, or a punctuator.&quot;) so a diagnostic is required (5.1.1.3). It&#39;s possible that a pp token never gets converted to a token, though. It might be stringized or ignored (<code>#define IGNORE(x)</code> / <code>IGNORE($=&gt;)</code> )"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 5, "last_activity_date": 1424890906, "creation_date": 1424890906, "answer_id": 28727447, "question_id": 28727000, "link": "https://stackoverflow.com/questions/28727000/why-does-the-preprocessor-distinguish-between-number-and-character-tokens/28727447#28727447", "title": "Why does the preprocessor distinguish between number and character tokens?", "body": "<p>The names of the non-terminals in the C grammars are not normative; they simply exist for purpose of description. It is only important that the behaviour be correctly described. The grammar itself is not sufficient to describe the language; it needs to be read along with the text, which imposes further restrictions on well-formed programs.</p>\n\n<p>There is not a one-to-one relationship between preprocessor tokens and program tokens. There is overlap: a preprocessor <code>identifier</code> might be a keywords or it might be one of the various definable symbol types (including some constants and <code>typedef-names</code>). A <code>pp-number</code> might be an integer or floating constant, but it might also be invalid. The lexical productions are not all mutually exclusive, and the actual application of lexical category to a substring of the program requires procedures described in the standard text, and not in the formal grammar.</p>\n\n<p>Character constants pass directly from the preprocessor into the program syntax without modification (although they are then subsumed into the <code>constant</code> category). If there is a single comment about preprocessor numbers (such as the fact that they must be convertible into a real numeric constant literal if they survive the preprocessor) is a sufficient reason to have the category.</p>\n\n<p>Also, what would it add to include <code>character-constant</code> in the definition of <code>pp-number</code>? You still need both productions in order to describe the language.</p>\n"}], "owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 2, "accepted_answer_id": 28727447, "answer_count": 1, "score": 9, "last_activity_date": 1424890906, "creation_date": 1424889495, "question_id": 28727000, "link": "https://stackoverflow.com/questions/28727000/why-does-the-preprocessor-distinguish-between-number-and-character-tokens", "title": "Why does the preprocessor distinguish between number and character tokens?", "body": "<p>According to the language specification, the lexical elements are defined like this:</p>\n\n<pre><code>token:\n    keyword\n    identifier\n\n    constant\n\n    string-literal\n    operator\n    punctuator\n\npreprocessing-token:\n    header-name\n    identifier\n\n    pp-number\n    character-constant\n\n    string-literal\n    operator\n    punctuator\n\n    each non-white-space character that cannot be one of the above\n</code></pre>\n\n<p>Why is there a distinction between a number and a character on the preprocessing token level, whereas on the token level, there are only constants? I don't see the benefit in this distinction.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "edited": false, "score": 0, "creation_date": 1424889551, "post_id": 28726996, "comment_id": 45740437, "body": "<a href=\"http://graphsketch.com/?eqn1_color=1&amp;eqn1_eqn=x\" rel=\"nofollow noreferrer\">graphsketch.com/?eqn1_color=1&amp;eqn1_eqn=x</a><i>x</i>x%20-%2020&amp;eqn2_col&zwnj;&#8203;or=2&amp;eqn2_eqn=x<i>x</i>x%20&zwnj;&#8203;%2B%2020&amp;eqn3_color=&zwnj;&#8203;3&amp;eqn3_eqn=&amp;eqn4_col&zwnj;&#8203;or=4&amp;eqn4_eqn=&amp;eqn5_&zwnj;&#8203;color=5&amp;eqn5_eqn=&amp;eq&zwnj;&#8203;n6_color=6&amp;eqn6_eqn=&zwnj;&#8203;&amp;x_min=-8&amp;x_max=8&amp;y_&zwnj;&#8203;min=-75&amp;y_max=75&amp;x_t&zwnj;&#8203;ick=1&amp;y_tick=1&amp;x_lab&zwnj;&#8203;el_freq=5&amp;y_label_fr&zwnj;&#8203;eq=5&amp;do_grid=0&amp;bold_&zwnj;&#8203;labeled_lines=0&amp;line&zwnj;&#8203;_width=4&amp;image_w=850&zwnj;&#8203;&amp;image_h=525 (if the graph doesn&#39;t appear)"}, {"owner": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "edited": false, "score": 0, "creation_date": 1424889945, "post_id": 28726996, "comment_id": 45740635, "body": "<a href=\"http://graphsketch.com/?eqn1_color=1&amp;eqn1_eqn=x\" rel=\"nofollow noreferrer\">graphsketch.com/?eqn1_color=1&amp;eqn1_eqn=x</a><i>x</i>x%20-%2020&amp;eqn2_col&zwnj;&#8203;or=2&amp;eqn2_eqn=x<i>x</i>x%20&zwnj;&#8203;%2B%2020&amp;eqn3_color=&zwnj;&#8203;3&amp;eqn3_eqn=&amp;eqn4_col&zwnj;&#8203;or=4&amp;eqn4_eqn=&amp;eqn5_&zwnj;&#8203;color=5&amp;eqn5_eqn=&amp;eq&zwnj;&#8203;n6_color=6&amp;eqn6_eqn=&zwnj;&#8203;&amp;x_min=-8&amp;x_max=8&amp;y_&zwnj;&#8203;min=-75&amp;y_max=75&amp;x_t&zwnj;&#8203;ick=1&amp;y_tick=1&amp;x_lab&zwnj;&#8203;el_freq=5&amp;y_label_fr&zwnj;&#8203;eq=5&amp;do_grid=0&amp;bold_&zwnj;&#8203;labeled_lines=0&amp;line&zwnj;&#8203;_width=4&amp;image_w=850&zwnj;&#8203;&amp;image_h=525"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424890070, "post_id": 28726996, "comment_id": 45740688, "body": "many numbers cannot be exactly represented in a float/double variable.  Due to this fact, a &#39;==&#39; comparison for float/double values should never be performed. (many compilers can be told to flag &#39;==&#39; operations on float/double values.  The proper comparion is to compare to within some delta value."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "edited": false, "score": 0, "creation_date": 1424892310, "post_id": 28727196, "comment_id": 45741951, "body": "I simplified it from the original expression which is x - (x * x * x - a) / (3 * x * x)"}], "tags": [], "owner": {"reputation": 56, "user_id": 3700962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7d10c1d7bdabb7b15cdfed917720ad?s=128&d=identicon&r=PG&f=1", "display_name": "cakefactory", "link": "https://stackoverflow.com/users/3700962/cakefactory"}, "is_accepted": false, "score": 1, "last_activity_date": 1424890100, "creation_date": 1424890100, "answer_id": 28727196, "question_id": 28726996, "link": "https://stackoverflow.com/questions/28726996/why-does-this-code-fail-for-these-weird-numbers/28727196#28727196", "title": "Why does this code fail for these weird numbers?", "body": "<p>shouldn't it be:</p>\n\n<p>y = x - (2 * x * x * x + a) / (3 * x * x);</p>\n\n<p>?</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "edited": false, "score": 0, "creation_date": 1424897304, "post_id": 28727429, "comment_id": 45744786, "body": "Thanks a lot, this was very helpful"}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": true, "score": 2, "last_activity_date": 1424890857, "creation_date": 1424890857, "answer_id": 28727429, "question_id": 28726996, "link": "https://stackoverflow.com/questions/28726996/why-does-this-code-fail-for-these-weird-numbers/28727429#28727429", "title": "Why does this code fail for these weird numbers?", "body": "<p>Apart from posting an incorrect formula...</p>\n\n<p>You are performing floating point arithmetic, and floating point arithmetic has rounding errors. Even with the rounding errors, you will get very very close to a cube root, but you won't get exactly there (usually cube roots are irrational, and floating point numbers are rational). </p>\n\n<p>Once your x is very close to the cube root, when you calculate y, you should get the same result as x, but because of rounding errors, you may get something very close to x but slightly different instead. So x != y. Then you do the same calculation starting with y, and you may get x as the result. So your result will forever switch between two values. </p>\n\n<p>You can do the same thing with three numbers x, y and z and quit when either z == y or z == x. This is much more likely to stop, and with a bit of mathematics you might even be able to proof that it will always stop. </p>\n\n<p>Better to calculate the change in x, and determine whether that change is small enough so that the next step will not change x except for rounding errors. </p>\n"}], "owner": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 28727429, "answer_count": 2, "score": 0, "last_activity_date": 1424890857, "creation_date": 1424889480, "question_id": 28726996, "link": "https://stackoverflow.com/questions/28726996/why-does-this-code-fail-for-these-weird-numbers", "title": "Why does this code fail for these weird numbers?", "body": "<p>I wrote a function to find the cube root of a number a using the Newton-Raphson method to find the root of the function f(x) = x^3 - a. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ndouble cube_root(double a)\n{\n    double x = a;\n    double y;\n    int equality = 0;\n\n    if(x == 0)\n    {\n        return(x);\n    }\n\n    else\n    {\n        while(equality == 0)\n        {\n            y = (2 * x * x * x + a) / (3 * x * x);\n\n            if(y == x)\n            {\n                equality = 1;\n            }\n\n            x = y;\n\n        }\n\n    return(x);\n\n    }\n}\n</code></pre>\n\n<p><a href=\"http://graphsketch.com/?eqn1_color=1&amp;eqn1_eqn=x*x*x%20-%2020&amp;eqn2_color=2&amp;eqn2_eqn=x*x*x%20%2B%2020&amp;eqn3_color=3&amp;eqn3_eqn=&amp;eqn4_color=4&amp;eqn4_eqn=&amp;eqn5_color=5&amp;eqn5_eqn=&amp;eqn6_color=6&amp;eqn6_eqn=&amp;x_min=-8&amp;x_max=8&amp;y_min=-75&amp;y_max=75&amp;x_tick=1&amp;y_tick=1&amp;x_label_freq=5&amp;y_label_freq=5&amp;do_grid=0&amp;bold_labeled_lines=0&amp;line_width=4&amp;image_w=850&amp;image_h=525\" rel=\"nofollow noreferrer\">f(x) for a = 20 (blue) and a = -20  (red) http://graphsketch.com/?eqn1_color=1&amp;eqn1_eqn=x*x*x%20-%2020&amp;eqn2_color=2&amp;eqn2_eqn=x*x*x%20%2B%2020&amp;eqn3_color=3&amp;eqn3_eqn=&amp;eqn4_color=4&amp;eqn4_eqn=&amp;eqn5_color=5&amp;eqn5_eqn=&amp;eqn6_color=6&amp;eqn6_eqn=&amp;x_min=-8&amp;x_max=8&amp;y_min=-75&amp;y_max=75&amp;x_tick=1&amp;y_tick=1&amp;x_label_freq=5&amp;y_label_freq=5&amp;do_grid=0&amp;bold_labeled_lines=0&amp;line_width=4&amp;image_w=850&amp;image_h=525</a></p>\n\n<p>The code seemed to be working well, for example it calculates the cube root of 338947578237847893823789474.324623784 just fine, but weirdly fails for some numbers for example 4783748237482394? The code just seems to go into an infinite loop and must be manually terminated.</p>\n\n<p>Can anyone explain why the code should fail on this number? I've included the graph to show that, using the starting value of a, this method should always keep providing closer and closer estimates until the two values are equal to working precision. So I don't really get what's special about this number.</p>\n"}, {"tags": ["c", "file", "parsing", "text"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1424887246, "post_id": 28726256, "comment_id": 45739075, "body": "Just read the whole lines (<code>fgets</code> or <code>fscanf(f, &quot;%s...)</code>), and then parse them on by one."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1424887625, "post_id": 28726256, "comment_id": 45739319, "body": "Your suggestion will not work. A decimal number read this way is <i>far</i> larger than can be stored into a <code>char</code>, you can only store at most three &quot;buts&quot; this way. Parsing a <i>decimal</i> as binary is possible but it may be easier to just parse the actual characters, as a string."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1424890486, "post_id": 28726256, "comment_id": 45740904, "body": "the code is reading a int (4 bytes) and the bincalc function is expecting a char (1 byte) suggest convert the input to a char by reading 8 characters and compressing them into one char of 8 bits then calling the bincalc function with the result of that compression"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424893663, "post_id": 28726256, "comment_id": 45742762, "body": "@user3629249: ... but of course then there is nothing left to do in that function ..."}], "answers": [{"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1424888575, "creation_date": 1424888575, "answer_id": 28726731, "question_id": 28726256, "link": "https://stackoverflow.com/questions/28726256/read-8-bit-binary-numbers-from-text-file-in-c/28726731#28726731", "title": "Read 8 Bit Binary Numbers from text File in C", "body": "<p>This is not the standard track to do it, but it ok. You are scanning the file reading <code>int</code>s so it will read the string and interpret them as decimal number, which you should in turn convert to the <em>corresponding</em> binary, i.e. converting 1010 decimal to 2^3+2^1=9 decimal. This is of course possible, you just need to <em>transform</em> powers of ten to powers of 2 (1.10^3+0.10^2+1.10^1+0.10^0 to 1.2^3+0.2^2+1.2^1+0.2^0). Be careful that this work with 8-bits numbers, but not with too huge ones (16-bits will not).</p>\n\n<p>The more common way is to read the strings and decode the strings directly, or read char by char and make an incremental conversion.</p>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1424890598, "post_id": 28726995, "comment_id": 45740960, "body": "feof() is not valid until after trying to read past the end of the file.  In general, never use feof to control a loop  the rest of this answer looks good"}], "tags": [], "owner": {"reputation": 1306, "user_id": 2807749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3884afad2069925c2c0ca50d49e4b093?s=128&d=identicon&r=PG&f=1", "display_name": "user0815", "link": "https://stackoverflow.com/users/2807749/user0815"}, "is_accepted": false, "score": 0, "last_activity_date": 1424890071, "last_edit_date": 1424890071, "creation_date": 1424889480, "answer_id": 28726995, "question_id": 28726256, "link": "https://stackoverflow.com/questions/28726256/read-8-bit-binary-numbers-from-text-file-in-c/28726995#28726995", "title": "Read 8 Bit Binary Numbers from text File in C", "body": "<p>If you want to have a number at the end, I would suggest something like the following:</p>\n\n<pre><code>int i;\nchar buf[10], val;\nFILE* f = fopen(\"test.txt\", \"r\");\n\nwhile( ! feof(f) ) {\n  val = 0;\n  fscanf(f, \"%s\", buf);\n  for( i=0; i&lt;8; i++ )\n    val = (val &lt;&lt; 1) | (buf[i]-48);\n  /* val is a 8 bit number now representing the binary digits */\n  bincalc(val);\n}\n\nfclose(f);\n</code></pre>\n\n<p>This is just a short snippet to illustrate the idea and does not catch all corner cases regarding the file or buffer handling. I hope it will help anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 1295813, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9f94581af9fbb689ab0da7e68d4f7256?s=128&d=identicon&r=PG", "display_name": "Vcoder", "link": "https://stackoverflow.com/users/1295813/vcoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1424890321, "creation_date": 1424890321, "answer_id": 28727253, "question_id": 28726256, "link": "https://stackoverflow.com/questions/28726256/read-8-bit-binary-numbers-from-text-file-in-c/28727253#28727253", "title": "Read 8 Bit Binary Numbers from text File in C", "body": "<p>I think this is a possible solution, i made it simple so you can understand and adapt to your needs. You only need to repeat this for each line.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n   FILE *file =fopen(\"data\",\"r\");\n   char *result=calloc(1,sizeof(char));\n   char line[8];\n   int i=0;\n\n   for(;i&lt;8;i++)\n   {\n      char get = (char)getc(file);\n      if(get == '0')\n         *result &lt;&lt;= 1;\n      else if(get == '1')\n         *result = ((*result&lt;&lt;1)|0x1) ;\n   }\n\n   printf(\"-&gt;%c\\n\",*result);\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1424891353, "last_edit_date": 1424891353, "creation_date": 1424890646, "answer_id": 28727359, "question_id": 28726256, "link": "https://stackoverflow.com/questions/28726256/read-8-bit-binary-numbers-from-text-file-in-c/28727359#28727359", "title": "Read 8 Bit Binary Numbers from text File in C", "body": "<p>I don't know of a way to specify binary format for <code>fscanf()</code> but you can convert a binary string like this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid fatal(char *msg) {\n    printf(\"%s\\n\", msg);\n    exit (1);\n}\n\nunsigned binstr2int(char *str) {\n    int i = 0;\n    while (*str != '\\0' &amp;&amp; *str != '\\n') {   // string term or newline?\n        if (*str != '0' &amp;&amp; *str != '1')      // binary digit?\n            fatal (\"Not a binary digit\\n\");\n        i = i * 2 + (*str++ &amp; 1);\n    }\n    return i;\n}\n\nint main(void) {\n    unsigned x;\n    char inp[100];\n    FILE *fp;\n    if ((fp = fopen(\"test.txt\", \"r\")) == NULL)\n        fatal(\"Unable to open file\");\n    while (fgets(inp, 99, fp) != NULL) {\n        x = binstr2int(inp);\n        printf (\"%X\\n\", x);\n    }\n    fclose (fp);\n    return 0;\n}\n</code></pre>\n\n<p>File input</p>\n\n<pre><code>01101101\n10110110\n10101101\n01001111\n11010010\n00010111\n00101011\n</code></pre>\n\n<p>Program output</p>\n\n<pre><code>6D\nB6\nAD\n4F\nD2\n17\n2B\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "is_accepted": false, "score": 0, "last_activity_date": 1424944377, "creation_date": 1424944377, "answer_id": 28739161, "question_id": 28726256, "link": "https://stackoverflow.com/questions/28726256/read-8-bit-binary-numbers-from-text-file-in-c/28739161#28739161", "title": "Read 8 Bit Binary Numbers from text File in C", "body": "<p>Read the file line by line, then use <a href=\"http://www.manpagez.com/man/3/strtol/\" rel=\"nofollow\"><code>strtol()</code></a> with base <code>2</code>.</p>\n\n<p>Or, if the file is guaranteed to be not long, you could also read the full contents in (dynamically allocated) memory and use the <code>endptr</code> parameter.</p>\n"}], "owner": {"reputation": 95, "user_id": 2665682, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/679f14ac26b5524ceeda143d37a603ec?s=128&d=identicon&r=PG", "display_name": "user2665682", "link": "https://stackoverflow.com/users/2665682/user2665682"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2141, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1424944377, "creation_date": 1424887083, "question_id": 28726256, "link": "https://stackoverflow.com/questions/28726256/read-8-bit-binary-numbers-from-text-file-in-c", "title": "Read 8 Bit Binary Numbers from text File in C", "body": "<p>I'm trying to read from a text file in C that contains a list of 8 bit binary numbers to be used in another function.</p>\n\n<pre><code>The text file is formatted like:\n01101101\n10110110\n10101101\n01001111\n11010010\n00010111\n00101011\n</code></pre>\n\n<p>Ect. . .</p>\n\n<p>Heres kinda what i was trying to do</p>\n\n<p>Pseudo code</p>\n\n<pre><code>void bincalc(char 8_bit_num){ \n//does stuff \n}\n\nint main()\n{\n    FILE* f = fopen(\"test.txt\", \"r\");\n    int n = 0, i = 0;\nwhile( fscanf(f, \"%d \", &amp;n) &gt; 0 ) // parse %d followed by a new line or space\n{\n    bincalc(n);\n\n}\n\nfclose(f);\n</code></pre>\n\n<p>}</p>\n\n<p>I think i'm on the right track, however any help is appreciated. </p>\n"}, {"tags": ["c", "factorization"], "comments": [{"owner": {"reputation": 11474, "user_id": 1195056, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pe03k.jpg?s=128&g=1", "display_name": "krillgar", "link": "https://stackoverflow.com/users/1195056/krillgar"}, "edited": false, "score": 2, "creation_date": 1424886933, "post_id": 28726078, "comment_id": 45738860, "body": "Do you mean C++ instead of C#?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1424888975, "post_id": 28726078, "comment_id": 45740109, "body": "Add a counter for each next <code>cur_factor</code> instead of printing them immediately."}, {"owner": {"reputation": 387, "user_id": 3334969, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/533925677/picture?type=large", "display_name": "Leopold Stoich", "link": "https://stackoverflow.com/users/3334969/leopold-stoich"}, "edited": false, "score": 0, "creation_date": 1424889809, "post_id": 28726078, "comment_id": 45740570, "body": "I meant to tag it for C, not C++, apologies."}], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 3334969, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/533925677/picture?type=large", "display_name": "Leopold Stoich", "link": "https://stackoverflow.com/users/3334969/leopold-stoich"}, "edited": false, "score": 0, "creation_date": 1424899425, "post_id": 28728660, "comment_id": 45745938, "body": "Thanks a lot, I see what you did, and am now going to apply it to a new assignment."}], "tags": [], "owner": {"reputation": 7248, "user_id": 1925388, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/jgnbc.jpg?s=128&g=1", "display_name": "Anmol Singh Jaggi", "link": "https://stackoverflow.com/users/1925388/anmol-singh-jaggi"}, "is_accepted": true, "score": 3, "last_activity_date": 1424898747, "last_edit_date": 1424898747, "creation_date": 1424895022, "answer_id": 28728660, "question_id": 28726078, "link": "https://stackoverflow.com/questions/28726078/prime-factorization/28728660#28728660", "title": "Prime Factorization", "body": "<p>You could do this by introducing a <code>while</code> loop inside the <code>if</code> block and count the power of the current prime factor and print it there itself.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n\n    int n;\n\n    // Get the user input.\n    printf( \"Please enter a number.\\n\" );\n    scanf( \"%d\", &amp;n );\n\n    // Print out factorization\n    printf( \"The prime factorization of %d is \", n );\n\n    // Loop through, finding prime factors.\n    int cur_factor = 2;\n    while ( cur_factor &lt; n )\n    {\n\n        // Found a factor.\n        if ( n % cur_factor == 0 )\n        {\n            int expo = 0;\n            while ( n % cur_factor == 0 )\n            {\n                n = n / cur_factor;\n                expo++;\n            }\n            printf( \"%d^%d\", cur_factor, expo );\n            if ( n != 1 )\n            {\n                printf( \" x \" );\n            }\n        }\n\n        // Going to the next possible factor.\n        cur_factor++;\n    }\n\n    // Prints last factor.\n    if ( n != 1 )\n    {\n        printf( \"%d^1.\\n\", cur_factor );\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 3334969, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/533925677/picture?type=large", "display_name": "Leopold Stoich", "link": "https://stackoverflow.com/users/3334969/leopold-stoich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 0, "accepted_answer_id": 28728660, "answer_count": 1, "score": -1, "last_activity_date": 1424898747, "creation_date": 1424886527, "last_edit_date": 1424888827, "question_id": 28726078, "link": "https://stackoverflow.com/questions/28726078/prime-factorization", "title": "Prime Factorization", "body": "<p>So my professor has us writing a program that fines the prime facotrization of a number given by the user. And provide the answer in exponents. So if your number was 96, I have the program listing out like this 2 x 2 x 2 x 2 x 3. He would like us to have it listed out like this. 2^5 x 3^1. How would I go about doing this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    int i, n;\n\n    // Get the user input.\n    printf(\"Please enter a number.\\n\");\n    scanf(\"%d\", &amp;n);\n\n    // Print out factorization\n    printf(\"The prime factorization of %d is \", n);\n\n    // Loop through, finding prime factors.\n    int cur_factor = 2;\n    while (cur_factor &lt; n) {\n\n        // Found a factor.\n        if (n%cur_factor == 0) {\n            printf(\"%d x \", cur_factor);\n            n = n/cur_factor;\n        }\n\n        // Going to the next possible factor.\n        else\n            cur_factor++;\n    }\n\n    // Prints last factor.\n    printf(\"%d.\\n\", cur_factor);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "linked-list", "polynomial-math", "polynomials"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886557, "post_id": 28726064, "comment_id": 45738598, "body": "<code>decode a polynomial</code>? parse it? <a href=\"http://stackoverflow.com/a/605858/1983495\">Do not cast the result of <code>malloc()</code></a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886655, "post_id": 28726064, "comment_id": 45738675, "body": "what do you think this <code>!coeff_visited;</code> does? You probably mean <code>coeff_visited = !coeff_visited;</code>?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886801, "post_id": 28726064, "comment_id": 45738785, "body": "did you know that the compiler ignores white space characters?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1424886880, "post_id": 28726064, "comment_id": 45738829, "body": "If the leading term has no leading sign declaration (such as your <code>x^7</code> leading term vs <code>+x^7</code> or <code>-x^7</code>) the value of <code>sign</code> is <i>indeterminate</i>. Thusly, evaluation of indeterminate values (such as using said value in a multiplication) invokes <i>undefined behavior</i>. It needs to be declared and iniitialized <i>inside</i> the <code>while-loop</code> with a default value of <code>1</code> and changed to <code>-1</code> on detection of a leading <code>-</code> on the current term."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1424887214, "post_id": 28726064, "comment_id": 45739053, "body": "temp is no initialized,  temp-&gt;coeff should be set to 0  Or all the struct should be set to 0 memset(temp, 0, sizeof(poly));"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 1, "creation_date": 1424887299, "post_id": 28726064, "comment_id": 45739106, "body": "You can use &#39;0&#39; and &#39;9&#39; instead of 48 and 57, it will be easiest to read"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1424887430, "post_id": 28726064, "comment_id": 45739194, "body": "@Aur&#233;lienLAJOIE <code>can</code> -&gt; <code>should</code>, and the same applies to <code>&#39;+</code>&#39; and `&#39;-`` and all the other characters..."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 2867376, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VYYlT.jpg?s=128&g=1", "display_name": "Ashish Tomer", "link": "https://stackoverflow.com/users/2867376/ashish-tomer"}, "edited": false, "score": 0, "creation_date": 1424888247, "post_id": 28726248, "comment_id": 45739693, "body": "<code>!value;</code> is not incorrect. The <code>!</code> operator performs a logical negation of its operand.  This operator actually produces an integer result, either zero or one.  And that&#39;s what i&#39;m playing with <code>TRUE==1</code> and <code>FALSE==0</code> &lt;br/&gt; And the <code>sign</code> is being initialized on every iteration, after checking whether the current character in <code>polynomial</code> string is <code>-</code> or <code>+</code>  <code>if(polynomial[i]==43) {i++; sign=1;}</code>   <code>if(polynomial[i]==45) {i++; sign=-1;}</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 55, "user_id": 2867376, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VYYlT.jpg?s=128&g=1", "display_name": "Ashish Tomer", "link": "https://stackoverflow.com/users/2867376/ashish-tomer"}, "edited": false, "score": 1, "creation_date": 1424889327, "post_id": 28726248, "comment_id": 45740314, "body": "<code>!value;</code> does nothing, it&#39;s useless expression because <code>!value</code>&#39;s result is not stored anywhere, it&#39;s not incorrect, but it&#39;s useless. You initilize <code>sign</code> if and only if a <code>+</code> is found otherwise it&#39;s uninitizlied and you can check that by executing the program after fixing the <code>!value;</code> problem. Not initializing the <code>sign</code> variable when there is no <code>+</code> is a problem for <code>x^2 + 2x + 3</code> for example."}, {"owner": {"reputation": 55, "user_id": 2867376, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VYYlT.jpg?s=128&g=1", "display_name": "Ashish Tomer", "link": "https://stackoverflow.com/users/2867376/ashish-tomer"}, "edited": false, "score": 0, "creation_date": 1424928558, "post_id": 28726248, "comment_id": 45755129, "body": "Yes you are right. And I have many logical errors too, I&#39;ll rectify them."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1424889380, "last_edit_date": 1424889380, "creation_date": 1424887045, "answer_id": 28726248, "question_id": 28726064, "link": "https://stackoverflow.com/questions/28726064/cant-decode-a-polynomial-properly/28726248#28726248", "title": "Can&#39;t decode a polynomial properly", "body": "<p>There are many errors in your code, the most important is the expresions like</p>\n\n<pre><code>!value;\n</code></pre>\n\n<p>you need to assign to it, lik</p>\n\n<pre><code>value = !value;\n</code></pre>\n\n<p>And you are not initializing <code>sign</code> when there is not <code>'+'</code> sign in front of the next token, you need to initialize it to <code>1</code>, check if there is a <code>'-'</code> and set it to <code>-1</code> otherwise ignore the <code>'+'</code>.</p>\n\n<p>Now I appended the fixed code, try it</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define TRUE 1\n#define FALSE 0\n\ntypedef struct _polynomial {\n    int coeff;\n    char var;\n    int exp;\n    struct _polynomial *link;\n} poly;\n\npoly *decode(char*);\n\nint\nmain()\n{\n    char string[100];\n\n    printf(\"\\n---Enter 1st polynomial---\\n\\n\");\n    scanf(\"%99s\", string);\n    decode(string);\n\n    printf(\"\\n---Enter 2nd polynomial---\\n\\n\");\n    scanf(\"%99s\", string);\n    decode(string);\n\n    //More statements further\n\n    return 0;\n}\n\n/*--- Decoding Polynomial ---*/\n\npoly* decode(char *polynomial)\n{\n    poly *p = NULL, *q = NULL, *temp = NULL;\n    int   i = 0, sign;\n    short coeff_entry=TRUE, exp_entry=FALSE, var_visited=FALSE, exp_visited=FALSE, coeff_visited=FALSE;\n\n    while (polynomial[i] != '\\0')\n    {\n        temp = malloc(sizeof(poly));\n        if (temp == NULL)\n        {\n            printf(\"Error! Memory not allocated\\n\");\n            exit(1);\n        }\n\n        sign = 1;\n        if (polynomial[i] == 43)\n            i++;\n        if (polynomial[i] == 45)\n        {\n            i++;\n            sign=-1;\n        }\n\n        while (1)\n        {\n            if ((polynomial[i] &gt;= 48 &amp;&amp; polynomial[i] &lt;= 57) &amp;&amp; coeff_entry == TRUE)\n            {\n                temp-&gt;coeff   = 10 * temp-&gt;coeff + polynomial[i] - 48;\n                coeff_visited = TRUE;\n            }\n            else if ((polynomial[i] &gt;= 65 &amp;&amp; polynomial[i] &lt;= 90) || (polynomial[i] &gt;= 97 &amp;&amp; polynomial[i] &lt;= 122))\n            {\n                temp-&gt;var   = polynomial[i];\n                coeff_entry = FALSE;\n                exp_entry   = TRUE;\n                var_visited = TRUE;\n            }\n            else if ((polynomial[i] &gt;= 48 &amp;&amp; polynomial[i] &lt;= 57) &amp;&amp; exp_entry == TRUE)\n            {\n                temp-&gt;exp=10*(temp-&gt;exp)+(polynomial[i]-48);\n                exp_visited=TRUE;\n            }\n            else if (polynomial[i] == 43 || polynomial[i] == 45 || polynomial[i] == '\\0')\n            {\n                exp_entry=FALSE;\n                coeff_entry=TRUE;\n                if (var_visited &amp;&amp; !exp_visited)\n                {\n                    temp-&gt;exp   = 1;\n                    var_visited = !var_visited;\n                    exp_visited = !exp_visited;\n                }\n                if (!coeff_visited)\n                {\n                    coeff_visited = !coeff_visited;\n                    temp-&gt;coeff   = 1;\n                }\n                temp-&gt;coeff *= sign;\n\n                break;\n            }\n            i++;\n        }\n\n        printf(\"\\nCoefficient of the term is: %d\\n\", temp-&gt;coeff);\n        printf(\"Variable of the term is: %c\\n\", temp-&gt;var);\n        printf(\"Exponent of the term is: %d\\n\", temp-&gt;exp);\n\n        temp-&gt;link = NULL;\n        if (p == NULL)\n            p = q = temp;\n        else\n        {\n            q-&gt;link = temp;\n            q       = q-&gt;link;\n        }\n    }\n\n    return p;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2867376, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VYYlT.jpg?s=128&g=1", "display_name": "Ashish Tomer", "link": "https://stackoverflow.com/users/2867376/ashish-tomer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1424889380, "creation_date": 1424886482, "question_id": 28726064, "link": "https://stackoverflow.com/questions/28726064/cant-decode-a-polynomial-properly", "title": "Can&#39;t decode a polynomial properly", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#define TRUE 1\n#define FALSE 0\n\ntypedef struct polynomial{\n    int coeff;\n    char var;\n    int exp;\n    struct polynomial *link;\n} poly;\n\npoly* decode(char*);\n\nmain()\n{\n    char polynomial[100];\n    poly *first, *second;\n\n    printf(\"\\n---Enter 1st polynomial---\\n\\n\");\n    scanf(\"%s\",polynomial);\n    first=decode(polynomial);\n\n    printf(\"\\n---Enter 2nd polynomial---\\n\\n\");\n    scanf(\"%s\",polynomial);\n    second=decode(polynomial);\n\n    //More statements further\n\nreturn 0;\n}\n\n/*--- Decoding Polynomial ---*/\n\npoly* decode(char *polynomial)\n{\n    poly *p=NULL, *q=NULL, *temp=NULL;\n    int i=0, sign;\n    short coeff_entry=TRUE, exp_entry=FALSE, var_visited=FALSE, exp_visited=FALSE, coeff_visited=FALSE;\n\n    while(polynomial[i]!='\\0') \n    {\n\n        temp=(poly*)malloc(sizeof(poly));\n        if(!temp)\n        {\n            printf(\"Error! Memory not allocated\\n\");\n            exit(1);\n        }\n\n        if(polynomial[i]==43) {i++; sign=1;}\n        if(polynomial[i]==45) {i++; sign=-1;}\n        while(1)\n        {\n            if((polynomial[i]&gt;=48&amp;&amp;polynomial[i]&lt;=57)&amp;&amp;coeff_entry==TRUE)\n            {\n                temp-&gt;coeff=10*(temp-&gt;coeff)+(polynomial[i]-48);\n                coeff_visited=TRUE;\n            }\n            else if((polynomial[i]&gt;=65&amp;&amp;polynomial[i]&lt;=90)||(polynomial[i]&gt;=97&amp;&amp;polynomial[i]&lt;=122))\n            {\n                temp-&gt;var=polynomial[i];\n                coeff_entry=FALSE;\n                exp_entry=TRUE;\n                var_visited=TRUE;\n            }\n            else if((polynomial[i]&gt;=48&amp;&amp;polynomial[i]&lt;=57)&amp;&amp;exp_entry==TRUE)\n            {\n                temp-&gt;exp=10*(temp-&gt;exp)+(polynomial[i]-48);\n                exp_visited=TRUE;\n            }\n            else if(polynomial[i]==43||polynomial[i]==45||polynomial[i]=='\\0')\n            {\n                exp_entry=FALSE;\n                coeff_entry=TRUE;\n                if(var_visited&amp;&amp;!exp_visited)\n                {\n                    temp-&gt;exp=1;\n                    !var_visited;\n                    !exp_visited;\n                }\n                if(!coeff_visited)\n                {\n                    !coeff_visited;\n                    temp-&gt;coeff=1;\n                }\n                temp-&gt;coeff*=sign;              \n                break;\n            }\n            i++;\n        }\n\n        //These lines are for debugging purpose only\n        printf(\"\\nCoefficient of the term is: %d\\n\",temp-&gt;coeff);\n        printf(\"Variable of the term is: %c\\n\",temp-&gt;var);\n        printf(\"Exponent of the term is: %d\\n\",temp-&gt;exp);\n\n        temp-&gt;link=NULL;\n        if(p==NULL)     p=q=temp;\n        else\n        {\n            q-&gt;link=temp;\n            q=q-&gt;link;\n        }\n    }\n\nreturn p;\n}\n</code></pre>\n\n<p><br/>In my code I am asking user to input a polynomial in the form like: <strong>-5x^2+7y^3-19z+5</strong> <br/><br/>\nEverything seems fine but two problems in decoding this polynomial and storing in the linked list form:<br/><br/>\n<strong>First bug</strong> comes when the first-most coefficient is positive in polynomial like <strong>17</strong>x^3-13z+5<br/>\nIn this case a very long integer value (most probably garbage value) gets store in the respected node of linked list.<br/><br/>\n<strong>Second bug</strong> is when there is no first coefficient like <strong>x</strong>^7-18y^3+z-13<br/>\nIn this case <strong>0</strong> gets stored in the respected node of linked list. In other terms of polynomial, like <strong>z</strong> in example above, where there is no coefficient <strong>1</strong> gets stored in the coeffient part of the node.<br/><br/>\nSo problem arises with the first coefficient only that too a 'positive coeff' or 'no coefficient' at all.</p>\n"}, {"tags": ["c", "gcc", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1424885831, "post_id": 28725780, "comment_id": 45738077, "body": "I don&#39;t think that&#39;s possible or useful."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424887698, "post_id": 28725780, "comment_id": 45739373, "body": "In C, selectively commenting out sections of code is done with <code>#if</code>, etc."}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1425695597, "post_id": 28725924, "comment_id": 46080378, "body": "A macro argument cannot include unmatched quotes or unmatched parentheses. But there is no problem with @; it is a valid preprocessing-token, but not a valid token. It can be used in a macro argument as long as the macro argument is either stringified or not expanded."}], "tags": [], "owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1424886037, "last_edit_date": 1592644375, "creation_date": 1424886037, "answer_id": 28725924, "question_id": 28725780, "link": "https://stackoverflow.com/questions/28725780/inserting-a-one-line-line-comment-with-a-preprocessor-macro/28725924#28725924", "title": "Inserting a one-line line comment with a preprocessor macro", "body": "<p>No. Here is an extract from the standard showing the phases of translation of a C program:</p>\n<blockquote>\n<ol start=\"3\">\n<li><p>The source file is decomposed into preprocessing tokens and sequences of white-space characters (including comments). A source file shall not end in a partial preprocessing token or in a partial comment. Each comment is replaced by one space character. New-line characters are retained. Whether each nonempty sequence of white-space characters other than new-line is retained or replaced by one space character is implementation-defined.</p>\n</li>\n<li><p>Preprocessing directives are executed, macro invocations are expanded, and <code>_Pragma</code> unary operator expressions are executed. If a character sequence that matches the syntax of a universal character name is produced by token concatenation (6.10.3.3), the behavior is undefined. A <code>#include</code> preprocessing directive causes the named header or source file to be processed from phase 1 through phase 4, recursively. All preprocessing directives are then deleted.</p>\n</li>\n</ol>\n</blockquote>\n<p>As you can see, comments are removed <em>before</em> macros are expanded, so a macro cannot expand into a comment.</p>\n<p>You can obviously define a macro that takes an argument and expands to nothing, but it's slightly more restrictive than a comment, as its argument must consist only of valid cpp token characters (e.g. no <code>@</code> or unmatched quotes). Not very useful for general commenting purposes.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1425030224, "creation_date": 1425030224, "answer_id": 28761893, "question_id": 28725780, "link": "https://stackoverflow.com/questions/28725780/inserting-a-one-line-line-comment-with-a-preprocessor-macro/28761893#28761893", "title": "Inserting a one-line line comment with a preprocessor macro", "body": "<p>No.  Comments are processed at preprocessor phase.  You can do selective compilation (without regard to comments) with <code>#if</code> directives, as in:</p>\n\n<pre><code>#if 0\n...  // this stuff will not be compiled\n...\n#endif // up to here.\n</code></pre>\n\n<p>that's all the magic you can do with the limited macro preprocessor available in C/C++.</p>\n"}], "owner": {"reputation": 255961, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "accepted_answer_id": 28725924, "answer_count": 2, "score": 2, "last_activity_date": 1464104143, "creation_date": 1424885648, "last_edit_date": 1464104143, "question_id": 28725780, "link": "https://stackoverflow.com/questions/28725780/inserting-a-one-line-line-comment-with-a-preprocessor-macro", "title": "Inserting a one-line line comment with a preprocessor macro", "body": "<p>Is it possible to simulate a one-line comment (<code>//</code>) using a preprocessor macro (or magic)? For example, can this compile with <code>gcc -std=c99</code>?</p>\n\n<pre><code>#define LINE_COMMENT() ???\n\nint main() {\n    LINE_COMMENT()  asd(*&amp;#@)($*?&gt;&lt;?&gt;&lt;\":}{)(@\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "hash"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1424883996, "post_id": 28725089, "comment_id": 45736832, "body": "Step through the code in a debugger, line by line."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1424884063, "post_id": 28725089, "comment_id": 45736877, "body": "<code>strlen(c)</code> : <code>c</code> is not terminated with NUL(&#39;\\0&#39;)."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1424884311, "post_id": 28725089, "comment_id": 45737034, "body": "The original has <code>intLength * 4</code> not  <code>char c[intLength];</code> Also strlen is of course usless as BLUEPIXY states."}, {"owner": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1424884505, "post_id": 28725089, "comment_id": 45737160, "body": "<i>Congratulations !</i> you <b>luckily</b> invoked a UB"}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 3, "last_activity_date": 1424899932, "last_edit_date": 1424899932, "creation_date": 1424885497, "answer_id": 28725735, "question_id": 28725089, "link": "https://stackoverflow.com/questions/28725089/hash-code-no-working/28725735#28725735", "title": "hash code no working", "body": "<p>All that string copying is really silly. What's the point of copying if all you need is the character value?</p>\n\n<p>Here's how it might look in C:</p>\n\n<pre><code>long sfold(char* s, unsigned long M) {\n   unsigned long mult = 1, sum = 0;\n   while (*s) {\n      sum += (uint8_t)(*s++) * mult;\n      mult *= 256;\n      if (!mult) mult = 1;\n   }\n   return sum % M;\n}\n</code></pre>\n\n<p>But it's a terrible hash algorithm. You'd be better off with a simple modular hash (which is also not great, but it's not as bad):</p>\n\n<pre><code>/* This could be any small prime */\nstatic const unsigned long mult = 31;\nlong sfold(char* s, unsigned long M) {\n   /* Avoid having the hash of the empty string be 0 */\n   unsigned long sum = 0xBEA00D1FUL;\n   while (*s)\n      sum += (uint8_t)(*s++) * mult;\n   return sum % M;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10398, "user_id": 4398966, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Md0LP.jpg?s=128&g=1", "display_name": "DCR", "link": "https://stackoverflow.com/users/4398966/dcr"}, "edited": false, "score": 0, "creation_date": 1424886527, "post_id": 28725782, "comment_id": 45738580, "body": "Thank you.  When I run valgrind I get: valgrind ./test2 ==345== Command: ./test2 ==345==  ==345== Invalid read of size 1 ==345==    at 0x80486F2: sfold (test2.c:50) ==345==    by 0x80485B7: main (test2.c:18) ==345==  Address 0x423c02a is 0 bytes after a block of size 2 alloc&#39;d ==345==    at 0x402C109: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so) ==345==    by 0x804862E: sfold (test2.c:26) ==345==    by 0x80485B7: main (test2.c:18) ==345==      ==345==  ==345== ERROR SUMMARY: 2 errors from 1 contexts (suppressed: 0 from 0)"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 10398, "user_id": 4398966, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Md0LP.jpg?s=128&g=1", "display_name": "DCR", "link": "https://stackoverflow.com/users/4398966/dcr"}, "edited": false, "score": 0, "creation_date": 1424886560, "post_id": 28725782, "comment_id": 45738602, "body": "@DCR also, please take into consideration the points rici made in his/her answer: they are very valid points."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1424887503, "post_id": 28725782, "comment_id": 45739248, "body": "Also note that this hash function (like your attempt) does not do the same as the original hash function, which first processes all 4-byte chunks and then treats the remaining bytes in an extra loop. This code has the substring wrong. It passes over the 4-byte chunks twice, once with a 4.-byte stride and then in a single byte stride. The present code will give the same hash value for all words with fewer than 4 letters, for example, namely 0."}], "tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": false, "score": 1, "last_activity_date": 1424885649, "last_edit_date": 1495540259, "creation_date": 1424885649, "answer_id": 28725782, "question_id": 28725089, "link": "https://stackoverflow.com/questions/28725089/hash-code-no-working/28725782#28725782", "title": "hash code no working", "body": "<p>I think I took care of most of the bugs for you. I made it C99 compliant, mainly out of habit. The major problem was using <code>strlen(c)</code>: <code>c</code> is a character array, not a string (which is a character array terminated with the null <code>'\\0'</code> character). You'll need to rewrite your function so that if <code>calloc()</code>/<code>malloc()</code> fails, the function terminates with an error. Or you can go back to variable length arrays like you were using before if your compiler supports it. <a href=\"https://stackoverflow.com/questions/7666509/hash-function-for-string\">There are likely better hash functions in other posts on StackOverflow</a>, but this at least helps you getting yours working in a deterministic manner without invoking undefined behavior.</p>\n\n<p><strong>Code Listing</strong></p>\n\n<hr>\n\n<pre><code>/******************************************************************************/\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n\n#define BUF_SIZE  (4)\n\n/******************************************************************************/\nlong sfold(const char* s, int M);\n\n/******************************************************************************/\nint main(void) {\n   const char*  s = \"test string\";\n   int M;\n   long x;\n   M = 525;\n   x = sfold(s,M);\n\n   printf(\"String:%s - Hash:%ld\\n\", s, x);\n}\n\n/******************************************************************************/\nlong sfold(const char* s, int M) {\n   int intLength = strlen(s) / 4;\n   char* c = calloc(intLength, sizeof(char));   /* Warning, test if c==NULL, this\n                                                 * call can fail.\n                                                 */\n   long sum = 0;\n   int j, k;\n\n   for (j=0; j&lt;intLength; j++) {\n      char c[BUF_SIZE];\n      memcpy(c, s + BUF_SIZE * j, BUF_SIZE);\n\n      //char c[] = s.substring(j * 4, (j * 4) + 4).toCharArray();\n      long mult = 1;\n\n      for (k=0; k&lt;BUF_SIZE; k++) {\n         sum += c[k] * mult;\n         mult *= 256;\n      }\n   }\n\n   memcpy(c, s, intLength);\n   //char c[] = s.substring(intLength * 4).toCharArray();\n   long mult = 1;\n\n   for (k=0; k&lt;BUF_SIZE; k++) {\n      sum += c[k] * mult;\n      mult *= 256;\n   }\n\n   free(c);\n   return(abs(sum) % M);\n}\n</code></pre>\n\n<p><strong>Sample Output</strong></p>\n\n<hr>\n\n<pre><code>for i in $(seq 1 5); do echo $i; ./a.out; done\n1\nString:test string - Hash:384\n2\nString:test string - Hash:384\n3\nString:test string - Hash:384\n4\nString:test string - Hash:384\n5\nString:test string - Hash:384\n</code></pre>\n"}], "owner": {"reputation": 10398, "user_id": 4398966, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Md0LP.jpg?s=128&g=1", "display_name": "DCR", "link": "https://stackoverflow.com/users/4398966/dcr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 28725735, "answer_count": 2, "score": 1, "last_activity_date": 1424899932, "creation_date": 1424883761, "question_id": 28725089, "link": "https://stackoverflow.com/questions/28725089/hash-code-no-working", "title": "hash code no working", "body": "<p>I found this Hash function written in Java and with some help from stackoverflow converted it to C.  The problem is it gives a different hash value each time it runs on the same word.  </p>\n\n<p>Here's the original function:</p>\n\n<pre><code>long sfold(String s, int M) \n{\n  int intLength = s.length() / 4;\n  long sum = 0;\n  for (int j = 0; j &lt; intLength; j++) \n  {\n     char c[] = s.substring(j * 4, (j * 4) + 4).toCharArray();\n     long mult = 1;\n     for (int k = 0; k &lt; c.length; k++) \n     {\n        sum += c[k] * mult;\n        mult *= 256;\n     }\n  }\n\n  char c[] = s.substring(intLength * 4).toCharArray();\n  long mult = 1;\n  for (int k = 0; k &lt; c.length; k++) \n  {\n     sum += c[k] * mult;\n     mult *= 256;\n  }\n\n  return(Math.abs(sum) % M);\n }\n</code></pre>\n\n<p>And here's how we rewrote it:</p>\n\n<pre><code>include &lt;stdlib.h&gt;\ninclude &lt;stdio.h&gt;\ninclude &lt;math.h&gt;\ninclude &lt;string.h&gt;\n\nlong sfold(char * s, int M);\n\nint main(void)\n{\n    char *  s = \"test\";\n    int M;\n    long x;\n    M = 525;\n    x = sfold(s,M);\n\n    printf(\"%ld\\n\",x);\n}   \nlong sfold(char * s, int M)\n{\n    int intLength = strlen(s) / 4;\n    long sum = 0;\n\n    for (int j = 0; j &lt; intLength; j++) \n    {\n       char c[4];\n       memcpy(c, s + 4 * j, 4);\n\n       //char c[] = s.substring(j * 4, (j * 4) + 4).toCharArray();\n       long mult = 1;\n\n       for (int k = 0; k &lt; strlen(c); k++) \n       {\n           sum += c[k] * mult;\n           mult *= 256;\n       }\n    }\n\n    char c[intLength];\n    memcpy(c,s,intLength);\n    //char c[] = s.substring(intLength * 4).toCharArray();\n    long mult = 1;\n\n    for (int k = 0; k &lt; strlen(c); k++) \n    {\n       sum += c[k] * mult;\n       mult *= 256;\n    }\n\n    return(abs(sum) % M);\n}\n</code></pre>\n\n<p>Shouldn't this give the same value each time we run the program?  Anyone see what's wrong?</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 8331, "user_id": 4350275, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-Mo6YiD_JPIc/AAAAAAAAAAI/AAAAAAAAHB4/TgdGmvza868/photo.jpg?sz=128", "display_name": "Prerak Sola", "link": "https://stackoverflow.com/users/4350275/prerak-sola"}, "edited": false, "score": 1, "creation_date": 1424883484, "post_id": 28724913, "comment_id": 45736508, "body": "Use <code>&amp;</code> in <code>scanf</code> for <code>integers</code> like <code>scanf(&quot;%i %i&quot;,&amp;Pfunc1plus,&amp;Pfunc2plus);</code>"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1424883812, "post_id": 28724913, "comment_id": 45736714, "body": "^ Yes, read about memory addresses and pointers to understand why."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4606484, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/22b2d90b3ff432c273cb8f249f0aef7f?s=128&d=identicon&r=PG&f=1", "display_name": "Nikola", "link": "https://stackoverflow.com/users/4606484/nikola"}, "edited": false, "score": 0, "creation_date": 1424886298, "post_id": 28725039, "comment_id": 45738422, "body": "thx man, but she prints:      print+:      5      5      10 2686168"}], "tags": [], "owner": {"reputation": 217, "user_id": 3861915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OgRvy.jpg?s=128&g=1", "display_name": "ahe", "link": "https://stackoverflow.com/users/3861915/ahe"}, "is_accepted": true, "score": 3, "last_activity_date": 1424883655, "creation_date": 1424883655, "answer_id": 28725039, "question_id": 28724913, "link": "https://stackoverflow.com/questions/28724913/my-c-script-has-stopped-working/28725039#28725039", "title": "my C script has stopped working", "body": "<p>Two things:</p>\n\n<pre><code>scanf(\"%i %i\",Pfunc1plus,Pfunc2plus);\n</code></pre>\n\n<p><code>scanf</code> takes <em>addresses</em> to the variables, so you'd want to put an address-of operator (<code>&amp;</code>) in front of <code>Pfunc1plus</code> and <code>Pfunc2plus</code>.</p>\n\n<pre><code>printf(\"%i %i\",Pfunc1plus+Pfunc2plus);\n</code></pre>\n\n<p>You have two integer format specifiers but only pass one parameter (<code>Pfunc1plus+Pfunc2plus</code>). If you wanted to print both, change the addition operator to a comma; if you actually wanted to print the sum, remove a <code>%i</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 4606484, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/22b2d90b3ff432c273cb8f249f0aef7f?s=128&d=identicon&r=PG&f=1", "display_name": "Nikola", "link": "https://stackoverflow.com/users/4606484/nikola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1424886287, "accepted_answer_id": 28725039, "answer_count": 1, "score": 0, "last_activity_date": 1424883673, "creation_date": 1424883304, "last_edit_date": 1424883673, "question_id": 28724913, "link": "https://stackoverflow.com/questions/28724913/my-c-script-has-stopped-working", "closed_reason": "Duplicate", "title": "my C script has stopped working", "body": "<p>I'm making a new programming language for fun and when I type 'print+:' gives me to insert Pfunc1plus and Pfunc2plus and when you enroll in both the number of throws me the error \"Program has stopped working ...\"</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n\nchar sysF[300];\nchar Pfunc[300];\nint Pfunc1plus; int Pfunc2plus;\n\nscanf(\"%s\",sysF);\n// Print\nif (strcmp(sysF, \"print:\") == 0){\n    scanf(\"%s\",Pfunc);\n    system(\"cls\");\n    printf(\"%s\",Pfunc);\n}\n// Error code       \nif(strcmp(sysF, \"print+:\") == 0) {\n    scanf(\"%i %i\",Pfunc1plus,Pfunc2plus);\n    printf(\"%i %i\",Pfunc1plus+Pfunc2plus);\n} // Error code\n\nsystem(\"pause &gt;nul\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "struct"], "comments": [{"owner": {"reputation": 8090, "user_id": 2116607, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aab0dbe50765deff6222bcaeaee8f17b?s=128&d=identicon&r=PG&f=1", "display_name": "cdonts", "link": "https://stackoverflow.com/users/2116607/cdonts"}, "edited": false, "score": 0, "creation_date": 1424881529, "post_id": 28724220, "comment_id": 45735154, "body": "I would pass just what I need, that is, individual struct elements."}, {"owner": {"reputation": 219, "user_id": 1801359, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5da6a4f38afb4359787bf29b751eb544?s=128&d=identicon&r=PG", "display_name": "user1801359", "link": "https://stackoverflow.com/users/1801359/user1801359"}, "reply_to_user": {"reputation": 8090, "user_id": 2116607, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aab0dbe50765deff6222bcaeaee8f17b?s=128&d=identicon&r=PG&f=1", "display_name": "cdonts", "link": "https://stackoverflow.com/users/2116607/cdonts"}, "edited": false, "score": 0, "creation_date": 1424881679, "post_id": 28724220, "comment_id": 45735273, "body": "But then I am passing multiple things instead of just a pointer. Is one better than the other?"}, {"owner": {"reputation": 29262, "user_id": 193128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PZj5F.jpg?s=128&g=1", "display_name": "Benj", "link": "https://stackoverflow.com/users/193128/benj"}, "edited": false, "score": 0, "creation_date": 1424881802, "post_id": 28724220, "comment_id": 45735364, "body": "This is likely to get closed shortly because it&#39;s subjective.  But for my twopence I&#39;d say it depends on on the function.  If your function can only be used with this structure (despite only using a subset of fields) then pass the structure.  If it has a chance of being reused in other places by passing the individual fields then it makes sense to do that."}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424881926, "post_id": 28724220, "comment_id": 45735457, "body": "question is probably better worded as: when should i use this and that over this and the other thing?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1424882771, "post_id": 28724220, "comment_id": 45736036, "body": "Nothing is &quot;better&quot; than the other in the general case. This is <i>far</i> too vague."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424890957, "post_id": 28724220, "comment_id": 45741165, "body": "I would always pass the pointer to the struct.  Then later maintenance, debugging, etc will only have to modify the contents of the function and not all the places where the function is called, etc.  This also works when the definition of the struct is modified."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1424892597, "post_id": 28724220, "comment_id": 45742091, "body": "It&#39;s more difficult to see what the function actually needs if the whole struct is passed: one has to assume that the whole struct is needed unless he/she dig deep into the code."}], "answers": [{"comments": [{"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 1, "creation_date": 1424881764, "post_id": 28724312, "comment_id": 45735340, "body": "it&#39;s more than just stack memory allocation.  there&#39;s also the time to copy elements onto the stack.  also, sometimes it depends on the use case where it&#39;s not subjective."}, {"owner": {"reputation": 8090, "user_id": 2116607, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aab0dbe50765deff6222bcaeaee8f17b?s=128&d=identicon&r=PG&f=1", "display_name": "cdonts", "link": "https://stackoverflow.com/users/2116607/cdonts"}, "reply_to_user": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424881812, "post_id": 28724312, "comment_id": 45735367, "body": "@thang That&#39;s right, thanks for improving :-)"}], "tags": [], "owner": {"reputation": 8090, "user_id": 2116607, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aab0dbe50765deff6222bcaeaee8f17b?s=128&d=identicon&r=PG&f=1", "display_name": "cdonts", "link": "https://stackoverflow.com/users/2116607/cdonts"}, "is_accepted": true, "score": 4, "last_activity_date": 1424881710, "creation_date": 1424881710, "answer_id": 28724312, "question_id": 28724220, "link": "https://stackoverflow.com/questions/28724220/pass-struct-vs-individual-struct-elements/28724312#28724312", "title": "Pass struct vs individual struct elements", "body": "<p>There's a little difference. Passing individual struct elements will allocate memory for each value, since you're passing by value, not by reference. Passing a struct pointer only needs memory to allocate an address.</p>\n\n<p>Which looks better? That's subjective, there's no <em>right</em> answer.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1424882949, "last_edit_date": 1424882949, "creation_date": 1424882003, "answer_id": 28724443, "question_id": 28724220, "link": "https://stackoverflow.com/questions/28724220/pass-struct-vs-individual-struct-elements/28724443#28724443", "title": "Pass struct vs individual struct elements", "body": "<p>If the function is designed to deal with the structure then of course it is better to declare it like:</p>\n\n<pre><code>void f(struct Test*);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void f(struct Test);\n</code></pre>\n\n<p>depending on whether the original argument should be changed in the function.</p>\n\n<p>On the other hand if the function is designed to deal with some four integer values then it is better to declare it like this:</p>\n\n<pre><code>void f(int *, int *, int *, int *);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void f(int, int, int, int);\n</code></pre>\n\n<p>again depending on how the arguments should be processed in the function.</p>\n"}, {"tags": [], "owner": {"reputation": 939, "user_id": 1556829, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NKY9p.png?s=128&g=1", "display_name": "Igor S.K.", "link": "https://stackoverflow.com/users/1556829/igor-s-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1424962971, "last_edit_date": 1424962971, "creation_date": 1424882571, "answer_id": 28724654, "question_id": 28724220, "link": "https://stackoverflow.com/questions/28724220/pass-struct-vs-individual-struct-elements/28724654#28724654", "title": "Pass struct vs individual struct elements", "body": "<p>Looking at your example the difference is indeed negligible. In a way it's like passing one integer value against four integer values. In your case I'd rather use </p>\n\n<p><code>void f(const struct Test*);</code>  </p>\n\n<p>It will provide better maintainability when you decide to make changes to you function. Plus it guards you against accidental changes to the struct.</p>\n"}], "owner": {"reputation": 219, "user_id": 1801359, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5da6a4f38afb4359787bf29b751eb544?s=128&d=identicon&r=PG", "display_name": "user1801359", "link": "https://stackoverflow.com/users/1801359/user1801359"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1424940539, "accepted_answer_id": 28724312, "answer_count": 3, "score": 2, "last_activity_date": 1424962971, "creation_date": 1424881448, "question_id": 28724220, "link": "https://stackoverflow.com/questions/28724220/pass-struct-vs-individual-struct-elements", "closed_reason": "Opinion-based", "title": "Pass struct vs individual struct elements", "body": "<p>In C, if a struct has multiple elements and you want to use only some of those elements in a function, is it better to pass a pointer to the struct or should I pass the elements themselves? Or does it not make a difference?</p>\n\n<p>If I have, for example:</p>\n\n<pre><code>struct Test {\n    int a1, a2, a3, a4, a5, a6, a7, a8;\n};\n</code></pre>\n\n<p>and a function that uses a1, a2, a3, a4, should I use</p>\n\n<pre><code>void f(struct Test*);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void f(int, int, int, int);\n</code></pre>\n"}, {"tags": ["c", "multithreading", "process", "operating-system", "kernel"], "comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 2, "creation_date": 1424881602, "post_id": 28724135, "comment_id": 45735211, "body": "Your observation just means that you have the wrong idea which of the thread model your platform has, it is certainly not N:1. <b>After your edit</b>: please don&#39;t change your question substantially, even before anybody had a chance to answer it. Generally, perhaps you should prepare your question a bit better before posting it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424891225, "post_id": 28724135, "comment_id": 45741317, "body": "you can tell top, once it is running, to display each thread separately .  click on the top window, then click &#39;h&#39; to get the help info displayed"}], "answers": [{"comments": [{"owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 0, "creation_date": 1424882479, "post_id": 28724421, "comment_id": 45735856, "body": "The statement quoted from Wikipedia is referring specifically to user-level threads."}], "tags": [], "owner": {"reputation": 79, "user_id": 4586740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zWB5.png?s=128&g=1", "display_name": "Mike Waldron", "link": "https://stackoverflow.com/users/4586740/mike-waldron"}, "is_accepted": false, "score": -1, "last_activity_date": 1424881937, "creation_date": 1424881937, "answer_id": 28724421, "question_id": 28724135, "link": "https://stackoverflow.com/questions/28724135/when-one-thread-blocks-in-c-why-doesnt-the-entire-process-block/28724421#28724421", "title": "When one thread blocks in C, why doesn&#39;t the entire process block", "body": "<p>My first thought is that statement you've quoted from Wiki is incorrect. One of the main reasons for using threads is specifically so I/O operations don't block the entire process.</p>\n"}, {"comments": [{"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "edited": false, "score": 0, "creation_date": 1508820694, "post_id": 28724549, "comment_id": 80751549, "body": "Similar question is <a href=\"https://stackoverflow.com/questions/46902158/java-io-bound-thread\">here</a>"}, {"owner": {"reputation": 119, "user_id": 5094187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SY6vM.png?s=128&g=1", "display_name": "thepurpleowl", "link": "https://stackoverflow.com/users/5094187/thepurpleowl"}, "edited": false, "score": 0, "creation_date": 1561037448, "post_id": 28724549, "comment_id": 99939696, "body": "&quot;But since each thread in the group maps to that same kernel thread, the rest of the threads will block as well.&quot;  I didn&#39;t get why is this so?"}, {"owner": {"reputation": 119, "user_id": 5094187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SY6vM.png?s=128&g=1", "display_name": "thepurpleowl", "link": "https://stackoverflow.com/users/5094187/thepurpleowl"}, "edited": false, "score": 0, "creation_date": 1561037653, "post_id": 28724549, "comment_id": 99939816, "body": "Probably I got the answer  - <a href=\"https://stackoverflow.com/questions/40877998/why-blocking-system-calls-blocks-entire-procedure-with-user-level-threads\" title=\"why blocking system calls blocks entire procedure with user level threads\">stackoverflow.com/questions/40877998/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "is_accepted": true, "score": 9, "last_activity_date": 1424882973, "last_edit_date": 1424882973, "creation_date": 1424882270, "answer_id": 28724549, "question_id": 28724135, "link": "https://stackoverflow.com/questions/28724135/when-one-thread-blocks-in-c-why-doesnt-the-entire-process-block/28724549#28724549", "title": "When one thread blocks in C, why doesn&#39;t the entire process block", "body": "<p>Wikipedia is referring to user-level threading, wherein an entire group of threads is assigned to a single kernel thread. So when one of the threads does an I/O operation, control passes to the kernel, and the kernel thread will block while waiting for the I/O operation to complete. But since each thread in the group maps to that same kernel thread, the rest of the threads will block as well.</p>\n\n<p>Pthreads on the other hand are <em>not</em> user-level threads. Each pthread is mapped to a different thread (process) in the kernel, and the kernel is responsible for scheduling the threads. If your GUI application creates a new pthread that does an I/O operation, the thread won't block the main application because they are <em>different threads</em> in the kernel.</p>\n\n<p>As for your edit: the reason you see the number of threads under a specific process is that each thread group has a parent thread that started the process and created the threads. In your example it would be the GUI application - each thread it spawned would \"point\" to it (the implementation is specific to the OS, Linux for example has the <code>tgid</code> field which is the <code>pid</code> of the parent thread). You're usually interested in the performance of a process rather than a specific thread, so the data of all the threads is aggregated under the parent thread.</p>\n"}], "owner": {"reputation": 77, "user_id": 2333700, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51ff0c1752e8dc48aa67424c96b86c46?s=128&d=identicon&r=PG", "display_name": "user2333700", "link": "https://stackoverflow.com/users/2333700/user2333700"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2621, "favorite_count": 1, "accepted_answer_id": 28724549, "answer_count": 2, "score": 3, "last_activity_date": 1424882973, "creation_date": 1424881246, "last_edit_date": 1424881614, "question_id": 28724135, "link": "https://stackoverflow.com/questions/28724135/when-one-thread-blocks-in-c-why-doesnt-the-entire-process-block", "title": "When one thread blocks in C, why doesn&#39;t the entire process block", "body": "<p>I'm in a course on operating systems and we're talking about threading. On Wikipedia <a href=\"http://en.wikipedia.org/wiki/Thread_(computing)#1:1_.28kernel-level_threading.29\" rel=\"nofollow\">here</a> it says that for 1:N kernel threads:</p>\n\n<blockquote>\n  <p>If one of the threads needs to execute an I/O request, the whole\n  process is blocked and the threading advantage cannot be utilized</p>\n</blockquote>\n\n<p>However this got me thinking. In C, if I create as UI on the main thread and if I do my I/O on a new thread with pthread then my UI wont block. Doesn't this contradict what Wikipedia says though because I still only have 1 process with 2 threads, so shouldn't my I/O thread block my UI according to what Wikipedia is saying?</p>\n\n<p>edit: And if Windows and OS X use the 1:1 model as Wikipedia claims, then why in OSX when I do the top command or in Windows use task manager do I not see separate processes for each of my program's threads, why do I still see the multiple threads as listed under the 1 process?</p>\n"}, {"tags": ["c", "gcc", "arm"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424889285, "post_id": 28723940, "comment_id": 45740287, "body": "GCC has a parameter that will output all the memory/stack/etc details at the end of each file compiled. &#39;-p&#39; &#39;-pg&#39; &#39;-a&#39; &#39;-fmem-report&#39; &#39;-ax&#39;  I find the -fmem-report to be most useful to me."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424889632, "post_id": 28723940, "comment_id": 45740484, "body": "you might want to look at the &#39;-o&#39; options and the related family of &#39;-f&#39; options when optimizing for size and/or speed"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1424880871, "creation_date": 1424880871, "answer_id": 28723994, "question_id": 28723940, "link": "https://stackoverflow.com/questions/28723940/gcc-tool-for-size-analysis/28723994#28723994", "title": "GCC tool for size analysis?", "body": "<p>You could customize your GCC with <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> for that purpose.</p>\n\n<p>The <code>justcountipa</code> pass in the <code>xtramelt-ana-simple.melt</code> file is doing something similar (count the Gimple instructions in functions)</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 2730881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6af9230e95f85b68fa9e63c6d77b368?s=128&d=identicon&r=PG&f=1", "display_name": "edu", "link": "https://stackoverflow.com/users/2730881/edu"}, "edited": false, "score": 0, "creation_date": 1424941969, "post_id": 28726010, "comment_id": 45760491, "body": "Thanks a lot of. For now, this is sufficient for me. Anyway, I think I need more flash space because the code size report is quite ok."}], "tags": [], "owner": {"reputation": 2412, "user_id": 1191058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09eeee14385ba75f18adb473ccffe208?s=128&d=identicon&r=PG", "display_name": "j123b567", "link": "https://stackoverflow.com/users/1191058/j123b567"}, "is_accepted": true, "score": 5, "last_activity_date": 1424888876, "last_edit_date": 1424888876, "creation_date": 1424886297, "answer_id": 28726010, "question_id": 28723940, "link": "https://stackoverflow.com/questions/28723940/gcc-tool-for-size-analysis/28726010#28726010", "title": "GCC tool for size analysis?", "body": "<p>You can use <code>arm-none-eabi-objdump -t Application.elf</code>. It will show you the size of all functions and global variables (as hex number).</p>\n\n<pre>\naddress    type section size     name\n------------------------------------------------\n0000d600 l     F .text  00000198 uip_arp_update\n</pre>\n\n<p>Global variables are in <code>.bss</code> section, functions are in <code>.text</code> section and constant data is in <code>.data</code> section.</p>\n\n<p>You can also use <code>arm-none-eabi-size *.o</code> in appropriate directory to see sizes of all intermediate files.</p>\n\n<p>It is also possible to use <code>nm</code> tool</p>\n\n<p><code>arm-none-eabi-nm -t d -S --size-sort Application.elf</code></p>\n\n<hr>\n\n<p>It is also usefull to use <code>-ffunction-sections -fdata-sections</code> as compile parameter and <code>-Wl,--gc-sections</code> as linker parameter so it will delete all unused functions and data from your binary.</p>\n"}], "owner": {"reputation": 81, "user_id": 2730881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6af9230e95f85b68fa9e63c6d77b368?s=128&d=identicon&r=PG&f=1", "display_name": "edu", "link": "https://stackoverflow.com/users/2730881/edu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4733, "favorite_count": 1, "accepted_answer_id": 28726010, "answer_count": 2, "score": 2, "last_activity_date": 1424888876, "creation_date": 1424880729, "question_id": 28723940, "link": "https://stackoverflow.com/questions/28723940/gcc-tool-for-size-analysis", "title": "GCC tool for size analysis?", "body": "<p>I develop for embedded platforms by using GCC (arm-none-eabi-gcc). For size analysis, I use: arm-none-eabi-size and the .map file.</p>\n\n<p>Because I'm having problems about size of my code, my question is: Is there any tool for size analysis more powerful? Any with statisticts or size by files? Or with the possibility to order functions by size?</p>\n\n<p>Any suggestion will be welcome.</p>\n"}, {"tags": ["c", "int"], "comments": [{"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424880867, "post_id": 28723918, "comment_id": 45734680, "body": "This behavior is entirely platform-specific."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1424880899, "post_id": 28723918, "comment_id": 45734714, "body": "And out of curiosity, did you enable pedantic warnings and warnings-as-errors when you compiled this with out-of-range values?"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 1, "creation_date": 1424880906, "post_id": 28723918, "comment_id": 45734723, "body": "The compiler should warn you if the constant would overflow the representation."}, {"owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "edited": false, "score": 3, "creation_date": 1424881177, "post_id": 28723918, "comment_id": 45734944, "body": "Not answering the question, but use INT_MIN to do this.  This is defined in limits.h."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424891559, "post_id": 28723918, "comment_id": 45741523, "body": "you need to look at where the &#39;m[]&#39; parameter is being set.  in reality, the m[] value has to be in the valid int range.  so the problem (and you should have all warnings, etc enabled in the compile step) is in the caller, not in this function."}], "answers": [{"tags": [], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "is_accepted": true, "score": 3, "last_activity_date": 1424941519, "last_edit_date": 1424941519, "creation_date": 1424881294, "answer_id": 28724155, "question_id": 28723918, "link": "https://stackoverflow.com/questions/28723918/why-can-i-assign-a-value-of-int-that-is-out-of-its-range/28724155#28724155", "title": "Why can I assign a value of int that is out of its range?", "body": "<p>The right way to get the smallest integer value is </p>\n\n<pre><code>#include &lt;limits.h&gt;\n\nint val = INT_MIN;\n</code></pre>\n\n<p>Regarding your question you should read this <a href=\"http://www.hardtoc.com/archives/119\" rel=\"nofollow\">blog post</a> explaining why INT_MIN is defined as <code>-2147483647 - 1</code> instead of <code>-2147483648</code>.   </p>\n"}], "owner": {"reputation": 2394, "user_id": 771355, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2dd23ffd587c0070ec6eca022c5e174f?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/771355/gavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 28724155, "answer_count": 1, "score": 1, "last_activity_date": 1424941519, "creation_date": 1424880669, "question_id": 28723918, "link": "https://stackoverflow.com/questions/28723918/why-can-i-assign-a-value-of-int-that-is-out-of-its-range", "title": "Why can I assign a value of int that is out of its range?", "body": "<p>So I was trying to find the largest and 2nd largest integer in an array. So I assisnged it to be the smallest value possible and it seems like it can go below -(2^31).</p>\n\n<p>I tried with value as large as -2^63 and it still work</p>\n\n<pre><code>void findMax1Max2(int m[], int size, int *max1, int *max2)\n{\n    int i;\n\n    *max1 = -2147483648;\n    *max2 = -2147483648;\n    for (i = 0; i &lt; size; i++)\n    {\n        if (m[i] &gt; *max1){\n            *max2 = *max1;\n            *max1 = m[i];\n        }\n        else if (m[i] &gt; *max2){\n            *max2 = m[i];\n        }\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "image", "http", "webserver", "fread"], "comments": [{"owner": {"reputation": 555, "user_id": 1065121, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b7e1e26ffafe23b3b87df8343bb93eb2?s=128&d=identicon&r=PG", "display_name": "GURU", "link": "https://stackoverflow.com/users/1065121/guru"}, "edited": false, "score": 0, "creation_date": 1424879794, "post_id": 28723529, "comment_id": 45733815, "body": "page+1 is = index.jpeg"}], "answers": [{"tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": true, "score": 2, "last_activity_date": 1424884058, "last_edit_date": 1424884058, "creation_date": 1424883580, "answer_id": 28725015, "question_id": 28723529, "link": "https://stackoverflow.com/questions/28723529/how-do-i-display-an-image-in-browser-using-a-web-server-in-c-using-fread/28725015#28725015", "title": "How do I display an image in browser using a web server in C using fread?", "body": "<p>Your <code>write()</code> statement is wrong. The value returned by <code>strlen(buffer)</code> will be the location of the first zero byte in the JPEG file. Try using <code>fileLen</code> instead.</p>\n\n<p>Here are a few other things that crossed my mind:</p>\n\n<ol>\n<li><p>In the <code>fread()</code> call, the second and third arguments should really be the other way round. And since <code>sizeof(unsigned char)</code> is <code>1</code> by definition, I would have used <code>fread(buffer,1,fileLen,fp);</code> instead.</p></li>\n<li><p>You should really check the values returned by <code>fopen()</code>, etc.</p></li>\n<li><p>Your use of <code>page+1</code> suggests that you're placing an unchecked HTTP query string parameter directly into a file system call. Obviously you don't want to be doing that :-)</p></li>\n</ol>\n"}], "owner": {"reputation": 555, "user_id": 1065121, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b7e1e26ffafe23b3b87df8343bb93eb2?s=128&d=identicon&r=PG", "display_name": "GURU", "link": "https://stackoverflow.com/users/1065121/guru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 859, "favorite_count": 0, "accepted_answer_id": 28725015, "answer_count": 1, "score": 0, "last_activity_date": 1460869675, "creation_date": 1424879663, "question_id": 28723529, "link": "https://stackoverflow.com/questions/28723529/how-do-i-display-an-image-in-browser-using-a-web-server-in-c-using-fread", "title": "How do I display an image in browser using a web server in C using fread?", "body": "<p>I am able to display html and plain text file in the browser using my web server.c. However, when I try to load an image jpeg file, it give me this error \"The image <a href=\"http://127.0.0.1:8080/index.jpeg\" rel=\"nofollow\">http://127.0.0.1:8080/index.jpeg</a>\" cannot be displayed because it contains error.</p>\n\n<p>The content-type i have set it as \"image/jpeg\".</p>\n\n<p>This is my code:</p>\n\n<pre><code>    FILE *fp;\n    char ch;\n    unsigned long fileLen;\n    unsigned char *buffer;\n\n    fp = fopen(page+1,\"rb\");\n    fseek(fp, 0, SEEK_END);\n    fileLen=ftell(fp);\n    fseek(fp, 0, SEEK_SET);\n    buffer=(char *)malloc(fileLen);\n    fread(buffer,fileLen,sizeof(unsigned char),fp);\n\n    fclose(fp);\n\n    write (connection_fd, buffer, strlen(buffer));\n</code></pre>\n\n<p>This is the header for my image that i have set</p>\n\n<p>\"HTTP/1.1 200 OK\\r\\n\"\n              \"Content-type: image/jpeg\\r\\n\"\n              \"Connection: close\\r\\n\"\n              \"\\r\\n\";</p>\n\n<p>Please kindly advise. Thank you :)</p>\n"}, {"tags": ["c", "hash"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1424878741, "post_id": 28723090, "comment_id": 45732970, "body": "What about <code>c.length</code>? That&#39;s not C too. Use <code>strlen(c)</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424878794, "post_id": 28723090, "comment_id": 45733006, "body": "There is a lot of nonsense code, which is not C. It is either pseudo code or some other language."}, {"owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424878906, "post_id": 28723090, "comment_id": 45733097, "body": "@Lundin it&#39;s probably Java, and the title reads <i>convert to C</i>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1424879625, "post_id": 28723090, "comment_id": 45733673, "body": "That&#39;s really not a very good hash code algorithm. There are some better (and simple) ones <a href=\"http://www.burtleburtle.net/bob/hash/doobs.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "edited": false, "score": 0, "creation_date": 1424935213, "post_id": 28723090, "comment_id": 45757366, "body": "@StefanoSanfilippo It is not Java, it is not C, it is not C++."}, {"owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424950711, "post_id": 28723090, "comment_id": 45766064, "body": "@Lundin look better: the first one is almost surely Java, while the second is an unfinished attempt at porting Java to C, with some Java-esque features still present."}], "answers": [{"comments": [{"owner": {"reputation": 10398, "user_id": 4398966, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Md0LP.jpg?s=128&g=1", "display_name": "DCR", "link": "https://stackoverflow.com/users/4398966/dcr"}, "edited": false, "score": 0, "creation_date": 1424879822, "post_id": 28723201, "comment_id": 45733844, "body": "I voted you up as the memcpy worked.  I notice that c[] is addressed in the bottom for loop so the second memcpy needs to be done.  also, you use length_of_s but that should be intLength or am I missing something?  Thanks again for your help"}, {"owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "reply_to_user": {"reputation": 10398, "user_id": 4398966, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Md0LP.jpg?s=128&g=1", "display_name": "DCR", "link": "https://stackoverflow.com/users/4398966/dcr"}, "edited": false, "score": 0, "creation_date": 1424880201, "post_id": 28723201, "comment_id": 45734176, "body": "That was just to convey the idea without copying the exact code (which would have been a little more obscure). If you want to further optimize, note that you don&#39;t even need the <code>memcpy</code>."}], "tags": [], "owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "is_accepted": true, "score": 2, "last_activity_date": 1424952591, "last_edit_date": 1424952591, "creation_date": 1424878874, "answer_id": 28723201, "question_id": 28723090, "link": "https://stackoverflow.com/questions/28723090/trying-to-convert-hash-function-to-c/28723201#28723201", "title": "Trying to convert hash function to C", "body": "<p>The first one is reading chunks of four characters per time to an array:</p>\n\n<pre><code>char c[] = s.substring(j * 4, (j * 4) + 4).toCharArray();\n</code></pre>\n\n<p>you could replace it with:</p>\n\n<pre><code>char c[4];\nmemcpy(c, s + 4*j, 4);\n</code></pre>\n\n<p>The second one is copying the rest of the string, from the largest multiple of 4 smaller than <code>strlen(s)</code> to the end, since:</p>\n\n<pre><code>int intLength = strlen(s) / 4;\n</code></pre>\n\n<p>and therefore:</p>\n\n<pre><code>char c[] = s.substring(intLength * 4).toCharArray();\n</code></pre>\n\n<p>is just:</p>\n\n<pre><code>char c[strlen(s)];\nmemcpy(c, s + intLength*4, strlen(s) - 4*intLength);\n</code></pre>\n\n<p>At this point, you should precalculate <code>strlen(s)</code> and store it in a variable, since strings in C do not actually exist (they are just arrays of <code>char</code> whose last element is <code>\\0</code>) and each call to <code>strlen</code> implies that the whole string has to be scanned for the <code>\\0</code>, in order to determine the length.</p>\n\n<p>However, <strong>all those copies are not even necessary, since you are not modifying <code>s</code></strong>, so you just have to adjust the indexes in the loops and you can skip the <code>memcpy</code> altogether:</p>\n\n<pre><code>long sfold(const char* s, size_t length, long M) {\n   size_t intLength = length / 4;\n\n   long sum = 0;\n\n   for (size_t j = 0; j &lt; intLength; j++) {\n      long mult = 1;\n      for (int k = 0; k &lt; 4; k++) {\n         sum += s[j*4 + k] * mult;\n         mult *= 256;\n      }\n   }\n\n   long mult = 1;\n   for (size_t k = intLength*4; k &lt; length; k++) {\n      sum += s[k] * mult;\n      mult *= 256;\n   }\n\n   return labs(sum) % M;\n}\n</code></pre>\n"}], "owner": {"reputation": 10398, "user_id": 4398966, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Md0LP.jpg?s=128&g=1", "display_name": "DCR", "link": "https://stackoverflow.com/users/4398966/dcr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 28723201, "answer_count": 1, "score": 0, "last_activity_date": 1424952591, "creation_date": 1424878594, "last_edit_date": 1424950747, "question_id": 28723090, "link": "https://stackoverflow.com/questions/28723090/trying-to-convert-hash-function-to-c", "title": "Trying to convert hash function to C", "body": "<p>I saw this hash function and would like to convert it to C.  Having a problem with the .substring and toCharArray() </p>\n\n<pre><code>long sfold(String s, int M) \n{\n   int intLength = s.length() / 4;\n   long sum = 0;\n   for (int j = 0; j &lt; intLength; j++) \n   {\n      char c[] = s.substring(j * 4, (j * 4) + 4).toCharArray();\n      long mult = 1;\n      for (int k = 0; k &lt; c.length; k++) \n      {\n         sum += c[k] * mult;\n         mult *= 256;\n      }\n   }\n\n   char c[] = s.substring(intLength * 4).toCharArray();\n   long mult = 1;\n   for (int k = 0; k &lt; c.length; k++) \n   {\n      sum += c[k] * mult;\n      mult *= 256;\n   }\n\n   return(Math.abs(sum) % M);\n}\n</code></pre>\n\n<p>I've made the following changes:</p>\n\n<pre><code>long sfold(char* s, int M) \n{\n   int intLength = strlen(s) / 4;\n   long sum = 0;\n   for (int j = 0; j &lt; intLength; j++) \n   {\n      char c[] = s.substring(j * 4, (j * 4) + 4).toCharArray();\n      long mult = 1;\n      for (int k = 0; k &lt; strlen(c); k++) \n      {\n         sum += c[k] * mult;\n         mult *= 256;\n      }\n   }\n\n   char c[] = s.substring(intLength * 4).toCharArray();\n   long mult = 1;\n   for (int k = 0; k &lt; strlen(c); k++) \n   {\n      sum += c[k] * mult;\n      mult *= 256;\n   }\n\n   return(Math.abs(sum) % M);\n}\n</code></pre>\n\n<p>these are the two lines I'm having trouble with:</p>\n\n<pre><code>char c[] = s.substring(j * 4, (j * 4) + 4).toCharArray();\nchar c[] = s.substring(intLength * 4).toCharArray();\n</code></pre>\n\n<p>could some explain what these two lines are doing?</p>\n"}, {"tags": ["c", "linux", "pcap", "packet-sniffers", "sniffing"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1424878568, "post_id": 28722992, "comment_id": 45732827, "body": "Because the encapsulation is always encap:Ethernet"}, {"owner": {"reputation": 828, "user_id": 3058060, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/raWu5.png?s=128&g=1", "display_name": "ViniciusArruda", "link": "https://stackoverflow.com/users/3058060/viniciusarruda"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1424888650, "post_id": 28722992, "comment_id": 45739918, "body": "@LPs This will always occur on wireless network ? I mean, this is a rule ? Thanks."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1424934031, "post_id": 28722992, "comment_id": 45756911, "body": "@Guy Harris answered you very well."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "is_accepted": true, "score": 2, "last_activity_date": 1424897838, "creation_date": 1424897838, "answer_id": 28729409, "question_id": 28722992, "link": "https://stackoverflow.com/questions/28722992/setted-wireless-interface-but-captures-ethernet-data/28729409#28729409", "title": "Setted wireless interface but captures ethernet data", "body": "<p>On Linux, you need to capture in monitor mode in order to get 802.11 headers.  If the adapter isn't in monitor mode, you will only get data frames, not management or control frames, and the 802.11 header will be turned into a fake Ethernet header by the kernel and the packet will be provided with that header.</p>\n\n<p>Newer versions of libpcap have an API to request monitor mode, but, on Linux, that API only works well if libpcap was built with support for libnl.  You could try using the API (use <code>pcap_create()</code>, followed by calls to set capture options, followed by <code>pcap_activate()</code>, to open the device; one of those calls should be <code>pcap_set_rfmon()</code> to set monitor mode).  If that doesn't work, you'd have to use airmon-ng to turn on monitor mode; see <a href=\"http://wiki.wireshark.org/CaptureSetup/WLAN?highlight=%28airmon-ng%29#Linux\" rel=\"nofollow\">this part of the Wireshark Wiki</a> for information on how to do that.</p>\n"}], "owner": {"reputation": 828, "user_id": 3058060, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/raWu5.png?s=128&g=1", "display_name": "ViniciusArruda", "link": "https://stackoverflow.com/users/3058060/viniciusarruda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 28729409, "answer_count": 1, "score": 0, "last_activity_date": 1424897838, "creation_date": 1424878311, "question_id": 28722992, "link": "https://stackoverflow.com/questions/28722992/setted-wireless-interface-but-captures-ethernet-data", "title": "Setted wireless interface but captures ethernet data", "body": "<p>I am making a sniffer using libpcap and I am getting some weird behavior.\nI don't know much about network, for it I am making the sniffer to learn how network really works.</p>\n\n<p>Before I run the sniffer, I type <code>ifconfig</code> on terminal, and it returns:</p>\n\n<pre><code>eth0      Link encap:Ethernet  Endere\u00e7o de HW 44:87:fc:ec:63:08  \n          endere\u00e7o inet6: fe80::4687:fcff:feec:6308/64 Escopo:Link\n          UP BROADCASTMULTICAST  MTU:1500  M\u00e9trica:1\n          RX packets:38398 errors:0 dropped:1 overruns:0 frame:0\n          TX packets:28661 errors:0 dropped:0 overruns:0 carrier:2\n          colis\u00f5es:0 txqueuelen:1000 \n          RX bytes:24620500 (23.4 MiB)  TX bytes:6922586 (6.6 MiB)\n          IRQ:42 \n\nlo        Link encap:Loopback Local  \n          inet end.: 127.0.0.1  Masc:255.0.0.0\n          endere\u00e7o inet6: ::1/128 Escopo:M\u00e1quina\n          UP LOOPBACKRUNNING  MTU:16436  M\u00e9trica:1\n          RX packets:294 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:294 errors:0 dropped:0 overruns:0 carrier:0\n          colis\u00f5es:0 txqueuelen:0 \n          RX bytes:18540 (18.1 KiB)  TX bytes:18540 (18.1 KiB)\n\nwlan0     Link encap:Ethernet  Endere\u00e7o de HW 00:c1:40:67:04:30  \n          inet end.: 192.168.0.102  Bcast:192.168.0.255  Masc:255.255.255.0\n          endere\u00e7o inet6: fe80::2c1:40ff:fe67:430/64 Escopo:Link\n          UP BROADCASTRUNNING MULTICAST  MTU:1500  M\u00e9trica:1\n          RX packets:2115 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:2033 errors:0 dropped:0 overruns:0 carrier:0\n          colis\u00f5es:0 txqueuelen:1000 \n          RX bytes:947310 (925.1 KiB)  TX bytes:571860 (558.4 KiB)\n</code></pre>\n\n<p>I took off the ethernet cable, so, the eth0 interface has no ip and will not work if I use it on my sniffer.</p>\n\n<p>Thus, I pass the wireless network interface as parameter to the program on terminal.</p>\n\n<pre><code>#./sniffer wlan0\n</code></pre>\n\n<p>And a snippet code: </p>\n\n<pre><code>pcap_t* handler = NULL; \n\nhandler = pcap_open_live(argv[1], 65535, 1, 1000, errbuf);\n\nif((datalink_value = pcap_datalink(handler)) == DLT_EN10MB)\n    printf(\"ETHERNET\\n\");\nelse if (datalink_value == DLT_IEEE802_11)\n    printf(\"WIRELESS\\n\");\n</code></pre>\n\n<p>The output is <code>ETHERNET</code>.</p>\n\n<p>Why this is occurring and how can I fix it ? The device converts it into ethernet ? Or this is a kernel behavior ?\nI still don't know if the problem is my code or if I don't know well about how network and protocol works.</p>\n\n<p>The wireless device that I am using is: Mini USB 150Mbps 802.11n/g/b wifi Adapter Comfast WU720N</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "loops", "compare", "scanf"], "comments": [{"owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "edited": false, "score": 0, "creation_date": 1424878423, "post_id": 28722960, "comment_id": 45732708, "body": "If I later do this when I entered 9 first:   <code>if (array[0] == 9)     {       printf(&quot;Success\\n&quot;);     }</code>    It works.  So the error must lie somewhere else."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424878872, "post_id": 28722960, "comment_id": 45733071, "body": "fflush(stdin) is undefined behavior. Don&#39;t use it."}, {"owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424878968, "post_id": 28722960, "comment_id": 45733147, "body": "Suggestion what I could use instead? I want to prevent the user from entering multiple numbers at once.  Someone below has an explanation."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424879820, "post_id": 28722960, "comment_id": 45733842, "body": "@LorenzLeitner you mean <code>2</code> digits or <code>2</code> integers?"}, {"owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424879995, "post_id": 28722960, "comment_id": 45734003, "body": "Two integers, like if the user enters <code>5 3</code> and then presses enter. (With the space between <code>5</code> and <code>3</code>.  I think that would cause trouble with scanf.  But I will use your method below @iharob."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1424881548, "post_id": 28722960, "comment_id": 45735169, "body": "You can use <code>fgets()</code> and <code>strtol()</code> to check that."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "edited": false, "score": 0, "creation_date": 1424878600, "post_id": 28723021, "comment_id": 45732853, "body": "Yes, I <i>just</i> realized!"}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 2, "last_activity_date": 1424878436, "creation_date": 1424878436, "answer_id": 28723021, "question_id": 28722960, "link": "https://stackoverflow.com/questions/28722960/stop-scanf-loop-if-user-enters-a-specific-number-not-working-c/28723021#28723021", "title": "Stop scanf loop if user enters a specific number (Not working) C", "body": "<pre><code>if (array[i] == '5')\n</code></pre>\n\n<p>You're checking whether <code>array[i]</code> is equal to the <a href=\"http://www.asciitable.com\" rel=\"nofollow\">ASCII value</a> of the <strong>character</strong> <code>'5'</code>.</p>\n\n<p>Remove the <code>''</code> to make it compare against the integer <code>5</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "edited": false, "score": 0, "creation_date": 1424878620, "post_id": 28723035, "comment_id": 45732870, "body": "Yes, I just realized! Thank you"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4598258"}, "is_accepted": false, "score": 1, "last_activity_date": 1424878461, "creation_date": 1424878461, "answer_id": 28723035, "question_id": 28722960, "link": "https://stackoverflow.com/questions/28722960/stop-scanf-loop-if-user-enters-a-specific-number-not-working-c/28723035#28723035", "title": "Stop scanf loop if user enters a specific number (Not working) C", "body": "<p>You are checking if an integer is equal to the character '5', which is then being cast to an ascii value of '5'.</p>\n\n<p>Try using this:</p>\n\n<p><code>if (array[i] == 5)</code></p>\n"}, {"tags": [], "owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "is_accepted": false, "score": 1, "last_activity_date": 1424878584, "creation_date": 1424878584, "answer_id": 28723082, "question_id": 28722960, "link": "https://stackoverflow.com/questions/28722960/stop-scanf-loop-if-user-enters-a-specific-number-not-working-c/28723082#28723082", "title": "Stop scanf loop if user enters a specific number (Not working) C", "body": "<p>Disregard everything!</p>\n\n<p>I should have written</p>\n\n<pre><code>if (array[i] == 5)\n</code></pre>\n\n<p>without the quotes!</p>\n\n<p>I'm an idiot!</p>\n\n<p>I sat 2 hours at this error...</p>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "edited": false, "score": 0, "creation_date": 1424879244, "post_id": 28723204, "comment_id": 45733382, "body": "Thank you, wish I could upvote.  Are these two functions connected or are these just options?  EDIT: I just realized getNumbers() calls readNumber(), my bad."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "edited": false, "score": 0, "creation_date": 1424879428, "post_id": 28723204, "comment_id": 45733520, "body": "@LorenzLeitner which functions?"}, {"owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "edited": false, "score": 0, "creation_date": 1424879918, "post_id": 28723204, "comment_id": 45733931, "body": "Thank you for this extensive answer, I will look into it and try to make it work like this."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1424890177, "last_edit_date": 1424890177, "creation_date": 1424878880, "answer_id": 28723204, "question_id": 28722960, "link": "https://stackoverflow.com/questions/28722960/stop-scanf-loop-if-user-enters-a-specific-number-not-working-c/28723204#28723204", "title": "Stop scanf loop if user enters a specific number (Not working) C", "body": "<p>The actual problem is <code>'5' != 5</code> the former is the character <code>5</code> which is in fact it's ascii value, and the latter is the number <code>5</code>, since you are reading integers, i.e. using the <code>\"%d\"</code> specifier in <code>scanf()</code> you should use <code>5</code>, but it would be better if it was just a <code>int</code> variable, and you could initialize it to any number you like before the loop starts.</p>\n\n<p>Your loop is wrong anyway because if the user enters a non-numeric value then your program will invoke undefined behavior. Besides you already invoke undefined behavior with <code>fflush(stdin)</code>, so</p>\n\n<p><strong>Remove <code>fflush(stdin)</code></strong><sup>1</sup></p>\n\n<blockquote>\n  <p><strong>7.21.5.2 The <code>fflush</code> function</strong></p>\n  \n  <ol start=\"2\">\n  <li>If stream points to an <strong>output stream</strong> or an <strong>update</strong> stream <em>in which the most recent operation was <strong>not</strong> input</em>, the fflush function causes any unwritten data for that stream to be delivered to the host environment to be written to the file; otherwise, the behavior is\n  undefined.</li>\n  </ol>\n</blockquote>\n\n<p>So the behavior is <strong>undefined</strong> for an input stream like <code>stdin</code>, or even if the most recent operation was input.</p>\n\n<p>You must check that the value was read properly, and then check in the loop condition if it equals the value you want to stop the loop with, try this</p>\n\n<pre><code>int readNumber()\n{\n    int value;\n    printf(\"input a number &gt; \");\n    while (scanf(\"%d\", &amp;value) == 1)\n    {\n        int chr;\n        printf(\"\\tinvalid input, try again...\\n\");\n        do { /* this, will do what you thought 'fflush' did */\n            chr = getchar();\n        } ((chr != EOF) &amp;&amp; (chr != '\\n'));\n        printf(\"input a number &gt; \");\n    }\n    return value;\n}\n\nint getNumbers(int array[])\n{\n  int i;\n  int stop = 5;\n\n  printf(\"Enter max. %d numbers, enter empty line to end:\\n\", MAXNUMBERS);\n\n  array[0] = 0;\n  for (i = 0 ; ((i &lt; MAXNUMBERS) || (array[i] == stop)) ; i++)\n    array[i] = readNumber();\n\n  return i;\n}\n</code></pre>\n\n<hr>\n\n<p><sup>1</sup><sub>This is a quote from the C11 draft 1570.</sub></p>\n"}], "owner": {"reputation": 167, "user_id": 4129221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e69983f4c9f7616cf41906c9f887589a?s=128&d=identicon&r=PG", "display_name": "LoLei", "link": "https://stackoverflow.com/users/4129221/lolei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "accepted_answer_id": 28723021, "answer_count": 4, "score": 1, "last_activity_date": 1424890177, "creation_date": 1424878221, "last_edit_date": 1424879171, "question_id": 28722960, "link": "https://stackoverflow.com/questions/28722960/stop-scanf-loop-if-user-enters-a-specific-number-not-working-c", "title": "Stop scanf loop if user enters a specific number (Not working) C", "body": "<p>I've looked at multiple solutions but none of them worked for me.</p>\n\n<p>I'm asking the user to enter numbers in a loop, but if the user enters a specific number the loop should break.</p>\n\n<p>This is what I've got so far.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAXNUMBERS 5\n\nint getNumbers(int array[])\n{\n  int i;\n  int n = 0;\n  printf(\"Enter max. %d numbers, enter empty line to end:\\n\", MAXNUMBERS);\n\n  for (i = 0; i &lt; MAXNUMBERS; i++)\n  {\n    scanf(\"%d\", &amp;array[i]);\n    fflush(stdin);\n    n++;\n    if (array[i] == '5')\n    {\n      break;\n    }\n  }\n  return n;\n}\n\nint main()\n{\n  int array[MAXNUMBERS];\n  int amount_numbers;\n  amount_numbers = getNumbers(array);\n\n  printf(\"Numbers entered: %d\\n\", amount_numbers);\n  printf(\"First three: %d %d %d\", array[0], array[1], array[2]);\n\n  return 0;\n}\n</code></pre>\n\n<ul>\n<li><p>Input:<br>\n </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1  \n5  \n4  \n3  \n2  \n</code></pre></li>\n<li><p>Output:  </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Numbers entered: 5  \nFirst three: 1 5 4  \n</code></pre></li>\n</ul>\n\n<p>If the user enters <code>5</code> the loop should break. </p>\n\n<p>I'm using 5 as an example, I later want it to do with an empty line. But it doesn't even work with <code>5</code>.  </p>\n\n<p>It just keeps prompting the user to enter another number after he entered <code>5</code>.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 2, "creation_date": 1424877582, "post_id": 28722599, "comment_id": 45732040, "body": "What is <code>test_no</code> where is it declared and initialized?"}, {"owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "edited": false, "score": 0, "creation_date": 1424877610, "post_id": 28722599, "comment_id": 45732060, "body": "What is <code>test_no</code>?  Presumably garbage.  Your sprintf most likely writes well past 99 characters off from <code>where_for_test_records</code>.  Look up &quot;Undefined behavior&quot;.  <code>strncmp</code> returns an <code>int</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424877655, "post_id": 28722599, "comment_id": 45732099, "body": "And <code>TestG</code>. And <code>Query2Result</code>."}, {"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 0, "creation_date": 1424877706, "post_id": 28722599, "comment_id": 45732134, "body": "Please provide an SSCCE"}, {"owner": {"reputation": 2785, "user_id": 2665434, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0aae4d8fa2c8c2b4097c5bd97390a5c3?s=128&d=identicon&r=PG", "display_name": "xaisoft", "link": "https://stackoverflow.com/users/2665434/xaisoft"}, "reply_to_user": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "edited": false, "score": 1, "creation_date": 1424877942, "post_id": 28722599, "comment_id": 45732299, "body": "@HappyGreenKidNaps - Hi, can you explain what you mean by <code>sprintf most likely writes well past 99 characters off from where_for_test_records</code>.  Are you saying that if the string is larger than 100, it could be overwriting the memory where <code>use_custom_value</code> is allocated?  Sorry, I am fairly new to using c."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1424878058, "post_id": 28722599, "comment_id": 45732377, "body": "If you answer the previous comments, you will get a comprehensive answer."}, {"owner": {"reputation": 2785, "user_id": 2665434, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0aae4d8fa2c8c2b4097c5bd97390a5c3?s=128&d=identicon&r=PG", "display_name": "xaisoft", "link": "https://stackoverflow.com/users/2665434/xaisoft"}, "reply_to_user": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 0, "creation_date": 1424878195, "post_id": 28722599, "comment_id": 45732507, "body": "@Devolus - What is SSCCE?"}, {"owner": {"reputation": 2785, "user_id": 2665434, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0aae4d8fa2c8c2b4097c5bd97390a5c3?s=128&d=identicon&r=PG", "display_name": "xaisoft", "link": "https://stackoverflow.com/users/2665434/xaisoft"}, "edited": false, "score": 0, "creation_date": 1424878262, "post_id": 28722599, "comment_id": 45732574, "body": "@EugeneSh.- I&#39;m working on it."}, {"owner": {"reputation": 2785, "user_id": 2665434, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0aae4d8fa2c8c2b4097c5bd97390a5c3?s=128&d=identicon&r=PG", "display_name": "xaisoft", "link": "https://stackoverflow.com/users/2665434/xaisoft"}, "reply_to_user": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "edited": false, "score": 0, "creation_date": 1424892790, "post_id": 28722599, "comment_id": 45742199, "body": "@HappyGreenKidNaps - Turned out to be the length of <code>where_for_test_records</code>.  If you create an answer from that, I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "is_accepted": true, "score": 1, "last_activity_date": 1424905508, "creation_date": 1424905508, "answer_id": 28731421, "question_id": 28722599, "link": "https://stackoverflow.com/questions/28722599/sprintf-is-changing-the-value-of-a-boolean/28731421#28731421", "title": "sprintf is changing the value of a boolean", "body": "<p>What is <code>test_no</code>?  Is it a number?  If so, you have the wrong format specifier (try <code>%d</code> instead of <code>%s</code>).</p>\n\n<p>If <code>test_no</code> is indeed a string, its contents are presumably garbage. It causes your sprintf call to write well past 99 characters off from <code>where_for_test_records</code> (<em>test = 'test_no is more than 100 characters long'</em>).</p>\n\n<p>Look up \"Undefined behavior\" on how an unrelated piece of code that does wrong affects a program in ways you do not expect.</p>\n\n<p>Note that <code>strncmp</code> returns an int, not a true/false.  In fact, a return of 0 is not false at all in the context of <code>strcmp</code>!</p>\n"}], "owner": {"reputation": 2785, "user_id": 2665434, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0aae4d8fa2c8c2b4097c5bd97390a5c3?s=128&d=identicon&r=PG", "display_name": "xaisoft", "link": "https://stackoverflow.com/users/2665434/xaisoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 28731421, "answer_count": 1, "score": 0, "last_activity_date": 1424905508, "creation_date": 1424877286, "question_id": 28722599, "link": "https://stackoverflow.com/questions/28722599/sprintf-is-changing-the-value-of-a-boolean", "title": "sprintf is changing the value of a boolean", "body": "<p>I have the following code and after the <code>sprintf</code> function is executed, the boolean <code>use_custom_value</code> is set to false and I can't figure out why.  Here is the code with some comments:</p>\n\n<pre><code>bool use_custom_value;\n\nuse_custom_value = strncmp(custom_value_id, \"\", SZ_ID + 1);\n\n/* use_custom_value is true */\n\nint init_complete = localInitTable ( );\n\nchar *buf;\n\nint  close_fp = 0;\n\nbuf = ( char * ) malloc ( 1024 * 1024 );\n\nmemset ( buf, ' ', 1024 * 1024 );\n\n*buf = '\\0';\n\nint  filled_byte = 0;\n\nTEST_DEF test_def;\n\nMYSQL_RES *Result = NULL;\n\nchar where_for_test_records[100];\n\nint  err1;\n\nchar *testp;\n\ntestp = ( char * ) malloc ( sizeof ( testp_DEF ) + 1 );\n\nif ( use_custom_value )\n{\n        /* use_custom_value is true */\n\n        sprintf ( where_for_test_records, \n                  \"test='%s'\", test_no );\n\n        /* use_custom_value is false, why?*/\n\n        Result = Query2Result ( &amp;TestG, where_for_test_records );\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4908, "user_id": 2813263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fa58c516577bcbd4ef082553dedad4a5?s=128&d=identicon&r=PG", "display_name": "Domino", "link": "https://stackoverflow.com/users/2813263/domino"}, "edited": false, "score": 0, "creation_date": 1424877399, "post_id": 28722521, "comment_id": 45731896, "body": "Try to indent your code correctly, and your English is hard to follow. I&#39;m not sure of what you&#39;re trying to achieve."}, {"owner": {"reputation": 602, "user_id": 2608071, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2abaf849fb1d66c9864af9384183b3c2?s=128&d=identicon&r=PG", "display_name": "TriHard8", "link": "https://stackoverflow.com/users/2608071/trihard8"}, "reply_to_user": {"reputation": 4908, "user_id": 2813263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fa58c516577bcbd4ef082553dedad4a5?s=128&d=identicon&r=PG", "display_name": "Domino", "link": "https://stackoverflow.com/users/2813263/domino"}, "edited": false, "score": 2, "creation_date": 1424877782, "post_id": 28722521, "comment_id": 45732195, "body": "@JacqueGoupil no reason to criticize the guy&#39;s english.  If you don&#39;t know how to solve his problem keep your hands off your keyboard."}, {"owner": {"reputation": 4908, "user_id": 2813263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fa58c516577bcbd4ef082553dedad4a5?s=128&d=identicon&r=PG", "display_name": "Domino", "link": "https://stackoverflow.com/users/2813263/domino"}, "edited": false, "score": 0, "creation_date": 1424877917, "post_id": 28722521, "comment_id": 45732280, "body": "Sorry, I didn&#39;t mean to insult. I just meant that the question was not clear."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4046403"}, "edited": false, "score": 0, "creation_date": 1424879565, "post_id": 28722521, "comment_id": 45733625, "body": "I am not native speaker and try to express myself  and sorry for wrong expressions. I tried to change it thanks to edit."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4046403"}, "edited": false, "score": 0, "creation_date": 1424879900, "post_id": 28723076, "comment_id": 45733916, "body": "Firstly thanks for your interest but I considered that length of unsigned interger is 32 bit and every adress on the memory can be expressed by this 32 bit. Am I wrong?"}, {"owner": {"reputation": 4908, "user_id": 2813263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fa58c516577bcbd4ef082553dedad4a5?s=128&d=identicon&r=PG", "display_name": "Domino", "link": "https://stackoverflow.com/users/2813263/domino"}, "edited": false, "score": 0, "creation_date": 1424880132, "post_id": 28723076, "comment_id": 45734113, "body": "The size of an int depends on the machine you are on. This is true for most types in C. According to the standard, it is at least 16 bits - it does not have to be 32 bit. <a href=\"http://en.wikipedia.org/wiki/C_data_types\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/C_data_types</a>"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1424880793, "post_id": 28723076, "comment_id": 45734609, "body": "@EgemenSar\u0131maden Modern computers tend to be 64-bit, yet on many 64-bit platforms <code>int</code> is still 32 bits, i.e., not large enough. <code>size_t</code> is almost always large enough to hold a pointer, but not guaranteed to be so (e.g., in a segmented architecture <code>size_t</code> could conceivably be smaller than a \u201cfar\u201d pointer). If <code>uintptr_t</code> is available, use it \u2013 it exists for this very purpose."}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": true, "score": 2, "last_activity_date": 1424878563, "creation_date": 1424878563, "answer_id": 28723076, "question_id": 28722521, "link": "https://stackoverflow.com/questions/28722521/creating-a-pointer-in-c/28723076#28723076", "title": "Creating a pointer in C", "body": "<p><code>unsigned int</code> may not be large enough to hold a pointer. You should use <code>uintptr_t</code> from <code>stdint.h</code> if available (<code>size_t</code> if not).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7060050, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5626d59c909e7a6d71ce4779636d8236?s=128&d=identicon&r=PG", "display_name": "ELBOW1", "link": "https://stackoverflow.com/users/7060050/elbow1"}, "is_accepted": false, "score": 0, "last_activity_date": 1477224733, "last_edit_date": 1477224733, "creation_date": 1477218685, "answer_id": 40201926, "question_id": 28722521, "link": "https://stackoverflow.com/questions/28722521/creating-a-pointer-in-c/40201926#40201926", "title": "Creating a pointer in C", "body": "<p>first what is that:</p>\n\n<pre><code>points to 0x%08x\n</code></pre>\n\n<p>you mean probably <code>%p</code></p>\n\n<pre><code>*(char *(hacky_nonpointer)));\n</code></pre>\n\n<p>thats next fail</p>\n\n<p>its rightfully <code>*((char *) hacky_nonpointer));</code></p>\n\n<p>here you need type in space:</p>\n\n<pre><code>*((int *)hacky_nonpointer));\n</code></pre>\n\n<p>rightfully: </p>\n\n<pre><code>*((int *) hacky_nonpointer));\n</code></pre>\n\n<p>and here no space:</p>\n\n<pre><code>'%c' \\n\"\n</code></pre>\n\n<p>rightfully:</p>\n\n<pre><code>'%c'\\n\"\n</code></pre>\n\n<p>your code must be running after that correction</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4046403"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 28723076, "answer_count": 2, "score": -4, "last_activity_date": 1477224733, "creation_date": 1424877041, "last_edit_date": 1424879398, "question_id": 28722521, "link": "https://stackoverflow.com/questions/28722521/creating-a-pointer-in-c", "title": "Creating a pointer in C", "body": "<p>I use Ubuntu 14.10 and GCC. I am trying to create a pointer with unsigned integer type but I get this message: </p>\n\n<pre><code>Segmentation fault (core dumped)\n</code></pre>\n\n<p>This is my code. I used gdb and think that the error has to do with my <code>printf</code> statements:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n  int i;\n  char char_array[5] = {'a', 'b', 'c', 'd', 'e'};\n  int int_array[5] = {1, 2, 3, 4, 5};\n\n  unsigned int hacky_nonpointer;\n  hacky_nonpointer = (unsigned int) char_array;\n\n  for (i = 0; i &lt; 5; i++) {\n    printf(\"[hacky_nonpointer] points to 0x%08x which contains the  char '%c' \\n\",\n    hacky_nonpointer, *(char *(hacky_nonpointer)));\n    hacky_nonpointer = hacky_nonpointer + sizeof(char);\n  }\n\n  hacky_nonpointer = (unsigned) int_array;\n\n  for (i = 0; i &lt; 5; i++) {\n    printf(\"[char pointer] points to %08x, which contains the integer %d\\n\",\n    hacky_nonpointer, *((int *)hacky_nonpointer));\n    hacky_nonpointer = hacky_nonpointer + sizeof(int);\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "image", "image-processing", "mathematical-morphology", "image-morphology"], "comments": [{"owner": {"reputation": 13785, "user_id": 3352541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IAKOh.jpg?s=128&g=1", "display_name": "Benoit_11", "link": "https://stackoverflow.com/users/3352541/benoit-11"}, "edited": false, "score": 0, "creation_date": 1424877296, "post_id": 28721716, "comment_id": 45731848, "body": "So what is your question exactly? Why is this happening or how can you get rid of them? Also please tag the programming language you&#39;re using. Is it Matlab? Thanks!"}, {"owner": {"reputation": 19, "user_id": 4606064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b1b99f906ee8a5e8cac3330b4705e2?s=128&d=identicon&r=PG&f=1", "display_name": "avr", "link": "https://stackoverflow.com/users/4606064/avr"}, "edited": false, "score": 0, "creation_date": 1424877481, "post_id": 28721716, "comment_id": 45731961, "body": "i believe it should not be happening. if its right, then why is it happening. If wrong, then wh is it happening and how do i correct it."}, {"owner": {"reputation": 19, "user_id": 4606064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b1b99f906ee8a5e8cac3330b4705e2?s=128&d=identicon&r=PG&f=1", "display_name": "avr", "link": "https://stackoverflow.com/users/4606064/avr"}, "edited": false, "score": 0, "creation_date": 1424877686, "post_id": 28721716, "comment_id": 45732120, "body": "I&#39;m using C. the code has been inserted in the statement."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1424878570, "post_id": 28721716, "comment_id": 45732831, "body": "The indexing into the mask looks wrong, you&#39;re going to get negative indexes."}, {"owner": {"reputation": 19, "user_id": 4606064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b1b99f906ee8a5e8cac3330b4705e2?s=128&d=identicon&r=PG&f=1", "display_name": "avr", "link": "https://stackoverflow.com/users/4606064/avr"}, "edited": false, "score": 0, "creation_date": 1424879506, "post_id": 28721716, "comment_id": 45733573, "body": "i&#39;m pretty sure indexing is right. it gives correct results upto 9x9 SE. i&#39;m getting error (if it is one) only for 15x15 SE."}, {"owner": {"reputation": 19, "user_id": 4606064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b1b99f906ee8a5e8cac3330b4705e2?s=128&d=identicon&r=PG&f=1", "display_name": "avr", "link": "https://stackoverflow.com/users/4606064/avr"}, "edited": false, "score": 0, "creation_date": 1424879590, "post_id": 28721716, "comment_id": 45733639, "body": "although you could replace&quot; ((2*limit)-(i+1))&quot; by &quot;(i+1))&quot;. it&#39;ll be the same since SE is a symmteric matrix with all 1&#39;s."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4606064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b1b99f906ee8a5e8cac3330b4705e2?s=128&d=identicon&r=PG&f=1", "display_name": "avr", "link": "https://stackoverflow.com/users/4606064/avr"}, "edited": false, "score": 2, "creation_date": 1424883135, "post_id": 28724190, "comment_id": 45736275, "body": "the correction works. thanks for pointing out. Even i&#39;m wondering how i haven&#39;t got segmentation faults!! And the optimization at last reduces the run time by more than 50% in this case. nice suggestion!"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 19, "user_id": 4606064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b1b99f906ee8a5e8cac3330b4705e2?s=128&d=identicon&r=PG&f=1", "display_name": "avr", "link": "https://stackoverflow.com/users/4606064/avr"}, "edited": false, "score": 1, "creation_date": 1424883201, "post_id": 28724190, "comment_id": 45736316, "body": "@avr - Ah that&#39;s the thing with allocated memory lol.  It&#39;s a tricky business.  Sometimes accessing that element in that undefined location works, and sometimes it doesn&#39;t.  You would have definitely gotten an error if that array is stored in the stack (i.e. declaring an array of a known size at compile-time), not the heap (i.e. dynamically allocating the array at run-time)."}, {"owner": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1424946162, "post_id": 28724190, "comment_id": 45763195, "body": "@rayryeng, it seems you&#39;re into Image Processing - could you assist us open this dedicated group: <a href=\"http://area51.stackexchange.com/proposals/66531/computer-vision/72084\">area51.stackexchange.com/proposals/66531/computer-vision/720&zwnj;&#8203;84</a> Just vote to questions with less than 10 up votes. Thanks."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1424980533, "post_id": 28724190, "comment_id": 45785038, "body": "@Drazick - It seems that way doesn&#39;t it?  I voted for the CV StackExchange proposal a while ago as well as voting for the questions.  Just waiting for it to get approved!"}, {"owner": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1424980839, "post_id": 28724190, "comment_id": 45785236, "body": "@rayryeng, You answer to a lot of people, would you suggest them to assist as well? How about helping me making it Image Processing and Computer Vision forum?"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1424981369, "post_id": 28724190, "comment_id": 45785555, "body": "@Drazick - That sounds promising.  I may even apply to be a moderator for that forum.  I&#39;ll see what I can do!"}, {"owner": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1424981689, "post_id": 28724190, "comment_id": 45785767, "body": "@rayryeng, Could you support the name change (Adding Image Processing to the forum name in addition to Computer Vision): <a href=\"http://discuss.area51.stackexchange.com/questions/17733/computer-vision-vs-computer-vision-and-image-processing\" title=\"computer vision vs computer vision and image processing\">discuss.area51.stackexchange.com/questions/17733/&hellip;</a>"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1424982013, "post_id": 28724190, "comment_id": 45785935, "body": "@Drazick - I saw that post when I was there a few minutes ago.  I upvoted your answer."}], "tags": [], "owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "is_accepted": true, "score": 2, "last_activity_date": 1424908237, "last_edit_date": 1424908237, "creation_date": 1424881362, "answer_id": 28724190, "question_id": 28721716, "link": "https://stackoverflow.com/questions/28721716/unwanted-noise-element-during-dilation/28724190#28724190", "title": "Unwanted Noise element during dilation", "body": "<p>The culprit is your <code>if</code> statement inside the second nested <code>for</code> loop blocks:</p>\n\n<pre><code>for(int j = -limit; j &lt;=limit ; j++) {\n    for(int i = -limit; i &lt;=limit ; i++) {\n        if(*(SE + (j+1)*m + (i+1) ) &gt; 0) {\n            pixelvalue = (*(SE + (j+1)*m + ((2*limit)-(i+1)) ))  (Image.at&lt;unsigned char&gt;(y+j,x+i));\n            if (pixelvalue&gt;127)\n                max=255.0;\n        }\n    }\n}\n</code></pre>\n\n<p>The way you are indexing into your structuring element assumes that it is a 3 x 3 mask, because you are expecting that <code>i</code> and <code>j</code> hover from <code>-1</code> to <code>1</code>.  Mark Ransom is correct in his assessment in that you would have indices with negative values.  Try setting <code>m = 15</code>, which is where your problem lies.  This means that <code>limit = 7</code> and then start with the beginning of this loop see what row and column you are accessing as you are trying to access the mask with row-major linear indices.  </p>\n\n<p>If <code>limit = 7</code>, that means at the beginning, <code>j = -7, i = -7</code> and so <code>(j+1)*m = (-7+1)*15 = -90</code>.  Also <code>(2*limit) - (i+1) = (2*7) - (-7+1) = 20</code>.  This ultimately means that you are trying to access the memory location of <code>SE - 90 + 20 = SE - 70</code> so you're actually assessing the memory location 70 bytes (assuming <code>unsigned char</code>) away from the origin of your structuring element, and not the top left corner of the structuring element... so are you sure you wrote that code right?  I'm surprised you haven't gotten any segmentation faults yet.  You may have lucked out with the <code>9 x 9</code> because the row offset is negative, but the column offset will be positive and they may be equal in magnitude, so you probably lucked out with accessing all of the structuring elements then, but this certainly won't be true for higher mask sizes.</p>\n\n<p>In order to ensure that you cover <strong>all</strong> of the mask coefficients, you need to change the offset to <code>+limit</code>, not <code>+1</code>.  I also don't understand the <code>2*limit</code> inside the <code>if</code> statement.  You can just access the mask element directly.  Therefore, you need to do this:</p>\n\n<pre><code>for(int j = -limit; j &lt;=limit ; j++) {\n    for(int i = -limit; i &lt;=limit ; i++) {\n        if(*(SE + (j+limit)*m + (i+limit) ) &gt; 0) {\n            pixelvalue = (*(SE + (j+limit)*m + (i+limit) )) * (Image.at&lt;unsigned char&gt;(y+j,x+i));\n            if (pixelvalue&gt;127)\n                max=255.0;\n        }\n    }\n}\n</code></pre>\n\n<p>However, if I can suggest something, because you are doing morphological binary dilation, you only have to check to see if any pixels in your structuring element are touching a white pixel.  Because this is a square structuring element, this will be even easier. Essentially, in a <code>m x m</code> pixel neighbourhood, if any pixel is non-zero, then you'd set the output to 255 and break out of the loop.  A small optimization to your code could be:</p>\n\n<pre><code>for(int j = -limit; j &lt;=limit ; j++) {\n    for(int i = -limit; i &lt;=limit ; i++) {\n        pixelValue = (*(SE + (j+limit)*m + (i+limit) )); // Get structuring element value\n        pixelValue *= (Image.at&lt;unsigned char&gt;(y+j,x+i)); // Obtain corresponding intensity\n        if (pixelValue != 0) { // If non-zero, set output to max and break\n            max = 255.0;\n            i = limit + 1; j = limit + 1; // break out of loop\n        }\n    }\n}\n</code></pre>\n\n<p>This obviously won't save anything when you have areas of complete darkness, but when it comes to areas that are completely white, the double nested <code>for</code> loops that run through the structuring element will only iterate once.  It may save some clock cycles, but always remember that brute-force morphology has already terrible computational complexity as it is.</p>\n"}], "owner": {"reputation": 19, "user_id": 4606064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b1b99f906ee8a5e8cac3330b4705e2?s=128&d=identicon&r=PG&f=1", "display_name": "avr", "link": "https://stackoverflow.com/users/4606064/avr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 28724190, "answer_count": 1, "score": 1, "last_activity_date": 1424908237, "creation_date": 1424874907, "last_edit_date": 1424881426, "question_id": 28721716, "link": "https://stackoverflow.com/questions/28721716/unwanted-noise-element-during-dilation", "title": "Unwanted Noise element during dilation", "body": "<p>I'm applying the dilation operation on a binary ricegrain picture. When the structuring element used has size 9x9, the noise particles get enlarged, which is logical. But when I use a structuring element of size 15x15, i get new noise particles adjacent to the original noise particles. This is vry confusing as i can't why this is happening. The stucturing element is a nxn matrix with all 1's. The images have been attached for reference.</p>\n\n<p>Reference image:<br>\n<img src=\"https://i.stack.imgur.com/B1Z3Z.png\" alt=\"enter image description here\"></p>\n\n<p>Dilated image (9x9 SE):<br>\n<img src=\"https://i.stack.imgur.com/rKhCy.jpg\" alt=\"enter image description here\"></p>\n\n<p>Dilated image (15x15 SE):<br>\n<img src=\"https://i.stack.imgur.com/Dsf9P.jpg\" alt=\"enter image description here\">\nPlease help!!</p>\n\n<p>Code:</p>\n\n<pre><code>void DilateBinary(Mat Image, Mat&amp; op, double* SE, int m){\nop=Image.clone();\ndouble pixelvalue;\n\nint limit=(m-1)/2;\nfor(int y = limit; y &lt; (Image.rows - limit); y++)\n            {\n                for(int x = limit; x &lt; (Image.cols - limit); x++)\n                {\n                    double max=0.0;\n                    //printf(\"Input pixel: %u \\n\",Image.at&lt;unsigned char&gt;(y,x));\n                    for(int j = -limit; j &lt;=limit ; j++)\n                    {\n                        for(int i = -limit; i &lt;=limit ; i++)\n                        {\n                            if(*(SE + (j+1)*m + (i+1) ) &gt; 0)\n                            {\n                                pixelvalue = (*(SE + (j+1)*m + ((2*limit)-(i+1)) )) * (Image.at&lt;unsigned char&gt;(y+j,x+i));\n                                //printf(\"%f\",pixelvalue);\n                                if (pixelvalue&gt;127)\n                                    max=255.0;\n                            }\n                        }\n                    }\n                    op.at&lt;uchar&gt;(y,x) = max;\n                    //printf(\"Output pixel: %u \\n\",op.at&lt;unsigned char&gt;(y,x));\n                    //printf(\"Modified pixel= %f %d\\n\",pixelvalue,cvRound(pixelvalue));\n\n                }\n            }\n</code></pre>\n\n<p>Note: SE is the pointer to the mask/SE i'm using. &amp; m is 9 for 9x9 SE, 15 for 15x15 SE.........</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1424874614, "post_id": 28721526, "comment_id": 45729830, "body": "In which line are you getting the error?"}, {"owner": {"reputation": 203, "user_id": 4279158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1beacff49c49beeec2579553cb13a65b?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/4279158/neo"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1424874860, "post_id": 28721526, "comment_id": 45730012, "body": "oscdata = noteToOsc(notedata[sequenceposition]); - Im not sure what to replace the array with"}, {"owner": {"reputation": 376, "user_id": 1838710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tkot5.jpg?s=128&g=1", "display_name": "Ashish Chavan", "link": "https://stackoverflow.com/users/1838710/ashish-chavan"}, "edited": false, "score": 0, "creation_date": 1424875980, "post_id": 28721526, "comment_id": 45730836, "body": "Your &quot;noteToOsc&quot; function returns &quot;OscData&quot;. Instead you can return pointer to OscData You need to change you function for that."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1424875312, "last_edit_date": 1424875312, "creation_date": 1424874556, "answer_id": 28721598, "question_id": 28721526, "link": "https://stackoverflow.com/questions/28721526/function-in-8-step-sequencer/28721598#28721598", "title": "Function in 8 step sequencer", "body": "<p>In C</p>\n\n<blockquote>\n  <p>Arrays are not assignable .</p>\n</blockquote>\n\n<p>You are doing this here</p>\n\n<pre><code>oscdata = noteToOsc(notedata[sequenceposition]);\n</code></pre>\n\n<p><code>oscdata</code> is an array and <code>oscdata[sequenceposition]</code> is an element of the array so you can assign value to an element</p>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 0, "last_activity_date": 1424875223, "creation_date": 1424875223, "answer_id": 28721835, "question_id": 28721526, "link": "https://stackoverflow.com/questions/28721526/function-in-8-step-sequencer/28721835#28721835", "title": "Function in 8 step sequencer", "body": "<p>This:</p>\n\n<pre><code>oscdata[0].frequency = frequency;\noscdata[1].amplitude = amplitude;\n\noscdata = noteToOsc(notedata[sequenceposition]);\n</code></pre>\n\n<p>doesn't make any sense. You can't assign to arrays, but you don't \"want\" to either. It should just be something like:</p>\n\n<pre><code>oscdata[sequenceposition] = noteToOsc(notedata[sequenceposition]);\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 4279158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1beacff49c49beeec2579553cb13a65b?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/4279158/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 1, "accepted_answer_id": 28721835, "answer_count": 2, "score": 2, "last_activity_date": 1546902732, "creation_date": 1424874390, "last_edit_date": 1546902732, "question_id": 28721526, "link": "https://stackoverflow.com/questions/28721526/function-in-8-step-sequencer", "title": "Function in 8 step sequencer", "body": "<pre><code>typedef struct\n{\n    float frequency;\n    float amplitude;\n}   OscData;\n\ntypedef struct\n{\n    int notenumber;\n    int velocity;\n}   NoteData;\n\nOscData noteToOsc (NoteData note);\n\nint main()\n{\n    /*declare integer to store midi note value*/\n    int note;\n    int velo;\n\n    NoteData notedata[8];\n    int sequenceposition;\n\n    float frequency, x, y;\n    float amplitude;\n    OscData oscdata[2];\n\n\n    /*get user to input a midi value*/\n    printf(\"press 8 keys on the Axion MIDI keyboard to create a loop\\n\");\n\n    /*recording starts here*/\n    sequenceposition = 0;\n    do\n    {\n        note = aserveGetNote();\n        velo = aserveGetVelocity();\n\n        if (velo != 0)\n        {\n            notedata[sequenceposition].notenumber = note;\n            notedata[sequenceposition].velocity = velo;\n            printf(\"note number = %d\\n\", notedata[sequenceposition].notenumber);\n            printf(\"velocity = %d\\n\", notedata[sequenceposition].velocity);\n            sequenceposition++;\n        }\n    }\n    while (sequenceposition &lt; 8);\n    /*recording ends here*/\n\n    while(true)\n    {\n        /*playback starts here*/\n        for(sequenceposition = 0; sequenceposition &lt; 8; sequenceposition++)\n        {\n            oscdata[0].frequency = frequency;\n            oscdata[1].amplitude = amplitude;\n\n            oscdata = noteToOsc(notedata[sequenceposition]);\n\n\n            /*display frequency*/\n            printf(\"Starting oscillator at %5.2fHz\\n\", oscdata[0].frequency);\n            printf(\"Amplitude = %f\\n\", oscdata[1].amplitude);\n\n            /*start oscillator*/\n            aserveOscillator(0, oscdata[0].frequency, oscdata[1].amplitude, 0);\n            aserveSleep(200);\n        }\n\n    }\n\n    return 0;\n    /*end*/\n\n\nOscData noteToOsc (NoteData note);\n\n{\n    float frequency, x, y, amplitude;\n\n\n    oscdata[0].frequency = frequency;\n    oscdata[1].amplitude = amplitude;\n\n        /*convert midi value to frequency and velocity to amplitude*/\n\n        x = 2;\n        y = (notedata[sequenceposition].notenumber-69.0)/12.0;\n        oscdata[0].frequency = 440 * pow(x, y);\n\n        amplitude = notedata[sequenceposition].velocity / 127.0;\n\n}\n\n}\n</code></pre>\n\n<p>This is code for an 8 step sequencer that scans for the input of 8 notes from a midi keyboard. The function called in main is supposed to do the conversion of note number to frequency and velocity to amplitude but there is an error 'Array type 'OscData[2] is not assignable' Am I supposed to be putting something else in place of Oscdata?\nThanks</p>\n"}, {"tags": ["c", "assembly", "struct", "reverse-engineering"], "comments": [{"owner": {"reputation": 305, "user_id": 2570715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3f113e3fb8ac30d2b9668af3fa91b1?s=128&d=identicon&r=PG&f=1", "display_name": "scottybobby", "link": "https://stackoverflow.com/users/2570715/scottybobby"}, "reply_to_user": {"reputation": 1152, "user_id": 1952956, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4d108adaa243fa6c556d4325194ae437?s=128&d=identicon&r=PG", "display_name": "Oni1", "link": "https://stackoverflow.com/users/1952956/oni1"}, "edited": false, "score": 0, "creation_date": 1424874960, "post_id": 28721288, "comment_id": 45730091, "body": "@T.C. Thanks for pointing that out. I edited it."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1424875614, "post_id": 28721288, "comment_id": 45730591, "body": "<code>shrw $4, 8(%eax)</code> suggests that <code>m-&gt;y</code> is an <code>unsigned short</code>. a signed value would typically use <code>sar</code> (shift arithmetic right)."}, {"owner": {"reputation": 305, "user_id": 2570715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3f113e3fb8ac30d2b9668af3fa91b1?s=128&d=identicon&r=PG&f=1", "display_name": "scottybobby", "link": "https://stackoverflow.com/users/2570715/scottybobby"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1424875681, "post_id": 28721288, "comment_id": 45730638, "body": "@BrettHale is that because it&#39;s a w after words? Meaning two bytes?"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1424875757, "post_id": 28721288, "comment_id": 45730680, "body": "@scottybobby - you got it. <code>b</code>, <code>w</code>, <code>l</code>, <code>q</code> for 1, 2, 4, 8 bytes."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1424876234, "post_id": 28721288, "comment_id": 45731016, "body": "The table you were given doesn&#39;t include a size and alignment for pointers (such as struct node *)."}, {"owner": {"reputation": 305, "user_id": 2570715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3f113e3fb8ac30d2b9668af3fa91b1?s=128&d=identicon&r=PG&f=1", "display_name": "scottybobby", "link": "https://stackoverflow.com/users/2570715/scottybobby"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1424876333, "post_id": 28721288, "comment_id": 45731095, "body": "@rcgldr pointers are 4 bytes and their alignment will be the same"}, {"owner": {"reputation": 305, "user_id": 2570715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3f113e3fb8ac30d2b9668af3fa91b1?s=128&d=identicon&r=PG&f=1", "display_name": "scottybobby", "link": "https://stackoverflow.com/users/2570715/scottybobby"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1424876496, "post_id": 28721288, "comment_id": 45731234, "body": "@rcgldr thanks for pointing that out. I edited the question to show that."}], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 1952956, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4d108adaa243fa6c556d4325194ae437?s=128&d=identicon&r=PG", "display_name": "Oni1", "link": "https://stackoverflow.com/users/1952956/oni1"}, "edited": false, "score": 0, "creation_date": 1424877079, "post_id": 28722319, "comment_id": 45731701, "body": "n+12 means that they jumping 12 Bytes from n? So x and y are together 12 Bytes long, correct?"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "reply_to_user": {"reputation": 1152, "user_id": 1952956, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4d108adaa243fa6c556d4325194ae437?s=128&d=identicon&r=PG", "display_name": "Oni1", "link": "https://stackoverflow.com/users/1952956/oni1"}, "edited": false, "score": 0, "creation_date": 1424877353, "post_id": 28722319, "comment_id": 45731868, "body": "@T.C. - spot on. <code>x</code> could also have been a 64-bit <code>[unsigned] long long</code> (or just <code>long</code> on LP64 platforms), but that&#39;s not given as an option here. The <code>node</code> struct is 20 bytes in total."}, {"owner": {"reputation": 1152, "user_id": 1952956, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4d108adaa243fa6c556d4325194ae437?s=128&d=identicon&r=PG", "display_name": "Oni1", "link": "https://stackoverflow.com/users/1952956/oni1"}, "edited": false, "score": 0, "creation_date": 1424877499, "post_id": 28722319, "comment_id": 45731969, "body": "pointer of next -&gt; 4Bytes, pointer of prev -&gt; 4Bytes, and the rest? how is that 12 bytes shared? how would you fill the types of the variables x and y?"}, {"owner": {"reputation": 305, "user_id": 2570715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3f113e3fb8ac30d2b9668af3fa91b1?s=128&d=identicon&r=PG&f=1", "display_name": "scottybobby", "link": "https://stackoverflow.com/users/2570715/scottybobby"}, "edited": false, "score": 0, "creation_date": 1424877801, "post_id": 28722319, "comment_id": 45732206, "body": "@BrettHale I&#39;m not entirely sure how you got m = n.next-&gt;prev.  I can&#39;t figure out how you counted the 16 bytes while dereferencing."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "reply_to_user": {"reputation": 305, "user_id": 2570715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3f113e3fb8ac30d2b9668af3fa91b1?s=128&d=identicon&r=PG&f=1", "display_name": "scottybobby", "link": "https://stackoverflow.com/users/2570715/scottybobby"}, "edited": false, "score": 0, "creation_date": 1424878119, "post_id": 28722319, "comment_id": 45732436, "body": "@scottybobby - <code>movl (%eax), %eax</code> would have &#39;loaded&#39; the first 4 bytes of the node <i>pointed to</i> by <code>n.next</code>. The 16 byte offset loads the 4 bytes starting at the 16th byte, i.e., <code>n.next-&gt;prev</code>."}], "tags": [], "owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "is_accepted": true, "score": 4, "last_activity_date": 1424877814, "last_edit_date": 1424877814, "creation_date": 1424876460, "answer_id": 28722319, "question_id": 28721288, "link": "https://stackoverflow.com/questions/28721288/c-struct-to-complete-assembly-code-for-function/28722319#28722319", "title": "C struct to complete assembly code for function", "body": "<p>In 32-bit mode, a pointer is 4 bytes, and typically aligned on a 4-byte boundary. So <code>n + 12</code> is actually loading <code>&amp; n.next</code> to <code>%eax</code>. e.g., if <code>y</code> <em>is</em> an <code>unsigned short</code>, there are 2 bytes of padding in the structure before <code>next</code>.</p>\n\n<p><code>movl 16(%eax),%eax</code> is dereferencing with a 16-byte offset, to give: <code>m = n.next-&gt;prev</code></p>\n\n<hr>\n\n<pre><code>struct node\n{\n    double x;          /* bytes: 0  .. 7  */\n    unsigned short y;  /* bytes: 8  .. 9  */\n                       /* bytes: 10 .. 11 */ /* (padding) */\n    struct node *next; /* bytes: 12 .. 15 */\n    struct node *prev; /* bytes: 16 .. 19 */\n};\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 2570715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3f113e3fb8ac30d2b9668af3fa91b1?s=128&d=identicon&r=PG&f=1", "display_name": "scottybobby", "link": "https://stackoverflow.com/users/2570715/scottybobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 28722319, "answer_count": 1, "score": 2, "last_activity_date": 1424877814, "creation_date": 1424873749, "last_edit_date": 1424876464, "question_id": 28721288, "link": "https://stackoverflow.com/questions/28721288/c-struct-to-complete-assembly-code-for-function", "title": "C struct to complete assembly code for function", "body": "<p>I was given the following code skeleton:</p>\n\n<pre><code>typedef struct node {\n    _______________ x;\n    _______________ y;\n    struct node *next;\n    struct node *prev;\n} node_t;\n\nnode_t n;\nvoid func() {\n    node_t *m;\n    m = ______________________;\n    m-&gt;y /= 16;\n    return; \n}\n</code></pre>\n\n<p>with the following assembly code generated on an IA-32 linux machine:</p>\n\n<pre><code>func:\n  pushl %ebp\n  movl n+12,%eax\n  movl 16(%eax),%eax\n  movl %esp,%ebp\n  movl %ebp,%esp\n  shrw $4,8(%eax)\n  popl %ebp\n  ret\n</code></pre>\n\n<p>And I need to fill in the blanks above.  I do believe that when I look at he lines:</p>\n\n<pre><code>m-&gt;y /= 16; and shrw $4,8(%eax)\n</code></pre>\n\n<p>this is obviously a right shift on the 8th byte of the node_t *m.  So what I think is that there are 8 bytes before y so x is 8 bytes long (double).  Also, I think that the total size of the struct 'node' comes from the line </p>\n\n<pre><code>movl n+12, %eax\n</code></pre>\n\n<p>because that's where the node_t *m is created.   I'm just not sure how to determine the size of this from that line.</p>\n\n<p>I was also give this information </p>\n\n<p><img src=\"https://i.stack.imgur.com/ACXVA.png\" alt=\"enter image description here\"></p>\n\n<p>It should also be noted that pointers are 4 bytes in size and alignment. </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 4146344, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001662120748/picture?type=large", "display_name": "Dang Manh Truong", "link": "https://stackoverflow.com/users/4146344/dang-manh-truong"}, "edited": false, "score": 0, "creation_date": 1424879144, "post_id": 28721394, "comment_id": 45733297, "body": "Please be more specific, I&#39;m using codeblocks on Windows 7 with a GCC compiler and I don&#39;t know how to add any command like that. Please help, thanks"}, {"owner": {"reputation": 565, "user_id": 4146344, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001662120748/picture?type=large", "display_name": "Dang Manh Truong", "link": "https://stackoverflow.com/users/4146344/dang-manh-truong"}, "edited": false, "score": 0, "creation_date": 1424880956, "post_id": 28721394, "comment_id": 45734766, "body": "Ok now it&#39;s solved (I think) but another problem has popped up. In the Object_new function in &quot;The Object Header file&quot;, there is a type called &quot;size_t&quot; and the compiler said &quot;unknown type name size_t&quot; , how can i fix that?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 565, "user_id": 4146344, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001662120748/picture?type=large", "display_name": "Dang Manh Truong", "link": "https://stackoverflow.com/users/4146344/dang-manh-truong"}, "edited": false, "score": 1, "creation_date": 1424935112, "post_id": 28721394, "comment_id": 45757328, "body": "@DangManhTruong Codeblocks is an <i>IDE</i>, it supports a lot of compilers. You haven&#39;t mentioned which one you are using, so nobody can be more specific.<code>size_t</code> is found in stddef.h."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1424874051, "creation_date": 1424874051, "answer_id": 28721394, "question_id": 28721260, "link": "https://stackoverflow.com/questions/28721260/compilers-error-in-codeblock-sorry-unimplemented-non-trivial-designated-init/28721394#28721394", "title": "Compiler&#39;s error in Codeblock: sorry, unimplemented: non-trivial designated initializers not supported (Learn C the hard way ex19)", "body": "<p>Designated initializers means initialize a struct by using the variable name of a member, like <code>.init = Monster_init</code>. Your book should mention that this feature is only available in the C99 standard or newer. If it doesn't, you need a better book.</p>\n\n<p>You need to compile your code correctly. Tell it to use a newer version of the C standard, rather than a 25 years old version of it. In the gcc compiler, this is done by <code>gcc -std=c99 -pedantic-errors</code> or alternatively <code>gcc -std=c11 -pedantic-errors</code> (preferred if your compiler supports C11).</p>\n"}], "owner": {"reputation": 565, "user_id": 4146344, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001662120748/picture?type=large", "display_name": "Dang Manh Truong", "link": "https://stackoverflow.com/users/4146344/dang-manh-truong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3433, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1429883998, "creation_date": 1424873661, "last_edit_date": 1429883998, "question_id": 28721260, "link": "https://stackoverflow.com/questions/28721260/compilers-error-in-codeblock-sorry-unimplemented-non-trivial-designated-init", "title": "Compiler&#39;s error in Codeblock: sorry, unimplemented: non-trivial designated initializers not supported (Learn C the hard way ex19)", "body": "<p>I'm learning: Learn C the hard way (ex19)\n<a href=\"http://c.learncodethehardway.org/book/ex19.html\" rel=\"nofollow\">http://c.learncodethehardway.org/book/ex19.html</a>\nin \"The game implementation\" part there is this piece of code:</p>\n\n<pre><code>Object MonsterProto = {\n.init = Monster_init,\n.attack = Monster_attack\n};\n</code></pre>\n\n<p>When compiled, it says: sorry, unimplemented: non-trivial designated initializers not supported</p>\n"}, {"tags": ["c", "memory", "preload"], "comments": [{"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1424874246, "post_id": 28721258, "comment_id": 45729574, "body": "<i>next one to one</i>, &quot;Hey&quot; following <i>text</i>?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1424874471, "post_id": 28721258, "comment_id": 45729727, "body": "Not clear for me. What you means with LD_Preload to read text?"}, {"owner": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1424874862, "post_id": 28721258, "comment_id": 45730016, "body": "<a href=\"http://stackoverflow.com/questions/426230/what-is-the-ld-preload-trick\">What is the LD_PRELOAD trick?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "is_accepted": false, "score": 2, "last_activity_date": 1424877074, "last_edit_date": 1424877074, "creation_date": 1424875640, "answer_id": 28722016, "question_id": 28721258, "link": "https://stackoverflow.com/questions/28721258/read-string-next-to-another-in-c/28722016#28722016", "title": "Read string next to another in c", "body": "<p>Defining a shim <code>printf</code> to dump memory around the pointer it is passed is not a difficult task:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid dump(const char *data) {\n    fwrite(data - 32, 1, 64, stdout);\n}\n\nint printf(const char *data, ...) {\n    dump(data);\n}\n</code></pre>\n\n<p>Compile with:</p>\n\n<pre><code>gcc -c -fPIC print.c -o print.o\nld -shared -o libprint.so print.o\n</code></pre>\n\n<p>and now you can <code>LD_PRELOAD=./libprint.so ./program</code> and get the key. Or you could... You have a few separate problems here.</p>\n\n<p>GCC at least optimizes a <code>printf</code> with no placeholders in the format string to a <code>puts</code>. So what gets called by your program is not <code>printf</code>. Well, let's shim <code>puts</code> too:</p>\n\n<pre><code>int puts(const char *data) {\n    dump(data);\n}\n</code></pre>\n\n<p>now you get the dump on screen:</p>\n\n<pre><code>..............Hey........\n</code></pre>\n\n<p>so it's working. But there's no trace of the key. Why?</p>\n\n<p>Because <code>text</code> is a local variable (array) and <code>\"Hey\\n\"</code> is a constant string. So <code>text</code> is allocated on the stack and <code>\"Hey\\n\"</code> in the constant pool, which is not exactly \"next to it\". Your assumption is wrong. If you modify the program as:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;strings.h&gt;\n\nint main(int ac, char **av)\n{\n  char text[] = \"PASS_KEY\";\n  char format[] = \"Hey\\n\";\n\n  printf(format);\n  return 0;\n}\n</code></pre>\n\n<p>which, incidentally, is a thing you <strong>WOULD THINK TWICE BEFORE DOING</strong> because using non-constant format strings for <code>printf</code> is B.A.D. in most cases, it will work:</p>\n\n<pre><code>............Hey\nPASS_KEY.\n</code></pre>\n\n<p>Success!</p>\n"}], "owner": {"reputation": 129, "user_id": 3486006, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/993e59be47bcf9386ea4336cef84627e?s=128&d=identicon&r=PG&f=1", "display_name": "Teldar", "link": "https://stackoverflow.com/users/3486006/teldar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424877074, "creation_date": 1424873656, "last_edit_date": 1424873986, "question_id": 28721258, "link": "https://stackoverflow.com/questions/28721258/read-string-next-to-another-in-c", "title": "Read string next to another in c", "body": "<p>I have this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;strings.h&gt;\n\nint main(int ac, char **av)\n{\n  char text[] = \"PASS_KEY\";\n\n  printf(\"Hey\\n\");\n  return 0;\n}\n</code></pre>\n\n<p>I know those strings are literally next one to one in memory.\nHow can I redefine printf with LD_Preload to read <code>text</code>?</p>\n"}, {"tags": ["java", "c++", "c", "native", "native-code"], "comments": [{"owner": {"reputation": 9863, "user_id": 1820501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/237d6688e4e1834e2cad38629fea4988?s=128&d=identicon&r=PG", "display_name": "Florent Bayle", "link": "https://stackoverflow.com/users/1820501/florent-bayle"}, "edited": false, "score": 4, "creation_date": 1424872524, "post_id": 28720779, "comment_id": 45728390, "body": "Have you hit a problem where the only solution left is to write native code ? If not, don&#39;t do it."}, {"owner": {"reputation": 2488, "user_id": 2987706, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/5Q9zt.jpg?s=128&g=1", "display_name": "Prashant", "link": "https://stackoverflow.com/users/2987706/prashant"}, "edited": false, "score": 0, "creation_date": 1424872546, "post_id": 28720779, "comment_id": 45728411, "body": "pros : performance and cons : reduce platform independence."}], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 5, "last_activity_date": 1424872667, "creation_date": 1424872667, "answer_id": 28720872, "question_id": 28720779, "link": "https://stackoverflow.com/questions/28720779/pros-and-cons-for-using-native-code-in-java/28720872#28720872", "title": "Pros and cons for using native code in Java?", "body": "<p>Judging from your question you are not at a stage where you have explored all the possibilities of a Java-only solution, have hit a brick wall, and are now looking for native code-based workarounds for your problem. Therefore the strong suggestion is to stay clear of solutions involving native code.</p>\n\n<p>Keep in mind that the JVM does <em>not</em> na\u00efvely interpret bytecode; it compiles it into optimized native code during runtime. You are very unlikely to experience performance issues with correctly written Java code.</p>\n"}], "owner": {"reputation": 600, "user_id": 2649681, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9f66a6131dd9087ee2f46e2cc9e87b81?s=128&d=identicon&r=PG", "display_name": "user2649681", "link": "https://stackoverflow.com/users/2649681/user2649681"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1424886646, "answer_count": 1, "score": -2, "last_activity_date": 1424872667, "creation_date": 1424872394, "question_id": 28720779, "link": "https://stackoverflow.com/questions/28720779/pros-and-cons-for-using-native-code-in-java", "closed_reason": "Opinion-based", "title": "Pros and cons for using native code in Java?", "body": "<p>I'm considering writing a Java application that might make use of native code(most likely written in c(++), not assembly), and I'd like to see pros and cons of doing so. I'm aware that native code is intended to be run on a specific machine/machine specs, as opposed to code being run by the JVM, which is of course a virtual machine. If I understand correctly, native code run on its native machine runs faster than bytecode, is this correct?</p>\n\n<p>Basically, if I'm writing a program, is it worth it to use native code for certain computations and a few other functions to try to reduce the time it takes and the strain on the processor? Is there a reliable way to make it work on virtually all systems if I do use native code(if I have only my system to write/test the code on)?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1424871618, "post_id": 28720482, "comment_id": 45727765, "body": "<code>char pointer[7]</code> is an <i>array</i>, not a pointer! Its first element is, but not the array"}, {"owner": {"reputation": 475, "user_id": 2391458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7597c607b98cbca3c8d548bb78f4262?s=128&d=identicon&r=PG&f=1", "display_name": "FCo", "link": "https://stackoverflow.com/users/2391458/fco"}, "edited": false, "score": 0, "creation_date": 1424871777, "post_id": 28720482, "comment_id": 45727884, "body": "can you post your output please?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 2, "creation_date": 1424871851, "post_id": 28720482, "comment_id": 45727937, "body": "&quot;produces small matrices in the terminal&quot; ? What is that supposed to be? Generally, it is not clear at all to me what you want to achieve. Why do you use <code>*(pointer+i)</code> instead of the easier to read <code>pointer[i]</code>? Perhaps <i>you</i> could tell us first what the problem is?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 2, "creation_date": 1424872009, "post_id": 28720482, "comment_id": 45728034, "body": "@JensGustedt The small matrices is probably his terminal&#39;s representation of <code>\\x02</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424872613, "post_id": 28720482, "comment_id": 45728446, "body": "&quot;*Its first element is, but not the array *&quot; No, its 1st element is a <code>char</code> as all other six elementare as well."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1424879348, "post_id": 28720482, "comment_id": 45733453, "body": "Why are you using <code>*(pointer + i)</code> over <code>pointer[i]</code>?  That just makes the code harder to read."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1424872089, "last_edit_date": 1424872089, "creation_date": 1424871771, "answer_id": 28720564, "question_id": 28720482, "link": "https://stackoverflow.com/questions/28720482/c-print-from-a-pointer/28720564#28720564", "title": "c print from a pointer", "body": "<p>There are several problems:</p>\n\n<ol>\n<li>You can't use <code>strlen()</code> when the input isn't properly <code>'\\0'</code>-terminated, and your array isn't. That call gives undefined behavior.</li>\n<li>Printing the character whose code point is <code>2</code> probably makes your terminal behave funnily, since it's not a printable character. You should use <code>%d</code> and cast to <code>(int)</code>.</li>\n</ol>\n\n<p>Also note that <code>*(pointer + i)</code> is <em>much clearer</em> if you write it as <code>pointer[i]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1424881343, "last_edit_date": 1424881343, "creation_date": 1424873576, "answer_id": 28721223, "question_id": 28720482, "link": "https://stackoverflow.com/questions/28720482/c-print-from-a-pointer/28721223#28721223", "title": "c print from a pointer", "body": "<p>It seems that you mean the following:)</p>\n\n<pre><code>int main(int argc, char const *argv[])\n{\n    char pointer[7] = { '\\0' };\n    for (int i = 0; i &lt; 3; i++)\n    {\n        *(pointer+i) = '2';\n    }\n\n    printf(\"%s%zu\\n\", \"the string length is \",strlen(pointer));\n    for (int j = 0; j &lt; 3; j++)\n    {\n        printf(\"%c\\n\", *(pointer+j));\n    }\n    return 0;\n}\n</code></pre>\n\n<p>After this statement</p>\n\n<pre><code>    char pointer[7] = { '\\0' };\n</code></pre>\n\n<p>all elements of array pointer are initialized by zero. So you may use standard function <code>strlen</code> applied to this array.</p>\n\n<p>Function <code>strlen</code> has return type <code>size_t</code> so it is better to use format string <code>%zu</code></p>\n\n<p>In this statement</p>\n\n<pre><code>        *(pointer+i) = '2';\n</code></pre>\n\n<p>character '2' is assigned to elements of the array so when you will print them you indeed will see character 2 on the console.</p>\n\n<pre><code>        printf(\"%c\\n\", *(pointer+j));\n</code></pre>\n\n<p>If you want to deal with pointers then for example this loop</p>\n\n<pre><code>    for (int j = 0; j &lt; 3; j++)\n    {\n        printf(\"%c\\n\", *(pointer+j));\n    }\n</code></pre>\n\n<p>you could rewrite like</p>\n\n<pre><code>    for ( char *p = pointer; *p; ++p )\n    {\n        printf(\"%c\\n\", *p);\n    }\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 2450076, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7709f866e953b3307b6b0130b73235ce?s=128&d=identicon&r=PG", "display_name": "verticese", "link": "https://stackoverflow.com/users/2450076/verticese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 28721223, "answer_count": 2, "score": -1, "last_activity_date": 1424881343, "creation_date": 1424871526, "question_id": 28720482, "link": "https://stackoverflow.com/questions/28720482/c-print-from-a-pointer", "title": "c print from a pointer", "body": "<p>I am trying to store ints in a pointer, using it like an array. But the following code produces small matrices in the terminal, which I do not know why. Here is my code </p>\n\n<pre><code>int main(int argc, char const *argv[])\n{\n    char pointer[7];\n    for (int i = 0; i &lt; 3; i++)\n    {\n        *(pointer+i) = 2;\n    }\n\n    printf(\"%s%d\\n\", \"the string length is \",strlen(pointer));\n    for (int j = 0; j &lt; 3; j++)\n    {\n        printf(\"%c\\n\", *(pointer+j));\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Can someone tell me what the problem is, and the solution please?\nThanks</p>\n"}, {"tags": ["c++", "c", "time", "dayofweek", "chrono"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1424871387, "post_id": 28720394, "comment_id": 45727589, "body": "You don&#39;t need them in most cases. Ignore them or set to 0"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1424871423, "post_id": 28720394, "comment_id": 45727619, "body": "@ForceBru No, no, I <i>want</i> them. I want to output them from my program."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1424871756, "post_id": 28720394, "comment_id": 45727872, "body": "<a href=\"http://en.cppreference.com/w/cpp/chrono/c/mktime\" rel=\"nofollow noreferrer\"><code>mktime</code></a> is actually specified to perform normalization on the <code>tm</code> passed in."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1424872644, "post_id": 28720394, "comment_id": 45728466, "body": "@T.C. That&#39;s so powerful! I had no idea. How does it normalize, that is, which fields does it assume to be correct?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1424873447, "post_id": 28720394, "comment_id": 45729044, "body": "@JonathanMee it ignores <code>tm_wday</code> and <code>tm_yday</code>; other values are used to pinpoint the actual point in time the <code>tm</code> is referring to, and then the struct members are set accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 3, "last_activity_date": 1424872073, "creation_date": 1424872073, "answer_id": 28720671, "question_id": 28720394, "link": "https://stackoverflow.com/questions/28720394/populate-struct-tm/28720671#28720671", "title": "Populate struct tm", "body": "<p>You want <code>mktime</code>:</p>\n\n<blockquote>\n  <p>The original values of the <code>tm_wday</code> and <code>tm_yday</code> components of the\n  structure are ignored, and the original values of the other components\n  are not restricted to the ranges indicated above.</p>\n</blockquote>\n\n<p>That is <code>mktime</code> can be used as some sort of normalization function that ensures that all fields are consistent, afterwards.</p>\n\n<hr>\n"}, {"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1424872123, "creation_date": 1424872123, "answer_id": 28720688, "question_id": 28720394, "link": "https://stackoverflow.com/questions/28720394/populate-struct-tm/28720688#28720688", "title": "Populate struct tm", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/chrono/c/mktime\" rel=\"noreferrer\"><code>mktime</code></a> sounds like your best bet. The <code>struct tm</code> you pass to it need not have values in the specified ranges; it normalizes the fields, including recalculating <code>tm_wday</code> and <code>tm_yday</code>. To have it attempt to determine if DST is in effect, set the <code>tm_isdst</code> member to negative before you call <code>mktime</code>.</p>\n\n<p>If you are converting from a string, you can use the <a href=\"http://en.cppreference.com/w/cpp/io/manip/get_time\" rel=\"noreferrer\"><code>get_time</code></a> manipulator to extract the information into a <code>tm</code>.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1047, "favorite_count": 0, "accepted_answer_id": 28720688, "answer_count": 2, "score": 1, "last_activity_date": 1424872123, "creation_date": 1424871319, "question_id": 28720394, "link": "https://stackoverflow.com/questions/28720394/populate-struct-tm", "title": "Populate struct tm", "body": "<p>Is there something in the standard C/C++ libraries which will populate a <code>struct tm</code>?</p>\n\n<p>To be more specific about my problem: I want to be able to provide a date and populate the <code>struct tm</code> from that (for example: 1-1-2000 00:00:01.) For most of the fields I can just directly insert the data, but I just don't know <code>tm_wday</code> and <code>tm_isdst</code>.</p>\n\n<p>I'm really looking for a way to populate those two <em>without</em> writing some complex day of the week state machine.</p>\n"}, {"tags": ["c", "stm32"], "comments": [{"owner": {"reputation": 4253, "user_id": 20043, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb7cc546c053de931ec9850f3a52b236?s=128&d=identicon&r=PG", "display_name": "SolarBear", "link": "https://stackoverflow.com/users/20043/solarbear"}, "edited": false, "score": 8, "creation_date": 1424871083, "post_id": 28720286, "comment_id": 45727360, "body": "Use <code>\\r\\n</code> instead. See <a href=\"http://programmers.stackexchange.com/questions/29075/difference-between-n-and-r-n\" title=\"difference between n and r n\">programmers.stackexchange.com/questions/29075/&hellip;</a>"}, {"owner": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 4, "creation_date": 1424871231, "post_id": 28720286, "comment_id": 45727472, "body": "Or change the PuTTY settings - click on under &quot;Terminal&quot;, then enable &quot;Implicit CR in every LF&quot;, and see if that resolves the issue."}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "reply_to_user": {"reputation": 4253, "user_id": 20043, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb7cc546c053de931ec9850f3a52b236?s=128&d=identicon&r=PG", "display_name": "SolarBear", "link": "https://stackoverflow.com/users/20043/solarbear"}, "edited": false, "score": 0, "creation_date": 1424871345, "post_id": 28720286, "comment_id": 45727557, "body": "@SolarBear thanks for your comment , thanks to psmears too. If you put that an answer I&#39;ll accept it"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1424871643, "post_id": 28720286, "comment_id": 45727782, "body": "C presumably has some constant you can use to add the platform-appropriate EOL character(s)."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1424871972, "post_id": 28720286, "comment_id": 45728008, "body": "@meagar -  in this case the execution platform and the displaying one are different, so the compiler can&#39;t be of much direct help since it doesn&#39;t know about the latter."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1424872067, "post_id": 28720286, "comment_id": 45728078, "body": "@ChrisStratton Ah, yes, I didn&#39;t clue in that this is a putty session."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1424879515, "post_id": 28720286, "comment_id": 45733582, "body": "In spite of everyone&#39;s suggestion to explicitly write <code>\\r\\n</code>, I suggest modifying your <code>printf</code> function to output it for you when you get just a <code>\\n</code> so you can write normal looking C.  Couple more quick tips:  If you name your function <code>printf</code> beware of the compiler trying to substitute <code>puts</code> for <code>printf</code>. Easiest way around this is to rename the printf.  Also, for what it&#39;s worth, here&#39;s a good <code>printf</code> for this exact purpose (only dependency is stdarg.h):  <a href=\"http://geezer.osdevbrasil.net/osd/libc/printf.c\" rel=\"nofollow noreferrer\">geezer.osdevbrasil.net/osd/libc/printf.c</a>"}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424871940, "post_id": 28720554, "comment_id": 45727985, "body": "Although <code>\\n\\r</code> would do the job, <code>\\r\\n</code> is much more common."}, {"owner": {"reputation": 6984, "user_id": 703531, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2de8b26df89622f511d45480761237c7?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/703531/bruce"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424873313, "post_id": 28720554, "comment_id": 45728955, "body": "True, common combination is CR+LF"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1424875775, "post_id": 28720554, "comment_id": 45730693, "body": "@Bruce thanks for your answer, but  \\solarBear comment helped me the first !"}], "tags": [], "owner": {"reputation": 6984, "user_id": 703531, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2de8b26df89622f511d45480761237c7?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/703531/bruce"}, "is_accepted": false, "score": 6, "last_activity_date": 1424871742, "creation_date": 1424871742, "answer_id": 28720554, "question_id": 28720286, "link": "https://stackoverflow.com/questions/28720286/what-is-the-effect-of-n/28720554#28720554", "title": "What is the effect of &#39; \\n&#39;?", "body": "<p><code>\\n</code>is next line (Line Feed - LF) and <code>\\r</code> is carriage return (CR) on old printers.</p>\n\n<p>Your terminal is configured to behave \"\u00e0 la\" windows, where next line is CR+LF. Hence sending only LF goes to next line, but not to the begin.</p>\n\n<p>Unix usually uses only LF.</p>\n\n<p>Either change the configuration of your terminal or change the code to use <code>\\n\\r</code></p>\n"}, {"tags": [], "owner": {"reputation": 4253, "user_id": 20043, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb7cc546c053de931ec9850f3a52b236?s=128&d=identicon&r=PG", "display_name": "SolarBear", "link": "https://stackoverflow.com/users/20043/solarbear"}, "is_accepted": true, "score": 2, "last_activity_date": 1424873768, "last_edit_date": 1491982283, "creation_date": 1424873768, "answer_id": 28721296, "question_id": 28720286, "link": "https://stackoverflow.com/questions/28720286/what-is-the-effect-of-n/28721296#28721296", "title": "What is the effect of &#39; \\n&#39;?", "body": "<p>It's all question of backwards compatibility. In Windows you need to use <code>\\r\\n</code> instead of simply <code>n</code>, which is the UNIX way of doing the same thing.</p>\n\n<p>See <a href=\"https://softwareengineering.stackexchange.com/questions/29075/difference-between-n-and-r-n\">this link</a> as well as @Bruce's post for more information.</p>\n"}], "owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 28721296, "answer_count": 2, "score": 2, "last_activity_date": 1424873768, "creation_date": 1424870993, "last_edit_date": 1424871868, "question_id": 28720286, "link": "https://stackoverflow.com/questions/28720286/what-is-the-effect-of-n", "title": "What is the effect of &#39; \\n&#39;?", "body": "<p>I have caused an effect which I really don't understand:</p>\n\n<pre><code>char buffer[6];\nUINT i =  adc_getADCValue(6);\n\nint j = 0;\nfor ( j = 0 ;j &lt;4;j++){\nbuffer[3-j] = (UINT) ((i%10UL)+'0');\n    i /=10;\n}\nbuffer[4] = '\\n';\nbuffer[5] = '\\0';\nlocalprint(buffer); // print  messages on terminal using COM port \n</code></pre>\n\n<p>it works <img src=\"https://i.stack.imgur.com/b4nvs.png\" alt=\"terminal\"></p>\n\n<p>my question is why is the output by using <code>\\n</code> oblique?  I was hopping simulating the<code>printf</code> function . I'm using STM32f103xx uC.</p>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424871344, "post_id": 28720263, "comment_id": 45727556, "body": "Here <code>append(argv[1],sym);</code> you assume  <code>argv[1]</code> provides any addtional, free space do store any more characters to append. This surely isn&#39;t the case. Same here <code>strcat(argv[1],temp);</code>."}, {"owner": {"reputation": 579, "user_id": 3021884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3f2a581a9269df60e02798d79d5855?s=128&d=identicon&r=PG&f=1", "display_name": "dbndhjefj", "link": "https://stackoverflow.com/users/3021884/dbndhjefj"}, "edited": false, "score": 0, "creation_date": 1424871651, "post_id": 28720263, "comment_id": 45727787, "body": "After you use <code>strdup</code>, you must free the allocated memory with <code>free</code>"}, {"owner": {"reputation": 111, "user_id": 4604142, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a817f157604b9c5889985e94dc9ed426?s=128&d=identicon&r=PG&f=1", "display_name": "riv94", "link": "https://stackoverflow.com/users/4604142/riv94"}, "edited": false, "score": 0, "creation_date": 1424871669, "post_id": 28720263, "comment_id": 45727810, "body": "I edited the code (see above) so that i didn&#39;t append anything to argv[1] and tested it, but it still did not successfully and argv[1] to the end of temp."}, {"owner": {"reputation": 111, "user_id": 4604142, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a817f157604b9c5889985e94dc9ed426?s=128&d=identicon&r=PG&f=1", "display_name": "riv94", "link": "https://stackoverflow.com/users/4604142/riv94"}, "reply_to_user": {"reputation": 579, "user_id": 3021884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3f2a581a9269df60e02798d79d5855?s=128&d=identicon&r=PG&f=1", "display_name": "dbndhjefj", "link": "https://stackoverflow.com/users/3021884/dbndhjefj"}, "edited": false, "score": 0, "creation_date": 1424872016, "post_id": 28720263, "comment_id": 45728039, "body": "@szpal, i added that to the end, but my main problem is still appending argv[1] to temp"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424872908, "post_id": 28720263, "comment_id": 45728650, "body": "Now with <code>temp = strtok(temp,&quot;:&quot;);</code> you have the same issues as previously you had with <code>argv[]</code>. C simply does not allocated space for you. The above <code>strcat()</code> writes out of <code>temp</code>&#39;s bounds."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424881906, "post_id": 28720263, "comment_id": 45735440, "body": "Your code misses to <code>fclose()</code> the files <code>fopen()</code>ed successfully."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 4604142, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a817f157604b9c5889985e94dc9ed426?s=128&d=identicon&r=PG&f=1", "display_name": "riv94", "link": "https://stackoverflow.com/users/4604142/riv94"}, "edited": false, "score": 0, "creation_date": 1424873915, "post_id": 28721123, "comment_id": 45729368, "body": "This worked for me, thank you. I didn&#39;t know about &quot;sprintf&quot;."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424874945, "post_id": 28721123, "comment_id": 45730079, "body": "This approach will fail if the path in question added to what is being passed as argv is longer then 99 chars."}, {"owner": {"reputation": 579, "user_id": 3021884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3f2a581a9269df60e02798d79d5855?s=128&d=identicon&r=PG&f=1", "display_name": "dbndhjefj", "link": "https://stackoverflow.com/users/3021884/dbndhjefj"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424880079, "post_id": 28721123, "comment_id": 45734073, "body": "@alk, Thanks :D, but read my last comment before downvote...  I hope you have a good day"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424881838, "post_id": 28721123, "comment_id": 45735381, "body": "I simply do not consider your code a &quot;<i>working version</i>&quot;. Also your &quot;<i>last comment</i>&quot; does not point out the possible pitfalls with your approach."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424881958, "post_id": 28721123, "comment_id": 45735479, "body": "Also <code>asprintf()</code> is non-standard."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424951223, "post_id": 28721123, "comment_id": 45766374, "body": "It is not wrong to use it, But it might be worth mentioning that it not necessarily needs to be available on the OP&#39;s platform, as it&#39;s non-standard C. And about C the question is."}], "tags": [], "owner": {"reputation": 579, "user_id": 3021884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d3f2a581a9269df60e02798d79d5855?s=128&d=identicon&r=PG&f=1", "display_name": "dbndhjefj", "link": "https://stackoverflow.com/users/3021884/dbndhjefj"}, "is_accepted": true, "score": -1, "last_activity_date": 1424873830, "last_edit_date": 1424873830, "creation_date": 1424873347, "answer_id": 28721123, "question_id": 28720263, "link": "https://stackoverflow.com/questions/28720263/c-append-argv1-to-end-of-unix-path/28721123#28721123", "title": "C - append argv[1] to end of unix PATH", "body": "<p>Here is a working version without 'append' function:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main( int argc, char* argv[] ) {\n    char* path = getenv(\"PATH\");\n    char* temp;\n    FILE *file;\n    char tmp_file[100];\n\n    temp = strtok(path,\":\");\n\n    while ( temp != NULL ) {\n        printf(\"temp: %s\\n\", temp);\n\n        sprintf( tmp_file, \"%s/%s\", temp, argv[1] );\n        printf(\"tmp_file: %s\\n\", tmp_file);\n\n        file = fopen(tmp_file,\"r\");\n        if ( file == NULL ) {\n          printf(\"ERROR: File \\\"%s\\\" does not exist.\\n\", tmp_file);\n        }\n        else{\n          printf(\"SUCCESS! File \\\"%s\\\" exists.\\n\", tmp_file);\n        }\n        temp = strtok(NULL,\":\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>(You could use <code>asprintf</code> also rather <code>sprintf</code>, but then dont forget free the allocated memory)</p>\n"}, {"tags": [], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "is_accepted": false, "score": 0, "last_activity_date": 1424874587, "creation_date": 1424874587, "answer_id": 28721609, "question_id": 28720263, "link": "https://stackoverflow.com/questions/28720263/c-append-argv1-to-end-of-unix-path/28721609#28721609", "title": "C - append argv[1] to end of unix PATH", "body": "<p>You should not modify temp because you interfere with the strtok.\nThe main problem of your code is managing storage for the file name char string. If you want to build a new string that is the concatenation of the path, '/', and argv[1], you need a storage for it. The simplest solution is to use an array for this. Make it long enough.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char* argv[])\n{\n    char* path = strdup(getenv(\"PATH\")); // &lt;-- copy the path string\n    char* temp;\n    FILE *file;\n    char fileName[1024]; // &lt;-- Storage for the file name\n\n    temp = strtok(path,\":\");\n    while(temp != NULL)\n    {\n        printf(\"temp: %s\\n\", temp);\n\n        sprintf(fileName, \"%s/%s\", temp, argv[1]);\n        printf(\"fileName: %s\\n\", tmp_file);\n\n        file = fopen(fileName,\"r\");\n        if ( file == NULL )\n            printf(\"ERROR: File \\\"%s\\\" does not exist.\\n\", fileName);\n        else\n            printf(\"SUCCESS! File \\\"%s\\\" exists.\\n\", fileName);\n\n        temp = strtok(NULL,\":\");\n    }\n    free(path); // &lt;-- delete the modified copy of path\n    return 0;\n}\n</code></pre>\n\n<p>We need to make a copy of the path string because strtok modifies it. It replace the ':' by a '\\0'. That is the reason for the strdup. </p>\n\n<p>fileName is defined as a big array of char that can contain the concatenation of temp / and argv[1]. To be perfectly correct we should check that strlen(temp)+1+strlen(argv[1]) is &lt; 1024 to make sure we don't have a buffer overflow. </p>\n\n<p>The sprintf is a formated print into a buffer that will do the string concatenation for us. The first argument is the buffer, the second the format, and the rest the arguments. The format is two strings separated by the / character. </p>\n"}], "owner": {"reputation": 111, "user_id": 4604142, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a817f157604b9c5889985e94dc9ed426?s=128&d=identicon&r=PG&f=1", "display_name": "riv94", "link": "https://stackoverflow.com/users/4604142/riv94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 28721123, "answer_count": 2, "score": 0, "last_activity_date": 1424881278, "creation_date": 1424870924, "last_edit_date": 1424881278, "question_id": 28720263, "link": "https://stackoverflow.com/questions/28720263/c-append-argv1-to-end-of-unix-path", "title": "C - append argv[1] to end of unix PATH", "body": "<p>I am trying to write a C program that parses the UNIX \"PATH\" variable, and checks if the command line argument file (argv[1]) exists at any address on that path. The only thing that seems to not work is when I try to append '/' to temp, and then append argv[1] to that. In the while loop, temp becomes the next sub-path of the PATH variable, and then it checks to see if the filename entered in the command line exists on that path. What would be the best way to append '/' to the end of temp, and then argv[1] to the end of that?</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n void append(char* s, char c)\n   {\n        int len = strlen(s);\n        s[len] = c;\n        s[len+1] = '\\0';\n  }\n\nint main(int argc, char* argv[]){\n    const char* path = getenv(\"PATH\");\n    char* temp;\n    FILE *file;\n    char sym = '/';\n\n    temp = strdup(path);\n    temp = strtok(temp,\":\");\n\n    while(temp != NULL){\n        printf(\"%s\\n\",temp);\n        //add \"/argv[1]\" to temp\n        append(sym,temp);\n        strcat(argv[1],temp);\n        printf(\"%s\",temp);\n        file = fopen(temp,\"r\");\n        if(file == NULL){\n         printf(\"ERROR: File \\\"%s\\\" does not exist.\",temp);\n        }\n        else{\n           printf(\"Success! File \\\"%s\\\" exists.\",temp);\n        } \n        temp = strtok(NULL,\":\");\n    }\n\n    printf(\"%s\",temp);\n\n\n\n\n     return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "merge", "char", "printf"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1424870696, "post_id": 28720055, "comment_id": 45727099, "body": "Why not step through the code in the debugger to see what the problem is ?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424871001, "post_id": 28720055, "comment_id": 45727310, "body": "Why do you call <code>sprintf()</code> 10 times on the same float?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424871064, "post_id": 28720055, "comment_id": 45727345, "body": "Also use a C compiler when doing C."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424872192, "post_id": 28720055, "comment_id": 45728162, "body": "&quot;change float array into a char array to be sent as a line of data via TCP/IP socket&quot; This doesn&#39;t make any sense. Why do you need a character array? To print the float number as ASCII letters or do you need the character array simply because you want to send the data byte by byte? Those two cases are completely different."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4371473, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000347839295/picture?type=large", "display_name": "Dovydas Girdvainis", "link": "https://stackoverflow.com/users/4371473/dovydas-girdvainis"}, "edited": false, "score": 0, "creation_date": 1424872950, "post_id": 28720700, "comment_id": 45728688, "body": "I think this will work perfectly, oh and about those 10 positions, I just needed the accuracy of float to be 10 positions, I am taking measurements in float values, so there is a bit of precisions that needs to be dealt with, I think even 10 is over doing it a bit."}], "tags": [], "owner": {"reputation": 1457, "user_id": 2326817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x4kjE.jpg?s=128&g=1", "display_name": "Karel Kubat", "link": "https://stackoverflow.com/users/2326817/karel-kubat"}, "is_accepted": false, "score": 0, "last_activity_date": 1424872156, "creation_date": 1424872156, "answer_id": 28720700, "question_id": 28720055, "link": "https://stackoverflow.com/questions/28720055/concentrating-n-ammounts-of-char-arrays-into-a-single-char-array-in-c/28720700#28720700", "title": "Concentrating n ammounts of char arrays into a single char array in C", "body": "<p>As far as I can tell by your code, you're reserving 10 characters in the line for each float value (you do <code>i++</code>, but also <code>i += 9</code>). What if the string representation for the float requires more positions? Your <code>tmp</code> will overflow and your counting will be off. </p>\n\n<p>Here's an attempt that doesn't use 10 positions, but just as many as necessary. On the receiving side you'd have to split by spaces and <code>sscanf()</code> to get the floats back. The code also checks for buffer overflows. I hope that I've understood your question correctly and that this helps...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    float data[5];              /* Mock data */\n    char text[256];             /* Line of data */\n    int i;\n\n    /* Build up mock data */\n    for (i = 0; i &lt; 5; i++)\n        data[i] = i * 3 + 3.1415729;\n\n    /* Stuff int text */\n    text[0] = 0;\n    for (i = 0; i &lt; 5; i++) {\n        char tmp[100];          /* Conversion buffer, should be large enough */\n        if (snprintf(tmp, sizeof(tmp), \"%f \", data[i]) &gt;= sizeof(tmp)) {\n            fprintf(stderr, \"conversion buffer overflow\\n\");\n            exit(1);\n        }\n        if (strlen(text) + strlen(tmp) &gt;= sizeof(text)) {\n            fprintf(stderr, \"text buffer overflow\\n\");\n            exit(1);\n        }\n        strcat(text, tmp);\n    }\n\n    printf(\"Built up text: %s\\n\", text);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4371473, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000347839295/picture?type=large", "display_name": "Dovydas Girdvainis", "link": "https://stackoverflow.com/users/4371473/dovydas-girdvainis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424872156, "creation_date": 1424870367, "question_id": 28720055, "link": "https://stackoverflow.com/questions/28720055/concentrating-n-ammounts-of-char-arrays-into-a-single-char-array-in-c", "title": "Concentrating n ammounts of char arrays into a single char array in C", "body": "<p>I am trying to merge a lot of char arrays into a single one. <strong>My task is to change float array into a char array to be sent as a line of data via TCP/IP socket</strong>, so I thought to use <strong><em>sprintf</em></strong> to print float array values into a char array and then merge those arrays into a single char array, I wrote a little algorithm, but the data does not form into a single line of data and overwrites the last input, what am I doing wrong? Here is the code: </p>\n\n<pre><code>#include  &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\n/*\n * Mock data loop - a loop where data is created\n * String loop - a loop where a single word is merged into a sentance\n * Formating loop - a loop where floats are converted into char arrays\n !!! - The place where things go wrong (I think)\n*/\n\nusing namespace std;\n\nint main(){\n\n    float data[5];                      // Mock data array\n    char tmp[10];                       // Temprorary array, where a word (flaot value) is stored\n    char text[256];                     // String array, where words are stored into a single sentance\n    int n=5;                            // Size of mock data\n    int i, j, k;                        // Loop counters\n\n    // Mock data loop\n    for (i = 0; i &lt; n; i++){\n        data[i] = float(i);\n        printf(\"Data: %f \\n\", data[i]);\n    }\n\n    printf(\"------------------------- \\n\");\n/////////////////////////////////////////////////////////////////////// !!!\n    for (i = 0; i &lt; 256; i++){                  // String loop\n        for(j = 0; j &lt; n; j++){                 // Mock data loop\n            for (k = 0; k &lt; 10; k++){           // Formating loop\n                sprintf(tmp, \"%f\", data[j]);\n                printf(\"Sprintf: %s \\n\", tmp);\n                text[i + k] = tmp[k];\n            }\n        }\n        printf(\"Text %d : %s \\n\", i, text);\n        i = i + 9;\n        }\n/////////////////////////////////////////////////////////////////////// !!!\n    printf(\"------------------------- \\n\");\n    printf(\"Text: %s \\n\", text);\n\n    std::cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>Appreciate the help, guys!</p>\n\n<p>P.S. I am trying <strong>not</strong> to use any C++ functions, because I am working with a microcontroller, this code has been written in MS Visual 2013, so I use <em>#include </em> and <em>std::cin.get();</em> to halt the console and see the results.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14722, "user_id": 823738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a13a6ed05bdce33d6bf0f01496b9a044?s=128&d=identicon&r=PG", "display_name": "Zaffy", "link": "https://stackoverflow.com/users/823738/zaffy"}, "edited": false, "score": 0, "creation_date": 1424870923, "post_id": 28720000, "comment_id": 45727250, "body": "You&#39;re checking if <code>fp</code> is NULL, but not if <code>fp1</code> is NULL"}, {"owner": {"reputation": 2359, "user_id": 757808, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3d68e27bc7504fe519d4d8c93f5204c7?s=128&d=identicon&r=PG", "display_name": "Ulterior", "link": "https://stackoverflow.com/users/757808/ulterior"}, "edited": false, "score": 0, "creation_date": 1424880246, "post_id": 28720000, "comment_id": 45734215, "body": "I think there is a thousand answer for this kind of problems already, didnt you find anything ?"}, {"owner": {"reputation": 2359, "user_id": 757808, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3d68e27bc7504fe519d4d8c93f5204c7?s=128&d=identicon&r=PG", "display_name": "Ulterior", "link": "https://stackoverflow.com/users/757808/ulterior"}, "edited": false, "score": 0, "creation_date": 1424880306, "post_id": 28720000, "comment_id": 45734260, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3878327/easiest-way-to-read-this-line-of-text-into-a-struct\">Easiest way to read this line of text into a struct?</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424884343, "post_id": 28720000, "comment_id": 45737052, "body": "Use <code>fscanf(fp,&quot;%s %d %f %s&quot;, s.prod, &amp;s.quant, &amp;s.price, s.day)</code>.  BTW: nice that you are checking <code>fscanf()</code> results."}], "answers": [{"tags": [], "owner": {"reputation": 302, "user_id": 2392270, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7hVt3.jpg?s=128&g=1", "display_name": "franpen", "link": "https://stackoverflow.com/users/2392270/franpen"}, "is_accepted": false, "score": 0, "last_activity_date": 1424870735, "creation_date": 1424870735, "answer_id": 28720195, "question_id": 28720000, "link": "https://stackoverflow.com/questions/28720000/file-readingfscanf-in-c/28720195#28720195", "title": "file reading(fscanf) in C", "body": "<p>You haven't declared what's <code>s</code> in <code>fscanf</code>, that's why the pointer won't work and your app crashes. Try using <code>&amp;s.prod, &amp;s.prod, &amp;s.quant, &amp;s.price, &amp;s.day</code></p>\n"}, {"tags": [], "owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "is_accepted": false, "score": 0, "last_activity_date": 1424879498, "last_edit_date": 1424879498, "creation_date": 1424879058, "answer_id": 28723272, "question_id": 28720000, "link": "https://stackoverflow.com/questions/28720000/file-readingfscanf-in-c/28723272#28723272", "title": "file reading(fscanf) in C", "body": "<p>Since you are opening two files, you have to check both for error,</p>\n\n<pre><code>if( fp == NULL || fp1 == NULL )\n</code></pre>\n\n<p>you should use appropriate variable names in your code.\n<strong>Example:</strong> instead of <code>fp</code> you can use <code>inputFile</code>, this will give appropriate meaning and make the code more understandable to the reader.</p>\n\n<p><code>fscanf</code> scans input according to format conversion specifications from a file. The results from such conversions are stored in the locations pointed to by the pointer arguments that follow format. so you have to pass the address of the variable to store the matching conversions,</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>fscanf( fp, \"%19s %d %f %10s\", s.prod, &amp;s.quant, &amp;s.price, s.day)\n</code></pre>\n\n<p>(Assuming <code>s.prod</code> is an array of size 20 and <code>s.day</code> is also an array of size 11).</p>\n\n<p>Specifying the size for the string in <code>fscanf</code> format will avoid overrunning the array.</p>\n\n<p>Also, You don't need to specify <code>&amp;</code> for array, because the array is already passed as an address, whereas the integer and float variable is not (and thus explicitly needs its address passed via the &amp; address-of operator <code>&amp;</code>).</p>\n\n<p>Your compiler will throw warnings, if their is a argument mismatch for <code>fscanf</code> function. you should fix those warning before running the program to avoid runtime crashes.</p>\n"}], "owner": {"reputation": 39, "user_id": 4572111, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f311359041310aec363c482cb308c0ed?s=128&d=identicon&r=PG&f=1", "display_name": "Eyam Saye", "link": "https://stackoverflow.com/users/4572111/eyam-saye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424879498, "creation_date": 1424870185, "last_edit_date": 1424870509, "question_id": 28720000, "link": "https://stackoverflow.com/questions/28720000/file-readingfscanf-in-c", "title": "file reading(fscanf) in C", "body": "<p>I am using dev C++. I am making this simple function calles <code>void quan()</code>. It involves file handling, reading and appending. The problem is after I input something, it crashes. I dont know why and I think it is because of the <code>fscanf</code>?</p>\n\n<pre><code>void quan()\n{\n    FILE *fp,*fp1;\n    int q;\n    char name[20];\n\n    fp=fopen(\"inv.txt\",\"r\");\n    fp1=fopen(\"temp.txt\",\"a\");\n\n    if(fp==NULL)\n    {\n        printf(\"quan error\");\n    }\n    else\n    {\n\n        printf(\"enter product name: \");\n        gets(name);\n\n        while(fscanf(fp,\"%s %d %f %s\",s.prod,s.quant,s.price,s.day)==4 )\n        {\n            if(strcmp(s.prod,name)!=0)\n            {\n                fprintf(fp1,\"%s %d %.2f %s\\n\",s.prod,s.quant,s.price,s.day);\n\n            }\n            else\n            {\n                printf(\"enter quantity: \");\n                scanf(\"%d\",&amp;q);\n                s.quant=s.quant+q;\n                fprintf(fp1,\"%s %d %.2f %s\\n\",s.prod,s.quant,s.price,s.day);\n                printf(\"\\nsuccess\");\n            }\n        }\n    }\n\n    fclose(fp);\n    fclose(fp1);\n\n    remove(\"inv.txt\");\n    rename(\"temp.txt\",\"inv.txt\");\n}\n</code></pre>\n\n<p>this is inside my inv.txt file</p>\n\n<pre><code>apple 100 20.00 01/01/2015\norange 100 10.00 01/01/2015\nbanana 50 15.00 01/01/2015\ngrapes 15 10.00 01/01/2015\nfan 100 5.00 01/01/2015\n</code></pre>\n"}, {"tags": ["c", "networking", "youtube", "video-streaming", "sniffing"], "comments": [{"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1424869461, "post_id": 28719665, "comment_id": 45726277, "body": "Show what you&#39;ve already tried."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1424879831, "post_id": 28719665, "comment_id": 45733855, "body": "The data might be mime-encoded to base64 and/or compressed and possibly even encrypted if youtube is doing https for video streams.  Also varies depending on whether or not your using the html5 interface (if the old one even still exists???).   Browsers sort all this out for you, which is way much video stream &quot;rippers&quot; are browser plugins, not packet sniffers."}], "owner": {"reputation": 1, "user_id": 4605728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fd25f2ac269cde3729fe139b7cfe3e?s=128&d=identicon&r=PG&f=1", "display_name": "Ares Polik", "link": "https://stackoverflow.com/users/4605728/ares-polik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424869172, "creation_date": 1424869172, "question_id": 28719665, "link": "https://stackoverflow.com/questions/28719665/reassmebly-the-raw-data-from-ip-packets-into-video", "title": "reassmebly the raw data from IP packets into video", "body": "<p>I have a simple sniffer which takes a packets from youtube while I am watching a video and I need to reassembly raw data from that packets into a video How is it can be done using C or C++\nI have cut off IP and TCP headers already</p>\n"}, {"tags": ["c", "operating-system", "pipe", "fork", "child-process"], "comments": [{"owner": {"reputation": 939, "user_id": 1556829, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NKY9p.png?s=128&g=1", "display_name": "Igor S.K.", "link": "https://stackoverflow.com/users/1556829/igor-s-k"}, "edited": false, "score": 0, "creation_date": 1424869749, "post_id": 28719343, "comment_id": 45726469, "body": "Are you sure this is a correct way to declare an array: <code>int fd[num_children][2];</code> ?"}, {"owner": {"reputation": 43, "user_id": 3921070, "user_type": "registered", "profile_image": "https://graph.facebook.com/674817430/picture?type=large", "display_name": "Umut Bar\u0131\u015f \u0130\u015fler", "link": "https://stackoverflow.com/users/3921070/umut-bar%c4%b1%c5%9f-%c4%b0%c5%9fler"}, "reply_to_user": {"reputation": 939, "user_id": 1556829, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NKY9p.png?s=128&g=1", "display_name": "Igor S.K.", "link": "https://stackoverflow.com/users/1556829/igor-s-k"}, "edited": false, "score": 0, "creation_date": 1424870715, "post_id": 28719343, "comment_id": 45727110, "body": "yes I assume: type arrayName [ x ][ y ];"}, {"owner": {"reputation": 939, "user_id": 1556829, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NKY9p.png?s=128&g=1", "display_name": "Igor S.K.", "link": "https://stackoverflow.com/users/1556829/igor-s-k"}, "edited": false, "score": 0, "creation_date": 1424871995, "post_id": 28719343, "comment_id": 45728022, "body": "Never happened to use variable length arrays. Reading standard on them now."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4593361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6219535ecc579b165e2344faedfb2f12?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/4593361/dan"}, "is_accepted": false, "score": 0, "last_activity_date": 1424870211, "creation_date": 1424870211, "answer_id": 28720009, "question_id": 28719343, "link": "https://stackoverflow.com/questions/28719343/multiple-pipes-and-processes/28720009#28720009", "title": "Multiple pipes and processes", "body": "<p>I suspect that the reading from the pipe via:</p>\n\n<p>while ( read(fd[i][0], &amp;received, sizeof(int)) > 0)</p>\n\n<p>is being blocked/haulted until data is available on the pipe. If so, this would explain the lack of response from your code after this point.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 3921070, "user_type": "registered", "profile_image": "https://graph.facebook.com/674817430/picture?type=large", "display_name": "Umut Bar\u0131\u015f \u0130\u015fler", "link": "https://stackoverflow.com/users/3921070/umut-bar%c4%b1%c5%9f-%c4%b0%c5%9fler"}, "edited": false, "score": 0, "creation_date": 1424878794, "post_id": 28720503, "comment_id": 45733005, "body": "You are right, other pipe-ends should be closed. Thank you so much :)"}], "tags": [], "owner": {"reputation": 3177, "user_id": 1221236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/230d4a82674b9e02c0b95e4ecf7468ae?s=128&d=identicon&r=PG", "display_name": "dragosht", "link": "https://stackoverflow.com/users/1221236/dragosht"}, "is_accepted": true, "score": 3, "last_activity_date": 1424872010, "last_edit_date": 1424872010, "creation_date": 1424871593, "answer_id": 28720503, "question_id": 28719343, "link": "https://stackoverflow.com/questions/28719343/multiple-pipes-and-processes/28720503#28720503", "title": "Multiple pipes and processes", "body": "<p>You're probably thinking that some specific <code>pipe[2]</code> is shared by the parent and it's respective child process. That's true ... However it is also shared by all the other children processes you create along the way - and because it's opened, those other children processes also inherit it as opened.</p>\n\n<p>Doing this at the beginning of your child pid check worked for me:</p>\n\n<pre><code>if (pid == 0) {\n    int j;\n    for (j = 0; j &lt; num_children; j++) {\n        if (j != i) {\n            close(fd[j][0]);\n            close(fd[j][1]);\n        }\n    }\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3921070, "user_type": "registered", "profile_image": "https://graph.facebook.com/674817430/picture?type=large", "display_name": "Umut Bar\u0131\u015f \u0130\u015fler", "link": "https://stackoverflow.com/users/3921070/umut-bar%c4%b1%c5%9f-%c4%b0%c5%9fler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1873, "favorite_count": 1, "accepted_answer_id": 28720503, "answer_count": 2, "score": 4, "last_activity_date": 1424872010, "creation_date": 1424868181, "last_edit_date": 1424869561, "question_id": 28719343, "link": "https://stackoverflow.com/questions/28719343/multiple-pipes-and-processes", "title": "Multiple pipes and processes", "body": "<p>I am trying to communicate with children processes and make them sort a part of a list. My problem is children processes read everything but do nothing after it.</p>\n\n<pre><code>int main(int argc, char *argv[]){\n    int i;\n    int num_children;\n    pid_t pid;\n\n    num_children= 3;\n\n    int fd[num_children][2];      //PIPES\n\n    for (i=0; i&lt;num_children; i++)\n    {\n        if (pipe(fd[i]) == -1)\n        {\n            printf(\"couldnt create the pipe\\n\");\n            exit(EXIT_FAILURE);\n        }\n    }\n\n\n    for (i=0; i&lt;num_children; i++)\n    {\n        pid = fork();\n        if (pid == -1)\n        {\n            printf(\"couldnt create child process %i\\n\",i);\n            exit(EXIT_FAILURE);\n        }\n\n        if (pid == 0)\n        {                         //this is child process\n            close(fd[i][1]);         //closing fd[1] the write end of the pipe\n            int received;\n            node *list = NULL;\n            while ( read(fd[i][0], &amp;received, sizeof(int)) &gt; 0)\n            {\n                list = insert(list, received);\n                printf(\"Process %i got the number: %i\\n\",i,received);  //this part is working perfect\n            }\n\n            printf(\"Im process %i here is my list: \\n\",i);   //i couldnt get any output from here\n            printList(list);\n\n            close(fd[i][0]);\n            exit(EXIT_SUCCESS);\n         }       \n    }\n\n\n    for (i=0; i&lt;num_children; i++)  //closing the read end of pipe for parent\n    {\n        close(fd[i][0]);\n    }\n\n    int number;\n    int mod;\n    FILE *fileIn = fopen (\"&lt;file directory&gt;\",\"r\");\n    while(fscanf(fileIn, \"%i\", &amp;number)&gt;=0)\n    {\n        mod = number % num_children;\n        write(fd[mod][1], &amp;number, sizeof(int));\n    }  \n\n    for (int i=0; i&lt;num_children; i++)\n    {\n        if(close(fd[i][1])==0)\n        {\n            printf(\"cant close the pipe\");  \n            //tried to catch errors, but pipes are closing with no problem i think\n        }\n    }\n\n    return 0;\n</code></pre>\n\n<p>I tried to see if children process wait in the while(read) loop, but when i close the write end of pipes from the parent process they should leave the loop.</p>\n"}, {"tags": ["c", "file-handling"], "comments": [{"owner": {"reputation": 1774, "user_id": 426065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cDexq.jpg?s=128&g=1", "display_name": "Elixir Techne", "link": "https://stackoverflow.com/users/426065/elixir-techne"}, "edited": false, "score": 0, "creation_date": 1424868041, "post_id": 28719248, "comment_id": 45725387, "body": "Try flushing and closing file."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1424868342, "post_id": 28719248, "comment_id": 45725586, "body": "If this is C, then you should not cast the result of <code>malloc</code>. If this is C++, you should use <code>std::string</code> and (generally) C++ I/O. In other words, C != C++ and you should generally tag only the language you are writing / compiling."}, {"owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424868500, "post_id": 28719248, "comment_id": 45725674, "body": "what is the meaning of flushing and closing ?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1424868944, "post_id": 28719248, "comment_id": 45725942, "body": "What is the meaning of <code>fprintf(fp,&quot;\\n&quot;);</code> on a read-only file?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1424870052, "post_id": 28719248, "comment_id": 45726669, "body": "&quot;error in creating dump file&quot; is a (mostly) useless error message.  Try: <code>fp=open(path,mode);  if(fp==NULL) {perror(path); exit(1);}</code>  (and use EXIT_FAILURE instead of &#39;1&#39;)"}, {"owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1424870266, "post_id": 28719248, "comment_id": 45726811, "body": "@WilliamPursell,error is not opening dump file ..file is opening properly bt data is zero only after fscanf ...it has to show that data as like the dump.txt data what I have mentioned in my query"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1424870680, "post_id": 28719248, "comment_id": 45727084, "body": "@studinstru, I am aware that the question you are asking is not related to the file open.  You are not aware that you are handling the error incorrectly.  error messages belong on stderr and ought to inform the user of the cause of the problem."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424868426, "post_id": 28719299, "comment_id": 45725632, "body": "No luck ..I already tried with &amp; , but still i am not able to see no update in data variable in watch window .it is having zero value only ."}, {"owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424868840, "post_id": 28719299, "comment_id": 45725865, "body": "have you checked in eclipse ...I think there should be some thing I have to so in eclipse to run ..I think in VS it will work bt nt in eclipse"}, {"owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424868901, "post_id": 28719299, "comment_id": 45725916, "body": "my mistake i can remove fprintf ..sorry for that ,,bt still having same issue"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424869821, "post_id": 28719299, "comment_id": 45726518, "body": "@studinstru try with my answer, you have mor issues."}, {"owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424870118, "post_id": 28719299, "comment_id": 45726709, "body": "@iharob,with your code , while (fscanf(fp, &quot;%d&quot;, &amp;data[index]) == 1) condition is failing for me .is it eclipse issue ??"}], "tags": [], "owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "is_accepted": false, "score": 0, "last_activity_date": 1424869146, "last_edit_date": 1424869146, "creation_date": 1424868027, "answer_id": 28719299, "question_id": 28719248, "link": "https://stackoverflow.com/questions/28719248/fscanf-fails-to-read-data-from-txt-file/28719299#28719299", "title": "fscanf fails to read data from txt file", "body": "<p>Replace </p>\n\n<pre><code>fscanf(fp,\"%d/t\",data[m*800 + n]);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>fscanf(fp,\"%d/t\",&amp;data[m*800 + n]);\n</code></pre>\n\n<p><code>fscanf()</code> needs address of destination variable as argument and not the variable itself. </p>\n\n<p>Also I am not getting why are doing this:</p>\n\n<p><code>fprintf(fp,\"\\n\");</code></p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424868964, "post_id": 28719437, "comment_id": 45725962, "body": "@studinstru Your program has more problems."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424869389, "post_id": 28719437, "comment_id": 45726236, "body": "@studinstru check the answer, I didn&#39;t find more problems in the code, if you fix this, it must work."}, {"owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424869915, "post_id": 28719437, "comment_id": 45726584, "body": "for me     while (fscanf(fp, &quot;%d&quot;, &amp;data[index]) == 1) condition is failing"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424870388, "post_id": 28719437, "comment_id": 45726890, "body": "@studinstru no, it might be the data file issue, but now you see why you <b>must</b> check the return value of functions, it&#39;s certainly not eclipse, although in my opinion eclipse is too heavy for such a simple program, what operating system are you using?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424877510, "post_id": 28719437, "comment_id": 45731983, "body": "@studinstru What desktop? if it&#39;s not <code>KDE</code> install <a href=\"http://www.geany.org/\" rel=\"nofollow noreferrer\">geany</a>."}, {"owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424878199, "post_id": 28719437, "comment_id": 45732513, "body": ",now I am able to read the data .I got the solution .I had opened the eclipse through docker and trying to access the dump.txt which is outside the docker .So during first attempt I have opend that file by using append mode .SO one dummy file with zero byte created and that same is giving zero results in data .When I changed that file to docker,I am able to get the result .Thanks all for your reply ."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1424878307, "post_id": 28719437, "comment_id": 45732611, "body": "@studinstru wierd filename if you are on a linux system, directory separator is <code>&#47;</code> not <code>\\</code>. And your <code>fopen()</code> should have returned <code>NULL</code> giving you the correct error message. Check why did that happen."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1424878450, "last_edit_date": 1495540259, "creation_date": 1424868484, "answer_id": 28719437, "question_id": 28719248, "link": "https://stackoverflow.com/questions/28719248/fscanf-fails-to-read-data-from-txt-file/28719437#28719437", "title": "fscanf fails to read data from txt file", "body": "<p>Your code has a couble of problems</p>\n\n<ol>\n<li><p>Your <code>fscanf()</code> format is wrong and you are passing the value instead of it's address, you should use</p>\n\n<pre><code>fscanf(fp, \"%d\", &amp;data[n + 800 * m]);\n</code></pre>\n\n<p>if you meant <code>\"\\t\"</code> whcih is the <code>tab</code> character, it's not needed anyway and passing the value instead of it's address is Undefined Behavior, because <code>fscanf()</code> will treat the value as a pointer, and it's not likely pointing to a valid memory address, moreover, it's unintialized which is another reason for undefined behavior.</p></li>\n<li><p>You declared <code>data</code> as <code>char *data</code> and store <code>int</code>'s in it, that is also Undefined Behavior.</p></li>\n<li><p>You must check the return value of <code>fscanf()</code> beacuse if it fails, then the value will be uninitialized and there will be once again, Undefined Behavior and also you are going to read past the end of the file because you will never know if you reached it.</p></li>\n<li><p>You are writing into the file and you open it for reading, this</p>\n\n<pre><code>fprintf(fp, \"\\n\");\n</code></pre>\n\n<p>is wrong, you don't need it to read from the file.</p></li>\n<li><p><a href=\"https://stackoverflow.com/a/605858/1983495\">Don't cast the result of <code>malloc()</code></a> though this is not causing problems in this case, it will improve the quality of your code.</p></li>\n<li><p>Don't use <code>sizeof(char)</code> it makes your code harder to read and it's completely unnecessary since the standard mandates that <code>sizeof(char) == 1</code>.</p></li>\n<li><p>You don't need the nested loop to read the data, because the shape of the data is irrelevant since <code>fscanf()</code> ignores all whitespace characters.</p>\n\n<p>It is sufficient to read throug the file and use a counter to move through the array, at the end you can check how many values where read to verify the integrity of the data.</p></li>\n</ol>\n\n<p>This is a fixed version of your code</p>\n\n<pre><code>#include &lt;stdio.h&gt;      /* printf, scanf, NULL */\n#include &lt;stdlib.h&gt;     /* malloc, free, rand */\n\nint main()\n{\n    FILE  *fp;\n    size_t index;\n    int   *data;\n\n    data = malloc(1280 * 800);\n    if (data == NULL)\n    {\n        printf(\"NOt able to allocate memory properly\\n\");\n        return 1;\n    }\n\n    fp = fopen(\"\\\\home\\\\studinstru\\\\Desktop\\\\filedump.txt\", \"r\");\n    if (fp == NULL)\n    {\n        printf(\"Error in creating dump file\\n\");\n        free(data);\n\n        return 2;\n    }\n\n    while (fscanf(fp, \"%d\", &amp;data[index]) == 1)\n    {\n        fprintf(stdout, \"%d \", data[index]);\n        index += 1;\n        if (index % 800 == 0)\n            printf(\"\\n\");\n    }\n\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p><strong>Note</strong>: I recommend the use of compiler warnings, they would help prevent silly mistakes and some other mistakes like <code>char *data</code> and reading <code>int</code>'s into it.</p>\n\n<p>Also, from your file path <code>\"\\\\home\\\\studinstru\\\\Desktop\\\\filedump.txt\"</code> it seems you are on a non-windows system, and very likely the directory separator is <code>/</code> instead of <code>\\</code>, so the correct path has to be</p>\n\n<pre><code>\"/home/studinstru/Desktop/filedump.txt\"\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1475, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424878450, "creation_date": 1424867907, "last_edit_date": 1424869335, "question_id": 28719248, "link": "https://stackoverflow.com/questions/28719248/fscanf-fails-to-read-data-from-txt-file", "title": "fscanf fails to read data from txt file", "body": "<p>I am trying to run my code on eclipse with ubuntu.</p>\n\n<p>I have dumped the data using fprintf into one txt file and reading that file by using fscanf. I am not able to read that values into data array.</p>\n\n<p>Below is my code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;      /* printf, scanf, NULL */\n#include &lt;stdlib.h&gt;     /* malloc, free, rand */\n\nint main(){\n    char* data;\n    FILE *fp;\n    size_t result;\n    data = (char*) malloc (sizeof(char)*(1280*800));//Size of one frame\n    if (data==NULL){\n        printf(\"NOt able to allocate memory properly\\n\");\n        exit (1);\n    }\n    fp = fopen (\"\\\\home\\\\studinstru\\\\Desktop\\\\filedump.txt\", \"r\");\n    if(fp==NULL){\n        printf(\"Error in creating dump file\\n\");\n        exit (1);\n    }\n    for(int m = 0;m&lt;1280;m++){\n         for(int n = 0;n&lt;800;n++){\n         fscanf(fp,\"%d/t\",data[m*800 + n]);\n     }\n   }\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>This is my filedump.txt data :</p>\n\n<pre><code>79  78  78  77  78  79  81  95\n82  81  81  81  82  82  82  82\n79  78  78  77  78  79  81  95\n82  81  81  81  82  82  82  82\n79  78  78  77  78  79  81  95\n82  81  81  81  82  82  82  82 ....\n</code></pre>\n\n<p>Can you tell what is wrong in this?</p>\n"}, {"tags": ["c", "memory"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4593361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6219535ecc579b165e2344faedfb2f12?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/4593361/dan"}, "is_accepted": false, "score": 0, "last_activity_date": 1424872094, "creation_date": 1424872094, "answer_id": 28720680, "question_id": 28719045, "link": "https://stackoverflow.com/questions/28719045/external-structure-to-store-gsl-matrices/28720680#28720680", "title": "external structure to store gsl matrices", "body": "<p>Apologies for asking this question in an answer block but my reputation does not allow me to ask questions as a 'comment' :)</p>\n\n<p>I am curious about your need to NOT want to store the matrices in memory but I suspect that you requirement of 'off-memory' storage maybe a terminology issue. Can you please elaborate on your question? What volume of data are we talking about? MB's? GB's? TB's?</p>\n\n<p>Processing data from memory is SIGNIFICANTLY faster and than processing data from disk.</p>\n\n<p>Although I am unfamiliar with gsl_matrix_complex, you may wish to consider using a C structure (or levels of structures) that store your matrices on disk. When you need to process these matrices, read them from disk, directly into the structure(s), and process their data from the structures - IE, memory. This, assumes of course, that the volume of workable data you are talking about is reasonable to store in memory and applicable the the machine you are processing this on. If the volume of data you are processing is significant (and I'm talking GB's, TB's etc), you will need to consider an efficient structure and disk-file recording system whereby you can load 'chunks' into memory and process those chunks.</p>\n\n<p>Good luck with your endeavors!</p>\n"}], "owner": {"reputation": 219, "user_id": 4230064, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/0E4ZZ.jpg?s=128&g=1", "display_name": "WoofDoggy", "link": "https://stackoverflow.com/users/4230064/woofdoggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424872094, "creation_date": 1424867266, "question_id": 28719045, "link": "https://stackoverflow.com/questions/28719045/external-structure-to-store-gsl-matrices", "title": "external structure to store gsl matrices", "body": "<p>I am wondering if there is some kind of a database or memory structure where I can keep my data during program evaluation and access them easily. \nHere is the problem: I am writing program in C which operates on complex matrices. Those matrices are created once and then other functions use them to calculate different quantities. My idea was to keep them somewhere where I can easily access them without storing in RAM memory. This \"memory structure\" should know that these are gsl_matrix_complex structures. Does anything like this exist ?</p>\n"}, {"tags": ["c", "pointers", "deque"], "comments": [{"owner": {"reputation": 2748, "user_id": 2879338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1Inh.jpg?s=128&g=1", "display_name": "Milind Dumbare", "link": "https://stackoverflow.com/users/2879338/milind-dumbare"}, "edited": false, "score": 0, "creation_date": 1424867016, "post_id": 28718903, "comment_id": 45724727, "body": "why cant you just move the malloc to initDeque() function?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1424867053, "post_id": 28718903, "comment_id": 45724753, "body": "The pointer is <i>copied</i>, but the copy in <code>initDequeu</code>  points to the same memory as <code>d</code> in the <code>main</code> function. So it should work well as written currently. Do you mean that you want to have the declaration of the pointer in the <code>initDeque</code> function? Then just have the function <i>return</i> the pointer. Also, <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t cast the result of <code>malloc</code></a>."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1424869454, "post_id": 28718903, "comment_id": 45726274, "body": "and don&#39;t use sizeof(type) inside malloc, but sizeof object.  <code>d = malloc(sizeof *d);</code>"}, {"owner": {"reputation": 237, "user_id": 2315320, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f7398c089cc151e770f2070c2654e234?s=128&d=identicon&r=PG", "display_name": "Rimantas Rad\u017ei\u016bnas", "link": "https://stackoverflow.com/users/2315320/rimantas-rad%c5%bei%c5%abnas"}, "edited": false, "score": 0, "creation_date": 1424875033, "post_id": 28718903, "comment_id": 45730143, "body": "Thank you guys :) Really helped alot."}], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 2315320, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f7398c089cc151e770f2070c2654e234?s=128&d=identicon&r=PG", "display_name": "Rimantas Rad\u017ei\u016bnas", "link": "https://stackoverflow.com/users/2315320/rimantas-rad%c5%bei%c5%abnas"}, "edited": false, "score": 0, "creation_date": 1424874816, "post_id": 28719431, "comment_id": 45729976, "body": "Yeah, I&#39;ve done similar to what you described above.  <code>deque* initDeque(){ &#47;&#47;Create new deque     deque* d = (deque*)malloc(sizeof(deque));     d-&gt;front=NULL;     d-&gt;rear=NULL;     return d; } </code> and in <code>main</code> i&#39;ve done this: <code>deque *d = initDeque();</code> . Is there any easier way, than creating global variable?"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1424875463, "post_id": 28719431, "comment_id": 45730484, "body": "If you want to access in whole program, why a global is disturbing you ?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1424875515, "post_id": 28719431, "comment_id": 45730519, "body": "@Aur&#233;lienLAJOIE Because it&#39;s risky. Any code anywhere can do something &quot;bad&quot; with the global, there is no encapsulation."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1424888294, "post_id": 28719431, "comment_id": 45739720, "body": "@unwind _G is only visible into the file, not anywhere"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 1, "last_activity_date": 1424868448, "last_edit_date": 1495534183, "creation_date": 1424868448, "answer_id": 28719431, "question_id": 28718903, "link": "https://stackoverflow.com/questions/28718903/moving-pointer-from-main-to-first-executable-function/28719431#28719431", "title": "Moving pointer from main() to first executable function", "body": "<p>If by \"move the pointer\" you mean that you want to move the variable declaration, then you can do that but it will become a local variable only accesible inside that function. Clearly not what you want.</p>\n\n<p>You need to make it global, that will make it accessible from all scopes. Note that global variables are considered ugly and increase the risk of errors and generally make the code less clear.</p>\n\n<p>With a global pointer it would look like this:</p>\n\n<pre><code>deque *d;\n\nvoid initDeque(void)\n{\n  d = malloc(sizeof *d);\n  d-&gt;front = d-&gt;rear = NULL;\n}\n</code></pre>\n\n<p>Note that you <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">shouldn't cast the return value of <code>malloc()</code> in C</a>.</p>\n\n<p>Also note that <em>nobody</em> would have a global variable named using a single lower-case letter. It's <em>way</em> to easy to confuse it with a local variable, so you should <em>at least</em> make the name more obvious, e.g. something like</p>\n\n<pre><code>deque *theDeque;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1424869254, "post_id": 28719558, "comment_id": 45726141, "body": "The code in <code>deque_new()</code> is using an undefined <code>d</code>."}], "tags": [], "owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "is_accepted": false, "score": 1, "last_activity_date": 1424869494, "last_edit_date": 1424869494, "creation_date": 1424868793, "answer_id": 28719558, "question_id": 28718903, "link": "https://stackoverflow.com/questions/28718903/moving-pointer-from-main-to-first-executable-function/28719558#28719558", "title": "Moving pointer from main() to first executable function", "body": "<p>Create a static structure to store all you want share.\nCreate a function to allocate your deque. I don't know the size of deque perhaps you can take it on the stack instead of the heap.</p>\n\n<pre><code>static struct {\n   deque d*;\n} _G;\n\nvoid main(){\n    int x;\n    _G.d = deque_new();\n}\n\ndeque *deque_new(void){\n    deque *d;\n\n    d = malloc(sizeof(deque));\n    d-&gt;front=NULL;\n    d-&gt;rear=NULL;\n    return d;\n}\n</code></pre>\n\n<p>or with the stack</p>\n\n<pre><code>static struct {\n   deque d;\n} _G;\n\nvoid main(){\n    int x;\n    deque_init(&amp;_G.d);\n}\n\ndeque *deque_init(deque *d){\n    memset(d, 0, sizeof(*deque)); \n    return d;\n}\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 2315320, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f7398c089cc151e770f2070c2654e234?s=128&d=identicon&r=PG", "display_name": "Rimantas Rad\u017ei\u016bnas", "link": "https://stackoverflow.com/users/2315320/rimantas-rad%c5%bei%c5%abnas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 28719431, "answer_count": 2, "score": 0, "last_activity_date": 1424869494, "creation_date": 1424866813, "question_id": 28718903, "link": "https://stackoverflow.com/questions/28718903/moving-pointer-from-main-to-first-executable-function", "title": "Moving pointer from main() to first executable function", "body": "<p>is there any way to move pointer, which is initialized in <code>main()</code> function, to first executable function and have it accessible in whole program? </p>\n\n<p>Here's the code: </p>\n\n<p>main function, where is pointer <code>d</code> initialized:</p>\n\n<pre><code>void main(){\n    int x;\n    deque *d;\n    d=(deque*)malloc(sizeof(deque));\n    initDeque(d);\n</code></pre>\n\n<p>and I want to move the pointer into function called <code>initDeque()</code></p>\n\n<pre><code>void initDeque(deque *d){ //Create new deque\n    d-&gt;front=NULL;\n    d-&gt;rear=NULL;\n}\n</code></pre>\n\n<p>Is it possible to move it?</p>\n"}, {"tags": ["c++", "c", "arm", "valgrind"], "comments": [{"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 0, "creation_date": 1424866672, "post_id": 28718814, "comment_id": 45724495, "body": "Meanwhile, If you have a suspicious code segment which may cause memory leak you can post a another question,you may get additional help."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1424866804, "post_id": 28718814, "comment_id": 45724584, "body": "Is it running Linux? So it&#39;s a &quot;large&quot; embedded system, with a full (GNU?) libc and so on?"}, {"owner": {"reputation": 1181, "user_id": 724991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70ac8509fddacc02cd4c27327286557?s=128&d=identicon&r=PG", "display_name": "Uxio", "link": "https://stackoverflow.com/users/724991/uxio"}, "edited": false, "score": 0, "creation_date": 1424867137, "post_id": 28718814, "comment_id": 45724826, "body": "Hi. Yes, it&#39;s running a full linux. The problem is that I have some closed third party libs I suspect but need to use."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1424876908, "post_id": 28718814, "comment_id": 45731568, "body": "There are various &#39;libc&#39; substitutes (<a href=\"http://dmalloc.com/\" rel=\"nofollow noreferrer\">dmalloc</a>, etc) which will replace &#39;malloc&#39;, &#39;free&#39;, &#39;strcpy&#39;, etc.  In some cases the instrumentation will work with binaries.  In others, it must be compiled with a macro."}], "answers": [{"comments": [{"owner": {"reputation": 1181, "user_id": 724991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70ac8509fddacc02cd4c27327286557?s=128&d=identicon&r=PG", "display_name": "Uxio", "link": "https://stackoverflow.com/users/724991/uxio"}, "edited": false, "score": 0, "creation_date": 1424940178, "post_id": 28722349, "comment_id": 45759571, "body": "Thanks, didn&#39;t know about AddressSanitizer or MALLOC_CHECK, just updated GCC and trying it"}], "tags": [], "owner": {"reputation": 2505, "user_id": 93414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72a0a056bdcaa327ea2965a9d648b72?s=128&d=identicon&r=PG", "display_name": "Christophe Vu-Brugier", "link": "https://stackoverflow.com/users/93414/christophe-vu-brugier"}, "is_accepted": true, "score": 3, "last_activity_date": 1424876560, "creation_date": 1424876560, "answer_id": 28722349, "question_id": 28718814, "link": "https://stackoverflow.com/questions/28718814/valgrind-on-armv5/28722349#28722349", "title": "Valgrind on ARMv5", "body": "<p>Valgrind is a very powerful tool and it's pretty sad that it does not work on ARMv5 because it makes debugging memory leaks and invalid memory accesses more difficult on this platform.</p>\n\n<p>I see several less powerful options. You can try to enable some additional checks within the C library by setting the <a href=\"http://www.gnu.org/software/libc/manual/html_node/Heap-Consistency-Checking.html\" rel=\"nofollow\">MALLOC_CHECK_</a> environment variable. If your compiler is GCC 4.8 or higher you can try <a href=\"https://code.google.com/p/address-sanitizer/wiki/AddressSanitizer\" rel=\"nofollow\">AddressSanitizer</a> (I never used it on ARMv5 though).</p>\n"}], "owner": {"reputation": 1181, "user_id": 724991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70ac8509fddacc02cd4c27327286557?s=128&d=identicon&r=PG", "display_name": "Uxio", "link": "https://stackoverflow.com/users/724991/uxio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 0, "accepted_answer_id": 28722349, "answer_count": 1, "score": 3, "last_activity_date": 1424876560, "creation_date": 1424866502, "question_id": 28718814, "link": "https://stackoverflow.com/questions/28718814/valgrind-on-armv5", "title": "Valgrind on ARMv5", "body": "<p>I'm trying to debug a program on a embedded device. The problem is that it uses ARMv5 and valgrind doesn't support that platform (there are some patches over there but I was not able to make it work).</p>\n\n<p>I tried some tools like gdb or memwatch, but it isn't enough to find the leaks.</p>\n\n<p>Anyone could suggest a solution? I thought of maybe some kind of remote debugging or so.</p>\n\n<p>Thanks for your answers</p>\n"}, {"tags": ["c", "arrays", "pointers", "floating-point"], "answers": [{"comments": [{"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1424867420, "post_id": 28718864, "comment_id": 45724984, "body": "@AdrianLeonhard, in this case, because it is cast to a float* it will have no effect, you can see an explanation here <a href=\"http://stackoverflow.com/questions/2528318/how-come-an-arrays-address-is-equal-to-its-value-in-c\" title=\"how come an arrays address is equal to its value in c\">stackoverflow.com/questions/2528318/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "is_accepted": true, "score": 0, "last_activity_date": 1424869911, "last_edit_date": 1424869911, "creation_date": 1424866666, "answer_id": 28718864, "question_id": 28718694, "link": "https://stackoverflow.com/questions/28718694/extract-float-numbers-from-integer-array/28718864#28718864", "title": "Extract float numbers from integer array", "body": "<p>When you write <code>(float*)(anystuff)</code>you got a float pointer.</p>\n\n<p>So yes <code>(float*)&amp;(l_buffer)</code> is a cast to a <strong>float pointer</strong> to the first location of the array.</p>\n\n<p>But there is no explicit conversion from a float pointer to a float so this will not work:</p>\n\n<pre><code>float  num1 = (float*)&amp;(l_buffer);  // error (float*) is not (float)\n</code></pre>\n\n<p>But you can want to read the pointed value like <code>float f = *(pFloatPointer)</code> , and that why thus this will work:</p>\n\n<pre><code>float  num1 = *(float*)&amp;(l_buffer); // ok *(float*) is a (float)\n</code></pre>\n\n<p>Also cast to a <code>float*</code> give you facilities for indexing:</p>\n\n<pre><code>float f1 = *(float*)&amp;(l_buffer[4]);    // 4th element of a uint8_t array\nfloat f2 = ((float*)l_buffer)[1];      // 1th element of a float array\n                                       // So f1 == f2\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4261874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lKqTy.jpg?s=128&g=1", "display_name": "Davide", "link": "https://stackoverflow.com/users/4261874/davide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 28718864, "answer_count": 1, "score": 1, "last_activity_date": 1424870867, "creation_date": 1424866151, "last_edit_date": 1424870867, "question_id": 28718694, "link": "https://stackoverflow.com/questions/28718694/extract-float-numbers-from-integer-array", "title": "Extract float numbers from integer array", "body": "<p>I have an integer array, of which, I know the first 4 bytes are a float the secon 4 bytes are another float and so on; to extract float numbers I use a float pointer like this:</p>\n\n<pre><code>uint8_t  l_buffer[17];\nfloat32  num1 = *(float*)&amp;(l_buffer);\nfloat32  num2 = *(float*)&amp;(l_buffer[4]);\n</code></pre>\n\n<p>and all works perfectly, but I don't understand why!!!! In fact I tried to use the pointers without the '*':</p>\n\n<pre><code>float32  num1 = (float*)&amp;(l_buffer);\nfloat32  num2 = (float*)&amp;(l_buffer[4]);\n</code></pre>\n\n<p>but it doesn't work. Sorry, but (float*)&amp;(l_buffer) is not a cast to a floating pointer to the first location of l_buffer array ? Why I need to add the '*' ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424865404, "post_id": 28718332, "comment_id": 45723710, "body": "<code>adjtime()</code> is BSD, Also Including <code>&lt;sys&#47;time.h&gt;</code> is not a good idea."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424865620, "post_id": 28718332, "comment_id": 45723847, "body": "From what do you conclude this: &quot;<i>since adjtime is suppose to be there</i>&quot;?"}, {"owner": {"reputation": 475, "user_id": 2391458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7597c607b98cbca3c8d548bb78f4262?s=128&d=identicon&r=PG&f=1", "display_name": "FCo", "link": "https://stackoverflow.com/users/2391458/fco"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424871336, "post_id": 28718332, "comment_id": 45727551, "body": "@alk why is &lt;sys/time.h&gt; not a good idea?"}, {"owner": {"reputation": 21, "user_id": 4605321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3eb9eed94d3a8c1d9269d666f857ca1?s=128&d=identicon&r=PG&f=1", "display_name": "fabbe77", "link": "https://stackoverflow.com/users/4605321/fabbe77"}, "edited": false, "score": 0, "creation_date": 1424871343, "post_id": 28718332, "comment_id": 45727555, "body": "the same for sys/socket I suppose? which socket should I use? socket.h?"}, {"owner": {"reputation": 1457, "user_id": 2326817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x4kjE.jpg?s=128&g=1", "display_name": "Karel Kubat", "link": "https://stackoverflow.com/users/2326817/karel-kubat"}, "edited": false, "score": 0, "creation_date": 1424873002, "post_id": 28718332, "comment_id": 45728729, "body": "You&#39;re asking whether a symbol is defined in a library. You can find that out using <code>nm</code>. Symbols that are defined in the library are marked with a capital T (symbols that are only referenced are marked with U etc.). So you can just  <code>nm &#47;usr&#47;lib&#47;libc.a | grep T | grep adjtime</code> (or whatever lib you&#39;re inspecting) and see what comes up. Once you find the right lib, you can add it to your linkage command."}], "answers": [{"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1507432443, "creation_date": 1507432443, "answer_id": 46627185, "question_id": 28718332, "link": "https://stackoverflow.com/questions/28718332/cygwin-undefined-reference-to-adjtime/46627185#46627185", "title": "Cygwin undefined reference to adjtime", "body": "<p>From my understanding, <code>adjtime</code> is a Linux-ism which likely crawled its way into the BSD world via FreeBSD. It's certainly not documented by any of the C or POSIX standards.</p>\n\n<p>Even those which are documented by the C and POSIX standards often aren't implemented correctly in the Microsoft world, so it wouldn't surprise me that this function doesn't exist.</p>\n\n<p>I'm very interested to hear more about this project of yours. Though a simplistic wrapper of some implementation-defined stuff can be written for the purposes of portability, I can only imagine highly niche usecases, for which there are better alternatives:</p>\n\n<ul>\n<li>If you need something with a large amount of good, secure entropy to seed your pseudo-random number generator, you should use something provided by a cryptographic library.</li>\n<li>If you want to conduct performance tests, you should learn how to use the profiler rather than rolling your own profiling code. Also, every \"performance test\" should be conducted as though through the eyes of a scientist observing the very first time; it's generally best not to let tests from previous projects guide optimisation for future projects. Instead, let the profile of the current project guide optimisation for the current project (on the current hardware), and you'll be cheering before you know it!</li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 4605321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3eb9eed94d3a8c1d9269d666f857ca1?s=128&d=identicon&r=PG&f=1", "display_name": "fabbe77", "link": "https://stackoverflow.com/users/4605321/fabbe77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1507432443, "creation_date": 1424865123, "question_id": 28718332, "link": "https://stackoverflow.com/questions/28718332/cygwin-undefined-reference-to-adjtime", "title": "Cygwin undefined reference to adjtime", "body": "<p>this is my first time posting a question here so be kind :).</p>\n\n<p>I have a problem porting a linux application to windows (windows 7 64-bit) using cygwin. I had to rewrite some code that is not supported under windows and that doesn\u00b4t exist in cygwin (like adjtimex) and I have manage to compile the code but when I am building the application .exe file (by using makefiles) I get a link error:</p>\n\n<pre><code>gcc  -Wl,-Map,ppsi.map2 -o ppsi ppsi.o -lrt -lc\nppsi.o: In function `win_time_adjust':\nppsi/time-win/win-time.c:74: undefined reference to `adjtime'\nppsi/time-win/win-time.c:74:(.text+0x1905): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `adjtime'\n</code></pre>\n\n<p>adjtime function is defined in  which is included in the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;time.h&gt;\n#include &lt;sys/time.h&gt; /* timex.h not available on windows so we use sys/time.h*/\n#include &lt;ppsi/ppsi.h&gt;\n</code></pre>\n\n<p>Here is how a part of the code looks like:</p>\n\n<pre><code>static int win_time_adjust(struct pp_instance *ppi, long offset_ns, long freq_ppb){\nstruct timeval t;\nint ret;\nt.tv_sec = 0;\nt.tv_usec = 0;\n\nif (offset_ns) {\n    t.tv_sec = offset_ns / 1000000; \n    t.tv_usec = offset_ns / 1000;  /*microseconds */\n}\n\nret = adjtime(&amp;t, NULL);\npp_diag(ppi, time, 1, \"%s: %li %li\\n\", __func__, offset_ns, freq_ppb);\nreturn ret;\n}\n</code></pre>\n\n<p>I have encountered a similar problem before and I solved by linking the missing library when compiling the application. I tired the same here and linked libc (since adjtime is suppose to be there) -lc when compiling but got the same error. I unsure how adjtime is undefined and I wonder if there is some cygwin library I should link instead?   </p>\n\n<p>I use cygwin (gcc version 4.9.2) when compiling</p>\n"}, {"tags": ["c", "arrays", "c99", "dynamic-arrays", "flexible-array-member"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1452907617, "post_id": 28718198, "comment_id": 57387459, "body": "The standard says: <i>A structure or union shall not contain a member with incomplete or function type (hence, a structure shall not contain an instance of itself, but may contain a pointer to an instance of itself), except that the last member of a structure with more than one named member may have incomplete array type; such a structure (and any union containing, possibly recursively, a member that is such a structure) shall not be a member of a structure or an element of an array.</i> You&#39;re trying to make an array of structures with FAM \u2014 that does not work. You can have an array of pointers."}], "answers": [{"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 2, "creation_date": 1424866187, "post_id": 28718316, "comment_id": 45724198, "body": "@Hynek-Pichi-Vychodil, no arithmetic on <code>void*</code> is not portable, you should use a <code>char</code> type for that."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 1, "last_activity_date": 1424866179, "last_edit_date": 1495542685, "creation_date": 1424865074, "answer_id": 28718316, "question_id": 28718198, "link": "https://stackoverflow.com/questions/28718198/how-to-access-array-of-flexible-arrays-in-cache-friendly-manner/28718316#28718316", "title": "How to access array of flexible arrays in cache friendly manner?", "body": "<p>Since only you know the actual layout, the C compiler can't help you. Thus, you must do the address-calculation yourself. It will require some casts to do the pointer-arithmetic at byte level:</p>\n\n<pre><code>record * get_record(record *base, size_t numbers, size_t index)\n{\n  return (record *) ((unsigned char *) base +\n                    index * (sizeof *base + numbers * sizeof *base-&gt;number));\n}\n</code></pre>\n\n<p>Given the above (and your code); you can access the array like so:</p>\n\n<pre><code>record *first = get_record(base, numbers, 0);\nfirst-&gt;foo = 4711;\nrecord *second = get_record(base, numbers, 1);\nsecond-&gt;foo = 17;\n</code></pre>\n\n<p>One obvious drawback is that you're going to have to keep the <code>numbers</code> value around. This can be improved by modelling the entire array with an explicit \"base\" structure, that holds the size of each element and the base pointer. Of course it can be co-allocated with the elements themselves to keep it all together and reduce the distances of the involved pointers.</p>\n\n<p>Also, <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">please don't cast the return value of <code>malloc()</code> in C</a>.</p>\n"}], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 28718316, "answer_count": 1, "score": 3, "last_activity_date": 1424866179, "creation_date": 1424864706, "last_edit_date": 1424865365, "question_id": 28718198, "link": "https://stackoverflow.com/questions/28718198/how-to-access-array-of-flexible-arrays-in-cache-friendly-manner", "title": "How to access array of flexible arrays in cache friendly manner?", "body": "<p>I have <code>records</code> with flexible array member</p>\n\n<pre><code>typedef struct record {\n    unsigned foo;\n    signed bar;\n    double number[];\n} record;\n</code></pre>\n\n<p>I have multiple <code>records</code> with the same amount of <code>numbers</code> so I can arrange them in array. I would like to allocate them into one continuous memory space.</p>\n\n<pre><code>const unsigned numbers = ...;\nconst unsigned records = ...;\nconst size_t record_size = sizeof(record) + numbers*sizeof(double);\nrecord *prec = malloc(records*record_size);\n</code></pre>\n\n<p>So now I know <code>record_size</code> and I can access it but what is best practice how to do it correctly and safely by given <code>record</code> index?</p>\n\n<p>I can do it when I would separate header containing <code>foo</code> and <code>bar</code> and <code>numbers</code>, but I would like to keep <code>record</code> together for cache coherency.</p>\n"}, {"tags": ["c", "null", "null-pointer"], "comments": [{"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "edited": false, "score": 1, "creation_date": 1424863486, "post_id": 28717771, "comment_id": 45722575, "body": "I can&#39;t help thinking this /must/ be a duplicate, but can&#39;t find any record of such a question despite extensive clicking around."}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 4, "creation_date": 1424863574, "post_id": 28717771, "comment_id": 45722629, "body": "Related: <a href=\"http://stackoverflow.com/q/1296843/96780\">What is the difference between NULL, &#39;\\0&#39; and 0</a> (Tagged C++, C)"}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 4, "creation_date": 1424863612, "post_id": 28717771, "comment_id": 45722648, "body": "Related: <a href=\"http://stackoverflow.com/q/9894013/96780\">Is NULL always zero in C?</a> (Tagged C)"}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 1, "creation_date": 1424863643, "post_id": 28717771, "comment_id": 45722673, "body": "Related: <a href=\"http://stackoverflow.com/q/26477209/96780\">Is ((void*)0) a null pointer constant?</a> (Tagged C)"}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 0, "creation_date": 1424863716, "post_id": 28717771, "comment_id": 45722719, "body": "Related: <a href=\"http://stackoverflow.com/q/7016861/96780\">Why are NULL pointers defined differently in C and C++?</a> (Taggged C++, C)"}, {"owner": {"reputation": 547, "user_id": 3608859, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/141c2980f205ce9f018407974ae31bbf?s=128&d=identicon&r=PG&f=1", "display_name": "alabamajack", "link": "https://stackoverflow.com/users/3608859/alabamajack"}, "edited": false, "score": 0, "creation_date": 1424863744, "post_id": 28717771, "comment_id": 45731250, "body": "see this post: <a href=\"http://stackoverflow.com/questions/1296843/what-is-the-difference-between-null-0-and-0\" title=\"what is the difference between null 0 and 0\">stackoverflow.com/questions/1296843/&hellip;</a> the rules are the same in C++ and C(approximately), because C is a subset of C++(approximately)"}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1424863767, "post_id": 28717771, "comment_id": 45722746, "body": "&quot;There is already a similar question on this site about C++&quot; -&gt; I suggest you link it"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1424864148, "post_id": 28717771, "comment_id": 45722957, "body": "I&#39;m lazy; I use <code>0</code>: <code>srand(time(0));</code>"}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "edited": false, "score": 0, "creation_date": 1424864350, "post_id": 28717771, "comment_id": 45723076, "body": "I have no idea how to do that Antonio (is this markdown or what?), but I will try to find out."}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1424864544, "post_id": 28717771, "comment_id": 45723191, "body": "Agreed @alk . Thanks for finding the duplicate. I did try really quite hard to find the duplicate, but my search-fu must be poor today! Should I delete this Q?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424864616, "post_id": 28717771, "comment_id": 45723247, "body": "Deleting a question with answers isn&#39;t nice with respect to those answers, so just leave it as is. And btw: it was <i>Daniel Daranas</i> who found the question here: <a href=\"http://stackoverflow.com/questions/28717771/null-or-0-in-c-hard-restrictions?noredirect=1#comment45722648_28717771\" title=\"null or 0 in c hard restrictions\">stackoverflow.com/questions/28717771/&hellip;</a>"}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "edited": false, "score": 0, "creation_date": 1424864981, "post_id": 28717771, "comment_id": 45723453, "body": "Indeed, to 20 answers in total, but you used your editorial and comprehension skills to find which of the links he posted contained the answer to my quesiton. That led me to examine that quesiton more closely and discover that the third answer was what I was after."}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "edited": false, "score": 0, "creation_date": 1424865840, "post_id": 28717771, "comment_id": 45723989, "body": "Having tried to apply this, actually I don&#39;t think it does answer my question! I&#39;ll clarify the question, though."}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "edited": false, "score": 0, "creation_date": 1424866640, "post_id": 28717771, "comment_id": 45724477, "body": "Ok, I updated the question, Daniel Datanas, @alp. Sorry, that was completely my fault: due to a dodgy sentence, in effect I asked a question other than the one I wanted an answer to. I&#39;ve read so much about this today!"}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 0, "creation_date": 1424869484, "post_id": 28717771, "comment_id": 45726294, "body": "I just posted links to four related questions because they were all well formulated and could be useful to the readers of this one. I wasn&#39;t specifically aiming to find a duplicate of this one, which looked a too vague to me. Now the question is marked as duplicate, so further editing it isn&#39;t likely to help you."}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "edited": false, "score": 0, "creation_date": 1424870709, "post_id": 28717771, "comment_id": 45727104, "body": "Hi Daniel, I didn&#39;t mean it as a criticism! Thanks for posting the links."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1424871285, "post_id": 28717771, "comment_id": 45727507, "body": "Especially after the edit, I think this isn&#39;t a duplicate question. I also edited the title and voted to reopen."}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "edited": false, "score": 1, "creation_date": 1424871517, "post_id": 28717771, "comment_id": 45727702, "body": "See also this on meta. From the discussion there, I&#39;m starting to think that my edit was too substantial to make to a question. What a mess, :-( . Sorry.  <a href=\"http://meta.stackoverflow.com/questions/286877/my-answer-is-that-i-was-asking-the-wrong-question-question-editing-duplicat/286879#286879\" title=\"my answer is that i was asking the wrong question question editing duplicat\">meta.stackoverflow.com/questions/286877/&hellip;</a>"}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 0, "creation_date": 1424873087, "post_id": 28717771, "comment_id": 45728791, "body": "@DanSheppard That is correct. You shouldn&#39;t just change one existing question to another just because you &quot;really&quot; wanted to ask something else. It doesn&#39;t matter if it was you who asked the original question. If you first asked A and then you realised you wanted to ask B, you should create a new question asking B."}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "edited": false, "score": 0, "creation_date": 1424874399, "post_id": 28717771, "comment_id": 45729673, "body": "At the time I considered it a clarification (that I was interested in all cases of the use of 0, not just in conditionals and direct assignment). I now think that wasn&#39;t so much a clarification as a different question. It&#39;s not so much changing &quot;A&quot; to &quot;B&quot; as &quot;A&quot; to &quot;a&quot; or maybe &quot;&#228;&quot;.  To be honest, I wish I never wrote it at all. But what should I do now? Change it back again? Can someone with mod privileges maybe reverse my edit?"}, {"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1424879980, "post_id": 28717771, "comment_id": 45733987, "body": "@DanSheppard I think you should be able to roll back your edit yourself ... in the edit history, does the previous revision have a &quot;rollback&quot; command next to it?"}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "reply_to_user": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1424880528, "post_id": 28717771, "comment_id": 45734409, "body": "How do I see the edit history @Ajean ? If I click on edit I get a dropdown with revisions in, but I&#39;m not sure that&#39;s what you mean, and there&#39;s no rollback mentioned."}, {"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1424880761, "post_id": 28717771, "comment_id": 45734577, "body": "Yes, that&#39;s what I mean.  In each revision heading there should be clickable text such as &quot;source&quot; &quot;link&quot;. Is &quot;rollback&quot; there? (It&#39;s not for me but I wouldn&#39;t be able to do it).  If it&#39;s not, it must be because the question&#39;s already closed."}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "reply_to_user": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1424881556, "post_id": 28717771, "comment_id": 45735179, "body": "No, I can&#39;t see anything like that @Ajean . I guess you&#39;re right, it&#39;s because it&#39;s closed. Oh well, we&#39;ll see wjat happens! I hope someone who&#39;s privileged comes to sort it out."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1424863989, "post_id": 28717810, "comment_id": 45722878, "body": "<code>0.</code> for a floating point value will do. There is no need for any nimber of trailing zeros."}, {"owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "edited": false, "score": 0, "creation_date": 1424864189, "post_id": 28717810, "comment_id": 45722980, "body": "Thank you for your answer, but I think in my question I mentioned that I was aware of the issues of intent and that this question does not concern those issues."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 8, "last_activity_date": 1425100988, "last_edit_date": 1425100988, "creation_date": 1424863575, "answer_id": 28717810, "question_id": 28717771, "link": "https://stackoverflow.com/questions/28717771/are-null-and-0-completely-equivalent-in-c/28717810#28717810", "title": "Are NULL and 0 completely equivalent in C?", "body": "<p>Make the intentions of your code clear. </p>\n\n<p><code>NULL</code> for a pointer. </p>\n\n<p><code>0</code>, <code>0u</code>, <code>0l</code>, etc. for an integer. </p>\n\n<p><code>0.0</code> or <code>0.</code> or <code>.0</code> for a double. </p>\n\n<p><code>0.0f</code> or <code>0.f</code> or <code>.0f</code> for a float.</p>\n\n<p><code>'\\0'</code> for a nul character. </p>\n\n<p>In Objective-C, <code>nil</code> for a nil object. </p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1618073007, "creation_date": 1618073007, "answer_id": 67036861, "question_id": 28717771, "link": "https://stackoverflow.com/questions/28717771/are-null-and-0-completely-equivalent-in-c/67036861#67036861", "title": "Are NULL and 0 completely equivalent in C?", "body": "<p>Using the constant 0 (or any constant expression evaluating to 0) anyplace where <code>NULL</code> would be used is safe, as 0 is a <strong>null pointer constant</strong>.</p>\n<p>This is defined in section 6.3.2.3p3 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">C99</a> (and <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C11</a>) standards state:</p>\n<blockquote>\n<p>An  integer  constant  expression  with  the  value  0,  or  such  an\nexpression  cast  to  type <code>void *</code>, is called a <em>null pointer\nconstant</em>.<sup>55)</sup>  If a null pointer constant is converted to a pointer type,\nthe resulting pointer,called a <em>null pointer</em> ,is guaranteed to\ncompare unequal to a pointer to any object or function.</p>\n</blockquote>\n<p>So <code>0</code>, when converted to a pointer type, is guaranteed to be converted to a null pointer regardless of how that particular system implements a null pointer.</p>\n<p>Footnote 55 (66 in C11) from the above quote states:</p>\n<blockquote>\n<p>The macro <code>NULL</code> is defined in <code>&lt;stddef.h&gt;</code> (and other headers) as a null pointer constant.</p>\n</blockquote>\n<p>Using my CentOS7 system as an example, it defines <code>NULL</code> as:</p>\n<pre><code>#define NULL ((void *)0)\n</code></pre>\n<p>While using 0 in place of <code>NULL</code> is safe, it is not <em>completely</em> equivalent, for example if it is used in a context doesn't necessarily expect a pointer.  As an example, <code>sizeof(0)</code> would evaluate to the size of an <code>int</code>, while <code>sizeof(NULL)</code> would (on my system at least) evaluate to the size of a <code>void *</code>.</p>\n<p>The reverse, using NULL in place of 0, is not the same.  If you had this:</p>\n<pre><code>int x[5] = { 3, 4, 5, 6, 7 };\nint *p = x + 0;\n</code></pre>\n<p>And replaced it with:</p>\n<pre><code>int x[5] = { 3, 4, 5, 6, 7 };\nint *p = x + NULL;\n</code></pre>\n<p>The code would fail to compile since two pointers cannot be operands of the <code>+</code> operator.</p>\n<p>Another example:</p>\n<pre><code>int x[5] = { 3, 4, 5, 6, 7 };\nvoid *p = (void *)x - 0;\nprintf(&quot;*p = %d\\n&quot;, (int *)p);\n</code></pre>\n<p>While not strictly conforming to the standard, some implementations (like gcc) allow pointer arithmetic on <code>void *</code> types and would result in <code>3</code> being printed.  If you changed out 0 for <code>NULL</code>:</p>\n<pre><code>int x[5] = { 3, 4, 5, 6, 7 };\nvoid *p = (void *)x - NULL;\nprintf(&quot;*p = %d\\n&quot;, (int *)p);\n</code></pre>\n<p>If you ran this code on a system that 1) allowed <code>void *</code> arithmetic and 2) used a non-zero address for a null pointer, you would be creating and dereferencing a pointer pointing before the start of the array and possibly not correctly aligned.</p>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 0, "last_activity_date": 1618074634, "creation_date": 1618074634, "answer_id": 67037135, "question_id": 28717771, "link": "https://stackoverflow.com/questions/28717771/are-null-and-0-completely-equivalent-in-c/67037135#67037135", "title": "Are NULL and 0 completely equivalent in C?", "body": "<p>The C standard specifically allows implementations to do</p>\n<pre><code>#define NULL 0\n</code></pre>\n<p>(<a href=\"http://port70.net/%7Ensz/c/c11/n1570.html#7.19p3\" rel=\"nofollow noreferrer\">http://port70.net/~nsz/c/c11/n1570.html#7.19p3</a> : &quot;The macros are NULL, which expands to an implementation-defined null pointer constant&quot;; 0 is a null pointer constant.)</p>\n<p>What this means in language-lawyer-ese is that search-and-replace changing every instance of the identifier NULL to the integer constant 0 cannot change the meaning of any <em>strictly conforming</em> program.</p>\n<p>However, it is very difficult to be sure that a program is strictly conforming.  Other answers have given examples of cases where replacing NULL with 0 can, in fact, change the meaning of a program.  I would like to point out the converse: if a program has a bug due to <code>0</code> being interpreted as an integer constant rather than a null pointer constant, <em>replacing <code>0</code> with <code>NULL</code> does not fix the bug</em>.</p>\n<p>A straightforward example of this is any use of <a href=\"https://linux.die.net/man/3/execlp\" rel=\"nofollow noreferrer\"><code>execlp</code></a>:</p>\n<pre><code>execlp(&quot;ls&quot;, &quot;ls&quot;, &quot;-l&quot;, 0);  // UB: last argument is passed as (int)0\n                              // rather than (char *)0 as expected by callee\n\nexeclp(&quot;ls&quot;, &quot;ls&quot;, &quot;-l&quot;, NULL);         // still buggy, NULL could expand to 0\n\nexeclp(&quot;ls&quot;, &quot;ls&quot;, &quot;-l&quot;, (char *)0);    // correct\nexeclp(&quot;ls&quot;, &quot;ls&quot;, &quot;-l&quot;, (char *)NULL); // correct but asking for someone to\n                                        // &quot;simplify&quot; the code by removing the cast\n</code></pre>\n<p>This type of problem becomes much more common when you're working on old code where not every function is declared with a prototype.</p>\n"}], "owner": {"reputation": 239, "user_id": 3235905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003927709763/picture?type=large", "display_name": "Dan Sheppard", "link": "https://stackoverflow.com/users/3235905/dan-sheppard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1437, "favorite_count": 0, "answer_count": 3, "score": 10, "last_activity_date": 1618074634, "creation_date": 1424863454, "last_edit_date": 1618063474, "question_id": 28717771, "link": "https://stackoverflow.com/questions/28717771/are-null-and-0-completely-equivalent-in-c", "title": "Are NULL and 0 completely equivalent in C?", "body": "<p>Are there &quot;hard&quot; reasons for using NULL in preference to 0 in C89/C99+, and interchanging them without a second thought as to deep concerns relating to standards compliance, even in code using very obscure aspects of C?</p>\n<p>I am concerned with &quot;hard&quot; things like standards compliance, portability, undefined behaviour, unexpectedly different interactions with unanticipated corners of the language, whether the (hypothetical) Milliard Gargantubrain Segmented Memory Supercomputer would likely release its magic smoke, etc.</p>\n<p>There is already a similar question on this site about C++, but I am not concerned about C++. I believe this is one of the areas where C++ behaviour may well differ from C.</p>\n<p>In reality, issues of style and intent are important. But don't think that is useful to discuss in a Q&amp;A forum, so they are not on-topic for this question.</p>\n<p>The answers which I and others have found refer primarily to the use of NULL vs 0 in testing and assignment (a common case and one where it is safe to use them interchangeably). I'm asking if there is any thinking required <em>at all</em> to take arbitrarily weird but standards-compliant code which you have found, and syntactically substitute NULL for 0 (or possibly vice versa when the 0 is a pointer), ignoring whether that is a wise thing to do stylistically. It is hard to give examples of unanticipated interactions but, for example, function pointers often catch us out, maybe sizeof, ....</p>\n<p>I've read the relevant standards sections which describe how 0 and NULL behave. Could someone help me with the impact of the way they are defined in the standard on interchanging them in obscure cases? Or else assure me that there are none.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1424867235, "post_id": 28716963, "comment_id": 45724883, "body": "I don&#39;t see why you need all that code to simply copy a <i>file</i> to another one. You might as well copy one byte at a time."}], "answers": [{"tags": [], "owner": {"reputation": 1306, "user_id": 2807749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3884afad2069925c2c0ca50d49e4b093?s=128&d=identicon&r=PG&f=1", "display_name": "user0815", "link": "https://stackoverflow.com/users/2807749/user0815"}, "is_accepted": true, "score": 4, "last_activity_date": 1424862276, "creation_date": 1424862276, "answer_id": 28717355, "question_id": 28716963, "link": "https://stackoverflow.com/questions/28716963/open-and-write-bmp-file-in-c-under-linux-or-porting-existing-windows-app-to-lin/28717355#28717355", "title": "Open and write BMP file in C under Linux, or porting existing Windows app to Linux [Close]", "body": "<p>The only Windows specific thing in your code is that you use 3 structures defined in <code>Windows.h</code>. You could simply define them by yourself as there is no magic behind it. The definitions can be found here:</p>\n\n<ul>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd183374%28v=vs.85%29.aspx\" rel=\"nofollow\">BITMAPFILEHEADER</a></li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd183376%28v=vs.85%29.aspx\" rel=\"nofollow\">BITMAPINFOHEADER</a></li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd162939%28v=vs.85%29.aspx\" rel=\"nofollow\">RGBTRIPLE</a></li>\n</ul>\n\n<p>To convert the wrapper types (e.g. DWORD) to native C types you can use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx\" rel=\"nofollow\">this list</a>.</p>\n"}], "owner": {"reputation": 159, "user_id": 4469538, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/dNtch.png?s=128&g=1", "display_name": "lvcpp", "link": "https://stackoverflow.com/users/4469538/lvcpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 28717355, "answer_count": 1, "score": -1, "last_activity_date": 1456660841, "creation_date": 1424861198, "last_edit_date": 1456660841, "question_id": 28716963, "link": "https://stackoverflow.com/questions/28716963/open-and-write-bmp-file-in-c-under-linux-or-porting-existing-windows-app-to-lin", "title": "Open and write BMP file in C under Linux, or porting existing Windows app to Linux [Close]", "body": "<p>Task: read bmp file (byte by byte) and write it to another bmp file.</p>\n\n<p>How to port this short app from Windows to Linux in C ?</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \nint main()\n{       \n     BITMAPFILEHEADER bfh_l;\n     BITMAPINFOHEADER bih_l;\n     RGBTRIPLE rgb_l;\n\n     FILE * f1, * f2;\n     f1 = fopen(\"1.bmp\", \"r+b\");\n     f2 = fopen(\"3.bmp\", \"w+b\");\n     int i, j;\n     size_t t;\n     fread(&amp;bfh_l,sizeof(bfh_l),1,f1);\n     fwrite(&amp;bfh_l, sizeof(bfh_l), 1, f2);\n     fread(&amp;bih_l,sizeof(bih_l),1,f1);\n     fwrite(&amp;bih_l, sizeof(bih_l), 1, f2);\n\n     size_t padding = 0;\n     if ((bih_l.biWidth * 3) % 4)\n        padding = 4 - (bih_l.biWidth * 3) % 4;\n     for( i=0;i&lt; bih_l.biHeight;i++)\n     {\n         for ( j = 0; j &lt; bih_l.biWidth; j++)\n         {\n             fread(&amp;rgb_l, sizeof(rgb_l),1, f1);\n             fwrite(&amp;rgb_l, sizeof(rgb_l), 1, f2);\n         }\n         for ( t = 0; t &lt; padding; ++t) \n         {\n             fread(&amp;rgb_l, sizeof(rgb_l),1, f1);\n             fwrite(&amp;rgb_l, sizeof(rgb_l), 1, f2);\n         }\n     }\n     fclose(f1);\n     fclose(f2);\n     return 0;\n}\n</code></pre>\n\n<p>I'm looking for a simple and if possible cross-platform solution.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1424861895, "post_id": 28716877, "comment_id": 45721664, "body": "Why can&#39;t you <code>#define important useless</code>  ?"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1424862057, "post_id": 28716877, "comment_id": 45721748, "body": "This question is specific to a particular compiler. Probably gcc. You should make this clear in your question and in the tags. The useless function can&#39;t be defined as extern &quot;C&quot; function. See <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html</a>."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1424861369, "creation_date": 1424861369, "answer_id": 28717035, "question_id": 28716877, "link": "https://stackoverflow.com/questions/28716877/alias-a-function-in-a-different-source-file/28717035#28717035", "title": "Alias a function in a different source file", "body": "<p>Why are you using a bunch of <code>extern \"C\"</code> stuff?</p>\n\n<p>If it's a C++ project and a global C++ function, you really should claim it's a C function. Doing so can lead to undefined reference-type errors, as the symbol names are different for C and C++.</p>\n"}, {"tags": [], "owner": {"reputation": 939, "user_id": 1556829, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NKY9p.png?s=128&g=1", "display_name": "Igor S.K.", "link": "https://stackoverflow.com/users/1556829/igor-s-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1424861704, "creation_date": 1424861704, "answer_id": 28717138, "question_id": 28716877, "link": "https://stackoverflow.com/questions/28716877/alias-a-function-in-a-different-source-file/28717138#28717138", "title": "Alias a function in a different source file", "body": "<p>What you're trying to do is probably impossible. Take a look at gcc docs <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html</a>  It says:</p>\n\n<blockquote>\n  <p>It is an error if \u2018__f\u2019 is not defined in the same translation unit. </p>\n</blockquote>\n\n<p>So if you remove <code>useless</code> from the translation unit where <code>important</code> is it looks like an error to me.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3567603"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 455, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424861704, "creation_date": 1424860937, "question_id": 28716877, "link": "https://stackoverflow.com/questions/28716877/alias-a-function-in-a-different-source-file", "title": "Alias a function in a different source file", "body": "<p>I've got a .h file and three .cpp files. All cpp files include the .h file.\nI want to create a useless function in one of the cpp files and use alias in the other cpp files to refere to this useless function. But if i move the function from important.cpp to useless.cpp it does not want to compile anymore. For some reason it doesnt see the function, even if its declared in the header.</p>\n\n<p>useless.h</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n    extern void useless(void);\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>useless.cpp</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n    void useless(void) {    }\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>important.cpp</p>\n\n<pre><code>void important(void) __attribute__((alias(\"useless\")));\n</code></pre>\n\n<p>error: 'void important()' aliased to undefined symbol 'useless'\n void important(void) <strong>attribute</strong>((alias(\"useless\")));</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 159018, "user_id": 57428, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e2cef525cef5d7b0078f33b707e30c69?s=128&d=identicon&r=PG", "display_name": "sharptooth", "link": "https://stackoverflow.com/users/57428/sharptooth"}, "edited": false, "score": 0, "creation_date": 1424860050, "post_id": 28716506, "comment_id": 45720598, "body": "What cannot <code>temp</code> be non-null when you&#39;re in the middle of the list?"}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1424860069, "post_id": 28716506, "comment_id": 45720606, "body": "Before you are allowed to dereference the pointer <code>temp</code>, you need to verify that it isn&#39;t the <code>NULL</code> pointer (<code>NULL</code> means you don&#39;t have an actual object, non-<code>NULL</code> means you have an object). As the operator <code>&amp;&amp;</code> does short-circuit evaluation, the second part (<code>temp-&gt;value != value</code>) is only tested if <code>temp != NULL</code>. The logic of this code segment is &quot;while we&#39;re not at the end and not yet found the correct node, iterate&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "is_accepted": false, "score": 0, "last_activity_date": 1424860087, "creation_date": 1424860087, "answer_id": 28716603, "question_id": 28716506, "link": "https://stackoverflow.com/questions/28716506/while-loop-which-has-two-operators-in-linked-list/28716603#28716603", "title": "while loop which has two ( !=) operators in linked list", "body": "<p>There are three possibilities.</p>\n\n<p>When you are not holding the value you are looking for:</p>\n\n<pre><code>temp != null // statisfied\ntemp-&gt;value != value // satisfied\n</code></pre>\n\n<p>When you are holding the value you are looking for:</p>\n\n<pre><code>temp != null // statisfied\ntemp-&gt;value != value // not satisfied\n</code></pre>\n\n<p>When you are at the end of the list (assuming it ends with null:</p>\n\n<pre><code>temp != null // not statisfied\ntemp-&gt;value != value // isn't evaluated (short-circuit using &amp;&amp;)\n</code></pre>\n\n<p>Now you only need to see if you're at the end of the list or at the value you were looking for. Since a lot of times the search-value methods return <code>NULL</code> in case of not finding the value - you may just have to return the value you're holding.</p>\n"}, {"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1424860095, "creation_date": 1424860095, "answer_id": 28716607, "question_id": 28716506, "link": "https://stackoverflow.com/questions/28716506/while-loop-which-has-two-operators-in-linked-list/28716607#28716607", "title": "while loop which has two ( !=) operators in linked list", "body": "<p>You're misinterpreting the <code>while</code> loop. Its purpose is to got through all elements of the list (always making <code>temp</code> the next element, until the next element is a <code>NULL</code> pointer), and stopping when you find the right value. </p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1424860446, "creation_date": 1424860446, "answer_id": 28716733, "question_id": 28716506, "link": "https://stackoverflow.com/questions/28716506/while-loop-which-has-two-operators-in-linked-list/28716733#28716733", "title": "while loop which has two ( !=) operators in linked list", "body": "<p>The loop will continue while the condition of the loop is true</p>\n\n<pre><code>(temp!=NULL) &amp;&amp; (temp-&gt;value != value)\n</code></pre>\n\n<p>The loop will stop iterations when the condition will be false or (that is equivalent) when the negation of the condition will be true</p>\n\n<pre><code>!( (temp!=NULL) &amp;&amp; (temp-&gt;value != value) )\n</code></pre>\n\n<p>This (negation of) condition can be rewriten like</p>\n\n<pre><code>!(temp!=NULL) || !(temp-&gt;value != value)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(temp == NULL) || (temp-&gt;value == value)\n</code></pre>\n\n<p>So the loop will stop iterations when either temp is equal to NULL or it is not equal to NULL and temp->value is equal to value.\nIf temp is equal to NULL then it means that the node that have the data member equal to the value is not found.\nIf temp is not equal to NULL then it is obvious that the target node to be deleted is found.</p>\n"}], "owner": {"reputation": 11, "user_id": 4605113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6c943e98dd699b25f438114275ca12?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Laser", "link": "https://stackoverflow.com/users/4605113/jan-laser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1436102452, "creation_date": 1424859829, "last_edit_date": 1436102452, "question_id": 28716506, "link": "https://stackoverflow.com/questions/28716506/while-loop-which-has-two-operators-in-linked-list", "title": "while loop which has two ( !=) operators in linked list", "body": "<p>Linked list. We insert value of a element we want to delete then we find that value and delete it. I have problem with understanding find portion of the code. I dont get how it can be that both condition ever be satisfied (!=) </p>\n\n<pre><code>.\n.\n.\n     temp = list;\n     previous = list;\n\nwhile((temp!=NULL) &amp;&amp; (temp-&gt;value != value))\n{\n     previous = temp;\n     temp=temp-&gt;next;\n}\n</code></pre>\n\n<p>ok, when we find value that is value we are looking then <code>temp-&gt;value != value</code> is satisfied BUT then <code>temp != NULL</code> isn't satisfied. How can I have both. I really don't get this. They both have to be satisfied but they never will. </p>\n"}, {"tags": ["c", "stm32", "cortex-m3"], "answers": [{"comments": [{"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1424860558, "post_id": 28716571, "comment_id": 45720888, "body": "thanks for your answer, I&#39;ve tried to used but I get only 0 I&#39;ve change the size of the buffer, but it didn&#39;t help. sprintf gives me an error undefined reference to `_sbrk&#39;"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1424861460, "post_id": 28716571, "comment_id": 45721415, "body": "and by the way its 4 digits"}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": true, "score": 2, "last_activity_date": 1424860009, "creation_date": 1424860009, "answer_id": 28716571, "question_id": 28716495, "link": "https://stackoverflow.com/questions/28716495/issues-with-converting-int-to-char-in-c/28716571#28716571", "title": "Issues with converting int to char in C", "body": "<p>Without knowing anything about the range of possible ints, something like this will work:</p>\n\n<pre><code>char buffer[32];\nsprintf(buffer, \"%d\", getADCVAlue(9));\nlocalprint(buffer);\n</code></pre>\n\n<p>Since you did <code>0+</code>, I'm assuming it's one digit, so you could go</p>\n\n<pre><code>char buffer[2];\nbuffer[0] = '0' + getADCVAlue(9);\nbuffer[1] = '\\0';\nlocalprint(buffer);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 349, "user_id": 4672811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a425b4b68bf1bcfa2c0bc1330b853f17?s=128&d=identicon&r=PG&f=1", "display_name": "LennyB", "link": "https://stackoverflow.com/users/4672811/lennyb"}, "is_accepted": false, "score": 0, "last_activity_date": 1426418169, "creation_date": 1426418169, "answer_id": 29059987, "question_id": 28716495, "link": "https://stackoverflow.com/questions/28716495/issues-with-converting-int-to-char-in-c/29059987#29059987", "title": "Issues with converting int to char in C", "body": "<p>Answer from <strong>John3136</strong> will work fine if you replace <code>sprintf</code> with some lightweight implementation of this, e.g <code>xsprintf</code> from <a href=\"http://elm-chan.org/fsw/strf/xprintf.html\" rel=\"nofollow\">elm-chan</a> which I found extremely helpful in embedded programming. Or you must have some stubs for system calls like <code>_sbrk</code> if you want to use <code>sprintf</code>.</p>\n\n<p>I can't comment solution from <strong>John3136</strong> because I don't have enough reputation.</p>\n"}], "owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3983, "favorite_count": 0, "accepted_answer_id": 28716571, "answer_count": 2, "score": 0, "last_activity_date": 1426418169, "creation_date": 1424859797, "question_id": 28716495, "link": "https://stackoverflow.com/questions/28716495/issues-with-converting-int-to-char-in-c", "title": "Issues with converting int to char in C", "body": "<p>I've wrote a small function for debug purpose which sends string via USB to a terminal  :</p>\n\n<pre><code>void localprint(char* msg){\nif(strlen(msg) &gt; 60){\n            usb_sendData(msg,60);\n}\nelse usb_sendData(msg,strlen(msg));\n</code></pre>\n\n<p>}\nthe function works fine for strings like :</p>\n\n<pre><code>localprint(\" I'm a test\" ), \n</code></pre>\n\n<p>the message is displayed on terminal.\nNow I want to get the  <code>adcValue</code>  which is an <code>int</code> on the terminal, for I've tried :</p>\n\n<pre><code>char t= (char)(((int)'0')+getADCValue(9)); // getting the ADC value of 0th channel \nlocalprint(&amp;t);\n</code></pre>\n\n<p>this doens't work at all , I'Ve also tried :</p>\n\n<pre><code>char t= (char) getADCVAlue(9);\nlocalprint(&amp;t);\n</code></pre>\n\n<p>it doesn't work neither. So my question is any idea how can I do that . I'm using uC STM32f10xx and ARM gcc. \nthanks for any hint  </p>\n"}, {"tags": ["c", "printf", "format-string"], "comments": [{"owner": {"reputation": 26053, "user_id": 2082964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Iybex.jpg?s=128&g=1", "display_name": "Chris Maes", "link": "https://stackoverflow.com/users/2082964/chris-maes"}, "edited": false, "score": 2, "creation_date": 1424859217, "post_id": 28716220, "comment_id": 45720115, "body": "you might take a look at <a href=\"http://stackoverflow.com/a/6040763/2082964\">stackoverflow.com/a/6040763/2082964</a>"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 2, "creation_date": 1424859231, "post_id": 28716220, "comment_id": 45720123, "body": "Note that you should be passing an <code>unsigned int</code> to <code>printf</code> for <code>%x</code>, for instance by declaring <code>x</code> of this type."}], "answers": [{"tags": [], "owner": {"reputation": 25764, "user_id": 1163019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG", "display_name": "auselen", "link": "https://stackoverflow.com/users/1163019/auselen"}, "is_accepted": true, "score": 10, "last_activity_date": 1424859188, "creation_date": 1424859188, "answer_id": 28716272, "question_id": 28716220, "link": "https://stackoverflow.com/questions/28716220/why-is-the-format-of-p-and-x-different-in-a-format-string/28716272#28716272", "title": "Why is the format of %p and %x different in a format string?", "body": "<blockquote>\n  <p>p</p>\n  \n  <p>The argument shall be a pointer to void. The value of the pointer is\n  converted to a sequence of printable characters, <strong>in an\n  implementation-defined manner</strong>.</p>\n</blockquote>\n\n<p><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html\">reference</a></p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 5, "last_activity_date": 1424859199, "creation_date": 1424859199, "answer_id": 28716279, "question_id": 28716220, "link": "https://stackoverflow.com/questions/28716220/why-is-the-format-of-p-and-x-different-in-a-format-string/28716279#28716279", "title": "Why is the format of %p and %x different in a format string?", "body": "<p>The output format for <code>%p</code> is implementation specific. Not every C implementation is on machines with addresses of the same size as <code>int</code>. There is the <code>intptr_t</code> from <code>&lt;stdint.h&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1581640290, "last_edit_date": 1581640290, "creation_date": 1424859491, "answer_id": 28716398, "question_id": 28716220, "link": "https://stackoverflow.com/questions/28716220/why-is-the-format-of-p-and-x-different-in-a-format-string/28716398#28716398", "title": "Why is the format of %p and %x different in a format string?", "body": "<blockquote>\n  <p>The %p is not only a %x with an added 0x right?</p>\n</blockquote>\n\n<p>No.. <code>%p</code> expects the argument to be of type (void *) and prints out the address.</p>\n\n<p>Whereas <code>%x</code> converts an unsigned int to unsigned hexadecimal and prints out the result. </p>\n\n<p>And coming to what <code>%p</code> does is implementation defined but the standard just says that <code>%p</code> expects <code>void*</code> argument else the behavior is undefined.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1424860326, "creation_date": 1424860326, "answer_id": 28716685, "question_id": 28716220, "link": "https://stackoverflow.com/questions/28716220/why-is-the-format-of-p-and-x-different-in-a-format-string/28716685#28716685", "title": "Why is the format of %p and %x different in a format string?", "body": "<p>MSVC does not force the \"0x\" prefix on me, but you could optionally remove it like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    int x = 123;\n    char hexstr[20];\n    sprintf(hexstr,\"%p\", (void*)&amp;x);\n    if (strstr(hexstr,\"0x\") == hexstr)\n        printf (\"%s\\n\", hexstr+2);\n    else\n        printf (\"%s\\n\", hexstr);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5612, "favorite_count": 0, "accepted_answer_id": 28716272, "answer_count": 4, "score": 4, "last_activity_date": 1581640290, "creation_date": 1424859032, "last_edit_date": 1425019661, "question_id": 28716220, "link": "https://stackoverflow.com/questions/28716220/why-is-the-format-of-p-and-x-different-in-a-format-string", "title": "Why is the format of %p and %x different in a format string?", "body": "<p>When printing a hexadecimal value (<code>%x</code>) and an address (<code>%p</code>), the format is slightly different. The printed value does not start with <code>0x</code> in the case of a hexadecimal value:</p>\n\n<pre><code>int main()\n{\n     int x = 0x1234;\n     printf(\"Value of x: %x\\n\", x);\n     printf(\"Address of x: %p\\n\", (void*)&amp;x);\n}\n</code></pre>\n\n<p>yields (gcc):</p>\n\n<pre><code>Value of x: 1234\nAddress of x: 0xffb0fbfc\n</code></pre>\n\n<p>Why is the <code>0x</code> forced on you in the case of an address?</p>\n\n<p>I guess it boils down to the standard.</p>\n\n<p>What would be the correct way to print an address without the <code>0x</code> if i wanted to? The <code>%p</code> is not only a <code>%x</code> with an added <code>0x</code> right?</p>\n"}, {"tags": ["c", "arrays", "runtime-error", "binary-search"], "answers": [{"tags": [], "owner": {"reputation": 4190, "user_id": 1520248, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/vySwn.jpg?s=128&g=1", "display_name": "niyasc", "link": "https://stackoverflow.com/users/1520248/niyasc"}, "is_accepted": false, "score": 1, "last_activity_date": 1424858328, "creation_date": 1424858328, "answer_id": 28715981, "question_id": 28715916, "link": "https://stackoverflow.com/questions/28715916/why-is-the-line-12-is-printed-twice/28715981#28715981", "title": "Why is the line 12 is printed twice?", "body": "<p>It is just because you are calling binary search function twice.\nOne on if part and other on else if part.</p>\n\n<p>Alternatively you can do the same in following way</p>\n\n<pre><code>int temp = bi_search(n);\nif (temp == -1)\n    printf(\"Value not found\\n\");\nelse\n    printf(\"Value found at position %d\\n\", temp);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4677, "user_id": 519348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TIdre.jpg?s=128&g=1", "display_name": "TZHX", "link": "https://stackoverflow.com/users/519348/tzhx"}, "is_accepted": true, "score": 1, "last_activity_date": 1424858341, "creation_date": 1424858341, "answer_id": 28715987, "question_id": 28715916, "link": "https://stackoverflow.com/questions/28715916/why-is-the-line-12-is-printed-twice/28715987#28715987", "title": "Why is the line 12 is printed twice?", "body": "<p>You are calling the <code>bi_search</code> function twice. Once in your <code>if</code> statement, and again in a <code>printf</code> statement. You should call it only once, and cache the value.</p>\n\n<pre><code>main()\n{\n    int n=0,ch=0;\n    do\n    {\n        printf(\"\\nEnter the value you want to search for--\\n\");\n        scanf(\"%d\",&amp;n);\n        if(bi_search(n)==-1) // Calling it here\n             printf(\"\\nSORRY :( !! \\nThe value was not found.\");\n        else\n             printf(\"\\nHurray :) !! \\nThe value you entered found at %d position\", bi_search(n)+1); // And here\n        printf(\"\\nEnter:-\\n\\t1 to continue.\\n\\t2 to terminate.\\n\");\n        scanf(\"%d\",&amp;ch);\n    }while(ch==1);\n    printf(\"\\nThank You\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 687, "user_id": 3383665, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/i6Zob.jpg?s=128&g=1", "display_name": "ars", "link": "https://stackoverflow.com/users/3383665/ars"}, "is_accepted": false, "score": 0, "last_activity_date": 1424858422, "creation_date": 1424858422, "answer_id": 28716010, "question_id": 28715916, "link": "https://stackoverflow.com/questions/28715916/why-is-the-line-12-is-printed-twice/28716010#28716010", "title": "Why is the line 12 is printed twice?", "body": "<p>Your main routine can look like this:</p>\n\n<pre><code>int main()\n{\n   int n = 0, ch = 0;\n   do\n   {\n      printf(\"\\nEnter the value you want to search for--\\n\");\n      scanf(\"%d\", &amp;n);\n      int res = bi_search(n); // store the result\n      if (res == -1) // check if not find\n         printf(\"\\nSORRY :( !! \\nThe value was not found.\");\n      else\n         printf(\"\\nHurray :) !! \\nThe value you entered found at %d position\", res + 1); // print if find\n      printf(\"\\nEnter:-\\n\\t1 to continue.\\n\\t2 to terminate.\\n\");\n      scanf(\"%d\", &amp;ch);\n   } while (ch == 1);\n   printf(\"\\nThank You\\n\");\n   return 0;\n}\n</code></pre>\n\n<p>1) int main() (to make compiler calm)</p>\n\n<p>2) int res = bi_search(n) (to avoid second bi_search() call)</p>\n"}], "owner": {"reputation": 210, "user_id": 3801905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb9a0cc1d9c322057de58d1718aaadd?s=128&d=identicon&r=PG", "display_name": "Raghav Mittal", "link": "https://stackoverflow.com/users/3801905/raghav-mittal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 28715987, "answer_count": 3, "score": 0, "last_activity_date": 1424858422, "creation_date": 1424858095, "question_id": 28715916, "link": "https://stackoverflow.com/questions/28715916/why-is-the-line-12-is-printed-twice", "title": "Why is the line 12 is printed twice?", "body": "<p><strong>Given Problem</strong></p>\n\n<p>Implement the binary search algorithm in a non-recursive manner.\nKeep the search array as a numeric array, initialized at time of declaration and keep it global.\nThe program should ask for a value to search, and then tell the location where it is found.\nIf the value is not found the program should display not found.\n* Additionally the program should display the total number of comparisons done to locate the value ( or realize that the value was not found)</p>\n\n<p><strong>My Solution</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint arr[]={1,3,4,6,8,9,10,15,17,21};\nint bi_search(int n)\n{\n    int start=0,end=9,mid=0,count=0;\n    while(start&lt;=end)\n    {\n        count++;\n        mid=(start+end)/2;\n        if(n==arr[mid])\n            {\n                printf(\"\\nThe total number of comparisons done to locate the value--%d\\n\",count);\n                return mid;\n            }\n        else if(n&lt;arr[mid])\n            end=mid-1;\n        else\n            start=mid+1;\n    }\n    printf(\"\\nThe total number of comparisons done to realize that the value was not found--%d\\n\",count);\n    return-1;\n}\nmain()\n{\n    int n=0,ch=0;\n    do\n    {\n        printf(\"\\nEnter the value you want to search for--\\n\");\n        scanf(\"%d\",&amp;n);\n        if(bi_search(n)==-1)\n             printf(\"\\nSORRY :( !! \\nThe value was not found.\");\n        else\n             printf(\"\\nHurray :) !! \\nThe value you entered found at %d position\", bi_search(n)+1);\n        printf(\"\\nEnter:-\\n\\t1 to continue.\\n\\t2 to terminate.\\n\");\n        scanf(\"%d\",&amp;ch);\n    }while(ch==1);\n    printf(\"\\nThank You\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>When I run this code, in function <strong>bi_search(int n)</strong> whenever <strong>arr[mid]</strong> becomes equal to <strong>n</strong>, line <strong>The total number of comparisons done to locate the value--</strong> is getting printed twice.</p>\n"}, {"tags": ["c", "linux", "networking"], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1424858841, "creation_date": 1424858841, "answer_id": 28716146, "question_id": 28715853, "link": "https://stackoverflow.com/questions/28715853/error-creating-tun-device-invalid-argument/28716146#28716146", "title": "Error creating tun device (Invalid argument)", "body": "<p>You're not having something like this, which both your links do have:</p>\n\n<pre><code>ifr.ifr_flags = IFF_TUN; \n</code></pre>\n\n<p>Seems like a very reasonable way of getting an invalid argument error.</p>\n"}, {"tags": [], "owner": {"reputation": 2748, "user_id": 2879338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1Inh.jpg?s=128&g=1", "display_name": "Milind Dumbare", "link": "https://stackoverflow.com/users/2879338/milind-dumbare"}, "is_accepted": false, "score": 0, "last_activity_date": 1424859041, "creation_date": 1424859041, "answer_id": 28716223, "question_id": 28715853, "link": "https://stackoverflow.com/questions/28715853/error-creating-tun-device-invalid-argument/28716223#28716223", "title": "Error creating tun device (Invalid argument)", "body": "<p>You missed this line in the example </p>\n\n<pre><code>ifr.ifr_flags = flags;   /* IFF_TUN or IFF_TAP, plus maybe IFF_NO_PI */\n</code></pre>\n\n<p>So, missing this before ioctl()</p>\n\n<pre><code>ifr.ifr_flags = IFF_TUN; \n</code></pre>\n\n<p>or </p>\n\n<pre><code>ifr.ifr_flags = IFF_TAP; \n</code></pre>\n"}], "owner": {"reputation": 2663, "user_id": 3467349, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b632fff81a1301f7870594ca4170aa7?s=128&d=identicon&r=PG&f=1", "display_name": "user3467349", "link": "https://stackoverflow.com/users/3467349/user3467349"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1650, "favorite_count": 1, "accepted_answer_id": 28716146, "answer_count": 2, "score": 0, "last_activity_date": 1424859114, "creation_date": 1424857902, "last_edit_date": 1424859114, "question_id": 28715853, "link": "https://stackoverflow.com/questions/28715853/error-creating-tun-device-invalid-argument", "title": "Error creating tun device (Invalid argument)", "body": "<p>I'm referencing the example here: <a href=\"https://www.kernel.org/doc/Documentation/networking/tuntap.txt\" rel=\"nofollow\">https://www.kernel.org/doc/Documentation/networking/tuntap.txt</a> (which is quite old), but the link here suggests that the same thing should work as well: (<a href=\"http://backreference.org/2010/03/26/tuntap-interface-tutorial/\" rel=\"nofollow\">http://backreference.org/2010/03/26/tuntap-interface-tutorial/</a>). \nI'm finding very little in the way of up-to-date documentation otherwise. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;  \n#include &lt;sys/ioctl.h&gt;\n#include &lt;sys/socket.h&gt; \n#include &lt;linux/if.h&gt;\n#include &lt;linux/if_tun.h&gt;\n\nint main(void) {\n    char *clonedev = \"/dev/net/tun\"; \n    int fd, err;\n    char * dev_name = \"tun0\";\n    struct ifreq ifr;\n   if( (fd = open(clonedev, O_RDWR)) &lt; 0 ) {\n        exit(1);\n   }\n   memset(&amp;ifr, 0, sizeof(ifr));\n   strncpy(ifr.ifr_name, dev_name, IFNAMSIZ);\n\n   printf(\"Opened %s \\n\", ifr.ifr_name);\n    if( (err = ioctl(fd, TUNSETIFF, (void *) &amp;ifr)) &lt; 0 ) {\n        printf(\"Failed to creat tun device (errno is %d)\\n\",\n             errno);\n        perror(\"ioctl\");\n        close(fd);\n        exit(1);\n   }\n   printf(\"device created\");\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Opened tun0 \nFailed to creat tun device (errno is 22)\nioctl: Invalid argument\n</code></pre>\n\n<hr>\n\n<p>edit: Grepping OpenVPN source code shows the same usage: </p>\n\n<pre><code>src/openvpn/tun.c:1681:      if (ioctl (tt-&gt;fd, TUNSETIFF, (void *) &amp;ifr) &lt; 0)\n</code></pre>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1424857986, "post_id": 28715831, "comment_id": 45719330, "body": "You have <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a> because  <code>N</code> is <i>replaced</i> by the symbol <code>count</code> which is uninitialized and have an indeterminate value."}, {"owner": {"reputation": 1, "user_id": 4605024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43b4342ee958ed023618fb10a6c379?s=128&d=identicon&r=PG&f=1", "display_name": "legitbagel", "link": "https://stackoverflow.com/users/4605024/legitbagel"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1424858130, "post_id": 28715831, "comment_id": 45719419, "body": "@JoachimPileborg is there a way to set the length of digit_count after determining the length of the user inputted string?"}, {"owner": {"reputation": 1, "user_id": 4605024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43b4342ee958ed023618fb10a6c379?s=128&d=identicon&r=PG&f=1", "display_name": "legitbagel", "link": "https://stackoverflow.com/users/4605024/legitbagel"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1424858208, "post_id": 28715831, "comment_id": 45719466, "body": "@DavidSchwartz could you elaborate on how to implement that into my code?"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1424858277, "post_id": 28715831, "comment_id": 45719514, "body": "@legitbagel There&#39;s nothing special about your requirements -- this is the most typical way it&#39;s used. You can just read almost any article on how to use <code>malloc</code>."}], "answers": [{"tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1424858462, "creation_date": 1424858462, "answer_id": 28716025, "question_id": 28715831, "link": "https://stackoverflow.com/questions/28715831/how-do-you-define-an-array-to-the-length-of-a-string-of-numbers/28716025#28716025", "title": "How do you define an array to the length of a string of numbers?", "body": "<p>Use <code>malloc</code>:</p>\n\n<pre><code>int main()\n{\n   int base = 10;\n   int num, *digit_count;\n\n   printf(\"Enter a number: \");\n   scanf(\"%d\", &amp;num);\n\n   digit_count = malloc (base * sizeof (int));\n   if (!digit_count)\n       return -1;\n\n   while (num != 0)\n   {\n      digit_count[num % base]++;\n      num /= base;\n   }\n\n   for (i = 0; i &lt; base); i++)\n        printf(\"%d occurred %d times\\n\", i, digit_count[i]);\n\n   free(digit_count);\n   return 0;\n}\n</code></pre>\n\n<p>Since there are always ten digits, there's no reason to use dynamic memory allocation here, but the same pattern used here would work just as well if the number of entries you needed to allocate changed at run time. You could make <code>base</code> change at run time and the program would still work.</p>\n"}, {"tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 0, "last_activity_date": 1424859310, "last_edit_date": 1424859310, "creation_date": 1424858496, "answer_id": 28716032, "question_id": 28715831, "link": "https://stackoverflow.com/questions/28715831/how-do-you-define-an-array-to-the-length-of-a-string-of-numbers/28716032#28716032", "title": "How do you define an array to the length of a string of numbers?", "body": "<h3>Your particular problem</h3>\n\n<p>For this particular case, you don't need an array of as many elements as the number has digits, you need an array of 10 elements:</p>\n\n<pre><code>int digit_count[10] = { 0 };\n\n...\n\n    // num % 10 is never larger than 9.\n    digit_count[num % 10]++;\n</code></pre>\n\n<p>By the way, it would be better to use an <code>unsigned int num</code> and <code>\"%u\"</code> in the <code>scanf</code> because this will still misbehave for negative numbers, when <code>num % 10</code> is negative (for C99 and later) or has an unspecified value (older C).</p>\n\n<h3>Arrays long enough to hold the digits of a number</h3>\n\n<p>In the event that one day you need an array large enough to hold all individual digits of a number, my advice is to use the upper bound; that is to say: enough space to hold the longest number the data type can hold. An approximation that holds beyond megabit integers (i.e., for everything you'll ever encounter) is</p>\n\n<pre><code>#define MAX_DIGITS10(type) (2 + sizeof(type) * CHAR_BIT * 643L / 2136)\n\n...\n\nint digits[MAX_DIGITS10(int)];\n</code></pre>\n\n<p>This works because <code>643L / 2136</code> is a decent approximation of log<sub>10</sub>(2).</p>\n\n<p>The approach is shamelessly lifted from GNU's libstdc++, which uses</p>\n\n<pre><code>#define __glibcxx_max_digits10(T) \\\n  (2 + (T) * 643L / 2136)\n</code></pre>\n\n<p>in the C++ standard library header <code>&lt;limits&gt;</code>.</p>\n\n<h3>Arrays of variable length</h3>\n\n<p>In the event that you one day need an array of truly variable length, you have to calculate the length before allocating the array. Once you have calculated the length, C99 and later, which have VLAs (variable-length arrays), allow you to simply write</p>\n\n<pre><code>size_t calculated_length = calculate_length();\nint vla[calculated_length] = { 0 };\n\n// vla goes out of scope like normal arrays; no cleanup necessary\n</code></pre>\n\n<p>Before C89, you would have to use <code>malloc</code> (or <code>calloc</code>) and <code>free</code>:</p>\n\n<pre><code>size_t calculated_length = calculate_length();\n\nint *heap_array = calloc(calculated_length, sizeof(int));\n// or:\nint *heap_array = malloc(calculated_length * sizeof(int));\n\n// and when you're done:\n\nfree(heap_array);\n</code></pre>\n\n<p>Note that with <code>malloc</code> it's up to you to check that <code>calculated_length * sizeof(int)</code> does not overflow (most <code>calloc</code> implementations do that internally), and that <code>calloc</code> zero-initializes the memory while <code>malloc</code> does not. This makes <code>calloc</code> a little slower, naturally, but where that is not a problem, my advice is to prefer it over <code>malloc</code>.</p>\n\n<p>VLAs are arguably superior when the array does not need to live beyond the scope in which it is declared, but you should be aware that you cannot use VLAs that are larger than the thread stack, which is usually limited to anything between one and a few megabytes. For large arrays, it is necessary to use the *alloc functions.</p>\n"}], "owner": {"reputation": 1, "user_id": 4605024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43b4342ee958ed023618fb10a6c379?s=128&d=identicon&r=PG&f=1", "display_name": "legitbagel", "link": "https://stackoverflow.com/users/4605024/legitbagel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1424859310, "creation_date": 1424857828, "question_id": 28715831, "link": "https://stackoverflow.com/questions/28715831/how-do-you-define-an-array-to-the-length-of-a-string-of-numbers", "title": "How do you define an array to the length of a string of numbers?", "body": "<p>I'm unsure how exactly to do this. If anyone has some expert advice that would be extremely helpful!</p>\n\n<pre><code>#define SIZE ((int) (sizeof(digit_count)/sizeof(digit_count[0]))\n#define N count\n\nint main()\n{\n    int i, num, count, digit_count[N] = {0};\n\n   printf(\"Enter a number: \");\n   scanf(\"%d\", &amp;num);\n\n   while (num != 0)\n   {\n      digit_count[num % 10]++;\n      num /= 10;\n      ++count;\n   }\n\n for (i = 0; i &lt; SIZE); i++)\n        printf(\"%d occured %d times\\n\", i, digit_count[i]);\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "asynchronous", "pinvoke", "native"], "answers": [{"comments": [{"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1424866715, "post_id": 28717794, "comment_id": 45724526, "body": "Thanks for taking the time to make such a detailed answer. I&#39;m unfamiliar with C#, so let alone the inter operability stuff. If i understand well what you wrote, storing a reference to the delegate will prevent it from being collected, so the &quot;thunk&quot; (whatever this is) will remain alive too, and i will be able to make the call to the delegate from the thread even after the native function that started the thread has returned to C# right ?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "reply_to_user": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 1, "creation_date": 1424867047, "post_id": 28717794, "comment_id": 45724745, "body": "I&#39;m never that keen on somebody condensing one of my posts into a single sentence.  But, yeah, that&#39;s it."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1424867198, "post_id": 28717794, "comment_id": 45724868, "body": "This is new to me so i&#39;m just trying to synthesize the idea for it to be easier to understand and remeber for me."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "reply_to_user": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1424867983, "post_id": 28717794, "comment_id": 45725352, "body": "Fair call.  Just remember that your C++ code cannot do anything to solve this problem.  So if you get a &quot;your code crashes my program&quot; complaint then point the C# programmer at this answer.  He&#39;ll have a use for the long answer to get him off your back."}, {"owner": {"reputation": 3437, "user_id": 239411, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6df1b4f37fb264449d5a89456dce2bc1?s=128&d=identicon&r=PG", "display_name": "halivingston", "link": "https://stackoverflow.com/users/239411/halivingston"}, "edited": false, "score": 0, "creation_date": 1450652925, "post_id": 28717794, "comment_id": 56514975, "body": "@Hans Passant -- when you say &quot;thunk&quot;, do you mean the Reverse PInvoke Stub? I see that the Reverse PInvoke Stub is only created once per my delegate type, but somehow the CLR knows which instance to call. So I digged into it and there seems to be something like &quot;GetStubContext&quot; in the MSIL which seems to be thread-specific and is able to know which instance I&#39;m referring to because it seems the stack captures the instance in some memory.  If my hypothesis is correct, that would mean async calls would not work. So either I&#39;m wrong (happy to be) or async calls donot work?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1450653779, "post_id": 28717794, "comment_id": 56515228, "body": "These callbacks could not possibly more async.  Made whenever native code runs, activated for whatever reason.  Click the Ask Question button if you want somebody to dig through the CLR source to find the relevant code."}], "tags": [], "owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "is_accepted": true, "score": 4, "last_activity_date": 1424863509, "creation_date": 1424863509, "answer_id": 28717794, "question_id": 28715660, "link": "https://stackoverflow.com/questions/28715660/c-c-asynchronous-reverse-pinvoke/28717794#28717794", "title": "C# / C++ Asynchronous reverse pinvoke?", "body": "<p>No, this is a universal bug and not specific to asynchronous code.  It is just a <em>bit</em> more likely to byte in your case since you never have the machinery behind [DllImport] to keep you out of trouble.  I'll explain why this goes wrong, maybe that helps.</p>\n\n<p>A delegate declaration for a callback method is always required, that's how the CLR knows now to make the call to the method.  You often declare it explicitly with the <em>delegate</em> keyword, you might need to apply the [UnmanagedFunctionPointer] attribute if the unmanaged code is 32-bit and assumes the function was written in C or C++.  The declaration is important, that's how the CLR knows how the arguments you pass from your native code need to be converted to their managed equivalent.  That conversion can be intricate if your native code passes strings, arrays or structures to the callback.</p>\n\n<p>The scenario is <em>heavily</em> optimized in the CLR, important because managed code inevitably runs on an unmanaged operating system.  There are a <em>lot</em> of these transitions, you can't see them because most of them happen inside .NET Framework code.  This optimization involves a <strong>thunk</strong>, a sliver of auto-generated machine code that takes care of making the call to foreign method or function.  Thunks are created on-the-fly, whenever you make the interop call that uses the delegate.  In your case when C# code passes the delegate to your C++ code.  Your C++ code gets a pointer to the thunk, a function pointer, you store it and make the callback later.</p>\n\n<p>\"You store it\" is where the problem starts.  The CLR is unaware that you stored the pointer to the thunk, the garbage collector cannot see it.  Thunks require memory, usually just a few handful of bytes for the machine code.  They don't live forever, the CLR automatically releases the memory when the thunk is no longer needed.</p>\n\n<p>\"Is no longer needed\" is the rub, your C++ code cannot magically tell the CLR that it no longer is going to make a callback.  So the simple and obvious rule it uses is that the thunk is destroyed when the delegate object is garbage collected.</p>\n\n<p>Programmers forever get in trouble with that rule.  They don't realize that the life-time of the delegate object is important.  Especially tricky in C#, it has a lot of syntax sugar that makes it <em>very</em> easy to create delegate objects.  You don't even have to use the <em>new</em> keyword or name the delegate type, just using the target method name is enough.  The lifetime of such a delegate object is <em>only</em> the pinvoke call.  After the call completes and your C++ code has stored the pointer, the delegate object isn't referenced anywhere anymore so is eligible for garbage collection.</p>\n\n<p>Exactly <em>when</em> that happens, and the thunk is destroyed, is unpredictable.  The GC runs only when needed.  Could be a nanosecond after you made the call, that's unlikely of course, could be seconds.  Most tricky, could be never.  Happens in a typical unit test that doesn't otherwise calls GC.Collect() explicitly.  Unit tests rarely put enough pressure on the GC heap to induce a collection.  It is a <em>bit</em> more likely when you make the callback from another thread, implicit is that other code is running on other threads that make it more likely that a GC is triggered.  You'll discover the problem quicker.  Nevertheless, the thunk <em>is</em> going to get destroyed in a real program sooner or later.  Kaboom when you make the callback in your C++ code after that.</p>\n\n<p>So, rock-hard rule, you <strong>must</strong> store a reference to the delegate to avoid the premature collection problem.  Very simple to do, just store it in a variable in your C# program that is declared <code>static</code>.  Usually good enough, you might want to set it explicitly back to null when the C# code tells your C++ code to stop making callbacks, unlikely in your case.  Very occasionally, you'd want to use <code>GCHandle.Alloc()</code>instead of a static variable. </p>\n"}], "owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "accepted_answer_id": 28717794, "answer_count": 1, "score": 3, "last_activity_date": 1424863509, "creation_date": 1424857334, "question_id": 28715660, "link": "https://stackoverflow.com/questions/28715660/c-c-asynchronous-reverse-pinvoke", "title": "C# / C++ Asynchronous reverse pinvoke?", "body": "<p>I need to call C# code from a native C/C++ .dll <strong>asynchronously</strong>.</p>\n\n<p>While searching how to do I found that I could create a C# delegate and get a function pointer from it, which I would use inside my native code.</p>\n\n<p>The problem is that my native code needs to run <strong>asynchronously</strong>, i.e in a separate thread created from the native code, which means that the native code called from the C# will return to C# before the delegate is called.</p>\n\n<p>I read in another SO question that someone had trouble with this, <strong>despite what the MSDN says</strong>, because his delegate was garbage collected before it gets called, due to the asynchronous nature of his task.</p>\n\n<p>My question is : is it really posible to call a C# delegate using a function pointer from a native code running in a thread that was created inside the native code ? Thank you.</p>\n"}, {"tags": ["c", "header-files", "c-preprocessor", "preprocessor-directive"], "comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1424856906, "post_id": 28715445, "comment_id": 45718600, "body": "There doesn&#39;t seem to be a reason to have the <code>#include</code>s in the header, so I&#39;d put the whole thing into the <code>.c</code> file. This is, however, a matter of opinion; both ways work."}, {"owner": {"reputation": 2748, "user_id": 2879338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1Inh.jpg?s=128&g=1", "display_name": "Milind Dumbare", "link": "https://stackoverflow.com/users/2879338/milind-dumbare"}, "edited": false, "score": 0, "creation_date": 1424857010, "post_id": 28715445, "comment_id": 45718681, "body": "Header files used by function definition should go in .c file. Interfaces (function declaration) goes in .h"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424860038, "post_id": 28715445, "comment_id": 45720593, "body": "I wish people would ask more questions like this. Proper program design is very important, and it is hard to find any information about it in books etc. Most programmers just pick up &quot;some sort of design&quot; as they go, which is far from ideal. SO seems like the perfect place for filling that knowledge gap. Generally I&#39;d advise to study object-oriented programming (plenty of resources on that topic) and then write your C programs according to OO design. You don&#39;t need OO language support to do a proper program design."}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 0, "creation_date": 1424868016, "post_id": 28715445, "comment_id": 45725375, "body": "Simple Answer: Put all <code>#define</code>&#39;s and <code>#ifdef</code>&#39;s in the header file, along with all function prototypes; i.e. <code>int foo(int x, int y);</code>.  Note the semicolon at the end, this says &quot;There WILL be a function defined of this form, but it has not been defined yet.&quot;"}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424868083, "post_id": 28715445, "comment_id": 45725407, "body": "@Lundin: True that.  Good structure IS really important."}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1424859288, "creation_date": 1424859288, "answer_id": 28716308, "question_id": 28715445, "link": "https://stackoverflow.com/questions/28715445/how-to-split-this-into-header-and-source-files/28716308#28716308", "title": "How to split this into header and source files?", "body": "<p>I would simplify it to this, the only thing needed in the header file is the function prototype.</p>\n\n<p><strong>benchmark.h</strong></p>\n\n<pre><code>double get_time();\n</code></pre>\n\n<p><strong>benchmark.c</strong></p>\n\n<pre><code>#ifdef WIN32\n#include &lt;windows.h&gt;\n#include \"benchmark.h\"\n\ndouble get_time()\n{\n    LARGE_INTEGER t, f;\n    QueryPerformanceCounter(&amp;t);\n    QueryPerformanceFrequency(&amp;f);\n    return (double)t.QuadPart/(double)f.QuadPart;\n}\n\n#else\n\n#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\n#include \"benchmark.h\"\n\ndouble get_time()\n{\n    struct timeval t;\n    struct timezone tzp;\n    gettimeofday(&amp;t, &amp;tzp);\n    return t.tv_sec + t.tv_usec*1e-6;\n}\n\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "edited": false, "score": 0, "creation_date": 1424860361, "post_id": 28716475, "comment_id": 45720767, "body": "Where should these files go in terms of the structure of a typical program? Also, what do you think about the comment on the OP about these functions being small enough to be declared with &quot;static&quot; and defined in the .h file?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424860750, "post_id": 28716475, "comment_id": 45721010, "body": "Why is the <code>#ifndef BENCHMARK_H</code> needed? A function prototype may appear any number of times. Is it just to be rigorous?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "edited": false, "score": 0, "creation_date": 1424868856, "post_id": 28716475, "comment_id": 45725878, "body": "@jaska What do you mean &quot;where should these files go&quot;. Add them to your project and link them. If you are using some particular folder structure for a larger project, then put them wherever it is appropriate. It doesn&#39;t make sense whatsoever to declare any function prototype in a h file as static. Perhaps they meant inline. At any rate, inlining functions is kind of a thing of the past, using the inline keyword in modern programming is in most cases a form of pre-mature optimization."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424868943, "post_id": 28716475, "comment_id": 45725941, "body": "@WeatherVane It is simply good programming practice. You should always have header guards in every single header file you ever write."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1424859753, "creation_date": 1424859753, "answer_id": 28716475, "question_id": 28715445, "link": "https://stackoverflow.com/questions/28715445/how-to-split-this-into-header-and-source-files/28716475#28716475", "title": "How to split this into header and source files?", "body": "<p>Together, a header file and a c file form a \"code module\" (or if you will: an ADT, a class etc).</p>\n\n<p>The header file is always to be regarded as the <em>user interface</em> of your code, where the \"user\" is the programmer who is going to use your module. It shall never contain any code or variable definitions, period.</p>\n\n<p>While the c file contains the actual implementation, which is of no interest to the user, and should not be of any concern to them. The c file should use private encapsulation and everything that the user need not know should be in that file.</p>\n\n<p>The above is how  you design C programs, or any program in any language. This is not subjective, it is not opinion-based, it is the only way. If you are doing your program design differently, you are doing it wrong.</p>\n\n<hr>\n\n<p>As for your specific program, it should be designed in the following way:</p>\n\n<p><strong>benchmark.h</strong></p>\n\n<pre><code>#ifndef BENCHMARK_H\n#define BENCHMARK_H\n\n    double get_time (void);\n    /* documentation about how this function is used should be put here */\n\n#endif\n</code></pre>\n\n<p><strong>benchmark.c</strong></p>\n\n<pre><code>#include \"benchmark.h\"\n\n /*** Include files ***/\n#ifdef WIN32\n    #include &lt;windows.h&gt;\n#else\n    #include &lt;sys/time.h&gt;\n    #include &lt;sys/resource.h&gt;\n#endif\n\n/*** Other stuff, for example constants, typedefs, static file scope variables ***/\n\n\n/*** function definitions ***/\n\n#ifdef WIN32\n\n    double get_time (void)\n    {\n        LARGE_INTEGER t, f;\n        QueryPerformanceCounter(&amp;t);\n        QueryPerformanceFrequency(&amp;f);\n        return (double)t.QuadPart/(double)f.QuadPart;\n    }\n\n#else\n\n    double get_time (void)\n    {\n        struct timeval t;\n        struct timezone tzp;\n        gettimeofday(&amp;t, &amp;tzp);\n        return t.tv_sec + t.tv_usec*1e-6;\n    }\n\n#endif\n</code></pre>\n\n<p>Note that <code>double get_time()</code> means \"function that accepts any parameter\" in C. That is poor style, use <code>void</code> instead. C and C++ are different in this regard. In C++, <code>func()</code> and <code>func(void)</code> mean the same thing.</p>\n"}], "owner": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2425, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1424859753, "creation_date": 1424856714, "question_id": 28715445, "link": "https://stackoverflow.com/questions/28715445/how-to-split-this-into-header-and-source-files", "title": "How to split this into header and source files?", "body": "<p>I have some C code I'd like to split into a header file and a source file: </p>\n\n<pre><code>#ifndef BENCHMARK_H\n#define BENCHMARK_H\n\n#ifdef WIN32\n#include &lt;windows.h&gt;\n\ndouble get_time()\n{\n    LARGE_INTEGER t, f;\n    QueryPerformanceCounter(&amp;t);\n    QueryPerformanceFrequency(&amp;f);\n    return (double)t.QuadPart/(double)f.QuadPart;\n}\n\n#else\n\n#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\n\ndouble get_time()\n{\n    struct timeval t;\n    struct timezone tzp;\n    gettimeofday(&amp;t, &amp;tzp);\n    return t.tv_sec + t.tv_usec*1e-6;\n}\n\n#endif\n\n#endif\n</code></pre>\n\n<p>What would be the proper format of the resulting <code>benchmark.h</code> and <code>benchmark.c</code>?</p>\n\n<p>I know the header file should contain function <em>declarations</em>, while the source file should be where the actual function <em>definitions</em> reside. Would this following code be correct? Namely, should the <code>#ifdef WIN32</code> directive be in both files as I have it below? Or should it all be in the <code>.c</code> file?</p>\n\n<p><strong><code>benchmark.h</code></strong></p>\n\n<pre><code>#ifndef BENCHMARK_H\n#define BENCHMARK_H\n\n    #ifdef WIN32\n        #include &lt;windows.h&gt;\n    #else\n        #include &lt;sys/time.h&gt;\n        #include &lt;sys/resource.h&gt;\n    #endif\n\n    double get_time();\n\n#endif\n</code></pre>\n\n<p><strong><code>benchmark.c</code></strong></p>\n\n<pre><code>#ifdef WIN32\n\n    double get_time()\n    {\n        LARGE_INTEGER t, f;\n        QueryPerformanceCounter(&amp;t);\n        QueryPerformanceFrequency(&amp;f);\n        return (double)t.QuadPart/(double)f.QuadPart;\n    }\n\n#else\n\n    double get_time()\n    {\n        struct timeval t;\n        struct timezone tzp;\n        gettimeofday(&amp;t, &amp;tzp);\n        return t.tv_sec + t.tv_usec*1e-6;\n    }\n\n#endif\n</code></pre>\n"}, {"tags": ["c", "function", "recursion"], "comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1424855731, "post_id": 28715092, "comment_id": 45717877, "body": "what is your question?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1424855837, "post_id": 28715092, "comment_id": 45717941, "body": "Explain the flow of the program"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1424855953, "post_id": 28715092, "comment_id": 45718000, "body": "Does replacing <code>fun(--n);</code> with <code>--n; fun(n);</code> help you ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "edited": false, "score": 0, "creation_date": 1424856353, "post_id": 28715092, "comment_id": 45718234, "body": "No it doesn&#39;t I am thinking about the einpoklum answer though that arguments are passed by value but still I am unable to get the flolw"}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 2, "creation_date": 1424856432, "post_id": 28715092, "comment_id": 45718293, "body": "@RohitSaluja - using a debugger will be priceless for you in this case - you will be able to follow the execution step by step, watching the value of <code>n</code> and the calls flow. Try it."}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1424892052, "post_id": 28715218, "comment_id": 45741824, "body": "@tobi303: umm, sorry, yeah. Edited."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1424892041, "last_edit_date": 1424892041, "creation_date": 1424855985, "answer_id": 28715218, "question_id": 28715092, "link": "https://stackoverflow.com/questions/28715092/recursive-confusion/28715218#28715218", "title": "Recursive Confusion", "body": "<p>I believe the cause of confusion is your assumption that the same \"n\" is used by every call to the function <code>fun()</code>. In fact, that's not the case, since in the C language, argument are passed by value. That is, when <code>fun(3)</code> calls <code>fun(2)</code>, a new <code>n</code> is created - specific to one instance of <code>fun(2)</code>. Thus after the call to <code>fun(3)</code> within <code>fun(2)</code>, the value of <code>n</code> is 2, not or -1.</p>\n\n<p>You should therefore expect...</p>\n\n<p>fun(1) to print 0<br>\nfun(2) to print 1<br>\nfun(3) to print 2<br>\nfun(1) (called from the second call to fun(2)) to print 0<br></p>\n\n<p>and that's it.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "edited": false, "score": 0, "creation_date": 1424856720, "post_id": 28715361, "comment_id": 45718475, "body": "Yes from step 3 we are returned to step 2 and the control comes now to printf() statement which is printing the value of n so step 3 returned void and the value of n at step 2 is 1 which is were we are currently so shouldn&#39;t 1 get printed instead of 0"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1424856882, "post_id": 28715361, "comment_id": 45718583, "body": "@RohitSaluja ,<code>n</code> has already been decremented as you use the prefix decrement operator."}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": true, "score": 1, "last_activity_date": 1424858061, "last_edit_date": 1424858061, "creation_date": 1424856461, "answer_id": 28715361, "question_id": 28715092, "link": "https://stackoverflow.com/questions/28715092/recursive-confusion/28715361#28715361", "title": "Recursive Confusion", "body": "<p>Let's try to understand it with case <code>n=2</code> and then you should be able to generalize.</p>\n\n<pre><code>fun (2):\n</code></pre>\n\n<p>What happens inside (flow):</p>\n\n<p>1) <code>n=2:</code> <code>if(n&gt;0)</code> is true and <code>fun(--n)</code> is called with <code>n</code> set to value 1 due to --; (see step below).</p>\n\n<p>2) <code>n=1:</code> Now <code>n=1</code>: again <code>if(n&gt;0)</code> is true and <code>fun(--n)</code> is called with <code>n=0</code>. See step below.</p>\n\n<p>3) <code>n=0:</code> Now <code>n=0;</code> <code>if(n&gt;0)</code> is false, so we return.</p>\n\n<p>I think here is your confusion. From step 3 you <strong>are thrown back</strong>\nat <strong>step 2</strong> (<strong>not step 1</strong>). You are thrown actually in step 2 after <code>fun(--n)</code> call - so <code>printf</code> is called with value of <code>n=0</code>, due to decrement.\nThen again in same place (after <code>printf</code>) <code>fun(--n)</code> is called with value <code>n=-1</code> however, which will also exit - and eventually you will be thrown at the beginning.</p>\n"}, {"comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1424856914, "post_id": 28715387, "comment_id": 45718605, "body": "@CoolGuy Yes, and I respected that condition. It prints 0 after calling <code>f(0)</code> first time, isn;t it?"}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 2, "last_activity_date": 1424857244, "last_edit_date": 1424857244, "creation_date": 1424856550, "answer_id": 28715387, "question_id": 28715092, "link": "https://stackoverflow.com/questions/28715092/recursive-confusion/28715387#28715387", "title": "Recursive Confusion", "body": "<p>This is the function call for your function when n = 3</p>\n\n<pre><code>f(3)\n.f(2) [1]\n..f(1) [1]\n...f(0) [1]\n...Print 0\n...f(-1) [2]\n..Print 1\n..f(0) [2]\n.Print 2\n.f(1) [2]\n..f(0) [1]\n..Print 0\n..f(-1)[2]\n</code></pre>\n\n<p>Where <code>.</code> represent the depth of stack and 1 and 2 specify whether its first recursive call from the loop or second.</p>\n\n<p>Because</p>\n\n<pre><code>f(3)\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>f(2)\nprint 2\nf(1)\n</code></pre>\n\n<p>which inturn becomes</p>\n\n<pre><code>f(1)\nprint 1\nf(0)\nprint 2\nf(0)\nprint 0\nf(-1)\n</code></pre>\n\n<p>Which finally becomes</p>\n\n<pre><code>f(0)\nprint 0\nf(-1)\nprint 1\nf(0)\nprint 2\nf(0)\nprint 0\nf(-1)\n</code></pre>\n\n<p>Removing all the <code>f(n)</code> when <code>n &lt;= 0</code></p>\n\n<pre><code>print 0\nprint 1\nprint 2\nprint 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 0, "last_activity_date": 1424856665, "creation_date": 1424856665, "answer_id": 28715425, "question_id": 28715092, "link": "https://stackoverflow.com/questions/28715092/recursive-confusion/28715425#28715425", "title": "Recursive Confusion", "body": "<p>The output of the program can be understood by iteratively expanding the function calls and removing the conditions; in a pseudocode-manner, this can be done as follows.</p>\n\n<pre><code>fun(3)\n</code></pre>\n\n<p>Can be expanded to the following.</p>\n\n<pre><code>if(3&gt;0)\n{   \n    fun(2);\n    printf(\"%d\\n\",2);\n    fun(1);\n}\n</code></pre>\n\n<p>In the follwing steps, the <code>if</code> condition is omitted if it will evaluate to false.</p>\n\n<pre><code>fun(1);\nprintf(\"%d\\n\",1);\nfun(0);\nprintf(\"%d\\n\",2);\nfun(0);\nprintf(\"%d\\n\",0);\nfun(-1);\n</code></pre>\n\n<p>The calls to <code>fun</code> with non-positive arguments can be omitted as they will generate no output.</p>\n\n<pre><code>fun(1);\nprintf(\"%d\\n\",1);\nprintf(\"%d\\n\",2);\nprintf(\"%d\\n\",0);\n</code></pre>\n\n<p>Further expansion yields the following sequence.</p>\n\n<pre><code>fun(0);\nprintf(\"%d\\n\",0);\nfun(-1);\nprintf(\"%d\\n\",1);\nprintf(\"%d\\n\",2);\nprintf(\"%d\\n\",0);\n</code></pre>\n\n<p>This can be again reduced to the following sequence.</p>\n\n<pre><code>printf(\"%d\\n\",0);\nprintf(\"%d\\n\",1);\nprintf(\"%d\\n\",2);\nprintf(\"%d\\n\",0);\n</code></pre>\n\n<p>So in total, the output will be as follows.</p>\n\n<pre><code>0\n1\n2\n0\n</code></pre>\n\n<p>I hope this answers your question; however, it does not provide an intuitive way of describing the generated output.</p>\n"}, {"tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 1, "last_activity_date": 1424856868, "creation_date": 1424856868, "answer_id": 28715486, "question_id": 28715092, "link": "https://stackoverflow.com/questions/28715092/recursive-confusion/28715486#28715486", "title": "Recursive Confusion", "body": "<p>I would draw a \"call tree\" to help visualize the program.</p>\n\n<p>The function has those parts</p>\n\n<pre><code>decrement n, call, print, decrement n, call\n</code></pre>\n\n<p>now you can draw this:</p>\n\n<pre><code>                  0                 -1\n            1-&gt;0,   print 0, 0-&gt;-1,                   0\n      2-&gt;1,                            print 1, 1-&gt;0,                 1-&gt;0, .....\n3-&gt;2,                                                   print 2, 2-&gt;1, .....\n</code></pre>\n\n<p>Start at the bottom left, and go up one line for each call. The program executes from left to right, and you can clearly see the order of the numbers printed.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424858267, "post_id": 28715518, "comment_id": 45719508, "body": "I would move <code>NumSpace += 4;</code> up to be the first statement in <code>fun()</code>. Because for example, the first <code>0</code> is printed by <code>fun(1)</code> and not by <code>fun(0)</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 4604954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ed04d5e8cc73e934766a3d09d64731c?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4604954/srikanth"}, "is_accepted": false, "score": 0, "last_activity_date": 1424856954, "creation_date": 1424856954, "answer_id": 28715518, "question_id": 28715092, "link": "https://stackoverflow.com/questions/28715092/recursive-confusion/28715518#28715518", "title": "Recursive Confusion", "body": "<p>To understand the recursive flow you can instrument your code with few printfs like below. This will show the sequence of flow of function using indentation.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid printSpace(int num)\n{\n    while(num &gt; 0)\n    {\n        printf(\" \");\n        num--;\n    }\n}\n\nint NumSpace = 0;\nvoid fun(int n)\n{   \n    printSpace(NumSpace);\n    printf(\"fun(%d)\\n\", n);\n    NumSpace += 4;\n    if(n&gt;0)\n    {   \n        fun(--n);\n        printSpace(NumSpace);\n        printf(\"%d\\n\",n);\n        fun(--n);\n    }\n    NumSpace -= 4;\n}   \nint main(void) {\n    int a;\n    a=3;\n    fun(a);\n    return 0;\n}\n\n\nResult:\nfun(3)\n    fun(2)\n        fun(1)\n            fun(0)\n            0\n            fun(-1)\n        1\n        fun(0)\n    2\n    fun(1)\n        fun(0)\n        0\n        fun(-1) \n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 522, "user_id": 4603054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B3AdR.jpg?s=128&g=1", "display_name": "Tlacenka", "link": "https://stackoverflow.com/users/4603054/tlacenka"}, "is_accepted": false, "score": 1, "last_activity_date": 1424857202, "creation_date": 1424857202, "answer_id": 28715621, "question_id": 28715092, "link": "https://stackoverflow.com/questions/28715092/recursive-confusion/28715621#28715621", "title": "Recursive Confusion", "body": "<p>Here is what happens (pseudocode):</p>\n\n<pre><code>   n = 3\n   fun(3);\n      n = 2\n      fun(2); // first fun(--n)\n         n = 1\n         fun(1); // first fun(--n)\n            n = 0\n            fun(0); // first fun(--n)\n               return;\n            print 0\n            n = -1\n            fun(-1); // second fun(--n)\n               return;\n            return;\n         print 1\n         n = 0\n         fun(0); // second fun(--n)\n            return;\n         return;\n      print 2\n      n = 1\n      fun(1); // second fun(--n)\n         n = 0\n         fun(0); // first fun(--n)\n            return;\n         print 0\n         n = -1\n         fun(-1); // second fun(--n)\n            return;\n         return;\n      return;\n   return;\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "edited": false, "score": 1, "creation_date": 1424861166, "post_id": 28716202, "comment_id": 45721244, "body": "Hi Dave even I also find understanding recursive code as a headache the only advantage of using them is reducing the size of the function, Meanwhile I have this doubt that which function will be more efficient performance wise the one which is recursive or the one which is not recursive ?"}], "tags": [], "owner": {"reputation": 47, "user_id": 4596554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5567bba414076fa4b91616b2ee0871a?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/4596554/dave"}, "is_accepted": false, "score": 0, "last_activity_date": 1424858975, "creation_date": 1424858975, "answer_id": 28716202, "question_id": 28715092, "link": "https://stackoverflow.com/questions/28715092/recursive-confusion/28716202#28716202", "title": "Recursive Confusion", "body": "<p>Avoid recursive code where ever possible. As you can see by this simple example, it can be tough to understand the flow of the program. Imagine what it is like to find bugs in a very complex bit of code.\nAnd for those that think this deserves a down vote... in 20 years of coding in C I have found very few occasions that really need it.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 1, "accepted_answer_id": 28715361, "answer_count": 8, "score": 2, "last_activity_date": 1424892041, "creation_date": 1424855616, "last_edit_date": 1424855947, "question_id": 28715092, "link": "https://stackoverflow.com/questions/28715092/recursive-confusion", "title": "Recursive Confusion", "body": "<p>Hello everyone I had a tough time understanding recursive function calls and just when I thought I have understood them, I saw a question which made me realized that I am wrong \nI am not able to understand the flow of the program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid fun(int n)\n{   \n    if(n&gt;0)\n    {   \n        fun(--n);\n        printf(\"%d\\n\",n);\n        fun(--n);\n    }\n}   \nint main(void) {\n    int a;\n    a=3;\n    fun(a);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "new-operator", "ostream"], "answers": [{"tags": [], "owner": {"reputation": 5654, "user_id": 2735434, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78c287cbf5caae399b4f1ad45d9178b6?s=128&d=identicon&r=PG&f=1", "display_name": "dexterous", "link": "https://stackoverflow.com/users/2735434/dexterous"}, "is_accepted": false, "score": 0, "last_activity_date": 1424865083, "creation_date": 1424865083, "answer_id": 28718318, "question_id": 28715052, "link": "https://stackoverflow.com/questions/28715052/how-to-stop-the-overloaded-new-from-getting-invoked-from-ostream-in-c-linu/28718318#28718318", "title": "How to stop the overloaded new() from getting invoked from Ostream in C++ / Linux?", "body": "<p>I guess, I got the answer. I cannot use Ofstream here. I should use C based fopen and fprintf. The fopen and frprintf doesn't use new(). Thus, it will work here.\nHere is my code, which is good now.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>/** Headers needed for the tool **/\r\n\r\n#include &lt;cstdlib&gt;\r\n#include &lt;stdio.h&gt;\r\n#include &lt;fstream&gt;\r\n#include  &lt;execinfo.h&gt;\r\n#include  &lt;cxxabi.h&gt;\r\n#include &lt;malloc.h&gt;\r\n#include &lt;string.h&gt;\r\n\r\n/** timer check **/\r\n#include &lt;signal.h&gt;\r\n#include &lt;sys/time.h&gt;\r\n#include &lt;time.h&gt;\r\n/** timer checks ends here **/\r\n\r\n/*************NEED EXTRA MONITORING ************************/\r\n#define TIME_STAMPING (1)\r\n#define MEMORY_LEAK_MONITORING (1)\r\n/***********************************************************/\r\n\r\n/*** USE CASE HEADERS ***/\r\n#include \"memOperation.h\"\r\n#include  \"DumpMemory.h\"\r\n/*** USE CASE HEADERS ENDS ***/\r\n\r\n\r\n/** Buffer for adding Pattern - Signature **/\r\n#define BUFFER (4)\r\n\r\n/*** Array Assume-- map of pointers and size  *********/\r\nstruct pointerBlkSizeInfo\r\n{\r\n\tunsigned long int m_PointerAddress;\r\n\tunsigned long int m_blkSize;\r\n\tint reportedFaulty;\r\n};\r\n\r\n\r\n/*** String for File Name path ***/\r\nconst char *FileName = \"/export/home/joshis1/DBG_REC.log\";\r\n\r\n/*** DUMP Corrupted Memory details **/\r\nconst char *FileCorruptDetails = \"/export/home/joshis1/DBG_CORRUPT.log\";\r\n\r\n\r\n/** Log files to record **/\r\nFILE  *dumpfile;\r\nFILE *corruptMemFile;\r\n\r\n/**** Maintain array of pointerBlkSizeInfo **/\r\n#define MONITOR_MEM_SIZE  (1024)\r\n/**** Map created **************************/\r\npointerBlkSizeInfo ptrSizeMap[MONITOR_MEM_SIZE];\r\n\r\n/*** Prototype *********/\r\nstatic void startMonitorMem();\r\n/*****************Prototype ends here **/\r\n\r\n\r\n/**********Prints the caller needs rdynamic***********************/\r\nstatic void printCaller( unsigned long int memPointerRec )\r\n{\r\n\tvoid *array[ 50 ];\r\n\tint size = backtrace( array, 50 );\r\n\tchar **messages = backtrace_symbols( array, size );\r\n\r\n\t/* skip first and second stack frame (points here) */\r\n\tfor ( int frame = 0; frame &lt; size  &amp;&amp; messages != NULL; ++frame )\r\n\t{\r\n\t\tchar *mangled_name = 0, *offset_begin = 0, *offset_end = 0;\r\n\r\n\t\t/* find parantheses and +address offset surrounding mangled name */\r\n\t\tfor ( char *msg = messages[frame]; *msg; ++msg )\r\n\t\t{\r\n\t\t\tif ( *msg == '(' )\r\n\t\t\t{\r\n\t\t\t\tmangled_name = msg;\r\n\t\t\t}\r\n\t\t\telse if ( *msg == '+' )\r\n\t\t\t{\r\n\t\t\t\toffset_begin = msg;\r\n\t\t\t}\r\n\t\t\telse if ( *msg == ')' )\r\n\t\t\t{\r\n\t\t\t\toffset_end = msg;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* if the line could be processed, attempt to demangle the symbol */\r\n\t\tif ( mangled_name &amp;&amp; offset_begin &amp;&amp; offset_end &amp;&amp;\r\n\t\t\t\tmangled_name &lt; offset_begin )\r\n\t\t{\r\n\t\t\t*mangled_name++ = '\\0';\r\n\t\t\t*offset_begin++ = '\\0';\r\n\t\t\t*offset_end++ = '\\0';\r\n\r\n\t\t\tint status;\r\n\t\t\tchar * real_name = abi::__cxa_demangle(mangled_name, 0, 0, &amp;status);\r\n\r\n\t\t\t/* if demangling is successful, output the demangled function name */\r\n\t\t\tif ( status == 0 )\r\n\t\t\t{\r\n\t\t\t\tfprintf(dumpfile,\"demangled name %s\\r\\n\",real_name);\r\n\t\t\t\tfflush(dumpfile);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tfprintf(dumpfile,\"mangled name %s\\r\\n\",real_name);\r\n\t\t\t\tfflush(dumpfile);\r\n\t\t\t}\r\n\t\t\tfree( real_name );\r\n\t\t}\r\n\t}\r\n\tfree( messages );\r\n\r\n\tstruct mallinfo freeblockAvailable;\r\n\r\n\tfreeblockAvailable = mallinfo();\r\n\r\n\tfprintf(dumpfile,\"Avail free bytes = %lu\\r\\n\",freeblockAvailable.fordblks);\r\n\tfflush(dumpfile);\r\n}\r\n\r\n/** Overloaded new Operator **/\r\nvoid* operator new(std::size_t sz)\r\n{\r\n\tunsigned int index = 0;\r\n\r\n#ifdef TIME_STAMPING\r\n\tstruct timeval ts;\r\n\r\n#endif\r\n\r\n\tchar buff[4] = \"ACE\";\r\n\r\n#ifdef TIME_STAMPING\r\n\tgettimeofday (&amp;ts, NULL);\r\n#endif\r\n\r\n\tvoid *mem = std::malloc(sz + BUFFER );\r\n\tstd::cout&lt;&lt;\"Strcpy Started\"&lt;&lt;std::endl;\r\n\tstrncpy((char *)((unsigned long int )mem + sz),buff,4);\r\n\tstd::cout&lt;&lt;\"Strcpy done\"&lt;&lt;std::endl;\r\n\r\n\r\n\tunsigned long int memPointerRec = (unsigned long int)mem;\r\n\r\n\tfor(index = 0; index &lt;= MONITOR_MEM_SIZE; index++ )\r\n\t{\r\n\t\tif( ptrSizeMap[index].m_PointerAddress == 0 )\r\n\t\t{\r\n\t\t\tptrSizeMap[index].m_PointerAddress =  ( unsigned long int)mem;\r\n\t\t\tptrSizeMap[index].m_blkSize = sz;\r\n#ifdef TIME_STAMPING\r\n\t\t\tfprintf(dumpfile,\"Ptr alloc = %lu , Time = %d.%ds , PID = %5d \\r\\n\",ptrSizeMap[index].m_PointerAddress,(int)(ts.tv_sec)%10000, (int)ts.tv_usec/1000,getpid());\r\n#else\r\n\t\t\tfprintf(dumpfile,\"Ptr alloc = %lu \\r\\n\",ptrSizeMap[index].m_PointerAddress);\r\n#endif\r\n\t\t\tfflush(dumpfile);\r\n\t\t\tprintCaller(ptrSizeMap[index].m_PointerAddress);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tif(index  &gt; MONITOR_MEM_SIZE )\r\n\t{\r\n\t\tstd::cout&lt;&lt;\"MemoryTool..MapSize Increase\"&lt;&lt;std::endl;\r\n\t}\r\n\r\n\treturn mem;\r\n}\r\n\r\n/** Overloaded free Operator **/\r\nvoid operator delete(void* ptr)\r\n{\r\n\tstd::free(ptr);\r\n\r\n\tfor(unsigned int index = 0; index &lt;= MONITOR_MEM_SIZE; index++ )\r\n\t{\r\n\t\tif( ptrSizeMap[index].m_PointerAddress == (unsigned long int)ptr )\r\n\t\t{\r\n\t\t\tptrSizeMap[index].m_PointerAddress =  0;\r\n\t\t\tptrSizeMap[index].m_blkSize = 0;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n/**************Memory Monitor Routine--Every 10 seconds executes *******************************/\r\nvoid monitorMem (int temp)\r\n{\r\n\tstruct itimerval tout_val;\r\n\r\n#ifdef TIME_STAMPING\r\n\tstruct timeval ts;\r\n\tgettimeofday (&amp;ts, NULL);\r\n#endif\r\n\r\n\tstd::cout&lt;&lt;\"Monitoring Memory!!!\"&lt;&lt;std::endl;\r\n\ttout_val.it_interval.tv_sec = 0;\r\n\ttout_val.it_interval.tv_usec = 0;\r\n\ttout_val.it_value.tv_sec = 10; /* 10 seconds timer */\r\n\ttout_val.it_value.tv_usec = 0;\r\n\r\n\t/**** check if the memory buffer overflow occurred or not **/\r\n\r\n\tfor(unsigned int index = 0; index &lt;= MONITOR_MEM_SIZE; index++ )\r\n\t{\r\n\t\tif (ptrSizeMap[index].m_PointerAddress != 0 )\r\n\t\t{\r\n\t\t\tconst char *temp = (char *) (ptrSizeMap[index].m_PointerAddress + ptrSizeMap[index].m_blkSize);\r\n\r\n\t\t\tif(strncmp(temp,\"ACE\",3) == 0 )\r\n\t\t\t{\r\n\t\t\t\t/** Matched **/\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t/** Un -Matched ***/\r\n\t\t\t\tif(ptrSizeMap[index].reportedFaulty == 0 )\r\n\t\t\t\t{\r\n\t\t\t\t\t/** reported not **/\r\n\t\t\t\t\tptrSizeMap[index].reportedFaulty = 1;\r\n#ifdef TIME_STAMPING\r\n\t\t\t\t\tfprintf(corruptMemFile,\"Pointer corrupted =  = %lu and size = %lu , Time = %d.%ds , PID = %5d \\r\\n\",ptrSizeMap[index].m_PointerAddress,ptrSizeMap[index].m_blkSize,(int)(ts.tv_sec)%10000, (int)ts.tv_usec/1000,getpid());\r\n#else\r\n\t\t\t\t\tfprintf(corruptMemFile,\"Pointer corrupted =  = %lu and size = %lu \\r\\n\",ptrSizeMap[index].m_PointerAddress,ptrSizeMap[index].m_blkSize );\r\n#endif\r\n\t\t\t\t\tfflush(corruptMemFile);\r\n\t\t\t\t\tstd::cout&lt;&lt;\"Shreyas..the memory is corrupted\"&lt;&lt;std::endl;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/** Monitor Mem Status for Memory Leaks -- can disable this **/\r\n#if defined (MEMORY_LEAK_MONITORING) &amp;&amp; defined (TIME_STAMPING)\r\n\r\n\tstruct mallinfo freeblockAvailable;\r\n\tfreeblockAvailable = mallinfo();\r\n\tfprintf(corruptMemFile,\"Avail free bytes = %lu, Time = %d.%ds , PID = %5d\\r\\n\",freeblockAvailable.fordblks,(int)(ts.tv_sec)%10000, (int)ts.tv_usec/1000,getpid());\r\n\tfflush(corruptMemFile);\r\n\r\n#elif MEMORY_LEAK_MONITORING\r\n\t    struct mallinfo freeblockAvailable;\r\n\t\tfreeblockAvailable = mallinfo();\r\n\t\tfprintf(corruptMemFile,\"Avail free bytes = %lu\\r\\n\",freeblockAvailable.fordblks);\r\n\t\tfflush(corruptMemFile);\r\n#endif\r\n\r\n\r\n\r\n\tsignal(SIGALRM,monitorMem);\r\n\tsetitimer(ITIMER_REAL, &amp;tout_val,0);\r\n\r\n}\r\n\r\n/*** Start Monitoring the Mem -- Timer Initialization ***/\r\nstatic void startMonitorMem()\r\n{\r\n\t/** initialize the memory lookup map to zero **/\r\n\tmemset(&amp;ptrSizeMap,0,sizeof(pointerBlkSizeInfo)*MONITOR_MEM_SIZE);\r\n\r\n\tdumpfile = fopen(FileName,\"w\");\r\n\tcorruptMemFile = fopen(FileCorruptDetails,\"w\");\r\n\r\n\t/** initialize the memory lookup map to zero **/\r\n\tmemset(&amp;ptrSizeMap,0,sizeof(pointerBlkSizeInfo)*MONITOR_MEM_SIZE);\r\n\r\n\tstruct itimerval tout_val;\r\n\ttout_val.it_interval.tv_sec = 0;\r\n\ttout_val.it_interval.tv_usec = 0;\r\n\ttout_val.it_value.tv_sec = 10; /* 10 seconds timer */\r\n\ttout_val.it_value.tv_usec = 0;\r\n\tsetitimer(ITIMER_REAL, &amp;tout_val,0);\r\n\tsignal(SIGALRM,monitorMem); /* set the Alarm signal capture */\r\n}\r\n\r\n\r\n\r\n/********************Main routine ************************/\r\nint main(int argc, char *argv[])\r\n{\r\n\r\n\t/** Install the memory monitoring now **/\r\n\tstartMonitorMem();\r\n\r\n\t/** USE CASE STARTS HERE **/\r\n\r\n\tMemPlay *pCorruptMem = new MemPlay();\r\n\tpCorruptMem-&gt;MyMemPlay();\r\n\r\n\tDumpMemory *pSafeMem = new DumpMemory();\r\n\tpSafeMem-&gt;MyDumpMemory();\r\n\r\n\t/** delete the memory now **/\r\n\t//pCorruptMem-&gt;clearMem();\r\n\r\n\t/*** USE CASE ENDS HERE **/\r\n\r\n\twhile(1)\r\n\t{\r\n\r\n\t}\r\n\r\n\r\n\treturn 0;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 5654, "user_id": 2735434, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78c287cbf5caae399b4f1ad45d9178b6?s=128&d=identicon&r=PG&f=1", "display_name": "dexterous", "link": "https://stackoverflow.com/users/2735434/dexterous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424865083, "creation_date": 1424855480, "question_id": 28715052, "link": "https://stackoverflow.com/questions/28715052/how-to-stop-the-overloaded-new-from-getting-invoked-from-ostream-in-c-linu", "title": "How to stop the overloaded new() from getting invoked from Ostream in C++ / Linux?", "body": "<p>How can I fix the crash here? How to avoid new() operator while logging in a file?</p>\n\n<p>I am writing a memory troubleshoot debugger. This will write on to a file every 10 seconds about - \" The free blocks available and will check the signature of the memory blocks for buffer overflow run.\" Here is my design - </p>\n\n<p><img src=\"https://i.stack.imgur.com/gUPMO.png.\" alt=\"enter image description here\"></p>\n\n<p>Here is the code that tries do the monitoring.I see a crash after sometime. Also, the Ostream is calling - new and the redundant data is captured in the file. I won't mind to use C type of calls also.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>/** Headers needed for the tool **/\r\n\r\n#include &lt;cstdlib&gt;\r\n#include &lt;stdio.h&gt;\r\n#include &lt;fstream&gt;\r\n#include  &lt;execinfo.h&gt;\r\n#include  &lt;cxxabi.h&gt;\r\n#include &lt;malloc.h&gt;\r\n#include &lt;string.h&gt;\r\n\r\n/** timer check **/\r\n#include &lt;signal.h&gt;\r\n#include &lt;sys/time.h&gt;\r\n/** timer checks ends here **/\r\n\r\n\r\n/*** USE CASE HEADERS ***/\r\n#include \"memOperation.h\"\r\n#include  \"DumpMemory.h\"\r\n/*** USE CASE HEADERS ENDS ***/\r\n\r\n\r\n/** Buffer for adding Pattern - Signature **/\r\n#define BUFFER (4)\r\n\r\n/*** Array Assume-- map of pointers and size  *********/\r\nstruct pointerBlkSizeInfo\r\n{\r\n\tunsigned long int m_PointerAddress;\r\n\tunsigned long int m_blkSize;\r\n};\r\n\r\n\r\n/*** String for File Name path ***/\r\nconst char *FileName = \"/export/home/joshis1/DBG_REC.log\";\r\n\r\n/*** DUMP Corrupted Memory details **/\r\nconst char *FileCorruptDetails = \"/export/home/joshis1/DBG_CORRUPT.log\";\r\n\r\n/**** Maintain array of pointerBlkSizeInfo **/\r\n#define MONITOR_MEM_SIZE  (1024)\r\n/**** Map created **************************/\r\npointerBlkSizeInfo ptrSizeMap[MONITOR_MEM_SIZE];\r\n\r\n/*** Prototype *********/\r\nstatic void startMonitorMem();\r\n/*****************Prototype ends here **/\r\n\r\n\r\n/**********Prints the caller needs rdynamic***********************/\r\nstatic void printCaller( void )\r\n{\r\n\tvoid *array[ 50 ];\r\n\tint size = backtrace( array, 50 );\r\n\tchar **messages = backtrace_symbols( array, size );\r\n\r\n\tstd::ofstream dumpfile;\r\n\tdumpfile.open(FileName);\r\n\r\n\t/* skip first and second stack frame (points here) */\r\n\tfor ( int frame = 0; frame &lt; size  &amp;&amp; messages != NULL; ++frame )\r\n\t{\r\n\t\tchar *mangled_name = 0, *offset_begin = 0, *offset_end = 0;\r\n\r\n\t\t/* find parantheses and +address offset surrounding mangled name */\r\n\t\tfor ( char *msg = messages[frame]; *msg; ++msg )\r\n\t\t{\r\n\t\t\tif ( *msg == '(' )\r\n\t\t\t{\r\n\t\t\t\tmangled_name = msg;\r\n\t\t\t}\r\n\t\t\telse if ( *msg == '+' )\r\n\t\t\t{\r\n\t\t\t\toffset_begin = msg;\r\n\t\t\t}\r\n\t\t\telse if ( *msg == ')' )\r\n\t\t\t{\r\n\t\t\t\toffset_end = msg;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* if the line could be processed, attempt to demangle the symbol */\r\n\t\tif ( mangled_name &amp;&amp; offset_begin &amp;&amp; offset_end &amp;&amp;\r\n\t\t\t\tmangled_name &lt; offset_begin )\r\n\t\t{\r\n\t\t\t*mangled_name++ = '\\0';\r\n\t\t\t*offset_begin++ = '\\0';\r\n\t\t\t*offset_end++ = '\\0';\r\n\r\n\t\t\tint status;\r\n\t\t\tchar * real_name = abi::__cxa_demangle(mangled_name, 0, 0, &amp;status);\r\n\r\n\t\t\t/* if demangling is successful, output the demangled function name */\r\n\t\t\tif ( status == 0 )\r\n\t\t\t{\r\n\t\t\t\tdumpfile&lt;&lt; \"demangled name\"&lt;&lt;real_name&lt;&lt;std::endl;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdumpfile&lt;&lt;\"mangled name\"&lt;&lt; real_name &lt;&lt;std::endl;\r\n\t\t\t}\r\n\t\t\tfree( real_name );\r\n\t\t}\r\n\t}\r\n\tfree( messages );\r\n\r\n\tstruct mallinfo freeblockAvailable;\r\n\r\n\tfreeblockAvailable = mallinfo();\r\n\r\n\tdumpfile&lt;&lt;\"Available free space in bytes = \"&lt;&lt;freeblockAvailable.fordblks;\r\n\r\n\tdumpfile.close();\r\n}\r\n\r\n/** Overloaded new Operator **/\r\nvoid* operator new(std::size_t sz)\r\n{\r\n\tunsigned int index = 0;\r\n\r\n\tchar buff[4] = \"ACE\";\r\n\r\n\tvoid *mem = std::malloc(sz + BUFFER );\r\n\tstd::cout&lt;&lt;\"Strcpy Started\"&lt;&lt;std::endl;\r\n\tstrncpy((char *)((unsigned long int )mem + sz),buff,4);\r\n\tstd::cout&lt;&lt;\"Strcpy done\"&lt;&lt;std::endl;\r\n\tprintCaller();\r\n\r\n\tfor(index = 0; index &lt;= MONITOR_MEM_SIZE; index++ )\r\n\t{\r\n\t\tif( ptrSizeMap[index].m_PointerAddress == 0 )\r\n\t\t{\r\n\t\t\tptrSizeMap[index].m_PointerAddress =  ( unsigned long int)mem;\r\n\t\t\tptrSizeMap[index].m_blkSize = sz;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tif(index  &gt; MONITOR_MEM_SIZE )\r\n\t{\r\n\t\tstd::cout&lt;&lt;\"MemoryTool..MapSize Increase\"&lt;&lt;std::endl;\r\n\t}\r\n\r\n\treturn mem;\r\n}\r\n\r\n/** Overloaded free Operator **/\r\nvoid operator delete(void* ptr)\r\n{\r\n\tstd::free(ptr);\r\n\r\n\tfor(unsigned int index = 0; index &lt;= MONITOR_MEM_SIZE; index++ )\r\n\t{\r\n\t\tif( ptrSizeMap[index].m_PointerAddress == (unsigned long int)ptr )\r\n\t\t{\r\n\t\t\tptrSizeMap[index].m_PointerAddress =  0;\r\n\t\t\tptrSizeMap[index].m_blkSize = 0;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n/**************Memory Monitor Routine--Every 10 seconds executes *******************************/\r\nvoid monitorMem (int temp)\r\n{\r\n\tstruct itimerval tout_val;\r\n\r\n\tstd::ofstream corruptMemFile;\r\n\tcorruptMemFile.open(FileName);\r\n\r\n\tstd::cout&lt;&lt;\"Monitoring Memory!!!\"&lt;&lt;std::endl;\r\n\ttout_val.it_interval.tv_sec = 0;\r\n\ttout_val.it_interval.tv_usec = 0;\r\n\ttout_val.it_value.tv_sec = 10; /* 10 seconds timer */\r\n\ttout_val.it_value.tv_usec = 0;\r\n\r\n\t/**** check if the memory buffer overflow occurred or not **/\r\n\r\n\tfor(unsigned int index = 0; index &lt;= MONITOR_MEM_SIZE; index++ )\r\n\t{\r\n\t\tif (ptrSizeMap[index].m_PointerAddress != 0 )\r\n\t\t{\r\n\t\t\tconst char *temp = (char *) (ptrSizeMap[index].m_PointerAddress + ptrSizeMap[index].m_blkSize);\r\n\r\n\t\t\tif(strncmp(temp,\"ACE\",3) == 0 )\r\n\t\t\t{\r\n\t\t\t\t/** Matched **/\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t/** Un -Matched ***/\r\n\t\t\t\tstd::cout&lt;&lt;\"Shreyas..the memory is corrupted\";\r\n\t\t\t\tcorruptMemFile&lt;&lt;\"Pointer corrupted = \"&lt;&lt;ptrSizeMap[index].m_PointerAddress&lt;&lt;\" Size = \"&lt;&lt;ptrSizeMap[index].m_blkSize;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcorruptMemFile.close();\r\n\tsignal(SIGALRM,monitorMem);\r\n\tsetitimer(ITIMER_REAL, &amp;tout_val,0);\r\n\r\n}\r\n\r\n/*** Start Monitoring the Mem -- Timer Initialization ***/\r\nstatic void startMonitorMem()\r\n{\r\n\t/** initialize the memory lookup map to zero **/\r\n\tmemset(&amp;ptrSizeMap,0,sizeof(pointerBlkSizeInfo)*MONITOR_MEM_SIZE);\r\n\r\n\tstruct itimerval tout_val;\r\n\ttout_val.it_interval.tv_sec = 0;\r\n\ttout_val.it_interval.tv_usec = 0;\r\n\ttout_val.it_value.tv_sec = 10; /* 10 seconds timer */\r\n\ttout_val.it_value.tv_usec = 0;\r\n\tsetitimer(ITIMER_REAL, &amp;tout_val,0);\r\n\tsignal(SIGALRM,monitorMem); /* set the Alarm signal capture */\r\n}\r\n\r\n\r\n\r\n/********************Main routine ************************/\r\nint main(int argc, char *argv[])\r\n{\r\n\r\n\t/** Install the memory monitoring now **/\r\n\tstartMonitorMem();\r\n\r\n\t/** USE CASE STARTS HERE **/\r\n\r\n\tMemPlay *pCorruptMem = new MemPlay();\r\n\tpCorruptMem-&gt;MyMemPlay();\r\n\r\n\tDumpMemory *pSafeMem = new DumpMemory();\r\n\tpSafeMem-&gt;MyDumpMemory();\r\n\r\n\t/*** USE CASE ENDS HERE **/\r\n\r\n\twhile(1)\r\n\t{\r\n\r\n\t}\r\n\r\n\r\n\treturn 0;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here is the output - </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> &lt;&lt;&lt; a lot of strCpy calls &gt;&gt;&gt;\r\nStrcpy done\r\nStrcpy Started\r\nStrcpy done\r\nStrcpy Started\r\nStrcpy done\r\nStrcpy Started\r\nStrcpy done\r\nStrcpy Started\r\nStrcpy done\r\nStrcpy Started\r\nStrcpy done\r\nStrcpy Started\r\nStrcpy done\r\nStrcpy Started\r\nStrcpy done\r\n*** glibc detected *** ./prog.out: malloc(): memory corruption: 0x0999a050 ***\r\n======= Backtrace: =========\r\n/lib/libc.so.6[0x4bfc99f2]\r\n/lib/libc.so.6[0x4bfcbad2]\r\n/lib/libc.so.6(__libc_malloc+0x65)[0x4bfcde75]\r\n./prog.out(_Znwj+0x22)[0x8049130]\r\n./prog.out(main+0x36)[0x80494e0]\r\n/lib/libc.so.6(__libc_start_main+0xf3)[0x4bf6a6b3]\r\n./prog.out[0x8048da1]\r\n======= Memory map: ========\r\n08048000-0804a000 r-xp 00000000 fd:00 31854551   /export/home/joshis1/Eclipse_WorkSpace1/memory_tool_hook/src/prog.out\r\n0804a000-0804b000 rw-p 00001000 fd:00 31854551   /export/home/joshis1/Eclipse_WorkSpace1/memory_tool_hook/src/prog.out\r\n0804b000-0804d000 rw-p 00000000 00:00 0 \r\n0999a000-099bf000 rw-p 00000000 00:00 0          [heap]\r\n4bf28000-4bf49000 r-xp 00000000 fd:00 41030167   /lib/ld-2.14.90.so\r\n4bf49000-4bf4a000 r--p 00020000 fd:00 41030167   /lib/ld-2.14.90.so\r\n4bf4a000-4bf4b000 rw-p 00021000 fd:00 41030167   /lib/ld-2.14.90.so\r\n4bf51000-4c0fb000 r-xp 00000000 fd:00 41030168   /lib/libc-2.14.90.so\r\n4c0fb000-4c0fc000 ---p 001aa000 fd:00 41030168   /lib/libc-2.14.90.so\r\n4c0fc000-4c0fe000 r--p 001aa000 fd:00 41030168   /lib/libc-2.14.90.so\r\n4c0fe000-4c0ff000 rw-p 001ac000 fd:00 41030168   /lib/libc-2.14.90.so\r\n4c0ff000-4c102000 rw-p 00000000 00:00 0 \r\n4c104000-4c12d000 r-xp 00000000 fd:00 41030181   /lib/libm-2.14.90.so\r\n4c12d000-4c12e000 r--p 00028000 fd:00 41030181   /lib/libm-2.14.90.so\r\n4c12e000-4c12f000 rw-p 00029000 fd:00 41030181   /lib/libm-2.14.90.so\r\n4c161000-4c17d000 r-xp 00000000 fd:00 41030182   /lib/libgcc_s-4.6.3-20120306.so.1\r\n4c17d000-4c17e000 rw-p 0001b000 fd:00 41030182   /lib/libgcc_s-4.6.3-20120306.so.1\r\n4c4d1000-4c5b3000 r-xp 00000000 fd:00 48761002   /usr/lib/libstdc++.so.6.0.16\r\n4c5b3000-4c5b7000 r--p 000e1000 fd:00 48761002   /usr/lib/libstdc++.so.6.0.16\r\n4c5b7000-4c5b9000 rw-p 000e5000 fd:00 48761002   /usr/lib/libstdc++.so.6.0.16\r\n4c5b9000-4c5bf000 rw-p 00000000 00:00 0 \r\nb76fa000-b76fd000 rw-p 00000000 00:00 0 \r\nb7728000-b772b000 rw-p 00000000 00:00 0 \r\nb772b000-b772c000 r-xp 00000000 00:00 0          [vdso]\r\nbf9e9000-bfacd000 rw-p 00000000 00:00 0          [stack]\r\nAborted (core dumped)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c", "linux", "ubuntu", "linux-kernel", "linux-device-driver"], "comments": [{"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 0, "creation_date": 1424854970, "post_id": 28714806, "comment_id": 45717426, "body": "Make sure you use the module code from the same kernel version of your host ubuntu PC."}, {"owner": {"reputation": 2748, "user_id": 2879338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1Inh.jpg?s=128&g=1", "display_name": "Milind Dumbare", "link": "https://stackoverflow.com/users/2879338/milind-dumbare"}, "edited": false, "score": 0, "creation_date": 1424858140, "post_id": 28714806, "comment_id": 45719426, "body": "Why not download the kernel sources. Copy your /boot/config-xxxx to kernel sources as .config. enable ixgbe inside that kernel..do <code>make menuconfig</code>, do <code>make install</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424866161, "post_id": 28714806, "comment_id": 45724184, "body": "&quot;<i>Drivers installing are suitable for my version</i>&quot; obviously they are not."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1424904895, "post_id": 28714806, "comment_id": 45748680, "body": "Your <code>Makefile</code> and sources added <code>kcompat.h</code> which either detected wrong version, or mistakenly used. Try to understand (mostly by reading <code>Makefile</code>) what is the cause you have that header in use. Another clue is to prepare you directory for modules compilation by running something like <code>make -C \u2026 M=\u2026 modules_prepare</code>."}], "owner": {"reputation": 113, "user_id": 3743854, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a3a7cd07661d67df22ae01fe43fd8cc3?s=128&d=identicon&r=PG&f=1", "display_name": "nandan", "link": "https://stackoverflow.com/users/3743854/nandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424859545, "creation_date": 1424854552, "last_edit_date": 1424859545, "question_id": 28714806, "link": "https://stackoverflow.com/questions/28714806/unable-to-compile-intel-82599-driver-on-ubuntu-14-04", "title": "Unable to compile INTEL 82599 driver on Ubuntu 14.04", "body": "<p>I am trying to compile the drivers on my machine and I am getting the following errors:\nubuntu version:14.04;\nkernel version:3.13.0-46-generic\nDrivers installing are suitable for my version.\nDrivers Link:<a href=\"https://downloadcenter.intel.com/Detail_Desc.aspx?DwnldID=18700&amp;lang=eng&amp;ProdId=3189\" rel=\"nofollow\">https://downloadcenter.intel.com/Detail_Desc.aspx?DwnldID=18700&amp;lang=eng&amp;ProdId=3189</a></p>\n\n<pre><code>~/ixgbe-3.21.2/src$ make install\nmake -C /lib/modules/3.13.0-46-generic/build SUBDIRS=/home/nandan/ixgbe-3.21.2/src modules\nmake[1]: Entering directory `/usr/src/linux-headers-3.13.0-46-generic'\n  CC [M]  /home/nandan/ixgbe-3.21.2/src/ixgbe_main.o\nIn file included from /home/nandan/ixgbe-3.21.2/src/ixgbe_osdep.h:37:0,\n                 from /home/nandan/ixgbe-3.21.2/src/ixgbe_type.h:65,\n                 from /home/nandan/ixgbe-3.21.2/src/ixgbe_dcb.h:28,\n                 from /home/nandan/ixgbe-3.21.2/src/ixgbe.h:47,\n                 from /home/nandan/ixgbe-3.21.2/src/ixgbe_main.c:50:\n/home/nandan/ixgbe-3.21.2/src/kcompat.h:4055:6: error: nested redefinition of \u2018enum pkt_hash_types\u2019\n enum pkt_hash_types {\n      ^\n/home/nandan/ixgbe-3.21.2/src/kcompat.h:4055:6: error: redeclaration of \u2018enum pkt_hash_types\u2019\nIn file included from include/linux/if_ether.h:23:0,\n                 from include/uapi/linux/ethtool.h:17,\n                 from include/linux/ethtool.h:16,\n                 from include/linux/netdevice.h:42,\n                 from /home/nandan/ixgbe-3.21.2/src/ixgbe_main.c:30:\ninclude/linux/skbuff.h:728:6: note: originally defined here\n enum pkt_hash_types {\n      ^\nIn file included from /home/nandan/ixgbe-3.21.2/src/ixgbe_osdep.h:37:0,\n                 from /home/nandan/ixgbe-3.21.2/src/ixgbe_type.h:65,\n                 from /home/nandan/ixgbe-3.21.2/src/ixgbe_dcb.h:28,\n                 from /home/nandan/ixgbe-3.21.2/src/ixgbe.h:47,\n                 from /home/nandan/ixgbe-3.21.2/src/ixgbe_main.c:50:\n/home/nandan/ixgbe-3.21.2/src/kcompat.h:4056:2: error: redeclaration of enumerator \u2018PKT_HASH_TYPE_NONE\u2019\n  PKT_HASH_TYPE_NONE,\n  ^\nIn file included from include/linux/if_ether.h:23:0,\n                 from include/uapi/linux/ethtool.h:17,\n                 from include/linux/ethtool.h:16,\n                 from include/linux/netdevice.h:42,\n</code></pre>\n\n<p>Help me to fix this problem.</p>\n"}, {"tags": ["c", "math", "floating-point", "precision", "ieee-754"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1424851156, "post_id": 28713865, "comment_id": 45715581, "body": "You need to read <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">floating-point-gui.de</a>"}, {"owner": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1424851194, "post_id": 28713865, "comment_id": 45715608, "body": "@BasileStarynkevitch - reading now, thanks."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1424851361, "post_id": 28713865, "comment_id": 45715686, "body": "Probably a division by zero."}, {"owner": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1424851460, "post_id": 28713865, "comment_id": 45715725, "body": "@Marian - but wouldn&#39;t that cause the function to fail while at runtime, when f(a) - f(b) is effectively zero, and not output anything at all?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1424851649, "post_id": 28713865, "comment_id": 45715806, "body": "@jaska, Division by zero is Undefined which means that <b>anything</b> can happen. It needn&#39;t be a crash or a runtime error."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1424851960, "post_id": 28713865, "comment_id": 45715943, "body": "@CoolGuy Division by zero is defined in IEEE 754, so as long as the OP&#39;s platform uses IEEE 754 for floating-point, the results of either <code>1.0&#47;0.0</code> and <code>0.0&#47;0.0</code> is perfectly defined, not a crash, and not a runtime error."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1424855398, "post_id": 28713865, "comment_id": 45717653, "body": "f(a)-f(b) is probably too small. Not zero, but to0 small for the division to yield a significant value with floating point representation. Replace double with long double. You might gain some precision."}], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "edited": false, "score": 0, "creation_date": 1424851773, "post_id": 28713999, "comment_id": 45715852, "body": "thanks for the suggestion. I took a screenshot of the output - <a href=\"http://i.imgur.com/ZjlX1oa.png\" rel=\"nofollow noreferrer\">i.imgur.com/ZjlX1oa.png</a> - it seems like division by 0 occurs ? But, it seems it happens earlier on than the last iteration.."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "edited": false, "score": 0, "creation_date": 1424851963, "post_id": 28713999, "comment_id": 45715944, "body": "@jaska, see the update, you may need more significant digits."}, {"owner": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "edited": false, "score": 0, "creation_date": 1424852526, "post_id": 28713999, "comment_id": 45716190, "body": "the check for f(a) == f(b) helps it not give me any wacky answers - but it still quits after the same number of iterations as before. is there no way to get more iterations out of it?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "edited": false, "score": 0, "creation_date": 1424852780, "post_id": 28713999, "comment_id": 45716311, "body": "@jaska, no, you have gotten as close as you can within the precision of <code>double</code>. The value you have has an error of about one part per quadrillion (5 in 10^16)."}, {"owner": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "edited": false, "score": 0, "creation_date": 1424852891, "post_id": 28713999, "comment_id": 45716372, "body": "Is there any way to gain more precision past doubles? As far as I understood, they handle the highest precision. (BTW - thanks as well - i&#39;ll go ahead and accept your answer)"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "edited": false, "score": 1, "creation_date": 1424915244, "post_id": 28713999, "comment_id": 45751876, "body": "@jaska, you can go for <code>long double</code> which may give you some expanded precision. Beyond that, you can use arbitrary precision libs such as GMP or MPIR. I&#39;ve added some code to show how impressive it can get."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 5, "last_activity_date": 1424915157, "last_edit_date": 1424915157, "creation_date": 1424851379, "answer_id": 28713999, "question_id": 28713865, "link": "https://stackoverflow.com/questions/28713865/ieee-floating-point-exception-why/28713999#28713999", "title": "IEEE floating point exception - why?", "body": "<p><code>-1.#IND</code> is Microsoft's way of outputting an indeterminate value, specifically <code>NaN</code>.</p>\n\n<p><em>One</em> of the ways this can happen is with <code>0 / 0</code> but I would check <em>all</em> operations to see where the issue lies:</p>\n\n<pre><code>double secant_method(double(*f)(double), double a, double b){\n    double c;\n    printf(\"DBG =====\\n\");\n    for (int i = 0; i &lt; 10; i++){\n        printf(\"\\nDBG -----\\n\");\n        printf(\"DBG i: %d\\n\",i);\n        printf(\"DBG a: %30f\\n\",a);\n        printf(\"DBG b: %30f\\n\",b);\n        printf(\"DBG c: %30f\\n\",c);\n        printf(\"DBG f(a): %30f\\n\",f(a));\n        printf(\"DBG a-b: %30f\\n\",a-b);\n        printf(\"DBG f(b): %30f\\n\",f(b));\n        printf(\"DBG f(a)-f(b): %30f\\n\",f(a)-f(b));\n        printf(\"DBG f(a)*(a-b): %30f\\n\",f(a)*(a-b));\n        printf(\"DBG f(a)*(a-b)/(f(a)-f(b)): %30f\\n\",f(a)*(a-b)/(f(a)-f(b)));\n\n        c = a - f(a) * (a - b) / (f(a) - f(b));\n        b = a; a = c;\n    }\n    return c;\n}\n</code></pre>\n\n<p>Once you have that debug output, <em>then</em> you can figure out what the actual issue is, and adopt strategies to avoid it.</p>\n\n<hr>\n\n<p>When I do that, I see (at the end):</p>\n\n<pre><code>DBG -----\nDBG i: 8\nDBG a: 1.556773264394211375716281509085\nDBG b: 1.556773264393484179635152031551\nDBG c: 1.556773264394211375716281509085\nDBG f(a): -0.000000000000000987057657830803\nDBG a-b: 0.000000000000727196081129477534\nDBG f(b): -0.000000000008196943991622962500\nDBG f(a)-f(b): 0.000000000008195956933965131697\nDBG f(a)*(a-b): -0.000000000000000000000000000718\nDBG f(a)*(a-b)/(f(a)-f(b)): -0.000000000000000087577871187781\n\nDBG -----\nDBG i: 9\nDBG a: 1.556773264394211375716281509085\nDBG b: 1.556773264394211375716281509085\nDBG c: 1.556773264394211375716281509085\nDBG f(a): -0.000000000000000987057657830803\nDBG a-b: 0.000000000000000000000000000000\nDBG f(b): -0.000000000000000987057657830803\nDBG f(a)-f(b): 0.000000000000000000000000000000\nDBG f(a)*(a-b): -0.000000000000000000000000000000\nDBG f(a)*(a-b)/(f(a)-f(b)): nan\n\nRoot found:     nan\n</code></pre>\n\n<p>So you can see, on the tenth iteration, <code>a</code> and <code>b</code> have become equal and hence so have <code>f(a)</code> and <code>f(b)</code>. So you're getting the expression:</p>\n\n<pre><code>something * 0 / 0\n</code></pre>\n\n<p>which, as mentioned, will give you <code>0 / 0</code> or <code>NaN</code>.</p>\n\n<hr>\n\n<p>In terms of how to <em>fix</em> it, you just need to avoid dividing by zero since that will give you eithere <code>NaN</code> or an infinity. So you could use the following function instead:</p>\n\n<pre><code>double secant_method(double(*f)(double), double a, double b){\n    double c;\n    for (int i = 0; i &lt; 1000; i++) {\n        if (f(a) == f(b)) break;\n        c = a - f(a) * (a - b) / (f(a) - f(b));\n        b = a; a = c;\n    }\n    return c;\n}\n</code></pre>\n\n<p>A thousand loops should be more than enough to get a decent answer and it will opt out early if you're ever about to divide by zero.</p>\n\n<hr>\n\n<p>If you want <em>more</em> precision, you could either look into the <code>long double</code> type or switch to using one of the arbitrary precision arithmetic libraries such as GMP or MPIR.</p>\n\n<p>That's usually more work but you can achieve some impressive results. This program, built on MPIR:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;mpir.h&gt;\n\nvoid secant_method(mpf_t result, void(*f)(mpf_t, mpf_t), mpf_t a, mpf_t b){\n    mpf_t c, fa, fb, temp1, temp2;\n\n    mpf_init (fa);\n    mpf_init (fb);\n    mpf_init (temp1);\n    mpf_init (temp2);\n\n    for (int i = 0; i &lt; 1000; i++){\n        printf(\"DBG i: %d\\n\",i);\n\n        f (fa, a);\n        f (fb, b);\n        if (mpf_cmp (fa, fb) == 0) break;\n\n        mpf_set (temp1, a);\n        mpf_sub (temp1, temp1, b);\n\n        mpf_set (temp2, fa);\n        mpf_sub (temp2, temp2, fb);\n\n        mpf_set (result, fa);\n        mpf_mul (result, result, temp1);\n        mpf_div (result, result, temp2);\n        mpf_sub (result, result, a);\n        mpf_neg (result, result);\n\n        mpf_set (b, a);\n        mpf_set (a, result);\n    }\n}\n\nvoid test (mpf_t result, mpf_t x){\n    mpf_t temp;\n\n    mpf_set (result, x);\n    mpf_pow_ui (result, result, 3);\n\n    mpf_init_set (temp, x);\n    mpf_mul_ui (temp, temp, 4);\n\n    mpf_add (result, result, temp);\n\n    mpf_set_ui (temp, 10);\n    mpf_sub (result, result, temp);\n\n    mpf_clear (temp);\n}\n\nint main(){\n    mpf_t ans, a, b;\n\n    mpf_set_default_prec (8000);\n\n    mpf_init_set_ui (ans, 0);\n    mpf_init_set_ui (a, 0);\n    mpf_init_set_ui (b, 2);\n\n    secant_method (ans, &amp;test, a, b);\n\n    mpf_out_str (stdout, 10, 0, ans);\n\n    return 0;\n}\n</code></pre>\n\n<p>outputs much more precision, about two and a half <em>thousand</em> digits:</p>\n\n<pre><code>DBG i: 1\n:\nDBG i: 19\n0.155677326439421146326886324730853302634853266143\n22856485101283627988036767055520913212330822780959\n93349183787687346999781239000417393618333668026011\n02048595843228945228507966189601958673920851932189\n20626590635658264390975889008832048255537650792123\n54916373054888140164770654992918100928227714960414\n65208113116379497717707745267800989233875981344305\n90022883167106124203999713536673991376957068731244\n91919087980169395013246250812213656324598765244218\n15974098310512802880727074335472786858740154287363\n31949470951650710072488856623955478366217474755111\n76368234254761541647442609230138418167182918204711\n66713459423756284737546964906061587903876515793884\n14091165347411853670752820576131460960421137744435\n73729141652832258144582021037373967987171478026002\n48487515446248979731517957120705447608265161099693\n33098235693813752370774508652788986557620510981156\n19907950657355934071535840759135251701581523712307\n00051674680667972152582339710574822560693109306285\n91240827697915787078746087225027856691436076089912\n35551789799825731841345891629028445554314717823386\n07885164744100235567602875364878328805811271289098\n87558119684442289199181352023304600847178256323082\n57317198584882656089836229208443415369358460418542\n84083408696290686178971039756668669303212658278679\n39542421457300944206839268283788585029652481323614\n65995074020560963212330914882733926627309382310653\n39023265929195094492468196461296569155421718696631\n73798097369621805062145075113127308161572398104766\n37356504104570136778437926442139603916930640425421\n15655156674699552536588332891562053247342008145504\n44336211031437923307615880759201695011419324719812\n46482293928341901673056596202744639074280785106031\n90197472588293352508389295101867514582271001202777\n85575614897203080940643669476500979934666490279524\n88486176409290187337498631681392563044899541391612\n88438904336237873504970887963071622208868799638373\n42186338496601471274609131141920820263780493617795\n89714798662834913192777810386631915415021934333441\n01797098172897161215116673422762953435902633516501\n73788202968876596925999628999004575114529754782488\n59959395407324243559011982543407738505315960009874\n36510513519775603567237051670918870105777288994910\n85524037720122749091827520695838000086150188462000\n63190624219373460624686216781527327604063990319908\n56547016812115842640285111265677758613385414834511\n69237199199725030839166586376374587900611430229333\n87296847315023767826706323911923435564643861604120\n017381909481e1\n</code></pre>\n\n<p>And, if you take that number and pass it back into the <code>test()</code> function, you get a number rather close to zero, about <code>-1.15 x 10<sup>-2408</sup></code>. So I would say that's a pretty big improvement on using <code>double</code>.</p>\n\n<p>And, for what it's worth, it only takes about a tenth of a second CPU time so it's at least feasible to do this with arbitrary precision arithmetic.</p>\n\n<hr>\n\n<p>For even <em>more</em> precision, just change the default precision settings for MPIR, currently set as:</p>\n\n<pre><code>mpf_set_default_prec (8000);\n</code></pre>\n\n<p>Bumping that up to 100,000 gives an answer with over 30,000 significant digits, and a final \"close-to-zero\" answer of about <code>-5 x 10<sup>-30103</sup></code>.</p>\n"}, {"tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": false, "score": 0, "last_activity_date": 1424851848, "creation_date": 1424851848, "answer_id": 28714110, "question_id": 28713865, "link": "https://stackoverflow.com/questions/28713865/ieee-floating-point-exception-why/28714110#28714110", "title": "IEEE floating point exception - why?", "body": "<p>The <code>#IND</code> is caused by a division of zero by zero. Insert a simple <code>isnan(c)</code> check into the loop while debugging, and you'll discover that <code>a</code> and <code>b</code> eventually become equal, which leads to both <code>a - b</code> and <code>f(a) - f(b)</code> being zero.</p>\n"}, {"comments": [{"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1424851958, "post_id": 28714119, "comment_id": 45715941, "body": "<code>x</code> is a <code>double</code> so the integer literals don&#39;t matter."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 1, "creation_date": 1424852491, "post_id": 28714119, "comment_id": 45716172, "body": "<code>int * double</code> will <i>always</i> be a <code>double</code>, and passing an <code>int</code> to a function requesting a <code>double</code> will promote it."}, {"owner": {"reputation": 116, "user_id": 878398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BMdvu.jpg?s=128&g=1", "display_name": "Stigmha", "link": "https://stackoverflow.com/users/878398/stigmha"}, "edited": false, "score": 0, "creation_date": 1424852678, "post_id": 28714119, "comment_id": 45716252, "body": "So what explains the different output?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1424853002, "post_id": 28714119, "comment_id": 45716427, "body": "No idea, but I&#39;ll guarantee that if you pump <code>x=3E-315</code> into the equation <code>x^3 + 4x - 10</code>, you&#39;ll get a hell of a lot closer to <code>-10</code> than <code>0</code> :-) The correct answer, as limited by the precision of a double, is indeed what OP got, a smidgeon over one and a half."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1424853469, "post_id": 28714119, "comment_id": 45716629, "body": "For the record, I get the exact same output with and without the dots (as expect due to promotion), so <code>double</code>-check (pun intended) that you didn&#39;t change something else inadvertently between the runs."}, {"owner": {"reputation": 116, "user_id": 878398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BMdvu.jpg?s=128&g=1", "display_name": "Stigmha", "link": "https://stackoverflow.com/users/878398/stigmha"}, "edited": false, "score": 0, "creation_date": 1424853825, "post_id": 28714119, "comment_id": 45716827, "body": "Right, I guess this is compiler specific - in my case the Windows cl compiler. Probably not an issue in GCC. The only change I made is the dots, nothing else, I just reproduced it to be sure. The reason why I mentioned it in the first place was because I&#39;ve experienced issues with double calculations previously, which was caused by this behavior."}], "tags": [], "owner": {"reputation": 116, "user_id": 878398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BMdvu.jpg?s=128&g=1", "display_name": "Stigmha", "link": "https://stackoverflow.com/users/878398/stigmha"}, "is_accepted": false, "score": 0, "last_activity_date": 1424851887, "creation_date": 1424851887, "answer_id": 28714119, "question_id": 28713865, "link": "https://stackoverflow.com/questions/28713865/ieee-floating-point-exception-why/28714119#28714119", "title": "IEEE floating point exception - why?", "body": "<p>I believe casting is an issue. All your constant numbers are not interpreted by the compiler as <em>double</em>, but rather regular integers. Add a \".\" (or \".0\") at the end of each constant to make them double. test() should hence be changed to:</p>\n\n<pre><code>return (x*x*x) + (4.*x) - 10.;\n</code></pre>\n\n<p>And you must change to the following in main:</p>\n\n<pre><code>ans = secant_method(f, 0., 2.);\n</code></pre>\n\n<p>I tested this on Windows with DECIMAL_DIG defined as 9. I got #INF without the dots, and 5e-315 with the dots using 11 iterations.</p>\n\n<pre><code>printf(\"\\nRoot found:\\t%.*g\\n\", DECIMAL_DIG * 2., ans);\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 2005732, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7b58a013e1a1a5d6d824502d3f251448?s=128&d=identicon&r=PG", "display_name": "galois", "link": "https://stackoverflow.com/users/2005732/galois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 28713999, "answer_count": 3, "score": 3, "last_activity_date": 1424915157, "creation_date": 1424850859, "last_edit_date": 1495540721, "question_id": 28713865, "link": "https://stackoverflow.com/questions/28713865/ieee-floating-point-exception-why", "title": "IEEE floating point exception - why?", "body": "<p>I'm making a simple function to reproduce the <a href=\"http://en.wikipedia.org/wiki/Secant_method\" rel=\"nofollow noreferrer\">Secant method</a>, and I'm having some issues with precision, I think.</p>\n\n<p>First, here's the function (as well as a main method to call it, and a test function to use with it):</p>\n\n<pre><code>double secant_method(double(*f)(double), double a, double b){\n    double c;\n    for (int i = 0; i &lt; 10; i++){\n        c = a - f(a) * (a - b) / (f(a) - f(b));\n        b = a; a = c;\n    }\n    return c;\n}\n\ntypedef double (*func)(double);\n\n//test function - x^3 + 4x - 10\ndouble test(double x){\n    return (x*x*x) + (4*x) - 10;\n}\n\nint main(){\n    func f = &amp;test;\n    double ans;\n\n    ans = secant_method(f, 0, 2);\n\n    printf(\"\\nRoot found:\\t%.*g\\n\", DECIMAL_DIG * 2, ans);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Note</strong>: the <code>for</code> loop in the function <code>secant_method()</code> only loops 10 times. This is where my issue comes in.</p>\n\n<p>When this prints as-is, everything is ok. It gives the correct output to 16 decimal places: <img src=\"https://i.stack.imgur.com/qiAJg.png\" alt=\"enter image description here\"></p>\n\n<p>However, when I add iterations to the <code>for</code> loop in <code>secant_method()</code>, this happens: <img src=\"https://i.stack.imgur.com/2T1Lz.png\" alt=\"enter image description here\"></p>\n\n<p>Why does this happen? Have I reached the maximum representation that C can handle?</p>\n\n<hr>\n\n<p>I read through <a href=\"https://stackoverflow.com/a/347940/4352509\">this great answer</a> from another post, but in it, concerning the exception I'm receiving (<code>-1.#IND</code>), it just says that my result isn't a number, or I'm doing some kind of illegal operation.</p>\n\n<p><strong>EDIT:</strong> using <code>(x*x*x) + (4*x) - 10 + sin(x)</code> as my test function gives the correct answer - but only if I loop when <code>i &lt; 9</code>, instead of <code>i &lt; 10</code> for <code>(x*x*x) + (4*x) - 10</code></p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1424850467, "post_id": 28713434, "comment_id": 45715286, "body": "Don&#39;t you get a compiler arror at <code>allEven((number &#47; 10), &amp;result);</code> second parameter?"}, {"owner": {"reputation": 256, "user_id": 1758596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1a7223f42d1a77ce3871a6cf5efe4fa7?s=128&d=identicon&r=PG", "display_name": "user1758596", "link": "https://stackoverflow.com/users/1758596/user1758596"}, "edited": false, "score": 0, "creation_date": 1426577743, "post_id": 28713434, "comment_id": 46418564, "body": "Looks like question 6 of your programming assignment"}], "answers": [{"tags": [], "owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "is_accepted": false, "score": 0, "last_activity_date": 1424849321, "creation_date": 1424849321, "answer_id": 28713464, "question_id": 28713434, "link": "https://stackoverflow.com/questions/28713434/recursive-function-to-check-if-all-digits-in-an-int-variable-are-even/28713464#28713464", "title": "Recursive function to check if all digits in an int variable are even", "body": "<p>Replace </p>\n\n<p><code>int *result;</code></p>\n\n<p>With</p>\n\n<p><code>int result;</code></p>\n"}, {"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 5, "last_activity_date": 1424850703, "last_edit_date": 1424850703, "creation_date": 1424849459, "answer_id": 28713502, "question_id": 28713434, "link": "https://stackoverflow.com/questions/28713434/recursive-function-to-check-if-all-digits-in-an-int-variable-are-even/28713502#28713502", "title": "Recursive function to check if all digits in an int variable are even", "body": "<p><code>allEven((number / 10), &amp;result);</code> should be replaced with</p>\n\n<pre><code>allEven((number / 10), result);\n</code></pre>\n\n<p>Because <code>allEven</code> expects second argument of type <code>int *</code> and <code>&amp;result</code> is <code>int **</code></p>\n\n<p>Also <code>int *result</code> should be <code>int result = 1</code></p>\n\n<p><a href=\"http://ideone.com/dTJDx8\" rel=\"nofollow\">Working example here</a></p>\n\n<p>If you compile with proper warning flags <code>-W -Wall</code> for example on gcc (better with <code>-O2</code>), you should get proper warnings to correct your code.</p>\n"}, {"comments": [{"owner": {"reputation": 2394, "user_id": 771355, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2dd23ffd587c0070ec6eca022c5e174f?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/771355/gavin"}, "edited": false, "score": 0, "creation_date": 1424850083, "post_id": 28713513, "comment_id": 45715101, "body": "I don&#39;t quit get it for the 2nd parameter of allEven. Isn&#39;t it asking for an address with (int *result)? So why are we just passing &quot;result&quot;, which is a value and not an address when we call allEven?"}, {"owner": {"reputation": 687, "user_id": 3383665, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/i6Zob.jpg?s=128&g=1", "display_name": "ars", "link": "https://stackoverflow.com/users/3383665/ars"}, "reply_to_user": {"reputation": 2394, "user_id": 771355, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2dd23ffd587c0070ec6eca022c5e174f?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/771355/gavin"}, "edited": false, "score": 1, "creation_date": 1424850296, "post_id": 28713513, "comment_id": 45715198, "body": "when you pass it from main(), you provide it with address of result (via &amp;result). But when you pass it from recursive allEven() call, you have it there already a pointer, so we must use it without &quot;&amp;&quot;"}, {"owner": {"reputation": 687, "user_id": 3383665, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/i6Zob.jpg?s=128&g=1", "display_name": "ars", "link": "https://stackoverflow.com/users/3383665/ars"}, "edited": false, "score": 0, "creation_date": 1424850921, "post_id": 28713513, "comment_id": 45715492, "body": "probably, there are still some errors in logics of the code. Yeah, i think it&#39;s useful advice"}], "tags": [], "owner": {"reputation": 687, "user_id": 3383665, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/i6Zob.jpg?s=128&g=1", "display_name": "ars", "link": "https://stackoverflow.com/users/3383665/ars"}, "is_accepted": true, "score": 3, "last_activity_date": 1424850556, "last_edit_date": 1424850556, "creation_date": 1424849491, "answer_id": 28713513, "question_id": 28713434, "link": "https://stackoverflow.com/questions/28713434/recursive-function-to-check-if-all-digits-in-an-int-variable-are-even/28713513#28713513", "title": "Recursive function to check if all digits in an int variable are even", "body": "<p>You should write it down this way to compile the code:</p>\n\n<pre><code>void allEven(int number, int *result)\n{\n    if ((number % 10) % 2) // if the last digit is odd\n    {\n        *result = 0;\n    }\n    else\n    {\n        *result = 1;\n        if ((number / 10) != 0) //not the last digit to evaluate, we call the function again.\n        {\n            allEven((number / 10), result);\n        }\n    }\n}\nint main()\n{\n    int num;\n    int result;\n    printf(\"Enter a number: \");\n    scanf(\"%d\", &amp;num);\n    allEven(num, &amp;result);\n    printf(\"allEven(): %d\", result);\n\n}\n</code></pre>\n\n<p>1) \"int* result\" replace with \"int result\"</p>\n\n<p>2) \"allEven((number/10), &amp;result)\" call in main() replace with allEven((number/10), result)</p>\n\n<p>3) you missed a brace in allEven function</p>\n"}], "owner": {"reputation": 2394, "user_id": 771355, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2dd23ffd587c0070ec6eca022c5e174f?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/771355/gavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3874, "favorite_count": 0, "accepted_answer_id": 28713513, "answer_count": 3, "score": 5, "last_activity_date": 1424850703, "creation_date": 1424849183, "last_edit_date": 1424850293, "question_id": 28713434, "link": "https://stackoverflow.com/questions/28713434/recursive-function-to-check-if-all-digits-in-an-int-variable-are-even", "title": "Recursive function to check if all digits in an int variable are even", "body": "<p>I am trying to write a recursive function to check whether a user input a number which contains all even digits. </p>\n\n<p>What is wrong with my logic? When I tried with \"556\" result is 1.</p>\n\n<pre><code>int main()\n{\n    int num;\n    int *result;\n    printf(\"Enter a number: \");\n    scanf(\"%d\", &amp;num);\n    allEven(num, &amp;result);\n    printf(\"allEven(): %d\", result);\n\n}\nvoid allEven(int number, int *result)\n{\n    if ((number % 10) % 2) // if the last digit is odd\n    {\n        *result = 0;\n    }\n    else\n    {\n        *result = 1;\n        if ((number / 10) != 0) //not the last digit to evaluate, we call the function again.\n        {\n            allEven((number / 10), &amp;result);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "openmp"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1424851109, "post_id": 28713406, "comment_id": 45715566, "body": "Yes, it is possible to evaluated the overhead from various OpenMP constructs - see the <a href=\"https://www.epcc.ed.ac.uk/research/computing/performance-characterisation-and-benchmarking/epcc-openmp-micro-benchmark-suite\" rel=\"nofollow noreferrer\">EPCC OpenMP micro-benchmark suite</a>. By the way, it looks like you are performing a sum reduction into <code>nb_motion_bloc</code> and should therefore use <code>reduction(+:nb_motion_bloc)</code> instead having the summation in a critical block. Also, <code>schedule(dynamic,1)</code> is probably very suboptimal in your case."}], "answers": [{"tags": [], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "is_accepted": false, "score": 2, "last_activity_date": 1424851367, "last_edit_date": 1495542027, "creation_date": 1424851367, "answer_id": 28713996, "question_id": 28713406, "link": "https://stackoverflow.com/questions/28713406/is-it-possible-to-evaluate-openmp-overhead-cost/28713996#28713996", "title": "Is it possible to evaluate OpenMP overhead cost?", "body": "<p>Several points that don't address your specific questions.</p>\n\n<p>Try to avoid <code>#pragma omp critical</code>. In this case, you can remove it altogether by adding a <code>reduction(+:nb_motion_bloc )</code> clause to the <code>omp parallel for</code> line and using <code>nb_motion_bloc += 2*img_fg-&gt;data[y][x];</code>.</p>\n\n<p>Depending on how much work each iteration has to do, short loops incur (much) more overhead than they're worth.</p>\n\n<p>Now to the questions. If you don't change any of variables, don't bother classifying them as shared/private/firstprivate. If they are supposed to be used by each thread and discarded, you can use a construct like</p>\n\n<pre><code>#pragma omp parallel\n{\n    int x, y;\n    #pragma omp for\n    for(i = 0; i&lt;h; i++)\n    {\n        ...\n    }    \n}\n</code></pre>\n\n<p>If the workload is balanced, then consider using <code>schedule(static)</code>.</p>\n\n<p>As to the differences between shared/private/firstprivate see <a href=\"https://stackoverflow.com/questions/15304760/how-are-firstprivate-and-lastprivate-different-than-private-clauses-in-openmp\">this</a> and <a href=\"https://stackoverflow.com/questions/7865555/openmp-shared-vs-firstprivate-performancewise\">this</a> questions. From <a href=\"http://en.wikipedia.org/wiki/OpenMP#Data_sharing_attribute_clauses\" rel=\"nofollow noreferrer\">wikipedia</a>:</p>\n\n<blockquote>\n  <ul>\n  <li>shared: the data within a parallel region is shared, which means visible and accessible by all threads simultaneously. By default, all variables in the work sharing region are shared except the loop iteration counter.</li>\n  <li>private: the data within a parallel region is private to each thread, which means each thread will have a local copy and use it as a temporary variable. A private variable is not initialized and the value is not maintained for use outside the parallel region. By default, the loop iteration counters in the OpenMP loop constructs are private.</li>\n  <li>default: allows the programmer to state that the default data scoping within a parallel region will be either shared, or none for C/C++, or shared, firstprivate, private, or none for Fortran. The none option forces the programmer to declare each variable in the parallel region using the data sharing attribute clauses.</li>\n  <li>firstprivate: like private except initialized to original value.</li>\n  <li>lastprivate: like private except original value is updated after construct.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1003, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424851367, "creation_date": 1424849080, "question_id": 28713406, "link": "https://stackoverflow.com/questions/28713406/is-it-possible-to-evaluate-openmp-overhead-cost", "title": "Is it possible to evaluate OpenMP overhead cost?", "body": "<p>I am trying to optimize a code about image processing with OpenMP. I am still learning it and I came to the classic parallel for loop which is slower than my single threaded implementation. </p>\n\n<p>The for loop I tried to parallelize has only 50 iterations and I saw it oculd explain why the OpenMP use in this case could be useless due to overhead operations. </p>\n\n<p>But is it possible to evaluate these costs ? What are the cost differences between shared / private / firstprivate (...) clauses ? </p>\n\n<p>This is the for loop I want to parallelize:</p>\n\n<pre><code>#pragma omp parallel for \\\n      shared(img_in, img_height, img_width, w, update_gauss, MoGInitparameters, nb_motion_bloc) \\\n      firstprivate(img_fg, gaussStruct) \\\n      private(ContrastHisto, j, x, y) \\\n      schedule(dynamic, 1) \\\n      num_threads(max_threads) \n  for(i = 0; i&lt;h; i++){ // h=50\n    for(j = 0; j&lt;w; j++){\n      ComputeContrastHistogram_generic1D_rect(img_in,  H_DESC_STEP*i, W_DESC_STEP*j, ContrastHisto, H_DESC_SIZE, W_DESC_SIZE, 2, img_height, img_width);\n      x = i;\n      y = w - 1 - j;\n      img_fg-&gt;data[y][x] = 1-MatchMoG_GaussianInt(ContrastHisto, gaussStruct-&gt;gauss[i*w+j], update_gauss, MoGInitparameters);;\n      #pragma omp critical\n      {\n        nb_motion_bloc += img_fg-&gt;data[y][x];\n        nb_motion_bloc += img_fg-&gt;data[y][x];\n      }\n    }\n  }\n</code></pre>\n\n<p>Maybe I am doing some mistakes but if that's the case please tell me why !!</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 3177, "user_id": 1221236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/230d4a82674b9e02c0b95e4ecf7468ae?s=128&d=identicon&r=PG", "display_name": "dragosht", "link": "https://stackoverflow.com/users/1221236/dragosht"}, "edited": false, "score": 0, "creation_date": 1424849075, "post_id": 28713386, "comment_id": 45714630, "body": "Related: <a href=\"http://stackoverflow.com/questions/344203/maximum-number-of-threads-per-process-in-linux\" title=\"maximum number of threads per process in linux\">stackoverflow.com/questions/344203/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1424849184, "post_id": 28713386, "comment_id": 45714673, "body": "It depends,. What is your use case? Do you need tight coupling? Shared memory?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1424850345, "post_id": 28713386, "comment_id": 45715226, "body": "If you&#39;re hitting the thread limit, you&#39;re almost always doing something wrong. You need to explain what you&#39;re trying to do."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1424877969, "post_id": 28713386, "comment_id": 45732325, "body": "Each process has it&#39;s own virtual address space, so a context switch between processes requires more CPU overhead to switch the virtual address space than a context switch between threads, which all share the same virtual address space."}, {"owner": {"reputation": 31, "user_id": 4604484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9kSHV.jpg?s=128&g=1", "display_name": "Mohanraj V", "link": "https://stackoverflow.com/users/4604484/mohanraj-v"}, "edited": false, "score": 0, "creation_date": 1424930398, "post_id": 28713386, "comment_id": 45755710, "body": "Thanks. Say if i want to use 1000 tcp connections and need simultaneous read/write in 1000 tcp sockets. For this scenario, i need to use 1000 threads for reading/writing in 1000 sockets simultaneously. Am i right ? or What is the efficient way to achieve good performance without loss/delay in read/write ??"}], "owner": {"reputation": 31, "user_id": 4604484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9kSHV.jpg?s=128&g=1", "display_name": "Mohanraj V", "link": "https://stackoverflow.com/users/4604484/mohanraj-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424848999, "creation_date": 1424848999, "question_id": 28713386, "link": "https://stackoverflow.com/questions/28713386/whether-thread-or-process-in-c-utilizes-more-cpu-which-one-is-better-for-mult", "title": "Whether Thread or Process in C utilizes more CPU ?? Which one is better for multi processing?", "body": "<p>I tried using Multiple threads. I can't go beyond a thread limit. Is there any other way to achieve simultaneous processing.</p>\n"}, {"tags": ["c", "getchar"], "comments": [{"owner": {"reputation": 12923, "user_id": 1530508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fG8z0.png?s=128&g=1", "display_name": "ApproachingDarknessFish", "link": "https://stackoverflow.com/users/1530508/approachingdarknessfish"}, "edited": false, "score": 0, "creation_date": 1424848490, "post_id": 28713228, "comment_id": 45714336, "body": "You&#39;ve explained what your code is supposed to do, but what does it actually do? What problem are you experiencing with your current implementation?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1424848894, "post_id": 28713228, "comment_id": 45714538, "body": "You call <code>getchar()</code> twice in your loop, effectively skipping every other character and possibly missing the new-line character. Your (corrected, non-skipping) code would also parse <code>&quot;12:00ppp&quot;</code> as 48 o&#39;clock."}, {"owner": {"reputation": 85, "user_id": 4604158, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b9fb3e6f9962d3654e7c80f5ce4e45bf?s=128&d=identicon&r=PG&f=1", "display_name": "krazibiosvn", "link": "https://stackoverflow.com/users/4604158/krazibiosvn"}, "edited": false, "score": 0, "creation_date": 1424848934, "post_id": 28713228, "comment_id": 45714558, "body": "Well the problem is that it&#39;s stuck in a loop. When i implement the code, it asks me for the time, and when i input a time and hit enter, it simply jumps to the next line of input."}, {"owner": {"reputation": 85, "user_id": 4604158, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b9fb3e6f9962d3654e7c80f5ce4e45bf?s=128&d=identicon&r=PG&f=1", "display_name": "krazibiosvn", "link": "https://stackoverflow.com/users/4604158/krazibiosvn"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1424849056, "post_id": 28713228, "comment_id": 45714619, "body": "@MOehm Thanks! that was the error &gt;.&gt; I don&#39;t know what i was thinking calling it twice..."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1424848957, "creation_date": 1424848957, "answer_id": 28713373, "question_id": 28713228, "link": "https://stackoverflow.com/questions/28713228/how-to-read-until-newline/28713373#28713373", "title": "How to Read Until Newline", "body": "<p>You have an extra call to <code>getchar()</code> in the <code>while</code> loop that is probably interfering with your logic. Remove it. You just need:</p>\n\n<pre><code>while ((ch = getchar()) != '\\n')\n{\n   if (toupper(ch) == 'P')\n   {\n      hour += 12;\n   }\n}\n</code></pre>\n\n<p>To make it clean, change the type of <code>ch</code> from <code>char</code> to <code>int</code> since the return type of <code>getchar()</code> is <code>int</code> and check <code>ch</code> against EOF also.</p>\n\n<pre><code>int main(void)\n{\n   int hour, min;\n   int ch;\n\n   printf(\"Enter a 12-hour time: \");\n   scanf(\"%d : %d\", &amp;hour, &amp;min);\n\n   while ((ch = getchar()) != '\\n' &amp;&amp; ch != EOF )\n   {\n      if (toupper(ch) == 'P')\n      {\n         hour += 12;\n      }\n   }\n\n   printf(\"24-hour time: %d:%d\", hour, min);\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1177, "user_id": 2261179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/viYo6.gif?s=128&g=1", "display_name": "simurg", "link": "https://stackoverflow.com/users/2261179/simurg"}, "is_accepted": false, "score": 1, "last_activity_date": 1424849033, "creation_date": 1424849033, "answer_id": 28713391, "question_id": 28713228, "link": "https://stackoverflow.com/questions/28713228/how-to-read-until-newline/28713391#28713391", "title": "How to Read Until Newline", "body": "<p><code>getchar()</code> is used to read a <code>char</code> from stdin. Here, you already read user input with <code>scanf()</code>. So your code could be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    int hour, min;\n    char ch;\n\n    printf(\"Enter a 12-hour time: \");\n    char fmt[3];\n    scanf(\"%d : %d %s\", &amp;hour, &amp;min, fmt);\n\n    if (strcmp(fmt, \"pm\") == 0) {\n       hour += 12;\n    }\n    printf(\"24-hour time: %d:%d\", hour, min);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4604158, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b9fb3e6f9962d3654e7c80f5ce4e45bf?s=128&d=identicon&r=PG&f=1", "display_name": "krazibiosvn", "link": "https://stackoverflow.com/users/4604158/krazibiosvn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1221, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1424849033, "creation_date": 1424848387, "last_edit_date": 1424848799, "question_id": 28713228, "link": "https://stackoverflow.com/questions/28713228/how-to-read-until-newline", "title": "How to Read Until Newline", "body": "<p>So I feel like I don't really understand the <code>getchar()</code> function very well... What I thought the code would do is, if there happens to be a space it will just \"eat\" that space with the <code>getchar()</code> function.  And if there happens to not be a \"p\" in the input (as in 1:30 pm), then it will just keep \"eating\" the input until there is only <code>'\\n'</code> left. And at that point it will end the while loop. But anyways, here's the code:</p>\n\n<pre><code>int main(void)\n{\n    int hour, min;\n    char ch;\n\n    printf(\"Enter a 12-hour time: \");\n    scanf(\"%d : %d\", &amp;hour, &amp;min);\n\n    while ((ch = getchar()) != '\\n')\n    {\n        if (toupper(ch) == 'P')\n        {   hour += 12; }\n\n    getchar();\n\n    }\n\n    printf(\"24-hour time: %d:%d\", hour, min);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "character"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1424848409, "post_id": 28713107, "comment_id": 45714290, "body": "<code>if (c &gt;= &#39;A&#39; &amp;&amp; c &gt;= &#39;Z&#39;)</code> Always true for lower-case letters. Never true for uppercase letters except <code>Z</code>. You meant <code>&lt;= &#39;Z&#39;</code>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1424848415, "post_id": 28713107, "comment_id": 45714294, "body": "<code>sum</code> will always be 0."}, {"owner": {"reputation": 69, "user_id": 4604430, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bf795728914fdffc28cb7f9993aabc3?s=128&d=identicon&r=PG&f=1", "display_name": "user311607", "link": "https://stackoverflow.com/users/4604430/user311607"}, "edited": false, "score": 0, "creation_date": 1424848591, "post_id": 28713107, "comment_id": 45714393, "body": "Could you elaborate?"}, {"owner": {"reputation": 69, "user_id": 4604430, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bf795728914fdffc28cb7f9993aabc3?s=128&d=identicon&r=PG&f=1", "display_name": "user311607", "link": "https://stackoverflow.com/users/4604430/user311607"}, "edited": false, "score": 1, "creation_date": 1424848871, "post_id": 28713107, "comment_id": 45714532, "body": "ohhhhhh that is such a dumb mistake"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1424849220, "post_id": 28713107, "comment_id": 45714694, "body": "Just a typo, happens to everyone :)"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4604430, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bf795728914fdffc28cb7f9993aabc3?s=128&d=identicon&r=PG&f=1", "display_name": "user311607", "link": "https://stackoverflow.com/users/4604430/user311607"}, "edited": false, "score": 0, "creation_date": 1424855013, "post_id": 28713671, "comment_id": 45717448, "body": "Ok thank you for the input!I am actually not aloud to do ctype.h functions should have mentioned that."}, {"owner": {"reputation": 69, "user_id": 4604430, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bf795728914fdffc28cb7f9993aabc3?s=128&d=identicon&r=PG&f=1", "display_name": "user311607", "link": "https://stackoverflow.com/users/4604430/user311607"}, "edited": false, "score": 0, "creation_date": 1424855161, "post_id": 28713671, "comment_id": 45717525, "body": "Wow I also never came across in my book being able to use return with a calculation in it. Neato!"}, {"owner": {"reputation": 69, "user_id": 4604430, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bf795728914fdffc28cb7f9993aabc3?s=128&d=identicon&r=PG&f=1", "display_name": "user311607", "link": "https://stackoverflow.com/users/4604430/user311607"}, "edited": false, "score": 0, "creation_date": 1424924030, "post_id": 28713671, "comment_id": 45753930, "body": "Unfortunetly this program does not print example user input: What was entered: a9 wF23\u2019;/4i What gets printed: What the line actually shows: aA9wWFiI"}, {"owner": {"reputation": 69, "user_id": 4604430, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bf795728914fdffc28cb7f9993aabc3?s=128&d=identicon&r=PG&f=1", "display_name": "user311607", "link": "https://stackoverflow.com/users/4604430/user311607"}, "edited": false, "score": 0, "creation_date": 1424924086, "post_id": 28713671, "comment_id": 45753943, "body": "It has to use getch() and not getchar() thanks for the input though"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 69, "user_id": 4604430, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bf795728914fdffc28cb7f9993aabc3?s=128&d=identicon&r=PG&f=1", "display_name": "user311607", "link": "https://stackoverflow.com/users/4604430/user311607"}, "edited": false, "score": 0, "creation_date": 1424936287, "post_id": 28713671, "comment_id": 45757818, "body": "Then replace <code>c = getchar()</code> with <code>c = getch()</code>, where is the problem?"}, {"owner": {"reputation": 69, "user_id": 4604430, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bf795728914fdffc28cb7f9993aabc3?s=128&d=identicon&r=PG&f=1", "display_name": "user311607", "link": "https://stackoverflow.com/users/4604430/user311607"}, "edited": false, "score": 0, "creation_date": 1424972923, "post_id": 28713671, "comment_id": 45780464, "body": "Just my problem solving skills apologies"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 3, "last_activity_date": 1424851371, "last_edit_date": 1424851371, "creation_date": 1424850060, "answer_id": 28713671, "question_id": 28713107, "link": "https://stackoverflow.com/questions/28713107/upper-case-conversion-and-digit-summing/28713671#28713671", "title": "Upper case conversion and digit summing", "body": "<p>Please, use standard functions to illustrate an example (<code>getchar</code> instead of <code>getch</code>).</p>\n\n<p>There are a lot of bugs in your code:</p>\n\n<pre><code>while (c !='\\r') {\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>while (c !='\\n') {\n</code></pre>\n\n<hr>\n\n<pre><code>if (c &gt;= 'A' &amp;&amp; c &gt;= 'Z')\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z')\n</code></pre>\n\n<hr>\n\n<pre><code>digitconversion (sum, c);\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>sum = digitconversion (sum, c);\n</code></pre>\n\n<p>You are using 3 calls to <code>getch</code> (one is enough)</p>\n\n<p>You are including <code>ctype.h</code> but using your own functions, why? Use <code>toupper(c)</code> and <code>isdigit(c)</code>.</p>\n\n<p>This code works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint digitconversion(int c);\nint caseconversion(int c);\n\nint main(void) \n{\n    int c, sum = 0;\n\n    printf(\"Please enter a character or characters \");\n    while ((c = getchar()) != '\\n' &amp;&amp; c != EOF) {\n        if (c &gt;= '0' &amp;&amp; c &lt;= '9')\n            sum += digitconversion(c);\n        if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') \n            putchar(c);\n        if (c &gt;= 'a' &amp;&amp; c &lt;= 'z') {\n            c = caseconversion(c);\n            putchar(c);\n        }\n    }\n    printf(\"\\nThe sum of the digits is %d\\n\", sum);   \n    return 0;\n}\n\nint caseconversion(int c)\n{\n    return c - 32; /* This is not true under EBCDIC encoding, use toupper() */\n}\n\nint digitconversion(int c)\n{\n    return c - '0';\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Please enter a character or characters abc1234ABC\nABCABC\nThe sum of the digits is 10\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4604430, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8bf795728914fdffc28cb7f9993aabc3?s=128&d=identicon&r=PG&f=1", "display_name": "user311607", "link": "https://stackoverflow.com/users/4604430/user311607"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 28713671, "answer_count": 1, "score": 1, "last_activity_date": 1424924185, "creation_date": 1424847926, "last_edit_date": 1424924185, "question_id": 28713107, "link": "https://stackoverflow.com/questions/28713107/upper-case-conversion-and-digit-summing", "title": "Upper case conversion and digit summing", "body": "<p>My programs goal: Only the letters will be printed out nothing else. The program will continue until the return is received at which time the sum of the digits will be printed on the next line. Use getch not getchar...\nIt's suppose to only print the uppercase letter. I'm just gonna fail it because no one would ever use getch() :(</p>\n\n<p>example user input: What was entered: a9 wF23\u2019;/4i<br>\nWhat gets printed: What the line actually shows: aA9wWFiI<br>\nThe sum of the digits is: 18</p>\n\n<p>I'm curious as to why I am getting an echo? It prints out the letter entered 3 times. Now I suppose if both my if's are true it would print twice?...</p>\n\n<p>***Update thanks for the input everyone I will update in the morning. Out of caffine :(</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nint digitconversion (int sum, int c);\nint caseconversion (int c);\n\nint main(int argc, char *argv[]) \n{\n\n    char c;\n    int sum = 0;\n\n    printf(\"Please enter a character or characters \");\n    c = getch();\n\n\n    while (c !='\\r') {\n        c = getch();\n\n        if (c &gt;= '0' &amp;&amp; c &lt;= '9')\n            digitconversion (sum, c);\n\n        if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') \n        putchar(c);\n        if (c &gt;= 'a' &amp;&amp; c &lt;= 'z')\n        {\n            putchar(c);\n            c = caseconversion (c);\n            putchar(c);\n        }\n        c = getch();\n\n    }\n\n    printf(\"The sum of the digits is %d\\n\", sum);       \n    return 0;\n}\n\nint caseconversion (int c)\n{  char u;\n    u = c - (char)32;\n    return u;\n}\n//function converts letter to number\nint digitconversion (int sum, int c)\n{\n\n        sum += (int)(c - '0');\n\n    return sum;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "scanf", "fgets", "gets"], "comments": [{"owner": {"reputation": 8450, "user_id": 2842375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25280992c96f51e2b09f71beb360ef?s=128&d=identicon&r=PG&f=1", "display_name": "shauryachats", "link": "https://stackoverflow.com/users/2842375/shauryachats"}, "edited": false, "score": 0, "creation_date": 1424846349, "post_id": 28712723, "comment_id": 45713401, "body": "Try using <code>getline()</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424846949, "post_id": 28712723, "comment_id": 45713645, "body": "And enable your compiler warnings."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 8450, "user_id": 2842375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25280992c96f51e2b09f71beb360ef?s=128&d=identicon&r=PG&f=1", "display_name": "shauryachats", "link": "https://stackoverflow.com/users/2842375/shauryachats"}, "edited": false, "score": 1, "creation_date": 1424885586, "post_id": 28712723, "comment_id": 45737883, "body": "several of the calls to scanf() are using &#39;%s&#39; format specificier.  and the returned value is not being checked.  The usage of &#39;%s&#39; leaves an open invitation to have buffer overflow/undefined behaviour/seg fault event.  I agrees with @shauryachats, use getline() then remove any trailing &#39;\\n&#39; then verify the length is ok, then ue strncpy() to place the input into the struct.  Be sure to clear the struct field to all &#39;\\0&#39;, perhaps with memset()  first, so trash is not left in the final struct contents"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424902291, "post_id": 28712723, "comment_id": 45747455, "body": "<code>fscanf(ptr,&quot;%d %s %d&#47;%d&#47;...</code> and not checking its return value is a problem.  Recommend reading user and file data via <code>fgets()</code>, then scan/parse it."}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 4246256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234551cbe7cb53c10ee756ce5a78923?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer Berger", "link": "https://stackoverflow.com/users/4246256/rainer-berger"}, "is_accepted": false, "score": 1, "last_activity_date": 1424847039, "creation_date": 1424847039, "answer_id": 28712909, "question_id": 28712723, "link": "https://stackoverflow.com/questions/28712723/how-to-accept-space-in-string-in-c-in-the-given-code/28712909#28712909", "title": "How to accept space in string in C in the given code", "body": "<p>The recommended solution is not to use scanf since scanf is also vulnerable to buffer overflows. In any case, you are not actually doing any formatting with the scanf call. You can use fgets to read the input into a string and specify the maximum number of characters that you allow. Use something like the following:</p>\n\n<pre><code>printf(\"\\nEnter the name: \");\nfgets(add.name, MAX_NAME_SZ, stdin);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1424847649, "creation_date": 1424847649, "answer_id": 28713051, "question_id": 28712723, "link": "https://stackoverflow.com/questions/28712723/how-to-accept-space-in-string-in-c-in-the-given-code/28713051#28713051", "title": "How to accept space in string in C in the given code", "body": "<p>You can use the <code>%[^...]</code> format specifier to read spaces into a string. Here's an example program that hopefully gives you something to work from.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   char const* line = \"This is a string, 10\";\n   char text[50];\n   int number;\n\n   // Read up to 49 characters not including ',' to text.\n   sscanf(line, \"%49[^,], %d\", text, &amp;number);\n\n   printf(\"%s, %d\\n\", text, number);\n   return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\nThis is a string, 10\n</pre>\n"}, {"tags": [], "owner": {"reputation": 384, "user_id": 4013519, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/6DZYs.jpg?s=128&g=1", "display_name": "cfz42", "link": "https://stackoverflow.com/users/4013519/cfz42"}, "is_accepted": false, "score": 0, "last_activity_date": 1424851424, "creation_date": 1424851424, "answer_id": 28714009, "question_id": 28712723, "link": "https://stackoverflow.com/questions/28712723/how-to-accept-space-in-string-in-c-in-the-given-code/28714009#28714009", "title": "How to accept space in string in C in the given code", "body": "<p>I think you should provide an example of a failing situation or at least clean up the code and only give us the buggy part.\nI see a lot of printf use without \\n at the end which I know can be a problem (which may aswell be completely out of the subject here).</p>\n\n<p>Since I've never used scanf I can't tell where your error is but maybe if you reduced your code to the acquisition of the user's input (-> the scanf part) then an attempt to display it (-> the part where your string gets truncated as it meets the first space) we could easily help you fix that problem faster and would be nicer to read.</p>\n"}], "owner": {"reputation": 269, "user_id": 3054114, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000605914847/picture?type=large", "display_name": "Rishabh", "link": "https://stackoverflow.com/users/3054114/rishabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1424895241, "creation_date": 1424846171, "last_edit_date": 1424895241, "question_id": 28712723, "link": "https://stackoverflow.com/questions/28712723/how-to-accept-space-in-string-in-c-in-the-given-code", "title": "How to accept space in string in C in the given code", "body": "<p>Sorry about the previous code, I did not correctly interpreted the situation.\nWhat's happening is the string is being stored with spaces but when i am trying to read it afterwards, The output flickers continuously (its like its reading it over and over again and printing it infinitely on itself.)</p>\n\n<p>The records are stored in a file named <code>record.dat</code></p>\n\n<p>I am inserting image showing file contents stored after I input a new record in the file (Everything gets stored correctly here)</p>\n\n<p>![These are the contents of record.dat right after i insert the new record]--> the image --> <a href=\"http://i.stack.imgur.com/YxGEd.png\" rel=\"nofollow\">http://i.stack.imgur.com/YxGEd.png</a></p>\n\n<p>and now when I try to look the details of this record on my application I get this.</p>\n\n<p>![Output showing the record details but not entirely correct as \" Finch\" is missing] -- >> the image -- >> <a href=\"http://i.stack.imgur.com/zgmGY.png\" rel=\"nofollow\">http://i.stack.imgur.com/zgmGY.png</a></p>\n\n<p>and after this if i close the application and then start it again and try to read the previous data it shows this: </p>\n\n<p>![This output is also flickering like before but now even the data is gone]-->> the image -->> http:// i.stack.imgur.com/ 4q0qb.png</p>\n\n<p>(and just in case you are wondering -- the data is still there in the record.dat file -- all of it which i entered when i prevously created the record.)</p>\n\n<p>I hope the problem is more clear now.....</p>\n\n<pre><code>void see(void)\n{\nFILE *ptr;\nint test=0,rate;\nint choice;\nfloat time;\nfloat intrst;\nchar c;\n\nptr=fopen(\"record.dat\",\"r\");\nprintf(\"Do you want to check by\\n1.Account no\\n2.Name\\nEnter your choice:\");\n\n//Selection Choice with Validation\nint once = 0;\ndo\n{   \n    if(once!=0)\n    {\n        printf(\"\\nThe choice is invalid.\\nEnter 1 for account number and 2 for name\");\n    }\n    once = once+1;\n} while ((scanf(\"%d%c\", &amp;choice, &amp;c)!=2 || c!='\\n') &amp;&amp; clean_stdin());\n\n\nif (choice==1)\n{   \n    //Account Number with Validation\n    once = 0;\n    do\n    {   \n        if(once!=0)\n        {\n            printf(\"\\nThe above account number is invalid.\\nEnter an account number (numeric value only):\");\n        }\n        else\n        {\n            printf(\"\\nEnter an account number:\");\n        }\n\n        once = once+1;\n    } while ((scanf(\"%d%c\", &amp;check.acc_no, &amp;c)!=2 || c!='\\n') &amp;&amp; clean_stdin());\n\n    while (fscanf(ptr,\"%d %s %d/%d/%d %d %s %s %lf %s %f %d/%d/%d\",&amp;add.acc_no,add.name,&amp;add.dob.month,&amp;add.dob.day,&amp;add.dob.year,&amp;add.age,add.address,add.citizenship,&amp;add.phone,add.acc_type,&amp;add.amt,&amp;add.deposit.month,&amp;add.deposit.day,&amp;add.deposit.year)!=EOF)\n    {\n        if(add.acc_no==check.acc_no)\n        {   system(\"cls\");\n            test=1;\n\n            printf(\"\\nAccount NO.:%d\\nName:%s \\nDOB:%d/%d/%d \\nAge:%d \\nAddress:%s \\nCitizenship No:%s \\nPhone number:%.0lf \\nType Of Account:%s \\nAmount deposited:$ %.2f \\nDate Of Deposit:%d/%d/%d\\n\\n\",add.acc_no,add.name,add.dob.month,add.dob.day,add.dob.year,add.age,add.address,add.citizenship,add.phone,\n            add.acc_type,add.amt,add.deposit.month,add.deposit.day,add.deposit.year);\n            if(strcmpi(add.acc_type,\"fixed1\")==0)\n                {\n                    time=1.0;\n                    rate=9;\n                    intrst=interest(time,add.amt,rate);\n                    printf(\"\\n\\nYou will get $%.2f as interest on %d/%d/%d\",intrst,add.deposit.month,add.deposit.day,add.deposit.year+1);\n                }\n            else if(strcmpi(add.acc_type,\"fixed2\")==0)\n                {\n                    time=2.0;\n                    rate=11;\n                    intrst=interest(time,add.amt,rate);\n                    printf(\"\\n\\nYou will get $.%.2f as interest on %d/%d/%d\",intrst,add.deposit.month,add.deposit.day,add.deposit.year+2);\n\n                }\n            else if(strcmpi(add.acc_type,\"fixed3\")==0)\n                {\n                    time=3.0;\n                    rate=13;\n                    intrst=interest(time,add.amt,rate);\n                    printf(\"\\n\\nYou will get $.%.2f as interest on %d/%d/%d\",intrst,add.deposit.month,add.deposit.day,add.deposit.year+3);\n\n                }\n             else if(strcmpi(add.acc_type,\"saving\")==0)\n                {\n                    time=(1.0/12.0);\n                    rate=8;\n                    intrst=interest(time,add.amt,rate);\n                    printf(\"\\n\\nYou will get $.%.2f as interest on %d of every month\",intrst,add.deposit.day);\n\n                 }\n             else if(strcmpi(add.acc_type,\"current\")==0)\n                {\n\n                    printf(\"\\n\\nYou will get no interest\\a\\a\");\n\n                 }\n\n        }\n    }\n}\nelse if (choice==2)\n{   \n    printf(\"Enter the name:\");\n    scanf(\"%s\",&amp;check.name);\n\n    while (fscanf(ptr,\"%d %s %d/%d/%d %d %s %s %lf %s %f %d/%d/%d\",&amp;add.acc_no,add.name,&amp;add.dob.month,&amp;add.dob.day,&amp;add.dob.year,&amp;add.age,add.address,add.citizenship,&amp;add.phone,add.acc_type,&amp;add.amt,&amp;add.deposit.month,&amp;add.deposit.day,&amp;add.deposit.year)!=EOF)\n    {\n        if(strcmpi(add.name,check.name)==0)\n        {   system(\"cls\");\n            test=1;\n            printf(\"\\nAccount No.:%d\\nName:%s \\nDOB:%d/%d/%d \\nAge:%d \\nAddress:%s \\nCitizenship No:%s \\nPhone number:%.0lf \\nType Of Account:%s \\nAmount deposited:$%.2f \\nDate Of Deposit:%d/%d/%d\\n\\n\",add.acc_no,add.name,add.dob.month,add.dob.day,add.dob.year,add.age,add.address,add.citizenship,add.phone,\n            add.acc_type,add.amt,add.deposit.month,add.deposit.day,add.deposit.year);\n            if(strcmpi(add.acc_type,\"fixed1\")==0)\n                {\n                    time=1.0;\n                    rate=9;\n                    intrst=interest(time,add.amt,rate);\n                    printf(\"\\n\\nYou will get $.%.2f as interest on %d/%d/%d\",intrst,add.deposit.month,add.deposit.day,add.deposit.year+1);\n                }\n            else if(strcmpi(add.acc_type,\"fixed2\")==0)\n                {\n                    time=2.0;\n                    rate=11;\n                    intrst=interest(time,add.amt,rate);\n                    printf(\"\\n\\nYou will get $.%.2f as interest on %d/%d/%d\",intrst,add.deposit.month,add.deposit.day,add.deposit.year+2);\n\n                }\n            else if(strcmpi(add.acc_type,\"fixed3\")==0)\n                {\n                    time=3.0;\n                    rate=13;\n                    intrst=interest(time,add.amt,rate);\n                    printf(\"\\n\\nYou will get $.%.2f as interest on %d/%d/%d\",intrst,add.deposit.month,add.deposit.day,add.deposit.year+3);\n\n                }\n             else if(strcmpi(add.acc_type,\"saving\")==0)\n                {\n                    time=(1.0/12.0);\n                    rate=8;\n                    intrst=interest(time,add.amt,rate);\n                    printf(\"\\n\\nYou will get $.%.2f as interest on %d of every month\",intrst,add.deposit.day);\n\n                 }\n             else if(strcmpi(add.acc_type,\"current\")==0)\n                {\n\n                    printf(\"\\n\\nYou will get no interest\\a\\a\");\n\n                 }\n\n        }\n    }\n}\n\n\nfclose(ptr);\n if(test!=1)\n    {   system(\"cls\");\n        printf(\"\\nRecord not found!!\\a\\a\\a\");\n        see_invalid:\n          printf(\"\\nEnter 0 to try again,1 to return to main menu and 2 to exit:\");\n          scanf(\"%d\",&amp;main_exit);\n          system(\"cls\");\n             if (main_exit==1)\n                menu();\n            else if (main_exit==2)\n                close();\n            else if(main_exit==0)\n                see();\n            else\n                {\n                    system(\"cls\");\n                    printf(\"\\nInvalid!\\a\");\n                    goto see_invalid;}\n    }\nelse\n    {printf(\"\\nEnter 1 to go to the main menu and 0 to exit:\");\n    scanf(\"%d\",&amp;main_exit);}\n    if (main_exit==1)\n    {\n        system(\"cls\");\n        menu();\n    }\n\n    else\n       {\n\n         system(\"cls\");\n        close();\n        }\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "macos", "gcc", "compilation", "include"], "answers": [{"tags": [], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": true, "score": 1, "last_activity_date": 1424848778, "creation_date": 1424848778, "answer_id": 28713321, "question_id": 28712714, "link": "https://stackoverflow.com/questions/28712714/compile-failure-when-including-files-with-gcc/28713321#28713321", "title": "Compile failure when including files with GCC", "body": "<p>You should either:</p>\n\n<ol>\n<li>Put a space in front of the tilde:</li>\n</ol>\n\n<blockquote>\n  <p>-I ~/gtk/inst/include/gtk-2.0</p>\n</blockquote>\n\n<ol start=\"2\">\n<li>Use the absolute path:</li>\n</ol>\n\n<blockquote>\n  <p>-I /users/username/gtk/inst/include/gtk-2.0</p>\n</blockquote>\n\n<ol start=\"3\">\n<li>or use <code>$HOME</code>:</li>\n</ol>\n\n<blockquote>\n  <p>-I $HOME/gtk/inst/include/gtk-2.0</p>\n</blockquote>\n\n<p>Shell only does tilde expansion if the <code>~</code> is the first nonquoted character in a word. The way you've got it now, shell has no clue that this is trying to point to the users home directory.</p>\n"}], "owner": {"reputation": 135, "user_id": 2105321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca5ddd597423448523fdb828da5d487e?s=128&d=identicon&r=PG", "display_name": "jbzdarkid", "link": "https://stackoverflow.com/users/2105321/jbzdarkid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 28713321, "answer_count": 1, "score": 0, "last_activity_date": 1424848778, "creation_date": 1424846139, "question_id": 28712714, "link": "https://stackoverflow.com/questions/28712714/compile-failure-when-including-files-with-gcc", "title": "Compile failure when including files with GCC", "body": "<p>I'm trying to compile a program with gcc, but I keep getting an error that it can't find the files I've specified to include.\nMy code (a simplified version of what I'm trying to do which highlights the issue):</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\nint main(int argc, char *argv[]) {\n\n}\n</code></pre>\n\n<p>I'm compiling with gcc, using:</p>\n\n<pre><code>gcc test.c -I~/gtk/inst/include/gtk-2.0\n</code></pre>\n\n<p>which gives me</p>\n\n<pre><code>test.c:1:21: error: gtk/gtk.h: No such file or directory\n</code></pre>\n\n<p>However,</p>\n\n<pre><code>ls ~/gtk/inst/include/gtk-2.0/gtk | grep gtk.h\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>gtk.h\ngtkcheckbutton.h\ngtkcheckmenuitem.h\ngtkshow.h\n</code></pre>\n\n<p>so I'm not sure where I'm messing up.\nMy OS is Mac OSX 10.8.5, and GCC is version 4.2.1.</p>\n"}, {"tags": ["c", "gcc"], "answers": [{"tags": [], "owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "is_accepted": true, "score": 4, "last_activity_date": 1424846332, "creation_date": 1424846332, "answer_id": 28712761, "question_id": 28712689, "link": "https://stackoverflow.com/questions/28712689/gcc-missing-braces-around-initializer-with-static-module-level-variable/28712761#28712761", "title": "GCC missing braces around initializer with static module level variable", "body": "<p>You should use:</p>\n\n<p><code>static foo x ={ {0.0f, 0.0f, 0.0f} };</code></p>\n\n<p>Outer Braces are for indicating initialization of <code>struct foo</code>.</p>\n\n<p>Inner Braces are for indicating initialization of <code>array a</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "is_accepted": false, "score": 2, "last_activity_date": 1424846344, "creation_date": 1424846344, "answer_id": 28712764, "question_id": 28712689, "link": "https://stackoverflow.com/questions/28712689/gcc-missing-braces-around-initializer-with-static-module-level-variable/28712764#28712764", "title": "GCC missing braces around initializer with static module level variable", "body": "<p>Formally, your initialization shall look as following:</p>\n\n<pre><code>static foo x = {{0.0f, 0.0f, 0.0f}};\n</code></pre>\n"}], "owner": {"reputation": 12137, "user_id": 451007, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3d3a48b34dda00ca0a5745a5c285068c?s=128&d=identicon&r=PG", "display_name": "010110110101", "link": "https://stackoverflow.com/users/451007/010110110101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "accepted_answer_id": 28712761, "answer_count": 2, "score": 1, "last_activity_date": 1424846344, "creation_date": 1424846043, "question_id": 28712689, "link": "https://stackoverflow.com/questions/28712689/gcc-missing-braces-around-initializer-with-static-module-level-variable", "title": "GCC missing braces around initializer with static module level variable", "body": "<p>I'm getting the following warnings:</p>\n\n<pre><code>test.c:8:1: warning: missing braces around initializer [-Wmissing-braces]\n static foo x = {0.0f, 0.0f, 0.0f};\n ^\ntest.c:8:1: warning: (near initialization for \u2018x.a\u2019) [-Wmissing-braces]\n</code></pre>\n\n<p>I'm compiling with <code>gcc -Wall test.c</code></p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct\n{\n    float a[3];\n}foo;\n\nstatic foo x = {0.0f, 0.0f, 0.0f};\n\nint main()\n{\n    printf(\"%lf\", x.a[0]);\n\n    return 0;\n}\n</code></pre>\n\n<p>Am I initializing x incorrectly?</p>\n\n<p>When I compile without -Wall, it works.</p>\n"}, {"tags": ["c", "parallel-processing", "solaris"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1424846738, "post_id": 28712662, "comment_id": 45713557, "body": "I haven&#39;t worked with this compiler, but you can try <code>#pragma MP taskloop storeback (var)</code> before for loop"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1424868629, "post_id": 28712662, "comment_id": 45725751, "body": "It&#39;s very unlikely that the if branch has caused the dependency. I guess there are more dependency across loops that prevents next loop to start before current one finishes. Usually it&#39;s pointer aliasing, try adding restrict keywords to your pointers where safe."}], "answers": [{"tags": [], "owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "is_accepted": false, "score": 0, "last_activity_date": 1424847534, "creation_date": 1424847534, "answer_id": 28713030, "question_id": 28712662, "link": "https://stackoverflow.com/questions/28712662/auto-parallelization-unsafe-calls/28713030#28713030", "title": "auto parallelization unsafe calls", "body": "<p>What the compiler sees is a bunch of loop iterations, all of which can potentially assign to V.   If writing to V <em>happens</em> to be atomic, then this will get some random value of i, and one might argue that is OK.  Under the assumption that writing to a variable is not atomic, most compilers see this as a data race ... (then what exactly ends up in V?).   Thus the complaint.</p>\n"}], "owner": {"reputation": 39, "user_id": 4019619, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6f6883b0788309e62d6d509da468b73a?s=128&d=identicon&r=PG&f=1", "display_name": "forseqn", "link": "https://stackoverflow.com/users/4019619/forseqn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424847534, "creation_date": 1424845963, "last_edit_date": 1424846334, "question_id": 28712662, "link": "https://stackoverflow.com/questions/28712662/auto-parallelization-unsafe-calls", "title": "auto parallelization unsafe calls", "body": "<p>I have ran into a problem when I was playing around with the auto parallelization function of the Oracle Solaris Compiler. Let's say I have the following code:</p>\n\n<pre><code>int var = -1;\nint i;\nfor (i = 0; i &lt; 3; i++){\n  bool flag = false;\n  // do operations to set the flag\n  if (flag == true)\n    var = i;\n}\n// do other operations with var\n</code></pre>\n\n<p>when I run this code, the compiler complains that it cannot be parallelized because of unsafe dependences.</p>\n\n<p>Does anyone know what might be wrong here? Is there any way to avoid this but maintain the original functionality of the code?</p>\n\n<p>Any help would be appreciated, thank you!</p>\n"}, {"tags": ["c", "standards", "c-standard-library"], "comments": [{"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "reply_to_user": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 1, "creation_date": 1424847625, "post_id": 28712548, "comment_id": 45713937, "body": "While this is true, that could be said of many other edge cases the standard does not provide guarantees for."}, {"owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "edited": false, "score": 9, "creation_date": 1424860283, "post_id": 28712548, "comment_id": 45720717, "body": "Not being able to imagine something isn&#39;t a good reason to assume that some compiler-writer or library implementer can&#39;t imagine it. If all C programmers had the same imagination it&#39;d be pretty boring."}, {"owner": {"reputation": 820, "user_id": 3697633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f6808f631f319b6fb31a1935a451b7?s=128&d=identicon&r=PG&f=1", "display_name": "&#193;ngel", "link": "https://stackoverflow.com/users/3697633/%c3%81ngel"}, "edited": false, "score": 0, "creation_date": 1424886430, "post_id": 28712548, "comment_id": 45738516, "body": "The 6th character will be almost-certainly the same as before fgets was called, but\u2026 how do you know that the line is only 3 characters long? (hint: what happens if the line is &quot;abc\\0QWERTY\\n&quot;?)"}, {"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "reply_to_user": {"reputation": 820, "user_id": 3697633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f6808f631f319b6fb31a1935a451b7?s=128&d=identicon&r=PG&f=1", "display_name": "&#193;ngel", "link": "https://stackoverflow.com/users/3697633/%c3%81ngel"}, "edited": false, "score": 2, "creation_date": 1424886895, "post_id": 28712548, "comment_id": 45738838, "body": "@&#193;ngel I believe you are missing the point of the question."}, {"owner": {"reputation": 1676, "user_id": 61708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8508ac9e4bd637e6c2fd3523ce1f1f3?s=128&d=identicon&r=PG", "display_name": "Dunk", "link": "https://stackoverflow.com/users/61708/dunk"}, "edited": false, "score": 2, "creation_date": 1424893014, "post_id": 28712548, "comment_id": 45742352, "body": "A better question would be &quot;Why does it matter?&quot;. You shouldn&#39;t be relying on behind the scenes and unspecified behavior. If the behavior is needed then an explicit function that is clearly intended to function that way should be created/used."}, {"owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "edited": false, "score": 5, "creation_date": 1424893186, "post_id": 28712548, "comment_id": 45742459, "body": "Understanding where the dark corners are can be useful to avoid them."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1424895386, "post_id": 28712548, "comment_id": 45743720, "body": "How would <code>scanf</code> know that your buffer was more than 4 characters long?"}, {"owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "edited": false, "score": 1, "creation_date": 1424895836, "post_id": 28712548, "comment_id": 45743959, "body": "In the case above, the %16s tells sscanf that the caller guarantees the buffer can hold at least 16+1 characters."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 1676, "user_id": 61708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8508ac9e4bd637e6c2fd3523ce1f1f3?s=128&d=identicon&r=PG", "display_name": "Dunk", "link": "https://stackoverflow.com/users/61708/dunk"}, "edited": false, "score": 1, "creation_date": 1424936073, "post_id": 28712548, "comment_id": 45757733, "body": "@Dunk: There are very good reasons it matters. Relying on this behavior is perhaps the only way to deal safely with <code>&#39;\\0&#39;</code> bytes in data read by <code>fgets</code>, which you might care to do. Without pre-filling the buffer (with <code>&#39;\\n&#39;</code>s, IIRC) there&#39;s no way to distinguish an embedded <code>&#39;\\0&#39;</code> from the terminator in a final line that doesn&#39;t end in a newline."}, {"owner": {"reputation": 1676, "user_id": 61708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8508ac9e4bd637e6c2fd3523ce1f1f3?s=128&d=identicon&r=PG", "display_name": "Dunk", "link": "https://stackoverflow.com/users/61708/dunk"}, "edited": false, "score": 0, "creation_date": 1425147511, "post_id": 28712548, "comment_id": 45846542, "body": "@R - As I said. I would write a function that works regardless of what the compiler writer or library implementer chose to do. I wouldn&#39;t rely on a specific implementation or obscure behavior that isn&#39;t even reasonable to expect."}, {"owner": {"reputation": 1676, "user_id": 61708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8508ac9e4bd637e6c2fd3523ce1f1f3?s=128&d=identicon&r=PG", "display_name": "Dunk", "link": "https://stackoverflow.com/users/61708/dunk"}, "edited": false, "score": 0, "creation_date": 1425149415, "post_id": 28712548, "comment_id": 45847151, "body": "I&#39;ll also point out that I have made quite a good reputation for myself and probably owe a couple promotions to being assigned to &quot;tiger teams&quot; and fixing problems created by clever people relying on obscure behavior similar to things like this."}, {"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "reply_to_user": {"reputation": 1676, "user_id": 61708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8508ac9e4bd637e6c2fd3523ce1f1f3?s=128&d=identicon&r=PG", "display_name": "Dunk", "link": "https://stackoverflow.com/users/61708/dunk"}, "edited": false, "score": 0, "creation_date": 1425164340, "post_id": 28712548, "comment_id": 45851692, "body": "@Dunk I would like to remind you the question is not asking about implementation specific behaviour, in fact I only chose to accept an answer backed by the <i>standard</i>. Knowing the ins and outs of the standard, and requesting clarification when the standard seems to leave out information is <i>not</i> unreasonable."}, {"owner": {"reputation": 1676, "user_id": 61708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8508ac9e4bd637e6c2fd3523ce1f1f3?s=128&d=identicon&r=PG", "display_name": "Dunk", "link": "https://stackoverflow.com/users/61708/dunk"}, "edited": false, "score": 0, "creation_date": 1425568073, "post_id": 28712548, "comment_id": 46023434, "body": "@Segmented:The accepted answer is wrong even though it relies on the standard. Some compiler writers do modify the buffer in order to perform diagnostics such as detecting memory leaks. Even though the accepted answer took a quote from the standard, the quote leaves room for interpretation. Thus, even if fgets/sscanf don&#39;t change the buffer, you aren&#39;t guaranteed they won&#39;t. Regardless of what I just said and even if every compiler writer interpreted the standard in the exact same way, nobody should be relying on such an obscure nuance if the intent is to write robust and maintainable code."}, {"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "reply_to_user": {"reputation": 1676, "user_id": 61708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8508ac9e4bd637e6c2fd3523ce1f1f3?s=128&d=identicon&r=PG", "display_name": "Dunk", "link": "https://stackoverflow.com/users/61708/dunk"}, "edited": false, "score": 0, "creation_date": 1425584154, "post_id": 28712548, "comment_id": 46033626, "body": "@Dunk provide references. I agree with hvd&#39;s points and think it is grounds to say that such an implementation would be non-conformant."}, {"owner": {"reputation": 1676, "user_id": 61708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8508ac9e4bd637e6c2fd3523ce1f1f3?s=128&d=identicon&r=PG", "display_name": "Dunk", "link": "https://stackoverflow.com/users/61708/dunk"}, "edited": false, "score": 0, "creation_date": 1425654211, "post_id": 28712548, "comment_id": 46062325, "body": "As I said, it doesn&#39;t matter what the standard says because relying on implementation and non-obvious behavior (which this certainly is) is a really bad programming practice. As for my reference, just read 7.21.7.2 regarding fgets. While the spec can be interpreted to imply that fgets just fills in the buffer with the number of read bytes, it doesn&#39;t explicitly prohibit fgets from storing data in the unused parts of the buffer. Thus, OPEN TO INTERPRETATION."}], "answers": [{"comments": [{"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 2, "creation_date": 1424845796, "post_id": 28712610, "comment_id": 45713184, "body": "The memory beyond the terminator does not just vanish. It is there that I am curious what the standard states, not before it."}, {"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 0, "creation_date": 1424847566, "post_id": 28712610, "comment_id": 45713907, "body": "Yes you can read into them at any time, this is why I&#39;m curious what the standard dictates regarding this extra space beyond the terminator."}], "tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": false, "score": 1, "last_activity_date": 1424849622, "last_edit_date": 1424849622, "creation_date": 1424845721, "answer_id": 28712610, "question_id": 28712548, "link": "https://stackoverflow.com/questions/28712548/does-the-c-standard-guarantee-buffers-are-not-touched-past-their-null-terminator/28712610#28712610", "title": "Does the C standard guarantee buffers are not touched past their null terminator?", "body": "<blockquote>\n  <p>Is buffer now required to equal \"123\\0efghijklmnop\"?</p>\n</blockquote>\n\n<p>Here <code>buffer</code> is just consists of <code>123</code> string guaranteed terminating at NUL.</p>\n\n<p>Yes the memory allocated for array <code>buffer</code> will not get de-allocated, however you are making sure/restricting your string <code>buffer</code> can atmost only have <code>16</code> char elements which you can read into it at any point of time. Now depends whether you write just a single char or maximum what <code>buffer</code> can take. </p>\n\n<p>For example: </p>\n\n<pre><code>char buffer[4096] = \"abc\";` \n</code></pre>\n\n<p>actually does something below,</p>\n\n<pre><code>memcpy(buffer, \"abc\", sizeof(\"abc\"));\nmemset(&amp;buffer[sizeof(\"abc\")], 0, sizeof(buffer)-sizeof(\"abc\"));\n</code></pre>\n\n<p>The standard insists that if any part of char array is initialized that is all it consists of at any moment until obeying its memory boundary.</p>\n"}, {"comments": [{"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 1, "creation_date": 1424846740, "post_id": 28712724, "comment_id": 45713558, "body": "I&#39;m not the down voter but you do not seem to grasp the original question, and you do not quote the standard besides."}, {"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "reply_to_user": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 1, "creation_date": 1424847126, "post_id": 28712724, "comment_id": 45713721, "body": "Standard said nothing about saving charactercharacter untouched in the memory allowed to be used by the second parameter of fgets... so my answer &quot;no guarantees&quot;"}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": 0, "last_activity_date": 1424848080, "last_edit_date": 1424848080, "creation_date": 1424846173, "answer_id": 28712724, "question_id": 28712548, "link": "https://stackoverflow.com/questions/28712548/does-the-c-standard-guarantee-buffers-are-not-touched-past-their-null-terminator/28712724#28712724", "title": "Does the C standard guarantee buffers are not touched past their null terminator?", "body": "<p>There are no any guarantees from standard, which is why the functions <code>sscanf</code> and <code>fgets</code> are recommended to be used (with respect to the size of the buffer) as you show in your question (and using of <code>fgets</code> is considered preferable compared with <code>gets</code>). </p>\n\n<p>However, some standard functions use null-terminator in their work, e.g. <code>strlen</code> (but I suppose you ask about string modification)</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>In your example</p>\n\n<pre><code>fgets(buffer, 10, fp);\n</code></pre>\n\n<p>untouching characters after 10-th is guaranteed (content and length of <code>buffer</code> will not be considered by <code>fgets</code>)</p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>Moreover, when using <code>fgets</code> keep in mind that <code>'\\n'</code> will be stored in the buffers. e.g.</p>\n\n<pre><code> \"123\\n\\0fghijklmnop\"\n</code></pre>\n\n<p>instead of expected </p>\n\n<pre><code> \"123\\0efghijklmnop\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 2, "creation_date": 1424847265, "post_id": 28712919, "comment_id": 45713773, "body": "You contradict yourself, if there is no guarantee then it follows that the two answers you provide following that should be &quot;no&quot;."}, {"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "reply_to_user": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 0, "creation_date": 1424847533, "post_id": 28712919, "comment_id": 45713895, "body": "@Segmented : read my answer once again (with edits). Igor S.K. just explained reality (that sometimes is different from standard)"}, {"owner": {"reputation": 939, "user_id": 1556829, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NKY9p.png?s=128&g=1", "display_name": "Igor S.K.", "link": "https://stackoverflow.com/users/1556829/igor-s-k"}, "reply_to_user": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 0, "creation_date": 1424862769, "post_id": 28712919, "comment_id": 45722182, "body": "@Segmented Well,  &quot;in the various cases&quot; of &quot;many string functions&quot; &quot;No&quot; is quite a common answer. Imagine <code>strcpy(dst,src)</code>: <code>src</code> will be left unmodified at all, but writing to <code>dst</code> might cause, say, buffer overrun. Or it might be just partially modified, keeping everything after <code>dst[strlen(src)]</code> intact.  And I also gave my answers for you specific examples."}], "tags": [], "owner": {"reputation": 939, "user_id": 1556829, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NKY9p.png?s=128&g=1", "display_name": "Igor S.K.", "link": "https://stackoverflow.com/users/1556829/igor-s-k"}, "is_accepted": false, "score": 4, "last_activity_date": 1424847073, "creation_date": 1424847073, "answer_id": 28712919, "question_id": 28712548, "link": "https://stackoverflow.com/questions/28712548/does-the-c-standard-guarantee-buffers-are-not-touched-past-their-null-terminator/28712919#28712919", "title": "Does the C standard guarantee buffers are not touched past their null terminator?", "body": "<blockquote>\n  <p>is it guaranteed that the buffer will not be modified beyond the null\n  terminator?</p>\n</blockquote>\n\n<p>No, there's no guarantee. </p>\n\n<blockquote>\n  <p>Is buffer now required to equal \"123\\0efghijklmnop\"?</p>\n</blockquote>\n\n<p>Yes. But that's only because you've used correct parameters to your string related functions. Should you mess up buffer length, input modifiers to <code>sscanf</code> and such, then you program will compile. But it will most likely fail during runtime.</p>\n\n<blockquote>\n  <p>If the read line is only 3 characters long, can one be certain that the 6th character is the same as before fgets was called?</p>\n</blockquote>\n\n<p>Yes. Once <code>fgets()</code> figures you have a 3 character input string it stores the input in the provided buffer, and it doesn't care about the reset of provided space at all.</p>\n"}, {"comments": [{"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 1, "creation_date": 1424848215, "post_id": 28713137, "comment_id": 45714203, "body": "Clever. I like your thinking =)"}, {"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 0, "creation_date": 1424849031, "post_id": 28713137, "comment_id": 45714603, "body": "The more I think about it, wouldn&#39;t your argument break down if you provide size to the buffers, which is sort of what the question was all about... In your example if we provide sizes for the buffers to the format, they <i>must</i> be non-overlapping by the standard, no? And then we can no longer implicitly assume anything..."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 1, "creation_date": 1424849450, "post_id": 28713137, "comment_id": 45714811, "body": "@Segmented: <code>fgets</code> is explicitly documented as leaving the entire contents of the buffer unspecified (that is, from the provided start address for the provided number of bytes) after a read error. If there is no read error, then I believe that the part of the buffer after the inserted 0 byte will not be touched."}, {"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1424849553, "post_id": 28713137, "comment_id": 45714857, "body": "@rici Can you provide a link for that? Particularly the second part."}, {"owner": {"reputation": 3897, "user_id": 3588161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xRo7q.jpg?s=128&g=1", "display_name": "Fizz", "link": "https://stackoverflow.com/users/3588161/fizz"}, "reply_to_user": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 0, "creation_date": 1424859831, "post_id": 28713137, "comment_id": 45720480, "body": "@Segmented: See my answer for that part."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 0, "creation_date": 1424877709, "post_id": 28713137, "comment_id": 45732135, "body": "@Segmented: Sorry, I don&#39;t have a citation for that. Although there are those who will disagree that common sense is applicable to standard reading, I think this is just common sense. It should not be necessary for the standard to explicitly specify all the idiotic and destructive things which the standard library <i>does not do</i>; only the ones it does (or may) do."}, {"owner": {"reputation": 820, "user_id": 3697633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f6808f631f319b6fb31a1935a451b7?s=128&d=identicon&r=PG&f=1", "display_name": "&#193;ngel", "link": "https://stackoverflow.com/users/3697633/%c3%81ngel"}, "edited": false, "score": 0, "creation_date": 1424886057, "post_id": 28713137, "comment_id": 45738247, "body": "sscanf() doesn&#39;t even know the buffer size"}, {"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "reply_to_user": {"reputation": 820, "user_id": 3697633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f6808f631f319b6fb31a1935a451b7?s=128&d=identicon&r=PG&f=1", "display_name": "&#193;ngel", "link": "https://stackoverflow.com/users/3697633/%c3%81ngel"}, "edited": false, "score": 0, "creation_date": 1424887394, "post_id": 28713137, "comment_id": 45739171, "body": "@&#193;ngel This is incorrect, you may provide size modifiers in the format string, as in &quot;%32s&quot;. Perhaps you are confused on the term &quot;buffer&quot; which does not necessarily have to be the <i>input</i> buffer."}, {"owner": {"reputation": 820, "user_id": 3697633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f6808f631f319b6fb31a1935a451b7?s=128&d=identicon&r=PG&f=1", "display_name": "&#193;ngel", "link": "https://stackoverflow.com/users/3697633/%c3%81ngel"}, "reply_to_user": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 0, "creation_date": 1425313492, "post_id": 28713137, "comment_id": 45901030, "body": "@Segmented, I was talking about the size of the buffer, not the number of bytes it is allowed to write from the string."}, {"owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "edited": false, "score": 0, "creation_date": 1425319538, "post_id": 28713137, "comment_id": 45904728, "body": "In c, no function &quot;knows&quot; the buffer size to buffers it is given.  However the caller can tell the function via parameters a minimum buffer size guarantee.  For sscanf, it can be passed via the format string.  The effect is the same as an explicit size parameter."}], "tags": [], "owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "is_accepted": false, "score": 31, "last_activity_date": 1424875257, "last_edit_date": 1424875257, "creation_date": 1424848012, "answer_id": 28713137, "question_id": 28712548, "link": "https://stackoverflow.com/questions/28712548/does-the-c-standard-guarantee-buffers-are-not-touched-past-their-null-terminator/28713137#28713137", "title": "Does the C standard guarantee buffers are not touched past their null terminator?", "body": "<p>The <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\">C99 draft</a> standard does not explicitly state what should happen in those cases, but by considering multiple variations, you can show that it must work a certain way so that it meets the specification in all cases.</p>\n\n<p>The standard says:</p>\n\n<blockquote>\n  <p>%s - Matches a sequence of non-white-space characters.252)</p>\n  \n  <p>If no l length modifier is present, the corresponding argument shall be a\n  pointer to the initial element of a character array large enough to accept the\n  sequence and a terminating null character, which will be added automatically.</p>\n</blockquote>\n\n<p>Here's a pair of examples that show it must work the way you are proposing to meet the standard.</p>\n\n<p>Example A:</p>\n\n<pre><code>char buffer[4] = \"abcd\";\nchar buffer2[10];  // Note the this could be placed at what would be buffer+4\nsscanf(\"123 4\", \"%s %s\", buffer, buffer2);\n// Result is buffer =  \"123\\0\"\n//           buffer2 = \"4\\0\"\n</code></pre>\n\n<p>Example B:</p>\n\n<pre><code>char buffer[17] = \"abcdefghijklmnop\";\nchar* buffer2 = &amp;buffer[4];\nsscanf(\"123 4\", \"%s %s\", buffer, buffer2);\n// Result is buffer = \"123\\04\\0\"\n</code></pre>\n\n<p>Note that the interface of sscanf doesn't provide enough information to really know that these were different.  So, if Example B is to work properly, it must not mess with the bytes after the null character in Example A.  This is because it must work in both cases according to this bit of spec.</p>\n\n<p>So <em>implicitly</em> it must work as you stated due to the spec.</p>\n\n<p>Similar arguments can be placed for other functions, but I think you can see the idea from this example.</p>\n\n<p>NOTE:\nProviding size limits in the format, such as \"%16s\", <em>could</em> change the behavior.  By the specification, it would be functionally acceptable for sscanf to zero out a buffer to its limits before writing the data into the buffer.  In practice, most implementations opt for performance, which means they leave the remainder alone.</p>\n\n<p>When the intent of the specification is to do this sort of zeroing out, it is usually explicitly specified.  strncpy is an example.  If the length of the string is less than the maximum buffer length specified, it will fill the rest of the space with null characters.  The fact that this same \"string\" function could return a non-terminated string as well makes this one of the most common functions for people to roll their own version.</p>\n\n<p>As far as fgets, a similar situation could arise.  The only gotcha is that the specification explicitly states that if nothing is read in, the buffer remains untouched.  An acceptable functional implementation could sidestep this by checking to see if there is at least one byte to read before zeroing out the buffer.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1424894268, "post_id": 28715592, "comment_id": 45743116, "body": "It&#39;s not hard to imagine that with some kinds of OS, being allowed to overwrite information beyond the end of the first line [but within the indicated amount of space] could improve performance.  If the buffer is 128 bytes and the time to read 128 bytes is less than twice to the time to read one, and the time for a relative fseek is similar, then except for lines shorter than four characters, reading 128 bytes, scanning for a newline, and then seeking back if needed may be faster than reading bytes individually."}, {"owner": {"reputation": 3897, "user_id": 3588161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xRo7q.jpg?s=128&g=1", "display_name": "Fizz", "link": "https://stackoverflow.com/users/3588161/fizz"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1424896511, "post_id": 28715592, "comment_id": 45744339, "body": "@supercat: Well, yes, you could imagine that, but then the common sense  [in any specification] is that a function won&#39;t have (user-visible) side-effects that aren&#39;t specified in the standard. In the case of the C standard, the verbiage that guarantees this general, common-sense principle has been pointed out in <a href=\"http://stackoverflow.com/a/28716991/3588161\">hvd&#39;s answer</a>."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1424896829, "post_id": 28715592, "comment_id": 45744522, "body": "I agree that since the standard <i>didn&#39;t</i> authorize implementations to write past the end, an <code>fgets</code> shouldn&#39;t expect client code to tolerate such behavior.  My point was that there would have been potential performance advantages to describing that buffer contents past the null bye as unspecified, had those writing the spec chosen to do so."}], "tags": [], "owner": {"reputation": 3897, "user_id": 3588161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xRo7q.jpg?s=128&g=1", "display_name": "Fizz", "link": "https://stackoverflow.com/users/3588161/fizz"}, "is_accepted": false, "score": 8, "last_activity_date": 1424859937, "last_edit_date": 1592644375, "creation_date": 1424857139, "answer_id": 28715592, "question_id": 28712548, "link": "https://stackoverflow.com/questions/28712548/does-the-c-standard-guarantee-buffers-are-not-touched-past-their-null-terminator/28715592#28715592", "title": "Does the C standard guarantee buffers are not touched past their null terminator?", "body": "<p>The standard is somewhat ambiguous on this, but I think a reasonable reading of it is that the answer is: yes, it's not allowed to write more bytes to the buffer than it read+null. On the other hand, a stricter reading/interpretation of the text could conclude that the answer is no, there's no guarantee. Here's what a <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf\" rel=\"noreferrer\">publicly avaialble draft</a> says about <code>fgets</code>.</p>\n<blockquote>\n<p><code>char *fgets(char * restrict s, int n, FILE * restrict stream)</code>;</p>\n<p>The <code>fgets</code> function reads at most one less than the number of characters specified by <code>n</code> from the stream pointed to by <code>stream</code> into the array pointed to by <code>s</code>. No additional characters are read after a new-line character (which is retained) or after end-of-file. A null character is written immediately after the last character read into the array.</p>\n<p>The <code>fgets</code> function returns <code>s</code> if successful. If end-of-file is encountered and no characters have been read into the array, the contents of the array remain unchanged and a null pointer is returned. If a read error occurs during the operation, the array contents are indeterminate and a null pointer is returned.</p>\n</blockquote>\n<p>There's a guarantee about how much it is supposed to <em>read</em> from the input, i.e. stop reading at newline or EOF and not read more than <code>n-1</code> bytes. Although nothing is said explicitly about how much it's allowed to <em>write</em> to the buffer, the common knowledge is that <code>fgets</code>'s <code>n</code> parameter is used to prevent buffer overflows. It's a little strange that the standard uses the ambiguous term <em>read</em>, which may not necessarily imply that <code>gets</code> can't <em>write</em> to the buffer more than <code>n</code> bytes, if you want to nitpick on the terminology it uses. But note that the same &quot;read&quot; terminology is used about both issues: the <code>n</code>-limit and the EOF/newline limit. So if you interpret the <code>n</code>-related &quot;read&quot; as a buffer-write limit, then [for consistency] you can/should interpret the other &quot;read&quot; the same way, i.e. not write more than what it read when string is shorter than the buffer.</p>\n<p>On the other hand, if you distinguish between the uses of the phrase-verb &quot;read into&quot; (=&quot;write&quot;) and just &quot;read&quot;, then you can't read the committee's text the same way. You are guaranteed that it won't &quot;read into&quot; (=&quot;write to&quot;) the array more than <code>n</code> bytes, but if the input string is terminated sooner by newline or EOF you're only guaranteed the rest (of the input) won't be &quot;read&quot;, but whether that implies in won't be &quot;read into&quot; (=&quot;written to&quot;) the buffer is unclear under this stricter reading. The crucial issue is keyword is &quot;into&quot;, which is elided, so the problem is whether the completion given by me in brackets in the following modified quote is the intended interpretation:</p>\n<blockquote>\n<p>No additional characters are read [into the array] after a new-line character (which is retained) or after end-of-file.</p>\n</blockquote>\n<p>Frankly a single <a href=\"http://en.wikipedia.org/wiki/Postcondition\" rel=\"noreferrer\">postcondition</a> stated as a formula (and would be pretty short in this case) would have been a lot more helpful than the verbiage I quoted...</p>\n<p>I can't be bothered to try and analyze their writeup about the <code>*scanf</code> family, because I suspect it's going to be even more complicated given all the other things that happen in those functions; their writeup for <code>fscanf</code> is about five pages long...  But I suspect a similar logic applies.</p>\n"}, {"comments": [{"owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "edited": false, "score": 0, "creation_date": 1424893078, "post_id": 28716991, "comment_id": 45742410, "body": "Nothing precludes an implementation of fgets that clears the buffer before writing to it.  It is a valid implementation from the specification point of view.   6.2.4 certainly doesn&#39;t say that fgets cannot do this.  All it says is that if fgets changes it, it won&#39;t change again on its own."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "edited": false, "score": 4, "creation_date": 1424893423, "post_id": 28716991, "comment_id": 45742595, "body": "@caveman The fact that nothing grants <code>fgets</code> permission to change any bytes other than those explicitly specified to be modified means that such an implementation of <code>fgets</code> would fail to conform. In the abstract machine, <code>fgets</code> does not change those bytes, and the value of those bytes does not become indeterminate, unspecified or undefined. Therefore, concrete implementations must maintain the behaviour of leaving those bytes at their last-stored values. If you disagree, then what do you think about the example in my answer? Is that allowed to print <code>&quot;1\\n2\\n&quot;</code>? If not, why not?"}, {"owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "edited": false, "score": 2, "creation_date": 1424894499, "post_id": 28716991, "comment_id": 45743235, "body": "That&#39;s a good argument, and I agree.  I think your comment makes a clearer argument than your answer itself.  The main point that I was missing from your answer is that you are considering each byte an object.  So the statement that they don&#39;t become indeterminate, unspecified, or defined really clarifies what you are saying."}, {"owner": {"reputation": 3897, "user_id": 3588161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xRo7q.jpg?s=128&g=1", "display_name": "Fizz", "link": "https://stackoverflow.com/users/3588161/fizz"}, "edited": false, "score": 1, "creation_date": 1424902335, "post_id": 28716991, "comment_id": 45747471, "body": "This probably not all there is to it as far the standard goes. What defines the last-stored value can be a long story, or else you wouldn&#39;t be able to have memory-mapped registers that can be changed by the hardware (which is a common technique on many embedded platforms)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 3897, "user_id": 3588161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xRo7q.jpg?s=128&g=1", "display_name": "Fizz", "link": "https://stackoverflow.com/users/3588161/fizz"}, "edited": false, "score": 2, "creation_date": 1424932733, "post_id": 28716991, "comment_id": 45756432, "body": "@RespawnedFluff The standard attaches a footnote to that saying &quot;In the case of a volatile object, the last store need not be explicit in the program.&quot;. And that footnote is backed up by the normative text describing <code>volatile</code> (6.7.3p6). But in the OP&#39;s case, there are no volatile objects, so that isn&#39;t an issue."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 24, "last_activity_date": 1424896509, "last_edit_date": 1592644375, "creation_date": 1424861268, "answer_id": 28716991, "question_id": 28712548, "link": "https://stackoverflow.com/questions/28712548/does-the-c-standard-guarantee-buffers-are-not-touched-past-their-null-terminator/28716991#28716991", "title": "Does the C standard guarantee buffers are not touched past their null terminator?", "body": "<p>Each individual byte in the buffer is an object. Unless some part of the function description of <code>sscanf</code> or <code>fgets</code> mentions modifying those bytes, or even implies their values may change e.g. by stating their values become unspecified, then the general rule applies: (emphasis mine)</p>\n<blockquote>\n<p><strong>6.2.4 Storage durations of objects</strong></p>\n<p>2 [...] An object exists, has a constant address, <em><strong>and retains its last-stored value throughout its lifetime</strong></em>. [...]</p>\n</blockquote>\n<p>It's this same principle that guarantees that</p>\n<pre><code>#include &lt;stdio.h&gt;\nint a = 1;\nint main() {\n  printf (&quot;%d\\n&quot;, a);\n  printf (&quot;%d\\n&quot;, a);\n}\n</code></pre>\n<p>attempts to print 1 twice. Even though <code>a</code> is global, <code>printf</code> can access global variables, and the description of <code>printf</code> doesn't mention <em>not</em> modifying <code>a</code>.</p>\n<p>Neither the description of <code>fgets</code> nor that of <code>sscanf</code> mentions modifying buffers past the bytes that actually were supposed to be written (except in the case of a read error), so those bytes don't get modified.</p>\n"}, {"tags": [], "owner": {"reputation": 289, "user_id": 931760, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/dN8cx.jpg?s=128&g=1", "display_name": "Steve D", "link": "https://stackoverflow.com/users/931760/steve-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1425015279, "creation_date": 1425015279, "answer_id": 28758226, "question_id": 28712548, "link": "https://stackoverflow.com/questions/28712548/does-the-c-standard-guarantee-buffers-are-not-touched-past-their-null-terminator/28758226#28758226", "title": "Does the C standard guarantee buffers are not touched past their null terminator?", "body": "<p>Depends on the function in use (and to a lesser degree its implementation).  <code>sscanf</code> will start writing when it encounters its first non-whitespace character, and continue writing until its first whitespace character, where it will add a finishing <code>0</code> and return.  But a function like <code>strncpy</code> (famously) zeroes out the rest of the buffer.</p>\n\n<p>There is however nothing in the C standard which mandates how these functions behave.</p>\n"}], "owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3473, "favorite_count": 2, "accepted_answer_id": 28716991, "answer_count": 7, "score": 43, "last_activity_date": 1425449527, "creation_date": 1424845463, "question_id": 28712548, "link": "https://stackoverflow.com/questions/28712548/does-the-c-standard-guarantee-buffers-are-not-touched-past-their-null-terminator", "title": "Does the C standard guarantee buffers are not touched past their null terminator?", "body": "<p>In the various cases that a buffer is provided to the standard library's many string functions, is it guaranteed that the buffer will not be modified beyond the null terminator? For example:</p>\n\n<pre><code>char buffer[17] = \"abcdefghijklmnop\";\nsscanf(\"123\", \"%16s\", buffer);\n</code></pre>\n\n<p>Is <code>buffer</code> now required to equal <code>\"123\\0efghijklmnop\"</code>?</p>\n\n<p>Another example:</p>\n\n<pre><code>char buffer[10];\nfgets(buffer, 10, fp);\n</code></pre>\n\n<p>If the read line is only 3 characters long, can one be certain that the 6th character is the same as before fgets was called?</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1424844793, "post_id": 28712347, "comment_id": 45712753, "body": "getc returns a character, not a number. See the manual of it."}, {"owner": {"reputation": 24559, "user_id": 68972, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8d6979892fcf604810eea4f9ac086079?s=128&d=identicon&r=PG", "display_name": "Jcl", "link": "https://stackoverflow.com/users/68972/jcl"}, "edited": false, "score": 0, "creation_date": 1424844796, "post_id": 28712347, "comment_id": 45712754, "body": "<code>getc()</code> returns a <code>char</code>, which when stored as an <code>int</code> gets the ASCII value of that <code>char</code>. If you are aiming to find a number written in text inside the file, then this is way off"}, {"owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "edited": false, "score": 0, "creation_date": 1424844837, "post_id": 28712347, "comment_id": 45712766, "body": "Look at fscanf to get a text number."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1424844878, "post_id": 28712347, "comment_id": 45712784, "body": "Your <code>infp</code> parameter is completely useless (and passing (therefore reading) it uninitialized actually invokes undefined behavior).  Either remove it or open and close the file in <code>main</code> and pass a valid <code>FILE *</code> pointer to your function.  How to parse your text file depends largely on what will be in the file.  Only numbers?  In what format?  can you show an example?"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1424845111, "post_id": 28712347, "comment_id": 45712874, "body": "Start by logging what <code>getc</code> returns to see if it&#39;s what you expect."}], "answers": [{"tags": [], "owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1424845000, "creation_date": 1424845000, "answer_id": 28712442, "question_id": 28712347, "link": "https://stackoverflow.com/questions/28712347/c-program-to-search-file-for-numbers-greater-than-100/28712442#28712442", "title": "C Program to search file for numbers greater than 100", "body": "<p>It's going to be a tad bit of work to do this in C. How about grabbing the text content. Splitting on space. Verifying the correct ASCII characters that represent a base 10 number <code>[48,57]</code> (interval notation), from there you can apply a conversion algorithm, such as <code>atoi</code></p>\n"}, {"tags": [], "owner": {"reputation": 349, "user_id": 3404638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fd27f54e90166c35920aaa3f82989af?s=128&d=identicon&r=PG&f=1", "display_name": "wyas", "link": "https://stackoverflow.com/users/3404638/wyas"}, "is_accepted": false, "score": 0, "last_activity_date": 1424845281, "last_edit_date": 1495540259, "creation_date": 1424845281, "answer_id": 28712508, "question_id": 28712347, "link": "https://stackoverflow.com/questions/28712347/c-program-to-search-file-for-numbers-greater-than-100/28712508#28712508", "title": "C Program to search file for numbers greater than 100", "body": "<p><code>getc()</code> reads the next <em>character</em> from a stream. What you want is to possibly tokenize the file via some delimiter (let's say space). See <a href=\"https://stackoverflow.com/questions/266357/tokenizing-strings-in-c\">here</a> for more details. </p>\n"}, {"tags": [], "owner": {"reputation": 787, "user_id": 3597604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3Nfr.jpg?s=128&g=1", "display_name": "vkrishna17", "link": "https://stackoverflow.com/users/3597604/vkrishna17"}, "is_accepted": false, "score": 1, "last_activity_date": 1424846024, "creation_date": 1424846024, "answer_id": 28712684, "question_id": 28712347, "link": "https://stackoverflow.com/questions/28712347/c-program-to-search-file-for-numbers-greater-than-100/28712684#28712684", "title": "C Program to search file for numbers greater than 100", "body": "<p>here you are using getc() to catch numbers from file but your getc() will give you only one character at a time so \nfor example :</p>\n\n<hr>\n\n<p>if your file content is like : \"103 9\";\nthen your  getc() will give \"1\" at 1st time then it will give you \"0\" and then \"3\"..\nin this way you will never be reading a number completely and you are getting one character at a time.\nTo get rid of this you can use : fscanf(infp, \"%d\", &amp;num);....\nthis will give you one complete number in one go. \nthen you can easily match the numbers.</p>\n\n<hr>\n"}], "owner": {"reputation": 337, "user_id": 4604276, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5070d8c910996c92db1322231d485a98?s=128&d=identicon&r=PG&f=1", "display_name": "HaHaHAHungry", "link": "https://stackoverflow.com/users/4604276/hahahahungry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1424846024, "creation_date": 1424844632, "question_id": 28712347, "link": "https://stackoverflow.com/questions/28712347/c-program-to-search-file-for-numbers-greater-than-100", "title": "C Program to search file for numbers greater than 100", "body": "<p>The objective is to write an int function that returns the number of occurrences of numbers greater than 100 in a text file. The function should receive the file pointer as an argument. </p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint function(FILE *infp);\n\nint main ()\n{\n        FILE *infp;\n        printf(\"\\n%d\\n\",function(infp));\n}\n\nint function(FILE *infp)\n{\n        int num, counter=0;\n        if ((infp = fopen (\"text.txt\", \"r\")) == NULL)\n                printf (\"\\ncannot open the file text.txt\\n\");\n        while ((num = getc())!=EOF)\n        {\n                if (num&gt;100)\n                    counter++;\n        }\n        fclose(infp);\n        return (counter);\n }\n</code></pre>\n\n<p>It is always outputting 0. I'm thinking either getc is not the right command to use here or maybe I am formatting the text file wrong? Any help would be great</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 0, "creation_date": 1424845624, "post_id": 28712276, "comment_id": 45713092, "body": "Can you explain why you use <code>for (int y=0; y&lt;1; y++)</code> loop, that execute <code>fgets</code> only once?"}, {"owner": {"reputation": 91, "user_id": 4604260, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YAPBP.jpg?s=128&g=1", "display_name": "masteryupa", "link": "https://stackoverflow.com/users/4604260/masteryupa"}, "reply_to_user": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 0, "creation_date": 1424846777, "post_id": 28712276, "comment_id": 45713579, "body": "Really just so that it runs; at this point there isn&#39;t any need for it to run more than that. I plan to use it in an instant messaging context so unless there is an error, I&#39;d assume each message only needs to be read once. Hope that makes sense."}, {"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 0, "creation_date": 1424847851, "post_id": 28712276, "comment_id": 45714039, "body": "O.k. - <code>for</code> is the remains of bigger program. In that case perhaps the <code>printf</code> and the second <code>for</code> loop should be inside the first <code>for</code>... otherwise reading data in the loop with <code>fgets</code> more than once will be &quot;useless labor&quot;"}, {"owner": {"reputation": 91, "user_id": 4604260, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YAPBP.jpg?s=128&g=1", "display_name": "masteryupa", "link": "https://stackoverflow.com/users/4604260/masteryupa"}, "reply_to_user": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 0, "creation_date": 1424848936, "post_id": 28712276, "comment_id": 45714559, "body": "Can&#39;t get the formatting right for this comment but I&#39;ve applied the code you provided earlier and nested the if statements within the first for. Works perfectly, thank you again."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 4604260, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YAPBP.jpg?s=128&g=1", "display_name": "masteryupa", "link": "https://stackoverflow.com/users/4604260/masteryupa"}, "edited": false, "score": 0, "creation_date": 1424846817, "post_id": 28712312, "comment_id": 45713595, "body": "This makes sense, I&#39;ll fix it. Thank you!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 91, "user_id": 4604260, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YAPBP.jpg?s=128&g=1", "display_name": "masteryupa", "link": "https://stackoverflow.com/users/4604260/masteryupa"}, "edited": false, "score": 0, "creation_date": 1424882936, "post_id": 28712312, "comment_id": 45736155, "body": "@masteryupa  please reflect changes to the posted code, so we can perform the evaluation so we can continue to help you."}, {"owner": {"reputation": 91, "user_id": 4604260, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YAPBP.jpg?s=128&g=1", "display_name": "masteryupa", "link": "https://stackoverflow.com/users/4604260/masteryupa"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424948643, "post_id": 28712312, "comment_id": 45764802, "body": "@user3629249 I&#39;ve added the changes I&#39;ve made, hope it makes sense!"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1424844434, "creation_date": 1424844434, "answer_id": 28712312, "question_id": 28712276, "link": "https://stackoverflow.com/questions/28712276/how-to-scan-a-string-for-specific-terms/28712312#28712312", "title": "How to scan a string for specific terms", "body": "<pre><code>char cInput[] = \"\";\n</code></pre>\n\n<p>The sizeof this array is 1. </p>\n\n<pre><code>fgets(cInput, 120, stdin);\n</code></pre>\n\n<p>This is array out of bound write which will lead to undefined behavior.</p>\n\n<p>Have</p>\n\n<pre><code>char cInput[120] = \"\";\n</code></pre>\n\n<p>You need to take care of </p>\n\n<pre><code>char cOutput[120] = \"\";\n</code></pre>\n\n<p>also. Since you are trying to write to this array after comparing.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 4604260, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YAPBP.jpg?s=128&g=1", "display_name": "masteryupa", "link": "https://stackoverflow.com/users/4604260/masteryupa"}, "edited": false, "score": 0, "creation_date": 1424844784, "post_id": 28712317, "comment_id": 45712749, "body": "Could you elaborate on this point? I understand that str1 would be cInput and str2 would be cArray but I&#39;m not sure where to place this statement in the code. Thank you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424844866, "post_id": 28712317, "comment_id": 45712780, "body": "Needs work - suggest <code>fgets(cInput, sizeof cinput, stdin);</code> and check its return value.  <code>strncpy(cOutput, ptr, strlen(cArray));</code> is troubling too. GTG"}, {"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 0, "creation_date": 1424845345, "post_id": 28712317, "comment_id": 45712969, "body": "The last edit provides possibility to find more than one cArray in cInput. If you want to positions of appearances use expression <code>(ptr - cInput + 1)</code> as integer number."}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": true, "score": 1, "last_activity_date": 1424845837, "last_edit_date": 1424845837, "creation_date": 1424844454, "answer_id": 28712317, "question_id": 28712276, "link": "https://stackoverflow.com/questions/28712276/how-to-scan-a-string-for-specific-terms/28712317#28712317", "title": "How to scan a string for specific terms", "body": "<p>You need strstr function from string.h</p>\n\n<pre><code>const char * strstr ( const char * str1, const char * str2 );\n</code></pre>\n\n<p>the following gives you an example of usage:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_STR_LEN 120\n\nint main(){\n    char cArray[MAX_STR_LEN] = \"example\";  // string to be searched in the input string\n    char cInput[MAX_STR_LEN] = \"\"; // input string\n    char cOutput[MAX_STR_LEN] = \"\"; // buffer for found string\n\n    printf(\"\\nType your message:\\n\");\n    for (int y=0; y&lt;1; y++){     // this loop from original example looks strange, but it works\n        fgets(cInput, MAX_STR_LEN, stdin);\n    }\n    // search in the input string\n    char * ptr;\n    if( ( ptr=strstr(cInput, cArray) ) != NULL)\n    {\n        //copy the string to cOutput\n        strncpy(cOutput, ptr, strlen(cArray));\n        // output the found string\n        printf(\"String that was found: \\n%s\\n\", cOutput);\n    }\n    else\n    {\n        printf(\"String was not found in the input!\\n\");\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>If you want to all the strings, use the following loop instead of <code>if-else</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    // search in the input string\n    char * ptr = cInput;\n    while( ( ptr=strstr(ptr, cArray) ) != NULL)\n    {\n        //copy the string to cOutput\n        strncpy(cOutput, ptr, strlen(cArray));\n        // output the found string\n        printf(\"String \\\"%s\\\" was found at position %d\\n\", cOutput, (int)(ptr - cInput + 1));\n        // find next string\n        ptr++;\n    }\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4604260, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YAPBP.jpg?s=128&g=1", "display_name": "masteryupa", "link": "https://stackoverflow.com/users/4604260/masteryupa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 28712317, "answer_count": 2, "score": 1, "last_activity_date": 1424920948, "creation_date": 1424844250, "last_edit_date": 1424920948, "question_id": 28712276, "link": "https://stackoverflow.com/questions/28712276/how-to-scan-a-string-for-specific-terms", "title": "How to scan a string for specific terms", "body": "<p>I'm trying to scan user input text for specific words and then, when those words occur, print them to the console.</p>\n\n<pre><code>#import &lt;Foundation/Foundation.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(){\nchar cArray[] = \"example\";\nchar cInput[] = \"\";\nchar cOutput[] = \"\";\n\nprintf(\"\\nType your message:\\n\");\nfor (int y=0; y&lt;1; y++){\n    fgets(cInput, 120, stdin);\n}\nprintf(\"\\nInitialised character array:\\n\");\nfor (int x=0; x&lt;1; x++){\n    if(strncmp(&amp;cInput[x], &amp;cArray[x], 120) == 0){\n        strncpy(cOutput, cArray, strnlen(cInput, +1));\n        printf(\"%s\\n\", cOutput);\n        break;\n        }\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Type your message:\nexample\n\nInitialised character array:\nProgram ended with exit code: 120\n</code></pre>\n\n<p>Appreciate any feedback as I'm still learning :)</p>\n\n<p>Thanks.</p>\n\n<p>The edited code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_STR_LEN 120\n\nint main(){\nchar *cArray[MAX_STR_LEN] = {\"example\", \"this\"};\nchar cInput[MAX_STR_LEN] = \"\";\nchar cOutput[MAX_STR_LEN] = \"\";\n\nprintf(\"Type your message:\\n\");\nfor (int y=0; y&lt;1; y++){\n    fgets(cInput, MAX_STR_LEN, stdin);\n    char * ptr = cInput;\n    while((ptr=strstr(ptr, *cArray)) != NULL){\n        strncpy(cOutput, ptr, strlen(*cArray));\n        printf(\"Initialised string array:\\n%s\\n\", cOutput);\n        ptr++;\n        }\n    }\n}\n</code></pre>\n\n<p>Works although I'm encountering a different problem now. The output only seems to register one word before it completes, thus only \"example\" is printed.</p>\n\n<p>Output:</p>\n\n<pre><code>Type your message:\nthis is an example\nInitialised string array:\nexample\nProgram ended with exit code: 0\n</code></pre>\n"}, {"tags": ["c", "primes"], "comments": [{"owner": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "edited": false, "score": 5, "creation_date": 1424844210, "post_id": 28712242, "comment_id": 45712526, "body": "<code>two = 2</code>, <code>two++</code>. I know &quot;magic&quot; numbers are bad, but really? Especially because now <code>two == 3</code>."}, {"owner": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 1, "creation_date": 1424844453, "post_id": 28712242, "comment_id": 45712620, "body": "Doesn&#39;t primecheck have to change value inside the loop?"}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 2, "creation_date": 1424844627, "post_id": 28712242, "comment_id": 45712691, "body": "I don&#39;t understand how the primality check is supposed to work in the implementation."}, {"owner": {"reputation": 23, "user_id": 4604249, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/899356843429588/picture?type=large", "display_name": "Dillon J.", "link": "https://stackoverflow.com/users/4604249/dillon-j"}, "reply_to_user": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1424844900, "post_id": 28712242, "comment_id": 45712796, "body": "@codor actually, yeah I don&#39;t think that method will work with this ( maybe it will sorry my knowledge is very limited) but it has to be a single function and a do-while loop. basically the loop should not run if the number entered is prime"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4604249, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/899356843429588/picture?type=large", "display_name": "Dillon J.", "link": "https://stackoverflow.com/users/4604249/dillon-j"}, "edited": false, "score": 0, "creation_date": 1424844767, "post_id": 28712322, "comment_id": 45712744, "body": "Thanks! mucch appreciated"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 1, "creation_date": 1424859018, "post_id": 28712322, "comment_id": 45720001, "body": "At the very least, change the <code>while</code> condition to <code>(i * i &lt;= n)</code> - it&#39;s O(sqrt(n)) vs. O(n). Also, don&#39;t test for even factors &gt; 2. Consider: <code>n = 2000000000</code> - that&#39;s about 22360 iterations vs 1000000000."}, {"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "edited": false, "score": 1, "creation_date": 1424859764, "post_id": 28712322, "comment_id": 45720440, "body": "You&#39;re returning every even number as a prime right now."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1424859779, "post_id": 28712322, "comment_id": 45720450, "body": "@BrettHale Thank for you comment, however I beleived that the original poster was asking for a most basic solution."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "reply_to_user": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "edited": false, "score": 0, "creation_date": 1424859873, "post_id": 28712322, "comment_id": 45720500, "body": "@MicroVirus Thanks for the comment, it was a bug."}], "tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 1, "last_activity_date": 1424859904, "last_edit_date": 1424859904, "creation_date": 1424844491, "answer_id": 28712322, "question_id": 28712242, "link": "https://stackoverflow.com/questions/28712242/determining-if-a-user-inputted-variable-is-prime-in-a-do-while-loop/28712322#28712322", "title": "Determining if a user inputted variable is prime in a do-while loop", "body": "<p>One possibility would be to introduce a function which performs the primality check, which could be done by using check divisions by all smaller numbers and terminate the loops as soon as a prime number is found. An implementation can be found following <a href=\"http://www.programiz.com/c-programming/examples/prime-number\" rel=\"nofollow\">this link</a>; the code can be refactored to the follwing function for primality testing. The function returns <code>1</code> if <code>n</code> is prime and <code>0</code> otherwise. The implementation uses an explicit <code>while</code> loop as the requirements apparently demands it.</p>\n\n<pre><code>int is_prime(int n)\n{\n    int i=3;\n    int flag=0;\n    if (n%2==0)\n    {\n        return 0;\n    }\n    do\n    {\n        if (n%i==0)\n        {\n            flag=1;\n            break;\n        }\n        i+=2;\n    }\n    while (i*i&lt;=n);\n    return flag;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4604249, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/899356843429588/picture?type=large", "display_name": "Dillon J.", "link": "https://stackoverflow.com/users/4604249/dillon-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424859904, "creation_date": 1424844033, "last_edit_date": 1424844532, "question_id": 28712242, "link": "https://stackoverflow.com/questions/28712242/determining-if-a-user-inputted-variable-is-prime-in-a-do-while-loop", "title": "Determining if a user inputted variable is prime in a do-while loop", "body": "<p>so my task is as follows: Construct a do-while() loop, which continues to prompt the user for an integer, and determines the sum of integers entered, until a prime number is encountered. The prime number should not be included in the sum. Show all variable declarations.</p>\n\n<p>I have all of the variable add up correctly however cannot seem to get the function to stop on a prime number. To try to correct this I made the variable \"primecheck\" and set it to 2++ thinking that it would be every integer above 2 (obviously not possible but one could hope). any assistance would be much appreciated!</p>\n\n<pre><code>int main (void)\n{\n    int sum = 0, num = 0, i = 0, primecheck = 0, two = 2;\n\n    primecheck = two++;\n    do\n    {\n            printf (\"Enter an integer: \");\n            scanf (\"%d\", &amp;num);\n            if (num % primecheck == 0 &amp;&amp; primecheck != num)\n            {\n                sum += num;\n            }\n    } while (num % primecheck == 0 &amp;&amp; primecheck != num);\n\n    i = sum;\n    printf(\"%s%d%s\", \"Sum = \", i, \"\\n\");\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2687, "user_id": 2688283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1945f9f43965914955eb66b798d74232?s=128&d=identicon&r=PG&f=1", "display_name": "iRuth", "link": "https://stackoverflow.com/users/2688283/iruth"}, "edited": false, "score": 0, "creation_date": 1424843495, "post_id": 28711967, "comment_id": 45712269, "body": "A simple <a href=\"https://www.google.com/search?q=getchar+in+c\" rel=\"nofollow noreferrer\">Google search</a> returned a lot of results, one of which is <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_getchar.htm\" rel=\"nofollow noreferrer\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "is_accepted": false, "score": 0, "last_activity_date": 1424843023, "creation_date": 1424843023, "answer_id": 28712011, "question_id": 28711967, "link": "https://stackoverflow.com/questions/28711967/what-exactly-does-getchar-do-in-this-code-c/28712011#28712011", "title": "What exactly does getchar() do in this code.. [C]", "body": "<p>It blocks the program until the user presses enter.  The character the user typed is just thrown away since the return value isn't passed to a local variable.</p>\n\n<p>I looks like the intent is to add simple pagination functionality since it does this after every 24 lines.</p>\n"}, {"tags": [], "owner": {"reputation": 2638, "user_id": 306936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/218d76bf3b9e1f5214a4e2774b445700?s=128&d=identicon&r=PG", "display_name": "GingerJack", "link": "https://stackoverflow.com/users/306936/gingerjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1424843349, "creation_date": 1424843349, "answer_id": 28712081, "question_id": 28711967, "link": "https://stackoverflow.com/questions/28711967/what-exactly-does-getchar-do-in-this-code-c/28712081#28712081", "title": "What exactly does getchar() do in this code.. [C]", "body": "<p><code>getchar()</code> returns the next character from the standard input (stdin).\nIn your program second getchar() occurence should be checked if the entered key is \"<strong>Enter</strong>\".Asci value of Enter key is 13.</p>\n"}, {"tags": [], "owner": {"reputation": 816, "user_id": 1254598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d414cfcb5ebe38af8e65acbe8ad02a0a?s=128&d=identicon&r=PG", "display_name": "Sunil Shahu", "link": "https://stackoverflow.com/users/1254598/sunil-shahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1424849720, "creation_date": 1424849720, "answer_id": 28713571, "question_id": 28711967, "link": "https://stackoverflow.com/questions/28711967/what-exactly-does-getchar-do-in-this-code-c/28713571#28713571", "title": "What exactly does getchar() do in this code.. [C]", "body": "<p>getchar() returns a character from stdin.</p>\n\n<p>Here each getchar(); waits for user to press a key so it can return a single character. It's here in code to wait for user interaction.</p>\n\n<p>But the shell terminal do not pass the charater as soon as you press keyboard. It passes it to stdin stream only after you press enter/New line, which is also a character. </p>\n\n<p>So, when you only press Enter/NL key, getchar() will receive 0xA.</p>\n\n<p>But if you press some other character and then Enter/NL, the first getchar() will get that other character and subsequent getchar() will get 0xA. This is like a simple pipe mechanism.</p>\n"}], "owner": {"reputation": 85, "user_id": 4604158, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b9fb3e6f9962d3654e7c80f5ce4e45bf?s=128&d=identicon&r=PG&f=1", "display_name": "krazibiosvn", "link": "https://stackoverflow.com/users/4604158/krazibiosvn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1424849720, "creation_date": 1424842811, "question_id": 28711967, "link": "https://stackoverflow.com/questions/28711967/what-exactly-does-getchar-do-in-this-code-c", "title": "What exactly does getchar() do in this code.. [C]", "body": "<p>I'm having trouble understanding exactly what getchar() does in this code, can anybody help explain it?</p>\n\n<pre><code>int main(void)\n{\n  int i, n;\n\n  printf(\"This program prints a table of squares.\\n\");\n  printf(\"Enter number of entries in table: \");\n  scanf(\"%d\", &amp;n);\n  getchar();\n\n\n  for (i = 1; i &lt;= n; i++) {\n    printf(\"%10d%10d\\n\", i, i * i);\n    if (i % 24 == 0) {\n      printf(\"Press Enter to continue...\");\n      getchar();   \n    }\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 3, "creation_date": 1424842066, "post_id": 28711804, "comment_id": 45711861, "body": "Just replace <code>a--</code> with <code>--a</code> (or, preferably, <code>a - 1</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 4, "last_activity_date": 1424842304, "creation_date": 1424842304, "answer_id": 28711864, "question_id": 28711804, "link": "https://stackoverflow.com/questions/28711804/recursive-function-in-c-not-working/28711864#28711864", "title": "Recursive function in c not working", "body": "<p>Change</p>\n\n<pre><code>return((int)pow(5.0,a)+power (a--));\n</code></pre>\n\n<p>To</p>\n\n<pre><code>return((int)pow(5.0,a)+power (a-1));\n</code></pre>\n\n<p>The reason that it didn't work is that <code>a--</code> returns the current value of <code>a</code> and not the decremented value of <code>a</code>. So your recursive function never ends and it is an infinite-recursion. </p>\n"}], "owner": {"reputation": 5, "user_id": 4240610, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425427785/picture?type=large", "display_name": "Baldev Patwari", "link": "https://stackoverflow.com/users/4240610/baldev-patwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1424842304, "creation_date": 1424841976, "last_edit_date": 1424842303, "question_id": 28711804, "link": "https://stackoverflow.com/questions/28711804/recursive-function-in-c-not-working", "title": "Recursive function in c not working", "body": "<pre><code>    #include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\nint power(int a)\n{\n    if(a&lt;=0)\n        return 1;\n    else\n        return((int)pow(5.0,a)+power(a--));\n}\nvoid main()\n{\n    printf(\"%d\",power(2));\n}\n</code></pre>\n\n<p>The above function was used by me for a bigger program I am working on, but it was not able to execute in C. Kindly point me out the bug.</p>\n"}, {"tags": ["c", "bison"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4604047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5bbdbfcebd404536584e108a27961c?s=128&d=identicon&r=PG&f=1", "display_name": "EspioBlaze", "link": "https://stackoverflow.com/users/4604047/espioblaze"}, "edited": false, "score": 0, "creation_date": 1424840856, "post_id": 28711519, "comment_id": 45711478, "body": "the way I compile it, which show errors is: <code>flex lexem.l</code> then <code>yacc -d -v grammar.y</code> and finally <code>gcc -o par grammar.tab.c -ll</code>"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 21, "user_id": 4604047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5bbdbfcebd404536584e108a27961c?s=128&d=identicon&r=PG&f=1", "display_name": "EspioBlaze", "link": "https://stackoverflow.com/users/4604047/espioblaze"}, "edited": false, "score": 0, "creation_date": 1424842815, "post_id": 28711519, "comment_id": 45712077, "body": "@EspioBlaze, see the update. With your added comment, it&#39;s now clear why it isn&#39;t working."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 1, "last_activity_date": 1424842673, "last_edit_date": 1424842673, "creation_date": 1424840651, "answer_id": 28711519, "question_id": 28711388, "link": "https://stackoverflow.com/questions/28711388/problems-compiling/28711519#28711519", "title": "Problems Compiling", "body": "<p>You're not supposed to compile the <code>whatever.tab.h</code> file, that's a <em>header</em> file containing the YACC elements for the grammar, for <em>inclusion</em> into the <code>lex</code> and <code>yacc</code> code sections, as well as your own code if you need access to it.</p>\n\n<p>You're supposed to compile <code>whatever.tab.c</code>, ensuring that you're also including your <code>symtab.c</code> (or its equivalent object file), and any other C source files as well.</p>\n\n<p>And, based on your comment, it's this non-inclusion of the <code>symtab.c</code> file which is indeed causing your immediate error.</p>\n\n<p>When I execute your steps (slightly modified for different names):</p>\n\n<pre><code>flex lexem.l\nyacc -d -v grammar.y\ngcc -o par y.tab.c\n</code></pre>\n\n<p>then I get a similar problem to what you're seeing:</p>\n\n<pre><code>/tmp/ccI5DpZQ.o:y.tab.c:(.text+0x35c): undefined reference to `install_id'\n/tmp/ccI5DpZQ.o:y.tab.c:(.text+0x36e): undefined reference to `printSymtab'\n/tmp/ccI5DpZQ.o:y.tab.c:(.text+0x3a7): undefined reference to `lookup_id'\n</code></pre>\n\n<p>However, when I incorporate the <code>symtab.c</code> file into the compile line (and add the <code>idname</code> and <code>idnum</code> missing bits to the structure in <code>symtab.h</code> to solve compilation problems), it works just fine:</p>\n\n<pre><code>gcc -o par y.tab.c symtab.c\n</code></pre>\n\n<p>So <em>that's</em> what you need to do, include <code>symtab.c</code> on the <code>gcc</code> command line.</p>\n"}], "owner": {"reputation": 21, "user_id": 4604047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5bbdbfcebd404536584e108a27961c?s=128&d=identicon&r=PG&f=1", "display_name": "EspioBlaze", "link": "https://stackoverflow.com/users/4604047/espioblaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1424849210, "creation_date": 1424840014, "last_edit_date": 1424849210, "question_id": 28711388, "link": "https://stackoverflow.com/questions/28711388/problems-compiling", "title": "Problems Compiling", "body": "<p>So I have to create a compiler for the Tiny C language, but I cant compile it, I have the .y and .l files and both work all right, but when I try to compile the .tab.c file, it shows 3 errors for</p>\n\n<ul>\n<li>undefined reference to 'install_id'</li>\n<li>undefined reference to printSymtab'</li>\n<li>undefined reference to 'lookup_id'</li>\n</ul>\n\n<p>Here are the codes:</p>\n\n<p>Symtab.h</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct symtab_node * SYMTAB;\n\ntypedef struct symtab_node {\n    char * nombre;\n    int type;\n    float fval;\n    SYMTAB next;\n} SYMTAB_NODE;\n\nSYMTAB lookup_id(SYMTAB st, char * name);\n\nSYMTAB install_id(SYMTAB st, char * name, int typ);\n\nvoid printSymtab(SYMTAB t);\n</code></pre>\n\n<p>Symtab.c</p>\n\n<pre><code>#include \"symtab.h\"\n#include &lt;stdio.h&gt;\nint next_num() {\n    static int i = 1;\n    return i++;\n}\n/* looks up an is in ST. Returns pointer to cell if found else NULL */\nSYMTAB lookup_id(SYMTAB st, char * name) {\n    SYMTAB tmp = st;\n    if (tmp == NULL) {/* empty list */\n        return NULL;\n    } else {\n        while (tmp != NULL) {\n            if (strcmp(tmp-&gt;idname,name) == 0) {\n                return tmp; /* found */\n            } else {\n                tmp = tmp-&gt;next; /* go to next cell */\n            }\n        }\n        return NULL; /* not found */\n    }\n}\n/* adds an id to ST if not present */\nSYMTAB install_id(SYMTAB st, char * name, int typ) {\n    if (lookup_id(st, name) == NULL) {\n        SYMTAB nst = (SYMTAB)malloc(sizeof(SYMTAB_NODE));\n        nst-&gt;idname = (char *) strdup(name);\n        nst-&gt;idnum = next_num();\n        nst-&gt;next = st;\n        return nst;\n    } else {\n        return st;\n    }\n}\n/* print out ST */\nvoid printSymtab(SYMTAB t) {\n    SYMTAB tmp = t;\n    while (tmp != NULL) {\n        printf(\"%s\\t%d\\n\", tmp-&gt;idname, tmp-&gt;idnum);\n        tmp = tmp-&gt;next;\n    }\n}\n</code></pre>\n\n<p>grammar.y</p>\n\n<pre><code>    %{\n\n#include \"symtab.h\"\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar * concat (char * str1, char * str2);\n\nextern int yylex();\nextern char * yytext;\nextern int yylineno;\n\nSYMTAB st;\n\nint typev;\n\n  /* Function definitions */\n\n    void yyerror (char *string);\n\n    %}\n\n    %union{ \n        char *strval; \n        int value;\n        float fvalue; \n        SYMTAB st;\n   }\n\n/* Declaramos todos los tokens que recibir\u00c3\u00a1 el programa y que provienen del   cparser.l */\n%token SEMI INTEGER FLOAT \n%token IF THEN ELSE WHILE DO\n%token READ WRITE\n%token LPAREN RPAREN LBRACE RBRACE\n%token LT EQ \n%token PLUS MINUS TIMES DIV ASSIGN\n%token&lt;value&gt; INT_NUM\n%token&lt;fvalue&gt; FLOAT_NUM\n%token&lt;strval&gt; ID\n\n%%\n\n/* Definimos las reglas de producci\u00c3\u00b3n para el mini-lenguaje C */\n program: var_dec stmt_seq       { printf (\"No hay errores sintacticos\\n\");}\n    ;\n\nvar_dec: var_dec single_dec    \n    |                           \n    ;\n\nsingle_dec: type ID SEMI   { st = install_id(st,$2,typev); printSymtab(st);   }\n    ;\n\ntype: INTEGER          { typev = 1; }             \n    | FLOAT            { typev = 2; }                             \n    ;\n\nstmt_seq: stmt_seq stmt         \n    |                          \n    ;\n\nstmt: IF exp THEN else          \n    | WHILE exp DO stmt\n    | variable ASSIGN exp SEMI         { /*st = install_id(st,$1); */}\n    | READ LPAREN variable RPAREN SEMI { /*st = install_id(st,$3); */}\n    | WRITE LPAREN exp RPAREN SEMI \n    | block \n    | error SEMI       { yyerrok;}\n    ;\n\nelse: stmt\n    | ELSE stmt\n    ;\n\nblock: LBRACE stmt_seq RBRACE\n    ;\n\nexp: simple_exp LT simple_exp\n    | simple_exp EQ simple_exp \n    | simple_exp            \n    ;\n\nsimple_exp: simple_exp PLUS term    \n    | simple_exp MINUS term       \n    | term \n    ;\n\nterm: term TIMES factor\n    | term DIV factor\n    | factor \n    ;\n\nfactor: LPAREN exp RPAREN \n    | INT_NUM    \n    | FLOAT_NUM \n    | variable \n    ;\n\nvariable: ID   \n    {  if(lookup_id(st,$1) == NULL){\n             yyerror(concat(\"Error: Undeclared Identifier \", $1)); \n        }\n    }\n    ;\n%%\n\n/* A function that concatenates two strings and returns the result */\nchar * concat(char * str1, char * str2){\n    char *str3; \n    str3 = (char *) calloc(strlen(str1)+strlen(str2)+1, sizeof(char));\n    strcpy(str3,str1);\n    strcat(str3,str2);\n    return str3;\n}\n\n#include \"lex.yy.c\"\n\n/* Bison does NOT implement yyerror, so define it here */\nvoid yyerror (char *string){\n  printf (\"ERROR NEAR LINE %d: %s\\n\",yylineno,string);\n}\n\n/* Bison does NOT define the main entry point so define it here */\nmain (){\n  yyparse();\n  yylex();\n}\n</code></pre>\n\n<p>lexem.y</p>\n\n<pre><code>%{\n    #include &lt;string.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    char * strval;\n    int value;\n    float fvalue;\n    int error;\n\n    extern YYSTYPE yylval;\n%}\n\n  /* This is the rule definition */\n%option noyywrap\n%option yylineno\n\nids          [A-Za-z_][A-Za-z0-9_]*\ndigits       0|[1-9][0-9]*|0(c|C)[0-7]+|0(x|X)[0-9A-Fa-f]+\nfloats       [0-9]*\".\"[0-9]+([eE][-+]?[0-9]+)?\n\n%%\n\n  /* Consume los comentarios*/\n(\\/\\*([^\\*]|\\*[^/])*\\*\\/)|(\\/\\/.*)\n\n  /* Consume los espacios, tabulaciones y saltos de linea*/\n[[:space:]]|[[:blank:]]|\\n\n\n  /* Palabras reservadas */\n\"int\"     { return INTEGER; }\n\"float\"   { return FLOAT; }\n\"if\"      { return IF; }\n\"then\"    { return THEN; }\n\"else\"    { return ELSE; }\n\"do\"      { return DO; }\n\"while\"   { return WHILE; }\n\"read\"    { return READ; }\n\"write\"   { return WRITE; }\n\n  /* Simbolos de puntuacion, operadores y relacionales */\n  /* Puntuacion */\n\";\" { return SEMI; }\n\"(\" { return LPAREN; }\n\")\" { return RPAREN; }\n\"{\" { return LBRACE; }\n\"}\" { return RBRACE; }\n\n  /* Relacionales */\n\"&gt;\"  { return LT; }\n\"==\" { return EQ; }\n\n  /* Operadores */\n\"+\" { return PLUS; }\n\"-\" { return MINUS; }\n\"*\" { return TIMES; }\n\"/\" { return DIV; }\n\"=\" { return ASSIGN; }\n\n{ids} { yylval.strval = (char *) strdup(yytext);\n        return (ID); }\n\n{digits} { yylval.value = atoi(yytext);\n         return (INT_NUM); }\n\n{floats} { yylval.fvalue = atof(yytext);\n         return (FLOAT_NUM); }\n\n  /* Consume los simbolos que sobran y marca error */\n. { printf(\"LEXICAL ERROR NEAR LINE %d:  %s \\n\", yyget_lineno(),     yyget_text()); error++; }\n\n%%\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "ip", "port"], "comments": [{"owner": {"reputation": 6986, "user_id": 2968959, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/34c70f9a66b79ca49e2b14e3c075fe3d?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Meshram", "link": "https://stackoverflow.com/users/2968959/saurabh-meshram"}, "edited": false, "score": 0, "creation_date": 1424842337, "post_id": 28711378, "comment_id": 45711949, "body": "So your&#39;e doing an <code>accept(socket_fd, (struct sockaddr *)&amp;dest, &amp;size)</code> but you haven&#39;t performed <code>socket()</code> on <code>socket_fd</code>. Thus <code>Socket operation on non-socket</code> ."}, {"owner": {"reputation": 31, "user_id": 3237505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7af9d508df8e92f87064ee866ed78806?s=128&d=identicon&r=PG&f=1", "display_name": "Swathi Sham", "link": "https://stackoverflow.com/users/3237505/swathi-sham"}, "reply_to_user": {"reputation": 6986, "user_id": 2968959, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/34c70f9a66b79ca49e2b14e3c075fe3d?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Meshram", "link": "https://stackoverflow.com/users/2968959/saurabh-meshram"}, "edited": false, "score": 0, "creation_date": 1424843710, "post_id": 28711378, "comment_id": 45712336, "body": "@SaurabhMeshram Thank you. I added the socket() for socket_fd. But, my error still says:  accept: Invalid argument"}, {"owner": {"reputation": 9353, "user_id": 3197055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ns7gZ.jpg?s=128&g=1", "display_name": "Kavindu Dodanduwa", "link": "https://stackoverflow.com/users/3197055/kavindu-dodanduwa"}, "edited": false, "score": 0, "creation_date": 1424844282, "post_id": 28711378, "comment_id": 45712553, "body": "@Swathi Sham what&#39;s the error message ? is it runtime or compile time ?"}], "answers": [{"comments": [{"owner": {"reputation": 9353, "user_id": 3197055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ns7gZ.jpg?s=128&g=1", "display_name": "Kavindu Dodanduwa", "link": "https://stackoverflow.com/users/3197055/kavindu-dodanduwa"}, "reply_to_user": {"reputation": 31, "user_id": 3237505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7af9d508df8e92f87064ee866ed78806?s=128&d=identicon&r=PG&f=1", "display_name": "Swathi Sham", "link": "https://stackoverflow.com/users/3237505/swathi-sham"}, "edited": false, "score": 0, "creation_date": 1424850325, "post_id": 28712193, "comment_id": 45715215, "body": "@Swathi Sham - If you believe this is the answer, mark it as correct :)  <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>"}], "tags": [], "owner": {"reputation": 9353, "user_id": 3197055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ns7gZ.jpg?s=128&g=1", "display_name": "Kavindu Dodanduwa", "link": "https://stackoverflow.com/users/3197055/kavindu-dodanduwa"}, "is_accepted": false, "score": 1, "last_activity_date": 1424843816, "creation_date": 1424843816, "answer_id": 28712193, "question_id": 28711378, "link": "https://stackoverflow.com/questions/28711378/running-a-program-from-server-and-connecting-this-to-the-same-client/28712193#28712193", "title": "Running a program from Server and connecting this to the same client", "body": "<p>So your  Client Program begin to act as a <code>server</code> but you haven't created the necessary <code>socket</code> to accept a connection there. <code>socket_fd</code> have been used uninitialized from <code>socket()</code></p>\n\n<p>Following need to be added updated after <code>//while(1) {</code> in Client</p>\n\n<pre><code>//while(1) {\n/* Get the Socket file descriptor */\nif ((socket_fd= socket(AF_INET, SOCK_STREAM, 0)) == -1)\n{\n    fprintf(stderr, \"ERROR: Failed to obtain Socket Descriptor! (errno = %d)\\n\",errno);\n    exit(1);\n}\n\n/* Fill the socket address struct */\nremote_addr.sin_family = AF_INET; \nremote_addr.sin_port = htons(PORT2); \ninet_pton(AF_INET, \"127.0.0.1\", &amp;remote_addr.sin_addr); \nbzero(&amp;(remote_addr.sin_zero), 8);\n\nif ((client_fd = accept(socket_fd, (struct sockaddr *)&amp;dest, &amp;size))==-1 ) \n{\n    perror(\"accept\");\n    exit(1);\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3237505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7af9d508df8e92f87064ee866ed78806?s=128&d=identicon&r=PG&f=1", "display_name": "Swathi Sham", "link": "https://stackoverflow.com/users/3237505/swathi-sham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424843816, "creation_date": 1424839928, "question_id": 28711378, "link": "https://stackoverflow.com/questions/28711378/running-a-program-from-server-and-connecting-this-to-the-same-client", "title": "Running a program from Server and connecting this to the same client", "body": "<p>I am sending hello.c file from the client to the server. The server receives it and stores it as hello123.c. I am trying to compile this file and run it using the system() command.\nIn this hello.c / hello123.c, I am trying to connect back to the same client. </p>\n\n<pre><code>/* Server Program*/ \n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;ctype.h&gt;          \n#include &lt;arpa/inet.h&gt;\n#include &lt;netdb.h&gt;\n\n#define PORT 20001 \n#define BACKLOG 5\n#define LENGTH 512 \n\nint main ()\n{\nint sockfd; \nint nsockfd; \nint num;\nint sin_size; \nstruct sockaddr_in addr_local; /* client addr */\nstruct sockaddr_in addr_remote; /* server addr */\nchar revbuf[LENGTH];\n\n/* Get the Socket file descriptor */\nif((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1 )\n{\n    fprintf(stderr, \"ERROR: Failed to obtain Socket Descriptor. (errno = %d)\\n\", errno);\n    exit(1);\n}\nelse \n    printf(\"[Server] Obtaining socket descriptor successfully.\\n\");\n\n/* Fill the client socket address struct */\naddr_local.sin_family = AF_INET; // Protocol Family\naddr_local.sin_port = htons(PORT); // Port number\naddr_local.sin_addr.s_addr = INADDR_ANY; // AutoFill local address\nbzero(&amp;(addr_local.sin_zero), 8); // Flush the rest of struct\n\n/* Bind a special Port */\nif( bind(sockfd, (struct sockaddr*)&amp;addr_local, sizeof(struct sockaddr)) == -1 )\n{\n    fprintf(stderr, \"ERROR: Failed to bind Port. (errno = %d)\\n\", errno);\n    exit(1);\n}\nelse \n    printf(\"[Server] Binded tcp port %d in addr 127.0.0.1 sucessfully.\\n\",PORT);\n\n/* Listen remote connect/calling */\nif(listen(sockfd,BACKLOG) == -1)\n{\n    fprintf(stderr, \"ERROR: Failed to listen Port. (errno = %d)\\n\", errno);\n    exit(1);\n}\nelse\n    printf (\"[Server] Listening the port %d successfully.\\n\", PORT);\n\nint success = 0;\nwhile(success == 0)\n{\n    sin_size = sizeof(struct sockaddr_in);\n\n    /* Wait a connection, and obtain a new socket file despriptor for single connection */\n    if ((nsockfd = accept(sockfd, (struct sockaddr *)&amp;addr_remote, &amp;sin_size)) == -1) \n    {\n    fprintf(stderr, \"ERROR: Obtaining new Socket Despcritor. (errno = %d)\\n\", errno);\n    exit(1);\n    }\n    else \n    printf(\"[Server] Server has got connected from %s.\\n\", inet_ntoa(addr_remote.sin_addr));\n\n\n        char buffer[256];\n        bzero(buffer,256);\n        int n = 0;\n        n = read(nsockfd, buffer, 255);\n        if (n &lt; 0) error(\"ERROR reading from socket\");\n        printf(\"msg: %s\\n\",buffer);\n\n    /*Receive File from Client */\n    char* fr_name = \"hello123.c\";\n    FILE *fr = fopen(fr_name, \"a\");\n    if(fr == NULL)\n    printf(\"File %s Cannot be opened file on server.\\n\", fr_name);\n    else\n    {\n    bzero(revbuf, LENGTH); \n    int fr_block_sz = 0;\n    while((fr_block_sz = recv(nsockfd, revbuf, LENGTH, 0)) &gt; 0) \n    {\n        int write_sz = fwrite(revbuf, sizeof(char), fr_block_sz, fr);\n        if(write_sz &lt; fr_block_sz)\n        {\n            error(\"File write failed on server.\\n\");\n        }\n        bzero(revbuf, LENGTH);\n        if (fr_block_sz == 0 || fr_block_sz != 512) \n        {\n            break;\n        }\n    }\n    if(fr_block_sz &lt; 0)\n    {\n        if (errno == EAGAIN)\n        {\n            printf(\"recv() timed out.\\n\");\n        }\n        else\n        {\n            fprintf(stderr, \"recv() failed due to errno = %d\\n\", errno);\n            exit(1);\n        }\n    }\n    printf(\"Ok received from client!\\n\");\n    fclose(fr); \n\n    }\n    system(\"gcc hello123.c -o hello123.out\");\n    system(\"./hello123.out\");\n\n\n}\n\n}\n</code></pre>\n\n<p>The following is the Client Program.</p>\n\n<pre><code> /* Client Program */   \n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;ctype.h&gt;          \n#include &lt;arpa/inet.h&gt;\n#include &lt;netdb.h&gt;\n\n#define PORT1 20001\n#define PORT2 20002\n#define LENGTH 512 \n\nint main(int argc, char *argv[]){\nint sockfd; \nint nsockfd;\nchar revbuf[LENGTH]; \nstruct sockaddr_in remote_addr;\nstruct sockaddr_in server;\nstruct sockaddr_in dest;\nint status,socket_fd, client_fd,num;\nsocklen_t size;\n\nchar buffer[1024];\nchar *buff, ch;\n\n/* Get the Socket file descriptor */\nif ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1)\n{\n    fprintf(stderr, \"ERROR: Failed to obtain Socket Descriptor! (errno = %d)\\n\",errno);\n    exit(1);\n}\n\n/* Fill the socket address struct */\nremote_addr.sin_family = AF_INET; \nremote_addr.sin_port = htons(PORT1); \ninet_pton(AF_INET, \"127.0.0.1\", &amp;remote_addr.sin_addr); \nbzero(&amp;(remote_addr.sin_zero), 8);\n\n/* Try to connect the remote */\nif (connect(sockfd, (struct sockaddr *)&amp;remote_addr, sizeof(struct sockaddr)) == -1)\n{\n    fprintf(stderr, \"ERROR: Failed to connect to the host! (errno = %d)\\n\",errno);\n    exit(1);\n}\nelse \n    printf(\"[Client] Connected to server at port %d...ok!\\n\", PORT1);\n\n/* Send File to Server */\n//if(!fork())\n//{\n    char* fs_name = \"hello.c\";\n    char sdbuf[LENGTH]; \n\n       // char buffer[256];\n        int n;\n        fgets(buffer,255,stdin);\n       // bzero(buffer,256);\n        n = write(sockfd,buffer, strlen(buffer));\n        if(n&lt;0) printf(\"Error: sending filename\");\n\n    printf(\"[Client] Sending %s to the Server... \", fs_name);\n    FILE *fs = fopen(fs_name, \"r\");\n    if(fs == NULL)\n    {\n    printf(\"ERROR: File %s not found.\\n\", fs_name);\n    exit(1);\n    }\n\n    bzero(sdbuf, LENGTH); \n    int fs_block_sz;\n    while((fs_block_sz = fread(sdbuf, sizeof(char), LENGTH, fs)) &gt; 0)\n    {\n    if(send(sockfd, sdbuf, fs_block_sz, 0) &lt; 0)\n    {\n        fprintf(stderr, \"ERROR: Failed to send file %s. (errno = %d)\\n\", fs_name, errno);\n        break;\n    }\n    bzero(sdbuf, LENGTH);\n    }\n    printf(\"Ok File %s from Client was Sent!\\n\", fs_name);\n//}\n\n//while(1) {\nremote_addr.sin_family = AF_INET; \nremote_addr.sin_port = htons(PORT2); \ninet_pton(AF_INET, \"127.0.0.1\", &amp;remote_addr.sin_addr); \nbzero(&amp;(remote_addr.sin_zero), 8);\n\nsize = sizeof(struct sockaddr_in);\n\nif ((client_fd = accept(socket_fd, (struct sockaddr *)&amp;dest, &amp;size))==-1 ) \n{\n    perror(\"accept\");\n    exit(1);\n}\nprintf(\"Server got connection from client %s\\n\", inet_ntoa(dest.sin_addr));\n\nwhile(1) {\n\n    if ((num = recv(client_fd, buffer, 1024,0))== -1) {\n            perror(\"recv\");\n            exit(1);\n    }\n    else if (num == 0) {\n            printf(\"Connection closed\\n\");\n            //So I can now wait for another client\n            break;\n    }\n    buffer[num] = '\\0';\n    printf(\"Server:Msg Received %s\\n\", buffer);\n\n\n}//End of Inner While...\n//Close Connection Socket\nclose(client_fd);\n\nclose (sockfd);\nprintf(\"[Client] Connection lost.\\n\");\nreturn (0);\n\n\n}\n</code></pre>\n\n<p>The following is the Hello.c</p>\n\n<pre><code>/* Hello.c */   \n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#define PORT 20002\n#define MAXSIZE 1024\n#define SA struct sockaddr\nint main(int argc, char *argv[])\n{   \n    int sockfd,connfd;\n    struct sockaddr_in server_info;\n    struct hostent *he;\n    int socket_fd,client_fd,num;\n    char buffer[1024];\n    char i;\n\n    char buff[1024];\n    struct sockaddr_in servaddr,cli;\n    sockfd=socket(AF_INET,SOCK_STREAM,0);\n    if(sockfd==-1)\n        {\n        printf(\"Hello:socket creation failed...\\n\");\n        exit(0);\n        }\n    else\n        printf(\"Hello:Socket successfully created..\\n\");\n    bzero(&amp;servaddr,sizeof(servaddr));\n    servaddr.sin_family=AF_INET;\n    servaddr.sin_addr.s_addr=inet_addr(\"127.0.0.1\");\n    servaddr.sin_port=htons(PORT);\n    if(connect(sockfd,(SA *)&amp;servaddr,sizeof(servaddr))!=0)\n        {\n        printf(\"Hello:connection with the server failed...\\n\");\n        exit(0);\n        }\n    else\n        printf(\"Hello:connected to the server..\\n\");\n\n\n\n\n    printf(\"\\n Hello:Choose between 1 and 2\\n\");\n\n\n    printf(\"Hello:Enter Data for Server:\\n\");\n    fgets(buffer,MAXSIZE,stdin);\n     if ((send(socket_fd,buffer, strlen(buffer),0))== -1) {\n            fprintf(stderr, \"Hello:Failure Sending Message\\n\");\n            close(socket_fd);\n            exit(1);\n    }\n\n    else {\n            printf(\"Hello:Client:Message being sent: %c\\n\",i);\n\n\n\n    close(socket_fd);\n\n\n}\n}\n</code></pre>\n\n<p>When I run the program, the file transfer is happening successfully. But the Hello.c is not getting connected to the client.\nThis is my output</p>\n\n<p>Server Side:</p>\n\n<pre><code>$ ./server24.out\n[Server] Obtaining socket descriptor successfully.\n[Server] Binded tcp port 20001 in addr 127.0.0.1 sucessfully.\n[Server] Listening the port 20001 successfully.\n[Server] Server has got connected from 127.0.0.1.\nmsg: \n\nOk received from client!\nHello:Socket successfully created..\nHello:connection with the server failed...\n</code></pre>\n\n<p>Client Side:</p>\n\n<pre><code>$ ./client24.out\n[Client] Connected to server at port 20001...ok!\n\n[Client] Sending hello.c to the Server. Ok File hello.c from Client was Sent\naccept: Socket operation on non-socket\n</code></pre>\n\n<p>I guess this is some address problem. But I am not able to figure out.\nPlease help.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 2640, "user_id": 2387328, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OdMxG.jpg?s=128&g=1", "display_name": "nj-ath", "link": "https://stackoverflow.com/users/2387328/nj-ath"}, "edited": false, "score": 0, "creation_date": 1424839560, "post_id": 28711285, "comment_id": 45711071, "body": "Shouldn&#39;t it be <code>%[^\\n]s</code> ?"}, {"owner": {"reputation": 2544, "user_id": 2734665, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7GwAG.jpg?s=128&g=1", "display_name": "Mati Tucci", "link": "https://stackoverflow.com/users/2734665/mati-tucci"}, "reply_to_user": {"reputation": 2640, "user_id": 2387328, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OdMxG.jpg?s=128&g=1", "display_name": "nj-ath", "link": "https://stackoverflow.com/users/2387328/nj-ath"}, "edited": false, "score": 0, "creation_date": 1424839639, "post_id": 28711285, "comment_id": 45711095, "body": "@darknight I already tried that, and it&#39;s the same result"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424839737, "post_id": 28711285, "comment_id": 45711124, "body": "Try <code>&quot;%d ,%[^\\n,],%d&quot;</code>"}, {"owner": {"reputation": 2544, "user_id": 2734665, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7GwAG.jpg?s=128&g=1", "display_name": "Mati Tucci", "link": "https://stackoverflow.com/users/2734665/mati-tucci"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424839932, "post_id": 28711285, "comment_id": 45711182, "body": "@chux is saving only the word <code>Vino</code> in the description"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424839997, "post_id": 28711285, "comment_id": 45711199, "body": "Re-wrote - took <code>&#39; &#39;</code> out of <code>&quot;%[^\\n, ],&quot;</code>"}, {"owner": {"reputation": 2544, "user_id": 2734665, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7GwAG.jpg?s=128&g=1", "display_name": "Mati Tucci", "link": "https://stackoverflow.com/users/2734665/mati-tucci"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424840187, "post_id": 28711285, "comment_id": 45711249, "body": "@chux nope. Still having the same issue. To be clear, I&#39;m am writing: <code>&quot;%d,%[^\\n, ],%d\\n&quot;</code>, is that what you meant?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1424841401, "post_id": 28711490, "comment_id": 45711634, "body": "@user3386109 True that including <code>\\n</code> in <code>&quot;%39[^\\n,]&quot;</code> is really not reeded: coudl be <code>&quot;%39[^,]&quot;</code>.  IAC, the check of the return values <code>fgets()</code> and <code>sscanf()</code> will insure all items exists including the 2nd <code>&#39;,&#39;</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "edited": false, "score": 1, "creation_date": 1424841794, "post_id": 28711490, "comment_id": 45711765, "body": "@Sridhar  Omitting the 39 in <code>&quot;%39[^,]&quot;</code> leads to a problem when the <code>description</code> input exceeds 39 <code>char</code>.  Liberal user of <code>&quot; &quot;</code> in a <code>sscanf()</code> allows for usually acceptable additional spacing, hence my suggested spaces in the format - though mostly optional."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1424842750, "last_edit_date": 1495540765, "creation_date": 1424840490, "answer_id": 28711490, "question_id": 28711285, "link": "https://stackoverflow.com/questions/28711285/fscanf-reading-string-with-spaces-in-formatted-lines/28711490#28711490", "title": "fscanf() reading string with spaces in formatted lines", "body": "<p>The main issue is <code>\"%[^\\n],\"</code>.  The <code>\"%[^\\n]\"</code> scans in all except the <code>'\\n'</code>, so <code>description</code> scans in the <code>','</code>.  Code needs to stop scanning into <code>description</code> when a comma is encountered.</p>\n\n<p>With line orientated file data, 1st read 1 line at a time.</p>\n\n<pre><code>char buf[100];\nif (fgets(buf, sizeof buf, file) == NULL) Handle_EOForIOError();\n</code></pre>\n\n<p>Then scan it.  Use <code>%39[^,]</code> to not scan in <code>','</code> and limit width to 39 <code>char</code>.</p>\n\n<pre><code>int cnt = sscanf(buf,\"%d , %39[^,],%d\", &amp;p.code, p.description, &amp;p.price);\nif (cnt != 3) Handle_IllFormattedData();\n</code></pre>\n\n<p>Another nifty trick is: use <code>\" %n\"</code> to record the end of parsing.</p>\n\n<pre><code>int n = 0;\nsscanf(buf,\"%d , %39[^,],%d %n\", &amp;p.code, p.description, &amp;p.price, &amp;n);\nif (n == 0 || buf[n]) Handle_IllFormattedData_or_ExtraData();\n</code></pre>\n\n<hr>\n\n<p>[Edit]  </p>\n\n<p>Simplification: @user3386109</p>\n\n<p>Correction: <a href=\"https://stackoverflow.com/users/3049655/cool-guy\">@cool-guy</a> remove &amp;</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424842639, "post_id": 28711775, "comment_id": 45712031, "body": "Nice approach to using <code>fscanf()</code> directly.  There are subtle differences between <code>fscanf()</code> vs. <code>fgets()&#47;sscanf()</code>  1) Should file data contain an embedded null character <code>&#39;\\0&#39;</code>, <code>fscanf(...&quot;%39[^,]&quot;...)</code> will consume the <code>&#39;\\0&#39;</code> and continue. OTOH, so will <code>fgets()</code> but its better detected with <code>sscanf()</code>. 2) When the input is wrong (bad syntax), the <code>fgets()&#47;sscanf()</code> approach is easier to re-sync and continue on than <code>fscanf()</code>.  Yet on the <code>fscanf()</code> plus side - it is simpler for quick coding."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424847454, "post_id": 28711775, "comment_id": 45713847, "body": "I didn&#39;t know that! What does an embedded <code>\\0</code> mean?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424877351, "post_id": 28711775, "comment_id": 45731861, "body": "Say a file has the unusual line: &quot;1,abc\\0xyz,12\\n&quot;.  <code>fscanf( ...&quot;%d,%39[^,],%d&quot;...)</code> scans 7 <code>char</code> into <code>description</code> and then appends a terminating null character <code>&#39;\\0&#39;</code> so it has the contents <code>&quot;abc&quot;</code>, a null character , <code>&quot;xyz&quot;</code> and a final null character.  Upon printing <code>description</code>, only <code>&quot;abc&quot;</code> appears.  With <code>fgets()</code>, the same <code>&quot;1,abc\\0xyz,12\\n&quot;.</code> will be read into a buffer, but <code>sscanf()</code> will stop scanning on the first <code>&#39;\\0&#39;</code> and so only see <code>&quot;1,abc&quot;.</code> and fail the <code>sscanf()</code> parsing."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424878008, "post_id": 28711775, "comment_id": 45732353, "body": "Embedded <code>&#39;\\0&#39;</code> are <i>not</i> common. but they sporadically occur and also are a potential nefarious way for hackers to break code."}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 1, "last_activity_date": 1424842147, "last_edit_date": 1424842147, "creation_date": 1424841825, "answer_id": 28711775, "question_id": 28711285, "link": "https://stackoverflow.com/questions/28711285/fscanf-reading-string-with-spaces-in-formatted-lines/28711775#28711775", "title": "fscanf() reading string with spaces in formatted lines", "body": "<p><a href=\"http://www.stackoverflow.com/questions/28711285/fscanf-reading-string-with-spaces-in-formatted-lines/28711490#28711490\">@chux</a> has already posted a good answer on this, but if you need to use <code>fscanf</code>, use</p>\n\n<pre><code>if(fscanf(file,\"%d,%39[^,],%d\",&amp;p.code,p.description,&amp;p.price)!=3)\n    Handle_Bad_Data();\n</code></pre>\n\n<p>Here, the <code>fscanf</code> first scans a number(<code>%d</code>) and puts it in <code>p.code</code>. Then, it scans a comma(and discards it) and then scans a maximum of 39 characters or until a comma and puts everything in <code>p.description</code>. Then, it scans a comma(and discards it) and then, a number(<code>%d</code>) and puts it in <code>p.price</code>.</p>\n"}], "owner": {"reputation": 2544, "user_id": 2734665, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7GwAG.jpg?s=128&g=1", "display_name": "Mati Tucci", "link": "https://stackoverflow.com/users/2734665/mati-tucci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7344, "favorite_count": 3, "accepted_answer_id": 28711490, "answer_count": 2, "score": 4, "last_activity_date": 1424842750, "creation_date": 1424839366, "question_id": 28711285, "link": "https://stackoverflow.com/questions/28711285/fscanf-reading-string-with-spaces-in-formatted-lines", "title": "fscanf() reading string with spaces in formatted lines", "body": "<p>Using this structure:</p>\n\n<pre><code>typedef struct sProduct{\n  int code;\n  char description[40];\n  int price;\n};\n</code></pre>\n\n<p>I want to read a txt file with this format:</p>\n\n<pre><code>1,Vino Malbec,12\n</code></pre>\n\n<p>where the format is: <code>code,description,price</code>. But I'm having problems to read the description when it has a space.</p>\n\n<p>I tried this:</p>\n\n<pre><code>fscanf(file,\"%d,%[^\\n],%d\\n\",&amp;p.code,&amp;p.description,&amp;p.price);\n</code></pre>\n\n<p>The code is being saved ok, but then in description is being saved <code>Vino Malbec,12</code>, when I only want to save <code>Vino Malbec</code> because <code>12</code> is the price.</p>\n\n<p>Any help?\nThanks!</p>\n"}]