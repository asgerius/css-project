[{"tags": ["c", "switch-statement", "argv"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1485388403, "post_id": 41863805, "comment_id": 70911241, "body": "Seems like you have way too many pre-increment and post-increment operators."}, {"owner": {"reputation": 115, "user_id": 5559919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/451e8782c71cf5804989bb2ad548984c?s=128&d=identicon&r=PG&f=1", "display_name": "jazaniac", "link": "https://stackoverflow.com/users/5559919/jazaniac"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1485388959, "post_id": 41863805, "comment_id": 70911395, "body": "@user3386109 Can you elaborate? Sorry, I&#39;m new to C."}, {"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 2, "creation_date": 1485390279, "post_id": 41863805, "comment_id": 70911772, "body": "Your code has several problems. On is, that your for loop run to far ... ` for (int i = 1; i &lt;= argc; i++)` should be ` for (int i = 1; i &lt; argc; i++)`."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1485391207, "post_id": 41863805, "comment_id": 70912027, "body": "Try printing out the command line arguments with code like this <code>for(int i=1;i&lt;argc;i++){printf(&quot;(%s)\\n&quot;,argv[i]); for(int j=0;argv[i][j]!=&#39;\\0&#39;;j++){printf(&quot;&#39;%c&#39; &quot;,argv[i][j]);}putchar(&#39;\\n&#39;);}</code>  Then see if you can use something similar to accomplish your task."}, {"owner": {"reputation": 115, "user_id": 5559919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/451e8782c71cf5804989bb2ad548984c?s=128&d=identicon&r=PG&f=1", "display_name": "jazaniac", "link": "https://stackoverflow.com/users/5559919/jazaniac"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1485392344, "post_id": 41863805, "comment_id": 70912284, "body": "@user3386109 that code looks pretty similar to the one I had, just with an additional printing function, although printing the chars isn&#39;t really what I&#39;m trying to accomplish. That was just testing to make sure what I was doing worked. The value still isn&#39;t stored to &quot;red&quot;, with this code."}, {"owner": {"reputation": 402, "user_id": 4084636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1E6K5.jpg?s=128&g=1", "display_name": "Adrian M.", "link": "https://stackoverflow.com/users/4084636/adrian-m"}, "edited": false, "score": 0, "creation_date": 1485403515, "post_id": 41863805, "comment_id": 70915876, "body": "Isn&#39;t &#39;char * argv[] specifying an array is a pointer to a parameter of type char?  Is this intended?  Could you use simply char[] instead, and pass in the name of the array as a pointer to its first position?  Maybe a type issue is preventing the if statement from executing.  What output are you actually getting?"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5559919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/451e8782c71cf5804989bb2ad548984c?s=128&d=identicon&r=PG&f=1", "display_name": "jazaniac", "link": "https://stackoverflow.com/users/5559919/jazaniac"}, "edited": false, "score": 0, "creation_date": 1485395450, "post_id": 41864618, "comment_id": 70913083, "body": "Okay, gotcha. I have since updated the for loop to be <code>for(i=1;i&lt;argc;i++)</code>, but it still won&#39;t update red. Is there some other problem that it&#39;s running into or is the original problem not solved yet?"}], "tags": [], "owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "is_accepted": false, "score": 0, "last_activity_date": 1485394333, "creation_date": 1485394333, "answer_id": 41864618, "question_id": 41863805, "link": "https://stackoverflow.com/questions/41863805/what-is-going-wrong-with-my-switch-function/41864618#41864618", "title": "What is going wrong with my switch function?", "body": "<p>Because of the too many <code>i++</code> operations, your program invokes <em>undefined behavior</em>, since you access the <code>argv</code> array out of bounds.</p>\n\n<p>After that, you cannot say anything about the program's behavior. It is even allowed to delete all your files.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1485399628, "creation_date": 1485399628, "answer_id": 41865258, "question_id": 41863805, "link": "https://stackoverflow.com/questions/41863805/what-is-going-wrong-with-my-switch-function/41865258#41865258", "title": "What is going wrong with my switch function?", "body": "<p>You're trying to do too much at once with the increment operator.  As a result, you get confused as to what the code is doing.  Specifically, you increment <code>i</code> twice inside of the loop when calculating the sine.</p>\n\n<p>Break out the extra increment only when it's needed:</p>\n\n<pre><code>  for (int i = 1; i &lt; argc; i++) {\n    printf(\"%s\\n\", argv[i]);\n    if (argv[i][0] == '-'){     // check the first char of the current arg\n      switch (argv[i][1]) {     // check the second char of the current arg\n        case 'r':\n          red = sin(0.2*atof(argv[i+1]));   // grab the value from the next arg\n          printf(\"argv: %f\\n\", sin(0.2*atof(argv[i+1])));   // grab the next arg again\n          printf(\"red: %f\\n\", red);\n          i++;                  // do an extra increment at the end since we processed 2 args\n          break;\n      }\n    }\n  }\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5559919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/451e8782c71cf5804989bb2ad548984c?s=128&d=identicon&r=PG&f=1", "display_name": "jazaniac", "link": "https://stackoverflow.com/users/5559919/jazaniac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1485399628, "creation_date": 1485388237, "last_edit_date": 1485398468, "question_id": 41863805, "link": "https://stackoverflow.com/questions/41863805/what-is-going-wrong-with-my-switch-function", "title": "What is going wrong with my switch function?", "body": "<p>What is going wrong with my switch function?\nit looks like this </p>\n\n<pre><code>void ss(int argc, char *argv[])\n{\n  int side_length = 200;\n  double red = 0.0;\n  double green = 0.0;\n  double blue = 0.0;\n\n  for (int i = 1; i &lt;= argc; i++) {\n    printf(\"%s\\n\", argv[i]);\n    if (*argv[i] == '-'){\n      switch (*++argv[i]) {\n        case 'r':\n          red = sin(0.2*atof(argv[i++]));\n          printf(\"argv: %f\\n\", sin(0.2*atof(argv[i++])));\n          printf(\"red: %f\\n\", red);\n          break;\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>I'm planning to add more switch cases later, but right now I'm focusing on red so I can just replicate it. It seems like the problem is in that it just doesn't store the value I want it to in red, it returns the value in the other printf statement just fine. </p>\n\n<p>edit: I have since used both for (int i = 1; i &lt; argc; i++) and for (int i = 1; argv[i] != '\\0'; i++) and neither have worked. Still looking for an answer.</p>\n"}, {"tags": ["c", "file"], "answers": [{"comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 3, "creation_date": 1485388222, "post_id": 41863782, "comment_id": 70911189, "body": "You mean <i>without allocating any memory</i> instead of <i>without initialising it</i>, don&#39;t you?"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1485388418, "post_id": 41863782, "comment_id": 70911244, "body": "@KenWhite as it stands pointer <code>*line</code> is uninitialised. And using any unitialised variable is UB. So what I mean is that it should be initialised before used, ie it has to point to some valid location - and that valid location has to be allocated first."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1485388584, "post_id": 41863782, "comment_id": 70911284, "body": "OK. So you&#39;re telling this poster that if they initialize it to NULL it will work? In this case, the variable would require being initialized with a memory allocation, and any use of it would require that memory be allocated first."}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1485388670, "post_id": 41863782, "comment_id": 70911311, "body": "@KenWhite haha no, I didn&#39;t say initialising it to NULL would work. I only said it UB and to fix that s/he can (should) use a char buffer (char array) instead"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1485388777, "post_id": 41863782, "comment_id": 70911344, "body": "(using char array would do away with allocation)"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1485389936, "post_id": 41863782, "comment_id": 70911675, "body": "Yes, because it <i>allocates memory to store content</i>. And yes, you <i>did</i> say if they initialized it the code would work, and assigning NULL directly would be initialization. :-)"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1485390445, "post_id": 41863782, "comment_id": 70911818, "body": "@KenWhite I disgree with this part: &quot;And yes, you did say if they initialized it the code would work&quot; I did not say that, at least explicitly ;)"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1485390625, "post_id": 41863782, "comment_id": 70911882, "body": "To nitpick: You said <i>without initializing it</i>, and directly assigning NULL to it would in fact <i>initialize it</i> (to NULL). That was the point of my initial comment. You&#39;ll also note that I didn&#39;t downvote your answer; I simply commented regarding a suggested change in phrasing."}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1485391109, "post_id": 41863782, "comment_id": 70912004, "body": "@KenWhite that&#39;s totally fine. I don&#39;t disagree with your initial comment. It&#39;s correct in the context of pointer. However my statement isn&#39;t wrong either - because the usage of any unitialised variable (including pointer) is UB"}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 0, "last_activity_date": 1485388237, "last_edit_date": 1485388237, "creation_date": 1485388120, "answer_id": 41863782, "question_id": 41863755, "link": "https://stackoverflow.com/questions/41863755/c-program-to-read-a-text-file-line-by-line-then-print-out-those-lines-to-the-ter/41863782#41863782", "title": "C program to read a text file line by line then print out those lines to the terminal", "body": "<p>You used <code>*line</code> without initialising it -> undefined behavior.</p>\n\n<p>To fix that, you can use a char array instead:</p>\n\n<pre><code>char line[1000] = \"\"; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "is_accepted": false, "score": 1, "last_activity_date": 1485389108, "last_edit_date": 1485389108, "creation_date": 1485388397, "answer_id": 41863831, "question_id": 41863755, "link": "https://stackoverflow.com/questions/41863755/c-program-to-read-a-text-file-line-by-line-then-print-out-those-lines-to-the-ter/41863831#41863831", "title": "C program to read a text file line by line then print out those lines to the terminal", "body": "<p>Your loop is not working, because <code>fscanf</code> does not return just <code>1</code> on success.</p>\n\n<p>According to the man page of <code>fscanf</code>, the return value has the following meaning:</p>\n\n<blockquote>\n  <p>RETURN VALUE</p>\n  \n  <p>On success, these functions return the number of input items\n  successfully matched and assigned; this can be fewer than provided for, or even zero, in the event of an early matching failure.</p>\n  \n  <p>The  value EOF is returned if the end of input is reached before either the first successful conversion or a matching failure occurs. EOF is also returned if a read error occurs, in which case the error indicator for the stream (see ferror(3)) is set, and errno is set to indicate the error.</p>\n</blockquote>\n\n<p>Additionally as already stated in another answer: You write to memory that is <strong>NOT YOUR</strong> memory:</p>\n\n<pre><code>char* line;\n</code></pre>\n\n<p>is just a the declaration of a pointer to a char. What you need is a contiguous array of char to write to.</p>\n\n<p>You either can allocate this on the stack by declaring it:</p>\n\n<pre><code>char line[1000]; // Allocate a char array of the size of 1000.\n</code></pre>\n\n<p>or on the heap;</p>\n\n<pre><code>char* line = malloc(1000*sizeof(char)); // Allocate 1000 chars on the heap\n</code></pre>\n\n<p>here you have to free the memory afterwards</p>\n\n<pre><code>free(line);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7093145"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1485392785, "creation_date": 1485387915, "question_id": 41863755, "link": "https://stackoverflow.com/questions/41863755/c-program-to-read-a-text-file-line-by-line-then-print-out-those-lines-to-the-ter", "title": "C program to read a text file line by line then print out those lines to the terminal", "body": "<p>I want to have a c program read a text file line by line then print out those lines to the terminal.</p>\n\n<p>My code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    char* line; \n\n    FILE *ifp;\n    ifp = fopen(\"BBE.txt\", \"r\");\n    if (ifp == NULL)\n    {\n        printf(\"Error opening file!\\n\");\n        exit(1);\n    }\n\n    while (fscanf(ifp, \"%s\", line) == 1)\n    {\n        printf(\"%s\\n\", line);\n    }\n\n    fclose(ifp);\n\n    return 0;\n}\n</code></pre>\n\n<p>The program when i try to run it does not print out anything to the terminal. This tells me that the while loop is not working but i am not to sure as to why. </p>\n"}, {"tags": ["c", "string", "pointers", "strchr"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485387701, "post_id": 41863674, "comment_id": 70911057, "body": "Not clear what your problem is. <code>strchr</code> is quite a simple function. However, you cannot return a pointer or an integer from your function, that assignment is nonsense as given (and teaching to use <code>0</code> as null pointer constant is bad style; use the <code>NULL</code> macro). Maybe your prof means a <i>null pointer</i>, which is not the same as the integer <code>0</code>? But then you cannot print this like a string, but test explicitly and print something different (that&#39;s trhe idea of null pointers)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1485387904, "post_id": 41863674, "comment_id": 70911108, "body": "And don&#39;t post images of text. You should at least paste it as text."}, {"owner": {"reputation": 109, "user_id": 2836798, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bbcf507eb453281701014ccc728f8753?s=128&d=identicon&r=PG&f=1", "display_name": "nastypluto", "link": "https://stackoverflow.com/users/2836798/nastypluto"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485388081, "post_id": 41863674, "comment_id": 70911142, "body": "I will edit it now."}, {"owner": {"reputation": 109, "user_id": 2836798, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bbcf507eb453281701014ccc728f8753?s=128&d=identicon&r=PG&f=1", "display_name": "nastypluto", "link": "https://stackoverflow.com/users/2836798/nastypluto"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485388731, "post_id": 41863674, "comment_id": 70911332, "body": "Yeah, I am not sure what he is asking here. I don&#39;t know how that &quot;s+1&quot; and &quot;s+2&quot; works here."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1485436393, "post_id": 41863674, "comment_id": 70929997, "body": "the posted code is using a header file: <code>stringproblems.h</code> but the contents of that file is not posted.  Do you expect us to guess as to the contents of that file?"}], "answers": [{"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 4, "last_activity_date": 1485389911, "last_edit_date": 1485389911, "creation_date": 1485388513, "answer_id": 41863857, "question_id": 41863674, "link": "https://stackoverflow.com/questions/41863674/how-to-write-your-own-strchr-in-c-using-pointers/41863857#41863857", "title": "How to write your own strchr in c using pointers?", "body": "<p>From the manual:</p>\n\n<ul>\n<li><code>char *strchr(const char *s, int c);</code> --> the 2nd argument is an int</li>\n<li>The  strchr() and strrchr() functions return a pointer to the matched character or NULL if the character is not found.</li>\n<li>The terminating null byte is considered part of the string,\n   so that if c is specified as '\\0', these functions return a pointer to the terminator.</li>\n<li>[there is no defined behaviour if the first argument happens to be NULL]</li>\n</ul>\n\n<hr>\n\n<pre><code>char *strchr42(char *str, int ch)\n{\nfor (;; str++) {\n        if (*str == ch) return str;\n        if (!*str) return NULL;\n        }\nreturn NULL;\n}\n</code></pre>\n\n<hr>\n\n<p>or even shorter:</p>\n\n<hr>\n\n<pre><code>char *strchr42a(char *str, int ch)\n{\ndo      {\n        if (*str == ch) return str;\n        } while (*str++) ;\nreturn NULL;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1485391685, "post_id": 41863863, "comment_id": 70912132, "body": "Note: <code>return</code> is <b>not</b> a function. <code>return (NULL);</code> --&gt;&gt; <code>return NULL;</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485396491, "post_id": 41863863, "comment_id": 70913310, "body": "&quot;Note that in this context, even though NULL is 0&quot; - err, that&#39;s wrong for many implementations. Typically the <code>NULL</code> <b>macro</b> is <code>(void *)0</code>. Even iff it was <code>0</code> for a particular implementation, you cannot and shall not rely on it."}, {"owner": {"reputation": 31, "user_id": 6142482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sTzqA.jpg?s=128&g=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6142482/julien"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1485563122, "post_id": 41863863, "comment_id": 70992525, "body": "Thanks @wildplasser. Yes return is not a function, but this is the C style I am using :)"}], "tags": [], "owner": {"reputation": 31, "user_id": 6142482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sTzqA.jpg?s=128&g=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6142482/julien"}, "is_accepted": false, "score": 3, "last_activity_date": 1485390091, "last_edit_date": 1485390091, "creation_date": 1485388555, "answer_id": 41863863, "question_id": 41863674, "link": "https://stackoverflow.com/questions/41863674/how-to-write-your-own-strchr-in-c-using-pointers/41863863#41863863", "title": "How to write your own strchr in c using pointers?", "body": "<p>There are a couple of small things you should add or re-organize in your code to make it work.</p>\n\n<p>First, this piece of code</p>\n\n<pre><code>  while (*str != ch) {\n    ++str;\n    ++index;\n  }\n</code></pre>\n\n<p>will not stop at the end of your string and will continue looping until it finds your char somewhere after the string in the virtual memory of the process.</p>\n\n<p>So you should probably have a condition for stopping that checks for the end of the string (strings in C ends with the char <code>\\0</code>, ASCII code = 0):</p>\n\n<pre><code>while (*str != '\\0')\n</code></pre>\n\n<p>Second thing, you are comparing <code>ch</code> with the current char of the string after the loop. You should probably move this code inside the loop: you need to check every character of the string against <code>ch</code>. Also, you don't need to use both an index and increment the pointer <code>str</code>. So you can get rid of the <code>index</code> variable. If at anytime in your loop you find the correct <code>ch</code> then you can directly return the pointer to it using <code>str</code>. If you get out of your loop, it means that you did not find the <code>ch</code> inside <code>str</code> and then you can return <code>NULL</code> (cf <code>man strchr</code> for more on return values).</p>\n\n<pre><code>char *strchr406(char str[], char ch)\n{\n     while (*str != '\\0')\n     {\n          if (*str == ch)\n          {\n               return (str);\n          }\n          str++;\n     }\n     return (NULL);\n}\n</code></pre>\n\n<p>Note that in this context, even though <code>NULL</code> is <code>0</code>, it's better to use <code>NULL</code> since you are supposed to return a pointer.</p>\n\n<p>Last thing, if you want to do exactly like <code>strchr</code>, then if <code>ch</code> is <code>'\\0'</code> you should return the pointer to the <code>'\\0'</code> at the end of the string <code>str</code>. From the man: <code>The  terminating  null  byte  is considered part of the string, so that if c is specified as '\\0', these functions return a pointer to the terminator</code>. So your code becomes:</p>\n\n<pre><code>char *strchr406(char str[], char ch)\n{\n     while (*str != '\\0')\n     {\n          if (*str == ch)\n          {\n               return (str);\n          }\n          str++;\n     }\n     /**                                                                                                                    \n      * if ch is '\\0', you should return                                                                                    \n      * the pointer to the `\\0` of the string str                                                                           \n      */                                                                                                                    \n     if (*str == ch)                                                                                                        \n     {                                                                                                                      \n          return (str);\n     }\n     return (NULL);\n}\n</code></pre>\n\n<p>Note: Thanks to @chux for pointing this last thing out.</p>\n\n<p>Note 2: You don't need to check if <code>str</code> is <code>NULL</code> in this context.</p>\n\n<p>Note 3: The \"official\" prototype for strchr is <code>char *strchr(const char *s, int c);</code> so depending on your project requirements you might want to update your prototype to match to this one.</p>\n"}, {"comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1485389012, "post_id": 41863871, "comment_id": 70911418, "body": "And tell your professor that the type of the 2nd argument to strchr() is <code>int</code>, not <code>char</code>"}, {"owner": {"reputation": 109, "user_id": 2836798, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bbcf507eb453281701014ccc728f8753?s=128&d=identicon&r=PG&f=1", "display_name": "nastypluto", "link": "https://stackoverflow.com/users/2836798/nastypluto"}, "edited": false, "score": 0, "creation_date": 1485389380, "post_id": 41863871, "comment_id": 70911505, "body": "Yeah, I&#39;m coming from other languages, and still have some problems with pointers. BTW, what are your print statements actually doing? I mean How is strchr406(s, &#39;b&#39;) equals (s+1) ?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 109, "user_id": 2836798, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bbcf507eb453281701014ccc728f8753?s=128&d=identicon&r=PG&f=1", "display_name": "nastypluto", "link": "https://stackoverflow.com/users/2836798/nastypluto"}, "edited": false, "score": 0, "creation_date": 1485389527, "post_id": 41863871, "comment_id": 70911555, "body": "@nastypluto The result of comparisons in C has type int. So if for example two pointers are equal each other then the result of their comparison will be equal to 1.  In this statement printf( &quot;strchr406(s, &#39;b&#39;) == s + 1 is %d\\n&quot;, strchr406(s, &#39;b&#39;) == s + 1 ); I show that indeed the returned pointer is equal to s + 1."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485390586, "post_id": 41863871, "comment_id": 70911871, "body": "Hmm, On 2nd thought, I appear to be wrong about <code>(unsigned char)</code> bit.  Spec says &quot;The <code>strchr</code> function locates the \ufb01rst occurrence of <code>int</code> c (converted to a <code>char</code>) in the string pointed to by s. &quot; so <code>*str != (char) ch</code> is right.  Sorry about mis-leading with <code>unsigned char</code>."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485390846, "post_id": 41863871, "comment_id": 70911926, "body": "@chux Compare with &quot;3 For all functions in this subclause, each character shall be interpreted as if it had the type unsigned char &quot;:)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485396749, "post_id": 41863871, "comment_id": 70913376, "body": "@VladfromMoscow Fair enough. Combining those 2 does that mean we need the equivalent of <code>(unsigned char )*str != (unsigned char )(char)ch</code> or   <code>(unsigned char )*str !=(char)ch</code> or what?  Hmmm?"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1485389348, "last_edit_date": 1485389348, "creation_date": 1485388613, "answer_id": 41863871, "question_id": 41863674, "link": "https://stackoverflow.com/questions/41863674/how-to-write-your-own-strchr-in-c-using-pointers/41863871#41863871", "title": "How to write your own strchr in c using pointers?", "body": "<p>Here you are</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar * strchr406( const char str[], char ch ) \n{\n    while ( *str &amp;&amp; *str != ch ) ++str;\n\n    return ( char * )( ch == *str ? str : NULL );  \n}\n\nint main(void) \n{\n    char s[ ] = \"abcbc\";\n\n    printf( \"strchr406(s, 'b') == s + 1 is %d\\n\", strchr406(s, 'b') == s + 1 );\n    printf( \"strchr406(s, 'c') == s + 2 is %d\\n\", strchr406(s, 'c') == s + 2 );\n    printf( \"strchr406(s, 'd') == 0 is %d\\n\", strchr406(s, 'd') == 0 );\n    printf( \"this should return %s\\n\", strchr406(s, 'c'));\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>strchr406(s, 'b') == s + 1 is 1\nstrchr406(s, 'c') == s + 2 is 1\nstrchr406(s, 'd') == 0 is 1\nthis should return cbc\n</code></pre>\n\n<p>Say your professor that it will be correct to declare the function like</p>\n\n<pre><code>char * strchr406( const char str[], char ch );\n                  ^^^^^ \n</code></pre>\n\n<p>Moreover the standard function has the following declaration</p>\n\n<pre><code>char *strchr(const char *s, int c);\n</code></pre>\n\n<p>because character literals in C have the type int.\nSo you could write the function even the following way</p>\n\n<pre><code>char * strchr406( const char str[], int ch ) \n{\n    unsigned char c = ch;\n\n    while ( *str &amp;&amp; ( unsigned char )*str != c ) ++str;\n\n    return ( char * )( c == ( unsigned char )*str ? str : NULL );  \n}\n</code></pre>\n\n<p>As for your function then there is no sense to use the variable <code>index</code> because the pointer <code>str</code> is increased itself.</p>\n"}], "owner": {"reputation": 109, "user_id": 2836798, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bbcf507eb453281701014ccc728f8753?s=128&d=identicon&r=PG&f=1", "display_name": "nastypluto", "link": "https://stackoverflow.com/users/2836798/nastypluto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5494, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1485390091, "creation_date": 1485387441, "last_edit_date": 1485389723, "question_id": 41863674, "link": "https://stackoverflow.com/questions/41863674/how-to-write-your-own-strchr-in-c-using-pointers", "title": "How to write your own strchr in c using pointers?", "body": "<p>Ok, so I have an assignment here from my professor. Here it is:</p>\n\n<hr>\n\n<p>Write a function called strchr406. It is passed 2 parameters: a string and a char Here is the prototype for the function:\nchar *strchr406(char str[], char ch);\nThe function should return a pointer to the first instance of ch in str. For example:</p>\n\n<pre><code>char s[ ] = \"abcbc\";\nstrchr406(s, 'b');   // returns s + 1 (i.e., a pointer to the first 'b' in s)\nstrchr406(s, 'c');   // returns s + 2\nstrchr406(s, 'd');   // returns 0\n</code></pre>\n\n<hr>\n\n<p>He is asking us to write our own version of strchr using pointers. I looked up online for resources but none of it matches what he is asking us to do. I'm working with a group of other students, and none of us could figure this out. </p>\n\n<p>How do we RETURN \"s + 1\"?</p>\n\n<p>So far, I have this: \n(I also put it online if that's easier: <a href=\"https://repl.it/FVK8\" rel=\"nofollow noreferrer\">https://repl.it/FVK8</a>)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"string_problems.h\"\n\nint main() {\n  char s[ ] = \"abcbc\";\n  strchr406(s, 'b');   // returns s + 1 (i.e., a pointer to the first 'b' in s)\n  strchr406(s, 'c');   // returns s + 2\n  strchr406(s, 'd');   // returns 0\n  printf(\"this should return %s\\n\", strchr406(s, 'c'));\n  return 0;\n}\n\nchar *strchr406(char str[], char ch) {\n  char *p = str;\n  int index = 0;\n  while (*str != ch) {\n    ++str;\n    ++index;\n  }\n  if (*str == ch) {\n    return p + index;\n  } else {\n    return 0;\n  }\n\n}\n</code></pre>\n\n<p>I'm getting weird outputs. Any help is appreciated. </p>\n"}, {"tags": ["c", "base64"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "edited": false, "score": 0, "creation_date": 1485389976, "post_id": 41863803, "comment_id": 70911690, "body": "Each case you provided makes sense. Could you please explain Case 3 in my example? The first 10 Base64 chars perfectly encode 10*6 bits = 60 bits, which is still 4 bits shy of 8 bytes, so I understand we need 4 more bits. However, the 11th Base64 character, &#39;+&#39;, is given in binary as &#39;111110&#39; - 5 bits without 0&#39;s - it seems we need 65 bits to encode this string. Can you explain this? What would the conversion look like for kNSHd94m7d+= vs. kNSHd94m7d8= and why?"}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "edited": false, "score": 0, "creation_date": 1485390584, "post_id": 41863803, "comment_id": 70911868, "body": "@Matt a correct Base64 encoder won&#39;t produce <code>kNSHd94m7d+=</code>. A strict decoder would reject it as invalid; a forgiving one would decode it the same as <code>kNSHd94m7d8=</code>."}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "edited": false, "score": 0, "creation_date": 1485390933, "post_id": 41863803, "comment_id": 70911955, "body": "(only <code>A</code>, <code>Q</code>, <code>g</code>, or <code>w</code> should precede <code>==</code>, and only <code>A</code>, <code>E</code>, <code>I</code>, <code>M</code>, <code>Q</code>, <code>U</code>, <code>Y</code>, <code>c</code>, <code>g</code>, <code>k</code>, <code>o</code>, <code>s</code>, <code>w</code>, <code>0</code>, <code>4</code>, or <code>8</code> should precede <code>=</code> in correct Base64.)"}, {"owner": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "edited": false, "score": 0, "creation_date": 1485395449, "post_id": 41863803, "comment_id": 70913081, "body": "Okay, that&#39;s helpful. So I suppose the guiding principle to Base64 to binary decoding is to ensure that the output is divisible by 8 -- it can only output raw bytes. Further, if the last character to decode would result in more or less than this condition, trailing zeroes are removed (or added) until the condition is fulfilled. If, however, there are no trailing zeroes and the &#39;extra&#39; bits are 1, this is deemed invalid decoding so the program should either halt (strict decoder) or truncate the ones until the first condition is satisfied (forgiving decoder). Could you confirm and/or expand?"}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "edited": false, "score": 0, "creation_date": 1485396565, "post_id": 41863803, "comment_id": 70913328, "body": "@matt Looks like you&#39;ve got it. If you look at it as a transform between groups of 3 bytes and groups of 4 base64 characters it&#39;s as clear as can be. If the last group is 3 bytes then everything is normal. If the last group is 1 or 2 bytes, then an encoder outputs a character with some low 0 bits that don&#39;t correspond to any bits in the input, followed by 2 or 1 <code>=</code> symbols \u2014 and a decoder reverses that process."}], "tags": [], "owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 0, "last_activity_date": 1485388227, "creation_date": 1485388227, "answer_id": 41863803, "question_id": 41863671, "link": "https://stackoverflow.com/questions/41863671/c-base-64-to-binary-conversion/41863803#41863803", "title": "C: Base 64 to binary conversion", "body": "<p>Bytes (well, octets if you want to get all technical) are 8 bits long. Base64 encodes 6 bits at a time. Padding is used when the number of bytes that were encoded <em>isn't</em> a multiple of three, therefore the number of bits <em>isn't</em> a multiple of six. When decoding base64 with padding, you don't output <em>more</em> zero bits, you output <em>less</em> bits to produce the correct number of bytes.</p>\n\n<p>As a concrete example:</p>\n\n<p>Base64: <code>////</code><br>\nBinary: <code>11111111 11111111 11111111</code></p>\n\n<p>Base64: <code>//8=</code><br>\nBinary: <code>11111111 11111111</code></p>\n\n<p>Base64: <code>/w==</code><br>\nBinary: <code>11111111</code></p>\n"}], "owner": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485388227, "creation_date": 1485387432, "question_id": 41863671, "link": "https://stackoverflow.com/questions/41863671/c-base-64-to-binary-conversion", "title": "C: Base 64 to binary conversion", "body": "<p>I've been working to implement a base64 decoder in C. I have been reading up on base64 conversion in places such as the Wikipedia <a href=\"https://en.wikipedia.org/wiki/Base64\" rel=\"nofollow noreferrer\">page</a> and also using online <a href=\"https://conv.darkbyte.ru/\" rel=\"nofollow noreferrer\">converters</a> to check my work. It seems straight forward: just replace every base64 character with the corresponding 6-bit binary string! </p>\n\n<p>My Base64-to-binary decoding is correct as long as the base64 string to decode is a multiple of 4. If the string length is not a multiple of 4, or there are equal signs present for padding, my code does not match the results from online converters.</p>\n\n<p>I thought I understood the padding -- just replace the '=' character with zeros (6, for 6 bits). However, I still don't match the converter's result when this is employed. </p>\n\n<p>Here is the code I've written:</p>\n\n<pre><code>int main(void){\n\n    printf(\"Testing b642bin ...\\n\\n\");\n    printf(\"Case 1: Converting 'AA==' to bin:\\n\");\n    printf(\"Expected Result: 000000000000000000000000\\n\");\n    printf(\"Actual Result:   %s\\n\\n\", b642bin(\"AA==\"));\n    printf(\"Case 2: Converting '+aHg' to bin:\\n\");\n    printf(\"Expected Result: 111110011010000111100000\\n\");\n    printf(\"Actual Result:   %s\\n\\n\", b642bin(\"+aHg\"));\n    printf(\"Case 3: Converting 'kNSHd94m7d+=' to bin:\\n\");\n    printf(\"Expected Result: 1001000011010100100001110111011111011110001001101110110111011111\\n\");\n    printf(\"Actual Result:   %s\\n\\n\", b642bin(\"kNSHd94m7d+=\"));\n\n    return 0;\n}\n\nchar bin6_table[65][7] =   {\"000000\", \"000001\", \"000010\", \"000011\", \"000100\",\n                        \"000101\",\"000110\", \"000111\", \"001000\", \"001001\",\n                        \"001010\", \"001011\", \"001100\", \"001101\", \"001110\",\n                        \"001111\", \"010000\", \"010001\", \"010010\", \"010011\",\n                        \"010100\", \"010101\", \"010110\", \"010111\", \"011000\",\n                        \"011001\", \"011010\", \"011011\", \"011100\", \"011101\",\n                        \"011110\", \"011111\", \"100000\", \"100001\", \"100010\",\n                        \"100011\", \"100100\", \"100101\", \"100110\", \"100111\",\n                        \"101000\", \"101001\", \"101010\", \"101011\", \"101100\",\n                        \"101101\", \"101110\", \"101111\", \"110000\", \"110001\",\n                        \"110010\", \"110011\", \"110100\", \"110101\", \"110110\",\n                        \"110111\", \"111000\", \"111001\", \"111010\", \"111011\",\n                        \"111100\", \"111101\", \"111110\", \"111111\", \"000000\"};\n\nchar base64_table[65] =      {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',\n                        'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',\n                        'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',\n                        'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',\n                        'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\n                        'o', 'p', 'q', 'r', 's', 't', 'u', 'v',\n                        'w', 'x', 'y', 'z', '0', '1', '2', '3',\n                        '4', '5', '6', '7', '8', '9', '+', '/','='};\n\nchar* b64Char2bin(char b64){\n\n    int n = 64;\n    int k;\n    char *bin;\n\n    for(k=0;k&lt;n;k++){\n        if (b64 == base64_table[k]) {\n            bin = bin6_table[k];\n            break;  \n        }\n    }\n    return bin;\n}\n\nchar* b642bin(char *b64_str) {\n\n    int i;\n    size_t len = strlen(b64_str);\n\n    char* bin_str = (char*)malloc(((len * 6) + 1) * sizeof(char));\n    for (i = 0; i &lt; (int)len; i++) {\n      const char* binSextet = b64Char2bin(b64_str[i]);\n      memcpy(&amp;bin_str[6*i], binSextet,7);\n    }\n\n    return bin_str;\n}\n</code></pre>\n\n<p>The output looks like this:</p>\n\n<p>Testing b642bin ...</p>\n\n<pre><code>Case 1: Converting 'AA==' to bin:\nExpected Result: 000000000000000000000000\nActual Result:   000000000000000000000000\n\nCase 2: Converting '+aHg' to bin:\nExpected Result: 111110011010000111100000\nActual Result:   111110011010000111100000\n\nCase 3: Converting 'kNSHd94m7d+=' to bin:\nExpected Result: 1001000011010100100001110111011111011110001001101110110111011111\nActual Result:   100100001101010010000111011101111101111000100110111011011101111110000000\n</code></pre>\n\n<p>If the converter I provided is correct, I don't understand Base64. Clearly you do not simply replace each character with the corresponding 6 bits of binary. Why is Case 1 and 2 correct, but Case 3 is not?</p>\n"}, {"tags": ["c", "directive"], "comments": [{"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "reply_to_user": {"reputation": 26704, "user_id": 1202830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd22084046f375b15ff56ffae8237b0?s=128&d=identicon&r=PG", "display_name": "Michael Geary", "link": "https://stackoverflow.com/users/1202830/michael-geary"}, "edited": false, "score": 0, "creation_date": 1485387117, "post_id": 41863528, "comment_id": 70910884, "body": "Defining Exit status is a behavior. or ?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485387229, "post_id": 41863528, "comment_id": 70910919, "body": "Why is this tagged <code>directive</code>?"}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1485388096, "post_id": 41863528, "comment_id": 70911150, "body": "Exactly so I have a backslash before the newline why I did not get the error."}], "answers": [{"comments": [{"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1485388081, "post_id": 41863760, "comment_id": 70911143, "body": "but the backslash is preceding the newline. so it has significance ?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 1, "creation_date": 1485388959, "post_id": 41863760, "comment_id": 70911396, "body": "@sabrina: it precedes an <code>x</code>. Line merging happens very early in the translation phases, long before macro substitution; even before comment recognition."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1485389657, "post_id": 41863760, "comment_id": 70911595, "body": "Yes, Now I see."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1485405322, "post_id": 41863760, "comment_id": 70916312, "body": "If a program is not well-formed, it will (or, should) be rejected by the compiler, so cannot be executed nor exhibit undefined behaviour."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1485466589, "post_id": 41863760, "comment_id": 70949191, "body": "@peter: if a program is not well-formed, a diagnostic message must be produced, but the only case in which a compiler is required to fail to produce an executable is if it encounters an <code>#error</code> directive. (See &#167;4, paragraph 4.)  (My statement in the answer was really incorrect, so I removed it.) Particularly relevant (though non-normative) is footnote 9 to  &#167;5.1.1.3 (diagnostics): &quot;Of course, an implementation is free to produce any number of diagnostics as long as a valid program is still correctly translated. <i>It may also successfully translate an invalid program.</i>&quot;"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1485466291, "last_edit_date": 1485466291, "creation_date": 1485387987, "answer_id": 41863760, "question_id": 41863528, "link": "https://stackoverflow.com/questions/41863528/is-there-ub-in-this-code/41863760#41863760", "title": "Is there UB in this code?", "body": "<p>The backslash is a valid preprocessor token (\"each non-white-space character that cannot be one of the above\") but it cannot be converted into any valid token (it is not in the list of <code>punctuator</code>s). Backslashes do not have any particular significance in a C program outside of character and string literals, except for the use at the end of a line.</p>\n\n<p>Consequently, the macro replacement will fail the requirement in &sect;6.4.1 paragraph 2:</p>\n\n<blockquote>\n  <p>Each preprocessing token that is converted to a token shall have the lexical form of a keyword, an identifier, a constant, a string literal, or a punctuator.</p>\n</blockquote>\n\n<p>so the program is not well-formed. If an executable is produced, attempting to execute it would have Undefined Behaviour.</p>\n\n<p>If it were not for the backslash, the program would be well-formed. Token concatenation of two empty macro arguments is well-defined; it is replaced with nothing.</p>\n"}], "owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 41863760, "answer_count": 1, "score": -3, "last_activity_date": 1485466291, "creation_date": 1485386605, "question_id": 41863528, "link": "https://stackoverflow.com/questions/41863528/is-there-ub-in-this-code", "title": "Is there UB in this code?", "body": "<p>Here is the code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define f(x,y) \\x##y\n\nint main(int argc, char* argv[])\n{\n\n    return 0;\n}\nf(,)\n</code></pre>\n\n<p>My friend asked me the question but I don't have a definite answer for it.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1485385183, "post_id": 41863226, "comment_id": 70910239, "body": "What is the intent of that line of code?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 4, "creation_date": 1485385204, "post_id": 41863226, "comment_id": 70910247, "body": "and: this feels like homework."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1485385256, "post_id": 41863226, "comment_id": 70910262, "body": "also, you must remove it&#39;s operators, but you can replace them with the same operators you&#39;re already using? So don&#39;t do anything."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1485385299, "post_id": 41863226, "comment_id": 70910279, "body": "and you tell us nothing about what <code>sign</code> or <code>n</code> are. Kind of hard to give a general answer."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1485385325, "post_id": 41863226, "comment_id": 70910290, "body": "another pro hint: read the assembly your compiler produces."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1485385340, "post_id": 41863226, "comment_id": 70910296, "body": "Your question (and objective) are not clear. The code is simple enough. Do you want to use fewer operators? Or fewer distinct operators?"}, {"owner": {"reputation": 69, "user_id": 7427356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bb3709f4992f3c065f6fa5b2f8cea7?s=128&d=identicon&r=PG&f=1", "display_name": "MarkCoder", "link": "https://stackoverflow.com/users/7427356/markcoder"}, "edited": false, "score": 0, "creation_date": 1485385552, "post_id": 41863226, "comment_id": 70910375, "body": "Sorry for the ambiguity. I want to use less operators and thought there may be some other way of achieving the same result this code produces using different logic."}, {"owner": {"reputation": 69, "user_id": 7427356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bb3709f4992f3c065f6fa5b2f8cea7?s=128&d=identicon&r=PG&f=1", "display_name": "MarkCoder", "link": "https://stackoverflow.com/users/7427356/markcoder"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1485385651, "post_id": 41863226, "comment_id": 70910407, "body": "@Marcus M&#252;ller: sign is the sign of modified string of bytes. n is the number of bits it is being shifted."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1485385951, "post_id": 41863226, "comment_id": 70910504, "body": "Wait a minute, why is there no subtraction in your list? Is that intentional (if so, is it for that one class whose professor always hands out this type of assignment and always leaves out subtraction?)"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1485385983, "post_id": 41863226, "comment_id": 70910514, "body": "so, what is <code>sign</code> then? is it <code>0x0</code> or <code>0x1</code>, or is it <code>-1==0xF...E</code> or <code>0x1</code>, or something else completely?"}, {"owner": {"reputation": 69, "user_id": 7427356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bb3709f4992f3c065f6fa5b2f8cea7?s=128&d=identicon&r=PG&f=1", "display_name": "MarkCoder", "link": "https://stackoverflow.com/users/7427356/markcoder"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1485386007, "post_id": 41863226, "comment_id": 70910527, "body": "@harold It is an unfortunate restriction placed on this particular exercise. It is indeed, evidently this is a bit of a rite of passage."}, {"owner": {"reputation": 69, "user_id": 7427356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bb3709f4992f3c065f6fa5b2f8cea7?s=128&d=identicon&r=PG&f=1", "display_name": "MarkCoder", "link": "https://stackoverflow.com/users/7427356/markcoder"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1485386091, "post_id": 41863226, "comment_id": 70910555, "body": "@MarcusM&#252;ller It&#39;ll vary, but the program is able to handle 0x0 or 0x1."}], "answers": [{"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1485385827, "post_id": 41863291, "comment_id": 70910460, "body": "You know that <code>2^n</code> is not &quot;two to power n&quot;, don&#39;t you?"}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1485385865, "post_id": 41863291, "comment_id": 70910470, "body": "Its not in C... but I don&#39;t know a better way to write in when we don&#39;t have MathJax.  I feel my meaning is clear enough."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1485385938, "post_id": 41863291, "comment_id": 70910497, "body": "It&#39;s not clear at all, because <code>^</code> is a valid bit operator.  <code>1&lt;&lt;n</code>, right?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1485386068, "post_id": 41863291, "comment_id": 70910547, "body": "@DYZ I agree with abelenky that he made his point clear enough. Anyway, fixed it."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1485386140, "post_id": 41863291, "comment_id": 70910574, "body": "Thanks Marcus. I didn&#39;t know about that super-script formatting!"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1485386178, "post_id": 41863291, "comment_id": 70910590, "body": "@abelenky yeah, it&#39;s handy at times, but I had to break the verbatim environment up, which isn&#39;t all that cool."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1485386260, "post_id": 41863291, "comment_id": 70910619, "body": "@MarcusM&#252;ller I respectfully disagree. When the whole answer uses the C notation, the only logical way to interpret <code>^</code> is as an XOR."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 2, "creation_date": 1485386334, "post_id": 41863291, "comment_id": 70910647, "body": "So how do you use this insight? I&#39;m still not getting any further than <code>(sign &lt;&lt; n) - sign</code>"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1485386344, "post_id": 41863291, "comment_id": 70910652, "body": "Well, the good thing with humans is that they can get along without agreeing on everything, @DYZ :) I think that together with the pseudo-induction above, it&#39;s pretty clear, but it really doesn&#39;t matter now, does it?"}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 4, "last_activity_date": 1485388198, "last_edit_date": 1485388198, "creation_date": 1485385380, "answer_id": 41863291, "question_id": 41863226, "link": "https://stackoverflow.com/questions/41863226/simplifying-operation-usage-in-twos-complement-program/41863291#41863291", "title": "Simplifying operation usage in Two&#39;s Complement Program", "body": "<p>If you run this program a handful of times, with different values of <code>n</code>, there will be an OBVIOUS pattern:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int n = 4;\n    for(int sign=1; sign&lt;15; ++sign)\n    {\n        int combine = ((sign &lt;&lt; n) + ~sign + 1);\n\n        printf(\"%d =&gt; %d\\n\", sign, combine);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>In each case, when:</p>\n\n<pre><code>n == 1, then combine == sign.\nn == 2, then combine == 3*sign.\nn == 3, then combine == 7*sign.\n</code></pre>\n\n<p>In general, for any N, <code>combine == ((2</code><sup><code>n</code></sup><code>)-1) * sign</code></p>\n\n<p>Now, can you find a fast way to express that relationship?</p>\n\n<p>Are there any restrictions on values for <code>n</code> and <code>sign</code> that you haven't told us about?<br>\n Or does it need to be solved for <strong><em>all</em></strong> values of <code>n</code> and <code>sign</code>?</p>\n"}], "owner": {"reputation": 69, "user_id": 7427356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bb3709f4992f3c065f6fa5b2f8cea7?s=128&d=identicon&r=PG&f=1", "display_name": "MarkCoder", "link": "https://stackoverflow.com/users/7427356/markcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1485434225, "answer_count": 1, "score": 2, "last_activity_date": 1485388198, "creation_date": 1485385010, "last_edit_date": 1485385178, "question_id": 41863226, "link": "https://stackoverflow.com/questions/41863226/simplifying-operation-usage-in-twos-complement-program", "closed_reason": "Needs details or clarity", "title": "Simplifying operation usage in Two&#39;s Complement Program", "body": "<p>Specifically I'm trying to simplify this particular line of code by removing any of its operators with the limitation that I'm only allowed to use  <code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code>:</p>\n\n<p><code>int combine = ((sign &lt;&lt; n) + ~sign + 1);</code></p>\n"}, {"tags": ["c", "linux", "system", "system-calls"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485383984, "post_id": 41862984, "comment_id": 70909749, "body": "Step 1: Check the return value of all system calls to make sure they succeed. Step 2: Check what&#39;s actually in <code>choice</code> before you use it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485384052, "post_id": 41862984, "comment_id": 70909779, "body": "Also, maybe try to get this code working with <code>fread</code>, <code>fwrite</code>, and <code>exit</code> before you start messing with syscalls."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1485384093, "post_id": 41862984, "comment_id": 70909794, "body": "Are you sure about those arguments for <code>read</code>?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1485384115, "post_id": 41862984, "comment_id": 70909804, "body": "Try <code>syscall(SYS_read, 0, (void*)&amp;choice, sizeof(choice));</code>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1485384177, "post_id": 41862984, "comment_id": 70909828, "body": "@melpomene: That may be off-message, but at the very least the OP could use the glibc wrappers around the system calls..."}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1485384711, "creation_date": 1485384711, "answer_id": 41863165, "question_id": 41862984, "link": "https://stackoverflow.com/questions/41862984/how-to-use-system-call-read-segmentation-fault-core-dumped-error/41863165#41863165", "title": "How to use system call Read? Segmentation fault (core dumped) error", "body": "<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/sysinfo.h&gt;\n#include &lt;sys/syscall.h&gt;\n#include &lt;string.h&gt;\n\nvoid exitProgram()\n{\n    syscall(SYS_write, 1, \"norma\", strlen(\"norma\"));\n    syscall(SYS_exit, 1 , 0);\n}\n\ntypedef struct func_desc {\n    char const *name;\n    void (*func)(void);\n} func_desc;\n\nint main()\n{\n    func_desc arr[2];\n    char choice;\n\n    arr[0].name = \"exit\";\n    arr[0].func = &amp;exitProgram;\n\n    syscall(SYS_write, 1, \"Choose: \", strlen(\"Choose: \"));\n\n    syscall(SYS_read, 0, &amp;choice, sizeof(choice));\n\n    arr[choice-'0'-1].func();\n\n    return 0;\n}\n</code></pre>\n\n<p>This works (only exactly if you enter the digit 1).</p>\n\n<p><code>read</code> takes the following arguments:</p>\n\n<pre><code>   ssize_t read(int fd, void *buf, size_t count);\n</code></pre>\n\n<p>It'd probably be wise to use this glibc <code>read</code> wrapper (it would certainly prevent you from passing an int where a pointer is expected).</p>\n"}], "owner": {"reputation": 221, "user_id": 7120134, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0c763e21cb80a003420c31fc138b3770?s=128&d=identicon&r=PG&f=1", "display_name": "James Clark", "link": "https://stackoverflow.com/users/7120134/james-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 579, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1485384711, "creation_date": 1485383843, "last_edit_date": 1485383891, "question_id": 41862984, "link": "https://stackoverflow.com/questions/41862984/how-to-use-system-call-read-segmentation-fault-core-dumped-error", "title": "How to use system call Read? Segmentation fault (core dumped) error", "body": "<p>I probably use my read function with a some kind of mistake but I can not recognize it.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;unistd.h&gt;\n#include &lt;sys/sysinfo.h&gt;\n#include &lt;sys/syscall.h&gt;\n\nvoid exitProgram()\n{\n    syscall(SYS_write, 1, \"norma\", slen(\"norma\"));\n    syscall(SYS_exit, 1 , 0);\n}\n\nint main()\n{\n    func_desc arr[2];\n    int choice;\n\n    arr[0].name = \"exit\";\n    arr[0].func = &amp;exitProgram;\n\n    syscall(SYS_write, 1, \"Choose: \", slen(\"Choose: \"));\n\n    syscall(SYS_read, 0, choice, sizeof(choice));\n\n    arr[choice-1].func();\n\n    return 0;\n}\n</code></pre>\n\n<p>If choice is '1' then it should call exitProgram() but instead it says Segmentation fault (core dumped). When I write a specific number then it works (example):</p>\n\n\n\n<pre><code>arr[0].func();\n</code></pre>\n\n<p>How can I fix this Segmentation fault (core dumped) problem?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 1, "creation_date": 1485382525, "post_id": 41862620, "comment_id": 70909074, "body": "why storing a float value in an int? it will be converted to int"}, {"owner": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 1, "creation_date": 1485382535, "post_id": 41862620, "comment_id": 70909078, "body": "<code>a</code>,<code>b</code> are <code>int</code> ?"}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 2, "creation_date": 1485382593, "post_id": 41862620, "comment_id": 70909107, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3602827/what-is-the-behavior-of-integer-division-in-c\">What is the behavior of integer division in C?</a>"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1485382638, "post_id": 41862620, "comment_id": 70909139, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19102778/why-does-this-output-of-the-same-expression-from-printf-differ-from-cout\">Why does this output of the same expression from printf differ from cout?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1485382497, "creation_date": 1485382497, "answer_id": 41862658, "question_id": 41862620, "link": "https://stackoverflow.com/questions/41862620/c-calculating-and-printing-int-as-float/41862658#41862658", "title": "C - Calculating and printing int as float", "body": "<p>If you want <code>f</code> to store a <code>float</code> value, you need to declare it as a <code>float</code>.  You also need to cast either <code>a</code> or <code>b</code> to <code>float</code> for the result of the division to be a <code>float</code>.</p>\n\n<p>Then you can use the <code>%f</code> format specifier to print it.</p>\n\n<pre><code>float f;\n...\ncase '/': f = (float)a / b; printf(\"f = %f\\n\", f);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "is_accepted": false, "score": 1, "last_activity_date": 1485382750, "creation_date": 1485382750, "answer_id": 41862716, "question_id": 41862620, "link": "https://stackoverflow.com/questions/41862620/c-calculating-and-printing-int-as-float/41862716#41862716", "title": "C - Calculating and printing int as float", "body": "<p>You should cast the result of the division to <code>float</code> before storing to your <code>f</code> variable:</p>\n\n<pre><code>case '/': f = (float) a / b; printf(\"f = %.2f\\n\", f);\n</code></pre>\n\n<p>You can also use <code>%n.nf</code> to print the number of decimals you want to. In the above example 2 decimals.</p>\n\n<p>Another example code:</p>\n\n<pre><code>float f;\nint a = 5;\nint b = 3;\n\nf = (float) a/b;\n\nprintf (\"%2.2f\\n\", f);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 0, "last_activity_date": 1485382845, "creation_date": 1485382845, "answer_id": 41862736, "question_id": 41862620, "link": "https://stackoverflow.com/questions/41862620/c-calculating-and-printing-int-as-float/41862736#41862736", "title": "C - Calculating and printing int as float", "body": "<p>you cannot store a float value in an integer one because the decimal part will be discarded, converted implicitly to an integer so you have to declare f as float or double or float: </p>\n\n<pre><code>float f;\nint a(40), b(400);\nf = (float)a / (float)b;\nprintf(\"%g\", f);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1485383034, "creation_date": 1485383034, "answer_id": 41862772, "question_id": 41862620, "link": "https://stackoverflow.com/questions/41862620/c-calculating-and-printing-int-as-float/41862772#41862772", "title": "C - Calculating and printing int as float", "body": "<p>The <code>%f</code> format specifier will not magically convert the result of integer division to a floating point number for you, nor will it treat an <code>int</code> as a <code>float</code> or <code>double</code>.  You need to declare <code>f</code> as a <code>float</code> yourself, and ensure that the operation <code>a / b</code> is not treated as integer division:</p>\n\n<pre><code>float f;\n...\n\ncase '/': \n    f = (float)a / (float)b;\n    printf(\"f = %f\\n\", f);\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6815222, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f93fe21fde7b7ba3fc91a82edd7153d7?s=128&d=identicon&r=PG&f=1", "display_name": "Devyn Hedin", "link": "https://stackoverflow.com/users/6815222/devyn-hedin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2217, "favorite_count": 0, "accepted_answer_id": 41862658, "answer_count": 4, "score": 0, "last_activity_date": 1485383482, "creation_date": 1485382332, "last_edit_date": 1485383482, "question_id": 41862620, "link": "https://stackoverflow.com/questions/41862620/c-calculating-and-printing-int-as-float", "title": "C - Calculating and printing int as float", "body": "<p>I'm writing a <code>switch</code> statement and trying to print <code>f</code> as a float. In this context <code>a</code> is 40 and <code>b</code> is 400, so I need to print out 0.1</p>\n\n<p>My question is, since <code>f</code> is an <code>int</code>, how can I go about this? I've already tried using <code>%f</code> instead of <code>%d</code> and I've also cast <code>a</code> as a <code>float</code>. But every time it just prints 0.00000000</p>\n\n<pre><code>case '/': f = a / b; printf(\"f = %d\\n\", f);\n</code></pre>\n\n<p>Just to clarify all three values are ints.</p>\n"}, {"tags": ["c", "pointers", "runtime-error"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1485382200, "post_id": 41862570, "comment_id": 70908907, "body": "<code>a = malloc(sizeof(user) * user_counts);</code> is wrong. <code>*a</code> is a <code>user *</code>, not a <code>user</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1485382215, "post_id": 41862570, "comment_id": 70908915, "body": "Don&#39;t use <code>strncpy</code>. Ever."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1485382231, "post_id": 41862570, "comment_id": 70908922, "body": "<code>*(a+i)</code> is usually written <code>a[i]</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485382259, "post_id": 41862570, "comment_id": 70908934, "body": "Multiplying by <code>sizeof (char)</code> is redundant. <code>sizeof (char)</code> is 1 by definition."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485382316, "post_id": 41862570, "comment_id": 70908964, "body": "Your loop condition in <code>main</code> is wrong. There is no <code>NULL</code> in your <code>a</code> array, so the loop never stops and you run off the end of the array."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485382447, "post_id": 41862570, "comment_id": 70909029, "body": "@melpomene when I never tell <code>a = malloc(sizeof(user) * user_counts);</code> from where C could understand what size of pointer that I&#39;m looking for?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485382490, "post_id": 41862570, "comment_id": 70909051, "body": "What is a &quot;2 dimension  pointer&quot;? Pointers are scalars, i.e. they have no dimensions. And something like <code>int **</code> is not a 2D array either and cannot point to one. You seem to have major missconcentions about pointer and arrays. I&#39;d recommend to get a good (resp. better) C book and read the corresponding chapters."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485382508, "post_id": 41862570, "comment_id": 70909065, "body": "@Mortezaipo I don&#39;t understand what you&#39;re asking."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485382750, "post_id": 41862570, "comment_id": 70909198, "body": "@Olaf I know what do you mean, It was my wrong on describing. So I&#39;ve updated my question."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1485382765, "post_id": 41862570, "comment_id": 70909205, "body": "@Mortezaipo The difference between <code>char * x = 0; char *y = x + 1; assert(y == 1);</code> and <code>uint32_t * x = 0; uint32_t * y = x + 1; assert( (char*)y == 4);</code> is the type used for the pointer arithmetic. <code>malloc()</code> has no say in that. Nor is there mystic meta info involved."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485382952, "post_id": 41862570, "comment_id": 70909290, "body": "@melpomene you said that <code>a = malloc(sizeof(user) * user_counts);</code> is wrong. but how can I define a <code>user</code> pointer with <code>user_counts</code> size?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485383054, "post_id": 41862570, "comment_id": 70909336, "body": "@Mortezaipo The correct version would be <code>a = malloc(sizeof (user *) * user_counts);</code> (dynamically allocate <code>user_counts</code> pointers) but I&#39;d actually write that as <code>a = malloc(user_counts * sizeof *a);</code> so I don&#39;t have to worry about the correct type."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1485383366, "post_id": 41862570, "comment_id": 70909476, "body": "fix like <a href=\"http://ideone.com/8kASSW\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485383698, "post_id": 41862570, "comment_id": 70909637, "body": "@melpomene Thank you so much."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1485383759, "post_id": 41862570, "comment_id": 70909669, "body": "@BLUEPIXY Thank you so much! It works fine! I have a question, is it a correct way? or it&#39;s not common?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1485383829, "post_id": 41862570, "comment_id": 70909693, "body": "It is a common ordinary way."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1485383885, "post_id": 41862570, "comment_id": 70909711, "body": "@Mortezaipo The general rule is when the pointer has N stars in the declaration, you use N-1 stars in the <code>sizeof</code> argument in <code>malloc()</code>."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1485383960, "post_id": 41862570, "comment_id": 70909740, "body": "@BLUEPIXY thank you so much!"}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1485384101, "post_id": 41862570, "comment_id": 70909798, "body": "@Barmar thanks a lot!"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1485384139, "post_id": 41862570, "comment_id": 70909815, "body": "Can I ask why are you using a double indirection? It doesn&#39;t seem to be needed in the example you posted."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1485384366, "post_id": 41862570, "comment_id": 70909918, "body": "@Bob__ well I have a list of random data which is like a table. <code>ID, Title, Is_Done, Created</code> . so I&#39;ve thought that I need double indirection pointer."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1485384799, "post_id": 41862570, "comment_id": 70910089, "body": "If you write <code>a = malloc( sizeof *a * user_counts)</code>, you don&#39;t have to think about the type of *a."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1485384916, "post_id": 41863180, "comment_id": 70910142, "body": "Technically setting a pointer to all-bits-zero (as <code>calloc</code> does) is not guaranteed to produce a null pointer."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485385258, "post_id": 41863180, "comment_id": 70910264, "body": "@melpomene Do you have a reference for that?  C Standard, <i>6.3.2.3 Pointers</i>, paragraph 3, states &quot;An  integer  constant  expression  with  the  value  0,  or  such  an  expression  cast  to  type <code>void *</code>, is called a <i>null pointer constant</i>. ...&quot;  That would at least be an implementation-dependent <code>NULL</code> pointer value on most platforms, I&#39;d think. ."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1485385374, "post_id": 41863180, "comment_id": 70910304, "body": "@AndrewHenle I don&#39;t see how this applies here. <code>calloc(...)</code> doesn&#39;t involve any integer constant expression with the value 0."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 0, "creation_date": 1485385409, "post_id": 41863180, "comment_id": 70910316, "body": "Thank you so much for your answer! Adding extra element and assigning that to <code>NULL</code> value, is it the standard way?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 0, "creation_date": 1485443903, "post_id": 41863180, "comment_id": 70935355, "body": "@Mortezaipo: Normally, no - you&#39;d use a separate object to keep track of the number of elements in the array, which you&#39;re already doing with <code>users_count</code>.  String processing is about the only place where you&#39;d rely on a 0-valued sentinel to mark the end of an array&#39;s contents."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1485444228, "post_id": 41863180, "comment_id": 70935594, "body": "@AndrewHenle: Specifically, 5.18: &quot;Q: Is a run-time integral value of 0, cast to a pointer, guaranteed to be a null pointer? A: No. Only constant integral expressions with value 0 are guaranteed to indicate null pointers. See also questions 4.14, 5.2, and 5.19.&quot;  This is something I forget from time to time and have to be reminded of.  Remember, 6.3.2.3/3 says &quot;an <b>integer constant expression</b> with the value 0...&quot;.  A runtime 0 is not an <i>integer constant expression</i>."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 0, "creation_date": 1485444530, "post_id": 41863180, "comment_id": 70935846, "body": "@JohnBode well sometimes I should use database results which is not defined how many records it has. So what about this situation? I mean when I don&#39;t want to define <code>users_count</code> in my main function like <code>myfn(0)</code> which it means <code>all records</code>, what should I do then?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 1, "creation_date": 1485449217, "post_id": 41863180, "comment_id": 70939279, "body": "@Mortezaipo: Depends on the database API, then - if it doesn&#39;t return the number of records returned, or if it doesn&#39;t provide a cursor for you to iterate through the result set, then it should add a sentinel record at the end of the sequence.  If I understand what you&#39;re saying, anyway."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 0, "creation_date": 1485451736, "post_id": 41863180, "comment_id": 70940717, "body": "@JohnBode Thank you so much!"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1485384788, "creation_date": 1485384788, "answer_id": 41863180, "question_id": 41862570, "link": "https://stackoverflow.com/questions/41862570/checking-null-pointer-in-c-doesnt-work/41863180#41863180", "title": "Checking NULL Pointer In C Doesn&#39;t Work", "body": "<p>First of all, </p>\n\n<pre><code>a = malloc(sizeof(user) * user_counts);\n</code></pre>\n\n<p>has a problem - you want to allocate <code>user_counts</code> instances of <em>pointers</em> to <code>user</code>, not instances of <code>user</code>, so that line should be</p>\n\n<pre><code>a = malloc(sizeof(user *) * user_counts);\n</code></pre>\n\n<p>However, there's an easier way around this - the <code>sizeof</code> operator can take <em>expressions</em> as arguments as well as type names.  So you can rewrite that line as</p>\n\n<pre><code>a = malloc( sizeof *a * user_counts );\n</code></pre>\n\n<p>The <em>expression</em> <code>*a</code> has type <code>user *</code>, so <code>sizeof *a</code> is equivalent to <code>sizeof (user *)</code>.  This makes your life a bit simpler, in that you don't have to puzzle out the type that <code>a</code> points to - make the compiler do the hard work.  </p>\n\n<p>You should <em>always</em> check the result of a <code>malloc</code> call.</p>\n\n<pre><code>a = malloc( sizeof *a * users_count );\nif ( a )\n{\n  // do stuff with a\n}\n</code></pre>\n\n<p>Second of all, don't use <code>*(a+i)</code> to index into <code>a</code> - use <code>a[i]</code> instead.  Makes things a bit easier to read.  So, </p>\n\n<pre><code>   *(a+i) = malloc(sizeof(user));\n    (*(a+i))-&gt;id = 1;\n    (*(a+i))-&gt;name = malloc(sizeof(char) * 25);\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>   a[i] = malloc(sizeof *a[i]);\n   if ( a[i] )\n   {\n     a[i]-&gt;id = 1;\n     a[i]-&gt;name = malloc(sizeof *a[i]-&gt;name * 25);\n   }\n   else\n   {\n     /* deal with memory allocation failure */\n   }\n</code></pre>\n\n<p>Now, to your actual problem.  Your code is crashing for one of the following reasons:</p>\n\n<ul>\n<li>the initial <code>malloc</code> of <code>a</code> failed, so you're crashing on the first line that uses <code>a[i]</code>;</li>\n<li>the <code>malloc</code> of one of your <code>a[i]</code> failed, so you're crashing on <code>a[i]-&gt;id = 1</code>;</li>\n<li>you've successfully allocated memory for all <code>users_count</code> elements of <code>a</code> - <em>no</em> <code>a[i]</code> is <code>NULL</code>, so you loop past the last element of your array and try to dereference the object immediately following it, which is <em>most likely</em> not a valid pointer.</li>\n</ul>\n\n<p>In addition to adding the checks after each <code>malloc</code> call, you should probably loop based on <code>users_count</code>:</p>\n\n<pre><code>for ( i = 0; i &lt; users_count; i++ )\n  printf(\"ID: %d \\t %s\\n\", a[i]-&gt;id, a[i]-&gt;name);\n</code></pre>\n\n<p>Or, you need to allocate one extra element for <code>a</code> and set it to <code>NULL</code>:</p>\n\n<pre><code>a = malloc( sizeof *a * (users_count + 1) );\nif ( a )\n{\n  a[users_count] = NULL;\n  for ( i = 0; i &lt; users_count; i++ )\n    ...\n}\n</code></pre>\n\n<p>Note that <code>calloc</code> initializes all allocated memory to 0, so you can use that and not worry about explicitly setting an element to <code>NULL</code>:</p>\n\n<pre><code>a = calloc( users_count + 1, sizeof *a );\nif ( a )\n{\n  for ( i = 0; i &lt; users_count; i++ )\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 41863180, "answer_count": 1, "score": 0, "last_activity_date": 1485384788, "creation_date": 1485382109, "last_edit_date": 1485382666, "question_id": 41862570, "link": "https://stackoverflow.com/questions/41862570/checking-null-pointer-in-c-doesnt-work", "title": "Checking NULL Pointer In C Doesn&#39;t Work", "body": "<p>I have a function which returns a multiple indirection pointer as result like so:</p>\n\n<pre><code>typedef struct {\n    int id;\n    char *name;\n} user;\n\nuser **myfn(int users_count) {\n    user **a;\n    a = malloc(sizeof(user) * user_counts);\n    for(int i = 0 ; i&lt;user_counts ; i++) {\n        *(a+i) = malloc(sizeof(user));\n        (*(a+i))-&gt;id = 1;\n        (*(a+i))-&gt;name = malloc(sizeof(char) * 25);\n        strncpy((*(a+i))-&gt;name, \"Morteza\", 25); // just for example\n    }\n    return a;\n }\n</code></pre>\n\n<p>Now, I when I want to crawl in this result in main function, it will show all users name, but at the end it will encounter with <code>Segmentation fault</code> error.</p>\n\n<pre><code>int main() {\n    user **a = myfn(10);\n    int i = 0;\n    while((*(a+i)) != NULL) {\n        printf(\"ID: %d \\t %s\\n\", (*(a+i))-&gt;id, (*(a+i))-&gt;name);\n        i++;\n    }\n}\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>ID: 1 Morteza\nID: 2 Morteza\n...\n...\nID: 10 Morteza\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>Why <code>condition</code> of <code>while</code> doesn't work fine?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1485381014, "post_id": 41862177, "comment_id": 70908337, "body": "That is right, as you have it, your floats will be degraded to <code>int</code>."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1485381026, "post_id": 41862177, "comment_id": 70908345, "body": "Do <i>not</i> paste images with code in your questions. Paste actual code."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1485381027, "post_id": 41862177, "comment_id": 70908346, "body": "Since <code>2500</code>, <code>8000</code> and <code>5000</code> are all integer literals, integer math is used for the division and then only afterward converted to float for the assignments to <code>k</code> and <code>j</code>.  For <code>b</code>, though, the subtraction between floating point values causes the multiplication to also be done with floating point, and be converted to <code>int</code> afterwards for the assignment to <code>b</code>.  So, different results."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1485384641, "post_id": 41862177, "comment_id": 70910020, "body": "@Dmitri Note: C calls <code>8000</code> an <i>integer constant</i> or more specifically a <i>decimal constant</i>.  With literals in C, like <code>&quot;abc&quot;</code> and <code>(int[]){2,3})</code>, the address can be taken, not so with constants."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1485381713, "post_id": 41862246, "comment_id": 70908699, "body": "Note: Suggest <code>f</code>:  <code>float f1 = (float) 1000000000000000000000000;</code> is a problem whereas <code>float f2 = 1000000000000000000000000.0f;</code> is fine.  Casting is infrequently the best approach."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1485386105, "last_edit_date": 1485386105, "creation_date": 1485380883, "answer_id": 41862246, "question_id": 41862177, "link": "https://stackoverflow.com/questions/41862177/c-type-casting-issue-float-asserted-to-int/41862246#41862246", "title": "C Type Casting Issue (Float asserted to Int)", "body": "<p>They're not identical because <code>8000/5000</code> performs integer division, on account of both operands being <code>int</code> constants. The result of the division is <code>1</code>.</p>\n\n<p>To force floating point division at least one of the operands needs to be a <code>float</code>. That can be achieved in several ways, namely (and in preferable order):</p>\n\n<ol>\n<li><code>8000.0f / 5000</code></li>\n<li><code>(float)8000 / 5000</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1485381038, "creation_date": 1485381038, "answer_id": 41862294, "question_id": 41862177, "link": "https://stackoverflow.com/questions/41862177/c-type-casting-issue-float-asserted-to-int/41862294#41862294", "title": "C Type Casting Issue (Float asserted to Int)", "body": "<p><code>float j = 8000 / 5000</code> yields <code>1</code>; rhs expression <code>8000 / 5000</code> is converted to float after its evaluation; <code>8000</code> and <code>5000</code> are literals of data type <code>int</code>, so <code>8000 / 5000</code> will be an <code>int</code>, too.</p>\n\n<p>Write <code>float j = 8000.0 / 5000.0</code> to yield a floating point division.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6142482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sTzqA.jpg?s=128&g=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6142482/julien"}, "is_accepted": false, "score": -1, "last_activity_date": 1485387346, "last_edit_date": 1485387346, "creation_date": 1485382140, "answer_id": 41862577, "question_id": 41862177, "link": "https://stackoverflow.com/questions/41862177/c-type-casting-issue-float-asserted-to-int/41862577#41862577", "title": "C Type Casting Issue (Float asserted to Int)", "body": "<p>In the first case k = 1.0 and j = 1.0, and in the second case k = 1.0 and j = 1.6.\nThis happens because in the first case you divide an integer with another integer, so the result is an integer, and then it's stored into a float when assigned to k, and j.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>julien@ubuntu:/tmp/so$ cat main.c \r\n#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n\r\nint main(void)\r\n{\r\n\tfloat k;\r\n\tfloat j;\r\n\tint a;\r\n\tint b;\r\n\t\r\n\tk = 2500 / 2500;\r\n\tj = 8000 / 5000;\r\n\tprintf(\"k = %f, j = %f\\n\", k, j);\r\n\ta = 1000 * (j - k);\r\n\tprintf(\"a = %d\\n\", a);\r\n\tk = 1;\r\n\tj = 1.6;\r\n\tb = 1000 * (j - k);\r\n\tprintf(\"b = %d\\n\", b);\r\n\treturn (EXIT_SUCCESS);\r\n}\r\njulien@ubuntu:/tmp/so$ gcc -Wall -Werror -pedantic -Wextra main.c -o ben &amp;&amp; ./ben \r\nk = 1.000000, j = 1.000000\r\na = 0\r\nb = 600\r\njulien@ubuntu:/tmp/so$ </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If you want to prevent that you can explicitly use floats (or at least one float) in the division:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>julien@ubuntu:/tmp/so$ cat main.c \r\n#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n\r\nint main(void)\r\n{\r\n\tfloat k;\r\n\tfloat j;\r\n\tint a;\r\n\tint b;\r\n\t\r\n\tk = 2500.0 / 2500;\r\n\tj = 8000.0 / 5000;\r\n\tprintf(\"k = %f, j = %f\\n\", k, j);\r\n\ta = 1000 * (j - k);\r\n\tprintf(\"a = %d\\n\", a);\r\n\tk = 1;\r\n\tj = 1.6;\r\n\tb = 1000 * (j - k);\r\n\tprintf(\"b = %d\\n\", b);\r\n\treturn (EXIT_SUCCESS);\r\n}\r\njulien@ubuntu:/tmp/so$ gcc -Wall -Werror -pedantic -Wextra main.c -o ben &amp;&amp; ./ben \r\nk = 1.000000, j = 1.600000\r\na = 600\r\nb = 600\r\njulien@ubuntu:/tmp/so$ </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 11, "user_id": 5092844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f9b7896b606c71290b375388c1a28e0?s=128&d=identicon&r=PG&f=1", "display_name": "armanno300", "link": "https://stackoverflow.com/users/5092844/armanno300"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1485387346, "creation_date": 1485380587, "last_edit_date": 1485381111, "question_id": 41862177, "link": "https://stackoverflow.com/questions/41862177/c-type-casting-issue-float-asserted-to-int", "title": "C Type Casting Issue (Float asserted to Int)", "body": "<p>I was wondering why the following two prints in the image are not identical?</p>\n\n<pre><code>uint16_t linCalc(uint16_t adcAverage){\n    float k = 2500 / 2500;\n    float j = 8000 / 5000;\n    int a = 1000 * (j - k);\n    printf(\"a = %d\\n\", a);\n    k = 1;\n    j = 1.6;\n    int b = 1000 * (j - k);\n    printf(\"b = %d\\n\", b);\n}\n</code></pre>\n\n<blockquote>\n<pre><code>b = 600\na = 0\nb = 600\na = 0\nb = 600\na = 0\nb = 600\na = 0\nb = 600\na = 0\nb = 600\na = 0\nb = 600\na = 0\nb = 600\n</code></pre>\n</blockquote>\n\n<p>It seems that the floats are being asserted as ints before the expression is being calculated (I've also tried typecasting the floats as well in their declaration).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 431, "user_id": 6363036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d654d0d8b711e9021f78816b12f3298b?s=128&d=identicon&r=PG&f=1", "display_name": "Freek Wiedijk", "link": "https://stackoverflow.com/users/6363036/freek-wiedijk"}, "edited": false, "score": 2, "creation_date": 1485380131, "post_id": 41862038, "comment_id": 70907893, "body": "Do you really want the preprocessor to calculate those bytes for you, or is it enough that you get access to your float as an array of <code>unsigned char</code>s? If the latter, how about something like <code>const double x = 11.4; const unsigned char *byteArray = (unsigned char *) (&amp;x);</code>? Or do you want the <code>sizeof(bytearray)</code> also to be <code>sizeof(double)</code>?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1485380360, "post_id": 41862038, "comment_id": 70908003, "body": "Please pick one language only. C and C++ are different languages and the answer can differ depending on which you are actually coding in."}, {"owner": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "edited": false, "score": 0, "creation_date": 1485380378, "post_id": 41862038, "comment_id": 70908014, "body": "I need the preprocessor to calculate the bytes because in actual implementation the byteArray is a couple of KB large and therefore has to be a const uint8_t array."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1485380762, "post_id": 41862038, "comment_id": 70908187, "body": "Why not overlay the &quot;couple of KB large&quot; <code>uint8_t</code> array with a &quot;couple of KB large&quot;/4 <code>float</code> array as a <code>union</code> and then provide the initialization as { 11.4f, 42.0f, 3.14159f, ...}`?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485380857, "post_id": 41862038, "comment_id": 70908243, "body": "It is unclear, does the source code need to start with <code>float</code>s like <code>11.4f, 42.0f, 3.14159f</code> or <i>bytes</i> <code>0x66, 0x66, 0x36, 0x41, </code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485380901, "post_id": 41862038, "comment_id": 70908270, "body": "@chux: You can overlay an &quot;array of <code>union</code>s&quot;, but not use a &quot;<code>union</code> of arrays&quot;"}, {"owner": {"reputation": 431, "user_id": 6363036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d654d0d8b711e9021f78816b12f3298b?s=128&d=identicon&r=PG&f=1", "display_name": "Freek Wiedijk", "link": "https://stackoverflow.com/users/6363036/freek-wiedijk"}, "edited": false, "score": 0, "creation_date": 1485381642, "post_id": 41862038, "comment_id": 70908658, "body": "@Drew: I&#39;m sorry, but I still don&#39;t get it. Why not just have a const array of floats, and use appropriate <code>(unsigned char *)</code> casts when you need access to that data on the byte level? What&#39;s wrong with that?"}, {"owner": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "reply_to_user": {"reputation": 431, "user_id": 6363036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d654d0d8b711e9021f78816b12f3298b?s=128&d=identicon&r=PG&f=1", "display_name": "Freek Wiedijk", "link": "https://stackoverflow.com/users/6363036/freek-wiedijk"}, "edited": false, "score": 0, "creation_date": 1485382193, "post_id": 41862038, "comment_id": 70908903, "body": "@FreekWiedijk because the byteArray is an array that is KB large and there is no processing of the array and it is just sent to another device so I wouldn&#39;t know when and where to put the bytes of the float..."}, {"owner": {"reputation": 431, "user_id": 6363036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d654d0d8b711e9021f78816b12f3298b?s=128&d=identicon&r=PG&f=1", "display_name": "Freek Wiedijk", "link": "https://stackoverflow.com/users/6363036/freek-wiedijk"}, "edited": false, "score": 0, "creation_date": 1485382413, "post_id": 41862038, "comment_id": 70909015, "body": "@Drew: But but but... The size of the data in memory will be exactly the same! And there will be no more or less processing with <i>this</i> approach that with what you are trying. I mean, do: <code>const float floatArray[] = { 11.4 };</code> and then <code>#define byteArray ((unsigned char *) floatArray)</code>. And then use <code>byteArray[...]</code> to access the bytes and send them."}, {"owner": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "reply_to_user": {"reputation": 431, "user_id": 6363036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d654d0d8b711e9021f78816b12f3298b?s=128&d=identicon&r=PG&f=1", "display_name": "Freek Wiedijk", "link": "https://stackoverflow.com/users/6363036/freek-wiedijk"}, "edited": false, "score": 0, "creation_date": 1485383234, "post_id": 41862038, "comment_id": 70909413, "body": "@FreekWiedijk Sorry you are correct that would work.  However I did not explain that the byteArray has only a few floats scattered out through it and mainly consists of uint16_t and uint8_t data types."}, {"owner": {"reputation": 431, "user_id": 6363036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d654d0d8b711e9021f78816b12f3298b?s=128&d=identicon&r=PG&f=1", "display_name": "Freek Wiedijk", "link": "https://stackoverflow.com/users/6363036/freek-wiedijk"}, "edited": false, "score": 0, "creation_date": 1485383878, "post_id": 41862038, "comment_id": 70909705, "body": "@Drew: I see. Those floats might not even be aligned then. Hmmm, difficult..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485385445, "post_id": 41862038, "comment_id": 70910335, "body": "@drew Rather than post important restrictions in a <a href=\"http://stackoverflow.com/questions/41862038/get-raw-data-bytes-of-a-constant-float-value-using-define-in-c#comment70909413_41862038\">comment</a>, append that information to your post.   Adding more example data would help too.  This will help attract UVs, rather than DVs."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485385583, "post_id": 41862038, "comment_id": 70910384, "body": "@drew Is the <code>float</code> data on multiple of 4 boundaries or potentially on unaligned ones?"}, {"owner": {"reputation": 431, "user_id": 6363036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d654d0d8b711e9021f78816b12f3298b?s=128&d=identicon&r=PG&f=1", "display_name": "Freek Wiedijk", "link": "https://stackoverflow.com/users/6363036/freek-wiedijk"}, "edited": false, "score": 0, "creation_date": 1485447290, "post_id": 41862038, "comment_id": 70937986, "body": "@Drew: Are you using GCC? I mean, is it useful to try to accomplish what you want using GCC extensions?"}, {"owner": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485450973, "post_id": 41862038, "comment_id": 70940284, "body": "@chux The float is potentially on unaligned boundaries."}, {"owner": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "reply_to_user": {"reputation": 431, "user_id": 6363036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d654d0d8b711e9021f78816b12f3298b?s=128&d=identicon&r=PG&f=1", "display_name": "Freek Wiedijk", "link": "https://stackoverflow.com/users/6363036/freek-wiedijk"}, "edited": false, "score": 0, "creation_date": 1485451010, "post_id": 41862038, "comment_id": 70940299, "body": "@FreekWiedijk No I am not able to use GCC or the extensions sadly..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485451054, "post_id": 41862038, "comment_id": 70940322, "body": "Suggest editing post to include important info of your comments."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485380836, "post_id": 41862164, "comment_id": 70908233, "body": "I&#39;m not sure the pointer variant invokes undefined behaviour. However, the <code>union</code> variant is the explicitly allowed way for type-punning and the prefered approach. Not sure, though why you added the <code>packed</code> attribute. It is not standard, and unnecessary."}, {"owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485380920, "post_id": 41862164, "comment_id": 70908286, "body": "The <code>packed</code> attribute is based on my experience with OS development. It might be unnecessary."}, {"owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485380951, "post_id": 41862164, "comment_id": 70908301, "body": "And any memory referencing of <code>float</code>s should be in my opinion undefined"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485381100, "post_id": 41862164, "comment_id": 70908380, "body": "It is quite useless even for OS development. Better convert to/from <code>uintN_t</code> and shjift /mask for marshalling. leave optimisations to the compiler. Packed <code>struct</code>s are likely to be slower (much slower if the CPU does not support unaligned accesses like many ARMs) on normal accesses, while (de)serialisation typically is only done for load/store of data."}, {"owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485381148, "post_id": 41862164, "comment_id": 70908404, "body": "@Olaf I also code for ARM. GCC optimizes it into bit shifting stuff (fortunately :D)"}, {"owner": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "edited": false, "score": 0, "creation_date": 1485381156, "post_id": 41862164, "comment_id": 70908409, "body": "Neither of those work when using a constant float value when calling the FLOAT_TO_BYTES(1.3).  It gives an error of cannot use &#39;&amp;&#39; on a constant."}, {"owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "reply_to_user": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "edited": false, "score": 0, "creation_date": 1485381211, "post_id": 41862164, "comment_id": 70908431, "body": "@Drew Are you sure this is possible for a constant? I think this <b>requires</b> memory access."}, {"owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "edited": false, "score": 0, "creation_date": 1485381222, "post_id": 41862164, "comment_id": 70908435, "body": "You should be using a temporary variable"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485381325, "post_id": 41862164, "comment_id": 70908486, "body": "@JakubKaszycki: That&#39;s not an optimisation, but actually slows down ever-day access just to &quot;simplify&quot; the reare times when you serialise the object. Write a set of marshalling or use a library like protobuf or it&#39;s small cousin nanopb to generate the code/structures."}, {"owner": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "edited": false, "score": 0, "creation_date": 1485381388, "post_id": 41862164, "comment_id": 70908514, "body": "That is what I am wondering.  I know it can be done using predefined constants but then that isn&#39;t terribly readable either and at that point most likely would just convert the float into a uint32_t using a post processing tool.  But that is a last resort."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "edited": false, "score": 0, "creation_date": 1485381447, "post_id": 41862164, "comment_id": 70908547, "body": "@Drew: You can write a macro for that using gcc extensions. But I don&#39;t see much reason to use a macro anyway ."}, {"owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "reply_to_user": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "edited": false, "score": 0, "creation_date": 1485381540, "post_id": 41862164, "comment_id": 70908607, "body": "@Drew: To view raw bytes of a float constant, you need to have a pointer to it to convert it to a scalar integer type pointer. So it implies memory access. Literals <b>don&#39;t</b> have a memory location. I use GCC, the extensions probably compute the float&#39;s value at compile time. If you want a portable program, don&#39;t use them"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485451736, "post_id": 41862164, "comment_id": 70940718, "body": "@JakubKaszycki In C, <i>literals</i> can have their address taken like <code>&amp;&quot;abc&quot;</code> or <code>&amp;((int [3]){1,2,3})</code>.  It does not require a GCC extension.   <code>123.4f</code> is not a <i>literal</i> in C.  It is a <i>constant</i>, a <i>floating constant</i>.  <i>Constants</i> do not necessarily have a memory location - which I think is more clear the intention of the <a href=\"http://stackoverflow.com/questions/41862038/get-raw-data-bytes-of-a-constant-float-value-using-define-in-c?noredirect=1#comment70908607_41862164\">comment</a>."}], "tags": [], "owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "is_accepted": false, "score": 0, "last_activity_date": 1485380530, "creation_date": 1485380530, "answer_id": 41862164, "question_id": 41862038, "link": "https://stackoverflow.com/questions/41862038/get-raw-data-bytes-of-a-constant-float-value-using-define-in-c/41862164#41862164", "title": "Get raw data bytes of a constant float value using #define in C", "body": "<p>You cannot use byte operations on <code>float</code>s, because they are not standarized.</p>\n\n<p>How can it be done? <strong>NOTE:</strong> All methods below assume that <code>float</code> is 32 bit wide.</p>\n\n<p>Pointer</p>\n\n<pre><code>#define FLOAT_TO_BYTES(value) (*((unsigned char *) value)), (*(((unsigned char *) value) + 1)), (*(((unsigned char *) value) + 2)), (*(((unsigned char *) value) + 3))\n</code></pre>\n\n<p>Union</p>\n\n<pre><code>typedef union\n{\n  float f;\n  unsigned char chars[4];\n} __attribute__ ((packed)) floatunion;\n\n// I am lazy:\n#define FLOAT_TO_BYTES(value) FLOAT_TO_BYTES0 ((floatunion *) &amp;value)\n#define fLOAT_TO_BYTES0(value) value-&gt;chars[0], value-&gt;chars[1], value-&gt;chars[2], value-&gt;chars[3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 3, "last_activity_date": 1485383073, "last_edit_date": 1485383073, "creation_date": 1485380835, "answer_id": 41862234, "question_id": 41862038, "link": "https://stackoverflow.com/questions/41862038/get-raw-data-bytes-of-a-constant-float-value-using-define-in-c/41862234#41862234", "title": "Get raw data bytes of a constant float value using #define in C", "body": "<p>Here's how you can get the bytes with a union:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunion float_bytes{\n    float f; \n    char  b[sizeof(float)];\n};\n\nint main()\n{\n    union float_bytes fb = { 1.1 };\n    for(int i=0; i&lt;sizeof(float);i++)\n        printf(\"%hhx\\n\", fb.b[i]);\n\n}\n</code></pre>\n\n<p>You can also simply just do:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    float f = 1.1;\n    for(int i=0; i&lt;sizeof(float);i++)\n        printf(\"%hhx\\n\", ((char*)&amp;f)[i]);\n\n}\n</code></pre>\n\n<p>Inspecting anything via a character pointer is always allowed.</p>\n\n<p>If you really want to, you can put the cast to a (char*) into a macro\nand pass in a float pointer or you can create a compound literal temporary in the macro so as to avoid an explicit float variable:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define FLOAT_BYTES(Float) ((char*)(&amp;(float){Float}))\nint main()\n{\n    for(int i=0; i&lt;sizeof(float);i++)\n        printf(\"%hhx\\n\", FLOAT_BYTES(1.1)[i]);\n}\n</code></pre>\n\n<p>(The lifetime of a compound literal is that of its nearest enclosing block.)</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1485453807, "last_edit_date": 1485453807, "creation_date": 1485452708, "answer_id": 41879692, "question_id": 41862038, "link": "https://stackoverflow.com/questions/41862038/get-raw-data-bytes-of-a-constant-float-value-using-define-in-c/41879692#41879692", "title": "Get raw data bytes of a constant float value using #define in C", "body": "<p>Use a <em>compound literal</em> of a <code>union</code>, available since C99.</p>\n\n<p>Does not use pointers or shifts.  Code needs to specify which byte and order of the <code>float</code> desired.</p>\n\n<pre><code>#define FLOAT_TO_BYTE(float_value, index) \\\n    (( \\\n    (union { float f; uint8_t u8[sizeof (float)]; }) {(float_value)} \\\n    ).u8[(index)])\n\n// size sensitive code - assume sizeof (float) == 4\n#define FLOAT_TO_BYTES(float_value) \\\n    FLOAT_TO_BYTE((float_value), 0), FLOAT_TO_BYTE((float_value), 1), \\\n    FLOAT_TO_BYTE((float_value), 2), FLOAT_TO_BYTE((float_value), 3)\n\nint main(void) {\n  const uint8_t byteArray[] = { \n      42,\n      FLOAT_TO_BYTE(11.4, 0),\n      FLOAT_TO_BYTE(11.4, 1),\n      FLOAT_TO_BYTE(11.4, 2),\n      FLOAT_TO_BYTE(11.4, 3),\n      42,\n      FLOAT_TO_BYTES(11.4)\n  };\n  for (unsigned i=0; i&lt;sizeof byteArray; i++) {\n    printf(\"%u %u\\n\", i, 1u*byteArray[i]);\n  }\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>0 42\n1 102\n2 102\n3 54\n4 65\n5 42\n6 102\n7 102\n8 54\n9 65\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7471188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa6cb31087211bd53a480e8a8d6c5f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/7471188/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1485453807, "creation_date": 1485379941, "last_edit_date": 1485453492, "question_id": 41862038, "link": "https://stackoverflow.com/questions/41862038/get-raw-data-bytes-of-a-constant-float-value-using-define-in-c", "title": "Get raw data bytes of a constant float value using #define in C", "body": "<p>I am trying to retrieve the raw data bytes from a constant float in C.  This is being done to create a readable constant byte array.  This can be seen below.</p>\n\n<pre><code>    #define FLOAT_TO_BYTES(value) \\\n        (uint8_t)(value),       (uint8_t)(value &lt;&lt; 8), \\\n        (uint8_t)(value &lt;&lt; 16), (uint8_t)(value &lt;&lt; 24)\n\n    const uint8_t byteArray[] = {\n         FLOAT_TO_BYTES(11.4)\n    };\n</code></pre>\n\n<p>The problem is that I cannot use pointers or any sort of a code block. I know the above doesn't work because you cannot shift a float value.  I have tried using unions but cannot get that to work either. Any help would be greatly appreciated! </p>\n"}, {"tags": ["python", "c", "forward-declaration", "python-extensions"], "answers": [{"comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1485481182, "post_id": 41870223, "comment_id": 70954073, "body": "This file (as all others) should compile, <i>OOTB</i>.  I&#39;ve tried a couple of  combinations (<i>VC2k10</i> vs <i>Py27</i> as an eg.), but wasn&#39;t able to reproduce the issue. You should probably (look for dups), and close the issue. <b>Anyway , I don&#39;t see this as a solution.</b>"}, {"owner": {"reputation": 380, "user_id": 5372734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef6cd95ba4f4f1188b57ca636f8e4591?s=128&d=identicon&r=PG&f=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/5372734/omer"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1485940242, "post_id": 41870223, "comment_id": 71129315, "body": "In Visual Studio 2013, you can&#39;t define a static variable twice. staticforward and statichere were both defiend as &quot;static&quot; so in fact, the error is legit. Changing staticforward to <code>extern</code> tells the compiler that the variable will be defined later."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1486087101, "post_id": 41870223, "comment_id": 71206180, "body": "<i>&quot;In Visual Studio 2013, you can&#39;t define a static variable twice. staticforward and statichere were both defeend as &#39;static&#39; so in fact, the error is legit&quot;</i>. This couldn&#39;t be more <b>wrong</b>. In any <i>VStudio</i> (or any <i>VS</i>, or <i>C</i>) compiler version, <code>static</code> means that the varables are only visible in the complation unit (<i>c</i> / <i>c++</i> file). Please check the internet (<i>Google</i>, <i>MSDN</i>, <i>Wiki</i> ,... and tons of others) for details."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1486087109, "post_id": 41870223, "comment_id": 71206185, "body": "It&#39;s kind of hillarous that (you think that) a whole community did such a mistake (naming <code>staticforward</code>(<code>staic</code>) but meaning <code>extern</code>) and in 2017 <b>you</b>  were the one who found it. BTW, on my box, <i>Py2.7.10</i> compiles <i>OOTB</i> using <i>VS2k13</i>....now, the question: what did you do to <i>subprocess.c</i> (or one of the headers included) to mess things up so bad?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1489110671, "post_id": 41870223, "comment_id": 72539315, "body": "What were you really trying to do?"}, {"owner": {"reputation": 380, "user_id": 5372734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef6cd95ba4f4f1188b57ca636f8e4591?s=128&d=identicon&r=PG&f=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/5372734/omer"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1489239468, "post_id": 41870223, "comment_id": 72589758, "body": "@CristiFati I extended the subrocess module to support spawning processes with a given NUMA node and affinity mask (like in the windows &#39;start&#39; command)."}], "tags": [], "owner": {"reputation": 380, "user_id": 5372734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef6cd95ba4f4f1188b57ca636f8e4591?s=128&d=identicon&r=PG&f=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/5372734/omer"}, "is_accepted": false, "score": -1, "last_activity_date": 1485422520, "creation_date": 1485422520, "answer_id": 41870223, "question_id": 41862030, "link": "https://stackoverflow.com/questions/41862030/python-extensions-with-c-staticforward/41870223#41870223", "title": "Python extensions with C: staticforward", "body": "<p>Ok I found an answer.</p>\n\n<p>It turns out that the definition of <code>staticforward</code> should have been <code>extern</code> instead of <code>static</code>. My compiler didn't know how to handle it. I guess in other compilers it works ok.</p>\n"}, {"comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1516755579, "post_id": 42793268, "comment_id": 83816462, "body": "Does this qualify as an answer to your question?"}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 1, "last_activity_date": 1567502500, "last_edit_date": 1567502500, "creation_date": 1489514207, "answer_id": 42793268, "question_id": 41862030, "link": "https://stackoverflow.com/questions/41862030/python-extensions-with-c-staticforward/42793268#42793268", "title": "Python extensions with C: staticforward", "body": "<p><strong>Notes</strong>:</p>\n\n<ul>\n<li>I'm talking about <em>Python 2.7</em> here (since in newer versions, the <em>subprocess</em> module no longer has an own <em>C</em> implementation for <em>Win</em>)</li>\n<li><em>Python 2.7</em> is built (officially) using <em>VStudio2008 (9.0)</em> according to <a href=\"https://wiki.python.org/moin/WindowsCompilers\" rel=\"nofollow noreferrer\">[Python.Wiki]: WindowsCompilers</a>. Building it with a newer (or better: different) version, might yield some other (and harder to find) errors. For example, when I built it with <em>VStudio 2010 (10.0)</em> (I used the built version to run a complex set of (<em>.py*</em>) scripts), I had some trouble at <em>runtime</em> when encountering socket related errors because of some mismatches between <em>errno</em> and <em>WSA*</em> codes, that were changed between the 2 versions</li>\n</ul>\n\n<p>When I tested, I couldn't understand why you encountered the issue and I didn't, then for a while I forgot about it, then when you posted the last comment, it started eating me alive again. As I said I was able to successfully compile the file using <em>VStudio 2010 / 2013</em>.</p>\n\n<p>Trying to compile the same (this was only an assumption) code with different results -> the <em>way</em> that code is compiled might differ. Therefore, I started investigating for other possible definition places for <em>staticforward</em> and <em>statichere</em> (besides lines <em>878</em> / <em>879</em> of <em>object.h</em>) due to conditional macros: <strong><em>#if</em></strong>, <strong><em>#ifdef</em></strong>, ... . But, I couldn't find any. So, I added some simpler statements:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>staticforward int i;\nstatichere int i = 2;\n</code></pre>\n\n<p>then, I manually replaced the defines:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static int i;\nstatic int i = 2;\n</code></pre>\n\n<p>in <em>_subprocess.c</em> (by coincidence, I added them at line <em>#137</em> - just before <code>statichere PyTypeObject sp_handle_type = {</code> - fact that prevented me to figure out the problem at this point), and it still compiled!!!</p>\n\n<p>Next step, I pasted the above lines in another solution that I had open (in a <em>.cpp</em> source file), and I was able to reproduce the error. So, I payed more attention to the compiler flags (I copy/pasted from the <em>x86 Debug</em> settings of the projects automatically converted by <em>VStudio</em> from the ones found in the <em>PCbuild</em> folder):</p>\n\n\n\n<ul>\n<li><p><em>VStudio 2013</em></p>\n\n<blockquote>\n<pre class=\"lang-bat prettyprint-override\"><code>/GS\n/analyze-\n/W3\n/Gy\n/Zc:wchar_t\n/I\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.11-vs2k13\\Python\"\n/I\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.11-vs2k13\\Modules\\zlib\"\n/I\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.11-vs2k13\\Include\"\n/I\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.11-vs2k13\\PC\"\n/Zi\n/Gm-\n/Od\n/Fd\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.11-vs2k13\\PCbuild\\obj\\win32_Debug\\pythoncore\\vc120.pdb\"\n/fp:precise\n/D \"_USRDLL\"\n/D \"Py_BUILD_CORE\"\n/D \"Py_ENABLE_SHARED\"\n/D \"MS_DLL_ID=\\\"2.7-32\\\"\"\n/D \"WIN32\"\n/D \"_WIN32\"\n/D \"_DEBUG\"\n/D \"_WINDLL\"\n/errorReport:prompt\n/GF\n/WX-\n/Zc:forScope\n/Gd\n/Oy-\n/Oi\n/MDd\n/Fa\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.11-vs2k13\\PCbuild\\obj\\win32_Debug\\pythoncore\\\"\n/nologo\n/Fo\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.11-vs2k13\\PCbuild\\obj\\win32_Debug\\pythoncore\\\"\n/Fp\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.11-vs2k13\\PCbuild\\obj\\win32_Debug\\pythoncore\\python27_d.pch\"\n</code></pre>\n</blockquote></li>\n<li><p><em>VStudio 2010</em></p>\n\n<blockquote>\n<pre class=\"lang-bat prettyprint-override\"><code>/I\"..\\Python\"\n/I\"..\\Modules\\zlib\"\n/I\"..\\Include\"\n/I\"..\\PC\"\n/Zi\n/nologo\n/W3\n/WX-\n/Od\n/Oy-\n/D \"_USRDLL\"\n/D \"Py_BUILD_CORE\"\n/D \"Py_ENABLE_SHARED\"\n/D \"WIN32\"\n/D \"_DEBUG\"\n/D \"_WIN32\"\n/D \"_WINDLL\"\n/GF\n/Gm-\n/MDd\n/GS\n/Gy\n/fp:precise\n/Zc:wchar_t\n/Zc:forScope\n/Fp\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.10-vcbuild\\PCbuild\\Win32-temp-Debug\\pythoncore\\pythoncore.pch\"\n/Fa\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.10-vcbuild\\PCbuild\\Win32-temp-Debug\\pythoncore\\\"\n/Fo\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.10-vcbuild\\PCbuild\\Win32-temp-Debug\\pythoncore\\\"\n/Fd\"E:\\Work\\Dev\\Fati\\WinBuild\\OPSWpython27\\src\\Python-2.7.10-vcbuild\\PCbuild\\Win32-temp-Debug\\pythoncore\\vc100.pdb\"\n/Gd\n/analyze-\n/errorReport:queue\n</code></pre>\n</blockquote></li>\n</ul>\n\n<p>and then it struck me: It's the <strong>way of how the file is compiled: <em>C</em> vs. <em>C++</em></strong> (the <a href=\"https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2013/032xwy55(v=vs.120)\" rel=\"nofollow noreferrer\">[MS.Docs]: /Tc, /Tp, /TC, /TP (Specify Source File Type)</a> flag). Of course, compiling <em>_subprocess.c</em> as <em>C++</em> would spit your error.</p>\n\n<p>Check <a href=\"https://stackoverflow.com/questions/41918914/creating-a-dynamically-allocated-struct-with-a-2d-dynamically-allocated-string/41922266#41922266\">[SO]: Creating a dynamically allocated struct with a 2D dynamically allocated string (@CristiFati's answer)</a>, for (a little bit) more details, and how the same mistake triggered very different errors.</p>\n"}], "owner": {"reputation": 380, "user_id": 5372734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef6cd95ba4f4f1188b57ca636f8e4591?s=128&d=identicon&r=PG&f=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/5372734/omer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1567502500, "creation_date": 1485379911, "question_id": 41862030, "link": "https://stackoverflow.com/questions/41862030/python-extensions-with-c-staticforward", "title": "Python extensions with C: staticforward", "body": "<p>So I needed to use the code of the subprocess module to add some functionality I needed. When I was trying to compile the _subprocess.c file, it gives this error message:</p>\n\n<p><code>Error  1   error C2086: 'PyTypeObject sp_handle_type' : redefinition</code></p>\n\n<p>This is the code part which is relevant from <code>_subprocess.c</code> file:</p>\n\n<pre><code>typedef struct {\n    PyObject_HEAD\n    HANDLE handle;\n} sp_handle_object;\n\nstaticforward PyTypeObject sp_handle_type;\n\nstatic PyObject*\nsp_handle_new(HANDLE handle)\n{\n    sp_handle_object* self;\n\n    self = PyObject_NEW(sp_handle_object, &amp;sp_handle_type);\n    if (self == NULL)\n        return NULL;\n\n    self-&gt;handle = handle;\n\n    return (PyObject*)self;\n}\n\n#if defined(MS_WIN32) &amp;&amp; !defined(MS_WIN64)\n#define HANDLE_TO_PYNUM(handle) PyInt_FromLong((long) handle)\n#define PY_HANDLE_PARAM \"l\"\n#else\n#define HANDLE_TO_PYNUM(handle) PyLong_FromLongLong((long long) handle)\n#define PY_HANDLE_PARAM \"L\"\n#endif\n\nstatic PyObject*\nsp_handle_detach(sp_handle_object* self, PyObject* args)\n{\n    HANDLE handle;\n\n    if (!PyArg_ParseTuple(args, \":Detach\"))\n        return NULL;\n\n    handle = self-&gt;handle;\n\n    self-&gt;handle = INVALID_HANDLE_VALUE;\n\n    /* note: return the current handle, as an integer */\n    return HANDLE_TO_PYNUM(handle);\n}\n\nstatic PyObject*\nsp_handle_close(sp_handle_object* self, PyObject* args)\n{\n    if (!PyArg_ParseTuple(args, \":Close\"))\n        return NULL;\n\n    if (self-&gt;handle != INVALID_HANDLE_VALUE) {\n        CloseHandle(self-&gt;handle);\n        self-&gt;handle = INVALID_HANDLE_VALUE;\n    }\n    Py_INCREF(Py_None);\n    return Py_None;\n}\n\nstatic void\nsp_handle_dealloc(sp_handle_object* self)\n{\n    if (self-&gt;handle != INVALID_HANDLE_VALUE)\n        CloseHandle(self-&gt;handle);\n    PyObject_FREE(self);\n}\n\nstatic PyMethodDef sp_handle_methods[] = {\n    { \"Detach\", (PyCFunction)sp_handle_detach, METH_VARARGS },\n    { \"Close\", (PyCFunction)sp_handle_close, METH_VARARGS },\n    { NULL, NULL }\n};\n\nstatic PyObject*\nsp_handle_getattr(sp_handle_object* self, char* name)\n{\n    return Py_FindMethod(sp_handle_methods, (PyObject*)self, name);\n}\n\nstatic PyObject*\nsp_handle_as_int(sp_handle_object* self)\n{\n    return HANDLE_TO_PYNUM(self-&gt;handle);\n}\n\nstatic PyNumberMethods sp_handle_as_number;\n\nstatichere PyTypeObject sp_handle_type = {\n    PyObject_HEAD_INIT(NULL)\n    0,                                  /*ob_size*/\n    \"_subprocess_handle\", sizeof(sp_handle_object), 0,\n    (destructor)sp_handle_dealloc, /*tp_dealloc*/\n    0, /*tp_print*/\n    (getattrfunc)sp_handle_getattr,/*tp_getattr*/\n    0,                                  /*tp_setattr*/\n    0,                                  /*tp_compare*/\n    0,                                  /*tp_repr*/\n    &amp;sp_handle_as_number,               /*tp_as_number */\n    0,                                  /*tp_as_sequence */\n    0,                                  /*tp_as_mapping */\n    0                                   /*tp_hash*/\n};`\n</code></pre>\n\n<p>Also I've found that:</p>\n\n<pre><code>#define staticforward static\n#define statichere static\n</code></pre>\n\n<p>I don't understand what am I doing wrong. Any help would be appreciated.\nBtw (I'm not sure if it's relevant), I'm using Visual Studio Professional 2013 to compile this file.</p>\n"}, {"tags": ["java", "c"], "comments": [{"owner": {"reputation": 68467, "user_id": 1081110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1", "display_name": "Dawood ibn Kareem", "link": "https://stackoverflow.com/users/1081110/dawood-ibn-kareem"}, "edited": false, "score": 5, "creation_date": 1485379268, "post_id": 41861858, "comment_id": 70907475, "body": "Java has a class called <code>BigInteger</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1485379426, "post_id": 41861858, "comment_id": 70907564, "body": "Iterating up to 10^100? Even if iteration is taking 1nSec, it will be 10^91 seconds. about 10^86 years.. Hm."}, {"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1485380095, "post_id": 41861858, "comment_id": 70907874, "body": "You can&#39;t iterate to a number that large, you have to use a formula which calculates the result in a reasonable amount of time."}], "answers": [{"comments": [{"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1485380141, "post_id": 41861897, "comment_id": 70907904, "body": "It will take longer than the age of the universe to iterate to that number however ;)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1485380193, "post_id": 41861897, "comment_id": 70907930, "body": "<b>very much</b> longer"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1485383554, "post_id": 41861897, "comment_id": 70909564, "body": "@PeterLawrey: It actually depends how the iteration is performed: if large chunks are skipped at a time, it may bring it down to a more manageable timeframe."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1485379384, "creation_date": 1485379384, "answer_id": 41861897, "question_id": 41861858, "link": "https://stackoverflow.com/questions/41861858/how-to-work-with-numbers-of-the-order-10100-in-c-java/41861897#41861897", "title": "How to work with numbers of the order 10^100 in C &amp; java?", "body": "<p>You can easily handle this kind of task with strings containing the decimal representation of the numbers.</p>\n\n<p>The sum of squares of the digits of a 100 digit number is bounded by <code>100*9^2 = 8100</code>: you can use <code>int</code> for that.</p>\n"}], "owner": {"reputation": 11, "user_id": 7471174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84342ca457d7dab8d1122d5a157cbb38?s=128&d=identicon&r=PG&f=1", "display_name": "MSZ", "link": "https://stackoverflow.com/users/7471174/msz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 1, "closed_date": 1485379417, "answer_count": 1, "score": -2, "last_activity_date": 1485379384, "creation_date": 1485379192, "question_id": 41861858, "link": "https://stackoverflow.com/questions/41861858/how-to-work-with-numbers-of-the-order-10100-in-c-java", "closed_reason": "Duplicate", "title": "How to work with numbers of the order 10^100 in C &amp; java?", "body": "<p>How to work with numbers of the order 10^100?Like iterating upto a number of that order,getting sum of squares of their digits;then checking if the sum matches the square of a certain number,if yes sum up those numbers and finally display the sum of those numbers.</p>\n"}, {"tags": ["c", "pointers", "stack", "malloc", "heap"], "comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 3, "creation_date": 1485378126, "post_id": 41861549, "comment_id": 70906862, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2528318/how-come-an-arrays-address-is-equal-to-its-value-in-c\">How come an array&#39;s address is equal to its value in C?</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485378161, "post_id": 41861549, "comment_id": 70906880, "body": "C does not require using a stack for automatic variables. That&#39;s implementation specific. And an array is not a pointer."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485378351, "post_id": 41861549, "comment_id": 70906974, "body": "@Olaf it&#39;s implementation specific insofar as all implementations specifically allocate on the stack ;-)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485378645, "post_id": 41861549, "comment_id": 70907120, "body": "@PeterA.Schneider It&#39;s not uncommon to use registers for locals."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485378664, "post_id": 41861549, "comment_id": 70907131, "body": "@PeterA.Schneider: You mean &quot;all implementations <b>you</b> are aware of&quot;. There are implementations which don&#39;t. And even those which use a stack do not place all automatic variables (including small arrays!) on the stack. Ever heard about register allocation?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485378716, "post_id": 41861549, "comment_id": 70907159, "body": "@Olaf (1) Which implementation doesn&#39;t use stack allocation? (2) Which address would that register have in this program, in your opinion?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485378836, "post_id": 41861549, "comment_id": 70907212, "body": "@PeterA.Schneider why does it have to have an address? Only if the program is actually using the address to perform some operations with side effects the address is required."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1485378857, "post_id": 41861549, "comment_id": 70907226, "body": "@EugeneSh. Did you read the OP?"}, {"owner": {"reputation": 119, "user_id": 1325536, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/56b725cdbbfe85c7e9529d727c77ddbb?s=128&d=identicon&r=PG", "display_name": "macsj200", "link": "https://stackoverflow.com/users/1325536/macsj200"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485378877, "post_id": 41861549, "comment_id": 70907242, "body": "@Olaf I realize that arrays and pointers are different, but my understanding is that in the first snippet <code>x</code> is a pointer to the 0th element of the array, i.e. a pointer."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485378920, "post_id": 41861549, "comment_id": 70907268, "body": "@macsj200 - your understanding is wrong, I&#39;m afraid. Not your fault, most tutorials I&#39;m aware of tell this lie when introducing arrays."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485378928, "post_id": 41861549, "comment_id": 70907276, "body": "@macsj200 Re &quot;my understanding is that in the first snippet x is a pointer:&quot; You are mistaken. Proof: ask for <code>sizeof(x)</code> vs. <code>sizeof(y)</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1485379147, "post_id": 41861549, "comment_id": 70907401, "body": "@Sneftel - The topic you link to is not quite a duplicate, since it only answers why an array address and value (on conversion) are the same.   It doesn&#39;t address why the case with <code>malloc()</code> has different values."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485379537, "post_id": 41861549, "comment_id": 70907628, "body": "@Olaf I&#39;m still waiting for an implementation which doesn&#39;t use stack allocation."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1485380329, "post_id": 41861549, "comment_id": 70907990, "body": "@PeterA.Schneider: There are some embedded CPUs like PIC which don&#39;t have a hardware stack. And there are implementations for e.g. HC08 which allow to allocate automatic variables statically for performance reasons for example. An optimised ABI might pass arrays in registers and copy back. An implementation can do quite a lot of things and taking too much for granted is a good way to write code which breaks with good compilers. The world is larger than we think... About taking the address of an array: Try <code>register int a[10];</code>."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485381867, "post_id": 41861549, "comment_id": 70908752, "body": "@Peter <code>malloc()</code> has no bearing on what&#39;s going on; the only thing that matters is the types. The linked question shows the same effect: <code>&amp;array == array</code> and <code>&amp;ptr != ptr</code>."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1485411969, "post_id": 41861549, "comment_id": 70918005, "body": "@Sneftel True; I didn&#39;t want to imply that. After an edit <code>y</code>  is not present in the OP any longer, but the point of the two <code>sizeof</code>s was that a pointer has a different size than a differently sized array ;-)."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485422390, "post_id": 41861549, "comment_id": 70922444, "body": "@Olaf  (0) Re &quot;The world is larger than we think&quot;: I know, Hamlet. (1) Re: &quot;don&#39;t have a hardware stack&quot;: Sure. It&#39;s a software stack. (2) Re &quot; allocate automatic variables statically&quot;: Obviously not reentrant, therefore not conforming, in other words: Not C, actually. If the implementation is used in conformant mode it of course <i>does store variables on the stack</i>  (e.g. <code>\u2013stack-auto</code> or equivalent)."}, {"owner": {"reputation": 3854, "user_id": 2235885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0d6a08639ef79ef960a52bd013e02?s=128&d=identicon&r=PG", "display_name": "joop", "link": "https://stackoverflow.com/users/2235885/joop"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485429761, "post_id": 41861549, "comment_id": 70926382, "body": "@PeterA.Schneider You are wrong, (Olaf is reight, of course) The Standard does not <i>dictate</i> a stack to be used. For example: the caller could construct the activation record, <i>send</i> it to some (remote) magic function-execution-node, and wait for the return value to be received. The function-node is allowed to use whatever method to store its (temp) objects."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 3854, "user_id": 2235885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0d6a08639ef79ef960a52bd013e02?s=128&d=identicon&r=PG", "display_name": "joop", "link": "https://stackoverflow.com/users/2235885/joop"}, "edited": false, "score": 1, "creation_date": 1485431321, "post_id": 41861549, "comment_id": 70927138, "body": "@joop Of course: I know, and never said that. The standard actually does not contain the word &quot;stack&quot;. But also of course, all implementations known to mankind <i>do provide</i> one. Note that you are entering an ontological discussion about stacks: What is a stack? I&#39;m not saying that a stack has a register ESP, or hardware support of <i>any</i> kind, or a certain memory layout. Perhaps we need a stack Turing test: If it behaves like a stack, it&#39;s a stack, however it&#39;s implemented? What you describe is just a complicated stack implementation, and thus unlikely to be used instead of a simpler one."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 1325536, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/56b725cdbbfe85c7e9529d727c77ddbb?s=128&d=identicon&r=PG", "display_name": "macsj200", "link": "https://stackoverflow.com/users/1325536/macsj200"}, "edited": false, "score": 0, "creation_date": 1485378951, "post_id": 41861588, "comment_id": 70907291, "body": "Could you elaborate a bit on what you mean by &quot;decay into pointers&quot;? I&#39;ve never heard of this behavior before."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485379324, "post_id": 41861588, "comment_id": 70907519, "body": "Actually the conversion is not related to passing as parameter, but the expression the array is used: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.2.1p3\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.3.2.1p3</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485379457, "post_id": 41861588, "comment_id": 70907583, "body": "@Olaf - Thanks. Amended to be more in line with the standard."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1485379409, "last_edit_date": 1485379409, "creation_date": 1485378143, "answer_id": 41861588, "question_id": 41861549, "link": "https://stackoverflow.com/questions/41861549/stack-vs-heap-pointers-in-c/41861588#41861588", "title": "Stack vs. heap pointers in C", "body": "<p>The reason is that unlike you were probably taught, arrays are not pointers. Arrays in C <em>decay into pointers</em><sup>1</sup> under some circumstances. When you pass an array to a function, it decays into a pointer to the first element. The address of that element is the same as the address of the entire array (an address is always to the first byte of an object).</p>\n\n<p>What you get from <code>malloc</code> is not an array, but the address of a chunk of memory. You assign the address to a pointer. But the pointer and the chunk are separate entities. So printing the value of the pointer, as opposed to its address, yields different results.</p>\n\n<hr>\n\n<p>(1) Decay is a fancy term for a type of implicit type conversion. When an array expression is used in <em>most</em> places (such as being passed as an argument to a function that expects a pointer), it automatically turns into a pointer to its first element. The \"decay\" is because you lose type information, i.e. the array size.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485378241, "post_id": 41861600, "comment_id": 70906913, "body": "Correction: the name of an arra decays to a pointer <b>to the first element</b> (not to the array) for most usages."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485378334, "post_id": 41861600, "comment_id": 70906968, "body": "I think saying the name decays is misleading. And there&#39;s no <i>value</i> distinction between a pointer to an array and a pointer to the first element of the array. Arrays keep all their objects in contiguous memory. But there is a <i>meaning</i> distinction, and here I want the meaning of pointing to the entire array."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485378897, "post_id": 41861600, "comment_id": 70907252, "body": "Well, the array itself does not decay. Actually, according ot the standard, it is the expression of &quot;array of type&quot; which is converted. And the standard does not disallow using different representations for different types (they need not compare equal). The type is always part of an expression, along with the value. Again you confuse the standard and implementation details. While they are relevant for the question, it is a good idea to point out these differences. Oversimplification and mashing up all together does not really help a beginner."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 3, "last_activity_date": 1485378196, "creation_date": 1485378196, "answer_id": 41861600, "question_id": 41861549, "link": "https://stackoverflow.com/questions/41861549/stack-vs-heap-pointers-in-c/41861600#41861600", "title": "Stack vs. heap pointers in C", "body": "<p>Your two print calls print the same value because one tries to print the array, which decays to a pointer to the array, and the other prints the address of the array. A pointer to the array contains the address of the array, so they're the same value.</p>\n\n<p>In the second case, one prints the value of <code>x</code>, the other prints the address of <code>x</code>. Since <code>x</code> is a pointer to the block of memory you allocated, these must be different values.</p>\n\n<p>So in the first case, all you have is an array (<code>x</code>). In the second case, you have an allocated block of memory (unnamed) and a pointer to that allocated block (<code>x</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1485379460, "creation_date": 1485379460, "answer_id": 41861924, "question_id": 41861549, "link": "https://stackoverflow.com/questions/41861549/stack-vs-heap-pointers-in-c/41861924#41861924", "title": "Stack vs. heap pointers in C", "body": "<p>It is perhaps surprising that one can indeed take the address of a whole array, partly because one doesn't need to very often. The array in a sense is a single object, which has one address, which is the address of its first byte. Like with all objects, the address is obtained with the address operator, <code>&amp;</code>.</p>\n\n<p>The first <em>element</em> of an array (like all of its elements) has an address, too, which is the address of its first byte. A pointer to its first element is what the array type is \"adjusted\" to when it is passed as an argument to a function.</p>\n\n<p>These two bytes are identical, and have the same address. But they have different types, which becomes obvious if you add 1 to them and print them again.</p>\n\n<p>The pointer <code>y</code>, by contrast, is its own distinct object (probably 4 or 8 bytes in size; enough to store an address in it). Like any object it has an address which can be obtained with the <code>&amp;</code> operator. Perhaps confusingly, it also <em>contains</em> an address, in this case the address of the first byte of the array. The two are of course not equal: The pointer object resides at a different location than the array (namely next to it on the stack, even if Olaf doesn't like that).</p>\n\n<p>Minor remark: You use <code>%p</code> for printing pointers, which is good. If you do that, you should strictly spoken cast the pointer which you print to a void pointer: <code>printf(\"%p\\n\", (void *)x);</code>. </p>\n"}], "owner": {"reputation": 119, "user_id": 1325536, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/56b725cdbbfe85c7e9529d727c77ddbb?s=128&d=identicon&r=PG", "display_name": "macsj200", "link": "https://stackoverflow.com/users/1325536/macsj200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4415, "favorite_count": 3, "accepted_answer_id": 41861588, "answer_count": 3, "score": 2, "last_activity_date": 1485381101, "creation_date": 1485378015, "last_edit_date": 1485381101, "question_id": 41861549, "link": "https://stackoverflow.com/questions/41861549/stack-vs-heap-pointers-in-c", "title": "Stack vs. heap pointers in C", "body": "<p>I'm currently learning C and I'm confused about memory layout and pointers.</p>\n\n<p>In the following code, it is my understanding that the array is allocated on the stack.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\n   int x[4];\n   x[0] = 3; x[1] = 2; x[2] = 1;\n   printf(\"%p\\n\",x);\n   printf(\"%p\\n\", &amp;x);\n}\n</code></pre>\n\n<p>My question is, why do the two print calls output the same value?</p>\n\n<p>I tried a similar snippet using malloc (allocate on the heap), and the values differ.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main () {\n   int *x = malloc(sizeof(int) * 4);\n   x[0] = 3; x[1] = 2; x[2] = 1;\n   printf(\"%p\\n\",x);\n   printf(\"%p\\n\", &amp;x);\n}\n</code></pre>\n"}, {"tags": ["c", "image", "scaling", "nearest-neighbor"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1485378511, "post_id": 41861274, "comment_id": 70907048, "body": "&quot;the program crashes&quot;. The way to debug such issues is with a debugger."}, {"owner": {"reputation": 125, "user_id": 7380629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a484e9891e672dfa231be334cded66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Henke", "link": "https://stackoverflow.com/users/7380629/henke"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1485378720, "post_id": 41861274, "comment_id": 70907161, "body": "Yeah well, I am not sure what it is about. It seems like the tmp2-&gt;pixels does not get any RGB values, which seems weird. However, the program runs and I have no warnings."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1485378775, "post_id": 41861274, "comment_id": 70907181, "body": "That&#39;s what a debugger is for! It allows you to step through the code line by line and examine the variables to see where things start going wrong."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1485379775, "post_id": 41861274, "comment_id": 70907735, "body": "This is clearly leading to out-of-bounds array accesses: <code>img-&gt;pixels[i][j] = tmp2-&gt;pixels[i+i&#47;2][j+j&#47;2];</code>."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7380629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a484e9891e672dfa231be334cded66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Henke", "link": "https://stackoverflow.com/users/7380629/henke"}, "edited": false, "score": 0, "creation_date": 1485529392, "post_id": 41879669, "comment_id": 70976077, "body": "This works flawlessly and perfectly. Thank you for this well detailed answer! I hope others can get help from your answer now aswell :)"}, {"owner": {"reputation": 125, "user_id": 7380629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a484e9891e672dfa231be334cded66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Henke", "link": "https://stackoverflow.com/users/7380629/henke"}, "edited": false, "score": 0, "creation_date": 1485545436, "post_id": 41879669, "comment_id": 70985448, "body": "Oh btw, I am trying to zoom into the image now. And my thought is that I first take a piece of the middle and after that make it the same size as the original. But I cant get the middle piece... Do you know what is wrong?  I will edit my question."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 125, "user_id": 7380629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a484e9891e672dfa231be334cded66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Henke", "link": "https://stackoverflow.com/users/7380629/henke"}, "edited": false, "score": 0, "creation_date": 1485597160, "post_id": 41879669, "comment_id": 70998510, "body": "I&#39;m afraid I don&#39;t understand the comment (nor did I see any edits to the question). Zooming is what <i>nearest neighbor</i> does (in for scaling factor <i>&gt;1</i>, out for <i>(0..1)</i>). If you want to only scale a part of the image, you have to pass its bounding rectangle, and the <code>for</code> loops won&#39;t iterate from <i>[0.. <code>height</code>/<code>width</code>]</i>, but from <i>[y1. . y2]</i> / <i>[x1..x2]</i>, where <i>y</i> is on the <code>height</code> axis, and <i>x</i> on the <code>width</code> one."}, {"owner": {"reputation": 125, "user_id": 7380629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a484e9891e672dfa231be334cded66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Henke", "link": "https://stackoverflow.com/users/7380629/henke"}, "edited": false, "score": 0, "creation_date": 1485613542, "post_id": 41879669, "comment_id": 71002922, "body": "Yeah okey thank you. Sorry about that, but I was in a hurry yesterday, and apparently my edit never saved due to an error when I pasted my code. However, I did try that method, but something goes wrong when I am trying to save the image."}, {"owner": {"reputation": 125, "user_id": 7380629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a484e9891e672dfa231be334cded66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Henke", "link": "https://stackoverflow.com/users/7380629/henke"}, "edited": false, "score": 0, "creation_date": 1485625441, "post_id": 41879669, "comment_id": 71006970, "body": "Okey, so I tried to crop the image so I later could upscale it. But I can not do it. I posted the code here."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 125, "user_id": 7380629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a484e9891e672dfa231be334cded66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Henke", "link": "https://stackoverflow.com/users/7380629/henke"}, "edited": false, "score": 0, "creation_date": 1485631335, "post_id": 41879669, "comment_id": 71009011, "body": "You&#39;re doing the same mistake. Look at how I am traversing the <b>temporary</b> image (2nd bullet): the indexes (<code>for</code> loops) should <b>always</b> go through [0..<code>height</code>/<code>width</code>], and coordinates translation (between images) should look like: <code>tmp-&gt;pixels[i][j] = img-&gt;pixels[img-&gt;height &#47; 4 + i][img-&gt;width &#47; 4 + j];</code>."}, {"owner": {"reputation": 125, "user_id": 7380629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a484e9891e672dfa231be334cded66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Henke", "link": "https://stackoverflow.com/users/7380629/henke"}, "edited": false, "score": 0, "creation_date": 1485631860, "post_id": 41879669, "comment_id": 71009153, "body": "Hum, I need to keep this in mind... Well thank you again :) Of course it worked."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 5, "last_activity_date": 1618046261, "last_edit_date": 1618046261, "creation_date": 1485452617, "answer_id": 41879669, "question_id": 41861274, "link": "https://stackoverflow.com/questions/41861274/scaling-up-an-image-using-nearest-neighbor/41879669#41879669", "title": "Scaling up an image using nearest-neighbor", "body": "<p>I see that you're overcomplicating things (walking over the image twice for example).<br>Here's the code (I am posting the whole program - I made assumptions about <em>Pixel</em> and <em>Image</em> that might not match what you have), but if you copy / paste <em>makeBigger</em> it should work in your code <em>OOTB</em>:</p>\n<p><em>code00.c</em>:</p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef uint32_t Pixel;\n\ntypedef struct {\n    uint32_t width, height;\n    Pixel **pixels;\n} Image;\n\n\nvoid makeBigger(Image *img, int scale) {\n    uint32_t i = 0, j = 0;\n    Image *tmp = (Image*)malloc(sizeof(Image));\n    tmp-&gt;height = img-&gt;height * scale;\n    tmp-&gt;width = img-&gt;width * scale;\n\n    tmp-&gt;pixels = (Pixel**)malloc(sizeof(Pixel*) * tmp-&gt;height);\n    for (i = 0; i &lt; tmp-&gt;height; i++) {\n        tmp-&gt;pixels[i] = (Pixel*)malloc(sizeof(Pixel) * tmp-&gt;width);\n        for (j = 0; j &lt; tmp-&gt;width; j++) {\n            tmp-&gt;pixels[i][j] = img-&gt;pixels[i / scale][j / scale];\n        }\n    }\n\n    for (i = 0; i &lt; img-&gt;height; i++)\n        free(img-&gt;pixels[i]);\n    free(img-&gt;pixels);\n\n    img-&gt;width = tmp-&gt;width;\n    img-&gt;height = tmp-&gt;height;\n    img-&gt;pixels = tmp-&gt;pixels;\n    free(tmp);\n}\n\n\nvoid printImage(Image *img) {\n    printf(&quot;Width: %d, Height: %d\\n&quot;, img-&gt;width, img-&gt;height);\n    for (uint32_t i = 0; i &lt; img-&gt;height; i++) {\n        for (uint32_t j = 0; j &lt; img-&gt;width; j++)\n            printf(&quot;%3d&quot;, img-&gt;pixels[i][j]);\n        printf(&quot;\\n&quot;);\n    }\n    printf(&quot;\\n&quot;);\n}\n\n\nint main() {\n    uint32_t i = 0, j = 0, k = 1;\n    Image img;\n    // Initialize the image\n    img.height = 2;\n    img.width = 3;\n    img.pixels = (Pixel**)malloc(sizeof(Pixel*) * img.height);\n    for (i = 0; i &lt; img.height; i++) {\n        img.pixels[i] = (Pixel*)malloc(sizeof(Pixel) * img.width);\n        for (j = 0; j &lt; img.width; j++)\n            img.pixels[i][j] = k++;\n    }\n\n    printImage(&amp;img);\n    makeBigger(&amp;img, 2);\n    printImage(&amp;img);\n\n    // Destroy the image\n    for (i = 0; i &lt; img.height; i++)\n        free(img.pixels[i]);\n    free(img.pixels);\n\n    printf(&quot;\\nDone.\\n&quot;);\n    return 0;\n}\n</code></pre>\n<p><strong>Notes</strong> (<em>makeBigger</em> related - designed to replace the content of the image given as argument):</p>\n<ul>\n<li>Construct a temporary image that will be the enlarged one</li>\n<li>Only traverse the <strong>temporary</strong> image <strong>once</strong> (populate its pixels as we allocate them); to maintain scaling to the original image and make sure that the appropriate pixel is &quot;copied&quot; into the new one, simply divide the indexes by the scaling factor: <code>tmp-&gt;pixels[i][j] = img-&gt;pixels[i / scale][j / scale]</code></li>\n<li>Deallocate the <strong>original</strong> image content: since each pixel row is <em>malloc</em>ed, it should also be <em>free</em>d (<code>free(img-&gt;pixels);</code> alone will yield <em>memory leaks</em>)</li>\n<li>Store the temporary image content (into the original one) and then deallocate it</li>\n</ul>\n<p><strong>Output</strong>:</p>\n\n<blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>[cfati@cfati-5510-0:/cygdrive/e/Work/Dev/StackOverflow/q041861274]&gt; ~/sopr.sh\n*** Set shorter prompt to better fit when pasted in StackOverflow (or other) pages ***\n\n[064bit prompt]&gt; ls\ncode00.c\n[064bit prompt]&gt; gcc -o code00.exe code00.c\n[064bit prompt]&gt; ./code00.exe\nWidth: 3, Height: 2\n  1  2  3\n  4  5  6\n\nWidth: 6, Height: 4\n  1  1  2  2  3  3\n  1  1  2  2  3  3\n  4  4  5  5  6  6\n  4  4  5  5  6  6\n\n\nDone.\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 125, "user_id": 7380629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a484e9891e672dfa231be334cded66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Henke", "link": "https://stackoverflow.com/users/7380629/henke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22011, "favorite_count": 1, "accepted_answer_id": 41879669, "answer_count": 1, "score": 2, "last_activity_date": 1618046261, "creation_date": 1485376829, "last_edit_date": 1549663332, "question_id": 41861274, "link": "https://stackoverflow.com/questions/41861274/scaling-up-an-image-using-nearest-neighbor", "title": "Scaling up an image using nearest-neighbor", "body": "<p>I have been trying to make my program scale up an image. I had some problem to allocate new space for my scaled image, but I think it is fixed. The problem I am having is that the program crashes when I am trying to send back my image from my temporary memory holder. </p>\n\n<p>The loaded image is placed in my <code>struct</code> <code>Image</code>. The pixels are placed in \n<code>img-&gt;pixels</code>, the height in <code>img-&gt;height</code> and the width in <code>img-&gt;width</code>. But I have no idea why the program crashes when I transfer the pixels from my <code>tmp2</code> <code>struct</code> to my <code>img</code> <code>struct</code> while it does not crash when I do the opposite. Here is the code:</p>\n\n<pre><code>void makeBigger(Image *img, int scale) {\n\n    Image *tmp2;\n    tmp2 = (Image*)malloc(sizeof(Image));\n    tmp2-&gt;height = img-&gt;height*scale;\n    tmp2-&gt;width = img-&gt;width*scale;\n\n    tmp2-&gt;pixels = (Pixel**)malloc(sizeof(Pixel*)*tmp2-&gt;height);\n    for (unsigned int i = 0; i &lt; img-&gt;height; i++)\n    {\n        tmp2-&gt;pixels[i] = (Pixel*)malloc(sizeof(Pixel)*tmp2-&gt;width);\n        for (unsigned int j = 0; j &lt; img-&gt;width; j++)\n        {\n            tmp2-&gt;pixels[i][j] = img-&gt;pixels[i][j];\n        }\n    }\n    free(img-&gt;pixels);\n\n    //scaling up the struct's height and width\n    img-&gt;height *= scale;\n    img-&gt;width *= scale;\n\n    img-&gt;pixels = (Pixel**)malloc(sizeof(Pixel*)*img-&gt;height);\n    for (unsigned int i = 0; i &lt; tmp2-&gt;height; i++)\n    {\n        img-&gt;pixels[i] = (Pixel*)malloc(sizeof(Pixel)*img-&gt;width);\n        for (unsigned int j = 0; j &lt; tmp2-&gt;width; j++)\n        {\n            img-&gt;pixels[i][j] = tmp2-&gt;pixels[i+i/2][j+j/2];\n        }\n    }\n}\n</code></pre>\n\n<p>I would be glad if you have any idea of how to make the nearest-neighbor method to work.</p>\n\n<p>EDIT: I am trying to crop the inner rectangle so I can scale it up (zoom). </p>\n\n<pre><code>Image *tmp = (Image*)malloc(sizeof(Image));\ntmp-&gt;height = img-&gt;height / 2;\ntmp-&gt;width = img-&gt;width / 2;\n\ntmp-&gt;pixels = (Pixel**)malloc(sizeof(Pixel*) * tmp-&gt;height);\nfor (unsigned i = img-&gt;height / 4 - 1; i &lt; img-&gt;height - img-&gt;height / 4; i++) {\n    tmp-&gt;pixels[i] = (Pixel*)malloc(sizeof(Pixel) * tmp-&gt;width);\n    for (unsigned j = img-&gt;width / 4; j &lt; img-&gt;width - img-&gt;width / 4; j++) {\n        tmp-&gt;pixels[i][j] = img-&gt;pixels[i][j];\n    }\n}\n\nfor (unsigned i = 0; i &lt; img-&gt;height; i++) {\n    free(img-&gt;pixels[i]);\n}\nfree(img-&gt;pixels);\n\nimg-&gt;height = tmp-&gt;height;\nimg-&gt;width = tmp-&gt;width;\nimg-&gt;pixels = tmp-&gt;pixels;\nfree(tmp);\n</code></pre>\n"}, {"tags": ["c", "whitespace", "scanf"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1485377316, "post_id": 41861265, "comment_id": 70906474, "body": "Where is the user input in your interaction example? Do you enter anything at all?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1485377477, "post_id": 41861265, "comment_id": 70906551, "body": "You need consume a newline after <code>scanf(&quot;%lf&quot;,&amp;aCustomer.inseam);</code>."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 3, "creation_date": 1485377490, "post_id": 41861265, "comment_id": 70906562, "body": "Always a bug: not testing the return value from scanf() and fopen()."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1485378259, "post_id": 41861265, "comment_id": 70906923, "body": "try <code>scanf(&quot; %19[^\\n]&quot;, aCustomer.name);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485380068, "post_id": 41861265, "comment_id": 70907866, "body": "Why does code not check the return value of <code>scanf(&quot;%d&quot;,&amp;aCustomer.age);</code>?"}, {"owner": {"reputation": 164, "user_id": 7471023, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a003323074721179ef635036f6966dea?s=128&d=identicon&r=PG&f=1", "display_name": "hego64", "link": "https://stackoverflow.com/users/7471023/hego64"}, "edited": false, "score": 0, "creation_date": 1485477110, "post_id": 41861265, "comment_id": 70953073, "body": "The example at the end I left out the input because whatever after would be just what I had put in; I was only trying to show that it displays everything all wrong.  Using scanf(&quot; %19[^\\n]&quot;, aCustomer.name); had the same problem. Still not sure what to do."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485525579, "post_id": 41861265, "comment_id": 70973343, "body": "@chux If the scanf consumes the word before space , and not the whole first name + last name that the OP wanted to , would still be scanf return output be 1 , i mean if it is 1 , what else can we find from it then?"}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1485539400, "post_id": 41861265, "comment_id": 70982388, "body": "unclear how you input values, are you writing all values on one line or are you entering values pressing enter after each value?"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1485837752, "post_id": 41861265, "comment_id": 71079315, "body": "so it worked for you ?"}], "answers": [{"tags": [], "owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "is_accepted": true, "score": 1, "last_activity_date": 1485538056, "last_edit_date": 1495541809, "creation_date": 1485526974, "answer_id": 41896154, "question_id": 41861265, "link": "https://stackoverflow.com/questions/41861265/scan-a-white-space-whole-line-in-c/41896154#41896154", "title": "Scan a white space/whole line in c", "body": "<p>This Will Work</p>\n\n<pre><code>  #include&lt;stdio.h&gt;\n  #include&lt;string.h&gt;\n  struct ClothingCustomer createACustomer(void);\n  struct ClothingCustomer{\n       char name[20];\n             int age;\n       double inseam;\n                    };\n\n       struct ClothingCustomer createACustomer(void){\n       struct ClothingCustomer aCustomer;\n       {                 //From Here Starts The Part in Which You Are Having Problems.\n       char c;\n        int i;\n       printf(\"Enter Customer Name: \");\n       scanf(\"%s\",aCustomer.name);\n       i = strlen(aCustomer.name);      // length of user input till first space\n       do{\n       scanf(\"%c\", &amp;c);\n       aCustomer.name[i++] = c;  // reading characters after first space (including it)\n       }while (c != '\\n');     // until user hits Enter\n\n       aCustomer.name[i - 1] = 0;       // string terminating\n       }\n       printf(\"Age: \");\n       scanf(\"%d\",&amp;aCustomer.age);\n\n       printf(\"Inseam: \");\n       scanf(\"%lf\",&amp;aCustomer.inseam);\n       return aCustomer;\n       };\n\n       int main(){\n             FILE* customersFile = fopen(\"customers.txt\",\"w\");\n             int i = 0;\n\n             for (i = 0; i &lt; 5; i++){\n             struct ClothingCustomer aCustomer = createACustomer();\n             fprintf(customersFile, \"%s %d %lf\\n\", aCustomer.name, aCustomer.age,aCustomer.inseam);\n             }\n             fclose(customersFile);\n             return 0;\n             }\n</code></pre>\n\n<p>I Highly Recommend You To Take A Look on this <a href=\"https://stackoverflow.com/a/28008980/5473170\">answer</a> , it will help you a lot , the method I used in here is mentioned in the above <a href=\"https://stackoverflow.com/a/28008980/5473170\">answer</a>.Please Give That <a href=\"https://stackoverflow.com/a/28008980/5473170\">answer</a> Credit If this method works for you.\nHere is the explanation for the part which you were having problem in , how is it working now.</p>\n\n<blockquote>\n  <blockquote>\n    <p>How this works? When user inputs characters from standard input, they will be stored in string variable until first blank space. After that, rest of entry will remain in input stream, and wait for next scanf. Next, we have a for loop that takes char by char from input stream (till \\n) and appends them to end of string variable, thus forming a complete string same as user input from keyboard.</p>\n  </blockquote>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1485532979, "last_edit_date": 1495541809, "creation_date": 1485532979, "answer_id": 41898152, "question_id": 41861265, "link": "https://stackoverflow.com/questions/41861265/scan-a-white-space-whole-line-in-c/41898152#41898152", "title": "Scan a white space/whole line in c", "body": "<p>Unclear why <code>scanf(\" %19[^\\n], aCustomer.name)</code> <a href=\"https://stackoverflow.com/questions/41861265/scan-a-white-space-whole-line-in-c?noredirect=1#comment70953073_41861265\">failed</a> for OP.</p>\n\n<p>Rather than use <code>scanf()</code> for complex input, separate user input from parsing.\n  Drop use of <code>scanf()</code> completely and use <code>fgets()</code> to fetch user input.  Use <code>sscanf()</code>, <code>strtod()</code>, <code>strtol()</code>, <code>strtok()</code> etc. for parsing.</p>\n\n<p>Be sure to check the result of user input and success of parsing functions.</p>\n\n<p>OP has not indicated how to handle troublesome input.  The below returns a zero-ed ClothingCustomer in that case.  Additional error codes or error messages may be useful.</p>\n\n<pre><code>struct ClothingCustomer createACustomer(void) {\n  // Suggest initializing\n  struct ClothingCustomer zero = { 0 };\n  struct ClothingCustomer aCustomer = { 0 };\n  char buffer[100];\n\n  printf(\"Enter Customer Name: \");\n  fflush(stdout);  // insure prompt is seen before asking for input\n  if (fgets(buffer, sizeof buffer, stdin) == NULL) return zero;\n  buffer[strcspn(buffer, \"\\r\\n\")] = '\\0';  // lop off potential line ending\n  if (strlen(buffer) &gt;= sizeof aCustomer.name) return zero;  // too long\n  strcpy(aCustomer.name, buffer);\n\n  printf(\"Age: \");\n  fflush(stdout);\n  if (fgets(buffer, sizeof buffer, stdin) == NULL) return zero;\n  if (sscanf(buffer, \"%d\", &amp;aCustomer.age) != 1) return zero;\n  // Let us do some range checking\n  // https://en.wikipedia.org/wiki/List_of_the_verified_oldest_people\n  if (aCustomer.age &lt; 0 || aCustomer.age &gt; 122) return zero;\n\n\n  printf(\"Inseam: \");\n  fflush(stdout);\n  if (fgets(buffer, sizeof buffer, stdin) == NULL) return zero;\n  if (sscanf(buffer, \"%lf\", &amp;aCustomer.inseam) != 1) return zero;\n\n  return aCustomer;\n}\n</code></pre>\n"}], "owner": {"reputation": 164, "user_id": 7471023, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a003323074721179ef635036f6966dea?s=128&d=identicon&r=PG&f=1", "display_name": "hego64", "link": "https://stackoverflow.com/users/7471023/hego64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 41896154, "answer_count": 2, "score": 2, "last_activity_date": 1485538056, "creation_date": 1485376803, "last_edit_date": 1485377100, "question_id": 41861265, "link": "https://stackoverflow.com/questions/41861265/scan-a-white-space-whole-line-in-c", "title": "Scan a white space/whole line in c", "body": "<p>So, I know this question has been asked before, but I can't seem to make anything work. What I have right now is this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nstruct ClothingCustomer{\n  char name[20];\n  int age;\n  double inseam;\n};\n\nstruct ClothingCustomer createACustomer(){\n  struct ClothingCustomer aCustomer;\n\n  printf(\"Enter Customer Name: \");\n  scanf(\"%s\",aCustomer.name);\n\n  printf(\"Age: \");\n  scanf(\"%d\",&amp;aCustomer.age);\n\n  printf(\"Inseam: \");\n  scanf(\"%lf\",&amp;aCustomer.inseam);\n  return aCustomer;\n};\n\nint main(){\n  FILE* customersFile = fopen(\"customers.txt\",\"w\");\n  for (int i = 0; i &lt; 5; i++){\n    struct ClothingCustomer aCustomer = createACustomer();\n    fprintf(customersFile, \"%s %d %lf\\n\", aCustomer.name, aCustomer.age,     aCustomer.inseam);\n  }\n\n  fclose(customersFile);\n  return 0;\n}\n</code></pre>\n\n<p>No matter what I do to try to make it scan more than one word, like a first/last name or something, it works, but here's what I get in the console while running this(with the scan options to try to get past a white space listed below; the above code functions correctly, but doesn't allow white space): </p>\n\n<pre><code>Enter Customer Name:\nAge:\nInseam:\nEnter Customer Name: Age:\nInseam: Enter Customer Name: Age:\nInseam:\nEnter Customer Name: Age:\nInseam:\nEnter Customer Name: Age:\nInseam:\n</code></pre>\n\n<p>How can I make it not do this? I've tried using:</p>\n\n<pre><code>[^\\n]\nfgets(name, sizeof(name), stdin);\n</code></pre>\n\n<p>and the same thing happens every time.</p>\n"}, {"tags": ["c", "gcc", "file-io"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1485376768, "post_id": 41861208, "comment_id": 70906190, "body": "(1) Use <code>fgets</code> : <code>scanf(&quot;%s&quot;, &amp;lineContent); printf(&quot;%s\\n&quot;, lineContent);</code> --&gt; <code>fgets(lineContent, sizeof lineContent, stdin); printf(&quot;%s&quot;, lineContent);</code>. Also <code>while(fgets(...) != NULL) fputs(lineContent, stdout);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1485376969, "post_id": 41861208, "comment_id": 70906288, "body": "(2) <code>scanf(&quot;%s&quot;, &amp;lineContent);</code> --&gt; <code>scanf(&quot;%99[^\\n]%*c&quot;, lineContent);</code>. Also <code>while(1==scanf(&quot;%99[^\\n]%*c&quot;, lineContent)) printf(&quot;%s\\n&quot;, lineContent);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1485376793, "creation_date": 1485376793, "answer_id": 41861263, "question_id": 41861208, "link": "https://stackoverflow.com/questions/41861208/how-to-read-one-whole-line-from-text-file-using/41861263#41861263", "title": "How to read one whole line from text file using &lt;", "body": "<p>If you want to read line by line, then use <a href=\"http://man7.org/linux/man-pages/man3/fgetc.3.html\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> or <a href=\"http://man7.org/linux/man-pages/man3/getdelim.3.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a> (available on POSIX systems) instead of <code>scanf()</code>. <code>scanf()</code> stops at first whitespace (or matching failure) for <code>%s</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1540278308, "post_id": 41861364, "comment_id": 92794278, "body": "posix has getline"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1485377502, "last_edit_date": 1485377502, "creation_date": 1485377174, "answer_id": 41861364, "question_id": 41861208, "link": "https://stackoverflow.com/questions/41861208/how-to-read-one-whole-line-from-text-file-using/41861364#41861364", "title": "How to read one whole line from text file using &lt;", "body": "<p><code>fgets()</code> is the most convenient standard library function for reading files one line at a time.  GNU <code>getline()</code> is even more convenient, but it is non-standard.</p>\n\n<p>If you want to use <code>scanf()</code>, however, then you can do so by using the <code>[</code> field descriptor instead of <code>s</code>:</p>\n\n<pre><code>char lineContent[100];\n\nscanf(\"%99[^\\n]\", &amp;lineContent);\ngetchar();\n</code></pre>\n\n<p>Note the use of an explicit field width to protect against overrunning the bounds of <code>lineContent</code> in the event that a long line is encountered.  Note also that the <code>[</code> descriptor differs from <code>s</code> in that <code>[</code> does not skip leading whitespace.  If preserving leading whitespace is important to you, then <code>scanf</code> with an <code>s</code> field is a non-starter.</p>\n\n<p>The <code>getchar()</code> reads the terminating newline, presuming that there is one, and that <code>scanf()</code> did not read 99 characters without reaching the end of the line.</p>\n"}], "owner": {"reputation": 522, "user_id": 2507710, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1972bd20155bc8fd9a5377136ccc13a?s=128&d=identicon&r=PG&f=1", "display_name": "online.0227", "link": "https://stackoverflow.com/users/2507710/online-0227"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7031, "favorite_count": 0, "accepted_answer_id": 41861364, "answer_count": 2, "score": 1, "last_activity_date": 1485377502, "creation_date": 1485376588, "last_edit_date": 1485376861, "question_id": 41861208, "link": "https://stackoverflow.com/questions/41861208/how-to-read-one-whole-line-from-text-file-using", "title": "How to read one whole line from text file using &lt;", "body": "<p>I am trying to get one whole line from some text file instead of one word until it meets white space, here is source code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main() {\n  int lineNum=0;\n  char lineContent[100];\n\n  scanf(\"%s\", &amp;lineContent);\n  printf(\"%s\\n\", lineContent);\n}\n</code></pre>\n\n<p>And here is my text file, called test.txt, content containing 2 lines:</p>\n\n<pre><code>111 John Smith 100 98 1.2 2.5 3.6\n222 Bob  Smith 90 91 3.2 6.5 9.6\n</code></pre>\n\n<p>And I run it with following command:</p>\n\n<pre><code>a.out &lt; test.txt\n</code></pre>\n\n<p>My output is just:</p>\n\n<pre><code>111\n</code></pre>\n\n<p>What I want is:</p>\n\n<pre><code>111 John Smith 100 98 1.2 2.5 3.6\n</code></pre>\n\n<p>Of course, I can simply use while statement and read recursively until it meets EOF, but that is not what I want. I just want to read one whole line per each time I read from file.</p>\n\n<p>How can I do this?</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c", "stm32", "stm32ldiscovery"], "comments": [{"owner": {"reputation": 126, "user_id": 6288232, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/31b4af300de80f5948bc08638711e260?s=128&d=identicon&r=PG&f=1", "display_name": "Youssef Sakuragi", "link": "https://stackoverflow.com/users/6288232/youssef-sakuragi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485376647, "post_id": 41861179, "comment_id": 70906118, "body": "@Olaf Thanks for your answer, I actually did read it."}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 6288232, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/31b4af300de80f5948bc08638711e260?s=128&d=identicon&r=PG&f=1", "display_name": "Youssef Sakuragi", "link": "https://stackoverflow.com/users/6288232/youssef-sakuragi"}, "is_accepted": true, "score": 2, "last_activity_date": 1485378329, "creation_date": 1485378329, "answer_id": 41861636, "question_id": 41861179, "link": "https://stackoverflow.com/questions/41861179/how-does-delay-work-on-the-stm32l152rc/41861636#41861636", "title": "How does delay work on the stm32l152RC?", "body": "<p>After doing some research this is the answer I came up with.\ndoing <code>SysTick_Config(RCC_Clocks.HCLK_Frequency / 1000);</code> means you'r setting 1000 ticks per second. when you do <code>Delay(100)</code> the delay will be 100 ms.</p>\n"}], "owner": {"reputation": 126, "user_id": 6288232, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/31b4af300de80f5948bc08638711e260?s=128&d=identicon&r=PG&f=1", "display_name": "Youssef Sakuragi", "link": "https://stackoverflow.com/users/6288232/youssef-sakuragi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "accepted_answer_id": 41861636, "answer_count": 1, "score": 0, "last_activity_date": 1485511438, "creation_date": 1485376472, "last_edit_date": 1485511438, "question_id": 41861179, "link": "https://stackoverflow.com/questions/41861179/how-does-delay-work-on-the-stm32l152rc", "title": "How does delay work on the stm32l152RC?", "body": "<p>I just bought an stm32l152RC and was wondering how the delay works.\nThe system clock is 16Mhz.</p>\n\n<p>Code: </p>\n\n<pre><code>static volatile uint32_t TimingDelay;\nvoid Delay(__IO uint32_t nCount);\n\n\nint main(void) {\n    Config_Systick();\n    char *RCCp = (char*) 0x40023800;\n    int *PBp = (int *) 0x40020400;\n    // RCC Config\n    *((int*) (RCCp + 28)) |= 0x3f;\n    *((int*) (RCCp + 32)) |= 1;\n    *PBp = 0x5000;\n\n    while (1) {\n        GPIO_TOGGLE(GPIOB, LD_GREEN); //toggle green led\n        Delay(1000); // 1 second?\n    }\n} // end of main\n\n    RCC_ClocksTypeDef RCC_Clocks;\n    void Config_Systick() {\n        RCC_GetClocksFreq(&amp;RCC_Clocks);\n        SysTick_Config(RCC_Clocks.HCLK_Frequency / 1000); // setting changed to / 1000\n    }\n\n    void TimingDelay_Decrement(void) {\n        if (TimingDelay != 0x00) {\n            TimingDelay--;\n        }\n    }\n\n    void Delay(uint32_t nTime) {\n        TimingDelay = nTime;\n        while (TimingDelay != 0) {\n        };\n    }\n</code></pre>\n\n<p>When I execute <code>Delay(1000);</code> in this case the Delay is 1 second, could someone please explain why the delay is 1 second?</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1485376627, "post_id": 41861114, "comment_id": 70906109, "body": "Call <code>srand</code> once at the beginning of <code>main</code>."}, {"owner": {"reputation": 125, "user_id": 3483181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GgpoG.jpg?s=128&g=1", "display_name": "DsDude", "link": "https://stackoverflow.com/users/3483181/dsdude"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1485377034, "post_id": 41861114, "comment_id": 70906328, "body": "That doesn&#39;t seem to be affecting anything, basically my problem is that all my coordinates are the same for each room in the room struct array, so in my terminal only one room is being produced in the dungeon, because obviously every coordinate is the same for every room, which it shouldn&#39;t be."}, {"owner": {"reputation": 125, "user_id": 3483181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GgpoG.jpg?s=128&g=1", "display_name": "DsDude", "link": "https://stackoverflow.com/users/3483181/dsdude"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1485377136, "post_id": 41861114, "comment_id": 70906381, "body": "Nevermind, I see what you mean&#39;t, I need to delete the other srands too."}, {"owner": {"reputation": 125, "user_id": 3483181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GgpoG.jpg?s=128&g=1", "display_name": "DsDude", "link": "https://stackoverflow.com/users/3483181/dsdude"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1485377157, "post_id": 41861114, "comment_id": 70906392, "body": "Thank you so much, it seems that was the only problem lol!"}], "owner": {"reputation": 125, "user_id": 3483181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GgpoG.jpg?s=128&g=1", "display_name": "DsDude", "link": "https://stackoverflow.com/users/3483181/dsdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1485376694, "answer_count": 0, "score": 0, "last_activity_date": 1485376249, "creation_date": 1485376249, "question_id": 41861114, "link": "https://stackoverflow.com/questions/41861114/how-to-iterate-through-a-struct-array-properly", "closed_reason": "Duplicate", "title": "How to iterate through a struct array properly?", "body": "<p>I've seen several threads on this, but I'm still not understanding why I've having the problem of going through my struct array.</p>\n\n<p>So I have a header file with two typedef structs that I use in my c source code:</p>\n\n<pre><code>typedef struct Point{\n    int y;\n    int x;\n} point;\n\ntypedef struct Room{\n    point top_left;\n    point top_right;\n    point bottom_left;\n    point bottom_right;\n} room;\n\n\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include \"dungeon.h\"\n\n#define HEIGHT 105\n#define WIDTH 160\n\nint randomSeed();\nvoid createDungeon();\n\nint main() {\n    createDungeon();\n    return 0;\n}\n\nvoid createDungeon(){\n    char dungeonGrid[HEIGHT][WIDTH];\n    room *rooms = malloc(10 * sizeof(room));\n    int i,y,x;\n    int a;\n\n    for(i = 0; i &lt; 10; i++){\n        srand(randomSeed());\n        int height = (rand() % (10 + 1 - 5)) + 5;\n        int width = (rand() % (15 + 1 - 7)) + 7;\n\n        int randomY = (rand() % (105 + 1 - 0)) + 0;\n        int randomX = (rand() % (160 + 1 - 0)) + 0;\n\n        rooms[i].top_left.y = randomY;\n        rooms[i].top_left.x = randomX;\n        rooms[i].top_right.y = randomY;\n        rooms[i].top_right.x = randomX + width;\n        rooms[i].bottom_left.y = randomY + height;\n        rooms[i].bottom_left.x = randomX;\n        rooms[i].bottom_right.y = randomY + height;\n        rooms[i].bottom_right.x = randomX + width;\n\n    }\n\n   for(y = 0; y &lt; HEIGHT; y++){\n        for(x = 0; x &lt; WIDTH; x++){\n            dungeonGrid[y][x] = ' ';\n        }\n    }\n\n    for(y = 0; y &lt; HEIGHT; y++){\n        for(x = 0; x &lt; WIDTH; x++){\n            for(a = 0; a &lt; 10; a++){\n                if(rooms[a].top_left.y &lt;= y  &amp;&amp;  y &lt;= rooms[a].bottom_left.y &amp;&amp; rooms[a].top_left.x &lt;= x  &amp;&amp; rooms[a].top_right.x &gt;= x){\n                    dungeonGrid[y][x] = '.';\n                }\n            }\n        }\n    }\n\n\n    for(y = 0; y &lt; HEIGHT; y++){\n        for(x = 0; x &lt; WIDTH; x++) {\n            printf(\"%c\", dungeonGrid[y][x]);\n        }\n        printf(\"\\n\");\n    }\n\n}\n\nin\n\nt randomSeed(){\n    srand(time(NULL));\n    int randNum = (rand() % (100000 + 1 - 0)) + 0;\n    return randNum;\n}\n</code></pre>\n\n<p><strong>What I'm trying to do:</strong> Basically I'm making a dungeon of size 105x160, with random sized rooms inside of it. These rooms are going to be shown in the terminal as a set of rows and columns that use the character '.' I'm basically using a for loop to find a random x and random y on the dungeon grid, and use that as my starting point to place a room. I'm also using rand() to get a random height and width. The minimum height and width needs to be 7x5 and I just chose an arbitrary number for the maximum size that it should be.</p>\n\n<p><strong>The problem:</strong> I checked the pointer for my rooms struct (*rooms) and found that at rooms[0 - 9], all of the points for top_left, top_right, etc are exactly the same number and it shouldn't be.</p>\n\n<p><strong>My Question:</strong> How do I properly iterate through my struct array, so that the there are different coordinates for each room? Maybe there is something wrong with the way I call rand()? I made a method to get various random numbers and I thought that my for loops would call that method and give a random number each time, so my coordinates will be different for each room.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485374825, "post_id": 41860574, "comment_id": 70905102, "body": "<code>scanf_s(&quot;%d&quot;);</code> invokes undefined behaviour. It is clearly wrong and harmful."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1485374887, "post_id": 41860574, "comment_id": 70905139, "body": "1) Because when the end of <code>main</code> is reached the program terminates and all its associated resources (including console) are freed. 2) I seriously doubt - unless other (similar) mechanisms that block the program execution are used. 3) One example is any other function that waits for user input (e.g. <code>getch</code>). Or to be more generic you can wait until something happens (an event occurs)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "edited": false, "score": 0, "creation_date": 1485374934, "post_id": 41860574, "comment_id": 70905168, "body": "So it <code>is</code> considered as bad practice ? Strange that we have been told to do this and to take it as a standard. Any other suggestions as to what I can use?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1485374938, "post_id": 41860574, "comment_id": 70905171, "body": "@CristiFati: <code>getch</code> is not a standard function. Why not use <code>(void)getchar();</code>?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1485375069, "post_id": 41860574, "comment_id": 70905242, "body": "Here is the solution : <a href=\"http://stackoverflow.com/questions/4118073/how-to-stop-console-from-closing-on-exit\" title=\"how to stop console from closing on exit\">stackoverflow.com/questions/4118073/&hellip;</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485375131, "post_id": 41860574, "comment_id": 70905279, "body": "@Ryan: It is not only bad practice, but wrong and illegal code (look up &quot;undefined behaviour&quot;!). Whoever told you should take a C course himself and not teach C to others. Solution: get a better environment, e.g. start your program from a console as stated in the answer below."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485375260, "post_id": 41860574, "comment_id": 70905352, "body": "@Olaf: Indeed, but (on <i>Win</i> only) I prefer <code>getch</code> to <code>getchar</code> because it returns after any key is pressed (doesn&#39;t have to end in <i>ENTER</i>)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1485375419, "post_id": 41860574, "comment_id": 70905437, "body": "@CristiFati: The correct way is not to have such input at all. For typical console applications which read input from stdin, both are harmful. A better approach is to use a wrapper shell/batch script which manages this problem. (or use an OS which does not defy working with console applications)"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485375626, "post_id": 41860574, "comment_id": 70905552, "body": "@Olaf: Again true. But there&#39;s a case when the <i>batch</i> /_cmd_ doesn&#39;t work (at least not OOTB): when running the code directly from <i>VStudio</i>."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1485378684, "post_id": 41860574, "comment_id": 70907142, "body": "I believe Visual Studio in earlier versions used to have an option in the Debugging settings to prevent the console window from closing when the program exited, but anyway see <a href=\"http://stackoverflow.com/questions/2529617/how-to-stop-c-console-application-from-exiting-immediately\" title=\"how to stop c console application from exiting immediately\">stackoverflow.com/questions/2529617/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 3470630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ffcadf9aa396bb5596dc63e2e5a466?s=128&d=identicon&r=PG", "display_name": "TezlaCoil", "link": "https://stackoverflow.com/users/3470630/tezlacoil"}, "edited": false, "score": 0, "creation_date": 1485374876, "post_id": 41860643, "comment_id": 70905132, "body": "You can also add a &quot;busy wait&quot;, something like <code>for(int i = 0; i &lt; BIG_NUMBER; i++);</code>, that will stall the program until <code>i</code> counts up to <code>BIG_NUMBER</code>, which can take some time depending how big you make <code>BIG_NUMBER</code>."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1485374984, "post_id": 41860643, "comment_id": 70905193, "body": "Can&#39;t remember how (long time ago), but I was able to set some parameter in Visual that prevents closing after termination."}, {"owner": {"reputation": 1186, "user_id": 2363015, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SLH37.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/2363015/luke"}, "reply_to_user": {"reputation": 134, "user_id": 3470630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ffcadf9aa396bb5596dc63e2e5a466?s=128&d=identicon&r=PG", "display_name": "TezlaCoil", "link": "https://stackoverflow.com/users/3470630/tezlacoil"}, "edited": false, "score": 1, "creation_date": 1485375047, "post_id": 41860643, "comment_id": 70905230, "body": "@TezlaCoil That&#39;s possible, but apart from being unreliable (you don&#39;t know how long it will last, and that time will differ between computers), it will ramp up CPU core usage to 100%. If waiting for a certain period of time is the desired behaviour, there&#39;s sleep() function which won&#39;t be taxing on the CPU and will last the same time on all machines."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "edited": false, "score": 0, "creation_date": 1485375096, "post_id": 41860643, "comment_id": 70905257, "body": "We have been told to accept this as a standard. Is it just an easy way of getting around the problem of closing after termination? I am quite sure that previous versions of Visual Studio did not require this."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1485375210, "post_id": 41860643, "comment_id": 70905317, "body": "@Luke, or possibly the compiler will optimize out the busy loop altogether, making it ineffective for delaying program termination."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 134, "user_id": 3470630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ffcadf9aa396bb5596dc63e2e5a466?s=128&d=identicon&r=PG", "display_name": "TezlaCoil", "link": "https://stackoverflow.com/users/3470630/tezlacoil"}, "edited": false, "score": 1, "creation_date": 1485375235, "post_id": 41860643, "comment_id": 70905340, "body": "@TezlaCoil: Never use artificial delays. They will eventually aggrevate the user."}, {"owner": {"reputation": 1186, "user_id": 2363015, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SLH37.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/2363015/luke"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1485375272, "post_id": 41860643, "comment_id": 70905356, "body": "@JohnBollinger you&#39;re right, I&#39;m actually pretty sure that will happen unless compiling with -O0 (and even then can&#39;t guarantee for that)"}, {"owner": {"reputation": 1186, "user_id": 2363015, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SLH37.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/2363015/luke"}, "edited": false, "score": 2, "creation_date": 1485375472, "post_id": 41860643, "comment_id": 70905468, "body": "@Ryan That is a standard workaround for programs which you expect will be launched by the user from a graphical environment (i.e. only in school environments, because CLI user apps are pretty rare these days, and you&#39;d expect from user to launch them from the existing console). It is extremely annoying for someone who is e.g. writing a script calling your program and expecting it to exit cleanly after finishing its job, since this might prevent program halting altogether until something is entered."}, {"owner": {"reputation": 1186, "user_id": 2363015, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SLH37.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/2363015/luke"}, "edited": false, "score": 0, "creation_date": 1485375551, "post_id": 41860643, "comment_id": 70905507, "body": "As for the VS, it&#39;s VS-specific behaviour. There might be some kind of flag which will trigger a similar workaround preventing the console to close in the settings, but I haven&#39;t tinkered with VS for quite a long time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485375552, "post_id": 41860643, "comment_id": 70905508, "body": "@Luke: &quot;CLI user apps are pretty rare these days&quot; - pretty nonsense. Almost every larger server application is console-based."}, {"owner": {"reputation": 1186, "user_id": 2363015, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SLH37.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/2363015/luke"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485375652, "post_id": 41860643, "comment_id": 70905563, "body": "@Olaf I was aiming at regular users with &quot;user apps&quot;. I understand there are CLI apps, especially for a headless environment where it&#39;s the only way, but in that scenario you really don&#39;t want the app to expect input in order to close."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "edited": false, "score": 0, "creation_date": 1485376049, "post_id": 41860643, "comment_id": 70905786, "body": "Thanks all for your insight and knowledge in this matter."}], "tags": [], "owner": {"reputation": 1186, "user_id": 2363015, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SLH37.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/2363015/luke"}, "is_accepted": true, "score": 4, "last_activity_date": 1485375707, "last_edit_date": 1485375707, "creation_date": 1485374588, "answer_id": 41860643, "question_id": 41860574, "link": "https://stackoverflow.com/questions/41860574/what-is-the-use-of-scanf-s-at-the-end-of-my-program/41860643#41860643", "title": "What is the use of scanf_s() at the end of my program?", "body": "<p>Windows automatically closes the console programs when they finish execution. scanf_s, as well as scanf, getchar (though be aware there might have been some remaining unprocessed input, often consuming this call) or system(\"pause\") (note - Windows-specific, not recommended) prevent this from happening, forcing the window to stay open expecting input.</p>\n\n<p>Visual Studio might have prevented console from closing in some other way or used some internal console in earlier versions, making this workaround unnecessary. CLion, for example, uses its own console which doesn't suffer from this issue. Also if you launch your program manually from cmd you won't need anything to prevent console from closing - it will just return to the earlier state after your program finished executing.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "edited": false, "score": 0, "creation_date": 1485375237, "post_id": 41860784, "comment_id": 70905342, "body": "I have used Visual Studio 2010 last year and I am pretty sure I never had any problems with the console disappearing, and having to use this illegal scanf parameter. It could be that I had a particular setting enabled."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1485375615, "post_id": 41860784, "comment_id": 70905544, "body": "@Ryan, note that your <code>scanf()</code> invokes undefined behavior (&quot;illegal&quot; is meaningless in this context) only because you do not provide an argument corresponding to the field descriptor in the format.  It&#39;s still <i>poor practice</i> to delay termination in this way, but that&#39;s a whole other discussion."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "edited": false, "score": 0, "creation_date": 1485377806, "post_id": 41860784, "comment_id": 70906703, "body": "Thanks for your insight on this matter. Your answer was also very helpful."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1485375070, "creation_date": 1485375070, "answer_id": 41860784, "question_id": 41860574, "link": "https://stackoverflow.com/questions/41860574/what-is-the-use-of-scanf-s-at-the-end-of-my-program/41860784#41860784", "title": "What is the use of scanf_s() at the end of my program?", "body": "<blockquote>\n  <ol>\n  <li>Why does my console disappear if I do not write scanf_s(\"%d\");</li>\n  </ol>\n</blockquote>\n\n<p>As @Luke already answered, Windows closes the console window when the program running within terminates.  The program will not terminate if it is waiting for user input, as <code>scanf_s()</code> and many other I/O functions can make it do.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>I am using Visual Studio 2015 and have noticed that earlier versions do not require this to be written at the end of the code. Why is this?</li>\n  </ol>\n</blockquote>\n\n<p>It's news to me that earlier versions of VS behaved differently.  This is not a VS-specific behavior, but rather a general Windows behavior.  If earlier version behaved differently then that's because those versions of VS made some kind of special provision for running console programs.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Is there any other way of preventing my console from disappearing without the use of scanf_s(\"%d\"); ?</li>\n  </ol>\n</blockquote>\n\n<p>Yes.  Open a console window manually and run your program inside, from the command line.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 41860643, "answer_count": 2, "score": 0, "last_activity_date": 1485375707, "creation_date": 1485374360, "last_edit_date": 1485374979, "question_id": 41860574, "link": "https://stackoverflow.com/questions/41860574/what-is-the-use-of-scanf-s-at-the-end-of-my-program", "title": "What is the use of scanf_s() at the end of my program?", "body": "<p>After the first few months of learning programming at my university I have always been including <code>scanf_s(\"%d\");</code> at the end of the file or at certain strategic places in my code, in order for the console not to disappear once the program has loaded.</p>\n\n<p>I cannot seem to find a concise answer or an explanation as to:</p>\n\n<ol>\n<li><em>Why does my console disappear if I do not write <code>scanf_s(\"%d\");</code></em></li>\n<li><em>I am using Visual Studio 2015 and have noticed that earlier versions do not require this to be written at the end of the code. Why is this?</em></li>\n<li><em>Is this considered bad practice` ?</em></li>\n</ol>\n"}, {"tags": ["c", "arrays", "string", "file", "memory"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1485374009, "post_id": 41860427, "comment_id": 70904658, "body": "At a higher, conceptual level, you may want to look into a dictionary or hash table data structure for this problem."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1485374283, "post_id": 41860427, "comment_id": 70904803, "body": "The second code snippet allocates space for 20 pointers, not 150000. And it allocates no space for the characters of each word."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485374532, "post_id": 41860427, "comment_id": 70904944, "body": "&quot;I changed the memory allocation to 2D&quot; - You did not. That&#39;s not a 2D array, but a jagged array. A pointer is not an array!"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6951608, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c3d6e788186b06d3c833a30e4262fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/6951608/josh"}, "edited": false, "score": 0, "creation_date": 1485375846, "post_id": 41860636, "comment_id": 70905669, "body": "Thank you! I was lost with the memory allocation part but this makes sense the way you explained it."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1485374571, "creation_date": 1485374571, "answer_id": 41860636, "question_id": 41860427, "link": "https://stackoverflow.com/questions/41860427/c-saving-strings-into-array-elements/41860636#41860636", "title": "C - Saving strings into array elements", "body": "<p>In your second version, you allocate space for 20 pointers, but you leave those pointers uninitialized and without anything to point to.  I'm sure you can imagine how that presents a problem when you then try to read from your dictionary into the memory designated by one of those pointers.</p>\n\n<p>It looks like you want to allocate space for <code>numwords</code> pointers</p>\n\n<pre><code>char** words = malloc(numwords * sizeof(*words));\n</code></pre>\n\n<p>, and for each of them, to allocate space for a word.</p>\n\n<pre><code>for(i = 0; i &lt; numWords; i++) {\n    words[i] = malloc(20);  //  by definition, sizeof(char) == 1\n    // ...\n</code></pre>\n\n<p>Additionally, <em>do</em> check the return value of <code>malloc()</code>, which will be <code>NULL</code> in the event of allocation failure.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6951608, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c3d6e788186b06d3c833a30e4262fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/6951608/josh"}, "edited": false, "score": 0, "creation_date": 1485380547, "post_id": 41861438, "comment_id": 70908087, "body": "Thanks for this, tons of useful info! As for the last part, I do need to do these things manually as my professor has requested, but I assume it is to get us more comfortable with the language itself."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 55, "user_id": 6951608, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c3d6e788186b06d3c833a30e4262fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/6951608/josh"}, "edited": false, "score": 0, "creation_date": 1485391619, "post_id": 41861438, "comment_id": 70912119, "body": "@Josh Yeah, it&#39;s good to do it yourself a few times. Then when it comes to real code, use a library."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1485377469, "creation_date": 1485377469, "answer_id": 41861438, "question_id": 41860427, "link": "https://stackoverflow.com/questions/41860427/c-saving-strings-into-array-elements/41861438#41861438", "title": "C - Saving strings into array elements", "body": "<p>The first problem is you only allocated space for a list of words (ie. character pointers) but you didn't allocate space for the words themselves.</p>\n\n<pre><code>char** words = (char**)malloc(20 * sizeof(char*));\n</code></pre>\n\n<p>This allocates space for 20 character pointers and assigns it to <code>words</code>. Now <code>words[i]</code> has space for a character pointer <strong><em>but not for the characters</em></strong>.</p>\n\n<p><code>words[i]</code> contains garbage, because <code>malloc</code> does not initialize memory. When you pass it into <code>fscanf</code>, <code>fscanf</code> tries to use the garbage in <code>words[i]</code> as a memory location to write characters to. That's either going to corrupt some memory in the program, or more likely <a href=\"https://en.wikipedia.org/wiki/Protected_memory\" rel=\"nofollow noreferrer\">it tries to read a memory location is isn't allowed to and crashes</a>. Either way, it's not good.</p>\n\n<p>You have to allocate memory for the string, pass that to <code>fscanf</code>, and finally put that string into <code>words[i]</code>.</p>\n\n<pre><code>char** words = malloc(numWords * sizeof(char*));\nfor(i = 0; i &lt; numWords; i++) {\n    char *word = malloc(40 * sizeof(char));\n    fscanf(ifp, \"%39s\", word);\n    words[i] = word;\n    printf(\"%s\\n\", words[i]);\n}\n</code></pre>\n\n<p>Note that I didn't cast the result of <code>malloc</code>, <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc#605858\">that's generally considered unnecessary</a>.</p>\n\n<p>Also note that I allocated space for <code>numWords</code> in the list. Your original only allocates space for 20 words, once it goes over that it'll start overwriting allocated memory and probably crash. As a rule of thumb, avoid constant memory allocations. Get used to dynamic memory allocation as quickly as you can.</p>\n\n<hr>\n\n<p>Also note that I limited how many characters <code>fscanf</code> is allowed to read to the size of my buffer (minus one because of the null byte at the end of strings). Otherwise if your word list contained \"Pneumonoultramicroscopicsilicovolcanoconiosis\", 45 characters, it would overrun the <code>word</code> buffer and start scribbling on adjacent elements and that would be bad.</p>\n\n<p>This leads to a new problem that are common to <code>fscanf</code> and <code>scanf</code>: partial reads. When the code above encounters \"Pneumonoultramicroscopicsilicovolcanoconiosis\" <code>fscanf(ifp, \"%39s\", word);</code> will read in the first 39 characters, \"Pneumonoultramicroscopicsilicovolcanoco\" and stop. The next call to <code>fscanf</code> will read \"niosis\". You'll store and print them as if they were two words. That's no good.</p>\n\n<p>You could solve this by making the word buffer bigger, but now most words will be wasting a lot of memory.</p>\n\n<p><a href=\"http://c-faq.com/stdio/scanfprobs.html\" rel=\"nofollow noreferrer\"><code>scanf</code> and <code>fscanf</code> have a whole lot of problems and are best avoided</a>. Instead, it's best to read entire lines and parse them with <code>sscanf</code>. In this case you don't need to do any parsing, they're just strings, so getting the line will suffice.</p>\n\n<p><code>fgets</code> is the usual way to read a line, but that also requires that you try and guess how much memory you'll need to read in the line. To mitigate that, have a large line buffer, and copy the words out of it.</p>\n\n<pre><code>void strip_newline( char* string ) {\n    size_t len = strlen(string);\n    if( string[len-1] == '\\n' ) {\n        string[len-1] = '\\0';\n    }\n}\n\n...\n\nint i;\n\n/* The word list */\nchar** words = malloc(numWords * sizeof(char*));\n\n/* The line buffer */\nchar *line = malloc(1024 * sizeof(char*));\n\nfor(i = 0; i &lt; numWords; i++) {\n    /* Read into the line buffer */\n    fgets(line, 1024, ifp);\n\n    /* Strip the newline off, fgets() doesn't do that */\n    strip_newline(line);\n\n    /* Copy the line into words */\n    words[i] = strdup(line);\n\n    printf(\"%s\\n\", words[i]);\n}\n</code></pre>\n\n<p><code>strdup</code> won't copy all 1024 bytes, just enough for the word. This will result in using only the memory you need.</p>\n\n<hr>\n\n<p>Making assumptions about files, like that they'll have a certain number of lines, is a recipe for problems. <strong><em>Even if the file says it contains a certain number of lines</em></strong> you should still verify that. Otherwise you'll get bizarre errors as you try to read past the end of the file. In this case, if the file has less than <code>numWords</code> it'll try to read garbage and probably crash. Instead, you should read the file until there's no more lines.</p>\n\n<p>Normally this is done by checking the return value of <code>fgets</code> in a while loop.</p>\n\n<pre><code>int i;    \nfor( i = 0; fgets(line, 1024, ifp) != NULL; i++ ) {\n    strip_newline(line);\n    words[i] = strdup(line);\n    printf(\"%s\\n\", words[i]);\n}\n</code></pre>\n\n<p>This brings up a new problem, how do we know how big to make <code>words</code>? You don't. This brings us to growing and reallocating memory. This answer is getting very long, so I'll just sketch it.</p>\n\n<pre><code>char **readDictionary(FILE *ifp) {\n    /* Allocate a decent initial size for the list */\n    size_t list_size = 256;\n    char** words = malloc(list_size * sizeof(char*));\n\n    char *line = malloc(1024 * sizeof(char*));\n\n    size_t i;    \n    for( i = 0; fgets(line, 1024, ifp) != NULL; i++ ) {\n        strip_newline(line);\n\n        /* If we're about to overflow the list, double its size */\n        if( i &gt; list_size - 1 ) {\n            list_size *= 2;\n            words = realloc( words, list_size * sizeof(char*));\n        }\n\n        words[i] = strdup(line);\n    }\n\n    /* Null terminate the list so readers know when to stop */\n    words[i] = NULL;\n\n    return words;\n}\n\nint main() {\n    FILE *fp = fopen(\"/usr/share/dict/words\", \"r\");\n    char **words = readDictionary(fp);\n\n    for( int i = 0; words[i] != NULL; i++ ) {\n        printf(\"%s\\n\", words[i]);\n    }\n}\n</code></pre>\n\n<p>Now the list will start at size 256 and grow as needed. Doubling grows pretty fast without wasting too much memory. My /usr/share/dict/words has 235886 lines in it. That can be stored in 2<sup>18</sup> or 262144. 256 is 2<sup>8</sup> so it only requires 10 expensive calls to <code>realloc</code> to grow to the necessary size.</p>\n\n<p>I've changed it to return the list, because there isn't much good in building the list if you're just going to use it immediately. This allows me to demonstrate another technique in working with dynamically sized lists, null termination. The last element in the list is set to <code>NULL</code> so anyone reading the list knows when to stop. This is safer and simpler than trying to pass the length around with the list.</p>\n\n<hr>\n\n<p>That was a lot, but that's all the basic stuff you need to do when working with files in C. It's good to do it manually, but fortunately there are libraries out there which make doing this sort of thing a lot easier. For example, <a href=\"https://developer.gnome.org/glib/stable/\" rel=\"nofollow noreferrer\">Gnome Lib provides a lot of basic functionality</a> including <a href=\"https://developer.gnome.org/glib/stable/glib-Pointer-Arrays.html\" rel=\"nofollow noreferrer\">arrays of pointers that automatically grow as needed</a>.</p>\n"}], "owner": {"reputation": 55, "user_id": 6951608, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c3d6e788186b06d3c833a30e4262fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/6951608/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 41861438, "answer_count": 2, "score": 0, "last_activity_date": 1485377469, "creation_date": 1485373875, "question_id": 41860427, "link": "https://stackoverflow.com/questions/41860427/c-saving-strings-into-array-elements", "title": "C - Saving strings into array elements", "body": "<p>I have a notepad file with approximately 150,000 words (representing a dictionary). I'm trying to scan in each word and print it to the console. This setup works fine:</p>\n\n<pre><code>void readDictionary(FILE *ifp, int numWords) {\n    fscanf(ifp, \"%d\", &amp;numWords);\n    printf(\"%d\\n\", numWords);\n\n    int i;\n    char* words = (char*)malloc(20 * sizeof(char));\n    for(i = 0; i &lt; numWords; i++) {\n        fscanf(ifp, \"%s\", words);\n        printf(\"%s\\n\", words);\n    }\n}\n</code></pre>\n\n<p>However, this code obviously overwrites \"words\" each time it loops. I'm trying to get each word to save to a certain array element. I did the following but it instantly crashes (I changed the memory allocation to 2D because I read around here and it seems that is what I am supposed to do):</p>\n\n<pre><code>void readDictionary(FILE *ifp, int numWords) {\n    fscanf(ifp, \"%d\", &amp;numWords);\n    printf(\"%d\\n\", numWords);\n\n    int i;\n    char** words = (char**)malloc(20 * sizeof(char*));\n    for(i = 0; i &lt; numWords; i++) {\n        fscanf(ifp, \"%s\", words[i]);\n        printf(\"%s\\n\", words[i]);\n    }\n}\n</code></pre>\n\n<p>Any help is appreciated. I've read around on many posts but haven't figured it out.</p>\n"}, {"tags": ["c", "linux", "gcc", "terminal"], "comments": [{"owner": {"reputation": 24739, "user_id": 1790644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1a2a40ddbc52508d5b53e9879961251?s=128&d=identicon&r=PG", "display_name": "Matt Clark", "link": "https://stackoverflow.com/users/1790644/matt-clark"}, "edited": false, "score": 0, "creation_date": 1485373833, "post_id": 41860377, "comment_id": 70904560, "body": "Use a <a href=\"https://www.gnu.org/software/make/manual/make.html\" rel=\"nofollow noreferrer\">make</a> file."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1485376359, "post_id": 41860377, "comment_id": 70905972, "body": "It looks like <code>.</code> is in your <code>PATH</code>. That is very scary."}, {"owner": {"reputation": 682, "user_id": 3704340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4W4UA.jpg?s=128&g=1", "display_name": "Paradox", "link": "https://stackoverflow.com/users/3704340/paradox"}, "edited": false, "score": 0, "creation_date": 1500910834, "post_id": 41860377, "comment_id": 77531742, "body": "Seems to be a duplicate of <a href=\"https://stackoverflow.com/questions/27064177/edit-bash-command-gcc-to-compile-and-execute-in-one-line\" title=\"edit bash command gcc to compile and execute in one line\">stackoverflow.com/questions/27064177/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1485440589, "post_id": 41860392, "comment_id": 70932821, "body": "One problem with this is that the program may compile, with warnings, and then run without giving the user a chance to inspect the warnings. See my answer below."}], "tags": [], "owner": {"reputation": 8383, "user_id": 3413723, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2848d4942bc960198a2bea7d0353464?s=128&d=identicon&r=PG&f=1", "display_name": "user3413723", "link": "https://stackoverflow.com/users/3413723/user3413723"}, "is_accepted": true, "score": 13, "last_activity_date": 1485373752, "last_edit_date": 1492086162, "creation_date": 1485373752, "answer_id": 41860392, "question_id": 41860377, "link": "https://stackoverflow.com/questions/41860377/how-to-compile-and-run-in-one-line-on-linux-terminal/41860392#41860392", "title": "How to compile and run in one line on linux terminal?", "body": "<p>Try</p>\n\n<pre><code>gcc filename.c &amp;&amp; a.out\n</code></pre>\n\n<p>It only runs the second command if the first was successful.  See <a href=\"https://askubuntu.com/questions/334994/which-one-is-better-using-or-to-execute-multiple-commands-in-one-line\">https://askubuntu.com/questions/334994/which-one-is-better-using-or-to-execute-multiple-commands-in-one-line</a></p>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 2916576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4af65af26896500af37eacff2b33e05?s=128&d=identicon&r=PG&f=1", "display_name": "gerowam", "link": "https://stackoverflow.com/users/2916576/gerowam"}, "is_accepted": false, "score": 4, "last_activity_date": 1485374673, "last_edit_date": 1485374673, "creation_date": 1485373823, "answer_id": 41860414, "question_id": 41860377, "link": "https://stackoverflow.com/questions/41860377/how-to-compile-and-run-in-one-line-on-linux-terminal/41860414#41860414", "title": "How to compile and run in one line on linux terminal?", "body": "<p>You can separate commands with a <code>;</code>. So for example:</p>\n\n<pre><code>gcc filename.c; ./a.out\n</code></pre>\n\n<p>However, you probably only want to run a.out if the compile was successful. For this you can use <code>&amp;&amp;</code>:</p>\n\n<pre><code>gcc filename.c &amp;&amp; ./a.out\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 283, "user_id": 1890549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5aamt.png?s=128&g=1", "display_name": "Gilberto B. Terra Jr.", "link": "https://stackoverflow.com/users/1890549/gilberto-b-terra-jr"}, "edited": false, "score": 0, "creation_date": 1485374370, "post_id": 41860521, "comment_id": 70904861, "body": "Operator&#39; samples: <a href=\"http://www.tecmint.com/chaining-operators-in-linux-with-practical-examples/\" rel=\"nofollow noreferrer\">tecmint.com/chaining-operators-in-linux-with-practical-examp&zwnj;&#8203;les</a>"}], "tags": [], "owner": {"reputation": 283, "user_id": 1890549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5aamt.png?s=128&g=1", "display_name": "Gilberto B. Terra Jr.", "link": "https://stackoverflow.com/users/1890549/gilberto-b-terra-jr"}, "is_accepted": false, "score": 1, "last_activity_date": 1485374214, "creation_date": 1485374214, "answer_id": 41860521, "question_id": 41860377, "link": "https://stackoverflow.com/questions/41860377/how-to-compile-and-run-in-one-line-on-linux-terminal/41860521#41860521", "title": "How to compile and run in one line on linux terminal?", "body": "<p>Explanation:</p>\n\n<p>A <strong>;</strong> B  \u2013 Run A and then B, regardless of the success or failure of A</p>\n\n<p>A <strong>&amp;&amp;</strong> B  \u2013 Run B only if A succeeded</p>\n\n<p>A <strong>||</strong> B  \u2013 Run B only if A failed</p>\n"}, {"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 2, "last_activity_date": 1616654413, "last_edit_date": 1616654413, "creation_date": 1485377788, "answer_id": 41861500, "question_id": 41860377, "link": "https://stackoverflow.com/questions/41860377/how-to-compile-and-run-in-one-line-on-linux-terminal/41861500#41861500", "title": "How to compile and run in one line on linux terminal?", "body": "<h2>The Quick and Dirty Solution is Wrong</h2>\n<p>The quick and dirty solution is a very bad idea in C:</p>\n<pre><code>gcc myfile.c &amp;&amp; ./a.out\n</code></pre>\n<p>This will not run the executable if the compilation fails, but when compilation succeeds the code <em>will automatically run even if warnings are issued</em>; in C you should <em>always</em> at least inspect warnings before attempting to run code. For the most part you should just never run code that compiles with warnings. Often running code with warnings will mean that code has some undefined behavior; you should not be running such blindly. Of course, with warnings at a minimum as in the above code, there may not be a lot of warnings, when there should be, anyway. At the <em>absolute minimum</em>, one should use:</p>\n<pre><code>gcc myfile.c -Wall -Wextra -Werror &amp;&amp; ./a.out\n</code></pre>\n<p>Using <code>-Wall -Wextra</code> will issue <em>warnings</em> for a lot of silly mistakes that bring the undefined behavior, and <code>-Werror</code> keeps code compiled with warnings from automatically running.</p>\n<h2>A Better Solution</h2>\n<p>To solve this problem, and type less, I used to use this bash script saved as <code>crepl</code> in my search path:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\ngcc -std=c99 -Wall -Wextra -Wpedantic -Werror $1 -o tempout &amp;&amp;\\\n    ./tempout &amp;&amp; rm tempout\n</code></pre>\n<p>When I wanted to quickly test some source code saved in, e.g., <code>myfile.c</code>, I could enter at the command-line:</p>\n<pre><code>crepl myfile.c\n</code></pre>\n<p>The code will not run if compilation fails, and it will not run if it compiles with warnings thanks to <code>-Werror</code>. If compilation is successful, the program runs, and the temporary executable is removed after running.</p>\n<h2>Improvements</h2>\n<p>Since originally writing this answer I have evolved my solution into a slightly fancier bash script that accepts optional further arguments to the compiler, linking libraries, etc.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/usr/bin/env bash\n# crun\n#\n# A script to invoke gcc, build the executable, execute the binary,\n# and cleanup after. The script will exit without running the executable\n# if there are any compiler errors or warnings.\n#\n# This script uses -std=c18, but it could probably be modified so that\n# the version is taken from a command-line parameter, defaulting to c18.\n#\n# Any commands following the crun invocation are appended to CMD.\nCMD=&quot;gcc -std=c18 -Wall -Wextra -Wpedantic -Werror&quot;\nTEMPFILE=&quot;tempfile$$&quot;\nfor ARG in &quot;$@&quot;\ndo\n    CMD+=&quot; $ARG&quot;\ndone\nCMD+=&quot; -o ${TEMPFILE} &amp;&amp; ./${TEMPFILE} &amp;&amp; rm ${TEMPFILE}&quot;\n\neval $CMD\n</code></pre>\n<p>Now if I need to link in, e.g., the math library:</p>\n<pre><code>crun myfile.c -lm\n</code></pre>\n<p>does the trick, failing if there are any errors or warnings (which are turned up to reasonable levels), and cleaning up after itself.</p>\n"}], "owner": {"reputation": 522, "user_id": 2507710, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1972bd20155bc8fd9a5377136ccc13a?s=128&d=identicon&r=PG&f=1", "display_name": "online.0227", "link": "https://stackoverflow.com/users/2507710/online-0227"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5699, "favorite_count": 0, "accepted_answer_id": 41860392, "answer_count": 4, "score": 4, "last_activity_date": 1616654413, "creation_date": 1485373693, "question_id": 41860377, "link": "https://stackoverflow.com/questions/41860377/how-to-compile-and-run-in-one-line-on-linux-terminal", "title": "How to compile and run in one line on linux terminal?", "body": "<p>Everytime I compile and run c file, I have to type:</p>\n\n<p>gcc filename.c</p>\n\n<p>a.out</p>\n\n<p>I don't want to do this in two lines, How to compile and run in one line on linux terminal?</p>\n"}, {"tags": ["c", "xcode", "clang"], "answers": [{"comments": [{"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 1, "creation_date": 1485377939, "post_id": 41861436, "comment_id": 70906767, "body": "Perfect! Thank you."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 1, "last_activity_date": 1485377465, "creation_date": 1485377465, "answer_id": 41861436, "question_id": 41860346, "link": "https://stackoverflow.com/questions/41860346/xcode-clang-including-the-wrong-file/41861436#41861436", "title": "Xcode/clang including the wrong file", "body": "<p>set <code>USE_HEADERMAP = NO</code>. When set to <code>YES</code>, XCode uses a dictionary that maps a header file name to a path where to find in order to speed up compilation. So regardless where you place your header file, if it has found his way into this map it will be found forth on.</p>\n\n<p>Another way would be to use absolute paths for all user header files, e.g. <code>#include \"./assert.h\"</code> (which should give you an error if the file is not located directly in the project directory or any manually defines user header search path).</p>\n\n<p>Hope it helps;</p>\n"}], "owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 41861436, "answer_count": 1, "score": 0, "last_activity_date": 1485377465, "creation_date": 1485373594, "question_id": 41860346, "link": "https://stackoverflow.com/questions/41860346/xcode-clang-including-the-wrong-file", "title": "Xcode/clang including the wrong file", "body": "<p>I have a file called <code>assert.h</code> which defines several assertion macros. The project is called <code>Core</code> and lives in a folder with the same name. However, this file lives in <code>Core/hul</code>, which is a submodule of the project that implements some abstract utilities. Here's an excerpt of the file:</p>\n\n<pre><code>#if defined(HUL_DEBUG)\n#   if defined(HUL_TEST)\n#       define HUL_ASSERT(e)    HUL_TEST_ASSERT(e)\n#   else\n#       include &lt;assert.h&gt;\n#       define HUL_ASSERT(e)    assert(e)\n#   endif\n#else\n#   define HUL_ASSERT(e)        /* empty, do nothing */\n#endif\n</code></pre>\n\n<p>As you can see, when <code>HUL_TEST</code> is defined assertion macros expand to a unit test assertion callback. That works fine. When compiling for release (e.g. <code>HUL_DEBUG</code> is not defined) it does nothing. Also fine. When compiling for debug (without testing), it includes the system's <code>assert.h</code> and defines a macro that expands to <code>assert</code>. Everything OK so far.</p>\n\n<p>The problem is that regardless of including <code>&lt;hul/assert.h&gt;</code> or <code>&lt;assert.h&gt;</code> it's always <code>hul/assert.h</code> that is included, which is not what I want. This is one of the reasons that <code>hul/assert.h</code> is qualified under the <code>hul</code> folder.</p>\n\n<p>The obvious first thing to check is <code>Other C Flags</code> and <code>Header Search Paths</code>. But the later is empty and the former is as follows:</p>\n\n<pre><code>-I../../include/Core\n-I../../test/include/Core\n-I../../test/include\n</code></pre>\n\n<p>As you can see, <code>Core/hul</code> is not included, so <code>#include &lt;assert.h&gt;</code> should not resolve to <code>hul/assert.h</code>. The question is, why does it? Am I missing some configuration?</p>\n\n<p>Note: of course I could change the file's name, but I rather understand why this is happening. This framework will still grow immensely in number of files and I don't want to be worrying about this kind of conflicts.</p>\n"}, {"tags": ["c", "arrays", "visual-studio", "struct", "lvalue"], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1485372979, "post_id": 41860101, "comment_id": 70904071, "body": "More precisely, you cannot use simple assignment with <i>arrays</i>, including arrays of <code>char</code>.  You <i>can</i> use it with strings in the sense of pointers to <code>char</code>, though you do need to understand what it means when you do so."}, {"owner": {"reputation": 3, "user_id": 3366472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c27790da068a0be69151ae5e1e267e?s=128&d=identicon&r=PG&f=1", "display_name": "SBlower", "link": "https://stackoverflow.com/users/3366472/sblower"}, "edited": false, "score": 0, "creation_date": 1485373038, "post_id": 41860101, "comment_id": 70904100, "body": "Thank you so much, iv&#39;e been trying to figure out what I did wrong for a good couple of hours now, I cant believe I forgot that I had to use strcpy even though I used it literally the line above in my full code."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1485372775, "creation_date": 1485372775, "answer_id": 41860101, "question_id": 41860088, "link": "https://stackoverflow.com/questions/41860088/accessing-a-member-of-a-structure-in-an-array-of-structures-which-is-a-member-of/41860101#41860101", "title": "Accessing a member of a structure in an array of structures which is a member of an array of different structures", "body": "<p>You can't use simple assignment with strings.  You need to use <code>strcpy</code>.</p>\n\n<pre><code>strcpy(rooms[0][0].objects[0].name, \"Cabinet\");\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3366472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c27790da068a0be69151ae5e1e267e?s=128&d=identicon&r=PG&f=1", "display_name": "SBlower", "link": "https://stackoverflow.com/users/3366472/sblower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 41860101, "answer_count": 1, "score": -1, "last_activity_date": 1485372775, "creation_date": 1485372703, "question_id": 41860088, "link": "https://stackoverflow.com/questions/41860088/accessing-a-member-of-a-structure-in-an-array-of-structures-which-is-a-member-of", "title": "Accessing a member of a structure in an array of structures which is a member of an array of different structures", "body": "<p>I have a structure called Object defined as:</p>\n\n<pre><code>    struct Object\n    {\n        char name[20];\n        char description[50];\n    };\n</code></pre>\n\n<p>I also have another structure called Room defined as:</p>\n\n<pre><code>    struct Room\n    {\n        int number;\n        char description[50];\n        struct Object objects[10];\n    };\n</code></pre>\n\n<p>I then initialise an array of Room and attempt to change the name of an object in a room:</p>\n\n<pre><code>    void main()\n    {\n        struct Room rooms[1][1];\n        rooms[0][0].objects[0].name = \"Cabinet\";\n    }\n</code></pre>\n\n<p>The problem I have is that visual studio gives me these errors:</p>\n\n<pre><code>    rooms[0][0].objects[0].name = \"cabinet\";\n\n    Error1:\n        expression must be a modifiable lvalue\n\n    Error2:\n        '=': left operand must be l-value\n</code></pre>\n\n<p>I am using visual studio 2015 community edition's C++ compiler to compile and run C code.</p>\n\n<p>I'm not sure if what i'm trying to do is possible in C, the idea is that i have 4 rooms, each room has 11 objects and each object can have a name and a description.</p>\n\n<p>Paste bin to the full code <a href=\"http://pastebin.com/jQJekLk9\" rel=\"nofollow noreferrer\">http://pastebin.com/jQJekLk9</a></p>\n"}, {"tags": ["c", "perl", "perl-io"], "comments": [{"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 2, "creation_date": 1485372970, "post_id": 41860022, "comment_id": 70904064, "body": "<code>errno</code>&#39;s value is only relevant if a function that sets <code>errno</code> failed. Functions aren&#39;t required to (and usually don&#39;t) reset <code>errno</code>. Also <code>errno</code> is required by POSIX to be threadsafe and mscvrt seems to define it that way too."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1485373142, "post_id": 41860022, "comment_id": 70904173, "body": "Re &quot;<i>Functions aren&#39;t required to (and usually don&#39;t) reset <code>errno</code></i>&quot;, They may even set it even if no error occur."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485373201, "post_id": 41860022, "comment_id": 70904209, "body": "What is this <code>io.h</code> you mention?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485378071, "post_id": 41860022, "comment_id": 70906831, "body": "@Karl: I had trouble following your post so I started to edit it. It has turned into a major revision, so please check that I have reflected your meaning properly. You&#39;re welcome to roll it back if you don&#39;t like what I&#39;ve done."}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "edited": false, "score": 0, "creation_date": 1485417266, "post_id": 41860407, "comment_id": 70919827, "body": "good, so it has to be checked in the way you suggested - thank you. The only interesting thing is, that on WIN32, Perl&#39;s <code>dup2()</code> which in fact is win32_dup2(), indeed returns 0 on success and not the newfd. That&#39;s to keep in mind. But checking for <code>&gt;= 0</code> does the trick anyway. (I&#39;m using 5.14.1 btw.)"}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1485373804, "creation_date": 1485373804, "answer_id": 41860407, "question_id": 41860022, "link": "https://stackoverflow.com/questions/41860022/perlapio-perlio-findfile-works-but-sets-errno-to-illegal-seek-espipe-29/41860407#41860407", "title": "perlapio - PerlIO_findFILE() works but sets errno to &quot;illegal seek&quot; (ESPIPE 29)", "body": "<p><code>errno</code> is meaningless unless a C library call or a system call reports an error, so it can't be used to determine if an error occurred. Notably, these calls aren't required to (and usually don't) reset <code>errno</code> on success. It's not even safe to clear <code>errno</code> before the call, because the call may set <code>errno</code> even if no error occurred.</p>\n\n<p>As best as I can tell, Perl's <a href=\"https://perl5.git.perl.org/perl.git/blob/443bd156a6baaf7a8fe6b6b05fcf6c4178140ed2:/util.c#l2826\" rel=\"nofollow noreferrer\">emulation</a> of <code>dup2</code> returns the same value as the POSIX one (<code>-1</code> on error, <code>newfd</code> on success).</p>\n\n<pre><code>#ifndef HAS_DUP2\nint\ndup2(int oldfd, int newfd)\n{\n#if defined(HAS_FCNTL) &amp;&amp; defined(F_DUPFD)\n    if (oldfd == newfd)\n        return oldfd;\n    PerlLIO_close(newfd);\n    return fcntl(oldfd, F_DUPFD, newfd);\n#else\n#define DUP2_MAX_FDS 256\n    int fdtmp[DUP2_MAX_FDS];\n    I32 fdx = 0;\n    int fd;\n\n    if (oldfd == newfd)\n        return oldfd;\n    PerlLIO_close(newfd);\n    /* good enough for low fd's... */\n    while ((fd = PerlLIO_dup(oldfd)) != newfd &amp;&amp; fd &gt;= 0) {\n        if (fdx &gt;= DUP2_MAX_FDS) {\n            PerlLIO_close(fd);\n            fd = -1;\n            break;\n        }\n        fdtmp[fdx++] = fd;\n    }\n    while (fdx &gt; 0)\n        PerlLIO_close(fdtmp[--fdx]);\n    return fd;\n#endif\n}\n#endif\n</code></pre>\n\n<p>(From 5.24.1)</p>\n\n<p>This means that we can detect an error in a platform-independent fashion, despite your claim to the contrary. As such, the proper usage is</p>\n\n<pre><code>if ( dup2(fdPipeStdOut[1], fdStdOutOriginal) &gt;= 0 ) {\n    //do some funny stuff\n} else {\n    //report error\n}\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 41860407, "answer_count": 1, "score": 2, "last_activity_date": 1485417452, "creation_date": 1485372483, "last_edit_date": 1485417452, "question_id": 41860022, "link": "https://stackoverflow.com/questions/41860022/perlapio-perlio-findfile-works-but-sets-errno-to-illegal-seek-espipe-29", "title": "perlapio - PerlIO_findFILE() works but sets errno to &quot;illegal seek&quot; (ESPIPE 29)", "body": "\n\n<p>This issue is more or less related to <a href=\"https://stackoverflow.com/questions/41549508/embedded-perl-in-c-perlapio-interoperability-with-stdio\">embedded perl in C, perlapio - interoperability with STDIO</a> which I think I have solved for the Windows environment. I will post a complete solution if this new issue is solved too.</p>\n\n<p>In the linked question,\n<strong>StoryTeller</strong> <a href=\"https://stackoverflow.com/questions/41549508/embedded-perl-in-c-perlapio-interoperability-with-stdio#comment70305613_41549508\">gave me the hint</a>\nto use <code>PerlIO_findFILE()</code> which solved the immediate problem, but the same code on Linux behaves strangely.</p>\n\n<p>Perl's <code>dup2()</code> seems to have a different behaviour on Win32, where <code>dup2()</code> is a macro for <code>win32_dup2()</code>, which as far as I understand simply uses the <code>dup2()</code> from <code>io.h</code> .</p>\n\n<p>On Win32, Perl's version returns zero on success and non-zero on error, but on Linux the default ANSI <code>dup2()</code> will be used, which instead returns the new file descriptor. Then, I'll have to check <code>errno</code> if everything went fine.</p>\n\n<p>If a call to <code>PerlIO_findFILE()</code> sets <code>errno</code> to \"illegal seek\" (errno 29 - <code>ESPIPE</code>), then after <code>dup</code>, <code>dup2</code>, <code>pipe</code> etc. <code>errno</code> is still set to \"illegal seek\", and any further checks on <code>errno</code> still see the same error.</p>\n\n<p>(In practice everything has worked for me because there was no actual error. Also, the solution by checking <code>errno</code> is not thread safe, since between the syscall and the check another tread may reset errno.)</p>\n\n<p>Note that I have</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#define PERLIO_NOT_STDIO 0\n</code></pre>\n\n<p>in effect and I'm using Perl5.14.1.</p>\n\n<p>Am I doing something really wrong here?</p>\n\n<p>Here's a simplified code snippet:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>stdOutFILE = PerlIO_findFILE(PerlIO_stderr()); // convert Perl's stdout to stdio FILE handle\n\nfdStdOutOriginal = fileno(stdOutFILE);         // get descriptor\n\nif ( fdStdOutOriginal &gt;= 0 ) {\n\n    relocatedStdOut = dup(fdStdOutOriginal);   // relocate stdOut for external writing\n\n    if ( relocatedStdOut &gt;= 0 )\n    {\n        if ( pipe(fdPipeStdOut) == 0 )         // create pipe for forwarding to stderr\n        {\n            // this has to be done on win32:\n            // if ( dup2(fdPipeStdOut[1], fdStdOutOriginal)  == 0 ) // hang pipe on stdOut\n\n            dup2(fdPipeStdOut[1], fdStdOutOriginal);\n\n            if( errno == 0 ) {\n                // do some funny stuff\n            } else {\n                // report error\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "node.js", "hash", "multiprocessing"], "comments": [{"owner": {"reputation": 3305, "user_id": 3355076, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7e4d588409a85426aabe6a1a94a5789e?s=128&d=identicon&r=PG", "display_name": "Christopher Reid", "link": "https://stackoverflow.com/users/3355076/christopher-reid"}, "edited": false, "score": 0, "creation_date": 1485372188, "post_id": 41859870, "comment_id": 70903670, "body": "<a href=\"https://stackoverflow.com/questions/28267794/advantages-of-node-js-addon-vs-child-process\" title=\"advantages of node js addon vs child process\">stackoverflow.com/questions/28267794/&hellip;</a>"}, {"owner": {"reputation": 539, "user_id": 1015608, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/o62Ba.jpg?s=128&g=1", "display_name": "nicktendo", "link": "https://stackoverflow.com/users/1015608/nicktendo"}, "reply_to_user": {"reputation": 3305, "user_id": 3355076, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7e4d588409a85426aabe6a1a94a5789e?s=128&d=identicon&r=PG", "display_name": "Christopher Reid", "link": "https://stackoverflow.com/users/3355076/christopher-reid"}, "edited": false, "score": 0, "creation_date": 1485372399, "post_id": 41859870, "comment_id": 70903788, "body": "I understand that creating a native addon would be be innately more performant, my question is how much more performant is a native addon vs child_process.exec with regards to resource overhead/processing time assuming an equivalent function is being performed."}], "answers": [{"tags": [], "owner": {"reputation": 3305, "user_id": 3355076, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7e4d588409a85426aabe6a1a94a5789e?s=128&d=identicon&r=PG", "display_name": "Christopher Reid", "link": "https://stackoverflow.com/users/3355076/christopher-reid"}, "is_accepted": true, "score": 1, "last_activity_date": 1485373159, "last_edit_date": 1495539951, "creation_date": 1485372489, "answer_id": 41860025, "question_id": 41859870, "link": "https://stackoverflow.com/questions/41859870/nodejs-performance-of-native-addon-vs-external-binary/41860025#41860025", "title": "NodeJS: Performance of Native Addon vs External Binary", "body": "<p>There is significant overhead spawning a child process compared to just having code execute on the already existing node process. The two processes need to be connected and communicate through stdio. If you want specifics, you would have to test it out yourself for your use case. One way to test would be to find a native hashing lib, and test it against your C child process.</p>\n\n<p>With that said, unless you are signing up hundreds of users per second the performance overhead of using a child process is completely negligible. You could even just do the hashing in node and most likely not notice the difference.</p>\n\n<p>In fact, you should just use the 'crypto' module included with node, as it is already a native module.</p>\n\n<p><a href=\"https://stackoverflow.com/a/17201493/3355076\">https://stackoverflow.com/a/17201493/3355076</a> has a simple example.</p>\n"}], "owner": {"reputation": 539, "user_id": 1015608, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/o62Ba.jpg?s=128&g=1", "display_name": "nicktendo", "link": "https://stackoverflow.com/users/1015608/nicktendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 41860025, "answer_count": 1, "score": 1, "last_activity_date": 1485373159, "creation_date": 1485371924, "question_id": 41859870, "link": "https://stackoverflow.com/questions/41859870/nodejs-performance-of-native-addon-vs-external-binary", "title": "NodeJS: Performance of Native Addon vs External Binary", "body": "<p>I am scripting a NodeJS server which needs to hash user passwords, in addition to other pieces of data, prior to storing them in a database.  Due to the mathematically intense process of creating secure hashes, and the large volume of hashing that will need to be done, I have chosen to code the hashing process in C.  </p>\n\n<p>My question is this:  How much overhead am I adding by executing the hashing process coded in C via child_process.exec as opposed to creating a native addon for NodeJS?</p>\n\n<p>I.E. every time a piece of data needs to be hashed I will need to call child_process.exec with the piece of data as an argument.</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1485371316, "post_id": 41859641, "comment_id": 70903187, "body": "How is <code>newNall</code> defined?  It is a variable or a function?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1485371476, "post_id": 41859641, "comment_id": 70903263, "body": "Your allocation is suspicious.  <code>headall</code> has type <code>Nall **</code>, but you compute the size of the allocation in terms of type <code>Nall</code>.  One would ordinarily expect it to be computed in terms of the size of the type to which <code>headall</code> points, <i>i.e.</i> <b><code>Nall *</code></b>."}], "answers": [{"tags": [], "owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "is_accepted": true, "score": 4, "last_activity_date": 1485371597, "creation_date": 1485371597, "answer_id": 41859773, "question_id": 41859641, "link": "https://stackoverflow.com/questions/41859641/incompatible-pointer-types-assigning-to-struct/41859773#41859773", "title": "Incompatible pointer types assigning to struct", "body": "<p>From the compiler warning I'm assuming that <code>newNall</code> is actually a function that allocates a new <code>struct nodeall</code> and returns a pointer to it. In that case, your code should look like this:</p>\n\n<pre><code>Nall **headall;\nheadall = malloc(30000 * sizeof *headall);\nfor (i = 0; i &lt; 30000; i++)\n  headall[i] = newNall();\n</code></pre>\n\n<p>Note the argument to the <code>sizeof</code> operator, and the parentheses after <code>newNall</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 7077518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e56c0e74a41104456f542ec04ac4e6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Aisa.Imn", "link": "https://stackoverflow.com/users/7077518/aisa-imn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 41859773, "answer_count": 1, "score": 0, "last_activity_date": 1578164193, "creation_date": 1485371217, "last_edit_date": 1578164193, "question_id": 41859641, "link": "https://stackoverflow.com/questions/41859641/incompatible-pointer-types-assigning-to-struct", "title": "Incompatible pointer types assigning to struct", "body": "<p>I'm just trying to make some kind of pointer to \"Nall\" struct so I wrote this code</p>\n\n<pre><code>Nall **headall;\n    headall = malloc (30000 * sizeof (Nall));\n    for (i = 0; i &lt; 30000; i++) {\n        *(headall+i) = newNall;\n    }\n</code></pre>\n\n<p>and now I get this error</p>\n\n<blockquote>\n  <p>\"warning: incompatible pointer types assigning to <code>Nall *</code>\n        (aka <code>struct nodeall *</code>) from <code>Nall *(void)</code>\n        (aka <code>struct nodeall *(void)</code>) [-Wincompatible-pointer-types]\n          <code>*(headall+i) = newNall;</code>\"</p>\n</blockquote>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1485370989, "post_id": 41859547, "comment_id": 70902969, "body": "<code>size(int)-1</code> isn&#39;t really a big buffer."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1485370998, "post_id": 41859547, "comment_id": 70902973, "body": "Show the &quot;example&quot; of 40k read."}, {"owner": {"reputation": 851, "user_id": 4683665, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xcstkRXilmM/AAAAAAAAAAI/AAAAAAAAABQ/b3CgjLSI1CQ/photo.jpg?sz=128", "display_name": "Hiren Jungi", "link": "https://stackoverflow.com/users/4683665/hiren-jungi"}, "edited": false, "score": 0, "creation_date": 1485371054, "post_id": 41859547, "comment_id": 70903006, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11790822/reading-a-large-file-using-c-greater-than-4gb-using-read-function-causing-pro\">Reading a large file using C (greater than 4GB) using read function, causing problems</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1485438689, "post_id": 41859547, "comment_id": 70931572, "body": "this statement: <code>int size= x&#47;8;</code> uses integer math, so if the amount of bytes read is not a multiple of 8, some bytes will never be processed.  Since 100 is not a multiple of 8, you can expect to miss outputting 4 bytes for every pass through the outer loop.   Also, when the <code>read()</code> fails to input 100 bytes, the execution can be expected to lose upto 7 bytes for every pass through the outer loop.   Much better to read 1024 bytes and use the returned value from <code>read()</code> as the count for the call to <code>write()</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1486019643, "post_id": 41859547, "comment_id": 71169062, "body": "@reny310: You can accept one of the answers by clicking on the grey checkmark below its score."}], "answers": [{"comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1485371503, "post_id": 41859683, "comment_id": 70903284, "body": "If you reach EOF before you fill the buffer, you&#39;re stuck in an infinite loop."}], "tags": [], "owner": {"reputation": 143, "user_id": 1475347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf199d24090ce7868b85d6d155b46c5d?s=128&d=identicon&r=PG", "display_name": "Rafa\u0142 Krypa", "link": "https://stackoverflow.com/users/1475347/rafa%c5%82-krypa"}, "is_accepted": true, "score": 3, "last_activity_date": 1485374062, "last_edit_date": 1485374062, "creation_date": 1485371331, "answer_id": 41859683, "question_id": 41859547, "link": "https://stackoverflow.com/questions/41859547/how-to-read-a-large-file-with-function-read-in-c/41859683#41859683", "title": "How to read a large file with function read() in C", "body": "<p>You need to check return value of functions <code>read</code> and <code>write</code>. They return the number of bytes read/written that may be less than the number that you passed as third argument. Both <code>read</code> and <code>write</code> must be done in a loop like:</p>\n\n<pre><code>int bytesRead = 0;\n\nwhile (bytesRead &lt; sizeof(buffer)) {\n    int ret = read(readFrom, buffer + bytesRead, sizeof(buffer) - bytesRead);\n\n    if (ret == 0)\n        break; / * EOF */\n\n    if (ret == -1) {\n        /* Handle error */\n    }\n\n    bytesRead += ret;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1485473878, "last_edit_date": 1485473878, "creation_date": 1485377274, "answer_id": 41861388, "question_id": 41859547, "link": "https://stackoverflow.com/questions/41859547/how-to-read-a-large-file-with-function-read-in-c/41861388#41861388", "title": "How to read a large file with function read() in C", "body": "<p>You use <code>sprintf()</code> to convert characters from <code>buffer</code> into a very small buffer <code>temp</code>. On most current systems, <code>int</code> is 4 bytes, so your printf causes buffer overflows for <code>char</code> values greater than <code>99</code> (ASCII letter <code>'c'</code>).  Note that <code>char</code> can be signed by default, so negative values less than <code>-99</code> will require 5 bytes for the string conversion: 3 digits, a minus sign and a null terminator.</p>\n\n<p>You should make this buffer larger.</p>\n\n<p>Furthermore, I don't understand why you only handle <code>x/8</code> bytes from the buffer read by the <code>read()</code> function.  The purpose of your function is obscure.</p>\n"}], "owner": {"reputation": 33, "user_id": 7470493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RlWA3.jpg?s=128&g=1", "display_name": "reny310", "link": "https://stackoverflow.com/users/7470493/reny310"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2970, "favorite_count": 0, "accepted_answer_id": 41859683, "answer_count": 2, "score": 2, "last_activity_date": 1485473878, "creation_date": 1485370900, "last_edit_date": 1485371753, "question_id": 41859547, "link": "https://stackoverflow.com/questions/41859547/how-to-read-a-large-file-with-function-read-in-c", "title": "How to read a large file with function read() in C", "body": "<p>Aloha,</p>\n\n<p>I'm new here, so please take it easy on me.\nI'm trying to read a file with function <code>read()</code> and then <code>write()</code> to a file or a  file descriptor. My function successfully reads a file, but a problem occurs when I try to read a larger file(in my example size of 40,000 bytes).</p>\n\n<p>I think that I must write a while loop, which will be reading until the end of a file, but I am stuck on the idea of how to..</p>\n\n<p>(I open a file or file descriptor in main of the program)</p>\n\n<p>My function( also convert binary input char data and writes to the ASCII) :</p>\n\n<pre><code>void function(int readFrom,int writeOn){\n    char buffer[100];\n    int x = read(readFrom, buffer, sizeof(buffer));\n    int size= x/8;\n    int i;\n    for(i=0; i&lt;size; i++){\n        char temp[sizeof(int)-1];\n        sprintf(temp,\"%d\",buffer[i];\n        write(writeOn, temp, sizeof(temp));\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "boost", "streambuf"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1485370989, "post_id": 41859487, "comment_id": 70902970, "body": "Smart quotes like <code>\u201cSomeFile\u201d</code> show this isn&#39;t the actual code. Sorry about removing and restoring the C tag."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1485371265, "post_id": 41859487, "comment_id": 70903148, "body": "@WeatherVane I&#39;m not sure you were wrong. This is definitely a question about C++, the fact that it uses facilities that were inherited from C shouldn&#39;t be relevant."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1485371495, "post_id": 41859487, "comment_id": 70903279, "body": "@MarkRansom I was put down recently for removing a C tag when there was a mention of C in the question. Here, OP is importing the library in a C program."}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485378449, "post_id": 41859487, "comment_id": 70907027, "body": "Maybe you want <a href=\"http://www.cplusplus.com/reference/ios/ios_base/sync_with_stdio/\" rel=\"nofollow noreferrer\"><code>ios_base::sync_with_stdio()</code></a>?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485380440, "post_id": 41859487, "comment_id": 70908043, "body": "Yes, questions about interoperability between C and C++ code (which this is) should have both tags"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485381324, "post_id": 41859487, "comment_id": 70908485, "body": "@G.Sliepen: <code>sync_with_stdio</code> only works on <code>stdin</code>, <code>stdout</code>, <code>stderr</code> and not arbitrary file handles."}], "answers": [{"comments": [{"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1485382903, "post_id": 41862201, "comment_id": 70909269, "body": "As @ben-voigt points out, this is a gcc extension.  There&#39;s no portable way to do this."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 2, "creation_date": 1485383305, "post_id": 41862201, "comment_id": 70909448, "body": "@MarshallClow: Which is unfortunate, because the standard library is absolutely required to make <code>streambuf</code> classes that layer on top of <code>FILE*</code> to get the correct <code>sync_with_stdio()</code> behavior for <code>cin</code>, <code>cout</code>, <code>cerr</code>, and <code>clog</code>.  Those classes just aren&#39;t exposed in any standard way for use with other files/streams."}, {"owner": {"reputation": 137, "user_id": 7217960, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d5f75b114d016f1e68e076580c01ae0b?s=128&d=identicon&r=PG&f=1", "display_name": "Guett31", "link": "https://stackoverflow.com/users/7217960/guett31"}, "edited": false, "score": 0, "creation_date": 1485389121, "post_id": 41862201, "comment_id": 70911446, "body": "@BenVoigt: If the C <code>FILE</code> object and <code>stdio_filebuf</code> object share the same underlying buffer, there no need to constantly flush it. Right?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 137, "user_id": 7217960, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d5f75b114d016f1e68e076580c01ae0b?s=128&d=identicon&r=PG&f=1", "display_name": "Guett31", "link": "https://stackoverflow.com/users/7217960/guett31"}, "edited": false, "score": 1, "creation_date": 1485389574, "post_id": 41862201, "comment_id": 70911568, "body": "@Guett31: You assume there&#39;s only one buffer, while in fact they are layered.  <code>stdio_filebuf</code> uses buffered writes (such as <code>fwrite</code>) to access the <code>FILE*</code>; those pass through the stdio buffer.  But that doesn&#39;t mean that there is no buffering in <code>stdio_filebuf</code> itself, in order to pass larger chunks to <code>fwrite</code> at a time.  In fact input <code>streambuf</code> objects need a buffer in order to implement <code>ungetc</code>."}, {"owner": {"reputation": 137, "user_id": 7217960, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d5f75b114d016f1e68e076580c01ae0b?s=128&d=identicon&r=PG&f=1", "display_name": "Guett31", "link": "https://stackoverflow.com/users/7217960/guett31"}, "edited": false, "score": 0, "creation_date": 1485394413, "post_id": 41862201, "comment_id": 70912806, "body": "@BenVoigt It makes sense. Thank you. The constructor of <code>stdio_filebuf</code> that you mentioned in your answer takes an argument for the buffer size, and I was thinking about setting it to 0. However, the fact that it is referred as the <code>preferred size of internal buffer</code> combined with your explanation  about <code>ungetc</code> makes me think that even if I pass it 0, it might not actually be 0."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 3, "last_activity_date": 1485383229, "last_edit_date": 1485383229, "creation_date": 1485380716, "answer_id": 41862201, "question_id": 41859487, "link": "https://stackoverflow.com/questions/41859487/how-to-create-a-c-streambuf-object-from-a-c-file-sharing-its-buffer-and-buf/41862201#41862201", "title": "How to create a C++ streambuf object from a C FILE*, sharing its buffer (and buffer state) with the FILE object pointed to?", "body": "<p>There exists a (non-standard, looking for the reference now) C++ streambuf that is a layer on top of stdio, then it would be sufficient to constantly flush the stream buffer.</p>\n\n<p>The automatic-flush part is portably accomplished using <code>std::unitbuf</code>:</p>\n\n<pre><code>mysb &lt;&lt; std::unitbuf;\n</code></pre>\n\n<hr>\n\n<p>Ahh, it's named <code>stdio_filebuf</code> and comes with gcc's C++ library: <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.6.2/libstdc++/api/a00069.html#ad8e56ce0589e74539108cb5843e50e7b\" rel=\"nofollow noreferrer\">__gnu_cxx::stdio_filebuf::stdio_filebuf constructor</a></p>\n"}], "owner": {"reputation": 137, "user_id": 7217960, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d5f75b114d016f1e68e076580c01ae0b?s=128&d=identicon&r=PG&f=1", "display_name": "Guett31", "link": "https://stackoverflow.com/users/7217960/guett31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 41862201, "answer_count": 1, "score": 2, "last_activity_date": 1485392782, "creation_date": 1485370680, "last_edit_date": 1485392782, "question_id": 41859487, "link": "https://stackoverflow.com/questions/41859487/how-to-create-a-c-streambuf-object-from-a-c-file-sharing-its-buffer-and-buf", "title": "How to create a C++ streambuf object from a C FILE*, sharing its buffer (and buffer state) with the FILE object pointed to?", "body": "<p>How can I get a C++ streambuf object from a C FILE* so that it uses the FILE object\u2019s buffer, avoiding both objects to manage separate buffers while pointing to the same underlying file.</p>\n\n<p>It looks like there is no standard way of doing that.</p>\n\n<p>Boost has a stream_buffer class that has a constructor taking a file descriptor, allowing the use C++features on a file opened with C code. For example:</p>\n\n<pre><code>boost::iostreams::stream_buffer&lt;boost::iostreams::file_descriptor_sink&gt; mysb (fileno(myFileptr), boost::iostreams::never_close_handle));\n</code></pre>\n\n<p><code>myFileptr</code> being of type FILE*. The problem is that <code>mysb</code> and the FILE object pointed at by <code>myFileptr</code> will maintain separate buffers, so this is not an option\u2026</p>\n\n<p>Here is the context of my problem. I have to provide a dynamically linkable library with a C interface (all exported variables, function arguments and function return values must have C types), but the library is actually developed in C++.</p>\n\n<p>If I export a function, internally using C++ stream facilities, with this prototype</p>\n\n<pre><code>Void MyExportedFunct( FILE* myfile)\n</code></pre>\n\n<p>And, I import the library in a C program:</p>\n\n<pre><code>int main()\n{\n    FILE * fptr = fopen(\u201cSomeFile\u201d, \"w\");\n    fprintf(fptr, \u201cSome data.\u201d)\n    MyExportedFunct(fptr);\n    fprintf(fptr, \u201cSome more data\u2026\u201d)\n    return 0; \n} \n</code></pre>\n\n<p>I would like the data to be written to the file actually sent in the correct order (avoiding interleaved characters).</p>\n\n<p>Any suggestion on how to achieve this, or for another approach, is welcome.</p>\n"}, {"tags": ["c", "algorithm", "binary-search-tree"], "comments": [{"owner": {"reputation": 1467, "user_id": 1364178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd7a325d0e5f65ea55fcc81a90df01a?s=128&d=identicon&r=PG", "display_name": "David Vereb", "link": "https://stackoverflow.com/users/1364178/david-vereb"}, "edited": false, "score": 0, "creation_date": 1485370977, "post_id": 41859456, "comment_id": 70902964, "body": "When it reaches its first NULL and returns,  it&#39;s returning to where it was last recursively called.  That&#39;s line 5 in your code example, meaning it&#39;ll continue on at line 6 which is the first printf statement.  Is that what you&#39;re asking when you say &quot;But when does it print the data...&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 7456, "user_id": 1202400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ddf9dd040b42f80911e4a53010dfc7?s=128&d=identicon&r=PG", "display_name": "unxnut", "link": "https://stackoverflow.com/users/1202400/unxnut"}, "is_accepted": false, "score": 1, "last_activity_date": 1485370768, "creation_date": 1485370768, "answer_id": 41859511, "question_id": 41859456, "link": "https://stackoverflow.com/questions/41859456/binary-search-tree-sorting/41859511#41859511", "title": "Binary search tree Sorting", "body": "<p>This is your pre-order traversal using recursion.  Once you are done with the left subtree, it prints the root of that subtree followed by right subtree.  You may want to try it out with a tree of about 8 nodes.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 7318343, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7d78ec8eee2c4b7062c25852dc9cdf00?s=128&d=identicon&r=PG&f=1", "display_name": "ritgeo", "link": "https://stackoverflow.com/users/7318343/ritgeo"}, "edited": false, "score": 0, "creation_date": 1485372733, "post_id": 41859757, "comment_id": 70903949, "body": "So it goes to the left subtree of the root. It goes all the way down until there is no left subtree, and then prints that node.. But how does the loop continue from there to print the other nodes that are in a previous place?"}, {"owner": {"reputation": 411, "user_id": 7087480, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/Won8h.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7087480/alex"}, "reply_to_user": {"reputation": 71, "user_id": 7318343, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7d78ec8eee2c4b7062c25852dc9cdf00?s=128&d=identicon&r=PG&f=1", "display_name": "ritgeo", "link": "https://stackoverflow.com/users/7318343/ritgeo"}, "edited": false, "score": 1, "creation_date": 1485373266, "post_id": 41859757, "comment_id": 70904251, "body": "display_ordered_email(b-&gt;left);  This will be called several times depending on the size of the tree. The first couple of times it is called it won&#39;t do anything until you get back up to that node. If it reaches a null node then it will return to the one above it therefore finishing the &quot;display_ordered_email(b-&gt;left);&quot; part for that bottom node. So it will then execute the code for that node:      printf(&quot;Name    : %s\\n&quot;, b-&gt;data-&gt;name); ...     display_ordered_email(b-&gt;right);"}, {"owner": {"reputation": 411, "user_id": 7087480, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/Won8h.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7087480/alex"}, "reply_to_user": {"reputation": 71, "user_id": 7318343, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7d78ec8eee2c4b7062c25852dc9cdf00?s=128&d=identicon&r=PG&f=1", "display_name": "ritgeo", "link": "https://stackoverflow.com/users/7318343/ritgeo"}, "edited": false, "score": 1, "creation_date": 1485373519, "post_id": 41859757, "comment_id": 70904385, "body": "Hit max characters for comment there sorry but also:  &quot;display_ordered_email(b-&gt;right); &quot; does the same thing to check for the right node and if there is none then that chunk of code is finished and it goes back up one node. Remember though that if the right node does exist it will again look for the left and then right nodes."}], "tags": [], "owner": {"reputation": 411, "user_id": 7087480, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/Won8h.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7087480/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1485371551, "creation_date": 1485371551, "answer_id": 41859757, "question_id": 41859456, "link": "https://stackoverflow.com/questions/41859456/binary-search-tree-sorting/41859757#41859757", "title": "Binary search tree Sorting", "body": "<p>It will traverse all the way to the bottom left and hit 0. then it moves back one node and continues the code for that node after the return statement. This means it will print that code and then try it for the right node. If there is no right node it just returns otherwise it prints the right node. Then if both are done it will back up one level and print everything there then check that right branch for any branches it may have.</p>\n\n<p>It is quite confusing at first but if you draw it out it becomes a lot easier to understand.</p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 1, "last_activity_date": 1485373153, "creation_date": 1485373153, "answer_id": 41860219, "question_id": 41859456, "link": "https://stackoverflow.com/questions/41859456/binary-search-tree-sorting/41860219#41860219", "title": "Binary search tree Sorting", "body": "<p>Consider this simple tree.</p>\n\n<pre><code>   b\n  / \\\n a   c\n</code></pre>\n\n<p>Given that <code>display_ordered_email</code> is supposed to recursively print the nodes in order, you can ask yourself when <code>b</code> should be printed. The answer is that <code>b</code> should be printed after it has visited and printed <code>a</code> (the left side), but before it will visit and print <code>c</code> (the right side).</p>\n\n<pre><code>void display_ordered_email(struct BST_node *b)\n{\n    if (b==0)           \n        return;            \n    display_ordered_email(b-&gt;left);\n    /* ... print the node */\n    display_ordered_email(b-&gt;right);\n}\n</code></pre>\n\n<p>which is exactly how your routine is structured.</p>\n"}], "owner": {"reputation": 71, "user_id": 7318343, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7d78ec8eee2c4b7062c25852dc9cdf00?s=128&d=identicon&r=PG&f=1", "display_name": "ritgeo", "link": "https://stackoverflow.com/users/7318343/ritgeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 41860219, "answer_count": 3, "score": 1, "last_activity_date": 1485806688, "creation_date": 1485370568, "last_edit_date": 1485806688, "question_id": 41859456, "link": "https://stackoverflow.com/questions/41859456/binary-search-tree-sorting", "title": "Binary search tree Sorting", "body": "<p>i want to sort some data with the help of a binary search tree, that i have already created.\nI have the following example code that works.. But can't understand how this works..\nIt starts and if there is no record in the database then b=0 and returns. This is clear. \nIf b exists, then it goes to the left node and calls the function again and again until b->left ==NULL.. Do i get it correctly? \nBut when does it print the data, since from what i get when it runs the function it doesnt print, but starts again from the top of the function..</p>\n\n<pre><code>void display_ordered_email(struct BST_node *b)\n{\n    if (b==0)           \n        return;            \n    display_ordered_email(b-&gt;left);\n    printf(\"Name    : %s\\n\", b-&gt;data-&gt;name);\n    printf(\"Address : %s\\n\", b-&gt;data-&gt;address);\n    printf(\"Email   : %s\\n\", b-&gt;data-&gt;email);\n    printf(\"\\n\");\n    display_ordered_email(b-&gt;right);\n}\n</code></pre>\n\n<p>Is this inorder traversal or other method?  </p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1485369795, "post_id": 41859156, "comment_id": 70902249, "body": "zOMG, Please, fix a style. And don&#39;t use this brain damaged typedef."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 3, "creation_date": 1485369839, "post_id": 41859156, "comment_id": 70902285, "body": "highly recommend not hiding pointers in <code>typedef</code>s"}, {"owner": {"reputation": 1142, "user_id": 5863693, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/101741963312f7ee577a74925672d234?s=128&d=identicon&r=PG&f=1", "display_name": "Yos", "link": "https://stackoverflow.com/users/5863693/yos"}, "edited": false, "score": 0, "creation_date": 1485369902, "post_id": 41859156, "comment_id": 70902322, "body": "I have to use <code>typedef</code> as part of my course."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1485371042, "post_id": 41859156, "comment_id": 70902995, "body": "Still, don&#39;t hide pointers in typedefs. Use <code>typedef struct node { ... } Node</code>, then just use <code>Node *</code>. Also, don&#39;t use typedefs names later for variables."}], "answers": [{"tags": [], "owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "is_accepted": true, "score": 1, "last_activity_date": 1485369942, "creation_date": 1485369942, "answer_id": 41859265, "question_id": 41859156, "link": "https://stackoverflow.com/questions/41859156/why-is-my-linked-list-type-not-recognized/41859265#41859265", "title": "why is my linked list type not recognized?", "body": "<p>I guess it's a lesson in using overly-generic type names.</p>\n\n<p>You've defined <code>ptr</code> as a type -- the type for a pointer to an item -- and in most cases you use it that way.  But on the two lines in question, you use <code>ptr</code> as though it were the name of a variable.  The variable of type <code>ptr</code> in your code is named <code>p</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "is_accepted": false, "score": 4, "last_activity_date": 1485369962, "creation_date": 1485369962, "answer_id": 41859270, "question_id": 41859156, "link": "https://stackoverflow.com/questions/41859156/why-is-my-linked-list-type-not-recognized/41859270#41859270", "title": "why is my linked list type not recognized?", "body": "<p>You're referring to the type of the structure member not the structure member.</p>\n\n<pre><code>printf(\"%d -&gt; \\n\", ptr -&gt; data);\nptr = ptr -&gt; next;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>printf(\"%d -&gt; \\n\", p-&gt;data);\np = p-&gt;next;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1485369991, "creation_date": 1485369991, "answer_id": 41859282, "question_id": 41859156, "link": "https://stackoverflow.com/questions/41859156/why-is-my-linked-list-type-not-recognized/41859282#41859282", "title": "why is my linked list type not recognized?", "body": "<blockquote>\n  <p>why is my linked list type not recognized?</p>\n</blockquote>\n\n<p>The errors do not indicate that your type is unrecognized.  Indeed, the first expressly indicates that <code>ptr</code> is recognized as a type name.  The problem, as it says, is that an <em>expression</em>, not a type name, is required as the left operand of the <code>-&gt;</code> operator.  In particular, it looks like you want to use variable <code>p</code> rather than type <code>ptr</code> on the indicated lines.  For example,</p>\n\n<pre><code>p = p-&gt;next;\n</code></pre>\n"}], "owner": {"reputation": 1142, "user_id": 5863693, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/101741963312f7ee577a74925672d234?s=128&d=identicon&r=PG&f=1", "display_name": "Yos", "link": "https://stackoverflow.com/users/5863693/yos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 41859265, "answer_count": 3, "score": 0, "last_activity_date": 1485369991, "creation_date": 1485369636, "question_id": 41859156, "link": "https://stackoverflow.com/questions/41859156/why-is-my-linked-list-type-not-recognized", "title": "why is my linked list type not recognized?", "body": "<p>This is my C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node * ptr;\ntypedef struct node {\n  int data;\n  ptr next;\n} item;\n\nvoid printList(ptr p);\n\nint main() {\n  ptr h = NULL;\n\n}\n\nvoid printList(ptr p) {\n  while(p) {\n    printf(\"%d -&gt; \\n\", ptr -&gt; data);\n    ptr = ptr -&gt; next;\n  }\n}\n</code></pre>\n\n<p>I get 2 errors when I compile the code:</p>\n\n<pre><code>error: unexpected type name 'ptr': expected expression\n            printf(\"%d -&gt; \\n\", ptr -&gt; data);\n                               ^\n\nerror: expected identifier or '('\n            ptr = ptr -&gt; next;\n</code></pre>\n\n<p>I tried to play around with all kind of changes but I don't understand why I'm getting these errors.</p>\n"}, {"tags": ["c", "algorithm", "knuth"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485369916, "post_id": 41859120, "comment_id": 70902332, "body": "That&#39;s not how stack overflow works. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>; one <b>specific</b> question at a time. If oyu have major problems understanding, step back, as you might missed some prerequisite knowledge."}, {"owner": {"reputation": 115, "user_id": 5887653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Sf67uSP14DY/AAAAAAAAAAI/AAAAAAAAAUA/cV2xxoWa_ZQ/photo.jpg?sz=128", "display_name": "Soul Bruteflow", "link": "https://stackoverflow.com/users/5887653/soul-bruteflow"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485370357, "post_id": 41859120, "comment_id": 70902607, "body": "Thank you for the response I fixed the question."}, {"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "edited": false, "score": 0, "creation_date": 1485370417, "post_id": 41859120, "comment_id": 70902640, "body": "This question might be more suitable for <a href=\"http://cs.stackexchange.com/\">cs.stackexchange.com</a>"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5887653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Sf67uSP14DY/AAAAAAAAAAI/AAAAAAAAAUA/cV2xxoWa_ZQ/photo.jpg?sz=128", "display_name": "Soul Bruteflow", "link": "https://stackoverflow.com/users/5887653/soul-bruteflow"}, "edited": false, "score": 0, "creation_date": 1485415448, "post_id": 41859758, "comment_id": 70919136, "body": "What about the &quot;C field&quot; of the &quot;column object&quot;? I didn&#39;t found the way he uses it. Does he use it as a head pointer to this column?"}, {"owner": {"reputation": 1967, "user_id": 406290, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/BwcOg.jpg?s=128&g=1", "display_name": "Kevin Hooke", "link": "https://stackoverflow.com/users/406290/kevin-hooke"}, "edited": false, "score": 0, "creation_date": 1548007235, "post_id": 41859758, "comment_id": 95380453, "body": "I don&#39;t believe the C field for the header cells is used. It&#39;s only relevant for the cells in that column, to easily point back to their column header. Without this direct reference back to the header, you can iterate the up links until you reach the header (implying that there&#39;s some other property or type of the header cells themselves so you know when you&#39;ve iterated the up links far enough to reach the header). If each cell has a link directly back to the column header, that obviously avoids the need iterate the up links to get back to the header."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 3, "last_activity_date": 1485371552, "creation_date": 1485371552, "answer_id": 41859758, "question_id": 41859120, "link": "https://stackoverflow.com/questions/41859120/donald-knuth-dancing-links-special-pointer-implementation/41859758#41859758", "title": "Donald Knuth Dancing Links special pointer implementation", "body": "<p>The pointer you're talking about points to a header object that's used to indicate how many objects there are in the column (equivalently, how many 1s are in that column of the matrix). This is used so that the algorithm can heuristically determine which column to choose in the \"choose a column deterministically\" step, since you might want to do something like \"choose the column with the fewest entries in it.\" The C fields make it easy to update the column headers when you splice a row out of the matrix: for each entry that's removed, follow the C pointer to the column header and decrement the counter there; for each entry that's reinserted, follow the C pointer to the column header and increment the counter there.</p>\n"}], "owner": {"reputation": 115, "user_id": 5887653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Sf67uSP14DY/AAAAAAAAAAI/AAAAAAAAAUA/cV2xxoWa_ZQ/photo.jpg?sz=128", "display_name": "Soul Bruteflow", "link": "https://stackoverflow.com/users/5887653/soul-bruteflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 2, "accepted_answer_id": 41859758, "answer_count": 1, "score": 2, "last_activity_date": 1485371563, "creation_date": 1485369528, "last_edit_date": 1485371563, "question_id": 41859120, "link": "https://stackoverflow.com/questions/41859120/donald-knuth-dancing-links-special-pointer-implementation", "title": "Donald Knuth Dancing Links special pointer implementation", "body": "<p>Right now I am working on my implementation of the D.Kuth DLX algorithm/data structure.</p>\n\n<p>I know what is exact cover and how Dancing links works. But I have a question on <a href=\"https://www.ocf.berkeley.edu/~jchu/publicportal/sudoku/0011047.pdf\" rel=\"nofollow noreferrer\">his paper:</a></p>\n\n<p>On page 5, he describes the implementation of the algorithm. And there, his \"data object x\" nodes have \"C field\" that points\nto the column object at the head of the relevant column. But I don't fully understand why he needs it and how he uses it? And the same goes for the \"C filed\" for the \"column object\".</p>\n\n<pre><code>typedef struct Data{\n  struct Data *left, *right, *up, *down;\n  struct Column *c;\n} Data;\n\ntypedef struct Column{\n  struct Column *left, *right, *up, *down;\n  struct Data *c;\n  int size, name;\n} Column;\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "interrupt"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 8, "creation_date": 1485369280, "post_id": 41859005, "comment_id": 70901946, "body": "There hopefully is no way to do this! You should not even think about doing modifications at such a low-level from user code (and be very careful in kernel code). This is an XY problem. What is your <b>actual</b> problem you try to solve by this?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1485369653, "post_id": 41859005, "comment_id": 70902145, "body": "If that was a generally-available capability, anyone could write a program with a never-ending loop that would block the entire system until someone physically pulled the plug, because task scheduling relies on clock-generated interrupts."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1485369729, "post_id": 41859005, "comment_id": 70902188, "body": "Disabling interrupt is as  simple as processor instruction. Usually the mnemonic is something similar to <code>cli</code>. However, it is priviliged instruction, and can only be executed in a priviliged context."}, {"owner": {"reputation": 133, "user_id": 6259573, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/421e75534113d42b764160b5b9b3504c?s=128&d=identicon&r=PG&f=1", "display_name": "Nhome", "link": "https://stackoverflow.com/users/6259573/nhome"}, "edited": false, "score": 0, "creation_date": 1485369737, "post_id": 41859005, "comment_id": 70902199, "body": "this is the actual problem that I want to solve, I need to run my application  interrupt-free. if it&#39;s not possible to disable interrupts from inside applications, how can I do it from outside and run entire application without interruption?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1485370055, "post_id": 41859005, "comment_id": 70902424, "body": "Have you considered that Linux might not be the right tool for what you&#39;re trying to do? I&#39;m not sure that Linux can tolerate disabled interrupts for a very long time, or that user-mode programs are meant to run in an interrupt-disabled environment at all. There are a lot of things that you won&#39;t be able to do without interrupts, like reading data from a hard drive or similar device, or using the network."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1485370307, "post_id": 41859005, "comment_id": 70902571, "body": "Another possibility for you would be to write a kernel module and run all of your code from a kernel thread. I&#39;m still not sure that Linux is what you&#39;ll be looking for, though."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 2, "creation_date": 1485370333, "post_id": 41859005, "comment_id": 70902588, "body": "Use a realtime operating system."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1485370405, "post_id": 41859005, "comment_id": 70902635, "body": "&quot;I need to run my applications in a interrupt-free environment&quot; -- then you don&#39;t want to run it on Linux.  Nor on Windows, or OS X, or any other multitasking operating system.  If you need to be certain that your program is not interrupted then you probably need to run it as a freestanding program on the bare metal."}, {"owner": {"reputation": 1170, "user_id": 2157254, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e6cfb11652b51c12c03e35e51c077780?s=128&d=identicon&r=PG", "display_name": "Long Smith", "link": "https://stackoverflow.com/users/2157254/long-smith"}, "edited": false, "score": 0, "creation_date": 1485370737, "post_id": 41859005, "comment_id": 70902829, "body": "What is the reason exactly of running application on Linux in &quot;interrupt free environment?&quot;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1485370763, "post_id": 41859005, "comment_id": 70902841, "body": "@JohnBollinger, why? Op could easily do a kernel driver and run the program of it uninterrupted if so OP wishes."}, {"owner": {"reputation": 133, "user_id": 6259573, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/421e75534113d42b764160b5b9b3504c?s=128&d=identicon&r=PG&f=1", "display_name": "Nhome", "link": "https://stackoverflow.com/users/6259573/nhome"}, "edited": false, "score": 1, "creation_date": 1485374230, "post_id": 41859005, "comment_id": 70904776, "body": "using a kernel thread sounds pretty good, I see people talk about disable_local_interrupt() but I don&#39;t know how to use it."}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1485375215, "post_id": 41859005, "comment_id": 70905319, "body": "@Nhome you are being extremely rude by refusing to explain why you want to disable interrupts.  Saying &quot;I want to disable interrupts in a userland process&quot;  strongly suggests that you are confused about what you are trying to achieve and hence the questions you refuse to ask are more than valid."}, {"owner": {"reputation": 133, "user_id": 6259573, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/421e75534113d42b764160b5b9b3504c?s=128&d=identicon&r=PG&f=1", "display_name": "Nhome", "link": "https://stackoverflow.com/users/6259573/nhome"}, "edited": false, "score": 0, "creation_date": 1485375597, "post_id": 41859005, "comment_id": 70905532, "body": "Oh I&#39;m sorry I am not trying to be rude, it is really what I need to do, I am doing some research on side-channel signal and this is an experiment that I need to get its signal. It is getting signal of executing this application with as less as possible interruption."}, {"owner": {"reputation": 6143, "user_id": 2147218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQVSl.jpg?s=128&g=1", "display_name": "bazza", "link": "https://stackoverflow.com/users/2147218/bazza"}, "edited": false, "score": 0, "creation_date": 1485376223, "post_id": 41859005, "comment_id": 70905897, "body": "Well, on a non-realtime preemptive multitasking OS like a stock Linux kernel, your side channel signal is going to be very noisy, especially if it&#39;s connected to a network."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1558833817, "post_id": 41859005, "comment_id": 99229942, "body": "Can someone just answer the OPs question by demonstrating a full, runnable kernel space loop and code sample? I haven&#39;t the faintest idea how to write Linux code in kernel space but am interested to learn."}], "answers": [{"comments": [{"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1558833945, "post_id": 41860761, "comment_id": 99229955, "body": "Can you demo how to enter kernel space and do it then?"}, {"owner": {"reputation": 1241, "user_id": 2398123, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a23fc30886c73b66ee7d3bde418da67f?s=128&d=identicon&r=PG", "display_name": "sevko", "link": "https://stackoverflow.com/users/2398123/sevko"}, "reply_to_user": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1575412187, "post_id": 41860761, "comment_id": 104556454, "body": "@GabrielStaples write a kernel module and disable interrupts."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 1241, "user_id": 2398123, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a23fc30886c73b66ee7d3bde418da67f?s=128&d=identicon&r=PG", "display_name": "sevko", "link": "https://stackoverflow.com/users/2398123/sevko"}, "edited": false, "score": 0, "creation_date": 1575432934, "post_id": 41860761, "comment_id": 104560933, "body": "@sevko, you just reworded my request. Me: &quot;doron, can you demo how to enter kernel space and do it then?&quot;. You: &quot;[In other words doron, can you please demo how to] write a kernel model and disable interrupts?&quot;"}, {"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 1, "creation_date": 1575479815, "post_id": 41860761, "comment_id": 104583771, "body": "Take a look at implementing a char device. There are examples on the internet. Once in kernel mode, there is a simple API to disable interrupts. Just note, you cannot return to userspace before interrupts are re-enabled"}], "tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": false, "score": 9, "last_activity_date": 1485374996, "creation_date": 1485374996, "answer_id": 41860761, "question_id": 41859005, "link": "https://stackoverflow.com/questions/41859005/how-to-disable-interrupt-in-a-c-program-in-linux/41860761#41860761", "title": "How to disable interrupt in a C program in linux", "body": "<p>Userspace cannot disable or enable interrupts. </p>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 6259573, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/421e75534113d42b764160b5b9b3504c?s=128&d=identicon&r=PG&f=1", "display_name": "Nhome", "link": "https://stackoverflow.com/users/6259573/nhome"}, "edited": false, "score": 0, "creation_date": 1485375789, "post_id": 41860781, "comment_id": 70905632, "body": "well then is there any possible way to do it with a higher privilege?"}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "reply_to_user": {"reputation": 133, "user_id": 6259573, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/421e75534113d42b764160b5b9b3504c?s=128&d=identicon&r=PG&f=1", "display_name": "Nhome", "link": "https://stackoverflow.com/users/6259573/nhome"}, "edited": false, "score": 1, "creation_date": 1485376120, "post_id": 41860781, "comment_id": 70905842, "body": "yes, run your code in the kernel.  By writing a kernel driver.  I am no kernel developer, but I&#39;m going to guess that you don&#39;t want to have a way to disable and then enable interrupts from the userland; you should run your entire operation in kernel mode: disable interrupts, do whatever it is you want, re-enabled interrupts.  This still sounds weird and a RTOS is most likely a better choice."}], "tags": [], "owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "is_accepted": false, "score": 0, "last_activity_date": 1485375055, "creation_date": 1485375055, "answer_id": 41860781, "question_id": 41859005, "link": "https://stackoverflow.com/questions/41859005/how-to-disable-interrupt-in-a-c-program-in-linux/41860781#41860781", "title": "How to disable interrupt in a C program in linux", "body": "<p>According to ARM.com <a href=\"http://infocenter.arm.com/help/index.jsp?topic=%2Fcom.arm.doc.ddi0344k%2FBeidabib.html\" rel=\"nofollow noreferrer\">http://infocenter.arm.com/help/index.jsp?topic=%2Fcom.arm.doc.ddi0344k%2FBeidabib.html</a> this CPU does have different operating modes, which suggests that you probably can't disable interrupts from a user process.</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 6626054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f466036c8c5fca538016fa2dcbd8ba1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jun Ge", "link": "https://stackoverflow.com/users/6626054/jun-ge"}, "is_accepted": false, "score": 0, "last_activity_date": 1485408370, "creation_date": 1485408370, "answer_id": 41867402, "question_id": 41859005, "link": "https://stackoverflow.com/questions/41859005/how-to-disable-interrupt-in-a-c-program-in-linux/41867402#41867402", "title": "How to disable interrupt in a C program in linux", "body": "<p>I think @doron is right, you can't disable/enable interrupt in user mode, but you have a work around. You can write a driver which encapsulates the \"loop\" code in an interface, and you can enable/disable interrupt in your driver. Your application just need to call that interface.</p>\n"}], "owner": {"reputation": 133, "user_id": 6259573, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/421e75534113d42b764160b5b9b3504c?s=128&d=identicon&r=PG&f=1", "display_name": "Nhome", "link": "https://stackoverflow.com/users/6259573/nhome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7356, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1513182920, "creation_date": 1485369166, "last_edit_date": 1485379788, "question_id": 41859005, "link": "https://stackoverflow.com/questions/41859005/how-to-disable-interrupt-in-a-c-program-in-linux", "title": "How to disable interrupt in a C program in linux", "body": "<p>I am writing a simple code in c on a Linux(A13-OLinuXino-MICRO) with A13 processor. I am using gcc compiler if that's important. Let's say I have a simple loop that is just counting from 1 to 100 and I want to have as less as possible interruption in this loop. I assume the best that I can do is disabling interrupts(even the timer interrupt if possible) and enabling it after the loop. I have multiple places in my program that I need to enforce this. Can anybody help me with a simple C code that a loop is protected from interruption...something that I can compile and run on my platform?</p>\n\n<p>EDIT:  Kernel thread might be an answer. How can I run something with kernel privilege? I see people talk about disable_local_interrupt() but I don't know how to use it.</p>\n\n<p>EDIT: This is the actual problem that I am trying to solve. I need to run my applications in a interrupt-free environment. </p>\n\n<p>EDIT: Yes I am sure that Linux is what I need to use and I know that interrupts are important for OS and that's why I don't want to disable them forever. I just want to enforce no-interrupt for a fraction of second on OS when I am running this. Also, There is no main problem that I need to solve, this is \"the problem\" that I need to solve, so stop asking why I want to do this. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1485368951, "post_id": 41858864, "comment_id": 70901757, "body": "Did you have a question?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485369010, "post_id": 41858864, "comment_id": 70901791, "body": "What about the man-page of <code>getline</code> is unclear?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485369147, "post_id": 41858864, "comment_id": 70901872, "body": "Hint: there is no <code>free()</code> call on the pointer with allocated memory."}, {"owner": {"reputation": 1, "user_id": 7469958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vEXI_lLeho0/AAAAAAAAAAI/AAAAAAAAAbQ/XpyccCw_af4/photo.jpg?sz=128", "display_name": "Chengyao Diao", "link": "https://stackoverflow.com/users/7469958/chengyao-diao"}, "edited": false, "score": 0, "creation_date": 1485371939, "post_id": 41858864, "comment_id": 70903521, "body": "@ John Bollinger. It is not a question. It just a statement about getline function. I want to let us know there is some potential hazard of this function."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7469958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vEXI_lLeho0/AAAAAAAAAAI/AAAAAAAAAbQ/XpyccCw_af4/photo.jpg?sz=128", "display_name": "Chengyao Diao", "link": "https://stackoverflow.com/users/7469958/chengyao-diao"}, "edited": false, "score": 0, "creation_date": 1485371781, "post_id": 41859759, "comment_id": 70903434, "body": "It is so interesting for the function getline. It means that if I call the getline function unsuccessful. I need wipe the bottom again."}], "tags": [], "owner": {"reputation": 1, "user_id": 7469958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vEXI_lLeho0/AAAAAAAAAAI/AAAAAAAAAbQ/XpyccCw_af4/photo.jpg?sz=128", "display_name": "Chengyao Diao", "link": "https://stackoverflow.com/users/7469958/chengyao-diao"}, "is_accepted": false, "score": 0, "last_activity_date": 1485371553, "creation_date": 1485371553, "answer_id": 41859759, "question_id": 41858864, "link": "https://stackoverflow.com/questions/41858864/getline-function-memory-leak-when-return-value-is-1/41859759#41859759", "title": "getline function memory leak when return value is -1", "body": "<p>This is the first issue of getline function. Another issue is here. I want to know whether getline function use realloc function, and free the buffer when the buffer is not enough. The following is another test code. I get the points that getline function initialize malloc memory with 128 bytes. but it doesn't use realloc function to alloc buffer when the buffer is not enough. </p>\n\n<p>The following test code alloc 3 buffers. getline function buffer is in the middle. The initialized getline buffer is 128 bytes. Then I call the getline function again to get the buffers more than 128 bytes. I set a break point in free function,but it is not called.   </p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char** argv)                 \n{\n\n    char *buffer = NULL;\n    char *buffer1 = NULL;\n    char *buffer2 = NULL;\n    size_t bufsize = 32;\n    size_t characters;\n\n\n    buffer1 = (char *)malloc(bufsize * sizeof(char));\n    if( buffer1 == NULL)\n    {\n        perror(\"Unable to allocate buffer\");\n        exit(1);\n    }\n\n    printf(\"buffer1 = 0x%p\\n\", buffer1);\n    printf(\"Type something: \");\n    characters = getline(&amp;buffer,&amp;bufsize,stdin);\n\n    printf(\" get line buffer  = 0x%p\\n\", buffer);\n    buffer2 = (char *)malloc(bufsize * sizeof(char));\n    if( buffer2 == NULL)\n    {\n        perror(\"Unable to allocate buffer\");\n        exit(1);\n    }\n    memset(buffer2, 21,bufsize);\n\n    printf(\"buffer2 = 0x%p\\n\", buffer2);\n    printf(\"buffer2 content = %s\\n\", buffer2);\n    printf(\"%zu characters were read.\\n\",characters);\n    printf(\"You typed: '%s'\\n\",buffer);\n    printf(\"The address is  = 0x%p\\n\", buffer);\n\n    characters = getline(&amp;buffer,&amp;bufsize,stdin);\n    printf(\"%zu characters were read.\\n\",characters);\n    printf(\"You typed: '%s'\\n\",buffer);\n    printf(\"The address is change = 0x%p\\n\", buffer);\n    free(buffer);\n    return(0);\n}\n</code></pre>\n\n<p>Debug process:</p>\n\n<pre><code>Breakpoint 1, main (argc=1, argv=0xbffff754) at getline.c:22\n22          char *buffer = NULL;\n(gdb) n\n23          char *buffer1 = NULL;\n(gdb)\n24          char *buffer2 = NULL;\n(gdb)\n25          size_t bufsize = 32;\n(gdb)\n29          buffer1 = (char *)malloc(bufsize * sizeof(char));\n(gdb)\n30          if( buffer1 == NULL)\n(gdb)\n36          printf(\"buffer1 = 0x%p\\n\", buffer1);\n(gdb)\nbuffer1 = 0x0x804b008\n38          printf(\"Type something: \");\n(gdb)\n39          characters = getline(&amp;buffer,&amp;bufsize,stdin);\n(gdb)\nType something: aaaaaa\n41          printf(\" get line buffer  = 0x%p\\n\", buffer);\n(gdb)\n get line buffer  = 0x0x804b030\n42          buffer2 = (char *)malloc(bufsize * sizeof(char));\n(gdb) n\n43          if( buffer2 == NULL)\n(gdb) n\n48          memset(buffer2, 21,bufsize);\n(gdb) n\n50          printf(\"buffer2 = 0x%p\\n\", buffer2);\n(gdb) n\nbuffer2 = 0x0x804b0b0\n52          printf(\"%zu characters were read.\\n\",characters);\n(gdb) p  0xb0 -0x30\n$1 = 128\n(gdb) b free\nBreakpoint 2 at 0xb7e8cc60: free. (2 locations)\n(gdb) n\n7 characters were read.\n53          printf(\"You typed: '%s'\\n\",buffer);\n(gdb) n\nYou typed: 'aaaaaa\n'\n54          printf(\"The address is  = 0x%p\\n\", buffer);\n(gdb) n\nThe address is  = 0x0x804b030\n56          characters = getline(&amp;buffer,&amp;bufsize,stdin);\n(gdb)\naaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n57          printf(\"%zu characters were read.\\n\",characters);\n(gdb) n\n190 characters were read.\n58          printf(\"You typed: '%s'\\n\",buffer);\n(gdb)\nYou typed: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n'\n59          printf(\"The address is change = 0x%p\\n\", buffer);\n(gdb)\nThe address is change = 0x0x804b130\n60          free(buffer);\n(gdb) i b\nNum     Type           Disp Enb Address    What\n1       breakpoint     keep y   0x08048566 in main at getline.c:22\n        breakpoint already hit 1 time\n2       breakpoint     keep y   &lt;MULTIPLE&gt;\n2.1                         y     0xb7e8cc60 in __GI___libc_free at malloc.c:2912\n2.2                         y     0xb7ff3730 in free at dl-minimal.c:119\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7469958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vEXI_lLeho0/AAAAAAAAAAI/AAAAAAAAAbQ/XpyccCw_af4/photo.jpg?sz=128", "display_name": "Chengyao Diao", "link": "https://stackoverflow.com/users/7469958/chengyao-diao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485371553, "creation_date": 1485368645, "last_edit_date": 1485368750, "question_id": 41858864, "link": "https://stackoverflow.com/questions/41858864/getline-function-memory-leak-when-return-value-is-1", "title": "getline function memory leak when return value is -1", "body": "<pre><code>#include &lt;stdio.h&gt;                              \nint main(int argc, char** argv)                 \n{                                               \n    FILE *fp = NULL;                            \n    char* line = NULL;                          \n    ssize_t read = 0;                           \n    ssize_t len = 0;                            \n    fp = popen(\"lspci | grep aaaaaa\", \"r\");     \n\n    if((read = getline(&amp;line, &amp;len, fp)) == -1){\n        pclose(fp);                             \n        return -1;                              \n    }                                           \n\n    pclose(fp);                                 \n}\n</code></pre>\n\n<p>This is the test program.                                                                                                                                                                                                                                                                            </p>\n\n<p>I wrote the function test code here. I want to know when the function getline return -1 whether I need free the buffer. I test it in my environment. I found that when the getline function return -1, there are memory leak. The following is my debug step:</p>\n\n<pre><code>Breakpoint 1, main (argc=1, argv=0xbffff754) at getline.c:8\n8           FILE *fp = NULL;\n(gdb) n\n9           char* line = NULL;\n(gdb)\n10          ssize_t read = 0;\n(gdb)\n11          ssize_t len = 0;\n(gdb)\n12          fp = popen(\"lspci | grep aaaaaa\", \"r\");\n(gdb)\n14          if((read = getline(&amp;line, &amp;len, fp)) == -1){\n(gdb) i locals\nfp = 0x804b008\nline = 0x0\nread = 0\nlen = 0\n(gdb) n\n15              pclose(fp);\n(gdb) i locals\nfp = 0x804b008\nline = 0x804b0b8 \"\"\nread = -1\nlen = 120\n</code></pre>\n"}, {"tags": ["c", "struct", "language-lawyer"], "comments": [{"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1485367540, "post_id": 41858427, "comment_id": 70900950, "body": "Is this known as type punning? Like in Win32, <code>NMHDR</code> and structures whose first memeber is a pointer to <code>NMHDR</code>? I&#39;m not sure"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1485367989, "post_id": 41858427, "comment_id": 70901192, "body": "You may also want to look at <code>man 3 offsetof</code> which is related to your question."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1485370733, "post_id": 41858427, "comment_id": 70902824, "body": "You may never have seen code that implements that technique, but I&#39;ve certainly <i>written</i> such code.  After convincing myself that its behavior is well-defined, based on essentially the same argument that Sourav presents in his answer.  I&#39;m confident that I was nowhere near the first to write such code."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1485371036, "post_id": 41858427, "comment_id": 70902993, "body": "Of course, you don&#39;t actually need the casts.  You can take the address of the appropriate member instead.  Eg, <code>print_parent_val(&amp;g.child.parent)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2704, "user_id": 6794772, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2d8db2b0d48b6e1b25657fda9ec4ae02?s=128&d=identicon&r=PG&f=1", "display_name": "Dellowar", "link": "https://stackoverflow.com/users/6794772/dellowar"}, "edited": false, "score": 0, "creation_date": 1485367752, "post_id": 41858462, "comment_id": 70901069, "body": "I&#39;ve made some edits to my question as you can see, but I believe this quote answers it as well."}, {"owner": {"reputation": 10963, "user_id": 306257, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/701752cfc3dd805d412884f38a464296?s=128&d=identicon&r=PG", "display_name": "Haldean Brown", "link": "https://stackoverflow.com/users/306257/haldean-brown"}, "edited": false, "score": 0, "creation_date": 1485367828, "post_id": 41858462, "comment_id": 70901110, "body": "You&#39;re correct that the memory layout of the struct would allow for this to work, <i>if</i> strict aliasing weren&#39;t a thing. With <code>-fno-strict-aliasing</code>, this is the correct answer!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 10963, "user_id": 306257, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/701752cfc3dd805d412884f38a464296?s=128&d=identicon&r=PG", "display_name": "Haldean Brown", "link": "https://stackoverflow.com/users/306257/haldean-brown"}, "edited": false, "score": 0, "creation_date": 1485368150, "post_id": 41858462, "comment_id": 70901286, "body": "@HaldeanBrown There is this explicit mention about no padding at beginning, so how does this violate strict aliasing rule?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 2704, "user_id": 6794772, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2d8db2b0d48b6e1b25657fda9ec4ae02?s=128&d=identicon&r=PG&f=1", "display_name": "Dellowar", "link": "https://stackoverflow.com/users/6794772/dellowar"}, "edited": false, "score": 0, "creation_date": 1485368266, "post_id": 41858462, "comment_id": 70901343, "body": "@SanchkeDellowar I believe you&#39;re correct, as long as you stick to the first member variable. :)"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 10963, "user_id": 306257, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/701752cfc3dd805d412884f38a464296?s=128&d=identicon&r=PG", "display_name": "Haldean Brown", "link": "https://stackoverflow.com/users/306257/haldean-brown"}, "edited": false, "score": 0, "creation_date": 1485369108, "post_id": 41858462, "comment_id": 70901853, "body": "@HaldeanBrown there is no violation of strict aliasing with this technique. There <i>is</i> a <code>parent</code> object at the beginning of the child."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 10963, "user_id": 306257, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/701752cfc3dd805d412884f38a464296?s=128&d=identicon&r=PG", "display_name": "Haldean Brown", "link": "https://stackoverflow.com/users/306257/haldean-brown"}, "edited": false, "score": 0, "creation_date": 1485369411, "post_id": 41858462, "comment_id": 70902018, "body": "@HaldeanBrown: per the specification in 6.5 paragraph 7, it is explicitly allowed to alias like this, and it does not violate strict aliasing..."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1485367538, "last_edit_date": 1485367538, "creation_date": 1485367225, "answer_id": 41858462, "question_id": 41858427, "link": "https://stackoverflow.com/questions/41858427/does-this-c-inheritance-implementation-contain-undefined-behavior/41858462#41858462", "title": "Does this C inheritance implementation contain undefined behavior?", "body": "<p>As I can see, there's no scope of undefined behaviour <em>here</em>.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.7.2.1, <em>Structure and union specifiers</em>, (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>Within a structure object, the non-bit-field members and the units in which bit-fields\n  reside have addresses that increase in the order in which they are declared. <strong>A pointer to a\n  structure object, suitably converted, points to its initial member</strong> (or if that member is a\n  bit-field, then to the unit in which it resides), and vice versa. <strong>There may be unnamed\n  padding within a structure object, but not at its beginning.</strong></p>\n</blockquote>\n\n<p>So, with the current snippet (and approach), you should be good to go.</p>\n"}], "owner": {"reputation": 2704, "user_id": 6794772, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2d8db2b0d48b6e1b25657fda9ec4ae02?s=128&d=identicon&r=PG&f=1", "display_name": "Dellowar", "link": "https://stackoverflow.com/users/6794772/dellowar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 41858462, "answer_count": 1, "score": 7, "last_activity_date": 1485367728, "creation_date": 1485367080, "last_edit_date": 1485367690, "question_id": 41858427, "link": "https://stackoverflow.com/questions/41858427/does-this-c-inheritance-implementation-contain-undefined-behavior", "title": "Does this C inheritance implementation contain undefined behavior?", "body": "<pre><code>struct parent\n{\n    char a;\n    char b;\n};\n\nstruct child\n{\n    struct parent parent;\n    int c;\n    char d;\n};\n\nstruct grandchild\n{\n    struct child child;\n    long e;\n};\n\nvoid print_parent_val(struct parent *p)\n{\n    printf(\"%d\\n\", p-&gt;a);\n}\n\nint main (int argc, char **argv)\n{\n    struct grandchild g;\n    g.child.parent.a = 69;\n    print_parent_val((struct parent *)&amp;g);\n    return 0;\n}\n</code></pre>\n\n<p>The program compiles (no warnings) and runs fine and prints <code>69</code> as expected. I have never seen any code that implements this inheritance technique so I'm very hesitant to see this as \"OK\".</p>\n\n<p><strong>EDIT:</strong> What about converting the grandchild to just a child? Is the mid-generation conversion also possible?</p>\n\n<pre><code>void print_parent_val(struct child *c)\n{\n    printf(\"%c\\n\", c-&gt;d);\n}\n\nint main (int argc, char **argv)\n{\n    struct grandchild g;\n    g.child.parent.a = 69;\n    g.child.d = 'w';\n    print_parent_val((struct child *)&amp;g);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "opengl", "textures"], "comments": [{"owner": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1485367513, "post_id": 41858408, "comment_id": 70900931, "body": "You should try to look at using shaders. These calls are somewhat dated,  and might cause some trouble if you try to draw more varied"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485367789, "post_id": 41858408, "comment_id": 70901090, "body": "Get a different resource. The code violates effective type rule, and invokes undefined behaviour."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "reply_to_user": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1485368310, "post_id": 41858408, "comment_id": 70901377, "body": "@Charlie : What are shaders ? I never worked with shaders before. Could you please suggest me any tutorial ?"}, {"owner": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1485373931, "post_id": 41858408, "comment_id": 70904616, "body": "<a href=\"http://www.opengl-tutorial.org/beginners-tutorials/tutorial-2-the-first-triangle/\" rel=\"nofollow noreferrer\">opengl-tutorial.org/beginners-tutorials/&hellip;</a> halfway down the page. A shader is basically a way to send tasks to the GPU itself, instead of doing everyting on the CPU. Its very effective, and necessary even"}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "reply_to_user": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1485455550, "post_id": 41858408, "comment_id": 70943103, "body": "Thanks, @Charlie."}], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485368083, "post_id": 41858532, "comment_id": 70901240, "body": "Ok, ill watch out, but why is the previous set color used, why isnt it white ?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485389611, "post_id": 41858532, "comment_id": 70911576, "body": "A texture is nothing but a buffer. It needs to be filled with something. I don&#39;t know if pyopengl sets a default color. Because your glTexImage2D doesn&#39;t work the buffer is undefined. Only quads are drawn in the current color, red in your case."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485455508, "post_id": 41858532, "comment_id": 70943070, "body": "Thanks , thats useful to me . Ill try it out."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485625576, "post_id": 41858532, "comment_id": 71007014, "body": "Could you please show me how to load and use a texture correctly ? Nothing worked for me. Please link me a tutorial or something else that helps me to get this to work."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485797688, "post_id": 41858532, "comment_id": 71064077, "body": "I have worked with textures in pyopengl. Its really easy. But in c, I have no working idea about how to load an image. Could you please have a look at my new code ? Why doesnt it work ?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799169, "post_id": 41858532, "comment_id": 71064983, "body": "Please read the tutorial I posted. At least the textures chapter. If you would have done so you would know that you must use <code>glActiveTexture</code> with a texture-unit before <code>glBindTexture</code> with texture-name."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799421, "post_id": 41858532, "comment_id": 71065125, "body": "I read and knew it.I think it wouldnt be necessarely, because in pyopengl I never had to use it. Ill try it out."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799627, "post_id": 41858532, "comment_id": 71065250, "body": "It doesnt help."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799642, "post_id": 41858532, "comment_id": 71065263, "body": "Have a look at Edit 2"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799677, "post_id": 41858532, "comment_id": 71065281, "body": "Be aware some examples are old, using the &quot;inmediate mode&quot; and not modern OpenGL &gt;=3.2 with shaders and more features, but more requirements."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799817, "post_id": 41858532, "comment_id": 71065359, "body": "No. <code>glActiveTexture(GL_TEXTURE0)</code>  is same as &quot;no active unit&quot;. Use <code>glActiveTexture(GL_TEXTURE0 + unit)</code> with unit &gt; 0."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485800181, "post_id": 41858532, "comment_id": 71065575, "body": "With glActiveTexture(GL_TEXTURE1); it doesnt work. Please have a look at my new code, especially the drawing function. Perhaps im doing something wrong there ?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485800453, "post_id": 41858532, "comment_id": 71065713, "body": "GL_TEXTURE0 is NOT equal to 0. It&#39;s a defined value that the driver can handle. This is my last comment. I insist you to read slowly the tutorial."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1486229332, "post_id": 41858532, "comment_id": 71259790, "body": "Thanks to your effort, but glActiveTexture() isnt required."}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 1, "last_activity_date": 1485367455, "creation_date": 1485367455, "answer_id": 41858532, "question_id": 41858408, "link": "https://stackoverflow.com/questions/41858408/how-to-load-texture-opengl/41858532#41858532", "title": "How to load texture Opengl?", "body": "<p>Review how you read data. <code>dataPos</code>, <code>size</code> and others may be set after reading the BMP. It's a relative position defined in the header of the image file.\n<p> And then review glTexImage2D(). Your are passing <code>data</code>instead of <code>dataPos</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "is_accepted": true, "score": 3, "last_activity_date": 1486229291, "creation_date": 1486229291, "answer_id": 42043320, "question_id": 41858408, "link": "https://stackoverflow.com/questions/41858408/how-to-load-texture-opengl/42043320#42043320", "title": "How to load texture Opengl?", "body": "<p>Finally, after browsing the internet quite a lot, I found this working example : </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;GL/glut.h&gt;\n#include &lt;GL/gl.h&gt;\n#include &lt;GL/glu.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nGLuint texture[2];\n\n\nstruct Image {\n\n    unsigned long sizeX;\n\n    unsigned long sizeY;\n\n    char *data;\n\n};\n\ntypedef struct Image Image;\n\n\n#define checkImageWidth 64\n\n#define checkImageHeight 64\n\n\nGLubyte checkImage[checkImageWidth][checkImageHeight][3];\n\nvoid makeCheckImage(void){\n\n    int i, j, c;\n\n    for (i = 0; i &lt; checkImageWidth; i++) {\n\n        for (j = 0; j &lt; checkImageHeight; j++) {\n\n            c = ((((i&amp;0x8)==0)^((j&amp;0x8)==0)))*255;\n\n            checkImage[i][j][0] = (GLubyte) c;\n\n            checkImage[i][j][1] = (GLubyte) c;\n\n            checkImage[i][j][2] = (GLubyte) c;\n\n        }\n\n    }\n\n}\n\n\n\nint ImageLoad(char *filename, Image *image) {\n\n    FILE *file;\n\n    unsigned long size; // size of the image in bytes.\n\n    unsigned long i; // standard counter.\n\n    unsigned short int planes; // number of planes in image (must be 1)\n\n    unsigned short int bpp; // number of bits per pixel (must be 24)\n\n    char temp; // temporary color storage for bgr-rgb conversion.\n\n    // make sure the file is there.\n\n    if ((file = fopen(filename, \"rb\"))==NULL){\n\n        printf(\"File Not Found : %s\\n\",filename);\n\n        return 0;\n\n    }\n\n    // seek through the bmp header, up to the width/height:\n\n    fseek(file, 18, SEEK_CUR);\n\n    // read the width\n\n    if ((i = fread(&amp;image-&gt;sizeX, 4, 1, file)) != 1) {\n\n        printf(\"Error reading width from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    //printf(\"Width of %s: %lu\\n\", filename, image-&gt;sizeX);\n\n    // read the height\n\n    if ((i = fread(&amp;image-&gt;sizeY, 4, 1, file)) != 1) {\n\n        printf(\"Error reading height from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    //printf(\"Height of %s: %lu\\n\", filename, image-&gt;sizeY);\n\n    // calculate the size (assuming 24 bits or 3 bytes per pixel).\n\n    size = image-&gt;sizeX * image-&gt;sizeY * 3;\n\n    // read the planes\n\n    if ((fread(&amp;planes, 2, 1, file)) != 1) {\n\n        printf(\"Error reading planes from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    if (planes != 1) {\n\n        printf(\"Planes from %s is not 1: %u\\n\", filename, planes);\n\n        return 0;\n\n    }\n\n    // read the bitsperpixel\n\n    if ((i = fread(&amp;bpp, 2, 1, file)) != 1) {\n\n        printf(\"Error reading bpp from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    if (bpp != 24) {\n\n        printf(\"Bpp from %s is not 24: %u\\n\", filename, bpp);\n\n        return 0;\n\n    }\n\n    // seek past the rest of the bitmap header.\n\n    fseek(file, 24, SEEK_CUR);\n\n    // read the data.\n\n    image-&gt;data = (char *) malloc(size);\n\n    if (image-&gt;data == NULL) {\n\n        printf(\"Error allocating memory for color-corrected image data\");\n\n        return 0;\n\n    }\n\n    if ((i = fread(image-&gt;data, size, 1, file)) != 1) {\n\n        printf(\"Error reading image data from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    for (i=0;i&lt;size;i+=3) { // reverse all of the colors. (bgr -&gt; rgb)\n\n        temp = image-&gt;data[i];\n\n        image-&gt;data[i] = image-&gt;data[i+2];\n\n        image-&gt;data[i+2] = temp;\n\n    }\n\n    // we're done.\n\n    return 1;\n\n}\n\n\nImage * loadTexture(){\n\n    Image *image1;\n\n    // allocate space for texture\n\n    image1 = (Image *) malloc(sizeof(Image));\n\n    if (image1 == NULL) {\n\n        printf(\"Error allocating space for image\");\n\n        exit(0);\n\n    }\n\n    if (!ImageLoad(\"NeHe.bmp\", image1)) {\n\n        exit(1);\n\n    }\n\n    return image1;\n\n}\n\n\n\nvoid myinit(void)\n\n{\n\n    glClearColor (0.5, 0.5, 0.5, 0.0);\n\n    glEnable(GL_DEPTH_TEST);\n\n    glDepthFunc(GL_LESS);\n\n    Image *image1 = loadTexture();\n\n    if(image1 == NULL){\n\n        printf(\"Image was not returned from loadTexture\\n\");\n\n        exit(0);\n\n    }\n\n    makeCheckImage();\n\n    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);\n\n    // Create Texture\n\n    glGenTextures(2, texture);\n\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR); //scale linearly when image bigger than texture\n\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); //scale linearly when image smalled than texture\n\n    glTexImage2D(GL_TEXTURE_2D, 0, 3, image1-&gt;sizeX, image1-&gt;sizeY, 0,\n\n    GL_RGB, GL_UNSIGNED_BYTE, image1-&gt;data);\n\n    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);\n\n    glBindTexture(GL_TEXTURE_2D, texture[1]);\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n\n    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);\n\n    glTexImage2D(GL_TEXTURE_2D, 0, 3, checkImageWidth,\n\n    checkImageHeight, 0, GL_RGB, GL_UNSIGNED_BYTE,&amp;checkImage[0][0][0]);\n\n    glEnable(GL_TEXTURE_2D);\n\n    glShadeModel(GL_FLAT);\n\n}\n\n\n\nvoid display(void){\n\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    glBindTexture(GL_TEXTURE_2D, texture[1]);\n\n    glutSolidTeapot(1.0);\n\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n\n    glBegin(GL_QUADS);\n\n    glTexCoord2f(0.0, 0.0);\n\n    glVertex3f(1.0, -1.0, 0.0);\n\n    glTexCoord2f(1.0, 0.0);\n\n    glVertex3f(1.0, 1.0, 0.0);\n\n    glTexCoord2f(1.0, 1.0);\n\n    glVertex3f(2.41421, 1.0, -1.41421);\n\n    glTexCoord2f(0.0, 1.0);\n\n    glVertex3f(2.41421, -1.0, -1.41421);\n\n    glEnd();\n\n    glutSwapBuffers();\n\n}\n\n\nvoid myReshape(int w, int h){\n\n    glViewport(0, 0, w, h);\n\n    glMatrixMode(GL_PROJECTION);\n\n    glLoadIdentity();\n\n    gluPerspective(60.0, 1.0*(GLfloat)w/(GLfloat)h, 1.0, 30.0);\n\n    glMatrixMode(GL_MODELVIEW);\n\n    glLoadIdentity();\n\n    glTranslatef(0.0, 0.0, -3.6);\n\n}\n\n\nvoid keyboard (unsigned char key, int x, int y){\n\n    switch (key) {\n\n        case 27: // \u201cesc\u201d on keyboard\n\n        exit(0);\n\n        break;\n\n        default: // \u201ca\u201d on keyboard\n\n        break;\n\n    }\n\n}\n\n\nint main(int argc, char** argv)\n\n{\n\n    glutInit(&amp;argc, argv);\n\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);\n\n    glutCreateWindow(\"Texture Mapping - Programming Techniques\");\n\n    myinit();\n\n    glutReshapeFunc (myReshape);\n\n    glutDisplayFunc(display);\n\n    glutKeyboardFunc(keyboard);\n\n    glutMainLoop();\n\n    return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13533, "favorite_count": 1, "accepted_answer_id": 42043320, "answer_count": 2, "score": 2, "last_activity_date": 1486229291, "creation_date": 1485367005, "last_edit_date": 1485800081, "question_id": 41858408, "link": "https://stackoverflow.com/questions/41858408/how-to-load-texture-opengl", "title": "How to load texture Opengl?", "body": "<p>I found a useful post at this site, where some code is used to load a BMP\nThis code should load the header, read out infos, go further, read data, generate texture and bin it. But it doesnt work. What am I doing wrong ? </p>\n\n<p>Texture Declaration : </p>\n\n<pre><code>GLuint texture[1];\n</code></pre>\n\n<p>BMP Loading : </p>\n\n<pre><code>void LoadTexture(char *filename)\n{\n    FILE * file = fopen(filename,\"rb\");\n\n    unsigned char header[54];\n    unsigned int dataPos;\n    unsigned int imageSize;\n    unsigned int width, height;\n\n    fread(header,1,54,file);\n\n    dataPos    = *(int*)&amp;(header[0x0A]);\n    imageSize  = *(int*)&amp;(header[0x22]);\n    width      = *(int*)&amp;(header[0x12]);\n    height     = *(int*)&amp;(header[0x16]);\n\n    if (imageSize==0) {\n        imageSize=width*height*3; \n        }\n    if (dataPos==0) {\n        dataPos=54; \n    }\n    unsigned char data[imageSize];\n    fseek(file, SEEK_SET, 53);\n    fread(data,1,imageSize,file);\n\n    fclose(file);\n\n    glActiveTexture(GL_TEXTURE1);\n\n    glGenTextures(1, texture[0]);\n\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n\n    glTexImage2D(GL_TEXTURE_2D, 0,GL_RGB, width, height, 0, GL_BGR, GL_UNSIGNED_BYTE, data);\n\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);\n\n    glGenerateMipmap(GL_TEXTURE_2D);\n\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n}\n</code></pre>\n\n<p><strong>EDIT</strong> : I printed out some values read from the header. The header seems to be read properly.</p>\n\n<p>Drawing : </p>\n\n<pre><code>int DrawGLScene(GLvoid)                         \n{   \n    glLoadIdentity();\n        glEnable(GL_TEXTURE_2D);                        \n    glTranslatef(0.0f,0.0f,-5.0f);\n        glActiveTexture(GL_TEXTURE1);\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n\n    glBegin(GL_QUADS);\n\n        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);\n\n        glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f, -1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);\n        glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f, -1.0f);\n\n        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);\n        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f,  1.0f,  1.0f);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f,  1.0f,  1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);\n\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f, -1.0f, -1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f, -1.0f, -1.0f);\n        glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);\n\n        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f, -1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);\n        glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);\n\n        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f, -1.0f);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);\n    glEnd();\n    glFlush();\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    return 1;                                   \n}\n</code></pre>\n"}, {"tags": ["c", "makefile", "allegro5"], "comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485368699, "post_id": 41858268, "comment_id": 70901628, "body": "I really doubt that the <i>exact</i> same command works from the terminal.  You should move the library flags <code>-lallegro -lallegro_main</code> to the end of the link line, after the <code>.o</code> files."}, {"owner": {"reputation": 19, "user_id": 7408582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5437355d639fce97e5859ca3cb95378?s=128&d=identicon&r=PG&f=1", "display_name": "PJS", "link": "https://stackoverflow.com/users/7408582/pjs"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485368929, "post_id": 41858268, "comment_id": 70901745, "body": "It really works. I get an open screen for a moment whenever I run the program"}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 1, "creation_date": 1485369032, "post_id": 41858268, "comment_id": 70901813, "body": "I mean, the link command not the output program.  In any event, your libraries must come after the object files in the link line."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485369221, "post_id": 41858268, "comment_id": 70901917, "body": "Well, in addition the makefile isn&#39;t being used.  You can tell that because the link command isn&#39;t the command you wrote in the makefile.  What did you name the makefile?  It must be <code>Makefile</code> or <code>makefile</code>, or else you have to use <code>make -f mymakefile Blasteroids</code> if you choose a non-standard name."}, {"owner": {"reputation": 19, "user_id": 7408582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5437355d639fce97e5859ca3cb95378?s=128&d=identicon&r=PG&f=1", "display_name": "PJS", "link": "https://stackoverflow.com/users/7408582/pjs"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485420271, "post_id": 41858268, "comment_id": 70921325, "body": "Like this: gcc -Wall -I/usr/include/allegro5 -L/usr/lib Blasteroids.o -lallegro -lallegro_main -o Blasteroids? Or also after the -o? Anyway, my file is called makefile (I am using .txt extension however). Could that be the problem? Sorry if this seems simple but I just really want to understand this."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485442564, "post_id": 41858268, "comment_id": 70934326, "body": "Yes that&#39;s the problem.  The file must be called <code>makefile</code> or <code>Makefile</code>, with no extension.  UNIX systems don&#39;t really do extensions (I mean many files have them but they&#39;re not special like they are in Windows; in UNIX if they exist they&#39;re just part of the filename).  If you want to call your makefile <code>makefile.txt</code> instead you have to use <code>make -f makefile.txt Blasteroids</code> to tell make what the name of your file is explicitly."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485442651, "post_id": 41858268, "comment_id": 70934392, "body": "Regarding your other question, the order of the <code>-o</code> option doesn&#39;t matter.  The things that matter are the <code>-l</code> (library) options compared to each other and to your object files (<code>.o</code>).  Object files must all always come first before the <code>-l</code> options."}, {"owner": {"reputation": 19, "user_id": 7408582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5437355d639fce97e5859ca3cb95378?s=128&d=identicon&r=PG&f=1", "display_name": "PJS", "link": "https://stackoverflow.com/users/7408582/pjs"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485445849, "post_id": 41858268, "comment_id": 70936857, "body": "Ok&#233;, removing the extension fixed the problem. Do you want to post your solution as an answer? Else I&#39;ll accept the one down below."}], "answers": [{"comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485442815, "post_id": 41873824, "comment_id": 70934524, "body": "You should definitely not use <code>$^</code> in your compile rule, you should use <code>$&lt;</code>.  Also, your setting of <code>OBJ</code> is not right (you&#39;re adding <code>.0</code> not <code>.o</code>).  I recommend using the standard variables, which means <code>LDFLAGS</code> for linker flags like <code>-L</code> and <code>LDLIBS</code> for libraries like <code>-l</code>.  Personally I recommend against using fully-qualified paths for <code>CC</code> and <code>RM</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485463622, "post_id": 41873824, "comment_id": 70947486, "body": "@MadScientist, I agree with correcting keypunch errors that you mentioned. However, when more than one executable has the same name, If the executable that you want the makefile to use is not the first one found in cache or in the $PATH list, then the wrong one will be executed. That is why should always use &#39;fully-qualified&#39; paths for any OS functions, like gcc and rm and mv and chgrp and chmod and ... the standard macros: &#39;LDFLAGS&#39; and &#39;LDLIBS&#39; may not be exactly what you want in your makefile.  So you would be replacing them anyway.  Best to replace with unique macro names."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485463632, "post_id": 41873824, "comment_id": 70947492, "body": "Ill edit my answer to reflect the corrections to the keypunch errors,  Note: a leading <code>#</code> in a makefile line means the line is comments only"}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485533206, "post_id": 41873824, "comment_id": 70978721, "body": "You should use comment characters in column 1, not after the TAB, in a recipe line.  GNU make doesn&#39;t treat comment characters appearing in recipe lines specially, so that command will be passed to the shell as a command to run (the shell will treat it as a comment since it uses the same character)."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485533344, "post_id": 41873824, "comment_id": 70978818, "body": "The purpose of the standard variables is to allow users to override the variable settings to modify how the makefile rules behave.  IMO it&#39;s always better/more correct to re-use the standard variables (for their intended uses, of course, which these are) rather than invent new variables that people aren&#39;t familiar with and aren&#39;t sure how to use.  Also, certainly I&#39;m familiar with PATH and what it does; it&#39;s better to let the user use PATH to configure their system.  Maybe a system has <code>&#47;usr&#47;bin&#47;rm</code> and not <code>&#47;bin&#47;rm</code>: now your makefile breaks for no good reason.  However, of course YMMV."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485539580, "post_id": 41873824, "comment_id": 70982488, "body": "if the OS has a non standard configuration, then their makefiles need to be updated to match that non standard configuration.    If the makefile is to be used in both standard and non standard platforms then the make file should be expanded to check which configuration it is being run on."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1485541562, "post_id": 41873824, "comment_id": 70983545, "body": "As I said, I strongly disagree: this is one of the main purposes behind PATH, to allow these differences to be accommodated without a lot of hassle.  If you&#39;re really concerned about using the &quot;wrong&quot; versions (but why is it wrong if the user set up their PATH to use them?  Isn&#39;t that their prerogative?) then you can add something like <code>PATH := &#47;bin:$(PATH)</code> to your makefile so that the versions in <code>&#47;bin</code> will always be chosen first if they exist.  Anyway, it&#39;s up to you how you want to do things.  I don&#39;t agree, but they&#39;re your makefiles."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1485463385, "last_edit_date": 1485463385, "creation_date": 1485434956, "answer_id": 41873824, "question_id": 41858268, "link": "https://stackoverflow.com/questions/41858268/allegro5-makefile-error/41873824#41873824", "title": "Allegro5 makefile error", "body": "<p>something like the following makefile contents should do the job</p>\n\n<p>Notes:</p>\n\n<ol>\n<li>header files are only needed during the compile step</li>\n<li>library files are only needed during the link step</li>\n<li>best to have the first 'target' be 'all' so the makefile can be successfully executed without have to include a 'Blasteroids' parameter</li>\n<li>having a 'target' 'clean' makes it easy to clear away the items that will be rebuilt</li>\n<li>any 'target' that does not produce a file of the same name should be listed in a '.PSEUDO' operator</li>\n<li>the linker processes the linker command line items in the order listed on the command line. Therefore, list the objects, then the directories, then the library 'short' names</li>\n<li>list the header files at the end of the compile command line</li>\n<li>use macros (like CC and RM) that contain the full path to the executables so the correct executable is used, other wise the first item found in the $PATH that matches the name will be used.</li>\n<li>$^ is a built in macro that expands to the recipe dependencies</li>\n<li>$&lt; is a built in macro that expands to the first dependency</li>\n<li>$@ is a built in macro that expands to the recipe 'target'</li>\n<li>the <code>$(SRC:.c=?)</code> statements do character replacement on the extension of the file names contained in the <code>$(SRC)</code> macro</li>\n<li>the <code>%.o:%.c</code> recipe says for each source file to be compiled into a object file, use this recipe</li>\n<li>the '-ggdb' is so the maximum debug information will be available to the 'gdb' debugger.   </li>\n<li>this pattern of 'makefile' can be extensively used for other projects with only minor variations.  For more flexibility could also insert a recipe for automatically generating the header file dependencies, so would not need to list them individually in the compile recipe, but for now, the following makefile contents will do what you are currently trying to perform</li>\n</ol>\n\n<p>and now the makefile</p>\n\n<pre><code>CC := /bin/gcc\nRM := /bin/rm\n\nCFLAGS := -Wall -Wextra -pedantic -std=gnu99 -ggdb -c\nLFLAGS := -L/usr/lib -lallegro -lallegro_main\n\nSRC    := Blasteroids.c\n#OBJ    := $(SRC:.c=.0)\nOBJ    := $(SRC:.c=.o)\nNAME   := $(SRC:.c=)\n\n.PSEUDO: all clean\n\nall: $(NAME)\n\n%.o:%.c\n    #$(CC) $(CFLAGS) $^ -o $@ -I/usr/include/allegro5\n    $(CC) $(CFLAGS) $&lt; -o $@ -I/usr/include/allegro5\n\n$(NAME): $(OBJ)\n    $(CC) -ggdb  $^ -o $@  $(LFLAGS)\n\n.clean:\n    $(RM) -f $(NAME) $(OBJ)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": true, "score": 0, "last_activity_date": 1485456798, "creation_date": 1485456798, "answer_id": 41880848, "question_id": 41858268, "link": "https://stackoverflow.com/questions/41858268/allegro5-makefile-error/41880848#41880848", "title": "Allegro5 makefile error", "body": "<p>The <code>make</code> program looks for files named <code>makefile</code> or <code>Makefile</code>, with no extension.  If you name your makefile something else, such as <code>makefile.txt</code>, then <code>make</code> can't find it and it will just use its own built-in rules which don't know anything about extra flags ro libraries that may be needed.</p>\n\n<p>So either rename your makefile to <code>makefile</code> or <code>Makefile</code>, or else specify the name of your makefile explicitly on the command line when you run make, such as <code>make -f makefile.txt Blasteroids</code>.</p>\n\n<p>Secondarily, if you don't specify a target on the command line then make will always build the first target.  So, if you re-order your targets so that the one you usually want to build (in this case <code>Blasteroids</code>) is first, then you can just run <code>make</code> with no arguments and it will build that target.</p>\n\n<p>Unlike a programming language, the order of target definition doesn't matter to make: e.g., you don't have to define rules for all the object files first before the link line.  Make reads the entire file and constructs an internal graph of prerequisite relationships, and nodes and edges in this graph can be added in any order.</p>\n"}], "owner": {"reputation": 19, "user_id": 7408582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5437355d639fce97e5859ca3cb95378?s=128&d=identicon&r=PG&f=1", "display_name": "PJS", "link": "https://stackoverflow.com/users/7408582/pjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 41880848, "answer_count": 2, "score": 0, "last_activity_date": 1485463385, "creation_date": 1485366587, "last_edit_date": 1485369088, "question_id": 41858268, "link": "https://stackoverflow.com/questions/41858268/allegro5-makefile-error", "title": "Allegro5 makefile error", "body": "<p>note: this is the final exercise in the Head First C book.</p>\n\n<p>I have the following problem. I am trying to make a game using the allegro5.2 libraries. I want to use multiple .c files in order to organize everything neatly. However, I have problems compiling my programs using a makefile. I am trying to compile this easy program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;allegro5/allegro.h&gt;\n\nconst int disp_h = 640;\nconst int disp_w = 480;\n\nint main(int argc, char **argv) {\n\nALLEGRO_DISPLAY *display;\n\nif(!al_init()) {\n    fprintf(stderr, \"failed to initialize allegro!\\n\");\n    return -1;\n}\n\ndisplay = al_create_display(disp_h,disp_w);\nif(!display) {\n    fprintf(stderr, \"failed to create display!\\n\");\n    return -1;\n}\n\nal_rest(0.4);\nal_destroy_display(display);\n\nprintf(\"bye bye!!!\\n\");\n\nreturn 0;\n}\n</code></pre>\n\n<p>The makefile is:</p>\n\n<pre><code>Blasteroids.o: allegro.h Blasteroids.c\n    gcc -Wall -c Blasteroids.c\n\nBlasteroids: Blasteroids.o allegro.h\n    gcc -Wall -I/usr/include/allegro5 -L/usr/lib -lallegro -lallegro_main Blasteroids.o -o Blasteroids\n</code></pre>\n\n<p>Now, when I use the terminal this compiles fine, but now I seem to have a problem. The error given by the terminal (using the command make Blasteroids) is: </p>\n\n<pre><code>cc   Blasteroids.o   -o Blasteroids\nUndefined symbols for architecture x86_64:\n  \"_al_create_display\", referenced from:\n      __al_mangled_main in Blasteroids.o\n  \"_al_destroy_display\", referenced from:\n      __al_mangled_main in Blasteroids.o\n  \"_al_install_system\", referenced from:\n      __al_mangled_main in Blasteroids.o\n  \"_al_rest\", referenced from:\n      __al_mangled_main in Blasteroids.o\n  \"_main\", referenced from:\n     implicit entry/start for main executable\n     (maybe you meant: __al_mangled_main)\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [Blasteroids] Error 1\n</code></pre>\n\n<p>I don't know what I am doing wrong and I am very new to these things. I have searched for examples in makefiles, but they give me code like I am using now. \nI now I can just use a single line for the above program, but the idea is that I want to make my own .c files, make them into .o files and then link them together. Hence the makefile.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1485366592, "post_id": 41858212, "comment_id": 70900371, "body": "<code>amount&#47;array[noteNumber-1]</code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1485366657, "post_id": 41858212, "comment_id": 70900396, "body": "Define &quot;it is not working&quot;.  Do you get different output than you expect?  If so, then the input you provide, the output you expect, and the output you actually get are appropos additions to your question."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1485366970, "post_id": 41858212, "comment_id": 70900596, "body": "last element will be array[noteNumber - 1 ] . It would be helpful if you define the problem more clearl and tell us what is &quot; not working &quot; in your solution."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1485368228, "post_id": 41858212, "comment_id": 70901325, "body": "Your compiler was very probably nice enough to greet you with a warning on the <code>i = j</code> line - Why did you ignore that?"}, {"owner": {"reputation": 25, "user_id": 7387026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d286221cd7e78fbabc774932653db62?s=128&d=identicon&r=PG&f=1", "display_name": "Rubel Hosen", "link": "https://stackoverflow.com/users/7387026/rubel-hosen"}, "edited": false, "score": 0, "creation_date": 1485368589, "post_id": 41858212, "comment_id": 70901564, "body": "i am new to programming. I did not understand first. But now i do."}], "answers": [{"tags": [], "owner": {"reputation": 439, "user_id": 3888761, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fa27c68f2b7df5236a737d1639a0f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/3888761/richard"}, "is_accepted": false, "score": 2, "last_activity_date": 1485367014, "last_edit_date": 1485367014, "creation_date": 1485366585, "answer_id": 41858267, "question_id": 41858212, "link": "https://stackoverflow.com/questions/41858212/how-to-get-the-value-of-the-last-element-of-an-array/41858267#41858267", "title": "How to get the value of the last element of an array?", "body": "<p>If <code>noteNumber</code> is the size of the array, then the last Element will be </p>\n\n<pre><code>array[noteNumber - 1]\n</code></pre>\n\n<p>As far as I can see, <code>j</code> isn't even initialized?</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1485366976, "last_edit_date": 1485366976, "creation_date": 1485366643, "answer_id": 41858280, "question_id": 41858212, "link": "https://stackoverflow.com/questions/41858212/how-to-get-the-value-of-the-last-element-of-an-array/41858280#41858280", "title": "How to get the value of the last element of an array?", "body": "<p>As I can see</p>\n\n<pre><code>  i = j;\n</code></pre>\n\n<p>is wrong as you're using the value of an uninitialized variable to assign to another. This does not make any sense and can lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>C arrays use 0-based indexing, so for an array of size <code>n</code>, the last index would be <code>n-1</code>.</p>\n\n<p>That said, never use an unbound index for a statically defined array, always perform the bound checking before using the index.</p>\n"}, {"comments": [{"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 25, "user_id": 7387026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d286221cd7e78fbabc774932653db62?s=128&d=identicon&r=PG&f=1", "display_name": "Rubel Hosen", "link": "https://stackoverflow.com/users/7387026/rubel-hosen"}, "edited": false, "score": 0, "creation_date": 1485368336, "post_id": 41858451, "comment_id": 70901394, "body": "@RubelHosen Thanks A lot , i was just a beginner like you , and i still am , so i understand various problem we go through at starting. Please Read The Book C programming a modern approach 2 edition, it is very nice book or you could check <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/562303/&hellip;</a>"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 25, "user_id": 7387026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d286221cd7e78fbabc774932653db62?s=128&d=identicon&r=PG&f=1", "display_name": "Rubel Hosen", "link": "https://stackoverflow.com/users/7387026/rubel-hosen"}, "edited": false, "score": 0, "creation_date": 1485368434, "post_id": 41858451, "comment_id": 70901457, "body": "@RubelHosen And You can also watch these <a href=\"http://nptel.ac.in/courses/106104128/\" rel=\"nofollow noreferrer\">videos</a> for C understanding C Language."}], "tags": [], "owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "is_accepted": true, "score": 1, "last_activity_date": 1485367511, "last_edit_date": 1485367511, "creation_date": 1485367180, "answer_id": 41858451, "question_id": 41858212, "link": "https://stackoverflow.com/questions/41858212/how-to-get-the-value-of-the-last-element-of-an-array/41858451#41858451", "title": "How to get the value of the last element of an array?", "body": "<p>You are having a line </p>\n\n<pre><code> i = j;\n</code></pre>\n\n<p><code>j</code> is not even initialized so you are doing a mistake here , maybe what \n you wanted was  </p>\n\n<pre><code> j = i - 1   \n</code></pre>\n\n<p>As <code>i</code> would have incremented to <code>noteNumber</code> in your <code>for</code> loop and array with number of elements <code>n</code> has last element index <code>n-1</code> because index starts from <code>0</code> rather than 1.</p>\n\n<p>So Proper Code Would Be</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(){\n\nint i, j, k, noteNumber, array[100], amount, result;\n\nprintf(\"Enter the number of the notes: \\n\");\nscanf(\"%d\", &amp;noteNumber);\n\nprintf(\"Enter the value of %d notes: \\n\", noteNumber);\nfor(i = 0; i &lt; noteNumber; i++){\n    scanf(\"%d\", &amp;array[i]);\n}\n\nprintf(\"Enter the amount: \\n\");\nscanf(\"%d\", &amp;amount);\n\nj = i - 1; // Line Changed\n\n    if(amount / array[j] == 0){\n    printf(\"Minimum %d number of is needed\", (amount/array[j]));\n    printf(\"The value of each note is %d\", array[j]);\n}\n\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7387026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d286221cd7e78fbabc774932653db62?s=128&d=identicon&r=PG&f=1", "display_name": "Rubel Hosen", "link": "https://stackoverflow.com/users/7387026/rubel-hosen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 41858451, "answer_count": 3, "score": 1, "last_activity_date": 1485367511, "creation_date": 1485366418, "last_edit_date": 1485366988, "question_id": 41858212, "link": "https://stackoverflow.com/questions/41858212/how-to-get-the-value-of-the-last-element-of-an-array", "title": "How to get the value of the last element of an array?", "body": "<p>Observe the following code. I want to divide the amount by the value of the last element in the array. I have tried in the following way but it is not working. Can anyone tell me what is the proper way to do it?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int i, j, k, noteNumber, array[100], amount, result;\n\n    printf(\"Enter the number of the notes: \\n\");\n    scanf(\"%d\", &amp;noteNumber);\n\n    printf(\"Enter the value of %d notes: \\n\", noteNumber);\n    for(i = 0; i &lt; noteNumber; i++){\n        scanf(\"%d\", &amp;array[i]);\n    }\n\n    printf(\"Enter the amount: \\n\");\n    scanf(\"%d\", &amp;amount);\n\n    i = j;\n\n        if(amount / array[j] == 0){\n        printf(\"Minimum %d number of is needed\", (amount/array[j]));\n        printf(\"The value of each note is %d\", array[j]);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "mono"], "comments": [{"owner": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485366110, "post_id": 41858112, "comment_id": 70900073, "body": "add the c# code also"}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485512834, "post_id": 41858112, "comment_id": 70965508, "body": "The c# code opens a SQL connection, calls a stored procedure, and returns a value. Works fine running in .Net, Core CLR and Mono, just blows up when called via embedded mono, and when not in the debugger."}, {"owner": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485513259, "post_id": 41858112, "comment_id": 70965748, "body": "The problem here is the exception is arisen in the managed side, at some point it does an TCP connection with something (seems to be the SQL connection) and a parameter passed to the socket is incorrect. It seems you&#39;re using the Mono.Data.Tds provider which is no longer mantained and deprecated, I suspect the problem comes from there. Are you using SQL Server or Sybase? If it&#39;s SQL server if you use System.Data.SqlClient provider it probably will work as expected."}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485515692, "post_id": 41858112, "comment_id": 70967225, "body": "I haven&#39;t explicitly used Mono.Data.Tds, the C# code is all written against Microsoft libraries, I&#39;m using System.Data and System.Data.SqlClient"}, {"owner": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485515943, "post_id": 41858112, "comment_id": 70967375, "body": "Gosh, you&#39;re right, SqlClient uses Tds as the underlying connector... the documentation is awful on mono... What version of mono do you have installed?"}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485516444, "post_id": 41858112, "comment_id": 70967697, "body": "4.6.2.16 - latest download as of last week"}, {"owner": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485517272, "post_id": 41858112, "comment_id": 70968182, "body": "Can you post from the C# code the relevant lines to the connection creation? Seeing the connection string (obviously hidding server/password) can shed some light to your problem."}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485766274, "post_id": 41858112, "comment_id": 71044021, "body": "Data Source=MyServer.MyDomain.com;Database=MyDb;User Id=app_user;Password=somePassword123;Application Name=MyApp;Connect Timeout=150;"}, {"owner": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485857170, "post_id": 41858112, "comment_id": 71088317, "body": "Just as a long shot, try to use IP address instead of domain name."}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485869196, "post_id": 41858112, "comment_id": 71096212, "body": "More weird behaviour - I added the following to my C code to force a call out to the debugger just before the offending call: __asm__(&quot;int3&quot;);"}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485869257, "post_id": 41858112, "comment_id": 71096249, "body": "The DB call succeeds in this case too - attaching a Visual Studio 2015 debugger"}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485869305, "post_id": 41858112, "comment_id": 71096279, "body": "Same behaviour using the IP address too - fails as long as I don&#39;t have a debugger attached"}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485871039, "post_id": 41858112, "comment_id": 71097472, "body": "Basically, it doesn&#39;t seem to matter what debugger I have attached, as long as there is one"}, {"owner": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485873885, "post_id": 41858112, "comment_id": 71099502, "body": "That&#39;s really odd. Is the assembly compiled for debug or for release? And x64 or x86? Also, asking on the mono mailing list will give you a better chance to get to someone which had this problem."}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485954471, "post_id": 41858112, "comment_id": 71138691, "body": "It&#39;s compiled for release, x86. I&#39;ve tried all variations, x86, x64, release and debug, all have the same behaviour. I&#39;ve asked on the mailing list, it&#39;s filled with spam, and very few replies. :-( - <a href=\"http://mono.1490590.n4.nabble.com/Debugging-Embedded-Mono-in-Python-C-extension-td4669812.html\" rel=\"nofollow noreferrer\">mono.1490590.n4.nabble.com/&hellip;</a>"}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1485954536, "post_id": 41858112, "comment_id": 71138746, "body": "To be clear, no-one has replied to my thread of 25-Jan-2017 - the thread only has 8 views, most of those mine."}, {"owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1486038836, "post_id": 41858112, "comment_id": 71180887, "body": "WIth an altered command line it now works 2 or 3 times out of ten, but when it fails, same error. I&#39;ve also attached the C# code."}], "owner": {"reputation": 153, "user_id": 1259472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjUbr.png?s=128&g=1", "display_name": "Cronan", "link": "https://stackoverflow.com/users/1259472/cronan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503647966, "creation_date": 1485366012, "last_edit_date": 1486038591, "question_id": 41858112, "link": "https://stackoverflow.com/questions/41858112/exception-accessing-databases-in-embedded-mono", "title": "Exception accessing databases in embedded mono", "body": "<p>I've written a program in C that uses Embedded Mono calls to my C# library. \nI've got it working, but am having a problem with making SQL calls across my network. </p>\n\n<p>Running normally, I get the following exception when I try to connect to the database: </p>\n\n<blockquote>\n  <p>System.ArgumentException: Value does not fall within the expected\n  range.\\r\\n  at System.Net.Sockets.Socket.SetSocketOption \n  (System.Net.Sockets.SocketOptionLevel optionLevel,\n  System.Net.Sockets.SocketOptionName optionName, System.Int32\n  optionValue)  [0x00061] in &lt;5071a6e4a4564e19a2eda0f53e42f9bd>:0 \\r\\n \n  at Mono.Data.Tds.Protocol.TdsComm..ctor (System.String dataSource, \n  System.Int32 port, System.Int32 packetSize, System.Int32 timeout,\n  Mono.Data.Tds.Protocol.TdsVersion tdsVersion)</p>\n</blockquote>\n\n<p>What is strange, is that when I run this in <strong>gdb</strong> (attempting to get a handle on what values are being passed, etc), everything works fine, and my database call succeeds. </p>\n\n<p>Does anyone have any ideas? </p>\n\n<p>I'm running in Windows 7, and my C code is compiled using gcc from minGW:</p>\n\n<p>gcc test.c -mms-bitfields -ID:/Mono/include/mono-2.0 -LD:/Mono/lib -lmono-2.0 -mms-bitfields -lws2_32 -lpsapi -lole32 -lwinmm -loleaut32 -ladvapi32 -lversion</p>\n\n<p>Update:\nUsing the following connection string, it now works 2 times out of 10:\nServer=192.168.1.54;Database=MyDb;User Id=my_user;Password=mypwd123;Integrated Security=False</p>\n\n<pre><code>#include &lt;mono/jit/jit.h&gt;  \n#include &lt;mono/metadata/object.h&gt;  \n#include &lt;mono/metadata/environment.h&gt;  \n#include &lt;mono/metadata/assembly.h&gt;  \n#include &lt;mono/metadata/debug-helpers.h&gt;  \n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic MonoMethod *getMethod(char* methodName) \n{ \n        static MonoImage *img; \n\n        if(img == NULL) \n        { \n                MonoDomain *domain = mono_jit_init(\"my.dll\"); \n\n                if(domain == NULL) \n                { \n                        return NULL; \n                } \n\n                MonoAssembly *assembly = mono_domain_assembly_open(domain, \"my.dll\"); \n\n                if(assembly == NULL) \n                { \n                        return NULL; \n                } \n\n                img = mono_assembly_get_image(assembly); \n\n                if(img == NULL) \n                { \n                        return NULL; \n                } \n        } \n\n        MonoMethodDesc *desc = mono_method_desc_new(methodName, true); \n\n        if(desc == NULL) \n                return NULL; \n\n    return mono_method_desc_search_in_image(desc, img); \n} \n\nint main(void) \n{ \n        MonoMethod *method = getMethod(\"MyNs.MyClass:MyFunc(string,string)\"); \n\n        if(method == NULL) \n        { \n                puts(\"Method was null\"); \n                return 1; \n        } \n\n        MonoObject* ex = NULL; \n        MonoObject *res = mono_runtime_invoke(method, NULL, NULL, &amp;ex); \n\n        if(ex != NULL) \n        { \n                char *s = mono_string_to_utf8(mono_object_to_string(ex, NULL)); \n                puts(s); \n                return 2; \n        } \n\n        if(res == NULL) \n        { \n                puts(\"No result\"); \n                return 3; \n        } \n\n        char *rv = mono_string_to_utf8(mono_object_to_string(res, NULL)); \n        puts(rv); \n        return 0; \n} \n</code></pre>\n\n<p>C# code:</p>\n\n<pre><code>public static string MyFunc(string connectionString, string query)\n        {\n            using (SqlConnection connection = new SqlConnection(connectionString))\n            {\n                SqlCommand command = new SqlCommand(query, connection);\n                connection.Open();\n                using (SqlDataReader reader = command.ExecuteReader())\n                {\n                    while (reader.Read())\n                        return reader.GetString(0);\n                }\n            }\n\n            return \"No data found\";\n        }\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1485365664, "post_id": 41857966, "comment_id": 70899784, "body": "have you initialized all of <code>a</code> s elements? I.E a <code>int* a[16][5] = {NULL};</code> otherwise your computer may currently be <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">spray painting your cat purple</a>."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1485365774, "post_id": 41857966, "comment_id": 70899849, "body": "<code>auto ptr = a;</code> should do the job, so your <code>ptr</code> will have the correct type."}, {"owner": {"reputation": 31, "user_id": 7434807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ebac3c4c63ee546e61211ad8065d58?s=128&d=identicon&r=PG&f=1", "display_name": "dspverden", "link": "https://stackoverflow.com/users/7434807/dspverden"}, "edited": false, "score": 0, "creation_date": 1485366090, "post_id": 41857966, "comment_id": 70900056, "body": "compiler does not know auto"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1485366258, "post_id": 41857966, "comment_id": 70900156, "body": "C and C++ are different languages.  Choose <b>one</b>.  That your compiler does not support <code>auto</code> as a type specifier suggests that C is the one you want to choose."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7434807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ebac3c4c63ee546e61211ad8065d58?s=128&d=identicon&r=PG&f=1", "display_name": "dspverden", "link": "https://stackoverflow.com/users/7434807/dspverden"}, "edited": false, "score": 0, "creation_date": 1485368657, "post_id": 41858192, "comment_id": 70901598, "body": "Ok. But what is the size of ptr in memory then? sizeof(int*) or 128*sizeof(int*)?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 31, "user_id": 7434807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ebac3c4c63ee546e61211ad8065d58?s=128&d=identicon&r=PG&f=1", "display_name": "dspverden", "link": "https://stackoverflow.com/users/7434807/dspverden"}, "edited": false, "score": 0, "creation_date": 1485371497, "post_id": 41858192, "comment_id": 70903280, "body": "@dspverden You can check easily by printing <code>sizeof(ptr)</code>. (It&#39;s 99.99% certain that it will be the same as <code>sizeof(int*)</code>.)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 31, "user_id": 7434807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ebac3c4c63ee546e61211ad8065d58?s=128&d=identicon&r=PG&f=1", "display_name": "dspverden", "link": "https://stackoverflow.com/users/7434807/dspverden"}, "edited": false, "score": 0, "creation_date": 1485379525, "post_id": 41858192, "comment_id": 70907618, "body": "@dspverden It&#39;s extremely unlikely that an embedded device has pointers of varying size. (Only very esoteric hardware does it.) Unless your documentation states otherwise, it&#39;s safe to assume that <code>sizeof(T*) == sizeof(U*)</code> for all types <code>T</code> and <code>U</code>."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 2, "last_activity_date": 1485366340, "creation_date": 1485366340, "answer_id": 41858192, "question_id": 41857966, "link": "https://stackoverflow.com/questions/41857966/c-pointer-to-2-dimensional-array-of-pointers/41858192#41858192", "title": "C: Pointer to 2-dimensional array of pointers", "body": "<p>A pointer to the first element of the array (which is what you want) could be declared as </p>\n\n<pre><code>int* (*ptr)[128];\n</code></pre>\n\n<p>A pointer to the array itself would be</p>\n\n<pre><code>int* (*ptr)[16][128];\n</code></pre>\n\n<p>and is not what you're looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "is_accepted": false, "score": 1, "last_activity_date": 1485366404, "creation_date": 1485366404, "answer_id": 41858208, "question_id": 41857966, "link": "https://stackoverflow.com/questions/41857966/c-pointer-to-2-dimensional-array-of-pointers/41858208#41858208", "title": "C: Pointer to 2-dimensional array of pointers", "body": "<p>Thing you seem to want:</p>\n\n<pre><code>int* (*ptr)[128] = a; \n</code></pre>\n\n<p>Actual pointer to the array:</p>\n\n<pre><code>int* (*ptr)[16][128] = &amp;a;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 3856983, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a67a988dace3ed748d1aec31a925c2f8?s=128&d=identicon&r=PG&f=1", "display_name": "MountainLogic", "link": "https://stackoverflow.com/users/3856983/mountainlogic"}, "is_accepted": false, "score": 0, "last_activity_date": 1485366832, "last_edit_date": 1495541806, "creation_date": 1485366832, "answer_id": 41858336, "question_id": 41857966, "link": "https://stackoverflow.com/questions/41857966/c-pointer-to-2-dimensional-array-of-pointers/41858336#41858336", "title": "C: Pointer to 2-dimensional array of pointers", "body": "<p>To start with array pointer basics for a 1D array, [tutorialspoint][1] has a very easy to ready description.  From their example:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\nint main () {\n\n   /* an array with 5 elements */\n   double balance[5] = {1000.0, 2.0, 3.4, 17.0, 50.0};\n   double *p;\n   int i;\n\n   p = balance;                                 //Here the pointer is assign to the start of the array\n\n   /* output each array element's value */\n   printf( \"Array values using pointer\\n\");\n\n   for ( i = 0; i &lt; 5; i++ ) {\n      printf(\"*(p + %d) : %f\\n\",  i, *(p + i) );\n   }\n\n   printf( \"Array values using balance as address\\n\");\n\n   for ( i = 0; i &lt; 5; i++ ) {\n      printf(\"*(balance + %d) : %f\\n\",  i, *(balance + i) );    // Note the post increment\n   }\n\n   return 0;\n}\n</code></pre>\n\n<p>There are a couple of relavent Stack overflow answers that describe 2D arrays:\n<a href=\"https://stackoverflow.com/questions/13554244/how-to-use-pointer-expressions-to-access-elements-of-a-two-dimensional-array-in\">How to use pointer expressions to access elements of a two-dimensional array in C?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/16001803/pointer-to-pointer-dynamic-two-dimensional-array\">Pointer-to-pointer dynamic two-dimensional array</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/10165627/how-to-assign-two-dimensional-array-to-pointer\">how to assign two dimensional array to **pointer ?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/15427967/representing-a-two-dimensional-array-assignment-as-a-pointer-math\">Representing a two-dimensional array assignment as a pointer math?</a></p>\n\n<pre><code>  [1]: https://www.tutorialspoint.com/cprogramming/c_pointer_to_an_array.htm\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7434807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ebac3c4c63ee546e61211ad8065d58?s=128&d=identicon&r=PG&f=1", "display_name": "dspverden", "link": "https://stackoverflow.com/users/7434807/dspverden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1485366832, "creation_date": 1485365516, "last_edit_date": 1485366543, "question_id": 41857966, "link": "https://stackoverflow.com/questions/41857966/c-pointer-to-2-dimensional-array-of-pointers", "title": "C: Pointer to 2-dimensional array of pointers", "body": "<p>I am trying to solve the following issue but could not succeed yet:</p>\n\n<p>I have a two-diwmensional array of pointers:</p>\n\n<pre><code>int* a[16][128];\n</code></pre>\n\n<p>Now I want to make a pointer to this array in that way that I can use pointer arithmetic on it.\nThus, something like this:</p>\n\n<pre><code>ptr = a;\nif( ptr[6][4] == NULL )\n  ptr[6][4] = another_ptr_to_int;\n</code></pre>\n\n<p>I tried already some variations but it either fails then on the first line or on the if condition.</p>\n\n<p>So, how can it be solved? I would like to avoid template classes etc. Code is for a time critical part of an embedded application, and memory is very limited. Thus, I would like <code>ptr</code> to be only <code>sizeof(int*)</code> bytes long.</p>\n"}, {"tags": ["c", "math.h"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 3, "creation_date": 1485365043, "post_id": 41857794, "comment_id": 70899386, "body": "The operator % may be applied only for integers in C."}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 5, "creation_date": 1485365059, "post_id": 41857794, "comment_id": 70899393, "body": "duplicate of <a href=\"http://stackoverflow.com/questions/11243632/versus-fmod-for-calculating-modulus\" title=\"versus fmod for calculating modulus\">stackoverflow.com/questions/11243632/&hellip;</a>"}, {"owner": {"reputation": 2704, "user_id": 6794772, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2d8db2b0d48b6e1b25657fda9ec4ae02?s=128&d=identicon&r=PG&f=1", "display_name": "Dellowar", "link": "https://stackoverflow.com/users/6794772/dellowar"}, "edited": false, "score": 1, "creation_date": 1485365847, "post_id": 41857794, "comment_id": 70899897, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11243632/versus-fmod-for-calculating-modulus\">% versus FMOD for calculating modulus</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "is_accepted": false, "score": 5, "last_activity_date": 1485365092, "creation_date": 1485365092, "answer_id": 41857840, "question_id": 41857794, "link": "https://stackoverflow.com/questions/41857794/why-do-both-and-fmod-exist-in-c/41857840#41857840", "title": "Why do both % and fmod() exist in C", "body": "<p>It's because <code>%</code> is an integer operator, and <code>fmod</code> stands for <code>floatmod</code> and is used for floating point numbers.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1580230361, "post_id": 41857870, "comment_id": 106026190, "body": "<code>a%b</code> may differ from <i>integer modulo</i> expectations when <code>a</code> or <code>b</code> are negative.   <a href=\"https://stackoverflow.com/q/13683563/2410359\">What&#39;s the difference between \u201cmod\u201d and \u201cremainder\u201d?</a>.  Like-wise for <code>double fmod(double)</code>."}], "tags": [], "owner": {"reputation": 981, "user_id": 7470104, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153573028008584/picture?type=large", "display_name": "Christoph Bimminger", "link": "https://stackoverflow.com/users/7470104/christoph-bimminger"}, "is_accepted": false, "score": 1, "last_activity_date": 1485365189, "creation_date": 1485365189, "answer_id": 41857870, "question_id": 41857794, "link": "https://stackoverflow.com/questions/41857794/why-do-both-and-fmod-exist-in-c/41857870#41857870", "title": "Why do both % and fmod() exist in C", "body": "<p>% is just integer modulo</p>\n\n<p>fmod is float modulo and can be used as described in MSDN.\n<a href=\"https://msdn.microsoft.com/en-us/library/20dckbeh.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/20dckbeh.aspx</a></p>\n"}, {"comments": [{"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485371057, "post_id": 41857922, "comment_id": 70903008, "body": "@chux, thanks for pointing it out. I have edited my answer to fix that additional note."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1485371560, "post_id": 41857922, "comment_id": 70903318, "body": "New explanation also has holes.  Suggest &quot;The <code>fmod</code> functions return the value <code>x</code> \u2212 n<code>y</code>, for some integer n such that, if <code>y</code> is nonzero, the result has the same sign as <code>x</code> and magnitude less than the magnitude of <code>y</code>....&quot;  C11 &#167;7.12.10.1 3"}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485372200, "post_id": 41857922, "comment_id": 70903680, "body": "Thanks @chux for showing the documentation on how fmod calculates the remainder of a floating point division. I have updated my answer yet again to revise the &quot;additional note&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485373093, "post_id": 41857922, "comment_id": 70904133, "body": "Hmmm, interesting.  Your link says &quot;<i>less or equal</i> to y in magnitude.&quot; and the C spec says &quot;<i>less</i> than the magnitude of y.&quot;  Seems like the <i>equal</i> part is questionable, as a zero could be returned rather than a value equal to <code>y</code>."}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485374139, "post_id": 41857922, "comment_id": 70904724, "body": "@chux, I would agree to your comment above. In Mathematics, a remainder is always less than the divisor. It cannot be equal to a divisor."}], "tags": [], "owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "is_accepted": true, "score": 8, "last_activity_date": 1485372169, "last_edit_date": 1485372169, "creation_date": 1485365374, "answer_id": 41857922, "question_id": 41857794, "link": "https://stackoverflow.com/questions/41857794/why-do-both-and-fmod-exist-in-c/41857922#41857922", "title": "Why do both % and fmod() exist in C", "body": "<p><code>modulo division</code> using <code>%</code> operator in C only works for integer operands and returns an integer remainder of the division.\nThe function <code>fmod</code> accepts <code>double</code> as arguments meaning that it accepts non-integer values and returns the remainder of the division.</p>\n\n<p>Additional note on fmod: how is the remainder calculated in case of <code>double</code> operand? Thanks @chux for showing the <a href=\"http://en.cppreference.com/w/c/numeric/math/fmod\" rel=\"noreferrer\">documentation </a> on how fmod calculates the remainder of a floating point division.</p>\n\n<blockquote>\n  <p>The floating-point remainder of the division operation x/y calculated\n  by this function is exactly the value x - n*y, where n is x/y with its\n  fractional part truncated.</p>\n  \n  <p>The returned value has the same sign as x and is less or equal to y in\n  magnitude.</p>\n</blockquote>\n\n<p>On the other hand, when the modulo division binary operator (%) was first designed, it was determined by the language designers that it would only support operands of 'integer' types because technically speaking, the notion of 'remainder' in mathematics only applies to integer divisions. </p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1485368765, "last_edit_date": 1495539987, "creation_date": 1485368765, "answer_id": 41858897, "question_id": 41857794, "link": "https://stackoverflow.com/questions/41857794/why-do-both-and-fmod-exist-in-c/41858897#41858897", "title": "Why do both % and fmod() exist in C", "body": "<blockquote>\n  <p>Why do both exist?</p>\n</blockquote>\n\n<p>Because they <em>may</em> have computed different results, even with the same values.  These differences may occur with negative values.  In essence <code>fmod()</code> and <code>%</code> <em>were</em> different mathematical functions.</p>\n\n<p><code>fmod(x,y)</code>, since C89, had the result \"the result has the same sign as x and magnitude less than the magnitude of y\".</p>\n\n<p><code>i%j</code> was not so singularly defined.  See <a href=\"https://en.wikipedia.org/wiki/Modulo_operation#Remainder_calculation_for_the_modulo_operation\" rel=\"nofollow noreferrer\">Remainder calculation for the modulo operation</a>.  This allow code to use existing variant processors effectively.  The <code>div()</code> function was created to address this variability. <a href=\"https://stackoverflow.com/a/11726016/2410359\">Ref</a></p>\n\n<p>By C99 they compute the same for the same values.  Future C could allow <code>123.4 % 56.7</code></p>\n"}], "owner": {"reputation": 103, "user_id": 5953298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ndJYIBV5PAo/AAAAAAAAAAI/AAAAAAAAACg/2I6wnOQENTw/photo.jpg?sz=128", "display_name": "John Harlan", "link": "https://stackoverflow.com/users/5953298/john-harlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1477, "favorite_count": 0, "accepted_answer_id": 41857922, "answer_count": 4, "score": 6, "last_activity_date": 1485372169, "creation_date": 1485364968, "question_id": 41857794, "link": "https://stackoverflow.com/questions/41857794/why-do-both-and-fmod-exist-in-c", "title": "Why do both % and fmod() exist in C", "body": "<p>I took a quiz in my CS class today and got a question about the modulo operator wrong because I didn't know about the availability of % in C, I've been using <code>fmod()</code>. Why do both exist? Is one better/faster or do they just deal with different data types?</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 7457979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6d03a2e42b5561f986204e14c04e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeonghyeon Lee", "link": "https://stackoverflow.com/users/7457979/jeonghyeon-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1485366050, "last_edit_date": 1485366050, "creation_date": 1485365540, "answer_id": 41857972, "question_id": 41857689, "link": "https://stackoverflow.com/questions/41857689/taking-arguments-from-command-line-and-putting-them-in-regular-expression-statme/41857972#41857972", "title": "taking arguments from command line and putting them in regular expression statments", "body": "<p>If you give <code>a-9</code> as the argument, the program won't work correctly because the ascii code values for numeric letters (<code>'0'</code> to <code>'9'</code>) are all smaller than those for lowercase roman alphabets (<code>'a'</code> to <code>'z'</code>).</p>\n\n<p>For example, the value of <code>'0'</code> is 0x30 ('1' is 0x31 and so on), and 'a' is 0x61 ('b' is 0x62, and so on), so an if statement with the condition <code>(a &gt;= 'a' &amp;&amp; a &lt;= '9')</code> will not be executed at all.</p>\n\n<p>And the condition expression of your <code>if</code> statement will evaluate to <code>0</code> when the char being tested equals <code>argument[0]</code> or <code>argument[2]</code>. You might want to change that.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 6092805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df625f231847451dc757a8d021dccec8?s=128&d=identicon&r=PG&f=1", "display_name": "noissue", "link": "https://stackoverflow.com/users/6092805/noissue"}, "edited": false, "score": 0, "creation_date": 1485367517, "post_id": 41858371, "comment_id": 70900936, "body": "This is what I could not come up with, work&#39;s like a charm thank you!"}], "tags": [], "owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "is_accepted": true, "score": 0, "last_activity_date": 1485366916, "creation_date": 1485366916, "answer_id": 41858371, "question_id": 41857689, "link": "https://stackoverflow.com/questions/41857689/taking-arguments-from-command-line-and-putting-them-in-regular-expression-statme/41858371#41858371", "title": "taking arguments from command line and putting them in regular expression statments", "body": "<p>I will modify your <code>if</code> statement to something like following:</p>\n\n<pre><code>if(arguments[2] &gt;= '0' &amp;&amp; arguments[2] &lt;= '9') {\n   if((a &gt;= arguments[0] &amp;&amp; a &lt;= arguments[0]) || (a &gt;= '0' &amp;&amp; a &lt;= arguments[2]))  \n   {\n      fputc(a, fileout);\n   }\n}\nelse if(arguments[2] &gt;= 'a' &amp;&amp; arguments[2] &lt;= 'z' &amp;&amp; arguments[0] &gt;= 'a' &amp;&amp; arguments[0] &lt;= 'z') {\n   if(a &gt;= arguments[0] &amp;&amp; a &lt;= arguments[2]) {\n      fputc(a, fileout);\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 6092805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df625f231847451dc757a8d021dccec8?s=128&d=identicon&r=PG&f=1", "display_name": "noissue", "link": "https://stackoverflow.com/users/6092805/noissue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 41858371, "answer_count": 2, "score": 0, "last_activity_date": 1485366916, "creation_date": 1485364646, "question_id": 41857689, "link": "https://stackoverflow.com/questions/41857689/taking-arguments-from-command-line-and-putting-them-in-regular-expression-statme", "title": "taking arguments from command line and putting them in regular expression statments", "body": "<p>The task is\nMake a program that reads from text file and write to other text file\nonly symbols that are given in command line args \nexample:<br/>\nprogram a-z in.txt out.txt\n<br/>\nwill write to file out.txt only letters that are in a-z range nothing more.<br/>\nprogram a-9 in.txt out.txt<br/>\nwill write to file out.txt only letters that are in a-z0-9 range nothing more.<br/>\nIt can be assumed that all entered data are correct.</p>\n\n<p>so here is my attempt:</p>\n\n<pre><code> int main(int argc, char** argv)\n {\n    FILE *fileIn, *fileOut;\n    fileIn = fopen(argv[2] , \"rb\");\n    fileOut = fopen(argv[3] , \"wb\");\n    char *arguments = argv[1];\n\n    printf(\"%d - %d\\n\", arguments[0], arguments[2]);\n    char a;\n    do \n    {\n        a = fgetc(fileIn);\n        if( a &gt; arguments[0] &amp;&amp; a &lt; arguments[2])\n            fputc(a, fileOut);  \n    } while (a != EOF);\n\n    fclose(fileIn);\n    fclose(fileOut);\n    return 0;\n }\n</code></pre>\n\n<p>my first idea was to take args and use them as ascii limiters<br/>\nit somehow works on a-z but with other it dosn't<br/>\nthe question is:<br/>\nhow i can improve this?<br/>\nshould i change the way to do this?<br/></p>\n"}, {"tags": ["c", "gtk3"], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485365743, "post_id": 41857985, "comment_id": 70899831, "body": "Danke Sch&#246;n. The first closes. Now I need to go back from second window to the first one"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485366116, "post_id": 41857985, "comment_id": 70900079, "body": "I have <a href=\"http://pastebin.com/raw/iDeFbw1n\" rel=\"nofollow noreferrer\">THIS</a> which works fine, but I think I took the wrong way."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485366685, "post_id": 41857985, "comment_id": 70900413, "body": "Sorry, I can not test the second because right now I am on the tablet :("}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485366799, "post_id": 41857985, "comment_id": 70900474, "body": "NO problem, You fixed the main problem. Any way If you have later time, please take a look on it."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485370097, "post_id": 41857985, "comment_id": 70902453, "body": "It seems that you are using the same widgets in both windows, in this case you can reuse your code and pass a struct containning the current windows, this function swaps the current window in the struct, an example: <a href=\"http://pastebin.com/cp9LpPag\" rel=\"nofollow noreferrer\">pastebin.com/cp9LpPag</a> , notice that you forget to destroy both Windows in your code."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485385489, "post_id": 41857985, "comment_id": 70910348, "body": "Yes, that did the Trick. Thank You."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 2, "last_activity_date": 1485365600, "creation_date": 1485365600, "answer_id": 41857985, "question_id": 41857686, "link": "https://stackoverflow.com/questions/41857686/how-to-switch-between-windows-in-gtk3-c-language/41857985#41857985", "title": "How to switch between windows in GTK3 (C Language)", "body": "<p>Thats because the <code>clicked</code> callback <a href=\"https://developer.gnome.org/gtk3/stable/GtkButton.html#GtkButton-clicked\" rel=\"nofollow noreferrer\">wants two parameters</a></p>\n\n<p>Change the prototype and the function to</p>\n\n<pre><code>static void crete_new_wind(GtkButton *dummy, gpointer widget);\n\nstatic void crete_new_wind(GtkButton *dummy, gpointer widget) {\n</code></pre>\n\n<p>in order to use the second parameter in your function.</p>\n"}], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1360, "favorite_count": 0, "accepted_answer_id": 41857985, "answer_count": 1, "score": 1, "last_activity_date": 1485365600, "creation_date": 1485364632, "last_edit_date": 1592644375, "question_id": 41857686, "link": "https://stackoverflow.com/questions/41857686/how-to-switch-between-windows-in-gtk3-c-language", "title": "How to switch between windows in GTK3 (C Language)", "body": "<p>I have an App which as some point Opens a new Window and works fine.</p>\n<p><a href=\"https://i.stack.imgur.com/x7gFf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x7gFf.png\" alt=\"enter image description here\" /></a></p>\n<p>Then After I'm done with it, I need to switch back to the main window.</p>\n<p>I understood that I need the function:</p>\n<pre><code>gtk_widget_hide();\n</code></pre>\n<p>but I cant figure out how to hide the main Window, to print only the second one and again after I click the button in the second window to go back to the first one.</p>\n<p>This is what I have so far:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;gtk/gtk.h&gt;\n\nstatic void crete_new_wind (GtkWidget *widget);\ngboolean destroy (GtkWidget *window);\n\nint main (int argc, char *argv[]){\n    GtkWidget *window, *button, *box;\n\n    gtk_init (&amp;argc, &amp;argv);\n\n    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);\n    gtk_window_set_title (GTK_WINDOW (window), &quot;First Window&quot;);\n    gtk_container_set_border_width (GTK_CONTAINER (window), 10);\n    gtk_widget_set_size_request (window, 300, 300);\n    gtk_window_set_position (GTK_WINDOW (window), GTK_WIN_POS_CENTER);\n\n    button = gtk_button_new_with_label (&quot;Go to Window B&quot;);\n    g_signal_connect (G_OBJECT (button), &quot;clicked&quot;, G_CALLBACK (crete_new_wind), (gpointer) window);\n\n    box = gtk_box_new (TRUE, 1);\n    gtk_box_pack_end (GTK_BOX (box), button, TRUE, TRUE, 1);\n    gtk_container_add (GTK_CONTAINER (window), box);\n\n    gtk_widget_show_all (window);\n    gtk_main ();\n    return 0;\n}\n\nvoid crete_new_wind (GtkWidget *widget){\n    GtkWidget *window, *button, *box;\n\n    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);\n    gtk_window_set_title (GTK_WINDOW (window), &quot;Second Window&quot;);\n    gtk_container_set_border_width (GTK_CONTAINER (window), 10);\n    gtk_widget_set_size_request (window, 300, 300);\n    gtk_window_set_position (GTK_WINDOW (window), GTK_WIN_POS_CENTER);;\n    g_signal_connect (G_OBJECT (window), &quot;destroy&quot;, G_CALLBACK (destroy), widget);\n\n    button = gtk_button_new_with_label (&quot;Go back to Window A&quot;);\n    g_signal_connect (G_OBJECT (button), &quot;destroy&quot;, G_CALLBACK (destroy), NULL);\n    gtk_widget_hide(widget);\n\n    box = gtk_box_new (TRUE, 1);\n    gtk_box_pack_end (GTK_BOX (box), button, TRUE, TRUE, 1);\n    gtk_container_add (GTK_CONTAINER (window), box);\n    gtk_widget_show_all (window);\n}\n\ngboolean destroy (GtkWidget *widget){\n    gtk_widget_destroy (widget);\n    return TRUE;\n}\n</code></pre>\n<p>If I click on the button(Go to Window B) I have this:</p>\n<p><a href=\"https://i.stack.imgur.com/p0dAC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p0dAC.png\" alt=\"enter image description here\" /></a></p>\n<p>But the main window is still there, avaible to the user which is not what I need.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 544, "user_id": 2121671, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e46374be9605e600958239279a56d411?s=128&d=identicon&r=PG", "display_name": "Mitesh Pant", "link": "https://stackoverflow.com/users/2121671/mitesh-pant"}, "edited": false, "score": 0, "creation_date": 1485364655, "post_id": 41857635, "comment_id": 70899114, "body": "your push function takes <code>int</code> value, why are you pushing a <code>char</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7116268"}, "reply_to_user": {"reputation": 544, "user_id": 2121671, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e46374be9605e600958239279a56d411?s=128&d=identicon&r=PG", "display_name": "Mitesh Pant", "link": "https://stackoverflow.com/users/2121671/mitesh-pant"}, "edited": false, "score": 0, "creation_date": 1485364950, "post_id": 41857635, "comment_id": 70899314, "body": "@MiteshPant in this line <code>void push (int value)</code> I change from int to char, but the same problem. In this part I need enter letter and number together, so I need char, write?"}, {"owner": {"reputation": 544, "user_id": 2121671, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e46374be9605e600958239279a56d411?s=128&d=identicon&r=PG", "display_name": "Mitesh Pant", "link": "https://stackoverflow.com/users/2121671/mitesh-pant"}, "edited": false, "score": 0, "creation_date": 1485365255, "post_id": 41857635, "comment_id": 70899527, "body": "you need to cast input into char like <code>(char) input</code> and use char as the push param type"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1485365982, "post_id": 41857635, "comment_id": 70899986, "body": "unrelated, but since each <code>choice</code> is mutually exclusive, you should change that to <code>if (choice == 1) { ... } elseif (choice == 2) { ... } elseif (choice == 3) { ... }</code>. No sense in checking choice against each of those conditions every time when it will only be one (or none) of those options"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1485382371, "post_id": 41857635, "comment_id": 70908987, "body": "It is necessary to clear the input buffer when there is an illegal input. E.g <code>if(0 == scanf(&quot;%d&quot;, &amp;var)){ \t\t\twhile(getchar()!=&#39;\\n&#39;); \t\t\tinput_NG = 1; \t\t}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 814, "user_id": 7253114, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JuOPk.png?s=128&g=1", "display_name": "sagar.a", "link": "https://stackoverflow.com/users/7253114/sagar-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1485366027, "creation_date": 1485366027, "answer_id": 41858116, "question_id": 41857635, "link": "https://stackoverflow.com/questions/41857635/some-trouble-with-c-code/41858116#41858116", "title": "Some trouble with c code", "body": "<p>You need to change two things for your code to work.First change the following variables to character </p>\n\n<pre><code>char a[15];\nchar value;\n</code></pre>\n\n<p>plus you also need to pass a charater to the function not an integer.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7116268"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485366027, "creation_date": 1485364515, "last_edit_date": 1485365074, "question_id": 41857635, "link": "https://stackoverflow.com/questions/41857635/some-trouble-with-c-code", "title": "Some trouble with c code", "body": "<p>When I choose push in my menu, then I enter some number value, then the program works fine, but when I enter some letter value, then program never stops, where is my mistake?\nI'm beginner in c, so maybe someone can help solve this problem.\nI have this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;curses.h&gt;\n\nint a[15], top = -1;\n\nvoid push (int value)\n{\n    if (top == 14)\n    {\n        printf(\"Stack is full\");\n    }\n    else{\n        top = top + 1;\n        a[top] = value;\n    }\n}\n\nvoid pop()\n{\n    if (top == -1)\n    {\n        printf(\"Stack is empty\");\n    }\n    else\n    {\n        top = top - 1;\n    }\n}\n\n\nvoid display()\n{\n    int i;\n    if (top == -1)\n    {\n        printf(\"\\n Nothing to display\");\n    }\n    else\n    {\n        printf(\"\\nArray is:\\n\");\n        for (i=0; i&lt;=top; i++)\n        {\n            printf(\"%d\\n\", a[i]);\n        }\n    }\n}\n\n\nint main()\n{\n    int choice, value;\n    do{\n        printf(\"\\n1.Push :\");\n        printf(\"\\n2.POP :\");\n        printf(\"\\n3.Display :\");\n        printf(\"\\n4.Exit :\");\n        printf(\"\\nEnter your Choice:\");\n        scanf(\"%d\", &amp;choice);\n\n        if(choice == 1)\n        {\n            printf(\"\\nEnter Value to be inserted: \");\n            scanf(\"%d\", &amp;value);\n            push(value);\n        }\n\n        if(choice == 2)\n        {\n            pop();\n        }\n\n        if (choice == 3)\n        {\n            display();\n        }\n\n    }\n    while (choice !=4);\n    getch();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1485364189, "post_id": 41857361, "comment_id": 70898833, "body": "@KeineLust It isn&#39;t because <code>--</code> binds stronger and can only be applied to an lvalue. Otherwise it would be impossible to use <code>--</code>, because it can always be interpreted as <code>- -</code>."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1485364235, "post_id": 41857361, "comment_id": 70898873, "body": "@KeineLust Ever tried giving that to a compiler? Try it."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1485364346, "post_id": 41857361, "comment_id": 70898926, "body": "@Art, Amin, you are right, anyway in my computer this macro is expanded as - - 5 with a space between the signs, OP, you can verify this using <code>cpp app.c</code> if you are under <code>gcc</code>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1485364347, "post_id": 41857361, "comment_id": 70898928, "body": "It expands to <code>- -5</code> (note the space). Run the preprocessor and take a look at the output."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1485365096, "post_id": 41857361, "comment_id": 70899422, "body": "@KeineLust No please test it , it is -- the decrement operator."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1485365859, "post_id": 41857361, "comment_id": 70899906, "body": "@SurajJain Yes, I was informed by Amin and Art in previous comments ;)"}], "answers": [{"tags": [], "owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "is_accepted": false, "score": 4, "last_activity_date": 1485364099, "creation_date": 1485364099, "answer_id": 41857495, "question_id": 41857361, "link": "https://stackoverflow.com/questions/41857361/strange-result-on-macro-expansion/41857495#41857495", "title": "strange result on macro expansion", "body": "<p>I do not think so. Even macro expansion is text processing, it is impossible to create a token from across macro boundaries. Therefore it as <code>-(-5)</code>, not <code>--5</code>, because <code>--</code> is a single token.</p>\n"}, {"comments": [{"owner": {"reputation": 2500, "user_id": 3142049, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e397754f01a0c386cf59f64d86565d31?s=128&d=identicon&r=PG&f=1", "display_name": "Abhisek", "link": "https://stackoverflow.com/users/3142049/abhisek"}, "edited": false, "score": 0, "creation_date": 1485364888, "post_id": 41857582, "comment_id": 70899265, "body": "That is really nice, but what first 7 lines actually mean and how <code>cpp &lt; test.c</code> outputs preprocessed text ?"}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "reply_to_user": {"reputation": 2500, "user_id": 3142049, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e397754f01a0c386cf59f64d86565d31?s=128&d=identicon&r=PG&f=1", "display_name": "Abhisek", "link": "https://stackoverflow.com/users/3142049/abhisek"}, "edited": false, "score": 0, "creation_date": 1485365240, "post_id": 41857582, "comment_id": 70899514, "body": "@Abhisek the C compiler normally invokes this for you invisibly.  The extra lines are used by the compiler to track original source code line numbers and things like that."}], "tags": [], "owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "is_accepted": false, "score": 4, "last_activity_date": 1485364351, "creation_date": 1485364351, "answer_id": 41857582, "question_id": 41857361, "link": "https://stackoverflow.com/questions/41857361/strange-result-on-macro-expansion/41857582#41857582", "title": "strange result on macro expansion", "body": "<p>The preprocessor introduces a space in-between the expansion of <code>B</code> and <code>C</code>:</p>\n\n<pre><code>#define A -B\n#define B -C\n#define C 5\nA\n</code></pre>\n\n<p>with output (generated via <code>cpp &lt; test.c</code>)</p>\n\n<pre><code># 1 \"test.c\"\n# 1 \"&lt;built-in&gt;\" 1\n# 1 \"&lt;built-in&gt;\" 3\n# 329 \"&lt;built-in&gt;\" 3\n# 1 \"&lt;command line&gt;\" 1\n# 1 \"&lt;built-in&gt;\" 2\n# 1 \"test.c\" 2\n\n\n\n- -5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 2, "creation_date": 1485364875, "post_id": 41857630, "comment_id": 70899253, "body": "I read this, too. But I do not see a rule, that spaces are introduced or the resulting string has no inter-macro token."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1485365626, "post_id": 41857630, "comment_id": 70899761, "body": "@AminNegm-Awad Sorry I posted Wrong Check Again"}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1485371631, "post_id": 41857630, "comment_id": 70903354, "body": "The difference is, that I do not think that the standard itself requires &quot;space pasting&quot;. It is an implementation detail. However, this does not change anything for the Q."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1485372085, "post_id": 41857630, "comment_id": 70903611, "body": "Can YOu Edit , the answer to include this implementation detail thing . It would be very much appreciated."}], "tags": [], "owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "is_accepted": true, "score": 4, "last_activity_date": 1514375731, "last_edit_date": 1514375731, "creation_date": 1485364493, "answer_id": 41857630, "question_id": 41857361, "link": "https://stackoverflow.com/questions/41857361/strange-result-on-macro-expansion/41857630#41857630", "title": "strange result on macro expansion", "body": "<p>Pass it the -E option (Ex: <code>gcc -E a.c</code>). This will output preprocessed source code.</p>\n\n<pre><code>int main()\n {\n    printf(\"The value of A is %d\\n\", - -5);\n    return 0;\n }\n</code></pre>\n\n<p>So it will introduce a space between <code>-</code> and  <code>-5</code> hence it will be not considered as an decrement operator <code>--</code>, so <code>printf</code> will print 5.</p>\n\n<p>GCC Documentation On <a href=\"https://gcc.gnu.org/onlinedocs/cppinternals/Token-Spacing.html\" rel=\"nofollow noreferrer\">Token Spacing</a> provides the Information on Why There is an Extra Space Produced:</p>\n\n<blockquote>\n  <p>First, consider an issue that only concerns the stand-alone preprocessor: there needs to be a guarantee that re-reading its preprocessed output results in an identical token stream. Without taking special measures, this might not be the case because of macro substitution. For example:</p>\n</blockquote>\n\n<pre><code> #define PLUS +\n #define EMPTY\n #define f(x) =x=\n +PLUS -EMPTY- PLUS+ f(=)\n         ==&gt; + + - - + + = = =\n not\n         ==&gt; ++ -- ++ ===\n</code></pre>\n\n<blockquote>\n  <p>One solution would be to simply insert a space between all adjacent tokens. However, we would like to keep space insertion to a minimum, both for aesthetic reasons and because it causes problems for people who still try to abuse the preprocessor for things like Fortran source and Makefiles.</p>\n  \n  <p>For now, just notice that when tokens are added (or removed, as shown by the EMPTY example) from the original lexed token stream, we need to check for accidental token pasting. We call this paste avoidance. Token addition and removal can only occur because of macro expansion, but accidental pasting can occur in many places: both before and after each macro replacement, each argument replacement, and additionally each token created by the <code>#</code> and <code>##</code> operators.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1485367906, "post_id": 41858621, "comment_id": 70901149, "body": "Gcc Documentation says the following <a href=\"https://gcc.gnu.org/onlinedocs/cppinternals/Token-Spacing.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/cppinternals/Token-Spacing.html</a>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1485367989, "post_id": 41858621, "comment_id": 70901191, "body": "@Suraj Jain: It is very nice, but as I said above this is nothing more than an implementation detail of GCC compiler. Nothing like that is present in C language itself."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1485368088, "post_id": 41858621, "comment_id": 70901243, "body": "oh , does that solve the OP Question , actually i searched it , i did not really used macro intensively . You can edit my answer to support what you said."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 2, "last_activity_date": 1485368444, "last_edit_date": 1485368444, "creation_date": 1485367777, "answer_id": 41858621, "question_id": 41857361, "link": "https://stackoverflow.com/questions/41857361/strange-result-on-macro-expansion/41858621#41858621", "title": "strange result on macro expansion", "body": "<p>In C language the program source code is split into so called <em>preprocessing tokens</em> at a very early stage of translation (phase 3), before macro substitution takes place (phase 4). Later (at phase 7) <em>preprocessing tokens</em> are converted into regular <em>tokens</em> which are fed into syntactic and semantic analyzer of the compiler proper (see \"5.1.1.2 Translation phases\" in the language specification).</p>\n\n<p>Phase 3 is the stage when the preprocessing tokens for future C language operators and other lexical elements are formed (identifiers, numbers, punctuators, string literals etc.) Multi-character punctuators like <code>--</code>, <code>&gt;&gt;=</code> and so on are formed at that early stage. In order to eventually obtain a token for <code>--</code> operator at phase 7 you need to have that <code>--</code> early as a complete punctuator at phase 3. No additional punctuator concatenation occurs when transitioning from preprocessing tokens to regular tokens at phase 7, which means that two adjacent <code>-</code> punctuators detected at phase 3 will NOT become a single token <code>--</code> at phase 7. The compiler proper will never have a chance to see these two adjacent <code>-</code> and a single token <code>--</code>. </p>\n\n<p>In other words, in C you cannot use preprocessor to concatenate things by placing them next to each other. This is why preprocessor has dedicated features  like <code>##</code> to facilitate concatenation. And <code>##</code> is what you have to use to perform concatenation of two tokens into a single token.</p>\n\n<p>BTW, it is not correct to explain this behavior by claiming that preprocessor will place a space character between your <code>-</code> characters. Nothing like that is present in the language specification. What really happens is that in the internal structures of the compiler your <code>-</code> tokens forever remain as two separate tokens. How preprocessor and compiler achieve that is their internal implementation detail. In implementations with loosely coupled preprocessor and compiler proper (e.g. completely independent modules that communicate through an intermediate textual representation) injecting a space between adjacent punctuators is defintely a natural way to implement the required separation of tokens.</p>\n"}], "owner": {"reputation": 2500, "user_id": 3142049, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e397754f01a0c386cf59f64d86565d31?s=128&d=identicon&r=PG&f=1", "display_name": "Abhisek", "link": "https://stackoverflow.com/users/3142049/abhisek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 41857630, "answer_count": 4, "score": 3, "last_activity_date": 1514375731, "creation_date": 1485363691, "question_id": 41857361, "link": "https://stackoverflow.com/questions/41857361/strange-result-on-macro-expansion", "title": "strange result on macro expansion", "body": "<p>Consider the following code snippet</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define A -B\n#define B -C\n#define C 5\n\nint main()\n{\n  printf(\"The value of A is %d\\n\", A);\n  return 0;\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>The value of A is 5\n</code></pre>\n\n<p>But this shouldn't compile at all because after expansion it should look something like <code>printf(\"The value of A is %d\\n\", --5);</code> and then it should give compile error saying <code>lvalue</code> required. Isn't it ?</p>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1485364489, "post_id": 41857324, "comment_id": 70899027, "body": "<i>Note</i>: I might be wrong here (I don&#39;t currently have a <i>Win</i> box to test), but I think you should add a <code>Sleep(1);</code> statement in the <code>while (!kbhit())</code> loop, otherwise the program will kill one of your processors when the user doesn&#39;t press anything."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1485374440, "post_id": 41857324, "comment_id": 70904893, "body": "Unfortunately, I can&#39;t link the problem in the description to the code provided. 1: the <code>break</code> statement gets out of the <b>outer</b> loop (as opposed to what&#39;s in the comment). Also <code>i</code> is not incremented, so the code operates on the same char of the arrays. Also how do you want it to behave if the user presses the wrong sequence slowly? <i>Note</i>: Instead of &quot;trying to forget&quot; the (invalid?) chars, you could discard them yourself (by not placing them into <code>userWord</code>)"}, {"owner": {"reputation": 5, "user_id": 7454959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6DzlcrXamRk/AAAAAAAAAAI/AAAAAAAAJYg/1WfKr59p6xg/photo.jpg?sz=128", "display_name": "Alba Ram", "link": "https://stackoverflow.com/users/7454959/alba-ram"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1485444865, "post_id": 41857324, "comment_id": 70936084, "body": "I modified the code hopefully now you can understand it, sorry for the previous lack of information. Now, how could I discard the chars myself? I don&#39;t come with an idea because they are like remembered... I don`t know, they are not part of userWord yet, until I reach the getch() but then this gets them... @CristiFati"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1485444894, "post_id": 41857324, "comment_id": 70936099, "body": "<code>fflush(stdin)</code> is bad - <a href=\"https://linux.die.net/man/3/fflush\" rel=\"nofollow noreferrer\"><code>fflush()</code></a> is only valid for output streams, otherwise you get Undefined Behaviour (actually with Visual Studio it&#39;s just ignored when applied to an input stream, but this is non-standard and non-portable - either way it doesn&#39;t do what you want)."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1485447252, "post_id": 41857324, "comment_id": 70937956, "body": "@PaulR As soon as OP uses <code>kbhit</code>, portability no longer matters... And <code>fflush</code> on input streams is documented in MS compilers. But you are right it should be avoided as much as possible!"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1485447395, "post_id": 41857324, "comment_id": 70938061, "body": "@SergeBallesta: it&#39;s <a href=\"https://msdn.microsoft.com/en-us/library/9yky46tz.aspx\" rel=\"nofollow noreferrer\">documented for MS compilers, but it does nothing with an input stream</a>, so at best it&#39;s useless in this context."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7454959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6DzlcrXamRk/AAAAAAAAAAI/AAAAAAAAJYg/1WfKr59p6xg/photo.jpg?sz=128", "display_name": "Alba Ram", "link": "https://stackoverflow.com/users/7454959/alba-ram"}, "edited": false, "score": 0, "creation_date": 1485516901, "post_id": 41878991, "comment_id": 70967975, "body": "This worked for me, thank you. However, I read in another website that if I include <b>&lt;dos.h&gt;</b> I could write in my code<code>bdos (0xC, 0, 0);</code> and this would clear de BIOS keyboard buffer. Do you reccommend to use this? As I am quite to programming, I don&#39;t know if an incorrect use would be &quot;dangerous&quot;  @SergeBallesta"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 5, "user_id": 7454959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6DzlcrXamRk/AAAAAAAAAAI/AAAAAAAAJYg/1WfKr59p6xg/photo.jpg?sz=128", "display_name": "Alba Ram", "link": "https://stackoverflow.com/users/7454959/alba-ram"}, "edited": false, "score": 0, "creation_date": 1485521930, "post_id": 41878991, "comment_id": 70970876, "body": "Phew... <code>bdos(0xc, 0, 0)</code>! Haden&#39;t seen raw BIOS calls for decades... Honnestly I do not know whether it is supported in Windows console application, so you can just try it. But I would avoid using anything at a lower level that conio..."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 0, "last_activity_date": 1485450334, "creation_date": 1485450334, "answer_id": 41878991, "question_id": 41857324, "link": "https://stackoverflow.com/questions/41857324/how-to-make-my-program-forget-the-letters-i-have-pressed-on-the-keyboard/41878991#41878991", "title": "How to make my program &quot;forget&quot; the letters I have pressed on the keyboard?", "body": "<p>You a trying to mix low level conio input functions that directly process keyboard input with higher level stdio ones that operate on a filtered input buffer that is only available after a return has been hit.</p>\n\n<p>That means that as explained by @PaulR, your <code>fflush(stdin)</code> is useless in this context, and should be avoided as non standard.</p>\n\n<p><code>Sleep</code> pauses the program for the input value as milliseconds. As far as I am concerned, I am not able to do anything in 8 ms! So the initial part of your loop could become:</p>\n\n<pre><code>    while (userWord[i] != ' ') { // the user presses space to make the program know he has completed his word and wants to go to the next one\n\n            /*while (!kbhit()) {}\n            fflush(stdin); // All this is useless */\n            userWord[i] = getch();  // get next char from keyboard\n            printf(\"%c\", userWord[i]); //prints each letter the user writes each time the loop is executed, then he presses space to exit\n\n\n        if (userWord[i] != filas[maxIndex][i]) {\n\n            PlaySound(TEXT(\"failSound.wav\"), NULL, SND_SYNC); //MY PROBLEM\n            cont = 1;\n            // Sleep(8); useless\n            printf(\"\\n\"); //now the user should start writing his word again from the beginning\n            while (kbhit) { getch(); } // empties keyboard event queue\n            break;\n        }\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7454959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6DzlcrXamRk/AAAAAAAAAAI/AAAAAAAAJYg/1WfKr59p6xg/photo.jpg?sz=128", "display_name": "Alba Ram", "link": "https://stackoverflow.com/users/7454959/alba-ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 41878991, "answer_count": 1, "score": 0, "last_activity_date": 1485450334, "creation_date": 1485363563, "last_edit_date": 1485444565, "question_id": 41857324, "link": "https://stackoverflow.com/questions/41857324/how-to-make-my-program-forget-the-letters-i-have-pressed-on-the-keyboard", "title": "How to make my program &quot;forget&quot; the letters I have pressed on the keyboard?", "body": "<p>Sorry for the stupid way of asking but I don't know how to say it technically.</p>\n\n<p>My program is a typing trainning. I want to make a sound if the letter written by the user (userWord[i], obtained from the keyboard with getch()) is not the same as the corresponding letter from the word I give him (filas[maxIndex][i]). My code works fine, except that if for example I give him \"hello\" and he writes \"heklo\" because he is writting very fast, the Fail Sound will play 3 times (for k, l, o). I want to free somehow the buffer of the keyboard (I think this is the technical way of saying \"forget the letters I pressed\"), for the user to begin writing again his word without the 'k', 'l', 'o' being stored and taken as userWord[i], I tried fflush but is not working. </p>\n\n<p>I am using Visual Studio </p>\n\n<pre><code>printf(\"\\n\\n%s\\n\", filas[maxIndex]); //Here it prints \"Alba\"\n\n    cont = 1;\n\n    while (cont == 1) {\n        i = 0;\n        while (userWord[i] != ' ') { // the user presses space to make the program know he has completed his word and wants to go to the next one\n\n                while (!kbhit()) {}\n                fflush(stdin); //I believe this should free the keyboard buffer?\n                userWord[i] = getch();\n                printf(\"%c\", userWord[i]); //prints each letter the user writes each time the loop is executed, then he presses space to exit\n\n\n            if (userWord[i] != filas[maxIndex][i]) {\n\n                PlaySound(TEXT(\"failSound.wav\"), NULL, SND_SYNC); //MY PROBLEM\n                cont = 1;\n                Sleep(8);\n                printf(\"\\n\"); //now the user should start writing his word again from the beginning\n                break;\n            }\n            else if (filas[maxIndex][i + 1] == '\\0') {\n                cont = 0;\n                i++;\n                break;\n            }\n            else { cont = 0; }\n\n            i++;\n        }\n        if (cont == 0) {\n            userWord[i] = '\\0';\n\n            if (length != length2) { //calculated before, but irrelevant to my problem \n                cont = 1;\n                Sleep(8);\n                printf(\"\\n\\n%s\\n\", filas[maxIndex]);\n            }\n        }\n    }\n\n    if (cont != 3) {\n\n        while (!kbhit()) {}\n        option = getch(); // if option = '2' the user closes the program and if it equals ' ' the next word if obtained with a function and the loop begins again. \n    }\n  }\n</code></pre>\n\n<p>My problem is that if he types fast because he wants to finish soon, he will make a spelling mistake (writes \"Akba\" instead of \"Alba\") and FailSound plays 3 times. I want to make something to ignore the rest of user input when he makes the mistake but I don't know how to do it.</p>\n"}, {"tags": ["c", "arrays", "file-handling"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7447037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebe254195d2e4ee89d18e3cf5449e94?s=128&d=identicon&r=PG&f=1", "display_name": "sana", "link": "https://stackoverflow.com/users/7447037/sana"}, "edited": false, "score": 0, "creation_date": 1485434909, "post_id": 41857663, "comment_id": 70929103, "body": "I know how to use file handling but my logics are not clear I am BS IT student first sir tell us about these and second day quiz and I got 0 marks because I know how to open a file and how close it but I can&#39;t apply my mind about this because my logics are not clear"}, {"owner": {"reputation": 1, "user_id": 7447037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebe254195d2e4ee89d18e3cf5449e94?s=128&d=identicon&r=PG&f=1", "display_name": "sana", "link": "https://stackoverflow.com/users/7447037/sana"}, "edited": false, "score": 0, "creation_date": 1485435634, "post_id": 41857663, "comment_id": 70929515, "body": "give me a sample program and let me know how it work... it"}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1485552402, "post_id": 41857663, "comment_id": 70988890, "body": "Mert, please take a moment to understand how to apply formatting to questions here, in particular the code block (there&#39;s a button for it) and the inline quote device (use backticks, <code>like so</code>). Questions and answers here nearly always benefit from an appropriate use of formatting."}], "tags": [], "owner": {"reputation": 11, "user_id": 7470263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ac33c439ace6e92a99c27e6ab34720?s=128&d=identicon&r=PG&f=1", "display_name": "MERT YILMAZ", "link": "https://stackoverflow.com/users/7470263/mert-yilmaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1485552302, "last_edit_date": 1485552302, "creation_date": 1485364575, "answer_id": 41857663, "question_id": 41857146, "link": "https://stackoverflow.com/questions/41857146/how-to-use-array-and-file-handling-in-c/41857663#41857663", "title": "How to use Array and file handling in C?", "body": "<p>I am br\u0131efly answering yout question and explaining the array or file use.\nFirstly use this library: <code>#include &lt;file.h&gt;</code> top of the codes.</p>\n\n<p>Or this is the code for opening a file</p>\n\n<pre><code>if(fopen(\u201ctest.txt\u201d,\u201dr\u201d)){\n\nprintf(\u201cfile was opened\u201d);\n\n}else{\n\nprintf(\u201cFailed\u201d);\n\n}\n</code></pre>\n\n<p>Reading and writing from files can greatly facilitate the calculation function. The functions fscanf and fprintf are derivatives of the scanf and printf functions, which are learned when the C language is first learned. Some samples were given:</p>\n\n<pre><code>Int i;\n\nFscanf (fp, \"% d\", &amp; i);\n\nFprintf (fp, \"% d\", i);\n</code></pre>\n\n<p>It's a number identifier. This variable is read from the file in the second line with a function fscanf. This function uses an additional file pointer parameter, unlike the scanf function, which is apparent at first glance. This parameter is the first parameter. The \"fp\" file pointer in the above example is an example of such a file pointer.</p>\n\n<h2>There is no difference between standard prinft function</h2>\n\n<p>These are the basic funcs in file operations in C.</p>\n\n<blockquote>\n  <p>Fopen () Opens a file.</p>\n  \n  <p>Fclose () Closes a file.</p>\n  \n  <p>Fputc () and putc () write a character to the file.</p>\n  \n  <p>Fgetc () and getc () read a character from the file.</p>\n  \n  <p>Fseek () Finds a specific byte in a file.</p>\n  \n  <p>Fprintf () writes the structured data to the file.</p>\n  \n  <p>Fscanf () Reads structured data from file.</p>\n  \n  <p>Feof () Returns the correct value when the end of file is reached.</p>\n  \n  <p>Ferror () Gives an accurate value in case of an error.</p>\n  \n  <p>Rewind () Starts the active location of the file.</p>\n  \n  <p>Remove () Removes the file.</p>\n  \n  <p>Fflush () Clears the buffer memory.</p>\n</blockquote>\n\n<hr>\n\n<p>MODS </p>\n\n<blockquote>\n  <p>r     read only</p>\n  \n  <p>w     write only</p>\n  \n  <p>a     append</p>\n  \n  <p>r+    read and write. But the file has to be firstly.</p>\n  \n  <p>w+    read and write. There is no problem if the file exists or not. It\n  will be created anyway.</p>\n  \n  <p>a+   Read and write. It opens to add data to the end of a saved file.</p>\n</blockquote>\n\n<p>I hope it will be helpful for your beginning, improve your logic by writing so much.</p>\n"}], "owner": {"reputation": 1, "user_id": 7447037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebe254195d2e4ee89d18e3cf5449e94?s=128&d=identicon&r=PG&f=1", "display_name": "sana", "link": "https://stackoverflow.com/users/7447037/sana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1594379412, "creation_date": 1485363024, "last_edit_date": 1485552186, "question_id": 41857146, "link": "https://stackoverflow.com/questions/41857146/how-to-use-array-and-file-handling-in-c", "title": "How to use Array and file handling in C?", "body": "<p>How to use array and file handling in C? I am new in programming. I want to know more about C.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1485363072, "post_id": 41857135, "comment_id": 70898046, "body": "What&#39;s the error?"}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1485363177, "post_id": 41857135, "comment_id": 70898131, "body": "error: pasting &quot;RUN_CODE_FOR_EACH&quot; and &quot;(&quot; does not give a valid preprocessing token"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 2, "creation_date": 1485363211, "post_id": 41857135, "comment_id": 70898161, "body": "<code>PP_NARG</code> does not make sense, as you&#39;re using compile-time constructs at preprocessor-time. You will not get a valid preprocessor-time index. You need to count the arguments without resorting to things like <code>sizeof</code> - there are many solutions on SO."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1485363627, "post_id": 41857135, "comment_id": 70898440, "body": "Question is tagged C, but this is C++ (in C you can not redefine a function like you do with <code>print</code>)"}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1485363632, "post_id": 41857135, "comment_id": 70898442, "body": "Oh thanks @VittorioRomeo. Could you post an answer so I can accept it ?"}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "edited": false, "score": 0, "creation_date": 1485363773, "post_id": 41857135, "comment_id": 70898548, "body": "Looks like the workaround in this page (<a href=\"http://smackerelofopinion.blogspot.com/2011/10/determining-number-of-arguments-in-c.html\" rel=\"nofollow noreferrer\">smackerelofopinion.blogspot.com/2011/10/&hellip;</a>) is not completely a workaround"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1485363797, "post_id": 41857135, "comment_id": 70898558, "body": "@mikeDundee Hint: When talking to other user (not under his post), put @ and a name after it at the beginning of your comment. Otherwise there is a chance the user you&#39;re talking to won&#39;t get a notification."}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1485363858, "post_id": 41857135, "comment_id": 70898605, "body": "Edited thank you @HolyBlackCat"}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 0, "last_activity_date": 1485363542, "last_edit_date": 1495541340, "creation_date": 1485363542, "answer_id": 41857321, "question_id": 41857135, "link": "https://stackoverflow.com/questions/41857135/c-macro-force-evaluation-of-parameter/41857321#41857321", "title": "C macro force evaluation of parameter", "body": "<p><code>PP_NARG</code> does not make sense, as you're using compile-time constructs at preprocessor-time. You will not get a valid preprocessor-time argument count. You need to count the arguments without resorting to things like <code>sizeof</code>.</p>\n\n<p>Here's an example on how that could be done from my <a href=\"https://github.com/SuperV1234/vrm_pp\" rel=\"nofollow noreferrer\"><code>vrm_pp</code> library</a>. First, I define the interface macros for argument counting:</p>\n\n<pre><code>#define VRM_PP_IMPL_N_ARG(...) VRM_PP_IMPL_NSEQ(__VA_ARGS__)\n\n#define VRM_PP_IMPL_ARGCOUNT(...) \\\n    VRM_PP_IMPL_N_ARG(__VA_ARGS__, VRM_PP_IMPL_RSEQ())\n\n#define VRM_PP_ARGCOUNT(...) VRM_PP_IMPL_ARGCOUNT(__VA_ARGS__)\n</code></pre>\n\n<p>I then use a <a href=\"https://github.com/SuperV1234/vrm_pp/blob/master/generator/generator.cpp\" rel=\"nofollow noreferrer\">generator script</a> to generate <a href=\"https://github.com/SuperV1234/vrm_pp/blob/master/include/vrm/pp/generated/output.hpp#L782-L785\" rel=\"nofollow noreferrer\"><strong>the count sequences</strong></a>.</p>\n\n<ul>\n<li><p><code>VRM_PP_IMPL_RSEQ</code> is a <em>reverse-counting sequence</em>: <code>10, 9, 8, 7, 6</code> ...</p></li>\n<li><p><code>VRM_PP_IMPL_NSEQ</code> is a macro that takes <code>N</code> arguments <em>(where <code>N</code> is the maximum supported number of arguments)</em> and returns the <code>N</code>-th argument.</p></li>\n</ul>\n\n<hr>\n\n<p>You can find a complete explanation of this solution on the <a href=\"https://stackoverflow.com/questions/2124339/c-preprocessor-va-args-number-of-arguments\"><strong>\"C++ preprocessor __VA_ARGS__ number of arguments\"</strong></a> question.</p>\n"}], "owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 41857321, "answer_count": 1, "score": 0, "last_activity_date": 1485363542, "creation_date": 1485362996, "last_edit_date": 1495539952, "question_id": 41857135, "link": "https://stackoverflow.com/questions/41857135/c-macro-force-evaluation-of-parameter", "title": "C macro force evaluation of parameter", "body": "<p>I am trying to force the evaluation of a macro parameter.</p>\n\n<p>I tried to use the pattern in : <a href=\"https://stackoverflow.com/questions/13970749/macro-evaluation-in-c-preprocessor\">Macro evaluation in c preprocessor</a>\nBut for some reason here PP_NARG(<strong>VA_ARGS</strong>) does not expand correctly.</p>\n\n<p>Do you know why the second line in main() is not compiling ?\nerror: pasting \"RUN_CODE_FOR_EACH\" and \"(\" does not give a valid preprocessing token</p>\n\n<pre><code>#define PP_NARG(...)  (PP_NARG_(__VA_ARGS__,PP_RSEQ_N()) - \\\n    (sizeof(#__VA_ARGS__) == 1))\n#define PP_NARG_(...)  PP_ARG_N(__VA_ARGS__)\n\n#define PP_ARG_N( \\\n   _1, _2, _3, _4, _5, _6, _7, _8, _9,_10, \\\n  _11,_12,_13,_14,_15,_16,_17,_18,_19,_20, \\\n  _21,_22,_23,_24,_25,_26,_27,_28,_29,_30, \\\n  _31,_32,_33,_34,_35,_36,_37,_38,_39,_40, \\\n  _41,_42,_43,_44,_45,_46,_47,_48,_49,_50, \\\n  _51,_52,_53,_54,_55,_56,_57,_58,_59,_60, \\\n  _61,_62,_63, N, ...) N\n\n#define PP_RSEQ_N() \\\n    63,62,61,60,          \\\n    59,58,57,56,55,54,53,52,51,50, \\\n    49,48,47,46,45,44,43,42,41,40, \\\n    39,38,37,36,35,34,33,32,31,30, \\\n    29,28,27,26,25,24,23,22,21,20, \\\n    19,18,17,16,15,14,13,12,11,10, \\\n    9,8,7,6,5,4,3,2,1,0\n\n#define RUN_CODE(code, x) { \\\n    decltype(x) &amp;&amp;variadic_item = x; \\\n    code; \\\n}\n\n#define RUN_CODE_FOR_EACH1(code, x) RUN_CODE(code, x);\n#define RUN_CODE_FOR_EACH2(code, x, ...) RUN_CODE(code, x); RUN_CODE_FOR_EACH1(code, __VA_ARGS__)\n#define RUN_CODE_FOR_EACH3(code, x, ...) RUN_CODE(code, x); RUN_CODE_FOR_EACH2(code, __VA_ARGS__)\n#define RUN_CODE_FOR_EACH4(code, x, ...) RUN_CODE(code, x); RUN_CODE_FOR_EACH3(code, __VA_ARGS__)\n#define RUN_CODE_FOR_EACH5(code, x, ...) RUN_CODE(code, x); RUN_CODE_FOR_EACH4(code, __VA_ARGS__)\n#define RUN_CODE_FOR_EACH6(code, x, ...) RUN_CODE(code, x); RUN_CODE_FOR_EACH5(code, __VA_ARGS__)\n#define RUN_CODE_FOR_EACH7(code, x, ...) RUN_CODE(code, x); RUN_CODE_FOR_EACH6(code, __VA_ARGS__)\n#define RUN_CODE_FOR_EACH8(code, x, ...) RUN_CODE(code, x); RUN_CODE_FOR_EACH7(code, __VA_ARGS__)\n\n#define RUN_CODE_FOR_EACH__(code, size, ...) RUN_CODE_FOR_EACH##size(code, __VA_ARGS__)\n#define RUN_CODE_FOR_EACH_(code, size, ...) RUN_CODE_FOR_EACH__(code, size, __VA_ARGS__)\n#define RUN_CODE_FOR_EACH(code, ...) RUN_CODE_FOR_EACH_(code, PP_NARG(__VA_ARGS__), __VA_ARGS__)\n\n\nvoid print(int i){std::cout &lt;&lt; \"int: \" &lt;&lt; i &lt;&lt; '\\n';}\nint print(double d){std::cout &lt;&lt; \"double: \" &lt;&lt; d &lt;&lt; '\\n';return 2;}\n\nint main() {\n    RUN_CODE_FOR_EACH_(print(variadic_item), 4, 1, 2., 3., 4); // Working\n    RUN_CODE_FOR_EACH(print(variadic_item), 1, 2., 3., 4); // Compilation error\n    std::cout &lt;&lt; \"size=\" &lt;&lt; PP_NARG(1, 2., 3., 4) &lt;&lt; '\\n'; // show size=4\n    return 0;\n}\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "math", "floor"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1485362101, "post_id": 41856771, "comment_id": 70897359, "body": "<code>floor(x)</code> yields <code>the largest integer value less than or equal to x</code>.  If yours does that, it is correct right now."}, {"owner": {"reputation": 1554, "user_id": 3250971, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2840796a62fdc1c1368d6b0977cef34?s=128&d=identicon&r=PG&f=1", "display_name": "WhatsUp", "link": "https://stackoverflow.com/users/3250971/whatsup"}, "edited": false, "score": 4, "creation_date": 1485362406, "post_id": 41856771, "comment_id": 70897563, "body": "You can try <code>my_floor_2(1e100)</code>, which will somehow tell you the difference,"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1602988952, "post_id": 41856839, "comment_id": 113892604, "body": "Casting to <code>long long</code> does not return the <i>floor</i> when <code>num &lt; 0</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1602989499, "post_id": 41856839, "comment_id": 113892677, "body": "The approach also fails when <code>isnan(num)</code>.  Case 1. would benefit with refinement."}, {"owner": {"reputation": 804, "user_id": 14469685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76884a1260f15088a41f5cbcf63c99ae?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Raj", "link": "https://stackoverflow.com/users/14469685/lakshya-raj"}, "edited": false, "score": 0, "creation_date": 1613163974, "post_id": 41856839, "comment_id": 117001537, "body": "@Bathsheba: I do not agree that you can not solve floors by yourself.  I think <a href=\"https://stackoverflow.com/a/64408800/14469685\">my answer</a> is able to solve floors.  Would you mind taking a look at it <a href=\"https://onlinegdb.com/fork/yiH-PGt5o\" rel=\"nofollow noreferrer\">and maybe testing it</a>?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1485362380, "last_edit_date": 1485362380, "creation_date": 1485362059, "answer_id": 41856839, "question_id": 41856771, "link": "https://stackoverflow.com/questions/41856771/write-your-own-implementation-of-maths-floor-function-c/41856839#41856839", "title": "Write your own implementation of math&#39;s floor function, C", "body": "<p>No you can't tackle it this way. The best way of writing your own implementation is to steal the one from the C Standard Library on your platform. But note that might contain platform specific nuances so might not be portable.</p>\n\n<p>The C Standard Library <code>floor</code> function is typically clever in that it doesn't work by taking a conversion to an integral type. If it did then you'd run the risk of <code>signed</code> integer overflow, the behaviour of which is undefined. (Note that the smallest possible range for an <code>int</code> is -32767 to +32767).</p>\n\n<p>The precise implementation is also dependent on the floating point scheme used on your platform.</p>\n\n<p>For a platform using IEEE754 floating point, and a <code>long long</code> type you <em>could</em> adopt this scheme:</p>\n\n<ol>\n<li>If the magnitude of the number is greater than the 53rd power of 2, return it back (as it's already integral).</li>\n<li>Else, cast to a 64 bit type (long long), and return it back.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": false, "score": 0, "last_activity_date": 1485430715, "last_edit_date": 1485430715, "creation_date": 1485425285, "answer_id": 41871052, "question_id": 41856771, "link": "https://stackoverflow.com/questions/41856771/write-your-own-implementation-of-maths-floor-function-c/41871052#41871052", "title": "Write your own implementation of math&#39;s floor function, C", "body": "<p>In <strong>C++</strong> and 32 bit arithmetics it can be done for example like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>//---------------------------------------------------------------------------\n// IEEE 754 double MSW masks\nconst DWORD _f64_sig    =0x80000000;    // sign\nconst DWORD _f64_exp    =0x7FF00000;    // exponent\nconst DWORD _f64_exp_sig=0x40000000;    // exponent sign\nconst DWORD _f64_exp_bia=0x3FF00000;    // exponent bias\nconst DWORD _f64_exp_lsb=0x00100000;    // exponent LSB\nconst DWORD _f64_exp_pos=        20;    // exponent LSB bit position\nconst DWORD _f64_man    =0x000FFFFF;    // mantisa\nconst DWORD _f64_man_msb=0x00080000;    // mantisa MSB\nconst DWORD _f64_man_bits=       52;    // mantisa bits\n// IEEE 754 single masks\nconst DWORD _f32_sig    =0x80000000;    // sign\nconst DWORD _f32_exp    =0x7F800000;    // exponent\nconst DWORD _f32_exp_sig=0x40000000;    // exponent sign\nconst DWORD _f32_exp_bia=0x3F800000;    // exponent bias\nconst DWORD _f32_exp_lsb=0x00800000;    // exponent LSB\nconst DWORD _f32_exp_pos=        23;    // exponent LSB bit position\nconst DWORD _f32_man    =0x007FFFFF;    // mantisa\nconst DWORD _f32_man_msb=0x00400000;    // mantisa MSB\nconst DWORD _f32_man_bits=       23;    // mantisa bits\n//---------------------------------------------------------------------------\ndouble f64_floor(double x)\n    {\n    const int h=1;      // may be platform dependent MSB/LSB order\n    const int l=0;\n    union _f64          // semi result\n        {\n        double f;       // 64bit floating point\n        DWORD u[2];     // 2x32 bit uint\n        } y;\n    DWORD m,a;\n    int sig,exp,sh;\n    y.f=x;\n    // extract sign\n    sig =y.u[h]&amp;_f64_sig;\n    // extract exponent\n    exp =((y.u[h]&amp;_f64_exp)&gt;&gt;_f64_exp_pos)-(_f64_exp_bia&gt;&gt;_f64_exp_pos);\n    // floor bit shift\n    sh=_f64_man_bits-exp; a=0;\n    if (exp&lt;0)\n        {\n        a=y.u[l]|(y.u[h]&amp;_f64_man);\n        if (sig) return -1.0;\n        return 0.0;\n        }\n    // LSW\n    if (sh&gt;0)\n        {\n        if (sh&lt;32) m=(0xFFFFFFFF&gt;&gt;sh)&lt;&lt;sh; else m=0;\n        a=y.u[l]&amp;(m^0xFFFFFFFF); y.u[l]&amp;=m;\n        }\n    // MSW\n    sh-=32;\n    if (sh&gt;0)\n        {\n        if (sh&lt;_f64_exp_pos) m=(0xFFFFFFFF&gt;&gt;sh)&lt;&lt;sh; else m=_f64_sig|_f64_exp;\n        a|=y.u[h]&amp;(m^0xFFFFFFFF); y.u[h]&amp;=m;\n        }\n    if ((sig)&amp;&amp;(a)) y.f--;\n    return y.f;\n    }\n//---------------------------------------------------------------------------\nfloat f32_floor(float x)\n    {\n    union               // semi result\n        {\n        float f;        // 32bit floating point\n        DWORD u;        // 32 bit uint\n        } y;\n    DWORD m,a;\n    int sig,exp,sh;\n    y.f=x;\n    // extract sign\n    sig =y.u&amp;_f32_sig;\n    // extract exponent\n    exp =((y.u&amp;_f32_exp)&gt;&gt;_f32_exp_pos)-(_f32_exp_bia&gt;&gt;_f32_exp_pos);\n    // floor bit shift\n    sh=_f32_man_bits-exp; a=0;\n    if (exp&lt;0)\n        {\n        a=y.u&amp;_f32_man;\n        if (sig) return -1.0;\n        return 0.0;\n        }\n    if (sh&gt;0)\n        {\n        if (sh&lt;_f32_exp_pos) m=(0xFFFFFFFF&gt;&gt;sh)&lt;&lt;sh; else m=_f32_sig|_f32_exp;\n        a|=y.u&amp;(m^0xFFFFFFFF); y.u&amp;=m;\n        }\n    if ((sig)&amp;&amp;(a)) y.f--;\n    return y.f;\n    }\n//---------------------------------------------------------------------------\n</code></pre>\n\n<p>The point is to make mask that will clear out the decimal bits from mantissa and in case of negative input and non zero cleared bits decrement the result. To access individual bits you can convert your floating point value to integral representation with use of union (like in the example) or use pointers instead.</p>\n\n<p>I tested this in simple <strong>VCL</strong> app like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>float f32;\ndouble f64;\nAnsiString txt=\"\";\n// 64 bit\ntxt+=\"[double]\\r\\n\";\nfor (f64=-10.0;f64&lt;=10.0;f64+=0.1)\n if (fabs(floor(f64)-f64_floor(f64))&gt;1e-6)\n    {\n    txt+=AnsiString().sprintf(\"%5.3lf %5.3lf %5.3lf\\r\\n\",f64,floor(f64),f64_floor(f64));\n    f64_floor(f64);\n    }\nfor (f64=1;f64&lt;=1e307;f64*=1.1)\n    {\n    if (fabs(floor( f64)-f64_floor( f64))&gt;1e-6) { txt+=AnsiString().sprintf(\"%lf lf lf\\r\\n\", f64,floor( f64),f64_floor( f64));\n    f64_floor( f64); }\n    if (fabs(floor(-f64)-f64_floor(-f64))&gt;1e-6) { txt+=AnsiString().sprintf(\"%lf lf lf\\r\\n\",-f64,floor(-f64),f64_floor(-f64));\n    f64_floor(-f64); }\n    }\n// 32 bit\ntxt+=\"[float]\\r\\n\";\nfor (f32=-10.0;f32&lt;=10.0;f32+=0.1)\n if (fabs(floor(f32)-f32_floor(f32))&gt;1e-6)\n    {\n    txt+=AnsiString().sprintf(\"%5.3lf %5.3lf %5.3lf\\r\\n\",f32,floor(f32),f32_floor(f32));\n    f32_floor(f32);\n    }\nfor (f32=1;f32&lt;=1e37;f32*=1.1)\n    {\n    if (fabs(floor( f32)-f32_floor( f32))&gt;1e-6) { txt+=AnsiString().sprintf(\"%lf lf lf\\r\\n\", f32,floor( f32),f32_floor( f32));\n    f32_floor( f32); }\n    if (fabs(floor(-f32)-f32_floor(-f32))&gt;1e-6) { txt+=AnsiString().sprintf(\"%lf lf lf\\r\\n\",-f32,floor(-f32),f32_floor(-f32));\n    f32_floor(-f32); }\n    }\nmm_log-&gt;Lines-&gt;Add(txt);\n</code></pre>\n\n<p>with no difference result (so in all tested cases it matches <code>math.h</code> <code>floor()</code> values. If you want to give this a shot outside <strong>VCL</strong> then just change <code>AnsiString</code> to any string type you got at hand and change the output from <code>TMemo::mm_log</code> to anything you got (like console <code>cout</code> or whatever)</p>\n\n<p>The double calling of <code>fxx_floor()</code> in case of difference is for debuging purposes (you can place a breakpoint and step in the error case directly).</p>\n\n<p><strong>[Notes]</strong></p>\n\n<p>Beware the order of words (<strong>MSW,LSW</strong>) is platform dependent so you should adjust the <code>h,l</code> constants accordingly. This code is not optimized so it is easily understandable so do not expect it will be fast.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1602989215, "post_id": 41871699, "comment_id": 113892629, "body": "Corner: <code>num &gt;= LLONG_MAX</code> has rounding mode issues as <code>LLONG_MAX</code> typically does not convert exactly to <code>double</code>.  Alternative: <code>(num &gt;= (LLONG_MAX&#47;2 + 1)*2.0)</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1602989633, "post_id": 41871699, "comment_id": 113892695, "body": "Code could catch the NAN case with 2 tests: <code>if (!(num &lt; (LLONG_MAX&#47;2 + 1)*2.0 &amp;&amp; num &gt;= LLONG_MIN)) { ...</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1603012032, "post_id": 41871699, "comment_id": 113896507, "body": "@chux-ReinstateMonica: the rounding issues in <code>num &gt;= LLONG_MAX</code>, <code>num</code> are irrelevant in this particular case: if <code>long long</code> has more value bits than type <code>double</code>, if the test succeeds, <code>num</code> is a whole number, if it fails, <code>num</code> will convert to <code>long long</code> correctly. For the conversion to fail would require <code>num</code> to have a value larger than <code>LLONG_MAX</code>, which would necessarily be larger or equal to <code>(double)LLONG_MAX</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1603031346, "post_id": 41871699, "comment_id": 113901299, "body": "Fair enough in this case usage.  My general concern stems from the implied <code>num &gt;= (double) LLONG_MAX</code> and <code>(double) LLONG_MAX</code> becoming a value that differs from <code>LLONG_MAX</code>."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1485427404, "creation_date": 1485427404, "answer_id": 41871699, "question_id": 41856771, "link": "https://stackoverflow.com/questions/41856771/write-your-own-implementation-of-maths-floor-function-c/41871699#41871699", "title": "Write your own implementation of math&#39;s floor function, C", "body": "<p>Both of your attempts have limitations:</p>\n\n<ul>\n<li>If the <code>double</code> value is outside the range of the <code>int</code> type, converting to <code>int</code> is implementation defined.</li>\n<li>If the <code>double</code> value is negative but integral, returning <code>(int)num - 1</code> is incorrect.</li>\n</ul>\n\n<p>Here is an (almost) portable version that tries to handle all cases:</p>\n\n<pre><code>double my_floor_2(double num) {\n    if (num &gt;= LLONG_MAX || num &lt;= LLONG_MIN || num != num) {\n        /* handle large values, infinities and nan */\n        return num;\n    }\n    long long n = (long long)num;\n    double d = (double)n;\n    if (d == num || num &gt;= 0)\n        return d;\n    else\n        return d - 1;\n}\n</code></pre>\n\n<p>It should be correct if type <code>long long</code> has more value bits than type <code>double</code>, which is the case on most modern systems.</p>\n"}, {"tags": [], "owner": {"reputation": 804, "user_id": 14469685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76884a1260f15088a41f5cbcf63c99ae?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Raj", "link": "https://stackoverflow.com/users/14469685/lakshya-raj"}, "is_accepted": false, "score": 1, "last_activity_date": 1607906678, "last_edit_date": 1607906678, "creation_date": 1602983393, "answer_id": 64408800, "question_id": 41856771, "link": "https://stackoverflow.com/questions/41856771/write-your-own-implementation-of-maths-floor-function-c/64408800#64408800", "title": "Write your own implementation of math&#39;s floor function, C", "body": "<p>Although other people have said you will need to take it from the C Standard Library, I have built a <code>floor</code> function and tested it on <a href=\"https://tio.run/##nVKxboMwEN35ikuqVJiEBDpCnA5VK1XK1LkLAQNW4RyBrZJG@XZqm6QpytR6st/dvXd@eqlfpGnfrzx4YzWrd6wBKYCh1JdW1EyWHAvgCLJk8Ip7JaFlqeQCJ@CtHOeOY1qpjK1bmXGxLDdOJfRAJtSuYlAfXiohGvc31hHQak9lggXTrLw1ggehGqj4hxaLYMTAi1I68JezY5BXIpFma8vbcqkSs/ISzM5HSzdaKRX7A@3WwWPn@WHUxbZDYcsLZJnmkfDFGtHSIL6ZRRoOYK7/aR6WbINeGMTo0TBYzOd2mFzbbItPMbaFCfXPUxoiP3/l@dC3Dq7YceSELc81zQjFlRYdQ75vha7gybmdb5hUDYJxYRCmVPsRdb4b@vZNSOR252vsnBzH@FInHF1ya@mZdN/optydPttAJYDqErHcBCOC6dmWNk1Q9822@XQB90jG47PlwzZ/R126JArJsMM/gqsDUolPE9@@/wY\" rel=\"nofollow noreferrer\">tio.run (Try It Online)</a> and <a href=\"https://onlinegdb.com/fork/yiH-PGt5o\" rel=\"nofollow noreferrer\">onlinegdb.com</a>.  The function itself doesn't require any <code>#include</code> files, but to print out the answers, I have included <code>stdio.h</code> (in the <a href=\"https://tio.run/##nVKxboMwEN35ikuqVJiEBDpCnA5VK1XK1LkLAQNW4RyBrZJG@XZqm6QpytR6st/dvXd@eqlfpGnfrzx4YzWrd6wBKYCh1JdW1EyWHAvgCLJk8Ip7JaFlqeQCJ@CtHOeOY1qpjK1bmXGxLDdOJfRAJtSuYlAfXiohGvc31hHQak9lggXTrLw1ggehGqj4hxaLYMTAi1I68JezY5BXIpFma8vbcqkSs/ISzM5HSzdaKRX7A@3WwWPn@WHUxbZDYcsLZJnmkfDFGtHSIL6ZRRoOYK7/aR6WbINeGMTo0TBYzOd2mFzbbItPMbaFCfXPUxoiP3/l@dC3Dq7YceSELc81zQjFlRYdQ75vha7gybmdb5hUDYJxYRCmVPsRdb4b@vZNSOR252vsnBzH@FInHF1ya@mZdN/optydPttAJYDqErHcBCOC6dmWNk1Q9822@XQB90jG47PlwzZ/R126JArJsMM/gqsDUolPE9@@/wY\" rel=\"nofollow noreferrer\">tio.run</a> and <a href=\"https://onlinegdb.com/fork/yiH-PGt5o\" rel=\"nofollow noreferrer\">onlinegdb.com</a>, not here).  Here it is:</p>\n<pre class=\"lang-c prettyprint-override\"><code>long double myFloor(long double x) /* Change this to your liking: long double might\n                                             be float in your situation.  */\n{\n    long double xcopy=x&lt;0?x*-1:x;\n    unsigned int zeros=0;\n    long double n=1;\n    for(n=1;xcopy&gt;n*10;n*=10,++zeros);\n    for(xcopy-=n;zeros!=-1;xcopy-=n)\n        if(xcopy&lt;0)\n        {\n            xcopy+=n;\n            n/=10;\n            --zeros;\n        }\n    xcopy+=n;\n    return x&lt;0?(xcopy==0?x:x-(1-xcopy)):(x-xcopy);\n}\n</code></pre>\n<p>The floor of a floating point number is the biggest integer less than or equal to it.  Here are a some examples:</p>\n<pre class=\"lang-none prettyprint-override\"><code>floor(5.7)  = 5\nfloor(3)    = 3\nfloor(9.9)  = 9\nfloor(7.0)  = 7\nfloor(-7.9) = -8\nfloor(-5.0) = -5\nfloor(-3.3) = -3\nfloor(0)    = 0\nfloor(-0.0) = -0\nfloor(-0)   = -0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1602990454, "creation_date": 1602990454, "answer_id": 64409333, "question_id": 41856771, "link": "https://stackoverflow.com/questions/41856771/write-your-own-implementation-of-maths-floor-function-c/64409333#64409333", "title": "Write your own implementation of math&#39;s floor function, C", "body": "<p>When the precision of the floating point type is small enough as compared to a wide integer type, cast to that integer type when the floating point value is in the integer range.</p>\n<p>Review the function for values outside the <code>long long</code> range, NAN, infinity and -0.0 sand adjust and desired.</p>\n<pre><code>#if DBL_MANT_DIG &gt;= 64\n#error TBD code\n#endif\n\n// LLONG_MAX is not exact as a double, yet LLONG_MAX + 1 is\n#define LLONG_MAX_P1 ((LLONG_MAX/2 + 1)*2.0)\n\ndouble my_floor(double x) {\n  if (x &gt;= 0.0) {\n    if (x &lt; LLONG_MAX_P1) {\n      return (double)(long long)x;\n    }\n    return x;\n  } else if (x &lt; 0.0) {\n    if (x &gt;= LLONG_MIN) {\n      long long ix = (long long) x; \n      return (ix == x) ? x : (double)(ix-1);\n    }\n    return x;\n  }\n  return x; // NAN\n}\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 5671824, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pXYNC.png?s=128&g=1", "display_name": "darias", "link": "https://stackoverflow.com/users/5671824/darias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7521, "favorite_count": 2, "answer_count": 5, "score": 9, "last_activity_date": 1613196254, "creation_date": 1485361904, "last_edit_date": 1613196254, "question_id": 41856771, "link": "https://stackoverflow.com/questions/41856771/write-your-own-implementation-of-maths-floor-function-c", "title": "Write your own implementation of math&#39;s floor function, C", "body": "<p>I was thinking about the <code>floor</code> function available in <code>math.h</code>. It is very easy to use it:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n \nint main(void)\n{\n  for (double a = 12.5; a &lt; 13.4; a += 0.1)\n    printf(&quot;floor of  %.1lf is  %.1lf\\n&quot;, a, floor(a));\n  return 0;\n}\n</code></pre>\n<p>What if I would like to write my own implementation of it? Would it look simply like this:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ndouble my_floor(double num)\n{\n    return (int)num;\n}\n\nint main(void)\n{\n    double a;\n\n    for (a = 12.5; a &lt; 13.4; a += 0.1)\n        printf(&quot;floor of  %.1lf is  %.1lf\\n&quot;, a, floor(a));\n\n    printf(&quot;\\n\\n&quot;);\n\n    for (a = 12.5; a &lt; 13.4; a += 0.1)\n        printf(&quot;floor of  %.1lf is  %.1lf\\n&quot;, a, my_floor(a));\n\n    return 0;\n}\n</code></pre>\n<p>?</p>\n<p>It seems it does not work with negative numbers (<code>my_floor</code>), but the second one seems to be fine (<code>my_floor_2</code>):</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ndouble my_floor(double num)\n{\n    return (int)num;\n}\n\ndouble my_floor_2(double num)\n{\n    if(num &lt; 0)\n        return (int)num - 1;\n    else\n        return (int)num;\n}\n\nint main(void)\n{\n    double a1 = -12.5;\n\n    printf(&quot;%lf\\n&quot;, floor(a1));\n    printf(&quot;%lf\\n&quot;, my_floor(a1));\n    printf(&quot;%lf\\n&quot;, my_floor_2(a1));\n\n    return 0;\n}\n</code></pre>\n<p>program output:</p>\n<pre><code>-13.000000\n-12.000000\n-13.000000\n</code></pre>\n<p>Is one of them eventually correct or not?</p>\n\n"}, {"tags": ["c", "linux", "ld", "glibc"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1485362235, "post_id": 41856536, "comment_id": 70897448, "body": "Show your link command. Are there any binaries you have not compiled yourself? Do you have anything in /usr/local/lib*?"}, {"owner": {"reputation": 1, "user_id": 7469793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e06343124182a626329e385bd8d6453?s=128&d=identicon&r=PG&f=1", "display_name": "S. Friesen", "link": "https://stackoverflow.com/users/7469793/s-friesen"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1485365199, "post_id": 41856536, "comment_id": 70899490, "body": "Here it is for real: @n.m The basic link line is cc -o myapp app_main.o file1.o file2.o file3.o -g --verbose -DDEBUG -fPIC -L/usr/lib/gcc -lgcc -L/usr/lib/x86_64-redhat-linux6E/lib64/ -lm -lpthread -Llib64 -Llib -lcommon -lcrypto -lssl -ldl -lblkid -lnv_env -lnv_io.  liblzo2 is in /usr/local/lib Apparently libcommon, libcrypto and libssl are project level .a files.  P.S. forgot to mention this is 64 bit Linux, and most libraries are in /usr/lib64."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1485367411, "post_id": 41856536, "comment_id": 70900869, "body": "Anything that is not yours in <code>&#47;usr&#47;local&#47;lib*</code>? Try to rearrange your libraries in dependency order .<a href=\"http://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause\" title=\"why does the order in which libraries are linked sometimes cause\">stackoverflow.com/questions/45135/&hellip;</a>.  You don&#39;t need things like -lggc or -L/usr/lib/x86_64-redhat-linux6E/lib64/, these are automatic by gcc."}, {"owner": {"reputation": 1, "user_id": 7469793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e06343124182a626329e385bd8d6453?s=128&d=identicon&r=PG&f=1", "display_name": "S. Friesen", "link": "https://stackoverflow.com/users/7469793/s-friesen"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1485369638, "post_id": 41856536, "comment_id": 70902131, "body": "Weird. Removing the excess -L options and -lgcc fixed it.  Those were being added by a line in the makefile that checks if gcc is being used and adds those if it is <i>not</i> being used. And since for some reason the compiler is being called as &#39;cc&#39; instead of &#39;gcc&#39; it invoked that branch."}], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1500293917, "creation_date": 1500293917, "answer_id": 45144143, "question_id": 41856536, "link": "https://stackoverflow.com/questions/41856536/link-failure-with-versioned-symbols-memcpy-secure-getenv/45144143#45144143", "title": "Link failure with versioned symbols (memcpy &amp; secure_getenv)", "body": "<p>You probably have <code>compat-glibc</code> installed, as indicated by the <code>-L/usr/lib/x86_64-redhat-linux6E/lib64</code> argument.  <code>compat-glibc</code> on Red Hat Enterprise Linux 7 provides glibc 2.12 only, so it cannot be used to link against system libraries.</p>\n"}], "owner": {"reputation": 1, "user_id": 7469793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e06343124182a626329e385bd8d6453?s=128&d=identicon&r=PG&f=1", "display_name": "S. Friesen", "link": "https://stackoverflow.com/users/7469793/s-friesen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500293917, "creation_date": 1485361189, "last_edit_date": 1485365327, "question_id": 41856536, "link": "https://stackoverflow.com/questions/41856536/link-failure-with-versioned-symbols-memcpy-secure-getenv", "title": "Link failure with versioned symbols (memcpy &amp; secure_getenv)", "body": "<p>I am seeing undefined symbols when trying to link shared libraries with a program on Redhat Linux.<br>\nWe are running Linux kernel 3.10.0, gcc 4.8.2 with libc-2.17.so, and libblkid 2.23.2</p>\n\n<p>When I build the application I am writing I get two undefined symbols from libblkid:  <code>memcpy@GLIBC_2.14</code> and <code>secure_getenv@GLIBC_2.17</code>. (A very similar build works on other machines, ostensibly using the same versions of everything).</p>\n\n<p>Note, for <code>secure_getenv</code> libblkid wants the same version as the libc library itself.</p>\n\n<p>Looking at the symbols defined in libc-2.17.so I find <code>memcpy@@GLIBC_2.14</code>, <code>memcpy@GLIBC_2.2.5</code>, <code>secure_getenv</code>, and <code>secure_getenv@GLIBC_2.2.5</code>. According to my understanding the double <code>@</code> in the first <code>memcpy</code> version is simply supposed to mark it as the default version. And, for some reason even in this libc with versioned symbols the first <code>secure_getenv</code> appears to be unversioned.</p>\n\n<p>So, why does a requirement for <code>memcpy@GLIBC_2.14</code> not match the defaulted <code>memcpy@@GLIBC_2.14</code>?</p>\n\n<p>And logically I would expect the base version of <code>secure_getenv</code> in libc-2.17 to match a requirement for version 2.17.</p>\n\n<p>So, what is going on here? What is making it fail on my development machine and not others? How do I fix this? (As the make works on other machines this appears to be something specific to my build environment, but what?)</p>\n"}, {"tags": ["c", "pointers", "double-pointer"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6494599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dxzyRf-1i8U/AAAAAAAAAAI/AAAAAAAAAHw/IXsAzgZ3ngc/photo.jpg?sz=128", "display_name": "Giorgio M.", "link": "https://stackoverflow.com/users/6494599/giorgio-m"}, "edited": false, "score": 0, "creation_date": 1485362115, "post_id": 41856666, "comment_id": 70897368, "body": "Thank you for answering, but i can&#39;t understand why *p=32-8 implies a=24. i mean what does *p=24 mean? is 24 an address?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 81, "user_id": 6494599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dxzyRf-1i8U/AAAAAAAAAAI/AAAAAAAAAHw/IXsAzgZ3ngc/photo.jpg?sz=128", "display_name": "Giorgio M.", "link": "https://stackoverflow.com/users/6494599/giorgio-m"}, "edited": false, "score": 0, "creation_date": 1485362249, "post_id": 41856666, "comment_id": 70897452, "body": "<code>p</code> is a pointer to the <code>a</code> in <code>main</code> (<code>p = &amp;a</code>); <code>*p = 24</code> means <code>assign 24 to the variable pointed to by p</code>."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 81, "user_id": 6494599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dxzyRf-1i8U/AAAAAAAAAAI/AAAAAAAAAHw/IXsAzgZ3ngc/photo.jpg?sz=128", "display_name": "Giorgio M.", "link": "https://stackoverflow.com/users/6494599/giorgio-m"}, "edited": false, "score": 0, "creation_date": 1485363352, "post_id": 41856666, "comment_id": 70898256, "body": "@Giorgio: If <code>p == &amp;a</code>, then <code>*p == a</code>, so <code>*p = 24</code> is the same as writing <code>a = 24</code>."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 5, "last_activity_date": 1485361629, "creation_date": 1485361629, "answer_id": 41856666, "question_id": 41856500, "link": "https://stackoverflow.com/questions/41856500/pointers-and-double-pointers-exercise/41856666#41856666", "title": "Pointers and double pointers exercise", "body": "<p>By the time <code>func</code> is called, <code>a</code>=24, and <code>p</code> is the address of <code>a</code>.</p>\n\n<p>Inside of <code>function</code>, however, <code>a</code> refers to the <em>global</em> <code>a</code>, not the one declared in <code>main</code>.  <code>func</code> first assigns <em>that</em> <code>a</code> to be 15.  Then:</p>\n\n<ul>\n<li><code>**y</code> is the <code>a</code> in <code>main</code></li>\n<li><code>x - a</code> is <code>main</code>'s <code>a</code> (24) minus the global <code>a</code> (15), yielding 9</li>\n<li>so <code>**y = x - a</code> sets <code>main</code>'s <code>a</code> to 9</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485361931, "post_id": 41856758, "comment_id": 70897242, "body": "How can <code>a</code> be 24 and 15 at the same time?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485362349, "post_id": 41856758, "comment_id": 70897523, "body": "@ScottHunter  Hi the 3/4 developer.:) It is not at the same time. Before the function call a is equal to 24. And   inside the function due to the statement  **y = x - a; that is equivalent to 24 - 15 a is set to 9."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485362591, "post_id": 41856758, "comment_id": 70897687, "body": "<i>which</i> <code>a</code> is set to 9?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485362642, "post_id": 41856758, "comment_id": 70897732, "body": "@ScottHunter In the function."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1485361861, "creation_date": 1485361861, "answer_id": 41856758, "question_id": 41856500, "link": "https://stackoverflow.com/questions/41856500/pointers-and-double-pointers-exercise/41856758#41856758", "title": "Pointers and double pointers exercise", "body": "<p>Before this call</p>\n\n<pre><code>funct (a, &amp;p);\n</code></pre>\n\n<p>the variable <code>a</code> is equal to 24 due to this statement</p>\n\n<pre><code>*p = 32 - b;\n</code></pre>\n\n<p>where <code>b</code> is equal to 8.</p>\n\n<p>Inside the function in this statements</p>\n\n<pre><code> a = 15;\n **y = x - a;\n</code></pre>\n\n<p><code>a</code> is set to <code>24 - 15</code>  that is equal to <code>8</code> because the dereferenced pointer <code>*y</code> points to the original variable <code>a</code>.</p>\n"}], "owner": {"reputation": 81, "user_id": 6494599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dxzyRf-1i8U/AAAAAAAAAAI/AAAAAAAAAHw/IXsAzgZ3ngc/photo.jpg?sz=128", "display_name": "Giorgio M.", "link": "https://stackoverflow.com/users/6494599/giorgio-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 41856666, "answer_count": 2, "score": 0, "last_activity_date": 1485361861, "creation_date": 1485361078, "last_edit_date": 1485361769, "question_id": 41856500, "link": "https://stackoverflow.com/questions/41856500/pointers-and-double-pointers-exercise", "title": "Pointers and double pointers exercise", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n int a;\n\n int main ()\n {\n     int a, b;\n     int *p;\n     b = 8;\n     p = &amp;b;\n     a = 32 + b;\n     p = &amp;a;\n     *p = 32 - b;\n     funct (a, &amp;p);\n     *p = 2;\n     printf (\"a=%d b=%d\", a, b);\n }\n\n funct (int x, int **y)\n {\n     a = 15;\n     **y = x - a;\n     *y = &amp;a;\n }\n</code></pre>\n\n<p>Can someone tell me why a is equal to 9? I tried to solve it but i can't understand it really well</p>\n\n<p>I tried the code in <code>code::blocks</code> and apparently <code>a</code> goes from 40 to 24 after </p>\n\n<pre><code>`*p=32-b`\n</code></pre>\n\n<p>Also,<code>p=&amp;b</code> means that the pointer points to the address of b,then after <code>a=32+8</code> \n<code>p=&amp;a</code> and the double pointer <code>*p= 32-b</code> so <code>*p=24</code> . Is <code>24</code> the address in which the pointer <code>p</code> is stored? because now the value of <code>a</code> should be 24 according to the exercise and I can't understand why.</p>\n\n<p>Can someone tell me step by step how do I deal with those kind of exercise ?</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1485360563, "post_id": 41856267, "comment_id": 70896284, "body": "Use a debugger to figure it out?"}, {"owner": {"reputation": 47, "user_id": 7141347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6d1f57341c876cc317b898deb7501a?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Hasan", "link": "https://stackoverflow.com/users/7141347/syed-hasan"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1485360642, "post_id": 41856267, "comment_id": 70896329, "body": "Not have the know how of a debugger yet."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 5, "creation_date": 1485360674, "post_id": 41856267, "comment_id": 70896358, "body": "<code>printf(&quot;0 111 22222 3333333 ... uptil 9&quot;); for(;;) for(;;) return 1;</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1485360706, "post_id": 41856267, "comment_id": 70896385, "body": "If you don;t have/know how to use a debugger, then put print statements wherever you want to know what is going on."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1485360764, "post_id": 41856267, "comment_id": 70896430, "body": "@George <code>for (i = 0; i &lt; 100; ++i) printf(&quot;I will not throw paper airplanes in class\\n&quot;);</code>"}, {"owner": {"reputation": 47, "user_id": 7141347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6d1f57341c876cc317b898deb7501a?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Hasan", "link": "https://stackoverflow.com/users/7141347/syed-hasan"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1485361305, "post_id": 41856267, "comment_id": 70896801, "body": "@PaulOgilvie I shall try that method, thank you."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1485367447, "post_id": 41856267, "comment_id": 70900890, "body": "@George: Why <code>return 1</code> inside and why nesting infinite loops?"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485367582, "post_id": 41856267, "comment_id": 70900973, "body": "@Olaf The joke doesn&#39;t make sense now as the q&#39;s been edited :( It originally said something like &quot;How can I print 0 111 22222 3333333 ... uptil 9 using nested for loops?&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1485360747, "post_id": 41856328, "comment_id": 70896413, "body": "Why not just <code>x++</code>?"}, {"owner": {"reputation": 47, "user_id": 7141347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6d1f57341c876cc317b898deb7501a?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Hasan", "link": "https://stackoverflow.com/users/7141347/syed-hasan"}, "edited": false, "score": 0, "creation_date": 1485360953, "post_id": 41856328, "comment_id": 70896566, "body": "I do need to understand the logic though."}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 47, "user_id": 7141347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6d1f57341c876cc317b898deb7501a?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Hasan", "link": "https://stackoverflow.com/users/7141347/syed-hasan"}, "edited": false, "score": 0, "creation_date": 1485361184, "post_id": 41856328, "comment_id": 70896720, "body": "@SyedHasan I changed it so it would be easier to understand. Every time you increment <code>x</code> by one, and the number of prints <code>y</code> by two, starting from <code>1</code>."}, {"owner": {"reputation": 47, "user_id": 7141347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6d1f57341c876cc317b898deb7501a?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Hasan", "link": "https://stackoverflow.com/users/7141347/syed-hasan"}, "edited": false, "score": 0, "creation_date": 1485361429, "post_id": 41856328, "comment_id": 70896892, "body": "Thanks for the help. Appreciated!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485367501, "post_id": 41856328, "comment_id": 70900925, "body": "Too complicated. Why not simply step by 2?"}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485369272, "post_id": 41856328, "comment_id": 70901939, "body": "@Olaf please explain"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485369666, "post_id": 41856328, "comment_id": 70902155, "body": "Just that: There is no need for two variables in the outer loop."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485449260, "post_id": 41856328, "comment_id": 70939305, "body": "@UrielEli: Which is bad coding style. Don&#39;t put expressions into the loop-control which are not related for loop control. Putting all code into a single line is the opposite of good advice."}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485449500, "post_id": 41856328, "comment_id": 70939421, "body": "@Olaf I mean the <code>y &lt;= x * 2 + 1</code>, not the <code>printf</code>, and fixed."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485450319, "post_id": 41856328, "comment_id": 70939899, "body": "Still not clear why you print a space. Should be a linebreak."}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485450371, "post_id": 41856328, "comment_id": 70939937, "body": "@Olaf OP probably edited question. It was <code>0 111 22222</code> before."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485450587, "post_id": 41856328, "comment_id": 70940047, "body": "Yes, but that was long before your last edits. Anyway, I removed the DV. Although It is spoon-feeding OP instead of really helping. For homework questions which show at least some code&amp;effort (others are off-topic here), it is better to point at the errors on the original code, not just provide your own code without explanation. Feeding fish vs. teaching how to fish, you know ..."}], "tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": true, "score": 4, "last_activity_date": 1485450399, "last_edit_date": 1485450399, "creation_date": 1485360604, "answer_id": 41856328, "question_id": 41856267, "link": "https://stackoverflow.com/questions/41856267/display-numbers-an-odd-number-of-times-in-c/41856328#41856328", "title": "Display numbers an odd number of times in C", "body": "<p>Iterate all numbers (<code>x</code>), while incrementing the number of prints (<code>y</code>) by 2, strting from <code>1</code> (<a href=\"https://ideone.com/PXVfSU\" rel=\"nofollow noreferrer\">see online</a>):</p>\n\n<pre><code>for (int x = 0, y = 1; x &lt;= 9; x++, y += 2)\n{\n    for (int z = 0; z &lt; y; z++)\n            printf(\"%d\", x);        \n    printf(\"\\n\");\n}\n</code></pre>\n\n<hr>\n\n<p>I would say </p>\n\n<pre><code>for (int x = 0; x &lt;= 9; x++) {\n        for (int y = 0; y &lt; x * 2 + 1; y++)\n                printf(\"%d\", x);\n        printf(\"\\n\")\n}\n</code></pre>\n\n<p>is more elegant, but it can be a little tricky to follow.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 7141347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6d1f57341c876cc317b898deb7501a?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Hasan", "link": "https://stackoverflow.com/users/7141347/syed-hasan"}, "edited": false, "score": 0, "creation_date": 1485361513, "post_id": 41856487, "comment_id": 70896943, "body": "This logic is what I was closest to, will give it a shot. Thanks @Paul"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1485361440, "last_edit_date": 1485361440, "creation_date": 1485361021, "answer_id": 41856487, "question_id": 41856267, "link": "https://stackoverflow.com/questions/41856267/display-numbers-an-odd-number-of-times-in-c/41856487#41856487", "title": "Display numbers an odd number of times in C", "body": "<p>That would be then:</p>\n\n<pre><code>int main()\n{\n    int x, y, z;\n\n    printf(\"0\");\n    for (x=1, y=3; x&lt;=9; x++, y+=2)\n    {\n        printf(\"\\n\");\n        for (z=y; z; z--)\n        {\n            printf(\"%d\", x);    \n        }       \n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0\n111\n22222\n3333333\n444444444\n55555555555\n6666666666666\n777777777777777\n88888888888888888\n9999999999999999999\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 7141347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6d1f57341c876cc317b898deb7501a?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Hasan", "link": "https://stackoverflow.com/users/7141347/syed-hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 41856328, "answer_count": 2, "score": 1, "last_activity_date": 1485450399, "creation_date": 1485360435, "last_edit_date": 1485360885, "question_id": 41856267, "link": "https://stackoverflow.com/questions/41856267/display-numbers-an-odd-number-of-times-in-c", "title": "Display numbers an odd number of times in C", "body": "<p>An output is given in the following form :</p>\n\n<pre><code>OUTPUT :\n0\n111\n22222\n3333333\n... up to 9.\n</code></pre>\n\n<p>The task I was given was to write a code for this output using nested <code>for</code> loops.</p>\n\n<p>The closest I have gotten to figuring it out is this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint main()\n{\n    int x=0, y=0, z=0;\n\n    for (x=1; x&lt;=9; x=x+1)\n    {\n        printf(\"\\n\");\n        for (y=0; y&lt;=10; y=y+1)\n        {\n            for(z==y; y&lt;x; y++)\n            {\n                printf(\"%d\", x);    \n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I was also instructed to \"Refrain from using Arrays or others methods of solving this question.\" </p>\n\n<p>I cant figure out my mistake. Help would be appreciated. </p>\n\n<p>The output from this program is here: <a href=\"https://i.stack.imgur.com/IfNPe.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/IfNPe.png</a></p>\n"}, {"tags": ["c", "arrays", "thread-safety", "c99", "static-variables"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485358707, "post_id": 41855483, "comment_id": 70894883, "body": "A global variable or a local <code>static</code> variable are basically the same. All you have changed is really just the scope (practically speaking). And initialization of local <code>static</code> variables is thread-safe."}, {"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485359226, "post_id": 41855483, "comment_id": 70895272, "body": "Are we sure that initialization of a <b>static</b> local variable is made upon the first call to the subroutine? I&#39;m not - can somebody confirm?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485359662, "post_id": 41855483, "comment_id": 70895650, "body": "@linuxfan I don&#39;t think there is a standard requirement about it as it doesn&#39;t affect the semantics. But the common implementation is to place the initialized variables with static storage into the dedicated <code>.data</code> section in the binary during compile time. Actually it wouldn&#39;t make sense to force the compiler to include a <i>one time</i> initialization code into a function. Such a code will require some extra tracking (some other static variables?). Update: Hey, look, there <b>is</b> a standard requirement..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485360380, "post_id": 41855483, "comment_id": 70896165, "body": "&quot;considering the array initialization that takes place at first call of the function, not at startup&quot; - That&#39;s wrong. Initialisation of static objects is completed before <code>main</code> is called. An assignment is not an initialisation."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485360586, "post_id": 41855483, "comment_id": 70896302, "body": "I would not bet on this. Use C11 <code>_Thread_local</code> to be on the safe side. As a personal note: I&#39;d rather have the array outside the function body, properly documented."}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485360893, "post_id": 41855483, "comment_id": 70896519, "body": "@Olaf Where did I get that idea? Are local statics in C++ initialized on first function call?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1485361118, "post_id": 41855483, "comment_id": 70896682, "body": "@Silicomancer, nops, local statics are also initialized at program startup in C++"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485361196, "post_id": 41855483, "comment_id": 70896726, "body": "@Silicomancer: This is C, not C++! Therefore I commented in C context. I&#39;m not a clairvoyant, so how would I know why you thought that?"}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1485361211, "post_id": 41855483, "comment_id": 70896737, "body": "@KeineLust Here they say something different: <a href=\"http://stackoverflow.com/q/55510/1421332\">stackoverflow.com/q/55510/1421332</a>"}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485361257, "post_id": 41855483, "comment_id": 70896771, "body": "@Olaf I know, just trying to understand the differences"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485361312, "post_id": 41855483, "comment_id": 70896810, "body": "@Silicomancer: The actual question is: why do you assume two different languages have to behave identical= (retorical question, let&#39;s not discuss this further)"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1485361726, "post_id": 41855483, "comment_id": 70897118, "body": "@Silicomancer I don&#39;t think there&#39;s anything contrary in the the question you linked to. An answer by Arkadiy quotes the same from C++ standard and other answers, albeit experimental in nature, says/shows the same."}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1485362652, "post_id": 41855483, "comment_id": 70897741, "body": "@P.P. Sorry, you lost me. All those answers behind the link say that static locals in C++ are initialised on usage. Not on startup and not on function call. While for C99 you quoted that it is done at/before startup. In which way is this compatible?"}], "answers": [{"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1485360231, "post_id": 41856066, "comment_id": 70896056, "body": "OT: Is it my impression or people still prefers POSIX threads over C11 threads?"}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1485360334, "post_id": 41856066, "comment_id": 70896121, "body": "Interesting. Wait... were did I get the idea local statics are initialized on first function call? Is it that way in C++?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485360472, "post_id": 41856066, "comment_id": 70896224, "body": "You should update your links to the current standard (final draft actually): <a href=\"http://port70.net/~nsz/c/c11/n1570.html\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html</a>"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485360531, "post_id": 41856066, "comment_id": 70896261, "body": "@Olaf The question is specifically about C99. So, it&#39;s appropriate to quote C99 (draft)."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1485360592, "post_id": 41856066, "comment_id": 70896306, "body": "@KeineLust C11 threads support isn&#39;t widely available (notably glibc doesn&#39;t provide it yet). So, most still prefer POSIX threads I guess."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485360645, "post_id": 41856066, "comment_id": 70896334, "body": "@P.P.: Sorry, I oversaw the c99 tag at the question."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1485360839, "post_id": 41856066, "comment_id": 70896480, "body": "@Silicomancer C++ standard says something quite similar too. From C++14 (N3797 draft): <i>Every object of static storage duration is zero-initialized at program startup before any other initialization takes place. In some cases, additional initialization is done late</i>."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1485359861, "creation_date": 1485359861, "answer_id": 41856066, "question_id": 41855483, "link": "https://stackoverflow.com/questions/41855483/thread-safety-of-local-static-array-in-c99/41856066#41856066", "title": "Thread safety of local static array in C99", "body": "<p>It's safe. All objects with static storage duration are initialized <em>before</em> program startup. That means even before any threads come into play.</p>\n\n<p><a href=\"http://port70.net/~nsz/c/c99/n1256.html#5.1.2\" rel=\"nofollow noreferrer\">5.1.2 Execution environments</a>:</p>\n\n<blockquote>\n  <p>Two execution environments are defined: freestanding and hosted. In\n  both cases, program startup occurs when a designated C function is\n  called by the execution environment. <strong>All objects with static storage\n  duration shall be initialized (set to their initial values) before\n  program startup.</strong> The manner and timing of such initialization are\n  otherwise unspecified. Program termination returns control to the\n  execution environment.</p>\n</blockquote>\n\n<p>(emphasis mine).</p>\n\n<p>C99 didn't have the concept of threads. But that's how I'd interpret the above quote from the standard.</p>\n"}], "owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 41856066, "answer_count": 1, "score": 0, "last_activity_date": 1485359861, "creation_date": 1485358341, "question_id": 41855483, "link": "https://stackoverflow.com/questions/41855483/thread-safety-of-local-static-array-in-c99", "title": "Thread safety of local static array in C99", "body": "<p>The following is thread safe since each array element is accessed by only one thread (including the real world part not shown here):</p>\n\n<pre><code>static bool myArray[THREAD_COUNT] = {false}; // Only used in DoSomething()\n\nvoid DoSomething(uint8_t threadIndex)\n{\n   myArray[threadIndex] = true;\n   // Real world function is more complex\n}\n</code></pre>\n\n<p>Now consider the following code:</p>\n\n<pre><code>void DoSomething(uint8_t threadIndex)\n{\n   static bool myArray[THREAD_COUNT] = {false};\n   myArray[threadIndex] = true;\n   // Real world function is more complex\n}\n</code></pre>\n\n<p>Is this function threadsafe too (especially considering the array initialization that takes place at first call of the function, not at startup)?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1485359327, "post_id": 41855464, "comment_id": 70895370, "body": "Are you trying to spare two lines of <code>#if &#47; #endif</code>?"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1485360066, "post_id": 41855464, "comment_id": 70895917, "body": "Also note that the use of <code>__has_include</code> is not <i>standard</i> in C, as it is in C++17, albeit support by compiler vendors exists. Thought I&#39;d mention this since you&#39;ve tagged <code>C</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1485360863, "post_id": 41855464, "comment_id": 70896496, "body": "Names starting with two underscores are unconditionally reserved for the implementation. You should not even use them as macro paramter names. And <code>_Static_assert</code> is <b>not</b> a preprocessor function! And from the error messages: you seem to compile as C99, but <code>_Static_assert</code> was introduced with C11. You should get the standards correct first."}, {"owner": {"reputation": 959, "user_id": 2606319, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a8cf7cca527c5d75729ed9d1313008dd?s=128&d=identicon&r=PG&f=1", "display_name": "Alfred Zien", "link": "https://stackoverflow.com/users/2606319/alfred-zien"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1485439054, "post_id": 41855464, "comment_id": 70931794, "body": "@EugeneSh. Actually, I wanted to make it as part of another macro to assert &quot;existence&quot; of specific file. Anyway, it is not related to question above."}, {"owner": {"reputation": 959, "user_id": 2606319, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a8cf7cca527c5d75729ed9d1313008dd?s=128&d=identicon&r=PG&f=1", "display_name": "Alfred Zien", "link": "https://stackoverflow.com/users/2606319/alfred-zien"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1485439713, "post_id": 41855464, "comment_id": 70932199, "body": "@DeiDei what tags do I need then?"}], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 2606319, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a8cf7cca527c5d75729ed9d1313008dd?s=128&d=identicon&r=PG&f=1", "display_name": "Alfred Zien", "link": "https://stackoverflow.com/users/2606319/alfred-zien"}, "edited": false, "score": 0, "creation_date": 1485439626, "post_id": 41857457, "comment_id": 70932140, "body": "It is not a problem to write extra lines of code. <code>CHECK()</code>  should be part of another macro, that is doing some another work, but should assert users if there is no such include."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 959, "user_id": 2606319, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a8cf7cca527c5d75729ed9d1313008dd?s=128&d=identicon&r=PG&f=1", "display_name": "Alfred Zien", "link": "https://stackoverflow.com/users/2606319/alfred-zien"}, "edited": false, "score": 1, "creation_date": 1485440563, "post_id": 41857457, "comment_id": 70932802, "body": "@AlfredZien <code>__has_include</code> needs to come after an <code>#if</code> directive and you can&#39;t make a macro that expands to an <code>#if</code> directive (or any preprocessing directive for that matter). Hence the need for another layer."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1485363969, "creation_date": 1485363969, "answer_id": 41857457, "question_id": 41855464, "link": "https://stackoverflow.com/questions/41855464/static-assert-with-has-include/41857457#41857457", "title": "_Static_assert with __has_include", "body": "<p>If all fails (and you can hardly argue with: \"__has_include must be used within a preprocessing directive\"), throw another layer of indirection at it:</p>\n\n<pre><code>h_assert(){\n    for h; do\nprintf '\n#if !__has_include(\"%s\")\n_Static_assert(0,\"__has_include(\\\"%s\\\")\");\n#endif\n' \"$h\" \"$h\"\n    done\n}\nh_assert foo.h bar.h baz.h #Generate the header assertions with a POSIX shell\n</code></pre>\n"}], "owner": {"reputation": 959, "user_id": 2606319, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a8cf7cca527c5d75729ed9d1313008dd?s=128&d=identicon&r=PG&f=1", "display_name": "Alfred Zien", "link": "https://stackoverflow.com/users/2606319/alfred-zien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1494, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1485363969, "creation_date": 1485358285, "last_edit_date": 1485360928, "question_id": 41855464, "link": "https://stackoverflow.com/questions/41855464/static-assert-with-has-include", "title": "_Static_assert with __has_include", "body": "<p>I wanna make macro, that checks that file is \"includable\".\nSomething like this:</p>\n\n<pre><code>#define CHECK(__file)    \\\n    _Static_assert( __has_include(__file), \"Error\")\nCHECK(\"header.h\");\n</code></pre>\n\n<p>But it produces errors like</p>\n\n<pre><code>f.c:28:3: __has_include must be used within a preprocessing directive\nf.c:28:3: Implicit declaration of function '__has_include' is invalid in C99\nf.c:28:3: Static_assert expression is not an integral constant expression\n</code></pre>\n\n<p>Is this even possible? Or maybe there is different solution that will give similar result?</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["c", "arguments", "type-conversion"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 3, "creation_date": 1485357567, "post_id": 41855181, "comment_id": 70894060, "body": "You cannot. Why do you think functions like printf require a format string?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5979025"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1485357604, "post_id": 41855181, "comment_id": 70894082, "body": "Any idea or workarounds for my function then?"}, {"owner": {"reputation": 701, "user_id": 3983756, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/966fffbafc3c218b194488772be93d6c?s=128&d=identicon&r=PG", "display_name": "ThunderWiring", "link": "https://stackoverflow.com/users/3983756/thunderwiring"}, "edited": false, "score": 2, "creation_date": 1485357695, "post_id": 41855181, "comment_id": 70894149, "body": "a workaround: define a <code>struct</code> with the fields you want, and pass it to the function that writes to the file. That function reads the relevant data from the struct and writes them to your log."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5979025"}, "reply_to_user": {"reputation": 10381, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1485357800, "post_id": 41855181, "comment_id": 70894229, "body": "@Dan Unfortunately, I am confined to C only as of now."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1485357925, "post_id": 41855181, "comment_id": 70894325, "body": "<a href=\"http://codereview.stackexchange.com/q/115143/29485\">This example</a> of <code>_Generic</code> is the beginning of a C  solution.  The main idea is to use <code>_Generic</code> to also pass a value to indicate how to process the ... arguments."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1485358035, "post_id": 41855181, "comment_id": 70894406, "body": "You could pass a tagged union. The stdio way of passing the type information in the string is also a (not very pretty) possibility."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1485358278, "post_id": 41855387, "comment_id": 70894595, "body": "UV for <code>_Generic</code> which is a portable C11 way to know what the types are, albeit limited to a prior defined set."}], "tags": [], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "is_accepted": true, "score": 4, "last_activity_date": 1485358094, "creation_date": 1485358094, "answer_id": 41855387, "question_id": 41855181, "link": "https://stackoverflow.com/questions/41855181/how-do-i-access-a-specific-argument-without-knowing-its-type-variable-argument/41855387#41855387", "title": "How do I access a specific argument without knowing it&#39;s type [variable arguments] in C?", "body": "<p>There is no portable standard way to know what the types are. </p>\n\n<p>The first solution that comes to mind is to use the already well-known C idiom of having to pass a format string (e.g. <code>printf</code>, <code>scanf</code>).</p>\n\n<pre><code>void write_log(FILE * fp, char * event, const char* fmt, ...)\n{\n    va_list list;\n    va_start(list, event);\n\n    // process fmt and act accordingly\n}\n</code></pre>\n\n<p>If it's going to be only one extra parameter then you can pass an <code>enum</code>:</p>\n\n<pre><code>enum type {\n   integer,\n   pointer,\n   floating\n};\n\nvoid write_log(FILE * fp, char * event, enum type t, ...)\n{\n    switch(t)\n    {\n    case integer: // do stuff with integer\n    case pointer: // do stuff with pointer\n    }\n}\n</code></pre>\n\n<p>If you have access to C11's <code>_Generic</code> capabilities, as most modern compilers do, you can have something of the sort:</p>\n\n<pre><code>void write_logi(FILE * fp, char * event, int);\nvoid write_logf(FILE * fp, char * event, float);\nvoid write_logfoo(FILE * fp, char * event, struct foo);\n\n#define write_log(file, event, arg) _Generic((arg), \\\n    int: write_logi,                                \\\n    float: write_logf,                              \\\n    struct foo: write_logfoo                        \\\n)(file, event, arg)\n</code></pre>\n\n<p>Then you can call as:</p>\n\n<pre><code>write_log(fp, event, i/*int*/);\nwrite_log(fp, event, f/*float*/);\n</code></pre>\n\n<p>and the appropriate function will be selected. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5979025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 1, "accepted_answer_id": 41855387, "answer_count": 1, "score": 4, "last_activity_date": 1485358094, "creation_date": 1485357516, "question_id": 41855181, "link": "https://stackoverflow.com/questions/41855181/how-do-i-access-a-specific-argument-without-knowing-its-type-variable-argument", "title": "How do I access a specific argument without knowing it&#39;s type [variable arguments] in C?", "body": "<p>Okay, so I am writing a log service that writes some data to some file (let's say the file's name is <strong>log</strong>).</p>\n\n<p>The type of data that I want to write varies, it might be int or string or something else.</p>\n\n<p>So far this is how my function looks:</p>\n\n<pre><code>void write_log(FILE * fp, char * event, ...)\n{\n    va_list list;\n    va_start(list, event);\n    // Cannot use va_arg(list, type_of_var) here!!!\n}\n</code></pre>\n\n<p>The way I call the function might vary depending on my data:</p>\n\n<pre><code>write_log(fp, \"Memory size :\", mem_size);\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>write_log(fp, \"Username :\", username);\n</code></pre>\n\n<p>I have no idea if the 3rd argument is going to be a string or an int or something else.</p>\n\n<p>I could have used <code>va_arg(list, type_of_var)</code> but since my data's type varies arbitrarily I cannot use it.</p>\n\n<p>Any idea how can I access the 3rd argument of the function without knowing it's type?</p>\n"}, {"tags": ["c", "recursion", "linked-list", "filesystems"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 3, "creation_date": 1485357999, "post_id": 41855178, "comment_id": 70894381, "body": "<code>new_node-&gt;fullPathToFile = f_path;</code> should be <code>new_node-&gt;fullPathToFile = strdup(f_path);</code>"}, {"owner": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1485359398, "post_id": 41855178, "comment_id": 70895419, "body": "@mch THANK YOU!"}], "owner": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485357503, "creation_date": 1485357503, "question_id": 41855178, "link": "https://stackoverflow.com/questions/41855178/recursive-function-linked-lists-sprintf-not-saving-variable-into-struct-varia", "title": "Recursive function + linked lists. sprintf not saving variable into struct variable.", "body": "<p>The following code allows me to read a directory recursively and print all the files and their paths in a struct variable using linked lists. The problem I'm having is within the function when I print out the full path it shows it correctly but in the main when I was read through the linked lists, the fullpaths show up as null. Where am I going wrong? </p>\n\n<p>Code : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;dirent.h&gt;\n\nconst char *path_format = \"%s/%s\";\n\ntypedef struct search search;\nstruct search {\n    char *path;\n    char *fileName;\n    char *fullPathToFile;\n    search *next;\n};\n\n// Modified to take a node ptr. This should be the last node in the list\n// Returns a node ptr. This is the new last node in the list\nsearch * show_dir_content(char * path, search *node) {\n    DIR * d = opendir(path);                \n    if(d==NULL) return node;                     \n    struct dirent * dir;     \n\n    while ((dir = readdir(d)) != NULL) {    \n        if(dir-&gt; d_type != DT_DIR) {\n            // Found a file. Alloc a new search node and fill in\n\n            search *new_node = malloc(sizeof(search));\n\n            char f_path[512]; \n            sprintf(f_path, path_format, path, dir-&gt;d_name);\n            printf(\"%s\\n\",f_path);\n\n\n\n            new_node-&gt;fullPathToFile = f_path;\n            new_node-&gt;fileName = dir-&gt;d_name;\n            new_node-&gt;path = path;\n            new_node-&gt;next = NULL;\n            // Append to end of list\n            node-&gt;next = new_node;\n            // Update node pointer to now point to the new node\n            node = node-&gt;next;\n        }\n        else\n            // if it is a directory\n            if(dir -&gt; d_type == DT_DIR &amp;&amp; strcmp(dir-&gt;d_name,\".\")!=0 &amp;&amp; strcmp(dir-&gt;d_name,\"..\")!=0 ) {\n                char d_path[512]; \n                sprintf(d_path, path_format, path, dir-&gt;d_name);\n                node = show_dir_content(d_path, node);\n            }\n    }\n    closedir(d);\n    // Return the last node (this may be same as input parameter if no files found                               \n    return node;\n}\n\n\nint main(int argc, char **argv) {\n    search root = {0};\n    show_dir_content(argv[1], &amp;root);       // Note that root is a dummy node.\n                                            // The list actually begins at root-&gt;next\n\n    // Also, before you exit, free all mem\n    search *node = root.next, *next, *clr;\n\n    while (NULL != node) {\n        //printf(\"f_path : \\t%s\\n\", node-&gt;fullPathToFile);\n        next = node-&gt;next;\n        node = next;\n    }\n\n    while (NULL != node) {\n        free(node-&gt;path);\n        free(node-&gt;fileName);\n        free(node-&gt;fullPathToFile);\n        clr = node-&gt;next;\n        free(node);\n        node = next;\n    }\n\n    return(0);\n}\n</code></pre>\n\n<p>Printing the fullpath within the function seems to work well with <code>printf(\"%s\\n\",f_path);</code> but when I try to store <code>f_path</code> into my  <code>new_node-&gt;fullPathToFile</code> and then try printing it in the main it doesn't go as I had hoped. You can try uncommenting <code>printf(\"f_path : \\t%s\\n\", node-&gt;fullPathToFile);</code> to understand what I mean. </p>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["c", "malloc"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7469549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55fce86ab1edc9e2c3d6cae344a30b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Tamir", "link": "https://stackoverflow.com/users/7469549/tamir"}, "edited": false, "score": 0, "creation_date": 1485357597, "post_id": 41855097, "comment_id": 70894077, "body": "Why is it O(n) if I free the space which holds n ints?"}, {"owner": {"reputation": 3, "user_id": 7469549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55fce86ab1edc9e2c3d6cae344a30b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Tamir", "link": "https://stackoverflow.com/users/7469549/tamir"}, "edited": false, "score": 0, "creation_date": 1485358183, "post_id": 41855097, "comment_id": 70894523, "body": "I mean, if we counted the space of n ints why wouldn&#39;t we count the space of n-1 ints, n-2 ints, and so on to 1?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3, "user_id": 7469549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55fce86ab1edc9e2c3d6cae344a30b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Tamir", "link": "https://stackoverflow.com/users/7469549/tamir"}, "edited": false, "score": 1, "creation_date": 1485358208, "post_id": 41855097, "comment_id": 70894542, "body": "@Tamir: because your code needs that much space to work. Although a good compiler might notice your inner loop and the allocation is pointless and completely remove it."}, {"owner": {"reputation": 3, "user_id": 7469549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55fce86ab1edc9e2c3d6cae344a30b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Tamir", "link": "https://stackoverflow.com/users/7469549/tamir"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485358492, "post_id": 41855097, "comment_id": 70894734, "body": "@Olaf: Thanks mate! got it!"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1485357305, "creation_date": 1485357305, "answer_id": 41855097, "question_id": 41855079, "link": "https://stackoverflow.com/questions/41855079/space-complexity-using-the-malloc-function/41855097#41855097", "title": "Space complexity using the malloc function", "body": "<p>It's O(n). You never allocate more than the space required to hold n <code>ints</code>. The reason is precisely because of what you noted. You free the memory in each iteration. Memory, unlike time, can be recycled.</p>\n"}], "owner": {"reputation": 3, "user_id": 7469549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55fce86ab1edc9e2c3d6cae344a30b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Tamir", "link": "https://stackoverflow.com/users/7469549/tamir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1485357305, "creation_date": 1485357243, "question_id": 41855079, "link": "https://stackoverflow.com/questions/41855079/space-complexity-using-the-malloc-function", "title": "Space complexity using the malloc function", "body": "<p>Here's a function, I want to understand it's space complexity:</p>\n\n<pre><code>void func_test(int n)\n{\n    int *p;\n    for (int i=0; i&lt;=n; i++)\n    {\n        p=malloc(sizeof(int)*i);\n        for (int j=0; j&lt;i; j++) *(p+j)=j; //just to insert some numbers to p\n        free(p);\n    }\n    return;\n}\n</code></pre>\n\n<p>I know that in total I allocated sizeof(int)*n^2 bytes, but before I allocated a memory I \"free\" it. \nSo, is the space complexity O(n^2) or O(1)?</p>\n\n<p>Thanks, Tamir.</p>\n"}, {"tags": ["c", "assembly", "simulink", "low-level"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6863836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c2afc309a5a965a515e2e7c9fe4572?s=128&d=identicon&r=PG&f=1", "display_name": "Kieron Holt", "link": "https://stackoverflow.com/users/6863836/kieron-holt"}, "is_accepted": false, "score": 1, "last_activity_date": 1485359797, "creation_date": 1485359797, "answer_id": 41856043, "question_id": 41854973, "link": "https://stackoverflow.com/questions/41854973/error-no-matching-asm-pattern-exists/41856043#41856043", "title": "Error: No matching asm pattern exists", "body": "<pre><code>asm uint32 HAL_GetTB(uint16 reg)\n{\nGetTimebaseVal:\n    mfspr   r3, reg\n}\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>asm uint32 HAL_GetTB(uint16 sprreg)\n{\n% reg sprreg;\n! \"r3\"\nGetTimebaseVal:\n    mfspr   r3, sprreg\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6863836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c2afc309a5a965a515e2e7c9fe4572?s=128&d=identicon&r=PG&f=1", "display_name": "Kieron Holt", "link": "https://stackoverflow.com/users/6863836/kieron-holt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485359797, "creation_date": 1485356952, "last_edit_date": 1485357320, "question_id": 41854973, "link": "https://stackoverflow.com/questions/41854973/error-no-matching-asm-pattern-exists", "title": "Error: No matching asm pattern exists", "body": "<p>Writing in C in ASCET (ASCET is like SIMULINK).</p>\n\n<p>External Source is</p>\n\n<pre><code>asm uint32 HAL_GetTB(uint16 reg);\nuint32 HAL_GetTimeBase(uint16 reggy);\n\nuint32 HAL_GetTimeBase(uint16 reggy)\n{\n    uint32 rtn;\n    rtn = HAL_GetTB(reggy);\n    return(rtn);    \n}\n\nasm uint32 HAL_GetTB(uint16 reg)\n{\nGetTimebaseVal:\n    mfspr   r3, reg\n}\n</code></pre>\n\n<p>Header is:</p>\n\n<pre><code>#define TIMEBASELOWREAD   268\n#define TIMEBASEHIGHREAD   269\n\nextern  uint32 HAL_GetTimeBase(uint16 reggy);\n</code></pre>\n\n<p>The two modules of C code are :</p>\n\n<pre><code>uint32 TBH;\n\nTBH = HAL_GetTimeBase(TIMEBASEHIGHREAD);\nreturn(TBH);\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>uint32 TBL;\n\nTBL = HAL_GetTimeBase(TIMEBASELOWREAD);\nreturn(TBL);\n</code></pre>\n\n<p>Coding on Freescale MPC5674 (Fixed Point) for RTA(active) with object base controller Arithmetic and Implicit Implementation</p>\n\n<p>I am very confused as to the error. </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1485356184, "post_id": 41854628, "comment_id": 70893090, "body": "It depends on what you are trying to achieve with the code at this point - since you didn&#39;t comment it at all no one can really guess your intent, but it looks like you are trying to insert a node and your logic is muddled."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1485356326, "post_id": 41854628, "comment_id": 70893196, "body": "If you are not clear about the steps then try drawing it out on paper first."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 5, "last_activity_date": 1485355975, "creation_date": 1485355975, "answer_id": 41854628, "question_id": 41854559, "link": "https://stackoverflow.com/questions/41854559/why-is-this-program-producing-a-runtime-error/41854628#41854628", "title": "Why is this program producing a runtime error?", "body": "<p>In this block:</p>\n\n<pre><code>if(start == NULL){\n    temp-&gt;LChild = NULL;\n    start-&gt;LChild = temp; // &lt;&lt;&lt; `start` is NULL here !!!\n    start = temp;\n}\n</code></pre>\n\n<p>you are trying to dereference <code>start</code> while it is still <code>NULL</code>, hence the seg fault.</p>\n"}, {"tags": [], "owner": {"reputation": 1632, "user_id": 7462657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da6cde7de38cf0b6686e85193273b12f?s=128&d=identicon&r=PG&f=1", "display_name": "xander", "link": "https://stackoverflow.com/users/7462657/xander"}, "is_accepted": false, "score": 1, "last_activity_date": 1485356026, "creation_date": 1485356026, "answer_id": 41854648, "question_id": 41854559, "link": "https://stackoverflow.com/questions/41854559/why-is-this-program-producing-a-runtime-error/41854648#41854648", "title": "Why is this program producing a runtime error?", "body": "<p>The \"SIGSEGV, Segmentation fault\" is something like an invalid pointer access or in your case a simple Null Pointer Exception known in other programming languages.</p>\n\n<p>So you can't access members of a null pointer obviously.</p>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1485359606, "creation_date": 1485359606, "answer_id": 41855974, "question_id": 41854559, "link": "https://stackoverflow.com/questions/41854559/why-is-this-program-producing-a-runtime-error/41855974#41855974", "title": "Why is this program producing a runtime error?", "body": "<p>The problem with your code is that you (in several places) use a pointer without making sure that it isn't <code>NULL</code>. Code like this:</p>\n\n<pre><code>NODE start = NULL;\nstart-&gt;LChild = ....whatever....;\n</code></pre>\n\n<p>will cause a runtime error as you are dereferencing a <code>NULL</code> pointer.</p>\n\n<p>So when working with pointers the important lesson is:</p>\n\n<blockquote>\n  <p>Always make sure that a pointer is pointing to something valid before dereferencing it</p>\n</blockquote>\n\n<p>The answer from @PaulR already tells you one place where your code is wrong but... there are more.</p>\n\n<p><strong>In insert() (as already mentioned by @PaulR)</strong></p>\n\n<pre><code>if(start == NULL){\n    temp-&gt;LChild = NULL;\n    start-&gt;LChild = temp; // ups, start is NULL\n                          // You probably just need to delete this line\n                          // as all you want is to make start equal to temp\n    start = temp;\n}\n</code></pre>\n\n<p><strong>In insert_at_beg()</strong></p>\n\n<pre><code>    temp-&gt;RChild = start;\n    start-&gt;LChild = temp; // ups, start may be NULL\n                          // you need to add a check here like\n                          // if (start != NULL) start-&gt;LChild = temp;\n    start = temp;\n</code></pre>\n\n<p><strong>In insert_after_pos()</strong></p>\n\n<pre><code>q = start;                // start may be NULL\nfor(int i = 0; i &lt; pos-1; i++){\n    q = q-&gt;RChild;        // so here you may be using a NULL pointer\n</code></pre>\n\n<p>So before going into the loop you need to check <code>start</code> is <code>NULL</code> and return if it is.</p>\n\n<p><strong>In delete()</strong></p>\n\n<pre><code>if(start-&gt;info == num){  // ups, start may be NULL\n                         // Add a check\n</code></pre>\n\n<p><strong>In reverse()</strong></p>\n\n<pre><code>p1 = start;        // start may be NULL\np2 = p1-&gt;RChild;   // ups....\n                   // Add a check\n</code></pre>\n\n<p>Some other comments:</p>\n\n<p>1) typedef'ing a pointer into the name <code>NODE</code> is very unclear for other readers of your code. Avoid it! Or at least use a name that clearly tells that it is a pointer, e.g. <code>NODE_P</code></p>\n\n<p>2) Always check the value returned by <code>scanf</code>. Example: </p>\n\n<pre><code>if (scanf(\"%d\", &amp;num) != 1)\n{\n    // Input error\n    ....\n    Add error handling here\n    ....\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5940391"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1485359606, "creation_date": 1485355801, "last_edit_date": 1485356810, "question_id": 41854559, "link": "https://stackoverflow.com/questions/41854559/why-is-this-program-producing-a-runtime-error", "title": "Why is this program producing a runtime error?", "body": "<p>I am writing a C program for doubly linked list. Following code just contain <code>main</code> function and <code>insert</code> function. </p>\n\n<p><strong>cfile.c</strong></p>\n\n<pre><code>/*\n    In the following code doubly linked list is implemented\n*/\n\n//header files\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//create structure for node\nstruct node{\n    int info;\n    struct node *LChild;\n    struct node *RChild;\n}*start;\n\ntypedef struct node *NODE;\n\n//function to insert data in the list\nvoid insert(){\n    int data;\n    NODE q, temp;\n    temp = (NODE)malloc(sizeof(struct node));\n    if(temp){\n        printf(\"\\nEnter the data to be inserted in the list: \");\n        scanf(\"%d\", &amp;data);\n        temp-&gt;info = data;\n        temp-&gt;RChild = NULL;\n    }\n    else{\n        printf(\"Out of memory.\");\n        return;\n    }\n    if(start == NULL){\n        temp-&gt;LChild = NULL;\n        start-&gt;LChild = temp;\n        start = temp;\n    }\n    else{\n        q = start;\n        while(q-&gt;RChild != NULL){\n            q = q-&gt;RChild;\n        }\n        q-&gt;RChild = temp;\n        temp-&gt;LChild = q;\n    }\n    return;\n}\n\n//function to insert at the begining\nvoid insert_at_beg(){\n    int data;\n    NODE temp;\n    temp = (NODE)malloc(sizeof(struct node));\n    if(temp){\n        printf(\"\\nEnter the data to be inserted at the beginning of the list: \");\n        scanf(\"%d\", &amp;data);\n        temp-&gt;info = data;\n        temp-&gt;LChild = NULL;\n        temp-&gt;RChild = start;\n        start-&gt;LChild = temp;\n        start = temp;\n    }\n    else{\n        printf(\"Out of memory.\");\n    }\n    return;\n}\n\n//function to insert after a position\nvoid insert_after_pos(){\n    int data, pos;\n    NODE temp, q;\n    printf(\"\\nEnter the position after which data will be inserted: \");\n    scanf(\"%d\", &amp;pos);\n    q = start;\n    for(int i = 0; i &lt; pos-1; i++){\n        q = q-&gt;RChild;\n        if(q == NULL){\n            printf(\"There are less than %d position.\", pos);\n            return;\n        }\n    }\n    temp = (NODE)malloc(sizeof(struct node));\n    if(temp){\n        printf(\"\\nEnter the data to be inserted after the %d position: \", pos);\n        scanf(\"%d\", &amp;data);\n        temp-&gt;info = data;\n        q-&gt;RChild-&gt;LChild = temp;\n        temp-&gt;RChild = q-&gt;RChild;\n        temp-&gt;LChild = q;\n        q-&gt;RChild = temp;\n    }\n    return;\n}\n\n//function to delete the node\nvoid delete(){\n    NODE temp, q;\n    int num;\n    printf(\"\\nEnter the data to be deleted: \");\n    scanf(\"%d\", &amp;num);\n    if(start-&gt;info == num){\n        temp = start;\n        start = start-&gt;RChild;\n        start-&gt;LChild = NULL;\n        free(temp);\n        return;\n    }\n    q = start;\n    while(q-&gt;RChild-&gt;RChild != NULL){\n        if(q-&gt;RChild-&gt;info == num){\n            temp = q-&gt;RChild;\n            q-&gt;RChild = temp-&gt;RChild;\n            temp-&gt;RChild-&gt;LChild = q;\n            free(temp);\n            return;\n        }\n        q =  q-&gt;RChild;\n    }\n    if(q-&gt;RChild-&gt;info == num){\n        temp = q-&gt;RChild;\n        free(temp);\n        q-&gt;RChild = NULL;\n        return;\n    }\n    printf(\"\\nElement %d is not found on this list.\", num);\n    return;\n}\n\n//function to display the list\nvoid display(){\n    NODE q;\n    if(start == NULL){\n        printf(\"\\nList is empty.\");\n        return;\n    }\n    q = start;\n    while(q != NULL){\n        printf(\"%d \", q-&gt;info);\n        q = q-&gt;RChild;\n    }\n    return;\n}\n\n//function to reverse the list\nvoid reverse(){\n    NODE p1, p2;\n    p1 = start;\n    p2 = p1-&gt;RChild;\n    p1-&gt;RChild = NULL;\n    p1-&gt;LChild = p2;\n    while(p2 != NULL){\n        p2-&gt;LChild = p2-&gt;RChild;\n        p2-&gt;RChild = p1;\n        p1 = p2;\n        p2 = p2-&gt;LChild;\n    }\n    start = p1;\n    return;\n}\n\nint main(){\n    int choice;\n    char ch;\n    start = NULL;\n    printf(\"Menu for doubly linked list\");\n    do{\n        printf(\"\\n1.Insert\\n2.Insert at beginning\\n3.Insert after position\\n4.Display\\n5.Delete\\n6.Reverse\\n7.Exit\\nEnter your choice: \");\n        scanf(\"%d\", &amp;choice);\n        switch(choice){\n            case 1: insert();\n                    break;\n            case 2: insert_at_beg();\n                    break;\n            case 3: insert_after_pos();\n                    break;\n            case 4: display();\n                    break;\n            case 5: delete();\n                    break;\n            case 6: reverse();\n                    break;\n            case 7: exit(0);\n                    break;\n            default: printf(\"Invalid choice!\"); \n        }\n        printf(\"\\nDo you want to continue ? \");\n        scanf(\" %c\", &amp;ch);\n    }while(ch == 'y' || ch == 'Y');\n    return 0;\n}\n</code></pre>\n\n<p>On compiling the above code with <code>gcc cfile.c</code> it is compiling successfully. \nBut it is producing runtime error. On debugging with <code>gdb</code> I came to know that there is some error at line 28. Unfortunately I cannot understand what's the error. It's showing</p>\n\n<pre><code>Program received signal \nSIGSEGV, Segmentation fault.\n0x000000010040116a in insert () at cfile.c:28\n28          start-&gt;LChild = temp;\n</code></pre>\n\n<p>I know it has to do something with the dereferencing pointer.</p>\n\n<p>But why ? whats wrong with this code, I have done <code>start = NULL</code> before calling <code>insert</code> function.</p>\n\n<p>Here is the stackdump</p>\n\n<pre><code>Exception: STATUS_ACCESS_VIOLATION at rip=0010040116A\nrax=0000000000000000 rbx=00000000FFFFCC40 rcx=0000000600018040\nrdx=0000000600028460 rsi=00000006000283B0 rdi=0000000000000000\nr8 =00000000FFFFB5FC r9 =000000018013E150 r10=0000000100000000\nr11=000000010040111C r12=00000000FFFFCC61 r13=0000000000000000\nr14=00000000FFFFCC61 r15=000000018021AE83\nrbp=00000000FFFFCBC0 rsp=00000000FFFFCB80\nprogram=E:\\Learning\\Languages\\C\\a.exe, pid 8612, thread main\ncs=0033 ds=002B es=002B fs=0053 gs=002B ss=002B\nStack trace:\nFrame        Function    Args\n000FFFFCBC0  0010040116A (000FFFFCC61, 00000000000, 000FFFFCC61, 000FFFFCCC0)\n000FFFFCBF0  001004011E6 (00000000020, FF0700010302FF00, 00180047891, 00000000000)\n000FFFFCCC0  00180047902 (00000000000, 00000000000, 00000000000, 00000000000)\n00000000000  00180045693 (00000000000, 00000000000, 00000000000, 00000000000)\n000FFFFFFF0  00180045744 (00000000000, 00000000000, 00000000000, 00000000000)\nEnd of stack trace\n</code></pre>\n\n<p>I don't know anything about the stackdump. So I am unable to understand it.</p>\n\n<p><strong>gcc version</strong>: 5.4.0\n<strong>gdb version</strong>: 7.10.1</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1485357018, "post_id": 41854503, "comment_id": 70893667, "body": "Your <code>void insert_sorted(List** head, int value)</code>function is doing too much work."}], "answers": [{"tags": [], "owner": {"reputation": 426, "user_id": 7463256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a1a7bdd45330e15f6d4c609be767c4?s=128&d=identicon&r=PG&f=1", "display_name": "aldarel", "link": "https://stackoverflow.com/users/7463256/aldarel"}, "is_accepted": false, "score": 0, "last_activity_date": 1485357366, "creation_date": 1485357366, "answer_id": 41855125, "question_id": 41854503, "link": "https://stackoverflow.com/questions/41854503/linked-list-output-not-showing-correctly/41855125#41855125", "title": "Linked List output not showing correctly", "body": "<p>Your code sometimes inserted value twice (when value was not placed at the end of the list). This should fix the problem:</p>\n\n<pre><code>while(temp-&gt;next != NULL)\n{\n    if(temp-&gt;data &lt; value &amp;&amp; (temp-&gt;next)-&gt;data &gt; value)\n    {\n        node-&gt;next = temp-&gt;next;\n        temp-&gt;next = node;\n        break;\n    }\n    else\n        temp = temp-&gt;next;\n}\n\nif(temp-&gt;next == NULL)\n    temp-&gt;next = node;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1543, "user_id": 7267150, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/daaac3b040330dcbbbe64bcba04cfc82?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/7267150/some-user"}, "edited": false, "score": 1, "creation_date": 1485359134, "post_id": 41855164, "comment_id": 70895207, "body": "thanks for your answer, errors are fixed but the list was not sorted correctly"}, {"owner": {"reputation": 1543, "user_id": 7267150, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/daaac3b040330dcbbbe64bcba04cfc82?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/7267150/some-user"}, "edited": false, "score": 0, "creation_date": 1485360033, "post_id": 41855164, "comment_id": 70895891, "body": "That&#39;s awesome! Working perfectly."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "reply_to_user": {"reputation": 1543, "user_id": 7267150, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/daaac3b040330dcbbbe64bcba04cfc82?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/7267150/some-user"}, "edited": false, "score": 1, "creation_date": 1485360280, "post_id": 41855164, "comment_id": 70896088, "body": "Well thanks, but the answer by wildplasser is more insightful."}], "tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 1, "last_activity_date": 1485359666, "last_edit_date": 1485359666, "creation_date": 1485357464, "answer_id": 41855164, "question_id": 41854503, "link": "https://stackoverflow.com/questions/41854503/linked-list-output-not-showing-correctly/41855164#41855164", "title": "Linked List output not showing correctly", "body": "<p>The problem can be fixed as follows. If the node is inserted in the middle, the function can return and does not need to append the value at the end.</p>\n\n<pre><code>void insert_sorted(List** head, int value) {\n    List* temp = NULL;\n    List* node = (List*)malloc(sizeof(List));\n\n    node-&gt;data = value;\n    node-&gt;next = NULL;\n\n    if (*head == NULL || (*head)-&gt;data &gt;= value) { // &lt;-- fix\n        node-&gt;next = *head;\n        *head = node;\n    }\n    else {\n        temp = *head;\n        while (temp-&gt;next != NULL) {\n            if ( (temp-&gt;next)-&gt;data &gt; value ) {\n                node-&gt;next = temp-&gt;next;\n                temp-&gt;next = node;\n                return; // &lt;-- fix\n            }\n            else\n                temp = temp-&gt;next;\n        }\n        temp-&gt;next = node;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1543, "user_id": 7267150, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/daaac3b040330dcbbbe64bcba04cfc82?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/7267150/some-user"}, "edited": false, "score": 0, "creation_date": 1485358886, "post_id": 41855177, "comment_id": 70895026, "body": "Thanks for your answer and this one is perfectly working as I expected, I mean no more errors and sorting the list correctly!"}, {"owner": {"reputation": 1543, "user_id": 7267150, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/daaac3b040330dcbbbe64bcba04cfc82?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/7267150/some-user"}, "edited": false, "score": 0, "creation_date": 1485358967, "post_id": 41855177, "comment_id": 70895086, "body": "Now I am gonna think about this logic and trying to get it with a while loop!"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 1543, "user_id": 7267150, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/daaac3b040330dcbbbe64bcba04cfc82?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/7267150/some-user"}, "edited": false, "score": 0, "creation_date": 1485359169, "post_id": 41855177, "comment_id": 70895231, "body": "Why? There is no need for a while loop."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1485359202, "post_id": 41855177, "comment_id": 70895248, "body": "The <code>for</code> loop is syntactic sugar for a <code>while</code> loop of special structure."}, {"owner": {"reputation": 1543, "user_id": 7267150, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/daaac3b040330dcbbbe64bcba04cfc82?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/7267150/some-user"}, "edited": false, "score": 0, "creation_date": 1485359280, "post_id": 41855177, "comment_id": 70895330, "body": "@wildplasser yeah! I don&#39;t need while as for is the perfect one. :)"}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1485360992, "post_id": 41855177, "comment_id": 70896597, "body": "The solution is very insightful; it seems to be naturally obtainable from a recursive implementation."}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": true, "score": 1, "last_activity_date": 1485357499, "creation_date": 1485357499, "answer_id": 41855177, "question_id": 41854503, "link": "https://stackoverflow.com/questions/41854503/linked-list-output-not-showing-correctly/41855177#41855177", "title": "Linked List output not showing correctly", "body": "<p>Your <code>void insert_sorted(List** head, int value)</code> function is doing too much work. </p>\n\n<hr>\n\n<pre><code>void insert_sorted(List** head, int value) {\n\n    List* node = malloc(sizeof *node);\n    node-&gt;data = value;\n\n    for( ; *head ; head = &amp;(*head)-&gt;next) {\n          if ((*head)-&gt;data &gt; value) break; // we should insert before *head\n    }\n\n    // When we get here *head points to the pointer that needs to get node's value\n    // This can either be the original head (as supplied as argument tothe function)\n    // or some of the -&gt; next pointers, or even the last -&gt;next pointer.\nnode-&gt;next = *head;\n*head = node;\n}\n</code></pre>\n"}], "owner": {"reputation": 1543, "user_id": 7267150, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/daaac3b040330dcbbbe64bcba04cfc82?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/7267150/some-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 41855177, "answer_count": 3, "score": 1, "last_activity_date": 1485359743, "creation_date": 1485355666, "last_edit_date": 1485359743, "question_id": 41854503, "link": "https://stackoverflow.com/questions/41854503/linked-list-output-not-showing-correctly", "title": "Linked List output not showing correctly", "body": "<p>I can't figure out where is the problem in my code:</p>\n\n<pre><code>typedef struct list List;\n\nstruct list {\n   int data;\n   List* next;\n};\n\nvoid insert_sorted(List** head, int value);\n\nint main() {\n    List* head = NULL;\n\n    /*\n    insert_sorted(&amp;head, 20);\n    insert_sorted(&amp;head, 10);\n    insert_sorted(&amp;head, 5);\n    */\n\n    insert_sorted(&amp;head, 3);\n    insert_sorted(&amp;head, 2);\n    insert_sorted(&amp;head, 40);\n    insert_sorted(&amp;head, 10);\n    //insert_sorted(&amp;head, 40);\n\n    List* temp = head;\n\n    while (temp != NULL) {\n        printf(\"%d\\t\", temp-&gt;data);\n        temp = temp-&gt;next;\n    }\n\n    printf(\"\\n\\n\");\n\n    return 0;\n}\n\nvoid insert_sorted(List** head, int value) {\n    List* temp = NULL;\n    List* node = (List*)malloc(sizeof(List));\n\n    node-&gt;data = value;\n    node-&gt;next = NULL;\n\n    if (*head == NULL || (*head)-&gt;data &gt;= value) {\n        node-&gt;next = *head;\n        *head = node;\n    } else {\n        temp = *head;\n        while (temp-&gt;next != NULL) {\n            if (temp-&gt;data &lt; value &amp;&amp; (temp-&gt;next)-&gt;data &gt; value) {\n                node-&gt;next = temp-&gt;next;\n                temp-&gt;next = node;\n            } else\n                temp = temp-&gt;next;\n        }\n        temp-&gt;next = node;\n    }\n}\n</code></pre>\n\n<p><strong>1:</strong></p>\n\n<p>Run the code and see results. (Running and running...) after sorting data it is repeating some values forever.</p>\n\n<p><strong>2:</strong></p>\n\n<p>Go to </p>\n\n<pre><code>  //insert_sorted(&amp;head, 40); \n</code></pre>\n\n<p>this line an remove comment symbols.\nRun the code and mark the result.(Time limit exceeded)</p>\n\n<p><strong>3:</strong>\nFind this and remove comments:</p>\n\n<pre><code>   /*\ninsert_sorted(&amp;head, 20);\n\ninsert_sorted(&amp;head, 10);\n\ninsert_sorted(&amp;head, 5);\n\n*/\n</code></pre>\n\n<p>Run and see results; (Again some problems)</p>\n\n<p><strong>Finally:</strong>\nRemove all comments symbols and run it, this time it is working without any error but not as expected (List is not sorted correctly);</p>\n\n<p>But why this is happening? Any help will be appreciated, and I am not at home at this but a learner.</p>\n"}, {"tags": ["c", "arrays", "x86-64", "calling-convention"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1485355748, "post_id": 41854472, "comment_id": 70892771, "body": "The first quote, by itself, is easy to understand because C is the <a href=\"https://en.wikipedia.org/wiki/Lingua_franca\" rel=\"nofollow noreferrer\">lingua franca</a> of the Unix world. As for the second quote, that C passes arrays as pointers (or rater let the array decay to a pointer to its first element) is because that&#39;s how C worked since the beginning and that&#39;s what the C specification says should happen."}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 1, "creation_date": 1485358029, "post_id": 41854472, "comment_id": 70894403, "body": "<a href=\"http://stackoverflow.com/questions/38800044/what-kind-of-c11-data-type-is-an-array-according-to-the-amd64-abi\">Related question</a>."}], "answers": [{"tags": [], "owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "is_accepted": true, "score": 1, "last_activity_date": 1485357138, "creation_date": 1485357138, "answer_id": 41855032, "question_id": 41854472, "link": "https://stackoverflow.com/questions/41854472/why-is-there-a-calling-convention-for-arrays/41855032#41855032", "title": "Why is there a calling convention for arrays?", "body": "<p>I figured it out: if an array is part of a struct or union, it may be passed in a register.</p>\n\n<p>This C code</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nstruct somebytes {\n  uint8_t bytes[8];\n};\n\nuint8_t plus(struct somebytes p) {\n  return p.bytes[3]+p.bytes[5];\n}\n</code></pre>\n\n<p>translates to this assembly:</p>\n\n<pre><code>mov    %rdi,%rax\nshr    $0x28,%rdi\nshr    $0x18,%rax\nadd    %edi,%eax\nretq   \n</code></pre>\n"}], "owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 1, "closed_date": 1587869452, "accepted_answer_id": 41855032, "answer_count": 1, "score": 5, "last_activity_date": 1485357138, "creation_date": 1485355575, "question_id": 41854472, "link": "https://stackoverflow.com/questions/41854472/why-is-there-a-calling-convention-for-arrays", "closed_reason": "Duplicate", "title": "Why is there a calling convention for arrays?", "body": "<p>I am reading the <a href=\"https://software.intel.com/sites/default/files/article/402129/mpx-linux64-abi.pdf\">System V Application Binary Interface</a>, and there is one part that I cannot make sense of.</p>\n\n<p>First, the document states that</p>\n\n<blockquote>\n  <p>No attempt has been made to specify an ABI for languages other than C</p>\n</blockquote>\n\n<p>(page 10).</p>\n\n<p>Later, on page 20, arrays are classified as MEMORY, POINTER etc.:</p>\n\n<blockquote>\n  <p>The classification of aggregate (structures and arrays) and union types works\n  as follows:<br>\n  ...</p>\n</blockquote>\n\n<p>The classification is then used to define the calling conventions \u2014 how the values and bounds on them are passed to and returned from functions. If I am reading the algorithm correctly, an array could be classified as INTEGER, MEMORY, or SSE.</p>\n\n<p>But in the C language, arrays are always passed and returned as pointers. So why is it useful to classify arrays and in which situation does the array class matter?</p>\n"}, {"tags": ["c", "extract"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485355444, "post_id": 41854369, "comment_id": 70892566, "body": "No, extracting is <i>not</i> the same as shifting."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485355450, "post_id": 41854369, "comment_id": 70892573, "body": "The assignment has less to do with C and more to do with you understanding basic bit-fiddling. Things you need to learn about is the bitwise and operation, the bitwise or operation and the bitwise shift (left and right) operations. Also, try to do it all on paper first, to get it right there. And a last hint, try to do the operations one at a time, and when you have gotten it right <i>then</i> try to make it into a single expression (one step at a time)."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1485355458, "post_id": 41854369, "comment_id": 70892582, "body": "I won&#39;t do it for you, but look at bitwise AND <code>&amp;</code> and bitwise OR <code>|</code> operators for bit extraction, and shifting to move them around."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1485355505, "post_id": 41854369, "comment_id": 70892604, "body": "Hint: you need shifting (<code>&lt;&lt;</code> and <code>&gt;&gt;</code> oprators), masking (<code>&amp;</code> operator) and the <code>|</code> operator."}, {"owner": {"reputation": 303, "user_id": 3264977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5dmA.png?s=128&g=1", "display_name": "catalogue_number", "link": "https://stackoverflow.com/users/3264977/catalogue-number"}, "edited": false, "score": 0, "creation_date": 1485355558, "post_id": 41854369, "comment_id": 70892640, "body": "Imagine an 8-bit system: 0101 1001 Now take the bitwise &amp;: 0101 1001 &amp; 0000 1111  --&gt;  0000 1001"}], "answers": [{"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1485362357, "post_id": 41854819, "comment_id": 70897529, "body": "OP is asking for some hints, not for a complete solution :)"}, {"owner": {"reputation": 233, "user_id": 3005816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i1fKb.jpg?s=128&g=1", "display_name": "Adrien", "link": "https://stackoverflow.com/users/3005816/adrien"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1485369231, "post_id": 41854819, "comment_id": 70901924, "body": "Oops! Once again, I sinned of not reading a question carefully enough. I guess, in my defense, that one can say that &quot;some hints&quot; are indeed contained in a complete solution. I hope I haven&#39;t spoiled OP."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1485369488, "post_id": 41854819, "comment_id": 70902062, "body": "Anyway nice answer ;)"}, {"owner": {"reputation": 67, "user_id": 7469497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b54c151316646c25e5f0515c324397?s=128&d=identicon&r=PG&f=1", "display_name": "kelank", "link": "https://stackoverflow.com/users/7469497/kelank"}, "edited": false, "score": 0, "creation_date": 1485526959, "post_id": 41854819, "comment_id": 70974366, "body": "No, thats ok Adrien. But thanks a lot, you really saved my time dude :D"}, {"owner": {"reputation": 637, "user_id": 4038306, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MpGNMqCM3Qs/AAAAAAAAAAI/AAAAAAAAADs/1aPWPmRZcfY/photo.jpg?sz=128", "display_name": "Marcus Gruneau", "link": "https://stackoverflow.com/users/4038306/marcus-gruneau"}, "edited": false, "score": 1, "creation_date": 1516699284, "post_id": 41854819, "comment_id": 83783868, "body": "b = y &amp; 0x3; /* y AND (...) 0000 0111 */  isnt it supposed to be 0x7 instead of 0x3?"}, {"owner": {"reputation": 2022, "user_id": 1236128, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DxsJR.png?s=128&g=1", "display_name": "Jonathan Komar", "link": "https://stackoverflow.com/users/1236128/jonathan-komar"}, "edited": false, "score": 0, "creation_date": 1576421505, "post_id": 41854819, "comment_id": 104886509, "body": "@Adrien Please check your numbers, Marcus is right. <code>0x3</code> is not <code>0b01110000</code>, it is <code>0b00110000</code>."}], "tags": [], "owner": {"reputation": 233, "user_id": 3005816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i1fKb.jpg?s=128&g=1", "display_name": "Adrien", "link": "https://stackoverflow.com/users/3005816/adrien"}, "is_accepted": true, "score": 3, "last_activity_date": 1485357600, "last_edit_date": 1485357600, "creation_date": 1485356499, "answer_id": 41854819, "question_id": 41854369, "link": "https://stackoverflow.com/questions/41854369/extract-bits-in-c/41854819#41854819", "title": "Extract bits in C", "body": "<p>Extract the bits from x:</p>\n\n<pre><code>int b = x &amp; 0x3E000;  /* x AND (...) 0011 1110 0000 0000 0000*/\n</code></pre>\n\n<p>Shift the extracted bits:</p>\n\n<pre><code>b = b &gt;&gt; 13; /* 13 bits to the right, so that they land up starting on the first position */\n</code></pre>\n\n<p>Clean the bits from z:</p>\n\n<pre><code>z &amp;= 0xFFFFFFE0; /* z AND 1111 1111 1111 1111 1111 1111 1110 0000 */\n</code></pre>\n\n<p>Apply the bits to z:</p>\n\n<pre><code>z |= b;\n</code></pre>\n\n<p>Extract the bits from y:</p>\n\n<pre><code>b = y &amp; 0x3; /* y AND (...) 0000 0111 */ \n</code></pre>\n\n<p>Shift the extracted bits:</p>\n\n<pre><code>b = b &lt;&lt; 5; /* move them 5 bits to the left so that they end up starting on position 5 */\n</code></pre>\n\n<p>Clear the bits from z:</p>\n\n<pre><code>z &amp;= 0xFFFFFF1F; /* z AND 1111 1111 1111 1111 1111 1111 0001 1111 */\n</code></pre>\n\n<p>Apply the bits to z:</p>\n\n<pre><code>z |= b;\n</code></pre>\n\n<p>You can now combine the \"clearings\" into a single operation:</p>\n\n<pre><code>z &amp;= 0xFFFFFF00; /* z AND 1111 1111 1111 1111 1111 1111 0000 0000 */\n</code></pre>\n\n<p>All in a single statement:</p>\n\n<pre><code>z = (z &amp; 0xFFFFFF00) | ((y &amp; 0x3) &lt;&lt; 5) | ((x &amp; 0x3E000) &gt;&gt; 13);\n</code></pre>\n\n<p>This works for 32-bits integers, or <code>int32_t</code> (C99 and beyond).\nWith 64-bits integers (<code>int64_t</code>), you just have to use 0xFFFFFFFFFFFFFF00 as a \"clearing mask\".</p>\n\n<p>If you're using vanilla <code>int</code> variables, get the size in bits using the following:</p>\n\n<pre><code>printf(\"int has %ud bits\\n\", sizeof(int) * 8);\n</code></pre>\n\n<p><code>sizeof()</code> returns the size in bytes of an integer, and then you multiply that result by 8 (bits per byte in 99.999% of cases)to get the size in bits of your integer, and therefore the size of the masks you have to apply.</p>\n\n<p>In general:</p>\n\n<ul>\n<li>Extract bits by applying an AND mask, with every bit set to 0, except those you want to extract, which you will set to 1. The reason is that 0 AND X = 0, but 1 AND X = X.</li>\n<li><p>Shift bits to the position you need them to be.</p></li>\n<li><p>Clear bits by applying an AND mask, with every bit set to 1, except those you want to clear, which you will set to 0. The reason is the same as above.</p></li>\n<li>Apply bits by using an OR operation. You must ensure that the bits you do want to modify on the destination are set to 0, and that those which you do NOT want to modify on the origin are set to 0. The reason for that is that 1 OR X = 1, but 0 OR X = X.</li>\n</ul>\n"}], "owner": {"reputation": 67, "user_id": 7469497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b54c151316646c25e5f0515c324397?s=128&d=identicon&r=PG&f=1", "display_name": "kelank", "link": "https://stackoverflow.com/users/7469497/kelank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10809, "favorite_count": 2, "closed_date": 1485388275, "accepted_answer_id": 41854819, "answer_count": 1, "score": 0, "last_activity_date": 1485357600, "creation_date": 1485355286, "question_id": 41854369, "link": "https://stackoverflow.com/questions/41854369/extract-bits-in-c", "closed_reason": "Not suitable for this site", "title": "Extract bits in C", "body": "<p>I am a bit new to C-programming and I am a bit stuck with this question: </p>\n\n<p>Assume that you have a C program with signed integer (int) variables x, y, and z. All\nvariables contain some arbitrary values. Write a C-statement that extracts the bits with\nindex 17 to 13 from x and places them as the least significant bits in z, and extracts the\nleast 3 significant bits of y and places them in the bits with index 7 to 5 in z. No other\nbits of z should be changed, besides the 8 bits that were extracted from x and y. Note\nthat the bit index 0 is the least significant bit. Your answer should contain one single C\nstatement together with short notes of what the different parts of the statement do.</p>\n\n<p>I understand that extracting is the same thing as shifting if I am not wrong.</p>\n\n<p>But could someone please give me some hints on how to tackle this question?</p>\n\n<p>Thanks, all help will be appriciated!</p>\n"}, {"tags": ["c", "avl-tree"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485355280, "post_id": 41854313, "comment_id": 70892458, "body": "What specifically do you mean by &quot;I have a problem&quot;?"}, {"owner": {"reputation": 33, "user_id": 7049147, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d1b2c8bc723cd06e915c0cd670f8bf69?s=128&d=identicon&r=PG&f=1", "display_name": "Dost", "link": "https://stackoverflow.com/users/7049147/dost"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485355335, "post_id": 41854313, "comment_id": 70892491, "body": "The code won&#39;t run, it gets erros compiling, because I&#39;m using something worng but I dont know how I should do it"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485355367, "post_id": 41854313, "comment_id": 70892514, "body": "Then you should post what the errors say."}, {"owner": {"reputation": 33, "user_id": 7049147, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d1b2c8bc723cd06e915c0cd670f8bf69?s=128&d=identicon&r=PG&f=1", "display_name": "Dost", "link": "https://stackoverflow.com/users/7049147/dost"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485355465, "post_id": 41854313, "comment_id": 70892584, "body": "request for member \u2018bal\u2019 in something not a structure or union"}, {"owner": {"reputation": 33, "user_id": 7049147, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d1b2c8bc723cd06e915c0cd670f8bf69?s=128&d=identicon&r=PG&f=1", "display_name": "Dost", "link": "https://stackoverflow.com/users/7049147/dost"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1485355479, "post_id": 41854313, "comment_id": 70892592, "body": "It always considers a not a structure or union"}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1485355554, "creation_date": 1485355554, "answer_id": 41854464, "question_id": 41854313, "link": "https://stackoverflow.com/questions/41854313/avl-tree-access-pointer-in-struct/41854464#41854464", "title": "AVL tree, access pointer in struct", "body": "<p><code>a</code> is an <code>AVL</code>, which is a <em>pointer</em> to a <code>struct avl</code>.  Thus, to access a field of that structure, you'd need something like <code>a-&gt;left</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 7049147, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d1b2c8bc723cd06e915c0cd670f8bf69?s=128&d=identicon&r=PG&f=1", "display_name": "Dost", "link": "https://stackoverflow.com/users/7049147/dost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1485360812, "creation_date": 1485355128, "last_edit_date": 1485360812, "question_id": 41854313, "link": "https://stackoverflow.com/questions/41854313/avl-tree-access-pointer-in-struct", "title": "AVL tree, access pointer in struct", "body": "<pre><code>#define LEFT   1\n#define BAL    0\n#define RIGHT -1\n\ntypedef struct avl {\n    int value;\n    int bal;\n    struct avl *left, *right;\n} *AVL;\n\nAVL lower (AVL a){\n    while ((a.left != NULL) || (a.right != NULL)) {\n        if (a.bal = LEFT){\n            AVL lower (a.left);\n        } else AVL lower (a.right);\n    }\n    return (a);\n}\n</code></pre>\n\n<p>In this code, I have a problem accessing the <code>struct</code> inside my <code>struct</code>.\nWhat should I write in this code where I have <code>a.left</code>, <code>a.right</code>? Thank you all.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 4, "creation_date": 1485353710, "post_id": 41853776, "comment_id": 70891312, "body": "<code>lst[i] = malloc(sizeof(char)*(len&#47;2));</code> 1) this will allocate too little if the string length happens to be odd 2) you also need space for the two <code>&#39;\\0&#39;</code> terminators in the result strings. 2a) you need to null-terminate the resulting strings  3) <code>(*lst)[0]=s[i];</code> this is just wrong. What is your intention here?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1485353947, "post_id": 41853776, "comment_id": 70891496, "body": "C strings are null terminated arrays and it looks like you forgot to process those nulls..."}, {"owner": {"reputation": 289, "user_id": 2965071, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ylMpw.png?s=128&g=1", "display_name": "HoopsMcCann", "link": "https://stackoverflow.com/users/2965071/hoopsmccann"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1485354360, "post_id": 41853776, "comment_id": 70891782, "body": "@wildplasser I changed it to <code>*(lst[0])=s[i]</code>. I&#39;m trying to access to the first <code>char</code> array"}, {"owner": {"reputation": 289, "user_id": 2965071, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ylMpw.png?s=128&g=1", "display_name": "HoopsMcCann", "link": "https://stackoverflow.com/users/2965071/hoopsmccann"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1485354566, "post_id": 41853776, "comment_id": 70891929, "body": "@SergeBallesta How would I do that?"}], "answers": [{"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1485355752, "post_id": 41854201, "comment_id": 70892773, "body": "&quot;The name of an array is, in fact, a pointer to the first element&quot; - this is <i>not</i> true.  An expression of array type <i>will be converted</i> (&quot;decay&quot;) to a pointer to the first element if the expression is not the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or if it&#39;s a string literal used to initialize a character array in a declaration.  Arrays are not pointers, period."}, {"owner": {"reputation": 303, "user_id": 3264977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5dmA.png?s=128&g=1", "display_name": "catalogue_number", "link": "https://stackoverflow.com/users/3264977/catalogue-number"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1485355930, "post_id": 41854201, "comment_id": 70892912, "body": "For the purposes of someone learning C, or rather, trying to understand how pointers and arrays are used in algorithms, thinking of an array as a pointer to element zero is helpful. I updated the wording to say &#39;is best thought of,&#39; but I stand by the sentiment."}], "tags": [], "owner": {"reputation": 303, "user_id": 3264977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5dmA.png?s=128&g=1", "display_name": "catalogue_number", "link": "https://stackoverflow.com/users/3264977/catalogue-number"}, "is_accepted": true, "score": 2, "last_activity_date": 1485357030, "last_edit_date": 1485357030, "creation_date": 1485354779, "answer_id": 41854201, "question_id": 41853776, "link": "https://stackoverflow.com/questions/41853776/c-function-returning-a-pointer-to-a-pointer/41854201#41854201", "title": "C Function Returning a Pointer to a Pointer", "body": "<p>First, make sure to allocate space for the null byte in the output strings:</p>\n\n<pre><code>    for(int i=0; i&lt;2; i++){\n        /* Add an extra space for the \\0 */\n        lst[i] = malloc(sizeof(char)*(len/2 + 1));\n    }\n</code></pre>\n\n<p>Your main problem was the weird <code>(*lst)[0]=s[i];</code> part. This has to do with how arrays work in C.</p>\n\n<p>The name of an array is best thought of as a pointer to the zeroth element. So, <code>(*lst)</code> is exactly equivalent to writing <code>lst[0]</code>. so <code>(*lst)[0]</code> was just repeatedly overwriting the first character in the first array with the latest even letter, while <code>(*lst)[1]</code> was just repeatedly overwriting the second letter of the first array. The second array was never modified since it was allocated, and just contained random data.</p>\n\n<pre><code>    for(int i=0; i&lt;len; i++){\n        if(i%2==0){\n            /* i/2 makes sure every space gets filled,\n            remember / means integer division in C */\n            lst[0][i/2]=s[i];\n        }else{\n            lst[1][i/2]=s[i];\n        }\n    }\n    /* Null terminate both strings, to be safe */\n\n    /* terminate one early if the string was odd */\n    lst[0][len/2 -len%2] = '\\0';\n\n    lst[1][len/2 ] = '\\0';\n\n    return lst;\n\n}\n</code></pre>\n\n<p>This solution is 'quick and dirty' - one of the arrays always gets double terminated, but that's ok since we allocated room for both of them.</p>\n"}, {"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 1, "last_activity_date": 1485355893, "creation_date": 1485355893, "answer_id": 41854601, "question_id": 41853776, "link": "https://stackoverflow.com/questions/41853776/c-function-returning-a-pointer-to-a-pointer/41854601#41854601", "title": "C Function Returning a Pointer to a Pointer", "body": "<pre><code>char **split_odd_even (char *org) {\n\nchar **lst;\nsize_t len, idx;\n\nlst = malloc(2 * sizeof *lst);\nlen = strlen (org);\n\nlst[0] = malloc ((len+3)/2);\nlst[1] = malloc ((len+3)/2);\n\nfor (idx =0; org[idx]; idx++){\n        lst[idx%2][idx/2] = org[idx];\n        }\n\nlst[idx%2][idx/2] = 0;\nidx++;\nlst[idx%2][idx/2] = 0;\n\nreturn lst;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1485355960, "creation_date": 1485355960, "answer_id": 41854622, "question_id": 41853776, "link": "https://stackoverflow.com/questions/41853776/c-function-returning-a-pointer-to-a-pointer/41854622#41854622", "title": "C Function Returning a Pointer to a Pointer", "body": "<p>Here is a more idiomatic C way directly using pointers instead of indexes:</p>\n\n<pre><code>char **parity_strings(const char *s) {\n    int len = strlen(s);\n    char **lst = malloc(sizeof(char*)*2);\n    for(i=0; i&lt;2; i++){\n        lst[i] = malloc((len+3)/2);  // reserve room for the terminating null\n    }\n    char *even = lst[0], *odd = lst[1];  // initializes pointers to even and odd parts\n    for(;;) {                // tests inside the loop\n        *even++ = *s++;      // directly processes s pointer!\n        if (*s == '\\0') break;\n        *odd++ = *s++;       // every second is odd...\n        if (*s == '\\0') break;\n    }\n    *even = *odd = '\\0';     // terminate the strings\n    return lst;\n}\n</code></pre>\n\n<p>This way indeed forget the initial <code>s</code>, but you do no need it again, and what is changed is just a local pointer. But as <code>lst</code> must be returned, the code never changes <code>lst[i]</code> but uses copies</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1485356692, "last_edit_date": 1485356692, "creation_date": 1485356226, "answer_id": 41854725, "question_id": 41853776, "link": "https://stackoverflow.com/questions/41853776/c-function-returning-a-pointer-to-a-pointer/41854725#41854725", "title": "C Function Returning a Pointer to a Pointer", "body": "<p>It seems you mean the following function as it is shown in the demonstrative program below</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar ** parity_strings( const char *s ) \n{\n    size_t len = strlen( s );\n\n    char **lst = malloc( 2 * sizeof( char* ) );\n\n    lst[0] = ( char * )malloc( ( len + 1 ) / 2 + 1 );\n    lst[1] = ( char * )malloc( len / 2 + 1 );\n\n    size_t i = 0;\n\n    for ( ; i &lt; len; i++ )\n    {\n        lst[i % 2][i / 2] = s[i];\n    }\n\n    lst[i % 2][i / 2] = '\\0';\n    ++i;\n    lst[i % 2][i / 2] = '\\0';\n\n    return lst;\n}\n\n\nint main(void) \n{\n    char *s[] = { \"A\", \"AB\", \"ABC\", \"ABCD\", \"ABCDE\" };\n\n    for ( size_t i = 0; i &lt; sizeof( s ) / sizeof( *s ); i++ )\n    {\n        char **p = parity_strings( s[i] );\n\n        printf( \"%s %s %s\\n\", p[0], p[1], s[i] );\n\n        free( p[0] );\n        free( p[1] );\n        free( p );\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>A  A\nA B AB\nAC B ABC\nAC BD ABCD\nACE BD ABCDE\n</code></pre>\n\n<p>As for your function then you incorrectly calculate the lengths of the new arrays and forgot to append them with the terminating zero. Also you should free all the allocated memory when the strings are not needed any more.</p>\n\n<p>And in these statements</p>\n\n<pre><code>(*lst)[0]=s[i];\n(*lst)[1]=s[i];\n</code></pre>\n\n<p>should be written at least like</p>\n\n<pre><code>(*lst)[i / 2] = s[i];\n(*( lst + 1 ))[i / 2] = s[i];\n</code></pre>\n"}], "owner": {"reputation": 289, "user_id": 2965071, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ylMpw.png?s=128&g=1", "display_name": "HoopsMcCann", "link": "https://stackoverflow.com/users/2965071/hoopsmccann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 41854201, "answer_count": 4, "score": 0, "last_activity_date": 1485357030, "creation_date": 1485353487, "question_id": 41853776, "link": "https://stackoverflow.com/questions/41853776/c-function-returning-a-pointer-to-a-pointer", "title": "C Function Returning a Pointer to a Pointer", "body": "<p>I'm a bit new to C here, and just wanted to understand a few things about pointers, pointers to pointers, and strings. Here's what I have written down so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n/* Return a pointer to an array of two strings. The first is the characters\n   of string s that are at even indices and the second is the characters from\n   s that are at odd indices */\n\nchar **parity_strings(const char *s) {\n    int len = strlen(s);\n    char **lst = malloc(sizeof(char*)*2);\n    for(int i=0; i&lt;2; i++){\n        lst[i] = malloc(sizeof(char)*(len/2));\n    }\n    for(int i=0; i&lt;len; i++){\n        if(i%2==0){\n            (*lst)[0]=s[i];\n        }else{\n            (*lst)[1]=s[i];\n        }\n    }\n    return lst;\n\n}\n\nint main(int argc, char **argv) {\n    char **r = parity_strings(argv[1]);\n    printf(\"%s %s %s\", r[0], r[1], argv[1]);\n    return 0;\n}\n</code></pre>\n\n<p>So I want to dynamically allocate the memory needed for both the string array, and the strings themselves. I want to know if I have the right idea here by wanting to return a pointer of type <code>char**</code> which points to two pointers of type <code>char*</code>, and then from there access each <code>char</code> of the string. </p>\n\n<p>My output is not as expected. I'm relatively new to C, so there are things I'm still learning about.</p>\n\n<p>Any help would be appreciated, thanks.</p>\n"}, {"tags": ["c", "linux", "gcc", "reverse-engineering", "ida"], "answers": [{"comments": [{"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1485355606, "post_id": 41853795, "comment_id": 70892672, "body": "Or -ggdb which is supposed to generate debugging info specifically for gdb."}, {"owner": {"reputation": 181, "user_id": 7469249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50cf29410b08273bac6a0995f211ac61?s=128&d=identicon&r=PG&f=1", "display_name": "duliba", "link": "https://stackoverflow.com/users/7469249/duliba"}, "edited": false, "score": 0, "creation_date": 1485355649, "post_id": 41853795, "comment_id": 70892702, "body": "I&#39;m setting a break point on a memory address, it&#39;s worked before on programs not compiled with -g flag. See the edit plz."}], "tags": [], "owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "is_accepted": false, "score": 2, "last_activity_date": 1485353554, "creation_date": 1485353554, "answer_id": 41853795, "question_id": 41853729, "link": "https://stackoverflow.com/questions/41853729/unable-to-set-breakpoints-in-gdbserver-via-ida/41853795#41853795", "title": "Unable to set breakpoints in gdbserver via IDA", "body": "<p>In order for break points to work on lines or (not-exported) functions, the program needs to have debugging symbols. Your <code>gcc</code> command line does not include those. In that situation, if you were to create a break point on a <em>memory address</em>, the break point would work; but it does not work for lines and not-exported functions, since the necessary information for the debugger (or the <code>gdbserver</code> stub) is just not available.</p>\n\n<p>To fix, add the <code>-g</code> parameter to your <code>gcc</code> command line.</p>\n"}], "owner": {"reputation": 181, "user_id": 7469249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50cf29410b08273bac6a0995f211ac61?s=128&d=identicon&r=PG&f=1", "display_name": "duliba", "link": "https://stackoverflow.com/users/7469249/duliba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485355608, "creation_date": 1485353344, "last_edit_date": 1485355608, "question_id": 41853729, "link": "https://stackoverflow.com/questions/41853729/unable-to-set-breakpoints-in-gdbserver-via-ida", "title": "Unable to set breakpoints in gdbserver via IDA", "body": "<p>I'm using an Ubuntu 14.04 machine with binary exploitation exercises (learning how to use buffer overflows, write shellcodes, etc).\nSo far, I've been able to run these programs, written exclusively in C and compiled with gcc, via gdbserver and connect to it with IDA Pro 6.8 remotely.</p>\n\n<p>However, right now there's a program that I'm trying to run and <strong>it doesn't hit breakpoints set in IDA</strong>. There's clearly communication between the two, and I can execute the program via IDA, but it doesn't stop at any breakpoints I set, including ones in the program's execution flow that would have definitely been hit. I set breakpoints on <em>addresses</em>, so unavailable debugging information can't be the reason.\nAlso, it works perfectly fine when I debug it with gdb.\nI thought it was because I turned on ASLR, but when I turned it back off it still didn't work. What could be the reason?</p>\n\n<p>The program was compiled like this (one file only):</p>\n\n<p>gcc -pie -fPIE -fno-stack-protector -o prog prog.c</p>\n"}, {"tags": ["c", "enums", "bit-fields"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1485353310, "post_id": 41853690, "comment_id": 70891016, "body": "(A) won&#39;t minimize the field. It will only make 8 bits of the whole field usable"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1485353323, "post_id": 41853690, "comment_id": 70891029, "body": "C and C++ are different languages. Which do you use?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1485353357, "post_id": 41853690, "comment_id": 70891045, "body": "Your question states &quot;Standard C&quot; but your tags include &quot;c++&quot;. Which are you using?"}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "edited": false, "score": 0, "creation_date": 1485353383, "post_id": 41853690, "comment_id": 70891065, "body": "I&#39;m using C. Will edit."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1485353492, "post_id": 41853690, "comment_id": 70891160, "body": "You cannot do this in <i>standard</i> C, no. In C++ it is possible since C++11."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1485353506, "post_id": 41853690, "comment_id": 70891173, "body": "It is a bad idea to use variables as constant masks. <code>const</code> does not introduce a constant in C. Use <code>#define</code>s` or an <code>enum</code>. Apart from that the second approach is fine."}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485353506, "post_id": 41853690, "comment_id": 70891174, "body": "@StoryTeller will it matter if I guarantee that my enum values are at most 0xFF?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485353529, "post_id": 41853690, "comment_id": 70891190, "body": "Nope. The underlying type for any enum in C is an int."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485353706, "post_id": 41853690, "comment_id": 70891307, "body": "Sidenote: use self-explanatory names for the constants, best prefixed with the name of the type they relate to."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1485353810, "post_id": 41853690, "comment_id": 70891385, "body": "Long story short, keep the enum. Make the field a <code>uint8_t</code> and document where the set of flags is to be taken from. There&#39;s little point defining the field as <code>my_enum</code> since <code>A | B</code> does not produce a value listed in the enumeration."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1485353960, "post_id": 41853690, "comment_id": 70891506, "body": "@StoryTeller: Agreed, that works for <code>uint8_t</code>, because an <code>int</code> is always larger. It already causes problems for <code>uint16_t</code> if you need the full range."}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485354182, "post_id": 41853690, "comment_id": 70891660, "body": "@Olaf so this approach will better than typedef + defines (option B)?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485355984, "post_id": 41853690, "comment_id": 70892956, "body": "@EladWeiss At some point, you can&#39;t use <code>enum</code>s, so <code>typedef</code>+ constant-marcros is more consistent if you have multiple such constructs. But I&#39;m split in halves and I use both. As a personal note: I can&#39;t understand why the C commitee did not allow <code>enum</code>s to specify the tape similar to C++11 does. It would not break legacy code, but would make <code>enum</code>s really usable for embedded programming for the first time. It is worse, because embedded is the major field to use C."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485356444, "post_id": 41853690, "comment_id": 70893279, "body": "@Olaf - The C++11 change was probably done to &quot;steal market share&quot; from C in the embedded world."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485357273, "post_id": 41853690, "comment_id": 70893832, "body": "@StoryTeller: My point is not why C++ did add this, but my C11 did <b>not</b>. Would have been a minor addition, not much complicate to add to compilers. But likely the same reason why VLAs were made optional (against the commitee&#39;s mantra of backwards-compatibility: some commercial compiler vendors wanted to make money with the least effort)."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485353765, "post_id": 41853769, "comment_id": 70891351, "body": "The implementation is free to choose a smaller type for an <code>enum</code>. But the constants are <b>always</b> <code>int</code>. And <code>const</code> does not qualify a constant. C has no symbolic constants other than <code>enum-constants</code> (which are indeed near useless if you need any other type than <code>int</code>)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485354038, "post_id": 41853769, "comment_id": 70891561, "body": "@Olaf: Remind me never to take the opposing side to you in a pub quiz."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485354095, "post_id": 41853769, "comment_id": 70891601, "body": "Interesting... a former boss of mine said something very similar :-)"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 4, "last_activity_date": 1485353775, "last_edit_date": 1485353775, "creation_date": 1485353470, "answer_id": 41853769, "question_id": 41853690, "link": "https://stackoverflow.com/questions/41853690/forcing-enum-field-to-8-bits-in-standard-c-with-bitfields/41853769#41853769", "title": "Forcing enum field to 8 bits in standard C with bitfields", "body": "<p>If your specific values in an <code>enum</code> can fit into a smaller type than an <code>int</code>, then a C implementation is free to choose the underlying type of the <code>enum</code> to be a smaller type than an <code>int</code> (but the type of the <code>enum</code> constants in this case will be <code>int</code>). But there is <em>no way</em> you can force a C compiler to use a type smaller than an <code>int</code>. So with this in mind and the fact that an <code>int</code> is at least 16 bits, you're out of luck.</p>\n\n<p>But <code>enum</code>s in C are little more than debugging aids. Just use an <code>uint8_t</code> type if you compiler has it:</p>\n\n<pre><code>static const uint8_t something = /*some value*/\n</code></pre>\n\n<p>If not then use a <code>char</code> and <em>hope</em> that CHAR_BIT is 8.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1485353577, "post_id": 41853779, "comment_id": 70891226, "body": "The <code>const</code> values are not constants, though. An <code>enum</code> for the constants or <code>#define</code>s are better. (I recommend the latter, because you can specify the type)."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1485353498, "creation_date": 1485353498, "answer_id": 41853779, "question_id": 41853690, "link": "https://stackoverflow.com/questions/41853690/forcing-enum-field-to-8-bits-in-standard-c-with-bitfields/41853779#41853779", "title": "Forcing enum field to 8 bits in standard C with bitfields", "body": "<p>Option B would be best.  You'd be defining the type in question to be a known size, and the <code>const</code> values you define will also be the correct size.</p>\n\n<p>While you would lose out on the implicit numbering of an <code>enum</code>, the explicit sizing of the field and its values makes up for it.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10293423, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/ece7f6e27752e3be781c0984b3510abe?s=128&d=identicon&r=PG", "display_name": "StdCIsNotStd", "link": "https://stackoverflow.com/users/10293423/stdcisnotstd"}, "is_accepted": false, "score": 0, "last_activity_date": 1535610070, "creation_date": 1535610070, "answer_id": 52090404, "question_id": 41853690, "link": "https://stackoverflow.com/questions/41853690/forcing-enum-field-to-8-bits-in-standard-c-with-bitfields/52090404#52090404", "title": "Forcing enum field to 8 bits in standard C with bitfields", "body": "<p>You can use <code>enum</code> or even <code>typedef enum</code> like a grouped <code>#define</code>. Do not actually define a structure member, data stream, or global variable as type <code>enum</code>. Rather define all storage members as fixed types like <code>uint8_t</code>. As if you used <code>#define</code> just set them to the <code>enum</code> literal constants. If you use any kind of lint tool, then this design style will raise some messages which you will need to tailor. Just like malformed <code>#define</code> if the literal value doesn't fit, then bad things can happen, and either way you need to pay attention. In a debugger or hardware simulator, the <code>enum</code> can provide useful display reference information. Temporary variables are an exception to how global definitions are treated. For function parameters or automatic variables, and only then, define them with the <code>enum</code> type. In this context <code>int</code> is going to be the most efficient word size as well as the standard behavior of <code>enum</code>. There is no error possible nor hyper-optimizing you can do.</p>\n"}], "owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2144, "favorite_count": 0, "accepted_answer_id": 41853769, "answer_count": 3, "score": 1, "last_activity_date": 1535610070, "creation_date": 1485353216, "last_edit_date": 1485353392, "question_id": 41853690, "link": "https://stackoverflow.com/questions/41853690/forcing-enum-field-to-8-bits-in-standard-c-with-bitfields", "title": "Forcing enum field to 8 bits in standard C with bitfields", "body": "<p>I saw few questions here about how to force an enum to 8 or 16 bits. The common answer was that it can be done in C++11 or higher. Unfortunately, I don't have that luxury.</p>\n\n<p>So, here is what I'm thinking. I only need the enum to be 8 bits when it's in a struct whose size I want to minimize. So:</p>\n\n<p><strong>Option A:</strong></p>\n\n<pre><code>typedef enum { A, B, C, MAX = 0xFF } my_enum;\n\nstruct my_compact_struct\n{\n    my_enum field1 : 8; // Forcing field to be 8 bits \n    uint8_t something;\n    uint16_t something_else;\n};\n</code></pre>\n\n<p>I think most or all optimizers should be smart enough to handle the 8 bitfield efficiently.</p>\n\n<p><strong>Option B:</strong></p>\n\n<p>Not use an enum. Use typedef and constants instead.</p>\n\n<pre><code>typedef uint8_t my_type;\n\nstatic const my_type A = 0;\nstatic const my_type B = 1;\nstatic const my_type C = 2;\n\nstruct my_compact_struct\n{\n    my_type field1; \n    uint8_t something;\n    uint16_t something_else;\n};\n</code></pre>\n\n<p>Option A is currently implemented and seems to be working, but since I want to do (now and in the future) what's correct now and not just what's working, I was wondering if option B is clearly better.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1485352416, "post_id": 41853360, "comment_id": 70890362, "body": "<code>string[k + 1];</code> will access out of bounds (causing undefined behavior) in your <code>deleteDuplicates</code> function"}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1485354804, "post_id": 41853360, "comment_id": 70892086, "body": "This approach is extremely inefficient. Wouldn&#39;t it be better to sort or hash the characters? Also why not use something <code>fgets</code> to read the characters?"}], "answers": [{"comments": [{"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1485353174, "post_id": 41853486, "comment_id": 70890926, "body": "Why you don&#39;t dereference pointer to <code>length</code>? Now you compare <code>i &lt; length</code> (<code>int</code> &lt; <code>int *</code>) everywhere."}, {"owner": {"reputation": 130, "user_id": 4891461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e05d76c0ace9c08a40e0a08e5367cdea?s=128&d=identicon&r=PG&f=1", "display_name": "quickblueblur", "link": "https://stackoverflow.com/users/4891461/quickblueblur"}, "reply_to_user": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1485353410, "post_id": 41853486, "comment_id": 70891086, "body": "@YuriyIvaskevych good catch. I added a quick example and didn&#39;t think about the actual code within the function. Edited answer."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1485354603, "post_id": 41853486, "comment_id": 70891969, "body": "<code>string[k + 1]</code> is still out of bounds"}], "tags": [], "owner": {"reputation": 130, "user_id": 4891461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e05d76c0ace9c08a40e0a08e5367cdea?s=128&d=identicon&r=PG&f=1", "display_name": "quickblueblur", "link": "https://stackoverflow.com/users/4891461/quickblueblur"}, "is_accepted": false, "score": 0, "last_activity_date": 1485353321, "last_edit_date": 1485353321, "creation_date": 1485352630, "answer_id": 41853486, "question_id": 41853360, "link": "https://stackoverflow.com/questions/41853360/string-array-prints-out-trash-values/41853486#41853486", "title": "String array prints out trash values", "body": "<p>Functions in C are pass by value by default, not pass by reference. So your deleteDuplicates function is not modifying the length in your main function. If you modify your function to pass by reference, your length will be modified.</p>\n\n<p>Here's an example using your code.</p>\n\n<p>The function call would be:</p>\n\n<pre><code>deleteDuplicates(string, &amp;length);\n</code></pre>\n\n<p>The function would be:</p>\n\n<pre><code>void deleteDuplicates(char string[], int *length) \n{\n    for (int i = 0; i &lt; *length; i++) \n    {\n        for (int j = i + 1; j &lt; *length;) \n        {\n            if (string[j] == string[i]) \n            {\n                for (int k = j; k &lt; *length; k++) \n                {\n                    string[k] = string[k + 1];\n                }\n                *length--;\n            }\n            else \n            {\n                j++;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 385, "user_id": 4965642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ed6921390414c649b9c1073f5e64f115?s=128&d=identicon&r=PG&f=1", "display_name": "Carles", "link": "https://stackoverflow.com/users/4965642/carles"}, "is_accepted": false, "score": 1, "last_activity_date": 1485355340, "creation_date": 1485355340, "answer_id": 41854391, "question_id": 41853360, "link": "https://stackoverflow.com/questions/41853360/string-array-prints-out-trash-values/41854391#41854391", "title": "String array prints out trash values", "body": "<p>There is a more efficent and secure way to do the exercise:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid deleteDuplicates(char string[], int *length) \n{\n    int p = 1; //current \n    int f = 0; //flag found\n    for (int i = 1; i &lt; *length; i++) \n    {\n        f = 0;\n        for (int j = 0; j &lt; i; j++) \n        {\n            if (string[j] == string[i])\n            {\n                f = 1;\n                break;\n            }\n        }\n        if (!f)\n            string[p++] = string[i];\n\n    }\n    string[p] = '\\0';\n    *length = p;\n}\n\nint main() {\n    char aux[100] = \"asd\u00f1kzzcvjhasdkljjh\";\n    int l = strlen(aux);\n\n    deleteDuplicates(aux, &amp;l);\n    printf(\"result: %s -&gt; %d\", aux, l);\n}\n</code></pre>\n\n<p>You can see the results here:\n<a href=\"http://codepad.org/wECjIonL\" rel=\"nofollow noreferrer\">http://codepad.org/wECjIonL</a></p>\n\n<p>Or even a more refined way can be found here:\n<a href=\"http://codepad.org/BXksElIG\" rel=\"nofollow noreferrer\">http://codepad.org/BXksElIG</a></p>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1485358599, "last_edit_date": 1485358599, "creation_date": 1485358231, "answer_id": 41855443, "question_id": 41853360, "link": "https://stackoverflow.com/questions/41853360/string-array-prints-out-trash-values/41855443#41855443", "title": "String array prints out trash values", "body": "<p>You can achieve an <code>O(n)</code> solution by hashing the characters in an array. </p>\n\n<p>However, the other answers posted will help you solve your current problem in your code. I decided to show you a more efficient way to do this. </p>\n\n<p>You can create a hash array like this:</p>\n\n<pre><code>int hashing[256] = {0};\n</code></pre>\n\n<p>Which sets all the values to be <code>0</code> in the array. Then you can check if the slot has a <code>0</code>, which means that the character has not been visited. Everytime <code>0</code> is found, add the character to the string, and mark that slot as <code>1</code>. This guarantees that no duplicate characters can be added, as they are only added if a <code>0</code> is found. </p>\n\n<p>This is a common algorithm that is used everywhere, and it will help make your code more efficient. </p>\n\n<p>Also it is better to use <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow noreferrer\"><code>fgets</code></a> for reading input from user, instead of <code>scanf()</code>. </p>\n\n<p>Here is some modified code I wrote a while ago which shows this idea of hashing:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n#define NUMCHAR 256\n\nchar *remove_dups(char *string);\n\nint main(void) {\n    char string[NUMCHAR], temp;\n    char *result;\n    size_t len, i;\n    int ch;\n\n    printf(\"Enter char array size of string(counting with backslash 0): \\n\");\n    if (scanf(\"%zu\", &amp;len) != 1) {\n        printf(\"invalid length entered\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    ch = getchar();\n    while (ch != '\\n' &amp;&amp; ch != EOF);\n\n    if (len &gt;= NUMCHAR) {\n        printf(\"Length specified is longer than buffer size of %d\\n\", NUMCHAR);\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"Enter string you wish to remove duplicates from: \\n\");\n    for (i = 0; i &lt; len; i++) {\n        if (scanf(\"%c\", &amp;temp) != 1) {\n            printf(\"invalid character entered\\n\");\n            exit(EXIT_FAILURE);\n        }\n        if (isspace(temp)) {\n            break;\n        }\n        string[i] = temp;\n    }\n    string[i] = '\\0';\n\n    printf(\"Original string: %s Length: %zu\\n\", string, strlen(string));\n\n    result = remove_dups(string);\n\n    printf(\"Duplicates removed: %s Length: %zu\\n\", result, strlen(result));\n\n    return 0;\n}\n\nchar *remove_dups(char *str) {\n    int hash[NUMCHAR] = {0};\n    size_t count = 0, i;\n    char temp;\n\n    for (i = 0; str[i]; i++) {\n        temp = str[i];\n        if (hash[(unsigned char)temp] == 0) {\n            hash[(unsigned char)temp] = 1;\n            str[count++] = str[i];\n        }\n    } \n\n    str[count] = '\\0';\n\n    return str;\n}\n</code></pre>\n\n<p>Example input:</p>\n\n<pre><code>Enter char array size of string(counting with backslash 0):\n20\nEnter string you wish to remove duplicates from:\nhellotherefriend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Original string: hellotherefriend Length: 16\nDuplicates removed: helotrfind Length: 10\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7469093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26e3c3866e7a197a629e298b012132a?s=128&d=identicon&r=PG&f=1", "display_name": "Lsm", "link": "https://stackoverflow.com/users/7469093/lsm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1485358599, "creation_date": 1485352274, "last_edit_date": 1485355954, "question_id": 41853360, "link": "https://stackoverflow.com/questions/41853360/string-array-prints-out-trash-values", "title": "String array prints out trash values", "body": "<p>So I have an assignment where I should delete a character if it has duplicates in a string. Right now it does that but also prints out trash values at the end. Im not sure why it does that, so any help would be nice.\nAlso im not sure how I should print out the length of the new string.</p>\n\n<p>This is my <code>main.c</code> file: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"functions.h\"\n\nint main() {\n\n    char string[256];\n    int length;\n\n    printf(\"Enter char array size of string(counting with backslash 0): \\n\");\n/*\n    Example: The word aabc will get a size of 5.\n    a = 0\n    a = 1\n    b = 2\n    c = 3\n    /0 = 4\n    Total 5 slots to allocate */\n\n    scanf(\"%d\", &amp;length);\n\n    printf(\"Enter string you wish to remove duplicates from: \\n\");\n    for (int i = 0; i &lt; length; i++)\n    {\n        scanf(\"%c\", &amp;string[i]);\n    }\n\n    deleteDuplicates(string, length);\n\n    //String output after removing duplicates. Prints out trash values!\n    for (int i = 0; i &lt; length; i++) {\n        printf(\"%c\", string[i]);\n    }\n    //Length of new string. The length is also wrong!\n    printf(\"\\tLength: %d\\n\", length);\n    printf(\"\\n\\n\");\n\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>The output from the <code>printf(\"%c\", string[i]);</code> prints out trash values at the end of the string which is not correct. </p>\n\n<p>The deleteDuplicates function looks like this in the <code>functions.c</code> file:</p>\n\n<pre><code>void deleteDuplicates(char string[], int length) \n{\n    for (int i = 0; i &lt; length; i++) \n    {\n        for (int j = i + 1; j &lt; length;) \n        {\n            if (string[j] == string[i]) \n            {\n                for (int k = j; k &lt; length; k++) \n                {\n                    string[k] = string[k + 1];\n                }\n                length--;\n            }\n            else \n            {\n                j++;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "recursion", "linked-list", "filesystems"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1485351724, "post_id": 41853070, "comment_id": 70889843, "body": "Too broad question. Please be specific on what is the exact problem you are having."}, {"owner": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1485352314, "post_id": 41853070, "comment_id": 70890290, "body": "@user694733 my problem is specified at the end of the question."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1485352600, "post_id": 41853070, "comment_id": 70890524, "body": "You listed vague list of problems. You managed to define structure type. What your next step? Assuming it is allocating memory for it with <code>malloc</code>, what is the problem you are having? Compilation error message? Break your problem down to smaller problems, until you have a clear question that we can answer."}, {"owner": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1485357619, "post_id": 41853070, "comment_id": 70894093, "body": "@user694733 Okay so I tried being less vague. <a href=\"http://stackoverflow.com/questions/41855178/recursive-function-linked-lists-sprintf-not-saving-variable-into-struct-varia\">Here is the new question</a> I asked with a little bit more detail. Would you mind taking a look please?"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "edited": false, "score": 0, "creation_date": 1485352347, "post_id": 41853233, "comment_id": 70890305, "body": "Okay I will try to implement this. Thank you for the idea."}], "tags": [], "owner": {"reputation": 43, "user_id": 7307190, "user_type": "registered", "profile_image": "https://graph.facebook.com/1277373198968714/picture?type=large", "display_name": "Fabian le Maux", "link": "https://stackoverflow.com/users/7307190/fabian-le-maux"}, "is_accepted": false, "score": 0, "last_activity_date": 1485351932, "creation_date": 1485351932, "answer_id": 41853233, "question_id": 41853070, "link": "https://stackoverflow.com/questions/41853070/how-can-i-make-this-recursive-function-save-its-content-into-a-linked-list/41853233#41853233", "title": "How can I make this recursive function save its content into a linked list?", "body": "<p>I think you can modify your prototype to add a <code>struct search *</code> param wich gonna be the head pointeur of your list.</p>\n\n<p>And when u need to put an element in your list just add a node in queue (or in head if u want but u need a <code>struct search **</code> instead of a simple pointer.\nAnd then when u need to put an element just call the function which gonna create an element and place it where u want.\nAfter that u will just give to every recursive call the <code>head ptr</code> of your list</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "edited": false, "score": 0, "creation_date": 1485354373, "post_id": 41853908, "comment_id": 70891790, "body": "Thank you ! I got a malloc error and an &quot;Abort : trap 6&quot; but Im looking through your response now."}, {"owner": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "edited": false, "score": 0, "creation_date": 1485357571, "post_id": 41853908, "comment_id": 70894062, "body": "I asked a new question <a href=\"http://stackoverflow.com/questions/41855178/recursive-function-linked-lists-sprintf-not-saving-variable-into-struct-varia\">here</a>. Could you please have a look?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "edited": false, "score": 0, "creation_date": 1485358590, "post_id": 41853908, "comment_id": 70894794, "body": "You have to make a copy of the strings. Which means 1) allocating memory and 2) copying. <a href=\"http://en.cppreference.com/w/c/experimental/dynamic/strdup\" rel=\"nofollow noreferrer\"><code>strdup</code></a> does this for you."}, {"owner": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "edited": false, "score": 0, "creation_date": 1485359439, "post_id": 41853908, "comment_id": 70895454, "body": "I&#39;m so stupid for not reading the hint you left in the code. Thank you. It fixed it."}], "tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 1, "last_activity_date": 1485353902, "creation_date": 1485353902, "answer_id": 41853908, "question_id": 41853070, "link": "https://stackoverflow.com/questions/41853070/how-can-i-make-this-recursive-function-save-its-content-into-a-linked-list/41853908#41853908", "title": "How can I make this recursive function save its content into a linked list?", "body": "<p>You need to create a new <code>search</code> node every time you find a file. Fill in the new node, then add it to the end of the list.</p>\n\n<pre><code>const char *path_format = \"%s/%s\";\n\n// Modified to take a node ptr. This should be the last node in the list\n// Returns a node ptr. This is the new last node in the list\nsearch * show_dir_content(char * path, search *node)\n{\n    DIR * d = opendir(path);                \n    if(d==NULL) return node;                     \n    struct dirent * dir;                        \n    while ((dir = readdir(d)) != NULL)      \n    {\n        if(dir-&gt; d_type != DT_DIR) {\n            // Found a file. Alloc a new search node and fill in\n            // (TODO: You should check the return from malloc for failure)\n            search *new_node = malloc(sizeof(search));\n            // TODO: copy all the names. Hint: strdup\n            new_node-&gt;next = NULL;\n            // Append to end of list\n            node-&gt;next = new_node;\n            // Update node pointer to now point to the new node\n            node = node-&gt;next;\n        }\n        else\n            if(dir -&gt; d_type == DT_DIR &amp;&amp; strcmp(dir-&gt;d_name,\".\")!=0 &amp;&amp; strcmp(dir-&gt;d_name,\"..\")!=0 )   // if it is a directory\n            {\n                // Not sure 255 chars will be enough....\n                char d_path[255];                               // here I am using sprintf which is safer than strcat\n                sprintf(d_path, path_format, path, dir-&gt;d_name);\n                printf(\"%s\\n\",d_path);\n                // Make sure you update the node pointer to reflect any\n                // changes made in the recursive call\n                node = show_dir_content(d_path, node);\n            }\n    }\n    closedir(d);\n    // Return the last node (this may be same as input parameter if no files found                               \n    return node;\n}\n</code></pre>\n\n<p>Update <code>main</code> to create a root node and pass that to the function</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    search root = {0};\n    show_dir_content(argv[1], &amp;root);\n    // Note that root is a dummy node.\n    // The list actually begins at root-&gt;next\n\n    // Also, before you exit, free all mem\n    search *node = root.next, *next;\n    while (NULL != node) {\n        free(node-&gt;path);\n        free(node-&gt;fileName);\n        free(node-&gt;fullPathToFile);\n        next = node-&gt;next;\n        free(node);\n        node = next;\n    }\n\n    return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 3656189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5dde3880097dbb56d48ba6da690a2ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user100000", "link": "https://stackoverflow.com/users/3656189/user100000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 41853908, "answer_count": 2, "score": 0, "last_activity_date": 1485353902, "creation_date": 1485351438, "question_id": 41853070, "link": "https://stackoverflow.com/questions/41853070/how-can-i-make-this-recursive-function-save-its-content-into-a-linked-list", "title": "How can I make this recursive function save its content into a linked list?", "body": "<p>the following code opens a path and recursively reads through the directories and prints the files within it. At the moment it just prints the path to the directory and then every file within it but I would like to implement a linked list that will contain 1 char* variable that contains the full path to every file visited.</p>\n\n<p>Here's the code :</p>\n\n<pre><code>#include &lt;dirent.h&gt; \n#include &lt;stdio.h&gt; \n#include &lt;string.h&gt;\n\nvoid show_dir_content(char * path)\n{\n    DIR * d = opendir(path);                \n    if(d==NULL) return;                     \n    struct dirent * dir;                        \n    while ((dir = readdir(d)) != NULL)      \n    {\n        if(dir-&gt; d_type != DT_DIR)          // if the type is not directory just print it\n            printf(\"\\t%s\\n\",dir-&gt;d_name);\n        else\n            if(dir -&gt; d_type == DT_DIR &amp;&amp; strcmp(dir-&gt;d_name,\".\")!=0 &amp;&amp; strcmp(dir-&gt;d_name,\"..\")!=0 )   // if it is a directory\n            {\n                char d_path[255];                               // here I am using sprintf which is safer than strcat\n                sprintf(d_path, \"%s/%s\", path, dir-&gt;d_name);\n                printf(\"%s\\n\",d_path);\n                show_dir_content(d_path);                       \n            }\n    }\n    closedir(d);                                        \n}\n\nint main(int argc, char **argv)\n{\n    show_dir_content(argv[1]);\n    return(0);\n}\n</code></pre>\n\n<p>The struct used for the linked list can be quite simple such as :</p>\n\n<pre><code>typedef struct search search;\nstruct search {\n    char *path;\n    char *fileName;\n    char *fullPathToFile;\n    search *next;\n};\n</code></pre>\n\n<p>I'm just having a difficult time using mallocs for the struct and creating the actual linked list within the recursive function. Any help is appreciated. </p>\n"}, {"tags": ["c", "function"], "answers": [{"comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1485349742, "post_id": 41852347, "comment_id": 70888441, "body": "Please format this code properly. Also, where is the value of <code>i</code> coming from in your code?"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1485349838, "post_id": 41852347, "comment_id": 70888533, "body": "@squeamishossifrage is this ok?"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485350635, "post_id": 41852347, "comment_id": 70889098, "body": "@Olaf I know i just made it to tell OP how to do it ?"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485350732, "post_id": 41852347, "comment_id": 70889159, "body": "@Olaf I was editing it to add that note , please read that kindly."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "edited": false, "score": 0, "creation_date": 1485351224, "post_id": 41852347, "comment_id": 70889506, "body": "Thanks for your insight and imput. I will see how to implement this in my code. Also I am storing the characters in <code>char word[10]</code> and using <code>scanf(&quot;%s&quot;, word);</code>"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1485351261, "post_id": 41852347, "comment_id": 70889533, "body": "@Ryan PLease upvote and select as best , if it has solved your query."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "edited": false, "score": 0, "creation_date": 1485351339, "post_id": 41852347, "comment_id": 70889582, "body": "I will do so once i get 15 reputation marks do not worry. I will select as answer as soon as I manage to implement.. don&#39;t worry your help did not go unnoticed."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1485351390, "post_id": 41852347, "comment_id": 70889623, "body": "@Ryan Also there is a book , C programming a modern approach second edition , that book is a gem , please consider reading it , it is bit costly , you can get an old copy and  there are other means too."}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1485356720, "post_id": 41852347, "comment_id": 70893453, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/134003/discussion-on-answer-by-suraj-jain-creating-a-function-depending-on-user-input\">moved to chat</a>."}], "tags": [], "owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "is_accepted": true, "score": -1, "last_activity_date": 1485350708, "last_edit_date": 1485350708, "creation_date": 1485349435, "answer_id": 41852347, "question_id": 41852176, "link": "https://stackoverflow.com/questions/41852176/creating-a-function-depending-on-user-input/41852347#41852347", "title": "Creating a Function depending on user input", "body": "<p>All you have to do is put the code in a function and then call that function .</p>\n\n<pre><code>int minIndex = 0;           //Making Them Global Variables\nint minNumber = INT_MAX;    //Making Them Global Variables\nint i =  0;                 //Declaring And Initializing The Global \n                            //Variable i to keep count of the position.\n\n\nnumber = atoi(word);\nprintf(\"\\nstring  is \\t %s\\n\", word);\nprintf(\"integer is \\t %d\\n\", number);\nmin(number);  //Calling function min and passing it value of number\n\n\nvoid min(int number){\n\n    if (number &lt;= minNumber){\n\n         minNumber = number;\n         minIndedx = i;\n      }\n\n    if (minIndex &gt; 0)\n    printf(\"min number is %d at position %d\\n\", minNumber, minIndex);\n\n    else\n    printf(\"no numbers read in; hence: no minimum calculated.\");\n\n    i++; //Every time Incrementing i to update position.\n }\n</code></pre>\n\n<p>Run the program in loop , and then every time you call the function min with a different user input that is stored in variable <code>number</code> , the function if the number passed to it is smaller than the set minimum , it updates the value of the minimum number , so that is how you get the minimum number of the user's input.  </p>\n\n<p><strong>NOTE :</strong> This is not a valid program and you have to embed it in your code and change it to suit your need. I cannot make it as i do not know how are you taking input.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 41852347, "answer_count": 1, "score": 0, "last_activity_date": 1485350708, "creation_date": 1485348926, "last_edit_date": 1485349047, "question_id": 41852176, "link": "https://stackoverflow.com/questions/41852176/creating-a-function-depending-on-user-input", "title": "Creating a Function depending on user input", "body": "<p>My program is allowing the user to <strong>enter up to 10  integers/characters into a text file</strong>. I am then using:</p>\n\n<pre><code>            number = atoi(word);\n            printf(\"\\nstring  is \\t %s\\n\", word);\n            printf(\"integer is \\t %d\\n\", number);\n</code></pre>\n\n<p>to convert the entered char/int from ASCII to integer.</p>\n\n<p>Example :  </p>\n\n<p>Input: <code>e</code> Output:  <code>String is e, integer is 0</code></p>\n\n<p>Input: <code>10</code>  Output: <code>String is 10, integer is 10</code></p>\n\n<p><em>I want a <strong>function</strong> to display the minimum integer from all of the user's inputs</em>. I have tested the code below to give me the smallest integer however this is <strong>not contained within a function.</strong> I am unable to create a function that takes into consideration a different number of user inputs each time.</p>\n\n<p>The following code runs successfully to return my smallest integer:</p>\n\n<pre><code>    int minIndex = 0;\n    int minNumber = INT_MAX;\n\n    if (number &lt;= minNumber)\n    {\n        minNumber = number;\n        minIndedx = i;\n    }\nif (minIndex &gt; 0)\n\n    printf(\"min number is %d at position %d\\n\", minNumber, minIndex);\nelse\n    printf(\"no numbers read in; hence: no minimum calculated.\");`\n</code></pre>\n\n<ol>\n<li><strong>How can I call this code above from a function?</strong></li>\n<li><em>Do I need to store all the integers in an array and use a pointer to point to the value inside my array?</em></li>\n</ol>\n\n<p>Any ideas on how to proceed ? </p>\n"}, {"tags": ["c", "wildcard"], "answers": [{"comments": [{"owner": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "edited": false, "score": 0, "creation_date": 1485350651, "post_id": 41851884, "comment_id": 70889107, "body": "great, it performs just like requested although the man 3 sprintf is a pain in the ass"}], "tags": [], "owner": {"reputation": 1233, "user_id": 2560990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42b19b1b40ef800b3f0ded4adde9de?s=128&d=identicon&r=PG", "display_name": "robin.koch", "link": "https://stackoverflow.com/users/2560990/robin-koch"}, "is_accepted": true, "score": 3, "last_activity_date": 1485347975, "creation_date": 1485347975, "answer_id": 41851884, "question_id": 41851655, "link": "https://stackoverflow.com/questions/41851655/using-fnmatch-with-a-char-pointer/41851884#41851884", "title": "Using fnmatch with a char Pointer", "body": "<p>prepare it with <a href=\"http://www.cplusplus.com/reference/cstdio/sprintf/\" rel=\"nofollow noreferrer\">sprintf()</a></p>\n\n<pre><code>  char current[256];\n  sprintf(current, \"-%s=*\", needed_option);\n  //...\n  if(fnmatch(current, options[i], 0) == 0){ //...\n</code></pre>\n"}], "owner": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 41851884, "answer_count": 1, "score": 0, "last_activity_date": 1485347975, "creation_date": 1485347222, "question_id": 41851655, "link": "https://stackoverflow.com/questions/41851655/using-fnmatch-with-a-char-pointer", "title": "Using fnmatch with a char Pointer", "body": "<p>The array <code>options</code> contains elements of this form: \"-option=value\".</p>\n\n<p>The argument <code>needed_option</code> contains for example \"option\"</p>\n\n<pre><code>char *function(char *options[], char *needed_option){\n    for(//go over all possible options){\n       if(fnmatch(\"-???=*\", options[i], 0) == 0){ //&lt;--- look here\n           char *ret = extract_value_from_option(); \n           return ret;\n        }\n    }\n\n}\n</code></pre>\n\n<p>Question: Is there a way to genericly replace the \"<code>???</code>\" with the function - argument <code>needed_option</code> like its done in <code>printf()</code> where a <code>char *</code> can be included by using the <code>%s</code> ? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7605, "user_id": 680026, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IZToj.png?s=128&g=1", "display_name": "Ole Albers", "link": "https://stackoverflow.com/users/680026/ole-albers"}, "edited": false, "score": 2, "creation_date": 1485346206, "post_id": 41851272, "comment_id": 70886289, "body": "roman_Number should be an array containing the numbers, digitValue() does the magic. Sure you don&#39;t just want us to solve your homework?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485348936, "post_id": 41851272, "comment_id": 70887936, "body": "@user349821 How about <a href=\"http://ideone.com/s5I50U\" rel=\"nofollow noreferrer\">Something like This</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1485346805, "creation_date": 1485346805, "answer_id": 41851504, "question_id": 41851272, "link": "https://stackoverflow.com/questions/41851272/convert-roman-numerals-to-decimal-numbers-in-c/41851504#41851504", "title": "Convert Roman Numerals to decimal numbers in C", "body": "<p>If there are at least 3 letters starting at offset <code>i</code>, and the third has a value larger than the first, the roman number is invalid.</p>\n\n<p>If the value of the letter is less than the value of the next letter, subtract the value of the first from the value of the second, add this to the total and skip both.</p>\n\n<p>Otherwise, add the value of the current letter to the total.</p>\n\n<p>These statements should be inside the body of a <code>for</code> loop that iterates <code>i</code> from <code>0</code> to the length of the string <code>roman_Number</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 7468866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0ce86e961b45180c1a72df5c3d9017?s=128&d=identicon&r=PG&f=1", "display_name": "user349821", "link": "https://stackoverflow.com/users/7468866/user349821"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "closed_date": 1485388207, "accepted_answer_id": 41851504, "answer_count": 1, "score": -5, "last_activity_date": 1485346805, "creation_date": 1485346062, "last_edit_date": 1485346518, "question_id": 41851272, "link": "https://stackoverflow.com/questions/41851272/convert-roman-numerals-to-decimal-numbers-in-c", "closed_reason": "Not suitable for this site", "title": "Convert Roman Numerals to decimal numbers in C", "body": "<p>This is part of a code in C to convert Roman Numerals to decimal numbers. But I can't really understand what exactly it does. Can someone give me a description?</p>\n\n<pre><code>if ((strlen(roman_Number) - i) &gt; 2) {\n    if (digitValue(roman_Number[i]) &lt; digitValue(roman_Number[i + 2])) {\n        printf(\"Invalid roman number\");\n        return 0;\n    }\n}\nif (digitValue(roman_Number[i]) &gt;= digitValue(roman_Number[i + 1]))\n    number = number + digitValue(roman_Number[i]);\nelse {\n    number = number + (digitValue(roman_Number[i + 1]) - digitValue(roman_Number[i]));\n    i++;\n}\ni++;\n\n} // unbalanced bracket\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "kernel-module"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1485344602, "post_id": 41850722, "comment_id": 70885300, "body": "Perhaps the <code>O_DIRECTORY</code> means to create any parent directories, did you try <code>&quot;home&#47;testdir&#47;delete-this&quot;</code>? If it works, then you are using the wrong function. Oh, this is just a wild guess. I have no idea of what <code>filp_open()</code> is or does."}, {"owner": {"reputation": 199, "user_id": 5226245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tptEH.png?s=128&g=1", "display_name": "Daniel Christoph", "link": "https://stackoverflow.com/users/5226245/daniel-christoph"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1485345034, "post_id": 41850722, "comment_id": 70885585, "body": "This doesn&#39;t work, but thanks for the try! It doesn&#39;t create the directories &quot;testdir&quot; or &quot;delete-this&quot;"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1485345942, "post_id": 41850722, "comment_id": 70886125, "body": "Why don&#39;t you use <code>mkdir()</code>? and this call should fail according to the man don&#39;t you check the return value? <a href=\"http://rz2.com/man2/open.2.html\" rel=\"nofollow noreferrer\">&quot;If pathname is not a directory, cause the open to fail.&quot;</a>. By the way, this is useless to cast <code>NULL</code> and this is useless to initialize your variable to <code>NULL</code> if you affect it just after. This is bad practice."}, {"owner": {"reputation": 199, "user_id": 5226245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tptEH.png?s=128&g=1", "display_name": "Daniel Christoph", "link": "https://stackoverflow.com/users/5226245/daniel-christoph"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1485346925, "post_id": 41850722, "comment_id": 70886745, "body": "@Stargateur : I use the flag &quot;O_CREAT&quot; to create the directory. man-Page says: &quot;If the file does not exist it will be created.&quot;. And thanks for giving the hint for the bad practice!"}, {"owner": {"reputation": 199, "user_id": 5226245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tptEH.png?s=128&g=1", "display_name": "Daniel Christoph", "link": "https://stackoverflow.com/users/5226245/daniel-christoph"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1485350426, "post_id": 41850722, "comment_id": 70888957, "body": "@Stargateur : How do I use &quot;mkdir()&quot; in a kernel module? Which includes do I need?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1485384720, "post_id": 41850722, "comment_id": 70910051, "body": "@DanielChristoph According to the <a href=\"https://linux.die.net/man/3/mkdir\" rel=\"nofollow noreferrer\">man</a>, you must <code>#include &lt;sys&#47;stat.h&gt;</code> note that I never did kernel module so I don&#39;t know if you can use it."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5226245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tptEH.png?s=128&g=1", "display_name": "Daniel Christoph", "link": "https://stackoverflow.com/users/5226245/daniel-christoph"}, "edited": false, "score": 0, "creation_date": 1485345071, "post_id": 41850880, "comment_id": 70885603, "body": "So the combination &quot;O_DIRECTORY|O_CREAT&quot; doesn&#39;t work?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 199, "user_id": 5226245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tptEH.png?s=128&g=1", "display_name": "Daniel Christoph", "link": "https://stackoverflow.com/users/5226245/daniel-christoph"}, "edited": false, "score": 0, "creation_date": 1485345152, "post_id": 41850880, "comment_id": 70885645, "body": "Exactly, filp_open works as open does and you canot create dirs with open."}, {"owner": {"reputation": 199, "user_id": 5226245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tptEH.png?s=128&g=1", "display_name": "Daniel Christoph", "link": "https://stackoverflow.com/users/5226245/daniel-christoph"}, "edited": false, "score": 0, "creation_date": 1485345485, "post_id": 41850880, "comment_id": 70885861, "body": "I got the solution. :-)"}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1485344940, "creation_date": 1485344940, "answer_id": 41850880, "question_id": 41850722, "link": "https://stackoverflow.com/questions/41850722/linux-kernel-module-create-directory/41850880#41850880", "title": "Linux Kernel Module - Create Directory", "body": "<p>This doesn't create a directory but opens a directory like <code>opendir</code> does (the directory should exists).</p>\n"}, {"tags": [], "owner": {"reputation": 199, "user_id": 5226245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tptEH.png?s=128&g=1", "display_name": "Daniel Christoph", "link": "https://stackoverflow.com/users/5226245/daniel-christoph"}, "is_accepted": false, "score": 4, "last_activity_date": 1485345426, "creation_date": 1485345426, "answer_id": 41851045, "question_id": 41850722, "link": "https://stackoverflow.com/questions/41850722/linux-kernel-module-create-directory/41851045#41851045", "title": "Linux Kernel Module - Create Directory", "body": "<p>I got it by myself.\nThe solution is:</p>\n\n<pre><code>struct file *fp = (struct file *) NULL;\nfp = filp_open(\"/home/testdir/\", O_DIRECTORY|O_CREAT, S_IRUSR);\n</code></pre>\n\n<p>Note the \"/\" at the end of the path.</p>\n\n<p>Thanks @all for the try!</p>\n"}], "owner": {"reputation": 199, "user_id": 5226245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tptEH.png?s=128&g=1", "display_name": "Daniel Christoph", "link": "https://stackoverflow.com/users/5226245/daniel-christoph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2139, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1485345462, "creation_date": 1485344503, "last_edit_date": 1485345462, "question_id": 41850722, "link": "https://stackoverflow.com/questions/41850722/linux-kernel-module-create-directory", "title": "Linux Kernel Module - Create Directory", "body": "<p>I've got a problem about creating a directory within a linux kernel module. </p>\n\n<p>What I want: Creating a directory within a kernel module.</p>\n\n<p>Here is my actual code:</p>\n\n<pre><code>struct file *fp = (struct file *) NULL;\nfp = filp_open(\"/home/testdir\", O_DIRECTORY|O_CREAT, S_IRUSR);\n</code></pre>\n\n<p>But it creates a file instead of directory. </p>\n\n<p>I tried to same code as above without the flag \"O_DIRECTORY\":</p>\n\n<pre><code>struct file *fp = (struct file *) NULL;\nfp = filp_open(\"/home/testdir\", O_CREAT, S_IRUSR);\n</code></pre>\n\n<p>And the result is similar to the previous result.</p>\n\n<p>I don't understand the behaviour. What am I doing wrong?</p>\n\n<p>Edit 1:\nI am coding on a Raspberry PI, Raspbian, kernel version: 4.4.43-v7</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1065, "user_id": 6720576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4iFs.jpg?s=128&g=1", "display_name": "AsthaUndefined", "link": "https://stackoverflow.com/users/6720576/asthaundefined"}, "edited": false, "score": 2, "creation_date": 1485344536, "post_id": 41850655, "comment_id": 70885258, "body": "Please include code also."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1485346521, "post_id": 41850655, "comment_id": 70886487, "body": "what platform are you using?"}, {"owner": {"reputation": 13, "user_id": 7468710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd692ffd4d6df6b23913ad239b72272a?s=128&d=identicon&r=PG&f=1", "display_name": "Sekkmer", "link": "https://stackoverflow.com/users/7468710/sekkmer"}, "edited": false, "score": 0, "creation_date": 1485346987, "post_id": 41850655, "comment_id": 70886779, "body": "linux g++, I just added the code (it is an extracted minimized version of the original)"}], "answers": [{"tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": true, "score": 0, "last_activity_date": 1485349546, "last_edit_date": 1485349546, "creation_date": 1485347395, "answer_id": 41851713, "question_id": 41850655, "link": "https://stackoverflow.com/questions/41850655/poll-catch-thread-return-value/41851713#41851713", "title": "poll() catch thread return value", "body": "<p>The simplest solution is to create an anonymous pipe (or, since you say that you are on Linux, an <a href=\"http://man7.org/linux/man-pages/man2/eventfd2.2.html\" rel=\"nofollow noreferrer\">eventfd</a>) and write data to one end of the pipe in the <code>runProgram</code> function once the call to <code>system</code> returns. You can then include the read end of the pipe in the set of file descriptors that you are <code>poll</code>ing.</p>\n\n<pre><code>int process_eventfd = eventfd(0, EFD_CLOEXEC);\nif (process_eventfd == -1) exit(1); // change this to handle appropriately\n\nstruct pollfd fds[3];\nfds[0].fd = sock;\nfds[0].events = POLLIN;\n\nfds[1].fd = process_eventfd;\nfds[1].events = POLLIN;\n\n// use fds[2] instead of fds[1] for your socket connection, etc.\n</code></pre>\n\n<p>You can add the eventfd number as an argument to <code>runProgram</code>. It should now look something like:</p>\n\n<pre><code>int runProgram(const std::string &amp;programName, const std::string &amp;fileName, int process_eventfd) {\n    return system((programName + \" \" + fileName).c_str());\n    uint64_t value = 1;\n    write(process_eventfd, &amp;value, 8);\n}\n</code></pre>\n\n<p>By the way, your current program has a bug: you always pass 2 as the number of file descriptors to <code>poll</code>, even before you have set up the second file descriptor in the array. You should only pass the number of valid descriptors actually present in the array.</p>\n\n<p>However, if you don't need to use <code>system</code> and can use <code>exec</code>, there is no need to create another thread; just perform the following steps:</p>\n\n<ol>\n<li>Mask (but don't <em>ignore</em>) the SIGCHLD signal. (You may need to set up a signal handler, even if it does nothing; I can't remember if this is true for Linux or not).</li>\n<li>Create your external process via <code>fork</code>/<code>exec</code></li>\n<li>Use <code>ppoll</code> rather than <code>poll</code>, and include SIGCHLD in the signals to be enabled</li>\n<li>If the <code>ppoll</code> call returns an <code>EINTR</code> error, use <code>waitpid</code> to obtain the child status</li>\n</ol>\n\n<p>The child process will run in parallel to your program.</p>\n"}], "owner": {"reputation": 13, "user_id": 7468710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd692ffd4d6df6b23913ad239b72272a?s=128&d=identicon&r=PG&f=1", "display_name": "Sekkmer", "link": "https://stackoverflow.com/users/7468710/sekkmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 41851713, "answer_count": 1, "score": -1, "last_activity_date": 1485349546, "creation_date": 1485344281, "last_edit_date": 1485346883, "question_id": 41850655, "link": "https://stackoverflow.com/questions/41850655/poll-catch-thread-return-value", "title": "poll() catch thread return value", "body": "<p>I have a poll() loop with a small socket communication, I want to start an other program by system() or exec() and I need the the return value of the system()/exec() but I don't want to stop the main loop while the child process is running so I thought I start it in a thread but I am not sure how to set up the pollfd to catch the thread when it is done, I am using c/c++</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/un.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;poll.h&gt;\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;thread&gt;\n#include &lt;future&gt;\n\n\n#define SOCKET_NAME \"/tmp/9Lq7BNBnBycd6nxy.socket\"\n\nint runProgram(const std::string &amp;programName, const std::string &amp;fileName) {\n    return system((programName + \" \" + fileName).c_str());\n}\n\nint main(int argc, char *argv[]) {\n    struct sockaddr_un server;\n    int sock;\n    char buf[1024];\n    unlink(SOCKET_NAME);\n\n    sock = socket(AF_UNIX, SOCK_STREAM, 0);\n    if (sock == -1){\n            perror(\"socket\");\n            exit(EXIT_FAILURE);\n    }\n    memset(&amp;server, 0, sizeof(struct sockaddr_un));\n\n    server.sun_family = AF_UNIX;\n    strncpy(server.sun_path, SOCKET_NAME, sizeof(server.sun_path) - 1);\n\n    if (bind(sock, (struct sockaddr *) &amp;server, sizeof(struct sockaddr_un)) &lt; 0) {\n            perror(\"bind\");\n            exit(EXIT_FAILURE);\n    }\n\n    if (listen(sock, 3) &lt; -1) {\n            perror(\"listen\");\n            exit(EXIT_FAILURE);\n    }\n\n    struct pollfd fds[2];\n    fds[0].fd = sock;\n    fds[0].events = POLLIN;\n\n    std::future&lt;int&gt; ret = std::async(&amp;runProgram, \"cat\", \"test.txt\");\n\n    while (true) {\n            poll(fds, 2, -1);\n            if(fds[0].revents &amp; POLLIN) {\n                    int new_sd = accept(fds[0].fd, NULL, NULL);\n                    if (new_sd &lt; 0) {\n                            perror(\"accept\");\n                    }\n                    fds[1].fd = new_sd;\n            }\n            if (fds[0].revents &amp; POLLIN) {\n                    int rv = recv(fds[1].fd, buf, 1024, 0);\n                    if (rv &lt; 0)\n                            perror(\"recv\");\n                    else if (rv == 0) {\n                            printf(\"disconnet\\n\");\n                            close(fds[1].fd);\n                    } else {\n                            printf(\"%s\\n\", buf);\n                            send(fds[1].fd, buf, 1024, 0);\n                    }\n                     memset(buf, 0, 1024);\n\n            }\n    }\n    close(sock);\n    return(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>So I want to add one more to the pollfd (fds[ret.get()]) and get a POLLIN on fds[2] when my thread is done and I can get the return value (ret.get()), here I used an exaple command cat but in my final code the command would need mach more time so I cant wait for that to finish</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485344205, "post_id": 41850570, "comment_id": 70885067, "body": "What is the issue exactly? Did it simply not get called?"}, {"owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485344661, "post_id": 41850570, "comment_id": 70885343, "body": "@StoryTeller I suppose it is. It might not close the file properly... This is not that big of an issue, I just don&#39;t understand this behaviour."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1485351555, "post_id": 41850570, "comment_id": 70889741, "body": "Your test in <code>if(fclose(output_file) != EOF)</code> should probably be <code>if(fclose(output_file) == EOF)</code> to print the error reason."}], "answers": [{"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1485345738, "last_edit_date": 1485345738, "creation_date": 1485344128, "answer_id": 41850610, "question_id": 41850570, "link": "https://stackoverflow.com/questions/41850570/issue-testing-fclose-return-value/41850610#41850610", "title": "Issue testing fclose return value", "body": "<p><code>assert</code> is a macro that is replaced with a no op when compiled with <code>NDEBUG</code>. Roughly speaking, if you build a release version of your executable, the entire call to <code>fclose</code> is eliminated from the code.</p>\n\n<p>That is a possible reason for why files may not be closed properly.</p>\n"}, {"comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1485351457, "post_id": 41850917, "comment_id": 70889674, "body": "What is the difference to the code in the question? You also call a function in assert. And if <code>NDEBUG</code> is defined, your <code>my_fclose</code> function is also not called at all."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1485384323, "post_id": 41850917, "comment_id": 70909900, "body": "@Gerhardh It&#39;s always print something so the OP can see that the function is call twice. Maybe add a <code>fflush(stdout);</code>. To be sure."}], "tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": false, "score": 2, "last_activity_date": 1485384336, "last_edit_date": 1485384336, "creation_date": 1485345048, "answer_id": 41850917, "question_id": 41850570, "link": "https://stackoverflow.com/questions/41850570/issue-testing-fclose-return-value/41850917#41850917", "title": "Issue testing fclose return value", "body": "<p><a href=\"http://man7.org/linux/man-pages/man3/assert.3.html\" rel=\"nofollow noreferrer\"><code>assert()</code></a> has to be used with a scalar expression. That means you should not use a function in it.</p>\n\n<p>You get this behavior because <code>fclose(bmp_image)</code> is evaluated twice. So it returns <code>EOF</code> on the second call, because the file is already closed.</p>\n\n<p>You can test with this:</p>\n\n<pre><code>int my_fclose(FILE *file) {\n  int ret = fclose(file);\n  if (ret == EOF) {\n    printf(\"ERROR: %s\\n\", strerror(errno));\n  }\n  else {\n    printf(\"no problem\\n\");\n  }\n  fflush(stdout);\n  return ret;\n}\n\nint main(void) {\n  // bad\n  assert(my_fclose(bmp_image) != EOF);\n}\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 41850610, "answer_count": 2, "score": 1, "last_activity_date": 1485384336, "creation_date": 1485344011, "last_edit_date": 1485344572, "question_id": 41850570, "link": "https://stackoverflow.com/questions/41850570/issue-testing-fclose-return-value", "title": "Issue testing fclose return value", "body": "<p>In order to have a cleaner way to test specific functions, I wanted to implement tests on the <code>fclose</code> function. But I had an issue when trying to write and re-read a Bitmap image. </p>\n\n<p>In fact, I had a bug occuring when testing <code>fclose</code> this way:</p>\n\n<pre><code>assert(fclose(bmp_image) != EOF);\n</code></pre>\n\n<p>While the following code doesn't give any error:</p>\n\n<pre><code>int closing_ok = fclose(bmp_image);\nassert(closing_ok != EOF);\n</code></pre>\n\n<p>With more tests, I saw this difference occurs only in write mode but not in read mode. Is it normal such a difference occurs ? Can someone explain me this difference ?</p>\n\n<p><strong>EDIT:</strong> \nI tried to get the error meaning with that code:</p>\n\n<pre><code>if(fclose(output_file) != EOF) {\n    printf(\"ERROR: %s\\n\", strerror(errno));\n}\n</code></pre>\n\n<p>But it is also fine here and no error. </p>\n"}, {"tags": ["c", "opencl", "atomic", "reduction"], "comments": [{"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1485360235, "post_id": 41850461, "comment_id": 70896058, "body": "As I told you already, don&#39;t use atomics to reduce, and please don&#39;t use atomics that lock threads, they are even worse. Use a proper reduction code or CL 2.0 reduction functions. <a href=\"https://www.khronos.org/registry/OpenCL/sdk/2.0/docs/man/xhtml/work_group_reduce.html\" rel=\"nofollow noreferrer\">khronos.org/registry/OpenCL/sdk/2.0/docs/man/xhtml/&hellip;</a> We are talking about 10x performance penalty (at least) when using atomics vs proper parallel reduction."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 1773603, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-UZXqQyyTv38/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmjtkpUxrj9UY16bqdK3OfqQoGwmw/photo.jpg?sz=128", "display_name": "youpilat13", "link": "https://stackoverflow.com/users/1773603/youpilat13"}, "edited": false, "score": 0, "creation_date": 1485350244, "post_id": 41851389, "comment_id": 70888831, "body": "good job by initializing finalSum from host code ! actually, I did input[i]=i+1 (I did  rectification in my question). thanks a lot !"}], "tags": [], "owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "is_accepted": true, "score": 1, "last_activity_date": 1485349557, "last_edit_date": 1485349557, "creation_date": 1485346429, "answer_id": 41851389, "question_id": 41850461, "link": "https://stackoverflow.com/questions/41850461/opencl-atomic-operation-with-double-works-until-limit/41851389#41851389", "title": "OpenCL - Atomic operation with double - works until limit", "body": "<pre><code>*finalSum = 0.0;\n</code></pre>\n\n<p>is race condition for all in-flight threads. It is making result zero for my computer. Delete it, initialize it from host side. If your gpu is very good one, number of in-flight threads could be as high as 50000 maybe even more and each one hitting finalSum = 0.0 before any begins atomic function but when you pass that limit, 50001st (just a trivial number) thread re-initializes it to zero.</p>\n\n<p>Then, sum of all elements is not equal to size*(size+1)/2 because it is starting from zero(zeroth element is zero) so it is actually </p>\n\n<pre><code>(size-1)*(size)/2\n</code></pre>\n\n<p>and is giving right results for my computer when I delete finalSum =0.0 from kernel.</p>\n"}, {"tags": [], "owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "is_accepted": false, "score": 3, "last_activity_date": 1485394511, "last_edit_date": 1485394511, "creation_date": 1485360900, "answer_id": 41856445, "question_id": 41850461, "link": "https://stackoverflow.com/questions/41850461/opencl-atomic-operation-with-double-works-until-limit/41856445#41856445", "title": "OpenCL - Atomic operation with double - works until limit", "body": "<p>@huseyin answer is correct to fix the issue.</p>\n\n<p>However, I can't resist to say <strong>\"Don't use atomics to reduce.\"</strong></p>\n\n<p>And even worse atomics that lock in a while loop and access global data directly. We are probably talking about 10x performance hit, at least.</p>\n\n<p>If you can, use <a href=\"https://www.khronos.org/registry/OpenCL/sdk/2.0/docs/man/xhtml/work_group_reduce.html\" rel=\"nofollow noreferrer\">proper automatic reduction (CL 2.0+)</a>.</p>\n\n<pre><code>__kernel void sumGPU(__global const double *input, __global double *finalSum)\n{\n  // Index of current workItem\n  uint gid = get_global_id(0);\n\n  // Sum locally without atomics\n  double sum = work_group_scan_inclusive_add(input[gid]);\n\n  // Compute final sum using atomics\n  // but it is even better if just store them in an array and do final sum in CPU\n   // Only add the last one, since it contains the total sum\n  if (get_local_id(0) == get_local_size(0) - 1) { \n    atom_add_double(finalSum, sum);\n  }\n} \n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 1773603, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-UZXqQyyTv38/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmjtkpUxrj9UY16bqdK3OfqQoGwmw/photo.jpg?sz=128", "display_name": "youpilat13", "link": "https://stackoverflow.com/users/1773603/youpilat13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 1, "accepted_answer_id": 41851389, "answer_count": 2, "score": 3, "last_activity_date": 1485394511, "creation_date": 1485343700, "last_edit_date": 1485350271, "question_id": 41850461, "link": "https://stackoverflow.com/questions/41850461/opencl-atomic-operation-with-double-works-until-limit", "title": "OpenCL - Atomic operation with double - works until limit", "body": "<p>Following this <a href=\"http://suhorukov.blogspot.fr/2011/12/opencl-11-atomic-operations-on-floating.html\" rel=\"nofollow noreferrer\">link</a>, I try to implement an atomic function that computes the sum of an array of double, so I implemented my own <code>atom_add</code> function (for double).</p>\n\n<p>Here's the kernel code used :</p>\n\n<pre><code>#pragma OPENCL EXTENSION cl_khr_fp64: enable\n#pragma OPENCL EXTENSION cl_khr_int64_base_atomics : enable\n\nvoid atom_add_double(__global double *val, double delta)\n{\n  union {\n  double f;\n  ulong  i;\n  } old, new;\n\n  do\n  {\n   old.f = *val;\n   new.f = old.f + delta;\n  } \n  while (atom_cmpxchg((volatile __global ulong *)val, old.i, new.i) != old.i);\n\n}  \n\n__kernel void sumGPU ( __global const double *input, \n               __global double *finalSum\n                 )\n{\n  // Index of current workItem\n  uint gid = get_global_id(0);\n\n  // Init sum\n  *finalSum = 0.0;\n\n  // Compute final sum \n  atom_add_double(finalSum, input[gid]);\n\n}                   \n</code></pre>\n\n<p>My issue is that kernel codes generates good results until I reach roughly 100000 elements for size of <code>input</code> array. </p>\n\n<p>Over this limit, the computation isn't valid anymore (I can check the result easily because in my test case, I fill the input array by a loop <code>for(i=0;i&lt;sizeArray;i++) input[i]=i+1;</code>, so the sum is equal to <code>sizeArray*(sizeArray+1)/2</code>.</p>\n\n<p>Anyone has already got this kind of bug ?</p>\n\n<p>Can I define and put a function like <code>atom_add_double</code> into the kernel code ?</p>\n\n<p>Any help is welcome, thanks</p>\n"}, {"tags": ["c++", "c", "windows", "clang"], "comments": [{"owner": {"reputation": 1309, "user_id": 6583956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM8OA.jpg?s=128&g=1", "display_name": "Sergey.quixoticaxis.Ivanov", "link": "https://stackoverflow.com/users/6583956/sergey-quixoticaxis-ivanov"}, "edited": false, "score": 1, "creation_date": 1525132376, "post_id": 41850296, "comment_id": 87236645, "body": "At least I didn&#39;t found a better way. Thanks for <code>-Wl,-nodefaultlib:libcmt -D_DLL -lmsvcrt</code>. That&#39;s what I&#39;ve been looking for."}], "answers": [{"comments": [{"owner": {"reputation": 11007, "user_id": 22244, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5fecd49826c31a343863e90632b9a7ae?s=128&d=identicon&r=PG", "display_name": "Michael Labb&#233;", "link": "https://stackoverflow.com/users/22244/michael-labb%c3%a9"}, "edited": false, "score": 0, "creation_date": 1604860435, "post_id": 50224628, "comment_id": 114469616, "body": "Unfortunately, clang-cl.exe may not be compatible with everyone&#39;s build systems. Switching to clang-cl.exe may be non-trivial."}, {"owner": {"reputation": 4257, "user_id": 551986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2dbd10b926229854198fbbedfe8c8b?s=128&d=identicon&r=PG", "display_name": "thakis", "link": "https://stackoverflow.com/users/551986/thakis"}, "reply_to_user": {"reputation": 11007, "user_id": 22244, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5fecd49826c31a343863e90632b9a7ae?s=128&d=identicon&r=PG", "display_name": "Michael Labb&#233;", "link": "https://stackoverflow.com/users/22244/michael-labb%c3%a9"}, "edited": false, "score": 0, "creation_date": 1604949152, "post_id": 50224628, "comment_id": 114498156, "body": "Regular clang doesn&#39;t add libcmt by default, so you can just pass <code>msvcrt.lib</code> (or <code>libcmt.lib</code>) normally. If you con&#39;t use <code>clang-cl</code> you don&#39;t have the problem of clang-cl automatically adding <code>libcmt</code> :)"}, {"owner": {"reputation": 11007, "user_id": 22244, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5fecd49826c31a343863e90632b9a7ae?s=128&d=identicon&r=PG", "display_name": "Michael Labb&#233;", "link": "https://stackoverflow.com/users/22244/michael-labb%c3%a9"}, "edited": false, "score": 0, "creation_date": 1604957345, "post_id": 50224628, "comment_id": 114501177, "body": "If that were true then clang wouldn&#39;t succeed at linking anything that used crt functions unless you specified one.  It doesn&#39;t fail.  It links libcmt[d].lib by default.  You can verify this by creating a hello world and running dumpbin /DIRECTIVES on it."}], "tags": [], "owner": {"reputation": 4257, "user_id": 551986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2dbd10b926229854198fbbedfe8c8b?s=128&d=identicon&r=PG", "display_name": "thakis", "link": "https://stackoverflow.com/users/551986/thakis"}, "is_accepted": false, "score": 3, "last_activity_date": 1525744067, "creation_date": 1525744067, "answer_id": 50224628, "question_id": 41850296, "link": "https://stackoverflow.com/questions/41850296/link-dynamic-c-runtime-with-clang-windows/50224628#50224628", "title": "Link dynamic C runtime with clang (windows)", "body": "<p>If you use clang-cl, the regular /MT / /MD flags work.</p>\n"}, {"tags": [], "owner": {"reputation": 617, "user_id": 975326, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93e5ad5fa8964b9e481f02f3d7cbda42?s=128&d=identicon&r=PG&f=1", "display_name": "user975326", "link": "https://stackoverflow.com/users/975326/user975326"}, "is_accepted": false, "score": 1, "last_activity_date": 1561718619, "creation_date": 1561718619, "answer_id": 56805505, "question_id": 41850296, "link": "https://stackoverflow.com/questions/41850296/link-dynamic-c-runtime-with-clang-windows/56805505#56805505", "title": "Link dynamic C runtime with clang (windows)", "body": "<p>I had a similar problem and found I had to link against msvcrt, vcruntime and ucrt. See this post for more information <a href=\"https://devblogs.microsoft.com/cppblog/introducing-the-universal-crt/\" rel=\"nofollow noreferrer\">https://devblogs.microsoft.com/cppblog/introducing-the-universal-crt/</a>.</p>\n"}], "owner": {"reputation": 656, "user_id": 6936976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KOLl3ImU0Dc/AAAAAAAAAAI/AAAAAAAADE4/XzJ-Kasr8tc/photo.jpg?sz=128", "display_name": "ralismark", "link": "https://stackoverflow.com/users/6936976/ralismark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2643, "favorite_count": 2, "answer_count": 2, "score": 9, "last_activity_date": 1561718619, "creation_date": 1485343218, "question_id": 41850296, "link": "https://stackoverflow.com/questions/41850296/link-dynamic-c-runtime-with-clang-windows", "title": "Link dynamic C runtime with clang (windows)", "body": "<p>Clang on windows (using msvc libs) links with <code>libcmt</code> (the static runtime library) by default. Is there an easy way to link with the dynamic library (<code>msvcrt</code>)?</p>\n\n<p>Normally, clang adds <code>-defaultlib:libcmt</code> to the linker command, which links the program to the static runtime. This occurrs even if the source file is blank.</p>\n\n<p>The way I've found you can is by adding the options <code>-Wl,-nodefaultlib:libcmt -D_DLL -lmsvcrt</code> to override the default. However, this seems quite awkward. Is there a better way of linking the dynamic runtime than this?</p>\n"}, {"tags": ["c", "pointers", "multidimensional-array"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5697768"}, "edited": false, "score": 0, "creation_date": 1485344834, "post_id": 41850165, "comment_id": 70885453, "body": "check my answer converting to postfix expression will help you to understand complicated declarations :)"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485350072, "post_id": 41850165, "comment_id": 70888703, "body": "Follow the <a href=\"https://www.google.com/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=C+clockwise+rule\" rel=\"nofollow noreferrer\">clockwise rule</a>: start with the variable name <code>a</code> and go clockwise through the definition elements; thus, start with &quot;a&quot; - next is <code>[5]</code> - &quot;is an array of 5&quot; - continuing clockwise we get to <code>*</code> - &quot;pointer to&quot; - continuing clockwise we go all the way around until we hit <code>int</code> - &quot;int&quot;. Now, concatenate together all the element definitions in double-quotes, and you get &quot;a is an array of 5 pointer to int&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 0, "creation_date": 1485343047, "post_id": 41850200, "comment_id": 70884297, "body": "**a is for access to 2D array ?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 1, "creation_date": 1485343440, "post_id": 41850200, "comment_id": 70884568, "body": "@Mohsen_Fatemi - In relation to the OP, it accesses the integer pointed to by the first element in the array. The first <code>*</code> makes the array decay to a pointer and dereferences it (obtaining a pointer to an <code>int</code>). The second <code>*</code> obtains the <code>int</code> from the previously obtained pointer."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 0, "creation_date": 1485346168, "post_id": 41850200, "comment_id": 70886270, "body": "No comment about the down-vote? And right after I criticized another answer? I smell vote fraud."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 0, "creation_date": 1485349497, "post_id": 41850200, "comment_id": 70888296, "body": "@Mohsen_Fatemi - didn&#39;t think you did. It&#39;s just an issue with some of my posts as of late."}, {"owner": {"reputation": 73, "user_id": 7207852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3w5gK.jpg?s=128&g=1", "display_name": "Friendly Fella", "link": "https://stackoverflow.com/users/7207852/friendly-fella"}, "edited": false, "score": 0, "creation_date": 1485434239, "post_id": 41850200, "comment_id": 70928739, "body": "Thanks for your explanations sir. (I up-voted you but Mr.Bode&#39;s answer was more complete:))"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 73, "user_id": 7207852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3w5gK.jpg?s=128&g=1", "display_name": "Friendly Fella", "link": "https://stackoverflow.com/users/7207852/friendly-fella"}, "edited": false, "score": 0, "creation_date": 1485434620, "post_id": 41850200, "comment_id": 70928961, "body": "@B.Gh - It was certainly better illustrated :)"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1485343061, "last_edit_date": 1485343061, "creation_date": 1485342989, "answer_id": 41850200, "question_id": 41850165, "link": "https://stackoverflow.com/questions/41850165/about-using-pointers-for-2d-array-definition-in-c/41850200#41850200", "title": "About using pointers for 2D array definition in C", "body": "<p>It's not a \"2D\" array. It's a 1-dimensional array of pointers to <code>int</code>. As such the array size designates that it has space for 5 pointers. Each individual pointer can point to the first element of a buffer with different size.</p>\n\n<p>A \"true 2D array\" is the colloquial \"array of arrays\" <code>int a[M][N]</code>. Here the expression <code>a[i]</code> evaluates to the array of <code>N</code> integers, at position <code>i</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 7207852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3w5gK.jpg?s=128&g=1", "display_name": "Friendly Fella", "link": "https://stackoverflow.com/users/7207852/friendly-fella"}, "edited": false, "score": 0, "creation_date": 1485434088, "post_id": 41853276, "comment_id": 70928656, "body": "Thanks for your complete explanations:)"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1485352035, "creation_date": 1485352035, "answer_id": 41853276, "question_id": 41850165, "link": "https://stackoverflow.com/questions/41850165/about-using-pointers-for-2d-array-definition-in-c/41853276#41853276", "title": "About using pointers for 2D array definition in C", "body": "<p>Each <code>a[i]</code> points to a single <code>int</code>, which may be the first element in a sequence of <code>int</code> objects, like so:</p>\n\n<pre><code> a[0] a[1] a[2] a[3] a[4]\n+----+----+----+----+----+\n|    |    |    |    |    |\n+----+----+----+----+----+\n  |    |    |    |    |\n  |    |    |   ...  ...\n  |    |    +-------------------------------+\n  |    +-------------------+                |\n  +-------+                |                |\n          |                |                |\n          v                v                v\n        +---+            +---+            +---+\na[0][0] |   |    a[1][0] |   |    a[2][0] |   |\n        +---+            +---+            +---+\na[0][1] |   |    a[1][1] |   |    a[2][1] |   |\n        +---+            +---+            +---+\n         ...              ...              ...\n</code></pre>\n\n<p>Thus, each <code>a[i]</code> can represent a \"row\" in your structure.  You can dynamically allocate each \"row\" as</p>\n\n<pre><code>a[i] = malloc( sizeof *a[i] * row_length_for_i );\n</code></pre>\n\n<p>or you can set it to point to an existing array:</p>\n\n<pre><code>int foo[] = { 1, 2, 3 };\nint bar[] = { 5, 6, 7, 8, 9 };\n...\na[0] = foo;\na[1] = bar;\n</code></pre>\n\n<p>As shown in the example above, each \"row\" may have a different length.</p>\n\n<p>I keep putting scare quotes around \"row\" because what you have is not a true 2D array - it's not a <em>contiguous</em> sequence of elements.  The object immediately following <code>a[0][N-1]</code> will <em>most likely not</em> be <code>a[1][0]</code>.  What you have is a sequence of pointers, each of which <em>may</em> point to the first element of a sequence of <code>int</code>, or to a single <code>int</code>, or to nothing at all.</p>\n"}], "owner": {"reputation": 73, "user_id": 7207852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3w5gK.jpg?s=128&g=1", "display_name": "Friendly Fella", "link": "https://stackoverflow.com/users/7207852/friendly-fella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 41853276, "answer_count": 2, "score": 0, "last_activity_date": 1485352035, "creation_date": 1485342908, "last_edit_date": 1485343664, "question_id": 41850165, "link": "https://stackoverflow.com/questions/41850165/about-using-pointers-for-2d-array-definition-in-c", "title": "About using pointers for 2D array definition in C", "body": "<p>When we're defining a 2D array as in:</p>\n\n<pre><code>int *a[5];\n</code></pre>\n\n<p>Which dimension does the \"5\" define? The first or the second?</p>\n"}, {"tags": ["c", "string", "c-strings"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 3, "creation_date": 1485341802, "post_id": 41849715, "comment_id": 70883483, "body": "This smells a lot like a homework assignment.  You should read this (<a href=\"http://meta.stackoverflow.com/questions/253792/stack-overflow-and-homework-questions\" title=\"stack overflow and homework questions\">meta.stackoverflow.com/questions/253792/&hellip;</a>) and then you should write some code.  After you have done that, feel free to come back if your code doesn&#39;t work and I&#39;m sure someone will assist you."}, {"owner": {"reputation": 1585, "user_id": 6789999, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6RiuF.jpg?s=128&g=1", "display_name": "minigeek", "link": "https://stackoverflow.com/users/6789999/minigeek"}, "edited": false, "score": 2, "creation_date": 1485341837, "post_id": 41849715, "comment_id": 70883504, "body": "Can u show us your efforts ,what you did?"}, {"owner": {"reputation": 9, "user_id": 6103831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9998ae541b264b06e03f9f5a592eeb72?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/6103831/rohit"}, "edited": false, "score": 1, "creation_date": 1485342060, "post_id": 41849715, "comment_id": 70883671, "body": "No, this isn&#39;t a homework at all. I&#39;m just trying to do different things that will help me crack my brain to a further extent. It&#39;s not a homework."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1485342332, "post_id": 41849715, "comment_id": 70883842, "body": "<i>&quot;I&#39;m just trying to do different things&quot;</i> - You should post your attempts in the question then"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1485342447, "post_id": 41849715, "comment_id": 70883922, "body": "<code>char stars[] = &quot;********************************&quot;; \t \tprintf(&quot;%.*s\\n&quot;, 5, stars);</code>"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1485404570, "post_id": 41849715, "comment_id": 70916126, "body": "@DavidHoelzer Isn&#39;t This question good , i found it interesting , without using loop printing *"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7359847"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485410968, "post_id": 41849715, "comment_id": 70917722, "body": "@LPs Thanks A Lot , learned something new and was able to answer because of you , can you see the below answer and tell me if i did it right."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485414157, "post_id": 41849715, "comment_id": 70918686, "body": "@Stranger Yes, I saw. I already upvoted. ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7359847"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485418862, "post_id": 41849715, "comment_id": 70920549, "body": "@LPs Why it is put on hold , it is an extremely good question and not broad , perfect to the point."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485419021, "post_id": 41849715, "comment_id": 70920628, "body": "@Stranger The question is to broad due to the fact that there are many solutions to the question. Moreover OP is not showing efforts and ask for a complete code solution, that is OT for SO. In other words: it smells like homework. ;)"}, {"owner": {"reputation": 9, "user_id": 6103831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9998ae541b264b06e03f9f5a592eeb72?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/6103831/rohit"}, "edited": false, "score": 0, "creation_date": 1485419132, "post_id": 41849715, "comment_id": 70920677, "body": "I only found one solution to this problem by far and I&#39;ve appreciated it from both your sides. This doesn&#39;t mean I&#39;m not showing any efforts just because I&#39;m not posting here. I already wrote to @Stranger &#39;s answer that it worked. Peace :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7359847"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485420271, "post_id": 41849715, "comment_id": 70921324, "body": "@LPs Just for my own knowledge can you give me other solutions , i cannot literally think any other. It would greatly enhance my knowledge , i am banned to ask question here , because some people down voted my question without telling why they did so ."}, {"owner": {"reputation": 9, "user_id": 6103831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9998ae541b264b06e03f9f5a592eeb72?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/6103831/rohit"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485420304, "post_id": 41849715, "comment_id": 70921343, "body": "Same here, @LPs"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485420341, "post_id": 41849715, "comment_id": 70921361, "body": "@Stranger Off  the top of my head: use <code>memcpy</code>/<code>strncpy</code> to create a new c string to print.."}, {"owner": {"reputation": 9, "user_id": 6103831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9998ae541b264b06e03f9f5a592eeb72?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/6103831/rohit"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485420428, "post_id": 41849715, "comment_id": 70921419, "body": "But how does that help in the n(no of stars) variable to print that many amount of stars? @LPs"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485423552, "post_id": 41849715, "comment_id": 70923062, "body": "@Stranger and Rohit <a href=\"http://ideone.com/EH0YpT\" rel=\"nofollow noreferrer\">This one</a> can be something different, for example."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7359847"}, "edited": false, "score": 0, "creation_date": 1485426839, "post_id": 41849715, "comment_id": 70924863, "body": "@Rohit See Above."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7359847"}, "is_accepted": true, "score": 1, "last_activity_date": 1485343158, "last_edit_date": 1495540386, "creation_date": 1485343158, "answer_id": 41850267, "question_id": 41849715, "link": "https://stackoverflow.com/questions/41849715/i-want-to-print-a-name-inputted-by-the-user-and-some-starsinputted-too-exactly/41850267#41850267", "title": "I want to print a name inputted by the user and some stars(inputted too) EXACTLY before and after the name", "body": "<p>You Could Well Do This First Make a <code>char</code> array , Containing Number Of Maximum Stars that will be asked to print.</p>\n\n<pre><code> char stars[] = \"***************************************\";\n</code></pre>\n\n<p>Then Ask User Input for number of stars they want to print.</p>\n\n<pre><code> int a;\n printf(\"Enter Number of Stars You Want To Print : \");\n scanf(\"%d\" , &amp;a);\n</code></pre>\n\n<p>Then You print it using</p>\n\n<pre><code> printf(\"%.*s\\n\" , a , stars);\n</code></pre>\n\n<p>What is basically happening is that you are setting variable width by using <code>%.*s</code> , here <code>*</code> is taking <code>a</code> , for example if <code>a = 5</code> then it turns out to be <code>%.5s</code> and then it print first <code>5</code> characters of string.</p>\n\n<p>The catch here is you should know maximum number of stars that you would be asked to print so that you can initialize the character array according to your need.</p>\n\n<p>Please See These Question To Know More <a href=\"https://stackoverflow.com/questions/7841926/how-to-print-only-certain-parts-of-a-string\">How to print only certain parts of a string?</a> and <a href=\"https://stackoverflow.com/questions/7105890/set-variable-text-column-width-in-printf\">Set variable text column width in printf</a> .  </p>\n\n<p>If someone down vote the answer , please let me know in comment section why you did so , so that i can improve on it.</p>\n"}], "owner": {"reputation": 9, "user_id": 6103831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9998ae541b264b06e03f9f5a592eeb72?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/6103831/rohit"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "closed_date": 1485343281, "accepted_answer_id": 41850267, "answer_count": 1, "score": -5, "last_activity_date": 1485348905, "creation_date": 1485341676, "last_edit_date": 1485348905, "question_id": 41849715, "link": "https://stackoverflow.com/questions/41849715/i-want-to-print-a-name-inputted-by-the-user-and-some-starsinputted-too-exactly", "closed_reason": "Needs more focus", "title": "I want to print a name inputted by the user and some stars(inputted too) EXACTLY before and after the name", "body": "<p>I want to print stars before and after a name, like, <code>****Johannah****</code>.</p>\n\n<p>WITHOUT using the \"for\" loop, using total and complete logic. </p>\n\n<p>The number of stars to be printed should be entered by the user and then the stars should be before and after the name in the code as the output.</p>\n\n<p>For ex:\" Enter the name: Johannah.<br>\nEnter the number of stars to be printed before and after the name: 5.<br>\nName: <code>*****Johannah*****</code></p>\n\n<p>Please help. Thanks.</p>\n"}, {"tags": ["c", "pointers", "linked-list"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 4805163, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10154171998733164/picture?type=large", "display_name": "Ambareesh S J", "link": "https://stackoverflow.com/users/4805163/ambareesh-s-j"}, "edited": false, "score": 0, "creation_date": 1485342217, "post_id": 41849750, "comment_id": 70883777, "body": "&quot; Referring to its address outside the scope of its declaring function is undefined behavior &quot;   So here where does the scope of the declaring function end? When insert returns, there is no definite address value for temp?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 97, "user_id": 4805163, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10154171998733164/picture?type=large", "display_name": "Ambareesh S J", "link": "https://stackoverflow.com/users/4805163/ambareesh-s-j"}, "edited": false, "score": 1, "creation_date": 1485342755, "post_id": 41849750, "comment_id": 70884112, "body": "@AmbareeshSJ Correct, once <code>insert</code> function returns, the memory that was previously used by <code>temp</code> is up for re-use by other parts of your program, including <code>temp</code> inside another invocation of <code>insert</code>. Essentially, all nodes that you collected in your list are stored at the same invalid address."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1485341790, "creation_date": 1485341790, "answer_id": 41849750, "question_id": 41849693, "link": "https://stackoverflow.com/questions/41849693/why-is-this-linked-list-printing-the-last-element-indefinitely/41849750#41849750", "title": "Why is this linked list printing the last element indefinitely?", "body": "<p>List nodes must be allocated dynamically. This</p>\n\n<pre><code>Node temp = {data, NULL} ;\n</code></pre>\n\n<p>declares a local variable. Referring to its address outside the scope of its declaring function is <em>undefined behavior</em>.</p>\n\n<p>Replace with</p>\n\n<pre><code>Node *temp = malloc(sizeof(Node));\ntemp-&gt;data = data;\ntemp-&gt;next = NULL;\n</code></pre>\n\n<p>Now thtat <code>temp</code> is a pointer, expression <code>&amp;temp</code> has to be replaced with <code>temp</code> as well.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1485341834, "last_edit_date": 1495535355, "creation_date": 1485341834, "answer_id": 41849773, "question_id": 41849693, "link": "https://stackoverflow.com/questions/41849693/why-is-this-linked-list-printing-the-last-element-indefinitely/41849773#41849773", "title": "Why is this linked list printing the last element indefinitely?", "body": "<p>Because you save a pointer to a local variable in the list. When the <code>insert</code> function returns, the local variable <code>temp</code> will go out of scope and cease to exist. Saving a pointer to it and using that pointer will lead to <em>undefined behavior</em>. <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">Find a good beginners book</a> and read about dynamic allocation of memory.</p>\n"}], "owner": {"reputation": 97, "user_id": 4805163, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10154171998733164/picture?type=large", "display_name": "Ambareesh S J", "link": "https://stackoverflow.com/users/4805163/ambareesh-s-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 41849750, "answer_count": 2, "score": 1, "last_activity_date": 1485341834, "creation_date": 1485341574, "question_id": 41849693, "link": "https://stackoverflow.com/questions/41849693/why-is-this-linked-list-printing-the-last-element-indefinitely", "title": "Why is this linked list printing the last element indefinitely?", "body": "<p>I was completing a Hackerrank challenge involving addition of elements to a linked list and printing it.</p>\n\n<p>The input is of this format: A set of integers, in which the first element gives the size and the rest are the components of the list. </p>\n\n<p>I completed the challenge in Java, but I am not able to do it in C.\nInput of  4 2 3 4 1 should print 2 3 4 1, but this snippet that I coded is giving me 1 1 1 1 1 1 .... {truncated}</p>\n\n<p><strong>My approach:</strong> Declare a new struct <strong>temp</strong> of type Node (with the data input as data field, and NULL in next field), then iterate thorough the linked list with head as the starting point, and when it reaches the last element, change the next field of the last element to the address of the current element.</p>\n\n<p>Code:</p>\n\n<pre><code> #include &lt;stdlib.h&gt;\n #include &lt;stdio.h&gt; \n\n   typedef struct Node{\n   int data;\n   struct Node* next;\n    }Node;\n\n Node* insert(Node *head,int data)\n  {       \n    Node temp = {data, NULL} ;\n\n     if (head == NULL)\n      { head =&amp;temp;\n        return head;\n      }\n\n     else{\n\n    Node* current = head ;\n    while(current-&gt;next !=NULL)\n      current = current-&gt;next ;\n\n      current-&gt;next = &amp;temp;\n\n      return head;\n       }\n   }\n\nvoid display(Node *head)\n{\nNode *start=head;\nwhile(start)\n{\n    printf(\"%d \",start-&gt;data);\n    start=start-&gt;next;\n}\n}\n\nint main()\n{\nint T,data;\nscanf(\"%d\",&amp;T);\nNode *head=NULL;    \nwhile(T--&gt;0){\n    scanf(\"%d\",&amp;data);\n    head=insert(head,data);\n            }\n\n display(head);\n\n }\n</code></pre>\n"}, {"tags": ["c", "winapi", "visual-studio-2015", "warnings", "windows-7-x64"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1485341462, "post_id": 41849345, "comment_id": 70883272, "body": "Don&#39;t use that function/macro, it&#39;s not available from Windows 8.1"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1485342944, "post_id": 41849345, "comment_id": 70884227, "body": "<i>I&#39;m not allowed to change the code</i>: why do you have this requirement ?"}, {"owner": {"reputation": 469, "user_id": 6012315, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7f2484ba51df08ea30569f351afe958?s=128&d=identicon&r=PG&f=1", "display_name": "Schafwolle", "link": "https://stackoverflow.com/users/6012315/schafwolle"}, "edited": false, "score": 0, "creation_date": 1485352532, "post_id": 41849345, "comment_id": 70890456, "body": "I tought there is a way to solve it without pragma as I could solve the rest without pragmas and #ifdef"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1485384703, "post_id": 41849345, "comment_id": 70910047, "body": "&quot;<i>Don&#39;t use that function/macro, it&#39;s not available from Windows 8.1</i>&quot; - that is completely untrue.  The function itself is available, it is simply that it exhibits new behavior on 8.1 and later depending on how your app is manifested. The real question is, why is the code using <code>GetVersionEx()</code> to begin with? What is the code trying to solve by retrieving the (potentially simulated) OS version number that can&#39;t be solved in a different and more reliable way?"}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1485341393, "post_id": 41849602, "comment_id": 70883235, "body": "He wrote: <i>I&#39;m not allowed to change the code. So I can not use #pragma.</i> Not (yet) downvoted."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1485343058, "post_id": 41849602, "comment_id": 70884307, "body": "Actually I won&#39;t downvote because the answer is still correct, even if it doesn&#39;t meet the OP&#39;s (somewhat strange) requirements."}, {"owner": {"reputation": 469, "user_id": 6012315, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7f2484ba51df08ea30569f351afe958?s=128&d=identicon&r=PG&f=1", "display_name": "Schafwolle", "link": "https://stackoverflow.com/users/6012315/schafwolle"}, "edited": false, "score": 0, "creation_date": 1485352599, "post_id": 41849602, "comment_id": 70890522, "body": "Sorry for being strang. I just know that answer allready and tried to avoid it. +1"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1485355794, "post_id": 41849602, "comment_id": 70892806, "body": "That pragma has a command line equivalent, <code>&#47;Wd</code>. Just know that unless you have a proper manifest, Windows 10 will lie to you with that function and say Windows 8.1."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 1, "last_activity_date": 1485341336, "creation_date": 1485341336, "answer_id": 41849602, "question_id": 41849345, "link": "https://stackoverflow.com/questions/41849345/what-is-the-preprocessor-define-to-disable-the-warning-getversionexw-was-decl/41849602#41849602", "title": "What is the Preprocessor define to disable the Warning &quot;GetVersionExW&#39;: was declared deprecated&quot;", "body": "<p>Try this:</p>\n\n<pre><code>#pragma warning(disable: &lt;warning number&gt;)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": false, "score": 4, "last_activity_date": 1485359949, "last_edit_date": 1485359949, "creation_date": 1485352003, "answer_id": 41853262, "question_id": 41849345, "link": "https://stackoverflow.com/questions/41849345/what-is-the-preprocessor-define-to-disable-the-warning-getversionexw-was-decl/41853262#41853262", "title": "What is the Preprocessor define to disable the Warning &quot;GetVersionExW&#39;: was declared deprecated&quot;", "body": "<p>The API call <code>GetVersionExW</code> is declared using <a href=\"https://msdn.microsoft.com/en-us/library/044swk7y.aspx\" rel=\"nofollow noreferrer\">__declspec(deprecated)</a>. There is no way to disable a warning for particular API call.</p>\n\n<p>Your only option is to disable <a href=\"https://msdn.microsoft.com/en-us/library/ttcz0bys.aspx\" rel=\"nofollow noreferrer\">Warning C4996</a> altogether, either through a preprocessor <a href=\"https://msdn.microsoft.com/en-us/library/2c8f766e.aspx\" rel=\"nofollow noreferrer\">pragma warning</a> before including the respective header file, or globally in the project settings (compiler option <a href=\"https://msdn.microsoft.com/en-us/library/thxezb7y.aspx\" rel=\"nofollow noreferrer\">/wd</a>).</p>\n"}], "owner": {"reputation": 469, "user_id": 6012315, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7f2484ba51df08ea30569f351afe958?s=128&d=identicon&r=PG&f=1", "display_name": "Schafwolle", "link": "https://stackoverflow.com/users/6012315/schafwolle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1746, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485359949, "creation_date": 1485340631, "last_edit_date": 1485341351, "question_id": 41849345, "link": "https://stackoverflow.com/questions/41849345/what-is-the-preprocessor-define-to-disable-the-warning-getversionexw-was-decl", "title": "What is the Preprocessor define to disable the Warning &quot;GetVersionExW&#39;: was declared deprecated&quot;", "body": "<p>I'm not allowed to change the code. So I can not use <code>#pragma</code>. So my Question is what is the Preprocessor define that I need to pass to the compiler to disable the warning of the function <code>GetVersionExW</code>?</p>\n\n<p>I tried:</p>\n\n<ul>\n<li><p><code>_CRT_SECURE_NO_WARNINGS</code></p></li>\n<li><p><code>_CRT_NONSTDC_NO_DEPRECATE</code></p></li>\n<li><p><code>_WINSOCK_DEPRECATED_NO_WARNINGS</code></p></li>\n<li><p><code>_CRT_SECURE_NO_DEPRECATE</code></p></li>\n</ul>\n"}, {"tags": ["c", "file-io"], "answers": [{"tags": [], "owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "is_accepted": false, "score": 2, "last_activity_date": 1485341796, "last_edit_date": 1495542252, "creation_date": 1485341322, "answer_id": 41849595, "question_id": 41849261, "link": "https://stackoverflow.com/questions/41849261/output-file-is-filled-with-h-symbols-c/41849595#41849595", "title": "Output file is filled with H symbols, C", "body": "<p>You print to the file <code>o_file</code> to insert your strings. Then, <em>immediately after this</em>, you start to <em>read</em> from this same file.</p>\n\n<p>Read and write to a single file both use the same file pointer. Because the file pointer is here always at the very end of the file after these <code>write</code>s, the next <code>read</code> should fail \u2013 but since you don't check the result of <code>fscanf</code>, you don't ever realize that, and you write <em>uninitialized</em> data into the new file.</p>\n\n<ol>\n<li>After writing the new contents into <code>o_file</code>, reset the file pointer to the start with <code>fseek (o_file, 0, SEEK_SET)</code> or <code>rewind (o_file)</code>.</li>\n<li>Always test if <code>fscanf</code> (and <code>scanf</code>) returns the correct number of recognized items. The return value is there for a reason.</li>\n<li>Also read <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>.</li>\n</ol>\n"}], "owner": {"reputation": 23, "user_id": 7454978, "user_type": "registered", "profile_image": "https://graph.facebook.com/909996952411432/picture?type=large", "display_name": "Altynbek Tanbayev", "link": "https://stackoverflow.com/users/7454978/altynbek-tanbayev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485342437, "creation_date": 1485340401, "last_edit_date": 1485342437, "question_id": 41849261, "link": "https://stackoverflow.com/questions/41849261/output-file-is-filled-with-h-symbols-c", "title": "Output file is filled with H symbols, C", "body": "<p>I'm trying to write a program where I add words to one text file. Also, I can delete any word from this file and I save the result without this word to another text file. But when I run it, my second text file is filled with H symbols, and its size can be more than 100 mb. What's wrong with this code? Here it is:</p>\n\n<pre><code>int main(void)\n{   \nint wordNumbers;\nint i;\nchar buf[512];\nchar word[128];\n\nFILE *o_file = fopen(\"C:\\\\atest.txt\", \"a\");\nFILE *s_file = fopen(\"C:\\\\btest.txt\", \"w\");\n\nprintf(\"please add an amount of words of the dictionary \");\nscanf(\"%i\", &amp;wordNumbers);\n\nfor (i=0; i&lt; wordNumbers; i++)\n{   char word[100] = {0};\n    printf(\"add a word into the dictionary please\\n\");\n    scanf(\"%s\", &amp;word);\nfprintf(o_file, \"%s\\n\", word);\n}\n\nif(!o_file || !s_file) return -1;\nprintf(\"please write down the word you want to delete\\n\");\nscanf(\"%s\",&amp;word);\ndo    \n {  \n    fscanf(o_file, \"%511s\", buf);\n    if(!strcmp(buf, word))\n        continue;\n    fprintf(s_file, \"%s\\n\", buf);\n}\nwhile(!feof(o_file));\nfclose(o_file);\nfclose(s_file);\n\n   }    \n</code></pre>\n"}, {"tags": ["c", "sockets", "unix", "tcp"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1485340387, "post_id": 41849214, "comment_id": 70882534, "body": "From which function?"}, {"owner": {"reputation": 85, "user_id": 6639133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b82faf4e029248d7cd0b6fae18067b4?s=128&d=identicon&r=PG", "display_name": "ZamenWolk", "link": "https://stackoverflow.com/users/6639133/zamenwolk"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1485340533, "post_id": 41849214, "comment_id": 70882650, "body": "I edited the post to include the line of the error, sorry for that"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1485342571, "post_id": 41849214, "comment_id": 70884007, "body": "You are using <code>client</code> where you should be using <code>sock</code>."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1485342915, "post_id": 41849214, "comment_id": 70884215, "body": "It&#39;s Berkeley socket, not UNIX socket. UNIX sockets are something different and they use file names for address instead of IP number and port. <a href=\"https://en.wikipedia.org/wiki/Berkeley_sockets\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Berkeley_sockets</a>"}], "answers": [{"tags": [], "owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "is_accepted": false, "score": 0, "last_activity_date": 1485342883, "creation_date": 1485342883, "answer_id": 41850157, "question_id": 41849214, "link": "https://stackoverflow.com/questions/41849214/unix-socket-error-socket-operation-on-non-socket/41850157#41850157", "title": "UNIX socket error : socket operation on non-socket", "body": "<p>In the posted code you initialize <code>int client = 0</code> and then I don't see you change it. So when you call <code>send(0, ...)</code> you obviously get that error.</p>\n\n<p>As already mentioned by @EJP in comment to your question it can be a typo because it looks like you really was intended to use <code>sock</code> (as you connected it: <code>connect(sock, ...)</code> instead of <code>client</code> in call to <code>send</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 6639133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b82faf4e029248d7cd0b6fae18067b4?s=128&d=identicon&r=PG", "display_name": "ZamenWolk", "link": "https://stackoverflow.com/users/6639133/zamenwolk"}, "edited": false, "score": 0, "creation_date": 1485431212, "post_id": 41850215, "comment_id": 70927068, "body": "Thanks ! It was a stupid error I see... I meant to use client as the variable for the socket, but I messed it up somewhere."}], "tags": [], "owner": {"reputation": 7703, "user_id": 236757, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/p9t78.png?s=128&g=1", "display_name": "user237419", "link": "https://stackoverflow.com/users/236757/user237419"}, "is_accepted": true, "score": 1, "last_activity_date": 1485343437, "last_edit_date": 1485343437, "creation_date": 1485343021, "answer_id": 41850215, "question_id": 41849214, "link": "https://stackoverflow.com/questions/41849214/unix-socket-error-socket-operation-on-non-socket/41850215#41850215", "title": "UNIX socket error : socket operation on non-socket", "body": "<p>you are using the \"client\" variable as a socket parameter to sendto() when in fact you should use the \"sock\" variable. </p>\n\n<p>should you strace the program, you could see the following:</p>\n\n<pre><code>connect(3, {sa_family=AF_INET, sin_port=htons(5000), sin_addr=inet_addr(\"127.0.0.1\")}, 16) = 0\nnanosleep({tv_sec=1, tv_nsec=0}, NULL)  = 0\nsendto(0, \"I am a message that is supposed \"..., 46, 0, NULL, 0) = -1 ENOTSOCK (Socket operation on non-socket)\n</code></pre>\n\n<p>note the first sendto() parameter which is 0 (by default this is the stdin file descriptor) when in fact it should be 3 (see connect(...) line)</p>\n\n<p>as a side note, you don't need to bind() the client socket unless you have an explicit reason to do so (using some other route than the default one, bypassing a firewall rule somewhere, etc). the os will assign by default the ip of the network interface the default route goes through and a random free port.</p>\n"}], "owner": {"reputation": 85, "user_id": 6639133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b82faf4e029248d7cd0b6fae18067b4?s=128&d=identicon&r=PG", "display_name": "ZamenWolk", "link": "https://stackoverflow.com/users/6639133/zamenwolk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3364, "favorite_count": 0, "accepted_answer_id": 41850215, "answer_count": 2, "score": 0, "last_activity_date": 1485343437, "creation_date": 1485340266, "last_edit_date": 1485340507, "question_id": 41849214, "link": "https://stackoverflow.com/questions/41849214/unix-socket-error-socket-operation-on-non-socket", "title": "UNIX socket error : socket operation on non-socket", "body": "<p>I am trying to make a client-server communication using UNIX sockets and using the STREAM protocol.</p>\n\n<p>My server is running fine, but my client is not working. Whenever I try to send or receive data, I get an error : \"socket operation on non-socket\". I really don't see where it comes from, because my server is very similar and I don't have any problem. My server is on my local machine (127.0.0.1) and port 5000. It is open and listening (I checked with the netstat command).</p>\n\n<p>The code is there :</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;errno.h&gt;\n\n#define CHECK(ret, mes) if ((ret) == -1) {perror(mes); exit(-1);}\n\n#define STRING_LENGTH 250\n\nint createSocketINETClient(short mode, char *addr, short port)\n{\n    int s;\n    struct sockaddr_in moi, server;\n    int moi_len, server_len;\n\n    moi.sin_family = AF_INET;\n    moi.sin_port = htons(port);\n    moi.sin_addr.s_addr = inet_addr(addr);\n\n    memset(moi.sin_zero, 0, 8);\n\n    s = socket(AF_INET, mode, 0);\n\n    CHECK(s, \"socket\");\n\n    moi_len = sizeof(moi);\n\n    CHECK(bind(s, (struct sockaddr*) &amp;moi, moi_len), \"bind\");\n\n    return s;\n}\n\nvoid infoSocket (int s)\n{\n    struct sockaddr_in sock_addr;\n    socklen_t len = sizeof(sock_addr);\n\n    getsockname(s, (struct sockaddr*) &amp;sock_addr, &amp;len);\n\n    printf(\"Onfo of socket %d\\n\", s);\n    printf(\"\\t IP : %s\\n\", inet_ntoa(sock_addr.sin_addr));\n    printf(\"\\t port : %d\\n\\n\", ntohs(sock_addr.sin_port));\n}\n\nint main ()\n{\n    int bytes;\n    int sock = createSocketINETClient(SOCK_STREAM, \"0.0.0.0\", 0);\n    struct sockaddr_in serveurSock;\n    int client = 0, clientSockLen = 0;\n    char message[] = \"I am a message that is supposed to WORK !!!!\\n\";\n    char fromServer[STRING_LENGTH] = \"\";\n    infoSocket(sock);\n\n\n    serveurSock.sin_family = AF_INET;\n    serveurSock.sin_port = htons(5000);\n    serveurSock.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n\n    memset(serveurSock.sin_zero, 0, 8);\n\n    CHECK(connect(sock, (struct sockaddr*) &amp;serveurSock, sizeof(serveurSock)), \"connect\");\n\n    usleep(1000000);\n\n    CHECK((bytes = send(client, message, sizeof(message), 0)), \"send\");\n    printf(\"Message sent to server : %d bytes, \\\"%s\\\"\\n\", bytes, message);\n\n    CHECK((bytes = recv(client, fromServer, sizeof(fromServer), 0)), \"recv\");\n    printf(\"Message received from server : %d bytes, \\\"%s\\\"\\n\", bytes, fromServer);\n\n    close(client);\n    printf(\"Client released !\\n\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>What did I do wrong ?</p>\n\n<p>EDIT : The error comes from this line :</p>\n\n<pre><code>CHECK((bytes = send(client, message, sizeof(message), 0)), \"send\");\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1485339777, "post_id": 41849004, "comment_id": 70882065, "body": "the first one is equivalent to <code>for(i = n; i&gt; 1; i--)</code>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1485339985, "post_id": 41849004, "comment_id": 70882244, "body": "<code>size_t i = 42; while (i --&gt; 0) {}</code>, why not..."}, {"owner": {"reputation": 7, "user_id": 4831015, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001781838943/picture?type=large", "display_name": "Sandeep Jha", "link": "https://stackoverflow.com/users/4831015/sandeep-jha"}, "edited": false, "score": 0, "creation_date": 1485340071, "post_id": 41849004, "comment_id": 70882310, "body": "<code>for(i = n; i&gt; 1; i--)</code> is giving a different result than first or second loop."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1485340633, "post_id": 41849004, "comment_id": 70882709, "body": "@Paul Ogilvie: No one knows when the decrement is perfomed: it can be done before or after. It does not matter. What matters is that post-increment evaluates to tyhe <i>original</i> value of <code>i</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1485340210, "post_id": 41849040, "comment_id": 70882418, "body": "..so in the loop, <code>i</code> is the first time <code>n-1</code> and <code>i</code> is in the last iteration <code>0</code>. And after the loop, <code>i</code> is <code>-1</code>."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1485340489, "post_id": 41849040, "comment_id": 70882610, "body": "@PaulOgilvie - Yeah, good point. Added the last value of <code>i</code> for both versions."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1485340711, "last_edit_date": 1485340711, "creation_date": 1485339805, "answer_id": 41849040, "question_id": 41849004, "link": "https://stackoverflow.com/questions/41849004/what-is-the-difference-between-these-two-for-loops-in-c/41849040#41849040", "title": "What is the difference between these two for loops in C?", "body": "<p>The difference is the step in which <code>i</code> is actually decremented, which affects the values of <code>i</code> seen <em>inside</em> the loop body.</p>\n\n<p>The second traditional version decrements <code>i</code> after the loop body is executed, and before the condition is checked again. Thus <code>i</code> reaches 0 after the loop body is executed for <code>i == 1</code>. The condition is checked again and after the loop <code>i</code> is 0.</p>\n\n<p>The first version decrements <code>i</code> before the loop body is executed, as part of the condition being checked. Here the loop body runs the first time with <code>i == n - 1</code> and the last time with <code>i == 0</code>. Then <code>i</code> is decremented and its previous value compared against <code>0</code>. The loop exits and <code>i</code> is -1 after it.</p>\n\n<p>In the traditional version, the loop body always sees the same value against which the conditional part was checked.</p>\n"}, {"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1485340337, "post_id": 41849158, "comment_id": 70882502, "body": "I find your answer incomplete as it does not discuss the behaviour (value) of <code>i</code> in the comparisson."}, {"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1485340601, "post_id": 41849158, "comment_id": 70882692, "body": "@PaulOgilvie well, the value of i in the comparison is the same for both cases. The postfix decrement means the COMPARISON is with the value before decrementing - but because the decrement is now at the head of the loop, the value of <code>i</code> in the loop is different."}, {"owner": {"reputation": 2322, "user_id": 1987178, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YS4r1.png?s=128&g=1", "display_name": "rom1v", "link": "https://stackoverflow.com/users/1987178/rom1v"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1485340634, "post_id": 41849158, "comment_id": 70882711, "body": "@PaulOgilvie The comparison is the same, both loops iterate <i>n</i> times with the same values. The only difference is the value of <code>i</code> inside the loop."}], "tags": [], "owner": {"reputation": 244, "user_id": 7457979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6d03a2e42b5561f986204e14c04e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeonghyeon Lee", "link": "https://stackoverflow.com/users/7457979/jeonghyeon-lee"}, "is_accepted": false, "score": 4, "last_activity_date": 1485340109, "creation_date": 1485340109, "answer_id": 41849158, "question_id": 41849004, "link": "https://stackoverflow.com/questions/41849004/what-is-the-difference-between-these-two-for-loops-in-c/41849158#41849158", "title": "What is the difference between these two for loops in C?", "body": "<p>As for the first one, <code>i</code> is decremented <em>before</em> the loop body is executed. The second one decrements <code>i</code> <em>after</em> the loop body is executed.</p>\n"}], "owner": {"reputation": 7, "user_id": 4831015, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001781838943/picture?type=large", "display_name": "Sandeep Jha", "link": "https://stackoverflow.com/users/4831015/sandeep-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 641, "favorite_count": 0, "closed_date": 1485340638, "answer_count": 2, "score": -4, "last_activity_date": 1485340711, "creation_date": 1485339701, "last_edit_date": 1485339850, "question_id": 41849004, "link": "https://stackoverflow.com/questions/41849004/what-is-the-difference-between-these-two-for-loops-in-c", "closed_reason": "Duplicate", "title": "What is the difference between these two for loops in C?", "body": "<pre><code>int i;\nfor(i = n; i --&gt; 0;)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>for(i = n; i &gt; 0; --i)\n</code></pre>\n\n<p>They are producing different results.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1485338835, "post_id": 41848524, "comment_id": 70881455, "body": "Edit your code and indent it properly, if you expect anyone to read this question."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1485339395, "post_id": 41848524, "comment_id": 70881826, "body": "it would be a lot easier if you would use the english language in your code."}, {"owner": {"reputation": 163, "user_id": 6262081, "user_type": "registered", "profile_image": "https://graph.facebook.com/1770081543225728/picture?type=large", "display_name": "FranzGoogle", "link": "https://stackoverflow.com/users/6262081/franzgoogle"}, "edited": false, "score": 0, "creation_date": 1485347608, "post_id": 41848524, "comment_id": 70887128, "body": "Sorry, you&#39;re right. I forgot to change language."}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 2, "last_activity_date": 1485338987, "creation_date": 1485338987, "answer_id": 41848742, "question_id": 41848524, "link": "https://stackoverflow.com/questions/41848524/all-returning-values-of-array-are-0/41848742#41848742", "title": "All returning values of array are 0", "body": "<p>You are not writing to the array you passed in to <code>leggiSequenza</code>. Instead you are allocating a new array that you write to and then free.</p>\n\n<p>Remove the following lines from <code>leggiSequenza</code> to fix that problem:</p>\n\n<pre><code>seq = (int*) malloc(dim*sizeof(int));\n</code></pre>\n\n<p>and</p>\n\n<pre><code>free(seq);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 6262081, "user_type": "registered", "profile_image": "https://graph.facebook.com/1770081543225728/picture?type=large", "display_name": "FranzGoogle", "link": "https://stackoverflow.com/users/6262081/franzgoogle"}, "edited": false, "score": 0, "creation_date": 1485339524, "post_id": 41848813, "comment_id": 70881903, "body": "Thank you! Now I understand where&#39;s the error. Very kind."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 163, "user_id": 6262081, "user_type": "registered", "profile_image": "https://graph.facebook.com/1770081543225728/picture?type=large", "display_name": "FranzGoogle", "link": "https://stackoverflow.com/users/6262081/franzgoogle"}, "edited": false, "score": 1, "creation_date": 1485339734, "post_id": 41848813, "comment_id": 70882039, "body": "@FranzGoogle - Be mindful of what you understood. It&#39;s only now a correct answer."}], "tags": [], "owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "is_accepted": false, "score": 1, "last_activity_date": 1485339607, "last_edit_date": 1485339607, "creation_date": 1485339195, "answer_id": 41848813, "question_id": 41848524, "link": "https://stackoverflow.com/questions/41848524/all-returning-values-of-array-are-0/41848813#41848813", "title": "All returning values of array are 0", "body": "<pre><code>int * p = malloc(200*sizeof(int));\n</code></pre>\n\n<p>Ok, here you allocated some memory. Now you pass that pointer <code>p</code> into first function:</p>\n\n<p><code>int dim = leggiSequenza(nomeFile, p);</code></p>\n\n<p>Inside this function you have a variable <code>seq</code> that is a pointer actually pointing to the same memory that <code>p</code> does.</p>\n\n<p>Let's look further: <code>seq = (int*) malloc(dim*sizeof(int));</code>\nHere you allocated new memory and afterwards do something with it.</p>\n\n<p>Then you call <code>free(seq)</code> thus the memory allocated by second call to <code>malloc</code> is cleared (memory pointed to by <code>p</code> is still valid but remains unchanged)</p>\n\n<p>Now you call <code>passi = numeroPassi(p, dim);</code>. Here memory pointed to by <code>p</code> is used as if there was no changes by first function</p>\n"}], "owner": {"reputation": 163, "user_id": 6262081, "user_type": "registered", "profile_image": "https://graph.facebook.com/1770081543225728/picture?type=large", "display_name": "FranzGoogle", "link": "https://stackoverflow.com/users/6262081/franzgoogle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 41848742, "answer_count": 2, "score": -4, "last_activity_date": 1485339607, "creation_date": 1485338431, "last_edit_date": 1495542809, "question_id": 41848524, "link": "https://stackoverflow.com/questions/41848524/all-returning-values-of-array-are-0", "title": "All returning values of array are 0", "body": "<p>Yesterday I asked for a help in <a href=\"https://stackoverflow.com/questions/41840003/how-to-return-an-array-from-function-to-main\">this</a> question, and now the situation is better, but not OK. I repost the correct code, but it returns another problem, despite the corrections. The second function reads all the array's values as 0.\nI think the problem is about the pointers, but I can't understand how to fix it.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint leggiSequenza(char *nomeFile, int *seq) {\n\n    FILE *in;\n    int i;\n    int dim;\n\n    if((in = fopen(nomeFile, \"r\"))==NULL) {\n        printf(\"Errore: impossibile leggere il fie in apertura.\\n\");\n        return -1;\n    }\n\n    fscanf(in, \"%d\", &amp;(dim));\n    printf(\"Trovati %d valori.\\n\", dim);\n\n    if(dim &lt; 0) {\n        printf(\"Errore: il numero di interi risulta negativo.\\n\");\n        return -1;\n    }\n\n    seq = (int*) malloc(dim*sizeof(int));\n\n    i=0;\n    while(!feof(in) &amp;&amp; i&lt;(dim)) {\n        fscanf(in, \"%d\", &amp;seq[i]);\n        i++;\n    }\n\n    for(i=0; i&lt;(dim); i++) {\n        printf(\"Il valore letto in posizione %d \u00e8: %d.\\n\", i+1, seq[i]);\n    }\n\n\n    fclose(in);\n    free(seq);\n\n    return dim;\n    }\n\n\n\n\nint numeroPassi(int *valori, int size) {\n\n    int i;\n    int somma;\n    int passi[size];\n\n    for(i=0; i&lt;size; i++) {\n        printf(\"valore in posizione %d = %d.\\n\", i+1, valori[i]);\n    }\n\n    somma=0;\n    for(i=0; i&lt;(size-1); i++) {\n        somma = somma + abs(valori[i]);\n    }\n\n    printf(\"La somma del valore assoluto di tutti gli elementi \u00e8: %d.\\n\", somma);\n\n    return 0;\n}\n\n\n\n\nint main(int argc, char* argv[]) {\n\n    char nomeFile[200];\n    int passi;\n\n    printf(\"\\n\");\n\n    printf(\"Inserire il nome del file:\\n\");\n    scanf(\"%s\", nomeFile);\n    printf(\"\\n\");\n\n    int * p = malloc(200*sizeof(int));\n    int dim = leggiSequenza(nomeFile, p);\n    printf(\"dimensione = %d\\n\", dim);\n    printf(\"\\n\");\n\n    passi = numeroPassi(p, dim);\n\n    printf(\"\\n\");\n\n    free(p);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers", "inheritance", "virtual-functions"], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1485341990, "creation_date": 1485341990, "answer_id": 41849832, "question_id": 41848385, "link": "https://stackoverflow.com/questions/41848385/pass-c-object-with-possible-multiple-virtual-inheritance-through-a-c-abi-via/41849832#41849832", "title": "Pass C++ object (with possible multiple virtual inheritance) through a C ABI via void pointer", "body": "<blockquote>\n<pre><code>return static_cast&lt;void*&gt;(static_cast&lt;A*&gt;(v)); // method 1\nreturn reinterpret_cast&lt;void*&gt;(static_cast&lt;A*&gt;(v)); // method 2\n</code></pre>\n</blockquote>\n\n<p>If <code>void* v</code> points to an instance of type <code>C</code>, then <code>static_cast&lt;A*&gt;(v)</code> is wrong.</p>\n\n<blockquote>\n<pre><code>//method 3 &amp; 4\nC** c = static_cast&lt;C**&gt;(v); // Known to be C* type\nreturn static_cast&lt;void*&gt;(&amp;static_cast&lt;A*&gt;(*c)); // method 3\nreturn static_cast&lt;void*&gt;(static_cast&lt;A**&gt;(c)); // method 4\n</code></pre>\n</blockquote>\n\n<p>If <code>void* v</code> points to an instance of type <code>C</code>, then <code>static_cast&lt;C**&gt;(v)</code> is wrong.</p>\n\n<hr>\n\n<p>Be very careful about casting <code>void*</code> into the correct type of the pointed object. I would prefer to use <code>static_cast</code> when I can, instead of <code>reinterpret_cast</code>. I also prefer to implicit casts for base subobject access and for conversion to <code>void*</code>. The reduced boilerplate is less straining to the eyes.</p>\n\n<pre><code>void* AfromC(void* v) {\n    C* c = static_cast&lt;C*&gt;(v); // Known to be C* type\n    A* a = c;                  // point to base sub object\n    return a;                  // implicit conversion to void*\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 614, "user_id": 530051, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/50f401424cb306c287fbcf4733d608d0?s=128&d=identicon&r=PG", "display_name": "Glen Fletcher", "link": "https://stackoverflow.com/users/530051/glen-fletcher"}, "edited": false, "score": 0, "creation_date": 1485430699, "post_id": 41849966, "comment_id": 70926833, "body": "Can you clarify &quot;but va == vc is not guaranteed&quot; given I cast va to a as A* = static_cast&lt;A*&gt;(va), could I then cast this to an object of type C i.e. either static_cast&lt;C*&gt;(a) or reinterpret_cast&lt;C*&gt;(a), given I know that va had been converted as in your answer from an object of type C, or would this no longer be safe after casting through the void type?"}, {"owner": {"reputation": 6886, "user_id": 272708, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5cf904a50bb9106a1f177a0a81a405b?s=128&d=identicon&r=PG", "display_name": "dascandy", "link": "https://stackoverflow.com/users/272708/dascandy"}, "edited": false, "score": 0, "creation_date": 1485435205, "post_id": 41849966, "comment_id": 70929273, "body": "&quot;dereferencing a2 is Undefined Behaviour&quot; care to explain why you think this? From what I can tell, in a generic view <code>a2</code> and <code>c2</code> are derived identically from <code>a</code> and <code>c</code> so they should be equally UB - either yes or no, not halfway."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 614, "user_id": 530051, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/50f401424cb306c287fbcf4733d608d0?s=128&d=identicon&r=PG", "display_name": "Glen Fletcher", "link": "https://stackoverflow.com/users/530051/glen-fletcher"}, "edited": false, "score": 0, "creation_date": 1485438013, "post_id": 41849966, "comment_id": 70931121, "body": "@glenflet: No guarantee for that can be found in standard. And in implementations using vtables for virtual functions, it is common that the address of the object is the address of the vtable. In that case, the static_cast does the offset correction, but the actual value of <code>va</code> and <code>vc</code> are different in that case. Just try with a debugger and base- and sub-classes having virtual functions"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 6886, "user_id": 272708, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5cf904a50bb9106a1f177a0a81a405b?s=128&d=identicon&r=PG", "display_name": "dascandy", "link": "https://stackoverflow.com/users/272708/dascandy"}, "edited": false, "score": 0, "creation_date": 1485443132, "post_id": 41849966, "comment_id": 70934765, "body": "@dascandy: <code>va</code> is built through a static cast from a pointer to derived. In common implementations, <code>vc</code> and <code>c</code> will have same representation and value, but <code>va</code> and <code>vc</code> will have different values if A and C all have virtual functions. As <code>va2</code> if built from a <code>void *</code> it will have same value as <code>vc</code> so it could not point to a valid object. That&#39;s why dereferencing it would be UB."}, {"owner": {"reputation": 6886, "user_id": 272708, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5cf904a50bb9106a1f177a0a81a405b?s=128&d=identicon&r=PG", "display_name": "dascandy", "link": "https://stackoverflow.com/users/272708/dascandy"}, "edited": false, "score": 0, "creation_date": 1485447138, "post_id": 41849966, "comment_id": 70937865, "body": "@SergeBallesta if you build <code>a2</code> from <code>va</code> and that from <code>a</code>, then it&#39;s from a T* to void* to T*. No UB in sight - and <code>a2</code> won&#39;t need to be equal to <code>vc</code> at all. Oh wait, you&#39;re casting from <code>vc</code> to <code>a2</code>... no, that&#39;s UB."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 1, "last_activity_date": 1485342360, "creation_date": 1485342360, "answer_id": 41849966, "question_id": 41848385, "link": "https://stackoverflow.com/questions/41848385/pass-c-object-with-possible-multiple-virtual-inheritance-through-a-c-abi-via/41849966#41849966", "title": "Pass C++ object (with possible multiple virtual inheritance) through a C ABI via void pointer", "body": "<p>The rule is that you can convert back and forth from a pointer to object to a pointer to its base class, and from a pointer to object to a <code>void *</code>. But there are no guarantees that all those pointers keep same value (nor even same representation)!</p>\n\n<p>Said differently with examples where C is derived from A:</p>\n\n<pre><code>C* c = new C;\nA* a = static_cast&lt;A*&gt;(c);   // legal\nC* c1 = static_cast&lt;C*&gt;(a);  // ok c1 == c guaranteed\n\nvoid *vc = static_cast&lt;void *&gt;(c); // legal\nC* c2 = static_cast&lt;C*&gt;(vc); // ok, c2 == c guaranteed\n\nvoid *va = static_cast&lt;void *&gt;(a); // legal, but va == vc is not guaranteed\n\na2 = static_cast&lt;A*&gt;(vc);    // legal, but a2 == a not guaranteed \n                             //  and dereferencing a2 is Undefined Behaviour\n</code></pre>\n\n<p>That means that if <code>v</code> is built as <code>void *v = static_cast&lt;void *&gt;(c)</code>;  and then passed to your <code>AfromC</code> method <code>static_cast&lt;A*&gt;(v)</code> may not point to a valid object. And both methods (1) and (2) are no-op because you cast from <code>void*</code> to a pointer to obj and back which is required to get original value.</p>\n\n<p>For method (4), but you cast a pointer to void to a pointer to pointer, from pointer to pointer to pointer to pointer again and then back to void. As 3.9.2 Compound types [basic.compound] declares:</p>\n\n<blockquote>\n  <p>3 ...Pointers to layout-compatible types shall have the same value representation and\n  alignment requirements...</p>\n</blockquote>\n\n<p>As all pointers are <em>layout compatible types</em>, the second operation should not change the value and we are back in the no-op of method (1) and (2)</p>\n\n<p>Method (3) should not even compile, because you take the address of a static_cast and that is not a lvalue.</p>\n\n<p>TL/DR: methods (1), (2) and (4) are no-op, meaning that you return the input value unchanged and method (3) is illegal because <code>&amp;</code> operator requires a lvalue.</p>\n\n<p>The only realiable way to convert a void* pointing to a C object to something that could be safely converted to a A* is:</p>\n\n<pre><code>void * AfromC(void *v) {\n    C* c = static_cast&lt;C*&gt;(v);   // v shall be static_cast&lt;void&gt;(ptr_to_C)\n    A* a = static_cast&lt;A*&gt;(c);\n    return static_cast&lt;void *&gt;(a); // or return a; with the implicit void * convertion\n}\n</code></pre>\n\n<p>or as a single line expression</p>\n\n<pre><code>void * AfromC(void *v) {\n    return static_cast&lt;A*&gt;(static_cast&lt;C*&gt;(v));\n}\n</code></pre>\n"}], "owner": {"reputation": 614, "user_id": 530051, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/50f401424cb306c287fbcf4733d608d0?s=128&d=identicon&r=PG", "display_name": "Glen Fletcher", "link": "https://stackoverflow.com/users/530051/glen-fletcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 41849966, "answer_count": 2, "score": 3, "last_activity_date": 1485430404, "creation_date": 1485338081, "last_edit_date": 1485430404, "question_id": 41848385, "link": "https://stackoverflow.com/questions/41848385/pass-c-object-with-possible-multiple-virtual-inheritance-through-a-c-abi-via", "title": "Pass C++ object (with possible multiple virtual inheritance) through a C ABI via void pointer", "body": "<p>I have some concerns about the safety of type conversions I'm designing an abstract interface, witch will be supported by plugins exporting an object orientated C ABI, i.e. pointers to objects and C-style functions of the form <code>func(void *this, ...)</code> rather than C++ style member functions these will then be packed into a struct representing the objects implementation. However some of my underlying frameworks, use multiple virtual inheritance.</p>\n\n<p>Simplified example</p>\n\n<pre><code>class A\n{\n    public:\n        virtual void doA()\n}\n\nclass B\n{\n    public:\n        virtual void doB()\n}\n\nclass C : public A, public B\n{\n    public:\n        virtual void doA()\n        virtual void doB()\n}\n\nstruct impA\n{\n    (*doA)(void *self);\n}\n\nstruct impB\n{\n    (*doB)(void *self);\n}\n\nstruct impC\n{\n    (*doA)(void *self);\n    (*doB)(void *self);\n}\n\nvoid * AfromC(void *v) {\n    C*c = reinterpret_cast&lt;C*&gt;(v); // Known to be C* type\n    return static_cast&lt;void*&gt;(static_cast&lt;A*&gt;(c)); // method 1\n    return reinterpret_cast&lt;void*&gt;(static_cast&lt;A*&gt;(c)); // method 2\n\n    //method 3 &amp; 4\n    C** c = static_cast&lt;C**&gt;(v); // Known to be C* type\n    return static_cast&lt;void*&gt;(&amp;static_cast&lt;A*&gt;(*c)); // method 3\n    return static_cast&lt;void*&gt;(static_cast&lt;A**&gt;(c)); // method 4\n}\n\n/////////// main code\n\nclass A\n{\n    public:\n        void doA() { imp.doA(self); }\n    private:\n        impA imp;\n        void *self;\n}\n\nclass B\n{\n    public:\n        void doB() { imp.doB(self); }\n    private:\n        impB imp;\n        void *self;\n}\n</code></pre>\n\n<p>Consider AfromC, I have 4 possible methods of getting a pointer that I can safely pass through a C ABI, I want to known the consideration for these different methods, my preference would be method 1.</p>\n\n<p>I'm not sure if all these methods are legal or safe.</p>\n\n<p>Note: Object will always be access by functions in the binary from which they are created/destroyed they return/accept other objects handled by them self or C-style data types (up to structs of POD)</p>\n\n<p>While I've found mention of such things on the net, they are all about people having problems as a result of converting to void i.e. <code>A* a= static_cast&lt;A*&gt;(static_cast&lt;void*&gt;(c)) // c -&gt; C*</code> which is to be expected as this doesn't correct the vtable and the solutions is to use the abstract base type (this wron't work for me as I need to pass through the C ABI), however I've also heard mention of virtual pointers being larger than normal pointers hence my reason for considering methods 3 and 4, as this would be a normal pointer to the larger pointer and thus safe even for types with larger pointers.</p>\n\n<p>So my main question is will method 1 work with out problem? Aslo could I safely define a template function along the lines of <code>template  &lt;typename T, typename U&gt; void * void_cast(U v) { static_cast&lt;void *&gt;(static_cast&lt;T&gt;(v)); }</code> to simplify plugin code. Finally if method 1 is correct why? and can any of the methods be used?</p>\n"}, {"tags": ["c", "struct", "types", "typedef"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1485337869, "post_id": 41848207, "comment_id": 70880751, "body": "Have you alloc&#39;d <code>static company *freecompany;</code>?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1485338280, "post_id": 41848207, "comment_id": 70881056, "body": "<code>ps = (company*)&amp;freecompany;</code> raises red flags. You are forcing <code>company**</code> into <code>company*</code>, and hide the error message with a cast."}], "answers": [{"tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 2, "last_activity_date": 1485338312, "last_edit_date": 1485338312, "creation_date": 1485337820, "answer_id": 41848303, "question_id": 41848207, "link": "https://stackoverflow.com/questions/41848207/does-this-double-type-definition-cause-an-access-violation/41848303#41848303", "title": "Does this double type definition cause an access violation?", "body": "<blockquote>\n  <p>Why are there two type defnitions (company_tag and company), is there any link/difference between them?</p>\n</blockquote>\n\n<p>That's the whole idea of <code>typedef</code></p>\n\n<pre><code>typedef struct company_tag { struct company_tag *next;\n                         &lt;some other elements of the structure&gt;\n                       } company;\n</code></pre>\n\n<p>You can use <code>company</code> now in place of the full form<code>struct company_tag</code> - this is not an issue.</p>\n\n<hr>\n\n<blockquote>\n  <p>Why are those two type definitions used in the allocation line? (What would be the problem with (struct company*)malloc(sizeof(company));</p>\n</blockquote>\n\n<pre><code>ps-&gt;next = (struct company_tag*)malloc(sizeof(company));\n</code></pre>\n\n<p>Actually this line can (should) be written as:</p>\n\n<pre><code>ps-&gt;next = malloc(sizeof(company));\n</code></pre>\n\n<hr>\n\n<p>The problem looks to be at these lines:</p>\n\n<pre><code>static company *freecompany;\ncompany *ps;\nps = (company*)&amp;freecompany;\n</code></pre>\n\n<p>Perhaps you use pointer where you shouldn't, which means:</p>\n\n<pre><code>static company freecompany;\ncompany *ps = &amp;freecompany;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1761, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "is_accepted": true, "score": 4, "last_activity_date": 1485338430, "last_edit_date": 1485338430, "creation_date": 1485338289, "answer_id": 41848473, "question_id": 41848207, "link": "https://stackoverflow.com/questions/41848207/does-this-double-type-definition-cause-an-access-violation/41848473#41848473", "title": "Does this double type definition cause an access violation?", "body": "<blockquote>\n  <p>end up with an access violation</p>\n</blockquote>\n\n<p>Because you have not allocated memory to <code>ps</code>  and trying to access <code>ps-&gt;next</code></p>\n\n<p>You need to allocate memory before access it.\nMay be what you want is as follow change required in your code:</p>\n\n<pre><code>static company freecompany;  //declare variable \ncompany *ps;\nps = &amp;freecompany;\n</code></pre>\n\n<blockquote>\n  <p>Why are there two type defnitions (company_tag and company), is there\n  any link/difference between them?</p>\n</blockquote>\n\n<p>There is no difference,  <code>typedef</code> which you can use to give a type, a new name.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1485338687, "creation_date": 1485338687, "answer_id": 41848618, "question_id": 41848207, "link": "https://stackoverflow.com/questions/41848207/does-this-double-type-definition-cause-an-access-violation/41848618#41848618", "title": "Does this double type definition cause an access violation?", "body": "<pre><code>static company *freecompany;\ncompany *ps;\nps = (company*)&amp;freecompany;\n</code></pre>\n\n<p>This code is nonsense and incorrect, you never allocate a <code>company</code> object anywhere and the cast is wrong. It is hard to even guess what this code was supposed to do, why is there a static pointer variable?</p>\n\n<blockquote>\n  <p>Why are there two type defnitions (company_tag and company), is there any link/difference between them?</p>\n</blockquote>\n\n<p>This is so that you can declare a pointer to a structure with the same type, from inside the very same structure. So <code>struct company_tag *next;</code> means the very same thing as <code>company* next;</code>. It just has to be written in the former manner inside the struct declaration, as you are still declaring the struct when you are typing that line and at that point the compiler doesn't know what <code>company</code> is yet.</p>\n\n<blockquote>\n  <p>Why are those two type definitions used in the allocation line?</p>\n</blockquote>\n\n<p>Because whoever wrote this code was confused. It should have been</p>\n\n<pre><code>ps-&gt;next = malloc(sizeof(company));\n</code></pre>\n\n<p>But that assumes that <code>ps</code> itself is already pointing at allocated space! This is not the case in the code posted.</p>\n"}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 41848473, "answer_count": 3, "score": 1, "last_activity_date": 1485338687, "creation_date": 1485337494, "question_id": 41848207, "link": "https://stackoverflow.com/questions/41848207/does-this-double-type-definition-cause-an-access-violation", "title": "Does this double type definition cause an access violation?", "body": "<p>I'm using the following struct type definition and according memory allocation:</p>\n\n<pre><code>typedef struct company_tag { struct company_tag *next;\n                             &lt;some other elements of the structure&gt;\n                           } company;\n\n...\nstatic company *freecompany;\ncompany *ps;\nps = (company*)&amp;freecompany;\nps-&gt;next = (struct company_tag*)malloc(sizeof(company));\n...\n</code></pre>\n\n<p>At the end of my program, I end up with an access violation, and I'd like to know if this strange type definition can be related to it.\nThe things I call strange:</p>\n\n<ul>\n<li>Why are there two type defnitions (company_tag and company), is there any link/difference between them?</li>\n<li>Why are those two type definitions used in the allocation line? (What would be the problem with <code>(struct company*)malloc(sizeof(company));</code>, except for the \"incomplete type is not allowed\" error (by the way, is something incomplete here?)?)</li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1485337553, "post_id": 41848193, "comment_id": 70880546, "body": "Yes, it can be done, but it is platform dependent and not related to the C language."}, {"owner": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1485337562, "post_id": 41848193, "comment_id": 70880553, "body": "Can anyone suggest me some function which will work same."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1485337594, "post_id": 41848193, "comment_id": 70880572, "body": "If you tell us what platform you are on, you might get some useful answers."}, {"owner": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1485337649, "post_id": 41848193, "comment_id": 70880620, "body": "Codeblocks , I guess"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1485337820, "post_id": 41848193, "comment_id": 70880728, "body": "Please put al relevant information into the question as well. And Codeblocks is not a platform, but Linux and Windows are."}, {"owner": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1485337906, "post_id": 41848193, "comment_id": 70880780, "body": "Then kindly suggest for both man!!"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 4, "creation_date": 1485337940, "post_id": 41848193, "comment_id": 70880798, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/32396188/better-alternative-for-getpass-function\">Better alternative for getpass function</a>"}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 1, "creation_date": 1485338021, "post_id": 41848193, "comment_id": 70880852, "body": "Is this a command line application or are you using some widget toolkit? There&#39;s nothing in C to do with passwords, much the same as there&#39;s nothing in C to get weather forecasts, but all can be implemented. Unless you want accurate weather forecasts..."}, {"owner": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "edited": false, "score": 0, "creation_date": 1485338222, "post_id": 41848193, "comment_id": 70881009, "body": "I am expecting a simple C code!!! in any platform and not downvotes."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485338554, "post_id": 41848193, "comment_id": 70881248, "body": "@DeepakAhire There is an Answer for you, but are you sure you need it for C only, does GTK helps ?"}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485338226, "post_id": 41848428, "comment_id": 70881012, "body": "<code>new.c_lflag &amp;= ~ICANON;</code> You are using <code>new</code> Here?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485338354, "post_id": 41848428, "comment_id": 70881106, "body": "@Michi I&#39;m not getting you, but I edited changing the name of that var, if that was the problem."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485338420, "post_id": 41848428, "comment_id": 70881150, "body": "how about <a href=\"http://pastebin.com/raw/LdxPVbc9\" rel=\"nofollow noreferrer\">fixing this</a>?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485338656, "post_id": 41848428, "comment_id": 70881317, "body": "@Michi What is your platform? What are you compilation flags? Nothing triggered on my Linux platform with gcc 4.9.2 with <code>-Wall -Wextra -Werror -pedantic-errors</code>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485338713, "post_id": 41848428, "comment_id": 70881355, "body": "You are using an verry old Compiler version, I&#39;m on GCC-6 with ==&gt;&gt;&gt;: <code>-Wpedantic -std=c11 -Wall -Wextra -Werror  -Wstrict-prototypes  -Wmissing-prototypes -Wmisleading-indentation -Wduplicated-cond -Wold-style-definition -Wconversion -Wshadow -Winit-self -Wfloat-equal -Wwrite-strings -O0 -g</code>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485338921, "post_id": 41848428, "comment_id": 70881514, "body": "any way in <code>char getch_(int echo)\u215e&#176;</code>  <code>char ch</code> should be <code>int ch</code> and the function should also return int or at least you need a cast there like <code>return (char)ch;</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485338971, "post_id": 41848428, "comment_id": 70881549, "body": "@Michi Yes it is, on some exotic platform can be a problem. I&#39;m editing"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485339103, "post_id": 41848428, "comment_id": 70881633, "body": "Your code still need to be fixed <code>negative integer implicitly converted to unsigned type</code> Here ==&gt; <code>newPar.c_lflag &amp;= ~ICANON;</code> and Here =&gt;&gt; <code>newPar.c_lflag &amp;= echo ? ECHO : ~ECHO;</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1485339142, "post_id": 41848428, "comment_id": 70881660, "body": "@Michi Not my aim here, in a too broad question. Fill free to post your own (better) answer..."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485339230, "post_id": 41848428, "comment_id": 70881723, "body": "Sir, I&#39;m not judge you or your Answer, I&#39;m just telling you that your code should be fixed. I will not post another Answer, when you gave already a good one. Fixing those two lines makes it fine."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485340065, "post_id": 41848428, "comment_id": 70882304, "body": "I forgot to tell you about my Platform as you asked. I&#39;m on Linux mint with GGC-6. There is a cast needed there on (unsigned)~ICANON and (unsigned)~ECHO and compiles fine"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485340713, "post_id": 41848428, "comment_id": 70882778, "body": "@Michi I know, I&#39;ll edit,. This due to the &quot;bad&quot; implementation of that literals that are octet instead of Hex. I really don&#39;t know why ..?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485340835, "post_id": 41848428, "comment_id": 70882871, "body": "I also changed in  <code>void initTermios(unsigned echo);</code> and <code>char getch_(unsigned echo);</code>  ==&gt; echo to <code>unsigned</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1485341224, "post_id": 41848428, "comment_id": 70883120, "body": "@Michi I edited, in a different way, but your is correct too."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 3, "last_activity_date": 1485341203, "last_edit_date": 1485341203, "creation_date": 1485338171, "answer_id": 41848428, "question_id": 41848193, "link": "https://stackoverflow.com/questions/41848193/is-there-any-mechanism-in-c-to-take-password-from-user-like-we-have-in-java-as/41848428#41848428", "title": "Is there any mechanism in C to take password from user, like we have in JAVA as password field", "body": "<p>Using a linux platform and terminal you must modify terminal behavior, disabling echoing and using non canonical mode</p>\n\n<pre><code>#include &lt;termios.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nstatic struct termios oldPar, newPar;\n\nvoid initTermios(bool echo) {\n    tcgetattr(0, &amp;oldPar);\n    newPar = oldPar;\n    newPar.c_lflag &amp;= (tcflag_t)~ICANON;\n    newPar.c_lflag &amp;= echo ? (tcflag_t)ECHO : (tcflag_t)~ECHO;\n    tcsetattr(0, TCSANOW, &amp;newPar);\n}\n\nvoid resetTermios(void) {\n    tcsetattr(0, TCSANOW, &amp;oldPar);\n}\n\nchar getch_(bool echo) {\n    int ch;\n    initTermios(echo);\n    ch = getchar();\n    resetTermios();\n    return (char)ch;\n}\n\nchar getch(void) {\n    return getch_(false);\n}\n\nint main(void) {\n    char c;\n    char psw[16] = { 0 };\n    size_t index = 0;\n    printf(\"Insert password: \");\n    do\n    {\n        c = getch();\n        printf(\"*\");\n\n        psw[index++]= c;\n\n    }\n    while ((index &lt; (sizeof(psw)-1)) &amp;&amp; (c!='\\n'));\n\n    printf(\"\\n\\nPassword: %s\\n\", psw);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1485341998, "accepted_answer_id": 41848428, "answer_count": 1, "score": -3, "last_activity_date": 1485341203, "creation_date": 1485337453, "question_id": 41848193, "link": "https://stackoverflow.com/questions/41848193/is-there-any-mechanism-in-c-to-take-password-from-user-like-we-have-in-java-as", "closed_reason": "Needs more focus", "title": "Is there any mechanism in C to take password from user, like we have in JAVA as password field", "body": "<p>Password, while typing should not be visible(stars should be visible instead of characters). Can it be done in C, as we have in JAVA.</p>\n"}, {"tags": ["c", "opengl"], "comments": [{"owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1485337934, "post_id": 41847962, "comment_id": 70880795, "body": "Which lighting? There is non in your code."}, {"owner": {"reputation": 4444, "user_id": 5561875, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/T1ilq.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/5561875/amit"}, "reply_to_user": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1485338152, "post_id": 41847962, "comment_id": 70880960, "body": "@BDL added the lighting code"}, {"owner": {"reputation": 2706, "user_id": 1515948, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/565b63153ac530dcaf302d77e8a7127a?s=128&d=identicon&r=PG&f=1", "display_name": "thokra", "link": "https://stackoverflow.com/users/1515948/thokra"}, "edited": false, "score": 3, "creation_date": 1485340403, "post_id": 41847962, "comment_id": 70882549, "body": "I see no material definition, I see no light color definition, I see no normals. How do you expect to get what you&#39;re looking for here? Also, it&#39;s 2017 ... PLEASE learn modern OpenGL. You&#39;re using paradigms from the last century."}, {"owner": {"reputation": 4444, "user_id": 5561875, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/T1ilq.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/5561875/amit"}, "reply_to_user": {"reputation": 2706, "user_id": 1515948, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/565b63153ac530dcaf302d77e8a7127a?s=128&d=identicon&r=PG&f=1", "display_name": "thokra", "link": "https://stackoverflow.com/users/1515948/thokra"}, "edited": false, "score": 0, "creation_date": 1485341109, "post_id": 41847962, "comment_id": 70883049, "body": "@thokra thanks for pointing me in a direction, I&#39;ll read about it. I know it&#39;s 2017, but academia does not"}, {"owner": {"reputation": 1221, "user_id": 4285290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6312206b9e2c38d5f08968c41331656?s=128&d=identicon&r=PG&f=1", "display_name": "eldo", "link": "https://stackoverflow.com/users/4285290/eldo"}, "edited": false, "score": 3, "creation_date": 1485341793, "post_id": 41847962, "comment_id": 70883477, "body": "@Amit You should tell them glLight* was the part of the first release of OpenGL 1992! and deprecated by version 3.1 2009! Thats basically a history course."}, {"owner": {"reputation": 2706, "user_id": 1515948, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/565b63153ac530dcaf302d77e8a7127a?s=128&d=identicon&r=PG&f=1", "display_name": "thokra", "link": "https://stackoverflow.com/users/1515948/thokra"}, "edited": false, "score": 0, "creation_date": 1485342123, "post_id": 41847962, "comment_id": 70883712, "body": "@Amit: If your edu institution does still not teach modern OpenGL, you can still learn it for yourself. There is absolutely no benefit to learning legacy OpenGL first. What university/college are you attending?"}, {"owner": {"reputation": 4444, "user_id": 5561875, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/T1ilq.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/5561875/amit"}, "reply_to_user": {"reputation": 1221, "user_id": 4285290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6312206b9e2c38d5f08968c41331656?s=128&d=identicon&r=PG&f=1", "display_name": "eldo", "link": "https://stackoverflow.com/users/4285290/eldo"}, "edited": false, "score": 0, "creation_date": 1485342163, "post_id": 41847962, "comment_id": 70883748, "body": "@eldo I normally send them an alternative up to date syllabus for a course, if I see it is old. I will do for this one as well, but I am unable to code differently, because of the version they use for exercise checking."}, {"owner": {"reputation": 4444, "user_id": 5561875, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/T1ilq.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/5561875/amit"}, "reply_to_user": {"reputation": 2706, "user_id": 1515948, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/565b63153ac530dcaf302d77e8a7127a?s=128&d=identicon&r=PG&f=1", "display_name": "thokra", "link": "https://stackoverflow.com/users/1515948/thokra"}, "edited": false, "score": 0, "creation_date": 1485342219, "post_id": 41847962, "comment_id": 70883780, "body": "@thokra see comment above. This one - <a href=\"http://www.ash-college.ac.il/en/\" rel=\"nofollow noreferrer\">ash-college.ac.il/en</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4444, "user_id": 5561875, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/T1ilq.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/5561875/amit"}, "is_accepted": true, "score": 0, "last_activity_date": 1485342819, "creation_date": 1485342819, "answer_id": 41850132, "question_id": 41847962, "link": "https://stackoverflow.com/questions/41847962/opengl-color-not-working-using-lighting/41850132#41850132", "title": "OpenGL color not working using lighting", "body": "<p>OpenGL using lighting requires a material to be set, and does not rely on the current color.</p>\n\n<p>Replace:</p>\n\n<pre><code>glColor3b(color, color, color);\n</code></pre>\n\n<p>With: (For example)</p>\n\n<pre><code>GLfloat c[] = { color, color, color, 1 };\nglMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT_AND_DIFFUSE, c);\n</code></pre>\n\n<p>Many thanks to commenters of the post above who pointed me in the right direction.</p>\n"}], "owner": {"reputation": 4444, "user_id": 5561875, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/T1ilq.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/5561875/amit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 41850132, "answer_count": 1, "score": -1, "last_activity_date": 1485886843, "creation_date": 1485336762, "last_edit_date": 1485886843, "question_id": 41847962, "link": "https://stackoverflow.com/questions/41847962/opengl-color-not-working-using-lighting", "title": "OpenGL color not working using lighting", "body": "<p>I have a chess boards.\nDoing:</p>\n\n<pre><code>for(int i = 0; i &lt; 8; i++)\n    for (int j = 0; j &lt; 8; j++) {\n        drawSquare(i, j);\n        int type = board[i][j];\n        if (type != 0)\n            drawPiece(i, j, type);\n    }\n</code></pre>\n\n<p>Paints 64 squares, using this code:</p>\n\n<pre><code>int color = (x + z) % 2;\nglColor3b(color, color, color); // also tried 3f\n\nglPushMatrix(); {\n    glTranslatef(x, 0, z);\n    glBegin(GL_POLYGON); {\n        glVertex3f(0, 0.01, 0);\n        glVertex3f(0, 0.01, 1);\n        glVertex3f(1, 0.01, 1);\n        glVertex3f(1, 0.01, 0);\n    } glEnd();\n} glPopMatrix();\n</code></pre>\n\n<p>And indeed, there is a big square shown on the screen, of size 8x8. However, the image is showing that all squares are in the same color, which they should not be, as I printed <code>color</code>, and it does alternate 0/1.</p>\n\n<p>Here is how it looks: (because of not-that-great AA, you can see each edge square's border and validate that there are 8)</p>\n\n<p><a href=\"https://i.stack.imgur.com/XOQZL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XOQZL.png\" alt=\"enter image description here\"></a></p>\n\n<p>The lighting I am using is:</p>\n\n<pre><code>static float g_lightPos[4] = { 10, 10, 100, 1 };\nglEnable(GL_LIGHTING);\nglEnable(GL_LIGHT0);\nglLightfv(GL_LIGHT0, GL_POSITION, g_lightPos);\n</code></pre>\n"}, {"tags": ["c", "arrays", "hex"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1485336648, "post_id": 41847879, "comment_id": 70879937, "body": "<code>char AES_IV[AES_BLOCK_SIZE]</code> --&gt; <code>unsigned char AES_IV[AES_BLOCK_SIZE]</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1485337098, "post_id": 41847879, "comment_id": 70880228, "body": "I really doubt you can compile such a code. Full of implicit declarations and overflows of types..."}, {"owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "edited": false, "score": 1, "creation_date": 1485339846, "post_id": 41847879, "comment_id": 70882122, "body": "&quot;why does my for loop returns such a long result?&quot; because you tell him to do so: <code>for (i3 = 0; i3 &lt; 50; i3++)</code> will loop from 0 to 49 so fifty iterations."}, {"owner": {"reputation": 5, "user_id": 7424763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a0e8ecb58749317ec4c073cb83b7ecc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ryo", "link": "https://stackoverflow.com/users/7424763/ryo"}, "edited": false, "score": 0, "creation_date": 1485402932, "post_id": 41847879, "comment_id": 70915759, "body": "Thanks for your help. Turns out the issue is with the previous for loop (runs 100 iterations) which overwrites the value of AES_IV, so changing the iteration count to sizeof(buffer) fixed the issue. No changing of the type required."}], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 899843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2156758e4d22a4dc2a4df09d51931e8e?s=128&d=identicon&r=PG", "display_name": "Josh Lubawy", "link": "https://stackoverflow.com/users/899843/josh-lubawy"}, "is_accepted": false, "score": 1, "last_activity_date": 1485337235, "creation_date": 1485337235, "answer_id": 41848115, "question_id": 41847879, "link": "https://stackoverflow.com/questions/41847879/reading-char-array-containing-hex-values-in-c/41848115#41848115", "title": "Reading char array containing Hex values in C", "body": "<p>As one comment already stated you should use <code>unsigned char</code> otherwise each element is treated as a <code>signed char</code> by default. Better yet you might want to use fixed-width <code>uint8_t</code> from <code>#include &lt;stdint.h&gt;</code> instead.</p>\n\n<p>Here is a minimal example that works as expected:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\n#define AES_BLOCK_SIZE  0x10\n\nuint8_t AES_IV[AES_BLOCK_SIZE] = {0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0xAA,0xBB,0xCC,0xDD,0xEE,0xFF};\n\nint\nmain( void )\n{\n    int i;\n\n    for ( i = 0; i &lt; sizeof(AES_IV); i++ ) {\n        printf( \"%02x\", AES_IV[i] );\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7424763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a0e8ecb58749317ec4c073cb83b7ecc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ryo", "link": "https://stackoverflow.com/users/7424763/ryo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1485337235, "creation_date": 1485336538, "question_id": 41847879, "link": "https://stackoverflow.com/questions/41847879/reading-char-array-containing-hex-values-in-c", "title": "Reading char array containing Hex values in C", "body": "<p>This is part of a program that I use to decrypt AES in C. The program is supposed to take in an IV from an external file, read it then set as the IV. Unfortunately the IV is declared as a char array in the code (which I cannot change) so what I tried to do is to read the external file as byte[], then convert it to char[].</p>\n\n<p>One of the issues I am currently facing is regarding the AES_IV variable as seen below:</p>\n\n<pre><code>#define AES_BLOCK_SIZE  0x10\n\nchar AES_IV[AES_BLOCK_SIZE] = {0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0xAA,0xBB,0xCC,0xDD,0xEE,0xFF};\n</code></pre>\n\n<p>When I try to print out the AES_IV using the code</p>\n\n<pre><code>printf(\"\\nAES_IV: \");\nfor (i3 = 0; i3 &lt; AES_BLOCK_SIZE; i3++) {\nprintf(\"%02x\", AES_IV[i3]);\n}\nprintf(\"\\n\");\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>AES_IV: 0c0a513398f1eda13ed2fc7213b50b10\n</code></pre>\n\n<p>Which is different from the AES_IV I declared.</p>\n\n<p>I changed the for loop to</p>\n\n<pre><code>for (i3 = 0; i3 &lt; 50; i3++) {\n</code></pre>\n\n<p>and the resultant output is much longer</p>\n\n<pre><code>AES_IV: 0c0a513398f1eda13ed2fc7213b50b105369a...(100 chars in total)\n</code></pre>\n\n<p>I checked the length of AES_IV and it is still 16, but <strong>why does my for loop returns such a long result? Also why did the value of AES_IV change?</strong> I have checked and there are no reference to AES_IV anywhere before this part.</p>\n\n<p>Your help is much appreciated.</p>\n\n<p>Source code for reference:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;dlfcn.h&gt;\n#include \"SmartSDLib.h\"\n\n#define SDCARD_PATH \"/boot\"\n\n#define P1_INDEX 2\n#define P2_INDEX 3\n#define P3_INDEX 4\n\n#define AES_BLOCK_SIZE  0x10\n#define APDU_HEADER_SIZE 5\n\n#define FILELEN 32 // For reading IV from file\n\nvoid To_Hex(char s8Data[],char hexBuffer[], int offset, int nlen)\n{\n    int j;\n    int nSize = (nlen - offset); \n    char finalhash[8192];\n    char hexval [] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'};\n\n    for(j=0 ; j &lt; nSize; j++)\n    {\n        finalhash[j*2] = hexval[(s8Data[j] &gt;&gt; 4) &amp; 0xF];\n        finalhash[(j*2) + 1] = hexval[s8Data[j] &amp; 0x0F];\n    }\n\n    memset(hexBuffer,0x00,8192);\n    memcpy(hexBuffer, finalhash, nSize*2);\n}\n\nchar * AccessAPDU(char command[], int size)\n{\n    unsigned char u8Ret;\n    int s32Len[1];\n    char s8Buffer[512], hexBuffer[8192];\n\n    To_Hex(command, hexBuffer, 0, size);\n    //printf (\"%s\\n%s%s\\n\", \"AccessAPDUCommand:\",\"CMD:\" , hexBuffer);\n    u8Ret = OT_SmartSDCard_AccessAPDUCommand(size, command, s32Len, s8Buffer, 0);\n    if(u8Ret == 0x00)\n    {\n        printResult(s32Len, s8Buffer);\n    }\n    else\n    {\n        printf (\"%s%x\\n\\n\", \"Error 0x\", u8Ret);\n    }\n    return s8Buffer;\n}\n\nvoid printResult (int s32Len[], char s8Buffer[])\n{\n    char hexBuffer[8192];\n    if(s32Len[0] &gt;= 2)\n    {\n        To_Hex(s8Buffer, hexBuffer, 0, s32Len[0]);\n    //  printf (\"%s%s\\n\", \"Ret:\", hexBuffer);\n    //  printf (\"%s%d\\n\\n\", \"Len: \", s32Len[0]);\n    } \n    else\n    {\n        printf (\"%s%d\\n\", \"Len: \", s32Len[0]);\n    }\n}\n\nvoid CopyBuffer(char Dest[], char Source[], unsigned int length){\n    while(length){\n        Dest[length - 1] = Source[length - 1];\n        length--;\n    }\n}\n\nint ascii_to_hex(char c) // For reading IV from file\n{\n        int num = (int) c;\n        if(num &lt; 58 &amp;&amp; num &gt; 47) // Handle numbers (0-9)\n        {\n                return num - 48;\n        }\n        if(num &lt; 103 &amp;&amp; num &gt; 96) // Handle lowercase alphabets (a-f)\n        {\n                return num - 87;\n        }\n        if(num &lt; 71 &amp;&amp; num &gt; 64) // Handle uppercase alphabets (A-F)\n        {\n                return num - 55;\n        }\n        return num;\n}\n\nint main()\n{\n    unsigned char u8Ret;    \n    char SDCard_Path[64];\n    char line[64];\n    int s32Len[1];\n    char s8Buffer[512], hexBuffer[8192];\n    int exit = 1;\n    int iChoice;\n    char * response;\n    int test;\n    char testchar[32];\n    bool flag = true;\n\n    char fileName[100];\n    char encrypted[100];\n    char decrypted[100];\n    int i;\n    int j;\n    int blockCounter = 0;\n    int commandCounter = 0;\n    char imageBuffer[1];\n\n    /* APDU commands */\n    char AES_encrypt_cmd[APDU_HEADER_SIZE + AES_BLOCK_SIZE] = {0x80, 0x2A, 0x01,0x00, AES_BLOCK_SIZE}; //encryption APDU\n    char AES_decrypt_cmd[APDU_HEADER_SIZE + AES_BLOCK_SIZE] = {0x80, 0x2A, 0x02,0x00, AES_BLOCK_SIZE}; //decryption APDU\n    char GetResponse_cmd[]                                  = {0x00, 0xC0, 0x00,0x00, 0x00}; //Le to be changed before use\n    char SelectAESapplet_cmd[]                              = {0x00, 0xA4, 0x04,0x00, 0x10, 0xA0, 0x00, 0x00, 0x00, 0x77, 0x01, 0x03, 0x03, 0x00, 0x00, 0x00, 0xF1, 0x00, 0x00, 0x00, 0x04};\n    //char PutKeyAES_cmd[]                                    = {0x80, 0xD8, 0x00,0xF8, 0x20, 0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0xAA,0xBB,0xCC,0xDD,0xEE,0xFF,0xFF,0xEE,0xDD,0xCC,0xBB,0xAA,0x99,0x88,0x77,0x66,0x55,0x44,0x33,0x22,0x11,0x00};\n    char PutKeyAES_cmd[]                                    = {0x80, 0xD8, 0x00,0xF8, 0x20, 0xCF,0x10,0xF9,0xBD,0xF6,0xAA,0x15,0xC5,0x0E,0xCD,0x79,0xE6,0x28,0x3D,0xA8,0x0A,0x79,0x7A,0x2D,0x27,0x03,0xAE,0x07,0xD5,0x2F,0x5D,0x8F,0x60,0x1F,0x1E,0xF2,0x6F};\n\n    /* AES variables */\n    int  AES_keyIndex = 0;\n    char AES_IV[AES_BLOCK_SIZE] = {0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0xAA,0xBB,0xCC,0xDD,0xEE,0xFF};\n    //char AES_IV[AES_BLOCK_SIZE] = {0x12,0xFB,0x87,0x11,0x62,0x7E,0xBB,0x55,0x71,0x7B,0x2F,0x70,0xA4,0x97,0x55,0x7B};\n    //char AES_IV[AES_BLOCK_SIZE];\n    char AES_CBC_vector[AES_BLOCK_SIZE];\n    char AES_cmdBuffer[APDU_HEADER_SIZE + AES_BLOCK_SIZE];\n\n    FILE * rFile;\n    FILE * wFile;\n\n    FILE *fileptr;char *buffer;long filelen;int i2,i3,i4;char IV_temp[AES_BLOCK_SIZE]; // This line for the file --&gt; byte --&gt; Hex\n\n\n    printf (\"%s\\n\", \"This program will run 1, 2 followed by 6\");\n\n\n    //      case 1 :\n                printf (\"%s\\n\", \"Initializing: \");\n                u8Ret = OT_SmartSDCard_Initialization(SDCARD_PATH);\n                if(u8Ret == 0x00)\n                    printf (\"%s\\n\\n\", \"Initialization OK\");\n                else\n                    printf (\"%s%x\\n\\n\", \"Initialization: Error 0x\",u8Ret);\n\n            //  printf (\"%s\\n\\n\", \"-------------------------------------\");\n\n                /* ATR */\n                u8Ret = OT_SmartSDCard_Reset(s32Len, s8Buffer);\n                if(u8Ret == 0x00)\n                {\n                    To_Hex(s8Buffer,hexBuffer, 0, s32Len[0]);\n          //          printf (\"%s%s\\n\", \"ATR : \", hexBuffer);\n          //          printf (\"%s%d\\n\\n\", \"Len : \", s32Len[0]);\n                }\n                else\n                    printf (\"%s%x\\n\\n\", \"Reset: Error 0x\",u8Ret);\n          //      printf (\"%s\\n\\n\", \"-------------------------------------\");\n\n                /* Select AES applet */\n                printf(\"%s\\n\", \"Selecting AES applet...\");\n                response = AccessAPDU(SelectAESapplet_cmd, sizeof(SelectAESapplet_cmd));\n                if(response[0] == 0x61){\n                    GetResponse_cmd[P3_INDEX] = response[1];\n                    AccessAPDU(GetResponse_cmd, sizeof(GetResponse_cmd));\n                }\n          //      printf (\"%s\\n\\n\", \"-------------------------------------\");\n\n\n    //      case 2 :\n                printf(\"Putting key...\");\n\n                AES_keyIndex = 0;\n                memset(line, 0x00, sizeof(line));\n\n                PutKeyAES_cmd[2] = AES_keyIndex;\n                printf(\"putting key on index %d\\n\", AES_keyIndex);\n                response = AccessAPDU(PutKeyAES_cmd, sizeof(PutKeyAES_cmd));\n\n                AES_encrypt_cmd[P2_INDEX] = AES_keyIndex;\n                AES_decrypt_cmd[P2_INDEX] = AES_keyIndex;\n\n            //  printf (\"%s\\n\\n\", \"-------------------------------------\");\n\n\n    //      case 6 :\n                printf (\"Decrypting in CBC...\");\n            //  printf (\"File Name: /home/pi/test_encrypted\\n\");\n            //    printf (\"Encrypted File Name: /home/pi/test_decrypted\\n\");\n                rFile = fopen(\"/home/pi/test_encrypted\",\"rb\");\n                wFile = fopen(\"/home/pi/test_decrypted\",\"wb\");\n\n                ////////////////////////////////////////////////////////////////\n                // This part to read rFile and store as a byte [WORKING!]\n\n                fseek(rFile, 0, SEEK_END);          // Jump to the end of the file\n                filelen = ftell(rFile);             // Get the current byte offset in the file\n                rewind(rFile);                      // Jump back to the beginning of the file\n\n                buffer = (char *)malloc((filelen+1)*sizeof(char)); // Enough memory for file + \\0\n                fread(buffer, filelen, 1, rFile); // Read in the entire file\n\n                // This part to convert buffer to hex value [WORKING!]\n\n                for (i2 = 0; i2 &lt; 100; i2++)\n                {\n                    if (i2 &gt; 0) printf(\" \");\n                    printf(\"%02X\", buffer[i2]);\n                    IV_temp[i2] = buffer[i2];\n                }\n\n                // This part to print stuff [AES_IV not printing out correctly]\n\n                printf(\"\\nAES_IV: \");\n                //fwrite(AES_IV, 1, sizeof(AES_IV), stdout);\n                for (i3 = 0; i3 &lt; 50; i3++) {\n                    printf(\"%02x\", AES_IV[i3]);\n                }\n                printf(\"\\n\");\n                /*\n                printf(\"IV_temp: \");\n                for (i4 = 0; i4 &lt; AES_BLOCK_SIZE; i4++) {\n                    printf(\"%02x\", IV_temp[i4]);\n                }\n                printf(\"\\n\");\n                */\n                for (i3 = 0; i3 &lt; AES_BLOCK_SIZE; i3++) {\n                    AES_IV[i3] = IV_temp[i3];\n                }\n                printf(\"\\nLength of AES_IV = %d\\n\", sizeof(AES_IV));\n                printf(\"\\nAES_IV: \");\n\n                for (i3 = 0; i3 &lt; 50; i3++) {\n                    printf(\"%02x\", AES_IV[i3]);\n                }\n                printf(\"\\n\");\n\n                // Return the file pointer to start of file\n                rewind(rFile);\n                ////////////////////////////////////////////////////////////////\n\n                if (rFile == NULL || wFile == NULL)\n                    perror(\"Error opening File\");\n                else{\n                    int IsEOF = false;\n                    // Initialize the CBC block with IV\n                    CopyBuffer(AES_CBC_vector, AES_IV, AES_BLOCK_SIZE);\n\n                    while (IsEOF == false) {\n                        i = 0;\n                        while(i &lt; AES_BLOCK_SIZE){ // i run from 0 to (AES_BLOCK_SIZE - 1)\n                            AES_cmdBuffer[APDU_HEADER_SIZE + i] = fgetc(rFile);\n                            if(feof(rFile)) {\n                                IsEOF = true;\n                                if(i == 0) { // break out of while loop if a new block is not yet in progress\n                                    break;\n                                } else { // continue to finish the block and pad with zeros\n                                    AES_cmdBuffer[APDU_HEADER_SIZE + i] = 0x00; //padding\n                                }\n                            }\n\n                            i++;\n                        }\n\n                        if(i == 0) break; //break out of while loop, nothing to send to card\n\n                        // Fill in the APDU header\n                        CopyBuffer(AES_cmdBuffer, AES_decrypt_cmd, APDU_HEADER_SIZE);\n\n                        response = AccessAPDU(AES_cmdBuffer, sizeof(AES_cmdBuffer));\n\n                        if(response[0] == 0x61){\n                            if(response[1] != AES_BLOCK_SIZE) {\n                                perror(\"Card returning wrong block size\");\n                            }\n\n                            GetResponse_cmd[P3_INDEX] = AES_BLOCK_SIZE;\n                            response = AccessAPDU(GetResponse_cmd, sizeof(GetResponse_cmd));\n\n                            /* CBC mode */\n                            for(i = 0; i &lt; AES_BLOCK_SIZE; i++){\n                                response[i] ^= AES_CBC_vector[i];\n                            }\n\n                            fwrite(response, sizeof(char), AES_BLOCK_SIZE, wFile);\n\n                            // Take the ciphertext to perform XOR next time\n                            CopyBuffer(AES_CBC_vector, &amp;AES_cmdBuffer[APDU_HEADER_SIZE], AES_BLOCK_SIZE);\n                        } else {\n                            perror(\"Error decrypting file using the smart card\");\n                        }\n                    }\n                }\n                fclose (rFile);\n                fclose (wFile);\n            //  printf (\"%s\\n\\n\", \"-------------------------------------\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "standards", "c-strings", "strncpy", "c-standard-library"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1485334972, "post_id": 41847262, "comment_id": 70878801, "body": "While it is the C standard the dictates the behavior of <code>strncpy</code>, you seem to be compiling C++.."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1485339044, "post_id": 41847262, "comment_id": 70881597, "body": "<code>strncpy</code> is a dangerous function and should be avoided. It was never intended to be used with null terminated strings to begin with. Instead, use <code>memcpy</code> or <code>strcpy</code>."}, {"owner": {"reputation": 18895, "user_id": 288439, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81496c48185e5ddd59654ccae341c166?s=128&d=identicon&r=PG", "display_name": "Leif Andersen", "link": "https://stackoverflow.com/users/288439/leif-andersen"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1524258364, "post_id": 41847262, "comment_id": 86916044, "body": "@Lundin Wow, I&#39;ve never heard that  before. Why would you recommend <code>strcpy</code> over <code>strncpy</code>? (I&#39;ve always heard the other way around.)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 18895, "user_id": 288439, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81496c48185e5ddd59654ccae341c166?s=128&d=identicon&r=PG", "display_name": "Leif Andersen", "link": "https://stackoverflow.com/users/288439/leif-andersen"}, "edited": false, "score": 0, "creation_date": 1524465559, "post_id": 41847262, "comment_id": 86965509, "body": "@LeifAndersen Because <code>strncpy</code> has a tendency to leave out the null terminator. It was never intended to be used for null-terminated strings in the first place, nor was it ever intended to be a &quot;safe strcpy&quot;. <a href=\"https://stackoverflow.com/a/2115015/584518\">See this</a>. As for <code>strcpy</code> being unsafe that&#39;s partially true, partially a myth created by Microsoft. As long as you know the size of the data to copy, it is perfectly safe. If you just copy an unknown string from an input buffer, with no error checking, well then obviously things will go wrong - no fault of strcpy."}], "answers": [{"comments": [{"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1485335944, "post_id": 41847411, "comment_id": 70879420, "body": "<code>memcpy</code> don&#39;t accept overlapping, <code>memove</code> allows overlapping. You may want fix the answer."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1485336263, "post_id": 41847411, "comment_id": 70879669, "body": "@Frankie_C - I don&#39;t since I meant what I said and said what I meant. <code>strncpy</code> can have undefined behavior in case of overlapping, so it <b>can</b> use <code>memcpy</code> (in a possible library implementation) and put the blame on the user if things overlap."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1485344768, "post_id": 41847411, "comment_id": 70885416, "body": "Sorry I have misunderstood. If you agree I&#39;ll remove all comments."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1485345448, "post_id": 41847411, "comment_id": 70885837, "body": "@Frankie_C - Nah, it&#39;s okay. You prompted me to better explain that point in case it wasn&#39;t clear."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1485336477, "last_edit_date": 1485336477, "creation_date": 1485335297, "answer_id": 41847411, "question_id": 41847262, "link": "https://stackoverflow.com/questions/41847262/what-is-string-overlapping-according-to-the-c-standard/41847411#41847411", "title": "What is string overlapping according to the C Standard?", "body": "<p><code>strncpy</code> doesn't have to be implemented in any specific way. The C standard only dictates the API contract it should follow. Any <em>specific</em> implementation may choose to make overlap a non-issue, but it isn't forced to do so by the standard.</p>\n\n<p><code>strncpy</code> can be implemented in terms of <code>memcpy</code>, which is subject to undefined behavior when the source and destination overlap. But with the specification mentioned above, it's perfectly okay.</p>\n"}, {"tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1485346449, "last_edit_date": 1485346449, "creation_date": 1485335464, "answer_id": 41847471, "question_id": 41847262, "link": "https://stackoverflow.com/questions/41847262/what-is-string-overlapping-according-to-the-c-standard/41847471#41847471", "title": "What is string overlapping according to the C Standard?", "body": "<blockquote>\n  <p>If strncpy just copyes symbols char by char like it is in this\n  implementation, there should be no problem.</p>\n</blockquote>\n\n<p>This is exactly the problem.\nThe standard doesn't specify which way the function must operate, but what output should give, and, in the same time, specify that if there is any kind of overlap the result is <strong>UB</strong> making coders free to use whatever approach they like .</p>\n\n<p>This is because new instructions or processor architectures could sponsor the use of new and more efficient instructions that could follow a different addressing way (i.e. copy in reverse order or in mixed order). This could give you whichever result not predictable, in fact an <strong>undefined behavior</strong>.</p>\n\n<p>Eventually you can use <code>memmove</code> function that explicitly allows overlapping, or write your own function that is overlap aware.</p>\n"}], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1668, "favorite_count": 1, "accepted_answer_id": 41847471, "answer_count": 2, "score": 0, "last_activity_date": 1485346449, "creation_date": 1485334864, "last_edit_date": 1592644375, "question_id": 41847262, "link": "https://stackoverflow.com/questions/41847262/what-is-string-overlapping-according-to-the-c-standard", "title": "What is string overlapping according to the C Standard?", "body": "<p>From the C Standard:</p>\n<blockquote>\n<p>7.21.2.4 The strncpy function</p>\n<p>If copying takes place between objects that overlap, the behavior is undefined.</p>\n</blockquote>\n<hr />\n<p>What is overlapping?</p>\n<p>It is clear that it is overlapping when the beginning of the destination string crosses the ending of the source string.</p>\n<p>But is overlapping taking place in the next example?</p>\n<pre><code>const char* dateConst = &quot;2017-01-25&quot;;\nchar* date = malloc(16);\nstrcpy(date, dateConst);\n\nstrncpy(date+4, date+5, 2);\nstrncpy(date+6, date+8, 3);\n\nprintf(&quot;%s\\n&quot;, date);\n</code></pre>\n<p>Output: 20170125</p>\n<p>If strncpy just copyes symbols char by char like it is in <a href=\"https://opensource.apple.com/source/Libc/Libc-167/gen.subproj/ppc.subproj/strncpy.c\" rel=\"nofollow noreferrer\">this implementation</a>, there should be no problem.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "edited": false, "score": 0, "creation_date": 1485341724, "post_id": 41847237, "comment_id": 70883427, "body": "And to avoid specifing <code>N</code> every time, something like: <code>#define f32_Q15_x(x)   f32_Q_x(15, x)</code>?"}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": true, "score": 7, "last_activity_date": 1489227857, "last_edit_date": 1489227857, "creation_date": 1485334734, "answer_id": 41847237, "question_id": 41847148, "link": "https://stackoverflow.com/questions/41847148/avoiding-redundancy-in-c-macros/41847237#41847237", "title": "Avoiding redundancy in C macros", "body": "<p>How about this?</p>\n\n<pre><code>#define SCALE_FACTOR_Q(N) ( 1UL &lt;&lt; N )\n#define Q_MAX(N)          ( SCALE_FACTOR_Q(N) - 1 )\n#define f32_Q_x(N,x)      ( (f32)(int) ( (float)(x)*(float)SCALE_FACTOR_Q(N) ) )\n#define f32_Q_MAX(N)      ( (f32)Q_MAX(N) )\n</code></pre>\n"}], "owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 41847237, "answer_count": 1, "score": 2, "last_activity_date": 1489227857, "creation_date": 1485334434, "last_edit_date": 1489226602, "question_id": 41847148, "link": "https://stackoverflow.com/questions/41847148/avoiding-redundancy-in-c-macros", "title": "Avoiding redundancy in C macros", "body": "<p>I am having some redundancy in C code, which I would like to avoid.</p>\n\n<pre><code>// Q15 macros\n#define SCALE_FACTOR_Q15 ( 0x00008000UL )\n#define Q15_MAX          ( 0x00007FFFUL )\n#define f32_Q15_x(x)     ( (f32)(int) ( (float)(x)*(float)SCALE_FACTOR_Q15 ) )\n#define f32_Q15_MAX      ( (f32)      ( Q15_MAX )                            )\n// etc...\n\n// Q31 macros\n#define SCALE_FACTOR_Q31 ( 0x80000000UL )\n#define Q31_MAX          ( 0x7FFFFFFFUL )\n#define f32_Q31_x(x)     ( (f32)(int) ( (float)(x)*(float)SCALE_FACTOR_Q31 ) )\n#define f32_Q31_MAX      ( (f32)      ( Q31_MAX )                            )\n// etc...\n</code></pre>\n\n<p>Now I need to do the same peace of code for <code>Q25</code>, and in the future probably for other <code>Qx</code>, where <code>x</code> is in range <code>[1,63]</code>. </p>\n\n<p>How could I avoid writing this separately for each <code>Qx</code>? </p>\n"}, {"tags": ["c++", "c", "makefile", "compiler-errors", "netbeans-7"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485334112, "post_id": 41846865, "comment_id": 70878290, "body": "If you add C++, <code>main()</code> should be compiled with a C++ compiler as well. And the whole program linked with a C++ linker."}, {"owner": {"reputation": 145, "user_id": 5668470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8ff780b9695e21972882b6fa38a206db?s=128&d=identicon&r=PG&f=1", "display_name": "Anders S", "link": "https://stackoverflow.com/users/5668470/anders-s"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485335958, "post_id": 41846865, "comment_id": 70879435, "body": "OK,so what you are saying is that I should compile my main with g++ instead of gcc. Will that work for the rest of the c code then, caus there are some very specific c twists in there."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485336174, "post_id": 41846865, "comment_id": 70879600, "body": "<a href=\"http://www.oracle.com/technetwork/articles/servers-storage-dev/mixingcandcpluspluscode-305840.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/articles/servers-storage-dev/&hellip;</a>"}, {"owner": {"reputation": 145, "user_id": 5668470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8ff780b9695e21972882b6fa38a206db?s=128&d=identicon&r=PG&f=1", "display_name": "Anders S", "link": "https://stackoverflow.com/users/5668470/anders-s"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485336327, "post_id": 41846865, "comment_id": 70879721, "body": "tryed to g++ compile, changed $(CC) in the makefile to use g++ with lots of errors as a result  mca.o: mca.c #$(CC)  \tg++ -c $(CFLAGS) $(DFLAGS) mca.c"}, {"owner": {"reputation": 145, "user_id": 5668470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8ff780b9695e21972882b6fa38a206db?s=128&d=identicon&r=PG&f=1", "display_name": "Anders S", "link": "https://stackoverflow.com/users/5668470/anders-s"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485337554, "post_id": 41846865, "comment_id": 70880547, "body": "StoryTeller, your link was great!, put it up as the answer if you like. Lots of goodies in there ;) thks - my answer is partly under &quot;Accessing C++ Classes from C&quot;  Have you got some equal link for the Makefile?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485338112, "post_id": 41846865, "comment_id": 70880926, "body": "I&#39;m glad it was of help, but I&#39;m afraid simply putting the link up doesn&#39;t make for a good answer since it isn&#39;t very clear what was your problem from the question itself. You can post your solution yourself, in reference to the link. It will be a useful bit of information for posterity. Then just mark your answer as the accepted one to close the issue."}, {"owner": {"reputation": 145, "user_id": 5668470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8ff780b9695e21972882b6fa38a206db?s=128&d=identicon&r=PG&f=1", "display_name": "Anders S", "link": "https://stackoverflow.com/users/5668470/anders-s"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485343641, "post_id": 41846865, "comment_id": 70884696, "body": "I haven&#39;t got it to compile just yet, but will do as u suggest - add my answer when I got it"}], "owner": {"reputation": 145, "user_id": 5668470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8ff780b9695e21972882b6fa38a206db?s=128&d=identicon&r=PG&f=1", "display_name": "Anders S", "link": "https://stackoverflow.com/users/5668470/anders-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485333596, "creation_date": 1485333596, "question_id": 41846865, "link": "https://stackoverflow.com/questions/41846865/how-do-i-add-c-code-and-access-it-in-an-old-c-code-makefile-project-and-compil", "title": "How do I add c++ code and access it in an old c-code Makefile project and compile with Netbeans", "body": "<p>I have an old C-project that was born during the 80th and imported into in NetBeans 7.2.running on OpenSuse 12.3</p>\n\n<p>I want to update the project with some functionality written in c++.\nThat is I have some classes to use in the c project using std::string a.s.o.</p>\n\n<p>Is it possible to simply add c++ files and mix-compile the project with gcc and g++?\nHow do I get it to work?\nBelow is where I am right now...</p>\n\n<p>Sofar I've added in the local.h where all declarations are</p>\n\n<pre><code>extern \"C\" { #include \"McaHelper.h\"}\n</code></pre>\n\n<p>this line give a compile error:</p>\n\n<pre><code>In file included from mca.c:111:0:\nlocal.h:49:8: error: expected identifier or \u2018(\u2019 before string constantIn file included from McaHelper.h:13:0,\n             from local.h:50,\n             from mca.c:111:\n/usr/include/c++/4.7/string:40:28: fatal error: bits/c++config.h: File is folder or doesn't exist\n</code></pre>\n\n<p>In the makefile, added the .o and .cpp files as + below</p>\n\n<pre><code>McaHelper.o: McaHelper.cpp McaHelper.h\n     g++ -c McaHelper.cpp\n</code></pre>\n\n<p>But somehow this doesn't produce an .o file anywhere?</p>\n\n<p>Finally I try to instanciate the class McaHelper in main(..). \nIn Netbeans I find using Ctrl + spacebar, and the class .h file by pressing Ctrl + \"McaHelper\" (it jumps into the McaHelper.h file).</p>\n\n<p>Any help appreciated</p>\n"}, {"tags": ["c", "pointers", "infinite-loop"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485332649, "post_id": 41846531, "comment_id": 70877313, "body": "Unrelated to your question, but why are you reinventing <a href=\"http://en.cppreference.com/w/c/string/byte/isdigit\" rel=\"nofollow noreferrer\"><code>isdigit</code></a>?"}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485333427, "post_id": 41846531, "comment_id": 70877813, "body": "I have to write every help function in the code, i can&#39;t use ready fucntions."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 0, "creation_date": 1485332922, "post_id": 41846567, "comment_id": 70877498, "body": "well, I am trying to think about what u said, but in order to check if this is what causing the infinite loop i did what u suggested, the infinite loop still exists, maybe its because of illlegal way of reaching memory."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 0, "creation_date": 1485332992, "post_id": 41846567, "comment_id": 70877548, "body": "@FirasAliAbdelGhani - Your infinite loop is because <code>depth</code> never goes bellow 1 in a well balanced expression."}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 0, "creation_date": 1485333655, "post_id": 41846567, "comment_id": 70877984, "body": "I tried to cancel the whole loop that incldes depth, still the same problem, there is no difference in the way i used depth before and now, before it worked normally, again, it seems like an illegal use of something because i tried to put printf of values to see if something keeps getting same value, nothing was printed."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 1, "creation_date": 1485333885, "post_id": 41846567, "comment_id": 70878138, "body": "@FirasAliAbdelGhani - You need to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug your program</a> to find a logic error. Not put it up for display hoping someone will spot the bug. I told you the most glaringly obvious problems. You need to do the leg work yourself."}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 0, "creation_date": 1485333941, "post_id": 41846567, "comment_id": 70878167, "body": "I tottaly get you, thanks for the advices, I will run over the code again."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1485332904, "last_edit_date": 1485332904, "creation_date": 1485332542, "answer_id": 41846567, "question_id": 41846531, "link": "https://stackoverflow.com/questions/41846531/i-want-to-split-a-function-into-two-funcitons/41846567#41846567", "title": "I want to split a function into two funcitons", "body": "<p>Your <code>Is_Num</code> modifies the <em>pointer</em> it gets, not the <em>pointee</em>. To modify the pointer in the outer context, you need to do something like this:</p>\n\n<pre><code>bool Is_Num(char ** const p_exp)\n{\n    while(**p_exp)\n    {\n        if (!Is_Digit((*p_exp)++))   return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>Marking the pointer you get as <code>const</code> is also a good idea. It prevents you from modifying it, thus making sure you always refer to the same object.</p>\n"}], "owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485332904, "creation_date": 1485332421, "last_edit_date": 1485332549, "question_id": 41846531, "link": "https://stackoverflow.com/questions/41846531/i-want-to-split-a-function-into-two-funcitons", "title": "I want to split a function into two funcitons", "body": "<p>I have a function that gets a pointer to an expression, and through the code the address increases (expression++), I want to split the function into two because its too long, but I had to use pointer to a pointer, and I think I used it wrong, because now my code has an infinite loop. here is the function that i wanna split followed by to help functions:</p>\n\n<pre><code>char CalculateExpression(char *expression, char *LEFT, char *RIGHT){\n\nint i,depth;\n\nexpression++;\n\nif (Is_Digit(expression))\n{\n    i=0;\n    while(Is_Digit(expression))\n    {\n        LEFT[i] = *expression;\n        i++;\n        expression++;\n    }\n}\n\nelse\n{\n\n    i=0;\n    LEFT [i] = *expression;\n    i++;\n    expression++;\n\n    depth = 1;\n    while(depth &gt; 0)\n    {\n        if (*expression == '(')  depth++;\n\n        if (*expression == ')')  depth--;\n\n        LEFT[i] = *expression;\n        i++;\n        expression++;\n    }\n\n}\nLEFT[i] = 0;\n\nchar OPERATION = *expression;\n\nexpression++;\n\n\ni=0;\n\nwhile (*(expression+1))\n{\n    RIGHT[i] = *expression;\n    i++;\n    expression++;\n}\n\nRIGHT[i] = 0;\n\nreturn OPERATION;}\n</code></pre>\n\n<p>and here is two help functions functions: </p>\n\n<pre><code>  bool Is_Digit(char *c)\n{\n    return (*c &gt;= '0' &amp;&amp; *c &lt;= '9');\n}\n\nbool Is_Num(char *exp)\n{\n    while(*exp)\n    {\n        if (!Is_Digit(exp++))   return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>here is what I did, I defined a pointer to a pointer in the main function in that way: </p>\n\n<pre><code>   bool calculate_modular_expression(unsigned int modulus, char* expression,\n                                  unsigned int* expression_result)\n{\n\n     char** expression_after;\n        expression_after= &amp;expression;\n        CalculateExpression(expression,Left_To_Operation,\n                                             Right_To_Operation,expression_after);\n\n}\n</code></pre>\n\n<p>and thats how i changed the other functions (after split), the new function is called Left_Operand:</p>\n\n<pre><code>int Left_Operand(char *LEFT, char *RIGHT,char** expression_after)\n{\n    int i,depth;\n\n    if (Is_Digit(expression_after))\n    {\n        i=0;\n        while(Is_Digit(expression_after))\n        {\n            LEFT[i] = **expression_after;\n            i++;\n            expression_after++;\n        }\n    }\n\n    else\n    {\n\n        i=0;\n        LEFT [i] = **expression_after;\n        i++;\n        expression_after++;\n\n        depth = 1;\n        while(depth &gt; 0)\n        {\n            if (**expression_after == '(')  depth++;\n\n            if (**expression_after == ')')  depth--;\n\n            LEFT[i] = **expression_after;\n            i++;\n            expression_after++;\n        }\n\n    }\n\n    LEFT[i] = 0;\n\n\n\n}\n\n\n\nchar CalculateExpression(char *expression, char *LEFT, char *RIGHT,char** expression_after)\n{\n    int i,depth;\n\n    expression++;\n\n\n      Left_Operand(LEFT,RIGHT,expression_after);\n\n\n    expression = *expression_after;\n\n    char OPERATION = *expression;\n\n    expression++;\n\n\n    i=0;\n\n    while (*(expression+1))\n    {\n        RIGHT[i] = *expression;\n        i++;\n        expression++;\n    }\n\n    RIGHT[i] = 0;\n\n    return OPERATION;\n}\n</code></pre>\n\n<p>and finally the help functions after change: </p>\n\n<pre><code>bool Is_Digit(char **c)\n{\n    return (**c &gt;= '0' &amp;&amp; **c &lt;= '9');\n}\n\n\n/*this char returns true if an expression is a number*/\n\nbool Is_Num(char **exp)\n{\n    while(**exp)\n    {\n        if (!Is_Digit(exp++))   return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>what possibly could i have done wrong? </p>\n"}, {"tags": ["c", "linux-kernel", "kernel-module"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1485332635, "post_id": 41846487, "comment_id": 70877299, "body": "<b>Why do you ask</b>, and what is the actual use case and motivation? Please <b>edit your question</b> to improve it!"}, {"owner": {"reputation": 3686, "user_id": 3132173, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6873ee643c6e04fa734682dc57104b5c?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sarid", "link": "https://stackoverflow.com/users/3132173/a-sarid"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1485332971, "post_id": 41846487, "comment_id": 70877535, "body": "@BasileStarynkevitch added my specific case. Thanks."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1485333390, "post_id": 41846487, "comment_id": 70877788, "body": "BTW, even with the edit, I find your question too broad (and it probably has been downvoted - not by me - because of that). You need to name the kernel modules, and to explain what exact event is triggering their loading (or unloading) and what is the concrete role of those modules."}, {"owner": {"reputation": 3686, "user_id": 3132173, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6873ee643c6e04fa734682dc57104b5c?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sarid", "link": "https://stackoverflow.com/users/3132173/a-sarid"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1485333808, "post_id": 41846487, "comment_id": 70878091, "body": "@BasileStarynkevitch I appreciate your effort. I understand that it might be too broad. I am working on some DSL device, that should load and unload a module depending if it is a VDSL or ADSL connection. I am not a kernel expert and kernel modules are something new to me. I honestly thought that there might be a simple solution to this, but I guess I was wrong. Thanks."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1485334036, "post_id": 41846487, "comment_id": 70878235, "body": "My current guess is that you have an architecture design bug, and they are the most costly bugs. Ask your manager for several more man months."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1485334108, "post_id": 41846487, "comment_id": 70878289, "body": "you should <b>edit your question</b> not comment it. Basically, comments are for others. You should not comment your question, but edit it."}], "answers": [{"comments": [{"owner": {"reputation": 3686, "user_id": 3132173, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6873ee643c6e04fa734682dc57104b5c?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sarid", "link": "https://stackoverflow.com/users/3132173/a-sarid"}, "edited": false, "score": 0, "creation_date": 1485333267, "post_id": 41846569, "comment_id": 70877712, "body": "Thanks for the answer. Those kernel modules are not going to be loaded / unloaded frequently. They are hardware dependent, but once I unloaded one and loaded the other they will stay like this."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1485333981, "last_edit_date": 1485333981, "creation_date": 1485332556, "answer_id": 41846569, "question_id": 41846487, "link": "https://stackoverflow.com/questions/41846487/how-to-load-a-kernel-module-from-inside-the-kernel-code/41846569#41846569", "title": "How to load a kernel module from inside the kernel code?", "body": "<p>I believe you cannot do that directly, but I could be wrong.</p>\n\n<p>I would suggest to write some data which goes into some <em>user-space</em> application (perhaps <code>systemd</code>, or your own daemon) thru some file descriptor (maybe some <a href=\"http://man7.org/linux/man-pages/man7/socket.7.html\" rel=\"nofollow noreferrer\">socket(7)</a>, probably of <a href=\"http://man7.org/linux/man-pages/man7/netlink.7.html\" rel=\"nofollow noreferrer\">netlink(7)</a> family).</p>\n\n<p>I don't know well all the details, but I do question the approach of loading a kernel module <em>directly</em> from kernel code, because kernel modules have been invented to \"increase\" the kernel from user-land applications. If you know what exact kernel code you need, consider linking all of it together. See also <a href=\"http://man7.org/linux/man-pages/man8/modprobe.8.html\" rel=\"nofollow noreferrer\">modprobe(8)</a></p>\n\n<p><sup>(your question needs a concrete use case and some motivation; I don't understand why you need to avoid going to userspace; and I would like to understand what actual kernel modules you are thinking of, and what is their exact roles)</sup></p>\n\n<p>BTW, kernel modules should not be loaded frequently. If you have to do that (e.g. loading a kernel module every few milliseconds) it means that you have a design error. A kernel module (or several of them) is generally loaded once and should not disturb the kernel when it is useless. So you should improve your overall design to avoid the need of unloading and reloading frequently your kernel modules. Conceptually at least, you should think of loading all your kernel modules at boot time and unloading them (in the <em>appropriate</em> order) at shutdown time.</p>\n\n<blockquote>\n  <p>The case is that I have two kernel modules that I should load and unload dynamically.</p>\n</blockquote>\n\n<p>This is probably a symptom of a huge architecture design mistake. These are the most costly bugs. You should consider budgeting several months of efforts to avoid it.</p>\n\n<p>Probably you should describe more the dependencies between [your particular] kernel modules. AFAIK, the <code>modprobe</code> command manages such dependencies (e.g. won't unload a module without having first unloaded the <em>required</em> dependencies)</p>\n\n<p>If you are designing &amp; developing both kernel modules, you should consider merging them into a single kernel module (and budget several months of effort for that task). Of course, you may need to change its \"API\", e.g. some device drivers or <code>ioctl</code> to be able to enable or disable some <em>part</em> of it.</p>\n"}, {"comments": [{"owner": {"reputation": 3686, "user_id": 3132173, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6873ee643c6e04fa734682dc57104b5c?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sarid", "link": "https://stackoverflow.com/users/3132173/a-sarid"}, "edited": false, "score": 0, "creation_date": 1485415922, "post_id": 41858536, "comment_id": 70919317, "body": "Thanks Rami. Is there also a similar way for removing a module? Couldn&#39;t find it in the reference you gave."}, {"owner": {"reputation": 190, "user_id": 6951425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YISvT.jpg?s=128&g=1", "display_name": "Rami Rosen", "link": "https://stackoverflow.com/users/6951425/rami-rosen"}, "reply_to_user": {"reputation": 3686, "user_id": 3132173, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6873ee643c6e04fa734682dc57104b5c?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sarid", "link": "https://stackoverflow.com/users/3132173/a-sarid"}, "edited": false, "score": 1, "creation_date": 1485471604, "post_id": 41858536, "comment_id": 70951437, "body": "I did not encounter anywhere where removing a kernel module is done from within the kernel. If there was such a method, the natural place for it will be in <a href=\"http://lxr.free-electrons.com/source/include/linux/kmod.h\" rel=\"nofollow noreferrer\">lxr.free-electrons.com/source/include/linux/kmod.h</a>, but there is nothing like that in that header.                                                                                               Rami Rosen"}], "tags": [], "owner": {"reputation": 190, "user_id": 6951425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YISvT.jpg?s=128&g=1", "display_name": "Rami Rosen", "link": "https://stackoverflow.com/users/6951425/rami-rosen"}, "is_accepted": false, "score": 2, "last_activity_date": 1574047159, "last_edit_date": 1574047159, "creation_date": 1485367478, "answer_id": 41858536, "question_id": 41846487, "link": "https://stackoverflow.com/questions/41846487/how-to-load-a-kernel-module-from-inside-the-kernel-code/41858536#41858536", "title": "How to load a kernel module from inside the kernel code?", "body": "<p>For loading a module from within the kernel you can use <a href=\"https://elixir.bootlin.com/linux/latest/source/kernel/kmod.c#L125\" rel=\"nofollow noreferrer\">request_module</a>.</p>\n\n<p>See example <a href=\"https://elixir.bootlin.com/linux/latest/source/net/netlink/genetlink.c#L898\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 3686, "user_id": 3132173, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6873ee643c6e04fa734682dc57104b5c?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sarid", "link": "https://stackoverflow.com/users/3132173/a-sarid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1574047159, "creation_date": 1485332231, "last_edit_date": 1495539951, "question_id": 41846487, "link": "https://stackoverflow.com/questions/41846487/how-to-load-a-kernel-module-from-inside-the-kernel-code", "title": "How to load a kernel module from inside the kernel code?", "body": "<p>This is question is quite similar to the question: <a href=\"https://stackoverflow.com/questions/5947286/how-can-linux-kernel-modules-be-loaded-from-c-code\">How can Linux kernel modules be loaded from C code?</a></p>\n\n<p>The difference is that I want to load the kernel module from <strong>inside the kernel code</strong> without going out to userspace.</p>\n\n<p>The case is that I have two kernel modules that I should load and unload dynamically. They cannot be loaded together, and I need to load one and unload the other as fast as possible. The trigger that tells me which one to load or unload is coming from the hardware.<br>\nThat is the reason I want to do it from inside the kernel.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1485329111, "post_id": 41845639, "comment_id": 70875568, "body": "<code>after_tokenization[j]</code> is an uninitialized pointer. You need to allocate space for it."}, {"owner": {"reputation": 18300, "user_id": 462608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/s9JpE.jpg?s=128&g=1", "display_name": "Aquarius_Girl", "link": "https://stackoverflow.com/users/462608/aquarius-girl"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1485329182, "post_id": 41845639, "comment_id": 70875606, "body": "Why? Haven&#39;t I allocated space for it in the first line of the program? Is that wrong? @RoadRunner"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485329189, "post_id": 41845639, "comment_id": 70875609, "body": "You have a severe abuse of pointer types here. Turn on compiler warnings and heed them. Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 18300, "user_id": 462608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/s9JpE.jpg?s=128&g=1", "display_name": "Aquarius_Girl", "link": "https://stackoverflow.com/users/462608/aquarius-girl"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1485329215, "post_id": 41845639, "comment_id": 70875624, "body": "<code>char** after_tokenization      = malloc(sizeof(char**) * 1000);</code> @RoadRunner Is this wrong?"}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1485329231, "post_id": 41845639, "comment_id": 70875630, "body": "@AquariusTheGirl You allocated space for <code>**after_tokenization</code>, not <code>after_tokenization[j]</code>."}, {"owner": {"reputation": 18300, "user_id": 462608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/s9JpE.jpg?s=128&g=1", "display_name": "Aquarius_Girl", "link": "https://stackoverflow.com/users/462608/aquarius-girl"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1485329277, "post_id": 41845639, "comment_id": 70875657, "body": "Can you explain that in detail as an answer. What is the difference between two? @RoadRunner"}, {"owner": {"reputation": 18300, "user_id": 462608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/s9JpE.jpg?s=128&g=1", "display_name": "Aquarius_Girl", "link": "https://stackoverflow.com/users/462608/aquarius-girl"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1485334060, "post_id": 41845639, "comment_id": 70878256, "body": "@RoadRunner I have allocated memory now, see edit. But, the result has not changed. Why?"}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1485352630, "post_id": 41845639, "comment_id": 70890539, "body": "@AquariusTheGirl Sorry I will try and give a detailed answer now. The one below is also pretty good."}], "answers": [{"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1485337362, "creation_date": 1485337362, "answer_id": 41848163, "question_id": 41845639, "link": "https://stackoverflow.com/questions/41845639/storing-and-returning-local-pointers-from-within-a-2d-char-array-in-c/41848163#41848163", "title": "Storing and returning local pointers from within a 2D char array in C", "body": "<pre><code>    char** after_tokenization      = _malloc_2D_array (after_tokenization, 10, 20, 0);\n</code></pre>\n\n<p>When <code>_malloc_2D_array</code> is called, <code>after_tokenization</code> is still uninitialized. <code>_malloc_2D_array</code> cannot use its value. This argument is fully redundant. Do you pass a pointer to <code>malloc</code>? No, malloc returns a pointer to you. <code>_malloc_2D_array</code> is no different. Indeed, <code>_malloc_2D_array</code> is not using the value of <code>arg_2D_array</code>, but immediately proceeds to assign a new value to it. IOW, it is nothing but a local variable there. Fixing:</p>\n\n<pre><code>    char** after_tokenization      = _malloc_2D_array (10, 20, 0);\n</code></pre>\n\n<p>Fix _malloc_2D_array (BTW why add underscore to a function name? It serves no purpose...)</p>\n\n<pre><code>char** _malloc_2D_array (int rows,\n                         int cols,\n                         int type)\n{\n    int i = 0;\n    int j = 0;\n    char** result;\n\n    if (type == 0)\n    {\n        result = malloc(sizeof(char**) * rows); // BAD\n</code></pre>\n\n<p>Oops! Star counting error here. Let's go back to review some examples.</p>\n\n<pre><code>     /* Example */ char* str = malloc (length+1);\n     /* Example */ int* array = malloc (sizeof(int) * array_length);\n</code></pre>\n\n<p>In the examples above, the result type has ONE star, and the argument of <code>sizeof</code> has NO stars. You allocate a memory for a <em>type X</em> and return <em>a pointer to X</em>. The type of the pointer to X has one star more than X itself. Fixing:</p>\n\n<pre><code>        result = malloc(sizeof(char*) * rows); // GOOD\n\n        for (; i &lt; rows; i++)\n        {\n            arg_2D_array[i] = malloc(sizeof(char*) * cols); // BAD\n</code></pre>\n\n<p>Same error. Leave place for the null terminator while you're at it. Fixing:\n                arg_2D_array[i] = malloc(sizeof(char) * (cols+1)); // BETTER, sizeof(char) == 1 by definition, you can skip it:\n                arg_2D_array[i] = malloc(cols+1); // GOOD\n            }\n        }\n        return result;\n    }</p>\n\n<p>OK, Back to _strtok (a really bad name for a function by the way).</p>\n\n<pre><code>    char*  hold_chars_of_one_group = malloc(sizeof(char*) * strlen(arg_string)); // BAD\n</code></pre>\n\n<p>Same error as above plus one more: you need one more character to hold the null terminator. Fixing:</p>\n\n<pre><code>    char*  hold_chars_of_one_group = malloc(sizeof(char) * strlen(arg_string) + 1); \n\n    int j = 0;\n    int i = 0;\n    int k = 0;\n\n    while (arg_string[i])\n    {\n        if (arg_string[i] != *arg_delimeter) // BAD, that's not how strtok works\n</code></pre>\n\n<p>There are zero or more characters in <code>arg_delimeter</code>, and you are using only the first one (without checking if it exists). You need to check against <em>each</em> character in <code>arg_delimeter</code> Fixing:</p>\n\n<pre><code>        const char* delim;\n        int found = 0;\n        for (delim = arg_delimiter; *delim &amp;&amp; !found; ++delim) // delimiter is spelled this way\n          if (*delim == arg_string[i]) found = 1;\n        if (!found) // GOOD\n</code></pre>\n\n<p>Continuing:</p>\n\n<pre><code>        {\n            hold_chars_of_one_group[k] = arg_string[i];\n            k++;\n        }\n        else\n        {\n            after_tokenization[j] = hold_chars_of_one_group; // PROBLEM \n</code></pre>\n\n<p>First, <code>hold_chars_of_one_group</code> is not null-terminated. Second, this is not how you copy a string.</p>\n\n<pre><code>            hold_chars_of_one_group[k] = '\\0';    \n            strcpy(after_tokenization[j], hold_chars_of_one_group)\n            j++;\n            k = 0;\n        }\n        i++;\n    }\n</code></pre>\n\n<p>Need to take care of the last token, not delimited by the delimiter.</p>\n\n<pre><code>    hold_chars_of_one_group[k] = '\\0';\n    strcpy(after_tokenization[j], hold_chars_of_one_group);\n</code></pre>\n\n<p>And somehow indicate how many tokens we have. Commonly this is achieved by NULL-terminating the pointer array.</p>\n\n<pre><code>    j++;\n    after_tokenization[j] = NULL;\n\n    return after_tokenization;\n}\n</code></pre>\n\n<p>Ugh! Now test:</p>\n\n<pre><code>int main()\n{\n    char** p = _strtok (\"anisha,kaul shizuka;sharma\", \",; \"); // use different delimiters\n    while (*p)  // print all tokens\n        printf (\"-%s-\\n\", *p++);\n    return 0;\n}\n</code></pre>\n\n<p>For completeness, here's the fixed program, uninterrupted:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; // malloc\n#include &lt;string.h&gt; // strlen\n\nchar** _malloc_2D_array (int rows,\n                         int cols,\n                         int type)\n{\n    int i = 0;\n    int j = 0;\n    char** result;\n\n    if (type == 0)\n    {\n        result = malloc(sizeof(char*) * rows);\n        for (; i &lt; rows; i++)\n        {\n            result[i] = malloc(cols + 1);\n        }\n    }\n    return result;\n}\n\nchar** _strtok (char* arg_string, const char* arg_delimeter)\n{\n    char** after_tokenization      = _malloc_2D_array (10, 20, 0);\n    char*  hold_chars_of_one_group = malloc(sizeof(char) * strlen(arg_string) + 1);\n\n    int j = 0;\n    int i = 0;\n    int k = 0;\n\n    while (arg_string[i])\n    {\n        const char* delim;\n        int found = 0;\n        for (delim = arg_delimeter; *delim &amp;&amp; !found; ++delim)\n          if (*delim == arg_string[i]) found = 1;\n        if (!found)\n        {\n            hold_chars_of_one_group[k] = arg_string[i];\n            k++;\n        }\n        else\n        {\n            hold_chars_of_one_group[k] = '\\0';\n            strcpy(after_tokenization[j], hold_chars_of_one_group);\n            j++;\n            k = 0;\n        }\n        i++;\n    }\n\n    hold_chars_of_one_group[k] = '\\0';\n    strcpy(after_tokenization[j], hold_chars_of_one_group);\n    j++;\n    after_tokenization[j] = NULL;\n\n    return after_tokenization;\n}\n\nint main()\n{\n    char** p = _strtok (\"anisha,kaul shizuka;sharma\", \",; \");\n    while (*p)\n        printf (\"-%s-\\n\", *p++);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 1, "last_activity_date": 1485354255, "last_edit_date": 1485354255, "creation_date": 1485353437, "answer_id": 41853754, "question_id": 41845639, "link": "https://stackoverflow.com/questions/41845639/storing-and-returning-local-pointers-from-within-a-2d-char-array-in-c/41853754#41853754", "title": "Storing and returning local pointers from within a 2D char array in C", "body": "<p>With your code, you need to not only <code>malloc()</code> space for <code>char **after_tokenization</code>, but also <code>after_tokenization[j]</code>. This is because <code>after_tokenization[j]</code> is not pointing anywhere in memory, which you need to allocate with <code>malloc()</code>. </p>\n\n<p>Instead of:</p>\n\n<pre><code>after_tokenization[j] = hold_chars_of_one_group;\n</code></pre>\n\n<p>Which does overwrite the address of <code>after_tokenization[j]</code>, you can use this:</p>\n\n<pre><code>after_tokenization[j] = malloc(strlen(hold_chars_of_one_group)+1);\n</code></pre>\n\n<p>Which returns a valid pointer to <code>after_tokenization[j]</code>, and now the pointer can occupy space because it is pointing somewhere valid in memory. The reason why your code still doesn't work is that you need to copy the contents of <code>hold_chars_of_one_group</code> into this pointer waiting to occupy space. </p>\n\n<p>This can be done with <code>strcpy()</code> from <code>&lt;string.h&gt;</code>:</p>\n\n<pre><code>strcpy(after_tokenization[j], hold_chars_of_one_group);\n</code></pre>\n\n<p>Now you have copied the contents into <code>after_tokenization[j]</code>. </p>\n\n<p><strong>Note:</strong> You may need to add a null-byte and the end of <code>after_tokenization[j]</code>, otherwise this ends up being undefined behavior. </p>\n\n<p>Another thing to point out is this line:</p>\n\n<pre><code>char** after_tokenization = _malloc_2D_array(after_tokenization, 10, 20, 0);\n</code></pre>\n\n<p>Which will lead to problems as <code>after_tokenization</code> is not initialized here, and it is awkward for a variable to also be a parameter of the function call. </p>\n\n<p>Also I think I answered a very similar answer before, and I showed some code which does a lot of these things. </p>\n"}], "owner": {"reputation": 18300, "user_id": 462608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/s9JpE.jpg?s=128&g=1", "display_name": "Aquarius_Girl", "link": "https://stackoverflow.com/users/462608/aquarius-girl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41848163, "answer_count": 2, "score": 0, "last_activity_date": 1485354255, "creation_date": 1485328896, "last_edit_date": 1485334029, "question_id": 41845639, "link": "https://stackoverflow.com/questions/41845639/storing-and-returning-local-pointers-from-within-a-2d-char-array-in-c", "title": "Storing and returning local pointers from within a 2D char array in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; // malloc\n#include &lt;string.h&gt; // strlen\n\nchar** _malloc_2D_array (char** arg_2D_array,\n                         int rows,\n                         int cols,\n                         int type)\n{\n    int i = 0;\n    int j = 0;\n\n    if (type == 0)\n    {\n        arg_2D_array = malloc(sizeof(char**) * rows);\n        for (; i &lt; rows; i++)\n        {\n            arg_2D_array[i] = malloc(sizeof(char*) * cols);\n        }\n    }\n    return arg_2D_array;\n}\n\nchar** _strtok (char* arg_string, const char* arg_delimeter)\n{\n    char** after_tokenization      = _malloc_2D_array (after_tokenization, 10, 20, 0);\n    char*  hold_chars_of_one_group = malloc(sizeof(char*) * strlen(arg_string));\n\n    int j = 0;\n    int i = 0;\n    int k = 0;\n\n    while (arg_string[i])\n    {\n        if (arg_string[i] != *arg_delimeter)\n        {\n            hold_chars_of_one_group[k] = arg_string[i];\n            k++;\n        }\n        else\n        {\n            after_tokenization[j] = hold_chars_of_one_group;\n            j++;\n            k = 0;\n        }\n        i++;\n    }\n\n    return after_tokenization;\n}\n\nint main()\n{\n    char** p = _strtok (\"anisha,kaul,shizuka,sharma\", \",\");\n    printf (\"-%s- p is being printed:\", *p);\n    return 0;\n}\n</code></pre>\n\n<p>Output:<br>\n<code>-sharmaa- p is being printed</code></p>\n\n<p>I was expecting all the words rather than the last one. Also, one extra <code>a</code> has been appended with the word which is printed. Why?</p>\n\n<p>This line: </p>\n\n<p><code>after_tokenization[j] = hold_chars_of_one_group;</code></p>\n\n<p>seems to be overwriting addresses in the 2D array even though I am incrementing the index. Why? </p>\n"}, {"tags": ["c++", "c", "linux", "ltrace"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1485328999, "post_id": 41845554, "comment_id": 70875511, "body": "Two similar questions (but not exact duplicates, IMHO): <a href=\"http://stackoverflow.com/questions/6538501/linking-two-shared-libraries-with-some-of-the-same-symbols\" title=\"linking two shared libraries with some of the same symbols\">stackoverflow.com/questions/6538501/&hellip;</a> <a href=\"http://stackoverflow.com/questions/29079742/same-symbols-in-different-libraries-and-linking-order\" title=\"same symbols in different libraries and linking order\">stackoverflow.com/questions/29079742/&hellip;</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1485329099, "post_id": 41845554, "comment_id": 70875561, "body": "If you know the address of the function, you can look it up in the process memory map (<code>&#47;proc&#47;&lt;pid&gt;&#47;maps</code>)."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485332229, "post_id": 41845554, "comment_id": 70877090, "body": "I agree &quot;not duplicates&quot;, but if you know the order that the libraries were passed to the linker, the questions very strongly imply that it will be <code>func</code> from the first one."}], "answers": [{"tags": [], "owner": {"reputation": 7695, "user_id": 637866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a566553d97f6cdd46b6de6b26f47374?s=128&d=identicon&r=PG", "display_name": "ysdx", "link": "https://stackoverflow.com/users/637866/ysdx"}, "is_accepted": false, "score": 0, "last_activity_date": 1485332978, "creation_date": 1485332978, "answer_id": 41846679, "question_id": 41845554, "link": "https://stackoverflow.com/questions/41845554/how-to-identify-the-shared-library-whose-functions-are-currently-being-executed/41846679#41846679", "title": "How to identify the shared library, whose functions are currently being executed by an executable", "body": "<p>Using systemtap:</p>\n\n<pre><code>probe process(\"/path/to/1.so\").function(\"func\")\n{\n  printf(\"%d: 1.so\\n\", pid());\n}       \n\nprobe process(\"/path/to/2.so\").function(\"func\")\n{\n  printf(\"%d: 2.so\\n\", pid());\n}       \n\nprobe process(\"/path/to/3.so\").function(\"func\")\n{\n  printf(\"%d: 3.so\\n\", pid());\n}       \n</code></pre>\n\n<p>Use it with:</p>\n\n<pre><code>sudo -E stap ./func.stap\n</code></pre>\n\n<p>With linux perf:</p>\n\n<pre><code>sudo perf probe -x /path/to/1.so func\nsudo perf probe -x /path/to/2.so func\nsudo perf probe -x /path/to/3.so func\nsudo perf top -e probe_1:func,probe_2:func,probe3:func\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 2906548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2EAPk.jpg?s=128&g=1", "display_name": "Guru24", "link": "https://stackoverflow.com/users/2906548/guru24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485332978, "creation_date": 1485328514, "last_edit_date": 1485330755, "question_id": 41845554, "link": "https://stackoverflow.com/questions/41845554/how-to-identify-the-shared-library-whose-functions-are-currently-being-executed", "title": "How to identify the shared library, whose functions are currently being executed by an executable", "body": "<p>An executable file, <code>a.out</code>, loads the shared libraries <code>1.so</code>, <code>2.so</code> and <code>3.so</code>. There is a function <code>func()</code> implemented in each of the three libraries. When <code>func()</code> is invoked, I want to identify, which implementation of <code>func()</code> is executed.</p>\n\n<p>I tried <code>ltrace</code> on the PID of the executable file. It only lists the <code>func()</code> call, but not the shared library.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3080, "user_id": 5546312, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/TT1Ho.jpg?s=128&g=1", "display_name": "D4ttatraya", "link": "https://stackoverflow.com/users/5546312/d4ttatraya"}, "edited": false, "score": 0, "creation_date": 1485330872, "post_id": 41845475, "comment_id": 70876370, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1532819/algorithm-efficient-way-to-remove-duplicate-integers-from-an-array\">Algorithm: efficient way to remove duplicate integers from an array</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1009, "user_id": 6845131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9800d8a818df2a7c3a0b87b3f89b35ae?s=128&d=identicon&r=PG&f=1", "display_name": "Vishist Varugeese", "link": "https://stackoverflow.com/users/6845131/vishist-varugeese"}, "edited": false, "score": 0, "creation_date": 1485328776, "post_id": 41845522, "comment_id": 70875427, "body": "I&#39;m sorry but I didn&#39;t quite get you."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "reply_to_user": {"reputation": 1009, "user_id": 6845131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9800d8a818df2a7c3a0b87b3f89b35ae?s=128&d=identicon&r=PG&f=1", "display_name": "Vishist Varugeese", "link": "https://stackoverflow.com/users/6845131/vishist-varugeese"}, "edited": false, "score": 0, "creation_date": 1485329118, "post_id": 41845522, "comment_id": 70875573, "body": "@VishistVVishy Perhaps now you will understand. What others also mentioned is that you used the same <code>i</code> and you stopped after first iteration."}], "tags": [], "owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "is_accepted": false, "score": 0, "last_activity_date": 1485329016, "last_edit_date": 1485329016, "creation_date": 1485328384, "answer_id": 41845522, "question_id": 41845475, "link": "https://stackoverflow.com/questions/41845475/program-to-remove-the-duplicate-elements-from-an-array-in-c/41845522#41845522", "title": "Program to remove the duplicate elements from an array in c", "body": "<p>My mistake, at first glence I thought you had problem with <code>n</code> after running this it worked.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint dup(int [],int);\nint main()\n{\n    int i,n,index,a[20], count;\n    printf(\"Enter n value \\n\");\n    scanf(\"%d\",&amp;n);\n    count = n;\n    int j;\n    printf(\"Enter array values \\n\");\n    for(i=0;i&lt;n;++i)\n        scanf(\"%d\",&amp;a[i]);\n    for(i=0;i&lt;n;++i)\n    {\n        index=dup(a,n);\n        if(index==-1)\n        {\n            printf(\"No duplicate elements\");\n            break;\n        }\n        else\n        {\n            a[index]=0;\n            for(j=index;j&lt;n;j++)\n                a[j]=a[j+1];\n            n-=1;\n        }\n    }\n    printf(\"Output: \\n\");\n    for(i=0;i&lt;n;++i)\n        printf(\"%d\\n\",a[i]);\n\n    return (EXIT_SUCCESS);\n}\nint dup(int a[],int size)\n{\n    int i,j,pos=-1;\n    for(i=0;i&lt;size;i++)\n    {\n        for(j=i+1;j&lt;size;j++)\n        {\n            if(a[i]==a[j])\n            {\n                pos=j;\n                return pos;\n            }\n        }\n    }\n    if(pos==-1)\n        return pos;\n}\n</code></pre>\n\n<h1>OUTPUT</h1>\n\n<blockquote>\n  <p>Enter n value</p>\n  \n  <p>5</p>\n  \n  <p>Enter array values</p>\n  \n  <p>12</p>\n  \n  <p>24</p>\n  \n  <p>3</p>\n  \n  <p>12</p>\n  \n  <p>24</p>\n  \n  <p>Output:</p>\n  \n  <p>12</p>\n  \n  <p>24</p>\n  \n  <p>3</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1009, "user_id": 6845131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9800d8a818df2a7c3a0b87b3f89b35ae?s=128&d=identicon&r=PG&f=1", "display_name": "Vishist Varugeese", "link": "https://stackoverflow.com/users/6845131/vishist-varugeese"}, "edited": false, "score": 0, "creation_date": 1485328917, "post_id": 41845599, "comment_id": 70875483, "body": "but isn&#39;t that what i&#39;m doing in my main function?"}], "tags": [], "owner": {"reputation": 303, "user_id": 7208263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9mI4Z.jpg?s=128&g=1", "display_name": "Seeker", "link": "https://stackoverflow.com/users/7208263/seeker"}, "is_accepted": false, "score": 0, "last_activity_date": 1485328723, "creation_date": 1485328723, "answer_id": 41845599, "question_id": 41845475, "link": "https://stackoverflow.com/questions/41845475/program-to-remove-the-duplicate-elements-from-an-array-in-c/41845599#41845599", "title": "Program to remove the duplicate elements from an array in c", "body": "<blockquote>\n  <p>The Problem seem to lie in the if condition in second loop. </p>\n</blockquote>\n\n<pre><code>for (k = j; k &lt; size; k++) {\n           arr[k] = arr[k + 1];\n        }\n</code></pre>\n\n<blockquote>\n  <p>Simply put this piece of code after your if condition</p>\n</blockquote>\n\n<pre><code>if(a[i]==a[j])\n</code></pre>\n\n<blockquote>\n  <p>and it will work.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1009, "user_id": 6845131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9800d8a818df2a7c3a0b87b3f89b35ae?s=128&d=identicon&r=PG&f=1", "display_name": "Vishist Varugeese", "link": "https://stackoverflow.com/users/6845131/vishist-varugeese"}, "edited": false, "score": 0, "creation_date": 1485329314, "post_id": 41845604, "comment_id": 70875676, "body": "how come initializing the variable again making a difference?"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1485329538, "post_id": 41845604, "comment_id": 70875785, "body": "I don&#39;t think this fixes the problem when a value is thrice in the array."}, {"owner": {"reputation": 1009, "user_id": 6845131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9800d8a818df2a7c3a0b87b3f89b35ae?s=128&d=identicon&r=PG&f=1", "display_name": "Vishist Varugeese", "link": "https://stackoverflow.com/users/6845131/vishist-varugeese"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1485329667, "post_id": 41845604, "comment_id": 70875838, "body": "@KamiKaze It does."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1485329944, "post_id": 41845604, "comment_id": 70875963, "body": "sure it does, I haven&#39;t read the dup function correctly. May bad."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1485330887, "post_id": 41845604, "comment_id": 70876383, "body": "This declares a new variable, also named <code>i</code> but in a different scope, so it doesn&#39;t conflict with the other <code>i</code>. You have to become familiar with C scoping rules!"}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1485328748, "creation_date": 1485328748, "answer_id": 41845604, "question_id": 41845475, "link": "https://stackoverflow.com/questions/41845475/program-to-remove-the-duplicate-elements-from-an-array-in-c/41845604#41845604", "title": "Program to remove the duplicate elements from an array in c", "body": "<pre><code>for(i=0;i&lt;n;++i)  // &lt;-------------------------------------- for i\n{\n    index=dup(a,n);\n    if(index==-1)\n    {\n        printf(\"No duplicate elements\");\n        break;\n    }\n    else\n    {\n        a[index]=0;\n        for(i=index;i&lt;n;i++) // &lt;--------------------------- for i\n            a[i]=a[i+1];\n        n-=1;\n    }\n}\n</code></pre>\n\n<p>You are using the same loop variable for two loops, one nested inside the other. This cannot work. Use different variables. <a href=\"http://ideone.com/jtonz1\" rel=\"nofollow noreferrer\">Live demo</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1485329989, "last_edit_date": 1485329989, "creation_date": 1485329048, "answer_id": 41845672, "question_id": 41845475, "link": "https://stackoverflow.com/questions/41845475/program-to-remove-the-duplicate-elements-from-an-array-in-c/41845672#41845672", "title": "Program to remove the duplicate elements from an array in c", "body": "<p>You should name your iterator variables better so you might not confuse them in nested loops, or as you do, use the same twice in a nested loop.\nThis skips all variables after your first removal.</p>\n\n<p>and you don't have to do this</p>\n\n<pre><code>if(pos==-1)\n    return pos;\n</code></pre>\n\n<p>skip the <code>if</code> as it is not necessary and if at this position <code>pos</code>is not <code>-1</code>then you would have no return which would be UB I think.</p>\n"}], "owner": {"reputation": 1009, "user_id": 6845131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9800d8a818df2a7c3a0b87b3f89b35ae?s=128&d=identicon&r=PG&f=1", "display_name": "Vishist Varugeese", "link": "https://stackoverflow.com/users/6845131/vishist-varugeese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 41845604, "answer_count": 4, "score": -2, "last_activity_date": 1485329989, "creation_date": 1485328224, "question_id": 41845475, "link": "https://stackoverflow.com/questions/41845475/program-to-remove-the-duplicate-elements-from-an-array-in-c", "title": "Program to remove the duplicate elements from an array in c", "body": "<p>I've tried to write a program that removes the duplicate values from an array. I've partly managed to do so since my program is able to remove any ONE of the numbers which are repeated TWICE in the array. <strong>So the problem is that if a number is repeated thrice only one of the number is removed, i.e. the other two is still left in the array, also if more than one number is repeated even then only the number which comes first in the array is removed.</strong> I really cannot understand what's wrong with my code and why is it unable to remove numbers that are repeated more than two times. I've already surfed through the internet regarding this issue and though I got different ways to remove the duplicate elements, I still don't know what's wrong with my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint dup(int [],int);\nint main() \n{\n    int i,n,index,a[20];\n    printf(\"Enter n value \\n\");\n    scanf(\"%d\",&amp;n);\n    printf(\"Enter array values \\n\");\n    for(i=0;i&lt;n;++i)\n        scanf(\"%d\",&amp;a[i]);\n    for(i=0;i&lt;n;++i)\n    {\n        index=dup(a,n);\n        if(index==-1)\n        {\n            printf(\"No duplicate elements\");\n            break;\n        }\n        else\n        {\n            a[index]=0;\n            for(i=index;i&lt;n;i++)\n                a[i]=a[i+1];\n            n-=1;\n        }\n    }\n    printf(\"Output: \\n\");\n    for(i=0;i&lt;n;++i)\n        printf(\"%d\\n\",a[i]);\n\n    return (EXIT_SUCCESS);\n}\nint dup(int a[],int size)\n{\n    int i,j,pos=-1;\n    for(i=0;i&lt;size;i++)\n    {\n        for(j=i+1;j&lt;size;j++)\n        {\n            if(a[i]==a[j])\n            {\n                pos=j;\n                return pos;\n            }\n        }\n    }\n    if(pos==-1)\n        return pos;\n}\n</code></pre>\n\n<h1>OUTPUT</h1>\n\n<blockquote>\n  <p>Enter n value</p>\n  \n  <p>5</p>\n  \n  <p>Enter array values</p>\n  \n  <p>12</p>\n  \n  <p>24</p>\n  \n  <p>3</p>\n  \n  <p>12</p>\n  \n  <p>24</p>\n  \n  <p>Output:</p>\n  \n  <p>12</p>\n  \n  <p>24</p>\n  \n  <p>3</p>\n  \n  <p>24</p>\n</blockquote>\n\n<p>It clearly fails to remove the other repeated element \"24\". Also if a number was repeated thrice only one of the number would be removed.</p>\n"}, {"tags": ["c", "linux", "assembly", "x86-64"], "comments": [{"owner": {"reputation": 2043, "user_id": 7218127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFGPE.gif?s=128&g=1", "display_name": "Jim D.", "link": "https://stackoverflow.com/users/7218127/jim-d"}, "edited": false, "score": 1, "creation_date": 1485329549, "post_id": 41845065, "comment_id": 70875790, "body": "Your code actually works for me (on a different distro).  Your problem seems to be related to the relocation type of <code>hello.o</code>.  I would suggest adding the directive <code>default rel</code> to the top of <code>hello.asm</code> and see if that works or provides a different error.  Are you deliberately trying to use R_X86_64_32 relocation?"}, {"owner": {"reputation": 1024, "user_id": 5339728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87e9ae4adff4d75b1ad9233e04bc54?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Williamson", "link": "https://stackoverflow.com/users/5339728/sven-williamson"}, "reply_to_user": {"reputation": 2043, "user_id": 7218127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFGPE.gif?s=128&g=1", "display_name": "Jim D.", "link": "https://stackoverflow.com/users/7218127/jim-d"}, "edited": false, "score": 0, "creation_date": 1485330211, "post_id": 41845065, "comment_id": 70876081, "body": "@JimD. thank you very much for your help. I have edited my post to indicate new error message."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 2, "creation_date": 1485330852, "post_id": 41845065, "comment_id": 70876360, "body": "What happens if you build statically with <code>gcc -static hello.o</code>"}, {"owner": {"reputation": 1024, "user_id": 5339728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87e9ae4adff4d75b1ad9233e04bc54?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Williamson", "link": "https://stackoverflow.com/users/5339728/sven-williamson"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1485331467, "post_id": 41845065, "comment_id": 70876676, "body": "@MichaelPetch You got it !!! <code>gcc -lc -static hello.o</code> works perfectly (on the <code>debian stretch</code> machine). Incidentally, it also works on <code>debian jessie</code>. If you want to write an answer, I will gladly validate it. Any insight as to what may be happening is also very welcome (but i don&#39;t want to take too much of your time). Thank you very much !!!"}, {"owner": {"reputation": 2043, "user_id": 7218127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFGPE.gif?s=128&g=1", "display_name": "Jim D.", "link": "https://stackoverflow.com/users/7218127/jim-d"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1485331593, "post_id": 41845065, "comment_id": 70876755, "body": "OK, so now we made it past the data section, but have trouble with the text relocation. I like @MichaelPetch suggestion of trying an explicitly static build.  But why are you explicitly adding <code>-lc</code> when linking?  Maybe try just <code>gcc hello.o</code> and see if you get a different result?"}, {"owner": {"reputation": 1024, "user_id": 5339728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87e9ae4adff4d75b1ad9233e04bc54?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Williamson", "link": "https://stackoverflow.com/users/5339728/sven-williamson"}, "edited": false, "score": 0, "creation_date": 1485331966, "post_id": 41845065, "comment_id": 70876949, "body": "@JimD.good point the <code>-lc</code> option is unnecessary with <code>gcc</code> (got it as a habit from <code>ld</code>). However <code>gcc hello.o</code> leads to the same errors (with or without <code>default rel</code> on top of <code>hello.asm</code>), while <code>gcc -static hello.o</code> is successful."}], "answers": [{"comments": [{"owner": {"reputation": 1024, "user_id": 5339728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87e9ae4adff4d75b1ad9233e04bc54?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Williamson", "link": "https://stackoverflow.com/users/5339728/sven-williamson"}, "edited": false, "score": 0, "creation_date": 1485434625, "post_id": 41863079, "comment_id": 70928963, "body": "Hi Timothy, while <code>gcc -static hello.o</code> is successful, the linking command <code>gcc -fno-pie hello.o</code> fails on my <code>debian stretch</code> machine. What am I missing?"}, {"owner": {"reputation": 2978, "user_id": 904148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf9d0b9f5d61826525247bd5b79cdc0?s=128&d=identicon&r=PG", "display_name": "Timothy Baldwin", "link": "https://stackoverflow.com/users/904148/timothy-baldwin"}, "reply_to_user": {"reputation": 1024, "user_id": 5339728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87e9ae4adff4d75b1ad9233e04bc54?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Williamson", "link": "https://stackoverflow.com/users/5339728/sven-williamson"}, "edited": false, "score": 0, "creation_date": 1485462954, "post_id": 41863079, "comment_id": 70947132, "body": "Sorry, that should be <code>-no-pie</code> when linking, <code>-fno-pie</code> controls compiling."}, {"owner": {"reputation": 1024, "user_id": 5339728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87e9ae4adff4d75b1ad9233e04bc54?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Williamson", "link": "https://stackoverflow.com/users/5339728/sven-williamson"}, "edited": false, "score": 0, "creation_date": 1485463832, "post_id": 41863079, "comment_id": 70947599, "body": "Thank you Timothy, both <code>gcc -static hello.o</code> and <code>gcc -no-pie hello.o</code> work perfectly !"}, {"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1554999429, "post_id": 41863079, "comment_id": 97965227, "body": "Related: <a href=\"https://stackoverflow.com/questions/43367427/32-bit-absolute-addresses-no-longer-allowed-in-x86-64-linux\" title=\"32 bit absolute addresses no longer allowed in x86 64 linux\">stackoverflow.com/questions/43367427/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2978, "user_id": 904148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf9d0b9f5d61826525247bd5b79cdc0?s=128&d=identicon&r=PG", "display_name": "Timothy Baldwin", "link": "https://stackoverflow.com/users/904148/timothy-baldwin"}, "is_accepted": true, "score": 8, "last_activity_date": 1485462998, "last_edit_date": 1485462998, "creation_date": 1485384299, "answer_id": 41863079, "question_id": 41845065, "link": "https://stackoverflow.com/questions/41845065/x86-64-bits-assembly-linux-hello-world-linking-issue/41863079#41863079", "title": "X86 64-bits Assembly Linux &#39;Hello World&#39; linking issue", "body": "<p>GCC in Debian Stretch <a href=\"https://wiki.debian.org/Hardening/PIEByDefaultTransition\" rel=\"noreferrer\">defaults to building position independent executables</a>, to build executable linked to specific address as is traditional pass <code>-no-pie</code> to GCC.</p>\n\n<p>Alternatively specify the correct relocation type, I don't know how to do this in yasm.</p>\n"}], "owner": {"reputation": 1024, "user_id": 5339728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87e9ae4adff4d75b1ad9233e04bc54?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Williamson", "link": "https://stackoverflow.com/users/5339728/sven-williamson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1259, "favorite_count": 0, "accepted_answer_id": 41863079, "answer_count": 1, "score": 6, "last_activity_date": 1485462998, "creation_date": 1485326580, "last_edit_date": 1485336171, "question_id": 41845065, "link": "https://stackoverflow.com/questions/41845065/x86-64-bits-assembly-linux-hello-world-linking-issue", "title": "X86 64-bits Assembly Linux &#39;Hello World&#39; linking issue", "body": "<p>I am attempting to follow up on <a href=\"https://stackoverflow.com/questions/3376129/assembly-hello-world-question\">this thread</a> which unfortunately does not quite solve my problem. The code I am trying to run is as follows:</p>\n\n<pre><code>; File hello.asm\n\n        section .data\nmsg:    db      \"Hello World!\",0x0a,0\n\n        section .text\n        global main\n        extern printf\n\nmain:\n        push  rbp\n        mov   rbp, rsp\n        lea   rdi, [msg]  ; parameter 1 for printf\n        xor   eax, eax    ; 0 floating point parameter\n        call  printf\n        xor   eax, eax    ; returns 0\n        pop   rbp\n        ret\n</code></pre>\n\n<p>My system is debian stretch:</p>\n\n<pre><code>$ uname -a\nLinux &lt;host&gt; 4.8.0-1-amd64 #1 SMP Debian 4.8.7-1 (2016-11-13) x86_64 GNU/Linux\n</code></pre>\n\n<p>I am using the <code>yasm</code> assembler as follows:</p>\n\n<pre><code>$ yasm -f elf64 -g dwarf2 hello.asm\n</code></pre>\n\n<p>Because my entry point in the above source is <code>main</code> with a final <code>ret</code> instruction, I am guessing I need to link with <code>gcc</code> rather than <code>ld -e main</code>:</p>\n\n<pre><code>$ gcc -lc hello.o\n</code></pre>\n\n<p>However, I am getting the following error message:</p>\n\n<pre><code>/usr/bin/ld: hello.o: relocation R_X86_64_32 against `.data' can not be used when making a shared object; recompile with -fPIC\n/usr/bin/ld: final link failed: Nonrepresentable section on output\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>This error mentions something about recompiling with <code>-fPIC</code> but this is a <code>gcc</code> compiler option, not a valid option of the assembler <code>yasm</code>. So I don't know what to do here.</p>\n\n<p>Just for the sake of testing, I have attempted to link with <code>ld</code>:</p>\n\n<pre><code>$ ld -e main -lc hello.o\n</code></pre>\n\n<p>which is successful, but I obtain the same error as mentioned in the above thread when running:</p>\n\n<pre><code>$ ./a.out\nbash: ./a.out: No such file or directory       # The file *is* there ...\n</code></pre>\n\n<p>(following the answer of the thread, I have attempted to compare the <code>.so</code> library mentioned in the <code>ld</code> binary file with my system's library, and they are both <code>/lib64/ld-linux-x86-64.so.2</code>.)</p>\n\n<p>I have also attempted to replace the <code>main</code> entry point with <code>_start</code> (forgetting the issue of properly exiting the program for now) and link with <code>ld -lc hello.o</code> but I get the same error 'No such file or directory' as before. I will continue playing with this, but thought I would ask also.</p>\n\n<p>Any working suggestion (with <code>main</code> or <code>_start</code> , <code>gcc</code> or <code>ld</code>) would be warmly appreciated.</p>\n\n<p><strong>EDIT:</strong>\nAs suggested by Jim I have added <code>default rel</code> at the top of <code>hello.asm</code> and I obtain a different error message when linking with gcc (no change with <code>ld -e main -lc</code>)</p>\n\n<pre><code>$ gcc -lc hello.o\n\n/usr/bin/ld: hello.o: relocation R_X86_64_PC32 against symbol `printf@@GLIBC_2.2.5' can not be used when making a shared object; recompile with -fPIC\n/usr/bin/ld: final link failed: Bad value\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p><strong>EDIT2:</strong> This post relates to a failure on <code>debian stretch</code>:</p>\n\n<pre><code>Linux: 4.8.0-1-amd64 #1 SMP Debian 4.8.7-1 (2016-11-13) x86_64 GNU/Linux\nyasm: 1.3.0\ngcc: (Debian 6.2.1-5) 6.2.1 20161124\nld: GNU ld (GNU Binutils for Debian) 2.27.51.20161220\n</code></pre>\n\n<p>Following on Jim's comment <strong>I have just tested the same code on</strong> <code>debian jessie</code> <strong>which works perfectly fine</strong> with <code>gcc -lc hello.o</code> and the following versions:</p>\n\n<pre><code>Linux: 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u2 (2016-10-19) x86_64 GNU/Linux\nyasm: 1.2.0\ngcc: (Debian 4.9.2-10) 4.9.2\nld: GNU ld (GNU Binutils for Debian) 2.25\n</code></pre>\n\n<p><strong>EDIT 3:</strong> Pending a formal answer from Michael Petch: <strong>issue resolved with</strong> <code>gcc -static hello.o</code></p>\n"}, {"tags": ["c", "winapi", "dialog"], "comments": [{"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 1, "creation_date": 1485331906, "post_id": 41844734, "comment_id": 70876912, "body": "Try WS_OVERLAPPED(WINDOW) instead of WS_POPUP"}, {"owner": {"reputation": 4685, "user_id": 1267466, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/S9Xba.jpg?s=128&g=1", "display_name": "vexe", "link": "https://stackoverflow.com/users/1267466/vexe"}, "reply_to_user": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1485398396, "post_id": 41844734, "comment_id": 70913782, "body": "@VuVirt That didn&#39;t do much. andlabs&#39;s answer is correct!"}], "answers": [{"comments": [{"owner": {"reputation": 4685, "user_id": 1267466, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/S9Xba.jpg?s=128&g=1", "display_name": "vexe", "link": "https://stackoverflow.com/users/1267466/vexe"}, "edited": false, "score": 0, "creation_date": 1485398249, "post_id": 41854315, "comment_id": 70913746, "body": "Solved! Thanks for the answer. That was actually my intention. What I intended to say is: it&#39;s handled (true) by default, unless I come across a command that I don&#39;t care about. But that doesn&#39;t consider &#39;other&#39; type of messages besides WM_COMMAND."}, {"owner": {"reputation": 4685, "user_id": 1267466, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/S9Xba.jpg?s=128&g=1", "display_name": "vexe", "link": "https://stackoverflow.com/users/1267466/vexe"}, "edited": false, "score": 0, "creation_date": 1485398615, "post_id": 41854315, "comment_id": 70913839, "body": "I&#39;m not sure what you mean with WM_INITDIALOG. What I&#39;m doing now is, I set <code>Result</code> to FALSE by default, and TRUE when I handle my command cases. Even if I leave the <code>WM_INITDIALOG</code> empty (i.e. still return FALSE), or set it to TRUE, not much is affected. <a href=\"https://stackoverflow.com/posts/41854315/edit\">Edit</a> Reading the docs, it seems to be related to Keyboard Focus, if I return TRUE, I will get default Keyboard focus. Is that it or is there something else?"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "reply_to_user": {"reputation": 4685, "user_id": 1267466, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/S9Xba.jpg?s=128&g=1", "display_name": "vexe", "link": "https://stackoverflow.com/users/1267466/vexe"}, "edited": false, "score": 0, "creation_date": 1485399268, "post_id": 41854315, "comment_id": 70913980, "body": "Yes, that is it. Since you aren&#39;t adjusting keyboard focus yet, you should leave it at the default."}], "tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": true, "score": 3, "last_activity_date": 1485355130, "creation_date": 1485355130, "answer_id": 41854315, "question_id": 41844734, "link": "https://stackoverflow.com/questions/41844734/dialogbox-not-rendering-correctly/41854315#41854315", "title": "DialogBox not rendering correctly?", "body": "<p>Your dialog procedure unconditionally returns <code>TRUE</code> to every message, which means \"I handled the message, you don't have to do anything else\". Your dialog procedure does so by setting <code>Result</code> to <code>TRUE</code> at the top of the function and then never changing it (unless you get a <code>WM_COMMAND</code> from an unknown control). This is wrong; you need to return <code>FALSE</code> if you don't handle a message yourself.</p>\n\n<p><code>WM_INITDIALOG</code> is one of a handful of messages that return their values directly to the dialog system instead of through <code>DWLP_MSGRESULT</code>. In that case and that case only, you do need to return <code>TRUE</code> (unless you manually adjusted tab stops).</p>\n"}], "owner": {"reputation": 4685, "user_id": 1267466, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/S9Xba.jpg?s=128&g=1", "display_name": "vexe", "link": "https://stackoverflow.com/users/1267466/vexe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41854315, "answer_count": 1, "score": 0, "last_activity_date": 1485355130, "creation_date": 1485325086, "last_edit_date": 1485325421, "question_id": 41844734, "link": "https://stackoverflow.com/questions/41844734/dialogbox-not-rendering-correctly", "title": "DialogBox not rendering correctly?", "body": "<p>I'm not sure what I'm doing wrong, but here's how it looks (there's no close button, no caption bar):</p>\n\n<p><a href=\"https://i.stack.imgur.com/t2yMf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t2yMf.png\" alt=\"enter image description here\"></a></p>\n\n<p>It looks as if it's not updating/ticking/repainted.</p>\n\n<p>Here's my Resource.rc file:</p>\n\n<pre><code>#include \"resource.h\"\n#include \"windows.h\"\n\n#define IDC_STATIC -1\n\nID_ICON_MAIN ICON \"Smile.ico\"\n\nID_DIALOG_ABOUT DIALOG 0, 0, 240, 70\nSTYLE DS_MODALFRAME | WS_POPUP | WS_CAPTION | WS_SYSMENU | WS_BORDER\nCAPTION \"About\"\nFONT 8, \"Terminal\"\n{\n        DEFPUSHBUTTON   \"&amp;OK\", IDOK, 174, 18, 50, 14\n        PUSHBUTTON      \"&amp;Cancel\", IDCANCEL, 174, 36, 50, 14\n        GROUPBOX        \"About this program...\", IDC_STATIC, 7, 7, 225, 52\n        CTEXT           \"An example program\\r\\nBy vexe\", IDC_STATIC, 16, 18, 144, 33\n}\n</code></pre>\n\n<p>Changing the styles, caption, font size, etc doesn't change anything. Note that I'm using Windows Classic Theme, changing to the standard Windows 7 doesn't help either so it's not a theme issue.</p>\n\n<p>Here's my window code:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include \"resource.h\"\n\nINT_PTR WINAPI DialogWndProc(HWND Window, UINT Message,\n                             WPARAM WParam, LPARAM LParam)\n{\n    INT_PTR Result = TRUE;\n\n    switch (Message)\n    {\n        case WM_INITDIALOG:\n        {\n            // UpdateWindow(Window); // Doesn't really help. Taking out the case didn't do anything either\n        }\n        break;\n\n        case WM_COMMAND:\n        {\n            int Command = LOWORD(WParam);\n            switch(Command)\n            {\n                case IDOK:\n                {\n                    EndDialog(Window, IDOK);\n                }\n                break;\n\n                case IDCANCEL:\n                {\n                    EndDialog(Window, IDCANCEL);\n                }\n                break;\n\n                default:\n                {\n                    Result = FALSE;\n                }\n                break;\n            }\n        }\n        break;\n    }\n\n    return(Result);\n}\n\nLRESULT WINAPI MainWndProc(HWND Window, UINT Message, \n                           WPARAM WParam, LPARAM LParam)\n{\n    LRESULT Result = 0;\n\n    switch (Message)\n    {\n        // (Causes GetMessage to return false)\n        case WM_CLOSE:\n        {\n            DestroyWindow(Window);\n        }\n        break;\n\n        case WM_DESTROY:\n        {\n            PostQuitMessage(0);\n        }\n        break;\n\n        case WM_COMMAND:\n        {\n            int Command = LOWORD(WParam);\n            switch (Command)\n            {\n                case ID_MENU_FILE_EXIT:\n                {\n                    PostMessage(Window, WM_QUIT, 0, 0);\n                }\n                break;\n\n                case ID_MENU_HELP_ABOUT:\n                {\n                    int Choice = DialogBox(0, MAKEINTRESOURCE(ID_DIALOG_ABOUT), Window, DialogWndProc);\n                    switch (Choice)\n                    {\n                        case IDOK: MessageBox(Window, \"Okay!\", \"OK\", MB_OK | MB_ICONINFORMATION); break;\n                        case IDCANCEL: MessageBox(Window, \"Canceled!\", \"Cancel\", MB_OK | MB_ICONINFORMATION); break;\n                    }\n                }\n                break;\n            }\n        }\n        break;\n\n        case WM_CREATE:\n        {\n            HMENU Menu;\n            HMENU SubMenu;\n\n            // Create the main menu\n            Menu = CreateMenu();\n\n            // Create submenus\n            {\n                SubMenu = CreatePopupMenu();\n                AppendMenu(SubMenu, MF_STRING, ID_MENU_FILE_EXIT, \"E&amp;xit\");\n                AppendMenu(Menu, MF_STRING | MF_POPUP, (UINT_PTR)SubMenu, \"&amp;File\");\n\n                SubMenu = CreatePopupMenu();\n                AppendMenu(SubMenu, MF_STRING, ID_MENU_HELP_ABOUT, \"&amp;About\");\n                AppendMenu(Menu, MF_STRING | MF_POPUP, (UINT_PTR)SubMenu, \"&amp;Help\");\n            }\n\n            // Set the menu on the window\n            SetMenu(Window, Menu);\n        }\n        break;\n\n        default:\n        {\n            Result = DefWindowProc(Window, Message, WParam, LParam);\n        }\n    }\n\n    return(Result);\n}\n\nint CALLBACK WinMain(HINSTANCE Instance, HINSTANCE Previous, LPSTR CommandLine, int CmdShow)\n{\n    // Create window class\n    WNDCLASSEX WindowClass = {0};\n    WindowClass.cbSize = sizeof(WNDCLASSEX);\n    WindowClass.style = CS_HREDRAW | CS_VREDRAW;\n    WindowClass.lpfnWndProc = (WNDPROC)MainWndProc;\n    WindowClass.hInstance = Instance;\n    WindowClass.hbrBackground = (HBRUSH)GetStockObject(BLACK_BRUSH);\n    WindowClass.lpszMenuName = MAKEINTRESOURCE(ID_MENU_MAIN);\n    WindowClass.lpszClassName = \"SaedoGames_0\";\n    WindowClass.hIcon = LoadIcon(Instance, MAKEINTRESOURCE(ID_ICON_MAIN));\n    WindowClass.hIconSm = (HICON)LoadImage(0, \"Smile.ico\", IMAGE_ICON, 16, 16, LR_LOADFROMFILE);\n    RegisterClassEx(&amp;WindowClass);\n\n    // Create window\n    HWND Window = CreateWindowEx(WS_EX_OVERLAPPEDWINDOW, \"SaedoGames_0\", \"Test Window\",\n        WS_OVERLAPPEDWINDOW | WS_VISIBLE,\n        CW_USEDEFAULT, CW_USEDEFAULT,\n        640, 480,\n        0, 0,\n        Instance, 0\n    );\n\n    // Show window\n    ShowWindow(Window, CmdShow);\n    UpdateWindow(Window);\n\n    // Message loop\n    MSG Msg;\n    while (GetMessage(&amp;Msg, Window, 0, 0) &gt; 0)\n    {\n        TranslateMessage(&amp;Msg);\n        DispatchMessage(&amp;Msg);\n    }\n\n    return(0);\n}\n</code></pre>\n\n<p>Pretty sure I'm missing a simple function call but just not sure what it is. What am I missing?</p>\n"}, {"tags": ["c", "opengl"], "answers": [{"tags": [], "owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": false, "score": 1, "last_activity_date": 1485333534, "creation_date": 1485333534, "answer_id": 41846844, "question_id": 41844726, "link": "https://stackoverflow.com/questions/41844726/cube-faces-not-being-rendered-correctly-in-window/41846844#41846844", "title": "cube faces not being rendered correctly in window", "body": "<p>All your matrices seems to be wrong.</p>\n\n<p><code>rotationMat</code> is not a valid rotation matrix. All of them have in common that the row and the column that corresponds to the rotation axis are untouched. (x-rotation has first row and first column set to <code>[1,0,0,0]</code>, y-rotation has second row and second column set to <code>[0,1,0,0]</code>). In your matrix the second row and the third column are unset. <a href=\"https://en.wikipedia.org/wiki/Rotation_matrix#In_three_dimensions\" rel=\"nofollow noreferrer\">Source</a></p>\n\n<p><code>transMat</code> is not definitely a translation matrix although the usage looks as if it it should be one. Currently a scaling along the z-axis is performed.</p>\n\n<p><code>projMat</code> is completely wrong. Currently this is some kind of weird orthographic projection but somehow projects the x and y axis depending on the far-plane value? If you wanted to write a perspective projection matrix, then <code>zFar</code> in the first two rows should have been <code>cotan(field_of_view / 2)</code> and the forth line should be <code>[0, 0, -1, 0]</code>. <a href=\"https://wiki.delphigl.com/index.php/gluPerspective\" rel=\"nofollow noreferrer\">Source</a></p>\n\n<p>Since you seem to have a lot of problems with writing correct matrices, I would highly recommend you to use a library for that (for example <a href=\"http://glm.g-truc.net/0.9.8/index.html\" rel=\"nofollow noreferrer\">glm</a>).</p>\n\n<p>Additionally, you are setting uniforms that don't exist in your shader (for example <code>translationMatrix</code>), you check in the setup code whether these uniforms exist, but then try to set them in <code>display</code> regardless of this check, which should result in an OpenGL error (check <code>glGetError()</code>). </p>\n"}], "owner": {"reputation": 1, "user_id": 7467421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2539ce901adbb6900302bed15ac83e?s=128&d=identicon&r=PG&f=1", "display_name": "poigre", "link": "https://stackoverflow.com/users/7467421/poigre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485333534, "creation_date": 1485325057, "question_id": 41844726, "link": "https://stackoverflow.com/questions/41844726/cube-faces-not-being-rendered-correctly-in-window", "title": "cube faces not being rendered correctly in window", "body": "<p>i'm trying to make a simple program that rotates a cube around the window. when i run it, it looks like the cube faces are being rendered in the correct order at first, but once they spin around to the back they show through the front instead of the other ones. I am using glEnable(GL_DEPTH_TEST), glenable(GL_CULL_FACE) and glcullface(GL_BACK) which i thought would take care of the depth testing but it's still not working. here is my script,`</p>\n\n<pre><code>int windowwidth = 1920;\nint windowheight = 1080;\nGLfloat aspectratio = 16 / 9.0;\ndouble horizontalposition = 0;\ndouble verticalposition = 0;\ndouble depthposition = 0;\n\nGLfloat projTop = 1;\nGLfloat projBottom = 0;\nGLfloat floatOne = 1.0;\nGLfloat oneFourth = 1.0 / 4;\nGLfloat projLeft = 0;\nGLfloat projRight = 1;\nGLfloat zNear = .1;\nGLfloat zFar = 1;\nGLfloat zRange = zNear - zFar;\nGLuint puddletexture;\nGLuint sampler = 0;\nGLuint samplerUniform;\nGLuint shaderProgram;\nGLuint textureunit = 0;\nGLuint positionUniform, colourUniform,  rotationViewUniform, projectionUniform,translationUniform, rotationUniform, timeUniform, transformUniform;\nGLuint colourAttribute,secondColourAttribute, positionAttribute, textureAttribute, indexAttribute;\nGLuint vertexArrayObject,\nvertexBuffer;\nGLuint vao, vbo[3];\nGLuint triangleVao, triangleVbo[2];\nGLuint elementbuffer;\nGLuint triangleArrayObject, triangleVertexBuffer;\n\nGLfloat diamond[] = {\n    -1,  1,  1, // vertex[0]\n    1,  1,  1, // vertex[1]\n    1, -1,  1, // vertex[2]\n    -1, -1,  1, // vertex[3]\n    -1,  1, -1, // vertex[4]\n    1,  1, -1, // vertex[5]\n    1, -1, -1, // vertex[6]\n    -1, -1, -1, // vertex[7]\n};\n\nGLuint cubeindicies[] = {\n    0, 1, 2, 2, 3, 0, // front face\n    3, 2, 6, 6, 7, 3, // top face\n    7, 6, 5, 5, 4, 7, // back face\n    4, 0, 3, 3, 7, 4, // left face\n    0, 1, 5, 5, 4, 0, // bottom face\n    1, 5, 6, 6, 2, 1,\n};\n\n\nGLfloat colors[4][4] = {\n    { 1.0,  0.0,  0.0, 0.0}, /* Red */\n    { 1.0,  1.0,  0.0, 0.0}, /* Green */\n    { 0.0,  0.0,  1.0, 0.0}, /* Blue */\n    { 1.0,  1.0,  1.0, 0.0},\n\n};\n\nGLfloat picturetexturecoordinates[] = {\n    0,1,0,\n    0,0,0,\n    1,0,0,\n    1,1,0,\n};\n\n\n\nGLuint loadTexture(Image* image) {\n    GLuint textureId;\n    glGenTextures(1, &amp;textureId); //Make room for our texture\n    glBindTexture(GL_TEXTURE_2D, textureId); //Tell OpenGL which texture to edit\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);\n    glTexImage2D(GL_TEXTURE_2D,                //Always GL_TEXTURE_2D\n        0,                            //0 for now\n        GL_RGB,                       //Format OpenGL uses for image\n        image-&gt;width, image-&gt;height,  //Width and height\n        0,                            //The border of the image\n        GL_RGB, //GL_RGB, because pixels are stored in RGB format\n        GL_UNSIGNED_BYTE, //GL_UNSIGNED_BYTE, because pixels are stored\n                          //as unsigned numbers\n        image-&gt;pixels);               //The actual pixel data\n    return textureId; //Returns the id of the texture\n}\n\nvoid reshape(int w, int h) {\n    glViewport(0, 0, w, h);\n    gluPerspective(45.0f, (float)w / (float)h, 1.0f, 100.0f);\n\n    windowwidth = glutGet(GLUT_WINDOW_WIDTH);\n    windowheight = glutGet(GLUT_WINDOW_HEIGHT);\n    aspectratio = (double)windowwidth / windowheight;\n}\n\nvoid animate() {\n    glutPostRedisplay();\n}\n\nvoid visible(int vis) {\n    if (vis == GLUT_VISIBLE)\n        glutIdleFunc(animate);\n    else\n        glutIdleFunc(0);\n}\n\nvoid loadShader();\nvoid display();\n\n\nvoid loadShader() {\n    shaderProgram = InitShader(\"beelsebob.vert\", \"beelsebob.frag\", \"fragColour\");\n    positionUniform = glGetUniformLocation(shaderProgram, \"p\");\n    if (positionUniform &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'p' uniform\" &lt;&lt; std::endl;\n    }\n    colourUniform = glGetUniformLocation(shaderProgram, \"c\");\n    if (colourUniform &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'c' uniform\" &lt;&lt; std::endl;\n    }\n    timeUniform = glGetUniformLocation(shaderProgram, \"timer\");\n    if (timeUniform &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'timer' uniform\" &lt;&lt; std::endl;\n    }\n    samplerUniform = glGetUniformLocation(shaderProgram, \"textSampler\");\n    if (samplerUniform &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'textSampler' uniform\" &lt;&lt; std::endl;\n    }\n    projectionUniform = glGetUniformLocation(shaderProgram, \"projectionMatrix\");\n    if (projectionUniform &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'projectMatrix' uniform\" &lt;&lt; std::endl;\n    }\n    rotationViewUniform = glGetUniformLocation(shaderProgram, \"rotationViewMatrix\");\n    if (rotationViewUniform &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'rotationViewMatrix' uniform\" &lt;&lt; std::endl;\n    }\n    transformUniform = glGetUniformLocation(shaderProgram, \"transformMatrix\");\n    if (transformUniform &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'transformMatrix' uniform\" &lt;&lt; std::endl;\n    } \n    translationUniform = glGetUniformLocation(shaderProgram, \"translationMatrix\");\n    if (translationUniform &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'translationMatrix' uniform\" &lt;&lt; std::endl;\n    }\n    translationUniform = glGetUniformLocation(shaderProgram, \"translationMatrix\");\n    if (translationUniform &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'translationMatrix' uniform\" &lt;&lt; std::endl;\n    }\n    colourAttribute = glGetAttribLocation(shaderProgram, \"colour\");\n    if (colourAttribute &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'colour' attribute.\" &lt;&lt; std::endl;\n    }\n    secondColourAttribute = glGetAttribLocation(shaderProgram, \"secondColour\");\n    if (secondColourAttribute &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'secondColour' attribute.\" &lt;&lt; std::endl;\n    }\n    positionAttribute = glGetAttribLocation(shaderProgram, \"position\");\n    if (positionAttribute &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'position' attribute.\" &lt;&lt; std::endl;\n    }\n    textureAttribute = glGetAttribLocation(shaderProgram, \"textcoord\");\n    if (textureAttribute &lt; 0) {\n        std::cerr &lt;&lt; \"Shader did not contain the 'textcoord' attribute.\" &lt;&lt; std::endl;\n    }\n\n}\n\n\nvoid display() {\n    glClearColor(0.0, 0.0, .2, 1.0);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glEnable(GLUT_MULTISAMPLE);\n    glLoadIdentity();\n    const float timeScale = 0.0008f;\n\n    glUseProgram(shaderProgram);\n    GLfloat timeValue = glutGet(GLUT_ELAPSED_TIME)*timeScale;\n    vec3 p3(.5f*sin(timeValue)  ,0  , 0.5f*cosf(timeValue));\n    //vec4 c4(.5f*sinf(timeValue), .1f*sinf(timeValue), 9*cosf(timeValue), 1.0);\n    vec4 c4(.7f, .5f, 0.01, 0.0);\n    mat4 rotationMat(\n    { cos(timeValue), sin(timeValue), 0,0 },\n\n    { 0,1,0,0 },\n    { -sin(timeValue), cos(timeValue), 1,0 },\n    { 0,0,0,1 }\n    );\n    mat4 transMat(\n    {1,0,0,0},\n    {0,1,0,0},\n    {0,0,(GLfloat)(windowheight*1.0/windowwidth),0},\n    {0,0,0,1}\n    );\n    mat4 projMat(\n    {zFar/aspectratio, 0, 0, 0 },\n    { 0, zFar, 0, 0 },\n    { 0,0, (zFar+zNear)/(zNear-zFar), (2*zFar*zNear)/(zNear-zFar) },\n    { 0,0,0,1}\n    );\n\n    mat4 completeTransformMatrix = projMat*transMat*rotationMat;\n    glUniformMatrix4fv(projectionUniform, 1, GL_FALSE, projMat);\n    glUniformMatrix4fv(rotationViewUniform, 1, GL_FALSE, rotationMat);\n    glUniformMatrix4fv(translationUniform, 1, GL_FALSE, transMat);\n    glUniformMatrix4fv(transformUniform, 1, GL_FALSE, completeTransformMatrix);\n    glUniform3fv(positionUniform,1,(const GLfloat*)&amp;p3);\n    glUniform4fv(colourUniform, 1, (const GLfloat*)&amp;c4);\n    glUniform1i(samplerUniform, 0);\n    glUniform1fv(timeUniform, 1, (const GLfloat*)&amp;timeValue);\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, squareTexture);\n    glGenSamplers(1, &amp;sampler);\n    glSamplerParameteri(sampler, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glSamplerParameteri(sampler, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glBindSampler(0, sampler);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vbo[3]);\n    glBindVertexArray(vao);\n    glDrawElements(GL_TRIANGLES, sizeof(cubeindicies)/sizeof(GLuint), GL_UNSIGNED_INT, 0);\n    glBindVertexArray(0);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    glUseProgram(0);\n    glutSwapBuffers();\n\n}\n\n\ndouble r = 0;\nvoid loadBufferData() {\n    glEnable(GL_DEPTH_TEST);\n    glEnable(GL_CULL_FACE);\n    glCullFace(GL_BACK);\n    glEnable(GL_LIGHTING);\n    glEnable(GL_LIGHT0);\n    glEnable(GL_NORMALIZE);\n    glEnable(GL_COLOR_MATERIAL);\n    glEnable(GLUT_MULTISAMPLE);\n    glEnable(GL_PERSPECTIVE_CORRECTION_HINT);\n    Image* squareImage = loadBMP(\"puddletexture.bmp\");\n    squareTexture = loadTexture(squareImage);\n    delete squareImage;\n\n    glGenVertexArrays(1, &amp;vao);\n    glBindVertexArray(vao);\n    glGenBuffers(4, vbo);\n\n    glEnableVertexAttribArray(positionAttribute);\n    glBindBuffer(GL_ARRAY_BUFFER, vbo[0]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(diamond), diamond, GL_STATIC_DRAW);\n    glVertexAttribPointer(positionAttribute, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n    glEnableVertexAttribArray(colourAttribute);\n    glBindBuffer(GL_ARRAY_BUFFER, vbo[1]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(colors), colors, GL_STATIC_DRAW);\n    glVertexAttribPointer(colourAttribute, 4, GL_FLOAT, GL_FALSE, 0, 0);\n\n    glEnableVertexAttribArray(textureAttribute);\n    glBindBuffer(GL_ARRAY_BUFFER, vbo[2]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(picturetexturecoordinates), picturetexturecoordinates, GL_STATIC_DRAW);\n    glVertexAttribPointer(textureAttribute, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n    glEnableVertexAttribArray(indexAttribute);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vbo[3]);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(cubeindicies), cubeindicies, GL_STATIC_DRAW);\n\n}\n\n\nint main(int argc, char* argv[])\n{\n    glutInit(&amp;argc, argv);\n\n    glutInitContextVersion(3, 2);\n    glutInitContextProfile(GLUT_CORE_PROFILE);\n    glutSetOption(\n        GLUT_ACTION_ON_WINDOW_CLOSE,\n        GLUT_ACTION_GLUTMAINLOOP_RETURNS\n    );\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH | GLUT_MULTISAMPLE);\n    glutCreateWindow(\"02561\");\n    glutDisplayFunc(display);\n    glutReshapeFunc(reshape);\n    glutVisibilityFunc(visible);\n    glutIdleFunc(animate);\n    glutReshapeWindow(600, 400);\n\n    glewExperimental = GL_TRUE;\n    GLint GlewInitResult = glewInit();\n    if (GlewInitResult != GLEW_OK) {\n        printf(\"ERROR: %s\\n\", glewGetErrorString(GlewInitResult));\n    }\n\n    loadShader();\n    loadBufferData();\n    glutMainLoop();\n}\n</code></pre>\n\n<p>vertex shader: </p>\n\n<pre><code>    #version 330\n\nuniform vec3 p;\nuniform mat4 transformMatrix;\nuniform vec4 c;\nin vec4 position;\nin vec4 colour;\nout vec4 colourV;\nin vec4 secondColour;\nout vec4 secondColourV;\nin vec2 textcoord;\nout vec2 textcoordV;\n\n\nvoid main (void)\n{\n    colourV = colour;\n    colourV += c;\n    textcoordV = textcoord;\n    gl_Position = transformMatrix*position + vec4(p, 3.0);\n}\n</code></pre>\n\n<p>and fragment shader: </p>\n\n<pre><code>    #version 330\n\nuniform sampler2D textSampler;\nin vec4 colourV;\nin vec4 secondColourV;\nout vec4 fragColour;\nin vec2 textcoordV;\nout vec2 fragTexture;\nvoid main(void)\n{\n    fragColour = colourV*texture(textSampler, textcoordV);\n}\n</code></pre>\n\n<p>here is an image that shows a couple of frames in the window when i run it,</p>\n\n<p><a href=\"https://i.stack.imgur.com/ejmm4.png\" rel=\"nofollow noreferrer\">windowframes</a>\nso now i'm stuck, does anyone know what could be the problem?</p>\n"}]