[{"tags": ["c"], "comments": [{"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1541030903, "post_id": 53093454, "comment_id": 93083839, "body": "re. <code>NULL</code> children causing errors, you need to remove references to deallocated nodes. If you have only links from parent to child node, this means your recursive deallocation should inform the parent to remove the link when you deallocate a node."}, {"owner": {"reputation": 1, "user_id": 10588545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yfk5-ShgTNs/AAAAAAAAAAI/AAAAAAAAAH0/3UtKApAPHC8/photo.jpg?sz=128", "display_name": "Simon Besozzi", "link": "https://stackoverflow.com/users/10588545/simon-besozzi"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1541031059, "post_id": 53093454, "comment_id": 93083869, "body": "The method to free the memory isn&#39;t the problem. When I debug, the memory is already corrupted on the very first iteration of the algorithm"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1541031530, "post_id": 53093454, "comment_id": 93083976, "body": "Regarding which node is the &quot;root&quot;, that would be the AST node that is child to no one, but without knowing what your AST looks like or how it&#39;s stored, its pure guesswork how you would determine that; <i>no one</i> knows your AST better than <i>you</i> do, since you wrote it."}, {"owner": {"reputation": 1, "user_id": 10588545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yfk5-ShgTNs/AAAAAAAAAAI/AAAAAAAAAH0/3UtKApAPHC8/photo.jpg?sz=128", "display_name": "Simon Besozzi", "link": "https://stackoverflow.com/users/10588545/simon-besozzi"}, "edited": false, "score": 0, "creation_date": 1541031846, "post_id": 53093454, "comment_id": 93084041, "body": "My question is basically; how can I store in a global variable the address of a value that is generated dynamically, so that I can point to it later in the program?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1541032075, "post_id": 53093454, "comment_id": 93084084, "body": "The answer to that question is &quot;yes&quot;, and based on what you write above you even did it already. Your actual problem seems to be the memory corruption, e.g., you might be allocating too little space for your nodes or leaving pointers to deallocated nodes."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1541032459, "post_id": 53093454, "comment_id": 93084149, "body": "Anyway, there isn&#39;t really sufficient information to help you here. Perhaps try to create a minimal example that demonstrates the problem, e.g., only create one node without any actual parsing, such as by implementing the two functions in <code>root = createAST(); parseAST(root);</code>"}], "owner": {"reputation": 1, "user_id": 10588545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yfk5-ShgTNs/AAAAAAAAAAI/AAAAAAAAAH0/3UtKApAPHC8/photo.jpg?sz=128", "display_name": "Simon Besozzi", "link": "https://stackoverflow.com/users/10588545/simon-besozzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541030148, "creation_date": 1541030148, "question_id": 53093454, "link": "https://stackoverflow.com/questions/53093454/how-to-point-to-the-root-of-a-dynamically-generated-tree-in-c", "title": "How to point to the root of a dynamically generated tree in C?", "body": "<p>I'm writing a small compiler in C for a homework and I need to free the memory allocated for the AST nodes in case of a syntax error or if the program runs out of memory.</p>\n\n<p>The AST is generated dynamically, the nodes are defined as structs that hold the kind of node (program, var, cst, expression, statement, assignment, etc.), their values and their children.</p>\n\n<p>I wrote a recursive method that parses the tree and then frees the nodes one by one. But in order for that to work, I need the first node, as in, the root of the tree. Is there any way I can have a global variable that stores the address to that first dynamically generated node? I already tried declaring a *node pointer 'start', and when the first node 'x' is created, adding 'start = x' but that leads to problems down the road (every NULL children in the tree becomes a BAD_ACCESS error)</p>\n\n<p>So in short, I need to be able to reference the first node created later in the program. Help?</p>\n"}, {"tags": ["c++", "c", "fpga", "specifications"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1541029359, "post_id": 53093362, "comment_id": 93083532, "body": "No, I don&#39;t believe that the C++ Standard guarantees any such thing. You might want to read up on the <code>volatile</code> qualifier, but I don&#39;t really see this as relevant."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1541029359, "post_id": 53093362, "comment_id": 93083534, "body": "I think <code>volatile</code> <i>might</i> guarantee this. But otherwise I&#39;m pretty sure it doesn&#39;t, since it has no effect on the abstract machine."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1541030258, "post_id": 53093362, "comment_id": 93083698, "body": "jeez, this got downvoted. Its a great question. Maybe the question would be better stated as &#39;best practice for reading and writing locations mapped to physical peripherals&#39;"}, {"owner": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1541030441, "post_id": 53093362, "comment_id": 93083735, "body": "@pm100, changing the title would be good, but I&#39;m more interested in the best practices for designing registers into a peripheral.  Thanks for the suggestion"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1541032694, "post_id": 53093362, "comment_id": 93084188, "body": "There is standard extension <a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1021.pdf\" rel=\"nofollow noreferrer\">iohw.h</a>, but I haven&#39;t seen an implementation that implements it... As it is a standard, if you are designing your own interface, it&#39;s better to follow any kind of specification. In my practice with stm32 I use <a href=\"http://www.keil.com/pack/doc/CMSIS/Driver/html/index.html\" rel=\"nofollow noreferrer\">keil&#39;s cmsis</a> and they use macros and access bits with bit operations <code>&amp;</code> |`,  for example <a href=\"https://github.com/micropython/stm32lib/blob/vendor/CMSIS/STM32F0xx/Include/stm32f091xc.h#L707\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "edited": false, "score": 0, "creation_date": 1541030096, "post_id": 53093424, "comment_id": 93083657, "body": "With no guarantees I wonder how embedded systems <i>ever</i> end up working."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "edited": false, "score": 0, "creation_date": 1541030240, "post_id": 53093424, "comment_id": 93083694, "body": "@NXT There are several methods. The most common is to use a function or macro provided by the platform, typically through inline assembly code, that&#39;s guaranteed to provide the behavior you want. Some platforms have platform-specific guarantees about <code>volatile</code> or special types that are &quot;super-volatile&quot; and guarantee particular things you need. Obviously, people want to make usable platforms so they try to provide you easy ways to get the guaranteed semantics you&#39;re likely to need. (If this is reasonable on your platform, your compiler should provide you easy ways to get it.)"}, {"owner": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "edited": false, "score": 0, "creation_date": 1541030767, "post_id": 53093424, "comment_id": 93083811, "body": "make sense, I should write a macro to handle both read and write cases when given a random pointer.  Actually I&#39;m starting to think I should just give up on the idea of combining the read/write semantics into a single register location."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1541030495, "last_edit_date": 1541030495, "creation_date": 1541029801, "answer_id": 53093424, "question_id": 53093362, "link": "https://stackoverflow.com/questions/53093362/best-practices-for-designing-registers-into-a-peripheral-that-will-be-accessed-b/53093424#53093424", "title": "Best practices for designing registers into a peripheral that will be accessed by C and C++?", "body": "<p>There is really no such thing as a write to a memory location in either C or C++. There's just code and memory with the compiler deciding whether to read or write to memory to make the code do what the code is required to do as it thinks is necessary. Your platform <em>might</em> make <code>volatile</code> do what you want or it might not, but that's a platform-specific question.</p>\n\n<p>If you write <code>j=1;</code> and you have a platform where constants other than zero are expensive but increments are cheap, the implementation is free to treat that as <code>j=0; ++j;</code> if it wants.</p>\n\n<p>There have even been real world cases where operations that looked like pure reads actually wrote to memory. Nothing in either the C nor C++ standards prohibit this.</p>\n\n<p>You can check your compiler's documentation around <code>volatile</code> to see if it does what you need. If not, look into inline assembly code. If this is something sensible to do on your platform, a decent compiler should provide a good way to do it.</p>\n"}], "owner": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541030495, "creation_date": 1541029210, "last_edit_date": 1541030481, "question_id": 53093362, "link": "https://stackoverflow.com/questions/53093362/best-practices-for-designing-registers-into-a-peripheral-that-will-be-accessed-b", "title": "Best practices for designing registers into a peripheral that will be accessed by C and C++?", "body": "<p>I am designing a serial port peripheral in an FPGA that will have memory mapped registers visible to my processor.</p>\n\n<p>Does C/C++ (I use both) guarantee that writing to a memory location will not also result in a read from the same location?</p>\n\n<p>I ask because the read would read-back different data than was just written, and because the read has side effects (it pulls the next byte from the queue).</p>\n\n<p>I am trying to share a single memory location for TX and RX data, to minimize the size of my decoding logic.</p>\n\n<p>Related question: Does C/C++ guarantee that a single memory location read will always be a single read, and not somehow end up being multiple reads.  Long experience says yes, but I wonder what the spec says.</p>\n\n<p>Note: I always declare pointers to peripheral registers to be volatile, like this:\n    volatile uint32_t * p_reg;</p>\n"}, {"tags": ["c", "swift", "sdl-2"], "comments": [{"owner": {"reputation": 1237, "user_id": 1256234, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8hkBI.png?s=128&g=1", "display_name": "Andy J", "link": "https://stackoverflow.com/users/1256234/andy-j"}, "edited": false, "score": 0, "creation_date": 1541026384, "post_id": 53092961, "comment_id": 93082757, "body": "Could you provide a link to the github?  This is happening because <code>screen&#47;screen.h</code> isn&#39;t found within any of the include paths passed to your compiler.  Also, what compiler/toolchain are you using."}, {"owner": {"reputation": 2519, "user_id": 2801589, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003531340104/picture?type=large", "display_name": "Trev&#246;r", "link": "https://stackoverflow.com/users/2801589/trev%c3%b6r"}, "reply_to_user": {"reputation": 1237, "user_id": 1256234, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8hkBI.png?s=128&g=1", "display_name": "Andy J", "link": "https://stackoverflow.com/users/1256234/andy-j"}, "edited": false, "score": 0, "creation_date": 1541028282, "post_id": 53092961, "comment_id": 93083240, "body": "@AndyJ Thank you for your reply. Here is the repo : <a href=\"https://github.com/adtrevor/compileSDL\" rel=\"nofollow noreferrer\">github.com/adtrevor/compileSDL</a> I am using the Swift compiler, that uses Clang when it needs to build C code."}, {"owner": {"reputation": 2519, "user_id": 2801589, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003531340104/picture?type=large", "display_name": "Trev&#246;r", "link": "https://stackoverflow.com/users/2801589/trev%c3%b6r"}, "reply_to_user": {"reputation": 1237, "user_id": 1256234, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8hkBI.png?s=128&g=1", "display_name": "Andy J", "link": "https://stackoverflow.com/users/1256234/andy-j"}, "edited": false, "score": 0, "creation_date": 1541028470, "post_id": 53092961, "comment_id": 93083288, "body": "@AndyJ I guess the biggest issue is also that it will try to compile for all platforms, but I don&#39;t what I should do. It&#39;s especially confusing that the website mentions the possibility of compiling the files directly with your project but that there is absolutely no info anywhere on how to do it."}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 1, "creation_date": 1541030449, "post_id": 53092961, "comment_id": 93083736, "body": "Are you sure about <code>&lt;&gt;</code>; seems like <code>&quot;&quot;</code> would be more appropriate, but I can&#39;t find it on <code>compileSDL</code>."}, {"owner": {"reputation": 2519, "user_id": 2801589, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003531340104/picture?type=large", "display_name": "Trev&#246;r", "link": "https://stackoverflow.com/users/2801589/trev%c3%b6r"}, "reply_to_user": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1541035348, "post_id": 53092961, "comment_id": 93084718, "body": "@NeilEdelman This is the code straight from the SDL source so I think this is right. I am sorry about the missing parts of the code, Inwill update it. My biggest concern is that I don\u2019t know what to compile and what to exclude as this source code includes all possible plateforms"}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1541036342, "post_id": 53092961, "comment_id": 93084913, "body": "I&#39;ve never actually successfully compiled SDL2; I gave up compiling and went with the binaries."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 1, "creation_date": 1541036492, "post_id": 53092961, "comment_id": 93084952, "body": "All the steps for compilation are in INSTALL.txt..."}, {"owner": {"reputation": 1323, "user_id": 6900902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a5448d619d9cd1bd6341a384301587?s=128&d=identicon&r=PG&f=1", "display_name": "bscothern", "link": "https://stackoverflow.com/users/6900902/bscothern"}, "edited": false, "score": 0, "creation_date": 1541102430, "post_id": 53092961, "comment_id": 93112355, "body": "Is it reasonable to install SDL normally and have your library use it as a systemLibrary target instead of a normal library target?"}, {"owner": {"reputation": 2519, "user_id": 2801589, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003531340104/picture?type=large", "display_name": "Trev&#246;r", "link": "https://stackoverflow.com/users/2801589/trev%c3%b6r"}, "reply_to_user": {"reputation": 1323, "user_id": 6900902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a5448d619d9cd1bd6341a384301587?s=128&d=identicon&r=PG&f=1", "display_name": "bscothern", "link": "https://stackoverflow.com/users/6900902/bscothern"}, "edited": false, "score": 0, "creation_date": 1541112495, "post_id": 53092961, "comment_id": 93115995, "body": "@bscothern There is a bug with it on Ubuntu 18.04 unfortunately"}], "answers": [{"tags": [], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1592063423, "creation_date": 1592063423, "answer_id": 62362207, "question_id": 53092961, "link": "https://stackoverflow.com/questions/53092961/compiling-sdl-2-alongside-my-own-source-files/62362207#62362207", "title": "Compiling SDL 2 alongside my own source files", "body": "<p>SDL is a cross-platform library, and its unlikely that you want to compile all of the source files in order to get the functionality that you need.  Usually you run <code>configure</code> / <code>make</code>, and it will make the decisions on what to build/not build.</p>\n\n<p>You mention that you are building the source files yourself; so you may want to obverse the SDL build and try to capture the same files.  In regards to your error, QNX is the Blackberry operating system-- so depending on your use-cases you can avoid building everything under <code>SDL/src/video/qnx/*</code> since you don't have those operating system headers anyway.</p>\n\n<p>SDL should build the static libraries by default anyhow.  Consider doing a regular build and using <code>sdl-config --static-libs</code> to find out which static libraries you should link with.</p>\n"}], "owner": {"reputation": 2519, "user_id": 2801589, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003531340104/picture?type=large", "display_name": "Trev&#246;r", "link": "https://stackoverflow.com/users/2801589/trev%c3%b6r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1592063423, "creation_date": 1541025862, "last_edit_date": 1541028587, "question_id": 53092961, "link": "https://stackoverflow.com/questions/53092961/compiling-sdl-2-alongside-my-own-source-files", "title": "Compiling SDL 2 alongside my own source files", "body": "<p>Due to a compilation bug I cannot correctly use the SDL dynamically linked, I don't prefer to go with the static linking route as I'm not sure of how well implemented this is in the language I am using.</p>\n\n<p>That's why I would like to compile the SDL 2 source files manually, I simply used the files present under /include and /src in the official repo, but at compile time I get this error:</p>\n\n<pre><code>In file included from /Users/adtrevor/CompileSDL/Sources/SDL/src/video/qnx/video.c:23:\n/Users/adtrevor/CompileSDL/Sources/SDL/src/video/qnx/sdl_qnx.h:26:10: fatal error: 'screen/screen.h' file not found\n#include &lt;screen/screen.h&gt;\n         ^~~~~~~~~~~~~~~~~\n1 error generated.\nIn file included from /Users/adtrevor/CompileSDL/Sources/SDL/src/video/qnx/keyboard.c:26:\n/Users/adtrevor/CompileSDL/Sources/SDL/src/video/qnx/sdl_qnx.h:26:10: fatal error: 'screen/screen.h' file not found\n#include &lt;screen/screen.h&gt;\n         ^~~~~~~~~~~~~~~~~\n1 error generated.\nIn file included from /Users/adtrevor/CompileSDL/Sources/SDL/src/video/qnx/gl.c:23:\n/Users/adtrevor/CompileSDL/Sources/SDL/src/video/qnx/sdl_qnx.h:26:10: fatal error: 'screen/screen.h' file not found\n#include &lt;screen/screen.h&gt;\n         ^~~~~~~~~~~~~~~~~\n1 error generated.\n</code></pre>\n\n<p>I know it is possible to do that since the official website mentions it, but I don't know at all what steps I should follow in order to make it work correctly?</p>\n\n<p><strong>EDIT :</strong>\nHere is the sample repo: <a href=\"https://github.com/adtrevor/compileSDL\" rel=\"nofollow noreferrer\">https://github.com/adtrevor/compileSDL</a></p>\n"}, {"tags": ["c", "matrix"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10588326, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8tQ8.jpg?s=128&g=1", "display_name": "inaseaofsalt", "link": "https://stackoverflow.com/users/10588326/inaseaofsalt"}, "edited": false, "score": 0, "creation_date": 1541027192, "post_id": 53093051, "comment_id": 93082955, "body": "Thank you! It worked! Just a little edit: the starting value of x is supposed to be     x -= matsize/2"}], "tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": true, "score": 2, "last_activity_date": 1541026557, "creation_date": 1541026557, "answer_id": 53093051, "question_id": 53092871, "link": "https://stackoverflow.com/questions/53092871/drawing-filled-circle-with-a-matrix-in-c/53093051#53093051", "title": "Drawing filled circle with a matrix in C", "body": "<p>You forgot to reset <code>x</code> when decrementing <code>y</code>.</p>\n\n<p>Try this:</p>\n\n<pre><code>for(i = 0; i &lt; matsize; i++)\n{\n    for(j = 0; j &lt; matsize; j++)\n    {\n        rcheck = ((y - ypos)*(y - ypos)) + ((x - xpos)*(x - xpos)); // calculating the equation of the circle with the x and y values taking the offset into account\n        if(rcheck &lt;= rsqrd)\n        {\n            mat[i][j] = 1;\n        }\n        else\n        {\n            mat[i][j] = 0;\n        }\n        x = x+1; //stepping the values of x and y so they stay with the corresponding cell\n    }\n    y = y-1;\n    x -= matsize;   // &lt;-- Reset x to start of row\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10588326, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8tQ8.jpg?s=128&g=1", "display_name": "inaseaofsalt", "link": "https://stackoverflow.com/users/10588326/inaseaofsalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "accepted_answer_id": 53093051, "answer_count": 1, "score": 0, "last_activity_date": 1541026557, "creation_date": 1541025234, "question_id": 53092871, "link": "https://stackoverflow.com/questions/53092871/drawing-filled-circle-with-a-matrix-in-c", "title": "Drawing filled circle with a matrix in C", "body": "<p>I have made a program in C.</p>\n\n<p>What it does or should do is draw a filled circle by displaying values of a matrix.</p>\n\n<p>You can input the values of the radius of the circle, the position of the center of the circle relative to the center of the matrix and the size of the matrix i.e. resolution.</p>\n\n<p>So when it gives values of the cells of the matrix, it checks if the cell (or point) is inside the circle.</p>\n\n<p>For each cell there is a point determined by the variables x and y. When the point is inside the circle, that means that the number that we get by calculating the equation of a circle with the x and y values is less than the radius of the circle squared.</p>\n\n<p>If the point is inside the circle, the program makes the value of the corresponding cell 1. Otherwise it makes it 0.</p>\n\n<p>So in the end it should display the matrix and it should look like a bunch of zeroes and inside there is a filled circle made of ones.</p>\n\n<p>The problem:</p>\n\n<p>The program works, I can type in the values it needs (for example radius is 50, x position is 0, y position is 0 and resolution (matrix size) is 150), but when it is supposed to display the matrix it only prints zeroes.</p>\n\n<p>Is there anything fundamentally wrong with my program? What could cause the problem?</p>\n\n<p>Thanks in advance!</p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\nfloat x = 0, y = 0, ypos= 0 , xpos = 0, radius = 0, rsqrd = 0, rcheck = 0;\nint matsize = 0, i, j;\n\n\nprintf(\"Value of radius:\");\nscanf(\"%f\" , &amp;radius);\nprintf(\"Position of circle on the x axis:\");\nscanf(\"%f\" , &amp;xpos);\nprintf(\"Position of circle on the y axis:\");\nscanf(\"%f\" , &amp;ypos);\nprintf(\"Resolution:\");\nscanf(\"%d\" , &amp;matsize);\nprintf(\"\\n\");\n\n\nrsqrd = radius*radius; //rsqrd is equal to radius squared.\nx = -1*(matsize/2); //with this I make sure that the x and y values start from the top right corner of the matrix, so that each x, y value corresponds to the correct cell position (i, j)\ny = matsize/2;\nint mat[matsize][matsize];\n\n\nfor(i = 0; i &lt; matsize; i++)\n{\n    for(j = 0; j &lt; matsize; j++)\n    {\n        rcheck = ((y - ypos)*(y - ypos)) + ((x - xpos)*(x - xpos)); // calculating the equation of the circle with the x and y values taking the offset into account\n        if(rcheck &lt;= rsqrd)\n        {\n            mat[i][j] = 1;\n        }\n        else\n        {\n            mat[i][j] = 0;\n        }\n        x = x+1; //stepping the values of x and y so they stay with the corresponding cell\n    }\n    y = y-1;\n}\n\n\nfor(i = 0; i &lt; matsize; i++) // displaying the matrix\n{\n    for(j = 0; j &lt; matsize; j++)\n    {\n        printf(\"%d \",mat[i][j]); \n    }\n    printf(\"\\n\");\n}\n\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "server", "client"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541026094, "post_id": 53092849, "comment_id": 93082668, "body": "<code>write(newsockfd, getFile.c_str(), 18);</code> will write 18 bytes to the socket. If the string is longer than this, you will not get the whole string. If the string is shorter, you still write 18 bytes and read past the end of the string. This is undefined behaviour and in this case will  likely result in either garbage being written to the stream or the program crashing. A common method for writing a string to a stream is to write the length of the string to the stream as an integer of known length and endian and then write length bytes of the string into the socket."}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1541027140, "creation_date": 1541027140, "answer_id": 53093122, "question_id": 53092849, "link": "https://stackoverflow.com/questions/53092849/how-to-send-contents-of-a-text-file-from-server-to-client-via-sockets/53093122#53093122", "title": "How to send contents of a text file from server to client via sockets?", "body": "<p>TCP is a stream-based, not a message based, protocol. That means you need to establish a protocol that separates individual messages if they are intended to be processed as individual messages. <code>read(sockfd, buffer, 255)</code> could easily read 255 bytes of data from the socket which contains multiple messages, possibly even the whole file, but the program  only treats it as a single message. </p>\n\n<p><a href=\"https://stackoverflow.com/a/18678024/4581301\">This answer contains a relatively simple protocol for sending strings over a socket</a></p>\n"}], "owner": {"reputation": 19, "user_id": 9933366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a1b34b7479c2a62398df37e9ff3f74?s=128&d=identicon&r=PG&f=1", "display_name": "feedmecookies", "link": "https://stackoverflow.com/users/9933366/feedmecookies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541027140, "creation_date": 1541025088, "question_id": 53092849, "link": "https://stackoverflow.com/questions/53092849/how-to-send-contents-of-a-text-file-from-server-to-client-via-sockets", "title": "How to send contents of a text file from server to client via sockets?", "body": "<p>I am working on an assignment that would allow the server to grab the contents of a text file via I/O redirection and send to the client line by line which I would then insert into a vector. I have tried using a while loop on both sides, but it isn't working. It only reads the first line of the file (which I was doing separately in order to get the size first) and that's it. Can anyone please advise me on how to fix this issue?</p>\n\n<p>Here's my server code:</p>\n\n<pre><code>listen(sockfd,5);\n clilen = sizeof(cli_addr);\n newsockfd = accept(sockfd, (struct sockaddr *) &amp;cli_addr, (socklen_t *)&amp;clilen);\n\n if (newsockfd &lt; 0){ \n      error(\"ERROR on accept\");\n }\n bzero(buffer,256);\n n = read(newsockfd,buffer,255);\n\n if (n &lt; 0){\n     error(\"ERROR reading from socket\");\n }\n\n printf(\"Here is the message: %s\\n\",buffer);\n std::getline(std::cin, getFile); // I/O Redirection\n n = write(newsockfd,getFile.c_str(),18); //grabs first line of the file which is 3 and sends it to the client\n\n while (std::getline(std::cin, getFile)) { \n     n = write(newsockfd, getFile.c_str(), 18); //supposed to write every line of the file to the client but isn't working? Should send 0 1 0 0 1 0 1 -1\n     if (n &lt; 0){\n         error(\"ERROR writing to socket\");\n     }\n }\n</code></pre>\n\n<p>My client code:</p>\n\n<pre><code>std::vector&lt;int&gt; input;\n\nprintf(\"Please enter the message: \");\nbzero(buffer,256);\nfgets(buffer,255,stdin);\nn = write(sockfd,buffer,strlen(buffer));\n\nif (n &lt; 0) {\n    error(\"ERROR writing to socket\");\n}\n\nprintf(\"The ring size is: \");\nbzero(buffer,256);\nn = read(sockfd,buffer,255); //received first line from server\nsize = std::atoi(buffer); //ring size converted from char* to int\n\nwhile (read(sockfd, buffer, 255) &gt; 0) {\n    input.push_back(std::atoi(buffer));\n    printf(\"Input contents: %s\\n\", buffer); //should print 0 1 0 0 1 0 1 -1\n}\n</code></pre>\n\n<p>My text file:</p>\n\n<pre><code>3\n0\n1\n0\n0\n1\n0\n1\n-1\n</code></pre>\n"}, {"tags": ["c#", "c", "sqlite"], "comments": [{"owner": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 3, "creation_date": 1541024908, "post_id": 53092813, "comment_id": 93082333, "body": "It would be awesome if you could provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 69, "user_id": 4290232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JJRL1bJ6axk/AAAAAAAAAAI/AAAAAAAAARg/jzQq5sVrp-s/photo.jpg?sz=128", "display_name": "Craig Thomas", "link": "https://stackoverflow.com/users/4290232/craig-thomas"}, "edited": false, "score": 1, "creation_date": 1541026277, "post_id": 53092813, "comment_id": 93082728, "body": "Is <b>i</b> supposed to be an out-parameter? I don&#39;t see its value being set anywhere. Also, should <b>CreateDB</b> return an int?"}, {"owner": {"reputation": 159, "user_id": 9448914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kyle Huff", "link": "https://stackoverflow.com/users/9448914/kyle-huff"}, "edited": false, "score": 0, "creation_date": 1541029881, "post_id": 53092813, "comment_id": 93083620, "body": "My initial guess is that you&#39;re including the time required to load the DLL.  This would not apply if it were part of the EXE that was already running."}, {"owner": {"reputation": 29, "user_id": 10588223, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eWE4qagptrk/AAAAAAAAAAI/AAAAAAAAAAA/B1rZ2LW10Fk/photo.jpg?sz=128", "display_name": "Dorian Oria", "link": "https://stackoverflow.com/users/10588223/dorian-oria"}, "edited": false, "score": 0, "creation_date": 1541030231, "post_id": 53092813, "comment_id": 93083693, "body": "I modified the question adding more information. I hope with this is clearer what I want to achieve. Thanks"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1541108152, "post_id": 53092813, "comment_id": 93114645, "body": "the progress bar will not change until you return from the function call. You need to do much more fiddly things that make a progress bar that moves while you are calling some other function"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10588223, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eWE4qagptrk/AAAAAAAAAAI/AAAAAAAAAAA/B1rZ2LW10Fk/photo.jpg?sz=128", "display_name": "Dorian Oria", "link": "https://stackoverflow.com/users/10588223/dorian-oria"}, "edited": false, "score": 0, "creation_date": 1541123621, "post_id": 53109642, "comment_id": 93118457, "body": "Thanks all of you for your time. I am still working in trying to update the progress bar."}], "tags": [], "owner": {"reputation": 1888, "user_id": 6463426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c137962545c60312dbb2cab2bb8186?s=128&d=identicon&r=PG&f=1", "display_name": "dumetrulo", "link": "https://stackoverflow.com/users/6463426/dumetrulo"}, "is_accepted": true, "score": 0, "last_activity_date": 1541107915, "creation_date": 1541107915, "answer_id": 53109642, "question_id": 53092813, "link": "https://stackoverflow.com/questions/53092813/why-a-c-code-when-implementing-as-dll-is-slower-in-c/53109642#53109642", "title": "Why a C code when implementing as DLL is slower in C#", "body": "<p>Your C# code calls the C function as if it took a pointer to an int. But according to your declaration, it takes a plain int. It should work if you change it as follows:</p>\n\n<pre><code>EXPORT void CreateDB(int *f)\n{\n    for (int i = 0; i &lt; 4; i++)\n    {\n        sleep(1);\n        *f = i + 1;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10588223, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eWE4qagptrk/AAAAAAAAAAI/AAAAAAAAAAA/B1rZ2LW10Fk/photo.jpg?sz=128", "display_name": "Dorian Oria", "link": "https://stackoverflow.com/users/10588223/dorian-oria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 53109642, "answer_count": 1, "score": 0, "last_activity_date": 1541107915, "creation_date": 1541024821, "last_edit_date": 1541030168, "question_id": 53092813, "link": "https://stackoverflow.com/questions/53092813/why-a-c-code-when-implementing-as-dll-is-slower-in-c", "title": "Why a C code when implementing as DLL is slower in C#", "body": "<p>I did a C program that reads some values from binary files and write them in a SQLite DB. I transformed the same file in a DLL library and I invoked it from a Windows Form App in C#. Following is an example that illustrates what I want to do:</p>\n\n<p>In C# I use the following</p>\n\n<pre><code>[DllImport(\"Progress.dll\", EntryPoint = \"CreateDB\", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.Cdecl)]\nprivate static extern int avance(IntPtr Path);\n</code></pre>\n\n<p>The DLL C code looks like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;stdint.h &gt;\n#include &lt;math.h&gt;\n#define EXPORT __declspec(dllexport)\nEXPORT void CreateDB(int f)\n{\nfor (int i=0;i&lt;4;i++)\n{\n    sleep(1);\n    f=i+1;\n}\n}\n</code></pre>\n\n<p>The variable <strong>f</strong> returns the value that I want to use in the progress bar.</p>\n\n<p>The Exe C code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;math.h&gt;\nint main()\n{\n    for (int i=0;i&lt;4;i++)\n    {\n        sleep(1);\n    }\n}\n</code></pre>\n\n<p>Now that I invoke the C program as DLL, it lasts three times to perform the job. I would expect that the time is very similar than the C exe file. In addition, the progress bar is not updated in real time. </p>\n\n<p>The C# code in the Windows App Form is the following:</p>\n\n<pre><code>private void button7_Click(object sender, EventArgs e)\n    {\n        progressBar1.Maximum = 4;\n        IntPtr strPtr = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(int)));\n        progressBar1.Value = avance(strPtr);\n        Application.DoEvents();\n    }\n</code></pre>\n\n<p>How can I do to solve the speed issue and how can I do to update the progress bar as a loop into the C DLL is running?</p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["c", "double", "comparison"], "comments": [{"owner": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "edited": false, "score": 0, "creation_date": 1541024764, "post_id": 53092656, "comment_id": 93082284, "body": "You need to show us the code. As an aside, and not thinking about comparing doubles,  why don&#39;t you use the equation of the straight line to check if the points don&#39;t lie on the same line? You should have the slope."}, {"owner": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "edited": false, "score": 0, "creation_date": 1541025358, "post_id": 53092656, "comment_id": 93082453, "body": "In any event, as is usually the case with numerical methods, you still need to set a tolerance for what you&#39;d consider close enough to zero. Say, 0.00000001 or some such, depending on your particular situation."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1541025445, "post_id": 53092656, "comment_id": 93082479, "body": "Essential reading: <a href=\"https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/\" rel=\"nofollow noreferrer\">randomascii.wordpress.com/2012/02/25/&hellip;</a>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "edited": false, "score": 0, "creation_date": 1541028064, "post_id": 53092656, "comment_id": 93083196, "body": "@TanoFotang: They do not need to show us the code. Showing us the code is for questions asking why certain code is not working. It is not needed for questions seeking a method for doing something. Regarding your suggestion of using the equation for a straight line, should not the mathematics be equivalent? A (potentially degenerate) triangle formed from the points will have zero area if and only if the distance of the third point fro a line formed by the first two is non-zero. Do you think the latter calculation leads to an expression more suitable to accurate evaluation?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541028356, "post_id": 53092656, "comment_id": 93083259, "body": "Do you know the points you have in the <code>float</code> or <code>double</code> values are exact in the first place? If they are not, it is impossible to determine with certainty whether or not they are exactly on a line, regardless of what arithmetic is used. Can you accept a false positive (a report the points are on a line when they are not exactly) or a false negative (a report the points are not on a line when they are exactly) at all, or must the answers always be exactly correct?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541028939, "post_id": 53092656, "comment_id": 93083421, "body": "I expect a solution is possible with a reasonable amount of work. C\u2019s <code>fma</code> can be used to get exact products for the various individual terms such as <code>Ax*By</code>, in two floating-point objects per term (one for the normal result of <code>Ax*By</code> and one for the residue of rounding, extracted via <code>fma(Ax*By, -Ax, By)</code>). Then the six terms can be exactly added with some extended-precision work."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541029992, "post_id": 53092656, "comment_id": 93083633, "body": "Another approach is that the floating-point format constrains the possibilities. Point C cannot be an arbitrary point on AB; it must have coordinates that are exactly floating-point values. Some number theory might help reduce the problem. <a href=\"https://stackoverflow.com/questions/9474453/how-to-determine-if-3-points-are-exactly-collinear-in-z2\">This question</a> poses the same problem (colinear detection) for integers, and that might be useful for this approach."}, {"owner": {"reputation": 25, "user_id": 8560192, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6VwSi4F2aKA/AAAAAAAAAAI/AAAAAAAARCg/iBA-xTAcjJk/photo.jpg?sz=128", "display_name": "Mr.Smith", "link": "https://stackoverflow.com/users/8560192/mr-smith"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541033733, "post_id": 53092656, "comment_id": 93084398, "body": "@EricPostpischil (wow isn&#39;t that a Czech name? :D) It&#39;s a school project. A have to scan for 2x 3 points from the user and then determine if it&#39;s possible to make a triangle out of those points and if those triangles are the same/same area/or which is bigger. They are giving extra small or extra large numbers into the program so they test if it&#39;s foolproof"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1541035527, "post_id": 53092656, "comment_id": 93084752, "body": "Doubles are not &quot;very&quot; inaccurate. They are normally  quite accurate, although certain types of computation can magnify error terms (subtracting similar numbers, for example). Floats are not very accurate and normally should not be used for analytic computation, although they are often fine for graphucs, which only has to be pixel accurate. Even so, they are not &quot;very inaccurate&quot;. They are within one in a million."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541035744, "post_id": 53092656, "comment_id": 93084795, "body": "Given this is a school project, it is unlikely they want an exact test for colinearity, unless the class specifically covers floating-point arithmetic. (More than just an introduction and general use; getting this answer exactly correct is not a introductory level technique.) So it would be a bit surprising if the test cases relied on working around floating-point limitations here. Do you have any test cases that fail? (Nonetheless, solving the problem exactly is interesting and could be a good Stack Overflow Q&amp;A.)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541035756, "post_id": 53092656, "comment_id": 93084797, "body": "Yes, my surname comes from a Czech word for a busy or active person."}, {"owner": {"reputation": 25, "user_id": 8560192, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6VwSi4F2aKA/AAAAAAAAAAI/AAAAAAAARCg/iBA-xTAcjJk/photo.jpg?sz=128", "display_name": "Mr.Smith", "link": "https://stackoverflow.com/users/8560192/mr-smith"}, "edited": false, "score": 0, "creation_date": 1541041645, "post_id": 53092656, "comment_id": 93085920, "body": "Well, this is kind of an extra thing to do, but it keeps bothering me how to do it. We have some tolerance approved though. I have about 6 sample data with an expected output and I just can&#39;t get them to work all at once."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541100433, "post_id": 53092656, "comment_id": 93111458, "body": "Show the data and expected output."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541027384, "post_id": 53092895, "comment_id": 93083015, "body": "There are a number of errors in this. To start, the design of accepting as zero a non-zero result if it is close enough is defective, as it allows results that <b>ought</b> to be small non-zero values to be accepted as zero. The question asks for a <b>correct</b> way of overcoming the accuracy problem, which means getting both true zero and true non-zero results correct."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541027493, "post_id": 53092895, "comment_id": 93083043, "body": "The statement that the rounding error can be up to |x|/2^52 is wrong on two points. First, in the usual default round-to-nearest-ties-to-even mode, the maximum error for normal numbers is 1/2 ULP. With 53-bit significands, the ULP is 2^\u221252 of the leading bit, so 1/2 ULP is 2^\u221253, not 2^\u221252. Additionally, for subnormal numbers, the relative error can be much greater."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541027658, "post_id": 53092895, "comment_id": 93083086, "body": "Although the answer states a bound on the rounding error for a single operation, it does not follow through to explain rounding errors for compound operations. Such errors quickly become complicated, as the error in each operation can be bound relative to that operation\u2019s result (while it remains within the range of the format), but then the error takes part of subsequent operations and complicates them. In fairly simple expressions, it may be feasible to express bounds by permitting additional slack in them, but this opens up more possibility of false positives."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541027911, "post_id": 53092895, "comment_id": 93083155, "body": "Subtracting the average is not a bad idea, and Sterbenz\u2019 lemma tells us the differences will be exact if the average is within &#189; of a value it is subtracted from, or vice-versa, but, if it is not, the subtraction has its own rounding error, which must be considered."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": -1, "last_activity_date": 1541025404, "creation_date": 1541025404, "answer_id": 53092895, "question_id": 53092656, "link": "https://stackoverflow.com/questions/53092656/how-to-correctly-compare-2-doubles/53092895#53092895", "title": "How to correctly compare 2 doubles?", "body": "<p>You figure out: How much could the rounding errors be? If you use double precision, and the result of a single operation is x, then the rounding error can be up to abs (x) / 2^52. (If you don't use double then use double. )</p>\n\n<p>You do this and find the rounding error in By-Cy, Cy-Ay, Ay-By. These three errors are multiplied by Ax, Bx and Cx. The three products have their own rounding error. Then you have an error adding the first two products, then adding the third product. You add up all these errors and get a maximum total error e.</p>\n\n<p>So if the area is less than e, then you can assume they are on a straight line. </p>\n\n<p>To improve on this: If Ax, Bx, Cx are all positive (say 100, 101, 102.5), then you calculate the average and subtract from Ax, Bx and Cx. That makes your numbers smaller and the rounding errors smaller. </p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541029237, "post_id": 53093132, "comment_id": 93083500, "body": "There are <b>many</b> triangles with areas smaller than <code>FLT_EPSILON</code> that this code would falsely report are not triangles. Conversely, there are colinear points whose magnitudes are so large that the na&#238;ve calculation of the area of a triangle will result in an erroneous result larger than <code>FLT_EPSILON</code>, causing this code to falsely report them as triangles."}], "tags": [], "owner": {"reputation": 351, "user_id": 4604759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6de599df6671db42349c8b438ec7a350?s=128&d=identicon&r=PG&f=1", "display_name": "MiCo", "link": "https://stackoverflow.com/users/4604759/mico"}, "is_accepted": false, "score": -2, "last_activity_date": 1541027203, "creation_date": 1541027203, "answer_id": 53093132, "question_id": 53092656, "link": "https://stackoverflow.com/questions/53092656/how-to-correctly-compare-2-doubles/53093132#53093132", "title": "How to correctly compare 2 doubles?", "body": "<p>I would try something like this:</p>\n\n<p><code>#include &lt;float.h&gt;\n    ...\n    if ( (area &lt; FLT_EPSILON) &amp;&amp; (area &gt; -FLT_EPSILON) )\n    {\n        printf(\"It's not a triangle\"); \n    }\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1541047214, "last_edit_date": 1541047214, "creation_date": 1541044808, "answer_id": 53095038, "question_id": 53092656, "link": "https://stackoverflow.com/questions/53092656/how-to-correctly-compare-2-doubles/53095038#53095038", "title": "How to correctly compare 2 doubles?", "body": "<p>Lets us clear some causally understandings and dig deeper.</p>\n\n<p><strong>Wrong formula for area</strong></p>\n\n<p>The area is 1/2 of OP's formula, yet that does not make a different when comparing to 0.0.</p>\n\n<pre><code>// area=(Ax* (By-Cy) + Bx* (Cy-Ay) + Cx* (Ay-By));\narea=(Ax* (By-Cy) + Bx* (Cy-Ay) + Cx* (Ay-By))/2;\n</code></pre>\n\n<p><strong>Inaccuracy</strong></p>\n\n<p>\"since doubles and floats are very inaccurate\" is itself inaccurate.  All finite FP values are <em>exact</em>, just like integers.  It is when comparing their operations against mathematical divide, they get the mis-nomer of \"inaccurate\".  Like integer divide, FP divide and other basic FP math OPs, they are defined differently than math operations.  7/3 and 7.0/3.0 both do not result in the mathematical 2<sup>1</sup>/<sub>3</sub>, but a different value.  When C employs an IEEE math model, that \"quotient\" is not approximate, but exact.</p>\n\n<p><strong>Comparing how many?</strong></p>\n\n<p>\"compare 2 doubles\" misleads as effectively it a complicated compare of 6 <code>double</code> that code needs to perform.</p>\n\n<hr>\n\n<p><strong>Review of the test formula</strong></p>\n\n<p><code>Ax* (By-Cy) + Bx* (Cy-Ay) + Cx* (Ay-By)</code> with <code>double</code> operands will behave without rounding as long as the sub-steps do not round.  In <em>general</em>, this is not possible.  The work-arounds are</p>\n\n<ol>\n<li>Use higher precision</li>\n</ol>\n\n<p>Perform the test using <code>long double</code>.  This does not eliminate the issue, just makes it smaller/less likely.  Note <code>long double</code> is not required to have higher precision.</p>\n\n<ol start=\"2\">\n<li>Employ some sort of <em>epsilon</em></li>\n</ol>\n\n<p>A naive approach takes the result |computed area| and compares against an <em>epsilon</em>.  Absolute areas below that are considered \"zero\".  This does not scale well as the <em>epsilon</em> really depends on the magnitude of operands relative to the area. A <em>relative</em> epsilon is needed.  Suggest <code>fmax(|ax|,|bx|,|cx|) * fmax(|ay|,|by|,|cy|) * DBL_EPSILON</code>.  This is only a first order approximation.</p>\n\n<ol start=\"3\">\n<li>Look for sign change</li>\n</ol>\n\n<p>The area formula is a <em>signed</em> area.  Effectively reversing the order of a,b,c inverts the sign of the area.  Should a small perturbation of any one of the 8 operands by <code>operand_new=operand*(1 +/- DBL_EPSILON)</code>result in an area sign change, the area can be assessed \"close enough to zero\".</p>\n\n<ol start=\"4\">\n<li>Re-order the formula.</li>\n</ol>\n\n<p>It is the subtraction of distant values values that kill  precision.  Exchanging <code>x</code>s with <code>y</code>s may help in the inner term subtractions.  Re-ordering subtraction of the 3 products can help.</p>\n\n<p>A better re-ordering can take the form of forming the 6 products: Ax<em>By, -Ax</em>Cy, Bx<em>Cy, -Bx</em>Ay, Cx<em>Ay, -Cx</em>By and then sum those.</p>\n\n<p>Both of these benefit by using <a href=\"https://en.wikipedia.org/wiki/Kahan_summation_algorithm\" rel=\"nofollow noreferrer\">Kahan summation algorithm</a> <a href=\"https://stackoverflow.com/a/6699451/2410359\">SO</a>, perhaps taking advantage of <a href=\"https://en.cppreference.com/w/c/numeric/math/fma\" rel=\"nofollow noreferrer\"><code>fma()</code></a>.</p>\n\n<hr>\n\n<p>For me, I'd explore #4b or #3.  Had OP posted an <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>, sample data and expected sample results, true code could be had.  Lacking that, consider these starting ideas for a fuzzy problem.</p>\n"}], "owner": {"reputation": 25, "user_id": 8560192, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6VwSi4F2aKA/AAAAAAAAAAI/AAAAAAAARCg/iBA-xTAcjJk/photo.jpg?sz=128", "display_name": "Mr.Smith", "link": "https://stackoverflow.com/users/8560192/mr-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 53095038, "answer_count": 3, "score": 0, "last_activity_date": 1541047214, "creation_date": 1541023900, "question_id": 53092656, "link": "https://stackoverflow.com/questions/53092656/how-to-correctly-compare-2-doubles", "title": "How to correctly compare 2 doubles?", "body": "<p>I'm doing calculations with triangles. But I need to know if three given points aren't on the same line. To do that, I'm calculating an area of the triangle </p>\n\n<blockquote>\n  <p>area=(Ax* (By-Cy) + Bx* (Cy-Ay) + Cx* (Ay-By));</p>\n</blockquote>\n\n<p>If the area equals zero, then all three points are colinear.\nBut the problem is, that it never really equals zero since doubles and floats are very inaccurate, so </p>\n\n<pre><code>if(area==0){\n printf(\"It's not a triangle\");   \n }\n</code></pre>\n\n<p>won't work. How is the correct way of overcoming this problem?</p>\n"}, {"tags": ["c", "enums"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1541023725, "post_id": 53092606, "comment_id": 93081966, "body": "Search for <code>enum</code> in <code>&#47;usr&#47;include</code> to see some of the uses in Linux."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1541023736, "post_id": 53092606, "comment_id": 93081971, "body": "It&#39;s either enums or integer constants, or char strings"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1541023789, "post_id": 53092606, "comment_id": 93081988, "body": "Compile with all warnings and debug info, so <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Then read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">how to debug small programs</a> and learn to <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">use the <code>gdb</code> debugger</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1541023917, "post_id": 53092606, "comment_id": 93082016, "body": "@BasileStarynkevitch not printfing enum with %s, printfing char*"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1541024043, "post_id": 53092606, "comment_id": 93082042, "body": "@BasileStarynkevitch He&#39;s not having a problem with the code, why does he need to use a debugger?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541024212, "post_id": 53092606, "comment_id": 93082094, "body": "<code>enum</code> can be used to define names for numeric parameters to APIs, although when I search Unix source code I find that they usually use <code>#define</code> instead."}, {"owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "edited": false, "score": 2, "creation_date": 1541024266, "post_id": 53092606, "comment_id": 93082119, "body": "Enums allow for logical grouping, for example the state of a process (running, cancelled, done). Enums are safer than <code>#define</code>&#39;d values because they are not part of the preprocessor. They also make for a better API design: <code>enum process_state get_process_state();</code> VS <code>int get_process_state();</code>."}], "answers": [{"tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": false, "score": 2, "last_activity_date": 1541024777, "creation_date": 1541024777, "answer_id": 53092803, "question_id": 53092606, "link": "https://stackoverflow.com/questions/53092606/what-are-some-good-examples-of-using-enum-in-c/53092803#53092803", "title": "What are some good examples of using enum in C", "body": "<p>If I wanted to write a card game, I would use an enum to represent the color of the cards, the value, and the type.</p>\n\n<p>So I would have something like:</p>\n\n<pre><code>typedef enum {\n    KING, QUEEN, ACE, JACK, TEN, NINE, EIGHT, SEVEN, SIX, FIVE, FOUR, THREE, TWO\n} card_value;\n\ntypedef enum {\n    SPADE, HEART, DIAMOND, CLUB\n} card_type;\n\ntypedef enum {\n    BLACK, RED\n} card_color;\n</code></pre>\n\n<p>This is as opposed to doing:</p>\n\n<pre><code>const int CARD_COLOR_RED = 1;\n</code></pre>\n\n<p>or worse</p>\n\n<pre><code>const char* CARD_COLOR_RED = \"Red\";\n</code></pre>\n\n<hr>\n\n<p>Enums are <strong>self-documenting</strong> - I don't need to know what value the enum <code>RED</code> represents, I just need to know that it is <code>RED</code>.</p>\n\n<p>It also makes for less time writing code (programmer efficiency) in that you are not having to think of values to assign to your constants because as it turns out, the name you gave it is the value you wanted it to have in the first place.</p>\n\n<p>Enums are similar to atoms in erlang.</p>\n"}, {"tags": [], "owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "is_accepted": false, "score": 2, "last_activity_date": 1541025315, "creation_date": 1541025315, "answer_id": 53092882, "question_id": 53092606, "link": "https://stackoverflow.com/questions/53092606/what-are-some-good-examples-of-using-enum-in-c/53092882#53092882", "title": "What are some good examples of using enum in C", "body": "<p>Enums help avoid \"magic numbers\" by giving those numbers an identity and a name. You can omit the number and the compiler will generate a sequence automatically, but you can also assign values to each name yourself.</p>\n\n<p>Example:</p>\n\n<pre><code>typedef enum {\n    red = 0xff0000,\n    green = 0x00ff00,\n    blue = 0x0000ff,\n    magenta = 0xff00ff,\n    yellow = 0xffff00,\n    cyan = 0x00ffff,\n    white = 0xffffff,\n    black = 0x000000\n} colors_24bit;\n</code></pre>\n\n<p>There are many use cases for enums, but their ultimate purpose is to help you make your code clean and easy to understand.</p>\n"}], "owner": {"reputation": 675, "user_id": 3269469, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/2WNMZ.jpg?s=128&g=1", "display_name": "Ryan Mc", "link": "https://stackoverflow.com/users/3269469/ryan-mc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541025315, "creation_date": 1541023605, "question_id": 53092606, "link": "https://stackoverflow.com/questions/53092606/what-are-some-good-examples-of-using-enum-in-c", "title": "What are some good examples of using enum in C", "body": "<p>I wrote this simple code to test enum but it doesn't feel like anything that would ever be used in the real world. I'd like to know what some good example use cases of enum would be and why it's useful. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef enum {\n    BLUE,\n    GREEN,\n    BROWN\n} eye_color;\n\ntypedef struct {\n    char *name;\n    char *eyecolor;\n    int height;\n    int weight;\n    eye_color eyes;\n} person;\n\nvoid print_eye_color(person p)\n{\n    switch(p.eyes) {\n        case BLUE :\n            // I didn't know what else to say... \n            printf(\"%s eyes are made from diamonds\\n\", p.eyecolor);\n            break;\n        case GREEN : \n            printf(\"%s eyes are made from emeralds\\n\", p.eyecolor);\n            break;\n        case BROWN : \n            printf(\"%s eyes are made from amber\\n\", p.eyecolor);\n        default :\n            printf(\"What colour eyes do you have?\\n\");\n    }\n}\n\nint main()\n{\n    person ayla = {\"Ayla\", \"Blue\", 167, 42, BLUE};\n    print_eye_color(ayla);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 5, "creation_date": 1541023045, "post_id": 53092506, "comment_id": 93081762, "body": "Yes, they point to the same address."}, {"owner": {"reputation": 3554, "user_id": 1395874, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YOH6V.png?s=128&g=1", "display_name": "zinon", "link": "https://stackoverflow.com/users/1395874/zinon"}, "reply_to_user": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 0, "creation_date": 1541023125, "post_id": 53092506, "comment_id": 93081784, "body": "@Rafael Thank you! In case I use a variable instead of an array, does the new variable&#39;s value passed to main() without return?"}, {"owner": {"reputation": 1036, "user_id": 8209813, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-50FvkCZNkNA/AAAAAAAAAAI/AAAAAAAAABM/kJBPktdQ6uQ/photo.jpg?sz=128", "display_name": "Nick S", "link": "https://stackoverflow.com/users/8209813/nick-s"}, "edited": false, "score": 0, "creation_date": 1541023186, "post_id": 53092506, "comment_id": 93081802, "body": "to change simple variable you should use pointers"}, {"owner": {"reputation": 3554, "user_id": 1395874, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YOH6V.png?s=128&g=1", "display_name": "zinon", "link": "https://stackoverflow.com/users/1395874/zinon"}, "reply_to_user": {"reputation": 1036, "user_id": 8209813, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-50FvkCZNkNA/AAAAAAAAAAI/AAAAAAAAABM/kJBPktdQ6uQ/photo.jpg?sz=128", "display_name": "Nick S", "link": "https://stackoverflow.com/users/8209813/nick-s"}, "edited": false, "score": 0, "creation_date": 1541023415, "post_id": 53092506, "comment_id": 93081873, "body": "@NickS Great, thank you! Thanks for the information! It&#39;s really useful to me!"}], "answers": [{"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1541023943, "creation_date": 1541023943, "answer_id": 53092667, "question_id": 53092506, "link": "https://stackoverflow.com/questions/53092506/why-a-function-can-change-the-values-of-an-array-and-main-can-see-changes/53092667#53092667", "title": "Why a function can change the values of an array and main() can see changes?", "body": "<p>Unless it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize a character array in a declaration, an <em>expression</em> of type \"array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array.</p>\n\n<p>In plain English, when you passed <code>grade_table</code> to <code>read_data</code>, you actually passed a pointer to the first element, so any updates to <code>grade_table2</code> in <code>read_data</code> are reflected in <code>grade_table</code> in <code>main</code>.  </p>\n\n<p>In the context of a function parameter declaration, <code>T a[N]</code> and <code>T a[]</code> are interpreted as <code>T *a</code>.  Note that this is only true for function parameters.  </p>\n\n<p>This \"decay\" rule <em>only</em> applies to array expressions.  <code>struct</code> and <code>union</code> arguments are passed by value like any scalar type (<code>int</code>, <code>float</code>, etc.).  </p>\n"}], "owner": {"reputation": 3554, "user_id": 1395874, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YOH6V.png?s=128&g=1", "display_name": "zinon", "link": "https://stackoverflow.com/users/1395874/zinon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 53092667, "answer_count": 1, "score": -1, "last_activity_date": 1541023943, "creation_date": 1541022928, "question_id": 53092506, "link": "https://stackoverflow.com/questions/53092506/why-a-function-can-change-the-values-of-an-array-and-main-can-see-changes", "title": "Why a function can change the values of an array and main() can see changes?", "body": "<p>I'm having the following below. </p>\n\n<p>When I give values to the array through the <code>read_data</code> value, then values of the array can be read by <code>main()</code> without <code>read_data</code> returning anything. Does the \n<code>grade_table2</code> array points to the same address in memory like <code>grade_table</code>?  </p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#define NUM_STUDENTS 3\n#define NUM_COURSES 2\n\nvoid read_data(float grade_table2[][NUM_COURSES])\n{\n    int i,j;\n    for(i=0;i&lt;NUM_STUDENTS;++i)\n        for(j=0;j&lt;NUM_COURSES;++j)\n            scanf(\"%f\",&amp;grade_table2[i][j]);\n} \n\n\nint main() \n{\n    float grade_table[NUM_STUDENTS][NUM_COURSES];\n    float average_per_student[NUM_STUDENTS];\n    float average_per_course[NUM_COURSES];\n    int i,j;\n    read_data(grade_table);\n\n    for(i=0;i&lt;NUM_STUDENTS;++i){\n        for(j=0;j&lt;NUM_COURSES;++j)\n            printf(\"%.2f \",grade_table[i][j]);\n        printf(\"\\n\");\n    }\n} \n</code></pre>\n"}, {"tags": ["c++", "c", "scanf"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541022906, "post_id": 53092489, "comment_id": 93081710, "body": "Read the input into something and then compare it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6948903"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541023220, "post_id": 53092489, "comment_id": 93081811, "body": "Yea that is an option but what if the input can be in two possible formats and I have two scanf functions and I need to decide which one to use based on the format of the input?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541026734, "post_id": 53092489, "comment_id": 93082838, "body": "Read the input first regardless of its actual format, and then compare the contents of the input against the formats you need."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541027090, "post_id": 53092489, "comment_id": 93082936, "body": "Does the character between &quot;{&quot; and &quot;[&quot; need to be exactly 1 <code>&#39; &#39;</code> for <i>good</i> input?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6948903"}, "edited": false, "score": 0, "creation_date": 1541067730, "post_id": 53092489, "comment_id": 93094196, "body": "No for my purpose one space is enough important part is the order of the characters for example scanf(&quot;{ [ , :&quot;) and I want to compare it to lets say this scanf(&quot;{ [ : ,&quot;) and decide what to do next in my program based on the order of these characters"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541026849, "post_id": 53092571, "comment_id": 93082877, "body": "The return  of <code>scanf()</code> is not needed here.  <code>pos = -1; scanf(&quot;{ [%n&quot;, &amp;pos); if (pos&gt;0) ...</code> is sufficient."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541061579, "post_id": 53092571, "comment_id": 93091361, "body": "Only because I initialized <code>pos</code> to -1"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1541023682, "last_edit_date": 1541023682, "creation_date": 1541023377, "answer_id": 53092571, "question_id": 53092489, "link": "https://stackoverflow.com/questions/53092489/check-scanf-formating-without-conversions/53092571#53092571", "title": "Check scanf formating without conversions", "body": "<p>You might use the <code>%n</code> conversion of <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> (it sets below into <code>pos</code> the number of characters read so far)</p>\n\n<pre><code>int pos= -1;\nif (scanf(\"{ [%n\", &amp;pos) &gt;=0 &amp;&amp; pos&gt;0) \n   printf(\"GOOD INPUT\\n\");\nelse \n   printf(\"BAD INPUT\");\n</code></pre>\n\n<p>Beware, the return count of <code>scanf</code> might be implementation specific (it probably stays at 0). But  <code>pos</code> get assigned to a positive offset of <code>scanf</code> did get <code>{</code> followed by some (zero or more) space-like characters followed by a <code>[</code>.</p>\n\n<p>However, what you probably want is some <a href=\"https://en.wikipedia.org/wiki/Lexical_analysis\" rel=\"nofollow noreferrer\">lexical analysis</a> and <a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a>, then  <code>scanf</code> is not a good solution. You'll better read the entire line (e.g. with <code>fgets</code> or <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">getline</a>) and parse it later.</p>\n\n<p>See also the <code>man</code> page of <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow noreferrer\">scanf(3)</a></p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 2, "last_activity_date": 1541031544, "last_edit_date": 1541031544, "creation_date": 1541024563, "answer_id": 53092771, "question_id": 53092489, "link": "https://stackoverflow.com/questions/53092489/check-scanf-formating-without-conversions/53092771#53092771", "title": "Check scanf formating without conversions", "body": "<p><code>scanf</code> (and cousins) returns a count of the number of successful conversions. If you specify 0 conversions, then its return value will always be 0.</p>\n\n<p>To use <code>scanf</code> for this task, I'd probably use a couple of scanset conversions:</p>\n\n<pre><code>char a[2], b[2];\nif (scanf(\"%1[{] %1[[]\", &amp;a, &amp;b) == 2)\n    printf(\"Matched\");\n</code></pre>\n\n<p>Or, you could simplify this a little bit:</p>\n\n<pre><code>char a[2];\nif (scanf(\"{ %1[[]\", &amp;a) == 1)\n</code></pre>\n\n<p>Either way, we've specified each scan set to match only one specified character, but it's still a conversion, so we can see whether it succeeded or failed.</p>\n\n<p>Unfortunately, we still have to assign the result somewhere. <code>scanf</code> does support using <code>*</code> like this: \"%*s\", to tell it to read a string, but not store the result anywhere--but when you do so, that conversion doesn't get counted in the return value, so (much like before) we can't use it to determine whether we got a match or not.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1541042560, "last_edit_date": 1541042560, "creation_date": 1541027561, "answer_id": 53093168, "question_id": 53092489, "link": "https://stackoverflow.com/questions/53092489/check-scanf-formating-without-conversions/53093168#53093168", "title": "Check scanf formating without conversions", "body": "<p>If <em>good</em> input needs to exactly 3 characters: <kbd>{</kbd> <kbd>space</kbd> <kbd>[</kbd>, use <code>\"%*1[ ]\"</code> to scan a space and <code>\"%n\"</code>, which saves the scan character count, to insure scanning reach the expected end.</p>\n\n<pre><code>int main(void) {\n  int n = -1;\n  scanf(\"{%*1[ ][%n\", *n);\n  if (n &gt;= 0) {\n    printf(\"GOOD INPUT\\n\");\n  } else {\n    printf(\"BAD INPUT\\n\");\n  }\n  return 0;\n} \n</code></pre>\n\n<p>I'd recommend to read a <em>line</em> of input with <code>fgets()</code> first and then parse the buffer.  That can leave <code>stdin</code> in a better known state when <em>bad</em> input happens.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6948903"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 53092771, "answer_count": 3, "score": -1, "last_activity_date": 1541042560, "creation_date": 1541022825, "question_id": 53092489, "link": "https://stackoverflow.com/questions/53092489/check-scanf-formating-without-conversions", "title": "Check scanf formating without conversions", "body": "<p>Is there a way how to check if some specific characters were given on input using scanf without using character conversions?</p>\n\n<pre><code>int main(void)\n{\nif(scanf(\"{ [\"))\n    printf(\"GOOD INPUT\\n\");\nelse\n    printf(\"BAD INPUT\\n\");\nreturn 0;\n}     \n</code></pre>\n\n<p>This code always gives the bad input option (it expects scanf return value to be 1) but interestingly if I enter other than the desired characters it gives the bad input imediately but if I enter it as its specified in the scanf it blows the bad input at me AFTER I enter the whole input.</p>\n\n<p>So it must be awaiting the input to be in that specified format but my question is: How can I check it, without any conversions, and make according action depending on wether the input was entered correctly or not?</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "locking", "spinlock"], "comments": [{"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1541022511, "post_id": 53092407, "comment_id": 93081592, "body": "What exactly would you expect to change when <code>destroy()</code> is called?"}, {"owner": {"reputation": 45, "user_id": 9611276, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "lospollos", "link": "https://stackoverflow.com/users/9611276/lospollos"}, "reply_to_user": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1541023808, "post_id": 53092407, "comment_id": 93081993, "body": "That the resource which is held by the lock, gets available for other threads."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1541029181, "post_id": 53092407, "comment_id": 93083481, "body": "<i>I would expect that the spinlock gets destroyed and the other threads can act as if there is no lock.</i> Just why would you expect that?  If you try to use a lock after you destroy it, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_spin_destroy.html\" rel=\"nofollow noreferrer\">you invoke undefined behavior</a>: &quot;The pthread_spin_destroy() function shall destroy the spin lock referenced by lock and release any resources used by the lock. The effect of subsequent use of the lock is undefined...&quot;"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1541029695, "post_id": 53092407, "comment_id": 93083590, "body": "Yep, the problem is your expectation. There&#39;s no reason you should expect that. You could equally well expect that the system will crash since you&#39;re trying to access something that is no longer valid. You could also expect it to work just fine because there probably aren&#39;t any resources used by the lock. None of these expectations are justified unless you have detailed knowledge about how the particular platform implements spinlocks."}], "answers": [{"tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 2, "last_activity_date": 1541029264, "creation_date": 1541029264, "answer_id": 53093369, "question_id": 53092407, "link": "https://stackoverflow.com/questions/53092407/what-exact-resources-are-released-when-calling-pthread-spin-destroy/53093369#53093369", "title": "What exact &quot;resources&quot; are released, when calling pthread_spin_destroy()?", "body": "<p>The resources released by <code>pthread_spin_destroy()</code> are whatever resources the implementation needed to allocate to implement the spinlock as part of <code>pthread_spin_init()</code> (which, depending on the implementation, may be \"none at all\").</p>\n\n<p>It's undefined behaviour to call <code>pthread_spin_lock()</code> again on the lock after you've called <code>pthread_spin_destroy()</code>, until another call to <code>pthread_spin_init()</code>.  It's just a deallocation function: don't call it unless you're completely done with the lock and won't need to lock it again (typically, you'd call <code>pthread_spin_destroy()</code> on a spin lock that is embedded in another data structure that you're about to free).</p>\n"}], "owner": {"reputation": 45, "user_id": 9611276, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "lospollos", "link": "https://stackoverflow.com/users/9611276/lospollos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 53093369, "answer_count": 1, "score": -1, "last_activity_date": 1541029264, "creation_date": 1541022360, "last_edit_date": 1541024049, "question_id": 53092407, "link": "https://stackoverflow.com/questions/53092407/what-exact-resources-are-released-when-calling-pthread-spin-destroy", "title": "What exact &quot;resources&quot; are released, when calling pthread_spin_destroy()?", "body": "<p><br>\nI have a question regarding the phread_spin_destroy() function. In the posix standard it is defined as follows:</p>\n\n<blockquote>\n  <p>The pthread_spin_destroy() function shall destroy the spin lock referenced by lock and release any resources used by the lock. </p>\n</blockquote>\n\n<p>So if there are 2 functions. One function, that gets called by many threads, holds a spinock and increments for example a global variable (in the example <strong>foo()</strong> called).<br> And another function (in the example <strong>destroy()</strong> called), who gets called by one thread, after the first function gets called and calls pthread_spin_destroy().\nThese functions could look like this for example:</p>\n\n<pre><code>void* foo(void* i) {\n   pthread_spin_lock(&amp;LOCK); //lock the spinlock\n   sleep(2); //sleep a little\n   globalvariable++; //increment\n   printf(\"globalvariable: %d\\n\", globalvariable); //print for debug purpose\n   pthread_spin_unlock(&amp;LOCK); //spinlock gets unlocked\n   return NULL;\n}\n\nvoid* destroy(void* i) {\n    sleep(5); //sleep\n    pthread_spin_destroy(&amp;LOCK); //destroy the lock\n    return NULL; //return\n}\n</code></pre>\n\n<p><em>Please note, that \"LOCK\" is a global declared variable from type pthread_spin_t and that LOCK gets initialised with (pthread_spin_init(&amp;LOCK,0)) before foo() gets called.</em> </p>\n\n<p>The output BEFORE calling destroy() is as expected: the function increments the global variable very slowly (because of the sleep(2)). <br>\nBut if i call the destroy() function, nothing changes. And this part is confusing me. <br>\n<strong>My question is:</strong>\nIs my understanding of pthread_spin_destroy() wrong? Is it only releasing the resource \"LOCK\" (I mean this one pthread_spin_t LOCK variable)? <br>\nI would expect that the spinlock gets destroyed and the other threads can act as if there is no lock. <br>\nThank you in advance</p>\n"}, {"tags": ["c", "linker", "symbol-table"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1541022497, "post_id": 53092384, "comment_id": 93081589, "body": "You haven&#39;t said why you think you need to do this - for example, why is the struct instance global?"}, {"owner": {"reputation": 607, "user_id": 8225336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418c2e0a00933c6e12a63c1bca55ea27?s=128&d=identicon&r=PG&f=1", "display_name": "tangoal", "link": "https://stackoverflow.com/users/8225336/tangoal"}, "edited": false, "score": 0, "creation_date": 1541023069, "post_id": 53092384, "comment_id": 93081764, "body": "Is it worth to not recompile it? Anyway, I think it would be possible, if you do the memory management by yourself instead by the struct. So you create a centralized byte array an some class, which alllows access to some of the bytes."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1541026568, "post_id": 53092384, "comment_id": 93082797, "body": "You might be able to make use of the <code>offsetof</code> macro from <code>&lt;stddef.h&gt;</code>."}, {"owner": {"reputation": 923, "user_id": 3152071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb7561f4a73c8ec8c2999c8927f7696?s=128&d=identicon&r=PG&f=1", "display_name": "bigjosh", "link": "https://stackoverflow.com/users/3152071/bigjosh"}, "edited": false, "score": 0, "creation_date": 1541039228, "post_id": 53092384, "comment_id": 93085495, "body": "@NeilButterworth this is to implement shared memory as a way for a bootloader and application to communicate with each other."}, {"owner": {"reputation": 923, "user_id": 3152071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb7561f4a73c8ec8c2999c8927f7696?s=128&d=identicon&r=PG&f=1", "display_name": "bigjosh", "link": "https://stackoverflow.com/users/3152071/bigjosh"}, "reply_to_user": {"reputation": 607, "user_id": 8225336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418c2e0a00933c6e12a63c1bca55ea27?s=128&d=identicon&r=PG&f=1", "display_name": "tangoal", "link": "https://stackoverflow.com/users/8225336/tangoal"}, "edited": false, "score": 0, "creation_date": 1541039345, "post_id": 53092384, "comment_id": 93085518, "body": "@tangoal one of the files must be very specially compiled so can only be distributed in pre-compiled object form."}, {"owner": {"reputation": 923, "user_id": 3152071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb7561f4a73c8ec8c2999c8927f7696?s=128&d=identicon&r=PG&f=1", "display_name": "bigjosh", "link": "https://stackoverflow.com/users/3152071/bigjosh"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1541039701, "post_id": 53092384, "comment_id": 93085573, "body": "@SteveSummit, this looks promising! Maybe I could add the offset to the base of the <code>s</code> global and then use something like the gcc <code>at</code> <i>_attribte</i> to fix a new <code>int</code> at the same address as the computed address of <code>s.public</code>? I&#39;ll give it try! Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 923, "user_id": 3152071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb7561f4a73c8ec8c2999c8927f7696?s=128&d=identicon&r=PG&f=1", "display_name": "bigjosh", "link": "https://stackoverflow.com/users/3152071/bigjosh"}, "edited": false, "score": 0, "creation_date": 1541039057, "post_id": 53092460, "comment_id": 93085468, "body": "On this platform it is not possible to call code across files since the files live in different kinds of memory (one is application and one is bootloader), so I can only share data in fixed locations in RAM."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 4, "last_activity_date": 1541022985, "last_edit_date": 1541022985, "creation_date": 1541022662, "answer_id": 53092460, "question_id": 53092384, "link": "https://stackoverflow.com/questions/53092384/in-c-c-is-is-possible-to-export-a-linker-symbol-for-an-offset-inside-a-struct/53092460#53092460", "title": "In C/C++ is is possible to export a linker symbol for an offset inside a struct?", "body": "<p>The easiest way to do this is to keep the type opaque and export accessor funtion(s) for the field:</p>\n\n<pre><code>extern int get_t_public(struct t *);\nextern void set_t_public(struct t *, int);\n</code></pre>\n\n<p>This allows you to also export it read-only (by defining the get without the set), or a variety of other useful things (enforcing some constraints on the value, or caching things dependent on them and invalidating the cache when the value changes and things need to be recomputed.)</p>\n"}], "owner": {"reputation": 923, "user_id": 3152071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb7561f4a73c8ec8c2999c8927f7696?s=128&d=identicon&r=PG&f=1", "display_name": "bigjosh", "link": "https://stackoverflow.com/users/3152071/bigjosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1541022985, "creation_date": 1541022226, "last_edit_date": 1541022451, "question_id": 53092384, "link": "https://stackoverflow.com/questions/53092384/in-c-c-is-is-possible-to-export-a-linker-symbol-for-an-offset-inside-a-struct", "title": "In C/C++ is is possible to export a linker symbol for an offset inside a struct?", "body": "<p>In one file I have a struct like...</p>\n\n<pre><code>struct t {\n    int private;\n    int public;\n};\n\nstruct t s;\n</code></pre>\n\n<p>One way to have other object files be able to access <code>s.public</code> would be to put...</p>\n\n<pre><code>struct t {\n    int private;\n    int public;\n};\n\nextern struct t s;\n</code></pre>\n\n<p>...into a header file and the have the other files reference <code>s.public</code>. </p>\n\n<p>I'd like to avoid this because it locks in the offset between between the base of <code>s</code> and the base of <code>public</code> in any object files that reference <code>s.public</code>. This means that these files would have the wrong address for <code>public</code> if I ever added a new <code>private2</code> after <code>private</code> it would require a recompile.</p>\n\n<p>Instead I'd like to find a way to export the location of symbol <code>s.public</code> as maybe <code>s_public_direct</code> directly rather than as <code>s</code> with an offset to `public. So other files would then only need the header...</p>\n\n<pre><code>extern int s_public_direct;\n</code></pre>\n\n<p>...and would have no knowledge of the layout (or even existence) of the structure that <code>public</code> happens to live in. </p>\n\n<p>Is there any way to export a symbol reference for a variable that lives inside a structure in C/C++? If not, is there an elegant way to solve this problem?</p>\n\n<p>Note that is not a scoping issue so marking <code>private</code> with C++ <code>private:</code> would not change the fact that the referencing object file would still get passed the base address of the enclosing struct and then would add the offset to get to <code>public</code>. I am really looking for some kind of C/C++ syntax that tells the compiler to export a symbol of a variable that is in inside a struct. Or maybe a way to declare a new exportable symbol like <code>int s_public_direct</code> as an alias for the variable inside the struct. </p>\n"}, {"tags": ["c", "malloc", "realloc", "sigabrt"], "comments": [{"owner": {"reputation": 15704, "user_id": 98811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a39841a671dd2148aa4182f8e3c45743?s=128&d=identicon&r=PG", "display_name": "Devon_C_Miller", "link": "https://stackoverflow.com/users/98811/devon-c-miller"}, "edited": false, "score": 0, "creation_date": 1541046004, "post_id": 53092178, "comment_id": 93086704, "body": "That&#39;s potentially a lot of reallocating. Consider <code>doubleChar(&quot;!!!AhHa!!!&quot;, &#39;!&#39;)</code> A quicker approach is to loop over the string once counting the number of matching characters, then allocate the space to hold the original string + count of matches + 1 (for the terminating nul). Copy the characters in a second loop, adding the duplicate characters as you go. One malloc and no reallocs."}, {"owner": {"reputation": 41, "user_id": 10588203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c43c2d4982182958ef370ab36112f9f?s=128&d=identicon&r=PG&f=1", "display_name": "colin", "link": "https://stackoverflow.com/users/10588203/colin"}, "reply_to_user": {"reputation": 15704, "user_id": 98811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a39841a671dd2148aa4182f8e3c45743?s=128&d=identicon&r=PG", "display_name": "Devon_C_Miller", "link": "https://stackoverflow.com/users/98811/devon-c-miller"}, "edited": false, "score": 0, "creation_date": 1541066618, "post_id": 53092178, "comment_id": 93093643, "body": "That&#39;s a really good idea!"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10588203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c43c2d4982182958ef370ab36112f9f?s=128&d=identicon&r=PG&f=1", "display_name": "colin", "link": "https://stackoverflow.com/users/10588203/colin"}, "edited": false, "score": 0, "creation_date": 1541022466, "post_id": 53092206, "comment_id": 93081581, "body": "Thank you, your answer was clear and it did fix my issue. I was putting sizeof(char) because i wasn&#39;t sure if it was always 1 between platforms."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 41, "user_id": 10588203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c43c2d4982182958ef370ab36112f9f?s=128&d=identicon&r=PG&f=1", "display_name": "colin", "link": "https://stackoverflow.com/users/10588203/colin"}, "edited": false, "score": 0, "creation_date": 1541046901, "post_id": 53092206, "comment_id": 93086842, "body": "@colin The size of char itself can be bigger than 8 bits, but it always returns sizeof char == 1. If you need to know about the bits in a char there&#39;s a C required macro CHAR_BIT which tells you."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1541022049, "last_edit_date": 1541022049, "creation_date": 1541021354, "answer_id": 53092206, "question_id": 53092178, "link": "https://stackoverflow.com/questions/53092178/error-on-realloc-corrupted-size-vs-prev-size/53092206#53092206", "title": "Error on realloc : corrupted size vs. prev_size", "body": "<pre><code>char *newString=malloc(sizeof(str) * sizeof(char));\n</code></pre>\n\n<p>Since <code>str</code> is a <code>const char *</code>, the <code>sizeof(str)</code> is how many bytes a <code>const char *</code> takes on your platform. That's not what you want. What you want to pass to <code>malloc</code> is the length of the string you want to store, making sure to leave an extra byte for the terminating zero. In this case, that's <code>(strlen(str) + 1)</code>.</p>\n\n<pre><code>newString = (char *)realloc(newString, stringLength(newString)*sizeof(char) + sizeof(char));\n</code></pre>\n\n<p>This is probably also wrong. You need <code>(strlen(newString) + 2)</code> to leave one byte for the newly-added character and one byte for the zero terminator. It's hard to be sure though because I can't tell what your <code>stringLength</code> function does.</p>\n\n<p>Also, <code>sizeof(char)</code> is, by definition, one. The <code>sizeof</code> function returns the size in characters.</p>\n\n<p>It's much easier to understand <code>strlen(newString) + 2</code> than <code>stringLength(newString)*sizeof(char) + sizeof(char)</code> because <code>strlen</code> is a standard function and <code>sizeof(char)</code> is verbose and ugly. So I'd strongly suggest changing this to <code>strlen(newString) + 2</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 10588203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c43c2d4982182958ef370ab36112f9f?s=128&d=identicon&r=PG&f=1", "display_name": "colin", "link": "https://stackoverflow.com/users/10588203/colin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2210, "favorite_count": 0, "accepted_answer_id": 53092206, "answer_count": 1, "score": -1, "last_activity_date": 1541045489, "creation_date": 1541021150, "last_edit_date": 1541045489, "question_id": 53092178, "link": "https://stackoverflow.com/questions/53092178/error-on-realloc-corrupted-size-vs-prev-size", "title": "Error on realloc : corrupted size vs. prev_size", "body": "<p>I'm coding in C.\nThe goal of my algorithm is to double each char c we find in an array str.\nI have to run a few tests, for the first test I call <code>doubleChar(\"~/fichier.txt\", '~')</code> and it works fine, but my second test is <code>doubleChar(\"une commande # commentaire\", '#')</code> and I get the error from the title.\nWhen i tried to debug it, the error was on the realloc line.</p>\n\n<p>In debugger I get this error: </p>\n\n<blockquote>\n  <p>Program Received signal SIGABRT Stack trace is available in the 'Call Stack' tab</p>\n</blockquote>\n\n<p>Any idea why?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>    char * doubleChar(const char *str, char c){\nassert(str!=NULL);\n    char *newString=malloc(sizeof(str) * sizeof(char));\n    int a = 0;\n    while(str[a] != '\\0'){\n        newString[a]=str[a];\n        a++;\n    }\n    newString[a]='\\0';\n    int i = 0;\n    while(newString[i] != '\\0'){\n        if(newString[i] == c){\n            newString = (char *)realloc(newString, stringLength(newString)*sizeof(char) + sizeof(char));\n            for(int j=stringLength(newString)+1; j&gt;i; j--){\n                newString[j]=newString[j-1];\n            }\n            i++; //we add 1 to i so we don't find the char we just added\n        }\n        i++;\n    }\n    return newString;\n}\n</code></pre>\n"}, {"tags": ["c", "primes"], "comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1541019951, "post_id": 53091933, "comment_id": 93080676, "body": "Change <code>n = atof (argv[1]);</code> to <code>n = atoi (argv[1]);</code>.  <code>atof</code> returns a <code>float</code> value, not an <code>int</code>."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1541019981, "post_id": 53091933, "comment_id": 93080687, "body": "<code>atof</code> converts a string to double, not int."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541020131, "post_id": 53091933, "comment_id": 93080732, "body": "Begin by trying to build the code, and then fix the errors (and warnings!) that the compiler will show you. And you will get a few errors and warnings from that code shown."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541020213, "post_id": 53091933, "comment_id": 93080762, "body": "Oh and please take <a href=\"http://stackoverflow.com/tour\">the SO tour</a>, read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a> as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1541020605, "post_id": 53091933, "comment_id": 93080899, "body": "<code>isprime()</code> is declared with a <code>void</code> return value, yet is returning <code>int</code>s. That isn&#39;t going to work."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1541020607, "post_id": 53091933, "comment_id": 93080902, "body": "input? expected output? actual output?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541020833, "post_id": 53091933, "comment_id": 93081002, "body": "Note: <code>for (m = 2; m &lt;= n&#47;m; m++)</code> finds non-primes a lot faster than <code>for (m = 2; m &lt;= n - 1; m++)</code>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1541021184, "post_id": 53091933, "comment_id": 93081125, "body": "&quot;should be able to handle numbers greater than 4 billion&quot; - You can&#39;t do that with <code>int</code> or <code>long</code>. Floating point isn&#39;t well suited for determining primes. I&#39;m not sure what technique your assignment is supposed to cover. Using <code>long long</code>? <code>fmod()</code>?"}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1541021351, "post_id": 53091933, "comment_id": 93081184, "body": "@FredLarson, I never heard of &quot;long long&quot; but I believe I heard of fmod() which it is for file mod?"}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1541021470, "post_id": 53091933, "comment_id": 93081234, "body": "@FredLarson, also yes you&#39;re right &#39;isprime()&#39; isn&#39;t working but I always use this function often now but why isn&#39;t it working?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1541022204, "post_id": 53091933, "comment_id": 93081495, "body": "See <a href=\"https://en.cppreference.com/w/c/numeric/math/fmod\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/numeric/math/fmod</a> for info on <code>fmod</code>. I can&#39;t see how your code is compiling with <code>isprime</code> declare to return <code>void</code>."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541022754, "post_id": 53091933, "comment_id": 93081660, "body": "I am still confusing but what could I start with &quot;isprime&quot; on fmod?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1541023185, "post_id": 53091933, "comment_id": 93081801, "body": "Replace <code>n%m</code> with <code>fmod(n, m)</code>. But <code>n</code> and <code>m</code> as well as <code>n</code> in <code>main()</code> will have to be <code>double</code>. And you have to change your <code>printf</code> format specifier too."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541023630, "post_id": 53091933, "comment_id": 93081943, "body": "Do you mean from &#39; int n; &#39; to &#39; double n; &#39;?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1541024666, "post_id": 53091933, "comment_id": 93082251, "body": "<code>int n  .... int m; ... fmod(n, m)</code> makes no sense to use here versus <code>n%m</code>."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 1, "creation_date": 1541027598, "post_id": 53092861, "comment_id": 93083070, "body": "&#39;p4: -1.0 output of program (p4) is not correct for input &#39;9872349871&#39;: ------ Yours: ------ 1282415279 is not prime ---- Reference: ---- 9872349871 is not prime --------------------&#39;"}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541027628, "post_id": 53092861, "comment_id": 93083079, "body": "Sorry but I&#39;m bad with formatting cause I&#39;m new to SO"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 1, "creation_date": 1541027785, "post_id": 53092861, "comment_id": 93083118, "body": "@MikeODell You are not using the correct type, or functions, or <code>printf()</code> specifiers in the calling code.  Still using <code>atoi()</code>?  To well convert strings to large integers research <code>strtoull()</code>, <code>strtoumax()</code>,<code>strtoll()</code>.  I did not attempt to list nor fix the various weaknesses with <code>main()</code>.  Hint: 9872349871 is 0x24C701AAF and 1282415279 is 0x4C701AAF."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541029351, "post_id": 53092861, "comment_id": 93083530, "body": "What? I do not understand what do you mean but it&#39;s works when I compile and the result isn&#39;t correct."}, {"owner": {"reputation": 710, "user_id": 5420934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3ae2cd99bdff22a45b094e2811f34b?s=128&d=identicon&r=PG&f=1", "display_name": "waterjuice", "link": "https://stackoverflow.com/users/5420934/waterjuice"}, "edited": false, "score": 1, "creation_date": 1541031189, "post_id": 53092861, "comment_id": 93083893, "body": "The loop can be cut down to half the time by only bothering with odd numbers. I&#39;d do the divide by 2 separately first then change the for loop to start at 3 and increment by two each time."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 710, "user_id": 5420934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3ae2cd99bdff22a45b094e2811f34b?s=128&d=identicon&r=PG&f=1", "display_name": "waterjuice", "link": "https://stackoverflow.com/users/5420934/waterjuice"}, "edited": false, "score": 0, "creation_date": 1541042452, "post_id": 53092861, "comment_id": 93086075, "body": "@waterjuice As mentioned in the answer, &quot;Many performance optimization are possible&quot;.  The classic only check for even does not reduce the O() and so is only a minor improvement.  Keeping a list of prior known primes and/or the <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">Sieve of Eratosthenes</a> are quite significant improvements."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1541025899, "last_edit_date": 1541025899, "creation_date": 1541025177, "answer_id": 53092861, "question_id": 53091933, "link": "https://stackoverflow.com/questions/53091933/prime-or-not-prime-from-interger-in-function/53092861#53092861", "title": "Prime or Not Prime from Interger in Function", "body": "<blockquote>\n  <p>'isprime()' isn't working but I always use this function often now but why isn't it working?</p>\n</blockquote>\n\n<p><code>void isprime (int n)</code> --> A return of <code>void</code> from a prime test makes no sense.  this is a fatal design flaw.  </p>\n\n<p>As <code>isprime(int n)</code> has <code>return 0;</code> to a <code>void isprime (int n)</code> function.  A  fatal error. This <em>should</em> spark warnings with a well enabled compiler.  <strong>Enable all warnings to save time.</strong></p>\n\n<p><code>if ((fmod(n, m)) == 0)</code> makes no sense with <code>int</code> arguments <code>n,m</code>.  I'd expect <code>if (n%m == 0)</code>. Converting to floating point is hugely inefficient here and often incorrect as a prime test when <code>int</code> precision exceed <code>double</code>.</p>\n\n<p><code>int</code> range is often insufficient to values in the 4 billion range.  Recommend the widest <em>unsigned</em> type.  To handle <code>9872349901</code>, use <code>unsigned long long</code> or <code>uintmax_t</code>. <a href=\"https://stackoverflow.com/questions/53091933/prime-or-not-prime-from-interger-in-function/53092861#comment93081125_53091933\">@Fred Larson</a></p>\n\n<p><code>for (m = 2; m &lt;= n - 1; m++)</code> is painfully slow for large non-prime <code>n</code>.  Only iterate to the square root: when the quotient exceeds the divisor.</p>\n\n<p><code>isprime(0)</code> and <code>isprime(1)</code> return the wrong result.</p>\n\n<p><strong>Alternate</strong></p>\n\n<pre><code>int isprime(unsigned long long n) {\n  unsigned long long m;\n  for (m = 2; m &lt;= n/m; m++) {\n    if (n%m == 0) {\n      return false;\n    }\n  }\n  return n &gt; 1;\n}\n</code></pre>\n\n<p><em>Many</em> performance optimization are possible for <code>isprime()</code>. <a href=\"https://en.wikipedia.org/wiki/Primality_test\" rel=\"nofollow noreferrer\">Primality test</a></p>\n"}], "owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541029727, "creation_date": 1541019824, "last_edit_date": 1541029727, "question_id": 53091933, "link": "https://stackoverflow.com/questions/53091933/prime-or-not-prime-from-interger-in-function", "title": "Prime or Not Prime from Interger in Function", "body": "<p>I don't understand why it does't output what it is supposed to. I have redone it three times, but it doesn't properly output if an <code>int</code> is a prime or not. </p>\n\n<pre><code>/**\n * Make a function called isprime that returns true (i.e. 1) if the integer\n * number passed to it is prime and false (i.e. 0) if it is composite (i.e.\n * not prime.)  A number is composite if it is divisible by 2 or any odd number\n * up to the square root of the number itself, otherwise it is prime.\n * Hint: n is divisible by m if (n % m == 0)\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint isprime(unsigned long long n) {\n  unsigned long long m;\n  for (m = 2; m &lt;= n/m; m++) {\n    if (n%m == 0) {\n      return false;\n    }\n  }\n  return n &gt; 1;\n}\n\n/**\n * Using the isprime function you made above, test if a number provided on the\n * command line is prime or not. The program should print a usage message if no\n * number is provided (\"Usage: p4 &lt;number&gt;\\n\") and print a warning if the number\n * is less than 2 (\"input number should be &gt; 1\\n\") and should be able to handle\n * numbers greater than 4 billion.\n *\n * Example input/output:\n * ./p4 9872349901\n * 9872349901 is prime\n * ./p4 65\n * 65 is not prime\n */\n\nint main (int argc, char *argv[])\n{\n  int n;\n  int result;\n\n  if (argc &lt; 2)\n    {\n      printf (\"Usage: p4 &lt;number&gt;\\n\");\n    }\n  n = atoi (argv[1]);\n\n  if (n &lt; 2)\n    {\n      printf (\"input number should be &gt; 1\\n\");\n    }\n  result = isprime (n);\n\n  if (result == 1)\n    printf (\"%d is prime\\n\", n);\n  else\n    printf (\"%d is not prime\\n\", n);\n  return 0;\n}\n</code></pre>\n\n<p>UPDATED</p>\n\n<p>After check compile:</p>\n\n<pre><code>&gt; p4:\n&gt; Output of program (p4) is not correct for input '9872349871':\n&gt; ------ Yours: ------ \n&gt; 1282415279 is not prime\n&gt; ---- Reference: ---- \n&gt; 9872349871 is not prime\n&gt; --------------------\n</code></pre>\n"}, {"tags": ["c", "c99"], "comments": [{"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 1, "creation_date": 1541019389, "post_id": 53091808, "comment_id": 93080470, "body": "Where do you see &quot;implicit declaration&quot; anywhere?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1541019546, "post_id": 53091808, "comment_id": 93080519, "body": "Can&#39;t reproduce. There is no error for <code>getline</code> (although there are other issues with this code)"}, {"owner": {"reputation": 37, "user_id": 10421378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ebd9b8d58babde3a6583f6c5dc0ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Jak", "link": "https://stackoverflow.com/users/10421378/jak"}, "edited": false, "score": 0, "creation_date": 1541019626, "post_id": 53091808, "comment_id": 93080559, "body": "Yes I know what too many arguments mean, but I believe I am giving the correct number of arguments:"}, {"owner": {"reputation": 37, "user_id": 10421378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ebd9b8d58babde3a6583f6c5dc0ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Jak", "link": "https://stackoverflow.com/users/10421378/jak"}, "edited": false, "score": 0, "creation_date": 1541019745, "post_id": 53091808, "comment_id": 93080607, "body": "I updated to show all the errors I am getting"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1541020157, "post_id": 53091808, "comment_id": 93080745, "body": "<code>getline</code> is not a C standard function, so it won&#39;t be declared by default in conforming mode. (And when it&#39;s declared, it&#39;s in <code>&lt;stdio.h&gt;</code>, not <code>&lt;stdlib.h&gt;</code>.)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1541027271, "post_id": 53091808, "comment_id": 93082982, "body": "@jack: the errors you pasted do not correspond to the code. Those errors are the result of an attempt you made to fix the original error by explicitly declaring <code>getline</code>; it didn&#39;t work because you used the wrong declaration. It is really important that code, errors, and output (if applicable) are all exactly the same version of the code. Otherwise, your question becomes confusing and downvotes are likely (as in this case). Please check twice for consistency before hitting the &quot;Post&quot; button."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 3, "last_activity_date": 1541020024, "creation_date": 1541020024, "answer_id": 53091970, "question_id": 53091808, "link": "https://stackoverflow.com/questions/53091808/how-to-fix-a-implicit-declaration-error-in-c99/53091970#53091970", "title": "How to fix a implicit declaration error in C99?", "body": "<p>Please see the section \"Feature test macros requirements\" in the <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">manpage</a>:</p>\n\n<blockquote>\n  <p>Feature Test Macro Requirements for glibc (see feature_test_macros(7)):</p>\n</blockquote>\n\n<pre><code>   getline(), getdelim():\n       Since glibc 2.10:\n           _POSIX_C_SOURCE &gt;= 200809L\n</code></pre>\n\n<p>What this means is that you need to put</p>\n\n<pre><code>#define _POSIX_C_SOURCE 200809L\n</code></pre>\n\n<p><em>before</em> all your <code>#include</code> statements. (I.e.at the beginning of the source file). If you don't do this, the header file will not declare <code>getline</code> or <code>getdelim</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 10421378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ebd9b8d58babde3a6583f6c5dc0ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Jak", "link": "https://stackoverflow.com/users/10421378/jak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1541020123, "creation_date": 1541019228, "last_edit_date": 1541020081, "question_id": 53091808, "link": "https://stackoverflow.com/questions/53091808/how-to-fix-a-implicit-declaration-error-in-c99", "title": "How to fix a implicit declaration error in C99?", "body": "<p>I can't understand why I am getting this error surrounding the getline() call. I have imported stdlib.h but I am still getting an \"implicit decleration\" error.</p>\n\n<p>The error is as follows:</p>\n\n<pre><code>mopsolver.c: In function \u2018take_input\u2019:\nmopsolver.c:54:35: error: passing argument 1 of \u2018getline\u2019 from incompatible pointer type [-Wincompatible-pointer-types]\n     while ( 0 &lt; (count = getline( &amp;buf, &amp;len, stdin)) ) {\n                                   ^\n\nmopsolver.c:21:5: note: expected \u2018char *\u2019 but argument is of type \u2018char **\u2019\n int getline(char line[], int maxline);\n     ^~~~~~~\nmopsolver.c:54:41: error: passing argument 2 of \u2018getline\u2019 makes integer from pointer without a cast [-Wint-conversion]\n     while ( 0 &lt; (count = getline( &amp;buf, &amp;len, stdin)) ) {\n                                         ^\n\nmopsolver.c:21:5: note: expected \u2018int\u2019 but argument is of type \u2018size_t * {aka long unsigned int *}\u2019\n int getline(char line[], int maxline);\n     ^~~~~~~\n\nmopsolver.c:54:26: error: too many arguments to function \u2018getline\u2019\n     while ( 0 &lt; (count = getline( &amp;buf, &amp;len, stdin)) ) {\n                          ^~~~~~~\n</code></pre>\n\n\n\n<pre><code>#include &lt;getopt.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdbool.h&gt;\n#include \"myQueue.h\"\n\n#define _DEFAULT_SOURCE\n#define MAXQUEUE 256\nint intArray[MAXQUEUE];\nint itemCount = 0;\n\n//This struct is created for each space in the map\ntypedef struct Space{\n    char character;\n    bool isVisited;\n}Space;\n\n/*\n * This function prints out the help menu to the standard input\n */\nvoid help_menu(){\n    printf(\"\\n\");\n    printf(\"USAGE:\\n\");\n    printf(\"mopsolver [-hdsp] [-i INFILE] [-o OUTFILE]\\n\");\n    printf(\"\\n\");\n    printf(\"Options:\\n\");\n    printf(\"        -h      Print this helpful message to stdout and exit.\\n\");\n    printf(\"        -d      Pretty print (display) the maze after reading.  (Default: off)\\n\");\n    printf(\"        -s      Print shortest solution steps.        \\t\\t(Default: off)\\n\");\n    printf(\"        -p      Print an optimal path.                \\t\\t(Default: off)\\n\");\n    printf(\"        -i INFILE       Read maze from INFILE.        \\t\\t(Default: stdin)\\n\");\n    printf(\"        -o OUTFILE      Write all output to OUTFILE.  \\t\\t(Default: stdout)\\n\\n\");\n}\n\nint take_input(){\n    char * buf = NULL;\n    char *fileName=optarg;\n    size_t len = 0;\n    int count = 0;\n    FILE * fp = fopen( fileName, \"r\");\n    assert(fp);\n\n    while ( 0 &lt; (count = getline( &amp;buf, &amp;len, stdin)) ) {\n        char * tok = strtok( buf, \" \\t\\n\");\n        while ( tok ) {\n            printf( \"%c \", *tok);\n            tok = strtok( NULL, \" \\n\");\n        }\n        printf( \"\\n\");\n    }\n    printf( \"last count == %d\\n\", count);\n    free( buf);\n    fclose( fp);\n    return EXIT_SUCCESS;\n}\n\nint main(int argc, char *argv []){\n    //The options for the flags\n    int opt;\n\n    //checks to see if we were passed in the correct number of input\n    if ( argc &lt; 2 ) {\n        fprintf( stderr, \"usage: getfile filename\\n\");\n        return EXIT_FAILURE;\n    }\n\n    //define {row,col}\n    int N,M = 0;\n\n    //checks the flags inputed\n    while ((opt = getopt(argc  ,argv,\"hdspi:o:\")) != -1){\n        switch (opt){\n            case 'd':\n                //pretty print\n                take_input();\n                break;\n            case 'h':\n                //help\n                help_menu();\n                break;\n            case 's':\n                //shortest solution\n\n                break;\n            case 'p':\n                //optimal path\n\n                break;\n            case 'o':\n                //output\n\n                break;\n            case 'i':\n                //input\n                take_input();\n                break;\n            default:break;\n        }\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I have tried a lot of different ways to fix this but nothing seems to work. C noob here please help:/</p>\n"}, {"tags": ["c", "string", "integer", "embedded", "ascii"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1541019149, "post_id": 53091559, "comment_id": 93080361, "body": "You&#39;re starting from a bad/incorrect example. Use the second code block in this answer: <a href=\"https://stackoverflow.com/a/33438748/5382650\">stackoverflow.com/a/33438748/5382650</a> for <code>strtoi</code> as a guide"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541020154, "post_id": 53091559, "comment_id": 93080743, "body": "Note that the function definitions end at the <code>}</code> \u2014 the semicolon after the <code>}</code> is not needed, as it marks the end of an empty variable definition, or therebouts."}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1541026543, "post_id": 53091559, "comment_id": 93082791, "body": "@ Craig: I don&#39;t really understand the code in that segment. would you clarify more. @ Jonathan:which one exactly, because the compiler doesn&#39;t even give an error."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1541027225, "post_id": 53092336, "comment_id": 93082968, "body": "I fixed the first error mentioned under what by doing this:  `                uint8_t* str;                 uint8_t len = strlen((const char <i>)ptr);                 str = (uint8_t</i>) malloc(len * sizeof(uint8_t));                 *str = *ptr; ` does this solve the problem?  and you posted two definitions for my_atoi(), i think I do not need the second one it is more perfect than what I will need.  so, for the first one, what is the function of the leading code?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1541090460, "post_id": 53092336, "comment_id": 93106464, "body": "@MahmoudSaad &quot;function of the leading code&quot; --&gt; <code>value()</code> convert 1 <code>char</code> like <code>&#39;1&#39;</code>, <code>&#39;8&#39;</code>, <code>&#39;a&#39;</code>, <code>&#39;F&#39;</code>,  to 1,8,10,15."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1541023764, "last_edit_date": 1541023764, "creation_date": 1541021996, "answer_id": 53092336, "question_id": 53091559, "link": "https://stackoverflow.com/questions/53091559/facing-a-challenge-writing-my-own-and-my-itoa-and-my-atoi-which-should-change-i/53092336#53092336", "title": "facing a challenge writing my own and my_itoa and my atoi, which should change integer to ascii and vice versa in C", "body": "<p><strong>What?</strong></p>\n\n<pre><code>  str = (uint8_t*) malloc(len * sizeof(uint8_t));\n  while (*str != '\\0')\n</code></pre>\n\n<p>This <code>my_atoi()</code> code makes little sense.  Code allocates memory, whose contents are unknown  - then immediately tries to test them?  </p>\n\n<p>Memory allocation is not needed and then <code>strlen()</code> is not needed.</p>\n\n<p><strong>Character to decimal value</strong></p>\n\n<p>\"I understand this part removes null character: <code>a = *str -'0';</code>\" --> Not quite.  When <code>*str</code> is a digit character, <code>*str -'0'</code> converts the character encoded value (usually ASCII) to its numeric value (like 0 to 9).  </p>\n\n<p><code>*str -'0'</code> is insufficient for hex digits like <code>'a'</code>, and <code>'F'</code>.</p>\n\n<p><strong>Alternative</strong></p>\n\n<p>Instead, iterate through <code>ptr</code> and scale a running sum.</p>\n\n<p>The below does not meet 2 coding goals, which I leave for OP as sub-problems to handle.</p>\n\n<p>** string functions or libraries shouldn't be used.<br>\n** function needs to handle signed data.</p>\n\n<p>.</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n\n// Convert 1 digit\nstatic int value(int ch) {\n  if (isdigit(ch)) {\n    return ch - '0';\n  }\n  if (isxdigit(ch)) {\n    ch = tolower(ch);\n    const char *xdigits = \"abcdef\";\n    return strchr(xdigits, ch) - xdigits  + 10;\n  }\n  return INT_MAX; // non-digit\n}\n\nint32_t my_atoi(uint8_t * ptr, uint8_t digits, uint32_t base) {\n  int32_t sum = 0;\n  while (*ptr) {\n    sum *= base;\n    sum += value(*ptr++);\n  }\n  return sum;\n}\n</code></pre>\n\n<p>Better code would detect non-numeric input, overflow, no conversion, etc.  Other considerations not shown include handling a <code>'-'</code> sign, validating the base in range.</p>\n\n<pre><code>int32_t my_atoi(uint8_t * ptr, uint8_t digits, uint32_t base) {\n  int32_t sum = 0;\n  while (isspace(*ptr)) ptr++;  // skip leading white space\n  if (*ptr == '+')  ptr++;      // Allow optional leading `+`\n  bool digit_found = false;\n\n  while (*ptr) {\n    unsigned digit = value(*ptr++);\n    if (digit &gt;= base) {\n      return INT_MIN; // TBD signal unexpected digit\n    }\n    if (sum &gt;= INT_MAX/base &amp;&amp; (sum &gt; INT_MAX/base || digit &gt; INT_MAX%base)) {\n      // Overflow\n      return INT_MIN; // TBD signal OF\n    }\n    sum *= base;\n    sum += digit;\n    digit_found = true;\n  }\n\n  if (*str) {\n    sum = INT_MIN; // TBD signal unexpected junk at the end\n  }\n  if (!digit_found) {\n    sum = INT_MIN; // TBD signal no digits\n  }\n  return sum;\n}\n</code></pre>\n\n<p><strong><code>my_itoa()</code></strong></p>\n\n<p>For help on <code>my_itoa()</code>, review <a href=\"https://stackoverflow.com/q/3440726/2410359\">What is the proper way of implementing a good \u201citoa()\u201d function?</a>.  It does have an nice answer in there <a href=\"https://stackoverflow.com/a/29933810/2410359\">-</a> somewhere.</p>\n"}], "owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 53092336, "answer_count": 1, "score": 1, "last_activity_date": 1541023764, "creation_date": 1541018114, "last_edit_date": 1541019560, "question_id": 53091559, "link": "https://stackoverflow.com/questions/53091559/facing-a-challenge-writing-my-own-and-my-itoa-and-my-atoi-which-should-change-i", "title": "facing a challenge writing my own and my_itoa and my atoi, which should change integer to ascii and vice versa in C", "body": "<p>I missed posting here, you always teach me a lot!</p>\n\n<p>So, I have an assignment to write my own 2 functions to change from integer to ASCII and back from ASCII to integer for an embedded system, and they have very specific features:</p>\n\n<p>here are the provided function definitions that I should build on. it is put in a data.h file:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nuint8_t my_itoa(int32_t data, uint8_t * ptr, uint32_t base);\n\nint32_t my_atoi(uint8_t * ptr, uint8_t digits, uint32_t base);\n</code></pre>\n\n<p>these functions should be used for basic data manipulation, here's how these functions are going to be used in another file course1.c which has data.c included:</p>\n\n<pre><code>digits = my_itoa( num, ptr, BASE_16);   \nvalue = my_atoi( ptr, digits, BASE_16);  \n</code></pre>\n\n<p>and:</p>\n\n<pre><code>digits = my_itoa( num, ptr, BASE_10);\nvalue = my_atoi( ptr, digits, BASE_10);\n</code></pre>\n\n<p>there are certain features that should be in both functions:</p>\n\n<ol>\n<li>they should support base 2 all the way to base 16.</li>\n<li>string functions or libraries shouldn't be used.</li>\n<li>All operations need to be performed using pointer arithmetic, not array indexing.</li>\n<li>function needs to handle signed data.</li>\n</ol>\n\n<p>for my_itoa:</p>\n\n<ol>\n<li>Integer-to-ASCII needs to convert data from a standard integer type into an ASCII string.</li>\n<li>The number you wish to convert is passed in as a signed 32-bit integer.</li>\n<li>Copy the converted character string to the uint8_t* pointer passed in as a parameter (ptr)</li>\n<li>The signed 32-bit number will have a maximum string size (Hint: Think base 2).</li>\n<li>You must place a null terminator at the end of the converted c-string</li>\n<li>Function should return the length of the converted data (including a negative sign). Example my_itoa(ptr, 1234, 10) should return an ASCII string length of 5 (including the null terminator).</li>\n</ol>\n\n<p>for my_atoi:</p>\n\n<ol>\n<li>ASCII-to-Integer needs to convert data back from an ASCII represented string into an integer type.</li>\n<li>The character string to convert is passed in as a uint8_t * pointer (ptr).</li>\n<li>The number of digits in your character set is passed in as a uint8_t integer (digits).</li>\n<li>The converted 32-bit signed integer should be returned.</li>\n</ol>\n\n<p>after my research into this thread: <a href=\"https://stackoverflow.com/questions/33429619/writing-my-own-atoi-function\">Writing my own atoi function</a></p>\n\n<p>I was able to write this code, my data.c:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint main(){\n\n        return 0;\n}\n\n\nuint8_t my_itoa(int32_t data, uint8_t * ptr, uint32_t base)\n{\n        return *ptr;\n};\n\n\nint32_t my_atoi(uint8_t * ptr, uint8_t digits, uint32_t base)\n{\n        const char* str= ptr;\n        uint8_t len = strlen(str);\n        str = (uint8_t*) malloc(len * sizeof(uint8_t));\n\n        while (*str != '\\0')\n        {\n                uint8_t a;\n                a = *str -'0';\n                *ptr = a;\n                str++;\n                ptr++;\n        }\n        str = str - len;\n        ptr = ptr -len;\n\n        return *ptr;\n};\n</code></pre>\n\n<p>as I understand this part removes null character:</p>\n\n<pre><code>a = *str -'0';\n</code></pre>\n\n<p>this code has a main problem, which is when i compile it this way I get the in my_atoi that pointer differs in sginedness and pointer assignment differs in signedness:</p>\n\n<pre><code>src/data.c: In function \u2018my_atoi\u2019:\nsrc/data.c:20:19: error: pointer targets in initialization differ in \nsignedness [-Werror=pointer-sign]\n  const char* str= ptr;\n                   ^~~\nsrc/data.c:22:6: error: pointer targets in assignment differ in \nsignedness [-Werror=pointer-sign]\n  str = (uint8_t*) malloc(len * sizeof(uint8_t));\n      ^\n</code></pre>\n\n<p>and when I edit it to this:</p>\n\n<pre><code>uint8_t len = strlen(str);\n</code></pre>\n\n<p>I get errors that pointer target in passing argument 1 of strlen differ in sigdness, and in string.h strlen definition expected a const char*:</p>\n\n<pre><code>src/data.c: In function \u2018my_atoi\u2019:\nsrc/data.c:21:19: error: pointer targets in passing argument 1 of \n\u2018strlen\u2019 differ in signedness [-Werror=pointer-sign]\n  int len = strlen(str);\n                   ^~~\nIn file included from src/data.c:3:0:\n/usr/include/string.h:384:15: note: expected \u2018const char *\u2019 but \nargument is of type \u2018unsigned char *\u2019\nextern size_t strlen (const char *__s)\n              ^~~~~~\nsrc/data.c:22:6: error: pointer targets in assignment differ in \nsignedness [-Werror=pointer-sign]\n  str = (char*) malloc(len * sizeof(char));\n      ^\n</code></pre>\n\n<p>and also the fact that I need to get rid of strlen and string.h alltogether. like here: <a href=\"https://stackoverflow.com/questions/25629899/converting-ascii-to-hex-and-vice-versa-strange-issue\">Converting ASCII to Hex and vice versa - strange issue</a> so it was not very useful. Actually I don't understand the code inside of it.</p>\n\n<p>Another challenge is with the determining input variable to function(3rd input) which should be BASE_10, BASE_16, or BASE_2 etc..., how should the variable:</p>\n\n<pre><code>uint32_t base\n</code></pre>\n\n<p>which is an int, store this value \"BASE_10\" to compare it in an if conditional? and what are the bases of conversion to different bases and how should I handle them?</p>\n\n<p>I'm stuck on many different frontiers the answer to this challenge, where to learn more, what the requirement of maximum string size, how should I handle signed data. I'm seeking help. sorry for this long question but I needed to include all the factors.</p>\n\n<hr>\n\n<p>EDIT editing this the code like this:</p>\n\n<pre><code>uint8_t* str= ptr;\nuint8_t len = strlen((const char *)str);\n</code></pre>\n\n<p>following this thread:\n<a href=\"https://stackoverflow.com/questions/7009231/cast-unsigned-char-uint8-t-to-const-char?rq=1\">cast unsigned char * (uint8_t *) to const char *</a></p>\n\n<p>I have no errors now, but still need to completely get rid of string.h</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1541016775, "post_id": 53091250, "comment_id": 93079528, "body": "<code>personalAllowance = compute_personal_allowance (annualSalary );</code> <code>taxableIncome = compute_taxable_income( annualSalary, personalAllowance;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 6, "last_activity_date": 1541016818, "creation_date": 1541016818, "answer_id": 53091282, "question_id": 53091250, "link": "https://stackoverflow.com/questions/53091250/how-do-i-use-a-value-returned-from-a-function-in-c/53091282#53091282", "title": "how do i use a value returned from a function in c", "body": "<p>You're not assigning anything to <code>personalAllowance</code> or <code>taxableIncome</code>.  You need to assign the return value of the relevant functions to them:</p>\n\n<pre><code>personalAllowance = compute_personal_allowance (annualSalary );\ntaxableIncome = compute_taxable_income( annualSalary, personalAllowance);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10442151, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTGHPjTsTo4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX5MuSGLsT8p1UfjEanNITvRFnVPw/mo/photo.jpg?sz=128", "display_name": "Aimee Boyle", "link": "https://stackoverflow.com/users/10442151/aimee-boyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541016818, "creation_date": 1541016676, "question_id": 53091250, "link": "https://stackoverflow.com/questions/53091250/how-do-i-use-a-value-returned-from-a-function-in-c", "title": "how do i use a value returned from a function in c", "body": "<p>So I have a program that uses functions to calculate the personal allowance and the taxable income. I would like to know how to take the calculated value from my function and set the variable 'personalAllowance' to this value so my code will work correctly. As it's currently printing zero. </p>\n\n<pre><code>float compute_taxable_income(float annualSalary, float personalAllowance) \n {\n   float taxableIncome;\n\n        taxableIncome = (annualSalary - personalAllowance);\n\n\n    return taxableIncome;\n}\n\n\n  float compute_personal_allowance ( float annualSalary )\n    {\n        float personalAllowance;\n\n    if (annualSalary &lt;= 100000)\n        personalAllowance = 11850;\n\n    else if (annualSalary &gt; 100000 &amp;&amp; annualSalary &lt; 123700) \n        { \n        personalAllowance = 11850 - ((annualSalary - 100000) /2);\n        }\n    else \n        personalAllowance = 0;\n\n\n\n    return personalAllowance;\n}\n\n int main()\n  {\n    // Variables\n      float annualSalary;\n      float taxableIncome;\n      float personalAllowance;\n\n        printf(\"what is the annualSalary \\n\");\n        scanf(\"%f\",&amp;annualSalary);\n\n        compute_personal_allowance (annualSalary );\n\n        compute_taxable_income( annualSalary, personalAllowance);\n\n        printf(\"the Taxable income is %f \", taxableIncome);\n\n\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux-kernel"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1541019915, "post_id": 53091172, "comment_id": 93080664, "body": "Provide a configuration mechanism that takes pointers to functions to reroute the calls to the <code>pcie_read()</code> and <code>pcie_write()</code> when appropriate, leaving pointers to the normal <code>read()</code> and <code>write()</code> functions in place as the default.  This assumes that you&#39;ll preserve the API.  Then write the main code so that the correct set of pointers to functions is used to invoke the low-level routine."}, {"owner": {"reputation": 630, "user_id": 4036474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d14f2e960a6cee6a3831edfa089d34?s=128&d=identicon&r=PG&f=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/4036474/rich"}, "edited": false, "score": 0, "creation_date": 1541039607, "post_id": 53091172, "comment_id": 93085560, "body": "I&#39;d 2nd Jonathan&#39;s suggestion.  I&#39;ve used exactly this method in the past and it works fairly well.  Some platforms will show a slight performance hit, but it&#39;s usually pretty trivial in impact."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1541531585, "post_id": 53091172, "comment_id": 93246993, "body": "I&#39;m not sure I understood what those <code>pcie_read()</code> and <code>pcie_write()</code> provide on top of usual <code>readl()</code> and <code>writel()</code>."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1541859850, "post_id": 53091172, "comment_id": 93365608, "body": "@0andriy The Second SOC is a companion chip that is connected to the Original SOC via PCIe interface (runtime iATU mappings). So the addresses can&#39;t be read directly with <code>readl()</code> and <code>writel()</code>"}], "owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546245695, "creation_date": 1541016404, "last_edit_date": 1546245695, "question_id": 53091172, "link": "https://stackoverflow.com/questions/53091172/how-to-use-a-library-and-a-modified-version-of-the-same-library-together-in-a-pr", "title": "How to use a library and a modified version of the same library together in a project?", "body": "<p>Suppose there is a library consisting of some my_lib.c and my_lib.h</p>\n\n<p>It is an open source standard library with thousands of users. However, For my project, I need to use that library for two different devices. One of the devices can use that library as it is, but another one needs to modify the read/write functions of that library and replace them with my_read() and my_write() functions.</p>\n\n<p>Currently I've included two different versions of that library in my project, one original and another modified. However it means a lot of code duplication in the project, code size increase and non-acceptance by the community. </p>\n\n<p>How do I solve this design problem in the most optimal way?</p>\n\n<hr>\n\n<p>For more details (Loosing Generality here): </p>\n\n<p>It is not a library it is linux Common Clock Framework, that is used to control clocks of two different SOC's at same time, one is host (whose clocks operations can use normal readl/writel) and another is slave connected via pcie (whose clocks need the mapped pcie_read/pcie_write that we have implemented).</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1541016226, "post_id": 53091129, "comment_id": 93079277, "body": "Read <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">documentation of <code>scanf</code></a>. You should test its return count. Read also <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1541016229, "post_id": 53091129, "comment_id": 93079278, "body": "Define &quot;something weird&quot;."}, {"owner": {"reputation": 92, "user_id": 10213096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c4395e90802b6fc5d0fd26a1352660?s=128&d=identicon&r=PG&f=1", "display_name": "Cyber Gh", "link": "https://stackoverflow.com/users/10213096/cyber-gh"}, "edited": false, "score": 0, "creation_date": 1541016311, "post_id": 53091129, "comment_id": 93079319, "body": "by weird i mean it doesn&#39;t read it, just kinda skips it i think"}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 2, "creation_date": 1541016319, "post_id": 53091129, "comment_id": 93079323, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\">scanf() leaves the new line char in the buffer</a>"}], "answers": [{"tags": [], "owner": {"reputation": 47447, "user_id": 1172428, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/240fe123035f1c6e184f59da2f1465d9?s=128&d=identicon&r=PG", "display_name": "FatalError", "link": "https://stackoverflow.com/users/1172428/fatalerror"}, "is_accepted": true, "score": 1, "last_activity_date": 1541016324, "creation_date": 1541016324, "answer_id": 53091159, "question_id": 53091129, "link": "https://stackoverflow.com/questions/53091129/scanf-skipping-character-in-c/53091159#53091159", "title": "Scanf skipping character in c", "body": "<p>Using <code>scanf()</code> is hard. Here, there is a newline character left on <code>stdin</code> from you hitting enter after the first number. So, that's the character you read. Some format conversions ignore whitespace, but <code>%c</code> does not.</p>\n\n<p>To make it ignore leading whitespace, you should instead use</p>\n\n<pre><code>scanf(\" %c\", &amp;oper);\n</code></pre>\n\n<p>The space in the format string tells <code>scanf()</code> to ignore any whitespaces it finds, so you will read a non-whitespace character.</p>\n"}], "owner": {"reputation": 92, "user_id": 10213096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c4395e90802b6fc5d0fd26a1352660?s=128&d=identicon&r=PG&f=1", "display_name": "Cyber Gh", "link": "https://stackoverflow.com/users/10213096/cyber-gh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 53091159, "answer_count": 1, "score": -1, "last_activity_date": 1590751379, "creation_date": 1541016141, "last_edit_date": 1590751379, "question_id": 53091129, "link": "https://stackoverflow.com/questions/53091129/scanf-skipping-character-in-c", "title": "Scanf skipping character in c", "body": "<pre><code>int main(){\n    int firstNumber, secondNumber, thirdNumber;\n    char oper;\n\n    scanf(\"%d\", &amp;firstNumber);\n    printf(\"%d\\n\", firstNumber);\n\n    scanf(\"%c\", &amp;oper);\n    printf(\"%c\\n\", oper);\n\n    scanf(\"%d\", &amp;secondNumber);\n    printf(\"%d\\n\", secondNumber);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Why this code doesn't work as expected, It reads the first and the second number but it doesn't read the character in between.</p>\n"}, {"tags": ["c", "greatest-common-divisor"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1541015931, "post_id": 53091062, "comment_id": 93079145, "body": "What issue? If both are correct, there is no issue.."}, {"owner": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1541016036, "post_id": 53091062, "comment_id": 93079184, "body": "@EugeneSh. i&#39;m afraid that the diff can be different when testing and it will failed. Only asking if there is a convention."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1541016081, "post_id": 53091062, "comment_id": 93079204, "body": "Ah, convention.. It says &quot;conversion&quot; in the title."}, {"owner": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1541016214, "post_id": 53091062, "comment_id": 93079269, "body": "@EugeneSh. Sorry, my bad. (changed it)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541016588, "post_id": 53091062, "comment_id": 93079445, "body": "Generally, the goal of the extended Euclidean algorithm is to find the multiplicative inverse of one input modulo the other. That is, it is desired to find <code>x</code> and <code>y</code> such that <code>a*x</code> is 1 modulo <code>b</code> and <code>b*y</code> is 1 modulo <code>a</code>. In this case, the input 0 and 0 for <code>a</code> and <code>b</code> is out of the domain of the algorithm, and there is no point in defining it. No values of <code>x</code> and <code>y</code> can satisfy <code>0*x</code> is 1 modulo <code>0</code> and <code>0*y</code> is 1 modulo <code>0</code>. The user should never call the function with these values."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541017314, "post_id": 53091062, "comment_id": 93079701, "body": "The point is that there is actually no &quot;mathematically true&quot; result. This isn&#39;t really a standard enough function that there&#39;s a convention for how to report erroneous input."}], "owner": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541016202, "creation_date": 1541015860, "last_edit_date": 1541016202, "question_id": 53091062, "link": "https://stackoverflow.com/questions/53091062/extended-euclidean-algorithm-convention-in-c", "title": "Extended Euclidean algorithm convention [In C]", "body": "<p>I was looking for a <code>Extended Euclidean</code> algorithm in <code>C</code>. I found the following piece of code:</p>\n\n<pre><code>int gcdExtended(int a, int b, int *x, int *y) \n{ \n    if (a == 0) \n    { \n        *x = 0; \n        *y = 1; \n        return b; \n    } \n    int x1, y1;\n    int gcd = gcdExtended(b%a, a, &amp;x1, &amp;y1); \n    *x = y1 - (b/a) * x1; \n    *y = x1;\n    return gcd; \n}\n</code></pre>\n\n<p>so for <code>gcdExtended(0,0)</code> it will return: <code>x=0</code> and <code>y=1</code>. But I saw some other versions of the algorithem which return <code>x=0</code> and <code>y=0</code>. Both mathematically are true. But, is there a convention for this issue?</p>\n"}, {"tags": ["c", "rtp"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541015070, "post_id": 53090850, "comment_id": 93078736, "body": "Don&#39;t you need to add <code>-lsrtp</code>? <code>gcc -Wall main.c -lsrtp -o main</code>"}, {"owner": {"reputation": 11, "user_id": 2107087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd384c61b0334ac003333b7960a8eb2?s=128&d=identicon&r=PG", "display_name": "user2107087", "link": "https://stackoverflow.com/users/2107087/user2107087"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541023744, "post_id": 53090850, "comment_id": 93081976, "body": "No i added source without compile"}], "owner": {"reputation": 11, "user_id": 2107087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd384c61b0334ac003333b7960a8eb2?s=128&d=identicon&r=PG", "display_name": "user2107087", "link": "https://stackoverflow.com/users/2107087/user2107087"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1541015193, "answer_count": 0, "score": 0, "last_activity_date": 1541015024, "creation_date": 1541014927, "last_edit_date": 1541015024, "question_id": 53090850, "link": "https://stackoverflow.com/questions/53090850/undefined-reference-to-srtp-init", "closed_reason": "Duplicate", "title": "undefined reference to srtp_init", "body": "<p>I'm struggling with compiling  sample project with libsrt project in Ubunto but I'm getting an error:</p>\n\n<blockquote>\n  <p>undefined reference to srtp_init</p>\n</blockquote>\n\n<p>Here's the my code</p>\n\n<pre><code>#include &lt;studio.h&gt;\n#include &lt;src/libsrtp/include/srtp.h&gt;\n\nint  main(int argc,char **argv)\n{\n    srtp_init();\n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>gcc -Wall main.c -I. -o main</p>\n</blockquote>\n\n<p><code>src</code> is source of <code>libsrtp</code>.</p>\n\n<p>thanks</p>\n"}, {"tags": ["c", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1541014785, "post_id": 53090750, "comment_id": 93078581, "body": "<code>newNode-&gt;nextPtr_ = list;</code> inserts the new node at the head of the list. So the list look like <code>! -&gt; there -&gt; hello</code>."}], "answers": [{"tags": [], "owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": false, "score": 0, "last_activity_date": 1541014912, "creation_date": 1541014912, "answer_id": 53090845, "question_id": 53090750, "link": "https://stackoverflow.com/questions/53090750/linked-list-command-line-arguments/53090845#53090845", "title": "Linked List - Command Line arguments", "body": "<p>You're replacing the head of the list with each new parameter, read from left to right. The last parameter is going to be your last head.</p>\n\n<p>So when you're reading the list starting from the head down, the last parameter will be first, thus reversing the input arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 7314354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc510e615494eaffbf17582bb3695f2f?s=128&d=identicon&r=PG&f=1", "display_name": "J.user94", "link": "https://stackoverflow.com/users/7314354/j-user94"}, "edited": false, "score": 1, "creation_date": 1541083700, "post_id": 53090877, "comment_id": 93102603, "body": "Thank you for the help!"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 0, "last_activity_date": 1541015719, "last_edit_date": 1541015719, "creation_date": 1541015069, "answer_id": 53090877, "question_id": 53090750, "link": "https://stackoverflow.com/questions/53090750/linked-list-command-line-arguments/53090877#53090877", "title": "Linked List - Command Line arguments", "body": "<p>There is a bug here</p>\n\n<pre><code>newNode = (struct Node*)malloc(sizeof(list));\n</code></pre>\n\n<p><code>sizeof(list)</code> returns the size of a pointer, to get the size of the <code>struct</code> you want <code>sizeof(*list)</code></p>\n\n<p>And you are pushing, instead you need to enqueue (attach to to the tail, not to the head)</p>\n\n<p>Here a <a href=\"https://www.learn-c.org/en/Linked_lists\" rel=\"nofollow noreferrer\">simple implementation</a></p>\n\n<p>Finally, do not <code>free(namePtr_)</code>, the arguments passed to <code>main</code> (<code>argv[x]</code>) are not reserved dinamically by your program, the rule is one <code>free</code> per <code>malloc</code></p>\n"}], "owner": {"reputation": 81, "user_id": 7314354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc510e615494eaffbf17582bb3695f2f?s=128&d=identicon&r=PG&f=1", "display_name": "J.user94", "link": "https://stackoverflow.com/users/7314354/j-user94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 53090877, "answer_count": 2, "score": 1, "last_activity_date": 1541015719, "creation_date": 1541014469, "question_id": 53090750, "link": "https://stackoverflow.com/questions/53090750/linked-list-command-line-arguments", "title": "Linked List - Command Line arguments", "body": "<p>I am trying to implement a program that builds a Linked List from the command line.\nI have two functions, one that creates the list and one that prints it.\nMy issue is that the list when outputting the data from the list is doing it in reverse order? Why is this happening? What can I do? Thanks in advance!</p>\n\n<pre><code>struct      Node {\nchar*       namePtr_;\nstruct Node*    nextPtr_;\n};\n</code></pre>\n\n<p><strong>Create List function</strong></p>\n\n<pre><code> struct Node*   makeList    (int argc, char* argv[]) {\n struct Node*   list    = NULL; // Head\n struct Node*   end = NULL; \n\nif (argc &lt;= 1) {\n  return NULL;\n}\n\n int        i;\n for(i = 1;  i &lt; argc;  i++) {\n   struct Node* newNode;\n   newNode = (struct Node*)malloc(sizeof(list));\n   newNode-&gt;namePtr_ = argv[i];\n   newNode-&gt;nextPtr_ = list;\n   list = newNode;\n }\n  return(list);\n}\n</code></pre>\n\n<p><strong>Display List Function</strong></p>\n\n<pre><code>void print (const struct Node* list){\n    const struct Node*  run;\n    run = list;\n    while (run != NULL) {\n      printf(\"%s\\n\", run-&gt;namePtr_);\n      run = run-&gt;nextPtr_;\n    }\n  }\n</code></pre>\n\n<p><strong>Release Memory Function</strong></p>\n\n<pre><code>void release (struct Node* list){\n  struct Node* head = list;\n  free(head);\n  free(head-&gt;namePtr_);\n}\n</code></pre>\n\n<p><strong>Command Line Arguments</strong></p>\n\n<pre><code>./argList hello there !\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>!\nthere\nhello\n</code></pre>\n"}, {"tags": ["c", "parameters", "integer", "64-bit"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541013343, "post_id": 53090485, "comment_id": 93077891, "body": "Where is <code>n</code> coming from? <code>printf(&quot;count = %d, largest run = %d\\n&quot;, n, count(n));</code>. Not from <code>argv</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1541013656, "post_id": 53090485, "comment_id": 93078026, "body": "First you should switch to <code>uint64_t</code> rather than <code>int64_t</code>"}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541013692, "post_id": 53090485, "comment_id": 93078037, "body": "n is from the function,"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1541014001, "post_id": 53090485, "comment_id": 93078178, "body": "There is no <code>n</code> visible in <code>main</code>."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541014081, "post_id": 53090485, "comment_id": 93078220, "body": "You need something like: <code>n = atoll(argv[1])</code>"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541014195, "post_id": 53090485, "comment_id": 93078276, "body": "<code>ret += x % 10; x &#47;= 10;</code> won&#39;t count the number of <code>1</code> bits."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541014592, "post_id": 53090485, "comment_id": 93078485, "body": "n = atoll(argv[1]) for main?"}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541014877, "post_id": 53090485, "comment_id": 93078628, "body": "@FiddlingBits, I noticed it but how do I exact put the code instead of 1 bits? If it is -1, then it would be 64 for count and largest run."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541015423, "post_id": 53090777, "comment_id": 93078908, "body": "Updated my code, but it&#39;s only show:           count = -1, largest run = 1"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541015498, "post_id": 53090777, "comment_id": 93078949, "body": "That&#39;s because you&#39;re changing <code>-1</code> to <code>1</code> here: <code>if (x &lt; 0) x = -x;</code>. What answer do you expect?"}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541015745, "post_id": 53090777, "comment_id": 93079054, "body": "I have &#39;if (x &lt; 0) x = -x;&#39; in function. So when I input -1 then the output should be 64 for count and 64 for largest run.. So here is for example, if it is 345897345532 then it would be 17 for count and 7 for largest run... Does this makes sense?"}], "tags": [], "owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "is_accepted": false, "score": 1, "last_activity_date": 1541014584, "creation_date": 1541014584, "answer_id": 53090777, "question_id": 53090485, "link": "https://stackoverflow.com/questions/53090485/64-bit-long-integer-parameter/53090777#53090777", "title": "64 Bit Long Integer Parameter", "body": "<p>What you've posted results in a compilation error:</p>\n\n<pre>\nmain.c:52:44: error: \u2018n\u2019 undeclared (first use in this function)\n   printf(\"count = %d, largest run = %d\\n\", n, count(n));\n                                            ^\n</pre>\n\n<p>As the comments in your code suggest, you need to add the following line:</p>\n\n<pre><code>int n = n = atoll(argv[1]);\n</code></pre>\n\n<p>Modify your <code>main</code> function to look something like this:</p>\n\n<pre><code>int main (int argc, char *argv[])\n{\n    if(argc &lt; 2)\n    {\n        printf (\"Usage: p3 &lt;int&gt;\\n\");\n    }\n    else\n    {\n        int n = atoll(argv[1]);\n        printf(\"count = %d, largest run = %d\\n\", n, count(n));\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If your <code>count</code> function is supposed to <code>return</code> the number of <code>1</code> bits in <code>n</code> your implementation won't work.  Change the <code>while</code> body to the following:</p>\n\n<pre><code>ret += x % 2;\nx /= 2;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541016296, "post_id": 53091113, "comment_id": 93079309, "body": "Can you explain more about Pointer Integer?"}, {"owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "reply_to_user": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1541017824, "post_id": 53091113, "comment_id": 93079879, "body": "@MikeODell I add a simple explain."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1541029734, "post_id": 53091113, "comment_id": 93083594, "body": "<b>Never</b> use <code>atoll()</code>, or any of the other <code>ato*()</code> functions.  Per <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.22.1\" rel=\"nofollow noreferrer\"><b>7.22.1 Numeric conversion functions</b> of the C standard</a>:  &quot;The functions atof, atoi, atol, and atoll need not affect the value of the integer expression errno on an error. If the value of the result cannot be represented, the behavior is undefined.&quot;  You can&#39;t tell if <code>atoll()</code> works or not as there&#39;s no error return.  Not only that, if &quot;the value ... cannot be represented&quot;, then <b>the behavior is undefined</b>.  Use <code>strtoll()</code> instead."}], "tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": true, "score": 2, "last_activity_date": 1541017746, "last_edit_date": 1541017746, "creation_date": 1541016074, "answer_id": 53091113, "question_id": 53090485, "link": "https://stackoverflow.com/questions/53090485/64-bit-long-integer-parameter/53091113#53091113", "title": "64 Bit Long Integer Parameter", "body": "<ol>\n<li>use <code>atoll</code> get <code>int64_t</code> from <code>argv[1]</code></li>\n<li>use <code>(n&amp;(1UL&lt;&lt;i))</code> define each bit is <code>1</code> or <code>0</code></li>\n<li>use var to record the current consecutive 1 bits count</li>\n</ol>\n\n<p>explain: </p>\n\n<p><code>temp</code> means current consecutive 1 bits count</p>\n\n<ol>\n<li><p>if <code>n&amp;(1UL&lt;&lt;i) == 1</code>, current bit is <code>1</code>, so current consecutive 1 bits count add 1, so <code>++temp;</code></p></li>\n<li><p>if <code>n&amp;(1UL&lt;&lt;i) == 0</code>, current bit is <code>0</code>, so current consecutive 1 bits count is 0, so <code>temp = 0;</code></p></li>\n</ol>\n\n<p>The following <code>code</code> could work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n\nint count(int64_t n, int* lr) {\n    *lr = 0;\n\n    int temp = 0;\n    int ret  = 0;\n\n    for (int i = 0; i != 64; ++i) {\n        if (n&amp;(1UL&lt;&lt;i)) {\n            ++ret;\n            ++temp;\n            if (temp &gt; *lr)\n                *lr = temp;\n        } else {\n            temp = 0;\n        }\n    }\n    return ret;\n}\n\nint main (int argc, char *argv[]) {\n    if (argc != 2) {\n        printf (\"Usage: p3 &lt;int&gt;\\n\");\n        return -1;\n    }\n\n    int64_t n = atoll(argv[1]);\n    int k;\n\n    int sum = count(n, &amp;k);\n\n    printf(\"count = %d, largest run = %d\\n\", sum, k);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53091113, "answer_count": 2, "score": 0, "last_activity_date": 1541017746, "creation_date": 1541013226, "last_edit_date": 1541015539, "question_id": 53090485, "link": "https://stackoverflow.com/questions/53090485/64-bit-long-integer-parameter", "title": "64 Bit Long Integer Parameter", "body": "<p>I am doing computer science course which it is required for my Information Technology major. So I am trying to understanding this steps by step. I don't know how I did it wrong or isn't what the expected output. </p>\n\n<p>Any suggestion or help? Thank you.</p>\n\n<p>My code:</p>\n\n<pre><code>/**\n * Create a function called count that takes a 64 bit long integer parameter (n)\n * and another integer pointer (lr) and counts the number of 1 bits in n and\n * returns the count, make it also keep track of the largest run of\n * consecutive 1 bits and put that value in the integer pointed to by lr.\n * Hint: (n &amp; (1UL&lt;&lt;i)) is non-zero when bit i in number n is set (i.e. a 1 bit)\n */\n\n\n/* 1 point */\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\nint count (uint64_t n)\n{       \n  int ret = 0;\n  long x = n;\n  if (x &lt; 0)\n    x = -x;\n  while (x != 0)\n    {\n      ret += x % 2;\n      x /= 2;\n    }\n  return ret;     //done summing when n is zero.\n}\n\n/**\n * Complete main below and use the above function to get the count of 1 bits\n * in the number passed to the program as the first command line parameter.\n * If no command line parameter is provided, print the usage:\n *   \"Usage: p3 &lt;int&gt;\\n\"\n * Hints:\n * - Use atoll to get a long long (64 bit) integer from the string.\n * - Remember to use &amp; when passing the integer that will store the longest\n *   run when calling the count function.\n *\n * Example input/output:\n * ./p3 -1\n * count = 64, largest run = 64\n * ./p3 345897345532\n * count = 17, largest run = 7\n */\nint main (int argc, char *argv[])\n{\n  if (argc &lt; 2)\n    {\n      printf (\"Usage: p3 &lt;int&gt;\\n\");\n    }\n  int n = atoll(argv[1])\n  printf(\"count = %d, largest run = %d\\n\", n, count(n));\n\n}\n</code></pre>\n\n<p>When I run the compile to see the output but it doesn't seems correct to match the example output.</p>\n"}, {"tags": ["c", "loops", "for-loop", "cs50"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1541011981, "post_id": 53090162, "comment_id": 93077344, "body": "But <code>j = 0</code> is zero when the second for is encountered."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 1, "creation_date": 1541012002, "post_id": 53090162, "comment_id": 93077352, "body": "Please add actual and expected outcomes."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1541012049, "post_id": 53090162, "comment_id": 93077370, "body": "Hint: print spaces to align on the right"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1541012121, "post_id": 53090162, "comment_id": 93077400, "body": "There&#39;s a <a href=\"https://cs50.stackexchange.com/\">cs50 stack exchange</a> if you&#39;re interested."}, {"owner": {"reputation": 17, "user_id": 10587604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WJ_jgtrk6KM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2V5bzAhalOc_EpwXc6XxtpElBg/mo/photo.jpg?sz=128", "display_name": "Kernel Pource", "link": "https://stackoverflow.com/users/10587604/kernel-pource"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1541012249, "post_id": 53090162, "comment_id": 93077447, "body": "@KamilCuk Doesn&#39;t j increase by 1 before i increases by 1? because the j loop is inside the i loop"}, {"owner": {"reputation": 17, "user_id": 10587604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WJ_jgtrk6KM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2V5bzAhalOc_EpwXc6XxtpElBg/mo/photo.jpg?sz=128", "display_name": "Kernel Pource", "link": "https://stackoverflow.com/users/10587604/kernel-pource"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1541012348, "post_id": 53090162, "comment_id": 93077481, "body": "@dbush Thank you! I&#39;ll try it out in a bit but my main question is why the second for loop is ever executed at all"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1541012403, "post_id": 53090162, "comment_id": 93077507, "body": "@KernelPource On the first iteration of the outer loop it won&#39;t, but it will on later iterations when <code>i</code> is greater than 0."}, {"owner": {"reputation": 17, "user_id": 10587604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WJ_jgtrk6KM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2V5bzAhalOc_EpwXc6XxtpElBg/mo/photo.jpg?sz=128", "display_name": "Kernel Pource", "link": "https://stackoverflow.com/users/10587604/kernel-pource"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1541012426, "post_id": 53090162, "comment_id": 93077511, "body": "@pmg Thank you I&#39;ll check it out, but question was a general C question about for loops"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1541012442, "post_id": 53090162, "comment_id": 93077516, "body": "<code>for (int j = 0; j &lt; i; ++j)</code> is the same as <code>int j = 0; while (j &lt; i) { ... ++j;}</code> Rewrite both for&#39;s and see the differents. The first time it doesn execute, but the second time it executes onces. Then twice. And so on."}, {"owner": {"reputation": 831, "user_id": 2867337, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fbf0273a08cfad4e5f1f1485d3618222?s=128&d=identicon&r=PG&f=1", "display_name": "vinayawsm", "link": "https://stackoverflow.com/users/2867337/vinayawsm"}, "edited": false, "score": 0, "creation_date": 1541012473, "post_id": 53090162, "comment_id": 93077522, "body": "@KernelPource see how for loop is executed here <a href=\"https://www.tutorialspoint.com/cprogramming/c_for_loop.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_for_loop.htm</a>. The loop for <code>j</code> on future runs, still start with <code>j = 0</code> because that&#39;s initialization step for inner loop"}, {"owner": {"reputation": 17, "user_id": 10587604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WJ_jgtrk6KM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2V5bzAhalOc_EpwXc6XxtpElBg/mo/photo.jpg?sz=128", "display_name": "Kernel Pource", "link": "https://stackoverflow.com/users/10587604/kernel-pource"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1541012796, "post_id": 53090162, "comment_id": 93077662, "body": "@KamilCuk The syntax is still a big confusing but I get it now, thanks!"}, {"owner": {"reputation": 17, "user_id": 10587604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WJ_jgtrk6KM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2V5bzAhalOc_EpwXc6XxtpElBg/mo/photo.jpg?sz=128", "display_name": "Kernel Pource", "link": "https://stackoverflow.com/users/10587604/kernel-pource"}, "reply_to_user": {"reputation": 831, "user_id": 2867337, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fbf0273a08cfad4e5f1f1485d3618222?s=128&d=identicon&r=PG&f=1", "display_name": "vinayawsm", "link": "https://stackoverflow.com/users/2867337/vinayawsm"}, "edited": false, "score": 1, "creation_date": 1541012817, "post_id": 53090162, "comment_id": 93077671, "body": "@vinayawsm The explanation I was looking for!! Thanks!!"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 10587604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WJ_jgtrk6KM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2V5bzAhalOc_EpwXc6XxtpElBg/mo/photo.jpg?sz=128", "display_name": "Kernel Pource", "link": "https://stackoverflow.com/users/10587604/kernel-pource"}, "edited": false, "score": 1, "creation_date": 1541012986, "post_id": 53090344, "comment_id": 93077744, "body": "This has been bugging me for so long! I&#39;ll try to remake it with your hints then check back. I appreciate the help!"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1541013179, "post_id": 53090344, "comment_id": 93077823, "body": "May I suggest using <code>&quot;  &quot;</code> (two spaces) and <code>&quot;# &quot;</code> as it makes a nicer looking triangle."}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 2, "last_activity_date": 1541013356, "last_edit_date": 1541013356, "creation_date": 1541012640, "answer_id": 53090344, "question_id": 53090162, "link": "https://stackoverflow.com/questions/53090162/for-loop-producing-unexpected-results-in-c/53090344#53090344", "title": "For loop producing unexpected results in C", "body": "<p>Good attempt; however, you'll need to print a series of spaces before your steps in order to produce right-alignment. This isn't necessarily obvious since the spaces are invisible (and unnecessary for a left-aligned triangle). </p>\n\n<p>The formula for the number of  spaces to print is <code>height - row_number - 1</code>, and the formula for the number of step characters to print is <code>row_number + 1</code> (or <code>column_number &lt;= row_number</code>). I recommend experimenting with these numbers and attempting to produce different patterns which will help your understanding. The reason for the extra <code>-1</code>/<code>+1</code> offset is to avoid printing a blank line above the triangle.</p>\n\n<p>To answer your question about your second loop termination condition, it'll only be false once you've printed a number of step characters less than the row number, while the first loop is the inverse of this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n\nint main() { \n    int height = get_int(\"How tall are the pyramids: \");\n\n    for (int i = 0; i &lt; height; i++) {\n        for (int j = 0; j &lt; height - i - 1; j++) {\n            printf(\" \");\n        }\n\n        for (int j = 0; j &lt;= i; j++) {\n            printf(\"#\");\n        }\n\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Output (height = 10):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>         #\n        ##\n       ###\n      ####\n     #####\n    ######\n   #######\n  ########\n #########\n##########\n</code></pre>\n\n<p><a href=\"https://repl.it/repls/CulturedMetallicBinary\" rel=\"nofollow noreferrer\">Try it!</a></p>\n"}, {"tags": [], "owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "is_accepted": true, "score": 0, "last_activity_date": 1541013262, "creation_date": 1541013262, "answer_id": 53090493, "question_id": 53090162, "link": "https://stackoverflow.com/questions/53090162/for-loop-producing-unexpected-results-in-c/53090493#53090493", "title": "For loop producing unexpected results in C", "body": "<p>Copy and paste this into codechef.com/ide using GCC 6.3.  There are a few sample pryamids, left right center both upside down and right side up.  To answer your specific quesiton, j is assigned to 0 in the second (nested) for loop, so j is not = to i at the start of the loop.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n\n    int height = 10;//get_int(\"How tall are the pyramids: \");\n\n    printf(\"regular left justified\\n\");\n    for (int i = 0; i &lt; height; i++){\n        printf(\"##\");\n\n        for (int j = 0; j &lt; i; j++){\n            printf(\"#\");\n        }\n        printf(\"\\n\");\n    }\n\n    printf(\"Upside down left justified\\n\");\n    for (int i = height; i &gt;0 ; i--){\n        printf(\"##\");\n\n        for (int j = 0; j &lt; i; j++){\n            printf(\"#\");\n        }\n        printf(\"\\n\");\n    }\n\n    printf(\"upside down centered pryamid\\n\");\n    for (int i = 0; i &lt; height; i++){\n        //printf(\"##\");\n\n        for (int j = 0; j &lt; i; j++){\n            printf(\" \");\n        }\n        for( int j=i; j&lt;height; j++){\n            printf(\"##\");    \n        }\n        printf(\"\\n\");\n    }\n\n    printf(\"regular centered pryamid\\n\");\n    for (int i = 0; i &lt; height; i++){\n        //printf(\"##\");\n\n        for (int j = height; j &gt; i; j--){\n            printf(\" \");\n        }\n        for( int j=height; j&gt;=height-i; j--){\n            printf(\"##\");    \n        }\n        printf(\"\\n\");\n    }\n\n    printf(\"regular right justified\\n\");\n    for (int i = 0; i &lt; height; i++){\n        //printf(\"##\");\n\n        for (int j = height; j &gt; i; j--){\n            printf(\" \");\n        }\n        for( int j=height; j&gt;=height-i; j--){\n            printf(\"#\");    \n        }\n        printf(\"\\n\");\n    }\n\n    printf(\"upside down right justified\\n\");\n    for (int i = 0; i &lt; height; i++){\n        //printf(\"##\");\n\n        for( int j=height; j&gt;=height-i; j--){\n            printf(\" \");    \n        }\n\n        for (int j = height; j &gt; i; j--){\n            printf(\"#\");\n        }\n\n        printf(\"\\n\");\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10587604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WJ_jgtrk6KM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2V5bzAhalOc_EpwXc6XxtpElBg/mo/photo.jpg?sz=128", "display_name": "Kernel Pource", "link": "https://stackoverflow.com/users/10587604/kernel-pource"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 53090493, "answer_count": 2, "score": 1, "last_activity_date": 1541013356, "creation_date": 1541011848, "last_edit_date": 1541011887, "question_id": 53090162, "link": "https://stackoverflow.com/questions/53090162/for-loop-producing-unexpected-results-in-c", "title": "For loop producing unexpected results in C", "body": "<p>I just started doing the cs50 course but having trouble with the first problem sheet. The aim is to produce right aligned steps (steps you use in Mario just before finishing the level and jump on the flag pole).</p>\n\n<p>The code I have written produces the steps but not right aligned.</p>\n\n<p>But why does my code produce the steps? Shouldn't the condition for the second for loop always be false since i = j when the second for loop is executed?</p>\n\n<p>Sorry if this has been answered before but I'm having trouble articulating my question.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n\nint main(){\n\n    int height = get_int(\"How tall are the pyramids: \");\n\n    for (int i = 0; i &lt; height; i++){\n        printf(\"##\");\n\n        for (int j = 0; j &lt; i; j++){\n            printf(\"#\");\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "c", "scipy", "intel-mkl"], "comments": [{"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1541016716, "post_id": 53090142, "comment_id": 93079498, "body": "I am not familiar with intel-mkl, but why dont you use sample matrices and calculate the result by hand, then compare python and c to the &quot;true&quot; value you would get."}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 6152534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/925595697531599/picture?type=large", "display_name": "Pedro H. N. Vieira", "link": "https://stackoverflow.com/users/6152534/pedro-h-n-vieira"}, "edited": false, "score": 0, "creation_date": 1541023444, "post_id": 53091313, "comment_id": 93081885, "body": "Thank you for spotting that copy-paste error and the idea to use easier matrices. I&#39;ve edited my question with further testing (easier matrices). The conclusion is that the C code is wrong."}], "tags": [], "owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "is_accepted": false, "score": 0, "last_activity_date": 1541016987, "creation_date": 1541016987, "answer_id": 53091313, "question_id": 53090142, "link": "https://stackoverflow.com/questions/53090142/proper-way-to-calculate-transainvba-with-intel-mkl-follow-up-question/53091313#53091313", "title": "Proper way to calculate `trans(a)*inv(b)*a` with Intel MKL (follow-up question)", "body": "<p>From the code posted in your question:</p>\n\n<p>Python:</p>\n\n<pre><code>zl = numpy.array([[0.1 + 2.13j, 124.004 - 800.12j], ## &lt;==HERE\n                  [124.004 - 800.12j, 0.4 + 4.08j]]) ## &lt;==HERE ALSO\n</code></pre>\n\n<p>C:    </p>\n\n<pre><code>_Complex double zl[] = {\n    (0.1 + 2.13*I), (-124.004 - 800.12*I), // &lt;==HERE\n    (-124.004 - 800.12*I), (0.4 + 4.08*I) // &lt;== HERE ALSO\n</code></pre>\n\n<p>I noticed that one is -124.004 - 800.12i and the other is 124.004 - 800.12i.  Im not sure which one you are trying to use, but set them both to the same one and see if the results are still different.  If they are still different, set them both to a unit testable value that you know what the outcome would be (a=[1 0 0; 0 1 0; 0 0 1] or something easy to compute).  That will tell you which one (or both) is/are incorrect.</p>\n"}, {"tags": [], "owner": {"reputation": 596, "user_id": 6152534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/925595697531599/picture?type=large", "display_name": "Pedro H. N. Vieira", "link": "https://stackoverflow.com/users/6152534/pedro-h-n-vieira"}, "is_accepted": true, "score": 0, "last_activity_date": 1541034236, "creation_date": 1541034236, "answer_id": 53093904, "question_id": 53090142, "link": "https://stackoverflow.com/questions/53090142/proper-way-to-calculate-transainvba-with-intel-mkl-follow-up-question/53093904#53093904", "title": "Proper way to calculate `trans(a)*inv(b)*a` with Intel MKL (follow-up question)", "body": "<p>That behavior (most likely undefined) is caused by passing <code>double</code> array to <code>zgemm</code> instead of <code>_Complex double</code>. When I change matrices <code>a</code> and <code>b</code> to be complex, then I get the expected result.</p>\n\n<p>Here is the fixed C code for testing:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;complex.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;mkl_types.h&gt;\n#define MKL_Complex16 _Complex double //overwrite type\n#include &lt;mkl.h&gt;\n#include &lt;mkl_lapacke.h&gt;\n\nint print_zmatrix_file(int m, int n, _Complex double* a, int lda, FILE* fp)\n{\n    int i, j;\n    for( i = 0; i &lt; m; i++ )\n    {\n        for( j = 0; j &lt; n; j++ )\n        {\n            fprintf(fp, \"(%.6f%+.6fj)\", creal(a[i*lda+j]), cimag(a[i*lda+j]) );\n            if (j &lt; n - 1) fprintf(fp, \",\");\n        }\n        fprintf(fp, \"\\n\");\n    }\n    return 0;\n}\n\nint calc_yn(\n    _Complex double* yn, _Complex double* a, _Complex double *b,\n    _Complex double* zl, _Complex double* zt, int m, int n)\n{\n    lapack_int* ipiv = (MKL_INT*) malloc(sizeof(lapack_int)*m);\n    LAPACKE_zgetrf(LAPACK_ROW_MAJOR, m, m, zt, m, ipiv);\n    LAPACKE_zgetri(LAPACK_ROW_MAJOR, m, zt, m, ipiv);\n    LAPACKE_zgetrf(LAPACK_ROW_MAJOR, m, m, zl, m, ipiv);\n    LAPACKE_zgetri(LAPACK_ROW_MAJOR, m, zl, m, ipiv);\n    free(ipiv);\n    const double alpha = 1.0;\n    const double beta = 0.0;\n    lapack_complex_double* c = (lapack_complex_double*) malloc(\n        sizeof(lapack_complex_double)*(m*n));\n    // c &lt;- zt*a\n    cblas_zgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans,\n                m, n, m,\n                &amp;alpha, zt, m, a, n,\n                &amp;beta, c, n);\n    // yn &lt;- aT*c\n    cblas_zgemm(CblasRowMajor, CblasTrans, CblasNoTrans,\n                n, n, m,\n                &amp;alpha, a, n, c, n,\n                &amp;beta, yn, n);\n    // c &lt;- zl*b\n    cblas_zgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans,\n                m, n, m,\n                &amp;alpha, zl, m, b, n,\n                &amp;beta, c, n);\n    // yn &lt;- bT*c + yn\n    cblas_zgemm(CblasRowMajor, CblasTrans, CblasNoTrans,\n                n, n, m,\n                &amp;alpha, b, n, c, n,\n                &amp;alpha, yn, n);\n    free(c);\n    return 0;\n}\n\nint main()\n{\n    int m = 2;\n    int n = 2;\n    _Complex double a[] = {\n        1.0, 0.0,\n        0.0, 1.0\n    };\n    _Complex double b[] = {\n        0.0, -1.0,\n        -1.0, 0.0\n    };\n    _Complex double zt[] = {\n        1.0, 0.0,\n        0.0, 1.0\n    };\n    _Complex double zl[] = {\n        0.0, -1.0,\n        -1.0, 0.0\n    };\n    _Complex double* yn = (_Complex double*) malloc(sizeof(_Complex double)*(n*n));\n    calc_yn(yn, a, b, zl, zt, m, n);\n    FILE* fp = fopen(\"yn.csv\", \"w\");\n    print_zmatrix_file(n, n, yn, n, fp);\n    fclose(fp);\n    free(yn);\n    return 0;\n}\n// compile command (MKLROOT is defined by a bash script that is shipped together with intel's MKL):\n//gcc -std=c11 -DMKL_ILP64 -m64 -g -o test.a test.c -L${MKLROOT}/lib/intel64 -Wl,--no-as-needed -lmkl_intel_ilp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread -lm -ldl\n</code></pre>\n"}], "owner": {"reputation": 596, "user_id": 6152534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/925595697531599/picture?type=large", "display_name": "Pedro H. N. Vieira", "link": "https://stackoverflow.com/users/6152534/pedro-h-n-vieira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 53093904, "answer_count": 2, "score": 0, "last_activity_date": 1541034236, "creation_date": 1541011775, "last_edit_date": 1541023347, "question_id": 53090142, "link": "https://stackoverflow.com/questions/53090142/proper-way-to-calculate-transainvba-with-intel-mkl-follow-up-question", "title": "Proper way to calculate `trans(a)*inv(b)*a` with Intel MKL (follow-up question)", "body": "<p>This is a follow-up question to <a href=\"https://stackoverflow.com/questions/53085484/proper-way-to-calculate-transainvba-with-intel-mkl\">this other with the same title</a> (I did a major edit to it, but I was told it should be another question - and I can't think of another title).</p>\n\n<p>I am using <a href=\"https://stackoverflow.com/questions/53085484/proper-way-to-calculate-transainvba-with-intel-mkl\">Intel's MKL LAPACKE and CBLAS</a> to calculate</p>\n\n<p><code>yn = trans(a)*inv(zt)*a + trans(b)*inv(zl)*b</code></p>\n\n<p>Where <code>a</code> and <code>b</code> are m-by-n real matrices, <code>zt</code> and <code>zl</code> are m-by-m complex matrices. The resulting complex matrix <code>yn</code> is n-by-n.</p>\n\n<p>Here is how I am doing it:</p>\n\n<pre><code>zt &lt;- inv(zt)\nzl &lt;- inv(zl)\nc &lt;- zt*a\nyn &lt;- trans(a)*c\nc &lt;- zl*b\nyn &lt;- trans(b)*c + yn\n</code></pre>\n\n<p>The C code:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;complex.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;mkl_types.h&gt;\n#define MKL_Complex16 _Complex double //overwrite type\n#include &lt;mkl.h&gt;\n#include &lt;mkl_lapacke.h&gt;\n\nint print_zmatrix_file(int m, int n, _Complex double* a, int lda, FILE* fp)\n{\n    int i, j;\n    for( i = 0; i &lt; m; i++ )\n    {\n        for( j = 0; j &lt; n; j++ )\n        {\n            fprintf(fp, \"(%.6f%+.6fj)\", creal(a[i*lda+j]), cimag(a[i*lda+j]) );\n            if (j &lt; n - 1) fprintf(fp, \",\");\n        }\n        fprintf(fp, \"\\n\");\n    }\n    return 0;\n}\n\nint calc_yn(\n    _Complex double* yn, double* a, double *b, _Complex double* zl,\n    _Complex double* zt, int m, int n)\n{\n    lapack_int* ipiv = (MKL_INT*) malloc(sizeof(lapack_int)*m);\n    LAPACKE_zgetrf(LAPACK_ROW_MAJOR, m, m, zt, m, ipiv);\n    LAPACKE_zgetri(LAPACK_ROW_MAJOR, m, zt, m, ipiv);\n    LAPACKE_zgetrf(LAPACK_ROW_MAJOR, m, m, zl, m, ipiv);\n    LAPACKE_zgetri(LAPACK_ROW_MAJOR, m, zl, m, ipiv);\n    free(ipiv);\n    const double alpha = 1.0;\n    const double beta = 0.0;\n    lapack_complex_double* c = (lapack_complex_double*) malloc(\n        sizeof(lapack_complex_double)*(m*n));\n    // c &lt;- zt*a\n    cblas_zgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans,\n                m, n, m,\n                &amp;alpha, zt, m, a, n,\n                &amp;beta, c, n);\n    FILE* fp = fopen(\"c1.csv\", \"w\");\n    print_zmatrix_file(m, n, c, n, fp);\n    fclose(fp);\n    // yn &lt;- aT*c\n    cblas_zgemm(CblasRowMajor, CblasTrans, CblasNoTrans,\n                n, n, m,\n                &amp;alpha, a, n, c, n,\n                &amp;beta, yn, n);\n    // c &lt;- zl*b\n    cblas_zgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans,\n                m, n, m,\n                &amp;alpha, zl, m, b, n,\n                &amp;beta, c, n);\n    FILE* fp2 = fopen(\"c2.csv\", \"w\");\n    print_zmatrix_file(m, n, c, n, fp2);\n    fclose(fp2);\n    // yn &lt;- bT*c + yn\n    cblas_zgemm(CblasRowMajor, CblasTrans, CblasNoTrans,\n                n, n, m,\n                &amp;alpha, b, n, c, n,\n                &amp;alpha, yn, n);\n    free(c);\n    return 0;\n}\n\nint main()\n{\n    int m = 2;\n    int n = 3;\n    _Complex double* yn = (_Complex double*) malloc(sizeof(_Complex double)*(n*n));\n    double a[] = {\n        0.5, 0.0, 0.5,\n        0.5, 0.5, 0.0\n    };\n    double b[] = {\n        1.0, 0.0, -1.0,\n        1.0, -1.0, 0.0\n    };\n    _Complex double zt[] = {\n        (0.004 + 0.09*I), (-0.004 - 0.12*I),\n        (-0.004 - 0.12*I), (0.005 + 0.11*I)\n    };\n    _Complex double zl[] = {\n        (0.1 + 2.13*I), (-124.004 - 800.12*I),\n        (-124.004 - 800.12*I), (0.4 + 4.08*I)\n    };\n    calc_yn(yn, a, b, zl, zt, m, n);\n    FILE* fp = fopen(\"yn.csv\", \"w\");\n    print_zmatrix_file(n, n, yn, n, fp);\n    fclose(fp);\n    free(yn);\n    return 0;\n}\n// compile command (MKLROOT is defined by a bash script that is shipped together with intel's MKL):\n//gcc -std=c11 -DMKL_ILP64 -m64 -g -o test.a test.c -L${MKLROOT}/lib/intel64 -Wl,--no-as-needed -lmkl_intel_ilp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread -lm -ldl\n</code></pre>\n\n<p>The <a href=\"https://stackoverflow.com/questions/53085484/proper-way-to-calculate-transainvba-with-intel-mkl\">code in the previous question</a> had an error in the <code>malloc</code> to <code>yn</code> (it was using <code>sizeof(_Complex double*)</code> instead of <code>sizeof(_Complex double)</code>). Having that error corrected, the code compiles and runs successfully. After running it, I compared the results with the ones I get with SciPy. They do not agree.</p>\n\n<pre><code>import numpy\nfrom scipy import linalg\n\na = numpy.array([[0.5, 0.0, 0.5],\n                 [0.5, 0.5, 0.0]])\nb = numpy.array([[1.0, 0.0, -1.0],\n                 [1.0, -1.0, 0.0]])\nzt = numpy.array([[0.004 + 0.09j, -0.004 - 0.12j],\n                  [-0.004 - 0.12j, 0.005 + 0.11j]])\nzl = numpy.array([[0.1 + 2.13j, 124.004 - 800.12j],\n                  [124.004 - 800.12j, 0.4 + 4.08j]])\n\nc1 = numpy.matmul(linalg.inv(zt), a)\nm1 = numpy.matmul(a.T, c1)\nc2 = numpy.matmul(linalg.inv(zl), b)\nm2 = numpy.matmul(b.T, c2)\nyn = m1 + m2\n\nyn_file = numpy.genfromtxt('yn.csv', delimiter=',', dtype=numpy.complex128)\nc1_file = numpy.genfromtxt('c1.csv', delimiter=',', dtype=numpy.complex128)\nc2_file = numpy.genfromtxt('c2.csv', delimiter=',', dtype=numpy.complex128)\n\nnumpy.max(numpy.abs(yn)) #0.004958820819049211\nnumpy.max(numpy.abs(yn_file)) #60.4590237745794\n\nnumpy.max(numpy.abs(c1)) #25.549314567403204\nnumpy.max(numpy.abs(c1_file)) #41.278805716697306\n\nnumpy.max(numpy.abs(c2)) #0.0012411403762584482\nnumpy.max(numpy.abs(c2_file)) #0.03292682468747935\n</code></pre>\n\n<p>There is something wrong either in my C code or in the Python one. Why I am getting different results?</p>\n\n<hr>\n\n<p>Edit: further testing as per <a href=\"https://stackoverflow.com/a/53091313/6152534\">@Bwebb suggestion</a>. He noticed a copy-paste error where <code>-124.004 - 800.12i</code> appears as <code>+124.004 - 800.12i</code> in the Python code. Correcting that does not change the results</p>\n\n<p>To make it easier to test, I used the matrices:</p>\n\n<pre><code>a = numpy.array([[1.0, 0.0],\n                 [0.0, 1.0]])\nb = numpy.array([[0.0, -1.0],\n                 [-1.0, 0.0]])\nzt = a\nzl = b\n</code></pre>\n\n<p>Which results in</p>\n\n<pre><code>yn = [[1.0, -1.0]\n      [-1.0, 1.0]]\n</code></pre>\n\n<p>The Python code gives that result, but the C one gives</p>\n\n<pre><code>yn = [[0.0 + 2.0j, 1.0 + 2.0j]\n      [-1.0 + 2.0j, 0.0 + 0.0j]]\n</code></pre>\n\n<p>That makes me conclude that the C code is wrong, but I do not know where.</p>\n"}, {"tags": ["c", "unix", "permissions", "system-calls", "umask"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1541012268, "creation_date": 1541012268, "answer_id": 53090269, "question_id": 53090108, "link": "https://stackoverflow.com/questions/53090108/how-to-give-write-permission-to-everybody/53090269#53090269", "title": "How to give write permission to everybody?", "body": "<p>Your shell probably has a umask of <code>022</code>, which means any new files created will have the specified bits (i.e. group write and other write) cleared.</p>\n\n<p>You need to set the umask to 0 before creating the file:</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n\nint main()\n{\n    umask(0);\n    int fild = creat(\"tasty\", 0722);\n    close(fild);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 9308909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c506f7c25c26a2af2ce848f38f28994b?s=128&d=identicon&r=PG&f=1", "display_name": "Radical Ed", "link": "https://stackoverflow.com/users/9308909/radical-ed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 53090269, "answer_count": 1, "score": 1, "last_activity_date": 1541013956, "creation_date": 1541011611, "last_edit_date": 1541013956, "question_id": 53090108, "link": "https://stackoverflow.com/questions/53090108/how-to-give-write-permission-to-everybody", "title": "How to give write permission to everybody?", "body": "<p>After the following code runs file <em>tasty</em> has permission bits set to <code>0700</code>, which is not how it was intended.</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    int fild = creat(\"tasty\", 0722);\n    close(fild);\n    return 0;\n}\n</code></pre>\n\n<p>How to allow everybody to write into the file?</p>\n"}, {"tags": ["c", "ls"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541008585, "post_id": 53089391, "comment_id": 93075794, "body": "Have you looked at the help for ioctl?"}, {"owner": {"reputation": 35, "user_id": 10279759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxy7c.jpg?s=128&g=1", "display_name": "E.Ayman", "link": "https://stackoverflow.com/users/10279759/e-ayman"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541009135, "post_id": 53089391, "comment_id": 93076079, "body": "i have read the man but still i don&#39;t understand how to use it or how it works"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541009571, "post_id": 53089391, "comment_id": 93076268, "body": "Can you show the usage of ioctl and the bad behavior?"}, {"owner": {"reputation": 35, "user_id": 10279759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxy7c.jpg?s=128&g=1", "display_name": "E.Ayman", "link": "https://stackoverflow.com/users/10279759/e-ayman"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541009681, "post_id": 53089391, "comment_id": 93076325, "body": "my output is like &#39;ls - 1&#39; command , and for the usage you can google it , it&#39;s long to copy"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1541011910, "post_id": 53089391, "comment_id": 93077309, "body": "<i>it uses the input output control ioctl</i> that&#39;s a novel idea, unfortunately, with no basis in reality."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1541013263, "post_id": 53089391, "comment_id": 93077857, "body": "@n.m.: Basis in reality: <a href=\"http://git.savannah.gnu.org/gitweb/?p=coreutils.git;a=blob;f=src/ls.c;h=bf0c5941d7de699fc5a85d44461ef29192216d9d;hb=HEAD#l1755\" rel=\"nofollow noreferrer\">git.savannah.gnu.org/gitweb/?p=coreutils.git;a=blob;f=src/&hellip;</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1541014466, "post_id": 53089391, "comment_id": 93078418, "body": "@rici ugh, it just didn&#39;t occur to me that &quot;in organised way&quot; has something to do with its tabular output. ls -1 doesn&#39;t do tabular output. I assumed OP meant that the output is sorted. My apologies."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1541015917, "post_id": 53089391, "comment_id": 93079135, "body": "@n.m.: yeah, the language was a bit obscure. I edited the question to try to make it more clear, but not in time to avoid yet another close- and down-vote."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1541016594, "last_edit_date": 1541016594, "creation_date": 1541012675, "answer_id": 53090354, "question_id": 53089391, "link": "https://stackoverflow.com/questions/53089391/matching-the-ls-command-output/53090354#53090354", "title": "matching the ls command output", "body": "<p>In order to arrange the files in columns, you need to figure out the current width of the terminal window. On many unix-like systems (including Linux and OS X), you can indeed use <code>ioctl</code> to get that information, using the <code>TIOCGWINSZ</code> selector.</p>\n\n<p>This is precisely what <code>ls</code> does (on systems which support the <code>ioctl</code> request), once it has determined that standard output is a terminal (unless single-column firmat is forced with the <code>-1</code> flag). If it cannot figure out the terminal width, it uses 80.</p>\n\n<p>Here's a quick example of how to get the information. (On Linux systems, you can probably find the details by typing <code>man tty_ioctl</code>).</p>\n\n<p>For simplicity, the following code assumes that <code>stdout</code> is file descriptor 1. In retrospect, <code>FILE_STDOUT</code> would have been better. If you wanted to check an arbitrary open file, you would need to use <code>fileno</code> to get the fd number for the <code>FILE*</code>.</p>\n\n<pre><code>/* This must come before any include, in order to see the\n * declarations of Posix functions which are not in standard C\n */\n#define _XOPEN_SOURCE 700\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/ioctl.h&gt;\n\n/* If stdout is a terminal and it is possible to find out how many\n * columns its window has, return that number. Otherwise, return -1\n */\nint window_get_columns(void) {\n  struct winsize sizes;\n  int cols = -1;\n  if (isatty(1)) { \n    /* Only try this if stdout is a terminal */\n    int status = ioctl(1, TIOCGWINSZ, &amp;sizes);\n    if (status == 0) {\n      cols = sizes.ws_col;\n    }\n  }\n  return cols;\n}\n\n/* Example usage */\n\n/* Print a line consisting of 'len' copies of the character 'ch' */\nvoid print_row(int len, int ch) {\n  for (int i = 0; i &lt; len; ++i) putchar(ch);\n  putchar('\\n');\n}\n\nint main(int argc, char* argv[]) {\n  /* Print the first argument centred in the terminal window,\n   * if standard output is a terminal\n   */\n  if (argc &lt;= 1) return 1; /* No argument, nothing to do */\n  int width = window_get_columns();\n  /* If we can't figure out the width of the screen, just use the\n   * width of the string\n   */\n  int arglen = strlen(argv[1]);\n  if (width &lt; 0) width = arglen;\n  int indent = (width - arglen) / 2;\n  print_row(width - 1, '-');\n  printf(\"%*s\\n\", indent + arglen, argv[1]);\n  print_row(width - 1, '-');\n  return 0;\n}\n</code></pre>\n\n<p>Since writing the above sample, I tracked down the source of the Gnu implementation of <code>ls</code>; its (somewhat more careful) invocation of <code>ioctl</code> will be seen <a href=\"http://git.savannah.gnu.org/gitweb/?p=coreutils.git;a=blob;f=src/ls.c;h=bf0c5941d7de699fc5a85d44461ef29192216d9d;hb=HEAD#l1755\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 35, "user_id": 10279759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxy7c.jpg?s=128&g=1", "display_name": "E.Ayman", "link": "https://stackoverflow.com/users/10279759/e-ayman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1017, "favorite_count": 0, "accepted_answer_id": 53090354, "answer_count": 1, "score": -3, "last_activity_date": 1541016594, "creation_date": 1541008508, "last_edit_date": 1541016090, "question_id": 53089391, "link": "https://stackoverflow.com/questions/53089391/matching-the-ls-command-output", "title": "matching the ls command output", "body": "<p>I'm trying to code the ls command. I have the following function that prints each file name :</p>\n\n<pre><code>int ft_list(const char *filename)\n{\n    DIR *dirp;\n    struct dirent *dir;\n\n    if (!(dirp = opendir(filename)))\n        return (-1);\n    while ((dir = readdir(dirp)))\n    {\n        if (dir-&gt;d_name[0] != '.')\n            ft_putendl(dir-&gt;d_name);\n    }\n    closedir(dirp);\n    return (0);\n}\n</code></pre>\n\n<p>The ls command prints the files organized into columns to fit the screen width. I have read about it and I think it uses the <code>ioctl</code> standard library function, but I can't find any details. How exactly can I do this?</p>\n"}, {"tags": ["c", "hashtable"], "comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 2, "creation_date": 1541008587, "post_id": 53089336, "comment_id": 93075799, "body": "There are so many issues with this code :-/ but the main problem is in print_ht, why are you malloc&#39;ing ANYTHING in a function that&#39;s only supposed to be printing stuff that&#39;s already there?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1541008788, "post_id": 53089336, "comment_id": 93075915, "body": "It&#39;s because the hash table entries you create contain pointers that are pointing to automatic storage class variables. <code>newnode-&gt;text = valid_input;</code> but <code>valid_input</code> is defined as local variable <code>char valid_input[BUF_SIZE_WORDS];</code>. <code>newnode-&gt;text</code> should point to memory allocated from the heap."}, {"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1541009027, "post_id": 53089336, "comment_id": 93076024, "body": "This is essentially the same problem as here: <a href=\"https://stackoverflow.com/a/50591226/10396\">stackoverflow.com/a/50591226/10396</a>"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1541009046, "post_id": 53089336, "comment_id": 93076031, "body": "If you have the <code>strdup</code> function available, you can do <code>newnode-&gt;text = strdup(valid_input);</code>. Otherwise, <code>newnode-&gt;text = malloc(strlen(valid_input)+1); strcpy(newnode-&gt;text, valid_input);</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1541012479, "post_id": 53089336, "comment_id": 93077524, "body": "It&#39;s this time of the year again, and over here we can observe a majestic specimen of <code>something = malloc(...); something = somethingelse;</code> in its natural habitat. The species, scientifically called <i>Monstratorem quaeque</i>, is classified as &quot;least concern&quot; because of its robust reproductive cycle and abundance of prey."}, {"owner": {"reputation": 193, "user_id": 10431460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/342ro.png?s=128&g=1", "display_name": "Matvey", "link": "https://stackoverflow.com/users/10431460/matvey"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1541017640, "post_id": 53089336, "comment_id": 93079814, "body": "thanks! for some reason, I thought that every time the outer for(;;) loop would execute, a new buffer for valid_input would be created... @AhmedMasud thanks for pointing that out! not sure why I didn&#39;t realize that :)"}, {"owner": {"reputation": 193, "user_id": 10431460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/342ro.png?s=128&g=1", "display_name": "Matvey", "link": "https://stackoverflow.com/users/10431460/matvey"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1541024915, "post_id": 53089336, "comment_id": 93082334, "body": "@AhmedMasud if you have the time, I&#39;d love to hear about the other issues with my code (I&#39;ve updated it since your last comment, see Update 1)"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1541037295, "post_id": 53089336, "comment_id": 93085101, "body": "I&#39;m happy to do that later tonight"}], "answers": [{"tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": true, "score": 1, "last_activity_date": 1541008844, "creation_date": 1541008844, "answer_id": 53089484, "question_id": 53089336, "link": "https://stackoverflow.com/questions/53089336/why-is-my-print-function-overwriting-previous-entries-with-the-last-entry-in-the/53089484#53089484", "title": "Why is my print function overwriting previous entries with the last entry in the following code?", "body": "<p>You are setting <code>newnode-&gt;text = valid_input;</code> for each node.  But <code>valid_input</code> is a local buffer declared inside the scope of the for loop in <code>word_input</code>.   So this is not valid code - the buffer is not guaranteed to exist outside that function.  </p>\n\n<p>Practically, <code>valid_input</code> contains the address of some stack memory, which gets re-used every time you enter this function, so all the <code>node-&gt;text</code> pointers end up pointing to the same memory containing the last value entered.   </p>\n\n<p>You should be able to verify this is the case by printing the value of the text pointer for all the nodes.</p>\n\n<p>What you need to do is create a new buffer for each entry you want to save.</p>\n"}], "owner": {"reputation": 193, "user_id": 10431460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/342ro.png?s=128&g=1", "display_name": "Matvey", "link": "https://stackoverflow.com/users/10431460/matvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 53089484, "answer_count": 1, "score": 0, "last_activity_date": 1541017766, "creation_date": 1541008277, "last_edit_date": 1541017766, "question_id": 53089336, "link": "https://stackoverflow.com/questions/53089336/why-is-my-print-function-overwriting-previous-entries-with-the-last-entry-in-the", "title": "Why is my print function overwriting previous entries with the last entry in the following code?", "body": "<p>This is the beginning of a simple program that will store user entries in a hash table. It's still very basic (haven't added a linked list yet to deal with collisions, the hash function is very simple and is a temporary placeholder for a more robust one, I haven't dealt with freeing up all malloc'd memory yet, etc), but I want to get the bare-bones functionality figured out first before I go any further. </p>\n\n<p>In this version my latest entry seems to overwrite the previous ones. It looks like the entries are still in the right spots (as decided by the hash function), but somehow the last one is the one that gets placed everywhere.</p>\n\n<p>Sorry, I know it's a lot of code, but I'm not sure how to create a smaller version of this code to isolate the problem:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BUF_SIZE_WORDS 4096\n#define BUF_SIZE_NUMBERS 256\n#define MAX_WORDS 10\n\ntypedef struct tablestruct\n{\n    int val;\n    char* text;\n    struct tablestruct *next;\n}\ntable;\n\n\n// declare the hashing function that takes in the string to be hashed and the length of it\nunsigned int hash(char *str, int length);\n\n// // declare a linked list creation function\n// lnode *createnode(char *str, htnode *hashtable);\n\n// declare a hash table printing function\nvoid print_ht(table *array[MAX_WORDS]);\n\n\nint number_input();\nint word_input(int num_words, table *array[MAX_WORDS]);\nvoid empty_stdin();\n\nint main(void)\n{\n    // call number_input() to ask user for number of words they'd like to store, save that in word_count\n    int word_count = number_input();\n\n    // create hash table\n    table *array[MAX_WORDS];\n\n    for (int j = 0; j &lt; MAX_WORDS; j++)\n    {\n        array[j] = malloc(sizeof(table));\n        array[j]-&gt;val = j;\n    }\n\n    // add some kind of a memory check?\n\n    // PUT word_input inside the if statement to make sure it worked?\n    // call word_input() and store the result in success\n    int success = word_input(word_count, array);\n    // if not successful:\n    if (!success)\n    {\n        fputs (\"some kind of problem with word_input\\n\", stderr);\n        return 1;\n    }\n\n    // printf(\"\\ncurrent address of the hash table: %p\\n\", &amp;array[0]);\n\n    printf(\"printing hash table: \\n\");\n\n    print_ht(array);\n\n    // REMEMBER TO FREE WHATEVER'S MALLOC'ED\n}\n\nint number_input(void)\n{\n    // a bunch of code is borrowed from David's answer here: https://stackoverflow.com/questions/52920852/why-is-the-following-code-not-allowing-me-to-get-user-input-with-fgets-yet-works?noredirect=1#comment92940817_52920852\n\n    int num_words = 0,       /* number of words to enter */\n        word_count_check = 0;          /* word count */\n\n    char buffer[BUF_SIZE_NUMBERS] = \"\";    /* buffer of sufficient size for input */\n\n    for (;;) /* loop continually until valid input of NUMBER OF WORDS USER WANTS TO ENTER or user cancels */\n    {\n        printf (\"how many words would you like to enter? [1-%d]: \", MAX_WORDS);\n        // check for cancellation of input\n        if (!fgets (buffer, BUF_SIZE_NUMBERS, stdin))\n        {\n            fputs (\"user canceled input\\n\", stderr);\n            return 1;\n        }\n\n        // check if user simply hit enter w/o typing anything\n        if(buffer[0] == '\\n')\n        {\n            printf(\"please enter a value\\n\");\n            continue;\n        }\n\n        size_t inlength = strlen(buffer);\n\n        if (inlength &amp;&amp; buffer[inlength - 1] == '\\n')\n        {\n            // printf(\"hurray!\\n\");\n            buffer[--inlength] = 0;\n        }\n        else if (inlength == BUF_SIZE_NUMBERS - 1) /* the line was too long */\n        {\n            printf(\"you've entered too many characters... please stick to a maximum of %i\\n\", BUF_SIZE_NUMBERS);\n            empty_stdin();\n            // continue;\n        }\n\n        // make sure user actually entered a proper int\n        if (sscanf (buffer, \"%d\", &amp;num_words) != 1) /* sscanf is used for conversion */\n        {\n            fputs (\"invalid conversion to int; please provide valid input\\n\", stderr);\n            continue;\n        }\n\n        // check if the number entered is out of range\n        if (num_words &lt; 1 || num_words &gt; MAX_WORDS)\n            fprintf (stderr, \"%2d out of valid range.\\n\", num_words);\n        else\n            break; /*if the input has been validated, we can now break out of the for loop */\n    }\n\n    return(num_words);\n}\n\nint word_input(int num_words, table *array[MAX_WORDS])\n{\n    int word_count = 0;\n\n    for(;;) /* loop until word_count == num_words is achieved */\n    {\n        // declare an array for storing input string\n        char buffer[BUF_SIZE_WORDS];\n        char valid_input[BUF_SIZE_WORDS];\n\n        // prompt user for input\n        printf(\"\\nplease enter a string: \");\n\n        // get input and check for CTRL+D\n        if (!fgets(buffer, BUF_SIZE_WORDS, stdin))\n        {\n            fputs (\"user canceled input\\n\", stderr);\n            exit(1);\n        }\n\n         // check if user simply hit enter w/o typing anything\n        if(buffer[0] == '\\n')\n        {\n            printf(\"please enter a word that's more than 0 characters\\n\");\n            // empty_stdin();\n            continue;\n        }\n\n        size_t inlength = strlen(buffer);\n\n        if (inlength &amp;&amp; buffer[inlength - 1] == '\\n')\n        {\n            buffer[--inlength] = 0;\n\n            // get rid of trailing spaces using sscanf\n            sscanf(buffer, \"%s\", valid_input);\n            inlength = strlen(valid_input);\n\n            printf(\"string length: %zu\\n\", inlength);\n\n            // call the hash function to get the hash code\n            int result = hash(&amp;valid_input[0], inlength);\n\n            table *newnode = malloc(sizeof(table));\n\n            // store the current string in the newnode-&gt;text\n            newnode-&gt;text = valid_input;\n            // strcpy(newnode-&gt;text, valid_input); ??\n            // newnode-&gt;val = inlength;\n\n            // confirm string has been stored\n            printf(\"you've entered: %s\\n\", newnode-&gt;text);\n\n            // attach the node to correct slot in the hash table -- ADD LINKED LIST FUNCTIONALITY HERE TO DEAL WITH COLLISIONS!\n            array[result]-&gt;next = newnode;\n            // printf(\"address of the current HT entry is: %p\\n\", newnode);\n\n            // increment word count\n            word_count++;\n            printf(\"word_count = %i\\n\", word_count);\n\n            if (word_count == num_words)\n            {\n                 printf(\"\\nDONE!\\n\\n\");\n                 return word_count;\n            }\n        }\n        // check if the user entered too many characters\n        else if (inlength == BUF_SIZE_WORDS - 1) /* the line was too long */\n        {\n            printf(\"you've entered too many characters... please stick to a maximum of %i\\n\", BUF_SIZE_WORDS);\n            empty_stdin();\n        }\n    }\n    // return word_count;\n}\n\n\n/* helper function to remove any chars left in input buffer */\nvoid empty_stdin()\n{\n    int c = getchar();\n    while (c != '\\n' &amp;&amp; c != EOF)\n        c = getchar();\n}\n\n// THIS HASH FUNCTION IS TOO BASIC AND NEEDS TO BE REPLACED WITH SOMETHING BETTER\nunsigned int hash(char *str, int length)\n{\n    int sum = 0;\n    for (int j = 0; j &lt; length; j++)\n    {\n        sum += str[j];\n    }\n    printf(\"here's what the hashing function is returning: %i\\n\", (sum % MAX_WORDS));\n    return sum % MAX_WORDS;\n}\n\nvoid print_ht(table *array[MAX_WORDS])\n{\n    // printf(\"address of the hash table inside print function: %p\\n\\n\", array);\n\n    table *cursor = malloc(sizeof(table));\n    // add memory check\n\n    for (int i = 0; i &lt; MAX_WORDS; i++)\n    {\n        printf(\"[%i] -&gt; \", i);\n        cursor = array[i];\n        if (cursor-&gt;next)\n        {\n            table *temp = malloc(sizeof(table));\n            temp = cursor-&gt;next;\n\n            printf(\"%s\\n\", temp-&gt;text);\n            free(temp);\n        }\n        else\n        {\n            printf(\"empty\\n\");\n        }\n    }\n    free(cursor);\n}\n</code></pre>\n\n<p>I'm sure there are other problems with this code, and I appreciate any other advice anyone would be willing to give here. For instance, I always wonder which parts of the code need to be their own functions and which should/can be combined together. It seems that some of this stuff should be separated out, but I've had a lot of trouble figuring out how to properly pass info from one function to another.</p>\n\n<p><strong>UPDATE #1</strong> (after some of the comments):</p>\n\n<p>Yay, this works now!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BUF_SIZE_WORDS 4096\n#define BUF_SIZE_NUMBERS 256\n#define MAX_WORDS 10\n\ntypedef struct tablestruct\n{\n    int val;\n    char* text;\n    struct tablestruct *next;\n}\ntable;\n\n\n// declare the hashing function that takes in the string to be hashed and the length of it\nunsigned int hash(char *str, int length);\n\n// // declare a linked list creation function\n// lnode *createnode(char *str, htnode *hashtable);\n\n// declare a hash table printing function\nvoid print_ht(table *array[MAX_WORDS]);\n\n\nint number_input();\nint word_input(int num_words, table *array[MAX_WORDS]);\nvoid empty_stdin();\n\nint main(void)\n{\n    // call number_input() to ask user for number of words they'd like to store, save that in word_count\n    int word_count = number_input();\n\n    // create hash table\n    table *array[MAX_WORDS];\n\n    for (int j = 0; j &lt; MAX_WORDS; j++)\n    {\n        array[j] = malloc(sizeof(table));\n        array[j]-&gt;val = j;\n    }\n\n    // add some kind of a memory check?\n\n    // PUT word_input inside the if statement to make sure it worked?\n    // call word_input() and store the result in success\n    int success = word_input(word_count, array);\n    // if not successful:\n    if (!success)\n    {\n        fputs (\"some kind of problem with word_input\\n\", stderr);\n        return 1;\n    }\n\n    // printf(\"\\ncurrent address of the hash table: %p\\n\", &amp;array[0]);\n\n    printf(\"printing hash table: \\n\");\n\n    print_ht(array);\n\n    // REMEMBER TO FREE WHATEVER'S MALLOC'ED\n}\n\nint number_input(void)\n{\n    // a bunch of code is borrowed from David's answer here: https://stackoverflow.com/questions/52920852/why-is-the-following-code-not-allowing-me-to-get-user-input-with-fgets-yet-works?noredirect=1#comment92940817_52920852\n\n    int num_words = 0,       /* number of words to enter */\n        word_count_check = 0;          /* word count */\n\n    char buffer[BUF_SIZE_NUMBERS] = \"\";    /* buffer of sufficient size for input */\n\n    for (;;) /* loop continually until valid input of NUMBER OF WORDS USER WANTS TO ENTER or user cancels */\n    {\n        printf (\"how many words would you like to enter? [1-%d]: \", MAX_WORDS);\n        // check for cancellation of input\n        if (!fgets (buffer, BUF_SIZE_NUMBERS, stdin))\n        {\n            fputs (\"user canceled input\\n\", stderr);\n            return 1;\n        }\n\n        // check if user simply hit enter w/o typing anything\n        if(buffer[0] == '\\n')\n        {\n            printf(\"please enter a value\\n\");\n            continue;\n        }\n\n        size_t inlength = strlen(buffer);\n\n        if (inlength &amp;&amp; buffer[inlength - 1] == '\\n')\n        {\n            // printf(\"hurray!\\n\");\n            buffer[--inlength] = 0;\n        }\n        else if (inlength == BUF_SIZE_NUMBERS - 1) /* the line was too long */\n        {\n            printf(\"you've entered too many characters... please stick to a maximum of %i\\n\", BUF_SIZE_NUMBERS);\n            empty_stdin();\n            // continue;\n        }\n\n        // make sure user actually entered a proper int\n        if (sscanf (buffer, \"%d\", &amp;num_words) != 1) /* sscanf is used for conversion */\n        {\n            fputs (\"invalid conversion to int; please provide valid input\\n\", stderr);\n            continue;\n        }\n\n        // check if the number entered is out of range\n        if (num_words &lt; 1 || num_words &gt; MAX_WORDS)\n            fprintf (stderr, \"%2d out of valid range.\\n\", num_words);\n        else\n            break; /*if the input has been validated, we can now break out of the for loop */\n    }\n\n    return(num_words);\n}\n\nint word_input(int num_words, table *array[MAX_WORDS])\n{\n    int word_count = 0;\n\n    for(;;) /* loop until word_count == num_words is achieved */\n    {\n        // declare an array for storing input string\n        char buffer[BUF_SIZE_WORDS];\n        char valid_input[BUF_SIZE_WORDS];\n\n        // prompt user for input\n        printf(\"\\nplease enter a string: \");\n\n        // get input and check for CTRL+D\n        if (!fgets(buffer, BUF_SIZE_WORDS, stdin))\n        {\n            fputs (\"user canceled input\\n\", stderr);\n            exit(1);\n        }\n\n         // check if user simply hit enter w/o typing anything\n        if(buffer[0] == '\\n')\n        {\n            printf(\"please enter a word that's more than 0 characters\\n\");\n            // empty_stdin();\n            continue;\n        }\n\n        size_t inlength = strlen(buffer);\n\n        if (inlength &amp;&amp; buffer[inlength - 1] == '\\n')\n        {\n            buffer[--inlength] = 0;\n\n            // get rid of trailing spaces using sscanf\n            sscanf(buffer, \"%s\", valid_input);\n            inlength = strlen(valid_input);\n\n            printf(\"string length: %zu\\n\", inlength);\n\n            // call the hash function to get the hash code\n            int result = hash(&amp;valid_input[0], inlength);\n\n            table *newnode = malloc(sizeof(table));\n            newnode-&gt;text = malloc(strlen(valid_input)+1);\n            strcpy(newnode-&gt;text, valid_input);\n\n            // confirm string has been stored\n            printf(\"you've entered: %s\\n\", newnode-&gt;text);\n\n            // attach the node to correct slot in the hash table -- ADD LINKED LIST FUNCTIONALITY HERE TO DEAL WITH COLLISIONS!\n            array[result]-&gt;next = newnode;\n            // printf(\"address of the current HT entry is: %p\\n\", newnode);\n\n            // increment word count\n            word_count++;\n            printf(\"word_count = %i\\n\", word_count);\n\n            if (word_count == num_words)\n            {\n                 printf(\"\\nDONE!\\n\\n\");\n                 return word_count;\n            }\n        }\n        // check if the user entered too many characters\n        else if (inlength == BUF_SIZE_WORDS - 1) /* the line was too long */\n        {\n            printf(\"you've entered too many characters... please stick to a maximum of %i\\n\", BUF_SIZE_WORDS);\n            empty_stdin();\n        }\n    }\n    // return word_count;\n}\n\n\n/* helper function to remove any chars left in input buffer */\nvoid empty_stdin()\n{\n    int c = getchar();\n    while (c != '\\n' &amp;&amp; c != EOF)\n        c = getchar();\n}\n\n// THIS HASH FUNCTION IS TOO BASIC AND NEEDS TO BE REPLACED WITH SOMETHING BETTER\nunsigned int hash(char *str, int length)\n{\n    int sum = 0;\n    for (int j = 0; j &lt; length; j++)\n    {\n        sum += str[j];\n    }\n    printf(\"here's what the hashing function is returning: %i\\n\", (sum % MAX_WORDS));\n    return sum % MAX_WORDS;\n}\n\nvoid print_ht(table *array[MAX_WORDS])\n{\n    // printf(\"address of the hash table inside print function: %p\\n\\n\", array);\n\n    table *cursor; // = malloc(sizeof(table));\n    // add memory check\n\n    for (int i = 0; i &lt; MAX_WORDS; i++)\n    {\n        printf(\"[%i] -&gt; \", i);\n        cursor = array[i];\n        if (cursor-&gt;next)\n        {\n            table *temp; //= malloc(sizeof(table));\n            temp = cursor-&gt;next;\n\n            printf(\"%s\\n\", temp-&gt;text);\n            // free(temp);\n        }\n        else\n        {\n            printf(\"empty\\n\");\n        }\n    }\n    // free(cursor);\n}\n</code></pre>\n"}, {"tags": ["c", "browser", "webrtc", "stun"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5809895, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152777430758175/picture?type=large", "display_name": "Patrick Regnouf", "link": "https://stackoverflow.com/users/5809895/patrick-regnouf"}, "edited": false, "score": 0, "creation_date": 1541022972, "post_id": 53089630, "comment_id": 93081736, "body": "Thanks for such a prompt answer, I do not know how and if libnice does implement stun consent. I have tried to add a=ice-lite to the sdp but that didn\u2019t help."}, {"owner": {"reputation": 69, "user_id": 5809895, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152777430758175/picture?type=large", "display_name": "Patrick Regnouf", "link": "https://stackoverflow.com/users/5809895/patrick-regnouf"}, "edited": false, "score": 0, "creation_date": 1541069503, "post_id": 53089630, "comment_id": 93095077, "body": "Addendum: libnice does not implement RFC 7675, and I am talking to Janus.js so basically it should work and it does not."}], "tags": [], "owner": {"reputation": 11384, "user_id": 4352772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/olHTi.jpg?s=128&g=1", "display_name": "Philipp Hancke", "link": "https://stackoverflow.com/users/4352772/philipp-hancke"}, "is_accepted": false, "score": 0, "last_activity_date": 1541009412, "creation_date": 1541009412, "answer_id": 53089630, "question_id": 53089180, "link": "https://stackoverflow.com/questions/53089180/stun-connection-not-completing/53089630#53089630", "title": "STUN connection not completing", "body": "<p>You might need <a href=\"https://tools.ietf.org/html/rfc7675\" rel=\"nofollow noreferrer\">stun consent</a> which uses binding requests / response instead of binding indications. Also try declaring your peer as a lite implementation by adding a=ice-lite to the SDP.</p>\n"}], "owner": {"reputation": 69, "user_id": 5809895, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152777430758175/picture?type=large", "display_name": "Patrick Regnouf", "link": "https://stackoverflow.com/users/5809895/patrick-regnouf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1541069397, "creation_date": 1541007550, "last_edit_date": 1541069397, "question_id": 53089180, "link": "https://stackoverflow.com/questions/53089180/stun-connection-not-completing", "title": "STUN connection not completing", "body": "<p>I am writing an RTP relay and am stumbling upon a problem.</p>\n\n<p>Based on the libnice threaded example I have written the part of the software\nthat uses STUN to connect to a javascript running in chrome.</p>\n\n<p>Basically this is what happens on my software side:</p>\n\n<p>waiting for state READY or FAILED signal...\nSIGNAL: state changed 1 1 connected[3]\nState is now connected\nSIGNAL: state changed 1 1 ready[4]\nState is now ready</p>\n\n<p>so cleary libnice is firing my callback stating that the connection is\nfirmly established</p>\n\n<p>wireshark is showing binding indication packet</p>\n\n<p>but and that is the stumper</p>\n\n<p>Here is the log from chrome in webrtc internals:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Time    Event\n29/10/2018, 19:59:11    setRemoteDescription\n29/10/2018, 19:59:11    signalingstatechange\n29/10/2018, 19:59:11    receiverAdded\n29/10/2018, 19:59:11    setRemoteDescriptionOnSuccess\n29/10/2018, 19:59:11    createAnswer\n29/10/2018, 19:59:11    createAnswerOnSuccess\n29/10/2018, 19:59:11    setLocalDescription\n29/10/2018, 19:59:11    iceconnectionstatechange\n29/10/2018, 19:59:11    signalingstatechange\n29/10/2018, 19:59:11    setLocalDescriptionOnSuccess\n29/10/2018, 19:59:11    icegatheringstatechange\n29/10/2018, 19:59:11    icecandidate (host)\n29/10/2018, 19:59:11    icegatheringstatechange\n</code></pre>\n\n<p>the iceconnectionstatechange with the firm connection is never fired.\nwhich means that chrome never detected the established connection after\nthe last trickle whereas my program does.</p>\n\n<p>The last iceconnectionstatechange fired in chrome is \"checking\"</p>\n\n<p>how do i go about debugging that ???</p>\n\n<p>Any help truly appreciated</p>\n\n<p>Thanks</p>\n\n<p>/Patrick</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "edited": false, "score": 2, "creation_date": 1541007093, "post_id": 53089044, "comment_id": 93075071, "body": "You can try running your program with a debugger such as gdb."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1541007101, "post_id": 53089044, "comment_id": 93075076, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. Compile with all warnings and debug info, so <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Then <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">use the <code>gdb</code> debugger</a>"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1541007261, "post_id": 53089044, "comment_id": 93075167, "body": "So put <code>fprintf(stderr, &quot;%s:%d\\n&quot;, __FILE__, __LINE__)</code> between EVERY statement in your code and see where it stops. Or just use a debugger...."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541007484, "post_id": 53089044, "comment_id": 93075264, "body": "This isn&#39;t a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. For example, <code>pcbTaken</code> isn&#39;t defined."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541007605, "post_id": 53089044, "comment_id": 93075317, "body": "If you write a <code>for</code> loop like this: <code>for(i = 0; i &lt; MAX; ++i) pcbTaken[i] = 0;</code> you&#39;ll make it easier for people to read and help with your code. And it won&#39;t slow the code down."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10521268"}, "reply_to_user": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "edited": false, "score": 1, "creation_date": 1541007810, "post_id": 53089044, "comment_id": 93075408, "body": "@GoodDeeds  I do not own permissions that allows me to complete the task as stated by <b>Missing separate debuginfos, use: debuginfo-install glibc-2.17-222.el7.x86_64</b>. This is because of the root being my CS department at my school."}, {"owner": {"reputation": 190, "user_id": 3671925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f24bdbbff136b1f68e1a8feca5847f78?s=128&d=identicon&r=PG&f=1", "display_name": "whoasked", "link": "https://stackoverflow.com/users/3671925/whoasked"}, "edited": false, "score": 0, "creation_date": 1541008693, "post_id": 53089044, "comment_id": 93075862, "body": "To be fair people shouldn&#39;t expect you to able to find things like this without a debugger for anything other than the most trivial of examples. I once spent two hours left alone with a laptop in an interview with quite a drawn out program to write. When at the end I pointed out gdb wasn&#39;t installed and I couldn&#39;t install it, the interviewer looked genuinely surprised but then cut me no slack ... If you don&#39;t have the tools ..."}], "owner": {"user_type": "does_not_exist", "display_name": "user10521268"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "closed_date": 1541008335, "answer_count": 0, "score": 0, "last_activity_date": 1541008345, "creation_date": 1541006962, "question_id": 53089044, "link": "https://stackoverflow.com/questions/53089044/trouble-finding-seg-faults", "closed_reason": "Duplicate", "title": "Trouble finding Seg Faults", "body": "<p>Having a difficult time pointing out where my segmentation faults are. Once i can pinpoint them i can work to resolve the issue. From my compilation I was able to determine where they are located. Both functions are in different source files. I know seg faults deal mainly with <strong>NULL</strong> and other pointers,, as well as dereferencing a pointer when it shouldn't be. However, I do not see any of those problems. Can anyone help?</p>\n\n<p><strong>First Function</strong></p>\n\n<pre><code>  int main(int argc, char *argv[]){\n    signal(SIGINT, signalHandler);\n\n    srand(time(NULL));\n\n    int child, nextChild, selectedChild, i, x, sleepTime;\n    float maxTime; /*Max time for scheduling*/\n    int shmKey = ftok(\".\", 40);\n    int semKey = ftok(\".\", 41);\n    int PCB = 0;\n    float wait = 0; /*Wait time for Child*/\n    float current = 0;\n    float currentWaiting = 0; /*Current scheduling*/\n\n    /*Initialize Shared Memory*/\n\n    shmID = shmget(shmKey, SHMPTRSIZE, 0600 | IPC_CREAT);\n    if(shmID == -1){\n            perror(\"shmget Err\"); /*error with shmget*/\n            exit(1);\n    }\n    if(!(ShmPTR = (shmPtr *)(shmat(shmID, 0, 0)))){\n            perror(\"shmat Err\");\n    }\n    logged(\"Allocated and attached to shared memory\\n\");\n\n    /*Initialization of value in shared memory*/\n    ShmPTR-&gt;seconds = 0;\n    ShmPTR-&gt;nanoseconds = 0;\n    ShmPTR-&gt;wait = 1;\n    ShmPTR-&gt;waitTime = 0;\n    ShmPTR-&gt;forkTime = 0;\n    ShmPTR-&gt;doneTime = 0;\n    ShmPTR-&gt;timeQuantum = QUANTUM;\n\n    for(i = 0; i &lt; MAX; pcbTaken[i++] = 0);\n    sprintf(buff, \"Using Time Quantum = %d\\n\", QUANTUM);\n    logged(buff);\n\n    /*Initialization Semaphore Memory*/\n    if((semID = semget(semKey, 1, 0600 | IPC_CREAT)) == -1){\n            sprintf(buff, \"OSS: semget\");\n            perror(buff);\n            exit(1);\n    }\n\n    union semun {\n            int val;\n            struct semid_ds *buf;\n            ushort * array;\n    } argument;\n\n    argument.val = 1;\n    if(semctl(semID, 0, SETVAL, argument) == 1){\n            sprintf(buff, \"OSS: semctl\");\n            perror(buff);\n            exit(1);\n    }\n\n    logged(\"Created Scheduling Semaphore\");\n\n    /*Forking Children*/\n    for(i = 0; i &lt; MAX; childFork(i++));\n\n    ShmPTR-&gt;wait = 0;\n    while(1){\n            if(childCount() &lt; MAX){\n                    for(child = 0; child &lt;= MAX; child++){\n                            if((child + PCB) &gt;= MAX)\n                                    x = child;\n                            else\n                                    x = child + PCB;\n                            if(!pcbTaken[x]){\n                                    PCB = x;\n                                    selectedChild = x;\n                                    break;\n                            }\n                    }\n                    sprintf(buff,\"selectedChild child number %d to fork\", selectedChild);\n                    logged(buff);\n                    printf(\"Create new process\\n\");\n                    childFork(selectedChild);/*Create a new selected process*/\n            }\n            semWait(semID);\n\n            /*Scheduling Algorithm*/\n            maxTime = 0;\n            for(i = 0; i &lt; MAX; i++){\n                    current = (float)ShmPTR-&gt;seconds + ((float)ShmPTR-&gt;nanoseconds / 1000);\n                    wait = (current - ShmPTR-&gt;childPCB[i].lastEx);\n\n                    /*Update*/\n                    ShmPTR-&gt;waitTime = ShmPTR-&gt;waitTime + wait;\n                    ShmPTR-&gt;cpuTime = ShmPTR-&gt;cpuTime + ShmPTR-&gt;childPCB[i].cpuTime;\n\n                    if(ShmPTR-&gt;childPCB[i].cpuTime &gt; 0)\n                            currentWaiting = wait / ShmPTR-&gt;childPCB[i].cpuTime;\n                    else\n                            currentWaiting = wait;\n                    if(currentWaiting &gt; maxTime){\n                            nextChild = i;\n                            maxTime = currentWaiting;\n                    }\n\n            }\n            sprintf(buff, \"Process ID %d\", childPID[nextChild]);\n            logged(buff);\n            ShmPTR-&gt;disPID = childPID[nextChild];\n            ShmPTR-&gt;childPCB[nextChild].run = 0;\n\n            /*Update Clock*/\n            ShmPTR-&gt;seconds++;\n            ShmPTR-&gt;nanoseconds = 1 +(rand() % 1000);\n            sprintf(buff, \"Clock is now %d.%04d\", ShmPTR-&gt;seconds, ShmPTR-&gt;nanoseconds);\n            logged(buff);\n\n            printf(\"%d\\n\", ShmPTR-&gt;seconds);\n            if(ShmPTR-&gt;seconds &gt;= 100){\n                    sprintf(buff,\"Minimum run time reached: Exit\");\n                    logged(buff);\n                    break;\n            }\n\n            sleepTime = rand() % 2;\n            sprintf(buff, \"Sleep %d\", sleepTime);\n            logged(buff);\n            sleep(sleepTime);\n    }\n    report();\n    clean(15);\n    return 0;\n}\n</code></pre>\n\n<p>and the \n<strong>Second Function</strong></p>\n\n<pre><code>void logged(char *message){\n    char name[10] = \"\";\n    sprintf(name, \"sim%02d.log\", childID);\n\n    FILE *fp;\n    if(!(fp = fopen(name, \"a\"))){\n            sprintf(errors, \"OSS: sim %02d: opening %s\", childID, name);\n            perror(errors);\n            exit(1);\n    }\n    time_t now;\n    struct tm *timeinfo;\n    time(&amp;now);\n    timeinfo = localtime(&amp;now);\n\n    fprintf(fp, \"OSS: %02d:%02d:%02d\\t\", timeinfo-&gt;tm_hour, timeinfo-&gt;tm_min, timeinfo-&gt;tm_sec);\n    fprintf(fp, \"OSS: User %02d:\\t%s\\n\", childID, message);\n    fclose(fp);\n}\n</code></pre>\n"}, {"tags": ["linux", "linux-kernel", "c"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4024767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/40526fdb3e78e83ab421d944245db144?s=128&d=identicon&r=PG&f=1", "display_name": "MD_90", "link": "https://stackoverflow.com/users/4024767/md-90"}, "edited": false, "score": 0, "creation_date": 1541207748, "post_id": 53127539, "comment_id": 93149634, "body": "Wow! I never thought about using the copy_from_user."}, {"owner": {"reputation": 311, "user_id": 10598671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/od5oo.png?s=128&g=1", "display_name": "Knightingale", "link": "https://stackoverflow.com/users/10598671/knightingale"}, "reply_to_user": {"reputation": 5, "user_id": 4024767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/40526fdb3e78e83ab421d944245db144?s=128&d=identicon&r=PG&f=1", "display_name": "MD_90", "link": "https://stackoverflow.com/users/4024767/md-90"}, "edited": false, "score": 0, "creation_date": 1541208430, "post_id": 53127539, "comment_id": 93149734, "body": "Well, if you&#39;re running in the same process context then that&#39;s exactly what you should do. Instead, that&#39;s the only option you have as just randomly memcpy() can be dangerous in these situations."}, {"owner": {"reputation": 5, "user_id": 4024767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/40526fdb3e78e83ab421d944245db144?s=128&d=identicon&r=PG&f=1", "display_name": "MD_90", "link": "https://stackoverflow.com/users/4024767/md-90"}, "edited": false, "score": 0, "creation_date": 1541208522, "post_id": 53127539, "comment_id": 93149749, "body": "Wow! I never thought about using the copy_from_user. We ended up trying the approach of find_vma for the start and end address, modify the addresses with incrementing and decrementing to get a valid vma range (if available), then walk through the pages and dumping findings to a file. We did okay, but it failed on the range (0, 0xfffffff) (full dump). We then tried similar approach with incremental check pointing (only checking PageDirty()), but it failed."}, {"owner": {"reputation": 311, "user_id": 10598671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/od5oo.png?s=128&g=1", "display_name": "Knightingale", "link": "https://stackoverflow.com/users/10598671/knightingale"}, "reply_to_user": {"reputation": 5, "user_id": 4024767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/40526fdb3e78e83ab421d944245db144?s=128&d=identicon&r=PG&f=1", "display_name": "MD_90", "link": "https://stackoverflow.com/users/4024767/md-90"}, "edited": false, "score": 0, "creation_date": 1541209390, "post_id": 53127539, "comment_id": 93149867, "body": "Well, how did you read the data itself? I hate betting but I think it&#39;d be something with mapping which copy_from_user will solve."}, {"owner": {"reputation": 5, "user_id": 4024767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/40526fdb3e78e83ab421d944245db144?s=128&d=identicon&r=PG&f=1", "display_name": "MD_90", "link": "https://stackoverflow.com/users/4024767/md-90"}, "edited": false, "score": 0, "creation_date": 1541209568, "post_id": 53127539, "comment_id": 93149888, "body": "follow_page and linked list"}, {"owner": {"reputation": 5, "user_id": 4024767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/40526fdb3e78e83ab421d944245db144?s=128&d=identicon&r=PG&f=1", "display_name": "MD_90", "link": "https://stackoverflow.com/users/4024767/md-90"}, "edited": false, "score": 0, "creation_date": 1541210219, "post_id": 53127539, "comment_id": 93149983, "body": "Our dump file did have a lot of 0x0 pages"}, {"owner": {"reputation": 311, "user_id": 10598671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/od5oo.png?s=128&g=1", "display_name": "Knightingale", "link": "https://stackoverflow.com/users/10598671/knightingale"}, "reply_to_user": {"reputation": 5, "user_id": 4024767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/40526fdb3e78e83ab421d944245db144?s=128&d=identicon&r=PG&f=1", "display_name": "MD_90", "link": "https://stackoverflow.com/users/4024767/md-90"}, "edited": false, "score": 0, "creation_date": 1541210988, "post_id": 53127539, "comment_id": 93150098, "body": "Well this is because 0 pages might be accessible through kernel but they are not actually mapped. Be careful with that as you might raise a page fault in kernel (which is a bad idea generally)."}], "tags": [], "owner": {"reputation": 311, "user_id": 10598671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/od5oo.png?s=128&g=1", "display_name": "Knightingale", "link": "https://stackoverflow.com/users/10598671/knightingale"}, "is_accepted": true, "score": 0, "last_activity_date": 1541207545, "creation_date": 1541207545, "answer_id": 53127539, "question_id": 53102056, "link": "https://stackoverflow.com/questions/53102056/2-questions-about-memory-check-pointing-with-linux-kernel-custom-implementation/53127539#53127539", "title": "2 Questions about memory check pointing with linux kernel (custom implementation)", "body": "<p>VMAs contain the virtual adresses of their first and (one after their) last bytes:</p>\n\n<pre><code>struct vm_area_struct {\n     /* The first cache line has the info for VMA tree walking. */\n\n     unsigned long vm_start;         /* Our start address within vm_mm. */\n     unsigned long vm_end;           /* The first byte after our end address\n                                        within vm_mm. */\n...\n</code></pre>\n\n<p>This means that in order to get the page's data you need to first figure out in what context is your code running?</p>\n\n<p>If it's within the process context, then a simple <code>copy_from_user</code> approach might be enough to get the actual data and a page walk (through the entirety of your PGD/PUD/PMD/PTE) to get the PFN and then turn it to a <code>struct page</code>. (Take care <em>not</em> to use the seductive <code>virt_to_page(addr)</code> as this will only work on kernel addresses).</p>\n\n<p>In terms of iteration, you need only iterate in PAGE_SIZEs, over the virtual addresses you get from the VMAs.</p>\n\n<p>Note that this <em>assumes</em> that the pages are actually mapped. If not (<code>!pte_present(pte_t a)</code>) you might need to remap it yourself to access the data.</p>\n\n<p>If your check is running in some other context (such as a kthread/interrupt) you must remap the page from the swap before accessing it which is a whole different case. If you want the easy way, I'd look up here: <a href=\"https://www.kernel.org/doc/gorman/html/understand/understand014.html\" rel=\"nofollow noreferrer\">https://www.kernel.org/doc/gorman/html/understand/understand014.html</a> to understand how to handle swap lookup / retrieval.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1541078072, "question_id": 478950}, "owner": {"reputation": 5, "user_id": 4024767, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/40526fdb3e78e83ab421d944245db144?s=128&d=identicon&r=PG&f=1", "display_name": "MD_90", "link": "https://stackoverflow.com/users/4024767/md-90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 53127539, "answer_count": 1, "score": 0, "last_activity_date": 1541207545, "creation_date": 1541006737, "question_id": 53102056, "link": "https://stackoverflow.com/questions/53102056/2-questions-about-memory-check-pointing-with-linux-kernel-custom-implementation", "title": "2 Questions about memory check pointing with linux kernel (custom implementation)", "body": "<p>We are given a project where we implementing memory checkpointing (basic is just looking over pages and dumping data found to a file (also check info about the page (private, locked, etc)) and incremental which is where we only look at if data changed previously and dump it to a file). My understanding of this is we are pretty much building a smaller scale version of memory save states (I could be wrong but that's just what I'm getting from this). We are currently using VMA approach to our problem to go through the given range (as long as it doesn't go below or above the user space range (this means no kernel range or below user space)) in order to report the data found from the pages we encounter. I know the vma_area_struct is used to access vma (some functions including find_vma()). My issue is I'm not sure how we check the individual pages within this given range of addresses (user gives us) from using this vma_area_struct. I only know about struct page (this is pretty much it), but im still learning about the kernel in detail, so im bound to miss things. Is there something I'm missing about the vma_area_sruct when accessing pages?</p>\n\n<p>Second question is, what do we use to iterate through each individual page within the found vma (from given start and end address)?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1541006773, "post_id": 53088747, "comment_id": 93074866, "body": "Computing binomial coefficients via factorial is inefficient and quickly produces incorrect results due to overflow of the intermediate calculations."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1541010068, "post_id": 53088747, "comment_id": 93076504, "body": "In the Pascal triange, each number not on the edge is a sum of the two numbers above it. Try to produce the numbers this way."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10554547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3036bdaa1ad3144f3511d4d4109e0db6?s=128&d=identicon&r=PG&f=1", "display_name": "JohnCenaFanboi", "link": "https://stackoverflow.com/users/10554547/johncenafanboi"}, "edited": false, "score": 0, "creation_date": 1541010442, "post_id": 53089604, "comment_id": 93076671, "body": "Thanks for this! I&#39;ve looked at your case 2 and mirrored the same in mine, and it works exactly how I want but with one problem, after the triangle is printed, it seems like the program is still waiting for input rather than ending and I have to close down the entire terminal. Do you know how to fix this?"}, {"owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "reply_to_user": {"reputation": 13, "user_id": 10554547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3036bdaa1ad3144f3511d4d4109e0db6?s=128&d=identicon&r=PG&f=1", "display_name": "JohnCenaFanboi", "link": "https://stackoverflow.com/users/10554547/johncenafanboi"}, "edited": false, "score": 0, "creation_date": 1541011909, "post_id": 53089604, "comment_id": 93077308, "body": "@JohnCenaFanboi The line <code>long unsigned int i, j, rows;</code> change to <code>int i, j, rows;</code>, then it&#39;s ok."}], "tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": true, "score": 0, "last_activity_date": 1541009321, "creation_date": 1541009321, "answer_id": 53089604, "question_id": 53088747, "link": "https://stackoverflow.com/questions/53088747/how-to-turn-the-pascal-triangle-upside-down-in-c-so-the-first-row-is-printed-la/53089604#53089604", "title": "How to turn the Pascal triangle upside down in C, so the first row is printed last, and the last row is printed first?", "body": "<p>The following <code>code</code> could work for three cases.</p>\n\n<p>test: <code>./a.out 5</code></p>\n\n<pre><code>case 1: \n\n                   1    \n               1       1    \n           1       2       1    \n       1       3       3       1    \n   1       4       6       4       1    \n\n\n case 2: \n\n   1       4       6       4       1    \n       1       3       3       1    \n           1       2       1    \n               1       1    \n                   1    \n\n\n case 3: \n\n                   1    \n               1       1    \n           1       2       1    \n       1       3       3       1    \n   1       4       6       4       1    \n       1       3       3       1    \n           1       2       1    \n               1       1    \n                   1    \n</code></pre>\n\n<p>code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char **argv)\n{\n    if (argc != 2)\n        return -1;\n\n    char* ptr;\n    int rows = strtol(argv[1], &amp;ptr, 10);\n    if (rows &lt; 1 || rows &gt; 10 || *ptr != '\\0')\n    {\n        printf(\"Error\\n\");\n        return 1;\n    }\n\n    int f[20][20];\n\n    for (int i = 0; i &lt; rows; ++i)\n        f[i][i] = f[i][0] = 1;\n    for (int i = 2; i != rows; ++i)\n        for (int j = 1; j != i; ++j)\n            f[i][j] = f[i-1][j] + f[i-1][j-1];\n\n    printf(\"\\n\\n case 1: \\n\\n\");\n    for (int i = 0; i &lt; rows; ++i)\n    {\n        for (int j = 0; j &lt; rows - i - 1; ++j)\n            printf(\"%4c\", ' ');\n        for (int j = 0; j &lt;= i; ++j)\n            printf(\"%4d%4c\", f[i][j], ' ');\n        printf(\"\\n\");\n    }\n\n    printf(\"\\n\\n case 2: \\n\\n\");\n    for (int i = rows - 1; i &gt;= 0; --i)\n    {\n        for (int j = 0; j &lt; rows - i - 1; ++j)\n            printf(\"%4c\", ' ');\n        for (int j = 0; j &lt;= i; ++j)\n            printf(\"%4d%4c\", f[i][j], ' ');\n        printf(\"\\n\");\n    }\n\n    printf(\"\\n\\n case 3: \\n\\n\");\n    for (int i = 0; i &lt; rows; ++i)\n    {\n        for (int j = 0; j &lt; rows - i - 1; ++j)\n            printf(\"%4c\", ' ');\n        for (int j = 0; j &lt;= i; ++j)\n            printf(\"%4d%4c\", f[i][j], ' ');\n        printf(\"\\n\");\n    }\n\n    for (int i = rows - 2; i &gt;= 0; --i)\n    {\n        for (int j = 0; j &lt; rows - i - 1; ++j)\n            printf(\"%4c\", ' ');\n        for (int j = 0; j &lt;= i; ++j)\n            printf(\"%4d%4c\", f[i][j], ' ');\n        printf(\"\\n\");\n    }\n\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10554547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3036bdaa1ad3144f3511d4d4109e0db6?s=128&d=identicon&r=PG&f=1", "display_name": "JohnCenaFanboi", "link": "https://stackoverflow.com/users/10554547/johncenafanboi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 0, "accepted_answer_id": 53089604, "answer_count": 1, "score": 1, "last_activity_date": 1541016860, "creation_date": 1541005799, "last_edit_date": 1541016860, "question_id": 53088747, "link": "https://stackoverflow.com/questions/53088747/how-to-turn-the-pascal-triangle-upside-down-in-c-so-the-first-row-is-printed-la", "title": "How to turn the Pascal triangle upside down in C, so the first row is printed last, and the last row is printed first?", "body": "<p>I've created a program which will ask the user for input regarding the Pascal triangle and then output it based on their input, and it works, however, I now need to make it upside down, so that the last row is printed first, and the first row is printed last. I've thought of 2 ways of doing it but not entirely sure how to execute them. One way would be to change the loops, as i've got 3 For loops, and they have 1 added on to them each time, so instead of adding 1, it'd subtract 1, however, I don't think this will work as it'd mean the starting value in the loop would have to be greater than the number of rows, and the loop terminates when the value in the variable is equal or larger than the rows. Another way I thought of is to reposition the printf function, but not entirely sure how to do that.</p>\n\n<p>My code:</p>\n\n<pre><code>for (i=0; i &lt; rows; i++)\n</code></pre>\n"}, {"tags": ["c", "unix", "pipe"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1541005723, "post_id": 53088681, "comment_id": 93074318, "body": "<code>read(pipe2[0],message,100)</code> I think this blocks until 100 characters are read/are available from the pipe. Not <code>strlen(&quot;Ready&quot;) + 1</code> characters, but 100 characters. Is this your intent? I think you want to read one char at a time until some delimeter, but you need to send the delimeter (e.g. null byte) too. Or you can set O_NONBLOCK on pipes, but anyway you didn&#39;t implement any method to ensure that your read a whole message."}, {"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "edited": false, "score": 0, "creation_date": 1541006373, "post_id": 53088681, "comment_id": 93074655, "body": "Probably not the problem, but warning fork will return <code>-1</code> on error."}, {"owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "edited": false, "score": 0, "creation_date": 1541007400, "post_id": 53088681, "comment_id": 93075228, "body": "Do you practice test driven development?"}], "answers": [{"tags": [], "owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "is_accepted": false, "score": 1, "last_activity_date": 1541006428, "last_edit_date": 1541006428, "creation_date": 1541005999, "answer_id": 53088798, "question_id": 53088681, "link": "https://stackoverflow.com/questions/53088681/nonterminating-c-program-with-pipes/53088798#53088798", "title": "Nonterminating C program with pipes", "body": "<p>Fork() causes the child to inherit the open file descriptors of the parent, including pipe()s.   A pipe becomes unreadable (EOF) when all \u201cwriters\u201d have closed their pipe.  You have extraneous \u201cwrite\u201d ends of a pipe open, thus it will not close properly.</p>\n\n<p>At a minimum, you need the parent to close pipe1[1], pipe3[1].   A little bit of checking return values probably wouldn\u2019t hurt your effort either.</p>\n"}, {"tags": [], "owner": {"reputation": 6696, "user_id": 537980, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/DZUB4.png?s=128&g=1", "display_name": "ctrl-alt-delor", "link": "https://stackoverflow.com/users/537980/ctrl-alt-delor"}, "is_accepted": false, "score": 0, "last_activity_date": 1541007239, "creation_date": 1541007239, "answer_id": 53089114, "question_id": 53088681, "link": "https://stackoverflow.com/questions/53088681/nonterminating-c-program-with-pipes/53089114#53089114", "title": "Nonterminating C program with pipes", "body": "<p>Your forking is confusing, and not the only problem.</p>\n\n<p>you do </p>\n\n<p>fork\nif parent or error then loop\nboth parent and child form\nif new parent (old child) or error then loop\nall three processes wait\n\u2026</p>\n\n<p>I would advise starting with a simple program with one pipe and one fork (2 processes). Get this to work before adding more.</p>\n\n<p>See this blog post for a tutorial of this simpler use case <a href=\"https://ctrlaltdelor.wordpress.com/2009/06/23/creation-of-an-interprocess-pipe/\" rel=\"nofollow noreferrer\">https://ctrlaltdelor.wordpress.com/2009/06/23/creation-of-an-interprocess-pipe/</a> then expand for what you need.</p>\n"}], "owner": {"reputation": 1, "user_id": 10586896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30a7eaa0a87404c2bebf231ad4925174?s=128&d=identicon&r=PG&f=1", "display_name": "SufferingCoder", "link": "https://stackoverflow.com/users/10586896/sufferingcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541007239, "creation_date": 1541005536, "last_edit_date": 1541006221, "question_id": 53088681, "link": "https://stackoverflow.com/questions/53088681/nonterminating-c-program-with-pipes", "title": "Nonterminating C program with pipes", "body": "<p>I am attempting to write a <code>C</code> program, using pipes, to play the game of \u201crock, paper, scissors\u201d, between two children. I have most of the code written and working. When I run the code it plays the game, but refuses to terminate. It locking down the terminal, and forces me to close it and try again. I am not sure as to why this is.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;errno.h&gt;\n    #include &lt;time.h&gt;\n\n    static char* const ARGV[] = {\n          \"prog\",\"4\",NULL\n    };\n\n   int main(int argc, char *argv[]) {\n   int pipe1[2], pipe2[2], pipe3[2], pipe4[2];\n   int pid, pid2, cpid;\n   int turns, readbyte;\n   char message[100];\n   int object, i, status;\n   char p1[5], p2[5], choice[5];\n   srand(time(NULL));\n\n\nif((argc != 2) || ((turns = atoi(argv[1])) &lt;= 0)) {\n    fprintf(stderr, \"Usage: %s turns\\n\",argv[0]);\n    exit(1);\n}\n\nif(pipe(pipe1) == -1) {\n    perror(\"Could not create pipe\");\n    exit(1);\n}\n\nif(pipe(pipe2) == -1) {\n    perror(\"Could not create pipe\");\n    exit(1);\n}\n\nif(pipe(pipe3) == -1) {\n    perror(\"Could not reach pipe\");\n    exit(1);\n}\n\nif(pipe(pipe4) == -1) {\n    perror(\"Could not reach pipe\");\n    exit(1);\n}\n\n\nif(pid = fork()) {\n    write(pipe1[1], \"Ready\", strlen(\"Ready\")+1);\n    for(i=1; i &lt;= turns; i++) {\n        readbyte = read(pipe2[0],message,100);\n        srand(time(NULL));\n        object = rand() % 3;\n        sprintf(choice,\"%d\",object);\n        write(pipe1[1],choice,strlen(choice)+1);\n    }\n}\n\nif(pid = fork()) {\n    write(pipe3[1], \"Ready\", strlen(\"Ready\")+1);\n    for(i=1; i&lt;=turns; i++){\n        readbyte = read(pipe4[0],message,100);\n        sleep(1);\n        srand(time(NULL));\n        object = rand()%3;\n        sprintf(choice,\"%d\",object);\n        write(pipe3[1],choice,strlen(choice)+1);\n    }\n}\n\ncpid = wait(&amp;status);\nreadbyte = read(pipe3[0],message,100);\nreadbyte = read(pipe1[0],message,100);\nprintf(\"Child 1 PID: %d\\n\", getpid());\nprintf(\"Child 2 PID: %d\\n\", getpid()-1);\n\nprintf(\"A brawl is surely brewing\\n%d Rounds\\nFight! \\n\",turns);\nfor(i=1; i&lt;=turns; i++){\n    write(pipe2[1],\"Go\",strlen(\"Go\")+1);\n    write(pipe4[1],\"Go\",strlen(\"Go\")+1);\n    readbyte = read(pipe1[0],p1,5);\n    readbyte = read(pipe3[0],p2,5);\n\n    printf(\"Round %d:\\n\",i);\n\n    if((atoi(p1)) == 0){\n        printf(\"Child 1 throws Rock\\n\");\n    }\n    else if((atoi(p1)) == 1){\n        printf(\"Child 1 throws Paper\\n\");\n    }\n    else{\n        printf(\"Child 1 throws Scissors\\n\");\n    }\n    if((atoi(p2)) == 0){\n        printf(\"Child 2 throws Rock\\n\");\n    }\n    else if((atoi(p2)) == 1){\n        printf(\"Child 2 throws Paper\\n\");\n    }\n    else{\n        printf(\"Child 2 throws Scissors\\n\");\n    }\n    if(atoi(p1) == atoi(p2)){\n        printf(\"This round is a tie\\n\");\n    }\n    else if((atoi(p1) == 0) &amp;&amp; (atoi(p2) == 2)){\n        printf(\"Rock beats Scissors: Child 1 wins!\\n\");\n    }\n    else if((atoi(p1) == 0) &amp;&amp; (atoi(p2) == 1)){\n        printf(\"Paper beats Rock: Child 2 wins!\\n\");\n    }\n    else if((atoi(p1) == 1) &amp;&amp; (atoi(p2) == 0)){\n        printf(\"Paper beats Rock: Child 1 wins!\\n\");\n    }\n    else if((atoi(p1) == 1) &amp;&amp; (atoi(p2) == 2)){\n        printf(\"Scissors beats Paper: Child 2 wins!\\n\");\n    }\n    else if((atoi(p1) == 2) &amp;&amp; (atoi(p2) == 1)){\n        printf(\"scissors beats Paper: Child 1 wins!\\n\");\n    }\n    else if(((atoi(p1)) == 2) &amp;&amp; (atoi(p2) == 0)){\n        printf(\"Rock beats Scissors: Child 2 wins!\\n\");\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "stack"], "comments": [{"owner": {"reputation": 467, "user_id": 9950378, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bMztUomG68Y/AAAAAAAAAAI/AAAAAAAAABE/FcXN1FGD0cQ/photo.jpg?sz=128", "display_name": "Jean-Marc Zimmer", "link": "https://stackoverflow.com/users/9950378/jean-marc-zimmer"}, "edited": false, "score": 3, "creation_date": 1541005178, "post_id": 53088559, "comment_id": 93074053, "body": "Did you try using <a href=\"https://www.gnu.org/software/gdb/\" rel=\"nofollow noreferrer\">GDB</a> or <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">Valgrind</a> ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1541005450, "post_id": 53088559, "comment_id": 93074200, "body": "The code as it is will dereference unallocated <code>test</code> pointer."}, {"owner": {"reputation": 3, "user_id": 10376501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48bb157ec33ebbb93feab92586a556ad?s=128&d=identicon&r=PG&f=1", "display_name": "user48719", "link": "https://stackoverflow.com/users/10376501/user48719"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1541008367, "post_id": 53088559, "comment_id": 93075679, "body": "@EugeneSh. So test has no memory? How could I assign it to a place in the memory?"}, {"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1541009625, "post_id": 53088559, "comment_id": 93076292, "body": "@user48719 you need to allocate memory for your structure, You just created a pointer which points to whatever was in the memory before at this point. Try malloc to allocate memory for your structure or calloc to allocate memory and zero it. Note that zeroing the memory takes some time and so malloc would be the faster option."}], "answers": [{"tags": [], "owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "is_accepted": false, "score": 0, "last_activity_date": 1541015016, "creation_date": 1541015016, "answer_id": 53090869, "question_id": 53088559, "link": "https://stackoverflow.com/questions/53088559/segmentation-fault-core-dumped-but-cant-find-the-fault/53090869#53090869", "title": "Segmentation Fault (Core dumped), but can&#39;t find the fault", "body": "<p>The best thing to do is to run it with gdb and get a stack track with the bt cmd after it segfaults.  I have added some comments to your initial code that may or may not fix your problem, but main was clearly broken.  \"test\" in main, was never assigned to anything so test->top is an attempt to dereference whatever address was assigned to \"test\", which could be any garbage value that is in \"c program stack's memory\" at the time.  Make sure to initialize your variables before you use them.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"stack.h\"\n\nstruct stack {\n    // ... SOME CODE MISSING HERE ...\n    int top;\n    int stackArray[STACK_SIZE];\n    int push;\n    int pop;\n};\n\nstruct stack *stack_init() {\n    struct stack* s = (struct stack*) malloc(sizeof(struct stack));\n    s-&gt;top = 0; // HERE IS A POTENTIAL NULL POINTER DEREFENCE, MOVE THIS AFTER THE NULL CHECK\n\n    if (s == NULL)\n        return NULL;\n    else\n        //HERE IS WHERE THE ABOVE LINE SHOULD BE LOCATED. s-&gt;top = 0;\n        //WHAT ABOUT THE REST OF THE MEMORY IN THIS STRUCTURE, SHOULD IT BE 0?\n        return s;\n}\n\nvoid stack_cleanup(struct stack* s) {\n\n    for(int i = 0; i &lt; STACK_SIZE; i++)\n        s-&gt;stackArray[i] = 0;\n\n    free(s);\n}\n\nint stack_push(struct stack *s, int c) {\n\n    if (s-&gt;top &lt;= STACK_SIZE){ //CAN s-&gt;top EVER BE NEGATIVE?\n        s-&gt;stackArray[s-&gt;top] = c; //BECAUSE THIS WOULD BE A BAD INDEX IF IT WERE NEGATIVE HERE\n        s-&gt;top++;\n        s-&gt;push++;\n        return 0;\n    }\n    else\n        return 1;\n\n\n}\n\nint stack_pop(struct stack *s) {\n\n    if (!stack_empty(s)){\n        return s-&gt;stackArray[s-&gt;top];\n        s-&gt;top--;//THIS LOOKS LIKE IT WILL NEVER GET EXECUTED\n        s-&gt;pop++;//SAME WITH THIS LINE, MOVE THEM ABOVE THE RETURN STATEMENT IF YOU WANT THEM TO BE EXECUTED.\n    }\n    else\n        return -1;\n}\n\nint stack_peek(struct stack *s) {\n\n    if (!stack_empty(s)){\n        return s-&gt;stackArray[s-&gt;top];\n    }\n    else\n        return -1;\n}\n\nint stack_empty(struct stack *s) {\n\n    if (s-&gt;top == -1)\n        return 1;\n    else\n        return 0;\n}\n\nint main(){\n    struct stack *test; //EITHER MALLOC MEMORY FOR THIS GUY OR PUT IT ON THE STACK (stack vs heap memory)\n    //SAMPLE STACK USAGE, DOESNT USE YOUR INIT FUNCTION\n    struct stack test;\n    memset(test, 0, sizeof test);\n\n    //IF YOU DONT WANT TO MALLOC YOU CAN POINT IT TO THE STACK VERSION ABOVE\n    struct stack *test2 = &amp;test; //NOW YOU DONT NEED MALLOC, BUT YOU STILL DIDNT USE YOUR SPECIAL INIT.\n    // stack_peek(test);\n    // return 0;\n    printf(\"%d\\n\", test-&gt;top);\n}\n</code></pre>\n\n<p>All of my code review comments that reference stack refer to stack memory in a c program, not the structure you are defining here (which is also a stack so its kinda confusing).  <a href=\"https://www.geeksforgeeks.org/memory-layout-of-c-program/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/memory-layout-of-c-program/</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10376501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48bb157ec33ebbb93feab92586a556ad?s=128&d=identicon&r=PG&f=1", "display_name": "user48719", "link": "https://stackoverflow.com/users/10376501/user48719"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541015016, "creation_date": 1541005093, "last_edit_date": 1541008575, "question_id": 53088559, "link": "https://stackoverflow.com/questions/53088559/segmentation-fault-core-dumped-but-cant-find-the-fault", "title": "Segmentation Fault (Core dumped), but can&#39;t find the fault", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"stack.h\"\n\nstruct stack {\n    // ... SOME CODE MISSING HERE ...\n    int top;\n    int stackArray[STACK_SIZE];\n    int push;\n    int pop;\n};\n\nstruct stack *stack_init() {\n    struct stack* s = (struct stack*) malloc(sizeof(struct stack));\n    s-&gt;top = 0;\n\n    if (s == NULL)\n        return NULL;\n    else\n        return s;\n}\n\nvoid stack_cleanup(struct stack* s) {\n\n    for(int i = 0; i &lt; STACK_SIZE; i++)\n        s-&gt;stackArray[i] = 0;\n\n    free(s);\n}\n\nint stack_push(struct stack *s, int c) {\n\n    if (s-&gt;top &lt;= STACK_SIZE){\n        s-&gt;stackArray[s-&gt;top] = c;\n        s-&gt;top++;\n        s-&gt;push++;\n        return 0;\n    }\n    else\n        return 1;\n\n\n}\n\nint stack_pop(struct stack *s) {\n\n    if (!stack_empty(s)){\n        return s-&gt;stackArray[s-&gt;top];\n        s-&gt;top--;\n        s-&gt;pop++;\n    }\n    else\n        return -1;\n}\n\nint stack_peek(struct stack *s) {\n\n    if (!stack_empty(s)){\n        return s-&gt;stackArray[s-&gt;top];\n    }\n    else\n        return -1;\n}\n\nint stack_empty(struct stack *s) {\n\n    if (s-&gt;top == -1)\n        return 1;\n    else\n        return 0;\n}\n\nint main(){\n    struct stack *test;\n    // stack_peek(test);\n    // return 0;\n    printf(\"%d\\n\", test-&gt;top);\n}\n</code></pre>\n\n<p>I am trying to implement a really basic stack using C for a college assignment and I am trying to test the implementation, but it only gives an error <code>Segmantation fault (Core Dumped)</code>. I did some research on the internet, but could not find something that could help me. I understand that <code>Segmentation Fault Core Dumped</code> means that I am accessing something that I can't/should not acces, but I don't know how that applies to my code.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "linux", "memory", "ipc"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 3, "creation_date": 1541005171, "post_id": 53088387, "comment_id": 93074049, "body": "I think you&#39;ll have to post your code for this. What you&#39;ve shown is the end result. But, not how you got there. It is unlikely to be a Centos (i.e. kernel) bug. What does <code>ipcs</code> say?"}, {"owner": {"reputation": 13, "user_id": 9788225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e811a69017ccbdaee53f7303f4733b0?s=128&d=identicon&r=PG&f=1", "display_name": "Rajkumar", "link": "https://stackoverflow.com/users/9788225/rajkumar"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1541056899, "post_id": 53088387, "comment_id": 93089632, "body": "Hi Craig .I found the problem i was using same id to generate the ftok() key for two child processes.Can you please explain how much maximum unique keys can be generated using ftok().AFAIK only last low 8 bits are significant. Can we use can we use 2 byte integer like &quot;300&quot; to generate the key .What is the chance for keys duplicate here?Please explain."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9788225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e811a69017ccbdaee53f7303f4733b0?s=128&d=identicon&r=PG&f=1", "display_name": "Rajkumar", "link": "https://stackoverflow.com/users/9788225/rajkumar"}, "edited": false, "score": 0, "creation_date": 1541056736, "post_id": 53091310, "comment_id": 93089576, "body": "Thanks Zan for your quick help. One more doubt can i use ftok() with id value more than 255 to generate a key. As according to man page it is taking arguments as int but it is also mentioned that only lower 8 bits are significant. If i use values for id like 258 or more than that....Is there are any chances for generate duplicate key by ftok().??Please help."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 2, "last_activity_date": 1541016972, "creation_date": 1541016972, "answer_id": 53091310, "question_id": 53088387, "link": "https://stackoverflow.com/questions/53088387/is-it-possibility-that-one-shared-memory-segment-will-attach-multiple-time-to-sa/53091310#53091310", "title": "Is it possibility that one shared memory segment will attach multiple time to same parent pid?", "body": "<p>To answer your question: Yes of course. You have the evidence right there in your question.</p>\n\n<p>How does it happen? If you call <code>mmap()</code> on the same file multiple times it maps it multiple times.</p>\n\n<p>To avoid that happening the answer is: Don't do that.</p>\n\n<p>I'm purely guessing but my bet is that one of your <code>fork()</code> calls failed and you never did any error checking, and the code continued on to execute the child code in the parent process. That would explain having two maps on one PID.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9788225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e811a69017ccbdaee53f7303f4733b0?s=128&d=identicon&r=PG&f=1", "display_name": "Rajkumar", "link": "https://stackoverflow.com/users/9788225/rajkumar"}, "edited": false, "score": 0, "creation_date": 1543550789, "post_id": 53107816, "comment_id": 93968119, "body": "Hi Craig Thanks for your quick help.But i have one more doubt :Can I use IPC_CREAT flag and do exec() call to child? Will it cause any problem.AFAIK if we use exec() then a process will have a different address space. Will it cause any problem?Am very sorry for this silly doubt and also for this much delayed reply."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 13, "user_id": 9788225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e811a69017ccbdaee53f7303f4733b0?s=128&d=identicon&r=PG&f=1", "display_name": "Rajkumar", "link": "https://stackoverflow.com/users/9788225/rajkumar"}, "edited": false, "score": 0, "creation_date": 1543556550, "post_id": 53107816, "comment_id": 93969454, "body": "Well, don&#39;t forget to upvote and accept [one of] the answers ;-)"}, {"owner": {"reputation": 13, "user_id": 9788225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e811a69017ccbdaee53f7303f4733b0?s=128&d=identicon&r=PG&f=1", "display_name": "Rajkumar", "link": "https://stackoverflow.com/users/9788225/rajkumar"}, "edited": false, "score": 0, "creation_date": 1543560536, "post_id": 53107816, "comment_id": 93970758, "body": "Accepted your answer and Thanks for such a detailed explanation.Now i thinks that my problem will be solved and i will use IPC_CREAT with exec()."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 0, "last_activity_date": 1543556411, "last_edit_date": 1592644375, "creation_date": 1541099226, "answer_id": 53107816, "question_id": 53088387, "link": "https://stackoverflow.com/questions/53088387/is-it-possibility-that-one-shared-memory-segment-will-attach-multiple-time-to-sa/53107816#53107816", "title": "Is it possibility that one shared memory segment will attach multiple time to same parent pid?", "body": "<blockquote>\n<p>I found the problem i was using same id to generate the <code>ftok()</code> key for two child processes.</p>\n</blockquote>\n<p>A <code>key_t</code> is 32 bits, and can have <em>any</em> value we want.</p>\n<p><code>ftok</code> is just a &quot;convenience&quot; function to generate a unique <code>key_t</code> value to be used in a call to <code>shmget</code> (See below).</p>\n<p>If we use <code>IPC_PRIVATE</code> for this <code>key_t</code> value, we get a private descriptor that any child of a <em>single</em> parent process can use. It shows up in <code>ipcs</code> as a <code>key_t</code> of 0, with a unique <code>shmid</code> [which is like a file descriptor].</p>\n<p>So, if have a single parent and we're <em>just</em> doing <code>fork</code>, we can use this, because the children will inherit this from the parent. This is the preferred method. So, in this case, <code>ftok</code> isn't needed.</p>\n<p>With private keys, when all attached processes terminate, the shared areas are automatically removed by the kernel.</p>\n<p>If we use a non-zero <code>key_t</code> value, we are creating a <em>permanent</em> area. It will remain (with the data still there).</p>\n<p>To remove this, the final process (i.e. the <em>parent</em> process) must do <code>shmctl(shmid,IPC_RMID,NULL)</code> for all <code>shmid</code> gotten from the <code>shmget</code> calls.</p>\n<p>If the parent process dies <em>before</em> doing this, the area remains. Such areas will still show up in <code>ipcs</code></p>\n<hr />\n<p>Here is some sample code that illustrates the use of <code>IPC_PRIVATE</code>. It <em>can</em> be adapted to use a non-zero <code>key_t</code> value, but for your application, that may not be warranted:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;sys/wait.h&gt;\n\n#define NCHILD      200\n#define SIZE        4096\n\n// child process control\ntypedef struct {\n    int tsk_cldidx;                     // child index\n    int tsk_shmid;                      // shmid for process\n    pid_t tsk_pid;                      // pid of process\n    void *tsk_shmadr;                   // address of attached area\n} tsk_t;\n\ntsk_t cldlist[NCHILD];\n\nvoid\ndofork(int cldidx)\n{\n    tsk_t *tskself = &amp;cldlist[cldidx];\n\n    do {\n        tskself-&gt;tsk_pid = fork();\n\n        // parent\n        if (tskself-&gt;tsk_pid != 0)\n            break;\n\n        // detach from all areas that are not ours\n        for (cldidx = 0;  cldidx &lt; NCHILD;  ++cldidx) {\n            tsk_t *tsk = &amp;cldlist[cldidx];\n            if (tsk-&gt;tsk_cldidx != tskself-&gt;tsk_cldidx)\n                shmdt(tsk-&gt;tsk_shmadr);\n        }\n\n        // do something useful ...\n\n        exit(0);\n    } while (0);\n}\n\nint\nmain(void)\n{\n    int cldidx;\n    tsk_t *tsk;\n\n    // create private shared memory ids for each child\n    for (cldidx = 0;  cldidx &lt; NCHILD;  ++cldidx) {\n        tsk = &amp;cldlist[cldidx];\n        tsk-&gt;tsk_cldidx = cldidx;\n        tsk-&gt;tsk_shmid = shmget(IPC_PRIVATE,SIZE,0);\n        tsk-&gt;tsk_shmadr = shmat(tsk-&gt;tsk_shmid,NULL,0);\n    }\n\n    // start up all children\n    for (cldidx = 0;  cldidx &lt; NCHILD;  ++cldidx)\n        dofork(cldidx);\n\n    // do something useful with children ...\n\n    // wait for all children\n    while (wait(NULL) &gt;= 0);\n\n    // remove all segments\n    // NOTE: with IPC_PRIVATE, this may not be necessary -- it may happen\n    // automatically when we exit\n    for (cldidx = 0;  cldidx &lt; NCHILD;  ++cldidx) {\n        tsk = &amp;cldlist[cldidx];\n        shmctl(tsk-&gt;tsk_shmid,IPC_RMID,NULL);\n    }\n\n    return 0;\n}\n</code></pre>\n<hr />\n<p>If we have separate programs that have <em>no</em> parent/child relationship, we need a non-zero <code>key_t</code>. It can be hard to generate a unique <code>key_t</code> that does not collide/conflict with another, possibly from a totally unrelated group of programs (e.g. another user)</p>\n<blockquote>\n<p>Can you please explain how much maximum unique keys can be generated using ftok().</p>\n<p>AFAIK only last low 8 bits are significant. Can we use can we use 2 byte integer like &quot;300&quot; to generate the key . What is the chance for keys duplicate here?</p>\n</blockquote>\n<p>For a given [existing] file and <em>eight</em> bit <code>proj_id</code>, there are [as you've noticed] only 256 unique keys that can be generated. We'd need a <em>different</em> file argument to get the next 256.</p>\n<p>It might be better to dispense with <code>ftok</code> altogether [I've <em>never</em> used it when using <code>shmget</code>]. I've done <code>0xAA000000</code> as the base <code>key_t</code> value. I've replaced the zeroes with whatever unique sub-key value I need (there are ~24 million possible combinations).</p>\n<hr />\n<p>If we control all programs that will access the shared memory areas, it isn't necessary to have multiple areas.</p>\n<p>It may be sufficient, and <em>more</em> desirable to have a <em>single</em> shared memory area. In that case, we only do <em>one</em> <code>shmget</code> and <em>one</em> <code>shmat</code>. Then, <code>ftok(myfile,0)</code> could produce a nice key.</p>\n<p>If the size of the needed to communicate with a child is (e.g.) a page (<code>PER_CHILD = 4096</code>), and we have <code>NCHILD</code> children to create, we can just create a single area of <code>TOTAL_SIZE = PER_CHILD * NCHILD</code> in size. Then, for a given child X, its area pointer is <code>shmaddr + (X * PER_CHILD)</code></p>\n<hr />\n<p><strong>UPDATE:</strong></p>\n<blockquote>\n<p>Can I use IPC_CREAT flag and do exec() call to child?</p>\n</blockquote>\n<p>I think what you mean is using the non-zero key with <code>shmget</code> in conjunction with this.</p>\n<p>An exec call will close any <em>mappings</em>: <a href=\"https://stackoverflow.com/questions/48190685/shared-memory-after-exec/48191050#48191050\">shared memory after exec()</a></p>\n<p>It will also close the file descriptor returned by <code>shmget</code> [or <code>shm_open</code>].</p>\n<p>So, using the non-zero key is the only [practical] way to ensure that it works across <code>execvp</code> et al.</p>\n<blockquote>\n<p>Will it cause any problem. AFAIK if we use exec() then a process will have a different address space. Will it cause any problem?</p>\n</blockquote>\n<p>The child <em>program</em> will have to (re)establish its own mapping via <code>shmget</code> and <code>shmat</code>.</p>\n<p>But, if we use <code>shm_open</code> [instead of <code>shmget</code>], we <em>can</em> keep the file descriptor open <em>if</em> we use <code>fcntl</code> to clear the <code>FD_CLOEXEC</code> flag on the descriptor before calling <code>execvp</code>.</p>\n<p>However, this may be of little use as the child <em>program</em> (target of <code>execvp</code>) will [probably] not know the file descriptor number that the parent opened with <code>shm_open</code>, so it's a bit of a moot point.</p>\n"}], "owner": {"reputation": 13, "user_id": 9788225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e811a69017ccbdaee53f7303f4733b0?s=128&d=identicon&r=PG&f=1", "display_name": "Rajkumar", "link": "https://stackoverflow.com/users/9788225/rajkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 1, "accepted_answer_id": 53107816, "answer_count": 2, "score": 1, "last_activity_date": 1543556411, "creation_date": 1541004420, "last_edit_date": 1541013047, "question_id": 53088387, "link": "https://stackoverflow.com/questions/53088387/is-it-possibility-that-one-shared-memory-segment-will-attach-multiple-time-to-sa", "title": "Is it possibility that one shared memory segment will attach multiple time to same parent pid?", "body": "<p>I have created 200 child processes of a parent which communicate through share memory IPC mechanism:</p>\n\n<p>Parent &lt;-> SHM &lt;-> child </p>\n\n<p>But the observation is STRANGE.</p>\n\n<p>I found 4 processes are attached to the same SHM id in which 2 are parent pid and 2 are child pid.(Unexpected Behaviour).\nand somewhere 2 processes are attached to one SHM id (Expected behaviour).</p>\n\n<p>Please found below output-</p>\n\n<pre><code>-bash-4.2# grep 123076652 /proc/*/maps\n/proc/27750/maps:7f1323576000-7f1323577000 rw-s 00000000 00:04 123076652  /SYSV2c006eff (deleted)    \n/proc/27750/maps:7f1323676000-7f1323677000 rw-s 00000000 00:04 123076652  /SYSV2c006eff (deleted)\n/proc/27827/maps:7f87ac3c0000-7f87ac3c1000 rw-s 00000000 00:04 123076652  /SYSV2c006eff (deleted)\n/proc/28090/maps:7f9d33b8b000-7f9d33b8c000 rw-s 00000000 00:04 123076652  /SYSV2c006eff (deleted)\n</code></pre>\n\n<p>As we can easily see that PID-27750(Parent) attached two times to one segment.</p>\n\n<p>How is it possible ?\nIs it Centos Bug?</p>\n"}, {"tags": ["c", "memcpy", "realloc", "calloc", "memset"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1541003462, "post_id": 53088085, "comment_id": 93073177, "body": "Can you define &quot;unexpected, incorrect values&quot; more specifically? It&#39;s also odd that you&#39;re using <code>void*</code> to represent a temporary <code>int*</code> in that function. Just use the right type to avoid ambiguity. It sounds like you have a lot of undefined behaviour in here caused by using pointers after a <code>free</code> and so on."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1541003534, "post_id": 53088085, "comment_id": 93073220, "body": "In the second, <code>realloc(a, 2*len);</code> is wrong. It should be <code>realloc(a, 2 * len * sizeof *a);</code> You remembered the <code>sizeof</code> multiplier in your <code>memset</code>; any particular reason you left it out in your allocation ? Unrelated, the <code>memset</code> can simply use <code>a+len</code> for the target. And I hope the <i>caller</i> somehow knows what the new capacity is somehow, because there is no communication back to them of said same from that function."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1541003540, "post_id": 53088085, "comment_id": 93073223, "body": "You are freeing your newly created array right away. And the intention of <code>*a = *c;</code> is not clear at all."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1541003587, "post_id": 53088085, "comment_id": 93073260, "body": "<code>*a = *c</code> is equivalent to <code>a[0]=c[0]</code> which copies only one value. It does not copy the whole array."}, {"owner": {"reputation": 587, "user_id": 2800329, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/9wrOT.jpg?s=128&g=1", "display_name": "mabalenk", "link": "https://stackoverflow.com/users/2800329/mabalenk"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1541004090, "post_id": 53088085, "comment_id": 93073510, "body": "@EugeneSh. My intention is to copy the values from the original array <code>a</code> to the new array <code>c</code>. Reassign the pointer <code>*a</code> to <code>*c</code> for the function to return a new array under <code>*a</code> and free the temporary memory <code>c</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541004889, "post_id": 53088085, "comment_id": 93073917, "body": "<code>*a = *c;</code> looks fishy to me, please show how you call <code>compo_resize</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1541005447, "post_id": 53088085, "comment_id": 93074198, "body": "@mabalenk please <a href=\"https://stackoverflow.com/posts/53088085/edit\">edit</a>  your question and put clarification <i>there</i>. Also tell us what <code>f-&gt;a</code> is exactly. But probably you should use one of the upvoted answers below and call the function like that: <code>compo_resize(f-&gt;len, &amp;f-&gt;a)</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541005573, "post_id": 53088085, "comment_id": 93074246, "body": "mabalenk, Why <code>2*</code> in <code>realloc(a, 2*len)</code>?  I&#39;d expect a signature like <code>compo_resize(int *a, int oldsize, int newsize)</code>."}, {"owner": {"reputation": 587, "user_id": 2800329, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/9wrOT.jpg?s=128&g=1", "display_name": "mabalenk", "link": "https://stackoverflow.com/users/2800329/mabalenk"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541005751, "post_id": 53088085, "comment_id": 93074331, "body": "@chux, <code>f-&gt;len</code> is the current length of the array <code>a</code>. I would like to double the size of the original array. That&#39;s why I use <code>2*len</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541005959, "post_id": 53088085, "comment_id": 93074439, "body": "mabalenk, Calling a function <code>compo_resize(int len, int *a)</code> then mis-leads as the parameter <code>len</code> is not the resize length.  Calling the function something like <code>compo_double_the_size(int len, int *a)</code> would be more consistent with your coding goal.  &quot;Reallocating 1D array of integers&quot; gives no hint that size is doubling but implies a potential increase or decrease in size."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541006502, "post_id": 53088085, "comment_id": 93074723, "body": "Pedantic note: <code>if (c == NULL) {</code> is not certainly an out-of-memory indication when <code>len == 0</code>.  Code could use <code>if (c == NULL &amp;&amp; len == 0) {</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "edited": false, "score": 1, "creation_date": 1541004560, "post_id": 53088307, "comment_id": 93073742, "body": "As mentioned in man(3) realloc: <code>if the area pointed to was moved, a free(ptr) is done. </code>"}, {"owner": {"reputation": 3278, "user_id": 1223297, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/663526923/picture?type=large", "display_name": "Mahmoud Fayez", "link": "https://stackoverflow.com/users/1223297/mahmoud-fayez"}, "reply_to_user": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "edited": false, "score": 0, "creation_date": 1541044816, "post_id": 53088307, "comment_id": 93086503, "body": "@Tezrig, I cannot get your point, the user who asked the question did not mention any realloc in the first method. You just assumed I am addressing his second trial!"}], "tags": [], "owner": {"reputation": 3278, "user_id": 1223297, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/663526923/picture?type=large", "display_name": "Mahmoud Fayez", "link": "https://stackoverflow.com/users/1223297/mahmoud-fayez"}, "is_accepted": false, "score": 0, "last_activity_date": 1541004104, "creation_date": 1541004104, "answer_id": 53088307, "question_id": 53088085, "link": "https://stackoverflow.com/questions/53088085/reallocating-1d-array-of-integers-keeping-original-values-zeroing-out-rest/53088307#53088307", "title": "Reallocating 1D array of integers, keeping original values, zeroing out rest", "body": "<p>1- Do not free allcoated memmory as you will used it after the function return.</p>\n\n<p>2- Consider free old *a after copying it to *c.</p>\n\n<p>3- Change function declaration from:</p>\n\n<pre><code>int compo_resize(int len, int *a);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int compo_resize(int len, int **a);\n</code></pre>\n\n<p>because you want to update the value of the pointer itself to point to a newly created array. </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541005307, "post_id": 53088399, "comment_id": 93074133, "body": "Note that <code>2 * len * sizeof(int)</code> can overflow cases when <code>sizeof(int) * 2 * len</code> does not: (<code>len &gt; INT_MAX&#47;2</code>). Recommend the 2nd."}], "tags": [], "owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "is_accepted": false, "score": 2, "last_activity_date": 1541067220, "last_edit_date": 1541067220, "creation_date": 1541004464, "answer_id": 53088399, "question_id": 53088085, "link": "https://stackoverflow.com/questions/53088085/reallocating-1d-array-of-integers-keeping-original-values-zeroing-out-rest/53088399#53088399", "title": "Reallocating 1D array of integers, keeping original values, zeroing out rest", "body": "<p>First, You need to pass the address of the pointer you want to update, otherwise the pointer wont be modified outside the function. Because realloc might change the location of your data if it cannot find a long enough continuous region.</p>\n\n<p>Second, make sure you are strict on the size of your array versus the size in bytes.</p>\n\n<pre><code>// Resizes composition\nint compo_resize(int len, int **a) {\n\n    printf(\"Note: resizing composition...\\n\");\n\n    // reallocate memory\n    void *c = realloc(*a, sizeof(int) * 2 * len);\n\n    if (c == NULL) {\n        fprintf(stderr, \"realloc() failed\");\n        return LieanderErrorOutOfMemory;\n    }\n    else {\n        // reassign pointer\n        *a = c;\n\n        // zero out new elements\n        memset(&amp;c[len], 0, sizeof(int) * len);\n    }\n\n    return LieanderSuccess;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541005360, "post_id": 53088517, "comment_id": 93074149, "body": "Note that <code>2*len*sizeof(c[0])</code> can overflow cases when <code>sizeof(c[0]) * 2 * len</code> does not: (<code>len &gt; INT_MAX&#47;2</code>). Recommend the 2nd."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1541005874, "post_id": 53088517, "comment_id": 93074398, "body": "@chux Good point. I&#39;ve rearranged the expression as per your suggestion. It would be even better to use <code>size_t len</code> instead of <code>int len</code>, but I want to keep it as close to OP&#39;s original as possible."}, {"owner": {"reputation": 587, "user_id": 2800329, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/9wrOT.jpg?s=128&g=1", "display_name": "mabalenk", "link": "https://stackoverflow.com/users/2800329/mabalenk"}, "edited": false, "score": 0, "creation_date": 1541006444, "post_id": 53088517, "comment_id": 93074692, "body": "@IanAbbott, I have changed the code according to your suggestion. It compiles, but I obtain unexpected, incorrect values at the end of program execution. The array <code>a</code> contains integers which are reduced and cancelled out until a certain combination is reached. There are many <code>pairs</code> of combinations that are summed up in the end. Now, this sum differs from time to time. Which is wrong and unexpected."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 587, "user_id": 2800329, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/9wrOT.jpg?s=128&g=1", "display_name": "mabalenk", "link": "https://stackoverflow.com/users/2800329/mabalenk"}, "edited": false, "score": 1, "creation_date": 1541006607, "post_id": 53088517, "comment_id": 93074777, "body": "@mabalenk The problem is in your unposted code.  Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 587, "user_id": 2800329, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/9wrOT.jpg?s=128&g=1", "display_name": "mabalenk", "link": "https://stackoverflow.com/users/2800329/mabalenk"}, "edited": false, "score": 1, "creation_date": 1541006978, "post_id": 53088517, "comment_id": 93074996, "body": "@mabalenk I hope you realize that you now need to call the function like <code>retval = compo_resize(f-&gt;len, &amp;f-&gt;a);</code> (note the <code>&amp;</code> added to the second argument)."}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": false, "score": 2, "last_activity_date": 1541005790, "last_edit_date": 1541005790, "creation_date": 1541004898, "answer_id": 53088517, "question_id": 53088085, "link": "https://stackoverflow.com/questions/53088085/reallocating-1d-array-of-integers-keeping-original-values-zeroing-out-rest/53088517#53088517", "title": "Reallocating 1D array of integers, keeping original values, zeroing out rest", "body": "<p>The <code>int *a</code> parameter needs to be replaced with <code>int **a</code> because you want to change the pointer on behalf of the caller.</p>\n\n<pre><code>// Resizes composition\nint compo_resize(int len, int **a) {\n\n    printf(\"Note: resizing composition...\\n\");\n\n    // reallocate memory\n    int *c = realloc(*a, sizeof(c[0])*2*len);\n\n    if (c == NULL) {\n        fprintf(stderr, \"realloc() failed\");\n        return LieanderErrorOutOfMemory;\n    }\n    else {\n        // reassign pointer\n        *a = c;\n\n        // zero out new elements\n        memset(&amp;c[len], 0, len * sizeof c[len]);\n    }\n\n    return LieanderSuccess;\n}\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 2800329, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/9wrOT.jpg?s=128&g=1", "display_name": "mabalenk", "link": "https://stackoverflow.com/users/2800329/mabalenk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1541067220, "creation_date": 1541003370, "last_edit_date": 1541005611, "question_id": 53088085, "link": "https://stackoverflow.com/questions/53088085/reallocating-1d-array-of-integers-keeping-original-values-zeroing-out-rest", "title": "Reallocating 1D array of integers, keeping original values, zeroing out rest", "body": "<p>I would like to resize a one-dimensional array of integers, keep the values from the original array and initialise the new values with zeroes. So far, I have come up with two alternatives (a) using <code>calloc</code> and <code>memcpy</code>:</p>\n\n<pre><code>// Resizes composition\nint compo_resize(int len, int *a) {\n\n    // initialise new composition\n    int *c = calloc(2*len, sizeof a[0]);\n\n    if (c == NULL) {\n        fprintf(stderr, \"calloc() failed\");\n        return LieanderErrorOutOfMemory;\n    }\n\n    // copy numbers from old to new composition\n    memcpy(c, a, sizeof a[0] * len);\n\n    // modify composition in-place\n    *a = *c;\n\n    // release memory\n    free(c);\n\n    return LieanderSuccess;\n}\n</code></pre>\n\n<p>and (b) using <code>realloc</code> and <code>memset</code>:</p>\n\n<pre><code>// Resizes composition\nint compo_resize(int len, int *a) {\n\n    printf(\"Note: resizing composition...\\n\");\n\n    // reallocate memory\n    void *c = realloc(a, 2*len);\n\n    if (c == NULL) {\n        fprintf(stderr, \"realloc() failed\");\n        return LieanderErrorOutOfMemory;\n    }\n    else {\n        // reassign pointer\n        a = c;\n\n        // zero out new elements\n        memset(&amp;a[len], 0, len * sizeof a[len]);\n    }\n\n    return LieanderSuccess;\n}\n</code></pre>\n\n<p>I would say the second approach is more elegant and faster. However, when integrated into a larger program the code starts to return unexpected, incorrect values. Am I doing something wrong in the approach (b)? Am I missing something obvious?</p>\n\n<p>The call to <code>combo_resize()</code> is <code>int retval = compo_resize(f-&gt;len, f-&gt;a)</code>, where <code>f</code> is a custom structure called a <code>pair</code>:</p>\n\n<pre><code>typedef struct {\n    int  fac;  // multiplication factor\n    int  idx;  // index of Lieander\n    int  len;  // length of compositions\n    int  kth;  // no. of elements in compositions\n    int *a;    // composition 1\n    int *b;    // composition 2\n    int  num;  // natural no.\n} pair;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1541003306, "post_id": 53088013, "comment_id": 93073087, "body": "<a href=\"https://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\">A <code>fgets</code> reference</a> could be useful. And the (probable) problem should have been mentioned by just about any book or tutorial that mentions <code>fgets</code>."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1541003491, "post_id": 53088013, "comment_id": 93073199, "body": "If you want to only count printable characters excluding white-space characters, you can use <code>isgraph</code>."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7874362, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E8ItJ.jpg?s=128&g=1", "display_name": "Anush Poudel", "link": "https://stackoverflow.com/users/7874362/anush-poudel"}, "edited": false, "score": 0, "creation_date": 1541004276, "post_id": 53088049, "comment_id": 93073606, "body": "So, if I give the input &quot;John&quot; does that mean the input would actually be &quot;John\\n\\0&quot; ? I just used fgets() instead of scanf() because scanf doesn&#39;t read a blank space and didn&#39;t know much about fgets(). Thanks!"}, {"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "edited": false, "score": 1, "creation_date": 1541005546, "post_id": 53088049, "comment_id": 93074240, "body": "yes.  In your code when you used <code>fgets()</code> <b>before</b> your <code>while</code> loop, you captured the <code>\\n</code> character in <code>sttr</code>.  Then your while loop counts <b>anything</b> other than a <code>&#39; &#39;</code> because you told it to, so it counted the <code>\\n</code> character in addition to `&quot;John&quot;."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1541003246, "creation_date": 1541003246, "answer_id": 53088049, "question_id": 53088013, "link": "https://stackoverflow.com/questions/53088013/counting-characters-excluding-spaces-in-c-using-while-loop/53088049#53088049", "title": "Counting characters excluding spaces in C using while loop", "body": "<p>The <code>fgets</code> function reads in a line of text and stores that text, <strong>including the newline</strong> if there's room for it.</p>\n\n<p>So the output is one more because of the newline.</p>\n"}, {"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1541006992, "post_id": 53088919, "comment_id": 93075006, "body": "<code>fgets</code> <i>does</i> assure it gets terminated by a <code>0</code>. I&#39;d be more concerned about not testing its return value."}], "tags": [], "owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1541006442, "creation_date": 1541006442, "answer_id": 53088919, "question_id": 53088013, "link": "https://stackoverflow.com/questions/53088013/counting-characters-excluding-spaces-in-c-using-while-loop/53088919#53088919", "title": "Counting characters excluding spaces in C using while loop", "body": "<blockquote>\n  <p>I'm a newbie so</p>\n</blockquote>\n\n<p>it should be worth mentioning that your <code>while</code> loop finishing is <strong>completely relying</strong> upon the fact that the null character <code>\\0</code> is found in <code>sttr[]</code>.</p>\n\n<p>Because you use the function <code>fgets()</code> it will automatically append a <code>\\0</code> character after the input is stored in <code>sttr[]</code> so it is likely to never be a problem, but...</p>\n\n<p>realize under different circumstances if you were to parse a string like that there is likely to be a much greater chance that the while loop could become an infinite loop because it never found a <code>\\0</code> character to terminate.</p>\n\n<p>so something like this for example would be more robust:</p>\n\n<p><em>don't assume a null character will always be present in your string</em></p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;string.h&gt;\n# define MAX 29\n\nint main ( void )\n{\n    int len, i;\n    char sttr[MAX];\n\n    fgets( sttr, MAX, stdin );\n\n    len = 0;\n    i = 0;\n\n    /* make sure i does not index past sttr[MAX] */\n    while ( ( sttr[i] != '\\0') &amp;&amp; ( i &lt; MAX ) )\n    {\n        if ( sttr[i] != ' ' )\n        {\n            len++;\n        }\n        i++;\n    }\n    printf(\"%d\\n\",len);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7874362, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E8ItJ.jpg?s=128&g=1", "display_name": "Anush Poudel", "link": "https://stackoverflow.com/users/7874362/anush-poudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 53088049, "answer_count": 2, "score": -1, "last_activity_date": 1541006442, "creation_date": 1541003131, "question_id": 53088013, "link": "https://stackoverflow.com/questions/53088013/counting-characters-excluding-spaces-in-c-using-while-loop", "title": "Counting characters excluding spaces in C using while loop", "body": "<p>I'm trying to count the number of characters the user has as an input using a while loop, but for some reason the output counts always one more than the expected value. ( I'm a newbie so please don't hate me for it.)</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main() {\n    int len,i;\n    char sttr[29];\n    fgets(sttr,29,stdin);\n    len = 0;\n        i=0;\n        while(sttr[i] != '\\0'){\n        if (sttr[i] != ' '){\n            len++;\n        }\n        i++;\n\n    }\n   printf(\"%d\\n\",len);\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1541002501, "post_id": 53087742, "comment_id": 93072603, "body": "what <code>x=x</code> is supposed to do?"}, {"owner": {"reputation": 23, "user_id": 7391014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9679169cbc96d8334a59ad6d4e2a2113?s=128&d=identicon&r=PG&f=1", "display_name": "HetaXD", "link": "https://stackoverflow.com/users/7391014/hetaxd"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1541002656, "post_id": 53087742, "comment_id": 93072692, "body": "nothing to do there, I just want to keep the same value of x"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1541002709, "post_id": 53087742, "comment_id": 93072730, "body": "Very common question on here - you&#39;re not taking into account all of the keys you&#39;re pressing."}, {"owner": {"reputation": 23, "user_id": 7391014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9679169cbc96d8334a59ad6d4e2a2113?s=128&d=identicon&r=PG&f=1", "display_name": "HetaXD", "link": "https://stackoverflow.com/users/7391014/hetaxd"}, "edited": false, "score": 0, "creation_date": 1541002938, "post_id": 53087742, "comment_id": 93072875, "body": "Thank you, I know what is the problem now"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1541003117, "post_id": 53087742, "comment_id": 93072966, "body": "Don&#39;t forget to pay special attention to indentation, especially when posting on Stack Overflow."}], "owner": {"reputation": 23, "user_id": 7391014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9679169cbc96d8334a59ad6d4e2a2113?s=128&d=identicon&r=PG&f=1", "display_name": "HetaXD", "link": "https://stackoverflow.com/users/7391014/hetaxd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1541003399, "answer_count": 0, "score": 0, "last_activity_date": 1541003045, "creation_date": 1541002246, "last_edit_date": 1541003045, "question_id": 53087742, "link": "https://stackoverflow.com/questions/53087742/c-program-double-looping", "closed_reason": "Duplicate", "title": "C program double looping", "body": "<p>I want to make only input Y or N then the program can continue, otherwise it will keep asking for the input. But when I try some incorrect input, the line \"Read data from file [Y/N]?\" appears twice, skipping my scanf and that is not what I want.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nint x;    //x for looping\n\nchar action;\nfor(x=1;x!=0;x=x){\n    printf(\"Read data from file [Y/N]?\");\n    scanf(\"%c\",&amp;action);\n    if(action=='Y'|| action=='N'){\n       x=0;\n      }\n   }\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "cgal"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4182862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/m68f6.png?s=128&g=1", "display_name": "TheWhitestOfFangs", "link": "https://stackoverflow.com/users/4182862/thewhitestoffangs"}, "edited": false, "score": 0, "creation_date": 1541004550, "post_id": 53088252, "comment_id": 93073734, "body": "I actually have tried this before, but got irrelevant outputs... I guess my mistake was elsewhere and I assumed the problem was there. Thanks."}, {"owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "reply_to_user": {"reputation": 181, "user_id": 4182862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/m68f6.png?s=128&g=1", "display_name": "TheWhitestOfFangs", "link": "https://stackoverflow.com/users/4182862/thewhitestoffangs"}, "edited": false, "score": 1, "creation_date": 1541008003, "post_id": 53088252, "comment_id": 93075503, "body": "Note that all the indices are not necessarily contiguous, in particular if you have removed some elements some indices might be invalid. You can use the function <a href=\"https://doc.cgal.org/latest/Surface_mesh/classCGAL_1_1Surface__mesh.html#ab1734f0c4dfa5f08b4ee1be0449b572e\" rel=\"nofollow noreferrer\"><code>is_valid(fi)</code></a> to check."}], "tags": [], "owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "is_accepted": true, "score": 1, "last_activity_date": 1541003931, "creation_date": 1541003931, "answer_id": 53088252, "question_id": 53087531, "link": "https://stackoverflow.com/questions/53087531/cgalsurface-mesh-accessing-face-vertex-using-an-integer-index/53088252#53088252", "title": "CGAL::Surface_mesh - Accessing face/vertex using an integer index?", "body": "<p>The following should work:\n<code>\n  unsigned int i = 33;\n  Surface_mesh::Face_index fi(i);\n</code></p>\n"}], "owner": {"reputation": 181, "user_id": 4182862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/m68f6.png?s=128&g=1", "display_name": "TheWhitestOfFangs", "link": "https://stackoverflow.com/users/4182862/thewhitestoffangs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 53088252, "answer_count": 1, "score": 0, "last_activity_date": 1541003931, "creation_date": 1541001504, "question_id": 53087531, "link": "https://stackoverflow.com/questions/53087531/cgalsurface-mesh-accessing-face-vertex-using-an-integer-index", "title": "CGAL::Surface_mesh - Accessing face/vertex using an integer index?", "body": "<p>From the <a href=\"https://doc.cgal.org/latest/Surface_mesh/index.html\" rel=\"nofollow noreferrer\">user manual</a> of the CGAL <code>Surface_mesh</code> class:</p>\n\n<blockquote>\n  <p>the data structure uses integer indices as descriptors for vertices,\n  halfedges, edges and faces</p>\n</blockquote>\n\n<p>I am interested in accessing a certain face/edge/vertex based on it's integer index, but cannot find how this is done.\nIterators obviously work, but I don't want to iterate a known number of times just to get to the relevant <code>face_index</code>/<code>vertex_index</code> if I can access based on an integer face/vertex index known a-priori.</p>\n\n<p>Can someone please explain how (if actually possible) to use the integer indexing if I want to access the i-th face \"directly\" (without iterating)?</p>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1541001496, "post_id": 53087497, "comment_id": 93071960, "body": "Remember to pay very close attention to your indentation and keep it consistent. C is a very unforgiving language, so a missing set of <code>{ }</code> brackets can dramatically alter how the program behaves."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1541001566, "post_id": 53087497, "comment_id": 93072009, "body": "Why are you passing in an array+index combination to <code>check</code> when you could just pass in a number? That function never iterates over the array, it doesn&#39;t even need to know there&#39;s an array involved."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1541001606, "post_id": 53087497, "comment_id": 93072034, "body": "Hint: Why are you exiting your <code>check</code> function on the first iteration of the loop regardless of success or failure?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1541001610, "post_id": 53087497, "comment_id": 93072038, "body": "The <code>if&#47;else</code> in the function will return <code>0</code> or <code>1</code>  on the very first <code>j</code> without going further."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1541001708, "post_id": 53087497, "comment_id": 93072101, "body": "You didn&#39;t write a function which checks if its parameter (positive integer) is a perfect square. Start with this first. Then once it works, deal with the vector part. Hint: the prototype of the <code>check</code> function is: <code>int check(int number)</code>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1541002123, "post_id": 53087497, "comment_id": 93072358, "body": "I think what your teacher wants is <code>int issquare(int n);</code> to check a single number and later call that in loop with the elements of an array: <code>int count = 0; for (int i = 0; i &lt; n; i++) if (issquare(arr[i])) count++; printf(&quot;array has %d squares.\\n&quot;, count);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 65, "user_id": 10554167, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0R5BgZv-yaw/AAAAAAAAAAI/AAAAAAAAAV4/zQfYg93oeT0/photo.jpg?sz=128", "display_name": "The Virtuoso", "link": "https://stackoverflow.com/users/10554167/the-virtuoso"}, "edited": false, "score": 0, "creation_date": 1541002269, "post_id": 53087581, "comment_id": 93072448, "body": "@TheVirtuoso no you are not. You are just in the place I was before learning. +1 for making a good question, providing a minimal example, etc."}, {"owner": {"reputation": 65, "user_id": 10554167, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0R5BgZv-yaw/AAAAAAAAAAI/AAAAAAAAAV4/zQfYg93oeT0/photo.jpg?sz=128", "display_name": "The Virtuoso", "link": "https://stackoverflow.com/users/10554167/the-virtuoso"}, "edited": false, "score": 0, "creation_date": 1541006438, "post_id": 53087581, "comment_id": 93074686, "body": "I rewrote the program and it works for both a number and the vector but I also need to copy each perfect square into a new vector and I was thinking of adding a parameter to count how many there are and create a for with it for the 2nd vector but something isn&#39;t right, I&#39;m open to ideas if you have some"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1541011396, "post_id": 53087581, "comment_id": 93077103, "body": "The parameter <code>n</code> in this function (<code>check</code>) comes from outer space. What does it mean? why is it needed? <i>Write a function to check if its parameter (positive integer) is a perfect square</i> where&#39;s <code>n</code> in this sentence?"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1541002219, "last_edit_date": 1541002219, "creation_date": 1541001669, "answer_id": 53087581, "question_id": 53087497, "link": "https://stackoverflow.com/questions/53087497/write-a-function-to-check-if-its-parameter-positive-integer-is-a-perfect-squar/53087581#53087581", "title": "Write a function to check if its parameter (positive integer) is a perfect square. Then apply this function to a vector of positive integers", "body": "<p>What you need is to pass only a number to the function instead. To do that, you can simply do:</p>\n\n<pre><code>int check(int value, int n)\n{\n    for (int j=0; j&lt;n ; j++)\n        if(value==j*j)\n            return 1;\n    return 0;\n}\n</code></pre>\n\n<p>and call the function like this:</p>\n\n<pre><code>check(a[i], n)\n</code></pre>\n\n<p>Now, you are not passing the whole array, but only a number, i.e. the i-th number of it.</p>\n\n<p>At this point, you have a function to check <em>one number</em>. Think what you need to do, to check a collection of numbers. How would you apply that <code>check()</code> to every number of your vector?</p>\n\n<p>PS: An important and fundamental note is that you should <em>indent your code</em>, since it makes everything much more readable (for example, curly brackets get aligned).</p>\n\n<hr>\n\n<p>Appendix:</p>\n\n<p>You could make your initial function work like this:</p>\n\n<pre><code>int check(int a[],int n,int i )\n{\n    int j;\n    for (j=0; j&lt;n ; j++)\n    {\n        if(a[i]==j*j)\n            return 1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>so that you don't stop looping over when the condition is not mean, but will continue checking the other entries as well.</p>\n\n<p>However, I strongly recommend using my suggestion above.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1541010789, "last_edit_date": 1541010789, "creation_date": 1541008785, "answer_id": 53089469, "question_id": 53087497, "link": "https://stackoverflow.com/questions/53087497/write-a-function-to-check-if-its-parameter-positive-integer-is-a-perfect-squar/53089469#53089469", "title": "Write a function to check if its parameter (positive integer) is a perfect square. Then apply this function to a vector of positive integers", "body": "<blockquote>\n  <p>Write a function to check if its parameter (positive integer) is a perfect square</p>\n</blockquote>\n\n<p>What is needed is:</p>\n\n<pre><code>bool check_if_perfect_square(unsigned n);\n</code></pre>\n\n<p>Simple find the <a href=\"https://en.wikipedia.org/wiki/Integer_square_root\" rel=\"nofollow noreferrer\">integer square root</a>. Integer square root routines are not too hard to code. Maybe:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\n// Square root of t round toward 0\nunsigned uisqrt(unsigned t) {\n  unsigned s, b;\n  for (b = 0, s = t; b++, s &gt;&gt;= 1) {\n    ;\n  }\n\n  s = 1u &lt;&lt; (b &gt;&gt; 1);\n  if (b &amp; 1) {\n    s += s &gt;&gt; 1;\n  }\n\n  do {\n    b = t / s;\n    s = (s + b) &gt;&gt; 1;\n  } while (b &lt; s);\n\n  return s;\n}\n</code></pre>\n\n<p>If you do not like that advanced approach, code could slowly iterate. No need to iterate to <code>i&lt;n</code>, but to <code>i &lt;= n/i</code>.</p>\n\n<pre><code>unsigned uisqrt(unsigned n) {\n  unsigned i = 0;\n  if (n &gt; 0) {\n    for (i = 1; i &lt;= n/i; i++) {\n      ;\n    }\n    i--; \n  }\n  return i;\n}\n</code></pre>\n\n<p>Then the check is easily</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\nbool check_if_perfect_square(unsigned n) {\n  unsigned sr = uisqrt(n);\n  return sr*sr == n);\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Then apply this function to a vector of positive integers</p>\n</blockquote>\n\n<p>Armed with a <code>check_if_perfect_square()</code>, simply iterate over the array.</p>\n\n<pre><code>#include &lt;stddef.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid square_root_test_array(unsigned *a, size_t array_length) {\n  for (size_t i = 0; i&lt;array_length; i++) {\n    if (check_if_perfect_square(a[i])) {\n      printf(\"%u is a perfect square\\n\",a[i]);\n    } else {\n      printf(\"%d is not a perfect square\\n\",a[i]);\n    }\n  }\n}\n</code></pre>\n\n<p>Sample use</p>\n\n<pre><code>int main() {\n  printf(\"\\nThe size:\\n\");\n  unsigned n = 0;\n  scanf(\"%u\",&amp;n);\n  unsigned a[n];\n\n  for(unsigned i=0; i&lt;n; i++) {\n    printf(\"a[%u] = \",i);\n    scanf(\"%d\",&amp;a[i]);\n  }\n\n  // Now test array\n  square_root_test_array(a, n);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10554167, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0R5BgZv-yaw/AAAAAAAAAAI/AAAAAAAAAV4/zQfYg93oeT0/photo.jpg?sz=128", "display_name": "The Virtuoso", "link": "https://stackoverflow.com/users/10554167/the-virtuoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541010789, "creation_date": 1541001414, "last_edit_date": 1541002232, "question_id": 53087497, "link": "https://stackoverflow.com/questions/53087497/write-a-function-to-check-if-its-parameter-positive-integer-is-a-perfect-squar", "title": "Write a function to check if its parameter (positive integer) is a perfect square. Then apply this function to a vector of positive integers", "body": "<p>I am new to functions and right now I am trying to understand them so please go easy on me if you see some \"noob\" mistakes.I would really appreciate some help with this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint check(int a[],int n,int i )\n{\n    int j;\n    for (j=0; j&lt;n ; j++)\n    {\n    if(a[i]==j*j)\n        return 1;\n    else\n        return 0;\n    }\n}\nint main()\n{\n   int n,a[100],i;\n   printf(\"\\nThe size:\\n\");\n   scanf(\"%d\",&amp;n);\n   for(i=0; i&lt;n; i++)\n   {\n    printf(\"\\na[%d]=\",i);\n    scanf(\"%d\",&amp;a[i]);\n\n    if(check(a,n,i)==1)\n        printf(\"%d is a perfect square\\n\",a[i]);\n    else\n        printf(\"%d is not a perfect square\\n\",a[i]);\n\n   }\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>I succeeded in making it run but something isn't right no matter the input (1,4,5,9...) it will always print:\" is not a perfect square \"</p>\n"}, {"tags": ["c", "makefile", "openssl"], "comments": [{"owner": {"reputation": 61, "user_id": 9483804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/9483804/parth-desai"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1541000565, "post_id": 53087178, "comment_id": 93071348, "body": "undefined reference to `OPENSSL_init_ssl&#39; collect2: error: ld returned 1 exit status"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1541000937, "post_id": 53087178, "comment_id": 93071607, "body": "I don&#39;t see <code>azureconn.c</code> mentioned anywhere in your makefile"}, {"owner": {"reputation": 61, "user_id": 9483804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/9483804/parth-desai"}, "edited": false, "score": 0, "creation_date": 1541000993, "post_id": 53087178, "comment_id": 93071643, "body": "Sorry azureconn.c was rename as t5ais.o"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9483804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/9483804/parth-desai"}, "edited": false, "score": 0, "creation_date": 1541001191, "post_id": 53087387, "comment_id": 93071771, "body": "your and my rule are same"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 61, "user_id": 9483804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/9483804/parth-desai"}, "edited": false, "score": 0, "creation_date": 1541001294, "post_id": 53087387, "comment_id": 93071841, "body": "@ParthDesai having <code>-c</code> in the command line says don&#39;t link, just compile."}, {"owner": {"reputation": 61, "user_id": 9483804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/9483804/parth-desai"}, "edited": false, "score": 0, "creation_date": 1541001551, "post_id": 53087387, "comment_id": 93071997, "body": "I want to create object file as well in my case"}, {"owner": {"reputation": 61, "user_id": 9483804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/9483804/parth-desai"}, "edited": false, "score": 0, "creation_date": 1541001744, "post_id": 53087387, "comment_id": 93072122, "body": "But for example I have taken azureconn but In real scenario I have multiple files"}, {"owner": {"reputation": 61, "user_id": 9483804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/9483804/parth-desai"}, "edited": false, "score": 0, "creation_date": 1541002271, "post_id": 53087387, "comment_id": 93072450, "body": "If I remove -c it gives another error as /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../../lib32/crt1.o: In function <code>_start&#39;: (.text+0x18): undefined reference to </code>main&#39;"}, {"owner": {"reputation": 61, "user_id": 9483804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/9483804/parth-desai"}, "edited": false, "score": 0, "creation_date": 1541051543, "post_id": 53087387, "comment_id": 93087820, "body": "I have main in xxx.c file whereas I want to link to azureconn.c which doesnt contain main. So In this case if i go with xxx then i will get undefined reference error"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 0, "last_activity_date": 1541004371, "last_edit_date": 1541004371, "creation_date": 1541001088, "answer_id": 53087387, "question_id": 53087178, "link": "https://stackoverflow.com/questions/53087178/makefile-with-openssl-ldlibs-flag-enabled-giving-error/53087387#53087387", "title": "Makefile with OpenSSL LDLIBS flag enabled giving error", "body": "<p>Since you've changed your question.  Which module has the <code>main(...)</code> function in it?  I assumed it was azureconn.c since you said you can compile with this.</p>\n\n<pre><code>gcc azureconn.c -o azureconn -lssl -lcrypto\n</code></pre>\n\n<p>Try using a rule like this to build your executable;</p>\n\n<pre><code>azureconn: \n    $(CC) $(CFLAGS) azureconn.c -o $@ $(LDLIBS)\n</code></pre>\n\n<p>The <code>%.o:%.c</code> rule is not typically used to link, just create object files as the name implies</p>\n"}], "owner": {"reputation": 61, "user_id": 9483804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/9483804/parth-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541004371, "creation_date": 1541000349, "last_edit_date": 1541001817, "question_id": 53087178, "link": "https://stackoverflow.com/questions/53087178/makefile-with-openssl-ldlibs-flag-enabled-giving-error", "title": "Makefile with OpenSSL LDLIBS flag enabled giving error", "body": "<p>I am able to run and compile my c example program with openssl using </p>\n\n<pre><code>gcc azureconn.c -o azureconn -lssl -lcrypto\n</code></pre>\n\n<p>but when I try to compile using makefile with LDLIBS flag in make file, it result into error as undefined reference OPENSSL_Init\nBelow is my make file</p>\n\n<pre><code>    DEFINES = $(GDEFINES)\n\nINCLUDES = $(DIR_PATH)\n\nCFLAGS = $(GCFLAGS) $(DEFINES) $(INCLUDES) -D_GNU_SOURCE\nLDLIBS = -lssl -lcrypto\n\n\nMAIN_OBJECTS = xxxx.o yyy.o zzz.o \\\naaaa.o \n\n\nall: $(MAIN_OBJECTS) \n\n    mv $(MAIN_OBJECTS) $(BIN_PATH)\n\n%.o: %.c \n    $(CC) $(CFLAGS) -c $&lt; -o $@ $(LDLIBS)\n\nclean: \n    rm -rf *.o\n</code></pre>\n\n<p>Error</p>\n\n<blockquote>\n  <p>undefined reference to `OPENSSL_init_ssl' collect2: error: ld returned\n  1 exit status</p>\n</blockquote>\n"}, {"tags": ["c", "windows", "winapi", "kernel", "driver"], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1541007025, "creation_date": 1541007025, "answer_id": 53089059, "question_id": 53086355, "link": "https://stackoverflow.com/questions/53086355/driver-to-user-mode-communication/53089059#53089059", "title": "Driver to User-Mode Communication", "body": "<p>The usual method would be to use an asynchronous IOCTL, forget the event entirely, just have the driver save the IOCTL if there is no outstanding process creation to read and then complete the IOCTL when you get a new process. This does require that the client submit the IOCTL requests ahead of process creation. For best results I would say bind your device handle to an IOCP (I find IOCP far easier to deal with than needing to track which event goes with which OVERLAPPED).</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 3725519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b735fb111d7af9bc39d7b79c88eec1e?s=128&d=identicon&r=PG&f=1", "display_name": "user3725519", "link": "https://stackoverflow.com/users/3725519/user3725519"}, "edited": false, "score": 0, "creation_date": 1542729746, "post_id": 53111682, "comment_id": 93669171, "body": "I implemented it with a pipe like you said but how can I listen to the data from the pipe in my user-mode app? I tried the pipe without the whole app and done this with while(TRUE) loop that use ReadFile to get the data from the pipe (Its a one way communication, only the driver writes to the pipe)  but in my user-mode app I have GUI and the messages loop so if I put while(TRUE) it will stuck the app. I thought about doing the while(TRUE) in seperate thread but it must be another easy way to listen to the pipe. How can I do it?? Thanks"}, {"owner": {"reputation": 389, "user_id": 10443615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pA0Mo.png?s=128&g=1", "display_name": "Security Guard", "link": "https://stackoverflow.com/users/10443615/security-guard"}, "reply_to_user": {"reputation": 45, "user_id": 3725519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b735fb111d7af9bc39d7b79c88eec1e?s=128&d=identicon&r=PG&f=1", "display_name": "user3725519", "link": "https://stackoverflow.com/users/3725519/user3725519"}, "edited": false, "score": 0, "creation_date": 1551333896, "post_id": 53111682, "comment_id": 96604092, "body": "There are two ways to handle this if you have GUI. One way is the way you are doing by creating a thread to read/write the pipe and post a message to UI thread to update the GUI. Another way is to use asynchronous pipe and function <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-msgwaitformultipleobjects\" rel=\"nofollow noreferrer\">MsgWaitForMultipleObjects</a>"}], "tags": [], "owner": {"reputation": 389, "user_id": 10443615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pA0Mo.png?s=128&g=1", "display_name": "Security Guard", "link": "https://stackoverflow.com/users/10443615/security-guard"}, "is_accepted": false, "score": 0, "last_activity_date": 1541123386, "creation_date": 1541123386, "answer_id": 53111682, "question_id": 53086355, "link": "https://stackoverflow.com/questions/53086355/driver-to-user-mode-communication/53111682#53111682", "title": "Driver to User-Mode Communication", "body": "<p>Another way to communicate from Driver to User mode process is for the user mode process to open a pipe in message mode and listen to messages from kernel. It is simpler than implementing asynchronous IOCTL as you do not have to deal with pending IOCTL that may need to be cancelled. Make sure that when you open the pipe, it is ACL'd correctly so that only the kernel can talk to the pipe opened by the user mode process.</p>\n"}], "owner": {"reputation": 45, "user_id": 3725519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b735fb111d7af9bc39d7b79c88eec1e?s=128&d=identicon&r=PG&f=1", "display_name": "user3725519", "link": "https://stackoverflow.com/users/3725519/user3725519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541123386, "creation_date": 1540997942, "question_id": 53086355, "link": "https://stackoverflow.com/questions/53086355/driver-to-user-mode-communication", "title": "Driver to User-Mode Communication", "body": "<p>I am trying to write a tool to monitor processes. Whenever a high privileged process with SYSTEM privileges is created it will alert the user.\nI'm doing this with a driver that monitors every process creation and a user mode app to check if it runs under SYSTEM and if so to make the alert.\nFor doing this the user-mode app should listen to the driver. I'm trying to do it with event. Whenever a process is created the driver will signal the event with IoCreateNotificationEvent (which the use-mode app listens to with WaitForSingleObject) and then the app will send an IRP to the driver to get the pid.\nThat doesn't work well for me and I was looking for other methods to do that communication from the driver to a listening user-mode app and I couldn't find so..\nHow can I make it work?</p>\n\n<p>Thanks for helping</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1540997943, "post_id": 53086335, "comment_id": 93069501, "body": "Without any context - there is no advantage."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1540998110, "post_id": 53086335, "comment_id": 93069613, "body": "Please <a href=\"https://stackoverflow.com/posts/53086335/edit\">edit</a>  your question and provide more information. Otherwise your question cannot be answered, it&#39;s like asking: &quot;what&#39;s the advantage of eating apples versus eating ears?&quot;."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1540998235, "post_id": 53086335, "comment_id": 93069692, "body": "@Jabberwocky Well for one thing, ears aren&#39;t that nutritious."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1540998289, "post_id": 53086335, "comment_id": 93069725, "body": "Sometimes I like to define <b>objects</b> (not types as here) as arrays with 1 elements when I&#39;ll be using them mostly as pointers, as in: <code>struct tm mytm[1] = {0}; mytm-&gt;month = 3; mktime(mytm);</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1540998657, "post_id": 53086335, "comment_id": 93069984, "body": "@Quentin oh, a typo. Should of course read &quot;pears&quot;"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540998722, "post_id": 53086335, "comment_id": 93070037, "body": "Welp, it is ears now. On topic! There&#39;s a <b>great</b> explanation in the &quot;duplicate&quot; link."}], "owner": {"reputation": 19, "user_id": 10275679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a49d5e15ada8efb597eb021305743e?s=128&d=identicon&r=PG&f=1", "display_name": "dfine", "link": "https://stackoverflow.com/users/10275679/dfine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1540998127, "answer_count": 0, "score": 0, "last_activity_date": 1540997899, "creation_date": 1540997899, "question_id": 53086335, "link": "https://stackoverflow.com/questions/53086335/array-of-typedef-struct-in-c", "closed_reason": "Duplicate", "title": "array of typedef struct in C", "body": "<p>I'm reading a C code in which a struct is defined like that</p>\n\n<pre><code>typedef struct MyStruct {\n...\n} mystruct[1];\n</code></pre>\n\n<p>what is the gain/advantage of this definition over </p>\n\n<pre><code>typedef struct MyStruct {\n...\n} mystruct;\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "intel-mkl", "lapacke", "cblas"], "comments": [{"owner": {"reputation": 596, "user_id": 6152534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/925595697531599/picture?type=large", "display_name": "Pedro H. N. Vieira", "link": "https://stackoverflow.com/users/6152534/pedro-h-n-vieira"}, "edited": false, "score": 0, "creation_date": 1541011815, "post_id": 53085484, "comment_id": 93077270, "body": "This question has a follow-up: <a href=\"https://stackoverflow.com/questions/53090142/proper-way-to-calculate-transainvba-with-intel-mkl-follow-up-question\" title=\"proper way to calculate transainvba with intel mkl follow up question\">stackoverflow.com/questions/53090142/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 6152534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/925595697531599/picture?type=large", "display_name": "Pedro H. N. Vieira", "link": "https://stackoverflow.com/users/6152534/pedro-h-n-vieira"}, "edited": false, "score": 0, "creation_date": 1541006442, "post_id": 53085574, "comment_id": 93074688, "body": "I did a major edit:  Added matrix printing and Python comparison. The results are different. Could you take a look?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 596, "user_id": 6152534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/925595697531599/picture?type=large", "display_name": "Pedro H. N. Vieira", "link": "https://stackoverflow.com/users/6152534/pedro-h-n-vieira"}, "edited": false, "score": 0, "creation_date": 1541009266, "post_id": 53085574, "comment_id": 93076132, "body": "@PedroH.N.Vieira <b><i>Don&#39;t</i></b> do what you just did. Now you have a completely different question, making any answers and possible comments useless! If you have another problem, then post it as a new question!"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1540995635, "creation_date": 1540995635, "answer_id": 53085574, "question_id": 53085484, "link": "https://stackoverflow.com/questions/53085484/proper-way-to-calculate-transainvba-with-intel-mkl/53085574#53085574", "title": "Proper way to calculate `trans(a)*inv(b)*a` with Intel MKL", "body": "<p>The variable <code>yn</code> is declared as a pointer to <code>_Complex double</code>, i.e. it can be seen as an array of <code>_Complex double</code> elements. But you allocate memory for <code>n*n</code> elements of type <code>_Complex double*</code>. </p>\n\n<p>If the size of <code>_Complex double</code> is larger than the size of <code>_Complex double*</code> (highly likely, probably twice (or even <em>four</em> times) the size) then you allocate to little memory and will go out of bounds when using the array.</p>\n\n<p>Going out of bounds leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n"}], "owner": {"reputation": 596, "user_id": 6152534, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/925595697531599/picture?type=large", "display_name": "Pedro H. N. Vieira", "link": "https://stackoverflow.com/users/6152534/pedro-h-n-vieira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 53085574, "answer_count": 1, "score": 2, "last_activity_date": 1541009284, "creation_date": 1540995386, "last_edit_date": 1541009284, "question_id": 53085484, "link": "https://stackoverflow.com/questions/53085484/proper-way-to-calculate-transainvba-with-intel-mkl", "title": "Proper way to calculate `trans(a)*inv(b)*a` with Intel MKL", "body": "<p>I am using <a href=\"https://software.intel.com/en-us/mkl-developer-reference-c-cblas-gemm\" rel=\"nofollow noreferrer\">Intel's MKL LAPACKE and CBLAS</a> to calculate</p>\n\n<p><code>yn = trans(a)*inv(zt)*a + trans(b)*inv(zl)*b</code></p>\n\n<p>Where <code>a</code> and <code>b</code> are m-by-n real matrices, <code>zt</code> and <code>zl</code> are m-by-m complex matrices. The resulting complex matrix <code>yn</code> is n-by-n.</p>\n\n<p>Here is how I am doing it:</p>\n\n<pre><code>zt &lt;- inv(zt)\nzl &lt;- inv(zl)\nc &lt;- zt*a\nyn &lt;- trans(a)*c\nc &lt;- zl*b\nyn &lt;- trans(b)*c + yn\n</code></pre>\n\n<p>The actual code:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;complex.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;mkl_types.h&gt;\n#define MKL_Complex16 _Complex double //overwrite type\n#include &lt;mkl.h&gt;\n#include &lt;mkl_lapacke.h&gt;\n\nint calc_yn(\n    _Complex double* yn, double* a, double *b, _Complex double* zl,\n    _Complex double* zt, int m, int n)\n{\n    lapack_int* ipiv = (MKL_INT*) malloc(sizeof(lapack_int)*m);\n    LAPACKE_zgetrf(LAPACK_ROW_MAJOR, m, m, zt, m, ipiv);\n    LAPACKE_zgetri(LAPACK_ROW_MAJOR, m, zt, m, ipiv);\n    LAPACKE_zgetrf(LAPACK_ROW_MAJOR, m, m, zl, m, ipiv);\n    LAPACKE_zgetri(LAPACK_ROW_MAJOR, m, zl, m, ipiv);\n    free(ipiv);\n    const double alpha = 1.0;\n    const double beta = 0.0;\n    lapack_complex_double* c = (lapack_complex_double*) malloc(\n        sizeof(lapack_complex_double)*(m*n));\n    // c &lt;- zt*a\n    cblas_zgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans,\n                m, n, m,\n                &amp;alpha, zt, m, a, n,\n                &amp;beta, c, n);\n    // yn &lt;- aT*c\n    cblas_zgemm(CblasRowMajor, CblasTrans, CblasNoTrans,\n                n, n, m,\n                &amp;alpha, a, n, c, n,\n                &amp;beta, yn, n);\n    // c &lt;- zl*b\n    cblas_zgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans,\n                m, n, m,\n                &amp;alpha, zl, m, b, n,\n                &amp;beta, c, n);\n    // yn &lt;- bT*c + yn\n    cblas_zgemm(CblasRowMajor, CblasTrans, CblasNoTrans,\n                n, n, m,\n                &amp;alpha, b, n, c, n,\n                &amp;alpha, yn, n);\n    free(c);\n    return 0;\n}\n\nint main()\n{\n    int m = 2;\n    int n = 3;\n    _Complex double* yn = (_Complex double*) malloc(sizeof(_Complex double*)*(n*n));\n    double a[] = {\n        0.5, 0.0, 0.5,\n        0.5, 0.5, 0.0\n    };\n    double b[] = {\n        1.0, 0.0, -1.0,\n        1.0, -1.0, 0.0\n    };\n    _Complex double zt[] = {\n        (0.004 + 0.09*I), (-0.004 - 0.12*I),\n        (-0.004 - 0.12*I), (0.005 + 0.11*I)\n    };\n    _Complex double zl[] = {\n        (0.1 + 2.13*I), (-124.004 - 800.12*I),\n        (-124.004 - 800.12*I), (0.4 + 4.08*I)\n    };\n    calc_yn(yn, a, b, zl, zt, m, n);\n    free(yn);\n    return 0;\n}\n// compile command (MKLROOT is defined by a bash script that is shipped together with intel's MKL):\n//gcc -std=c11 -DMKL_ILP64 -m64 -g -o test.a test.c -L${MKLROOT}/lib/intel64 -Wl,--no-as-needed -lmkl_intel_ilp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread -lm -ldl\n</code></pre>\n\n<p>When I run that test it gives an error</p>\n\n<pre><code>*** Error in `./test.a': free(): invalid next size (fast): 0x0000000001f72010 ***\n======= Backtrace: =========\n/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7f8dee29c7e5]\n/lib/x86_64-linux-gnu/libc.so.6(+0x8037a)[0x7f8dee2a537a]\n/lib/x86_64-linux-gnu/libc.so.6(cfree+0x4c)[0x7f8dee2a953c]\n./test.a[0x400d49]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7f8dee245830]\n./test.a[0x4007b9]\n======= Memory map: ========\n00400000-00401000 r-xp 00000000 08:06 2883692                            /home/pedro/codigos/HP_HEM/test.a\n00601000-00602000 r--p 00001000 08:06 2883692                            /home/pedro/codigos/HP_HEM/test.a\n00602000-00603000 rw-p 00002000 08:06 2883692                            /home/pedro/codigos/HP_HEM/test.a\n01f72000-01f93000 rw-p 00000000 00:00 0                                  [heap]\n7f8de4000000-7f8de4021000 rw-p 00000000 00:00 0 \n7f8de4021000-7f8de8000000 ---p 00000000 00:00 0 \n7f8de9d2f000-7f8dea73e000 rw-p 00000000 00:00 0 \n7f8dea73e000-7f8deddf9000 r-xp 00000000 08:06 2505573                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_avx2.so\n7f8deddf9000-7f8dedff8000 ---p 036bb000 08:06 2505573                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_avx2.so\n7f8dedff8000-7f8dedfff000 r--p 036ba000 08:06 2505573                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_avx2.so\n7f8dedfff000-7f8dee00a000 rw-p 036c1000 08:06 2505573                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_avx2.so\n7f8dee00a000-7f8dee00f000 rw-p 00000000 00:00 0 \n7f8dee00f000-7f8dee025000 r-xp 00000000 08:06 1184923                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7f8dee025000-7f8dee224000 ---p 00016000 08:06 1184923                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7f8dee224000-7f8dee225000 rw-p 00015000 08:06 1184923                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7f8dee225000-7f8dee3e5000 r-xp 00000000 08:06 1184885                    /lib/x86_64-linux-gnu/libc-2.23.so\n7f8dee3e5000-7f8dee5e5000 ---p 001c0000 08:06 1184885                    /lib/x86_64-linux-gnu/libc-2.23.so\n7f8dee5e5000-7f8dee5e9000 r--p 001c0000 08:06 1184885                    /lib/x86_64-linux-gnu/libc-2.23.so\n7f8dee5e9000-7f8dee5eb000 rw-p 001c4000 08:06 1184885                    /lib/x86_64-linux-gnu/libc-2.23.so\n7f8dee5eb000-7f8dee5ef000 rw-p 00000000 00:00 0 \n7f8dee5ef000-7f8dee5f2000 r-xp 00000000 08:06 1184909                    /lib/x86_64-linux-gnu/libdl-2.23.so\n7f8dee5f2000-7f8dee7f1000 ---p 00003000 08:06 1184909                    /lib/x86_64-linux-gnu/libdl-2.23.so\n7f8dee7f1000-7f8dee7f2000 r--p 00002000 08:06 1184909                    /lib/x86_64-linux-gnu/libdl-2.23.so\n7f8dee7f2000-7f8dee7f3000 rw-p 00003000 08:06 1184909                    /lib/x86_64-linux-gnu/libdl-2.23.so\n7f8dee7f3000-7f8dee8fb000 r-xp 00000000 08:06 1184955                    /lib/x86_64-linux-gnu/libm-2.23.so\n7f8dee8fb000-7f8deeafa000 ---p 00108000 08:06 1184955                    /lib/x86_64-linux-gnu/libm-2.23.so\n7f8deeafa000-7f8deeafb000 r--p 00107000 08:06 1184955                    /lib/x86_64-linux-gnu/libm-2.23.so\n7f8deeafb000-7f8deeafc000 rw-p 00108000 08:06 1184955                    /lib/x86_64-linux-gnu/libm-2.23.so\n7f8deeafc000-7f8deeb14000 r-xp 00000000 08:06 1185031                    /lib/x86_64-linux-gnu/libpthread-2.23.so\n7f8deeb14000-7f8deed13000 ---p 00018000 08:06 1185031                    /lib/x86_64-linux-gnu/libpthread-2.23.so\n7f8deed13000-7f8deed14000 r--p 00017000 08:06 1185031                    /lib/x86_64-linux-gnu/libpthread-2.23.so\n7f8deed14000-7f8deed15000 rw-p 00018000 08:06 1185031                    /lib/x86_64-linux-gnu/libpthread-2.23.so\n7f8deed15000-7f8deed19000 rw-p 00000000 00:00 0 \n7f8deed19000-7f8deeeb6000 r-xp 00000000 08:06 2505566                    /opt/intel/compilers_and_libraries_2018.2.199/linux/compiler/lib/intel64_lin/libiomp5.so\n7f8deeeb6000-7f8def0b6000 ---p 0019d000 08:06 2505566                    /opt/intel/compilers_and_libraries_2018.2.199/linux/compiler/lib/intel64_lin/libiomp5.so\n7f8def0b6000-7f8def0b8000 r--p 0019d000 08:06 2505566                    /opt/intel/compilers_and_libraries_2018.2.199/linux/compiler/lib/intel64_lin/libiomp5.so\n7f8def0b8000-7f8def0c2000 rw-p 0019f000 08:06 2505566                    /opt/intel/compilers_and_libraries_2018.2.199/linux/compiler/lib/intel64_lin/libiomp5.so\n7f8def0c2000-7f8def0f1000 rw-p 00000000 00:00 0 \n7f8def0f1000-7f8df2eb3000 r-xp 00000000 08:06 2505576                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_core.so\n7f8df2eb3000-7f8df30b2000 ---p 03dc2000 08:06 2505576                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_core.so\n7f8df30b2000-7f8df30b9000 r--p 03dc1000 08:06 2505576                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_core.so\n7f8df30b9000-7f8df30e6000 rw-p 03dc8000 08:06 2505576                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_core.so\n7f8df30e6000-7f8df30fa000 rw-p 00000000 00:00 0 \n7f8df30fa000-7f8df4fd7000 r-xp 00000000 08:06 2505580                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_intel_thread.so\n7f8df4fd7000-7f8df51d6000 ---p 01edd000 08:06 2505580                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_intel_thread.so\n7f8df51d6000-7f8df51da000 r--p 01edc000 08:06 2505580                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_intel_thread.so\n7f8df51da000-7f8df543e000 rw-p 01ee0000 08:06 2505580                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_intel_thread.so\n7f8df543e000-7f8df5446000 rw-p 00000000 00:00 0 \n7f8df5446000-7f8df5c5b000 r-xp 00000000 08:06 2505578                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_intel_ilp64.so\n7f8df5c5b000-7f8df5e5a000 ---p 00815000 08:06 2505578                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_intel_ilp64.so\n7f8df5e5a000-7f8df5e5c000 r--p 00814000 08:06 2505578                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_intel_ilp64.so\n7f8df5e5c000-7f8df5e6e000 rw-p 00816000 08:06 2505578                    /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl/lib/intel64_lin/libmkl_intel_ilp64.so\n7f8df5e6e000-7f8df5e74000 rw-p 00000000 00:00 0 \n7f8df5e74000-7f8df5e9a000 r-xp 00000000 08:06 1184857                    /lib/x86_64-linux-gnu/ld-2.23.so\n7f8df6028000-7f8df607d000 rw-p 00000000 00:00 0 \n7f8df6096000-7f8df6099000 rw-p 00000000 00:00 0 \n7f8df6099000-7f8df609a000 r--p 00025000 08:06 1184857                    /lib/x86_64-linux-gnu/ld-2.23.so\n7f8df609a000-7f8df609b000 rw-p 00026000 08:06 1184857                    /lib/x86_64-linux-gnu/ld-2.23.so\n7f8df609b000-7f8df609c000 rw-p 00000000 00:00 0 \n7ffc998d2000-7ffc998f4000 rw-p 00000000 00:00 0                          [stack]\n7ffc99987000-7ffc9998a000 r--p 00000000 00:00 0                          [vvar]\n7ffc9998a000-7ffc9998c000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\nAborted (core dumped)\n</code></pre>\n\n<p>It does not show if I comment the 2nd and 4th call to <code>zgemm</code>. From what I've read in the <a href=\"https://software.intel.com/en-us/mkl-developer-reference-c-cblas-gemm\" rel=\"nofollow noreferrer\">docs</a>, the parameters are correct. I tried changing them, but the error persists or I get an error of incorrect parameter like:</p>\n\n<pre><code>Intel MKL ERROR: Parameter 9 was incorrect on entry to cblas_zgemm.\n</code></pre>\n\n<p>So, what is wrong in my code?</p>\n"}, {"tags": ["c", "struct", "null"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1540995273, "post_id": 53085416, "comment_id": 93067672, "body": "You cannot compare something that is not a pointer to a pointer."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 3, "creation_date": 1540995285, "post_id": 53085416, "comment_id": 93067677, "body": "What does <code>if (s)</code> mean to you? What <i>exactly</i> is tested?"}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 2, "creation_date": 1540995358, "post_id": 53085416, "comment_id": 93067737, "body": "Because in C <code>struct</code> is a <a href=\"https://en.wikipedia.org/wiki/Value_type_and_reference_type\" rel=\"nofollow noreferrer\">value type</a>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1540995890, "post_id": 53085416, "comment_id": 93068099, "body": "You&#39;ll need C++ and operator overloading if you want to do this."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540996591, "post_id": 53085416, "comment_id": 93068554, "body": "Do you mean something similar to <code>NULL</code> or more like <code>true</code>/<code>false</code>? For usage in a condition (<code>if(s)</code>) you need some boolean value. What would make a struct being more true than others for you?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1540996815, "post_id": 53085416, "comment_id": 93068687, "body": "The real question is indeed what you hoped to achieve by comparing a struct with NULL. To see if it was initialized, or what? That&#39;s not what NULL is for."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1540995375, "post_id": 53085449, "comment_id": 93067749, "body": "BTW, if s was a global variable, it could not be null either."}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1540995484, "post_id": 53085449, "comment_id": 93067810, "body": "@Jabberwocky Yes of course. In that case they would live in the data section."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1540995576, "post_id": 53085449, "comment_id": 93067880, "body": "The fact that <code>s</code>  is not a pointer is unrelated to where it lives."}], "tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 1, "last_activity_date": 1540995288, "creation_date": 1540995288, "answer_id": 53085449, "question_id": 53085416, "link": "https://stackoverflow.com/questions/53085416/why-cant-structs-be-compared-for-nullness-in-c/53085449#53085449", "title": "Why can&#39;t structs be compared for NULLness in C?", "body": "<p>Because <code>null</code> applies to pointers and <code>s</code> is not a pointer.</p>\n\n<p>BTW, <code>s</code> is an automatic object that lives on the stack and cannot be null.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1540995368, "creation_date": 1540995368, "answer_id": 53085474, "question_id": 53085416, "link": "https://stackoverflow.com/questions/53085416/why-cant-structs-be-compared-for-nullness-in-c/53085474#53085474", "title": "Why can&#39;t structs be compared for NULLness in C?", "body": "<p><code>NULL</code> is a special pointer value that is defined to not point anywhere.  You can't check if <code>s</code> is <code>NULL</code> because <code>s</code> is not a pointer.  </p>\n\n<p>If your intent is to see if <code>s</code> has been <em>initialized</em>, you can't do that either because there's no special value that tells you that a variable has been initialized.  For example a uninitialized <code>int</code> could contain 0, 1, 34634, -265356657, or any other value.</p>\n\n<p>Your best bet is to initialize the variable with a known value and check for that.</p>\n\n<pre><code>School s = { -1 };\n\nif (s.numOfStudents == -1) {\n    printf(\"not used yet\\n\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1540995445, "creation_date": 1540995445, "answer_id": 53085508, "question_id": 53085416, "link": "https://stackoverflow.com/questions/53085416/why-cant-structs-be-compared-for-nullness-in-c/53085508#53085508", "title": "Why can&#39;t structs be compared for NULLness in C?", "body": "<p>A struct consists of data elements. Each element can be null (if appropriate for the type of element), but the struct itself cannot be [compared to] null, even if it has only one data element.</p>\n"}, {"tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 7, "last_activity_date": 1540995535, "creation_date": 1540995535, "answer_id": 53085537, "question_id": 53085416, "link": "https://stackoverflow.com/questions/53085416/why-cant-structs-be-compared-for-nullness-in-c/53085537#53085537", "title": "Why can&#39;t structs be compared for NULLness in C?", "body": "<p>In the case of:</p>\n\n<p><code>School s;</code></p>\n\n<p><code>s</code> is definitely not NULL, because it is not a pointer.  It is however, an <strong>uninitialized</strong> instance of a struct, and the value of <code>s.numOfStudents</code> is undefined.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1540995586, "creation_date": 1540995586, "answer_id": 53085551, "question_id": 53085416, "link": "https://stackoverflow.com/questions/53085416/why-cant-structs-be-compared-for-nullness-in-c/53085551#53085551", "title": "Why can&#39;t structs be compared for NULLness in C?", "body": "<p><code>NULL</code> applies to pointer types, and <code>s</code> isn't a pointer, it's an <em>instance</em> of the <code>School</code> type.  </p>\n\n<p>If you declared <code>s</code> as a <em>pointer to</em> <code>School</code>, such as</p>\n\n<pre><code>School *s;\n</code></pre>\n\n<p>then the null check would make sense:</p>\n\n<pre><code>if ( s )\n{\n  // s points to a valid instance of School\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 10565717, "user_type": "registered", "profile_image": "https://graph.facebook.com/1932685853444649/picture?type=large", "display_name": "Tibor Ukropina", "link": "https://stackoverflow.com/users/10565717/tibor-ukropina"}, "is_accepted": false, "score": 1, "last_activity_date": 1540997567, "creation_date": 1540997567, "answer_id": 53086213, "question_id": 53085416, "link": "https://stackoverflow.com/questions/53085416/why-cant-structs-be-compared-for-nullness-in-c/53086213#53086213", "title": "Why can&#39;t structs be compared for NULLness in C?", "body": "<p>NULL is used only by pointers. For example something like <code>school *s == NULL</code> would be valid since <code>s</code> is a pointer to type <code>school</code>. However in your case <code>s</code> is not a pointer therefore it cannot be compared to NULL.</p>\n"}, {"comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1540999718, "post_id": 53086806, "comment_id": 93070746, "body": "Your null_check works on your own example simply becase you&#39;ve declared <code>s</code> as a global variable.  If <code>s</code> was a local variable, declared inside a function, it wouldn&#39;t necessarily be zero-initialized.  Especially on a non-debug build."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1540999882, "post_id": 53086806, "comment_id": 93070864, "body": "Let me clarify that."}], "tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": false, "score": 1, "last_activity_date": 1541000039, "last_edit_date": 1541000039, "creation_date": 1540999313, "answer_id": 53086806, "question_id": 53085416, "link": "https://stackoverflow.com/questions/53085416/why-cant-structs-be-compared-for-nullness-in-c/53086806#53086806", "title": "Why can&#39;t structs be compared for NULLness in C?", "body": "<p>People perform <code>NULL</code> checks on pointers to determine <em>whether or not the pointer is valid</em>. We would need to call a function to determine whether or not a <code>struct</code> was valid, and the answer would depend on knowledge of the exact contents and their meaning. For example...</p>\n\n<pre><code>typedef struct\n{\n    int numOfStudents;\n} School;\n\nint null_check(School* item)\n{\n    /* This test assumes that a School is invalid if it has no students.*/\n    return (!item || !item-&gt;numOfStudents);\n}\n\n/*...*/\nSchool s;\n/*...*/\nif(null_check(&amp;s)) {\n    printf(\"null\");\n}\n</code></pre>\n\n<p><strong>Note</strong> that while a pointer is either pointing at something or not, the question of whether a data structure is valid is potentially much more complex, and should not be confused with the question of whether the structure has been initialized or has every data member set to zero.</p>\n"}], "owner": {"reputation": 933, "user_id": 9914653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61fd88affbca575271db61811e727c2?s=128&d=identicon&r=PG&f=1", "display_name": "hitchhiker", "link": "https://stackoverflow.com/users/9914653/hitchhiker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 53085537, "answer_count": 7, "score": 5, "last_activity_date": 1541000039, "creation_date": 1540995196, "question_id": 53085416, "link": "https://stackoverflow.com/questions/53085416/why-cant-structs-be-compared-for-nullness-in-c", "title": "Why can&#39;t structs be compared for NULLness in C?", "body": "<p>I have the following struct:</p>\n\n<pre><code>typedef struct School\n{\n    int numOfStudents;\n} School;\n</code></pre>\n\n<p>For example if I have a struct:</p>\n\n<pre><code>School s;\n</code></pre>\n\n<p>I want to check whether the struct is null like this:</p>\n\n<pre><code>if(s) {\n    printf(\"null\");\n}\n</code></pre>\n\n<p>This will not compile and error message is as follows:</p>\n\n<p><code>error: used struct type value where scalar is required</code></p>\n\n<p>Why can't I check structs for NULLness inside if statement in C?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5955, "user_id": 5457878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b3uR6.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/5457878/giovanni"}, "edited": false, "score": 0, "creation_date": 1540992153, "post_id": 53084333, "comment_id": 93065476, "body": "Well, I can&#39;t read Portuguese, but maybe this site post might help you out: <a href=\"https://pt.stackoverflow.com/questions/112263/como-resolver-problemas-de-acentua&#231;&#227;o-ao-usar-a-fun&#231;&#227;o-setlocale\" title=\"como resolver problemas de acentua%26%23231%3b%26%23227%3bo ao usar a fun%26%23231%3b%26%23227%3bo setlocale\">pt.stackoverflow.com/questions/112263/&hellip;</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1540993106, "post_id": 53084333, "comment_id": 93066187, "body": "Read <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">utf8everywhere.org</a> and consider using <code>setlocale(LC_ALL, &quot;pt_PT.UTF-8&quot;)</code>"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1540994053, "post_id": 53084333, "comment_id": 93066851, "body": "@Yunnosch I don&#39;t think this relates to naming of files, the file is called <code>&quot;names.txt&quot;</code> which seems to comply with your ideals. :)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1541002446, "post_id": 53084333, "comment_id": 93072562, "body": "regarding: ` while (!feof(my_file))`   read: <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong/26557243\">while (!feof(my_file)) always wrong</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1541002664, "post_id": 53084333, "comment_id": 93072697, "body": "the language  &#39;Portuguese&#39; uses wide (multibyte) characters.  so 1) include the file &#39;wchar.h&#39;  2) use the correct function calls for wide characters"}], "owner": {"reputation": 75, "user_id": 3317118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85044589b779c8acc5d3906936c413b9?s=128&d=identicon&r=PG&f=1", "display_name": "Bebeto Alves", "link": "https://stackoverflow.com/users/3317118/bebeto-alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540991943, "creation_date": 1540991943, "question_id": 53084333, "link": "https://stackoverflow.com/questions/53084333/problems-with-accentuation-and-fopen-in-c", "title": "Problems with accentuation and fopen in C", "body": "<p>I'm studying C and now I started to see how to manipulate files, that is: how to write data, read and delete it.</p>\n\n<p>However I am experiencing a problem, my program will use accents and special characters, so I set setlocation with my language so that they work perfectly.</p>\n\n<p>But it ends up creating two inconsistencies:</p>\n\n<p>When I put words with accents to save in the file, and I try to display them on the screen, returns several strange characters. Note that accented words within the printf are displayed normally.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zfZG1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zfZG1.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I remove setlocation, the accented words inserted in the file are displayed perfectly, but the printf with accents is not displayed.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vZRED.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vZRED.png\" alt=\"enter image description here\"></a></p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;locale.h&gt;\n\nint main() {\n\n    setlocale(LC_ALL, \"Portuguese\");\n\n    FILE *my_file;\n\n    char name[90];\n\n    fopen_s(&amp;my_file, \"names.txt\", \"a\");\n\n    printf(\"Digite uma palavra acentuada [n\u00e3o/a\u00e7\u00e3o/maldi\u00e7\u00e3o]: \");\n\n    scanf_s(\"%[^\\n]\", name, 90);\n\n    fputs(name, my_file);\n    fputs(\"\\n\", my_file);\n    fclose(my_file);\n\n    fopen_s(&amp;my_file, \"names.txt\", \"r\");\n\n    int i;\n    char *result;\n    char lines[100];\n\n    i = 1;\n    while (!feof(my_file))\n    {\n        result = fgets(lines, 100, my_file);\n        if (result)\n            printf(\"%s\", lines);\n        i++;\n    }\n\n    fclose(my_file);\n    return 0;\n}\n</code></pre>\n\n<p>Any suggestions on how to fix this? Thank you.</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "centos", "rhel"], "owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1540990732, "creation_date": 1540990732, "question_id": 53083926, "link": "https://stackoverflow.com/questions/53083926/relation-between-rhel-release-version-macro-and-etc-redhat-release", "title": "Relation between RHEL_RELEASE_VERSION-macro and /etc/redhat-release", "body": "<p>There is a special macro <code>RHEL_RELEASE_CODE</code> that helps in preprocessing when building modules e.g. for centos kernel.</p>\n\n<p>Whether the value of that macro should match the info in <code>/etc/redhat-release</code> or <code>lsb_release</code>? In other words if I see e.g. <em><code>CentOS Linux release 7.3.1611 (Core)</code></em> inside <code>/etc/redhat-release</code>, does it mean that when I build some module, <code>RHEL_RELEASE_CODE</code> will be equal to <code>RHEL_RELEASE_VERSION(7,3)</code>?</p>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1541075127, "post_id": 53083520, "comment_id": 93097874, "body": "Well, the simplest way I could imagine is <code>char *p; f(&amp;p);</code> It depends on the semantics of the function if an array of strings is expected or the address of a pointer that shall be modified in the function."}], "answers": [{"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1541019024, "post_id": 53083572, "comment_id": 93080305, "body": "Unfortunately, any compound literal created in such fashion will have a lifetime that ends with the nearest enclosing block, so given <code>int **p; ... if (someCondition) p=(int*[2]){&amp;x,&amp;y};</code> adding braces around the if-controlled statement would cause the object created by the compound literal to die before code could use it."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1541024279, "post_id": 53083572, "comment_id": 93082125, "body": "@supercat: I have to admit I was hoping literals like that would behave like string constants -- that is they really live forever and are in readonly memory. Oh well."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1541024640, "post_id": 53083572, "comment_id": 93082244, "body": "@Joshua: Or at least that they could be declared <code>static</code> and have such behavior, or last until code either leaves the current <i>function</i> or re-executes the literal.  Supposedly, the reason literals don&#39;t last throughout the current function is ambiguity as to what should happen if they&#39;re re-executed, but restricting them to a current block does nothing to eliminate that ambiguity."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1541038802, "post_id": 53083572, "comment_id": 93085417, "body": "@Joshua: So far as I can tell, the only common situation where the code compilers are required to produce for compound literals wouldn&#39;t be needlessly inefficient are those where none of the aggregate members are constants.  Rather useless, compared with treating them in a fashion analogous to string literals (yield a pointer to a region of const storage which may or may not be distinct from any other, but will hold the right values).  Too bad the only kind of compound literal supported by the Standard is the useless one."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 41, "last_activity_date": 1540990995, "last_edit_date": 1540990995, "creation_date": 1540989628, "answer_id": 53083572, "question_id": 53083520, "link": "https://stackoverflow.com/questions/53083520/why-is-a-temporary-char-argument-illegal/53083572#53083572", "title": "Why is a temporary char** argument illegal?", "body": "<p>This gives a warning:</p>\n\n<pre><code>char ** p = {\"a\", \"b\"};\n</code></pre>\n\n<p>because <code>p</code> is not an array.</p>\n\n<p>This is also not legal:</p>\n\n<pre><code>f({\"a\", \"b\"});\n</code></pre>\n\n<p>since curly braces by themselves are not allowed in an expression (but can be used as an initializer).</p>\n\n<p>It is possible to create an array on the fly like that using a <strong>compound literal</strong>:</p>\n\n<pre><code>f((char *[]){\"a\", \"b\"});\n</code></pre>\n\n<p>You could also use a compound literal to initialize a temporary:</p>\n\n<pre><code>char ** p = (char *[]){\"a\", \"b\"};\n</code></pre>\n\n<p>Unlike the first statement, this is valid because the literal is an array of type <code>char *[2]</code> and will decay to a <code>char **</code> which can be used to initialize a variable of this type.</p>\n\n<p>See section 6.5.2.5 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\">C standard</a> for more details on compound literals.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 14, "last_activity_date": 1540989841, "creation_date": 1540989841, "answer_id": 53083639, "question_id": 53083520, "link": "https://stackoverflow.com/questions/53083520/why-is-a-temporary-char-argument-illegal/53083639#53083639", "title": "Why is a temporary char** argument illegal?", "body": "<p>This declaration <code>char ** p = {\"a\", \"b\"};</code> triggers a warning because C does not know how to interpret the content of <code>{</code> <code>}</code> braces:</p>\n\n<ul>\n<li>Declaration type <code>char**</code> suggests it's a single pointer-to-pointer-to-char</li>\n<li>Content of <code>{</code> <code>}</code> specifies two items.</li>\n</ul>\n\n<p>You need to tell C that you are initializing a pointer to pointer with a pointer to the initial element of an anonymous array by specifying a type in front of the braces:</p>\n\n<pre><code>char ** p = (char*[]){\"a\", \"b\"}\n</code></pre>\n\n<p>This construct is called a \"compound literal\". It could be used in a declaration, but it also works as an expression.</p>\n\n<p><strong>Note:</strong> if you are planning to pass an array like that to a function, you need to provide a way to determine the size of the array. One approach is to pass <code>NULL</code> to \"terminate\" the array, like this:</p>\n\n<pre><code>void f(char **p) {\n    int i = 0;\n    while (*p) {\n        printf(\"%d:%s\\n\", i++, *p++);\n    }\n}\nint main(void) {\n    f((char*[]){\"a\", \"b\", NULL});\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/jYg1Gj\" rel=\"noreferrer\">Demo.</a></p>\n"}, {"comments": [{"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1540990612, "post_id": 53083728, "comment_id": 93064348, "body": "<i>GCC provide this feature as an extension too</i> - This (<code>f((char *[]){&quot;a&quot;,&quot;b&quot;});</code>) would not have worked on Clang?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1540991085, "post_id": 53083728, "comment_id": 93064670, "body": "@CIsForCookies; Clang also provide the same as an extension. In clang <code>int []y = (int []) {1, 2, 3};</code> will work too while GCC will throw an error."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 5, "last_activity_date": 1540990991, "last_edit_date": 1540990991, "creation_date": 1540990121, "answer_id": 53083728, "question_id": 53083520, "link": "https://stackoverflow.com/questions/53083520/why-is-a-temporary-char-argument-illegal/53083728#53083728", "title": "Why is a temporary char** argument illegal?", "body": "<p>C99 and later added <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html\" rel=\"nofollow noreferrer\">compound literals</a> for the exact purpose: <em>creating array and structs on the fly</em><br>\nExample:  </p>\n\n<pre><code>struct foo {int a; char b[2];} structure;\nstructure = ((struct foo) {1, 'a', 0});\nint *y = (int []) {1, 2, 3};\nint *z = (int []) {1}; \n</code></pre>\n\n<p>Apart from std C99 and later, GCC provide this feature as an extension too.<br>\nIn you case this will work </p>\n\n<pre><code>f((char *[]){\"a\",\"b\"});\n</code></pre>\n\n<p><code>(char *[]){\"a\",\"b\"}</code> is a compound literal which creates an array of 2 pointers to <code>char</code> on the fly.</p>\n"}], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3012, "favorite_count": 2, "accepted_answer_id": 53083572, "answer_count": 3, "score": 26, "last_activity_date": 1541073262, "creation_date": 1540989479, "last_edit_date": 1541073262, "question_id": 53083520, "link": "https://stackoverflow.com/questions/53083520/why-is-a-temporary-char-argument-illegal", "title": "Why is a temporary char** argument illegal?", "body": "<p>I have a function, <code>f(char **p)</code>, and I wanted to call it in the simplest way I could.</p>\n\n<p>I tried</p>\n\n<pre><code>char ** p = {\"a\", \"b\"};\nf(p);\n</code></pre>\n\n<p>and got:</p>\n\n<blockquote>\n  <p>scalar object requires one element in initializer</p>\n</blockquote>\n\n<p>so I changed it into</p>\n\n<pre><code>char * p[2] = {\"a\", \"b\"};\nf(p);\n</code></pre>\n\n<p>and that went fine [<em>would have been also fine with just <code>char * p[]</code></em>].</p>\n\n<p>Why can't I create an array of pointers on the fly like the following?</p>\n\n<pre><code>f({\"a\", \"b\"});\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540990538, "post_id": 53083102, "comment_id": 93064299, "body": "<code>apt-get</code> is not a command in macOS.  You need to get the source code for the CS50 class from the GitHub repository and install it &#39;manually&#39;.  You could try one of the alternative sources of pre-built software for Macs (e.g. Brew), but I&#39;m not sure the library will be available from them."}], "answers": [{"tags": [], "owner": {"reputation": 3306, "user_id": 1951463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZ8Ii.jpg?s=128&g=1", "display_name": "Terry Carmen", "link": "https://stackoverflow.com/users/1951463/terry-carmen"}, "is_accepted": false, "score": 0, "last_activity_date": 1540997592, "creation_date": 1540997592, "answer_id": 53086222, "question_id": 53083102, "link": "https://stackoverflow.com/questions/53083102/c-library-problems-installing/53086222#53086222", "title": "C library problems installing", "body": "<p>More than help installing the library, you need help in understanding what's going on.</p>\n\n<p>Someone gave you a command to run and you ran it, but they were assuming that you were using a different OS, like Ubuntu.</p>\n\n<p>The first message \"apt-get not found\" is because you're running MacOS, which doesn't have an \"apt-get\" command.</p>\n\n<p>The second error is because you also don't have wget.</p>\n\n<p>The rest of the messages indicate a poorly written script file, since it blew up twice and still went on to truncate files and do other things.</p>\n\n<p>While you're not going to be able to install apt-get, you might be able to find a compatible version of wget. If not, you can download whatever it was trying to get using your browser, since wget is typically used to automate web HTTP/HTTPS requests.</p>\n\n<p>Without seeing the file, I don't know what the rest if the script was trying to do, but if you read it you should be able to figure out what it was doing, and do it manually.</p>\n\n<p>An easier way to do all this is to <a href=\"https://www.virtualbox.org/wiki/Downloads\" rel=\"nofollow noreferrer\">install Virtualbox on your mac</a> and run a copy of Ubuntu inside a virtual machine. Then you can run your class assignments without needing to rewrite them all.</p>\n"}], "owner": {"reputation": 9, "user_id": 10567852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUPD1.png?s=128&g=1", "display_name": "Raskolnikov", "link": "https://stackoverflow.com/users/10567852/raskolnikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1540997592, "creation_date": 1540988044, "last_edit_date": 1540995591, "question_id": 53083102, "link": "https://stackoverflow.com/questions/53083102/c-library-problems-installing", "title": "C library problems installing", "body": "<p>I am a beginner C programmer, and recently I have run into a problem that I was unable to solve.</p>\n\n<p>I am struggling to install and use a C library. The message error is:</p>\n\n<p><img src=\"https://i.stack.imgur.com/HBTgK.jpg\" alt=\"enter image description here\"></p>\n\n<p>My OS is Mac OS X and im try install the file with \".command\" format. </p>\n\n<p><strong>Can someone help me install this library?</strong> </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1540987957, "post_id": 53082849, "comment_id": 93062827, "body": "scan a string and use <code>strcmp</code>."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540988146, "post_id": 53082849, "comment_id": 93062941, "body": "To make it a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> you could probably delete everything after the part with the <code>scanf</code> from your question. Adding code that is not related to the question is only distraction people."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 3, "creation_date": 1540988200, "post_id": 53082849, "comment_id": 93062971, "body": "Your code only shows the initial version with numbers. Please show us your effort where you try to read the words. Then we can see where you are stuck and what you need to change."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1540990587, "post_id": 53083192, "comment_id": 93064329, "body": "Note: <code>if (result % 2 == 1) {</code> is OK when <code>result &gt;= 0</code>, as in this case, yet <code>result % 2 == 1</code> is an incorrect test for odd-ness when <code>result &lt; 0</code>.  I&#39;d recommend  <code>if (result % 2) {</code> or its equivalent <code>if (result % 2 != 0) {</code>."}], "tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": true, "score": 0, "last_activity_date": 1540989452, "last_edit_date": 1540989452, "creation_date": 1540988366, "answer_id": 53083192, "question_id": 53082849, "link": "https://stackoverflow.com/questions/53082849/comparing-an-inputted-string-to-a-printed-function/53083192#53083192", "title": "comparing an inputted string to a printed function", "body": "<ol>\n<li>You should change <code>scanf_s</code> to <code>scanf</code></li>\n<li>The line <code>if (result == 1 || result == 3 ...</code> could be <code>if (result % 2 == 1) {</code></li>\n<li>You could use <code>strcmp</code> to solve your question</li>\n</ol>\n\n<p>The following <code>code</code> could work:</p>\n\n<pre><code>   //cho-han\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    srand(time(NULL));\n\n    int x = (rand() % 6) + 1;\n    int y = (rand() % 6) + 1;\n    int result = 0;\n    int guess = 0;\n    char buf[10];\n\n    printf(\"The values of two dice rolls will be added up. The aim is to guess whether that total number will be odd or even.\\n\");\n    printf(\"To guess odd, enter 'odd'. To guess even, enter 'even'.\\n\\n\");\n    printf(\"Please enter your guess for the combined total of the two dice rolls: \");\n\n    fgets(buf, sizeof buf, stdin);\n    if (strcmp(buf, \"even\\n\") == 0) {\n        guess = 2;\n        printf(\"\\nyour guess is even.\\n\");\n    } else if (strcmp(buf, \"odd\\n\") == 0) {\n        guess = 1;\n        printf(\"\\nyour guess is odd.\\n\");\n    } else {\n        printf(\"\\nInvalid guess.\\nYou lose!\\n\");\n        return 1;\n    }\n\n    printf(\"\\ndice roll 1 = %d\\n\", x);\n    printf(\"dice roll 2 = %d\\n\", y);\n    printf(\"\\ncombined total of both rolls is %d\", x + y);\n\n    result = (x + y) % 2;\n    if (result == 1)\n        printf(\"\\ncombined total of both rolls is odd.\\n\");\n    else\n        printf(\"\\ncombined total of both rolls is even.\\n\");\n\n    if (guess == result)\n        printf(\"\\nYou win!\\n\");\n    else\n        printf(\"\\nYou lose!\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 4511316, "user_type": "registered", "profile_image": "https://graph.facebook.com/538466671/picture?type=large", "display_name": "&#199;a\u011fkan Kasap", "link": "https://stackoverflow.com/users/4511316/%c3%87a%c4%9fkan-kasap"}, "is_accepted": false, "score": 0, "last_activity_date": 1541001802, "creation_date": 1541001802, "answer_id": 53087617, "question_id": 53082849, "link": "https://stackoverflow.com/questions/53082849/comparing-an-inputted-string-to-a-printed-function/53087617#53087617", "title": "comparing an inputted string to a printed function", "body": "<p>You need to change your guess to char type and scanf to capture string.</p>\n\n<pre><code>char guess[256];\nscanf(\"%s\", guess);\n</code></pre>\n\n<p>And then the best way would be to call toupper() and compare with your text using strcmp().</p>\n"}], "owner": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 53083192, "answer_count": 2, "score": 1, "last_activity_date": 1541001802, "creation_date": 1540987148, "question_id": 53082849, "link": "https://stackoverflow.com/questions/53082849/comparing-an-inputted-string-to-a-printed-function", "title": "comparing an inputted string to a printed function", "body": "<p>Below is a code I wrote for a dice game called cho han. To input your guess I've used number to represent the words 'odd' and 'even'. Since then I have tried to write it again, but to actually write odd or even in the scanf section, but can't get it to work. Any help would be appreciated :)</p>\n\n<pre><code>//cho-han\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\nsrand(time(NULL));\n\nint x = (rand() % 6) + 1;\nint y = (rand() % 6) + 1;\nint result = 0;\nint guess = 0;\n\nprintf(\"The values of two dice rolls will be added up. The aim is to guess whether that total number will be odd or even.\\n\");\nprintf(\"To guess odd, enter '1'. To guess even, enter '2'.\\n\\n\");\nprintf(\"Please enter your guess for the combined total of the two dice rolls: \");\n\nscanf_s(\"%d\", &amp;guess);\nif (guess == 2)\n{\n    printf(\"\\nyour guess is even.\\n\");\n}\nif (guess == 1)\n{\n    printf(\"\\nyour guess is odd.\\n\");\n}\nif (guess &gt; 2 || guess &lt; 1)\n{\n    printf(\"\\nInvalid guess.\\nYou lose!\\n\");\n    return (1);\n}\n\nprintf(\"\\ndice roll 1 = %d\\n\", x);\nprintf(\"dice roll 2 = %d\\n\", y);\n\nresult = x + y;\nprintf(\"\\ncombined total of both rolls is %d\", result);\n\nif (result == 1 || result == 3 || result == 5 || result == 7 || result == 9 || result == 11)\n{\n    printf(\"\\ncombined total of both rolls is odd.\\n\");\n}\nelse\n{\n    printf(\"\\ncombined total of both rolls is even.\\n\");\n\n}\n\nif (guess == 1 &amp;&amp; result == 1 || guess == 1 &amp;&amp; result == 3 || guess == 1 &amp;&amp; result == 5 || guess == 1 &amp;&amp; result == 7 || guess == 1 &amp;&amp; result == 9 || guess == 1 &amp;&amp; result == 11)\n{\n    printf(\"\\nYou win!\\n\");\n}\nelse if (guess == 2 &amp;&amp; result == 2 || guess == 2 &amp;&amp; result == 4 || guess == 2 &amp;&amp; result == 6 || guess == 2 &amp;&amp; result == 8 || guess == 2 &amp;&amp; result == 10 || guess == 2 &amp;&amp; result == 12)\n{ \n    printf(\"\\nYou win!\\n\");\n}\nelse\n{\n    printf(\"\\nYou lose!\\n\");\n}\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "answers": [{"tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1540986877, "creation_date": 1540986877, "answer_id": 53082751, "question_id": 53082677, "link": "https://stackoverflow.com/questions/53082677/what-is-each-curly-brace-standing-for-when-declaring-initializing-a-struct-war/53082751#53082751", "title": "What is each curly brace standing for when declaring/initializing a struct? (warning: missing braces around initializer [-Wmissing-braces])", "body": "<p>You have an <strong>array</strong> of <strong>structs</strong> containing <strong>arrays</strong>. Three pairs of braces.</p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 1, "last_activity_date": 1540986902, "creation_date": 1540986902, "answer_id": 53082763, "question_id": 53082677, "link": "https://stackoverflow.com/questions/53082677/what-is-each-curly-brace-standing-for-when-declaring-initializing-a-struct-war/53082763#53082763", "title": "What is each curly brace standing for when declaring/initializing a struct? (warning: missing braces around initializer [-Wmissing-braces])", "body": "<p>Each brace corresponds to the start of a subobject (an object inside an aggregate object, such as an array or structure).</p>\n\n<p><code>b[]</code> is an array, so the first brace introduces elements of the array.</p>\n\n<p>Each <code>b</code> is a structure, so the next brace introduces members of the structure.</p>\n\n<p>The member <code>a</code> inside <code>b</code> is an array, so the next braces introduces elements of that array.</p>\n"}, {"tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 5, "last_activity_date": 1540986958, "creation_date": 1540986958, "answer_id": 53082787, "question_id": 53082677, "link": "https://stackoverflow.com/questions/53082677/what-is-each-curly-brace-standing-for-when-declaring-initializing-a-struct-war/53082787#53082787", "title": "What is each curly brace standing for when declaring/initializing a struct? (warning: missing braces around initializer [-Wmissing-braces])", "body": "<pre><code>int a[2] = { 1, 2 };\n</code></pre>\n\n<p>Ok. Now this:</p>\n\n<pre><code>int a[2][2] = { { 1, 2 } , { 3, 4 } };\n</code></pre>\n\n<p>Right? <code>a[0][0] = 1</code> and <code>a[0][1] = 2</code> and <code>a[1][0] = 3</code> and <code>a[1][1] = 4</code>. <code>a[0]</code> is memcmp equal to <code>(int[]){ 1, 2 }</code> and <code>a[1]</code> is memcmp equal to <code>(int[]){ 3, 4 }</code>.</p>\n\n<p>Now this:</p>\n\n<pre><code>struct {\n     int a[2];\n} b = { { 1, 2 } };\n</code></pre>\n\n<p>So the first <code>{</code> <code>}</code> stand for structure initialization and the inner stand for <code>b.a</code> initialization. Now we make an array of structures:</p>\n\n<pre><code>struct b_s {\n     int a[2];\n} b[] = { \n      {\n         { 1, 2 },\n      },{ \n         { 3, 4, }\n      },\n};\n</code></pre>\n\n<p>So the first braces stand for array <code>b[]</code> initialization. The second one are for structure <code>b[0]</code> to initialize. The third one are to initialize the <code>b[0].a</code> array. </p>\n\n<p>The <code>b[0]</code> is memcmp equal to <code>&amp;(struct b_s){ {1, 2 } }</code>. The <code>b[0].a</code> is memcmp equal to <code>(int[2]){ 1, 2 }</code>. The <code>b[0].a[0]</code> is equal to <code>1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "is_accepted": false, "score": 1, "last_activity_date": 1540987046, "creation_date": 1540987046, "answer_id": 53082816, "question_id": 53082677, "link": "https://stackoverflow.com/questions/53082677/what-is-each-curly-brace-standing-for-when-declaring-initializing-a-struct-war/53082816#53082816", "title": "What is each curly brace standing for when declaring/initializing a struct? (warning: missing braces around initializer [-Wmissing-braces])", "body": "<p><code>{1,1,1,1,1}</code> - The five elements of an array.</p>\n\n<p><code>{{1,1,1,1,1}}</code> - That's how you initialize a struct with a field which is an array of five <code>int</code>s in this case.</p>\n\n<p><code>{{{1,1,1,1,1}}, {{2,2,2,2,2}}}</code> - This is an array of two elements. Where each element is an instance of a struct as mentioned above.</p>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1540987163, "creation_date": 1540987163, "answer_id": 53082858, "question_id": 53082677, "link": "https://stackoverflow.com/questions/53082677/what-is-each-curly-brace-standing-for-when-declaring-initializing-a-struct-war/53082858#53082858", "title": "What is each curly brace standing for when declaring/initializing a struct? (warning: missing braces around initializer [-Wmissing-braces])", "body": "<pre><code>static struct {\n    unsigned char a[5];\n} b[] = {                 // array b\n        {                 // struct\n        {                 // array a\n          1,1,1,1,1}},\n        {                 // another struct\n        {2,2,2,2,2}}\n};\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 3542317, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0bcd4261f819e40752819689af91de9b?s=128&d=identicon&r=PG&f=1", "display_name": "user3542317", "link": "https://stackoverflow.com/users/3542317/user3542317"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 53082787, "answer_count": 5, "score": 1, "last_activity_date": 1540987163, "creation_date": 1540986635, "question_id": 53082677, "link": "https://stackoverflow.com/questions/53082677/what-is-each-curly-brace-standing-for-when-declaring-initializing-a-struct-war", "title": "What is each curly brace standing for when declaring/initializing a struct? (warning: missing braces around initializer [-Wmissing-braces])", "body": "<p>I came across the following structure:    </p>\n\n<pre><code>static struct {\n    unsigned char a[5];\n} b[] = {       \n        {1,1,1,1,1},\n        {2,2,2,2,2}\n};\n</code></pre>\n\n<p>However, if it is being compiled I get the following warning  \"warning: missing braces around initializer [-Wmissing-braces]\".</p>\n\n<p>If I alter it like so:</p>\n\n<pre><code>static struct {\n    unsigned char a[5];\n} b[] = {       \n        {{1,1,1,1,1}},\n        {{2,2,2,2,2}}\n};\n</code></pre>\n\n<p>Then the warning is gone. What is each curly brace standing for after \"b[] = \" ?\nThe innermost curly braces are obviously? standing for the initialization of char a[5]. But what are the other braces standing for? Obviously? one of the other curly braces has to account for the structure array b[] but which one? And why is there, as it seems, a third curly brace neccessary and what is it standing for? This confuses me.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": true, "score": 3, "last_activity_date": 1540988758, "last_edit_date": 1540988758, "creation_date": 1540986448, "answer_id": 53082631, "question_id": 53082561, "link": "https://stackoverflow.com/questions/53082561/warning-makes-integer-from-pointer-without-a-cast/53082631#53082631", "title": "Warning makes integer from pointer without a cast", "body": "<p>You need to convert <code>ag[3]</code> (of type <code>char *</code> / string) to an integer.</p>\n\n<p>Have a look at <a href=\"https://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow noreferrer\"><code>strtol()</code></a> and its brethren. With <a href=\"https://en.cppreference.com/w/c/string/byte/atoi\" rel=\"nofollow noreferrer\"><code>atoi()</code></a> exists a simpler function, which however is not as robust and versatile. That is why I would recommend getting into the habit of using <code>strtol()</code> et al., always.</p>\n\n<p>Sidenote, \"<code>n</code>\" parameters are usually made <code>size_t</code> (unsigned) instead of <code>int</code>. (Compare <a href=\"https://en.cppreference.com/w/c/string/byte/strncmp\" rel=\"nofollow noreferrer\"><code>strncmp()</code></a>). You'd use <code>strtoul()</code> then.</p>\n"}, {"tags": [], "owner": {"reputation": 449, "user_id": 9131933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272423f6785184b9d180ef6a5bd16504?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/9131933/newbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1540986469, "creation_date": 1540986469, "answer_id": 53082637, "question_id": 53082561, "link": "https://stackoverflow.com/questions/53082561/warning-makes-integer-from-pointer-without-a-cast/53082637#53082637", "title": "Warning makes integer from pointer without a cast", "body": "<p>The last parameter of my_strncmp is defined as an int n, yet when it is called in main the third parameter is char * type</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 8445692, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0qdGAizmyBg/AAAAAAAAAAI/AAAAAAAABM0/HIpwLfLajLY/photo.jpg?sz=128", "display_name": "Gimantha Dissanayake", "link": "https://stackoverflow.com/users/8445692/gimantha-dissanayake"}, "is_accepted": false, "score": 0, "last_activity_date": 1540994964, "last_edit_date": 1540994964, "creation_date": 1540991802, "answer_id": 53084282, "question_id": 53082561, "link": "https://stackoverflow.com/questions/53082561/warning-makes-integer-from-pointer-without-a-cast/53084282#53084282", "title": "Warning makes integer from pointer without a cast", "body": "<p>in here,</p>\n\n<pre><code>int my_strncmp(char const *s1, char const *s2, int n);\n</code></pre>\n\n<p>the last part is <code>int n</code></p>\n\n<pre><code>result = my_strncmp(ag[1], ag[2], ag[3]);\n</code></pre>\n\n<p>but here what you are passing <code>ag[3]</code> is of type char</p>\n\n<p>hope this helps..</p>\n"}], "owner": {"reputation": 53, "user_id": 10445121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a20e4f40cfb9461bb3123b59bc6d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10445121/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 53082631, "answer_count": 3, "score": 0, "last_activity_date": 1540994964, "creation_date": 1540986258, "last_edit_date": 1540986458, "question_id": 53082561, "link": "https://stackoverflow.com/questions/53082561/warning-makes-integer-from-pointer-without-a-cast", "title": "Warning makes integer from pointer without a cast", "body": "<p>expected \u2018int\u2019 but argument is of type \u2018char *\u2019\ndont know how to correct, any suggestion</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint my_strncmp(char const *s1, char const *s2, int n);\n\nint main (int ac, char **ag) {\n    char result;\n\n    if (ac == 4) {\n        result = my_strncmp(ag[1], ag[2], ag[3]);\n        printf(\"%d\\n\", result);\n    }   \n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "if-statement", "while-loop", "conditional-statements"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1540985647, "post_id": 53082356, "comment_id": 93061603, "body": "What do you mean with &quot;better&quot;? Safer? Faster? More readable? Also, what is the type of <code>n</code>?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1540985770, "post_id": 53082356, "comment_id": 93061661, "body": "It would be better to check the return value of <code>scanf</code>, for one thing."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1540985771, "post_id": 53082356, "comment_id": 93061662, "body": "Is it possible for <code>n &gt;= 0</code> before the <code>while</code> loop? If not, you could turn it into an &quot;infinite&quot; loop and add a <code>break</code> inside the <code>if</code> block."}, {"owner": {"reputation": 15, "user_id": 10480767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9024daf07691e8bf793bc3661c8a2dc9?s=128&d=identicon&r=PG", "display_name": "user10480767", "link": "https://stackoverflow.com/users/10480767/user10480767"}, "edited": false, "score": 0, "creation_date": 1540985795, "post_id": 53082356, "comment_id": 93061672, "body": "n is an int. By &quot;better&quot; I mean eliminate the repeated condition in the if statement."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1540986111, "post_id": 53082356, "comment_id": 93061821, "body": "With optimization turned on, a decent compiler should optimize out the repeated condition, so it&#39;s probably not worth worrying about. The only other way to remove the repeated condition is to break out of an infinite loop."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540986214, "post_id": 53082356, "comment_id": 93061870, "body": "@EricPostpischil Well, for a <code>while</code> loop at least! :)"}], "answers": [{"tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1540986394, "creation_date": 1540986394, "answer_id": 53082606, "question_id": 53082356, "link": "https://stackoverflow.com/questions/53082356/if-statement-inside-while-loop-with-the-same-condition/53082606#53082606", "title": "If statement inside while loop with the same condition", "body": "<p>Simply rework your loop breaking when correct input is given. This way the check is done only one time:</p>\n\n<pre><code>while (1)\n{\n   printf(\"Enter a positive integer: \");\n   scanf(\"%d\", &amp;n);\n\n   if (n &gt;= 0)\n       break;\n\n   printf(\"Error: please enter a positive integer\\n\");\n}\n</code></pre>\n\n<p>And, as specified in comments, an optimized compiler should be able to reverse the loop by itself.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1540993192, "post_id": 53082638, "comment_id": 93066248, "body": "Upped. I make fairly frequent use of the second way (although I format it slightly differently; I write <code>switch (0) do {</code> on one line. ): I&#39;m not sure why you state that you ought not to use it."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 1, "last_activity_date": 1540987064, "last_edit_date": 1540987064, "creation_date": 1540986473, "answer_id": 53082638, "question_id": 53082356, "link": "https://stackoverflow.com/questions/53082356/if-statement-inside-while-loop-with-the-same-condition/53082638#53082638", "title": "If statement inside while loop with the same condition", "body": "<p>The following examples are presented in the spirit that people should know what is available in the language.<sup>1</sup> The way I would usually write the code is shown in <a href=\"https://stackoverflow.com/a/53082606/298225\">Frankie_C\u2019s answer</a>. As some have noted, optimization usually makes this simple case not worth worrying about, but the question is not limited to a simple evaluation like <code>n &lt; 0</code>; the test might be a function call to some expensive evaluation of more complicated criteria.</p>\n\n<p>Folks are not going to like this, but:</p>\n\n<pre><code>    goto middle;\n    do\n    {\n        printf(\"Error, please enter a positive integer\\n\");\nmiddle:\n        printf(\"Enter a positive integer: \");\n        scanf(\"%d\", &amp;n);\n    } while (n &lt; 0);\n</code></pre>\n\n<p>If you are vehemently opposed to <code>goto</code>, you can use a stripped-down version of <a href=\"https://en.wikipedia.org/wiki/Duff%27s_device\" rel=\"nofollow noreferrer\">Duff\u2019s device</a>:</p>\n\n<pre><code>    switch (0)\n    do\n    {\n        printf(\"Error, please enter a positive integer\\n\");\n    case 0:\n        printf(\"Enter a positive integer: \");\n        scanf(\"%d\", &amp;n);\n    } while (n &lt; 0);\n</code></pre>\n\n<p>But you should not.</p>\n\n<h1>Footnote</h1>\n\n<p><sup>1</sup> Commonly, software engineers will have to work with code written by others, so they must be prepared to recognize and understand anything expressible in the language, even if that is just a first step toward rewriting it into better code. And occasionally situations arise where \u201cugly\u201d code becomes desirable for commercial or other practical reasons.</p>\n"}, {"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1540986620, "creation_date": 1540986620, "answer_id": 53082671, "question_id": 53082356, "link": "https://stackoverflow.com/questions/53082356/if-statement-inside-while-loop-with-the-same-condition/53082671#53082671", "title": "If statement inside while loop with the same condition", "body": "<p>This is something that IMO is best accomplished with a bit of refactoring:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nstatic bool get_postive_integer(int *pOut) {\n    int n;\n    printf(\"Enter a positive integer: \");\n    scanf(\"%d\", &amp;n);\n\n    if(n &lt; 0)\n        return false;\n\n    *pOut = n;\n    return true;\n}\n\nint main(void)\n{\n   int n;\n   while (!get_postive_integer(&amp;n)) {\n       printf(\"Error: please enter a positive integer\\n\");\n   }\n}\n</code></pre>\n\n<p>Give the operation a <em>name</em>, check that it fails, and only then print a message accordingly. The success or failure condition is only coded once here, in the named operation.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1540987016, "creation_date": 1540987016, "answer_id": 53082805, "question_id": 53082356, "link": "https://stackoverflow.com/questions/53082356/if-statement-inside-while-loop-with-the-same-condition/53082805#53082805", "title": "If statement inside while loop with the same condition", "body": "<p>You could use:</p>\n\n<pre><code>while (printf(\"Enter a positive integer: \") &gt; 0 &amp;&amp;\n       scanf(\"%d\", &amp;n) == 1 &amp;&amp;\n       n &lt; 0)\n{\n    printf(\"Error: please enter a positive integer\\n\");\n}\n</code></pre>\n\n<p>This stops if the <code>printf()</code> fails, if the <code>scanf()</code> fails, or if the value in <code>n</code> is non-negative.  It's a good idea to always check that the <code>scanf()</code> succeeds.  It is merely convenient that <code>printf()</code> returns the number of characters it wrote (or a negative number on failure) so it can be used in a condition too.  You could add <code>fflush(stdout) == 0 &amp;&amp;</code> into the stack of operations too.</p>\n\n<p>Or you could decide that the code in the condition should be in a function:</p>\n\n<pre><code>static int read_positive_integer(void)\n{\n    int value;\n    if (printf(\"Enter a positive integer: \") &gt; 0 &amp;&amp;\n        fflush(stdout) == 0 &amp;&amp;\n        scanf(\"%d\", &amp;value) == 1 &amp;&amp;\n        value &gt;= 0)\n        return value;\n   return -1;\n}\n</code></pre>\n\n<p>and then the calling code is:</p>\n\n<pre><code>while ((n = read_positive_integer()) &lt; 0)\n    printf(\"Error: please enter a positive integer\\n\");\n</code></pre>\n\n<p>There are many variations on the theme; you might wrap the <code>while</code> loop into a function; you might make the prompts into parameters to the function.  You might decide to be more careful about reporting what goes wrong (different actions if <code>printf()</code> fails compared with what happens if <code>scanf()</code> returns 0 (non-numeric data in the input) or EOF (no more data in the input).</p>\n"}, {"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540996394, "post_id": 53084750, "comment_id": 93068424, "body": "You know... Eric is honest about using <code>goto</code>. This here just sneaks it in under the guise of something structured."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540996455, "post_id": 53084750, "comment_id": 93068463, "body": "@StoryTeller: The problem I have with a <code>goto</code> is as much related to the fact that it leaks a label into the translation unit as its runtime effect. The way I do it circumvents the former. And <code>switch (0) do</code> is a clear signal of some funky idiom."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540996518, "post_id": 53084750, "comment_id": 93068499, "body": "Not into the translation unit, into the function. Labels have function scope, so it won&#39;t leak anywhere global."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540996557, "post_id": 53084750, "comment_id": 93068524, "body": "@StoryTeller: In some ways I&#39;m happy I didn&#39;t know that. Has it always been that way? I used a <i>very</i> early version of C at university."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540996676, "post_id": 53084750, "comment_id": 93068599, "body": "Seems to be as old as <a href=\"http://port70.net/~nsz/c/c89/c89-draft.html#3.1.2.1\" rel=\"nofollow noreferrer\">C89</a>. I don&#39;t know if it was that way in K&amp;R though."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1540993532, "last_edit_date": 1540993532, "creation_date": 1540993103, "answer_id": 53084750, "question_id": 53082356, "link": "https://stackoverflow.com/questions/53082356/if-statement-inside-while-loop-with-the-same-condition/53084750#53084750", "title": "If statement inside while loop with the same condition", "body": "<p>Another alternative is to split into a function:</p>\n\n<pre><code>int func(){\n   int n;\n   printf(\"Enter a positive integer: \");\n   scanf(\"%d\", &amp;n);\n   return scanf(\"%d\", &amp;n) == 1 ? n : -1;\n}\n</code></pre>\n\n<p>and the loop becomes </p>\n\n<pre><code>while ((n = func()) &lt; 0){\n    printf(\"Error: please enter a positive integer\\n\");\n}\n</code></pre>\n\n<p>although the assignment in the condition check is not to everyone's taste. Note that I return -1 if the return value of <code>scanf</code> is not 1, something that you should always check.</p>\n\n<hr>\n\n<p>What I do though in this situation (See Eric's answer) is to write</p>\n\n<pre><code>switch (0) do {\n    printf(\"Error, please enter a positive integer\\n\");\ncase 0:\n    printf(\"Enter a positive integer: \");\n    scanf(\"%d\", &amp;n);\n} while (n/*ToDo - make sure n is initialised if scanf fails*/ &lt; 0);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10480767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9024daf07691e8bf793bc3661c8a2dc9?s=128&d=identicon&r=PG", "display_name": "user10480767", "link": "https://stackoverflow.com/users/10480767/user10480767"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 53082606, "answer_count": 5, "score": 0, "last_activity_date": 1540993532, "creation_date": 1540985515, "last_edit_date": 1540985828, "question_id": 53082356, "link": "https://stackoverflow.com/questions/53082356/if-statement-inside-while-loop-with-the-same-condition", "title": "If statement inside while loop with the same condition", "body": "<p>Is there a better way to write the following code by eliminating the repeated condition in the <code>if</code> statement in C?</p>\n\n<pre><code>while (n &lt; 0) {\n   printf(\"Enter a positive integer: \");\n   scanf(\"%d\", &amp;n);\n\n   if (n &lt; 0) {\n      printf(\"Error: please enter a positive integer\\n\");\n   }\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "file", "binary"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1540985200, "post_id": 53082143, "comment_id": 93061377, "body": "Notepad is a <i>text</i> editor. You see all the data you wrote with <code>fprintf</code> and then follows the binary data, which notepad cant show correctly to you."}, {"owner": {"reputation": 23, "user_id": 10585227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916354ce8146e8024b53a69787a07c3a?s=128&d=identicon&r=PG&f=1", "display_name": "abc18", "link": "https://stackoverflow.com/users/10585227/abc18"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1540986170, "post_id": 53082143, "comment_id": 93061845, "body": "@PaulOgilvie So how can I make sure that all the data have been read by the program?"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1540986547, "post_id": 53082143, "comment_id": 93062063, "body": "@abc18 - You should use fwrite with fread. OR you can use fprintf and fscanf. It does not make sense to use all four together."}, {"owner": {"reputation": 23, "user_id": 10585227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916354ce8146e8024b53a69787a07c3a?s=128&d=identicon&r=PG&f=1", "display_name": "abc18", "link": "https://stackoverflow.com/users/10585227/abc18"}, "reply_to_user": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1540987653, "post_id": 53082143, "comment_id": 93062676, "body": "@RishikeshRaje I know what you mean. But I wanted to print out the statements as well as read from the file."}, {"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1540991089, "post_id": 53082143, "comment_id": 93064678, "body": "I would say maybe a formatting mistake on last line of file reading... <code>fscanf(fr,&quot;Header version: %lf\\n&quot;, &amp;(read_data.header_version));</code> instead of <code>fscanf(fr,&quot;Header version: %lf\\n\\n\\n&quot;, &amp;(read_data.header_version));</code>. But not sure. Did not test it"}, {"owner": {"reputation": 23, "user_id": 10585227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916354ce8146e8024b53a69787a07c3a?s=128&d=identicon&r=PG&f=1", "display_name": "abc18", "link": "https://stackoverflow.com/users/10585227/abc18"}, "reply_to_user": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1540992283, "post_id": 53082143, "comment_id": 93065572, "body": "@PhoenixBlue Tried it and got the same result. I have even tried with different format specifiers (%e,%E, %g, %G) that are compatible with double type. Keep getting the same thing."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10585227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916354ce8146e8024b53a69787a07c3a?s=128&d=identicon&r=PG&f=1", "display_name": "abc18", "link": "https://stackoverflow.com/users/10585227/abc18"}, "edited": false, "score": 0, "creation_date": 1540995238, "post_id": 53084352, "comment_id": 93067645, "body": "Thank you for fixing the code. I finally found my mistake."}, {"owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "reply_to_user": {"reputation": 23, "user_id": 10585227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916354ce8146e8024b53a69787a07c3a?s=128&d=identicon&r=PG&f=1", "display_name": "abc18", "link": "https://stackoverflow.com/users/10585227/abc18"}, "edited": false, "score": 0, "creation_date": 1540995373, "post_id": 53084352, "comment_id": 93067746, "body": "You&#39;re very welcome. Please upvote and/or accept the answer if it has been useful."}, {"owner": {"reputation": 23, "user_id": 10585227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916354ce8146e8024b53a69787a07c3a?s=128&d=identicon&r=PG&f=1", "display_name": "abc18", "link": "https://stackoverflow.com/users/10585227/abc18"}, "edited": false, "score": 0, "creation_date": 1540996269, "post_id": 53084352, "comment_id": 93068347, "body": "Up-voting is not being accepted by the system for some reason so I have clicked on the tick to accept the answer as useful."}], "tags": [], "owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "is_accepted": true, "score": 2, "last_activity_date": 1540992885, "last_edit_date": 1540992885, "creation_date": 1540991974, "answer_id": 53084352, "question_id": 53082143, "link": "https://stackoverflow.com/questions/53082143/reading-data-from-a-binary-file-in-c/53084352#53084352", "title": "Reading data from a binary file in C", "body": "<p>you're writing the data struct in binary after the human readable version, but you're reading the binary data struct first and then the human readable version.\nIgnoring the fact that you're writing the information twice in the file (human readable, then binary), if you write/read in the same order it should work.</p>\n\n<p>Here is a 'fixed' version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct{\n  unsigned int sample_offset;\n  char receiver_name[20];\n  double sample_rate;\n  unsigned int channel;\n  unsigned int bits;\n  char file_type[11];\n  unsigned int freq_band;\n  double channlel_bandwidth;\n  double firmwire_version;\n  double header_version;\n} sampleInfo;\n\nint main(){\n  // Writing into the file                                                                                                                                                                                          \n  FILE * fw;\n  sampleInfo data = {64, \"Gadfly\", 51.2, 2, 4, \"Spreadsheet\", 1,24, 1.0,1.0 };\n  sampleInfo read_data;\n\n  fw = fopen(\"test.bin\",\"wb\");\n  if (!fw)\n    {\n      printf(\"Unable to open the file\\n\");\n      exit(1);\n    }\n  else\n    {\n      fprintf(fw,\"Sample offset: %u bytes\\n\\n\", data.sample_offset);\n      fprintf(fw,\"Receiver's name: %s\\n\\n\", data.receiver_name);\n      fprintf(fw,\"Sample rate: %.2lf Mega-samples per second\\n\\n\", data.sample_rate);\n      fprintf(fw,\"Number of channels used: %u\\n\\n\", data.channel);\n      fprintf(fw,\"Number of bits per I and Q sample: %u\\n\\n\", data.bits);\n      fprintf(fw,\"File type: %s\\n\\n\", data.file_type);\n      fprintf(fw,\"Frequency band per channel: L%u\\n\\n\",data.freq_band);\n      fprintf(fw,\"Channel Bandwidth: %.1lfMHz\\n\\n\", data.channlel_bandwidth);\n      fprintf(fw,\"Firm-wire version: %.1lf\\n\\n\",data.firmwire_version);\n      fprintf(fw,\"Header version: %.1lf\\n\\n\",data.header_version);\n      fwrite(&amp;data,sizeof(sampleInfo),1, fw);\n      fclose (fw);\n    }\n\n  // Reading from the file                                                                                                                                                                                          \n  FILE * fr;\n  fr = fopen(\"test.bin\", \"rb\");\n  if (!fr)\n    {\n      printf(\"Unable to open the file\\n\");\n      exit(1);\n    }\n  else\n    {\n      fscanf(fr,\"Sample offset: %u bytes\\n\\n\",&amp;(read_data.sample_offset));\n      fscanf(fr,\"Receiver's name: %s\\n\\n\", read_data.receiver_name);\n      fscanf(fr,\"Sample rate: %lf Mega-samples per second\\n\\n\", &amp;(read_data.sample_rate));\n      fscanf(fr,\"Number of channels used: %u\\n\\n\", &amp;(read_data.channel));\n      fscanf(fr,\"Number of bits per I and Q sample: %u\\n\\n\",&amp;(read_data.bits));\n      fscanf(fr,\"File type: %s\\n\\n\", read_data.file_type);\n      fscanf(fr,\"Frequency band per channel: L%u\\n\\n\", &amp;(read_data.freq_band));\n      fscanf(fr,\"Channel Bandwidth: %lf MHz\\n\\n\", &amp;(read_data.channlel_bandwidth));\n      fscanf(fr,\"Firm-wire version: %lf\\n\\n\", &amp;(read_data.firmwire_version));\n      fscanf(fr,\"Header version: %lf\\n\\n\", &amp;(read_data.header_version));\n      fread(&amp;read_data,sizeof(sampleInfo),1, fr);\n      fclose(fr);\n    }\n  return 0;\n}\n</code></pre>\n\n<p>For efficiency, get rid of the fprintf/fscanf lines and just keep the compact binary version. Open the file in notepad and verify it is not human readable. \nHere is the optimized binary version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct{\n  unsigned int sample_offset;\n  char receiver_name[20];\n  double sample_rate;\n  unsigned int channel;\n  unsigned int bits;\n  char file_type[11];\n  unsigned int freq_band;\n  double channlel_bandwidth;\n  double firmwire_version;\n  double header_version;\n} sampleInfo;\n\nint main(){\n  // Writing into the file                                                                                                                                                                                          \n  FILE * fw;\n  sampleInfo data = {64, \"Gadfly\", 51.2, 2, 4, \"Spreadsheet\", 1,24, 1.0,1.0 };\n  sampleInfo read_data;\n\n  fw = fopen(\"test.bin\",\"wb\");\n  if (!fw)\n    {\n      printf(\"Unable to open the file\\n\");\n      exit(1);\n    }\n  else\n    {\n      fwrite(&amp;data,sizeof(sampleInfo),1, fw);\n      fclose (fw);\n    }\n\n  // Reading from the file                                                                                                                                                                                          \n  FILE * fr;\n  fr = fopen(\"test.bin\", \"rb\");\n  if (!fr)\n    {\n      printf(\"Unable to open the file\\n\");\n      exit(1);\n    }\n  else\n    {\n      fread(&amp;read_data,sizeof(sampleInfo),1, fr);\n      printf(\"Sample offset: %u bytes\\n\\n\", read_data.sample_offset);\n      printf(\"Receiver's name: %s\\n\\n\", read_data.receiver_name);\n      printf(\"Sample rate: %.2lf Mega-samples per second\\n\\n\", read_data.sample_rate);\n      printf(\"Number of channels used: %u\\n\\n\", read_data.channel);\n      printf(\"Number of bits per I and Q sample: %u\\n\\n\", read_data.bits);\n      printf(\"File type: %s\\n\\n\", read_data.file_type);\n      printf(\"Frequency band per channel: L%u\\n\\n\", read_data.freq_band);\n      printf(\"Channel Bandwidth: %.1lfMHz\\n\\n\", read_data.channlel_bandwidth);\n      printf(\"Firm-wire version: %.1lf\\n\\n\", read_data.firmwire_version);\n      printf(\"Header version: %.1lf\\n\\n\", read_data.header_version);\n      fclose(fr);\n    }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10585227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916354ce8146e8024b53a69787a07c3a?s=128&d=identicon&r=PG&f=1", "display_name": "abc18", "link": "https://stackoverflow.com/users/10585227/abc18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1645, "favorite_count": 0, "accepted_answer_id": 53084352, "answer_count": 1, "score": 2, "last_activity_date": 1540993889, "creation_date": 1540984680, "last_edit_date": 1540993889, "question_id": 53082143, "link": "https://stackoverflow.com/questions/53082143/reading-data-from-a-binary-file-in-c", "title": "Reading data from a binary file in C", "body": "<p>I am new to C and trying to write some data into a binary file and read from it. There are character arrays and integers as the members of structure. When I run my code and open the binary file through notepad, I can only see the strings are being read by the program. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct{\n    unsigned int sample_offset;\n    char receiver_name[20];\n    double sample_rate;\n    unsigned int channel;\n    unsigned int bits;\n    char file_type[11];\n    unsigned int freq_band;\n    double channel_bandwidth;\n    double firmwire_version;\n    double header_version;\n}sampleInfo;\n\nint main(){\n    // Writing into the file\n    FILE * fw;\n    sampleInfo data = {64, \"Gadfly\", 51.2, 2, 4, \"Spreadsheet\", 1,24, 1.0,1.0 }, read_data;\n\n    fw = fopen(\"test.bin\",\"wb\"); \n    if (!fw)\n    {\n        printf(\"Unable to open the file\\n\");\n        exit(1);\n    }\n    else{\n        fprintf(fw,\"Sample offset: %u bytes\\n\\n\", data.sample_offset)\n        fprintf(fw,\"Receiver's name: %s\\n\\n\", data.receiver_name);\n        fprintf(fw,\"Sample rate: %.2lf Mega-samples per second\\n\\n\", data.sample_rate);\n        fprintf(fw,\"Number of channels used: %u\\n\\n\", data.channel);\n        fprintf(fw,\"Number of bits per I and Q sample: %u\\n\\n\", data.bits);\n        fprintf(fw,\"File type: %s\\n\\n\", data.file_type);\n        fprintf(fw,\"Frequency band per channel: L%u\\n\\n\",data.freq_band);\n        fprintf(fw,\"Channel Bandwidth: %.1lfMHz\\n\\n\", data.channel_bandwidth);\n        fprintf(fw,\"Firm-wire version: %.1lf\\n\\n\",data.firmwire_version);\n        fprintf(fw,\"Header version: %.1lf\\n\\n\",data.header_version);\n    }\n    fwrite(&amp;data,sizeof(sampleInfo),1, fw); \n    fclose (fw); \n\n    // Reading from the file\n    FILE * fr;\n    fr = fopen(\"test.bin\", \"rb\"); \n    if (! fr){\n        printf(\"Unable to open the file\\n\");\n        exit(1);\n    }\n    else\n    {\n        fread(&amp;read_data,sizeof(sampleInfo),1, fr); \n        fscanf(fr,\"Sample offset: %u bytes\\n\", &amp;(read_data.sample_offset));\n        fscanf(fr,\"Receiver's name: %s\\n\", read_data.receiver_name);\n        fscanf(fr,\"Sample rate: %lf Mega-samples per second\\n\", &amp;(read_data.sample_rate));\n        fscanf(fr,\"Number of channels used: %u\\n\", &amp;(read_data.channel));\n        fscanf(fr,\"Number of bits per I and Q sample: %u\\n\",&amp;(read_data.bits));\n        fscanf(fr,\"File type: %s\\n\", read_data.file_type);\n        fscanf(fr,\"Frequency band per channel: L%u\\n\", &amp;(read_data.freq_band));\n        fscanf(fr,\"Channel Bandwidth: %lf MHz\\n\", &amp;(read_data.channel_bandwidth));\n        fscanf(fr,\"Firm-wire version: %lf\\n\", &amp;(read_data.firmwire_version));\n        fscanf(fr,\"Header version: %lf\\n\\n\\n\", &amp;(read_data.header_version));\n    }\n    fclose(fr); \n    return 0;\n}\n</code></pre>\n\n<p>And this is what I am getting as output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xm8bo.png\" rel=\"nofollow noreferrer\">Output</a></p>\n\n<p>I can't figure out why the program is showing only the print statements as output and not reading all the data from the file properly. I have tried using the fread() function outside the else statement as well and got the same result.</p>\n\n<p>Any suggestions? </p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1540987825, "post_id": 53081711, "comment_id": 93062768, "body": "I rolled back the edit, as it tries to add an answer to the question (which is not how Stack Overflow works). It was also wrong: A pointer is a valid argument for <code>sizeof</code>."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 8807932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9858abf46f35cb7cb47666ab28c4feb4?s=128&d=identicon&r=PG&f=1", "display_name": "MadsRC", "link": "https://stackoverflow.com/users/8807932/madsrc"}, "edited": false, "score": 0, "creation_date": 1540987346, "post_id": 53082034, "comment_id": 93062520, "body": "Thank you! Why is it that you call <code>sizeof(buffer)&#47;sizeof(buffer[0])</code> instead of just <code>sizeof(buffer)</code>? Edit: I just found the answer here: <a href=\"https://stackoverflow.com/questions/35020540/how-and-why-sizeofa-sizeofa0-in-c-is-used-to-calculate-the-number-of-eleme\" title=\"how and why sizeofa sizeofa0 in c is used to calculate the number of eleme\">stackoverflow.com/questions/35020540/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541019189, "post_id": 53082034, "comment_id": 93080376, "body": "<code>sizeof(buffer)</code> is <code>sizeof(TCHAR) * 256</code>. <code>sizeof(TCHAR)</code> is 2 for UNICODE, so <code>sizeof(buffer)</code> is 512 bytes. You need to pass the number of <code>TCHAR</code> elements to <code>GetComputerNameEx()</code>, not the number of bytes, so you need to pass 256 and not 512"}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 1, "last_activity_date": 1540984327, "creation_date": 1540984327, "answer_id": 53082034, "question_id": 53081711, "link": "https://stackoverflow.com/questions/53081711/why-is-getcomputernameex-not-fill-buffer-with-data/53082034#53082034", "title": "Why is GetComputerNameEx not fill buffer with data", "body": "<p>in the function <code>getname</code></p>\n\n<pre><code>BOOL getName(int num, LPWSTR buffer) {\n    DWORD size = sizeof(buffer);\n    ....\n</code></pre>\n\n<p><code>buffer</code> is of type <code>LPWSTR</code> which is essentially a pointer to <code>w_char</code></p>\n\n<p>In the function, the parameter <code>buffer</code> will decay to a pointer. The <code>sizeof</code> operator will return the size of pointers in your system. Typically 4 or 8. The call to <code>GetComputerNameEx</code> gets wrong parameters.</p>\n\n<p>You need to modify the function to take the parameter of size as input</p>\n\n<pre><code>BOOL getName(int num, LPWSTR buffer, int size) {\n    return GetComputerNameEx((COMPUTER_NAME_FORMAT)num, buffer, &amp;size);\n}\n</code></pre>\n\n<p>Call it with.</p>\n\n<pre><code>TCHAR buffer[256];\ngetName((COMPUTER_NAME_FORMAT)1, buffer,sizeof(buffer)/sizeof(buffer[0]));\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 8807932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9858abf46f35cb7cb47666ab28c4feb4?s=128&d=identicon&r=PG&f=1", "display_name": "MadsRC", "link": "https://stackoverflow.com/users/8807932/madsrc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "closed_date": 1540984292, "accepted_answer_id": 53082034, "answer_count": 1, "score": 0, "last_activity_date": 1540987719, "creation_date": 1540983374, "last_edit_date": 1540987719, "question_id": 53081711, "link": "https://stackoverflow.com/questions/53081711/why-is-getcomputernameex-not-fill-buffer-with-data", "closed_reason": "Duplicate", "title": "Why is GetComputerNameEx not fill buffer with data", "body": "<p>Given the below code snippet, can anyone tell me why line 17 only prints \"Name:\"?</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;stdio.h&gt;\n#pragma comment(lib, \"Ws2_32.lib\")\n\n// Caller supplies function with a buffer to copy the name into as\n// mentioned by nobugz here: https://social.msdn.microsoft.com/Forums/en-US/6547d2bf-2884-4ad2-b600-adaab0fa1031/warning-c4172-returning-address-of-local-variable-or-temporary?forum=Vsexpressvc\nBOOL getName(int num, LPWSTR buffer) {\n    DWORD size = sizeof(buffer);\n    return GetComputerNameEx((COMPUTER_NAME_FORMAT)num, buffer, &amp;size);\n}\n\nvoid main(int argc, char ** argv) {\n    printf(\"%s\\n\", \"RAT POC RUNNING\");\n\n    TCHAR buffer[256];\n    getName((COMPUTER_NAME_FORMAT)1, buffer);\n    printf(\"Name: %ws\\n\", buffer);\n\n    TCHAR hostName[MAX_COMPUTERNAME_LENGTH + 1];\n    DWORD hNsize = sizeof(hostName) / sizeof(hostName[0]);\n    GetComputerNameEx((COMPUTER_NAME_FORMAT)1, hostName, &amp;hNsize);\n    printf(\"Hostname: %ws\\n\", hostName);\n\n    TCHAR domainName[MAX_COMPUTERNAME_LENGTH + 1];\n    DWORD dNsize = sizeof(domainName) / sizeof(domainName[0]);\n    GetComputerNameEx((COMPUTER_NAME_FORMAT)2, domainName, &amp;dNsize);\n    printf(\"Domain name: %ws\\n\", domainName);\n  }\n</code></pre>\n\n<p>By setting a breakpoint at line 17, I find that the <code>buffer</code> variable contains 256 entries of the value 52428, which I suspect is because I'm doing this in unicode. But I'm not sure why the GetComputerNameEx isn't filling said buffer with the actual name? Line 22, which calls the same GetComputerNameEx returns the correct name.</p>\n"}, {"tags": ["c", "systems-programming", "dup2"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10127456, "user_type": "registered", "profile_image": "https://graph.facebook.com/489596051476575/picture?type=large", "display_name": "whitehat", "link": "https://stackoverflow.com/users/10127456/whitehat"}, "edited": false, "score": 0, "creation_date": 1540993314, "post_id": 53083985, "comment_id": 93066332, "body": "Does write() function also have IO buffer?  and I am wondering when the IO buffer will be empty in printf() function."}, {"owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "reply_to_user": {"reputation": 63, "user_id": 10127456, "user_type": "registered", "profile_image": "https://graph.facebook.com/489596051476575/picture?type=large", "display_name": "whitehat", "link": "https://stackoverflow.com/users/10127456/whitehat"}, "edited": false, "score": 1, "creation_date": 1540994842, "post_id": 53083985, "comment_id": 93067397, "body": "@whitehat IO buffer just for Standard IO, like <code>printf</code>, <code>fputs</code>  and so on. <code>write</code>, <code>read</code> is system call."}, {"owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "reply_to_user": {"reputation": 63, "user_id": 10127456, "user_type": "registered", "profile_image": "https://graph.facebook.com/489596051476575/picture?type=large", "display_name": "whitehat", "link": "https://stackoverflow.com/users/10127456/whitehat"}, "edited": false, "score": 1, "creation_date": 1541059939, "post_id": 53083985, "comment_id": 93090719, "body": "@whitehat I have added a detailed explanation."}, {"owner": {"reputation": 63, "user_id": 10127456, "user_type": "registered", "profile_image": "https://graph.facebook.com/489596051476575/picture?type=large", "display_name": "whitehat", "link": "https://stackoverflow.com/users/10127456/whitehat"}, "edited": false, "score": 0, "creation_date": 1541070374, "post_id": 53083985, "comment_id": 93095520, "body": "Thank you. it was really helpful to me"}], "tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": true, "score": 3, "last_activity_date": 1541059803, "last_edit_date": 1541059803, "creation_date": 1540990874, "answer_id": 53083985, "question_id": 53081582, "link": "https://stackoverflow.com/questions/53081582/when-using-different-file-descripter-why-is-the-result-different-system-progr/53083985#53083985", "title": "when using different file descripter, why is the result different? (system programming)", "body": "<p>explain:</p>\n\n<p>IO buffer have three types <code>full buffer</code>, <code>line buffer</code> and <code>no buffer</code>.</p>\n\n<p>First example:</p>\n\n<p>Default, <code>stdout</code> is <code>line buffer</code>, means when the buffer is fulled or when meet <code>\\n</code>, buffer will flush.</p>\n\n<pre><code>int main(void){\n    char buf1[BUFSIZ] = \"I am low\\n\";\n    printf(\"i am high\\n\");\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    return 0;\n}\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>i am high\nI am low\nI am low\nI am low\n</code></pre>\n\n<p>But when we change it to :</p>\n\n<pre><code>int main(void){\n    char buf1[BUFSIZ] = \"I am low\\n\";\n    printf(\"i am high\");   // no '\\n'\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>I am low\nI am low\nI am low\ni am high\n</code></pre>\n\n<p>continue : change to :</p>\n\n<pre><code>int main(void){\n    char buf1[BUFSIZ] = \"I am low\\n\";\n    printf(\"i am high\"); // no '\\n'\n    fflush(stdout);// flush\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>i am highI am low\nI am low\nI am low\n</code></pre>\n\n<p>Second example:</p>\n\n<p>Default, <code>file IO</code> is <code>full buffer</code>, means when the buffer is fulled, buffer will flush.</p>\n\n<pre><code>int main(void){\n    int fd = open(\"dupout\",O_CREAT | O_WRONLY, 0655);\n    char buf1[BUFSIZ] = \"I am low\\n\";\n    dup2(fd, 1);\n\n    printf(\"i am high\\n\");\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    close(fd);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>I am low\nI am low\nI am low\ni am high\n</code></pre>\n\n<p>But when we change it to :</p>\n\n<pre><code>int main(void){\n    int fd = open(\"dupout\",O_CREAT | O_WRONLY, 0655);\n    char buf1[BUFSIZ] = \"I am low\\n\";\n    dup2(fd, 1);\n\n    printf(\"i am high\\n\");\n    fflush(stdout);\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    close(fd);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>i am high\nI am low\nI am low\nI am low\n</code></pre>\n\n<hr>\n\n<pre><code>          old\n</code></pre>\n\n<p>Because of IO buffer. If you add <code>setvbuf(stdout, NULL, _IONBF, 0);</code> before <code>printf</code>, result is right. The line means set no IO buffer.</p>\n\n<p>The following is all <code>code</code>:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void){\n    int fd = open(\"dupout\",O_CREAT | O_WRONLY, 0655);\n    char buf1[BUFSIZ] = \"I am low\\n\";\n    dup2(fd, 1);\n\n    setvbuf(stdout, NULL, _IONBF, 0);\n    printf(\"i am high\\n\");\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    close(fd);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10127456, "user_type": "registered", "profile_image": "https://graph.facebook.com/489596051476575/picture?type=large", "display_name": "whitehat", "link": "https://stackoverflow.com/users/10127456/whitehat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 53083985, "answer_count": 1, "score": 2, "last_activity_date": 1541059803, "creation_date": 1540982934, "last_edit_date": 1540992900, "question_id": 53081582, "link": "https://stackoverflow.com/questions/53081582/when-using-different-file-descripter-why-is-the-result-different-system-progr", "title": "when using different file descripter, why is the result different? (system programming)", "body": "<p>I am studying about file descripter and realized that if I use <code>dup2()</code> function,\nthe result will be different.</p>\n\n<p>The first snippet ...</p>\n\n<pre><code>int main(void){\n    char buf1[BUFSIZ] = \"I am low\\n\";\n\n    printf(\"i am high\\n\");\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n\n    return 0;\n}\n</code></pre>\n\n<p>... produces the following result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>i am high\ni am low \ni am low\ni am low\n</code></pre>\n\n<p>But the second snippet ...</p>\n\n<pre><code>int main(void){\n    int fd = open(\"dupout\",O_CREAT | O_WRONLY, 0655);\n    char buf1[BUFSIZ] = \"I am low\\n\";\n    dup2(fd, 1);\n\n    printf(\"i am high\\n\");\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    write(1, buf1, strlen(buf1));\n    close(fd);\n\n    return 0;\n}\n</code></pre>\n\n<p>... produces the following content in <code>dupout</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>i am low \ni am low\ni am low\ni am high\n</code></pre>\n\n<p>Why do the results differ?</p>\n"}, {"tags": ["c", "linux", "virtualbox"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 5, "creation_date": 1540984422, "post_id": 53081264, "comment_id": 93060925, "body": "It might be caused by some internal correction of clock drift. I suspected that <code>gettimeofday()</code> might not grant to be a monotonic clock and googled a bit. It seems my feeling was right: <a href=\"https://blog.habets.se/2010/09/gettimeofday-should-never-be-used-to-measure-time.html\" rel=\"nofollow noreferrer\">gettimeofday() should never be used to measure time</a>. To find more about this (and what to do against), please, google &quot;gettimeofday monotonic&quot; or &quot;linux monotonic clock&quot;."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1540996163, "post_id": 53081264, "comment_id": 93068273, "body": "Use <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/gettimeofday.html\" rel=\"nofollow noreferrer\"><code>clock_gettime()</code> instead</a>: <code>gettimeofday()</code> is obsolescent."}, {"owner": {"reputation": 814, "user_id": 3574571, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1CulI.jpg?s=128&g=1", "display_name": "Mquinteiro", "link": "https://stackoverflow.com/users/3574571/mquinteiro"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1540997460, "post_id": 53081264, "comment_id": 93069152, "body": "@Scheff clock_gettime with CLOCK_MONOTONIC/CLOCK_MONOTONIC_RAW looks to be way to do a correct time operations."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1540997763, "post_id": 53081264, "comment_id": 93069374, "body": "@Mquinteiro I didn&#39;t look for a duplicate nor did anybody else complain. The latter let me think it would be worth a <a href=\"https://stackoverflow.com/help/self-answer\">self answer</a>."}, {"owner": {"reputation": 814, "user_id": 3574571, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1CulI.jpg?s=128&g=1", "display_name": "Mquinteiro", "link": "https://stackoverflow.com/users/3574571/mquinteiro"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1541002596, "post_id": 53081264, "comment_id": 93072656, "body": "@Scheff it is very close to be a duplicated, <a href=\"https://stackoverflow.com/questions/4801122/how-to-stop-time-from-running-backwards-on-linux/4801176#4801176\" title=\"how to stop time from running backwards on linux\">stackoverflow.com/questions/4801122/&hellip;</a>"}, {"owner": {"reputation": 814, "user_id": 3574571, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1CulI.jpg?s=128&g=1", "display_name": "Mquinteiro", "link": "https://stackoverflow.com/users/3574571/mquinteiro"}, "edited": false, "score": 0, "creation_date": 1541002639, "post_id": 53081264, "comment_id": 93072688, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4801122/how-to-stop-time-from-running-backwards-on-linux\">How to stop time from running backwards on Linux?</a>"}, {"owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "edited": false, "score": 0, "creation_date": 1541005174, "post_id": 53081264, "comment_id": 93074051, "body": "What is <code>sizeof(long)</code>? Is it enough to hold the seconds since the Epoch times 1000?"}], "owner": {"reputation": 814, "user_id": 3574571, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1CulI.jpg?s=128&g=1", "display_name": "Mquinteiro", "link": "https://stackoverflow.com/users/3574571/mquinteiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1540996031, "creation_date": 1540981859, "last_edit_date": 1540996031, "question_id": 53081264, "link": "https://stackoverflow.com/questions/53081264/gettimeofday-returns-inaccurate-result", "title": "gettimeofday returns inaccurate result", "body": "<p>I'm having a very strange issue. I'm using <code>gettimeofday</code> to control timeouts in an I/O library. I have isolated the problem that a second call to <code>gettimeofday</code> returns a earlier time than first.</p>\n\n<p>I've done a simple test demo that reveals the problem. It only happens in a virtualized machine (virtualbox) that runs Ubuntu 18.04.1 LTS.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/time.h&gt;\n\nunsigned long GetTickCount()\n{\n    struct timeval start, end;\n    unsigned long myTickCount;\n    gettimeofday(&amp;start, NULL);\n    myTickCount =start.tv_sec*1000+start.tv_usec/1000;\n    return myTickCount;\n}\n\n\nmain()\n{\n        unsigned long a,b;\n        while(1) {\n                a=GetTickCount();\n                usleep(100000);\n                b=GetTickCount();\n                if(a&gt;b)\n                        printf(\"a: %ld, b:%ld, b-a=%ld\\r\\n\",a,b,b-a);\n        }\n}\n</code></pre>\n\n<p>When I run the code I get things like:</p>\n\n<pre><code>a: 1540980716756, b:1540980716090, b-a=-666\na: 1540980748208, b:1540980747542, b-a=-666\na: 1540980779740, b:1540980779074, b-a=-666\na: 1540980811180, b:1540980810513, b-a=-667\na: 1540980842713, b:1540980842047, b-a=-666\na: 1540980874153, b:1540980873487, b-a=-666\n</code></pre>\n\n<p>If you check it carefully you will see that the glitch is every 31.5s. </p>\n\n<p>Some hint about what's happening? \nIs it a kind of clock drift adjusted by virtualbox?</p>\n"}, {"tags": ["c", "netbeans"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1540981861, "post_id": 53081226, "comment_id": 93059576, "body": "please code in the question, not as external link/image"}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1540982154, "creation_date": 1540982154, "answer_id": 53081353, "question_id": 53081226, "link": "https://stackoverflow.com/questions/53081226/pow-used-to-calculate-lengths-of-triangles/53081353#53081353", "title": "pow used to calculate lengths of triangles", "body": "<p>You are using (1/2) as exponent in your call to the function <code>pow</code>. This is integer division and the result of 1/2 is 0. So this will not give you the square root.</p>\n\n<p>Use 0.5 instead as exponent in the call to <code>pow</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10517094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/944c4e72509c0aba26295b0ff7b86641?s=128&d=identicon&r=PG&f=1", "display_name": "user10517094", "link": "https://stackoverflow.com/users/10517094/user10517094"}, "is_accepted": false, "score": 1, "last_activity_date": 1540986756, "last_edit_date": 1540986756, "creation_date": 1540986348, "answer_id": 53082597, "question_id": 53081226, "link": "https://stackoverflow.com/questions/53081226/pow-used-to-calculate-lengths-of-triangles/53082597#53082597", "title": "pow used to calculate lengths of triangles", "body": "<p>(1/2) will give you an integer value. and you need double. \nyou can use one of the following ways to avoid this situation. </p>\n\n<pre><code>(1.0/2)        // (double/int) = double  \n               // or (1/2.0)  \n\n((double)1/2)  // 0.50000 \n               // or ((double)1/(double)2) \n</code></pre>\n\n<p>Useful links :</p>\n\n<p><a href=\"https://www.tutorialspoint.com/cprogramming/c_type_casting.htm\" rel=\"nofollow noreferrer\">C - Type Casting</a></p>\n\n<p><a href=\"https://developerinsider.co/type-casting-c-programming/\" rel=\"nofollow noreferrer\">Type Casting - C Programming</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10585234, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1Dn8ELzNkVQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDzSQIx-u5-D0KVsCtBFzhL5-UjDQ/mo/photo.jpg?sz=128", "display_name": "Karoli5050", "link": "https://stackoverflow.com/users/10585234/karoli5050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1541018205, "answer_count": 2, "score": -5, "last_activity_date": 1540986756, "creation_date": 1540981745, "question_id": 53081226, "link": "https://stackoverflow.com/questions/53081226/pow-used-to-calculate-lengths-of-triangles", "closed_reason": "Not suitable for this site", "title": "pow used to calculate lengths of triangles", "body": "<p>I\u00b4m programming in c and I'm using Netbeans IDE.</p>\n\n<p>I'm trying to calculate the length of the sides of two triangles from their vertexes.  However, when I try to use pow to calculate a square root, I get an error. I\u00b4ve included  and when I use for example pow(2,2), it works. It's just this specific example that doesn't work. I've checked the parentheses like five times and they seem correct to me. </p>\n\n<p><a href=\"https://i.stack.imgur.com/d7x8F.png\" rel=\"nofollow noreferrer\">my code looks like this</a></p>\n\n<p>(Don't mind the other variables, so far I'm just working with a1, a2, b1, b2 and c.)</p>\n"}, {"tags": ["c", "clion", "eof"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540981287, "post_id": 53081054, "comment_id": 93059248, "body": "I know that Mac systems are a little special, but are you sure that the end-of-file keyboard sequence really is <code>CMD-D</code> and not the POSIX standard <code>Ctrl-D</code>?"}, {"owner": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540981355, "post_id": 53081054, "comment_id": 93059282, "body": "On CLion Preferences -&gt; Keymap shows me that EOF command is executed via <code>CMD + D</code>"}], "owner": {"reputation": 1266, "user_id": 8035711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54251e31927388d864e8f2fc49fdce27?s=128&d=identicon&r=PG", "display_name": "keser", "link": "https://stackoverflow.com/users/8035711/keser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540981307, "creation_date": 1540981125, "last_edit_date": 1540981307, "question_id": 53081054, "link": "https://stackoverflow.com/questions/53081054/clion-mac-eof-possible-bug", "title": "CLion Mac EOF Possible Bug", "body": "<p>I have written a simple input line counter code and trying to run it on CLion but when I try to put <code>EOF</code> with <code>CMD + D</code>(from the CLion Keymap) program ends without either errors or results. However, I can execute the same code via Terminal (<code>EOF</code> with <code>ctrl + d</code>) and run it properly. I have seen examples of this question but not a satisfying answer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int n1,c;\n    n1 =0;\n\n    while ((c = getchar()) != EOF){\n        if(c == '\\n'){\n            ++n1;\n        }\n    }\n    printf(\"n1 : %d \\n\", n1);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1540978358, "post_id": 53080187, "comment_id": 93057645, "body": "Whenever it should take a new number, loop through the array to see if that value is already there, and if it is, don&#39;t add the new number. There&#39;s not much else to say if you&#39;re not going to show us some code (you can edit your question and insert some code)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1540978377, "post_id": 53080187, "comment_id": 93057658, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please read <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540978411, "post_id": 53080187, "comment_id": 93057686, "body": "As for your problem, you might want to do some research about <a href=\"https://en.wikipedia.org/wiki/Set_(abstract_data_type)\" rel=\"nofollow noreferrer\"><i>sets</i></a>."}, {"owner": {"reputation": 1, "user_id": 10570822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32c9b27e05a225e58017e305b1573ff9?s=128&d=identicon&r=PG&f=1", "display_name": "How", "link": "https://stackoverflow.com/users/10570822/how"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1540978578, "post_id": 53080187, "comment_id": 93057770, "body": "@Blaze I already posted my code so far..."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1540979237, "post_id": 53080187, "comment_id": 93058124, "body": "<code>do { &#47;* read a number into a temporary variable (tmp) *&#47; } while (isunique(tmp, user_nums, x) &amp;&amp; (1 &lt;= tmp) &amp;&amp; (tmp &lt;= 42)); user_nums[x] = tmp;</code> ... writing the function <code>isunique()</code> is left as an exercise :)"}], "answers": [{"comments": [{"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "edited": false, "score": 0, "creation_date": 1540983132, "post_id": 53080712, "comment_id": 93060270, "body": "What if the size of <code>user_num</code> is <code>10000</code>?"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "edited": false, "score": 1, "creation_date": 1540988175, "post_id": 53080712, "comment_id": 93062955, "body": "@DavideSpataro: I try to answer only what is asked. Since the OP did not ask for any sort of efficiency or about handling huge no of inputs, I did not address those. I made minimal changes to his program so that he can easily relate to the solution."}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1540979979, "creation_date": 1540979979, "answer_id": 53080712, "question_id": 53080187, "link": "https://stackoverflow.com/questions/53080187/no-repeating-values-in-array/53080712#53080712", "title": "no repeating values in array", "body": "<p>First, initialize the array, so that  you do not end up reading an uninitialized value and fail the test.</p>\n\n<pre><code>int user_nums[6] = {0};\n</code></pre>\n\n<p>Next, you need to have another check in the <code>for</code> loop, to read the number again if it is a duplicate.  </p>\n\n<p>The code will look like this.  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(){\n    int x,y;\n    int exists = 0;\n    int user_nums[6] = {0};\n    for( x = 0; x&lt;6;x++){//for loop  to get the players selected numbers    \n\n        do {\n            exists = 0;\n            printf(\"Enter a number(from the #'s 1-42): \");\n            scanf(\"%d\",&amp;user_nums[x]);\n\n            for(y =0; y &lt; x; y++) { //to check for duplicates\n                if (user_nums[x] == user_nums[y])\n                {   \n                    printf(\"Number already exists\\n \");\n                    exists = 1;             \n                    break;\n                }\n            }\n\n        }while (user_nums[x]&lt;1 || user_nums[x]&gt;42 || exists);//accepts only numbers from 1-42 which are not duplicates (continous to ask you for a number until condition is met).\n    }\n\n    printf(\"Your numbers: \\n\");\n\n    for( x=0;x&lt;6;x++){\n        printf(\"%d \",user_nums[x]); // prints the numbers you inputed.\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1540980251, "creation_date": 1540980251, "answer_id": 53080794, "question_id": 53080187, "link": "https://stackoverflow.com/questions/53080187/no-repeating-values-in-array/53080794#53080794", "title": "no repeating values in array", "body": "<p>The following <code>code</code> could work in O(n):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int user_nums[6];\n    int index[50];\n\n    for (int i = 0; i != sizeof(index) / sizeof(index[0]); ++i)\n        index[i] = -1;\n\n    for (int i = 0; i &lt; sizeof(user_nums) / sizeof(user_nums[0]); ++i) {\n        for (;;) {\n            printf(\"Enter a number(from the #'s 1-42): \");\n            scanf(\"%d\", user_nums + i);\n            if (user_nums[i] &lt; 1 || user_nums[i] &gt; 42) {\n                printf(\"wrong number\\n\");\n                continue;\n            }\n            if (index[user_nums[i]] != -1) {\n                printf(\"dump number\\n\");\n                continue;\n            }\n            index[user_nums[i]] = i;\n            break;\n        }\n    }\n\n    printf(\"Your numbers: \\n\");\n\n    for(int i = 0; i &lt; 6; ++i)\n        printf(\"%d \", user_nums[i]);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10570822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32c9b27e05a225e58017e305b1573ff9?s=128&d=identicon&r=PG&f=1", "display_name": "How", "link": "https://stackoverflow.com/users/10570822/how"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1541420502, "creation_date": 1540978251, "last_edit_date": 1541420502, "question_id": 53080187, "link": "https://stackoverflow.com/questions/53080187/no-repeating-values-in-array", "title": "no repeating values in array", "body": "<p>I need to make a program that stores numbers inside of an array. But it  must have no duplicate elements.</p>\n\n<pre><code>  int x;\n  int z[8];\n\n  for( x = 0; x&lt;8;x++) \n      printf(\"number: \");\n      scanf(\"%d\",&amp;z[x]);\n  }\n\n  for( x=0;x&lt;8;x++) {\n    printf(\"%d \",z[x]); \n  }\n</code></pre>\n"}, {"tags": ["c", "stdin", "eof"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540977043, "post_id": 53079784, "comment_id": 93056946, "body": "The <a href=\"https://en.cppreference.com/w/c/io/getchar\" rel=\"nofollow noreferrer\"><code>getchar</code></a> function returns an <b><i><code>int</code></i></b>. This is actually very important for that <code>EOF</code> comparison."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1540977368, "post_id": 53079784, "comment_id": 93057106, "body": "This <code>printf(&quot;x=%\\n&quot;,x);</code> -&gt; <code>printf(&quot;x=%d\\n&quot;,x);</code>"}, {"owner": {"reputation": 83, "user_id": 10351382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee719549dd0bd9d1a653a1629645ff1?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Huang", "link": "https://stackoverflow.com/users/10351382/jack-huang"}, "reply_to_user": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1540977867, "post_id": 53079784, "comment_id": 93057355, "body": "@Achal Oh! my mistake! I have corrected it."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1540977962, "post_id": 53079784, "comment_id": 93057401, "body": "With <code>scanf</code> you normally test if the return value indicates the number of conversions equals what you expect, here you should compare with <code>1</code>. If it is not 1, then no value was read."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1540978775, "last_edit_date": 1540978775, "creation_date": 1540978311, "answer_id": 53080210, "question_id": 53079784, "link": "https://stackoverflow.com/questions/53079784/how-does-eof-act-in-getchar-and-scanf-on-windows-system/53080210#53080210", "title": "How does EOF act in getchar() and scanf() on Windows system?", "body": "<p>The problem is that on Windows the <code>EOF</code> is put into the input buffer like a normal character (with the encoded value <code>26</code>).</p>\n\n<p>When reading character by character (with e.g. <code>getchar</code>) this is handled by the Windows run-time library. But it doesn't work like that with <code>scanf</code> because when <code>scanf</code> parses the input it's like another character. And as a non-digit it's an invalid character for te <code>\"%d\"</code> format, leading to your <code>scanf</code> Call to return <code>0</code> instead of <code>EOF</code> (since it's not parsed by the format).</p>\n\n<p>One way to solve it is to press the <kbd>Ctrl-Z</kbd> sequence on its own new line.</p>\n\n<p>Another (and more reliable) way to solve it is to check that <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> returns the number of formats you have in the string. In your case you should compare against <code>1</code> (as you have one format specifier).</p>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1540978814, "creation_date": 1540978814, "answer_id": 53080352, "question_id": 53079784, "link": "https://stackoverflow.com/questions/53079784/how-does-eof-act-in-getchar-and-scanf-on-windows-system/53080352#53080352", "title": "How does EOF act in getchar() and scanf() on Windows system?", "body": "<p><code>getchar()</code> returns the value of the character converted to <code>unsigned char</code> or <code>EOF</code> in case of error.</p>\n\n<p>The error can be \"end of file\" or something else; usually (for <code>getchar()</code>) the programmer does not care about the error, just that an error happened.</p>\n\n<hr>\n\n<p><code>scanf()</code> returns the number of values matched and assigned (basically the number of <code>%</code> in the format string) or <code>EOF</code> in case of error. <strong>Note that the number can be less than the number of <code>%</code> in case, for example, of badly formatted input</strong></p>\n\n<p>Just like for <code>getchar()</code> the error can be \"end of file\" or something else. Particularly, reading less than the number of <code>%</code> <strong>is not an error</strong>.</p>\n\n<p>So you may prefer to test for the correct number of assignments rather than testing for error in <code>scanf()</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int x;\n    while (scanf(\"%d\", &amp;x) != 1) {\n        /*Ctrl + z + Enter*/\n        printf(\"x=%d\\n\", x);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 10351382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee719549dd0bd9d1a653a1629645ff1?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Huang", "link": "https://stackoverflow.com/users/10351382/jack-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540978814, "creation_date": 1540976868, "last_edit_date": 1540977829, "question_id": 53079784, "link": "https://stackoverflow.com/questions/53079784/how-does-eof-act-in-getchar-and-scanf-on-windows-system", "title": "How does EOF act in getchar() and scanf() on Windows system?", "body": "<p>I have two pieces of codes to test how the two console I/O functions, getchar() &amp; scanf(), handle the EOF. But I still do not have a clear comprehension about the actual operations behind the outputs and their behaviors. Can someone explains that for me? Thanks a lot! (I am using Windows OS)</p>\n\n<pre><code>// 1st piece of Code\n#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void)\n{\n   char ch;\n\n   while ((ch=getchar()) != EOF)\n   {\n      putchar(toupper(ch));\n   }\n\n   return 0;\n} \n</code></pre>\n\n<p>If I type</p>\n\n<pre><code>abc\n</code></pre>\n\n<p>or</p>\n\n<pre><code>abc(ctrl+z)\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p>The program will have the same outputs:</p>\n    \n    <p>ABC</p>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<pre><code>// 2nd piece of Code\n#include&lt;stdio.h&gt;\n\nint main(void)\n{\n    int x;\n    while(scanf(\"%d\",&amp;x) != EOF)\n    {\n        /*Ctrl + z + Enter*/\n        printf(\"x=%d\\n\",x);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>If I type</p>\n\n<pre><code>123\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p>The program will output:</p>\n    \n    <p>x=123</p>\n  </blockquote>\n</blockquote>\n\n<p>Otherwise, if I type</p>\n\n<pre><code>123(ctrl+z)\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p>The program will have an infinite output:</p>\n    \n    <p>x=123</p>\n    \n    <p>x=123</p>\n    \n    <p>x=123</p>\n    \n    <p>x=123</p>\n    \n    <p>...</p>\n  </blockquote>\n</blockquote>\n"}, {"tags": ["c", "printf", "data-conversion"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540977047, "post_id": 53079783, "comment_id": 93056949, "body": "Welcome to SO. Please take some time to provide all required information. &quot;Not working properly&quot; is no useful description. Please provide your sample input, the output and your expected output."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540977117, "post_id": 53079783, "comment_id": 93056987, "body": "The <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code> (and family)</a> function with the <code>%x</code> format expects a pointer to an <code>int</code> as argument. It&#39;s working the same way as the <code>&quot;%d&quot;</code> format, but parses hexadecimal values instead of decimal."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1540977178, "post_id": 53079783, "comment_id": 93057025, "body": "Maybe you want <code>long value = strtol(argv[1], NULL, 16);</code>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540977192, "post_id": 53079783, "comment_id": 93057031, "body": "<code>argv[i]</code> might be replaced by <code>argv[1][2*i]</code> and the loop should probably stop at <code>i&lt;a</code> instead of <code>i&lt;=a</code> but without proper description that&#39;s just wild guessing."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540977198, "post_id": 53079783, "comment_id": 93057033, "body": "You also seem to handle <code>argc</code> and <code>argv</code> very wrong."}, {"owner": {"reputation": 2071, "user_id": 7478530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGr5i.png?s=128&g=1", "display_name": "Dragonthoughts", "link": "https://stackoverflow.com/users/7478530/dragonthoughts"}, "edited": false, "score": 0, "creation_date": 1540977214, "post_id": 53079783, "comment_id": 93057040, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1540980657, "post_id": 53079783, "comment_id": 93058907, "body": "The main problem here is that you attempt to store data in thin air. You never allocate memory. Most likely you want to use <code>char string[32];</code> instead."}, {"owner": {"reputation": 1, "user_id": 10584788, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cOe0UX3Uo8U/AAAAAAAAAAI/AAAAAAAABvk/vUUDl38A0sk/photo.jpg?sz=128", "display_name": "Hariom Saini", "link": "https://stackoverflow.com/users/10584788/hariom-saini"}, "edited": false, "score": 0, "creation_date": 1541017364, "post_id": 53079783, "comment_id": 93079719, "body": "Sorry for the poor elaboration of the question."}], "answers": [{"comments": [{"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 1, "creation_date": 1540980500, "post_id": 53080052, "comment_id": 93058820, "body": "Try not to use <code>atoi()</code>"}, {"owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "reply_to_user": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1540981901, "post_id": 53080052, "comment_id": 93059597, "body": "@suvojit_007 Why or How ?"}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1540991381, "post_id": 53080052, "comment_id": 93064903, "body": "<a href=\"https://stackoverflow.com/questions/1488569/atoi-string-to-int\">this</a> will give you the answer"}], "tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1540977772, "creation_date": 1540977772, "answer_id": 53080052, "question_id": 53079783, "link": "https://stackoverflow.com/questions/53079783/hexadecimal-to-string-in-c/53080052#53080052", "title": "Hexadecimal to String in C", "body": "<p>You can use <code>atoi</code> and <code>snprintf</code> solve it.</p>\n\n<p>The follow <code>code</code> could work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main (int argc, char *argv[])\n{\n    if (argc != 2)\n        return -1;\n    char string[32];\n    snprintf(string, sizeof string, \"0x%08X\", atoi(argv[1]));\n    printf(\"%s\\n\",string);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10584788, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cOe0UX3Uo8U/AAAAAAAAAAI/AAAAAAAABvk/vUUDl38A0sk/photo.jpg?sz=128", "display_name": "Hariom Saini", "link": "https://stackoverflow.com/users/10584788/hariom-saini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1541050435, "creation_date": 1540976866, "last_edit_date": 1541018504, "question_id": 53079783, "link": "https://stackoverflow.com/questions/53079783/hexadecimal-to-string-in-c", "title": "Hexadecimal to String in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main ( int argc, char *argv[] )\n{\n    char *string = argv[1];\n    int i;\n    char* p = string;\n    for (i=0; i&lt;strlen(string); i++)\n    {\n        int c;\n        for (;p[0] &amp;&amp; p[1] &amp;&amp; sscanf(p, \"%2x\", &amp;c); p += 2) printf(\"%c\", c);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xofr8.png\" rel=\"nofollow noreferrer\">Result</a></p>\n\n<p>This code works fine when passing an arguement(Hexadecimal) and produces a string.\nI need the same as a function; when passed a hexadecimal value gives a string.</p>\n\n<p>I tried using a function but there's no output.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint fun (char * s)\n{\n    char *string = s;    \n    int i;\n    char* p = string;\n    for (i=0; i&lt;strlen(string); i++)\n    {\n        int c;\n        for (;p[0] &amp;&amp; p[1] &amp;&amp; sscanf(p, \"%2x\", &amp;c); p += 2) printf(\"%c\", c);\n    }\n    printf(\"\\n\");\n}\nint main()\n{\n    fun(\"Hello\");\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/DXWjV.png\" rel=\"nofollow noreferrer\">Result</a></p>\n\n<p>PS: Please go easy on me. I'm new to this.</p>\n"}, {"tags": ["c", "macos", "opengl", "macos-mojave"], "comments": [{"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1540983602, "post_id": 53079732, "comment_id": 93060523, "body": "I know you&#39;re working in C, but, as an experiment, can you try: 1) change your program to Objective-C by changing the filename extension from <code>.c</code> to <code>.m</code>; 2) add <code>#import &lt;QuartzCore&#47;QuartzCore.h&gt;</code> near the top; 3) and adding <code>[CATransaction flush];</code> after your swap/flush statement(s). Does that help?"}, {"owner": {"reputation": 554, "user_id": 1834009, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5IkSw.jpg?s=128&g=1", "display_name": "raisa_", "link": "https://stackoverflow.com/users/1834009/raisa"}, "reply_to_user": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1540985651, "post_id": 53079732, "comment_id": 93061604, "body": "Hi, thanks. This may sound silly but I&#39;m having linker command failed issue. Seems like the QuartzCore framework can&#39;t be properly called."}, {"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1540995786, "post_id": 53079732, "comment_id": 93068031, "body": "Oh, right. You need to add <code>-framework QuartzCore</code> to the link command. Sorry for forgetting that."}, {"owner": {"reputation": 554, "user_id": 1834009, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5IkSw.jpg?s=128&g=1", "display_name": "raisa_", "link": "https://stackoverflow.com/users/1834009/raisa"}, "reply_to_user": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1541055993, "post_id": 53079732, "comment_id": 93089267, "body": "@KenThomases Hi, I have added the framework and followed the rest of you suggestion. However I still get the black screen as well."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1541178874, "post_id": 53079732, "comment_id": 93140835, "body": "You using FreeGLUT or whatever Apple is shipping?"}, {"owner": {"reputation": 554, "user_id": 1834009, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5IkSw.jpg?s=128&g=1", "display_name": "raisa_", "link": "https://stackoverflow.com/users/1834009/raisa"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1541179636, "post_id": 53079732, "comment_id": 93141183, "body": "@genpfault it comes with the OS. I just need to call it."}], "owner": {"reputation": 554, "user_id": 1834009, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5IkSw.jpg?s=128&g=1", "display_name": "raisa_", "link": "https://stackoverflow.com/users/1834009/raisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 643, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1541178542, "creation_date": 1540976717, "last_edit_date": 1541178542, "question_id": 53079732, "link": "https://stackoverflow.com/questions/53079732/opengl-black-screen-and-gamma-correction-after-update-to-macos-mojave-10-14", "title": "OpenGL Black Screen and Gamma Correction after update to MacOs Mojave 10.14?", "body": "<p>I accidentally updated my Mac, and OpenGL is now deprecated in the latest MacOS Mojave. I'm using OpenGL + GLUT (I know this is old, but I just need a simple program) and run on terminal (not using Xcode). With the same program that has been working perfectly in Sierra, I got so many OpenGL deprecated warnings in Mojave and managed to suppress all the warning using <code>-Wno-deprecated-declarations</code> , but now I only get black screen.</p>\n\n<p>I read a lot of same issues with black screen on OpenGL after Mojave update, like <a href=\"https://stackoverflow.com/questions/52657002/black-screen-on-opengl\">Black screen on OpenGL</a> , and <a href=\"https://stackoverflow.com/questions/52509427/mac-mojave-opengl\">Mac Mojave + opengl\nAsk Question</a>. But as of now, none of them have accepted answer and the provided answers don't work on me. </p>\n\n<p>This is my main loop :</p>\n\n<p>Code :</p>\n\n<pre><code>static void mainLoop(void)\n{    glClearColor(0,0,0,0);\n    glClear(GL_COLOR_BUFFER_BIT);\n    //glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glEnable(GL_FRAMEBUFFER_SRGB);\n\n    argDrawMode2D(vp);                      //draw to the screen\n\n    char string[256];\n    glColor3f(1,1,1);\n    sprintf(string, \"Some strings\", string1 );\n    argDrawStringsByIdealPos( string, 10.0, 25.0 );\n\n    argSwapBuffers();   //clear the buffer\n    glFlush();\n}\n</code></pre>\n\n<p>I have 2 questions : </p>\n\n<ol>\n<li><p>Do you have any suggestion how to solve the black screen problem ? What I have tried but still got black screen :</p>\n\n<ul>\n<li><p>Change <code>glFlush()</code> into <code>glutSwapBuffers()</code> to flush without a call</p></li>\n<li><p>Change glClear<code>(GL_COLOR_BUFFER_BIT)</code> into <code>glClear(GL_COLOR_BUFFER_BIT\n| GL_DEPTH_BUFFER_BIT)</code> (this one causing even more warning). Also I tried to set the color into <code>glClearColor(255,255,255,0)</code> (white), but after clear color buffer, only black screen. So the glClear isn't working. </p></li>\n<li><p>Try to resize the window using reshape. </p></li>\n<li><p>Update Xcode compiler for terminal to the latest version (Beta)</p></li>\n</ul></li>\n<li><p>I'm using Gamma Correction from OpenGL with with <code>glEnable(GL_FRAMEBUFFER_SRGB)</code>, and after Mojave I'm facing this </p>\n\n<blockquote>\n  <p>\"Assertion failed: (value >= 0.0f &amp;&amp; value &lt;= 1.0f), function\n  LinearToSRGB\"</p>\n</blockquote>\n\n<p>Does the openGL gamma correction doesn't work anymore ?</p></li>\n</ol>\n\n<p>Any Suggestion ?</p>\n\n<p><strong>[UPDATE 1]</strong></p>\n\n<p>Step 3 above : Try to resize the window using reshape. </p>\n\n<p>This one seems to work a little bit after I changed into full screen, following this <a href=\"http://people.bath.ac.uk/abscjkw/ComputerPrograms/C++programs/OpenGL/MojaveOpenGL.cpp\" rel=\"nofollow noreferrer\">Mojave 'hack'</a> from The University of Bath, to resize your window to other dimension than the initial size. It failed when I set to another size (smaller/bigger), but when I set into fullscreen using <code>glutFullScreen();</code> , my screen is rendered, as of now the frame transition is not smooth and I'm still working on it. </p>\n\n<p>Also, I set my fps into 60fps and print them out. And after this hack I got random fps from 100-200 fps here, despite my Mac refresh rate only 90Hz. It is because the resize command, when I commented out the resize command I got black screen but the printed fps in terminal is correct (around 60fps). I realize this hack is also not reliable in the future. So, still need suggestion here, or other solution rather than resize.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Wnsha.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wnsha.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>[UPDATE 2]</strong></p>\n\n<p>I tried to changed my whole project using GLFW. Still the same black screen issue even with GLFW. Therefore this is not API issue.</p>\n\n<p><strong>[UPDATE 3]</strong></p>\n\n<p>Tried to clean uninstall XCode 10 (which comes with Mojave update). Then install XCode 9.41 (Sierra) and Command Tools 9.41 as well. As of now, the GLFW works, and the GLUT still doesn't work.</p>\n"}, {"tags": ["c", "pointers", "char", "printf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 8, "creation_date": 1540975181, "post_id": 53079277, "comment_id": 93055889, "body": "It&#39;s a nice way of demonstrating <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>. Is that <code>printf</code> call really correct?"}, {"owner": {"reputation": 9246, "user_id": 1041868, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6d476b07acb3919c356015e11ad97608?s=128&d=identicon&r=PG", "display_name": "bph", "link": "https://stackoverflow.com/users/1041868/bph"}, "edited": false, "score": 0, "creation_date": 1540975482, "post_id": 53079277, "comment_id": 93056054, "body": "no - it generates a compiler warning - main.c: In function \u2018main\u2019: main.c:11:12: warning: format \u2018%d\u2019 expects a matching \u2018int\u2019 argument [-Wformat=]      printf(&quot;%d\\n&quot;);"}, {"owner": {"reputation": 9246, "user_id": 1041868, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6d476b07acb3919c356015e11ad97608?s=128&d=identicon&r=PG", "display_name": "bph", "link": "https://stackoverflow.com/users/1041868/bph"}, "edited": false, "score": 0, "creation_date": 1540975924, "post_id": 53079277, "comment_id": 93056302, "body": "x = (char *) &amp;a; converts an integer pointer to a char pointer - as to its role, well your guess is as good as mine?"}], "answers": [{"comments": [{"owner": {"reputation": 9246, "user_id": 1041868, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6d476b07acb3919c356015e11ad97608?s=128&d=identicon&r=PG", "display_name": "bph", "link": "https://stackoverflow.com/users/1041868/bph"}, "edited": false, "score": 0, "creation_date": 1540977350, "post_id": 53079449, "comment_id": 93057097, "body": "good spot linking the x[0] = 1; and x[1] = 2; on a little endian machine to the value 513, very sharp"}, {"owner": {"reputation": 593, "user_id": 9658875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841f55a02830a8f0655c07654401670f?s=128&d=identicon&r=PG&f=1", "display_name": "GermanNerd", "link": "https://stackoverflow.com/users/9658875/germannerd"}, "edited": false, "score": 0, "creation_date": 1541093126, "post_id": 53079449, "comment_id": 93107910, "body": "I don&#39;t agree with &#39;gibberish&#39;. The call to printf is UB, but otherwise it is working code. Byte-wise manipulation of memory is not uncommon and one of the strengths (and dangers) of the C language."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 5, "last_activity_date": 1540976001, "last_edit_date": 1540976001, "creation_date": 1540975648, "answer_id": 53079449, "question_id": 53079277, "link": "https://stackoverflow.com/questions/53079277/what-is-the-role-of-x-char-a-and-what-does-it-do/53079449#53079449", "title": "what is the role of x = (char *)&amp;a and what does it do?", "body": "<p>Line 3 simply points <code>x</code> to the address of <code>a</code>. As a special rule in C, we are allowed to use character pointers specifically to access individual bytes of any other variable.</p>\n\n<p>Further access of <code>x</code> will change individual bytes of <code>a</code>, in a way that depends on CPU endianess. On a little endian machine, 512 = 0x200, where the two least significant bytes have the values 0x00 and 0x02 respectively. <code>x[0] = 1;</code> changes the lowest byte to 0x01, and <code>x[1] = 2;</code> writes value 0x02 to the byte that already contained 0x02. The result will be 0x201 = 513 decimal.</p>\n\n<p>The problem here is that <code>printf(\"%d\\n\");</code> invokes undefined behavior, since it contains an incorrect amount of parameters.</p>\n\n<p>Summary: the code is gibberish and the C language doesn't define what this program will do. It may crash, print any value or print no value at all. Pondering about why it behaves in a certain way isn't meaningful practice. Instead focus on learning how to avoid undefined behavior bugs.</p>\n"}, {"tags": [], "owner": {"reputation": 593, "user_id": 9658875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841f55a02830a8f0655c07654401670f?s=128&d=identicon&r=PG&f=1", "display_name": "GermanNerd", "link": "https://stackoverflow.com/users/9658875/germannerd"}, "is_accepted": false, "score": 1, "last_activity_date": 1540999161, "last_edit_date": 1540999161, "creation_date": 1540995055, "answer_id": 53085384, "question_id": 53079277, "link": "https://stackoverflow.com/questions/53079277/what-is-the-role-of-x-char-a-and-what-does-it-do/53085384#53085384", "title": "what is the role of x = (char *)&amp;a and what does it do?", "body": "<p>As long as int is larger than char on the specific machine (and by the C standard it must be), your byte-wise access itself is not undefined. Endianess can be determined. Type sizes can be determined using sizeof.</p>\n\n<p>What you are really doing here is set specific bytes (x in your code is a char pointer; the array notation [] allows you to access individual bytes within your integer) of your integer value to some bit patterns. The endianess of your machine will determine what these bit patterns represent if you access the thus modified bytes again as an integer.</p>\n\n<p>As long as you don't write to a byte that is not part of the original integer, the code is not incorrect, except for the missing argument in the call to printf which is truly UB.</p>\n\n<p>The question which remains is what purpose such a manipulation might serve. But there are uses for this technique.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4849773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15b58c6487308f3104c99b23b08d4bb5?s=128&d=identicon&r=PG", "display_name": "Hagen", "link": "https://stackoverflow.com/users/4849773/hagen"}, "is_accepted": false, "score": 0, "last_activity_date": 1563527714, "creation_date": 1563527714, "answer_id": 57109264, "question_id": 53079277, "link": "https://stackoverflow.com/questions/53079277/what-is-the-role-of-x-char-a-and-what-does-it-do/57109264#57109264", "title": "what is the role of x = (char *)&amp;a and what does it do?", "body": "<p>Let's assume You are on a machine where an int has 4 bytes. 512 in hex format would be '00 00 02 00'. On a little endian processor the pointer points to the lowest significant byte. To set every byte individually the pointer to int is casted to a pointer to char: x = (char *) &a; as a char is always coded in one byte. Now the four bytes are treated as an array of four bytes. The lowest significant byte is set to '1' by x[0] = 1; The next byte is set to '2' (is it anyway, so the line x[1] = 2; could be skipped) and byte 3 and 4 are untouched 00 and 00. 'a' is now '00 00 02 01' or 513.\nOf course in the printf statement 'a' is missing: printf(\"%d\\n\",a);</p>\n"}], "owner": {"reputation": 91, "user_id": 10468708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77633ad5ea7eaa6b162cd829d1b643f0?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay Yadav", "link": "https://stackoverflow.com/users/10468708/ajay-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2350, "favorite_count": 1, "accepted_answer_id": 53079449, "answer_count": 3, "score": 1, "last_activity_date": 1563527714, "creation_date": 1540975021, "question_id": 53079277, "link": "https://stackoverflow.com/questions/53079277/what-is-the-role-of-x-char-a-and-what-does-it-do", "title": "what is the role of x = (char *)&amp;a and what does it do?", "body": "<p>I have this piece of code:</p>\n\n<pre><code>int a;\nchar *x;\nx = (char *) &amp;a;\na = 512;\nx[0] = 1;\nx[1] = 2;\nprintf(\"%d\\n\");\nreturn 0;\n</code></pre>\n\n<p>This prints <strong>513</strong>. Please explain and especially line 3.</p>\n"}, {"tags": ["c", "arguments", "pthreads"], "comments": [{"owner": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1540974488, "post_id": 53079096, "comment_id": 93055576, "body": "Which gcc version ? It should say ` ....no known conversion from &#39;void <i>()&#39; to &#39;void *(</i>)(void *)&#39; for 3rd argument`"}], "answers": [{"tags": [], "owner": {"reputation": 379, "user_id": 4156890, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/eb2a85293501c684164b543a01027def?s=128&d=identicon&r=PG&f=1", "display_name": "RishabhHardas", "link": "https://stackoverflow.com/users/4156890/rishabhhardas"}, "is_accepted": true, "score": 0, "last_activity_date": 1540980989, "creation_date": 1540980989, "answer_id": 53081018, "question_id": 53079096, "link": "https://stackoverflow.com/questions/53079096/pthread-create-function-without-arguments/53081018#53081018", "title": "pthread_create function without arguments", "body": "<p><code>void foo()</code> </p>\n\n<p>means that the function foo can take any number of arguments of unknown type, while</p>\n\n<p><code>void foo(void *)</code></p>\n\n<p>means that the function foo takes a argument of type <code>void *</code>\nThat is why the program compiles, as your function can accept any type of arguments, including <code>void *</code></p>\n\n<p>The argument <code>void *</code> is a void pointer that has no associated data type with it. It can hold address of any type and can be typecasted to any type.</p>\n\n<p>To find the difference between <code>foo()</code> and <code>foo(void *)</code> see <a href=\"https://stackoverflow.com/questions/693788/is-it-better-to-use-c-void-arguments-void-foovoid-or-not-void-foo\">here</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10058216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de30951649b5dd778e012020ef44ab71?s=128&d=identicon&r=PG&f=1", "display_name": "LS_Dev", "link": "https://stackoverflow.com/users/10058216/ls-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 53081018, "answer_count": 1, "score": -1, "last_activity_date": 1540980989, "creation_date": 1540974303, "question_id": 53079096, "link": "https://stackoverflow.com/questions/53079096/pthread-create-function-without-arguments", "title": "pthread_create function without arguments", "body": "<p>I'm trying to understand how <code>pthread_create</code> and <code>pthread_join</code> works. I thought that the third argument of <code>pthread_create</code> only allows functions with one argument of void*. I compiled the code below with gcc and it worked just fine. But why?</p>\n\n<pre><code>void *foo() {\n    return 0;\n}\n\nint main() {\n    pthread_t thread_id;\n    int par = 5;\n    pthread_create(&amp;thread_id, NULL, foo, &amp;par);\n    pthread_join(thread_id, NULL);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "type-conversion", "double"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1540968985, "post_id": 53077681, "comment_id": 93053244, "body": "Simplest would be to copy <code>uint64_t</code> over <code>double</code> with <code>memcpy(&amp;dbl, &amp;u64, sizeof dbl);</code>. But it&#39;s unclear from your question what the byte order of the modbus frame or your system is. You may need to do some bit shifting before the copy if order of bytes don&#39;t match."}, {"owner": {"reputation": 67, "user_id": 10234415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247ae514c461631135da74aa076c7fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10234415/andre"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1540970675, "post_id": 53077681, "comment_id": 93053893, "body": "It works. Thanks!  I must swap the bytes before, but now it works. :-)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1540976635, "post_id": 53077681, "comment_id": 93056708, "body": "How about a <a href=\"https://stackoverflow.com/help/self-answer\">self answer</a> with a short sample code to demonstrate your solution?"}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 10234415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247ae514c461631135da74aa076c7fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10234415/andre"}, "is_accepted": true, "score": 1, "last_activity_date": 1541168202, "creation_date": 1541168202, "answer_id": 53120259, "question_id": 53077681, "link": "https://stackoverflow.com/questions/53077681/how-to-convert-4-modbus-registers-each-16-bit-to-a-double-float-in-c/53120259#53120259", "title": "How to convert 4 modbus registers (each 16 bit) to a double float in C?", "body": "<p>Of course. :-) My solution is:</p>\n\n<p>temp[0] = modbus[3];</p>\n\n<p>temp[1] = modbus[2];</p>\n\n<p>temp[2] = modbus[1];</p>\n\n<p>temp[3] = modbus[0];</p>\n\n<p>memcpy(&amp;mb_double, &amp;temp, 8);</p>\n"}], "owner": {"reputation": 67, "user_id": 10234415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247ae514c461631135da74aa076c7fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10234415/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 53120259, "answer_count": 1, "score": 2, "last_activity_date": 1541168202, "creation_date": 1540968069, "question_id": 53077681, "link": "https://stackoverflow.com/questions/53077681/how-to-convert-4-modbus-registers-each-16-bit-to-a-double-float-in-c", "title": "How to convert 4 modbus registers (each 16 bit) to a double float in C?", "body": "<p>I use libmodbus and have an array of 16 bit integers, where my modbus registers are saved. I tried with MODBUS_GET_INT64_FROM_INT16(mod_arr, 0), but the value is (of course) an integer. Usage of (double) before the MAKRO is not working.</p>\n\n<p>modbus_get_float_dcba(mod_arr) read only 2 registers, not 4 registers.</p>\n\n<p>Is there a function/macro for read 4 modbus registers as double (64 bit)?</p>\n"}, {"tags": ["c", "multithreading", "linux-kernel", "kernel", "kernel-module"], "comments": [{"owner": {"reputation": 3561, "user_id": 1149797, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/cVBtb.png?s=128&g=1", "display_name": "Alex Hoppus", "link": "https://stackoverflow.com/users/1149797/alex-hoppus"}, "edited": false, "score": 0, "creation_date": 1540972592, "post_id": 53077614, "comment_id": 93054724, "body": "you should wait for thread to finish. Your synchronization is incorrect, hint: <a href=\"https://www.kernel.org/doc/Documentation/scheduler/completion.txt\" rel=\"nofollow noreferrer\">kernel.org/doc/Documentation/scheduler/completion.txt</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "is_accepted": false, "score": 0, "last_activity_date": 1541612352, "creation_date": 1541612352, "answer_id": 53194859, "question_id": 53077614, "link": "https://stackoverflow.com/questions/53077614/c-kernel-thread-counter-with-spinlock/53194859#53194859", "title": "c- kernel thread counter with spinlock", "body": "<p>What is protecting the variable o; as in o = o + get(ctr{0..n})?  Looking at your code, for some counter (ex. ctr2), you protect its update with a spinlock, but is it really possible for any other thread to access that counter?  It seems like it is local to the thread, so doesn\u2019t really need protecting; whereas \u2018o\u2019, which is shared by all the threads, does need protection.</p>\n\n<p>As a general note, when you find yourself cutting + pasting the same function, only to distinguish them by a few variables, it is likely you have discovered a good candidate for parameters to a single more general function.   This is both easier on the eyes (less to read, and verify), and more amenable to experimentation.  Applying a manual edit to a dozen locations gets old really fast...</p>\n"}], "owner": {"reputation": 1, "user_id": 10584208, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ipIdTSgwhTg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBDBEYeeei7Y_74lG3OdnAZScRNog/mo/photo.jpg?sz=128", "display_name": "kim jungeun ", "link": "https://stackoverflow.com/users/10584208/kim-jungeun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541612352, "creation_date": 1540967743, "question_id": 53077614, "link": "https://stackoverflow.com/questions/53077614/c-kernel-thread-counter-with-spinlock", "title": "c- kernel thread counter with spinlock", "body": "<p>We were asked to create five kernel threads which increments the global counter one by one. I'm new to programming in kernel space so I had difficulty with doing this - specifically with dealing with the kernel threads and using spinlock. </p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/delay.h&gt;\n#include &lt;linux/kthread.h&gt;\n#include &lt;linux/sched.h&gt;\n#include &lt;linux/semaphore.h&gt;\n#include &lt;linux/spinlock.h&gt;\n#include &lt;linux/slab.h&gt;\n\nMODULE_LICENSE(\"GPL\");\nstatic spinlock_t my_lock = __SPIN_LOCK_UNLOCKED();\nstatic struct task_struct *t1;\nstatic struct task_struct *t2;\nstatic struct task_struct *t3;\nstatic struct task_struct *t4;\nstatic struct task_struct *t5;\nstatic int o;\n\ntypedef struct __counter_t {\n    int value;\n    } counter_t;\n\nvoid init (counter_t *c) {\n    c-&gt;value = 0;\n}\n\nvoid increment (counter_t *c) {\n    spin_trylock(&amp;my_lock);\n    c-&gt;value++;\n    spin_unlock(&amp;my_lock);\n}\n\nint get(counter_t *c) {\n    int rc;\n    spin_trylock(&amp;my_lock);  \n    rc = c-&gt;value;\n    spin_unlock(&amp;my_lock);\n    return rc;\n}\n\nstatic int t1_f(void *unused)\n{\n            int i=0;\n            struct __counter_t *ctr1=kmalloc(sizeof(struct __counter_t), GFP_KERNEL);\n        init(ctr1);\n        for(i=0; i&lt;5000; i++)\n        {\n            increment(ctr1);\n        }\n        o = get(ctr1);\n        printk(KERN_INFO \"Counter: %d\\n\",o);\n        kfree(ctr1);\n        msleep(1000);\n        return 0;\n}\n\nstatic int t2_f(void *unused)\n{\n        int j=0;\n        struct __counter_t *ctr2=kmalloc(sizeof(struct __counter_t), GFP_KERNEL);\n        init(ctr2);\n        for(j=0; j&lt;5000; j++)\n        {\n            increment(ctr2);\n        }\n        o = o + get(ctr2);\n        printk(KERN_INFO \"Counter: %d\\n\",o);\n        kfree(ctr2);\n        msleep(1000);\n        return 0;\n}\n\nstatic int t3_f(void *unused)\n{    \n        int k=0;\n        struct __counter_t *ctr3=kmalloc(sizeof(struct __counter_t), GFP_KERNEL);\n        init(ctr3);\n        for(k=0; k&lt;5000; k++)\n        {\n            increment(ctr3);\n        }\n        o = o + get(ctr3);\n        printk(KERN_INFO \"Counter: %d\\n\",o);\n        kfree(ctr3);\n        msleep(1000);\n        return 0;\n}     \n\nstatic int t4_f(void *unused)\n{\n        int l=0;\n        struct __counter_t *ctr4=kmalloc(sizeof(struct __counter_t), GFP_KERNEL);\n        init(ctr4);\n        for(l=0; l&lt;5000; l++)\n        {\n            increment(ctr4);\n        }\n        o = o + get(ctr4);\n        printk(KERN_INFO \"Counter: %d\\n\",o);\n        kfree(ctr4);\n        msleep(1000);\n        return 0;\n}     \nstatic int t5_f(void *unused)\n{\n        int m=0;\n        struct __counter_t *ctr5=kmalloc(sizeof(struct __counter_t), GFP_KERNEL);\n        init(ctr5);\n        for(m=0; m&lt;5000; m++)\n        {\n            increment(ctr5);\n        }\n        o = o + get(ctr5);\n        printk(KERN_INFO \"Counter: %d\\n\",o);\n        kfree(ctr5);\n        msleep(1000);\n        return 0;\n} \n\nstatic int __init init_thread(void)\n{\n    int f=0;\n    int h=0;\n    printk(KERN_INFO \"Thread Creating....\\n\");\n    t1 = kthread_create(t1_f, NULL, \"mythread1\");\n    t2 = kthread_create(t2_f, NULL, \"mythread2\");\n    t3 = kthread_create(t3_f, NULL, \"mythread3\");\n    t4 = kthread_create(t4_f, NULL, \"mythread4\");\n    t5 = kthread_create(t5_f, NULL, \"mythread5\");\n    if((((t1 &amp;&amp; t2) &amp;&amp; t3)&amp;&amp; t4)&amp;&amp;t5)\n    {\n    printk(KERN_INFO \"Thread Created Successfully\\n\");\n    while(!h) {\n        if(f==0)\n        {       \n            spin_trylock(&amp;my_lock);\n            wake_up_process(t1);\n            spin_unlock(&amp;my_lock);\n            f=1;\n        }\n        else if(f==1)\n        {       \n            spin_trylock(&amp;my_lock);\n            wake_up_process(t2);\n            spin_unlock(&amp;my_lock);\n            f=2;\n        }   \n        else if(f==2)\n        {\n            spin_trylock(&amp;my_lock);\n            wake_up_process(t3);\n            spin_unlock(&amp;my_lock);\n            f=3;\n        }\n        else if(f==3)\n        {\n            spin_trylock(&amp;my_lock);\n            wake_up_process(t4);\n            spin_unlock(&amp;my_lock);\n            f=4;\n        }\n        else if(f==4)\n        {\n            spin_trylock(&amp;my_lock);\n            wake_up_process(t5);\n            spin_unlock(&amp;my_lock);\n            h=1;\n        }\n    }\n    }\n    else\n    {\n        printk(KERN_ALERT \"Thread Creation Failed\\n\");\n    }\n    return 0;\n}\n\nstatic void __exit cleanup_thread(void)\n{   \n    printk(KERN_INFO \"Cleaning up.....\\n\");\n}\n\nmodule_init(init_thread);\nmodule_exit(cleanup_thread);\n</code></pre>\n\n<p>The result should be:</p>\n\n<pre><code>counter: 5000\ncounter: 10000\ncounter: 15000\ncounter: 20000\ncounter: 25000\n</code></pre>\n\n<p>But instead I'm getting variations of (wrong) results, with an example being:</p>\n\n<pre><code>counter: 5000\ncounter: 10000\ncounter: 5000\ncounter: 10000\ncounter: 15000\n</code></pre>\n\n<p>is there a right way to do this (especially with the spinlock because I feel like that's where I'm making a mistake)? any help would be greatly appreciated. thanks! </p>\n"}, {"tags": ["c", "syntax"], "comments": [{"owner": {"reputation": 111, "user_id": 10390214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a98024a63e0f81f6cd37e60e9f2a816?s=128&d=identicon&r=PG", "display_name": "ChocoLite", "link": "https://stackoverflow.com/users/10390214/chocolite"}, "edited": false, "score": 0, "creation_date": 1540977285, "post_id": 53077547, "comment_id": 93057069, "body": "My question is not answered by the above two links. I wish to know the case for 3D array. I want to know about the case which I have mentioned. The same case is not answered by the other posts."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1540981000, "post_id": 53077547, "comment_id": 93059071, "body": "The first link answers it just fine. No, it is not possible, because of the reasons explained in that link. It doesn&#39;t matter if you have a 2D array, a 3D array or a 42D array."}], "owner": {"reputation": 111, "user_id": 10390214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a98024a63e0f81f6cd37e60e9f2a816?s=128&d=identicon&r=PG", "display_name": "ChocoLite", "link": "https://stackoverflow.com/users/10390214/chocolite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1540967888, "answer_count": 0, "score": 0, "last_activity_date": 1540977368, "creation_date": 1540967486, "last_edit_date": 1540977368, "question_id": 53077547, "link": "https://stackoverflow.com/questions/53077547/3d-multidimensional-array-initialisation-of-size", "closed_reason": "Duplicate", "title": "3D Multidimensional Array-Initialisation of size", "body": "<p>Is it possible to initialise a 3D array as follows?</p>\n\n<pre><code>A[ ] [ ] [3] = { { {1,2}, {3,4} }, { {5,6}, {7,8} } };\n</code></pre>\n\n<p>I wish to know for the above case which is not answered elsewhere.</p>\n"}, {"tags": ["c", "gcc", "compiler-optimization"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1540965760, "post_id": 53077119, "comment_id": 93052016, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/31977606/how-to-merge-duplicated-or-multiplicated-string-literals-into-one-in-gcc\">how to merge duplicated or multiplicated string literals into one in GCC</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1540965806, "post_id": 53077119, "comment_id": 93052032, "body": "Yes, most likely only one copy of <code>&quot;string&quot;</code> is contained in the executable string-table and is referenced in each assignment. This is particularly true for those OS where string-literals are immutable and created in the read-only section of the executable. (there is no reason to duplicate what will not change) This isn&#39;t true for all OS&#39;s though, and there are compiler options that can control this behavior on some compilers."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1540966079, "post_id": 53077119, "comment_id": 93052134, "body": "@DavidC.Rankin: <a href=\"https://gcc.godbolt.org/z/AtPIv2\" rel=\"nofollow noreferrer\">Without <code>-fmerge-all-constants</code>, GCC will duplicate the string into two separate global variables</a> (though the exact behavior depends on whether your types are <code>const char *</code> or <code>const char [N]</code>). Of course, if the program is as simple as the OP&#39;s then the optimizer can optimize the whole thing away and then there won&#39;t be <i>any</i> strings in the resulting binary."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540966180, "post_id": 53077119, "comment_id": 93052166, "body": "It will also do so with <i>optimizations</i> enabled without <code>-fmerge-all-constants</code>. Try compiling with <code>-Ofast</code>."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540966214, "post_id": 53077119, "comment_id": 93052182, "body": "@DavidC.Rankin: Did you look at the example I linked to? Because it&#39;s using <code>-Ofast</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540966274, "post_id": 53077119, "comment_id": 93052210, "body": "Yep, and it says just exactly that <code>:)</code> <i>&quot;Most optimizations are only enabled if an -O level is set on the command line.&quot;</i> E.g. <code>int main (void) { char *s1 = &quot;string&quot;, *s2 = &quot;string&quot;; printf (&quot;s1: %p\\ns2: %p\\n&quot;, (void*)s1, (void*)s2); }</code> compiled with <code>-Ofast</code> merges without anything further. Which I think is what you were saying, it just wasn&#39;t clear as an optimized program is still a conforming program."}, {"owner": {"reputation": 33, "user_id": 10584122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b31d57b371d041ebebe9f2920716ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri", "link": "https://stackoverflow.com/users/10584122/yuri"}, "edited": false, "score": 0, "creation_date": 1540966740, "post_id": 53077119, "comment_id": 93052366, "body": "Thanks for all the tips, guy. Using pointer to a string, I already knew that the compiler used the same address for the string, but I did not know how to do that with array, grateful"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 3, "creation_date": 1540967027, "post_id": 53077119, "comment_id": 93052471, "body": "@DavidC.Rankin <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.5p7\" rel=\"nofollow noreferrer\">It&#39;s standards-conforming to merge string literals, but not required</a>. Note that a pointer to a string literal is different from a string array, and is what I was originally referring to in my comment above about <code>const char*</code> vs <code>const char[N]</code>. If you create <code>const char*</code> that point to string literals, those strings may be merged. But if you create <code>const char[N]</code>, those strings <i>cannot</i> be merged (at least not without <code>-fmerge-all-constants</code>, which results in non-conforming behavior)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540967707, "post_id": 53077119, "comment_id": 93052749, "body": "Ok, now we are on the same page, and yes I agree, conforming but not required. We were talking about opposite sides of the same coin. The <code>&quot;string&quot;</code> literal initializers themselves can be (and are) merged (but not required to be merged). The arrays will of course be separate storage. Thanks."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1540982711, "post_id": 53077119, "comment_id": 93060066, "body": "This is a dupe but the linked post is of lower quality. I closed the link as dupe to this one instead."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10584122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b31d57b371d041ebebe9f2920716ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri", "link": "https://stackoverflow.com/users/10584122/yuri"}, "edited": false, "score": 0, "creation_date": 1540966622, "post_id": 53077229, "comment_id": 93052320, "body": "Thank you, you helped me a lot. Sorry if I did not express myself so well, my English is bad, again thank you for the answer."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "reply_to_user": {"reputation": 33, "user_id": 10584122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b31d57b371d041ebebe9f2920716ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri", "link": "https://stackoverflow.com/users/10584122/yuri"}, "edited": false, "score": 0, "creation_date": 1540967336, "post_id": 53077229, "comment_id": 93052613, "body": "I&#39;m glad my answer was helpful! No worries about your English. You&#39;re English is actually pretty decent and understandable. English is a pretty terrible language, so I commiserate with anyone learning it."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1540968316, "post_id": 53077229, "comment_id": 93052993, "body": "Any idea of what <code>-flto</code> does by default?"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 1, "creation_date": 1540994655, "post_id": 53077229, "comment_id": 93067260, "body": "@BrettHale: <code>-flto</code> won&#39;t merge constants like <code>-fmerge-all-constants</code> will. That said, string literals can still be merged across translation units, even without <code>-flto</code> (I just tried it on my system and all it takes is <code>-O1</code> or above to merge duplicae string literals across translation units; <code>-flto</code> was not required)."}], "tags": [], "owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "is_accepted": false, "score": 4, "last_activity_date": 1540966269, "last_edit_date": 1540966269, "creation_date": 1540965933, "answer_id": 53077229, "question_id": 53077119, "link": "https://stackoverflow.com/questions/53077119/can-gcc-merge-duplicate-global-string-arrays/53077229#53077229", "title": "Can GCC merge duplicate global string arrays?", "body": "<p>GCC's <code>-fmerge-all-constants</code> (which also implies <code>-fmerge-constants</code>) will do the trick. <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">It's documentation</a>:</p>\n\n<blockquote>\n  <p><code>-fmerge-all-constants</code></p>\n  \n  <p>Attempt to merge identical constants and identical variables.</p>\n  \n  <p>This option implies <code>-fmerge-constants</code>. In addition to <code>-fmerge-constants</code> this considers e.g. even constant initialized arrays or initialized constant variables with integral or floating-point types. Languages like C or C++ require each variable, including multiple instances of the same variable in recursive calls, to have distinct locations, so using this option results in non-conforming behavior.</p>\n</blockquote>\n\n<p>Note that GCC does not guarantee the constants will be merged, so you shouldn't rely on this for program behavior. It will attempt to merge what it can, but some constants may not be mergeable.</p>\n\n<p><strong>Input code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nconst char str1[7] = \"string\";\nconst char str2[7] = \"string\";\n\nint main() {\n    puts(str1);\n    puts(str2);\n}\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/z/2E6UF2\" rel=\"nofollow noreferrer\"><strong>Output assembly:</strong></a></p>\n\n<pre><code>main:\n        sub     rsp, 8\n        mov     edi, OFFSET FLAT:str1\n        call    puts\n        mov     edi, OFFSET FLAT:_ZL4str2\n        call    puts\n        xor     eax, eax\n        add     rsp, 8\n        ret\nstr1:\n        .string \"string\"\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10584122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b31d57b371d041ebebe9f2920716ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri", "link": "https://stackoverflow.com/users/10584122/yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1540967631, "creation_date": 1540965309, "last_edit_date": 1540967631, "question_id": 53077119, "link": "https://stackoverflow.com/questions/53077119/can-gcc-merge-duplicate-global-string-arrays", "title": "Can GCC merge duplicate global string arrays?", "body": "<p>I've been wondering if it's possible to compile using GCC with some optimization flag to avoid have two duplicate arrays to the .rodata section? Thus, memory addresses would be the same. For example:</p>\n\n<pre><code>const char str [7] = \"string\";\n\nconst char str1 [7] = \"string\";\n\n\nint printf (const char * format, ...);\n\nint main (void) {\n\n\u00a0\u00a0\u00a0\u00a0\u00a0 if (str == str1)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 printf (\"Equal memory addresses\");\n\n\u00a0\u00a0\u00a0\u00a0\u00a0 return 0;\n\n}\n</code></pre>\n\n<p>So in this example above, is it possible that somehow the compiler uses the same memory addresses?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15228, "user_id": 1184641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ee5565d022bd50b3e21f34f102f957?s=128&d=identicon&r=PG", "display_name": "Appleman1234", "link": "https://stackoverflow.com/users/1184641/appleman1234"}, "edited": false, "score": 0, "creation_date": 1540963980, "post_id": 53076871, "comment_id": 93051468, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7469139/what-is-equivalent-to-getch-getche-in-linux\">What is Equivalent to getch() &amp; getche() in Linux?</a>"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1540964059, "post_id": 53076871, "comment_id": 93051493, "body": "First comment out conio.h. Then see which lines give you build errors, and fix them. Looks like it will be very easy in this case."}, {"owner": {"reputation": 11455, "user_id": 10888, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/adbf81127c90a370ceab11b3087a8e4e?s=128&d=identicon&r=PG", "display_name": "Leonard", "link": "https://stackoverflow.com/users/10888/leonard"}, "edited": false, "score": 0, "creation_date": 1540964085, "post_id": 53076871, "comment_id": 93051500, "body": "You are missing a space between #include and &lt;conio.h&gt;.  I&#39;m not sure if that&#39;s your only problem, but fix that and see what happens."}, {"owner": {"reputation": 785, "user_id": 4380137, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000986896620/picture?type=large", "display_name": "Chris Aby Antony", "link": "https://stackoverflow.com/users/4380137/chris-aby-antony"}, "edited": false, "score": 0, "creation_date": 1540964187, "post_id": 53076871, "comment_id": 93051538, "body": "Please understand that in this program <code>conio.h</code> is not needed for accepting the string. <code>scanf()</code> is defined in <code>stdio.h</code>. In this case, you are using <code>conio.h</code> to use <code>getch()</code>, which is commonly used to wait till user input before the program terminates."}, {"owner": {"reputation": 41, "user_id": 10361648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d99daed4434be7a45dfebb7eeb7f13?s=128&d=identicon&r=PG&f=1", "display_name": "Tusar Haque", "link": "https://stackoverflow.com/users/10361648/tusar-haque"}, "edited": false, "score": 0, "creation_date": 1540964399, "post_id": 53076871, "comment_id": 93051600, "body": "I comment out  conio.h but it give me an error in function getch().@hyde"}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1540964441, "post_id": 53076871, "comment_id": 93051619, "body": "remove those functions too as they are defined in conio.h"}, {"owner": {"reputation": 41, "user_id": 10361648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d99daed4434be7a45dfebb7eeb7f13?s=128&d=identicon&r=PG&f=1", "display_name": "Tusar Haque", "link": "https://stackoverflow.com/users/10361648/tusar-haque"}, "reply_to_user": {"reputation": 785, "user_id": 4380137, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000986896620/picture?type=large", "display_name": "Chris Aby Antony", "link": "https://stackoverflow.com/users/4380137/chris-aby-antony"}, "edited": false, "score": 0, "creation_date": 1540964739, "post_id": 53076871, "comment_id": 93051709, "body": "@Chris Aby Antony  i already remove the conio.h and remove the getch() function but now it gives me an error. It said - format \u2018%u\u2019 expects argument of type \u2018unsigned int\u2019, but argument 3 has type \u2018char *\u2019"}, {"owner": {"reputation": 41, "user_id": 10361648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d99daed4434be7a45dfebb7eeb7f13?s=128&d=identicon&r=PG&f=1", "display_name": "Tusar Haque", "link": "https://stackoverflow.com/users/10361648/tusar-haque"}, "reply_to_user": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1540964898, "post_id": 53076871, "comment_id": 93051757, "body": "@suvojit_007 i already remove thoose function which is related to conio.h. But give me an error in %u (unsigned operator).. What should i do now!"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540965587, "post_id": 53077123, "comment_id": 93051955, "body": "How about proper indention, protecting the bounds of <code>name</code> and checking the return of <code>scanf</code> to ensure <code>name</code> is a valid string before <code>printf</code>? <code>if (scanf (&quot;%9s&quot;, name) != 1) { fputs (&quot;error: name invalid or EOF\\n&quot;, stderr); return 1; }</code>"}, {"owner": {"reputation": 41, "user_id": 10361648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d99daed4434be7a45dfebb7eeb7f13?s=128&d=identicon&r=PG&f=1", "display_name": "Tusar Haque", "link": "https://stackoverflow.com/users/10361648/tusar-haque"}, "edited": false, "score": 0, "creation_date": 1540965717, "post_id": 53077123, "comment_id": 93052001, "body": "@suvojit_007 Thanks a lot Brother. Have one more question ! If i want  the  index value of the string element rather than it address what should i need change?"}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "reply_to_user": {"reputation": 41, "user_id": 10361648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d99daed4434be7a45dfebb7eeb7f13?s=128&d=identicon&r=PG&f=1", "display_name": "Tusar Haque", "link": "https://stackoverflow.com/users/10361648/tusar-haque"}, "edited": false, "score": 0, "creation_date": 1540965805, "post_id": 53077123, "comment_id": 93052031, "body": "@TusarHaque use <code>%d</code> for index value as they are integer"}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540966134, "post_id": 53077123, "comment_id": 93052150, "body": "@DavidC.Rankin thanks for pointing that out. I have added that information."}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "reply_to_user": {"reputation": 41, "user_id": 10361648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d99daed4434be7a45dfebb7eeb7f13?s=128&d=identicon&r=PG&f=1", "display_name": "Tusar Haque", "link": "https://stackoverflow.com/users/10361648/tusar-haque"}, "edited": false, "score": 0, "creation_date": 1540966259, "post_id": 53077123, "comment_id": 93052201, "body": "@TusarHaque Please close the question, if you don&#39;t have any more issues."}, {"owner": {"reputation": 41, "user_id": 10361648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d99daed4434be7a45dfebb7eeb7f13?s=128&d=identicon&r=PG&f=1", "display_name": "Tusar Haque", "link": "https://stackoverflow.com/users/10361648/tusar-haque"}, "edited": false, "score": 0, "creation_date": 1540967463, "post_id": 53077123, "comment_id": 93052660, "body": "@suvojit_007 %d give an error! \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 3 has type \u2018char *\u2019. But  I want to use the char data type and get  the output  like first letter located at 0,  2nd at 1.. what should i need to change!"}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "reply_to_user": {"reputation": 41, "user_id": 10361648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d99daed4434be7a45dfebb7eeb7f13?s=128&d=identicon&r=PG&f=1", "display_name": "Tusar Haque", "link": "https://stackoverflow.com/users/10361648/tusar-haque"}, "edited": false, "score": 0, "creation_date": 1540967660, "post_id": 53077123, "comment_id": 93052734, "body": "@TusarHaque use <code>printf(&quot;%c is located at %d with address %p&quot;, name[i],i &amp;name[i]);</code>"}], "tags": [], "owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "is_accepted": true, "score": 0, "last_activity_date": 1540965972, "last_edit_date": 1540965972, "creation_date": 1540965333, "answer_id": 53077123, "question_id": 53076871, "link": "https://stackoverflow.com/questions/53076871/c-any-alternative-way-to-get-each-of-string-element-without-using-conio-h/53077123#53077123", "title": "C: Any Alternative way to get each of string element without using conio.h?", "body": "<p>You should actually display a pointer using the <code>%p</code> format specifier. For more information <a href=\"https://stackoverflow.com/questions/9053658/correct-format-specifier-to-print-pointer-or-address/9053835#9053835\">Correct format specifier to print pointer or address?</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n  char name[10];\n  int i = 0;\n  printf(\"Please enter your name: \");\n  scanf(\"%s\", name);\n\n  while(name[i] != '\\0'){\n     printf(\"%c is located at %p\", name[i], &amp;name[i]);\n     i++;\n}\n\n\n  return 0;\n}\n</code></pre>\n\n<p>Edit: As mentioned in the comment by @David, you should check the return value of <code>scanf</code> also.</p>\n\n<pre><code>if (scanf (\"%9s\", name) != 1){ \n   fputs (\"error: name invalid or EOF\\n\", stderr); \n    return 1; }\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10361648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d99daed4434be7a45dfebb7eeb7f13?s=128&d=identicon&r=PG&f=1", "display_name": "Tusar Haque", "link": "https://stackoverflow.com/users/10361648/tusar-haque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 53077123, "answer_count": 1, "score": 0, "last_activity_date": 1540965972, "creation_date": 1540963725, "question_id": 53076871, "link": "https://stackoverflow.com/questions/53076871/c-any-alternative-way-to-get-each-of-string-element-without-using-conio-h", "title": "C: Any Alternative way to get each of string element without using conio.h?", "body": "<p><strong>I</strong> am trying to write a program to access the name from user and print each of element and it address but can't figure out what happen to my code. If <strong>Gcc</strong> compiler not support <strong>Conio.h</strong> library so what should i do? Can I write a program without using conio.h library?. \n<strong>Please</strong> explain it  </p>\n\n<p><strong>Here</strong> is my code: </p>\n\n<pre><code>//Write a program to find each of string element and it location\n#include &lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nint main(){\nchar name[10];\nint i = 0;\nprintf(\"Please enter your name: \");\nscanf(\"%s\", name);\nwhile(name[i] != '\\0'){\n    printf(\"%c is located at %u\", name[i], &amp;name[i]);\n    i++;\n}\ngetch();\n\nreturn 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>Output: No such file or directory </p>\n  \n  <p>complination terminated</p>\n</blockquote>\n"}, {"tags": ["c", "function", "pointers", "struct", "typedef"], "comments": [{"owner": {"reputation": 1, "user_id": 10583854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WjqlKTqgBZw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCz3RWS5L7v0ldJB0m16CR2mqamfg/mo/photo.jpg?sz=128", "display_name": "Sami Mas", "link": "https://stackoverflow.com/users/10583854/sami-mas"}, "edited": false, "score": 0, "creation_date": 1540961729, "post_id": 53076527, "comment_id": 93050848, "body": "p.s. sizeof(int)=4 and sizeof(unsighed int)=4 in my machine."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1540962089, "post_id": 53076527, "comment_id": 93050921, "body": "Aside: the test for <code>NULL</code>-ness of <code>parr</code> in <code>if (parr-&gt;data &amp;&amp; parr)</code> is too late to be useful.  It should be right after <code>intarr_t* parr= malloc(...</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1540962202, "post_id": 53076527, "comment_id": 93050941, "body": "Specifically, which of the values on <code>8 16 4 8 8 8 4</code> are unexpected for you?  What values did you expect?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1540995294, "post_id": 53076527, "comment_id": 93067687, "body": "BTW, you really need to check that <code>parr</code> isn&#39;t null before assigning to <code>parr-&gt;data</code> or <code>parr-&gt;len</code>."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1540963029, "post_id": 53076708, "comment_id": 93051147, "body": "&quot;... which is the same as size of any pointer&quot; --&gt; C does not require pointers of different types to all have the same size - even though it is common.  A typical difference occurs when pointer to functions differ in size from pointers to objects."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540963340, "post_id": 53076708, "comment_id": 93051249, "body": "@chux: Updated the answer with your input."}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1540966219, "last_edit_date": 1540966219, "creation_date": 1540962827, "answer_id": 53076708, "question_id": 53076527, "link": "https://stackoverflow.com/questions/53076527/explaining-the-different-values-for-pointers-and-sizeof-struct/53076708#53076708", "title": "explaining the different values for pointers and sizeof struct", "body": "<pre><code>8 - sizeof(p) - size of a pointer to struct inarr_t which is the same as size of any pointer \n16 - sizeof(*p) - size of struct inarr_t consisting of an int and a pointer with padding \n4 - sizeof(*(p-&gt;data)) - size of int\n8 - sizeof(p-&gt;data) - size of pointer to int which is the same as size of any pointer \n\n8 - sizeof(*(&amp;(p-&gt;data))) - size of pointer to int (*&amp; is dereferencing a pointer to pointer) \n8 - sizeof(&amp;(p-&gt;data)) - size of pointer to pointer to int\n4 - sizeof(p-&gt;data[0])) - size of int (the first element of int array)\n</code></pre>\n\n<p>No matter, what the size of <code>len</code> is, the above values will not change. </p>\n\n<p>Note: The C standard does not require pointers of different types to have the same size - even though it is common. And this seems to be the case on your system.</p>\n"}], "owner": {"reputation": 1, "user_id": 10583854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WjqlKTqgBZw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCz3RWS5L7v0ldJB0m16CR2mqamfg/mo/photo.jpg?sz=128", "display_name": "Sami Mas", "link": "https://stackoverflow.com/users/10583854/sami-mas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540966219, "creation_date": 1540961623, "question_id": 53076527, "link": "https://stackoverflow.com/questions/53076527/explaining-the-different-values-for-pointers-and-sizeof-struct", "title": "explaining the different values for pointers and sizeof struct", "body": "<p>I am new here an I am also new to programming. I am learning structs, pointers and functions and how they all work together in C. I am trying to make sense of the results I am getting for the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdlib.h&gt; \n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct {\n  int* data;\n  unsigned int len;\n} intarr_t;\n\nintarr_t* intarr_create( unsigned int len )\n{\n  intarr_t* parr= malloc(sizeof(intarr_t));\n  parr-&gt;data= malloc(len*sizeof(int));\n  parr-&gt;len= len;\n\n  if (parr-&gt;data &amp;&amp; parr)\n    return parr;\n  else\n    return NULL;\n}\n\nint main()\n{ \n  intarr_t* p = intarr_create(3); //creat a typedef struct \"intarr_t\" with data pointer that has 3 integer values allocate to it.\n  printf(\"%ld %ld %ld %ld %ld %ld %ld\\n\",sizeof(p), sizeof(*p), sizeof(*(p-&gt;data)), sizeof(p-&gt;data), sizeof(*(&amp;(p-&gt;data))), sizeof(&amp;(p-&gt;data)), sizeof(p-&gt;data[0]));\n  printf(\"%p %p %p %p %p\\n\", (void*)p, (void*)p-&gt;data, (void*)&amp;(p-&gt;len), (void*)&amp;(p-&gt;data), (void*)&amp;(p-&gt;data[0]));\n  intarr_destroy(p);\n}\n</code></pre>\n\n<p>I am getting this same output to what ever I set \"len\" to.</p>\n\n<pre><code>8 16 4 8 8 8 4\n0x55f672e0c260 0x55f672e0c280 0x55f672e0c268 0x55f672e0c260 0x55f672e0c280\n</code></pre>\n\n<p>can someone please explain each one of the results and the corresponding part from the code? which one refer to the pointer, the pointer for data and the values in data, the derefrencing of each one? why sizes are what they result to be? why size of address data changes in each option and how come none change when I change how many elements (len) size?\nThis code I constructed got me more confused on the whole what is what and how to distinguish concepts from others.\nSorry for the messy long question. Again It's my first, so be nice with your criticism and be thorough with your answer. Thanks.</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1540960118, "post_id": 53076265, "comment_id": 93050462, "body": "You cannot initialize arrays by assignment. Also, the <code>__attribute__ ((packed))</code> is a sure signal of cargo culting - the structure is already packed and <b>were it not</b>, you&#39;d just cause more harm by misaligning the members."}, {"owner": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1540960254, "post_id": 53076265, "comment_id": 93050486, "body": "Thanks @AnttiHaapala . Then can you please suggest me a way to achieve this"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1540960288, "post_id": 53076265, "comment_id": 93050496, "body": "Do you just want to copy  <code>profile_arr[0].item_queue</code> to <code>temp_q</code>?"}, {"owner": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "reply_to_user": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 0, "creation_date": 1540960334, "post_id": 53076265, "comment_id": 93050503, "body": "Yes @P.W is there any other method to do that?"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1540960642, "post_id": 53076265, "comment_id": 93050581, "body": "@Choxmi: Posted an answer. Check it out."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1540962386, "post_id": 53076265, "comment_id": 93050981, "body": "None of this makes any sense in the larger picture. But yes, you would use memcpy make a copy of an array."}], "answers": [{"comments": [{"owner": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "edited": false, "score": 0, "creation_date": 1540961055, "post_id": 53076377, "comment_id": 93050695, "body": "Thanks @P.W . As an alternative this works perfect. Do you have any idea why my approach is unsuccessful? I&#39;m just curious"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "edited": false, "score": 1, "creation_date": 1540961782, "post_id": 53076377, "comment_id": 93050860, "body": "In your assignment, <code>profile_arr[0].item_queue</code> is actually an address as <code>item_queue</code> itself is an array."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1540961989, "post_id": 53076377, "comment_id": 93050902, "body": "<code>profile_arr[0].item_queue</code> is type <code>item</code>. <code>item temp_q[65000]</code> is an <i>array of</i> type <code>item</code>. You cannot initialize an array with a single item without wrapping the value in braces, e.g. <code>{profile_arr[0].item_queue}</code> and then you are setting the 1st element of the array to <code>profile_arr[0].item_queue</code> and the remaining items <code>0</code>. To set all elements to that value, you must use <code>memcpy</code> (or a loop)."}, {"owner": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540962298, "post_id": 53076377, "comment_id": 93050962, "body": "Thanks all. @DavidC.Rankin yes I used braces as well. But it didn&#39;t work. It seems <code>memcopy</code> or loop is the only solution. Thanks a lot guys."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540962445, "post_id": 53076377, "comment_id": 93050997, "body": "@DavidC.Rankin actually item_queue is an array"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540962555, "post_id": 53076377, "comment_id": 93051024, "body": "Oooh, you are right, <code>profile_arr[16]</code> is an <i>array of struct</i> containing an <i>array of</i> <code>item</code>... Good catch."}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1540960534, "creation_date": 1540960534, "answer_id": 53076377, "question_id": 53076265, "link": "https://stackoverflow.com/questions/53076265/invalid-initializer-while-assigning-value-from-struct-to-a-struct-array/53076377#53076377", "title": "Invalid initializer : While assigning value from struct to a struct array", "body": "<p>If you just want to copy <code>profile_arr[0].item_queue</code> to <code>temp_q</code>, you can use <a href=\"https://en.cppreference.com/w/c/string/byte/memcpy\" rel=\"nofollow noreferrer\"><code>memcpy</code></a>.</p>\n\n<pre><code>void * memcpy ( void * destination, const void * source, size_t num );\n\nmemcpy(temp_q, profile_arr[0].item_queue, sizeof(temp_q));\n</code></pre>\n"}], "owner": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540960534, "creation_date": 1540959768, "question_id": 53076265, "link": "https://stackoverflow.com/questions/53076265/invalid-initializer-while-assigning-value-from-struct-to-a-struct-array", "title": "Invalid initializer : While assigning value from struct to a struct array", "body": "<p>Suppose I have two structs. One struct is a simple struct with a set of elements. </p>\n\n<pre><code>typedef struct __attribute__ ((packed)) {\n        float a1;\n        float a2;\n        uint32_t b1;\n        uint32_t b2;\n} item;\n</code></pre>\n\n<p>Other struct is simply an array of previous struct <code>item</code>.</p>\n\n<pre><code>typedef struct __attribute__ ((packed)) {\n        item item_queue[65000];\n} item_arr;\n</code></pre>\n\n<p>What I need to do is to get an element from item_arr and assign it to an array of <code>item</code>s. I'm trying to achieve it in this way.</p>\n\n<pre><code>item_arr profile_arr[16] = {0};\n</code></pre>\n\n<p>After assigning values to profile_arr, I assigned an element from item_arr to new item array. </p>\n\n<pre><code>item temp_q[65000] = profile_arr[0].item_queue;\n</code></pre>\n\n<p>But This gives me <strong>error: invalid initializer</strong>.</p>\n\n<p>Am I doing the initialization in a wrong way? Any help would be appreciated.</p>\n"}, {"tags": ["c", "floating-accuracy"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 3, "creation_date": 1540959450, "post_id": 53076189, "comment_id": 93050309, "body": "<a href=\"http://man7.org/linux/man-pages/man3/pow.3.html\" rel=\"nofollow noreferrer\">man pow</a>: <code>double pow(double x, double y)</code> and <code>float powf(float x, float y)</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1540959801, "post_id": 53076189, "comment_id": 93050394, "body": "Unrelated: please don&#39;t use _s functions, they are not any safer then their portable counterparts."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540960881, "post_id": 53076189, "comment_id": 93050651, "body": "Rather than think of a difference of 0.07, consider a difference of 1 part in a 1,000,000 - about the precision of typical <code>float</code>."}, {"owner": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "edited": false, "score": 0, "creation_date": 1540974460, "post_id": 53076189, "comment_id": 93055566, "body": "The same as between <code>.1</code> and <code>.1f</code>."}], "answers": [{"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 5, "last_activity_date": 1540960313, "last_edit_date": 1540960313, "creation_date": 1540959448, "answer_id": 53076216, "question_id": 53076189, "link": "https://stackoverflow.com/questions/53076189/what-is-the-difference-between-pow-and-powf/53076216#53076216", "title": "What is the difference between pow and powf", "body": "<p><code>pow</code> operates on <code>double</code>s. <code>powf</code> operates on <code>float</code>s. This is a fairly standard notation in C, where the base name of a function will be for operands (and return values) of the default type (like <code>int</code> and <code>double</code>), while prefixed and suffixed versions are for other types (like <code>long</code>, <code>float</code>, etc). Here is a reference: <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/\" rel=\"nofollow noreferrer\">http://pubs.opengroup.org/onlinepubs/9699919799/</a>.</p>\n\n<p>This difference in data types fully explains the differences you see in your result.</p>\n\n<p><code>double</code>s contain 53 bits of precision in the mantissa, which translates to ~16 decimal digits of precision. This exceeds the precision with which you display your result, so is probably accurate enough for your purposes.</p>\n\n<p><code>float</code>s, on the other hand, have only 24 bits in the mantissa, which translates to ~7 decimal digits. Any combination of operations will cause roundoff errors do creep in almost immediately to within your display precision.</p>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 2, "last_activity_date": 1540959491, "creation_date": 1540959491, "answer_id": 53076224, "question_id": 53076189, "link": "https://stackoverflow.com/questions/53076189/what-is-the-difference-between-pow-and-powf/53076224#53076224", "title": "What is the difference between pow and powf", "body": "<p>The C language did not have \"generic functions\" until C11. Instead, there are different functions in the standard library for different data types.</p>\n\n<p>The <code>*f</code>  functions of <code>&lt;math.h&gt;</code> operate on single-precision floating point numbers (<code>float</code>s using single precision internally. <code>double</code> stands for ... double precision. Always use the non-<code>f</code> functions for double arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1540959981, "post_id": 53076230, "comment_id": 93050424, "body": "What source are you quoting?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1540960256, "post_id": 53076230, "comment_id": 93050487, "body": "Thanks. That is indeed a necessary improvement. It is very important to credit your source, especially when you make a direct quote like that."}], "tags": [], "owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "is_accepted": false, "score": 0, "last_activity_date": 1540960479, "last_edit_date": 1540960479, "creation_date": 1540959523, "answer_id": 53076230, "question_id": 53076189, "link": "https://stackoverflow.com/questions/53076189/what-is-the-difference-between-pow-and-powf/53076230#53076230", "title": "What is the difference between pow and powf", "body": "<p>The difference is :</p>\n\n<pre><code>float powf( float base, float exponent );\ndouble pow( double base, double exponent );\n</code></pre>\n\n<p><strong>DESCRIPTION <a href=\"http://www.codecogs.com/library/computing/c/math.h/pow.php?alias=powf\" rel=\"nofollow noreferrer\">in here</a></strong></p>\n\n<blockquote>\n  <p>The <code>pow</code> functions compute <code>base</code> raised to the power of <code>exponent</code>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1540959541, "creation_date": 1540959541, "answer_id": 53076235, "question_id": 53076189, "link": "https://stackoverflow.com/questions/53076189/what-is-the-difference-between-pow-and-powf/53076235#53076235", "title": "What is the difference between pow and powf", "body": "<p>As said <a href=\"https://en.cppreference.com/w/c/numeric/math/pow\" rel=\"nofollow noreferrer\">here</a> , <code>pow</code> takes a <code>double</code>, where <code>powf</code> takes a <code>float</code> rendering it much less precise.</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1540959590, "creation_date": 1540959590, "answer_id": 53076241, "question_id": 53076189, "link": "https://stackoverflow.com/questions/53076189/what-is-the-difference-between-pow-and-powf/53076241#53076241", "title": "What is the difference between pow and powf", "body": "<p><code>powf</code> returns and takes arguments of <code>float</code>.</p>\n\n<p><code>pow</code> returns double and takes arguments of <code>double</code>. If a float number is given as parameter, it is converted to <code>double</code> by the usual promotion rules.<a href=\"https://stackoverflow.com/questions/46073295/implicit-type-promotion-rules\">See here</a></p>\n\n<p>The difference you are seeing in the result is due to the higher precision of <code>double</code></p>\n"}], "owner": {"reputation": 19, "user_id": 7724954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zXI2V.jpg?s=128&g=1", "display_name": "00rhn", "link": "https://stackoverflow.com/users/7724954/00rhn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2329, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1540960712, "creation_date": 1540959243, "last_edit_date": 1540960712, "question_id": 53076189, "link": "https://stackoverflow.com/questions/53076189/what-is-the-difference-between-pow-and-powf", "title": "What is the difference between pow and powf", "body": "<p>I try to solve a math problem and my output sensitivity has a little different such as 0.07. And then I compare <code>pow()</code> and <code>powf()</code> in my code and I see this sensitivity. The code as follows:</p>\n\n<pre><code>int main()\n{\n\n    int terms, sign=-1;\n    double x, operation=0.0;\n\n    printf(\"Please enter the number of terms : \");\n    scanf_s(\"%d\", &amp;terms);\n\n    while (terms &lt;= 0)\n    {\n        printf(\"Please re-enter the number of terms :\");\n        scanf_s(\"%d\", &amp;terms);\n    }\n\n    printf(\"Please enter a value for x :\");\n    scanf_s(\"%lf\", &amp;x);\n\n    for (int i = 1; i &lt;= terms; i++)\n    {\n    sign = sign * (-1);\n    operation = operation + sign * powf(x + i / 10.0, (2 * i) - 1) / (2 * i);\n    }\n    printf(\"The result is : %.2lf\\n\", operation);\n\n    system(\"pause\");\n    return 0;\n\n}\n</code></pre>\n\n<p>Sample:</p>\n\n<pre><code>terms  : 10\n\nx : 1.1\n\noutput  : `-59783.61` with `powf`\n\noutput  : `-59783.67` with `pow`\n</code></pre>\n\n<p>What is the difference between to these functions?</p>\n"}, {"tags": ["c", "stack", "printf", "constants", "memory-layout"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1540958416, "post_id": 53076023, "comment_id": 93050061, "body": "Are you sayting you expect the compiler to give a warning when you pass a non const where a const is expected?"}, {"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1541011799, "post_id": 53076023, "comment_id": 93077265, "body": "@John3136 Yes that is what i would expect."}], "answers": [{"comments": [{"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1541011712, "post_id": 53076327, "comment_id": 93077235, "body": "Thank you for the clarification.  I already accepted your answer since it made sense, but do you have a link where i can learn more about this?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1541012753, "post_id": 53076327, "comment_id": 93077638, "body": "@bwebb: Any good C programming text :) (But not K&amp;R; it&#39;s too old.)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1541013096, "post_id": 53076327, "comment_id": 93077791, "body": "Having said that, I don&#39;t have any recommendations. Sorry."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 3, "last_activity_date": 1540960593, "last_edit_date": 1540960593, "creation_date": 1540960237, "answer_id": 53076327, "question_id": 53076023, "link": "https://stackoverflow.com/questions/53076023/const-data-on-the-stack/53076327#53076327", "title": "Const data on the stack?", "body": "<p>When a function prototype includes a pointer to a <code>const</code>-qualified object, that means the function promises to not attempt to modify the pointed at contents. It does not mean that only a pointer to a <code>const</code> object (whatever that might be) can be accepted.</p>\n\n<p>On the other hand, if the prototype includes a pointer to an object which is <em>not</em> <code>const</code>-qualified, that means it might attempt to modify the contents. In that case, passing a pointer to an immutable object would cause Undefined Behaviour. Most compilers will warn you if you try to pass a pointer to a <code>const</code>-qualified object (if you enable warnings) since a <code>const</code>-qualified pointer might point to an immutable object.</p>\n\n<p>Generally speaking, you should regard <code>const</code> to mean \"I promise not to modify this\" rather than \"this cannot be modified\".</p>\n"}], "owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 53076327, "answer_count": 1, "score": 0, "last_activity_date": 1540960593, "creation_date": 1540957897, "question_id": 53076023, "link": "https://stackoverflow.com/questions/53076023/const-data-on-the-stack", "title": "Const data on the stack?", "body": "<p>I was going to answer someones question about printf accepting a char *, so i built a little test program and had my own question.  compiled on codechef.com/ide with GCC 6.3</p>\n\n<p><a href=\"https://stackoverflow.com/questions/53075596/pass-the-char-directly-to-printf\">Pass the char* directly to printf</a>\nI Think the questions is asking what happened to the \"missing\" const qualifier right?\n<a href=\"http://man7.org/linux/man-pages/man3/printf.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/printf.3.html</a></p>\n\n<pre><code>char * str1 = \"This is string 1\\n\";\nchar str2[] = \"This is string 2\\n\";\nint main(void) {\n\n    char str3[100] = \"This is string 3\\n\";\n    char * str4 = \"This is string 4\\n\";\n\n    str3[8] = 'c';\n\n    printf(str1);\n    printf(str2);\n    printf(str3);\n    printf(str4);\n\n    return 0;\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<p>This is string 1</p>\n\n<p>This is a string 2</p>\n\n<p>This is ctring 3</p>\n\n<p>This is string 4</p>\n\n<p>I was considering the memory layout of the program and i got even more confused.  <a href=\"https://www.geeksforgeeks.org/memory-layout-of-c-program/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/memory-layout-of-c-program/</a></p>\n\n<p>str1 is a pointer to the string literal \"this is a string 1\\n\".  str1 lives in data and points to the string literal that lives in ?? (i assumed also initialized data segment)\n<a href=\"https://stackoverflow.com/questions/1704893/how-is-read-only-memory-implemented-in-c\">How is read-only memory implemented in C?</a></p>\n\n<p>str2 is like str1 as far as the memory layout goes.</p>\n\n<p>str3 is where it gets interesting.  str3 lives on the stack, 100 chars wide, and is assigned char[0] = 'T', char[1] = 'h', etc with the declaration/assignment.  This should NOT BE CONST.  str3's declaration and assignment are declaring 100 chars on teh stack and assigning them values from data (either rom data segment or initialized data segment or text?).</p>\n\n<p>str4 is a pointer on the stack, pointing to data segment memory.  This is like str1 and str2, not too interesting.</p>\n\n<p>Then assigning str3[8] = 'c' just to test/verify/demonstrate that the stack memory for str3 is NOT read only before printfing.</p>\n\n<p>I would expect 1,2,4 to work, but why did 3 work (not even a compiler warning???).  I am probably incorrectly assuming that const is synonymous with \"read only\" because there is no way that str3 is \"read only\" if I just wrote to it.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/37080237/is-there-a-read-only-memory-in-the-stack-for-const-variable-declared-in-a-functi?rq=1\">Is there a read only memory in the stack for const variable declared in a function?</a></p>\n\n<p>Can anyone explain to me why str3 didnt throw a warning or error?  str3 is not a const char *, either the compiler optimized it out (changing the assignment to \"This is ctring 3\\n\") or warnings were suppressed (also doesn't seem likely) or i have a fundamental misunderstanding of the cost keyword.  How is stack memory const?  Maybe one or more of my assumptions are wrong.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1923, "user_id": 3033441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5128fcd3a14587660ea0cb737aa54143?s=128&d=identicon&r=PG&f=1", "display_name": "lakshayg", "link": "https://stackoverflow.com/users/3033441/lakshayg"}, "edited": false, "score": 2, "creation_date": 1540956478, "post_id": 53075810, "comment_id": 93049670, "body": "<i>&quot;... code isn&#39;t working properly and behaving undefined&quot;</i> could you describe the exact problem you are seeing?"}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1540956502, "post_id": 53075810, "comment_id": 93049672, "body": "How exactly is it behaving undefined? What error are you seeing. Also, please post the calling code as your declaration of the board you pass in might be the issue."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540957092, "post_id": 53075810, "comment_id": 93049797, "body": "If you are passing a <b><i>fully initialized</i></b> <code>board</code> array to your function, your function will work as you describe."}, {"owner": {"reputation": 630, "user_id": 4036474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d14f2e960a6cee6a3831edfa089d34?s=128&d=identicon&r=PG&f=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/4036474/rich"}, "edited": false, "score": 2, "creation_date": 1540957347, "post_id": 53075810, "comment_id": 93049835, "body": "Initialization doesn&#39;t really matter.  The function is going to take the pointer input and walk memory looking for that underscore  It&#39;s more likely that the parameter passed is incorrect.  An actual functional example would show this."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540957675, "post_id": 53075810, "comment_id": 93049894, "body": "Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.."}, {"owner": {"reputation": 21, "user_id": 10508953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2615a105ccf8d8ac65c1baad5a1a1f?s=128&d=identicon&r=PG&f=1", "display_name": "steakfry", "link": "https://stackoverflow.com/users/10508953/steakfry"}, "edited": false, "score": 0, "creation_date": 1540957983, "post_id": 53075810, "comment_id": 93049959, "body": "Um it&#39;s just not returning true when the array is full"}, {"owner": {"reputation": 21, "user_id": 10508953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2615a105ccf8d8ac65c1baad5a1a1f?s=128&d=identicon&r=PG&f=1", "display_name": "steakfry", "link": "https://stackoverflow.com/users/10508953/steakfry"}, "edited": false, "score": 0, "creation_date": 1540957997, "post_id": 53075810, "comment_id": 93049965, "body": "like the thing is always returning false"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 630, "user_id": 4036474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d14f2e960a6cee6a3831edfa089d34?s=128&d=identicon&r=PG&f=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/4036474/rich"}, "edited": false, "score": 0, "creation_date": 1540958657, "post_id": 53075810, "comment_id": 93050116, "body": "@Rich - initialization DOES matter, if <code>board</code> is not fully initialized <code>if (board[i][j] == &#39;_&#39;)</code> accesses an <i>indeterminate</i> value invoking <i>Undefined Behavior</i>. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#J.2\" rel=\"nofollow noreferrer\">C11 Standard - J.2 Undefined behavior</a> <i>&quot;The value of an object with automatic storage duration is used while it is indeterminate (6.2.4, 6.7.9, 6.8).</i>&quot;"}, {"owner": {"reputation": 21, "user_id": 10508953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2615a105ccf8d8ac65c1baad5a1a1f?s=128&d=identicon&r=PG&f=1", "display_name": "steakfry", "link": "https://stackoverflow.com/users/10508953/steakfry"}, "edited": false, "score": 0, "creation_date": 1540959004, "post_id": 53075810, "comment_id": 93050207, "body": "board is initialized as char"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 0, "creation_date": 1540959215, "post_id": 53075810, "comment_id": 93050259, "body": "@steakfry: pls post code where you initialize the array and call the function <code>check_table_full</code>"}, {"owner": {"reputation": 21, "user_id": 10508953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2615a105ccf8d8ac65c1baad5a1a1f?s=128&d=identicon&r=PG&f=1", "display_name": "steakfry", "link": "https://stackoverflow.com/users/10508953/steakfry"}, "edited": false, "score": 0, "creation_date": 1540961909, "post_id": 53075810, "comment_id": 93050891, "body": "ok i post it now"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540969684, "post_id": 53075810, "comment_id": 93053517, "body": "You may want to check <a href=\"http://paste.opensuse.org/91387032\" rel=\"nofollow noreferrer\">Helpful Hints for You</a> for determining row-value-winner, etc.. (this is similar to another recent question)"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1540969978, "post_id": 53075810, "comment_id": 93053623, "body": "You still do not show the initialization of the array. Also there is no definition."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1540970008, "post_id": 53075810, "comment_id": 93053632, "body": "When you run it in a debugger, at which index does the function detect an <code>&#39;_&#39;</code> that should not be there?"}, {"owner": {"reputation": 630, "user_id": 4036474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d14f2e960a6cee6a3831edfa089d34?s=128&d=identicon&r=PG&f=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/4036474/rich"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541038367, "post_id": 53075810, "comment_id": 93085326, "body": "@DavidC.Rankin In the context he&#39;s given us, it doesn&#39;t.  &quot;Undefined&quot; is exactly what you&#39;ll get, but that doesn&#39;t mean the code will do something random.  It just means that it <i>might</i> see an underscore where he doesn&#39;t intend there to be one.  Bottom line, this question has received way more attention than it should given the lack of context."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541039908, "post_id": 53075810, "comment_id": 93085613, "body": "I agree with you. It is the old -- what happens after undefined behavior is invoked conundrum. In this case, there is a comparison between (1) some indeterminate value and (2) an <code>&#39;_&#39;</code>. But then there is the whole standard view of undefined behavior and where the defined execution of your code ends. The standard simply says once undefined behavior is invoked -- all bets are off. It doesn&#39;t get into shades or severity of undefined behavior -- and that is the correct approach. You and I both know here, it is either equal or it isn&#39;t, but splitting undefined behavior hairs, just ain&#39;t worth it."}], "owner": {"reputation": 21, "user_id": 10508953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2615a105ccf8d8ac65c1baad5a1a1f?s=128&d=identicon&r=PG&f=1", "display_name": "steakfry", "link": "https://stackoverflow.com/users/10508953/steakfry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540969514, "creation_date": 1540956194, "last_edit_date": 1540961946, "question_id": 53075810, "link": "https://stackoverflow.com/questions/53075810/checking-to-see-if-an-array-3x3-is-all-not-a-certain-character", "title": "Checking to see if an array 3x3 is all not a certain character?", "body": "<pre><code>bool check_table_full(char board[SIZE][SIZE]) {\n  for (int i = 0; i &lt; SIZE; i++) {\n    for (int j = 0; j &lt; SIZE; j++) {\n\n      if (board[i][j] == '_')\n        return false;\n    }\n  }\n  return true;\n}\n</code></pre>\n\n<p>I am trying to return true if all elements are NOT an underscore but this code isn't working properly and behaving undefined, and I am lost.</p>\n\n<pre><code>bool check_end_of_game(char board[SIZE][SIZE]){\nif (check_three_in_a_row(board)!=0 || check_table_full(board) == true) \nreturn true;\nelse\nreturn false;\n\n}  \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1540955276, "post_id": 53075596, "comment_id": 93049444, "body": "Doing that is a really bad idea, btw. What if <code>s</code> points to a string like <code>&quot;foo %d bar&quot;</code>? Use <code>fputs(s, stdout);</code> to print just a string."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1540969272, "post_id": 53075596, "comment_id": 93053343, "body": "It can work. You can even add a <i>shift-state</i> as an integer before <code>s</code> to tell <code>printif</code> which character to begin output with. But it isn&#39;t wise to do ti that way, and it makes code much more difficult to read and maintain. Since you have a string in an array, simply us the <code>&quot;%s&quot;</code> <i>format conversion-specifier</i> to output the contents of <code>s</code>. Doing so provides access to all modifiers available, (e.g. <i>field-width</i> modifier, padding and preservation of space for signed values, etc..)"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1540969369, "post_id": 53075653, "comment_id": 93053384, "body": "Except here we do not have a pointer to a <i>string literal</i>, we have an array that was initialized using a <i>string literal</i>, but for all relevant purpose here is just an array containing a string."}], "tags": [], "owner": {"reputation": 812, "user_id": 10492002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTAmh.png?s=128&g=1", "display_name": "Cyber", "link": "https://stackoverflow.com/users/10492002/cyber"}, "is_accepted": false, "score": 1, "last_activity_date": 1540954903, "creation_date": 1540954903, "answer_id": 53075653, "question_id": 53075596, "link": "https://stackoverflow.com/questions/53075596/pass-the-char-directly-to-printf/53075653#53075653", "title": "Pass the char* directly to printf", "body": "<p>A string literal in C is a pointer to <code>const char</code>. <code>printf</code> <a href=\"https://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">takes</a> a pointer to <code>const char</code> (plus an optional list of additional arguments). Passing it directly or through a variable makes no difference, a pointer is a pointer, it's just a number.</p>\n"}], "owner": {"reputation": 11, "user_id": 7372286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9acdd8896b38820037465f55f312557b?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/7372286/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540954903, "creation_date": 1540954294, "question_id": 53075596, "link": "https://stackoverflow.com/questions/53075596/pass-the-char-directly-to-printf", "title": "Pass the char* directly to printf", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nchar s[]=\"sfksfls\\n\";\nvoid main()\n{\n        printf(s);\n\n}\n</code></pre>\n\n<p>Why it can work? I just input the char pointer to printf</p>\n"}, {"tags": ["c", "visual-studio", "mingw"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540953841, "post_id": 53075502, "comment_id": 93049183, "body": "Rather than looking at the text and get &quot;I can get a white space &quot; or &quot;character &#39;a&#39; as following picture&quot;, redirect output to a file and  report its binary dump."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1540973832, "post_id": 53075502, "comment_id": 93055270, "body": "I get blank space in VS 2017. Check again."}, {"owner": {"reputation": 159, "user_id": 10352428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619aa63a0625944a2aa2fd0fdacb95cb?s=128&d=identicon&r=PG", "display_name": "\u841d\u8389w", "link": "https://stackoverflow.com/users/10352428/%e8%90%9d%e8%8e%89w"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1540974243, "post_id": 53075502, "comment_id": 93055464, "body": "@Barmak Shemirani  As a matter of fact, I have called my two friends who have VS 2017 to test this, one&#39;s program crashed, and another&#39;s also got blank space. I always get &#39;a&#39;, I have checked it many times at different days, or I will not ask so. Maybe this is a problem caused by my environment?"}], "answers": [{"comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 5, "creation_date": 1540953742, "post_id": 53075536, "comment_id": 93049148, "body": "NUL is not EOF. EOF is an OOB value/state (ie. -1 from various read functions)."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1540953831, "post_id": 53075536, "comment_id": 93049180, "body": "Is it really undefined behavior? I would think it&#39;s not."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1540953914, "post_id": 53075536, "comment_id": 93049200, "body": "<code>printf(&quot;%c&quot;, &#39;\\0&#39;);</code> is not UB,but the glyph shown on the screen is implementation defined - by the terminal -not C."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1540956979, "post_id": 53075536, "comment_id": 93049769, "body": "Since <code>stdout</code> is not opened in binary mode, writing a character other than a printing character, tab or newline has unspecified effect; it might or might not be printed and it might be substituted with a different character (independent of rendering). So technically it&#39;s unspecified behaviour, not just unspecified rendering. But in practice, it will write a NUL byte which will then be rendered in some unspecified way by the terminal emulator or IDE."}], "tags": [], "owner": {"reputation": 401, "user_id": 5843327, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xye55.jpg?s=128&g=1", "display_name": "conchoecia", "link": "https://stackoverflow.com/users/5843327/conchoecia"}, "is_accepted": false, "score": -1, "last_activity_date": 1540953867, "last_edit_date": 1540953867, "creation_date": 1540953725, "answer_id": 53075536, "question_id": 53075502, "link": "https://stackoverflow.com/questions/53075502/why-is-there-now-a-difference-when-printfc-0-in-mingw-and-vs-2017/53075536#53075536", "title": "Why is there now a difference when printf(&quot;%c&quot;, &#39;\\0&#39;) in mingw and vs 2017?", "body": "<p>It probably has to do with the fact that you're trying to print the <code>'\\0'</code> character. That may cause an undefined behavior. You might try only printing normal characters such as <code>'A'</code>, <code>'t'</code>, <code>'.'</code>, et cetera.</p>\n"}], "owner": {"reputation": 159, "user_id": 10352428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619aa63a0625944a2aa2fd0fdacb95cb?s=128&d=identicon&r=PG", "display_name": "\u841d\u8389w", "link": "https://stackoverflow.com/users/10352428/%e8%90%9d%e8%8e%89w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540953867, "creation_date": 1540953485, "question_id": 53075502, "link": "https://stackoverflow.com/questions/53075502/why-is-there-now-a-difference-when-printfc-0-in-mingw-and-vs-2017", "title": "Why is there now a difference when printf(&quot;%c&quot;, &#39;\\0&#39;) in mingw and vs 2017?", "body": "<p>I used two kinds of compiler to compile same code: </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n    printf(\"%c\", '\\0');\n    return 0;\n}\n</code></pre>\n\n<p>And I will get different results compiled by mingw and vs2017. <br>\nIn mingw, I can get a white space in the console. But in vs2017, I got a character 'a' as following picture. <br></p>\n\n<p><a href=\"https://i.stack.imgur.com/I9WLI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I9WLI.png\" alt=\"It may not print correctly. \"></a></p>\n\n<p>Is this a bug in vs2017 or the version of my vs2017 is too low? </p>\n"}, {"tags": ["c", "data-structures", "binary-tree"], "comments": [{"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1540953215, "post_id": 53075376, "comment_id": 93049016, "body": "You have an obvious error in the <code>go</code> function. Your recursive call is <code>go(t,cb)</code>, which just passes the same node to the recursive call. I think you meant <code>go(p,cb)</code>."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1541014501, "post_id": 53075376, "comment_id": 93078439, "body": "Other users marked your question for low quality and need for improvement. I re-worded/formatted your input to make it easier to read/understand. Please review my changes to ensure they reflect your intentions. Feel free to drop me a comment in case you have further questions or feedback for me."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10516546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69570b7c2bdc5397b3a7fe1b6f1ba15?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Rodrigues", "link": "https://stackoverflow.com/users/10516546/andr%c3%a9-rodrigues"}, "edited": false, "score": 0, "creation_date": 1540962407, "post_id": 53076305, "comment_id": 93050988, "body": "Thank you for your answer! It was a really silly mistake. But other error persists. The output is &lt;21869&lt;21869&gt;&gt; This is not what I&#39;ve expected"}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "reply_to_user": {"reputation": 3, "user_id": 10516546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69570b7c2bdc5397b3a7fe1b6f1ba15?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Rodrigues", "link": "https://stackoverflow.com/users/10516546/andr%c3%a9-rodrigues"}, "edited": false, "score": 0, "creation_date": 1540962622, "post_id": 53076305, "comment_id": 93051045, "body": "@Andr&#233;Rodrigues post another question with a Minimal, Complete, and Verifiable example and we will try to help you"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 3, "user_id": 10516546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69570b7c2bdc5397b3a7fe1b6f1ba15?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Rodrigues", "link": "https://stackoverflow.com/users/10516546/andr%c3%a9-rodrigues"}, "edited": false, "score": 0, "creation_date": 1541024524, "post_id": 53076305, "comment_id": 93082210, "body": "@Andr&#233;Rodrigues You should learn how to use the debugger. By single-stepping your code, you can find errors like this much more quickly than you can by writing a question and asking somebody else to solve the problem for you. Plus, you learn more that way."}], "tags": [], "owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "is_accepted": true, "score": 0, "last_activity_date": 1540960096, "creation_date": 1540960096, "answer_id": 53076305, "question_id": 53075376, "link": "https://stackoverflow.com/questions/53075376/generic-variable-tree-error-infinity-loop/53076305#53076305", "title": "Generic variable tree Error infinity loop", "body": "<p>Here in <code>go</code> function, you are making a recursive call without changing the parameters that eventually lead to infinite recursion.  </p>\n\n<pre><code>  void go(Var_Tree* t, void (*cb)(void*))\n{\n    Var_Tree* p;\n    cb(t-&gt;info);\n    for(p = t-&gt;first; p != NULL; p = p-&gt;next)\n        go(t,cb); //&lt;-----here you are calling the same \n    function with the same parameter that leads to an infinite loop\n    printf(\"&gt;\");\n}\n</code></pre>\n\n<p>You should pass the value of <code>p</code> in place of <code>t</code>.</p>\n\n<pre><code>void go(Var_Tree* t, void (*cb)(void*))\n{\n    Var_Tree* p;\n    cb(t-&gt;info);\n    for(p = t-&gt;first; p != NULL; p = p-&gt;next)\n        go(p,cb);  //&lt;----change t to p\n    printf(\"&gt;\");\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10516546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69570b7c2bdc5397b3a7fe1b6f1ba15?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Rodrigues", "link": "https://stackoverflow.com/users/10516546/andr%c3%a9-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 53076305, "answer_count": 1, "score": -1, "last_activity_date": 1541014491, "creation_date": 1540952426, "last_edit_date": 1541014491, "question_id": 53075376, "link": "https://stackoverflow.com/questions/53075376/generic-variable-tree-error-infinity-loop", "title": "Generic variable tree Error infinity loop", "body": "<p>I am creating a variable tree, but I've got an error, seemingly in the insert or print_wevr function. </p>\n\n<p>When I run the program I get an infinite loop. </p>\n\n<p>How can I go about this?</p>\n\n<pre><code>/*5 - VarTrees*/\n\n/*var_trees.c*/\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"var_trees.h\"\n\n/*Defining the struture of variable tree.\n * The nodes has tree fields: \n      info: an generic information\n      first: the first child-node\n      next: the next sibling-node\n */\n\nstruct var_tree{\n    void* info;\n    Var_Tree* first;\n    Var_Tree* next;\n};\n\n/*Create the tree*/\nVar_Tree* create(void* info)\n{\n    Var_Tree* t = (Var_Tree*) malloc(sizeof(Var_Tree));\n    t-&gt;info = info;\n    t-&gt;first = NULL;\n    t-&gt;next = NULL;\n    return t;\n}\n\n/*Insert a node*/\nvoid insert(Var_Tree* t,Var_Tree* st)\n{\n    st-&gt;next = t-&gt;first;\n    t-&gt;first = st;\n}\n\n/*go_through the tree*/\nvoid go(Var_Tree* t, void (*cb)(void*))\n{\n    Var_Tree* p;\n    cb(t-&gt;info);\n    for(p = t-&gt;first; p != NULL; p = p-&gt;next)\n        go(t,cb);\n    printf(\"&gt;\");\n}\n\n/*Remove a node*/\n//void remov(Var_Tree* t, void* info);\n\n\n/*5 - VarTrees*/\n\n/*main.c*/\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"var_trees.h\"\n\nVar_Tree* create_int(int info)\n{\n    return create(&amp;info);\n}\n\nvoid print_int(void* info)\n{\n    int* t = (int*) info;\n    printf(\"&lt;%d\",*t);\n}\n\nint main(void)\n{\n    Var_Tree* a = create_int(4);\n    Var_Tree* b = create_int(3);\n    Var_Tree* c = create_int(23);\n    Var_Tree* d = create_int(1);\n    Var_Tree* e = create_int(2);\n\n    insert(a,b);\n    go(a,print_tree);\n}\n</code></pre>\n\n<p>The function <code>create_int</code> is a function for creating a node with the field info as int.</p>\n\n<p><code>print_int</code> is a callback function that prints an integer (the '&lt;' creates a type of textual notation for trees).</p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540953568, "post_id": 53075327, "comment_id": 93049104, "body": "Under linux, this is defined in <code>pthread.h</code>, wrapped with <code>#ifdef __USE_GNU</code> [which is set when  you do <code>#define _GNU_SOURCE</code>. Other <code>.h</code> files treat the definition as optional (e.g. <code>#ifdef PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP</code>). So, you may need do a recursive <code>grep</code> in <code>&#47;usr&#47;include</code>, etc. to find the definition. It <i>may</i> be optional/unimplemented in macOS. Or, you need something more than just <code>_GNU_SOURCE</code>"}, {"owner": {"reputation": 133, "user_id": 6156046, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/683c7c6431de0d7568964323185ffadb?s=128&d=identicon&r=PG&f=1", "display_name": "yeeeeee", "link": "https://stackoverflow.com/users/6156046/yeeeeee"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540953882, "post_id": 53075327, "comment_id": 93049193, "body": "I just went to the <code>&#47;usr</code> folder, and <code>include</code> doesn&#39;t seem to exist. According to the internet, macOS no longer contains it. I have Xcode command line tools installed. Where may I find what I need to include pthreads? If they&#39;re optional is it possible to get them?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540958727, "post_id": 53075327, "comment_id": 93050136, "body": "I did some web search and it appears that <code>-pthread</code> is required for compiling with <code>clang</code> [and some pages suggest <code>-lpthread</code> when linking]. I&#39;d defer to the two new answers you just got. The actual file could be in some really screwy place that isn&#39;t even under <code>&#47;usr</code>. With the right compiler/preprocessor trace options, they could tell you where the file is (or you could run <code>clang</code> under <code>strace</code>). But, I think the answers below give you your best shot (i.e.) initialize it early, dynamically. It&#39;s portable and [probably] not worth diddling more with macOS on this."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540960024, "post_id": 53075997, "comment_id": 93050434, "body": "The <code>_np</code> or <code>_NP</code> suffixes to thread functions etc is intended to be used to indicate &#39;non-portable&#39; extensions compared with the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/toc.htm\" rel=\"nofollow noreferrer\">POSIX</a> specification \u2014 but I confess I couldn&#39;t find a statement to that effect in the standard (which isn&#39;t a big surprise).  I probably read about it in a book on pthreads \u2014 maybe the one by <a href=\"https://smile.amazon.com/dp/0201633922/\" rel=\"nofollow noreferrer\">Butenhof</a>."}], "tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": false, "score": 3, "last_activity_date": 1540957668, "creation_date": 1540957668, "answer_id": 53075997, "question_id": 53075327, "link": "https://stackoverflow.com/questions/53075327/use-of-undeclared-identifier-pthread-recursive-mutex-initializer-np/53075997#53075997", "title": "Use of undeclared identifier &#39;PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP&#39;", "body": "<p><code>PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP</code> is a non-standard extension, and evidently MacOS doesn't support it.</p>\n\n<p>You should instead initialise your mutex at the beginning of <code>main()</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n\npthread_mutex_t request_mutex;\n\nint init_recursive_mutex(pthread_mutex_t *mutex)\n{\n    pthread_mutexattr_t attr;\n    int r;\n\n    r = pthread_mutexattr_init(&amp;attr);\n    if (r != 0)\n        return r;\n\n    r = pthread_mutexattr_settype(&amp;attr, PTHREAD_MUTEX_RECURSIVE);\n\n    if (r == 0)\n        r = pthread_mutex_init(mutex, &amp;attr);\n\n    pthread_mutexattr_destroy(&amp;attr);\n\n    return r;\n}\n\nint main(int argc, char* argv[])\n{\n    int r;\n\n    r = init_recursive_mutex(&amp;request_mutex);\n    if (r != 0)\n    {\n        fprintf(stderr, \"Failed to initialise request_mutex: %s\\n\", strerror(r));\n        return 1;\n    }\n\n    /* ... */\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": true, "score": 1, "last_activity_date": 1540961523, "last_edit_date": 1540961523, "creation_date": 1540957968, "answer_id": 53076031, "question_id": 53075327, "link": "https://stackoverflow.com/questions/53075327/use-of-undeclared-identifier-pthread-recursive-mutex-initializer-np/53076031#53076031", "title": "Use of undeclared identifier &#39;PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP&#39;", "body": "<p><code>_GNU_SOURCE</code> will not do anything to reveal library extensions on Mac OS, because Mac OS isn't from the GNU project and doesn't use the GNU C library.</p>\n\n<p>On Mac OS, the \"reveal extensions\" feature selection macro is <code>_DARWIN_C_SOURCE</code>.</p>\n\n<p>However, this will not necessarily reveal a <code>PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP</code>; I don't think it exists. Of course, the recursive mutex type <code>PTHREAD_MUTEX_RECURSIVE</code> exists; only there is no initializer to set one up statically. The code will have to be ported to explicitly call <code>pthread_mutex_init</code> to initialize its recursive mutexes.</p>\n\n<p>Another idea is to just write code that doesn't require recursive mutexes. Recursive mutexes are for \"scatter brained\" concurrent programming. \"Well, I don't know whether I already have this lock or not, so I will grab it just in case.\" The sane alternative is to design the program so that you know!</p>\n\n<p>Recursive mutexes are essentially a band-aid solution for certain situations that arise when when legacy single-threaded code is being converted to multithreading. Recursive mutexes are out of place in a completely new design.</p>\n\n<p>If you avoid recursive mutexes, you can use the standard <code>PTHREAD_MUTEX_INITIALIZER</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4548, "user_id": 814297, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ebe0ccc07e8cd45d527cd0c7d743f740?s=128&d=identicon&r=PG", "display_name": "Andrey Starodubtsev", "link": "https://stackoverflow.com/users/814297/andrey-starodubtsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1593811472, "creation_date": 1593811472, "answer_id": 62722859, "question_id": 53075327, "link": "https://stackoverflow.com/questions/53075327/use-of-undeclared-identifier-pthread-recursive-mutex-initializer-np/62722859#62722859", "title": "Use of undeclared identifier &#39;PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP&#39;", "body": "<p><code>PTHREAD_RECURSIVE_MUTEX_INITIALIZER</code> is available on OSX, but only starting from 10.7, so if you have to support earlier versions, you have to either initialize mutex directly before use (like @caf suggested in <a href=\"https://stackoverflow.com/a/53075997/814297\">this answer</a>) or initialize it lazily using <code>pthread_once</code>:</p>\n<pre><code>#if ((__MAC_OS_X_VERSION_MIN_REQUIRED &amp;&amp; __MAC_OS_X_VERSION_MIN_REQUIRED &gt;= 1070) || (__IPHONE_OS_VERSION_MIN_REQUIRED &amp;&amp; __IPHONE_OS_VERSION_MIN_REQUIRED &gt;= 50000)) || defined(__DRIVERKIT_VERSION_MIN_REQUIRED)\n\nstatic pthread_mutex_t s_mutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER;\n\nint lock() {\n  return pthread_mutex_lock(&amp;s_mutex);\n}\n\nint unlock() {\n  return pthread_mutex_unlock(&amp;s_mutex);\n}\n\n#else\n\nstatic pthread_mutex_t s_mutex;\nstatic pthread_once_t s_mutex_init = PTHREAD_ONCE_INIT;\n\nstatic void init_mutex() {\n  init_recursive_mutex(&amp;s_mutex);\n} \n\nint lock() {\n  pthread_once(&amp;s_mutex_init, init_mutex);\n  return pthread_mutex_lock(&amp;s_mutex);\n} \n\nint unlock() {\n  return pthread_mutex_unlock(&amp;s_mutex);\n}\n\n#endif\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 6156046, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/683c7c6431de0d7568964323185ffadb?s=128&d=identicon&r=PG&f=1", "display_name": "yeeeeee", "link": "https://stackoverflow.com/users/6156046/yeeeeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1720, "favorite_count": 0, "accepted_answer_id": 53076031, "answer_count": 3, "score": 1, "last_activity_date": 1593811472, "creation_date": 1540951990, "last_edit_date": 1541050736, "question_id": 53075327, "link": "https://stackoverflow.com/questions/53075327/use-of-undeclared-identifier-pthread-recursive-mutex-initializer-np", "title": "Use of undeclared identifier &#39;PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP&#39;", "body": "<p>I'm trying to compile using gcc on macOS 10.14 with gcc in the Terminal.</p>\n\n<p>I've included <code>#define _GNU_SOURCE</code> at the top of my C program, and <code>#include &lt;pthread.h&gt;</code></p>\n\n<p>But when I use the following: <code>gcc input.c -o output -lpthread</code> or <code>-pthread</code> I get the following error. I've also tried with <code>-std=c99</code>:</p>\n\n<pre><code>input.c:50:33: error: use of undeclared identifier\n'PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP'\npthread_mutex_t request_mutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP;\n</code></pre>\n\n<hr>\n\n<p>Here's a summary of my code:</p>\n\n<p>input.c:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdlib.h&gt;\n\u2026\n#include &lt;pthread.h&gt;\n\npthread_mutex_t request_mutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP;\n\nint main(int argc, char* argv[])\n{\n  ...\n}\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>I was able to get the code working by removing <code>_NP</code> at the end of <code>PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP</code>. Thanks for everyone's suggestions.</p>\n"}, {"tags": ["c", "data-structures", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540951949, "post_id": 53075303, "comment_id": 93048764, "body": "Make sure you copy the names into the <code>tgt</code> structures so that when your next input overwrites the previous input, it doesn&#39;t rewrite the stored data.  That probably means dynamic memory allocation and copying (or using <code>strdup()</code>), rather than simply storing pointers."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540952278, "post_id": 53075303, "comment_id": 93048830, "body": "<code>size_t = bufsize = 0;</code>?? maybe <code>size_t bufsize = 0;</code>?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1540986695, "post_id": 53075303, "comment_id": 93062137, "body": "There is only <i>one</i> <code>linelen = getline(&amp;line, &amp;bufsize, makefile);</code> , and it is <i>not</i> inside the loop."}], "owner": {"reputation": 39, "user_id": 9644285, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jae", "link": "https://stackoverflow.com/users/9644285/jae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540952962, "creation_date": 1540951770, "last_edit_date": 1540952962, "question_id": 53075303, "link": "https://stackoverflow.com/questions/53075303/storing-different-data-fields-and-linking-them-in-c", "title": "Storing different data fields and linking them in C", "body": "<p>What I currently have:\nIn a separate .c file named main.c, I have a main function that looks like:</p>\n\n<pre><code>int main(int argc, const char** argv){\n  FILE* makefile = fopen(\"./testfile\",\"r\");\n  size_t bufsize = 0;\n  char* line = NULL;\n  ssize_t linelen = getline(&amp;line, &amp;bufsize, makefile);\n  while (linelen != -1){\n    if(line[linelen-1] == '\\n'){\n      linelen -=1;\n      line[linelen] = '\\0';\n    }\n    if(line[0] != '\\t'){\n      storetgt(&amp;line[0]);\n    } else if (line[0] == '\\t') {\n      storerules(&amp;line[0]);\n    }\n  }\n}\n</code></pre>\n\n<p>Here, the text file named \"testfile\" looks like:</p>\n\n<pre><code>A:\n   echo A\nB:\n   echo B\nc:\n   echo C\n</code></pre>\n\n<p>and it will be parsed through line by line, storing testfile's data inside line (at line #4). If the first element of the line is not a tab character, then main() will call a function named storetgt and if the first element of the line is a tab character, then main() will call a function named storerules (both from another .c file named tgt.c which contains framework to collect tgt name and rules).\nWhat I'm having trouble with is the storing part and linking part in tgt.c; My code is as follows:</p>\n\n<pre><code>typedef struct tgt_st {\n  char* name;\n  string_list rules;\n  struct tgt_st *next;\n}tgt;\n\ntypedef struct string_list {\nchar* rules;\nstruct string_list* next;\n}string_list;\n\ntgt* createtgt(char* name, string_list rules, tgt* next){\n  tgt* new_node = (tgt*)malloc(sizeof(tgt));\n  new_node -&gt; name = name;\n  new_node -&gt; rules = rules;\n  new_node -&gt; next = next;\n  return new_node;\n}\n\ntgt* createrules(string_list rules, tgt* next){\n  tgt* new_node = (tgt*)malloc(sizeof(target));\n  new_node -&gt; rules = rules;\n  new_node -&gt; next = next;\n  return new_node;\n} \nvoid storetgt(char* line){\n  int argcp = 0;\n  char** args = arg_parse(line,&amp;argcp);\n  if(strcmp(args[0], \"a:\") == 0){\n    create(args[0],NULL,NULL);\n  }else if(strcmp(args[0], \"b:\") == 0){\n    create(args[0],NULL,NULL);\n  }else if(strcmp(args[0], \"c:\") == 0){\n    create(args[0],NULL,NULL);\n  }\n}\nvoid storerules(char* line){\n  int argcp;\n  char** args = arg_parse(line,&amp;argcp);\n  if(line[0] == '\\t'){\n    storerules(&amp;line[1]);\n  } else {\n    if(strcmp(args[0], \"echo\") == 0 &amp;&amp; strcmp(args[1], \"a\") == 0){\n      createrules(args, NULL);\n    }else if(strcmp[0], \"echo\") == 0 &amp;&amp; strcmp(args[1], \"b\") == 0){\n      createrules(args, NULL);\n    }else if(strcmp[0], \"echo\") == 0 &amp;&amp; strcmp(args[1], \"c\") == 0){\n      createrules(args, NULL);\n    }\n  }\n}//ags is pointer to array of characters that holds arguments.\n</code></pre>\n\n<p>What this seems to be doing is creating bunch of separate nodes that holds different tgt name and another bunch of separate nodes that holds different rules. How can I make it so that tgt node that holds [A:] points to the node that contains [echo A] and so that tgt node that holds [B:] points to the node that contains [echo B] and so on?</p>\n"}, {"tags": ["c", "printf", "user-input"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540951124, "post_id": 53075163, "comment_id": 93048615, "body": "It&#39;s safe to assume that (used properly), <code>printf()</code> and <code>scanf()</code> work correctly.  The difficulty is using them correctly, especially <code>scanf()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1540951320, "post_id": 53075163, "comment_id": 93048660, "body": "Assuming you call this function more than once, then the problem is that <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\"><code>scanf()</code> leaves a newline in the buffer</a>.  I closed the Q as a duplicate of that \u2014 then had second thoughts because I&#39;d not read the question carefully enough, but now I can&#39;t rehammer it closed as a duplicate, but I think that is appropriate after all.  The trouble is that after the first number is read, the newline is left in the input buffer to be read by the <code>scanf(&quot;%c&quot;, &amp;userVar)</code> on the second call, which throws you off."}, {"owner": {"reputation": 411, "user_id": 2355561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c3b43b98852d663878542ad3ff4bff?s=128&d=identicon&r=PG", "display_name": "Austin Stephens", "link": "https://stackoverflow.com/users/2355561/austin-stephens"}, "edited": false, "score": 1, "creation_date": 1540951571, "post_id": 53075163, "comment_id": 93048705, "body": "Among other things, infix[50] is not a valid subscript if 50 is the size the of the array. The last valid subscript is one less than the size of the array. You don&#39;t have to specify array size when you&#39;re passing in arrays (unless it&#39;s a 2d array where you have to specify 2nd dimension)."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1540951430, "post_id": 53075267, "comment_id": 93048681, "body": "That is not a good solution to the problem, even if the diagnosis about &quot;newline in the input&quot; is mostly correct.  Rather than a <code>getchar()</code>, use a blank before the <code>%c</code> in the format string.]"}, {"owner": {"reputation": 1237, "user_id": 1256234, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8hkBI.png?s=128&g=1", "display_name": "Andy J", "link": "https://stackoverflow.com/users/1256234/andy-j"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540952148, "post_id": 53075267, "comment_id": 93048811, "body": "Could you help explain to me why <code>getchar()</code> is a bad solution to the dangling newline?  Thanks!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540952428, "post_id": 53075267, "comment_id": 93048860, "body": "You originally had &#39;before every call to <code>scanf()</code>&#39; \u2014 you subsequently changed &#39;before&#39; to &#39;after&#39;, which is a dramatic difference (and your edit was about a minute after I entered my comment).  I trust you can see why &#39;before&#39; is catastrophically the wrong answer. Using <code>getchar()</code> after the <code>scanf()</code> is less damaging, but also insufficient for bullet-proofing the code.  Suppose the user types <code>a</code>, blank, return; then the <code>getchar()</code> reads the blank and leaves the return in the input buffer \u2014 back to square zero.  So, a loop that reads to newline is better. <i>[\u2026continued\u2026]</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540952665, "post_id": 53075267, "comment_id": 93048900, "body": "<i>[\u2026continuation\u2026]</i> But a space <code>&quot; %c&quot;</code> in the input is also sufficient; it makes <code>scanf()</code> skip over newlines and blanks and tabs until it gets something that isn&#39;t white space.  If the first character read isn&#39;t white space, <code>scanf()</code> is happy with that too; it skips zero or more white space characters."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1540952993, "post_id": 53075267, "comment_id": 93048971, "body": "Actually, the problem would be if the user typed a number and a space and a return, and then the next call to the function would have problems reading the newline if the <code>getchar()</code> read the blank \u2014 the basic issue remains &quot;the user was more inventive than the programmer&quot;."}, {"owner": {"reputation": 1237, "user_id": 1256234, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8hkBI.png?s=128&g=1", "display_name": "Andy J", "link": "https://stackoverflow.com/users/1256234/andy-j"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540953318, "post_id": 53075267, "comment_id": 93049047, "body": "Thanks for your insights.  Sorry about the fast edit; that was actually just a typing mistake caused by &quot;must be first guy to answer&quot;.  I also now understand why the <code>getchar()</code> isn&#39;t a bulletproof solution."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1540953514, "post_id": 53075267, "comment_id": 93049092, "body": "I&#39;m glad you fixed it \u2014 it was horrid unfixed \u2014 and brought me back so I could review my comment and so on.  I should have put something like &quot;You say &#39;add a <code>getchar()</code> <i>before</i> every call to <code>scanf()</code>&#39;; that is not a good solution\u2026&quot; so that it would be simpler for all to see why I objected to your answer, and it would be easy to see that you&#39;d changed it.  Sloppy commenting!  (A good cross-reference on SO is <a href=\"https://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq\">How to read/parse input in C \u2014 the FAQ</a>.)"}], "tags": [], "owner": {"reputation": 1237, "user_id": 1256234, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8hkBI.png?s=128&g=1", "display_name": "Andy J", "link": "https://stackoverflow.com/users/1256234/andy-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1540951493, "last_edit_date": 1540951493, "creation_date": 1540951374, "answer_id": 53075267, "question_id": 53075163, "link": "https://stackoverflow.com/questions/53075163/printf-and-scanf-not-working-properly-c-programming/53075267#53075267", "title": "Printf and scanf not working properly? C programming", "body": "<p>Try adding a <code>getchar();</code> after every call to <code>scanf()</code>.</p>\n\n<p>It's a workaround to the dangling newline character after you press <code>&lt;enter&gt;</code> when using <code>scanf()</code>.</p>\n\n<p>See this <a href=\"https://faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1352443831&amp;id=1043284392\" rel=\"nofollow noreferrer\">FAQ</a> for more info.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10064093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1OZZ.jpg?s=128&g=1", "display_name": "\u4e07\u80fd\u7684\u7fd4\u738b\u5927\u4eba", "link": "https://stackoverflow.com/users/10064093/%e4%b8%87%e8%83%bd%e7%9a%84%e7%bf%94%e7%8e%8b%e5%a4%a7%e4%ba%ba"}, "is_accepted": false, "score": 0, "last_activity_date": 1540957530, "last_edit_date": 1540957530, "creation_date": 1540957128, "answer_id": 53075924, "question_id": 53075163, "link": "https://stackoverflow.com/questions/53075163/printf-and-scanf-not-working-properly-c-programming/53075924#53075924", "title": "Printf and scanf not working properly? C programming", "body": "<p>This <code>uservar</code> may have received the <code>\\n</code> you entered last time. If you have input before this input, please accept the newline with <code>getchar()</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 10466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee10b0722d755af7f2a42de7280ba930?s=128&d=identicon&r=PG&f=1", "display_name": "StudentofCSAH", "link": "https://stackoverflow.com/users/10466467/studentofcsah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "closed_date": 1540957470, "answer_count": 2, "score": 0, "last_activity_date": 1540957530, "creation_date": 1540950389, "question_id": 53075163, "link": "https://stackoverflow.com/questions/53075163/printf-and-scanf-not-working-properly-c-programming", "closed_reason": "Duplicate", "title": "Printf and scanf not working properly? C programming", "body": "<p>I have a function that asks the user for user variable and user number.</p>\n\n<pre><code>void numReplace(char infix[50])\n{\n    char userVar;\n    int userNum;\n\n    printf(\"Please enter the variable you want to change\\n\"); \n    scanf(\"%c\", &amp;userVar);\n\n    printf(\"Please enter the replacement value for the variable\\n\"); \n    scanf(\"%d\", &amp;userNum);\n\n    printf(\"%c %d\", userVar, userNum);\n\n    int i=0;\n    char chrr;\n    infix[50] = '\\0';\n    while((chrr=infix[i++])!='\\0')\n    {\n            if (chrr == userVar){\n                    chrr = userNum;\n            }\n    }\n}\n</code></pre>\n\n<p>when running the program I should be asked the userVar and userNum. However the output is:</p>\n\n<pre><code>Please enter the variable you want to change\nPlease enter the replacement value for the variable\n1\n\n 1\n</code></pre>\n\n<p>It only takes in one variable, I don't see a problem with my codes. Can someone help me?</p>\n"}, {"tags": ["c", "structure", "inline"], "comments": [{"owner": {"reputation": 1909, "user_id": 6846682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3c2ebd1b28002c046bf050077617596?s=128&d=identicon&r=PG&f=1", "display_name": "New Pagodi", "link": "https://stackoverflow.com/users/6846682/new-pagodi"}, "edited": false, "score": 0, "creation_date": 1540950713, "post_id": 53075125, "comment_id": 93048518, "body": "You might want to add a language (This is c or c++ isn&#39;t it?) to the tags.  Otherwise the question might not be seen by many people."}, {"owner": {"reputation": 3561, "user_id": 1149797, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/cVBtb.png?s=128&g=1", "display_name": "Alex Hoppus", "link": "https://stackoverflow.com/users/1149797/alex-hoppus"}, "edited": false, "score": 0, "creation_date": 1540965907, "post_id": 53075125, "comment_id": 93052071, "body": "Compiler will generate memory store to the stack. The other part of your question is unclear. Also second code snippet is incorrect c."}], "answers": [{"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 0, "last_activity_date": 1540973036, "creation_date": 1540973036, "answer_id": 53078815, "question_id": 53075125, "link": "https://stackoverflow.com/questions/53075125/inline-function-pointer-to-variable/53078815#53078815", "title": "Inline function, pointer to variable", "body": "<p>The compiler is required only to generate code that achieves the result required by the semantics of the language.  How a specific compiler achieves that is entirely implementation dependent.  It is even possible that the code will not be in-lined at all.</p>\n\n<p>To determine how your particular compiler will translate this code, you can either instruct it to output an assembly listing of the generated code or inspect the code disassembly in a debugger. The code generated may also be very different depending upon compiler options such as optimisation level.</p>\n"}], "owner": {"reputation": 3, "user_id": 10583399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81705de7c554bea18b6926323b8a7311?s=128&d=identicon&r=PG&f=1", "display_name": "PanchoPaz", "link": "https://stackoverflow.com/users/10583399/panchopaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 53078815, "answer_count": 1, "score": 0, "last_activity_date": 1540981905, "creation_date": 1540950079, "last_edit_date": 1540981905, "question_id": 53075125, "link": "https://stackoverflow.com/questions/53075125/inline-function-pointer-to-variable", "title": "Inline function, pointer to variable", "body": "<p>I am trying to understand how the inline keyword works with pointers to variables.</p>\n\n<p>Consider the following example:</p>\n\n<pre><code>struct S\n{\n float a;\n float b;\n};\n\ninline void foo (struct S *s)\n{\n   s-&gt;a = 5;\n}\n\nvoid main()\n{\n struct S ss;\n foo(&amp;ss);\n}\n</code></pre>\n\n<p>When the compiler inlines the function foo, will it generate</p>\n\n<pre><code>void main()\n{\n struct S ss;\n (&amp;ss)-&gt;a = 5;\n}\n</code></pre>\n\n<p>Or will it generate</p>\n\n<pre><code>void main()\n{\n struct S ss;\n ss.a = 5;\n}\n</code></pre>\n\n<p>In other words, will the code need to de-reference the pointer to the structure or will it understand that it needs to replace by just the structure?</p>\n\n<p>In an embedded application, this would make a difference in runtime that could be significant.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1540949930, "post_id": 53075011, "comment_id": 93048379, "body": "You really need to show your full code.  I suspect there is a problem with how you are reading your data into memory.  You could debug this yourself by stepping through the program in a debugger, or adding code to output information at key points in your program to confirm whether certain assumptions you&#39;re making are true or not."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540950580, "post_id": 53075011, "comment_id": 93048497, "body": "What is the <code>password</code> value you are using? When you add in a password char, it can cause the string char to go beyond 0x7F. That gets you into utf-8 territory. That is, instead of staying within ASCII range (e.g. 0x20-0x7F) you can end up with (e.g. 0x85,0x89,...) which would end up as something else (e.g. Chinese, etc.) This seems to be what you&#39;re seeing/getting. You may need to apply a modulus to stay within printable ASCII range."}, {"owner": {"reputation": 69, "user_id": 8426795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965a70b77da6fb20747fdf5c0c1cc795?s=128&d=identicon&r=PG&f=1", "display_name": "adsf", "link": "https://stackoverflow.com/users/8426795/adsf"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540950763, "post_id": 53075011, "comment_id": 93048534, "body": "@CraigEstey For these particular tests, the password is $#*!"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1540951133, "post_id": 53075011, "comment_id": 93048618, "body": "What do you think happens here <code>*string = *string + *password; string++; password++;</code> when password is not as long as string?  You read memory past the end of the password - memory you don&#39;t own.  When you do that you get the wrong answer."}, {"owner": {"reputation": 69, "user_id": 8426795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965a70b77da6fb20747fdf5c0c1cc795?s=128&d=identicon&r=PG&f=1", "display_name": "adsf", "link": "https://stackoverflow.com/users/8426795/adsf"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540951136, "post_id": 53075011, "comment_id": 93048620, "body": "@CraigEstey I am not concerned with the ASCII values per say, I am just supposed to be getting the same output like the one above, and seeing that when THIS IS A SECRET is decoded and it gets a different result, to me that shows that something is wrong with the arithmetic involved, I am just not sure what part."}, {"owner": {"reputation": 69, "user_id": 8426795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965a70b77da6fb20747fdf5c0c1cc795?s=128&d=identicon&r=PG&f=1", "display_name": "adsf", "link": "https://stackoverflow.com/users/8426795/adsf"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1540951224, "post_id": 53075011, "comment_id": 93048636, "body": "@JerryJeremiah Oh, I see. So would I have to put a parameter on password by its length?"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540951306, "post_id": 53075011, "comment_id": 93048657, "body": "@CraigEstey  based on the expected working value they are treating this as extended ascii which means they aren&#39;t using a unicode aware terminal - for example a Windows cmd.exe command line.  <a href=\"https://theasciicode.com.ar/\" rel=\"nofollow noreferrer\">theasciicode.com.ar</a>"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1540951358, "post_id": 53075011, "comment_id": 93048669, "body": "@adsf What is the actual algorithm - do you stop adding when you get to the end of the password or do you wrap around back to the start of the password?"}, {"owner": {"reputation": 69, "user_id": 8426795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965a70b77da6fb20747fdf5c0c1cc795?s=128&d=identicon&r=PG&f=1", "display_name": "adsf", "link": "https://stackoverflow.com/users/8426795/adsf"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1540951500, "post_id": 53075011, "comment_id": 93048695, "body": "@JerryJeremiah I just realized that the password has to be wrapped around so that it fits with the string."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540952078, "post_id": 53075011, "comment_id": 93048802, "body": "Finding string length can be as simple as <code>size_t len = 0; for (; string[len]; len++) {}</code>. <code>len</code> now contains the string length (<i>note</i>: the string must be <i>nul-terminated</i> - as is required by all string functions)"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 8426795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965a70b77da6fb20747fdf5c0c1cc795?s=128&d=identicon&r=PG&f=1", "display_name": "adsf", "link": "https://stackoverflow.com/users/8426795/adsf"}, "edited": false, "score": 0, "creation_date": 1540953000, "post_id": 53075266, "comment_id": 93048972, "body": "Thank you very much! This helps tremendously. It makes sense now after looking it over. I was forgetting that the password needed to be looped and didn&#39;t even think of implementing it. Thank you!"}, {"owner": {"reputation": 69, "user_id": 8426795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965a70b77da6fb20747fdf5c0c1cc795?s=128&d=identicon&r=PG&f=1", "display_name": "adsf", "link": "https://stackoverflow.com/users/8426795/adsf"}, "edited": false, "score": 0, "creation_date": 1540962988, "post_id": 53075266, "comment_id": 93051132, "body": "Also just wanted to add that right after str = string is declared, there should also be a pw = password too or else it wont work on the second pass. Thanks again!"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 69, "user_id": 8426795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965a70b77da6fb20747fdf5c0c1cc795?s=128&d=identicon&r=PG&f=1", "display_name": "adsf", "link": "https://stackoverflow.com/users/8426795/adsf"}, "edited": false, "score": 0, "creation_date": 1541007288, "post_id": 53075266, "comment_id": 93075177, "body": "You&#39;re welcome. I wasn&#39;t sure that password needed to be reset on each pass, so that&#39;s why I commented it out."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 1, "last_activity_date": 1540951882, "last_edit_date": 1540951882, "creation_date": 1540951367, "answer_id": 53075266, "question_id": 53075011, "link": "https://stackoverflow.com/questions/53075011/adding-and-subtracting-characters-of-stringsencoding-decoding-in-c/53075266#53075266", "title": "Adding and Subtracting Characters of Strings(Encoding / Decoding) in C", "body": "<p>Since your text string is <em>longer</em> than your password string, you are running past the end of password string (e.g. text is 8 chars but you only have 4 password chars). This is undefined behavior (e.g. random chars after that)</p>\n\n<p>Here is some code that wraps back to the start of the password when it gets to the end. I just guessed that is what the algorithm needs. You may need to adjust this to match the exact algorithm/result you need.</p>\n\n<p>Additionally, the <code>string</code> variable has to be reset to the beginning for each pass. Otherwise, only the <em>first</em> pass will have an effect.</p>\n\n<hr>\n\n<pre><code>void\njumble(unsigned char *string, const unsigned char *password, enum CODE_METHOD method, int passes)\n{\n    int pwlen;\n    unsigned char *str;\n    unsigned char *pw;\n\n    pw = password;\n\n    if (method == ENCODE) {\n        int i;\n\n        for (i = 1; i &lt;= passes; i++) {\n            //pw = password; ?\n            str = string;\n            while (*str != '\\0') {\n                *str = *str + *pw;\n                str++;\n                if (*++pw == 0)\n                    pw = password;\n            }\n        }\n    }\n    else {\n        int i;\n\n        for (i = 1; i &lt;= passes; i++) {\n            //pw = password; ?\n            str = string;\n            while (*str != '\\0') {\n                *str = (*str) - *pw;\n                str++;\n                if (*++pw == 0)\n                    pw = password;\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 8426795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965a70b77da6fb20747fdf5c0c1cc795?s=128&d=identicon&r=PG&f=1", "display_name": "adsf", "link": "https://stackoverflow.com/users/8426795/adsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 53075266, "answer_count": 1, "score": 1, "last_activity_date": 1540951882, "creation_date": 1540948984, "question_id": 53075011, "link": "https://stackoverflow.com/questions/53075011/adding-and-subtracting-characters-of-stringsencoding-decoding-in-c", "title": "Adding and Subtracting Characters of Strings(Encoding / Decoding) in C", "body": "<p>I was doing an assignment where I have to \"encode\" and \"decode\" a string by adding/subtracting a \"password\"(another string) to the string that will be encoded/decoded. However, when I run it, I get similar results to what the correct output is but still incorrect. I think it might have to with the way I am adding/ subtracting the two strings. I am sorry if this is trivial but I am a beginner. I would greatly appreciate any help!</p>\n\n<p>This is the code for encoding and decoding(Note: I also had to write a function that finds the length of a string as I am not allowed to include header files)</p>\n\n<pre><code>int mystrlen(const unsigned char *string)\n{\n  int length = 0; /* holds the value of the length of the string */\n\n   /* goes through elements of string not counting the null character */\n  while(*string != '\\0')\n  {\n    string++;  /* moves to the next letter of the string */\n    length ++; /* counts how many letters there are      */\n  }\n  return length; /* returns the length of the string */\n}\n\nvoid jumble(unsigned char *string, const unsigned char *password, \n            enum CODE_METHOD method, int passes)\n{\n  if(method == ENCODE)\n  {\n    int i;\n    for(i = 1; i &lt;= passes; i++)\n    {\n      while(*string != '\\0')\n      {\n        *string = *string + *password;\n\n        string++;\n        password++;\n      }\n    }\n  }\n  else\n  {\n    int i;\n    for(i = 1; i &lt;= passes; i++)\n    {\n      while(*string != '\\0')\n      {\n        *string = (*string) - (*password);\n\n        string++;\n        password++;\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>This is the correct output:</p>\n\n<pre><code>Test0 ======================================\nlength of a is 1\nlength of b is 4\nlength of c is 0\nlength of d is 174\n\nTest1 ======================================\nOriginal phrase:\nTHIS IS A SECRET.\n\nEncoded phrase:\nxkstDl}AeC}fguouR\n\nTest2 ======================================\nEncoded phrase:\nxkstDl}AeC}fguouR\n\nDecoded back:\nTHIS IS A SECRET.\n</code></pre>\n\n<p>And this is what I got:</p>\n\n<pre><code>Test0 ======================================\nlength of a is 1\nlength of b is 4\nlength of c is 0\nlength of d is 174\n\nTest1 ======================================\nOriginal phrase:\nTHIS IS A SECRET.\n\nEncoded phrase:\nxkst \u2534\u255b\u00f4\u2561@\u2553\u00e0h1\n\nTest2 ======================================\nEncoded phrase:\nxkstDl}AeC}fguouR\n\nDecoded back:\nTHISD5\u00b0\u00a0e1ocp!\n</code></pre>\n\n<p>Again, thank you so much!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1540948599, "post_id": 53074905, "comment_id": 93048156, "body": "Welcome to Stack Overflow.  Please read the <a href=\"https://stackoverflow.com/tour\">About</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> pages soon.  It&#39;s good that you&#39;ve included an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) \u2014 thank you.  But you&#39;ve not explained what problem(s) you&#39;re having that you need help to resolve.  Generally, it&#39;s best to end outputs with a newline rather than start them with a newline \u2014 prompts are an obvious exception."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1540948772, "post_id": 53074905, "comment_id": 93048183, "body": "Note that using <code>char p;</code> with <code>scanf(&quot; %s&quot;, &amp;p);</code> is a problem with undefined behaviour.  <code>%s</code> needs space for input characters and a null byte, and a single character like <code>p</code> doesn&#39;t provide enough space.  You probably want <code>%c</code> instead, and then the leading blank in the format is important.  For the <code>%s</code> inputs, the leading blank is not needed, though it doesn&#39;t cause any damage (trailing blanks would be a different story \u2014 they&#39;re a dire mistake in an interactive program and bad in non-interactive programs too)."}, {"owner": {"reputation": 411, "user_id": 2355561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c3b43b98852d663878542ad3ff4bff?s=128&d=identicon&r=PG", "display_name": "Austin Stephens", "link": "https://stackoverflow.com/users/2355561/austin-stephens"}, "edited": false, "score": 1, "creation_date": 1540949079, "post_id": 53074905, "comment_id": 93048242, "body": "d is also used uninitialized. Make sure to use -Wall (warn all) when you compile."}], "owner": {"reputation": 1, "user_id": 10583317, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JqHLkrq-vXU/AAAAAAAAAAI/AAAAAAAAAic/0RyqfeNHs3w/photo.jpg?sz=128", "display_name": "El Mede", "link": "https://stackoverflow.com/users/10583317/el-mede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540948494, "creation_date": 1540948104, "last_edit_date": 1540948494, "question_id": 53074905, "link": "https://stackoverflow.com/questions/53074905/c-string-comparison-in-program-to-report-countries-and-capitals", "title": "C string comparison in program to report countries and capitals", "body": "<p>I need to make a program where you give the countries and their capitals, then the user gives a country and the program gives back the capital of that country. This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n    char country[3][20];\n    char capital[3][20];\n    int n=1, i, d, s;\n    char p;\n    for(i=0;i&lt;3;i++){\n        printf(\"\\nCountry: \");\n        scanf(\" %s\", country[i]);\n        printf(\"\\nCapital: \");\n        scanf(\" %s\", capital[i]);\n    }\n    while (n==1){\n        printf(\"\\nGive a country: \");\n        scanf(\" %s\", p);\n        i=0;\n        while(i&lt;3 &amp;&amp; d!=i){\n            if(strcmp(p,country[i])==0){\n                d=i;\n            }else{\n                i++;\n            }\n        }\n        printf(\"\\nThe capital of %s is %s\",country[d], capital[d]);\n        printf(\"\\nWant to search again? 1) yes    2)no \");\n        scanf(\"%d\", &amp;s);\n        if(s==2){\n            n=0;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "variable-names"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1540944622, "post_id": 53074552, "comment_id": 93047406, "body": "That looks like decompiled code. If that&#39;s the case, it&#39;s just computer generated auto-names. Where did you get this?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1540944665, "post_id": 53074552, "comment_id": 93047421, "body": "That looks like code that may have been written by code."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 3, "creation_date": 1540944702, "post_id": 53074552, "comment_id": 93047429, "body": "What makes you think there would be?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1540944736, "post_id": 53074552, "comment_id": 93047439, "body": "If your goal is to make the code less immediately readable or intelligible versus using sensible variable names, then that would be one advantage. Without any other context, it&#39;s a vague question."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1540944842, "post_id": 53074552, "comment_id": 93047457, "body": "For starters, this is illegal C++ code, since the identifier is reserved and mustn&#39;t be used."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1540944889, "post_id": 53074552, "comment_id": 93047469, "body": "@KonradRudolph UB not illegal"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1540945049, "post_id": 53074552, "comment_id": 93047512, "body": "<a href=\"http://dilbert.com/strip/1994-06-10\" rel=\"nofollow noreferrer\">Here&#39;s one reason.</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1540945308, "post_id": 53074552, "comment_id": 93047561, "body": "What could possibly go wrong?"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1540958256, "post_id": 53074552, "comment_id": 93050030, "body": "@Kevin There may not be, but this is an interesting question that could start a discussion about naming things, which is always a good thing."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1540944792, "creation_date": 1540944792, "answer_id": 53074571, "question_id": 53074552, "link": "https://stackoverflow.com/questions/53074552/is-there-any-advantages-of-defining-variable-names-as-00000001-in-c-c/53074571#53074571", "title": "Is there any advantages of defining variable names as __00000001 in C / C++", "body": "<p>Is obfuscating the crap out of your code worthwhile? No, not unless your goal is literally to do just that: to make your code as hard to read as possible. Trouble is, you've got to read it too.</p>\n\n<p>Sometimes you'll run into code like this when somebody's \"decompiled\" a program &mdash; variable names do not survive the compilation process so this is sort of the best a decompiler can do when reconstructing a C++ program. Of course it cannot really reconstruct a C++ program; it can only re-spell the flattened logic in C++ syntax. Oh well.</p>\n\n<p>Addressing your example specifically, it's worth noting that <em>all</em> identifiers beginning with two underscores are reserved to the implementation (your compiler and standard library), so <a href=\"https://stackoverflow.com/q/228783/560648\">your program has undefined behaviour</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 5, "last_activity_date": 1540945057, "creation_date": 1540945057, "answer_id": 53074602, "question_id": 53074552, "link": "https://stackoverflow.com/questions/53074552/is-there-any-advantages-of-defining-variable-names-as-00000001-in-c-c/53074602#53074602", "title": "Is there any advantages of defining variable names as __00000001 in C / C++", "body": "<p>Those particular variable names are not available for user programs:</p>\n\n<blockquote>\n  <p>All identifiers that begin with an underscore and either an uppercase letter or another underscore are always reserved for any use. (C11, section 7.1.3, paragraph 1)</p>\n</blockquote>\n\n<p>So that's a big disadvantage.</p>\n"}], "owner": {"reputation": 889, "user_id": 7709727, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5aad459e897d2e3a8a4613be455ecb16?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Stdlib", "link": "https://stackoverflow.com/users/7709727/eric-stdlib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1540946806, "creation_date": 1540944557, "last_edit_date": 1540946806, "question_id": 53074552, "link": "https://stackoverflow.com/questions/53074552/is-there-any-advantages-of-defining-variable-names-as-00000001-in-c-c", "title": "Is there any advantages of defining variable names as __00000001 in C / C++", "body": "<p>Is there any advantages of defining variable names as __00000001, __00000002, etc.?</p>\n\n<p>Example:</p>\n\n<pre><code>int __00000001, __00000002 = 0;\nfor (__00000001 = 0; __00000001 &lt; 10; __00000001++) {\n    __00000002 = __00000002 + __00000001\uff1b\n}\n...\n</code></pre>\n\n<p>Update: this is mentioned in one of my programming classes a few years ago, and I remembered that the professor said there is some advantages of using it. However, I cannot recall any more information. Maybe I am wrong. </p>\n"}, {"tags": ["c", "pointers", "low-level"], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 1, "last_activity_date": 1540944406, "creation_date": 1540944406, "answer_id": 53074539, "question_id": 53074514, "link": "https://stackoverflow.com/questions/53074514/initializing-pointer-constant-to-a-field-inside-another-pointer-constant/53074539#53074539", "title": "Initializing pointer constant to a field inside another pointer constant?", "body": "<p>You can define it as a preprocessor macro, and the compiler should optimize it.</p>\n"}], "owner": {"reputation": 57337, "user_id": 69742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6fc5e3f98fb1113576b50672ae42c05c?s=128&d=identicon&r=PG", "display_name": "Earlz", "link": "https://stackoverflow.com/users/69742/earlz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540944406, "creation_date": 1540944236, "question_id": 53074514, "link": "https://stackoverflow.com/questions/53074514/initializing-pointer-constant-to-a-field-inside-another-pointer-constant", "title": "Initializing pointer constant to a field inside another pointer constant?", "body": "<p>I have the following code I'm using within a header file:</p>\n\n<pre><code>static const struct ExecDataABI* const qtumExec = (const struct ExecDataABI* const) EXEC_DATA_ADDRESS;\nstatic const UniversalAddressABI* const qtumSender = (const UniversalAddressABI* const) &amp;qtumExec-&gt;sender;\n</code></pre>\n\n<p>Basically there is a read-only section of memory that has the ExecDataABI info in it. Fetching qtumExec->sender is a very common operation, so I want to break it out into a direct convenience variable so that there is less typing required etc. </p>\n\n<p>With this code the compiler complains \"initializer element is not constant\". Is there anyway to express this properly to the compiler? I can of course count bytes in the struct, but that is cumbersome and error prone. </p>\n"}, {"tags": ["c", "multithreading", "fork"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1540943340, "post_id": 53074393, "comment_id": 93047107, "body": "&quot;Run&quot; the program with pen and paper"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 2, "creation_date": 1540948389, "post_id": 53074393, "comment_id": 93048115, "body": "Draw a tree where each <code>fork()</code> forks the current branch into two, and mark one of those branches <code>0</code> (+ the name of the <code>pid*</code> variable). Go through all remaining code on both branches from that point on, writing the printed output. Then just count the number of branches you have at the end and the number of times you wrote each letter."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1540952312, "post_id": 53074393, "comment_id": 93048838, "body": "I would take a look at this excellent answer to a question about how fork works: <a href=\"https://stackoverflow.com/a/34340479/1212725\">stackoverflow.com/a/34340479/1212725</a>, and this good one: stackoverflow.com/a/15102710/1212725"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 10583150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f8a54b0d810fbe18a292c1f64c3230?s=128&d=identicon&r=PG&f=1", "display_name": "asey20", "link": "https://stackoverflow.com/users/10583150/asey20"}, "is_accepted": false, "score": 1, "last_activity_date": 1540971659, "last_edit_date": 1540971659, "creation_date": 1540957189, "answer_id": 53075928, "question_id": 53074393, "link": "https://stackoverflow.com/questions/53074393/trying-to-figure-out-how-fork-works-given-in-this-context-but-i-dont-seem-to/53075928#53075928", "title": "Trying to figure out how fork() works given in this context, but I don&#39;t seem to understand how the answer is achieved", "body": "<p>I was able to figure it out with the help of you guys. The solution came with a diagram but it was confusing. However, using a binary tree I was able to create a better version of the diagram that explains the process better.</p>\n\n<p>The same colour blocks represent the same process just at different points of the progress. The children of the binary tree represent the number of processes and the printed output is written from there. Check it out and thanks for all the help. I understand what was going on now. </p>\n\n<p><a href=\"https://i.stack.imgur.com/ywHaC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ywHaC.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 13, "user_id": 10583150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f8a54b0d810fbe18a292c1f64c3230?s=128&d=identicon&r=PG&f=1", "display_name": "asey20", "link": "https://stackoverflow.com/users/10583150/asey20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540971659, "creation_date": 1540943134, "last_edit_date": 1540948917, "question_id": 53074393, "link": "https://stackoverflow.com/questions/53074393/trying-to-figure-out-how-fork-works-given-in-this-context-but-i-dont-seem-to", "title": "Trying to figure out how fork() works given in this context, but I don&#39;t seem to understand how the answer is achieved", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void)\n{\n    int pid1=0, pid2=0, pid3=0;\n    pid1 = fork() ;\n    pid2 = fork() ;\n    if(pid1 == 0 ) {\n        printf(\"A\\n\") ;\n    } else {\n        pid3 = fork() ;\n        printf(\"B\\n\") ;\n    }\n    if (pid2 != 0 &amp;&amp; pid3 != 0) {\n        printf(\"C\\n\") ;\n    }\n}\n</code></pre>\n\n<p>What is the total number of processes that will be created by running this program? How many of each character \u2018A\u2019 to \u2018C\u2019 will be printed out? Briefly explain why.</p>\n\n<p>2 A\u2019s 4 B\u2019s 1 C (2 marks)</p>\n\n<p>6 processes (including the original one) (2 marks)</p>\n"}, {"tags": ["c", "assembly", "x86-64", "att"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540939057, "post_id": 53073830, "comment_id": 93046000, "body": "Shouldn&#39;t it be an unsigned long long then?"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1540939116, "post_id": 53073830, "comment_id": 93046019, "body": "You know that on most platforms a <code>long</code> is 32 bits, right?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1540939192, "post_id": 53073830, "comment_id": 93046039, "body": "@Sneftel: x86-64 System V has 64-bit <code>long</code>, and this code is taking args in RDI and RSI so it&#39;s pretty definitely that ABI.  (<a href=\"https://stackoverflow.com/q/18133812\">Where is the x86-64 System V ABI documented?</a>)"}, {"owner": {"reputation": 35, "user_id": 9274420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a25a5be9198146162e7b74e02abd7d?s=128&d=identicon&r=PG&f=1", "display_name": "pigsploof", "link": "https://stackoverflow.com/users/9274420/pigsploof"}, "edited": false, "score": 0, "creation_date": 1540939352, "post_id": 53073830, "comment_id": 93046096, "body": "I changed the c code to all unsigned long longs and the results are the same"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1540939423, "post_id": 53073830, "comment_id": 93046124, "body": "@pigsploof: x86 has <code>rol %cl, %rdi</code> and <code>ror %cl, %rdi</code>, which you can use instead of a loop.  Simply <code>mov</code> your shift count into <code>%ecx</code>."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1540939607, "post_id": 53073830, "comment_id": 93046187, "body": "@PeterCordes good point. Though even if the type is wide enough, <code>%x</code> is not going to print a full 64 bits."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1540939683, "post_id": 53073830, "comment_id": 93046206, "body": "@Sneftel: yup, I was still looking at the horribly over-complicated asm and assuming they&#39;d gotten the C correct.  You and @zch both spotted the <code>%x</code> bug while I was posting an answer about an asm bug :P"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1540941484, "post_id": 53073830, "comment_id": 93046663, "body": "Peter&#39;s right--all modern processors have barrel shifters that can shift and rotate many bits in a single instruction. No need to loop."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1540942305, "post_id": 53073830, "comment_id": 93046877, "body": "@LeeDanielCrocker: A barrel shifter makes it possible for the single instruction to have single-cycle latency.  Even original 8086 has <code>ror %cl, %di</code>, but the imm8 shift/rotate opcodes were added  in 286 (<a href=\"http://www.posix.nl/linuxassembly/nasmdochtml/nasmdoca.html\" rel=\"nofollow noreferrer\">posix.nl/linuxassembly/nasmdochtml/nasmdoca.html</a>).  It wasn&#39;t until later that these instructions got really fast, but on those old CPUs shifts/rotates cost something like 1 cycle per count.  That&#39;s faster than any loop could run, especially an inefficient loop with two branches that doesn&#39;t look at flags set by <code>dec</code>."}], "answers": [{"tags": [], "owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "is_accepted": true, "score": 1, "last_activity_date": 1540939509, "creation_date": 1540939509, "answer_id": 53073932, "question_id": 53073830, "link": "https://stackoverflow.com/questions/53073830/rotate-function-in-x86-64-att-assembly/53073932#53073932", "title": "Rotate Function in x86_64 AT&amp;T assembly", "body": "<p><code>printf(\"%x\", a)</code> works on <code>unsigned int</code> type. On <code>unsigned long</code> you need to use <code>\"%lx\"</code> as a format string.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 9274420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a25a5be9198146162e7b74e02abd7d?s=128&d=identicon&r=PG&f=1", "display_name": "pigsploof", "link": "https://stackoverflow.com/users/9274420/pigsploof"}, "edited": false, "score": 0, "creation_date": 1540939761, "post_id": 53073937, "comment_id": 93046230, "body": "the reason I am using the loop is because when I try and use rol %ecx, %rsi I get an error of operand type mismatch for rol. I have to use an immediate for it to compile and I do not know why."}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "reply_to_user": {"reputation": 35, "user_id": 9274420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a25a5be9198146162e7b74e02abd7d?s=128&d=identicon&r=PG&f=1", "display_name": "pigsploof", "link": "https://stackoverflow.com/users/9274420/pigsploof"}, "edited": false, "score": 0, "creation_date": 1540940597, "post_id": 53073937, "comment_id": 93046463, "body": "@pigsploof shift and rotation instructions can only use %cl or immediate as a count operand."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 35, "user_id": 9274420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a25a5be9198146162e7b74e02abd7d?s=128&d=identicon&r=PG&f=1", "display_name": "pigsploof", "link": "https://stackoverflow.com/users/9274420/pigsploof"}, "edited": false, "score": 0, "creation_date": 1540941994, "post_id": 53073937, "comment_id": 93046787, "body": "@pigsploof: my answer says <code>rol %cl, %rsi</code> for a reason (<a href=\"http://felixcloutier.com/x86/RCL:RCR:ROL:ROR.html\" rel=\"nofollow noreferrer\">felixcloutier.com/x86/RCL:RCR:ROL:ROR.html</a>).  But <code>mov %esi, %ecx</code> can be slightly more efficient than <code>mov %sil, %cl</code> or <code>movzbl %sil, %ecx</code>, so I recommended that for the <code>mov</code>.  x86 masks the shift count anyway, so it doesn&#39;t matter whether you copy or zero the upper bits of the register, or merge into the old value of RCX."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 1, "last_activity_date": 1540939537, "creation_date": 1540939537, "answer_id": 53073937, "question_id": 53073830, "link": "https://stackoverflow.com/questions/53073830/rotate-function-in-x86-64-att-assembly/53073937#53073937", "title": "Rotate Function in x86_64 AT&amp;T assembly", "body": "<p>You have a bug in your asm: the loop branch in <code>right</code> does <code>jmp loop</code> instead of <code>jmp right</code>.  At least that's <em>one</em> of your bugs, IDK if there are more.  (update: @zch spotted the bug in your C which explains the truncation you're mentioning.)</p>\n\n<p>This would have been easier to spot if you'd used a better name than <code>loop</code>.  e.g. <code>left</code>.</p>\n\n<p>But you shouldn't be looping anyway. x86 has <code>rol %cl, %rdi</code> and <code>ror %cl, %rdi</code>, which you can use instead of a loop.  Simply <code>mov</code> your shift count into <code>%ecx</code>, like <code>mov %esi, %ecx</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 9274420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a25a5be9198146162e7b74e02abd7d?s=128&d=identicon&r=PG&f=1", "display_name": "pigsploof", "link": "https://stackoverflow.com/users/9274420/pigsploof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 53073932, "answer_count": 2, "score": 0, "last_activity_date": 1540939545, "creation_date": 1540938835, "last_edit_date": 1540939545, "question_id": 53073830, "link": "https://stackoverflow.com/questions/53073830/rotate-function-in-x86-64-att-assembly", "title": "Rotate Function in x86_64 AT&amp;T assembly", "body": "<p>I am implementing a rotate function in AT&amp;T 64 bit assembly and am having trouble getting the correct output in my code.</p>\n\n<p>The function I'm trying to implement is </p>\n\n<pre><code>unsigned long rotate(unsigned long val, ul num, ul dir); \n</code></pre>\n\n<p><code>Val</code> is value I wanted rotated, <code>num</code> is how many times and direction is left or right, 0 being right, 1 being left. </p>\n\n<p>My assembly code: </p>\n\n<pre><code>.global rotate\n\nrotate: #value = %rdi\n        #num = %rsi \n        #direction = %rdx \n        mov %rsi, %r10 #puts num into register\n        test %rdx, %rdx \n        jz right #if rdx is 0 jump to rotate right\n        #else go to loop right below which rotates left\nloop: \n     test %r10, %r10 #if num is 0 I am done\n     jz done \n     rol $1, %rdi #rotate left 1 bit\n     dec %r10 #decrement my count\n     jmp loop #jump to top of loop \n\n right: #same logic as left \n      test %r10, %10 \n      jz done \n      rol $1, %rdi  \n      dec %r10 \n      jmp loop \n done: \n      mov %rdi, %rax\n      ret \n</code></pre>\n\n<p>My C code: </p>\n\n<pre><code>#include &lt;stdio.h&gt; \nextern unsigned long rotate(unsigned long val, unsigned long num, unsigned long direction); \n\nint main()\n{\nunsigned long v,n,d; \nv = 0xDEADBEEFDEADBEEF; \nn = 2; \nd = 1; \n\nprintf(\"%x\\n \", rotate(v,n,d));    \n}\n</code></pre>\n\n<p>When I compile and run, I get the value <code>0x7AB6FBBF</code>, when I am supposed to get <code>0x7AB6FBBF7AB6FBBF</code>. </p>\n\n<p>Is there something wrong with my instructions not sending in <code>unsigned long</code>s or somethings?</p>\n"}, {"tags": ["c", "winapi", "stdin", "eof", "fread"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 5, "creation_date": 1540938359, "post_id": 53073573, "comment_id": 93045779, "body": "does it need to be fread or could you maybe use IOCP with something like <code>ReadFile</code> with <code>FILE_FLAG_OVERLAPPED</code> and use <code>CancelIoEx</code> to cancel the requested read? Otherwise just give <a href=\"https://docs.microsoft.com/en-gb/windows/desktop/FileIO/cancelsynchronousio-func\" rel=\"nofollow noreferrer\"><code>CancelSynchronousIo</code></a> a shot."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1540938470, "post_id": 53073573, "comment_id": 93045811, "body": "It&#39;s not possible in Standard C. To do this functionality you could use the operating system&#39;s I/O API instead"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1540939676, "post_id": 53073573, "comment_id": 93046204, "body": "Yes, closing the stream is what it takes.  But any standard C library implementation today had to be made thread-safe, so fclose() is going to deadlock.  You need to use the backdoor, CancelIo() or CloseHandle().   Your CRT should also have a backdoor to obtain the HANDLE you need."}, {"owner": {"reputation": 410, "user_id": 6401993, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a841e58d80abd73eaafb27312517f6e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mercalli", "link": "https://stackoverflow.com/users/6401993/mercalli"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1540946131, "post_id": 53073573, "comment_id": 93047724, "body": "@PeterT, thanks, that pointed me in the right direction. I can&#39;t use <code>CancelSynchronousIo</code> specifically because I need to support WinXP as well, but I found the solution for that <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/284348b6-65b7-4a63-be75-18c18832fdc0/cancelioex-under-win-2k-win-xp-using-vc?forum=vcgeneral\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1540998242, "post_id": 53073573, "comment_id": 93069696, "body": "@Getfree: If you have time, writing that as a self-answer with a description of how you solved the problem would be a great way to contribute to stack overflow. This is certainly a problem others could want to know the answer to."}], "answers": [{"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 5, "last_activity_date": 1540944760, "creation_date": 1540944760, "answer_id": 53074566, "question_id": 53073573, "link": "https://stackoverflow.com/questions/53073573/in-windows-how-to-force-cs-fread-to-return-even-if-theres-no-pending-input/53074566#53074566", "title": "In Windows, how to force C&#39;s fread to return even if there&#39;s no pending input?", "body": "<p>Calling <code>fclose(stdin)</code> is a very bad idea; it causes undefined behavior if it happens before the <code>fread</code> (which it's not ordered with respect to) or if the thread calling <code>fread</code> does <strong>anything</strong> else with <code>stdin</code> after <code>fread</code> returns, and it does not unblock the <code>fread</code> since <code>fclose</code> cannot proceed until it obtains a lock on <code>stdin</code>, which the in-progress <code>fread</code> is excluding.</p>\n\n<p><code>stdio</code> is just fundamentally unsuitable for what you want to do here. You could patch it up via forwarding through a second pipe, with yet another thread reading from <code>stdin</code> and writing into your new pipe. Then you could abort an <code>fread</code> on the read end of your pipe by closing the write end of it. The extra thread would still be stuck, but that doesn't really matter if you're going to be terminating anyway. Alternatively (and this is probably cleaner) you would use file descriptors (or Windows file handles) instead of stdio and <code>poll</code> (or the Windows equivalent) to determine whether there's input to be read. You could combine these approaches to put the Windows-specific file handle logic in the extra thread (thus being able to terminate it cleanly) and continue to use portable <code>stdio</code> in your program logic thread.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 11302446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5097630eacba1ea441c436e4870a8b2?s=128&d=identicon&r=PG&f=1", "display_name": "HrW", "link": "https://stackoverflow.com/users/11302446/hrw"}, "is_accepted": false, "score": 2, "last_activity_date": 1554401147, "last_edit_date": 1554401147, "creation_date": 1554393530, "answer_id": 55520372, "question_id": 53073573, "link": "https://stackoverflow.com/questions/53073573/in-windows-how-to-force-cs-fread-to-return-even-if-theres-no-pending-input/55520372#55520372", "title": "In Windows, how to force C&#39;s fread to return even if there&#39;s no pending input?", "body": "<p>If you can't use <code>CancelSynchronousIo</code> you can close the underlying file handle with <code>CloseHandle</code>, like this:</p>\n\n<pre><code>CloseHandle((HANDLE)_get_osfhandle(_fileno(stdin))) ;\n</code></pre>\n\n<p>That should cause <code>fread</code> to return.</p>\n"}], "owner": {"reputation": 410, "user_id": 6401993, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a841e58d80abd73eaafb27312517f6e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mercalli", "link": "https://stackoverflow.com/users/6401993/mercalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1554401147, "creation_date": 1540937268, "question_id": 53073573, "link": "https://stackoverflow.com/questions/53073573/in-windows-how-to-force-cs-fread-to-return-even-if-theres-no-pending-input", "title": "In Windows, how to force C&#39;s fread to return even if there&#39;s no pending input?", "body": "<p>In a Windows program with two threads: <code>thread1</code> and <code>thread2</code>.</p>\n\n<p>When <code>thread1</code> is blocked in the call <code>fread(buffer, 1, 10, stdin)</code> waiting for input, is it possible to do something from <code>thread2</code> to force <code>fread</code> to return?</p>\n\n<p>So far I tried calling <code>fclose(stdin)</code> from <code>thread2</code>, but it doesn't seem to work. The program gets stuck at the <code>fclose</code> call until some input is avaible in the <code>stdin</code> stream.</p>\n\n<p>What I'm trying to achieve is to terminate <code>thread1</code> gracefully instead of just killing it with <code>TerminateThread</code>, because there's some work that <code>thread1</code> has to do at the end.</p>\n\n<p>Another thing to consider is that <code>stdin</code> is one end of a named pipe. I don't have control over the program at the other end of the pipe.<br>\nWhat I need is just to disconnect my program from its end of the pipe (<code>stdin</code> in this case).</p>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1540937873, "post_id": 53073545, "comment_id": 93045620, "body": "Welcome to the joys of protocol design.  Your choices are wait forever (like NFS3 does) or timeout (like http does)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9330225"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1540938335, "post_id": 53073545, "comment_id": 93045772, "body": "this is a low latency application - receiving thousands of msgs per second"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9330225"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1540939026, "post_id": 53073545, "comment_id": 93045985, "body": "was thinking to maybe call recv a couple more times then close the connection if nothing else was on the fd"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1540949728, "post_id": 53073545, "comment_id": 93048348, "body": "Consider using a per-connection buffer with an incoming message size limit. You can see something similar in the <a href=\"http://facil.io\" rel=\"nofollow noreferrer\">facil.io</a> WebSocket implementation (a dynamic message size limit) or it&#39;s HTTP implementation (a hard-coded header line length limitation)."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1540949867, "post_id": 53073545, "comment_id": 93048364, "body": "P.S. (Side Note): Using <code>epoll</code> in one-shot mode might be better than edge triggering if you&#39;re using multiple threads, since it could minimize lock contention (and avoid some locks altogether, depending on your design)."}], "answers": [{"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": true, "score": 1, "last_activity_date": 1542405008, "last_edit_date": 1542405008, "creation_date": 1540955116, "answer_id": 53075686, "question_id": 53073545, "link": "https://stackoverflow.com/questions/53073545/is-it-ok-to-loop-over-recv-read-to-read-all-data-from-socket/53075686#53075686", "title": "Is it OK to loop over recv / read to read all data from socket", "body": "<blockquote>\n  <p>Is it OK to loop over recv() until one of those conditions is met?</p>\n</blockquote>\n\n<p>Probably not, at least not for production-quality code.  As you suggested, the problem with looping until you get the full message is that it leaves your thread at the mercy of the client -- if a client decides to only send part of the message and then wait for a long time (or even forever) without sending the last part, then your thread will be blocked (or looping) indefinitely and unable to serve any other purpose -- usually not what you want.</p>\n\n<blockquote>\n  <p>What if a client sends a bogus message length</p>\n</blockquote>\n\n<p>Then you're in trouble (although if you've chosen a maximum-message-size you can detect obviously bogus message-lengths that are larger than that size, and defend yourself by e.g. forcibly closing the connection)</p>\n\n<blockquote>\n  <p>or there is packet loss?</p>\n</blockquote>\n\n<p>If there is a reasonably small amount of packet loss, the TCP layer will automatically retransmit the data, so your program won't notice the difference (other than the message officially \"arriving\" a bit later than it otherwise would have).  If there is really bad packet loss (e.g. someone pulled the Ethernet cable out of the wall for 5 minutes), then the rest of the message might be delayed for several minutes or more (until connectivity recovers, or the TCP layer gives up and closes the TCP connection), trapping your thread in the loop.</p>\n\n<p>So what is the industrial-grade, evil-client-and-awful-network-proof solution to this dilemma, so that your server can remain responsive to other clients even when a particular client is not behaving itself?</p>\n\n<p>The answer is this:  don't depend on receiving the entire message all at once.  Instead, you need to set up a simple state-machine for each client, such that you can <code>recv()</code> as many (or as few) bytes from that client's TCP socket as it cares to send to you at any particular time, and save those bytes to a local (per-client) buffer that is associated with that client, and then go back to your normal event loop even though you haven't received the entire message yet.  Keep careful track of how many valid received-bytes-of-data you currently have on-hand from each client, and after each recv() call has returned, check to see if the associated per-client incoming-data-buffer contains an entire message yet, or not -- if it does, parse the message, act on it, then remove it from the buffer.  Lather, rinse, and repeat.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9330225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "accepted_answer_id": 53075686, "answer_count": 1, "score": 0, "last_activity_date": 1542405008, "creation_date": 1540937137, "question_id": 53073545, "link": "https://stackoverflow.com/questions/53073545/is-it-ok-to-loop-over-recv-read-to-read-all-data-from-socket", "title": "Is it OK to loop over recv / read to read all data from socket", "body": "<p>I'm building a multi-client&lt;->server messaging application over TCP.\nI created a non blocking server using epoll to multiplex linux file descriptors.<br>\nWhen a fd receives data, I read() /or/ recv() into buf.\nI know that I need to either specify a data length* at the start of the transmission, or use a delimiter** at the end of the transmission to segregate the messages.</p>\n\n<p>*using a data length:</p>\n\n<pre><code>char *buffer_ptr = buffer;\n        do {\n            switch (recvd_bytes = recv(new_socket, buffer_ptr, rem_bytes, 0)) {\n                  case -1: return SOCKET_ERR;\n                  case 0: return CLOSE_SOCKET;\n                  default: break;\n            }\n            buffer_ptr += recvd_bytes;\n            rem_bytes -= recvd_bytes;\n        } while (rem_bytes != 0);\n</code></pre>\n\n<p>**using a delimiter:</p>\n\n<pre><code>void get_all_buf(int sock, std::string &amp; inStr)\n{\n    int n = 1, total = 0, found = 0;\n    char c;\n    char temp[1024*1024]; \n    // Keep reading up to a '\\n'\n    while (!found) {\n        n = recv(sock, &amp;temp[total], sizeof(temp) - total - 1, 0);\n        if (n == -1) {\n            /* Error, check 'errno' for more details */\n            break;\n        }\n        total += n;\n        temp[total] = '\\0';\n        found = (strchr(temp, '\\n') != 0);\n    }\n    inStr = temp;\n}\n</code></pre>\n\n<p>My question: Is it OK to loop over recv() until one of those conditions is met? What if a client sends a bogus message length or no delimiter or there is packet loss? Wont I be stuck looping recv() in my program forever?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1540933944, "post_id": 53072885, "comment_id": 93044351, "body": "indexes for arrays in C go from 0 to len -1. Not from 1 to len as you have it"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1540934232, "post_id": 53072885, "comment_id": 93044455, "body": "please dont post links to graphics. In the popup dialog you can go ctrl-C and windows will copy the text to the clipboard for you, you can then paste it here"}, {"owner": {"reputation": 7, "user_id": 8807150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65a5351c876372c1f3507a902f6ebfb?s=128&d=identicon&r=PG&f=1", "display_name": "Gnrhellraiser", "link": "https://stackoverflow.com/users/8807150/gnrhellraiser"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1540948827, "post_id": 53072885, "comment_id": 93048192, "body": "@pm100 i tired not to but my rep isnt high enough to let me show the picture"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1541002698, "post_id": 53072885, "comment_id": 93072720, "body": "just paste the text"}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 2, "last_activity_date": 1540934065, "creation_date": 1540934065, "answer_id": 53073023, "question_id": 53072885, "link": "https://stackoverflow.com/questions/53072885/microsoft-visual-c-run-time-check-failure-2/53073023#53073023", "title": "Microsoft Visual C++ Run - time Check Failure #2", "body": "<p>As I said in comment , C array indexes go from 0 to len -1 . So change</p>\n\n<pre><code>for (int i = 1; i &lt;= 4; i++) {\n</code></pre>\n\n<p>to </p>\n\n<pre><code>for (int i = 0; i &lt;4; i++) {\n</code></pre>\n\n<p>BTW it should be</p>\n\n<pre><code>for (int i = 0; i &lt; ARRAY_SIZE; i++) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38, "user_id": 10117283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-88Ew06FRBrY/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qJrucOcEWCbXn9d3Hl7FPILz5gAw/mo/photo.jpg?sz=128", "display_name": "Huy Lieu xuon", "link": "https://stackoverflow.com/users/10117283/huy-lieu-xuon"}, "is_accepted": false, "score": 0, "last_activity_date": 1540934305, "creation_date": 1540934305, "answer_id": 53073062, "question_id": 53072885, "link": "https://stackoverflow.com/questions/53072885/microsoft-visual-c-run-time-check-failure-2/53073062#53073062", "title": "Microsoft Visual C++ Run - time Check Failure #2", "body": "<pre><code>for (int i = 0; i &lt; 4;i++)\n</code></pre>\n\n<p>Not <code>for (int i = 0; i&lt;= 4; i++)</code>\nIn array, we count from 0\nEx: array[0], array[1], array[n]</p>\n"}, {"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1540934775, "post_id": 53073098, "comment_id": 93044615, "body": "this is not c++"}], "tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": false, "score": 0, "last_activity_date": 1540934499, "creation_date": 1540934499, "answer_id": 53073098, "question_id": 53072885, "link": "https://stackoverflow.com/questions/53072885/microsoft-visual-c-run-time-check-failure-2/53073098#53073098", "title": "Microsoft Visual C++ Run - time Check Failure #2", "body": "<p>Great work!  Very impressive.</p>\n\n<p>Generally, I try to put the '\\n' at the end of lines.  Here is your code with a few changes.  Enjoy and good luck!</p>\n\n<p>As was indicated by others, in c++, we generally run for loops from i = 0 to i &lt; limit, since the arrays are indexed from 0.</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n// Constant and Variable Declarations\n    const int ARRAY_SIZE = 4;//decarling the array size\n    int homeScore[ARRAY_SIZE];\n    int awayScore[ARRAY_SIZE];\n    int finalHome = 0;\n    int finalAway = 0;\n\n\n    for (int i = 0; i &lt; 4; i++) {\n        printf(\"How Many Points were Scored by Home Team in Quarter #%d? \", i);//getting the hometeam numbers\n        scanf(\"%d\", &amp;homeScore[i]);\n        while (homeScore[i] &lt; 0) {  //checking continuously home team score negative or not\n            printf(\"\\tThe number entered cannot be negative. Please re-enter the number #%d? \", i);\n            scanf(\"%d\", &amp;homeScore[i]);\n        }\n\n        printf(\"How Many Points were Scored by Away Team in Quarter #%d? \", i);//getting the awayteam numbers\n        scanf(\"%d\", &amp;awayScore[i]);\n        while (awayScore[i] &lt; 0) {//checking continuously away team score negative or not\n            printf(\"\\tThe number entered cannot be negative. Please re-enter the number #%d? \", i);\n            scanf(\"%d\", &amp;awayScore[i]);\n        }printf(\"\\n\");\n    }\n\n    printf(\"After each quarter, the score was:\");\n//printing Score Board\n    printf(\"\\n\\t\\tH\\t  A\\n\");\n    printf(\"\\t\\t---\\t ---\\n\");\n    for (int i = 0; i &lt; 4; i++) {\n        finalHome = finalHome + homeScore[i];//processing\n        finalAway = finalAway + awayScore[i];//processing\n        printf(\"Q%d\", i);\n        printf(\"\\t %3d\", finalHome);//printing out the scores for the home team\n        printf(\"\\t %3d\\n\", finalAway);//printing out scores for the away team\n    }\n    if (finalHome &gt; finalAway) {//printing out the home team win\n        printf(\"Yea! The Home Team Won!\\n\");\n    }\n\n    else if (finalHome == finalAway) {//printing out if they tied\n        printf(\"After 4 quarters, the score was tied.\\n\");\n    }\n\n    else {//printing out if the away team won\n        printf(\"Sorry, the Away Team won.\\n\");\n    }\n    printf(\"\\n\");\n\n    return 0;\n} // end main()\n</code></pre>\n\n\n"}], "owner": {"reputation": 7, "user_id": 8807150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65a5351c876372c1f3507a902f6ebfb?s=128&d=identicon&r=PG&f=1", "display_name": "Gnrhellraiser", "link": "https://stackoverflow.com/users/8807150/gnrhellraiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 53073023, "answer_count": 3, "score": -3, "last_activity_date": 1540935800, "creation_date": 1540933453, "last_edit_date": 1540935800, "question_id": 53072885, "link": "https://stackoverflow.com/questions/53072885/microsoft-visual-c-run-time-check-failure-2", "title": "Microsoft Visual C++ Run - time Check Failure #2", "body": "<p>I don't understand why I keep getting this error. The program works fine, but it keeps giving me this error.</p>\n\n<p>I think it might be something to do with the arrays, but I'm not 100% sure.</p>\n\n<p>Any help that anyone can give me will be helpful to me. I'm not even a programmer. I'm just studying information technology, so I'm not super good at this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XoH0x.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/XoH0x.png</a></p>\n\n<pre><code>int main(void)\n{\n// Constant and Variable Declarations\nconst int ARRAY_SIZE = 4;//decarling the array size\nint homeScore[ARRAY_SIZE];\nint awayScore[ARRAY_SIZE];\nint finalHome = 0;\nint finalAway = 0;\n\n\n// *** Your program goes here ***\nfor (int i = 1; i &lt;= 4; i++) {\n    printf(\"How Many Points were Scored by Home Team in Quarter #%d? \", i);//getting the hometeam numbers\n    scanf(\"%d\", &amp;homeScore[i]);\n    while (homeScore[i] &lt; 0) {  //checking continuously home team score negative or not\n        printf(\"\\tThe number entered cannot be negative. Please re-enter the number #%d? \", i);\n        scanf(\"%d\", &amp;homeScore[i]);\n    }\n\n    printf(\"How Many Points were Scored by Away Team in Quarter #%d? \", i);//getting the awayteam numbers\n    scanf(\"%d\", &amp;awayScore[i]);\n    while (awayScore[i] &lt; 0) {//checking continuously away team score negative or not\n        printf(\"\\tThe number entered cannot be negative. Please re-enter the number #%d? \", i);\n        scanf(\"%d\", &amp;awayScore[i]);\n    }printf(\"\\n\");\n}\n\nprintf(\"After each quarter, the score was:\");\n//printing Score Board\nprintf(\"\\n         H\\t A\\n\");\nprintf(\"\\t---\\t---\");\nfor (int i = 1; i &lt;= 4; i++) {\n    finalHome = finalHome + homeScore[i];//processing \n    finalAway = finalAway + awayScore[i];//processing\n    printf(\"\\nQ%d\", i);\n    printf(\"\\t %d\\t\", finalHome);//printing out the scores for the home team\n    printf(\" %d\\t\", finalAway);//printing out scores for the away team\n}\nprintf(\"\\n\");\nif (finalHome &gt; finalAway) {//printing out the home team win\n    printf(\"Yea! The Home Team Won!\\n\");\n}\n\nelse if (finalHome == finalAway) {//printing out if they tied\n    printf(\"After 4 quarters, the score was tied.\\n\");\n}\n\nelse {//printing out if the away team won\n    printf(\"Sorry, the Away Team won.\\n\");\n}\nprintf(\"\\n\");\n\nreturn 0;\n} // end main()\n</code></pre>\n"}, {"tags": ["c", "operator-keyword", "bison", "prefix"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 3, "creation_date": 1540933221, "post_id": 53072498, "comment_id": 93044061, "body": "My suggestion is that you think carefully about what <code>$$</code> means in <code>program expr tPV  {printf ( &quot;2-%d\\n&quot;,$$); }</code>. Even with the application of the preaction <code>$$ = $1;</code> that&#39;s not going to print the value of <code>expr</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9742369"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1540933440, "post_id": 53072498, "comment_id": 93044167, "body": "Found Error : you are right."}], "owner": {"user_type": "does_not_exist", "display_name": "user9742369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540992173, "creation_date": 1540931681, "last_edit_date": 1540992173, "question_id": 53072498, "link": "https://stackoverflow.com/questions/53072498/problem-with-operator-inc-dec-in-bison-used-as-prefix-and-posfix", "title": "Problem with operator inc dec in Bison used as prefix and posfix", "body": "<p>I'm having some problems with operator management\nincrease and decrease (prefixes and postfixes)\nusing Flex / Bison, below is another answer :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/890038/how-to-fix-yacc-shift-reduce-conflicts-from-post-increment-operator\">How to fix YACC shift/reduce conflicts from post-increment operator?</a></p>\n\n<p>I have read that the best solution seems to be to declare them as %nonassoc\nor in some cases use %right, I'm a little confused:</p>\n\n<p>inserting these parameters I expect these results :</p>\n\n<pre><code> 1 + ++1 ;  // 3\n 1 + 1++ ;  // 2\n 1 + --1 ;  // 1\n 1 + 1-- ;  // 2\n</code></pre>\n\n<p>however I receive this as an output :</p>\n\n<pre><code>1-3\n2-3\n2-3\n2-3\n</code></pre>\n\n<p>I'll post the source I use :</p>\n\n<p>...</p>\n\n<pre><code>%right  tplus tmin \n%nonassoc tINC tDEC      \n</code></pre>\n\n<p>...</p>\n\n<pre><code>%type&lt;integer&gt; expr program\n\n%%\n\nprogram: expr tPV           {printf ( \"1-%d\\n\",$$); }\n    | program expr tPV      {printf ( \"2-%d\\n\",$$); }\n    ;\n\n\nexpr: tINTEGER               { $$ = $1; }\n    | expr tPLUS expr           { $$ = $1 + $3; }\n    | expr tMIN expr            { $$ = $1 - $3; }\n    | expr tMUL expr            { $$ = $1 * $3; }\n    | expr tDIV expr            { $$ = $1 / $3; }\n    | expr tMOD expr            { $$ = $1 % $3; }\n\n    | tPLUS expr  %prec tplus     { $$ =  $2; }\n    | tMIN  expr  %prec tmin      { $$ = -$2; }\n\n    | tINC expr                   { $$ = ++$2;    }\n    | expr tINC                   { $$ =  $1++;   }\n    | tDEC expr                   { $$ = --$2;    }\n    | expr tDEC                   { $$ =  $1--;   }\n\n    | tP0 expr tP1                { $$ =  $2; }\n    ;\n\n%%\n</code></pre>\n\n<p>can you give me some suggestions? \nThanks in advance \nClaudio</p>\n\n<p><strong>Solution</strong> :</p>\n\n<pre><code>program: line\n    | program line\n    ;\nline: tPV { } \n    | expr tPV { printf(\"\\n[%d]\\n\", $1); }\n    ;\n</code></pre>\n\n<p>the error was not in grammar, but in non-terminal !</p>\n\n<p>output :</p>\n\n<pre><code>main.exe &lt; prova.txt\n\n[3]\n\n[2]\n\n[1]\n\n[2]\n</code></pre>\n"}, {"tags": ["c", "makefile", "fork", "shared-memory"], "comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1540931073, "post_id": 53072327, "comment_id": 93043115, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1990932/two-main-functions-in-c-c\">Two &#39;main&#39; functions in C/C++</a>"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1540931163, "post_id": 53072327, "comment_id": 93043157, "body": "Even though it&#39;s a duplicate, this is the highest quality question I&#39;ve seen in a while.  I commend you for including all the relevant materials.  Without them, I never would have thought you might be defining <code>main</code> function multiple times."}, {"owner": {"reputation": 101, "user_id": 6943839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1653d10295e2655c31021b4340aaf8f0?s=128&d=identicon&r=PG&f=1", "display_name": "Slay", "link": "https://stackoverflow.com/users/6943839/slay"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1540931394, "post_id": 53072327, "comment_id": 93043258, "body": "@DanFarrell Thanks for the reply. However, my program has one main function in each file. The link you showed me has problems with having multiple main functions in one file. Is this relevant?"}, {"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 1, "creation_date": 1540931433, "post_id": 53072327, "comment_id": 93043281, "body": "@DanFarrell Huh? He&#39;s not linking them together. That&#39;s not a problem."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1540931461, "post_id": 53072327, "comment_id": 93043297, "body": "Yeah, I&#39;ll redact that , sorry."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1540933664, "post_id": 53072327, "comment_id": 93044259, "body": "Not the problem you&#39;re asking about, but some advice: <code>shm</code> should be declared as <code>volatile int *shm</code> in all three programs. Without the <code>volatile</code> qualifier, the compiler will assume that the contents of <code>shm</code> will not be modified externally, which may cause incorrect behavior."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540934112, "post_id": 53072327, "comment_id": 93044409, "body": "Note that you don&#39;t &quot;run <code>makefile</code>&quot; or &quot;run <code>SwimMill.c</code>&quot;; you run <code>make</code> (which processes the <code>makefile</code>) and you run <code>SwimMill</code> (which was compiled from <code>SwimMill.c</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 6943839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1653d10295e2655c31021b4340aaf8f0?s=128&d=identicon&r=PG&f=1", "display_name": "Slay", "link": "https://stackoverflow.com/users/6943839/slay"}, "edited": false, "score": 0, "creation_date": 1540932534, "post_id": 53072462, "comment_id": 93043745, "body": "Extremely appreciate the help with forks! The segmentation fault error stopped occurring. However, I still can&#39;t run SwimMill.c! Fish.c is being run first. Is this a problem with the program or with my VM Linux?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 101, "user_id": 6943839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1653d10295e2655c31021b4340aaf8f0?s=128&d=identicon&r=PG&f=1", "display_name": "Slay", "link": "https://stackoverflow.com/users/6943839/slay"}, "edited": false, "score": 0, "creation_date": 1540932656, "post_id": 53072462, "comment_id": 93043815, "body": "@Slay It is being run first because you started it first.  Because you have multiple processes running at once in the same terminal their output is intermingled."}, {"owner": {"reputation": 101, "user_id": 6943839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1653d10295e2655c31021b4340aaf8f0?s=128&d=identicon&r=PG&f=1", "display_name": "Slay", "link": "https://stackoverflow.com/users/6943839/slay"}, "edited": false, "score": 0, "creation_date": 1540933186, "post_id": 53072462, "comment_id": 93044043, "body": "I sort of understand, but not really. So you&#39;re saying I need to send some signal to kill the process in order to run the correct process?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 101, "user_id": 6943839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1653d10295e2655c31021b4340aaf8f0?s=128&d=identicon&r=PG&f=1", "display_name": "Slay", "link": "https://stackoverflow.com/users/6943839/slay"}, "edited": false, "score": 0, "creation_date": 1540933245, "post_id": 53072462, "comment_id": 93044076, "body": "@Slay What I&#39;m saying is that you <b>are</b> running the correct process.  It just doesn&#39;t look like it because both are running concurrently and writing to the terminal at the same time."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 9, "last_activity_date": 1540932075, "last_edit_date": 1540932075, "creation_date": 1540931537, "answer_id": 53072462, "question_id": 53072327, "link": "https://stackoverflow.com/questions/53072327/compiling-the-wrong-file/53072462#53072462", "title": "Compiling the wrong file?", "body": "<p>You're not using <code>fork</code> / <code>exec</code> correctly:</p>\n\n<pre><code>while(timer &lt;= 30){\n    sleep(1); // Slow process down\n    fish = fork();\n    execv(\"Fish\", argv);\n    pellet[index] = fork();\n    execv(\"Pellets\", argv);\n    printGrid(shm);\n    printf(\"\\n\");\n    timer++;\n    index++;\n}\n</code></pre>\n\n<p>Recall that the <code>fork</code> function returns twice:  once to the parent process where it returns the child's pid, and once to the child process where it returns 0.</p>\n\n<p>You're forking a new process, but not checking the return value.  So both the child <strong>and</strong> the parent call <code>execv</code> to start the \"Fish\" program, so you have two copies of \"Fish\" running and no copies of \"SwimMill\" running.</p>\n\n<p>You need to check the return value of <code>fork</code> to see if the process is the parent or the child and act accordingly.</p>\n\n<pre><code>while(timer &lt;= 30){\n    sleep(1); // Slow process down\n    fish = fork();\n    if (fish == -1) {\n        perror(\"fork failed\");\n        exit(1);\n    } else if (fish == 0) {\n        execv(\"Fish\", argv);\n        perror(\"exec failed\");\n        exit(1);\n    }\n\n    pellet[index] = fork();\n    if (pellet[index]== -1) {\n        perror(\"fork failed\");\n        exit(1);\n    } else if (pellet[index] == 0) {\n        execv(\"Pellets\", argv);\n        perror(\"exec failed\");\n        exit(1);\n    }\n\n    printGrid(shm);\n    printf(\"\\n\");\n    timer++;\n    index++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 6943839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1653d10295e2655c31021b4340aaf8f0?s=128&d=identicon&r=PG&f=1", "display_name": "Slay", "link": "https://stackoverflow.com/users/6943839/slay"}, "edited": false, "score": 0, "creation_date": 1540939133, "post_id": 53073245, "comment_id": 93046024, "body": "This totally explains my confusion. Thank you!"}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 2, "last_activity_date": 1540935372, "creation_date": 1540935372, "answer_id": 53073245, "question_id": 53072327, "link": "https://stackoverflow.com/questions/53072327/compiling-the-wrong-file/53073245#53073245", "title": "Compiling the wrong file?", "body": "<p>What makes you think Fish runs before SwimMill?  </p>\n\n<p>If you are relying on the order of the output to stdout, you will be misled by the buffering of <code>\"hello\"</code> which will not be immediately output until either <code>'\\n'</code> is written, <code>fflush(stdout)</code> called, or the process terminates.  </p>\n\n<p>That is to say SwimMill <em>does</em> run first, but Fish displays output first.</p>\n\n<p>Change:</p>\n\n<pre><code>printf(\"Hello\");\n</code></pre>\n\n<p>to </p>\n\n<pre><code>printf(\"Hello\\n\");\n</code></pre>\n\n<p>And similarly:</p>\n\n<pre><code>printf(\"printing from fish\");\n</code></pre>\n\n<p>to</p>\n\n<pre><code>printf(\"printing from fish\\n\");\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 6943839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1653d10295e2655c31021b4340aaf8f0?s=128&d=identicon&r=PG&f=1", "display_name": "Slay", "link": "https://stackoverflow.com/users/6943839/slay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1541013026, "creation_date": 1540930916, "last_edit_date": 1541013026, "question_id": 53072327, "link": "https://stackoverflow.com/questions/53072327/compiling-the-wrong-file", "title": "Compiling the wrong file?", "body": "<p>I have 3 files \u2014 <code>SwimMill.c</code>, <code>Fish.c</code>, and <code>Pellets.c</code> \u2014 each of which is compiled into an executable. When <code>SwimMill</code> is run,  it uses <code>fork()</code> and <code>exec()</code> to run <code>Fish</code> and <code>Pellets</code>. However, for some reason, when I use the terminal, compile the programs with <code>make</code>, and run <code>SwimMill</code>, the file <code>Fish</code> runs first. Can anybody help me?</p>\n\n<p>Makefile</p>\n\n<pre><code>all: SwimMill Fish Pellets\n\nSwimMill: SwimMill.c\n    gcc -o SwimMill SwimMill.c\n\nFish: Fish.c\n    gcc -o Fish Fish.c -lm\n\nPellets: Pellets.c\n    gcc -o Pellets Pellets.c\n</code></pre>\n\n<p>SwimMill.c</p>\n\n<pre><code>// Uses both fish and pellets, 30 seconds, then print it out\n// Create pellets at random intervals, from 0x80\n// Eating --&gt; Get rid of most significant bit\n// Use shared memory for fish and pellet position only\n#include &lt;stdio.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n\n#define SHM_SIZE 1000\n\n/*\nTODO: SwimMIll FIRST, draw and get everything working\n*/\n\n/* 1. Create share memory using shmget\n2. Attach to shared memory using shmat\n3. Do operations\n4. Detach using shmdt\n*/\n\nvoid printGrid(int*);\nvoid handler(int);\n\nint main(int argc, char* argv[]) {\n\n    printf(\"Hello\");\n    signal(SIGINT, handler);\n\n    key_t key;\n    int shmid;\n    int *shm;\n    int timer = 0;\n    int fish = 0;\n    int pellet[20];\n\n    key = ftok(\"SwimMill.c\", 'b'); //generate random ke\n    shmid = shmget(key, SHM_SIZE, IPC_CREAT|0666);\n    shm = shmat(shmid, NULL, 0); // Attach\n\n    // Initializing the shared memory to prevent segmentation fault\n    for (int i = 0; i &lt; SHM_SIZE; i++){\n        shm[i] = -1;\n    }\n\n    int index = 0;\n    while(timer &lt;= 30){\n        sleep(1); // Slow process down\n        fish = fork();\n        execv(\"Fish\", argv);\n        pellet[index] = fork();\n        execv(\"Pellets\", argv);\n        printGrid(shm);\n        printf(\"\\n\");\n        timer++;\n        index++;\n    }\n\n    shmdt(shm);\n    shmctl(shmid, IPC_RMID, NULL);\n    printf(\"Program finished! \\n\");\n    getchar(); // Pause consol\n    return 0;\n}\n\nvoid printGrid(int* shm) {\n    int row = 10;\n    int column = 10;\n    char stream[row][column]; //2D Dimensional array, fish can only move last row of 2d\n\n\n    //Initializing grid first\n    for (int i = 0; i &lt; row; i++) {\n        for (int j = 0; j &lt; column; j++) {\n            stream[i][j] = '~';\n        }\n    }\n\n    //Printing out grid with fish and pellet\n    for (int i = 0; i &lt; row; i++) {\n        for (int j = 0; j &lt; column; j++) {\n            stream[i][j] = '~'; // water\n            for (int k = 0; k &lt; 20; k++) {\n                stream[shm[k]/10][shm[k]%10] = 'O'; // pellets\n                stream[shm[0]/10][shm[0]%10] = 'Y'; // Fish\n            }\n            printf(\"%c \", stream[i][j]   );\n        }\n        printf(\"\\n\");\n    }\n\n}\n\nvoid handler(int num) {\n    perror(\" Interrupt signal is pressed!! \\n\");\n    exit(1);\n}\n</code></pre>\n\n<p>Fish.c</p>\n\n<pre><code>// 1 fish\n// Scan the entire array, and focus on one pellet\n// Arrange itself\n\n#include &lt;stdio.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;math.h&gt;\n#include &lt;unistd.h&gt;\n\nint findClosestPellet(int*);\nvoid moveLeft(int, int*);\nvoid moveRight(int, int*);\n\nint main() {\n  printf(\"printing from fish\");\n  key_t key = ftok(\"SwimMill.c\", 'b');\n  int shmid = shmget(key, 1024, IPC_CREAT|0666);\n  int *shm = (int*) shmat(shmid, NULL, 0);\n\n  int fish = 94; // Middle position\n  shm[0] = fish; // Store first shared memor space to fish\n  int columnToMoveTo = 0;\n  while(1) {\n    int closestPellet = shm[findClosestPellet(shm)];\n    if ((closestPellet % 10) &gt; (fish % 10) ) {\n      moveRight(fish, shm);\n    }\n    else if ((closestPellet % 10) &lt; (fish % 10)) {\n      moveLeft(fish, shm);\n    }\n    sleep(1);\n  }\n  shmdt(shm);\n  return 0;\n}\n\nint findClosestPellet(int* shm) {\n  // Using distance formula to find closest pellet\n  // (x2 - x1)^2 + (y2 - y1)^2\n  int closestPellet = 0;\n  int distance[20] = {0}; // Distance of all 20 pellets\n  int minimumDistance = 0;\n  // shm[1] = 11;\n  // shm[2] = 14;\n  // shm[3] = 10;\n  // shm[4] = 55;\n  int x2 =  shm[0] % 10;\n  int y2 = shm[0] / 10;\n  for (int i = 1; i &lt; 20; i++) {\n    int x1 = shm[i] % 10;\n    int y1 = shm[i] / 10;\n    distance[i] = pow(x2-x1,2) + pow(y2-y1,2); // Storing them\n  }\n  minimumDistance = distance[1];\n\n  //Finding smallest distance\n  for (int i = 2; i &lt; 20; i++) {\n    if (distance[i] &lt;= minimumDistance) {\n      closestPellet = i;\n    }\n  }\n  printf(\"Closest pellet %d \\n\", closestPellet);\n  return shm[closestPellet];\n}\n\nvoid moveLeft(int fish, int* shm) {\n  if (shm[0] &lt;= 90) {\n  }\n  else{\n    fish--;\n    shm[0]--;\n  }\n}\n\nvoid moveRight(int fish, int* shm) {\n  if (shm[0] &gt;= 99){\n  }\n  else{\n    fish++;\n    shm[0]++;\n  }\n}\n</code></pre>\n\n<p>Pellets.c</p>\n\n<pre><code>// Multiple pellets\n//Process ID, position, eaten/misse\n#include &lt;stdio.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid eatPellet();\nvoid missPellet();\n\nint main() {\n  key_t key = ftok(\"SwimMill.c\", 'b');\n  int shmid = shmget(key, 1024, IPC_CREAT|0666);\n  int *shm = (int*) shmat(shmid, NULL, 0);\n\n  int i = 1; // 1 - 19 are pellets\n  for (; i &lt; 20; i++) {\n    int pelletPosition = rand() % 9 + 0; // random number from 0 - 9\n    shm[i] = pelletPosition;\n    break;\n  }\n  while(1) {\n    if (shm[i] &lt; 90) {\n      shm[i] += 10;\n    }\n    else if (shm[i] == shm[0]) {\n      eatPellet();\n      printf(\"Position: %d\\n\", shm[i] );\n      break;\n      // EATEN and KILL\n    }\n    else {\n      // KIll process, terminate\n      missPellet();\n      printf(\"Position: %d\\n\", shm[i] );\n      break;\n    }\n    // printf(\"%d\\n\",shm[i] );\n    i++;\n    sleep(1);\n  }\n  shmdt(shm);\n  return 0;\n}\n\nvoid eatPellet() {\n  printf(\"Pellet eaten!\");\n  printf(\"PID: %d \\n\", getpid());\n\n}\n\nvoid missPellet() {\n  printf(\"Pellet missed\");\n  printf(\"PID: %d \\n\", getpid());\n}\n</code></pre>\n\n<p>For the makefile, I run \"make\". Then I run <code>./SwimMill</code>. However, it runs <code>Fish</code> for some reason.</p>\n"}, {"tags": ["c++", "c", "main", "args"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 8, "creation_date": 1540930589, "post_id": 53072241, "comment_id": 93042904, "body": "Pass them to the function that needs them?"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 5, "creation_date": 1540930641, "post_id": 53072241, "comment_id": 93042937, "body": "I think a common pattern is to have your library initialize with a <code>init(int argc, char** argv)</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1540930849, "post_id": 53072241, "comment_id": 93043023, "body": "If you are asking &quot;is there a Standard Library function that gives this access&quot;, the answer is &quot;no&quot;."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540930912, "post_id": 53072241, "comment_id": 93043049, "body": "<i>I see no reason for not being able to access them</i> remember the dangers of global data."}, {"owner": {"reputation": 2898, "user_id": 1601656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/16b47c431caa644270a534fa772c3010?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/1601656/grzegorz"}, "edited": false, "score": 0, "creation_date": 1540931221, "post_id": 53072241, "comment_id": 93043186, "body": "@NeilButterworth - I think you could write this as an answer if you are sure there is none. That&#39;s basically the answer to my question in comparison to the first two that seem to do not bother to read all question."}, {"owner": {"reputation": 2898, "user_id": 1601656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/16b47c431caa644270a534fa772c3010?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/1601656/grzegorz"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540931312, "post_id": 53072241, "comment_id": 93043225, "body": "@NathanOliver: The clue is &quot;My problem comes from the fact that I am writing a library&quot;. If I had a freedom to change programs then I would not bother asking this question on stackoverflow."}, {"owner": {"reputation": 2898, "user_id": 1601656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/16b47c431caa644270a534fa772c3010?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/1601656/grzegorz"}, "reply_to_user": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1540931340, "post_id": 53072241, "comment_id": 93043237, "body": "@merlin2011: If I could change programs then I would not bother asking this particular question here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1540931412, "post_id": 53072241, "comment_id": 93043266, "body": "&quot;The clue is &quot;My problem comes from the fact that I am writing a library&quot;.&quot; - if you are writing a library, then something needs to call that library code. That something can initialise your library by calling a function in your library. Nathan&#39;s and merlin&#39;s comments describe what your library needs to do if it is to processs command-line parameters."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1540931493, "post_id": 53072241, "comment_id": 93043311, "body": "There&#39;s a difference between &quot;I am writing a library&quot; and &quot;I am making changes to an existing library that&#39;s already in use&quot;. In the former you can enforce whatever rules you want, .e.g &quot;make sure <code>init()</code> is called before calling any of these functions&quot;. It isn&#39;t clear which state you&#39;re in"}, {"owner": {"reputation": 2898, "user_id": 1601656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/16b47c431caa644270a534fa772c3010?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/1601656/grzegorz"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1540934786, "post_id": 53072241, "comment_id": 93044622, "body": "@Kevin - fair. I thought the sentence &quot;without storing references to them&quot; was enough and then added explanation of my task. I will rewrite it for clarity, despite accepting answer. Thanks!"}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1540973808, "post_id": 53072241, "comment_id": 93055253, "body": "Off: If you wish to pass options to your library without modifing the main program, you can use environment variables or configuration files."}, {"owner": {"reputation": 2898, "user_id": 1601656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/16b47c431caa644270a534fa772c3010?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/1601656/grzegorz"}, "reply_to_user": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 1, "creation_date": 1540999613, "post_id": 53072241, "comment_id": 93070670, "body": "@LorinczyZsigmond: k&#246;sz&#246;n&#246;m. That&#39;s a great idea. I don&#39;t know if this fly through with the team but I like it."}], "answers": [{"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 5, "last_activity_date": 1540931589, "creation_date": 1540931589, "answer_id": 53072479, "question_id": 53072241, "link": "https://stackoverflow.com/questions/53072241/can-a-function-access-args-passed-to-main/53072479#53072479", "title": "Can a function access args passed to main()?", "body": "<p>Some systems do provide access to the argument list, or at least <a href=\"https://www.gnu.org/software/libc/manual/html_node/Error-Messages.html#Error-Messages\" rel=\"noreferrer\"><code>argv[0]</code></a>.  But it\u2019s common practice for <code>main</code> to <a href=\"https://www.gnu.org/software/libc/manual/html_node/Using-Getopt.html#Using-Getopt\" rel=\"noreferrer\"><em>mutate</em></a> <code>argc</code> and <code>argv</code> during option processing, so there is no reliably correct answer as to what a global interface for them should return.</p>\n\n<p>Add to that the general undesirability of global state, and the fact that it harms debugging to have whatever low-level functions attempt to analyze the arguments to a program they might know nothing about, and you end up with <em>don\u2019t do that</em>.  It\u2019s not hard to pass arguments (or, better, meaningful flags that result from decoding them) to a library.</p>\n"}], "owner": {"reputation": 2898, "user_id": 1601656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/16b47c431caa644270a534fa772c3010?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/1601656/grzegorz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 53072479, "answer_count": 1, "score": -1, "last_activity_date": 1540934843, "creation_date": 1540930552, "last_edit_date": 1540934843, "question_id": 53072241, "link": "https://stackoverflow.com/questions/53072241/can-a-function-access-args-passed-to-main", "title": "Can a function access args passed to main()?", "body": "<p>Is there a way I could access program's args outside of <code>main()</code> without storing references to them?</p>\n\n<p>Program arguments are stored within preserved space of the program, so I see no reason for not being able to access them. Maybe there is something like <code>const char** get_program_arguments()</code> and <code>int get_program_arguments_count()</code> but I cannot find it...</p>\n\n<p>My problem comes from the fact that I am rewriting a library that is used now in many programs within the company, and I need to access these programs common arguments without changing them. For example I need program name, but I cannot use <code>::getenv(\"_\")</code> as they can be executed from various shells. I cannot use GNU extension because this needs to work on Linux, AIX, SunOS using gcc, CC and so on.</p>\n"}, {"tags": ["c", "variables", "scanf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1540930341, "post_id": 53072182, "comment_id": 93042798, "body": "<code>temp_pin</code> is array, but you treat it as a scalar. Not sure if it will even compile."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1540930607, "post_id": 53072182, "comment_id": 93042915, "body": "@EugeneSh. It just gives me a warning when I try to compile."}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 5214345, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q1gpl.png?s=128&g=1", "display_name": "Glinka", "link": "https://stackoverflow.com/users/5214345/glinka"}, "edited": false, "score": 0, "creation_date": 1540932073, "post_id": 53072227, "comment_id": 93043570, "body": "This is not what the OP attempts to do. It seems from the code that they try to read a pin that consists of 4 numbers (for some reason). Perhaps each int is supposed to hold a digit. The conceptual problem here lies in the attempt to read an array with one <code>scanf</code> call, as you might do in other high-level languages. And the same problem with comparison operations."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1540931936, "last_edit_date": 1540931936, "creation_date": 1540930484, "answer_id": 53072227, "question_id": 53072182, "link": "https://stackoverflow.com/questions/53072182/scanf-and-address-operator-not-working-inside-for-loop/53072227#53072227", "title": "Scanf and Address Operator (&amp;) not working inside for loop", "body": "<p>You have <code>temp_pin</code> declared as an <em>array</em> of integers, so <code>&amp;temp_pin</code> is a pointer to an array and has type <code>int (*)[4]</code>.  The <code>%d</code> format specifier expects an <code>int *</code>.</p>\n\n<p>Similarly, when printing you pass the array <code>temp_pin</code> which decays to a pointer to the first element, and that address is what is being printed.</p>\n\n<p>Change the type of <code>temp_pin</code> and the other variables declared as arrays to <code>int</code> and remove the loop.</p>\n\n<pre><code>int pin = 1234;\nint temp_pin;\nint new_pin;\nint temp_new_pin;\n\n...\n\nif (option == 1)\n{\n    printf(\"\\nPlease Enter Your PIN\\n\");\n\n    scanf(\" %d\", &amp;temp_pin);\n    printf(\" %d\", temp_pin);\n\n    if (temp_pin==pin)\n    {\n        printf(\"\\nYour PIN is correct\\n\");\n    }\n    else\n    {\n        printf(\"\\nYour PIN is incorrect\\n\");\n    }\n}//End If\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 395, "user_id": 5214345, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q1gpl.png?s=128&g=1", "display_name": "Glinka", "link": "https://stackoverflow.com/users/5214345/glinka"}, "is_accepted": false, "score": 0, "last_activity_date": 1540939986, "last_edit_date": 1540939986, "creation_date": 1540931491, "answer_id": 53072454, "question_id": 53072182, "link": "https://stackoverflow.com/questions/53072182/scanf-and-address-operator-not-working-inside-for-loop/53072454#53072454", "title": "Scanf and Address Operator (&amp;) not working inside for loop", "body": "<p>You attempt to read an array with one <code>scanf</code> call, but it does work like that in c. Note that <code>temp_pin</code> is already an address of the first element in the array. \nThe line</p>\n\n<pre><code>scanf(\"%d\", temp_pin);\n</code></pre>\n\n<p>is equivalent to the line</p>\n\n<pre><code>scanf(\"%d\", &amp;(temp_pin[0]));\n</code></pre>\n\n<p>and it reads the value and stores it at <code>temp_pin[0]</code>. </p>\n\n<p>In order to read the whole array you'll need to do something like this:</p>\n\n<pre><code>for (int i=0; i&lt;4; i++) scanf(\"%d\", &amp;(temp_pin[i]));\n</code></pre>\n\n<p>The same story with the comparison. You can't compare two arrays with one <code>==</code> operation. The expression <code>temp_pin == pin</code> compares the addresses which will always be different despite the actual values that are stored in those arrays. In order to compare two arrays  you'll need to do something like this:</p>\n\n<pre><code>int isEqual = 1; // a flag for whether arrays are equal \nfor (int i=0; i&lt;4; i++) {\n    if (temp_pin[i] != pin[i]) {\n        isEqual = 0; \n    }\n}\nif (isEqual) printf(\"pins are the same\\n\");\nelse printf(\"pins are not the same\\n\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 10565717, "user_type": "registered", "profile_image": "https://graph.facebook.com/1932685853444649/picture?type=large", "display_name": "Tibor Ukropina", "link": "https://stackoverflow.com/users/10565717/tibor-ukropina"}, "is_accepted": false, "score": 1, "last_activity_date": 1540935970, "creation_date": 1540935970, "answer_id": 53073323, "question_id": 53072182, "link": "https://stackoverflow.com/questions/53072182/scanf-and-address-operator-not-working-inside-for-loop/53073323#53073323", "title": "Scanf and Address Operator (&amp;) not working inside for loop", "body": "<p>If I could make one suggestion it would be changing all the integer arrays into integers. This would fix all of your problems. However, if your assignment requires the use of integer arrays please follow the code below.</p>\n\n<p>Currently you are setting only the first element of temp_pin equal to the user input. The line <code>scanf(\" %d\", &amp;temp_pin);</code> actually stores an integer into <code>temp_pin[0]</code>.</p>\n\n<p>Since the pin size is 4, you would need to read in 4 separate integers to store in the array. I would suggest using a for loop that can set the values of <code>temp_pin[0], temp_pin[1], temp_pin[2], temp_pin[3]</code></p>\n\n<p>Logically, I would also suggest error checking each integer, since an integer can be from size -32,768 to 32,767. Currently an integer array with the elements <code>3300,55,12,15</code> would be a valid pin.</p>\n\n<p>The value you are given in this line <code>printf(\" %d\", temp_pin);</code> is not random variables. This is the address of temp pin. In order to print the values stored in temp_pin you would need to iterate through each element in the array and print it individually.</p>\n\n<p>For your compare statement <code>if (temp_pin==pin)</code>, this would never result in true since it is comparing addresses. Again the proper fix for this would be to iterate through both lists simultaneously and compare each element. </p>\n"}], "owner": {"reputation": 27, "user_id": 10580205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47918bfba645fdcacd2259b7de8b68bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/10580205/dylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 53072227, "answer_count": 3, "score": 2, "last_activity_date": 1540939986, "creation_date": 1540930240, "question_id": 53072182, "link": "https://stackoverflow.com/questions/53072182/scanf-and-address-operator-not-working-inside-for-loop", "title": "Scanf and Address Operator (&amp;) not working inside for loop", "body": "<p>I have an assignment and I was wondering why when I compile this code and run it, the <code>scanf(\"%d\", &amp;temp_pin)</code> doesn't store the data in an address. I know this because in the next statement of <code>printf(\"%d\", temp_pin)</code> I'm just given random variables. I have another scanf statement in the earlier lines of code that work and I`m just stumped as to why this one doesn't. Many thanks!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n//Deceleration of Variables\nint option;\nint pin [4]={1, 2, 3, 4};\nint temp_pin [4];\nint new_pin [4];\nint temp_new_pin [4];\nint correct;\nint incorrect;\n\n\n\ndo\n{\n    printf(\"Please enter which option you wish to operate\\n\\n\");\n    printf(\"1. Enter your pin\\n\");\n    printf(\"2. Change your pin\\n\");\n    printf(\"3. Display the number of times the PIN was entered: \\n  Successfully\\n  Unsuccessfully\\n\");\n    printf(\"4. Exit Program\\n\\n\");\n\n    scanf(\"%d\", &amp;option);\n\n    if (option == 1)\n    {\n    printf(\"\\nPlease Enter Your PIN\\n\");\n\n    for (int i = 0; i &lt; 4; i++)\n    {\n        scanf(\" %d\", &amp;temp_pin);\n        printf(\" %d\", temp_pin);\n\n        if (temp_pin==pin)\n        {\n            printf(\"\\nYour PIN is correct\\n\");\n        }\n\n        if (temp_pin != pin)\n        {\n            printf(\"\\nYour PIN is incorrect\\n\");\n        }\n     }//End For\n     }//End If\n\n} // end do\nwhile(option != 4);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "warnings"], "comments": [{"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 1, "creation_date": 1540926401, "post_id": 53071231, "comment_id": 93040882, "body": "Change this <code>struct students{ char name[30]; int points[10]; int absences[10]; };</code> to <code>struct students{ char name[30]; int points; int absences; };</code> And this <code>scanf(&quot;%s&quot;, &amp;stud[i].name);</code> --&gt; <code>scanf(&quot;%s&quot;, stud[i].name);</code> since <code>name</code> itself an address hence <code>&amp;</code> is not required."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1540926509, "post_id": 53071231, "comment_id": 93040922, "body": "Instead of having magical numbers like <code>30</code> and <code>10</code> in your code, define constants that represent them. This helps avoid mistakes when you change several instances to a new value, but forget some others. C is a very unforgiving language, it will do <i>exactly</i> what you ask, so you need to go out of your way to be careful and not set yourself up for problems."}, {"owner": {"reputation": 41, "user_id": 10420311, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R7pDlKGJeLY/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUR71w3sA3njK7LzXOTQYzJev0NKA/mo/photo.jpg?sz=128", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/10420311/stan-marsh"}, "reply_to_user": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1540926513, "post_id": 53071231, "comment_id": 93040926, "body": "@Achal Thank you very much :)"}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 3, "creation_date": 1540927503, "post_id": 53071389, "comment_id": 93041443, "body": "Stating what code should be does not answer the question, because it does not explain what was wrong or why it was wrong, nor does it explain why the new code is correct nor what the difference is."}], "tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": false, "score": 1, "last_activity_date": 1540926878, "creation_date": 1540926878, "answer_id": 53071389, "question_id": 53071231, "link": "https://stackoverflow.com/questions/53071231/c-warning-format-d-expects-argument-of-type-int-but-argument-2-has-type/53071389#53071389", "title": "C Warning &quot;format &#39;%d&#39; expects argument of type &#39;int *&#39;, but argument 2 has type &#39;int&quot;", "body": "<ol>\n<li><p>In <code>struct students</code>, <code>int points[10];</code> should be <code>int points;</code>, <code>int absences[10];</code> should be <code>int absences;</code></p></li>\n<li><p>The line <code>scanf(\"%s\", &amp;stud[i].name);</code> should be <code>scanf(\"%s\", stud[i].name);</code></p></li>\n</ol>\n\n<p>The follow <code>code</code> could work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct students{\n    char name[30];\n    int points;\n    int absences;\n};\n\nint main()\n{\n    int i, n;\n    printf(\"Declare the number of students: \");\n    scanf(\"%d\", &amp;n);\n\n    struct students *stud = malloc(sizeof(struct students) * n);\n\n    for (i = 0; i &lt; n; i++) {\n        printf(\"Name: \");\n        scanf(\"%s\", stud[i].name);\n        printf(\"Points: \");\n        scanf(\"%d\", &amp;stud[i].points);\n        printf(\"Absences: \");\n        scanf(\"%d\", &amp;stud[i].absences);\n    }\n\n\n    for( i = 0; i &lt; n; i++)\n    {\n        printf(\"%s\\n\", stud[i].name);\n        printf(\"%d\\n\", stud[i].points);\n        printf(\"%d\\n\", stud[i].absences);\n\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 13572274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b23d07ca07a795f009ecc9bcbb71dc?s=128&d=identicon&r=PG&f=1", "display_name": "prince09", "link": "https://stackoverflow.com/users/13572274/prince09"}, "is_accepted": false, "score": 0, "last_activity_date": 1590221116, "creation_date": 1590221116, "answer_id": 61969154, "question_id": 53071231, "link": "https://stackoverflow.com/questions/53071231/c-warning-format-d-expects-argument-of-type-int-but-argument-2-has-type/61969154#61969154", "title": "C Warning &quot;format &#39;%d&#39; expects argument of type &#39;int *&#39;, but argument 2 has type &#39;int&quot;", "body": "<p>Try this code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nstruct students{\n    char name[30];\n    int points;\n    int absences;\n};\n\nint main()\n{\n    int i, n;\n    printf(\"Declare the number of students: \");\n    scanf(\"%d\", &amp;n);\n\n    struct students stud[n];\n\n    for (i = 0; i &lt; n; i++) {\n        printf(\"Name: \");\n        scanf(\"%s\", stud[i].name);\n        printf(\"Points: \");\n        scanf(\"%d\", &amp;stud[i].points);\n        printf(\"Absences: \");\n        scanf(\"%d\", &amp;stud[i].absences);\n    }\n\n\n    for( i = 0; i &lt; n; i++)\n    {\n        printf(\"%s\\n\", stud[i].name);\n        printf(\"%d\\n\", stud[i].points);\n        printf(\"%d\\n\", stud[i].absences);\n\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10420311, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R7pDlKGJeLY/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUR71w3sA3njK7LzXOTQYzJev0NKA/mo/photo.jpg?sz=128", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/10420311/stan-marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2749, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1590221116, "creation_date": 1540926199, "question_id": 53071231, "link": "https://stackoverflow.com/questions/53071231/c-warning-format-d-expects-argument-of-type-int-but-argument-2-has-type", "title": "C Warning &quot;format &#39;%d&#39; expects argument of type &#39;int *&#39;, but argument 2 has type &#39;int&quot;", "body": "<p>I want to fill up these arrays with a string and some numbers, but can't really seem to figure out why I cannot.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct students{\nchar name[30];\nint points[10];\nint absences[10];\n};\n\nint main()\n{\nint i, n;\nprintf(\"Declare the number of students: \");\nscanf(\"%d\", &amp;n);\n\nstruct students stud[n];\n\nfor (i = 0; i &lt; n; i++) {\n    printf(\"Name: \");\n    scanf(\"%s\", &amp;stud[i].name);\n    printf(\"Points: \");\n    scanf(\"%d\", &amp;stud[i].points);\n    printf(\"Absences: \");\n    scanf(\"%d\", &amp;stud[i].absences);\n}\n\n\nfor( i = 0; i &lt; n; i++)\n{\n    printf(\"%s\\n\", stud[i].name);\n    printf(\"%d\\n\", stud[i].points);\n    printf(\"%d\\n\", stud[i].absences);\n\n}\n\n\n}\n</code></pre>\n\n<p>This is the warning i get:</p>\n\n<p>warning: format '%s' expects argument of type 'char <em>', but argument 2 has type 'char (</em>)[30]' [-Wformat=]</p>\n\n<pre><code>     scanf(\"%s\", &amp;stud[i].name);\n</code></pre>\n\n<p>feladat1.c:21:15: warning: format '%d' expects argument of type 'int <em>', but argument 2 has type 'int (</em>)[10]' [-Wformat=]</p>\n\n<pre><code>     scanf(\"%d\", &amp;stud[i].points);\n</code></pre>\n\n<p>feladat1.c:23:15: warning: format '%d' expects argument of type 'int <em>', but argument 2 has type 'int (</em>)[10]' [-Wformat=]</p>\n\n<pre><code>     scanf(\"%d\", &amp;stud[i].absences);\n</code></pre>\n\n<p>feladat1.c:30:16: warning: format '%d' expects argument of type 'int', but argument 2 has type 'int *' [-Wformat=]</p>\n\n<pre><code>     printf(\"%d\\n\", stud[i].points);\n</code></pre>\n\n<p>feladat1.c:31:16: warning: format '%d' expects argument of type 'int', but argument 2 has type 'int *' [-Wformat=]</p>\n\n<pre><code>     printf(\"%d\\n\", stud[i].absences);\n</code></pre>\n"}, {"tags": ["c", "return"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1540926149, "post_id": 53071182, "comment_id": 93040749, "body": "There is no <code>return</code> statement in <code>append</code> function here."}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 0, "creation_date": 1540926184, "post_id": 53071182, "comment_id": 93040769, "body": "Why does <code>append</code> need to return anything? Possibly you should just mutate the array instead? I suspect you are missing a lot of fundamentals, and explaining all of them would be beyond the scope of what can be the answer to one question."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1540926261, "post_id": 53071182, "comment_id": 93040809, "body": "There is no <code>return s</code>. <code>s</code> is not used at all."}, {"owner": {"reputation": 21, "user_id": 5655500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97cfe31b8077816a0161cc81e53cc78b?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/5655500/kemal"}, "edited": false, "score": 0, "creation_date": 1540926294, "post_id": 53071182, "comment_id": 93040827, "body": "there is return statement but I write it as comment line"}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540927596, "post_id": 53071281, "comment_id": 93041507, "body": "It is simpler to return a structure (not a pointer to a structure) that contains two values."}], "tags": [], "owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "is_accepted": false, "score": 0, "last_activity_date": 1540926422, "creation_date": 1540926422, "answer_id": 53071281, "question_id": 53071182, "link": "https://stackoverflow.com/questions/53071182/c-programming-why-return-statement-give-only-one-value-in-this-code/53071281#53071281", "title": "C programming ... Why &quot;return&quot; statement give only one value in this code?", "body": "<p>In C, each function must return exactly one value. (It can be <code>void</code> if it doesn't need to return anything.)</p>\n\n<p>If you want multiple results from a function, there are two ways to achieve this.</p>\n\n<p><strong>Option one:</strong> in your function, allocate some kind of structure for holding multiple values (often, but not necessarily, an array) and make the <em>one</em> return value from your function be a <em>pointer</em> to that structure. The caller of the function will usually be responsible for cleaning up that structure when it is done with it, using <code>free</code> for example.</p>\n\n<p><strong>Option two:</strong> have your function take a pointer to some kind of a container for multiple values (often, but not necessarily, an array) and \"return\" the results by adding them into the container.</p>\n\n<p>In either case, it is still the responsibility of the caller (<code>main</code> in this case) to do something meaningful with each of the values, for example by using a <code>for</code> loop to print them all out.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5655500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97cfe31b8077816a0161cc81e53cc78b?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/5655500/kemal"}, "edited": false, "score": 0, "creation_date": 1540927252, "post_id": 53071367, "comment_id": 93041296, "body": "thanks for response but code gives:  [Error] &#39;array&#39; was not declared in this scope"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 21, "user_id": 5655500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97cfe31b8077816a0161cc81e53cc78b?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/5655500/kemal"}, "edited": false, "score": 0, "creation_date": 1540927350, "post_id": 53071367, "comment_id": 93041364, "body": "@Kemal That should be <code>kar</code>.  Updated."}, {"owner": {"reputation": 21, "user_id": 5655500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97cfe31b8077816a0161cc81e53cc78b?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/5655500/kemal"}, "edited": false, "score": 0, "creation_date": 1540927567, "post_id": 53071367, "comment_id": 93041489, "body": "#include &lt;stdio.h&gt;  void append(int array[]){       int  position, c, s, len=4, value=25;        position=1;        for (c = len - 2; c &gt;= position-1; c--){           array[c+1] = array[c];       }       array[position-1] = value; }  int main() { \t           int kar[]= {5, 8, 555, 99};      append(kar);      int c;     for (c = 0; c &lt; 4; c++){         printf(&quot;%d &quot;, array[c]);     }            return 0; }"}, {"owner": {"reputation": 21, "user_id": 5655500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97cfe31b8077816a0161cc81e53cc78b?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/5655500/kemal"}, "edited": false, "score": 0, "creation_date": 1540927714, "post_id": 53071367, "comment_id": 93041573, "body": "excuse me please but it gives same error..."}, {"owner": {"reputation": 21, "user_id": 5655500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97cfe31b8077816a0161cc81e53cc78b?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/5655500/kemal"}, "edited": false, "score": 0, "creation_date": 1540927836, "post_id": 53071367, "comment_id": 93041636, "body": "THANKS!!!!!!!!!!!!!!!!!!!!!!!!!!!!! OK. excuse me this my mistake..... thanks again and again......"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1540927338, "last_edit_date": 1540927338, "creation_date": 1540926782, "answer_id": 53071367, "question_id": 53071182, "link": "https://stackoverflow.com/questions/53071182/c-programming-why-return-statement-give-only-one-value-in-this-code/53071367#53071367", "title": "C programming ... Why &quot;return&quot; statement give only one value in this code?", "body": "<p>You're passing <code>array</code> to the function, which is actually passing a pointer to the first element of the array.  This means that changes to the array in the function also will appear in the calling function since it's the same array.</p>\n\n<p>You don't need to return anything.  Just print the contents of the array in <code>main</code>.  </p>\n\n<p>Also, an array of size 4 has indexes from 0 to 3.  Right now you're writing past the end of the array.  You need to change your function to prevent that.  You can't just write past the end of the array to make it bigger.  The size is fixed.</p>\n\n<pre><code>void append(int array[]){\n      int  position, c, s, len=4, value=25; \n      position=1;\n\n      for (c = len - 2; c &gt;= position-1; c--){\n          array[c+1] = array[c];\n      }\n      array[position-1] = value;\n}\n\nint main() {\n    int kar[]= {5, 8, 555, 99};\n\n    append(kar);\n\n    int c;\n    for (c = 0; c &lt; 4; c++){\n        printf(\"%d \", kar[c]);\n    }       \n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5655500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97cfe31b8077816a0161cc81e53cc78b?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/5655500/kemal"}, "edited": false, "score": 0, "creation_date": 1540935848, "post_id": 53071966, "comment_id": 93044850, "body": "Thanks for your detailed answer. Excuse me but when I rearranged my code as you say, I meet this error :[Error] invalid conversion from &#39;void*&#39; to &#39;int*&#39; [-fpermissive]. int *tmp = realloc( *array, *size + 1 ); this line causes the error."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 21, "user_id": 5655500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97cfe31b8077816a0161cc81e53cc78b?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/5655500/kemal"}, "edited": false, "score": 0, "creation_date": 1540945845, "post_id": 53071966, "comment_id": 93047671, "body": "@Kemal: you may need to <code>#include &lt;stdlib.h&gt;</code>"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1540929284, "last_edit_date": 1592644375, "creation_date": 1540929284, "answer_id": 53071966, "question_id": 53071182, "link": "https://stackoverflow.com/questions/53071182/c-programming-why-return-statement-give-only-one-value-in-this-code/53071966#53071966", "title": "C programming ... Why &quot;return&quot; statement give only one value in this code?", "body": "<blockquote>\n<p>When I run this code with &quot;printf(&quot;%d &quot;, array[c])&quot;, the output is;</p>\n<p>25, 5, 8, 555, 99</p>\n</blockquote>\n<p>That's because you're calling the <code>printf</code> statement as part of a <em>loop</em>:</p>\n<pre><code>for (c = 0; c &lt;= len; c++){\n  printf(&quot;%d &quot;, array[c]);    \n}       \n</code></pre>\n<p>IOW, you're calling</p>\n<pre><code>printf(&quot;%d &quot;, array[0]); // prints 25\nprintf(&quot;%d &quot;, array[1]); // prints 5\nprintf(&quot;%d &quot;, array[2]); // prints 555\nprintf(&quot;%d &quot;, array[3]); // prints 99\n</code></pre>\n<p><code>printf</code> with the <code>%d</code> modifier <em>cannot</em> print an entire array of <code>int</code> - it can only print a single <code>int</code> value at a time.</p>\n<p>Note that your <code>return</code> statement</p>\n<pre><code>return array[c];\n</code></pre>\n<p>only returns a <em>single element</em> of the array (from within the loop, that would be element 0).</p>\n<p>As other people have mentioned, you don't need to <em>return</em> anything (except for maybe the new array size).</p>\n<p>But this brings up another problem - given your declaration</p>\n<pre><code>int kar[]= {5, 8, 555, 99};\n</code></pre>\n<p><code>kar</code> <em>cannot</em> hold more than 4 values - it cannot be extended to hold any more.  You will either need to declare <code>kar</code> with a size that's bigger than 4:</p>\n<pre><code>int kar[10] = {5, 8, 555, 99};\n</code></pre>\n<p>or you will need to allocate that memory dynamically and extend it as necessary:</p>\n<pre><code>size_t arr_size = 4;\nint *kar = malloc( sizeof *kar * arr_size );\n\nkar[0] = 5;\nkar[1] = 8;\nkar[2] = 555;\nkar[3] = 99;\n\n/**\n * Add 25 to the beginning of the array\n */\nappend( 25, &amp;kar, &amp;arr_size );\n</code></pre>\n<p>and then in your <code>append</code> function:</p>\n<pre><code>void append( int val, int **array, size_t *size )\n{\n  /** \n   * Extend the array size by 1.  We assign the result to a temporary in \n   * case realloc fails and returns a NULL - this way we won't lose our \n   * reference the the original memory.  \n   *\n   * In practice, we would not extend the array one element at a time (realloc\n   * can be an expensive operation, so you want to minimize the number of\n   * times you call it), but I'm trying to keep the example as simple as\n   * I can.  \n   */\n  int *tmp = realloc( *array, *size + 1 );\n\n  if ( tmp )\n  {\n    /**\n     * Realloc succeeded - update the size and assign tmp back to\n     * *array (this is why we needed to pass `array` as an `int **`;\n     * we need to update the pointer value).  \n     */\n    (*size)++;\n    *array = tmp;\n\n    /**\n     * Shift all elements up one.\n     */\n    for ( size_t c = *size - 1; c &gt; 0; c-- )\n      (*array)[c] = (*array)[c-1];           // we don't want to index into array, we want\n                                             // to index into what array *points to*\n    /**\n     * Add the new value to the beginning of the array\n     */\n    (*array)[0] = val;\n  }\n  else\n  {\n    fprintf( stderr, &quot;Could not extend input array, contents left unchanged\\n&quot; );\n  }\n}\n</code></pre>\n<p>When you're done, be sure to deallocate that memory at the end of <code>main</code>:</p>\n<pre><code>free( kar );\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5655500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97cfe31b8077816a0161cc81e53cc78b?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/5655500/kemal"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "closed_date": 1540974694, "accepted_answer_id": 53071367, "answer_count": 3, "score": -5, "last_activity_date": 1543440321, "creation_date": 1540926030, "last_edit_date": 1543440321, "question_id": 53071182, "link": "https://stackoverflow.com/questions/53071182/c-programming-why-return-statement-give-only-one-value-in-this-code", "closed_reason": "Needs details or clarity", "title": "C programming ... Why &quot;return&quot; statement give only one value in this code?", "body": "<p>I'm newbie for coding C.  I'm trying to write a program which is adding a value at the first position the array. As shown below, <code>append</code> function must return more than one value. </p>\n\n<p>When I use <code>printf(\"%d \", array[c])</code> statement in this function, there is no problem and I get the values what I want. </p>\n\n<p>However, when I use <code>return s;</code> statement in this function, it gives only one value, although it must give same values with <code>printf(\"%d \", array[c])</code> statement.</p>\n\n<p>When I run this code with <code>printf(\"%d \", array[c])</code>, the output is:</p>\n\n<blockquote>\n  <p>25, 5, 8, 555, 99</p>\n</blockquote>\n\n<p>When I run this code with <code>return s</code>, the output is;</p>\n\n<blockquote>\n  <p>25</p>\n</blockquote>\n\n<p>Why there is a different between two statements? I don\u2019t need to print the values on screen.  I need to use <code>return</code> statement. Please help me for this\u2026</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint append(int array[]){\n\n          int  position, c, s, len=4, value=25; \n\n          position=1;\n\n          for (c = len - 1; c &gt;= position-1; c--){\n              array[c+1] = array[c];\n              }\n          array[position-1] = value;\n          for (c = 0; c &lt;= len; c++){\n\n                //return array[c]; // &lt;-- why this give only one value???   \n                printf(\"%d \", array[c]);    //&lt;--  this print the all value !!! \n              }          \n}\n\nint main(){\n\n    int kar[]= {5, 8, 555, 99};\n\n    printf(\"%d\", append(kar));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "char", "scanf", "constants"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1540925944, "post_id": 53071084, "comment_id": 93040642, "body": "What is <code>MAX_SIZE</code>?"}, {"owner": {"reputation": 45, "user_id": 10582249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OPcyr.png?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10582249/patrick"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1541176470, "post_id": 53071084, "comment_id": 93139581, "body": "MAX_SIZE was a #define  I&#39;ve handeled it like my comment in the post here: <a href=\"https://stackoverflow.com/questions/28459980/specifying-the-maximum-string-length-to-scanf-dynamically-in-c-like-s-in-pr\" title=\"specifying the maximum string length to scanf dynamically in c like s in pr\">stackoverflow.com/questions/28459980/&hellip;</a>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1541178139, "post_id": 53071084, "comment_id": 93140499, "body": "I meant, is it a string? A numerical value? (Or, less likely and/or useful, a piece of code.) Possible answers hinged on its exact type."}, {"owner": {"reputation": 45, "user_id": 10582249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OPcyr.png?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10582249/patrick"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1541187312, "post_id": 53071084, "comment_id": 93144333, "body": "It was <code>#define MAX_SIZE 255</code>"}], "owner": {"reputation": 45, "user_id": 10582249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OPcyr.png?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10582249/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1540926006, "answer_count": 0, "score": 0, "last_activity_date": 1540925576, "creation_date": 1540925576, "question_id": 53071084, "link": "https://stackoverflow.com/questions/53071084/put-constants-between-s-example-in-c", "closed_reason": "Duplicate", "title": "Put constants between %s (example) in C", "body": "<p>is it any way possible to put a constant into a (for example) <code>scanf(\"%MAX_SIZEs\", char)</code>?\nThank you</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540926372, "post_id": 53071070, "comment_id": 93040867, "body": "When is the function going to stop? You need to pass the target value as a parameter."}, {"owner": {"reputation": 417, "user_id": 10062227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0hJGL.jpg?s=128&g=1", "display_name": "Daniel Logvin", "link": "https://stackoverflow.com/users/10062227/daniel-logvin"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540926538, "post_id": 53071070, "comment_id": 93040935, "body": "When I input a number it says segmentation fault. But when I input 1 or 0 it performs the first part of the conditional (\u2018return n;\u2019)"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1540926718, "post_id": 53071070, "comment_id": 93041026, "body": "Yes. If you call <code>numbers(2)</code> it will call <code>numbers(3)</code> which will call <code>numbers(4)</code> and it has no reason to stop until it runs out of stack space"}, {"owner": {"reputation": 417, "user_id": 10062227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0hJGL.jpg?s=128&g=1", "display_name": "Daniel Logvin", "link": "https://stackoverflow.com/users/10062227/daniel-logvin"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540926758, "post_id": 53071070, "comment_id": 93041041, "body": "Where can I define the limit then, as I know, I have defined it in the bucle"}], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 10062227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0hJGL.jpg?s=128&g=1", "display_name": "Daniel Logvin", "link": "https://stackoverflow.com/users/10062227/daniel-logvin"}, "edited": false, "score": 0, "creation_date": 1540927830, "post_id": 53071097, "comment_id": 93041634, "body": "I know that it can be done with a simple bucle, but i&#39;m trying to practice this &quot;problem&quot; with a recursion"}], "tags": [], "owner": {"reputation": 1082, "user_id": 10575208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGzxv.png?s=128&g=1", "display_name": "iElden", "link": "https://stackoverflow.com/users/10575208/ielden"}, "is_accepted": false, "score": 1, "last_activity_date": 1540926309, "last_edit_date": 1540926309, "creation_date": 1540925641, "answer_id": 53071097, "question_id": 53071070, "link": "https://stackoverflow.com/questions/53071070/count-till-certain-number-with-recursion-with-c-language/53071097#53071097", "title": "Count till certain number with recursion with C language", "body": "<p>Your recursion never end if you send a number >= 2, for exemple, if i send 2 to your numbers function, the next call step is 3, the next one is 4, 5, 6 ect....</p>\n\n<p>The correct code is :</p>\n\n<pre><code>int main(int argc, char const *argv[]) {\n\n  int number;\n  int i;\n\n  printf(\"Put a number and the program will do everything for ya.\\n\");\n  printf(\"Number: \");\n  scanf(\"%d\", &amp;number);\n  for(i=0;i&lt;=number;i++){\n    printf(\"%d, \", i);\n}\n</code></pre>\n\n<p>if you want to do recursion, you can do a countdown, that lends more to the recursion</p>\n\n<pre><code>int main(int argc, char const *argv[]) {\n\n  int number;\n\n  printf(\"Put a number and the program will do everything for ya.\\n\");\n  printf(\"Number: \");\n  scanf(\"%d\", &amp;number);\n  numbers(number);\n}\n\nvoid numbers(int n)\n{\n  printf(\"%d, \", n);\n  if (n &gt; 0)\n    numbers(n - 1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": false, "score": 1, "last_activity_date": 1540928643, "last_edit_date": 1540928643, "creation_date": 1540928314, "answer_id": 53071721, "question_id": 53071070, "link": "https://stackoverflow.com/questions/53071070/count-till-certain-number-with-recursion-with-c-language/53071721#53071721", "title": "Count till certain number with recursion with C language", "body": "<p>As discussed in the comments, your implementation will not stop counting because it has no idea what the target value is. For example, if the user enters '2', the code would run <code>numbers(0)</code>, which would return 0, then <code>numbers(1)</code> which would return 1, then <code>numbers(2)</code> which would call <code>numbers(3)</code> and so on, until the stack ran out of space.</p>\n\n<p>The following should work according to my understanding of the problem.</p>\n\n<pre><code>void count(int from, int to)\n{\n  printf( \"%d\", from );\n  if( from &lt; to )\n  {\n    printf( \", \");\n    count( from+1, to );\n  }\n}\n\nint main(int argc, char const *argv[])\n{\n  int number;\n\n  printf(\"Put a number and the program will do everything for ya.\\n\");\n  printf(\"Number: \");\n  scanf(\"%d\", &amp;number);\n\n  count(1,number);\n}\n</code></pre>\n\n<p>I've moved the printing into the recursive function because it makes it easier to output each number (and intelligently print the comma that comes between numbers), and it didn't make sense to me to use a recursive function <em>and</em> a <code>for</code> loop to count.</p>\n\n<p>The function simply prints out the current value and then checks to see if it has reached its goal. If not, it recursively counts to the next number.</p>\n"}, {"tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": true, "score": 2, "last_activity_date": 1540930673, "last_edit_date": 1540930673, "creation_date": 1540928479, "answer_id": 53071756, "question_id": 53071070, "link": "https://stackoverflow.com/questions/53071070/count-till-certain-number-with-recursion-with-c-language/53071756#53071756", "title": "Count till certain number with recursion with C language", "body": "<p>You have a few issues in your algorithm.</p>\n\n<ol>\n<li><p>the <code>for</code> loop calls the <code>numbers</code> program multiple times, starting the recursion multiple times. You need to start it only once, right?</p></li>\n<li><p>you calling recursion with <code>n+1</code>, actually making every next invocation with an incremental value, which could be incremented indefinitely. Your recursion has no exit and will die with some out of memory or a crash.</p></li>\n</ol>\n\n<p>To solve the first issue, just instantiate it once. </p>\n\n<p>To print it correctly, you need to have the print statement withing the recursion.</p>\n\n<p>For the second issue, you can do different approaches. The following is the easiest to understand and it passes <code>max</code> as a second argument.</p>\n\n<pre><code> void numbers(int n, int max) {\n     printf(%d \", n);\n     if (n &gt;= max)\n        return;\n     numbers (n + 1, max);\n  }\n\n  int main() {\n    ...\n    numbers(1, number);\n  }\n</code></pre>\n\n<p>a more efficient way is having a single argument and count it down to 0. But you have to be careful on when you want to print. In your case, if you need increment order of values, you have to make sure that the print happens <strong>after</strong> you return from recursion. </p>\n\n<p>Here is the program which implements the second method:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid numbers(int n);\nint main(int argc, char const *argv[]) {\n  int number;\n  int i;\n  printf(\"Put a number and the program will do everything for ya.\\n\");\n  printf(\"Number: \");\n  scanf(\"%d\", &amp;number);\n\n  // start recursion.\n  numbers(number);\n  printf(\"\\n\");\n}\n\nvoid numbers(int n){\n    if (n == 0)\n        return;\n    numbers(n-1);\n\n    // after return from recursion\n    printf(\"%d \", n);\n}\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 10062227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0hJGL.jpg?s=128&g=1", "display_name": "Daniel Logvin", "link": "https://stackoverflow.com/users/10062227/daniel-logvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1317, "favorite_count": 0, "accepted_answer_id": 53071756, "answer_count": 3, "score": 1, "last_activity_date": 1540930673, "creation_date": 1540925515, "question_id": 53071070, "link": "https://stackoverflow.com/questions/53071070/count-till-certain-number-with-recursion-with-c-language", "title": "Count till certain number with recursion with C language", "body": "<p>i've been trying to do a program that counts till the number that the user inputs (f,ex: 10) with recursion.</p>\n\n<p>If the user inputs 10, the program will have to print out: 1,2,3,4,5,6,7,8,9,10.</p>\n\n<p>I'm getting a <code>[1]    49348 segmentation fault  ./recs.exe</code> and i wanted to know why am i getting it to prevent it in the future.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint numbers(int n);\n\nint main(int argc, char const *argv[]) {\n\n  int number;\n\n  int i;\n\n  printf(\"Put a number and the program will do everything for ya.\\n\");\n\n  printf(\"Number: \");\n\n  scanf(\"%d\", &amp;number);\n\n  for(i=0;i&lt;=number;i++){\n\n    printf(\"%d, \", numbers(i));\n\n  }\n\n}\n\nint numbers(int n){\n\n  if(n==0||n==1){\n\n    return n;\n\n  } else {\n\n    return(numbers(n+1)); // I think the problem is here.\n\n  }\n\n}\n</code></pre>\n\n<p>Hope you guys can explain my error and help me understand why it's happening to me to help me avoid this silly mistake. Thanks :) </p>\n"}, {"tags": ["c", "memory", "x86", "64-bit", "x86-64"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1540925412, "post_id": 53071019, "comment_id": 93040370, "body": "There is no <code>arr[3]</code>. It is out of bounds."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1540925427, "post_id": 53071019, "comment_id": 93040376, "body": "<code>arr[3]=90;</code> writes out of the bounds of the array --&gt; Undefined behaviour"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 1, "creation_date": 1540925479, "post_id": 53071019, "comment_id": 93040400, "body": "when you compile x64, add <code>-O3</code> to the compilation line... I bet you will be surprised."}, {"owner": {"reputation": 13, "user_id": 8786306, "user_type": "registered", "profile_image": "https://graph.facebook.com/1472141212838944/picture?type=large", "display_name": "Abd El-Rahman Akram", "link": "https://stackoverflow.com/users/8786306/abd-el-rahman-akram"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1540926988, "post_id": 53071019, "comment_id": 93041158, "body": "@AlexLop. which compilation line !?"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1540925482, "creation_date": 1540925482, "answer_id": 53071055, "question_id": 53071019, "link": "https://stackoverflow.com/questions/53071019/memory-handling-in-x64-vs-x86-c-language/53071055#53071055", "title": "Memory handling in x64 vs x86 - C language", "body": "<p>Array indexes in C start from 0, so the valid indexes for <code>arr</code> is 0, 1, and 2.  Using <code>arr[3]</code> is writing off the end of the array.  Doing so invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behavior</a>, which in your case manifests as different behavior on x86 and x64.  You'll probably also get different behavior if use you a different compiler or change the optimization settings.</p>\n\n<p>Regarding this specific behavior, you seem to think that <code>i</code> should appear immediately after <code>arr</code> in memory so that writing to <code>arr[3]</code> actually writes to <code>i</code>.  There is no guarantee however regarding the ordering of local variables within a scope.  It's not just a x86 / x64 thing.</p>\n\n<p>Don't read / write past the end of an array, and you won't see these types of issues.</p>\n"}, {"tags": [], "owner": {"reputation": 593, "user_id": 9658875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841f55a02830a8f0655c07654401670f?s=128&d=identicon&r=PG&f=1", "display_name": "GermanNerd", "link": "https://stackoverflow.com/users/9658875/germannerd"}, "is_accepted": false, "score": 1, "last_activity_date": 1540986615, "creation_date": 1540986615, "answer_id": 53082669, "question_id": 53071019, "link": "https://stackoverflow.com/questions/53071019/memory-handling-in-x64-vs-x86-c-language/53082669#53082669", "title": "Memory handling in x64 vs x86 - C language", "body": "<p>Like others have explained, writing out of the bounds of your array is UB.</p>\n\n<p>I'd like to point out some other thing you might not realize:\nFrom your question it appears that you expect the access to <strong>arr[3]</strong> to overwrite your <strong>i</strong> variable.</p>\n\n<p>Even if the compiler would allocate your local variables in the order they appear in your source code, (which is not guaranteed at all!), you would NOT overwrite <strong>i</strong>.</p>\n\n<p>The reason for this is that usually the stack grows downwards. So if the compiler followed your sequence of allocations on the stack, <strong>i</strong> would get the lowest address in your code.</p>\n\n<p>But in order to allow normal pointer arithmetic (which is what happens when using the [] array notation), increasing indices into arr will go <em>upwards</em> in the stack, and you will overwrite your function's activation record. Very bad.</p>\n\n<p>Try this version of your code (compile with -fstack-protector-all in GCC):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid smash(void){\n   int arr[3] = {50, 7, 30};\n   int i = 2;\n\n   arr[3] = 90;\n\n   //Let's look at the addresses\n   printf(\"&amp;i = %p, &amp;arr[0] = %p, , &amp;arr[3] = %p\\n\", &amp;i, &amp;arr[0], &amp;arr[3]);\n\n   printf(\"arr[2] = %d, arr[3] = %d, i = %d\\n\", arr[2], arr[3], i);\n\n   int i2 = 3;\n   //Small loop limit can trigger stack protector *upon* return from smash()\n   //Large loop limit will create a segfault *before* returning from smash()\n   for(; i2 &lt; 10; i2++)\n      arr[i2] = 99999;\n\n   //Just to see where we crash.\n   printf(\"%d\\n\", i2);\n}\n\nint main(void)\n{\n   smash();\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8786306, "user_type": "registered", "profile_image": "https://graph.facebook.com/1472141212838944/picture?type=large", "display_name": "Abd El-Rahman Akram", "link": "https://stackoverflow.com/users/8786306/abd-el-rahman-akram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 53071055, "answer_count": 2, "score": 0, "last_activity_date": 1540986615, "creation_date": 1540925347, "last_edit_date": 1540942423, "question_id": 53071019, "link": "https://stackoverflow.com/questions/53071019/memory-handling-in-x64-vs-x86-c-language", "title": "Memory handling in x64 vs x86 - C language", "body": "<p>When I run the code below using a GCC compiler on X64 computer the output of <code>i</code> is 90 but when running it on x86 its value still 2, so where is the difference in handling the memory?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n  int arr[3]={50,7,30};\n  int i=2;\n\n  arr[3]=90;     \n  printf(\"arr[2]=%d,arr[3]=%d,i=%d\", arr[2], arr[3], i);\n\n  return 0;\n}\n</code></pre>\n"}]