[{"tags": ["c", "tokenize"], "comments": [{"owner": {"reputation": 379, "user_id": 9565303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ccb97eb1da2753d7d8f8b68469dfc8c?s=128&d=identicon&r=PG&f=1", "display_name": "SRhm", "link": "https://stackoverflow.com/users/9565303/srhm"}, "edited": false, "score": 3, "creation_date": 1539819396, "post_id": 52864879, "comment_id": 92644186, "body": "How you recognize comments?"}, {"owner": {"reputation": 1, "user_id": 10419951, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cHKGIZH_ooo/AAAAAAAAAAI/AAAAAAAAAq0/jDRe8YFtuwU/photo.jpg?sz=128", "display_name": "Zolstise", "link": "https://stackoverflow.com/users/10419951/zolstise"}, "reply_to_user": {"reputation": 379, "user_id": 9565303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ccb97eb1da2753d7d8f8b68469dfc8c?s=128&d=identicon&r=PG&f=1", "display_name": "SRhm", "link": "https://stackoverflow.com/users/9565303/srhm"}, "edited": false, "score": 0, "creation_date": 1539820893, "post_id": 52864879, "comment_id": 92644483, "body": "a semicolon represents a comment"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1539824213, "post_id": 52864879, "comment_id": 92645118, "body": "So, a semicolon starts a comment and a newline marks the end of the comment?  And there are no strings to worry about, so a line containing <code>a string &quot;holding; a semicolon&quot;</code> has a comment starting at the semicolon?  Quoting conventions for strings make life endlessly entertaining in comment strippers.  C is bad enough; shell is harder; Perl is \u2026 well, let&#39;s say Perl is a law unto itself (even though it only has <code>#</code> to introduce comments, it has lots and lots of ways of quoting things)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539821408, "post_id": 52865165, "comment_id": 92644580, "body": "&quot;<code>t == &quot;;&quot;</code> is invalid [and won&#39;t even compile]&quot; Why not?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539822047, "post_id": 52865165, "comment_id": 92644694, "body": "@Swordfish I compiled with <code>-Wall</code> and it was flagged for unspecified behavior"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539822784, "post_id": 52865165, "comment_id": 92644837, "body": "Strange wording. Comparing two pointers should not be unspecified."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539824704, "post_id": 52865165, "comment_id": 92645205, "body": "@Swordfish <i>Technically</i>, it&#39;s legal [so it&#39;s not an error]. It&#39;s complaining about comparing the address that <code>t</code> points to against the address of a <i>string literal</i>. This is not quite the same as comparing two pointers (e.g. <code>if (t == s)</code>) where such a shortcut could be valid: <code>char *t = &quot;;&quot;; char *s = &quot;;&quot;; if (t == s)</code>.  But, this is dicey at best. This <i>might</i> match or it might <i>not</i>, particularly if <code>t</code> and <code>s</code> where defined in separate compilation units. Thus, <code>-Waddress</code> is flagging it as something that will almost always produce incorrect/undesired results."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539824875, "post_id": 52865165, "comment_id": 92645247, "body": "Um. Yes. I know. I just wondered about the wording of the warning."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539825015, "post_id": 52865165, "comment_id": 92645272, "body": "@Swordfish <code>clang</code> uses the <code>-Wstring-compare</code> warning. It produces a similar message but adds a suggestion to use <code>strncmp</code>"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539825189, "post_id": 52865165, "comment_id": 92645301, "body": "cl spits <code>warning C4130: &#39;==&#39;: logical operation on address of string constant</code>"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539825358, "post_id": 52865165, "comment_id": 92645331, "body": "@Swordfish [Suprisingly], a better diagnostic message but, unfortunately, I don&#39;t do windows :-)"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539825971, "post_id": 52865165, "comment_id": 92645463, "body": "Yeah, it is a real shame the the clearly superiour compiler is not available to the many gnu/linux users there are."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539826511, "post_id": 52865165, "comment_id": 92645555, "body": "@Swordfish Ouch :-)"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539827068, "post_id": 52865165, "comment_id": 92645645, "body": "Sowwy, really ;-)"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1539827238, "last_edit_date": 1539827238, "creation_date": 1539820902, "answer_id": 52865165, "question_id": 52864879, "link": "https://stackoverflow.com/questions/52864879/c-program-that-reads-in-a-text-file-and-displays-each-line-except-for-all-blank/52865165#52865165", "title": "C program that reads in a text file and displays each line except for all blank lines and comments", "body": "<p>Note that <code>t == \";\"</code> is [probably] invalid and won't even compile cleanly with <code>-Wall</code>:</p>\n\n<pre><code>orig.c: In function \u2018main\u2019:\norig.c:19:11: warning: comparison with string literal results in unspecified behavior [-Waddress]\n     if (t == \";\") {\n           ^~\norig.c:21:28: warning: comparison with string literal results in unspecified behavior [-Waddress]\n      while (t != NULL &amp;&amp; t != \"\\n\") {\n                            ^~\n</code></pre>\n\n<p><code>if (t == \";\")</code> compares the address contained in <code>t</code> against the address of the string literal <code>\";\"</code>. This does <em>not</em> test the <em>content</em> of what <code>t</code> points to for equality with the string <code>\";\"</code> and will almost never produce the desired result.</p>\n\n<p>The usual way to compare strings is to use <code>strcmp</code> et. al (e.g.) <code>if (strcmp(t,\";\") == 0)</code>. This compares the <em>content</em> pointed to by <code>t</code> with the string.</p>\n\n<hr>\n\n<p>Assuming <code>;</code> is your comment character, adding that to the delimiter arg in the <code>strtok</code> call is incorrect because it will fail on partial lines that have <em>some</em> valid text and end in a trailing comment.</p>\n\n<p>The comment <em>char</em> will be stripped but the returned token from <code>strtok</code> will no longer contain it. The returned token after the <code>;</code> will be the first token after it (i.e. the first token of the <em>comment</em>). But, we won't be able to detect this so we'll print the whole line--not what we want.</p>\n\n<p>Thus, a separate scan for the comment char is needed to strip the comment char and subsequent text <em>before</em> looping with <code>strtok</code></p>\n\n<p>Here's a cleaned up version that should work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint\nmain(void)\n{\n    char line[5000];\n    FILE *fp;\n    char *cp;\n    char *bp;\n    char *sep;(i.e. we will strip the \n\n    fp = fopen(\"gt.txt\", \"r\");\n    if (fp == NULL) {\n        perror(\"error opening file\");\n        exit(1);\n    }\n\n    while (fgets(line, sizeof(line), fp)) {\n        // strip comment from right side of line (do this _before_ token scan)\n        cp = strchr(line,';');\n        if (cp != NULL)\n            *cp = 0;\n\n        // set up for token scan\n        bp = line;\n        sep = \"\";\n\n        // output all valid tokens on the line\n        while (1) {\n            // locate next token\n            cp = strtok(bp,\" ,.\\t\\n\");\n            bp = NULL;\n\n            // stop if didn't find one\n            if (cp == NULL)\n                break;\n\n            // print the token\n            printf(\"%s%s\",sep,cp);\n\n            // separate tokens by a space\n            sep = \" \";\n        }\n\n        // end line that had _valid_ data\n        if (sep[0] != 0)\n            printf(\"\\n\");\n    }\n\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1539822668, "last_edit_date": 1539822668, "creation_date": 1539822208, "answer_id": 52865296, "question_id": 52864879, "link": "https://stackoverflow.com/questions/52864879/c-program-that-reads-in-a-text-file-and-displays-each-line-except-for-all-blank/52865296#52865296", "title": "C program that reads in a text file and displays each line except for all blank lines and comments", "body": "<blockquote>\n  <p>only print full lines excluding anything that begins (with) a comment or whitespace</p>\n</blockquote>\n\n<p>OP's <code>if(t == \";\"){</code> is not the needed function. <a href=\"https://stackoverflow.com/a/52865165/2410359\">@Craig Estey</a>.  Be sure to enable all warnings to save time.  </p>\n\n<p>That compares the pointer <code>char *t</code> to <code>\";\"</code> and likely OP wanted to compare the content of the strings pointed to or maybe compare if <code>*t</code> was a <code>';'</code>.</p>\n\n<hr>\n\n<p>Sometimes a <a href=\"https://en.wikipedia.org/wiki/Finite-state_machine#Example:_coin-operated_turnstile\" rel=\"nofollow noreferrer\">state machine</a> is nice simple  approach.  Keep track of the end-of-line.  When starting a new line, <code>previous == '\\n'</code>, test if it is a blank-able line.</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;stdio.h&gt;\n#define COMMENT_CHAR (';')\n\nint main(void) {\n  FILE *fp = fopen(\"gt.txt\", \"r\");\n  if (fp == NULL) {\n    perror(\"error opening file\");\n    return EXIT_FAILURE;\n  }\n\n  bool blank_the_line = false;\n  int previous = '\\n';\n  int ch;\n\n  while ((ch = fgetc(fp)) != EOF) {\n    if (previous == '\\n') {\n      blank_the_line = isspace(ch) || ch == COMMENT_CHAR;\n    }\n    if (!blank_the_line) {\n      fputc(ch, stdout);\n    }\n    previous = ch;\n  }\n\n  fclose(fp);\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Note: no line length limit.</p>\n"}], "owner": {"reputation": 1, "user_id": 10419951, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cHKGIZH_ooo/AAAAAAAAAAI/AAAAAAAAAq0/jDRe8YFtuwU/photo.jpg?sz=128", "display_name": "Zolstise", "link": "https://stackoverflow.com/users/10419951/zolstise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539827238, "creation_date": 1539818432, "last_edit_date": 1539820762, "question_id": 52864879, "link": "https://stackoverflow.com/questions/52864879/c-program-that-reads-in-a-text-file-and-displays-each-line-except-for-all-blank", "title": "C program that reads in a text file and displays each line except for all blank lines and comments", "body": "<p>Basically, I need to read in a text file and only print full lines excluding anything that begins w/ a comment or whitespace. I'm having difficulty ignoring after the comments, or basically ignore whatever is after the <code>;</code> up until the <code>\\n</code> char. Which would be indicating the end of the line. </p>\n\n<p>I thought this code would work but it still prints after the comments,</p>\n\n<pre><code> char* t=strtok(line,\"\\n ,.; \");\n          while(t != NULL ) {\n            if(t == \";\"){\n                t = strtok(NULL,\" \");\n                while(t != NULL &amp;&amp; t!=\"\\n\") {\n                t = strtok(NULL, \"\");\n              }\n            }\n            else\n            {\n                printf(\"%s\\n\",t);\n                t = strtok( NULL, \"\\n ,.; \\n\");\n            }\n          }\n        }\n</code></pre>\n\n<p>this is the full code:</p>\n\n<pre><code>int main()\n{\n\nchar line [5000];\nFILE *fp;\n\nfp=fopen(\"gt.txt\", \"r\");\nif (fp == NULL)\n perror (\"error opening file\");\nelse{\n  while(fgets (line, sizeof (line), fp)){\n    char* t=strtok(line,\"\\n ,.; \");\n      while(t != NULL ) {\n        if(t == \";\"){\n            t = strtok(NULL,\" \");\n            while(t != NULL &amp;&amp; t!=\"\\n\") {\n            t = strtok(NULL, \"\");\n          }\n        }\n        else\n        {\n            printf(\"%s\\n\",t);\n            t = strtok( NULL, \"\\n ,.; \\n\");\n        }\n      }\n    }\n  }\nfclose(fp);\nreturn(0);\n}\n</code></pre>\n\n<p>This is what I print and also what is used as my text file beneath:</p>\n\n<pre><code>hello                                                                                        \ngoodbye \nerror                                                                                        \ninteresting                                                                                  \ncomment                                                                                      \nwonderful\n</code></pre>\n\n<hr>\n\n<p>semicolons are real semicolons in the text file:</p>\n\n<pre><code>hello\ngoodbye\n\n\n(semicolon) error\n(semicolon) error\n\ninteresting (semicolon) comment\n\nwonderful\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "function", "struct", "typedef"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 3, "creation_date": 1539816587, "post_id": 52864575, "comment_id": 92643532, "body": "@PatrickRoberts No, he has the correct syntax."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1539816608, "post_id": 52864575, "comment_id": 92643540, "body": "Are you sure you have the <code>typedef</code> before the function prototype?"}, {"owner": {"reputation": 11081, "user_id": 2161954, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccdcef378f17549482325c2051c4048?s=128&d=identicon&r=PG", "display_name": "SnakeDoc", "link": "https://stackoverflow.com/users/2161954/snakedoc"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1539816745, "post_id": 52864575, "comment_id": 92643579, "body": "@Barmar Wow... I must be tired... that was the problem, function prototype before the typedef... if you write that up I&#39;ll accept the answer! Thanks."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1539817473, "post_id": 52864575, "comment_id": 92643787, "body": "@Barmar I must be tired too, I&#39;ve been writing in C# for most of the day..."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 6, "last_activity_date": 1539816853, "creation_date": 1539816853, "answer_id": 52864687, "question_id": 52864575, "link": "https://stackoverflow.com/questions/52864575/passing-struct-pointer-or-array-as-function-argument/52864687#52864687", "title": "Passing Struct Pointer or Array as Function Argument", "body": "<p>The <code>typedef</code> needs to be <em>before</em> the function prototype that refers to the type. C code is processed in order, you can't refer to a name before it's defined. So if you don't have the structure definition first, then it thinks <code>move_t</code> is a variable being declared, but it needs a type specifier before it.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1762360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/swvfh.jpg?s=128&g=1", "display_name": "Manish Kochhal", "link": "https://stackoverflow.com/users/1762360/manish-kochhal"}, "is_accepted": false, "score": 0, "last_activity_date": 1539818909, "last_edit_date": 1539818909, "creation_date": 1539817063, "answer_id": 52864720, "question_id": 52864575, "link": "https://stackoverflow.com/questions/52864575/passing-struct-pointer-or-array-as-function-argument/52864720#52864720", "title": "Passing Struct Pointer or Array as Function Argument", "body": "<p>Same here. Even the declaration with pointer to move_t is not a problem. </p>\n\n<p>Did you make sure your declaration is complete, before it is being used to declare a function prototype?</p>\n\n<p>Here is the sample code using your typedef and pointer based declaration:</p>\n\n<pre><code>#ifndef MOVE_H_INCLDED\n#define MOVE_H_INCLUDED\n\ntypedef struct {\n    int col;\n    int row;\n} move_t;\n\nvoid generate_valid_moves(int fc, int fr, move_t* moves, int limit);\n\n#endif\n</code></pre>\n\n\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"move.h\"\n\nvoid generate_valid_moves(int fc, int fr, move_t* moves, int limit)\n{\n\n}\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>compiled move.c with gcc.</p>\n"}], "owner": {"reputation": 11081, "user_id": 2161954, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccdcef378f17549482325c2051c4048?s=128&d=identicon&r=PG", "display_name": "SnakeDoc", "link": "https://stackoverflow.com/users/2161954/snakedoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 52864687, "answer_count": 2, "score": -1, "last_activity_date": 1539818909, "creation_date": 1539816092, "question_id": 52864575, "link": "https://stackoverflow.com/questions/52864575/passing-struct-pointer-or-array-as-function-argument", "title": "Passing Struct Pointer or Array as Function Argument", "body": "<p>I have a typedef struct like so:</p>\n\n<pre><code>typedef struct {\n    int col;\n    int row;\n} move_t;\n</code></pre>\n\n<p>I'm trying to pass an array of type <code>move_t</code> to a function as a sort-of buffer to be filled... like so:</p>\n\n<pre><code>void generate_valid_moves(int fc, int fr, move_t* moves, int limit);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void generate_valid_moves(int fc, int fr, move_t moves[], int limit);\n</code></pre>\n\n<p>Both generate an obscure gcc error:</p>\n\n<pre><code>moves.h:43: error: expected declaration specifiers or \u2018...\u2019 before \u2018move_t\u2019\nmoves.h:887: error: conflicting types for \u2018generate_valid_moves\u2019\nmoves.h:43: note: previous declaration of \u2018generate_valid_moves\u2019 was here\n</code></pre>\n\n<p>I've tried removing the typedef and just making it a normal struct, etc... all result in similar errors. Feels basic, I know I'm missing something...</p>\n\n<p>My function prototype and implementation's signature absolutely match... so that part of the error is even stranger.</p>\n\n<p>My goal is to make an array of <code>move_t</code>, then pass it into this function to be populated with <code>move_t</code>'s. The caller then does stuff with the populated <code>move_t</code> buffer.</p>\n"}, {"tags": ["c", "sorting", "pass-by-value"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539815241, "post_id": 52864422, "comment_id": 92643182, "body": "If &quot;cannot use arrays&quot; is true, it is hard to use <code>printf()</code> given its format is usually a <code>char</code> array.  &quot;I have twenty hardcoded ints&quot; certainly sounds like an array.   Recommend to post what you have tried, else this is too broad and unclear."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1539815414, "post_id": 52864422, "comment_id": 92643229, "body": "Start with your naming: You aren&#39;t actually trying to sort anything - you&#39;re looking for the 3 biggest numbers. You&#39;d be surprised how much your thoughts may be limited because you have picked the name <code>sort</code>. You&#39;re trying to solve a sorting problem not the problem at hand."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1539815494, "post_id": 52864422, "comment_id": 92643253, "body": "<code>I need print the three highest numbers.</code> what if there are ties?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1539815633, "post_id": 52864422, "comment_id": 92643283, "body": "Are you not allowed to use arrays at all? Or only in the main? Or only in the function that &quot;sorts&quot;?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539815722, "post_id": 52864422, "comment_id": 92643309, "body": "@chux <code>int a0=1,a1=10,a2=-1,...,a19=77;</code> is twenty hardcoded ints and yet not an array at all."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1539815809, "post_id": 52864422, "comment_id": 92643342, "body": "Does your teacher consider <code>int *list = malloc(n * sizeof(int))</code> and then <code>*(list+x)</code> using an array?"}, {"owner": {"reputation": 29, "user_id": 9604882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d194755307f2b9cb4b70319f5b67eb2?s=128&d=identicon&r=PG&f=1", "display_name": "DFT95", "link": "https://stackoverflow.com/users/9604882/dft95"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1539816190, "post_id": 52864422, "comment_id": 92643436, "body": "@wildplasser If there&#39;s a duplicate, it&#39;ll stay the way it is."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 4, "creation_date": 1539817506, "post_id": 52864422, "comment_id": 92643792, "body": "Use a sorting network to unfold sorting algorithm using 20 integers without indexing them, and then print 3 highest."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1539822120, "post_id": 52864422, "comment_id": 92644703, "body": "It sounds more like you just need to read the integer values from <code>stdin</code> (or as arguments to the program) and then simply keep track of the top three highest and print them out in order..."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539831404, "post_id": 52864422, "comment_id": 92646488, "body": "@chux It is not my post."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539834650, "post_id": 52864422, "comment_id": 92647130, "body": "DFT95, with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> example that code issue would have been apparent and may you post easier to understand, more interesting and useful to answer. With seeing your code, the post will attract down votes and close votes. Re-consider and post your code."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1539834681, "post_id": 52864422, "comment_id": 92647142, "body": "@DYZ My mistake"}], "answers": [{"comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1539816670, "post_id": 52864560, "comment_id": 92643558, "body": "Given we know this is homework, we&#39;ve been told not to use arrays, sneaking around arrays as done here doesn&#39;t seem &quot;safe&quot;. Also: if I put my language lawyer hat on, are the elements in the struct guaranteed to be contiguous? I don&#39;t think so."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539816712, "post_id": 52864560, "comment_id": 92643574, "body": "I now see why <code>#pragma pack(1)</code> is used - to circumvent &quot;cannot use arrays.&quot;"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539816978, "post_id": 52864560, "comment_id": 92643664, "body": "@chux Yep I missed that ;-) Although my point is even stronger now - if the solution for what looks like a beginners class relies on a pragma then it smells fishy to me..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1539817063, "post_id": 52864560, "comment_id": 92643683, "body": "@John3136 Well of course its <a href=\"https://en.wikipedia.org/wiki/Swordfish\" rel=\"nofollow noreferrer\">fishy</a> ;-)"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1539817146, "post_id": 52864560, "comment_id": 92643708, "body": "Hang on. Let me turn on my scratch and sniff monitor..."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539817212, "post_id": 52864560, "comment_id": 92643720, "body": "The fish jokes stop right now *ggggggggggrrrr*"}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1539821885, "last_edit_date": 1539821885, "creation_date": 1539815928, "answer_id": 52864560, "question_id": 52864422, "link": "https://stackoverflow.com/questions/52864422/c-sorting-twenty-ints-using-passbyvalue/52864560#52864560", "title": "c - Sorting twenty ints using passByValue", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#pragma pack(1)\ntypedef struct stupid_assignment_data_tag {\n    int a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t;\n} stupid_assignment_data_t;\n\nint cmp(void const *a, void const *b)\n{\n    if(*(int*)a &gt; *(int*)b) return  1;\n    if(*(int*)a &lt; *(int*)b) return -1;\n    return 0;\n}\n\nvoid stupid_assignment_function(stupid_assignment_data_t stupid_assignment_data)\n{\n    qsort(&amp;stupid_assignment_data, 20, sizeof(int), cmp);\n\n    struct { char a, b, c, d, e, f, g, h, i, j, k; }\n        stupid_format_string = { '%', 'd', ' ', '%', 'd', ' ', '%', 'd', '\\0' };\n\n    printf((char const*)&amp;stupid_format_string, stupid_assignment_data.r, stupid_assignment_data.s, stupid_assignment_data.t);\n}\n\nint main(void)\n{\n    stupid_assignment_data_t stupid_assignment_data{\n        2, 45, 765, 345, 15, 56, 3, 47, 457, 1235, 234,\n        324, 234, 56346, 567, 4, 457, 4356, 24, 42 };\n\n    stupid_assignment_function(stupid_assignment_data);\n}\n</code></pre>\n\n<p>... you might want to change some of the identifiers before you hand in the code ... or not.</p>\n\n<blockquote>\n  <p>If \"cannot use arrays\" is true, it is hard to use printf() given its format is usually a char array.</p>\n</blockquote>\n\n<p>Good point. Took care of that.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1539816068, "post_id": 52864563, "comment_id": 92643409, "body": "&quot;I have twenty hardcoded ints&quot;"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539822759, "post_id": 52864563, "comment_id": 92644832, "body": "@Swordfish if it is hardcoded, just print the answer. Clearly OP is not looking for that and this answer adds value."}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 2, "last_activity_date": 1539816331, "last_edit_date": 1539816331, "creation_date": 1539815976, "answer_id": 52864563, "question_id": 52864422, "link": "https://stackoverflow.com/questions/52864422/c-sorting-twenty-ints-using-passbyvalue/52864563#52864563", "title": "c - Sorting twenty ints using passByValue", "body": "<p>You can make a scalable solution with no arrays and no recursion quite easily. i.e. You can change 20 to 20,000 with no addition resources required.</p>\n\n<p>Here is some sample pseudo code:</p>\n\n<pre><code>for(int i = 0; i &lt; 20; i++)\n{\n    // TODO\n    // -1 is a sample start value. You can find a better one\n    int biggest = -1;\n    int second_biggest = -1;\n    int third_biggest = -1;\n    int num = generate_random_num();\n    if (num &gt; third_biggest)\n    {\n        // TODO\n        // check against second_biggest and biggest too\n        // set one of the variables but remember: if you set biggest, what was\n        // in biggest is now second_biggest and the old second_biggest is now\n        // third_biggest\n    }\n    // TODO\n    // Print the 3 results\n</code></pre>\n\n<p>This can be refactored to support <code>a1=13, a2=42...a20=666</code>. Your <code>biggest</code> vals become globals. Your <code>if (num &gt; third_biggest)</code> gets wrapped in a function that you call once for each variable.</p>\n"}, {"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1539823004, "post_id": 52864887, "comment_id": 92644887, "body": "What is the exact point of this? Doesn&#39;t even sort during compile time. You just unrolled the loops, that too by hand."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1539831935, "post_id": 52864887, "comment_id": 92646584, "body": "@AjayBrahmakshatriya This is a valid answer. It sorts 20 values without using an array, sorting during compile time wasn&#39;t a requirement, and it uses a <a href=\"https://en.wikipedia.org/wiki/Sorting_network\" rel=\"nofollow noreferrer\">Sorting Network</a> (a very useful technique)."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539840994, "post_id": 52864887, "comment_id": 92648690, "body": "@AjayBrahmakshatriya The point of this is to sort 20 integers passed by value using simply 20 different ints with the explicit requirement not to use an array, then after the sort not printing them, but returning to the caller. This was the question. By unrolling loops, you can effectively name your variables anything, because your are left with just a number of simple assignments <code>v1 = max(v1, v2); v2=min(v1,  v2);</code>. The question didn&#39;t involve sorting them on compile-time, nor this function does that."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1539818511, "creation_date": 1539818511, "answer_id": 52864887, "question_id": 52864422, "link": "https://stackoverflow.com/questions/52864422/c-sorting-twenty-ints-using-passbyvalue/52864887#52864887", "title": "c - Sorting twenty ints using passByValue", "body": "<p>Using the Bose-Nelson Algorithm for the number of 20 integers I have created a simple function which sorts 20 integers indexed with names, used <a href=\"http://jgamble.ripco.net/cgi-bin/nw.cgi?inputs=20&amp;algorithm=bosenelson&amp;output=svg\" rel=\"nofollow noreferrer\">this site</a>. Then you just need to return 3 biggest integers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct max3_from_20_s {\n    int first;\n    int second;\n    int third;\n} max3_from_20(\n    int v0,\n    int v1,\n    int v2,\n    int v3,\n    int v4,\n    int v5,\n    int v6,\n    int v7,\n    int v8,\n    int v9,\n    int v10,\n    int v11,\n    int v12,\n    int v13,\n    int v14,\n    int v15,\n    int v16,\n    int v17,\n    int v18,\n    int v19\n) {\n#define SORT20_MIN(a, b)  ((a&lt;b)?a:b)\n#define SORT20_MAX(a, b)  ((a&lt;b)?b:a)\n#define SORT20_SWAP(idx1, idx2)  do{ \\\n        const int min = SORT20_MIN(v##idx1, v##idx2); \\\n        const int max = SORT20_MAX(v##idx1, v##idx2); \\\n        v##idx1 = min; \\\n        v##idx2 = max; \\\n    }while(0)\n#define swap SORT20_SWAP\n\n    swap(0, 1);\n    swap(3, 4);\n    swap(5, 6);\n    swap(8, 9);\n    swap(10, 11);\n    swap(13, 14);\n    swap(15, 16);\n    swap(18, 19);\n    swap(2, 4);\n    swap(7, 9);\n    swap(12, 14);\n    swap(17, 19);\n    swap(2, 3);\n    swap(1, 4);\n    swap(7, 8);\n    swap(6, 9);\n    swap(12, 13);\n    swap(11, 14);\n    swap(17, 18);\n    swap(16, 19);\n    swap(0, 3);\n    swap(5, 8);\n    swap(4, 9);\n    swap(10, 13);\n    swap(15, 18);\n    swap(14, 19);\n    swap(0, 2);\n    swap(1, 3);\n    swap(5, 7);\n    swap(6, 8);\n    swap(10, 12);\n    swap(11, 13);\n    swap(15, 17);\n    swap(16, 18);\n    swap(9, 19);\n    swap(1, 2);\n    swap(6, 7);\n    swap(0, 5);\n    swap(3, 8);\n    swap(11, 12);\n    swap(16, 17);\n    swap(10, 15);\n    swap(13, 18);\n    swap(1, 6);\n    swap(2, 7);\n    swap(4, 8);\n    swap(11, 16);\n    swap(12, 17);\n    swap(14, 18);\n    swap(0, 10);\n    swap(1, 5);\n    swap(3, 7);\n    swap(11, 15);\n    swap(13, 17);\n    swap(8, 18);\n    swap(4, 7);\n    swap(2, 5);\n    swap(3, 6);\n    swap(14, 17);\n    swap(12, 15);\n    swap(13, 16);\n    swap(1, 11);\n    swap(9, 18);\n    swap(4, 6);\n    swap(3, 5);\n    swap(14, 16);\n    swap(13, 15);\n    swap(1, 10);\n    swap(2, 12);\n    swap(7, 17);\n    swap(4, 5);\n    swap(14, 15);\n    swap(3, 13);\n    swap(2, 10);\n    swap(6, 16);\n    swap(8, 17);\n    swap(4, 14);\n    swap(3, 12);\n    swap(5, 15);\n    swap(9, 17);\n    swap(8, 16);\n    swap(4, 13);\n    swap(3, 11);\n    swap(6, 15);\n    swap(9, 16);\n    swap(4, 12);\n    swap(3, 10);\n    swap(7, 15);\n    swap(4, 11);\n    swap(8, 15);\n    swap(7, 12);\n    swap(4, 10);\n    swap(9, 15);\n    swap(6, 11);\n    swap(8, 13);\n    swap(5, 10);\n    swap(9, 14);\n    swap(8, 12);\n    swap(6, 10);\n    swap(9, 13);\n    swap(8, 11);\n    swap(9, 12);\n    swap(7, 10);\n    swap(9, 11);\n    swap(8, 10);\n    swap(9, 10);\n#undef swap\n\n    struct max3_from_20_s ret = {\n        v19, v18, v17,\n    };\n    return ret;\n}\n\nint main()\n{\n    struct max3_from_20_s num = max3_from_20(\n        0, 1, 2, 3, 4, 5, 6, 7, 8, 9,\n        20, 19, 18, 17, 100, 15, 14, 13, 12, 11\n    );\n    printf(\"%d %d %d\\n\", num.first, num.second, num.third);\n\n    return 0;\n}\n</code></pre>\n\n<p>will output:</p>\n\n<pre><code>100 20 19\n</code></pre>\n\n<p>You can use any variables names, just slightly modify the macros and replace each number within the swap call to the equivalent name.</p>\n\n<p>Live version available at <a href=\"https://onlinegdb.com/S1HW4SBsm\" rel=\"nofollow noreferrer\">onlinegdb</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 3896097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19f2456d4b36ec50d8820566cf29f2bd?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos", "link": "https://stackoverflow.com/users/3896097/marcos"}, "is_accepted": false, "score": 0, "last_activity_date": 1539827333, "creation_date": 1539827333, "answer_id": 52865797, "question_id": 52864422, "link": "https://stackoverflow.com/questions/52864422/c-sorting-twenty-ints-using-passbyvalue/52865797#52865797", "title": "c - Sorting twenty ints using passByValue", "body": "<p>Maybe I'm missing something of your explanaition, but I guess you could do something like this...</p>\n\n<pre><code>// Globals to store the highest numbers. Initialize them to 0 considering the values are all positive.\nint high_num_1 = 0;\nint high_num_2 = 0;\nint high_num_3 = 0;\n\nvoid look_for_highest_numbers(int new_value)\n{\n    // You can put the code to get the highest values here\n    // and assign them to the global ints declared above\n}\n\nvoid print_highest(void)\n{\n    // print the highest numbers\n}\n\nvoid main(void)\n{\n    // very stupid way of extracting the highest values from 20 ints\n    look_for_highest_numbers(100);\n    look_for_highest_numbers(42);\n    ... // dots are to show that here you place another 17 calls to look_for_highest_numbers()\n    look_for_highest_numbers(12345);\n    // print solution\n    print_highest();\n}\n</code></pre>\n\n<p>I really don't see the point of this assignment, maybe you can ask your teacher and let us know...</p>\n"}], "owner": {"reputation": 29, "user_id": 9604882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d194755307f2b9cb4b70319f5b67eb2?s=128&d=identicon&r=PG&f=1", "display_name": "DFT95", "link": "https://stackoverflow.com/users/9604882/dft95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "closed_date": 1539843380, "answer_count": 4, "score": -1, "last_activity_date": 1539827333, "creation_date": 1539814861, "question_id": 52864422, "link": "https://stackoverflow.com/questions/52864422/c-sorting-twenty-ints-using-passbyvalue", "closed_reason": "Needs more focus", "title": "c - Sorting twenty ints using passByValue", "body": "<p>So I got a homework assignment where I have twenty hardcoded ints, each a random number. Some can be the same. Using passByValue, I need print the three highest numbers.</p>\n\n<p>Now I already have this planned out. The numbers will be declared in main, each number will be sent to a new function, probably called sort. There I'd have three ints that will take whichever number is higher (the number being passed through, or the number already in each spot) and then assign the bigger of the two to that int, progressing to the other two in that function.</p>\n\n<p>I have two problems, though. Problem one is in main.\nThe homework instructions explicitly state that I <em>cannot use arrays</em>. So all I'm able to  imagine is just simply twenty different ints, each with a different value. The problem here is, though, I can't really just sort them all at the same time if I'm utilizing passByValue. Or perhaps I can, but it wouldn't look pretty, and pretty is what the teacher is looking for.</p>\n\n<p>So problem one, is how do I effectively pass each of the ints to the sort function one-by-one?</p>\n\n<p>Problem two: I don't want the print function to print out the three largest numbers until it is done sorting. The only way I can imagine this working, is somehow holding the values from being sent to the print function until the line of ints in main has run out. But I'm not sure if that is possible...</p>\n\n<p>Obviously I'm not looking for the entire code. All I really am looking for is just a direction to follow. Whether I can utilize some form of recursion both in the main and sort function or structs (though I don't know if my teacher would appreciate me using those, since they're similar to arrays) or something else.</p>\n"}, {"tags": ["c", "linux", "perf"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1539814223, "post_id": 52864311, "comment_id": 92642901, "body": "Your program is compiled with debugging symbols, but <code>libc</code> isn&#39;t. So it can&#39;t show the names for things in the library."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1539814678, "post_id": 52864311, "comment_id": 92643024, "body": "you might also want to try running <code>perf record -g .&#47;test</code> to get your call graph recorded as well"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1539814965, "post_id": 52864311, "comment_id": 92643105, "body": "Install debug symbols for <code>libc</code> if you want names for library functions.  There should be names for at least the <code>extern</code> symbol names in libc, though, so that&#39;s somewhat strange.  Dynamic linking requires them."}], "answers": [{"comments": [{"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 51, "user_id": 10520976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-L-luejgXTZc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDsfeaKBMg2jgj-c3HPjQBq-PaCUQ/mo/photo.jpg?sz=128", "display_name": "PoJyun Chiou", "link": "https://stackoverflow.com/users/10520976/pojyun-chiou"}, "edited": false, "score": 0, "creation_date": 1539875677, "post_id": 52865793, "comment_id": 92667992, "body": "Please see if the following link will help: <a href=\"https://bbs.archlinux.org/viewtopic.php?pid=1527467#p1527467\" rel=\"nofollow noreferrer\">bbs.archlinux.org/viewtopic.php?pid=1527467#p1527467</a>"}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1539827538, "last_edit_date": 1539827538, "creation_date": 1539827294, "answer_id": 52865793, "question_id": 52864311, "link": "https://stackoverflow.com/questions/52864311/the-column-symbol-shows-address-instead-of-function-name/52865793#52865793", "title": "The column &quot;symbol&quot; shows address instead of function name", "body": "<p>Install debug symbols for libc to get names for library functions with the following commands.  </p>\n\n<pre><code>sudo apt-get install libc6-dbg\nsudo apt-get source libc6-dev\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 10520976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-L-luejgXTZc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDsfeaKBMg2jgj-c3HPjQBq-PaCUQ/mo/photo.jpg?sz=128", "display_name": "PoJyun Chiou", "link": "https://stackoverflow.com/users/10520976/pojyun-chiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1539862529, "creation_date": 1539814081, "last_edit_date": 1539862529, "question_id": 52864311, "link": "https://stackoverflow.com/questions/52864311/the-column-symbol-shows-address-instead-of-function-name", "title": "The column &quot;symbol&quot; shows address instead of function name", "body": "<p>Here is my system information.</p>\n\n<pre><code>$ uname -a\nLinux pjchiou-X550JX 4.16.0-041600-generic #201804012230 SMP Sun Apr 1 22:31:39 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n\n<p>I use a very simple C program to test <code>perf</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid myloop()\n{\n    for (int i = 0; i &lt; 100000; i++)\n        printf(\"%d\", i);\n}\n\nint main(void)\n{\n    myloop();\n    return (0);\n}\n</code></pre>\n\n<p>Compiled with:</p>\n\n<pre><code>gcc -g -o test test.c\n</code></pre>\n\n<p>And then collect a sample with:</p>\n\n<pre><code>perf record ./test\n</code></pre>\n\n<p>Finally, show report:</p>\n\n<pre><code>perf report\n</code></pre>\n\n<p>But, what I see in the report is like this:</p>\n\n<pre><code># Overhead  Command  Shared Object      Symbol                      \n# ........  .......  .................  ............................\n#\n 9.64%  test     libc-2.27.so       [.] 0x000000000005cb14\n 6.17%  test     libc-2.27.so       [.] 0x000000000005bf8e\n 5.75%  test     libc-2.27.so       [.] 0x000000000005885e\n 5.61%  test     libc-2.27.so       [.] 0x000000000005886b\n 5.33%  test     libc-2.27.so       [.] 0x00000000000587b0\n 5.28%  test     libc-2.27.so       [.] 0x000000000005b6ff\n 5.23%  test     [kernel.kallsyms]  [k] n_tty_write\n</code></pre>\n\n<p>Why does the column \"<em>symbol</em>\" show the address instead of function name?</p>\n\n<ul>\n<li>gdb installed.</li>\n<li>libc6, libc6-dbg, libc6-dev installed.</li>\n<li>Highest access permission.</li>\n</ul>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1539813634, "post_id": 52864210, "comment_id": 92642728, "body": "how <code>g_human_array</code> is defined?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1539813800, "post_id": 52864210, "comment_id": 92642780, "body": "I don&#39;t believe your scanf input pattern is handling the newline character at the end of each line."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1539813907, "post_id": 52864210, "comment_id": 92642804, "body": "<code>scanf</code> doesn&#39;t care about lines (it treats a newline character like any other whitespace character). So when you ask <code>scanf</code> to get a string up to the next comma (with <code>&quot;%[^,]&quot;</code>), it will go right past the end of the line, and keep going till it finds the next comma. To avoid such problems, I use <code>fgets</code> to read a line, and <code>sscanf</code> to parse the contents of the line. That way, the <code>sscanf</code> can only use the contents of that one line."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1539814328, "post_id": 52864210, "comment_id": 92642930, "body": "Additionally: You do: read input, proccess input, check for error. Right(tm) way: read input, check for error, proccess input."}, {"owner": {"reputation": 31, "user_id": 10520939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Om3BRcwbU6M/AAAAAAAAAAI/AAAAAAAABD8/xJD4oP9yIxk/photo.jpg?sz=128", "display_name": "Jisheng Yu", "link": "https://stackoverflow.com/users/10520939/jisheng-yu"}, "edited": false, "score": 0, "creation_date": 1539815024, "post_id": 52864210, "comment_id": 92643121, "body": "Thank you guys so much for helping!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539815404, "post_id": 52864210, "comment_id": 92643225, "body": "What is <code>NAME_LENGTH</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10520939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Om3BRcwbU6M/AAAAAAAAAAI/AAAAAAAABD8/xJD4oP9yIxk/photo.jpg?sz=128", "display_name": "Jisheng Yu", "link": "https://stackoverflow.com/users/10520939/jisheng-yu"}, "edited": false, "score": 0, "creation_date": 1539814283, "post_id": 52864271, "comment_id": 92642915, "body": "Thank you so much! That fixed my problem perfectly!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539815747, "post_id": 52864271, "comment_id": 92643318, "body": "&quot;%[^,] will match any string not containing a comma&quot; is interesting as that specifier will go beyond a <i>string</i>.  Even a <i>null character</i> in <code>fp</code> will not stop it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539816295, "post_id": 52864271, "comment_id": 92643461, "body": "@chux Yeah, but text files shouldn&#39;t contain null characters."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539816370, "post_id": 52864271, "comment_id": 92643480, "body": "@chux I don&#39;t think there&#39;s any way to prevent that. You can&#39;t put <code>\\0</code> in the exclusion list, because that will terminate the format string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539816528, "post_id": 52864271, "comment_id": 92643520, "body": "Yes <i>null characters</i> in a <i>text file</i> are usually a sign of  broken code or nefarious actors.  And we never need worry about <a href=\"https://xkcd.com/1354/\" rel=\"nofollow noreferrer\">that</a>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539817035, "post_id": 52864271, "comment_id": 92643678, "body": "@chux But dealing with it is really complicated, not something a beginner can be expected to do. You essentially have to reproduce much of stdio."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539817773, "post_id": 52864271, "comment_id": 92643855, "body": "@Barmar Perhaps not: <code>fscanf(fp,&quot;%[^\\n]%n&quot;, ...</code> is a way to read <i>most</i> of the text line - including <i>null characters</i>.  I&#39;ll save deeper comments for a more relevant post."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 4, "last_activity_date": 1539816473, "last_edit_date": 1539816473, "creation_date": 1539813824, "answer_id": 52864271, "question_id": 52864210, "link": "https://stackoverflow.com/questions/52864210/c-fscanf-data-messed-up/52864271#52864271", "title": "C fscanf data messed up", "body": "<p><code>%[^,]</code> will match any string not containing a comma character. This means the newline character <em>will</em> be included in the string that it matches, so the last <code>%[^,]</code> will match the a string containing the last field of one line and the first field of the next line. Change it to <code>%[^,\\n]</code> so it won't match across newlines.</p>\n\n<pre><code>int ret = fscanf(fp,\" %[^,],%[^,],%[^,],%[^,],%[^,],%[^,\\n]\",\n    g_human_array[g_human_count].last_name, \n    g_human_array[g_human_count].first_name, \n    g_human_array[g_human_count].mother_last, \n    g_human_array[g_human_count].mother_first, \n    g_human_array[g_human_count].father_last, \n    g_human_array[g_human_count].father_first\n    );\n</code></pre>\n\n<p>Another solution is to use <code>fgets()</code> to read a line at a time, then use <code>sscanf()</code> to process it. But you still have to remember that <code>fgets()</code> leaves the newline in the buffer, so you have to remove it before processing with <code>sscanf()</code>, or put <code>\\n</code> in the exclusion set just like I do above.</p>\n"}], "owner": {"reputation": 31, "user_id": 10520939, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Om3BRcwbU6M/AAAAAAAAAAI/AAAAAAAABD8/xJD4oP9yIxk/photo.jpg?sz=128", "display_name": "Jisheng Yu", "link": "https://stackoverflow.com/users/10520939/jisheng-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539816473, "creation_date": 1539813493, "last_edit_date": 1539814869, "question_id": 52864210, "link": "https://stackoverflow.com/questions/52864210/c-fscanf-data-messed-up", "title": "C fscanf data messed up", "body": "<p>I am new to programming and is now learning C language. I had a problem when I try to read data from a file and store them in a char array.</p>\n\n<p>My input is something like this:</p>\n\n<pre><code>Hayes,Darrell,Covey,Dasia,Hayes,Neftaly\nAshby,Angela,Chapman,Ebony,Ashby,Elliott\n</code></pre>\n\n<p>My code is like this:</p>\n\n<pre><code>while(1) {\nint ret = fscanf(fp,\" %[^,],%[^,],%[^,],%[^,],%[^,],%[^,]\",\n    g_human_array[g_human_count].last_name, \n    g_human_array[g_human_count].first_name, \n    g_human_array[g_human_count].mother_last, \n    g_human_array[g_human_count].mother_first, \n    g_human_array[g_human_count].father_last, \n    g_human_array[g_human_count].father_first\n    );\nprintf(\"%s,%s,%s,%s,%s,%s,%d\\n\",\n    g_human_array[g_human_count].last_name, \n    g_human_array[g_human_count].first_name, \n    g_human_array[g_human_count].mother_last, \n    g_human_array[g_human_count].mother_first, \n    g_human_array[g_human_count].father_last, \n    g_human_array[g_human_count].father_first,ret\n    );\nif(ret != 6) {\n  fclose(fp);\n  return READ_BAD_RECORD;\n}\n</code></pre>\n\n<p>However, my output is messed up like this:</p>\n\n<pre><code>Hayes,Darrell,Covey,Dasia,hby,Neftaly\nAshby,6\n6\n,,,,,,0\n0\n</code></pre>\n\n<p>human_t and g_human_array are defined like this:</p>\n\n<pre><code> typedef struct human_struct {\n  char father_first[NAME_LENGTH];\n  char father_last[NAME_LENGTH];\n  char mother_first[NAME_LENGTH];\n  char mother_last[NAME_LENGTH];\n  char first_name[NAME_LENGTH];\n  char last_name[NAME_LENGTH];\n\n} human_t;\n\nhuman_t g_human_array[MAX_HUMANS];\n</code></pre>\n"}, {"tags": ["c", "makefile", "embedded", "gnu-make", "preprocessor"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539815749, "post_id": 52864242, "comment_id": 92643319, "body": "Okkay, that actually did solve my problem, I also added $(CFLAGS) to the 1st recipe line for it to work.  Now, one last issue. it generates files .c.dep. for example: main.c.dep How can I make the files .dep only?"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "reply_to_user": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539848252, "post_id": 52864242, "comment_id": 92651797, "body": "@MahmoudSaad Answer updated: you need to use <code>$(patsubst...)</code> command"}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539857290, "post_id": 52864242, "comment_id": 92656843, "body": "I tried it but it gives out this error:  # dep generation gcc  -I ./include/CMSIS -I ./include/common -I ./include/msp432  -Wall -Werror -g -O0  -std=c99 -DHOST -MM main.c &gt; %&lt; /bin/sh: 1: Syntax error: end of file unexpected Makefile:82: recipe for target &#39;main.o&#39; failed make: *** [main.o] Error 2"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 2, "last_activity_date": 1539862826, "last_edit_date": 1539862826, "creation_date": 1539813676, "answer_id": 52864242, "question_id": 52863965, "link": "https://stackoverflow.com/questions/52863965/how-to-intentionally-create-dep-files/52864242#52864242", "title": "How to intentionally create .dep files?", "body": "<p>You can simply add one line to the compilation step:</p>\n\n<pre><code>%.o : %.c\n    $(CC) -c $&lt; $(CFLAGS) -o $@\n</code></pre>\n\n<p>would become:</p>\n\n<pre><code>%.o : %.c\n    # dep generation\n    $(CC) -MM $&lt; &gt; $&lt;.dep\n    # compilation \n    $(CC) -c $&lt; $(CFLAGS) -o $@\n</code></pre>\n\n<hr>\n\n<p>If you want dependency files extension to be <code>.dep</code> instead of <code>.c.dep</code>, you can adjust this rule:</p>\n\n<pre><code>%.o : %.c\n    # dep generation\n    $(CC) -MM $&lt; &gt; $(patsubst %.c,%.dep,%&lt;)\n    # compilation \n    $(CC) -c $&lt; $(CFLAGS) -o $@\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 884, "favorite_count": 0, "accepted_answer_id": 52864242, "answer_count": 1, "score": 1, "last_activity_date": 1539862826, "creation_date": 1539812146, "question_id": 52863965, "link": "https://stackoverflow.com/questions/52863965/how-to-intentionally-create-dep-files", "title": "How to intentionally create .dep files?", "body": "<p>I have 5 source files (main.c, memory.c, etc) I want to generate dependency files for all of them .dep</p>\n\n<p>When I searched online I found that most people only suffer from those files created by compiler, and some are solving this by adding them forcefully to a directory. But, I want to intentionally create them to be (main.dep, memory.dep, etc)</p>\n\n<p>how can I have the make create them automatically for me by my command:</p>\n\n<pre><code>$ make build\n</code></pre>\n\n<p>I guess it will be some kind of order I will put in CPPFLAGS, then include CPPFLAGS into my $(TARGET).out recipe, but I don't know what exactly. any ideas?</p>\n\n<p>here's my Makefile right now:</p>\n\n<pre><code>include sources.mk\n\n# Platform Overrides\n\nifeq ($(PLATFORM),MSP432)\n\n# Architectures Specific Flags\nLINKER_FILE = msp432p401r.lds\nCPU = cortex-m4\nARCH = thumb\nSPECS = nosys.specs\nCOMPILE = -DMSP432\nLDFLAGS_ARCH = -T $(LINKER_FILE)\nCFLAGS_ARCH = -mcpu=$(CPU) -m$(ARCH) --specs=$(SPECS) -march=armv7e-m \n-mfloat-abi=hard -mfpu=fpv4-sp-d16\nOBJS = $(SOURCES:.c=.o)\nDUMP = arm-none-eabi-objdump\n\n# Compiler Flags and Defines\nCC = arm-none-eabi-gcc\nLD = arm-none-eabi-ld\n\nendif\n\nifeq ($(PLATFORM),HOST)\nOBJS = $(SOURCES_BOTH:.c=.o)\nCOMPILE = -DHOST\nCC = gcc\nDUMP = objdump\nendif\n\n\nTARGET = c1m2\nLDFLAGS = -Wl,-Map=$(TARGET).map $(LDFLAGS_ARCH)\nCFLAGS = $(CFLAGS_ARCH) $(INCLUDES)  -Wall -Werror -g -O0  -std=c99 \n$(COMPILE)\nCPPFLAGS =\n\n\n.PHONY: build\nbuild: $(TARGET).out\n\n.PHONY: compile-all\ncompile-all: $(OBJS)\n\nCLEANO = main.o memory.o interrupts_msp432p401r_gcc.o \nstartup_msp432p401r_gcc.o system_msp432p401r.o\nCLEANI = main.i memory.i interrupts_msp432p401r_gcc.i \nstartup_msp432p401r_gcc.i system_msp432p401r.i\nCLEANASM = main.asm memory.asm interrupts_msp432p401r_gcc.asm \nstartup_msp432p401r_gcc.asm system_msp432p401r.asm\n\n.PHONY: clean\nclean:\n    $(RM) $(TARGET).out $(TARGET).map $(CLEANO) $(CLEANI) $(CLEANASM)\n\n%.o : %.c\n    $(CC) -c $&lt; $(CFLAGS) -o $@\n\n%.i : %.c\n    $(CC) -E $&lt; $(CFLAGS) -o $@\n\n%.asm :  %.o\n$(DUMP) -S --disassemble $&lt; &gt; $@\n\n$(TARGET).out: $(OBJS)\n    $(CC) $(OBJS) $(CFLAGS) $(LDFLAGS) -o $@\n</code></pre>\n"}, {"tags": ["c", "arduino", "avr", "arduino-uno", "atmel"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1539812601, "post_id": 52863942, "comment_id": 92642367, "body": "Probably it is unrolling the loop for small values of <code>time</code>. Try using a variable as a parameter rather than a constant."}, {"owner": {"reputation": 3648, "user_id": 4931630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4290ddd0630dd0091e3b9713a23c3434?s=128&d=identicon&r=PG&f=1", "display_name": "AterLux", "link": "https://stackoverflow.com/users/4931630/aterlux"}, "edited": false, "score": 2, "creation_date": 1539817047, "post_id": 52863942, "comment_id": 92643679, "body": "1 us is 16 CPU clock cycles. So, actually, all the delay you have is overhead rather than &quot;_dethe lay...&quot;. Since you made function &quot;inline&quot;, the compiler just replaces its call (assuming the parameter is a constant) with an inlined loop. So it is mostly depended on how compiler will optimize that loop (e.g. unroll it, etc)"}, {"owner": {"reputation": 434, "user_id": 6088168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338514626174658/picture?type=large", "display_name": "Hugo Sartori", "link": "https://stackoverflow.com/users/6088168/hugo-sartori"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1539828044, "post_id": 52863942, "comment_id": 92645790, "body": "@EugeneSh. the delay function just allow an integer constant as parameter."}, {"owner": {"reputation": 434, "user_id": 6088168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338514626174658/picture?type=large", "display_name": "Hugo Sartori", "link": "https://stackoverflow.com/users/6088168/hugo-sartori"}, "edited": false, "score": 0, "creation_date": 1539828254, "post_id": 52863942, "comment_id": 92645833, "body": "Is there a proper way to implement a delay with micro precision without doing assembly code?"}, {"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 4, "creation_date": 1539842699, "post_id": 52863942, "comment_id": 92649233, "body": "Best way for a delay function is to use timer. Always remember the optimiziation of your compiler."}, {"owner": {"reputation": 533, "user_id": 4417811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vpCMM.png?s=128&g=1", "display_name": "Stefan Bormann", "link": "https://stackoverflow.com/users/4417811/stefan-bormann"}, "edited": false, "score": 0, "creation_date": 1539863551, "post_id": 52863942, "comment_id": 92660156, "body": "I agree that doing this with a timer is the way to go. But if that is not possible and the quality of the output signal relies strongly on how many cycles are used for an operation, I would suggest to do it in assembly instead of compiled code."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1539870206, "post_id": 52863942, "comment_id": 92664342, "body": "@HugoSartori <code>delay_us(x)</code> where `x is a variable you, say, read from user or calculate in runtime. In this scenario the compiler won&#39;t know how long the loop is and will not unroll it."}, {"owner": {"reputation": 434, "user_id": 6088168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338514626174658/picture?type=large", "display_name": "Hugo Sartori", "link": "https://stackoverflow.com/users/6088168/hugo-sartori"}, "edited": false, "score": 0, "creation_date": 1539872270, "post_id": 52863942, "comment_id": 92665665, "body": "I guess I&#39;ll need to spend some time analysing the generated assembly for different scenarios."}, {"owner": {"reputation": 434, "user_id": 6088168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338514626174658/picture?type=large", "display_name": "Hugo Sartori", "link": "https://stackoverflow.com/users/6088168/hugo-sartori"}, "reply_to_user": {"reputation": 533, "user_id": 4417811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vpCMM.png?s=128&g=1", "display_name": "Stefan Bormann", "link": "https://stackoverflow.com/users/4417811/stefan-bormann"}, "edited": false, "score": 0, "creation_date": 1539872428, "post_id": 52863942, "comment_id": 92665780, "body": "@StefanBormann I thought about that, but I&#39;m developing a small library to use PWM, so I&#39;m trying to not cause unexpected behavior."}, {"owner": {"reputation": 533, "user_id": 4417811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vpCMM.png?s=128&g=1", "display_name": "Stefan Bormann", "link": "https://stackoverflow.com/users/4417811/stefan-bormann"}, "edited": false, "score": 1, "creation_date": 1539873304, "post_id": 52863942, "comment_id": 92666370, "body": "Yea, that jitter is unexpected. You can totally avoid that by using the timer hardware of the controller - that&#39;s easy for PWM."}, {"owner": {"reputation": 544, "user_id": 5483150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a7a58101fe1a12044906b3dc7a3199?s=128&d=identicon&r=PG&f=1", "display_name": "vega8", "link": "https://stackoverflow.com/users/5483150/vega8"}, "edited": false, "score": 0, "creation_date": 1544212971, "post_id": 52863942, "comment_id": 94210041, "body": "If clock frequency doesn&#39;t change you could also fine tune using <code>_NOP()</code> from <code>avr&#47;cpufunc.h</code>. Not very flexible, though."}], "answers": [{"tags": [], "owner": {"reputation": 544, "user_id": 5483150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a7a58101fe1a12044906b3dc7a3199?s=128&d=identicon&r=PG&f=1", "display_name": "vega8", "link": "https://stackoverflow.com/users/5483150/vega8"}, "is_accepted": true, "score": 2, "last_activity_date": 1544212826, "creation_date": 1544212826, "answer_id": 53676129, "question_id": 52863942, "link": "https://stackoverflow.com/questions/52863942/strange-delay-behavior-in-atmega328p/53676129#53676129", "title": "Strange delay behavior in Atmega328P", "body": "\n\n<p>For small arguments gcc-avr will unroll the while loop, effectively stringing together multiple 1\u00b5s-delays:</p>\n\n<pre><code>delay_us(5):\n    ldi r24,lo8(5)\n    mov r25,r24\n    1: dec r25\n    brne 1b\n    mov r25,r24\n    1: dec r25\n    brne 1b\n    mov r25,r24\n    1: dec r25\n    brne 1b\n    mov r25,r24\n    1: dec r25\n    brne 1b\n    1: dec r24\n    brne 1b\n</code></pre>\n\n<p>At some point however, the compiler changes its strategy from space-consuming unrolling to actually branching through the while loop:</p>\n\n<pre><code>delay_us(6):\n    ldi r24,lo8(6)\n    ldi r25,hi8(6)\n    ldi r19,lo8(5)\n.L2:\n    mov r18,r19\n    1: dec r18\n    brne 1b\n    sbiw r24,1\n    brne .L2\n</code></pre>\n\n<p>At that time, the carefully crafted <code>_delay_us()</code> function will be more or less defeated. The branch overhead is significant compared to the 16 clock cycles needed for a single <code>_delay_us(1)</code> and will be paid for every loop iteration.</p>\n\n<p>The sudden increase in runtime you describe is basically the point at which your compiler stops to unroll the loop.</p>\n\n<p>Compare this to calling <code>_delay_us(6)</code> directly:</p>\n\n<pre><code>_delay_us(6):\n    ldi r24,lo8(32)\n    1: dec r24\n    brne 1b\n</code></pre>\n\n<p>The assembly shown above might differ somewhat from what your compiler is doing since compiler output can vary significantly with version and flags but the listings should be reasonably close.\nFor the examples I assumed gcc-avr 4.6.4 with optimization level <code>-O2</code>. \n<a href=\"https://godbolt.org/z/aOevfk\" rel=\"nofollow noreferrer\">Try it out</a></p>\n"}], "owner": {"reputation": 434, "user_id": 6088168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338514626174658/picture?type=large", "display_name": "Hugo Sartori", "link": "https://stackoverflow.com/users/6088168/hugo-sartori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 53676129, "answer_count": 1, "score": 2, "last_activity_date": 1544212826, "creation_date": 1539812034, "question_id": 52863942, "link": "https://stackoverflow.com/questions/52863942/strange-delay-behavior-in-atmega328p", "title": "Strange delay behavior in Atmega328P", "body": "<p>So, I have implemented a custom delay function using the standard one found at utils/delay.h.</p>\n\n<pre><code>inline void delay_us(uint16_t time) {\n    while (time &gt; 0) {\n        _delay_us(1);\n        time--;\n    }\n}\n</code></pre>\n\n<p>It's called inside a loop in the main function:</p>\n\n<pre><code>#define F_CPU 16000000UL\n\n...\n\nint main() {\n    pin_mode(P2, OUTPUT);\n    while (1) {\n        pin_enable(P2);\n        delay_us(1);\n        pin_disable(P2);\n        delay_us(1);\n    }\n}\n</code></pre>\n\n<p>Using an oscilloscope, I can tell that the pin stays 1.120us high and 1.120us low, with 1 as parameter. Incrementing the parameter to 6, the the oscilloscope shows me 6.120us. But with 7, it stays 9 us. With 10, about 14 us. \n<br><br>\nI know the loop comes with an overhead, but why there is no overhead (or why the overhead does not changes) between 1 and 6 us?\n<br><br>\n<b>OBS:</b> I'm using an Arduino UNO (16 MHz)</p>\n"}, {"tags": ["c", "shell", "command", "pipe"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1539812714, "post_id": 52863924, "comment_id": 92642400, "body": "When you have multiple processes they can run in any order."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1539812757, "post_id": 52863924, "comment_id": 92642418, "body": "Try adding <code>\\n</code> at the end of all your <code>printf()</code> calls. stdout is line buffered, so nothing is printed until a newline."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1539813760, "post_id": 52863924, "comment_id": 92642772, "body": "General rule of thumb when using a pipe with dup2: <code>close(fd[0]); dup2(fd[1], x); close(fd[1]);</code>.  That is, first close the end of the pipe you&#39;re not going to use.  Then dup to the end you are going to use.  Then close the dup&#39;d end.  You aren&#39;t closing enough fds."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1539812907, "creation_date": 1539812907, "answer_id": 52864109, "question_id": 52863924, "link": "https://stackoverflow.com/questions/52863924/why-is-my-second-child-process-being-hit-before-my-first/52864109#52864109", "title": "Why is my second child process being hit before my first?", "body": "<p>The first child is running, but you're not seeing the message because of stdio buffering. By default, stdout is line-buffered, so the buffer isn't flushed until you print a newline. You're printing a message without a newline, and then you're calling <code>execvp()</code> before you flush the buffer, so the buffer is never flushed and the message is never seen.</p>\n\n<p>Change it to:</p>\n\n<pre><code>    printf(\"AT FIRST CHILD\\n\");\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8839450, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212170905882313/picture?type=large", "display_name": "pdphiro", "link": "https://stackoverflow.com/users/8839450/pdphiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 52864109, "answer_count": 1, "score": 0, "last_activity_date": 1539812907, "creation_date": 1539811923, "last_edit_date": 1539812603, "question_id": 52863924, "link": "https://stackoverflow.com/questions/52863924/why-is-my-second-child-process-being-hit-before-my-first", "title": "Why is my second child process being hit before my first?", "body": "<p>Currently, I am trying to write a small shell that supports piping. In my function <code>execute(char** args, char** args2)</code> it takes two char arrays where each command is split by the delimiter <code>\" \"</code>. The first argument contains commands before the pipe (e.g <code>{ls, -l}</code> and the second argument, commands after the pipe (e.g <code>{wc}</code>).</p>\n\n<p>In my <code>execute</code> function, however, the second child process <code>pid2</code> is run first and the first child <code>pid1</code> is never being hit. </p>\n\n<p>I am not sure if I am missing anything essential to creating your own pipe commands in <code>C</code> and would really appreciate any help/advice I could get.</p>\n\n<p><strong>Execute function:</strong></p>\n\n<pre><code>int execute(char** args, char** args2) {\n    int des_p[2];\n    pid_t pid1, pid2; \n    if(pipe(des_p) == -1) {\n        perror(\"Pipe failed\");\n        exit(1);\n    }\n    pid1 = fork();\n    if(pid1 == 0) {\n        printf(\"AT FIRST CHILD\");\n        dup2(des_p[1], STDOUT_FILENO);\n        close(des_p[0]);\n        execvp(args[0], args);\n        perror(\"execvp of of FIRST PROCESS failed\");\n        exit(1);\n    }\n    pid2 = fork();\n    if(pid2 == 0) {\n        printf(\"AT SECOND CHILD \\n\");\n        dup2(des_p[0], STDIN_FILENO);\n        close(des_p[1]);\n        execvp(args2[0], args2);\n        perror(\"execvp of SECOND PROCESS failed\");\n        exit(1);\n    }\n    close(des_p[0]);\n    close(des_p[1]);\n    wait(pid1);\n    wait(pid2);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "xcode", "clang"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1539809530, "post_id": 52863293, "comment_id": 92641200, "body": "<a href=\"https://en.cppreference.com/w/c/language/compound_literal\" rel=\"nofollow noreferrer\">compound literals</a> might be of interest, but with multidimensional arrays a separate variable is easier and more idiomatic."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539810936, "post_id": 52863293, "comment_id": 92641812, "body": "Aside: is <code>if (!isfinite(x))             return -1;</code> really the coding goal?  I&#39;d expect <code>if (isfinite(x))             return -1;</code> to look for a pole.  (no <code>!</code>)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539821120, "post_id": 52863293, "comment_id": 92644518, "body": "Note: <code>double **R</code> is not a <i>two-dimensional array</i>.  It is a <a href=\"https://cdecl.org/?q=double+%2A%2AR\" rel=\"nofollow noreferrer\">pointer to pointer to double</a>.  <code>R[i]</code> is a pointer to <code>double</code>.  With <code>double A[3][4]</code>, <a href=\"https://cdecl.org/?q=double+A%5B3%5D%5B4%5D\" rel=\"nofollow noreferrer\">A</a> is a 2D array."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1539809491, "creation_date": 1539809491, "answer_id": 52863423, "question_id": 52863293, "link": "https://stackoverflow.com/questions/52863293/expected-expression-in-c/52863423#52863423", "title": "Expected expression in C", "body": "<p>That's not the proper syntax for an array literal.  You need:</p>\n\n<pre><code>fwsubst(2 ,5.0,(double[2][2]){{2.0,2.0},{4.0,2.8}}, (double[2]){1.0, 9.6});\n</code></pre>\n\n<p>And you need to change the function definition to match, since a <code>double[2][2]</code> doesn't convert to a <code>double **</code> but to a <code>double (*)[2]</code>:</p>\n\n<pre><code>int fwsubst(\n            unsigned long n,\n            double alpha,\n            double R[n][n],  /* two-dimensional array, row-major */\n            double b[n]      /* one-dimensional array */\n);\n\n...\n\nint fwsubst(\n            unsigned long n,\n            double alpha,\n            double R[n][n],  /* two-dimensional array, row-major */\n            double b[n]      /* one-dimensional array */\n){\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539810817, "post_id": 52863474, "comment_id": 92641763, "body": "Note: the 2 in <code>[2]</code> is optional.  e.g. <code>(double *[]) {(double[]) {2.0, 2.0}, (double[]) {4.0, 2.8}}</code>.  Depends on what checking is desired."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1539810201, "last_edit_date": 1539810201, "creation_date": 1539809727, "answer_id": 52863474, "question_id": 52863293, "link": "https://stackoverflow.com/questions/52863293/expected-expression-in-c/52863474#52863474", "title": "Expected expression in C", "body": "<blockquote>\n  <p>OP's code is invalid</p>\n</blockquote>\n\n<pre><code>//             v-------------------v  v--------v Invalid\nfwsubst(2 ,5.0,{{2.0,2.0},{4.0,2.8}}, {1.0, 9.6});\n</code></pre>\n\n<hr>\n\n<p>With C99, code can use <a href=\"https://en.wikipedia.org/wiki/C_syntax#Compound_literals\" rel=\"nofollow noreferrer\">compound literals</a>.  </p>\n\n<blockquote>\n  <p>A postfix expression that consists of a parenthesized type name followed by a brace enclosed list of initializers is a <em>compound literal</em>.  C11dr \u00a76.5.2.5 3</p>\n</blockquote>\n\n<pre><code>int fwsubst(unsigned long n, double alpha, double **R, double *b);\n\nint main(void) {\n  fwsubst(2, 5.0,\n  //  v------------------------------------------------------------v  nested literal\n  //                 v--------------------v, v--------------------v  literal\n      (double *[2]) {(double[2]) {2.0, 2.0}, (double[2]) {4.0, 2.8}},\n      (double[2]) {1.0, 9.6});\n  //  ^--------------------^ literal\n}\n</code></pre>\n\n<p>No need to change the function definition.</p>\n"}], "owner": {"reputation": 87, "user_id": 9216028, "user_type": "registered", "profile_image": "https://graph.facebook.com/992748227530706/picture?type=large", "display_name": "Edin Mahmutovic", "link": "https://stackoverflow.com/users/9216028/edin-mahmutovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539810201, "creation_date": 1539808986, "last_edit_date": 1539809096, "question_id": 52863293, "link": "https://stackoverflow.com/questions/52863293/expected-expression-in-c", "title": "Expected expression in C", "body": "<p>I am trying to test an algorithm in C, but when trying to call the function, I get the error \"Expected expression\" at the line where I call the function in my main function. Can somebody spot the mistake that is made?</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stddef.h&gt;\n\nint fwsubst(\n            unsigned long n,\n            double alpha,\n            double **R,  /* two-dimensional array, row-major */\n            double *b    /* one-dimensional array */\n);\n\nint main(void){\n\n\n    fwsubst(2 ,5.0,{{2.0,2.0},{4.0,2.8}}, {1.0, 9.6});\n\n    return 0;\n}\n\nint fwsubst(\n            unsigned long n,\n            double alpha,\n            double **R,  /* two-dimensional array, row-major */\n            double *b    /* one-dimensional array */\n){\n    double x;\n\n    for (size_t k = 0; k &lt; n; k++) {\n        double sum = 0.0;\n        for (size_t i = 0; i &lt; k; i++) {\n            sum +=  b[i] * R[i][k];\n        }\n        x = (b[k] - sum)/(alpha + R[k][k]);\n        if (!isfinite(x))\n            return -1;\n        if(alpha + R[k][k] == 0)\n            return -1;\n        b[k] = x;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1539808955, "post_id": 52863258, "comment_id": 92640963, "body": "Turn your warning level up. The compiler should be telling you the problem."}, {"owner": {"reputation": 356, "user_id": 7850159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-waMjeDlXzRE/AAAAAAAAAAI/AAAAAAAAAJM/-nICyEJzQxg/photo.jpg?sz=128", "display_name": "sundb", "link": "https://stackoverflow.com/users/7850159/sundb"}, "edited": false, "score": 0, "creation_date": 1539834926, "post_id": 52863258, "comment_id": 92647200, "body": "warning: format specifies type &#39;int&#39; but the argument has type       &#39;float&#39; [-Wformat]"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10520187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mp_I0riFTX8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXRcKLJMY_oVcggEjwcBDP6JjWPEg/mo/photo.jpg?sz=128", "display_name": "show team", "link": "https://stackoverflow.com/users/10520187/show-team"}, "edited": false, "score": 0, "creation_date": 1539813511, "post_id": 52863338, "comment_id": 92642687, "body": "I know that I use of %f, but why for the %d answer is 1610612736?"}], "tags": [], "owner": {"reputation": 523, "user_id": 10028727, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1Y9Oj2m20LM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qNVXWmqD8ILmSmKsgDQ0QULiEHwA/mo/photo.jpg?sz=128", "display_name": "Bilal Saleem", "link": "https://stackoverflow.com/users/10028727/bilal-saleem"}, "is_accepted": false, "score": 3, "last_activity_date": 1539810046, "last_edit_date": 1539810046, "creation_date": 1539809121, "answer_id": 52863338, "question_id": 52863258, "link": "https://stackoverflow.com/questions/52863258/how-to-calculate-this-answer/52863338#52863338", "title": "How to calculate this answer?", "body": "<p>Do this instead:</p>\n\n<pre><code>printf(\"\\n %f\", h);\n</code></pre>\n\n<p>You need to use the right specifier... you were using <code>%d</code> which is for integers.</p>\n"}], "owner": {"reputation": 1, "user_id": 10520187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mp_I0riFTX8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXRcKLJMY_oVcggEjwcBDP6JjWPEg/mo/photo.jpg?sz=128", "display_name": "show team", "link": "https://stackoverflow.com/users/10520187/show-team"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1539809122, "answer_count": 1, "score": -3, "last_activity_date": 1539810046, "creation_date": 1539808843, "question_id": 52863258, "link": "https://stackoverflow.com/questions/52863258/how-to-calculate-this-answer", "closed_reason": "Duplicate", "title": "How to calculate this answer?", "body": "<p>Can you please tell me why in below code answer is 1610612736?\nHow to calculate this answer? </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    int main()\n    {\n       float h=4.1;\n       printf(\"\\n%d\\n\",h);\n       return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "gcc", "raspberry-pi", "arm"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1539808086, "post_id": 52862970, "comment_id": 92640546, "body": "It&#39;s common to use software interrupts to call kernel functions."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 9401292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5610ab992a30bc99e66d7b16bbe2ddf4?s=128&d=identicon&r=PG&f=1", "display_name": "j0lama", "link": "https://stackoverflow.com/users/9401292/j0lama"}, "is_accepted": true, "score": 1, "last_activity_date": 1539875303, "creation_date": 1539875303, "answer_id": 52877136, "question_id": 52862970, "link": "https://stackoverflow.com/questions/52862970/compile-a-function-to-run-it-in-other-machine-without-resolving-address-dependen/52877136#52877136", "title": "Compile a function to run it in other machine without resolving address dependencies", "body": "<p>I solve it using the hardcoding the kernel functions in the payload:</p>\n\n<pre><code>void (* uart_puts)(char *) = (void(*)(char * )) 0x0000000000008248;\n</code></pre>\n\n<p>I get the 0x0000000000008248 address from the .map file generated in the compilation of the kernel.</p>\n"}], "owner": {"reputation": 79, "user_id": 9401292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5610ab992a30bc99e66d7b16bbe2ddf4?s=128&d=identicon&r=PG&f=1", "display_name": "j0lama", "link": "https://stackoverflow.com/users/9401292/j0lama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 52877136, "answer_count": 1, "score": 1, "last_activity_date": 1539875303, "creation_date": 1539807483, "question_id": 52862970, "link": "https://stackoverflow.com/questions/52862970/compile-a-function-to-run-it-in-other-machine-without-resolving-address-dependen", "title": "Compile a function to run it in other machine without resolving address dependencies", "body": "<p>Im developing a bare metal OS for raspberry pi 1. The main idea of this OS is a simply kernel that will be able to run a function created in other machine and send it to the raspi. The function will use functions that were compilated with the kernel and that reside in memory.</p>\n\n<p>I want to know how can I compile a function that when I will insert the payload in memory in a determinated address it will be able to call system functions and use the data that are defined in the function code.</p>\n\n<pre><code>void function()\n{\n\n    while (1)\n    {\n        uart_puts(\"Hello\\r\\n\");\n    }\n}\n</code></pre>\n\n<p>This is my link.ld file and the function will be loaded at __binary_function:</p>\n\n<pre><code>ENTRY(_start)\nSECTIONS\n{\n    /* Starts at LOADER_ADDR. */\n    . = 0x8000;\n    __start = .;\n    __text_start = .;\n    .text :\n    {\n        KEEP(*(.text.boot))\n        *(.text)\n    }\n    . = ALIGN(4096); /* align to page size */\n    __text_end = .;\n    __rodata_start = .;\n    .rodata :\n    {\n        *(.rodata)\n    }\n    . = ALIGN(4096); /* align to page size */\n    __rodata_end = .;\n    __data_start = .;\n    .data :\n    {\n        *(.data)\n    }\n    . = ALIGN(4096); /* align to page size */\n    __data_end = .;\n    __bss_start = .;\n    .bss :\n    {\n        bss = .;\n        *(.bss)\n    }\n    . = ALIGN(4096); /* align to page size */\n    __bss_end = .;\n    /*Allocating memory for the heap*/\n    __heap_start = .;\n    . = . + 0x1000000;  /*4MB Heap section*/\n    __heap_end = .;\n    __binary_function = .;\n    __end = .;\n}\n</code></pre>\n\n<p>My idea is that the kernel will receive the payload via UART and then execute it. The payload must be able to call system functions such us the UART functions and access to the data that is define inside it.</p>\n\n<p>I want to do this automatically with arm-none-eabi-gcc (GCC Toolchain for ARM architecture) that works like GCC and avoiding harcoding the system functions in the payload source.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "skip-lists"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1539807634, "post_id": 52862667, "comment_id": 92640325, "body": "&quot;the skiplist_insert function is not working&quot; okay... would you take some time to describe what isn&#39;t working? Perhaps you could share how you call the various function. What you expect to happen. What doesn&#39;t meet your expectation...."}, {"owner": {"reputation": 1, "user_id": 10520567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adfdcd2df40a72ac2c94ce65bd577cb?s=128&d=identicon&r=PG&f=1", "display_name": "katz", "link": "https://stackoverflow.com/users/10520567/katz"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1539808176, "post_id": 52862667, "comment_id": 92640593, "body": "@4386427 the snode that is added into the skip list has the correct key, but the arr-&gt;tasks is not what I expected. I initialize it with skiplist_init(&amp;rTaskList). Afterwards, I create a task, and a taskArray arr, put arr.tasks=&amp;task, then call skiplist_insert(rTaskList, 0, arr);"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1539808677, "post_id": 52862667, "comment_id": 92640829, "body": "Add that information to the question using the &quot;edit&quot; link"}, {"owner": {"reputation": 1, "user_id": 10520567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adfdcd2df40a72ac2c94ce65bd577cb?s=128&d=identicon&r=PG&f=1", "display_name": "katz", "link": "https://stackoverflow.com/users/10520567/katz"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1539808859, "post_id": 52862667, "comment_id": 92640922, "body": "@4386427 I&#39;ve added additional information. Thank you for your feedback."}], "owner": {"reputation": 1, "user_id": 10520567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adfdcd2df40a72ac2c94ce65bd577cb?s=128&d=identicon&r=PG&f=1", "display_name": "katz", "link": "https://stackoverflow.com/users/10520567/katz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539808745, "creation_date": 1539806107, "last_edit_date": 1539808745, "question_id": 52862667, "link": "https://stackoverflow.com/questions/52862667/skip-list-implementation-in-c", "title": "Skip list implementation in C", "body": "<p>I'm implementating a skip list in C.\nHowever, the skiplist_insert function is not working. The taskArray in the node that is inserted into the list doesn't have the correct tasks.\nI really can't figure out why.\nCan someone point me to the right direction?\nI've been stuck at this for days.</p>\n\n<p>The original implementation is found <a href=\"https://gist.github.com/zhpengg/2873424\" rel=\"nofollow noreferrer\">here</a>.\nThe malloc function is replaced by OSMemCreate and OSMemGet since it's gonna be used on a real time OS which doesn't allow the use of malloc. </p>\n\n<p>This is how I use the code (truncated for simplicity):</p>\n\n<pre><code>skiplist_init(&amp;rTaskList);\ntask recTask = {(period+tickCnt) % MAXTICKCNT,\n                  overflow,\n                  TCB,\n                  name,\n                  taskptr,\n                  prio,\n                  stk,\n                  stksize};\n  arr.count = 1;\n\n  arr.tasks=&amp;recTask;\n\n  skiplist_insert(rTaskList, 0, arr);\n</code></pre>\n\n<p>This is the implementation itself</p>\n\n<pre><code>typedef struct task{\n  CPU_INT16U period;\n  CPU_INT08U overflow_flag;\n  OS_TCB * TCB;\n  CPU_CHAR * name;\n  OS_TASK_PTR taskptr;\n  OS_PRIO prio;\n  CPU_STK * stk;\n  CPU_STK_SIZE stksize;\n}task;\n\ntypedef struct taskArray{\n  CPU_INT32U count;\n  task * tasks;\n}taskArray; \n\ntypedef struct snode {\n    int key;\n    taskArray arr;\n    OS_MEM  *  MyPartitionPtr;\n    OS_MEM * ForwardPartitionPtr;\n    struct snode **forward;\n} snode;\n\ntypedef struct skiplist {\n    int level;\n    struct snode *header;\n} skiplist;\n\nskiplist *skiplist_init(skiplist *list) {\n    int i;\n    OS_ERR  err;\n    CPU_INT08U   MyPartitionStorage[12][100];  \n    CPU_INT08U   MyPartitionStorage2[12][100]; \n    OS_MEM      MyPartition; \n    OS_MEM      ForwardPartition;\n    // Memory management       \n    OSMemCreate((OS_MEM    *)&amp;MyPartition, \n                (CPU_CHAR  *)\"My Partition\",           \n                (void      *)&amp;MyPartitionStorage[0][0],                      \n                (OS_MEM_QTY ) 12,                            \n                (OS_MEM_SIZE)100,                            \n                (OS_ERR    *)&amp;err);\n\n\n    snode *header = (snode *)OSMemGet((OS_MEM    *)&amp;MyPartition,\n                                      (OS_ERR    *)&amp;err);\n\n    list-&gt;header = header;\n    header-&gt;key = INT_MAX;\n    header-&gt;MyPartitionPtr = &amp;MyPartition; // update mem ptr\n\n    // Replace malloc function\n    OSMemCreate((OS_MEM    *)&amp;ForwardPartition,                 \n                (CPU_CHAR  *)\"My Partition\",           \n                (void      *)&amp;MyPartitionStorage2[0][0],                      \n                (OS_MEM_QTY ) 12,                            \n                (OS_MEM_SIZE)100,                            \n                (OS_ERR    *)&amp;err);\n\n    header-&gt;forward = (snode **)OSMemGet((OS_MEM    *)&amp;ForwardPartition,\n                                          (OS_ERR    *)&amp;err);\n    if (err != OS_ERR_NONE){\n      true; // for catching memory allocation errors\n    }\n    header-&gt;ForwardPartitionPtr = &amp;ForwardPartition; // update mem ptr\n\n    for (i = 0; i &lt;= SKIPLIST_MAX_LEVEL; i++) {\n        header-&gt;forward[i] = list-&gt;header;\n    }\n\n    list-&gt;level = 1;\n\n    return list;\n}\n\nstatic int rand_level() {\n    int level = 1;\n    while (rand() &lt; RAND_MAX / 2 &amp;&amp; level &lt; SKIPLIST_MAX_LEVEL)\n        level++;\n    return level;\n}\n\nint skiplist_insert(skiplist *list, int key, taskArray arr) {\n    OS_ERR  err;\n    OS_MEM    MyPartition;\n    OS_MEM      ForwardPartition;\n    CPU_INT08U   MyPartitionStorage[12][100];  \n    CPU_INT08U   MyPartitionStorage2[12][100]; \n\n    snode *update[SKIPLIST_MAX_LEVEL + 1];\n    snode *x = list-&gt;header;\n    int i, level;\n    for (i = list-&gt;level; i &gt;= 1; i--) {\n        while (x-&gt;forward[i]-&gt;key &lt; key)\n            x = x-&gt;forward[i];\n        update[i] = x;\n    }\n    x = x-&gt;forward[1];\n\n    if (key == x-&gt;key) {\n        x-&gt;arr = arr;\n        return 0;\n    } else {\n        level = rand_level();\n        if (level &gt; list-&gt;level) {\n            for (i = list-&gt;level + 1; i &lt;= level; i++) {\n                update[i] = list-&gt;header;\n            }\n            list-&gt;level = level;\n        }\n\n    //Mem alloc                       \n    OSMemCreate((OS_MEM    *)&amp;MyPartition,                 \n                (CPU_CHAR  *)\"My Partition\",           \n                (void      *)&amp;MyPartitionStorage[0][0],                      \n                (OS_MEM_QTY ) 12,                            \n                (OS_MEM_SIZE)100,                            \n                (OS_ERR    *)&amp;err);\n\n    x = (snode *)OSMemGet((OS_MEM    *)&amp;MyPartition,\n                                      (OS_ERR    *)&amp;err);\n\n\n\n    x-&gt;key = key;\n    x-&gt;arr = arr;\n    x-&gt;MyPartitionPtr = &amp;MyPartition; // update ptr\n\n    // replace malloc function       \n\n    OSMemCreate((OS_MEM    *)&amp;ForwardPartition,                 \n                (CPU_CHAR  *)\"Forward Partition\",           \n                (void      *)&amp;MyPartitionStorage2[0][0],                      \n                (OS_MEM_QTY ) 12,                            \n                (OS_MEM_SIZE)100,                            \n                (OS_ERR    *)&amp;err);\n\n\n    x-&gt;forward = (snode **)OSMemGet((OS_MEM    *)&amp;ForwardPartition,\n                                        (OS_ERR    *)&amp;err);\n\n    x-&gt;ForwardPartitionPtr = &amp;ForwardPartition;\n    for (i = 1; i &lt;= level; i++) {\n        x-&gt;forward[i] = update[i]-&gt;forward[i];\n        update[i]-&gt;forward[i] = x;\n    }\n  }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "matlab", "mex"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539805367, "post_id": 52862307, "comment_id": 92639312, "body": "Are you linking in the MATLAB libraries? Please include your linker command."}, {"owner": {"reputation": 11, "user_id": 10520465, "user_type": "registered", "profile_image": "https://graph.facebook.com/477115626143014/picture?type=large", "display_name": "Rufat", "link": "https://stackoverflow.com/users/10520465/rufat"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539806757, "post_id": 52862307, "comment_id": 92639927, "body": "@CrisLuengo  Since I am not really sure, which part of my code is a linker, I have included the whole code in the question d."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539806762, "post_id": 52862307, "comment_id": 92639931, "body": "Thanks for including the code. That&#39;s important too. But I was asking for the linker command. Your code gets compiled by a compiler, then the resulting object code is linked (with libraries) into an executable. This second step is performed by the linker. This linker needs to know which libraries  you use, so it can link them into your executable."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539806848, "post_id": 52862307, "comment_id": 92639970, "body": "Your error message is &quot;Apple Mach-O Linker (Id) Error&quot; -- it is saying that the linker (the second step) found an error."}, {"owner": {"reputation": 11, "user_id": 10520465, "user_type": "registered", "profile_image": "https://graph.facebook.com/477115626143014/picture?type=large", "display_name": "Rufat", "link": "https://stackoverflow.com/users/10520465/rufat"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539808152, "post_id": 52862307, "comment_id": 92640579, "body": "@CrisLuengo I am so sorry but this is way too deep for my knowledge of what is behind the code. Maybe the image that I included in the end of the question as &quot;the error message&quot; link would help?"}], "answers": [{"tags": [], "owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "is_accepted": false, "score": 0, "last_activity_date": 1539810907, "creation_date": 1539810907, "answer_id": 52863716, "question_id": 52862307, "link": "https://stackoverflow.com/questions/52862307/apple-mach-o-linker-id-error-in-xcode-9-4-1/52863716#52863716", "title": "Apple Mach-O Linker (Id) Error in Xcode 9.4.1", "body": "<p>According to the error message and the link command shown in the screen grab, it is not linking to the MATLAB libraries. I don't know how to properly set up Xcode to do so.</p>\n\n<p>The best you can do is follow the advice in the <a href=\"https://www.mathworks.com/help/matlab/matlab_external/build-mac-os-x-engine-application.html\" rel=\"nofollow noreferrer\">MATLAB documentation</a>, which suggests using the <code>mex</code> command in MATLAB as follows:</p>\n\n<pre><code>mex -v -client engine &lt;filename.cpp&gt;\n</code></pre>\n\n<p>Replace <code>&lt;filename.cpp&gt;</code> with the actual source file name, of course. First change directory to the location of that source file, and the executable will be placed next to it.</p>\n"}], "owner": {"reputation": 11, "user_id": 10520465, "user_type": "registered", "profile_image": "https://graph.facebook.com/477115626143014/picture?type=large", "display_name": "Rufat", "link": "https://stackoverflow.com/users/10520465/rufat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539810907, "creation_date": 1539804607, "last_edit_date": 1539808057, "question_id": 52862307, "link": "https://stackoverflow.com/questions/52862307/apple-mach-o-linker-id-error-in-xcode-9-4-1", "title": "Apple Mach-O Linker (Id) Error in Xcode 9.4.1", "body": "<p>I am trying to use the MATLAB engine through C++ on Xcode 9.4.1 but I am getting an error: \"Apple Mach-O Linker (Id) Error\". I searched for the answer and found out that turning off the \"Bitcode\" might help. However, when I go to the Build Setting of Xcode, it is just not there. I highlight, that it is definitely not there, even if you search in the search bar. How can I turn it off, and if I can't, what can I do? </p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n\"_engEvalString\", referenced from:\n  _main in main.o\n\"_engOpen\", referenced from:\n  _main in main.o\n\"_engPutVariable\", referenced from:\n  _main in main.o\n\"_mxCreateDoubleMatrix_800\", referenced from:\n  _main in main.o\n\"_mxGetPr_800\", referenced from:\n  _main in main.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Here is the full code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"engine.h\"\n#define  BUFSIZE 256\n\nint main() {\n    Engine *ep ;\n    mxArray *Y = NULL, *result = NULL ;\n    char buffer[BUFSIZE];\n    double x[10] = {0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0,\n        8.0, 9.0};\n    if (!(ep = engOpen(\"\\0\"))) {\n        fprintf(stderr, \"\\nCan't start MATLAB engine\\n\");\n        return EXIT_FAILURE;\n    }\n    Y = mxCreateDoubleMatrix(1,10, mxREAL);\n    memcpy((void *)mxGetPr(Y), (void *)x, sizeof(x));\n    engPutVariable (ep, \"Y\", Y) ;\n    engEvalString(ep, \"fx = Y.^2\") ;\n    engEvalString(ep, \"plot(Y,fx);\");\n    engEvalString(ep, \"f(x) = y^2\") ;\n    engEvalString(ep, \"xlabel('x');\");\n    engEvalString(ep, \"ylabel('y');\");\n\n    printf(\"Hit return to continue\\n\\n\");\n    fgetc(stdin);\n    return 0 ;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/aEqpY.png\" rel=\"nofollow noreferrer\">the error message</a></p>\n"}, {"tags": ["c", "bitwise-operators", "integer-overflow"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1539804520, "post_id": 52862239, "comment_id": 92638937, "body": "The first line uses an operator that is not in your list of operators. You can invert and add 1 to get the negative of a number, and then use addition."}, {"owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1539804734, "post_id": 52862239, "comment_id": 92639021, "body": "I changed that, thank you!"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 7, "creation_date": 1539804806, "post_id": 52862239, "comment_id": 92639058, "body": "I wonder what&#39;s the school that gives these utterly brain-dead assignments."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1539804855, "post_id": 52862239, "comment_id": 92639081, "body": "At least it is an introduction to bitwise operations and two-compliment storage of negative values."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539804974, "post_id": 52862239, "comment_id": 92639137, "body": "<code>a-b</code> overflow occurs when <a href=\"https://codereview.stackexchange.com/a/93699/29485\"><code>(b &lt; 0) ? (a &gt; INT_MAX + b) : (a &lt; INT_MIN + b)</code></a>.  OP&#39;s attempt to solve with only bit-wise operators and <code>!</code> depend upon UB or implementation defined behavior."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539805127, "post_id": 52862239, "comment_id": 92639205, "body": "DIY: <a href=\"http://www.informit.com/articles/article.aspx?p=1959565&amp;seqNum=13\" rel=\"nofollow noreferrer\">informit.com/articles/article.aspx?p=1959565&amp;seqNum=13</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539805367, "post_id": 52862239, "comment_id": 92639311, "body": "<code>x - y</code> is <i>undefined behavior</i> on overflow.  <code>x &gt;&gt; 31</code> is <i>implementation-defined behavior</i>, even if <code>int</code> is 2&#39;s complement.  This really is not a good C problem since the goal is to ignore such behavior."}, {"owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539806665, "post_id": 52862239, "comment_id": 92639895, "body": "@chux &lt; and &gt; are not allowed. Only what is listed and = are allowed."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539807228, "post_id": 52862239, "comment_id": 92640130, "body": "Can we use <code>for</code> and loops? Can we use <code>==</code>? Can we use <code>&amp;&amp;</code>?"}, {"owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539807322, "post_id": 52862239, "comment_id": 92640177, "body": "@KamilCuk No loops, &amp;&amp;, or == either, adding that in."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1539807537, "post_id": 52862239, "comment_id": 92640284, "body": "I don&#39;t think this is possible without relying on undefined behavior. Basically your goal is to represent the check as written by chux, but using only enlisted operators. I have no idea how to implement <code>&lt;</code> using only these operators. You could represent comparison <code>&lt;</code> by using a loop and <code>&amp;</code> and <code>&lt;&lt;</code>. Or we can unfold the loop for the number of bits in an integer..."}, {"owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "edited": false, "score": 0, "creation_date": 1539807679, "post_id": 52862239, "comment_id": 92640347, "body": "I looked a lot at this post: <a href=\"https://stackoverflow.com/q/10154975/10420793\">stackoverflow.com/q/10154975/10420793</a> to try and figure it out for subtraction, but I didn&#39;t have any luck."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1539807862, "post_id": 52862239, "comment_id": 92640438, "body": "Are your function arguments of type <code>int</code> or <code>unsigned int</code>?"}, {"owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1539807983, "post_id": 52862239, "comment_id": 92640490, "body": "@melpomene type int"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1539808047, "post_id": 52862239, "comment_id": 92640524, "body": "Does a return value of <code>1</code> mean there was overflow or that there was no overflow?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1539808377, "post_id": 52862239, "comment_id": 92640694, "body": "<b>&#167;3.4.3 undefined behavior</b> <i>&quot;NOTE Possible undefined behavior ranges from ignoring the situation completely with unpredictable results, to <b>behaving during translation or program execution in a documented manner characteristic of the environment</b> (with or without the issuance of a diagnostic message), to terminating a translation or execution (with the issuance of a diagnostic message).&quot;</i> Emphasis added. So the professor who assigned this homework is well within his/her rights to define an implementation that allows this homework to be completed."}, {"owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1539808466, "post_id": 52862239, "comment_id": 92640736, "body": "@melpomene 1 means there was no overflow."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539808931, "post_id": 52862239, "comment_id": 92640952, "body": "Which is more important: <code>int</code> or <code>int32_t</code>? <code>int</code> may be 16, 32, 64-bit etc.  Fixed width integer like <code>int32_t</code> that may be of higher, same, lower rank than <code>int</code>?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1539809437, "post_id": 52862239, "comment_id": 92641157, "body": "Hint: if you&#39;re on a machine that uses two&#39;s complement, then <code>a - b</code> is the same as <code>a + ((~b) + 1)</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539810999, "post_id": 52862239, "comment_id": 92641837, "body": "The only portable solution is the one given by @chux. No bit-twiddling solution can be portable."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1539811215, "post_id": 52862239, "comment_id": 92641898, "body": "@GovindParmar Even if on a machine that uses two&#39;s complement, C does not require <a href=\"https://stackoverflow.com/questions/52862239/c-checking-for-overflow-during-subtraction?noredirect=1#comment92641157_52862239\">that suggested behavior</a>.  Compiler makers often take advantage (or abuse) UB and IDB in unexpected ways, if not today, maybe tomorrow."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "edited": false, "score": 0, "creation_date": 1539809391, "post_id": 52863372, "comment_id": 92641137, "body": "I&#39;ve already changed that in my function, and it works, so all I need to figure out now is how to make the actual function work."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1539809494, "post_id": 52863372, "comment_id": 92641185, "body": "P=positive N=negative. P-P cannot overflow. N-N cannot overflow. P-N overflowed if the result of the subtraction is negative. N-P overflowed if the result of the subtraction is positive."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1539810028, "post_id": 52863372, "comment_id": 92641421, "body": "Your code actually performs the operation that overflows and checks afterwards. This cannot work: Signed integer overflow has undefined behavior in C."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1539810600, "post_id": 52863372, "comment_id": 92641667, "body": "Of course it applies. Two&#39;s complement is an orthogonal concern."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1539810787, "post_id": 52863372, "comment_id": 92641746, "body": "I mean a C implementation can use two&#39;s complement, ones&#39; complement, or sign/magnitude. No matter which it is, signed integer overflow has undefined behavior."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539811394, "post_id": 52863372, "comment_id": 92641961, "body": "Disagree about <a href=\"https://stackoverflow.com/questions/52862239/c-checking-for-overflow-during-subtraction?noredirect=1#comment92641775_52863372\">two&#39;s complement overflow is well-defined</a>.  A  platform using 2&#39;s complement is not required by C to be well-defined on overflow as this answer hopes for.  See <a href=\"https://codereview.stackexchange.com/q/37177/29485\">Simpler method to detect int overflow</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539812369, "post_id": 52863372, "comment_id": 92642277, "body": "What mis-leads is this answer&#39;s &quot;To avoid undefined behavior, ... integers are represented in two&#39;s complement, &quot;  That is not a sufficient criteria to prevent UB - encoding can be 2&#39;s complement and the function still not as desired.  True this answer may work for you and OP today, yet C does not oblige this code to work as desired tomorrow or on other platforms and compilers."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539812710, "post_id": 52863372, "comment_id": 92642399, "body": "Concerning &quot;simply cannot be answered using only the listed operators without undefined behavior.&quot; may one can, maybe not?  There are many corners of C that may allow it.  Yet as to this answer, I can identify UB and the over statements about UB and 2&#39;s.  It does not make the code <i>wrong</i>, just UB dependent and not certainly portable."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 743, "user_id": 3081198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2dfbaa19e92a511fa2d54fb3ad9d50?s=128&d=identicon&r=PG&f=1", "display_name": "HackerBoss", "link": "https://stackoverflow.com/users/3081198/hackerboss"}, "edited": false, "score": 0, "creation_date": 1539814049, "post_id": 52863372, "comment_id": 92642846, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182049/discussion-between-chux-and-hackerboss\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 743, "user_id": 3081198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2dfbaa19e92a511fa2d54fb3ad9d50?s=128&d=identicon&r=PG&f=1", "display_name": "HackerBoss", "link": "https://stackoverflow.com/users/3081198/hackerboss"}, "is_accepted": true, "score": 0, "last_activity_date": 1539809822, "last_edit_date": 1539809822, "creation_date": 1539809236, "answer_id": 52863372, "question_id": 52862239, "link": "https://stackoverflow.com/questions/52862239/c-checking-for-overflow-during-subtraction/52863372#52863372", "title": "C checking for overflow during subtraction", "body": "<p>To avoid undefined behavior, I will assume that integers are represented in two's complement, inferred from your calculation of <code>sX</code>, <code>sY</code>, and <code>sDif</code>. I will also assume that <code>sizeof(int)</code> is 4. It would probably be better to use <code>int32_t</code> if you are working only with 32-bit integers, since the size of <code>int</code> can vary by platform.</p>\n\n<p>Since you are allowed to use addition, you can think of subtraction as addition of the negation of a number. A number stored in two's complement may be negated by flipping all of the bits and adding one. This gives the following modified code:</p>\n\n<pre><code>int ny = 1 + ~y; // -y\nint dif = x + ny; // dif is x - y\nint sX = x &gt;&gt; 31; // get the sign of x\nint sNY = ny &gt;&gt; 31; // get the sign of -y\nint sDif = dif &gt;&gt; 31; // get the sign of the difference\nreturn ((sX ^ sNY) | (~sDif ^ sX)); // if the sign of x and the sign of y \n                                    // are the same, no overflow. If the\n                                    // sign of dif is the same as the signs\n                                    // of x and -y, no overflow.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "is_accepted": false, "score": 1, "last_activity_date": 1539866684, "creation_date": 1539866684, "answer_id": 52874365, "question_id": 52862239, "link": "https://stackoverflow.com/questions/52862239/c-checking-for-overflow-during-subtraction/52874365#52874365", "title": "C checking for overflow during subtraction", "body": "<p>Thank you all for your help! Here is what I came up with to solve my issue:</p>\n\n<pre><code>int ny = 1 + ~y; // -y\nint dif = x + ny; // dif is x - y\nint sX = x &gt;&gt; 31; // get the sign of x\nint sY = y &gt;&gt; 31; // get the sign of -y\nint sDif = dif &gt;&gt; 31; // get the sign of the difference\nreturn (!(sX ^ sY) | !(sDif ^ sX));\n</code></pre>\n\n<p>Every case I tried it with worked. I changed around what @HackerBoss suggested by getting the sign for y rather than ny and then reversing the two checks in the return statement. That way, if the signs are the same, or if the sign of the result and the sign of x are the same, it returns true.</p>\n"}], "owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2134, "favorite_count": 0, "accepted_answer_id": 52863372, "answer_count": 2, "score": 2, "last_activity_date": 1539866684, "creation_date": 1539804345, "last_edit_date": 1539807343, "question_id": 52862239, "link": "https://stackoverflow.com/questions/52862239/c-checking-for-overflow-during-subtraction", "title": "C checking for overflow during subtraction", "body": "<p>I've been trying to determine whether there is overflow when subtracting two numbers of 32 bits. The rules I was given are:</p>\n\n<pre><code>Can only use: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;\n *   Max uses: 20\nExample: subCheck(0x80000000,0x80000000) = 1,\n *       subCheck(0x80000000,0x70000000) = 0\nNo conditionals, loops, additional functions, or casting\n</code></pre>\n\n<p>So far I have</p>\n\n<pre><code>int dif = x - y; // dif is x - y\nint sX = x &gt;&gt; 31; // get the sign of x\nint sY = y &gt;&gt; 31; // get the sign of y\nint sDif = dif &gt;&gt; 31; // get the sign of the difference\nreturn (((!!sX) &amp; (!!sY)) | (!sY)); // if the sign of x and the sign of y \n                                    // are the same, no overflow. If y is \n                                    // 0, no overflow.\n</code></pre>\n\n<p>I realize now I cannot use subtraction in the actual function (-), so my entire function is useless anyways. How can I use a different method than subtraction and determine whether there is overflow using only bitwise operations?</p>\n"}, {"tags": ["c", "sockets", "http"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1539808443, "post_id": 52862118, "comment_id": 92640723, "body": "Go through all you code and fix all the instances where you call a library function that requires a NUL-terminated char array with an argument that is not guaranteed NUL-terminated, eg: &#39;printf(&quot;%s \\n\\n&quot;, client_msg);&#39;"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1539808657, "post_id": 52862118, "comment_id": 92640818, "body": "Then go through all your code and  fix all the instances where you make a system call like send() without correctly and completely handling the value returned."}], "owner": {"reputation": 51, "user_id": 8463069, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-hTSN5EAtIsQ/AAAAAAAAAAI/AAAAAAAAACA/3tjaxfT4bVE/photo.jpg?sz=128", "display_name": "Sieun Sim", "link": "https://stackoverflow.com/users/8463069/sieun-sim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539803830, "creation_date": 1539803830, "question_id": 52862118, "link": "https://stackoverflow.com/questions/52862118/how-to-display-video-on-web-server-with-httptcp-socket-programming-file-transf", "title": "How to display video on web server with http?(tcp socket programming-file transfer to server in c)", "body": "<p>I'm trying to transfer the file which Client requests with URL like</p>\n\n<p><a href=\"http://localhost:10080/test.mp4\" rel=\"nofollow noreferrer\">http://localhost:10080/test.mp4</a></p>\n\n<p>I have to receive most of file types which are normal for web.\nFor image, txt, html, pdf it successfully displays files on web.\nI should also display video (not download) but I can't.</p>\n\n<p>[#1]</p>\n\n<p>my HTTP Header is :\"HTTP/1.1 200 OK\\r\\n\\r\\n\"</p>\n\n<p>this give me message which includes this line: \nAccept: text/html, application/xhtml+xml, image/jxr, * / *(no whitespace!)</p>\n\n<p>when I tried [#1], cracked words</p>\n\n<p>ex)\ufffdU\ufffd\ufffdD\ufffd}\ufffdr\ufffdmU\ufffd~\u5dbcV!\ufffdH:y\u24a6XR</p>\n\n<p>appears. I guess it may need some encoding..?But not sure.</p>\n\n<p>[#2]</p>\n\n<p>changed HTTP Header to:\"HTTP/1.1 200 OK\\r\\nContent-Type :video/mp4\\r\\nContent-Length :99999999999\\r\\n\"</p>\n\n<p>For [#2], download message appears on web, and its size is same with that I set in Content-Length in HTTP header, not the real size of the mp4 file. It keeps asking download even when I delete Content-Length. </p>\n\n<p>How can I display video file on web using http, tcp?</p>\n\n<p>If you want to view code only about file upload, please search this(Sorry but it keeps make Error when I tried to shorten):</p>\n\n<p>char* file_name = get_filename(client_msg);</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n////server.c\n\nint file_exists(char* filename) {\n    FILE* file;\n    if (file = fopen(filename, \"rb\")) {\n        fclose(file);\n        return 1;\n    }\n    return -1;\n}\n\nint isthere_params(char* msg) {\n    //index.html\n    if (msg[5] ==' ') return -1;\n    //log in\n    else if (msg[5] == '?')\n        return 1;\n    //file request\n    else return 0;\n}\nchar* get_filename(char* msg) {\n    char * parsed_name = (char*)malloc(sizeof(char)*2050);\n    int i,idx=0;\n    for(i=5; i&lt;2050; i++) {\n        if (msg[i] == ' ') break;\n        parsed_name[idx++] = msg[i];\n    }\n    return parsed_name;\n}\n\nint main(int argc, char *argv[]) {\n    int* login_flag = (int*)malloc(sizeof(int));\n    *(login_flag)=0;\n    int len,is_params, server_socket, client_socket, client_addr_size, client_msg_size;\n    struct sockaddr_in server_addr, client_addr;\n    char client_msg[10000], buf[4100];\n  char rsp_packet[2048]=\"HTTP/1.1 200 OK\\r\\n\\r\\n\";\n  //char rsp_packet_copy[2048]=\"HTTP/1.1 200 OK\\r\\nContent-Type :video/mp4\\r\\nContent-Length :99999999999\";\n    char _403_packet[1024] = \"HTTP/1.1 403 Forbidden\\r\\n\\r\\nYou dont't have permission to access \";\n    char _404_packet[1024] = \"HTTP/1.1 404 Not Found\\r\\r\\r\\rFile is not found\";\n\n    if (argc != 2) {\n        printf(\"Usage : %s &lt;port&gt;\\n\", argv[0]);\n        return -1;\n    }\n\n    server_socket = socket(PF_INET, SOCK_STREAM, 0);\n\n    memset(&amp;server_addr, 0, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_addr.s_addr = INADDR_ANY;\n    server_addr.sin_port = htons(atoi(argv[1]));\n    //bind\n    if (bind(server_socket, (struct sockaddr *)&amp;server_addr, sizeof(server_addr)) == -1) {\n        puts(\"bind error!\");\n        return -1;\n    }\n    //listen\n    listen(server_socket, 10);\n\n    //enter the loop\n    while(1) {\n        puts(\"wait to accept.... \\n\");\n        client_addr_size = sizeof(client_addr);\n        client_socket = accept(server_socket, (struct sockaddr *)&amp;client_addr, &amp;client_addr_size);\n        if (client_socket == -1)\n            puts(\"fail to accept client connection! \");\n        //receive from client\n        if ((client_msg_size = recv(client_socket, client_msg,100,0)) &gt; 0) {\n            printf(\"%s \\n\\n\", client_msg);\n            //is_params 1:OK -1:Entrance url 0:file input\n            is_params = isthere_params(client_msg);\n            printf(\"isparams!-----&gt;%d\\n\", is_params );\n            printf(\"\\n\\n login flag--&gt;%d \\n\\n\",*login_flag);\n\n            if (is_params == -1) {\n                send(client_socket, rsp_packet,strlen(rsp_packet),0);\n                int fr = open(\"index.html\",O_RDONLY);\n                if (fr &lt;0) {\n                    puts(\"Error(index)\");\n                    exit(1);\n                }\n                while ((len=read(fr,buf, 4096)) &gt; 0 ) {\n                    send(client_socket,buf,len, 0);\n                }\n                close(fr);\n            }\n            else if (is_params == 1) {\n                send(client_socket, rsp_packet,strlen(rsp_packet),0);\n                *(login_flag)=1;            \n                int secret = open(\"secret.html\",O_RDONLY);\n                if ( secret&lt;0) {\n                    puts (\"Error(secret)\");\n                    exit(1);\n                }  \n            while ((len = read(secret, buf, 4096)) &gt;0) {\n                    send(client_socket,buf,len, 0);\n                }               \n            }   \n\n            else if (is_params == 0) {\n                //when failed to login\n                if (*login_flag == 0)\n                    send(client_socket, _403_packet, strlen(_403_packet),0);\n                else {\n                    char* file_name = get_filename(client_msg);\n                    if (file_exists(file_name)== -1) {\n                        send(client_socket, _404_packet, strlen(_404_packet),0);\n                    } else {\n                        send(client_socket, rsp_packet,strlen(rsp_packet),0);\n                        int fr = open(file_name,O_RDONLY);\n                        if (fr &lt;0) {\n                            puts(\"Error(file)\");\n                            exit(1);\n                        }\n                        while ((len=read(fr,buf, 4096)) &gt; 0 ) {\n                            send(client_socket,buf,len, 0);\n                        }\n                        close(fr);\n                    }\n                }\n            }\n            //Send the message back to client\n            //write(client_socket, client_msg, sizeof(client_msg));\n        }\n        close(client_socket);\n    }//end while\n\n    close(server_socket);\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "unix", "posix", "system-calls"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1539799003, "post_id": 52860903, "comment_id": 92636333, "body": "no and no......."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539799017, "post_id": 52860903, "comment_id": 92636338, "body": "Neither one are possible."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1539799199, "post_id": 52860903, "comment_id": 92636419, "body": "Typically, files are allocated in units of disk blocks, which will usually be a power of two that&#39;s usually at least 512 (occasionally, for old floppy disks, as small as 128) bytes; on a modern hard disk, it&#39;ll often be a block size of 4096 or a bigger power of two. You cannot store less than one byte in a file; on disk, even a one byte file will occupy much more space than just a single byte.  The details depend on the file system type for the disk drive."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1539799379, "post_id": 52860903, "comment_id": 92636500, "body": "BTW: there are also files with <i>holes</i> in them. (but  they still cost an inode and maybe indirect blocks)"}, {"owner": {"reputation": 3306, "user_id": 1951463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZ8Ii.jpg?s=128&g=1", "display_name": "Terry Carmen", "link": "https://stackoverflow.com/users/1951463/terry-carmen"}, "edited": false, "score": 1, "creation_date": 1539799739, "post_id": 52860903, "comment_id": 92636680, "body": "0 byte files are quite common. It is not possible to have a file that is more thna 0 bytes and less than 1 byte"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1539799740, "post_id": 52860903, "comment_id": 92636681, "body": "I&#39;m voting to close this question as off-topic because it isn&#39;t about a <i>specific, practical problem</i> encountered in the course of software development. (A practical question -- f/e, how to efficiently store individual binary flags in bulk on limited storage -- might be better received; but it&#39;s hard to see a practical use for the answer to a question looking only at file size as such and ignoring metadata -- inodes, directory entries, etc)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3306, "user_id": 1951463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZ8Ii.jpg?s=128&g=1", "display_name": "Terry Carmen", "link": "https://stackoverflow.com/users/1951463/terry-carmen"}, "edited": false, "score": 0, "creation_date": 1539799924, "post_id": 52860903, "comment_id": 92636760, "body": "@TerryCarmen: even if the data for a file is zero bytes long, there are no file systems where the metadata is zero bytes long too.  There&#39;s an element of cheating there \u2014 the question doesn&#39;t delve into such details."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1539800108, "post_id": 52860903, "comment_id": 92636852, "body": "...to expand on that, see <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a> -- <b>and</b>ed into the other requirements is that something be a (1) practical, (2) answerable, (3) problem, and also be (4) unique to software development. I&#39;d argue that this fails on criteria (1) and (3): Ignoring metadata makes it impractical; and I don&#39;t see a problem (which an answer to the question would solve) stated at all."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1539805437, "post_id": 52860903, "comment_id": 92639336, "body": "Multics let you specify the size of a file in bits, but I think i/o was still done in round multiples of pages (1024 36-bit words)."}], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 3, "creation_date": 1539800109, "post_id": 52861079, "comment_id": 92636855, "body": "in C land (OP refers to read, write, fread, fwrite) the file IO operations are defined in terms of bytes. The counts read and write are integers and the smallest unit is byte. Ie the POSIX abstraction of a file is a stream of bytes. (A byte may not be 8 bits though)"}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1539800384, "post_id": 52861079, "comment_id": 92636993, "body": "@pm100: Yes, but POSIX extends the standard C library in multiple ways, and every modern Unix-like OS extends SYS-V in multiple ways. You can (in theory) have a program written in C (using extension/s) running on a &quot;certified Unix&quot; operating system (not just &quot;Unix-like&quot;) that provides the ability to read/write bits from files."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1539815886, "post_id": 52861079, "comment_id": 92643359, "body": "He means that no OS has ever had a smaller-than-1-byte unit for file length; i.e., you can&#39;t have an 11-bit long file. Certainly OSs/FSs can be built to have more than one file per disk block: ReiserFS on Linux did it."}], "tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 3, "last_activity_date": 1539799559, "creation_date": 1539799559, "answer_id": 52861079, "question_id": 52860903, "link": "https://stackoverflow.com/questions/52860903/what-is-the-least-memory-usage-for-a-binary-file-on-unix-like-os/52861079#52861079", "title": "What is the least memory usage for a binary file on UNIX-like OS?", "body": "<blockquote>\n  <p>Is it possible to have a file on the hard disk smaller than one byte, or is possible to have a file which dimension is not a multiple of Byte?</p>\n</blockquote>\n\n<p>Yes, in theory this is entirely possible. \"Files\" are an abstraction and nothing prevents the existence of an OS that has different limitations or a completely different abstraction for \"files\". In fact, the minimum unit supported by hardware is typically a block of many bytes (e.g. a 512 byte sector) and the OS is already providing \"smaller than minimum size supported by hardware\" abstractions.</p>\n\n<p>In practice, no operating system has ever supported this; and it's hard to see a use case for it (so it's unlikely that any operating system will support it in future).</p>\n"}], "owner": {"reputation": 1, "user_id": 10520048, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CJMxjDEXZeM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVaczJdPeptDreD9to1KIjcb0py6Q/mo/photo.jpg?sz=128", "display_name": "clementefnc", "link": "https://stackoverflow.com/users/10520048/clementefnc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539800867, "creation_date": 1539798858, "last_edit_date": 1539800867, "question_id": 52860903, "link": "https://stackoverflow.com/questions/52860903/what-is-the-least-memory-usage-for-a-binary-file-on-unix-like-os", "title": "What is the least memory usage for a binary file on UNIX-like OS?", "body": "<p>I'm actually attending an operating system course at university.\nThe professor has told us about fread(), fwrite() ... C functions and read(), write() ... system calls.\nMy doubt became when I had to define the block's size and the number of blocks. As the documentation says this functions return the exact number of blocks red or written.\nSo my question is: is it possible to have a file on the hard disk smaller than one byte, or is possible to have a file which dimension is not a multiple of Byte?</p>\n\n<p>Thank you in advance.</p>\n\n<p>EDIT: as someone suggested I've not posted a practical example. This is the exercise I'm working on. It's just a program that clones a file\n<a href=\"https://gitlab.com/clementefnc/laboratori_so/blob/master/Lab01/Es4/Es4p4.c\" rel=\"nofollow noreferrer\">https://gitlab.com/clementefnc/laboratori_so/blob/master/Lab01/Es4/Es4p4.c</a></p>\n"}, {"tags": ["java", "c", "java-native-interface", "native"], "comments": [{"owner": {"reputation": 800, "user_id": 7571925, "user_type": "registered", "profile_image": "https://graph.facebook.com/812564295544843/picture?type=large", "display_name": "Blake", "link": "https://stackoverflow.com/users/7571925/blake"}, "edited": false, "score": 0, "creation_date": 1539798872, "post_id": 52860819, "comment_id": 92636270, "body": "Here is a <a href=\"http://www.ntu.edu.sg/home/ehchua/programming/java/javanativeinterface.html\" rel=\"nofollow noreferrer\">tutorial</a>"}, {"owner": {"reputation": 366, "user_id": 3553327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rA70k.jpg?s=128&g=1", "display_name": "Dileepa Rajapaksa", "link": "https://stackoverflow.com/users/3553327/dileepa-rajapaksa"}, "reply_to_user": {"reputation": 800, "user_id": 7571925, "user_type": "registered", "profile_image": "https://graph.facebook.com/812564295544843/picture?type=large", "display_name": "Blake", "link": "https://stackoverflow.com/users/7571925/blake"}, "edited": false, "score": 0, "creation_date": 1539798991, "post_id": 52860819, "comment_id": 92636323, "body": "@Blake I went through this but there is no any example of accessing a generic type list... Thanks anyway !"}, {"owner": {"reputation": 800, "user_id": 7571925, "user_type": "registered", "profile_image": "https://graph.facebook.com/812564295544843/picture?type=large", "display_name": "Blake", "link": "https://stackoverflow.com/users/7571925/blake"}, "edited": false, "score": 0, "creation_date": 1539799384, "post_id": 52860819, "comment_id": 92636503, "body": "Ah I see your question is specifically about passing the <code>List</code> argument from one place to the other. I don&#39;t know how to do it with a <code>List</code> specifically; it might be easier to proxy it through an array. See <a href=\"https://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html\" rel=\"nofollow noreferrer\">this</a> guide."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1540435657, "post_id": 52860819, "comment_id": 92867534, "body": "It would be far easier to format the desired text output into a string ending in &#39;\\0&#39;, get the bytes with the native character encoding, pass the byte array to JNI and treat it as a native string. Tip: if your native method has an appropriate public signature, consider Converting it to a Java method that pre- and post-processes for private methods that would be simpler to implement in JNI."}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 3553327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rA70k.jpg?s=128&g=1", "display_name": "Dileepa Rajapaksa", "link": "https://stackoverflow.com/users/3553327/dileepa-rajapaksa"}, "edited": false, "score": 0, "creation_date": 1539805648, "post_id": 52861475, "comment_id": 92639440, "body": "Thanks for this, but i really don&#39;t know how to do it since I&#39;m a beginner for JNI"}], "tags": [], "owner": {"reputation": 64505, "user_id": 413337, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/783783f968e84cf5047544e9a0f3ccf4?s=128&d=identicon&r=PG", "display_name": "Codo", "link": "https://stackoverflow.com/users/413337/codo"}, "is_accepted": false, "score": 0, "last_activity_date": 1539801188, "creation_date": 1539801188, "answer_id": 52861475, "question_id": 52860819, "link": "https://stackoverflow.com/questions/52860819/passing-java-arryliststring-to-jni-c-function-and-print-the-list-in-c/52861475#52861475", "title": "Passing Java ArryList&lt;String&gt; to JNI C function and print the list in C", "body": "<p>Java has <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/genTypes.html\" rel=\"nofollow noreferrer\">Type Erasure</a>. So <code>List&lt;String&gt;</code> becomes <code>List</code> in the compiled code.</p>\n\n<p>So what you are really looking for is to implement the below Java calls using JNI:</p>\n\n<pre><code>jint size = list.size();\nfor (jint i = 0; i &lt; size; i++) {\n    jobject elem = list.get(i);\n    jstring str = (jstring)elem;\n    ... print str ...\n}\n</code></pre>\n\n<p>In the above C code, <code>list.size()</code> and <code>list.get()</code> must be replaced with calls of <code>GetMethodID</code>, <code>CallIntMethod</code> and <code>CallObjectMethod</code>. The string can be retrieved from <code>str</code> using <code>GetStringChars</code> or <code>GetStringUTFLength</code>. And some memory management is needed: <code>ReleaseXXX</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 366, "user_id": 3553327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rA70k.jpg?s=128&g=1", "display_name": "Dileepa Rajapaksa", "link": "https://stackoverflow.com/users/3553327/dileepa-rajapaksa"}, "is_accepted": true, "score": 1, "last_activity_date": 1540459463, "creation_date": 1540459463, "answer_id": 52985827, "question_id": 52860819, "link": "https://stackoverflow.com/questions/52860819/passing-java-arryliststring-to-jni-c-function-and-print-the-list-in-c/52985827#52985827", "title": "Passing Java ArryList&lt;String&gt; to JNI C function and print the list in C", "body": "<p>I found the solution for this : </p>\n\n<pre><code>JNIEXPORT void JNICALL Java_ConsoleIO_printList(JNIEnv *env, jclass cls, jobject obj)\n{\n\n    jclass listClass = (*env)-&gt;GetObjectClass(env,obj);\n\n    jmethodID sizeMethod = (*env)-&gt;(env,listClass,\"size\",\"()I\");\n    jmethodID getMethod = (*env)-&gt;GetMethodID(env,listClass,\"get\",\"(I)Ljava/lang/Object\");\n\n    jint size =  (*env)-&gt;CallIntMethod(env,sizeMethod);\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 3553327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rA70k.jpg?s=128&g=1", "display_name": "Dileepa Rajapaksa", "link": "https://stackoverflow.com/users/3553327/dileepa-rajapaksa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 52985827, "answer_count": 2, "score": 2, "last_activity_date": 1540459463, "creation_date": 1539798497, "question_id": 52860819, "link": "https://stackoverflow.com/questions/52860819/passing-java-arryliststring-to-jni-c-function-and-print-the-list-in-c", "title": "Passing Java ArryList&lt;String&gt; to JNI C function and print the list in C", "body": "<p>I have the following native method in Java : </p>\n\n<pre><code>public class ConsoleIO\n{\n\n    public native static void printList(List&lt;String&gt; list);\n\n   ......\n}\n</code></pre>\n\n<p>and the corresponding C implementation with JNI is the following :</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_ConsoleIO_printList(JNIEnv *env, jclass cls, jobject obj)\n{\n\n\n\n}\n</code></pre>\n\n<p>Now I need to pass a list of Strings from java to the printList(List list) method and loop through it from the above C implementation and print them in the console from the C function. </p>\n\n<p>I know that there is no C representation of this List type, but I need to know that how I can do access this List of strings in C and print them out in C itself? </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "windows", "winapi", "networking", "winsock2"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1539802545, "post_id": 52860798, "comment_id": 92638040, "body": "<a href=\"https://stackoverflow.com/a/4623409/3975177\">stackoverflow.com/a/4623409/3975177</a> maybe?"}, {"owner": {"reputation": 932, "user_id": 1721186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/191bbec6bbd670cff4888c4f9d8e7ca6?s=128&d=identicon&r=PG", "display_name": "Steve Valliere", "link": "https://stackoverflow.com/users/1721186/steve-valliere"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539802940, "post_id": 52860798, "comment_id": 92638232, "body": "That might work.  It doesn&#39;t specifically say that the initial setting of an address is a change and my assumptions about Microsoft doing the logical thing just about always get me in trouble!  (smile)  Thanks, though, I&#39;ll see about getting something set up to test it."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1539823174, "post_id": 52860798, "comment_id": 92644919, "body": "may be you need <a href=\"https://docs.microsoft.com/en-us/previous-versions/windows/desktop/mpc/network-awareness\" rel=\"nofollow noreferrer\">Network Awareness</a>"}, {"owner": {"reputation": 932, "user_id": 1721186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/191bbec6bbd670cff4888c4f9d8e7ca6?s=128&d=identicon&r=PG", "display_name": "Steve Valliere", "link": "https://stackoverflow.com/users/1721186/steve-valliere"}, "edited": false, "score": 0, "creation_date": 1539866160, "post_id": 52860798, "comment_id": 92661723, "body": "&quot;Network Awareness&quot; sound good, but after reading about it, I don&#39;t think it is what I need.  I didn&#39;t mention this before, but our networks are completely isolated from the internet and are often &quot;island&quot; networks with NO external connectivity.  We&#39;re trying to determine when it is OK to start using winsock functionality in order to communicate within our local, private, isolated subnet only."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1540156344, "post_id": 52860798, "comment_id": 92749322, "body": "i think you need <code>CoCreateInstance</code> for <code>NetworkListManager</code> and register your implementation of <code>INetworkListManagerEvents</code>. when any change will be in network status you got <code>ConnectivityChanged</code> call with <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/netlistmgr/ne-netlistmgr-nlm_connectivity\" rel=\"nofollow noreferrer\"><code>NLM_CONNECTIVITY</code></a>. i be how minimum try this for see result of calls. implementation for this (vista+) simply enough"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1540157059, "post_id": 52860798, "comment_id": 92749493, "body": "also may be will be interesting this - <a href=\"https://chromium.googlesource.com/chromium/src/net/+/master/base/network_change_notifier_win.cc\" rel=\"nofollow noreferrer\">network_change_notifier_win.cc</a>"}, {"owner": {"reputation": 932, "user_id": 1721186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/191bbec6bbd670cff4888c4f9d8e7ca6?s=128&d=identicon&r=PG", "display_name": "Steve Valliere", "link": "https://stackoverflow.com/users/1721186/steve-valliere"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1540215119, "post_id": 52860798, "comment_id": 92770401, "body": "@Swordfish:  I built Microsoft&#39;s example from the link and tried it in the startup group on a machine with auto-logon enabled and it doesn&#39;t work.  Apparently, just becoming available is NOT a <i>change</i> to the network address table."}, {"owner": {"reputation": 932, "user_id": 1721186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/191bbec6bbd670cff4888c4f9d8e7ca6?s=128&d=identicon&r=PG", "display_name": "Steve Valliere", "link": "https://stackoverflow.com/users/1721186/steve-valliere"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1540215617, "post_id": 52860798, "comment_id": 92770758, "body": "also @Swordfish:  (I forgot to consider that the function might also fail if the network is already available.  Either way, it didn&#39;t work for me."}], "owner": {"reputation": 932, "user_id": 1721186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/191bbec6bbd670cff4888c4f9d8e7ca6?s=128&d=identicon&r=PG", "display_name": "Steve Valliere", "link": "https://stackoverflow.com/users/1721186/steve-valliere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1539798441, "creation_date": 1539798441, "question_id": 52860798, "link": "https://stackoverflow.com/questions/52860798/how-to-wait-for-windows-tcp-network-at-startup", "title": "How to wait for Windows TCP Network at startup?", "body": "<p>I know this should be obvious, but I have found far too many DIFFERENT answers and the ones I've tried all fail (sometimes or all the time), so...</p>\n\n<p>We are working on a service and some applications that run at startup on a Windows 10 computer that performs an automatic login.  The service and applications require Windows sockets for TCP, UDP and Multicast.  Most of the time, our programs fail because they get errors about the network not being ready and such.  Currently, we work around this by just adding a dumb, fixed length delay time before attempting to start, but we would prefer to start as soon at the network is ready to be used.</p>\n\n<p>Our most recent attempt was to wait on the LanmanWorkstation (Workstation) service, but that generally reports it is running/ready before the sockets functions will succeed.  I have also seen suggestions to use LanmanServer (Server) or Netman (Network Connections) or maybe even Tcpip (TCP/IP Protocol Driver), but I cannot find anything definitive.  One would think this is a common requirement, so why would Microsoft make the info so difficult to find?</p>\n\n<p>Ahem.  Does any know a definitive method for a service or application to wait until winsock functions will succeed before using them?  Short of a spin wait on a failing winsock function, of course!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 6, "creation_date": 1539798234, "post_id": 52860728, "comment_id": 92635955, "body": "What do you think is the difference between <code>float</code> and <code>int</code>?"}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1539798326, "post_id": 52860728, "comment_id": 92636001, "body": "I still have to re-read floating points today, but if my memory isn&#39;t failing me then it&#39;s either the number of bytes used, or the signedness of float compared to int?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 6, "creation_date": 1539798409, "post_id": 52860728, "comment_id": 92636036, "body": "Well, <code>float</code> and <code>int</code> use the same number of bytes, and have &quot;the same signedness&quot;, so... no.  It sounds like you have no idea what <code>float</code> is, so I think that might be the real question here."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1539798499, "post_id": 52860728, "comment_id": 92636084, "body": "I suppose that is true, thank you for your time. However, I have one more question for you. Say we have the SAME thing, but our variable is an integer called I? Would my thesis be correct?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 2, "creation_date": 1539798612, "post_id": 52860728, "comment_id": 92636135, "body": "Why not just grab a compiler and check?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1539798814, "post_id": 52860728, "comment_id": 92636239, "body": "Signed integer overflow has undefined behavior. Unsigned integer overflow wraps around. (Signed integer overflow <i>typically</i> wraps around, but don&#39;t depend on that; compiler optimizations can do surprising things.)"}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1539798997, "post_id": 52860728, "comment_id": 92636327, "body": "@JETM Hey, I was right! :D"}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1539799124, "post_id": 52860728, "comment_id": 92636381, "body": "@KeithThompson Right, but suppose its not overflowing and its just over the halfway mark? As long as we don&#39;t yield a number larger than twice our high order bits, then we shouldn&#39;t get the accursed signed overflow, right? Unsigned integer overflow would just do a modulo to reduce the values based on what I have read. Like if we did x &gt;&gt; 33 it would just do x&gt;&gt; 1 on a 32 bit machine, yes?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1539799238, "post_id": 52860728, "comment_id": 92636430, "body": "<a href=\"https://stackoverflow.com/questions/10108053/ranges-of-floating-point-datatype-in-c\" title=\"ranges of floating point datatype in c\">stackoverflow.com/questions/10108053/&hellip;</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1539799343, "post_id": 52860728, "comment_id": 92636477, "body": "and <a href=\"http://www.ntu.edu.sg/home/ehchua/programming/java/datarepresentation.html\" rel=\"nofollow noreferrer\">ntu.edu.sg/home/ehchua/programming/java/datarepresentation.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 1, "creation_date": 1539799422, "post_id": 52860728, "comment_id": 92636529, "body": "<a href=\"https://floating-point-gui.de/formats/fp/\" rel=\"nofollow noreferrer\">floating-point-gui.de/formats/fp</a> is a nice, easy to understand description of how binary floating-point works."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 4, "creation_date": 1539800312, "post_id": 52860728, "comment_id": 92636964, "body": "@The_Senate: For type <code>int</code>, any operation whose result is greater than <code>INT_MAX</code> or less than <code>INT_MIN</code> is an overflow, and has undefined behavior. A shift whose right operand is greater than or equal to the width of the (promoted) left operand, or is negative, has undefined behavior. If <code>int</code> is 32 bits, <code>1&gt;&gt;33</code> has undefined behavior."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1539801027, "post_id": 52860728, "comment_id": 92637306, "body": "@KeithThompson are you absolutely sure about that? I ask because in this systems programming book, the C language when doing something like x &gt;&gt; 34 or x &gt;&gt; 40, the values end up modulo-ing and reducing to a value based on 32 bit (This is on 32 bit machines, and this is the book&#39;s words, not mine.)"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1539801442, "post_id": 52860728, "comment_id": 92637493, "body": "@The_Senate Yes. From section 6.5.7p3 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> regarding bitwise shift operators: <i>&quot;The integer promotions are performed on each of the operands.  The type of the result is that  of  the  promoted  left  operand.   <b>If  the  value  of  the  right  operand  is  negative  or  is greater than or equal to the width of the promoted left operand, the behavior is undefined.</b> &quot;</i>"}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1539802098, "post_id": 52860728, "comment_id": 92637831, "body": "@dbush If you&#39;re correct, then I hope the writers of my book fixed that in the third edition."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1539803367, "post_id": 52860728, "comment_id": 92638408, "body": "@The_Senate Yes, I&#39;m absolutely sure. The behavior is defined by the ISO C standard. You can read the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">N1570</a> draft. Bitwise shift operators are covered in section 6.5.7. &quot;Undefined behavior&quot; means that the C standard places no requirements on the behavior. Anything that any implementation does (including the behavior you describe) is consistent with that. If your book describes what one implementation does, it may be correct. What&#39;s the book?"}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1539804515, "post_id": 52860728, "comment_id": 92638935, "body": "@SteveSummit Steve, I don&#39;t believe in appeal to authority by grace of Occam&#39;s Razor. I question everyone and everything, period. I encourage you to do the same."}, {"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1539804558, "post_id": 52860728, "comment_id": 92638957, "body": "@KeithThompson Computer Systems a programmers perspective, 2nd edition."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1539805145, "post_id": 52860728, "comment_id": 92639220, "body": "@SteveSummit: I see the described modulo behavior using gcc on Linux x86_64.  For example, <code>1U &lt;&lt; 33 == 2</code>. (<code>int</code> is 32 bits.) This is, of course, one of the infinitely many possible results of undefined behavior."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1539799209, "post_id": 52860901, "comment_id": 92636426, "body": "So, floating points are always greater than 0 and don&#39;t &quot;wrap&quot; so to speak, can they be reduced in any way? What keeps floats in check if they just keep growing exponentially?"}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 2, "creation_date": 1539799272, "post_id": 52860901, "comment_id": 92636440, "body": "@The_Senate: You need to read up on the IEEE-754 floating point standard. But the short answer is that floats can be negative, and an &quot;overflowed&quot; float becomes infinity."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "edited": false, "score": 0, "creation_date": 1539799326, "post_id": 52860901, "comment_id": 92636462, "body": "@The_Senate No, they&#39;re not always greater than 0.  There&#39;s a separate sign bit for that."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539800214, "post_id": 52860901, "comment_id": 92636910, "body": "Hmm Interesting choice of 50,000*50,000 as that is near <code>float</code> precision limits."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 6, "last_activity_date": 1539800946, "last_edit_date": 1539800946, "creation_date": 1539798851, "answer_id": 52860901, "question_id": 52860728, "link": "https://stackoverflow.com/questions/52860728/if-i-have-a-float-that-f-50-000-and-then-i-do-ff-is-the-value-returned-a-ne/52860901#52860901", "title": "If I have a float that f = 50,000, and then i do f*f, is the value returned a negative?", "body": "<p>Unlike the <code>int</code> type, which is typically represented as a two's complement number, a <code>float</code> is a <em>floating point type</em>, which means it stores values using a mantissa and an exponent.  This means that the typical wrapping behavior seen with signed integer types doesn't apply to floating point types.</p>\n\n<p>In the case of 2,500,000,000, this will actually get stored as 0x1.2A05F2 x 2<sup>31</sup>.</p>\n\n<p>Floating point types are typically stored using <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754 floating point format</a>.  In the case of a single precision floating point (which a <code>float</code> typically is), it has 1 sign bit, 8 exponent bits, and 24 mantissa bits (with 23 bits stored, as the high order \"1\" bit is implied).  </p>\n\n<p>While this format can't \"wrap\" from positive to negative, it <em>is</em> subject to 2 things:</p>\n\n<ul>\n<li>Loss of precision</li>\n<li>Overflow of the exponent</li>\n</ul>\n\n<p>As an example of precision loss, let's use a decimal floating point format with a 3 digit mantissa and a 2 digit exponent.  If we multiply 2.34 x 10<sup>10</sup> by 6.78 x 10<sup>10</sup>, you get 1.58652 x 10<sup>21</sup>, but because of the 3 digit precision it gets truncated to 1.58 x 10<sup>21</sup>.  So we lose the least significant digits.</p>\n\n<p>To illustrate exponent overflow, suppose we were to multiply 2.00 x 10<sup>60</sup> by 3.00 x 10<sup>50</sup>.  You'd get 6.00 x 10<sup>110</sup>.  But because the maximum value of an exponent is 99, this is an overflow. IEEE 754 has a special notation for infinity which it uses in the case of overflow where it sets the mantissa to all 0 bits and the exponent to all 1 bits, and the sign bit can be used to distinguish positive infinity and negative infinity.</p>\n"}], "owner": {"reputation": 139, "user_id": 10149813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pygq2.jpg?s=128&g=1", "display_name": "The_Senate", "link": "https://stackoverflow.com/users/10149813/the-senate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1539800946, "creation_date": 1539798183, "question_id": 52860728, "link": "https://stackoverflow.com/questions/52860728/if-i-have-a-float-that-f-50-000-and-then-i-do-ff-is-the-value-returned-a-ne", "title": "If I have a float that f = 50,000, and then i do f*f, is the value returned a negative?", "body": "<p>So, It's almost time for midterms and the professor gave us some sample questions. </p>\n\n<p><strong>What I THINK the answer is:</strong></p>\n\n<p>We are given a float that is f=50000.</p>\n\n<p>if we do f*f we get 2,500,000,000.</p>\n\n<p>Now, I'm assuming we're working with a 32 bit machine as that is what we have studied so far. So, if that Is the case then 2,500,000,000 32 bit float not being declared unsigned is considered signed by default. Since 2,500,000,000 is a little over half of the 32 bit representation of 4294967296, and it is signed, we would have a negative value returned, so the statement f * f &lt; 0 would be true, right? </p>\n\n<p>I've only been studying systems programming for 4 weeks, PLEASE correct me if I am wrong here. </p>\n"}, {"tags": ["c", "arrays", "mode"], "answers": [{"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": true, "score": 1, "last_activity_date": 1539801479, "creation_date": 1539801479, "answer_id": 52861543, "question_id": 52860716, "link": "https://stackoverflow.com/questions/52860716/how-can-i-program-for-mode-if-there-are-multiple-modes/52861543#52861543", "title": "How can I program for mode if there are multiple modes?", "body": "<p>You'd want to:</p>\n\n<p>a) Have something that keeps track of how often each value occurred. You're already using an array of \"occurrence counts\" for this.</p>\n\n<p>b) Find the highest \"occurrence count\"</p>\n\n<p>c) Find all values that share the highest \"occurrence count\"</p>\n\n<p>For your code, this can mostly be done by replacing:</p>\n\n<pre><code>  if (c[x]&gt;=mode)\n      {mode=x;}\n</code></pre>\n\n<p>..with something more like:</p>\n\n<pre><code>  if (c[x] &gt; highest)\n      {highest = c[x];}\n</code></pre>\n\n<p>..and then doing something like this at the end:</p>\n\n<pre><code>    printf(\"the mode/s are:\");\n\n    for(i = 0; i &lt;= 100; i++) {\n        if(c[i] == highest) {\n            printf(\" %d\", i);\n        }\n    }\n\n    printf(\"\\n\");\n</code></pre>\n"}], "owner": {"reputation": 398, "user_id": 10412159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7782a6cbe4dca019ebe564903960341a?s=128&d=identicon&r=PG&f=1", "display_name": "larn", "link": "https://stackoverflow.com/users/10412159/larn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 52861543, "answer_count": 1, "score": 1, "last_activity_date": 1539801479, "creation_date": 1539798148, "question_id": 52860716, "link": "https://stackoverflow.com/questions/52860716/how-can-i-program-for-mode-if-there-are-multiple-modes", "title": "How can I program for mode if there are multiple modes?", "body": "<p>I am able to write a program to find the mode provided there is only one mode. However, I'm not sure how to alter my code so it can function properly when there is more than one mode. </p>\n\n<p>Here is what I have! Any advice on how to fix my code would be appreciated. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main ()\n\n{\n  int x, i, c[101], mode;\n\n  printf(\"please enter test scores between 0 and 100\\n\");\n\n  i = 0;\n  mode = 0; \n\n  while (i&lt;=100) \n    {\n      c[i]=0;\n      i=i+1;\n    }\n\n  scanf(\"%d\", &amp;x);\n\n  while ((x&gt;=0) &amp;&amp; (x&lt;=100)) \n    {\n      c[x]=c[x]+1;\n\n      if (c[x]&gt;=mode)\n    {mode=x;}\n\n      scanf(\"%d\", &amp;x);\n    }\n\n printf(\"the mode is %d\\n\", mode);\n\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539795247, "post_id": 52859845, "comment_id": 92634558, "body": "Note: <code>return id1 - id2;</code> can overflow and cause problems.  <code>return (id1 &gt; id2) - (id1 &lt; id2);</code> is an idiomatic alternative."}, {"owner": {"reputation": 67, "user_id": 7977331, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1572305982801175/picture?type=large", "display_name": "Lakshya Munjal", "link": "https://stackoverflow.com/users/7977331/lakshya-munjal"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539945467, "post_id": 52859845, "comment_id": 92693940, "body": "how can return id1-id2 can cause problems ? I don&#39;t understand that"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539973465, "post_id": 52859845, "comment_id": 92708426, "body": "With INT_MIN - 1, what should the result be?"}, {"owner": {"reputation": 67, "user_id": 7977331, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1572305982801175/picture?type=large", "display_name": "Lakshya Munjal", "link": "https://stackoverflow.com/users/7977331/lakshya-munjal"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540119630, "post_id": 52859845, "comment_id": 92739252, "body": "overflow.. the same thing applies to INT_MAX + 1 ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540136323, "post_id": 52859845, "comment_id": 92743846, "body": "Lakshya Munjal, So rather than have the possibility of overflow, <code>return id1 - id2;</code> use <a href=\"https://stackoverflow.com/questions/52859845/bsearch-function-and-structure-in-c?noredirect=1#comment92634558_52859845\">this</a> to have a non-overflow possible (&quot;no problem&quot;)  code."}], "answers": [{"tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": false, "score": 1, "last_activity_date": 1539795163, "creation_date": 1539795163, "answer_id": 52859953, "question_id": 52859845, "link": "https://stackoverflow.com/questions/52859845/bsearch-function-and-structure-in-c/52859953#52859953", "title": "bsearch function and structure in C", "body": "<p><a href=\"http://man7.org/linux/man-pages/man3/bsearch.3.html\" rel=\"nofollow noreferrer\">The Man Page for <code>bsearch</code></a> provides a decent example.  You must use the same comparison function for both <code>qsort</code> and <code>bsearch</code>, as <code>bsearch</code> assumes a sorted list and uses its comparison function to decide the direction of the next search in its iterative searching process.  </p>\n\n<p>At first glance, I don't think you need to redefine your comparison function.  You should be able to use <code>compare</code> for both <code>qsort</code> and <code>bsearch</code>, and in fact, these functions <em>must</em> be equivalent if <code>bsearch</code> is going to successfully search what <code>qsort</code> ordered.  </p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1539798092, "last_edit_date": 1539798092, "creation_date": 1539795578, "answer_id": 52860078, "question_id": 52859845, "link": "https://stackoverflow.com/questions/52859845/bsearch-function-and-structure-in-c/52860078#52860078", "title": "bsearch function and structure in C", "body": "<p>Normally, you use the same function for sorting and searching \u2014 it guarantees that the search uses the same criteria as the sorting.</p>\n\n<p>There are differences between <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/bsearch.html\" rel=\"nofollow noreferrer\"><code>bsearch()</code></a> and <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/qsort.html\" rel=\"nofollow noreferrer\"><code>qsort()</code></a> in the way that arguments are passed to the comparator, and occasionally you can exploit the difference.  You might not have a fully populated structure to pass as the key to the search, for example, but the fields used for sorting the data should be present in the key too.</p>\n\n<p>Until you have a concrete use case that requires such shenanigans, use the same comparator for both sorting and searching.</p>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "is_accepted": true, "score": 2, "last_activity_date": 1539796089, "creation_date": 1539796089, "answer_id": 52860211, "question_id": 52859845, "link": "https://stackoverflow.com/questions/52859845/bsearch-function-and-structure-in-c/52860211#52860211", "title": "bsearch function and structure in C", "body": "<p>Use same compare function for both <code>bsearch()</code> and <code>qsort()</code>, but <strong>remember that the <code>key</code> for <code>bsearch()</code> should be as <code>struct student</code></strong>. So your code will be like this:</p>\n\n<pre><code>struct student student_key;    // roll number to be searched\n\nprintf(\"Enter roll number whose record wants to be searched: \");\nscanf(\"%d\", &amp;(student_key.id));\n\nstruct student *res = (struct student *)bsearch(&amp;student_key, S, size, sizeof(struct student), compare);\n</code></pre>\n\n<p>and final thing. <strong>Never use <code>gets()</code>. Always use <code>fgets()</code> at least.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1539799525, "creation_date": 1539799525, "answer_id": 52861070, "question_id": 52859845, "link": "https://stackoverflow.com/questions/52859845/bsearch-function-and-structure-in-c/52861070#52861070", "title": "bsearch function and structure in C", "body": "<p>Code can use the same compare function as used in <code>qsort()</code> by first forming a <code>struct student</code> and use its <code>.id</code> member.</p>\n\n<pre><code>struct student dummy;\ndummy.id = key;\nstruct student *res = bsearch(&amp;dummy, S, SIZE, sizeof S[0], compare1);\n</code></pre>\n\n<hr>\n\n<p>Alternatively code could use a different compare and use the <code>int key</code> directly.</p>\n\n<pre><code>int bsearch_compare(const void* key_ptr, const void* element_ptr){\n  int id1 = *((const int *)key_ptr);\n  int id2 = ((const struct student *)element_ptr)-&gt;id;\n  return id1 - id2;\n}\n\nstruct student *res = bsearch(&amp;key, S, SIZE, sizeof S[0], bsearch_compare);\n</code></pre>\n\n<hr>\n\n<p>For correct full range <code>int</code> functionality, change in both compare functions:</p>\n\n<pre><code>  // return id1 - id2;\n  return (id1 &gt; id2) - (id1 &lt; id2);\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 7977331, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1572305982801175/picture?type=large", "display_name": "Lakshya Munjal", "link": "https://stackoverflow.com/users/7977331/lakshya-munjal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 52860211, "answer_count": 4, "score": 0, "last_activity_date": 1539799525, "creation_date": 1539794763, "question_id": 52859845, "link": "https://stackoverflow.com/questions/52859845/bsearch-function-and-structure-in-c", "title": "bsearch function and structure in C", "body": "<p>I am using an array of structures to store the information of n students. This array of structures is first sorted using qsort() function and then a roll number is searched in the sorted array of structures using bsearch() function. What code should i write for comparator function of bsearch() ?</p>\n\n<p><strong>Source Code:</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define SIZE 15\n\n// search for a structure in array of structures using qsort() and bsearch()\n\nstruct student{\n    int id;\n    char name[30];\n}S[SIZE];\n\nint compare(const void* S, const void* T){\n    int id1 = ((struct student *)S) -&gt; id;\n    int id2 = ((struct student *)T) -&gt; id;\n\n    return id1 - id2;\n}\n\nstruct student comapre1(const void* S, const void* T){\n    // what code should i include here\n}\n\nvoid main(){\n    int size, i;\n    printf(\"How many students are there ?: \");\n    scanf(\"%d\", &amp;size);\n    printf(\"----------------------------------------------------------\\n\");\n\n    for(i = 0 ; i &lt; size ; i++){\n        printf(\"Student %d\\nEnter roll number: \",i+1);\n        scanf(\"%d\", &amp;S[i].id);\n        while(getchar() != '\\n');\n        printf(\"Enter name: \");\n        gets(S[i].name);\n        printf(\"----------------------------------------------------------\\n\");\n    }\n\n    qsort(S, SIZE, sizeof(struct student), compare);        // sorting array of structues\n\n    int key;    // roll number to be searched\n\n    printf(\"Enter roll number whose record wants to be searched: \");\n    scanf(\"%d\", &amp;key);\n\n    struct student *res = bsearch(&amp;key, S, SIZE, sizeof(struct student), compare1);\n\n    if(res != NULL){    \n        // display name and id of record found\n    }else\n        printf(\"not found\");\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "x86-64"], "comments": [{"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 2, "creation_date": 1539794151, "post_id": 52859599, "comment_id": 92634057, "body": "it&#39;s not because it happened to work on a machine that it would always work... here you clearly had &quot;luck&quot; that gcc saw that your structure can fit a register and can be set in one 64bit operation. This does not mean it would always be the case on every arch nor every struct."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1539794624, "post_id": 52859599, "comment_id": 92634274, "body": "This example was written a long time ago (in the history of computers), when machines with 64-bit load and store were much less common than they are today.  Fatih, would you mind filing a bug report on the glibc documentation (at <a href=\"https://sourceware.org/bugzilla/\" rel=\"nofollow noreferrer\">sourceware.org/bugzilla</a> ) so we remember to correct it?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1539796604, "post_id": 52859599, "comment_id": 92635192, "body": "By the way <code>movq</code> is only required to be atomic when it does not cross a cache line boundary, so just because it is used does not prove that the assignment is atomic now"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1539798006, "post_id": 52859599, "comment_id": 92635839, "body": "Notice that in <code>handler</code>, the two halves are loaded separately.  If another thread was writing the struct between reads, you could get tearing, but not from a signal handler in the same thread.  Also note that this code depends on being compiled without optimization, making every variable effectively <code>volatile</code>.  If you compile it with optimization, you get an empty infinite loop.  <a href=\"https://godbolt.org/z/d6V42Z\" rel=\"nofollow noreferrer\">godbolt.org/z/d6V42Z</a>.  Anyway, compile with <code>-m32 -mno-sse</code> to stop the compiler from using 64-bit stores for the assignment."}, {"owner": {"reputation": 35, "user_id": 10519643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0115526c8b8ff6c5d043b66b9c6ab041?s=128&d=identicon&r=PG&f=1", "display_name": "Fatih", "link": "https://stackoverflow.com/users/10519643/fatih"}, "edited": false, "score": 0, "creation_date": 1539812974, "post_id": 52859599, "comment_id": 92642518, "body": "Thnx for all the commentary. My question was more related to how it is possible that two ints can be loaded and stored within one instruction in the x86-64 architecture. It is indeed true that if you compile this for other (older) machines the bug/error will still occur.  Also zwol suggested to fill in a bug report. I would be happy to do this, but I do not get what this is for? Is the glibc documentation related to this example from GNU somehow?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1539857026, "post_id": 52859599, "comment_id": 92656682, "body": "The two ints are not just randomly in unrelated different memory locations, they are adjacent, which makes it possible to treat both of them together as a single entity in some sense. Similarly you could <code>memcpy</code> both of them together with a size of 8 which you may be more familiar with"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1539871983, "post_id": 52859599, "comment_id": 92665476, "body": "@Fatih You didn&#39;t say where on the &quot;website of GNU&quot; (by which I assume you mean <a href=\"https://www.gnu.org\" rel=\"nofollow noreferrer\">gnu.org</a>) you found this code, but I recognize it as the example code from &lt;<a href=\"https://www.gnu.org/software/libc/manual/html_node/Non_002datomic-Example.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/&hellip;</a>&gt;.  That page is part of the manual for the GNU C Library, &quot;glibc&quot; for short, and problems with that manual should be filed in the bug tracker I linked to earlier.  (I am an occasional contributor to glibc.)"}], "owner": {"reputation": 35, "user_id": 10519643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0115526c8b8ff6c5d043b66b9c6ab041?s=128&d=identicon&r=PG&f=1", "display_name": "Fatih", "link": "https://stackoverflow.com/users/10519643/fatih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539795667, "creation_date": 1539793831, "last_edit_date": 1539795667, "question_id": 52859599, "link": "https://stackoverflow.com/questions/52859599/problems-with-non-atomic-access-example-on-gnu-website", "title": "Problems with non-atomic access example on GNU website", "body": "<p>On the website of GNU there is a simple example available which is supposed to demonstrate the problems appearing with non-atomic access. The example contains a small mistake, they have forgotten <code>#include &lt;unistd.h&gt;</code>:</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nstruct two_words { int a, b; } memory;\n\nstatic struct two_words zeros = { 0, 0 }, ones = { 1, 1 };\n\nvoid handler(int signum)\n{\n   printf (\"%d,%d\\n\", memory.a, memory.b);\n   alarm (1);\n}\n\nint main (void)\n{\n   signal (SIGALRM, handler);\n   memory = zeros;\n   alarm (1);\n   while (1)\n     {\n    memory = zeros;\n    memory = ones;\n     }\n}\n</code></pre>\n\n<p>The idea is that the assignment <code>memory = zeros;</code> or the <code>memory = ones;</code> takes multiple cycles and thus the interrupt handler will be able to print \"0 1\" or \"1 0\" at some point in time.</p>\n\n<p>However, interestingly for the x86-64 architecture, the assembly code produced by the gcc compiler looks as follows. It appears that the assignment is done within one single cycle by the movq instruction:</p>\n\n<pre><code>    .file   \"interrupt_handler.c\"\n    .text\n    .comm   memory,8,8\n    .local  zeros\n    .comm   zeros,8,8\n    .data\n    .align 8\n    .type   ones, @object\n    .size   ones, 8\nones:\n    .long   1\n    .long   1\n    .section    .rodata\n.LC0:\n    .string \"%d,%d\\n\"\n    .text\n    .globl  handler\n    .type   handler, @function\nhandler:\n.LFB0:\n    .cfi_startproc\n    pushq   %rbp\n    .cfi_def_cfa_offset 16\n    .cfi_offset 6, -16\n    movq    %rsp, %rbp\n    .cfi_def_cfa_register 6\n    subq    $16, %rsp\n    movl    %edi, -4(%rbp)\n    movl    4+memory(%rip), %edx\n    movl    memory(%rip), %eax\n    movl    %eax, %esi\n    leaq    .LC0(%rip), %rdi\n    movl    $0, %eax\n    call    printf@PLT\n    movl    $1, %edi\n    call    alarm@PLT\n    nop\n    leave\n    .cfi_def_cfa 7, 8\n    ret\n    .cfi_endproc\n.LFE0:\n    .size   handler, .-handler\n    .globl  main\n    .type   main, @function\nmain:\n.LFB1:\n    .cfi_startproc\n    pushq   %rbp\n    .cfi_def_cfa_offset 16\n    .cfi_offset 6, -16\n    movq    %rsp, %rbp\n    .cfi_def_cfa_register 6\n    leaq    handler(%rip), %rsi\n    movl    $14, %edi\n    call    signal@PLT\n    movq    zeros(%rip), %rax\n    movq    %rax, memory(%rip)\n    movl    $1, %edi\n    call    alarm@PLT\n.L3:\n    movq    zeros(%rip), %rax\n    movq    %rax, memory(%rip)\n    movq    ones(%rip), %rax\n    movq    %rax, memory(%rip)\n    jmp .L3\n    .cfi_endproc\n.LFE1:\n    .size   main, .-main\n    .ident  \"GCC: (Ubuntu 7.3.0-16ubuntu3) 7.3.0\"\n    .section    .note.GNU-stack,\"\",@progbits\n</code></pre>\n\n<p>Can someone explain how it is possible that two different assignments are done within a single cycle? Because I would think that the assignment of two different ints has to happen to two different pieces of memory, but somehow it seems over here that they are written to the same place.</p>\n\n<p>This example changes when instead of int, I would use double. The while loop in assembly becomes:</p>\n\n<pre><code>.L3:\n    movq    zeros(%rip), %rax\n    movq    8+zeros(%rip), %rdx\n    movq    %rax, memory(%rip)\n    movq    %rdx, 8+memory(%rip)\n    movq    ones(%rip), %rax\n    movq    8+ones(%rip), %rdx\n    movq    %rax, memory(%rip)\n    movq    %rdx, 8+memory(%rip)\n    jmp .L3\n</code></pre>\n"}, {"tags": ["c", "libwebsockets"], "comments": [{"owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539794213, "post_id": 52859452, "comment_id": 92634076, "body": "Okay doing it @AjayBrahmakshatriya"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539794326, "post_id": 52859452, "comment_id": 92634134, "body": "Can you also specify how you built and installed the libwebsockets project?"}, {"owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539794757, "post_id": 52859452, "comment_id": 92634329, "body": "Edited @AjayBrahmakshatriya"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539795249, "post_id": 52859452, "comment_id": 92634559, "body": "the issue is that you are using MinGW&#39;s compiler which won&#39;t be able to pick the include files from <code>C:&#47;Program Files (x86)&#47;libsockets</code> (I also think it cannot use the binaries built for windows). You can build libwebsockets from source using the instructions <a href=\"https://github.com/warmcat/libwebsockets/blob/master/READMEs/README.build.md\" rel=\"nofollow noreferrer\">here</a>. You can follow the instructions from the section for MinGW. -- Search for &quot;@section cmwmgw Building on Windows (MinGW)&quot; on that page."}, {"owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539868598, "post_id": 52859452, "comment_id": 92663241, "body": "@AjayBrahmakshatriya I&#39;m trying your mentioned method. Can you make clear what to put in place of those two dots in command <code>cmake -G &quot;MSYS Makefiles&quot; -DCMAKE_INSTALL_PREFIX=C:&#47;MinGW ..</code>"}, {"owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539868669, "post_id": 52859452, "comment_id": 92663296, "body": "I have tried putting the source code directory of libwebsockets but it is not working. Can you make clear how to put this?"}, {"owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539868700, "post_id": 52859452, "comment_id": 92663322, "body": "I&#39;m running commands from below mentioned directory. <code>CMake Error: The source directory &quot;C:&#47;Users&#47;pro12&#47;Desktop&#47;libwebsockets&#47;build&quot; does not appear to contain CMakeLists.txt.</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539875844, "post_id": 52859452, "comment_id": 92668109, "body": "The dots have to exactly the same in the command. It means parent directory. This assumes that you have made the build directory inside the source directory and you are providing the path to the source directory from the build directory. The errors you are getting are also for the same reason. Make sure you are running the cmake command from the build directory which is directly inside the source directory."}, {"owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539879036, "post_id": 52859452, "comment_id": 92669974, "body": "After doing what you said i&#39;m getting this : <code>CMake Error at C:&#47;Program Files&#47;CMake&#47;share&#47;cmake-3.13&#47;Modules&#47;CMakeTestCCompiler.cmak&zwnj;&#8203;e:52 (message):   The C compiler      &quot;C:&#47;MinGW&#47;bin&#47;gcc.exe&quot;    is not able to compile a simple test program.    It fails with the following output:      Change Dir: C:&#47;Users&#47;pro12&#47;Desktop&#47;lib&#47;libwebsockets&#47;CMakeFiles&#47;CMakeTmp</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539881834, "post_id": 52859452, "comment_id": 92671406, "body": "You seem to be having issue while building libwebsockets. You should probably direct them directly to the maintainers/authors of the repository. It would require a knowledge of the repository to fix it. Which I sadly do not have."}], "owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 428, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539794636, "creation_date": 1539793293, "last_edit_date": 1539794636, "question_id": 52859452, "link": "https://stackoverflow.com/questions/52859452/where-to-put-libwebsocket-h-file", "title": "Where to put libwebsocket.h file", "body": "<p>I'm trying to test the libwebsockets API  <a href=\"https://github.com/warmcat/libwebsockets/tree/master/minimal-examples/api-tests/api-test-lws_tokenize\" rel=\"nofollow noreferrer\">https://github.com/warmcat/libwebsockets/tree/master/minimal-examples/api-tests/api-test-lws_tokenize</a></p>\n\n<p>Whenever I type</p>\n\n<pre><code>cmake . &amp;&amp; make\n</code></pre>\n\n<p>to build the code. I got following error.</p>\n\n<pre><code>Scanning dependencies of target lws-api-test-lws_tokenize \n[ 50%] Building C object CMakeFiles/lws-api-test-lws_tokenize.dir/main.c.obj\nC:\\Users\\pro12\\Desktop\\New folder (2)\\libwebsockets\\minimal-examples\\api- \ntests\\api-test-lws_tokenize\\main.c:16:27: fatal error: libwebsockets.h: No \nsuch file or directory\n#include &lt;libwebsockets.h&gt;\n                       ^\ncompilation terminated.\n</code></pre>\n\n<p>My question is where to add libwebsockets.h file?\nI have mingW installed and i'm using gcc compiler. I have libwebsockets build downloaded from here <a href=\"https://ci.appveyor.com/project/lws-team/libwebsockets\" rel=\"nofollow noreferrer\">https://ci.appveyor.com/project/lws-team/libwebsockets</a> which is placed at C:\\Program Files (x86)/libwebsockets</p>\n"}, {"tags": ["c", "pointers", "structure"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1539792386, "post_id": 52859148, "comment_id": 92633081, "body": "Do not do that.  If you want to loop over a series of elements, they should be in an array."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1539792858, "post_id": 52859148, "comment_id": 92633349, "body": "This is undefined behavior. Use an union."}], "answers": [{"tags": [], "owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "is_accepted": false, "score": 7, "last_activity_date": 1539798990, "last_edit_date": 1539798990, "creation_date": 1539792432, "answer_id": 52859213, "question_id": 52859148, "link": "https://stackoverflow.com/questions/52859148/looping-over-structure-elements-using-pointers-in-c/52859213#52859213", "title": "Looping over structure elements using pointers in C", "body": "<p>In C, \"it works fine\" is not good enough. Because your compiler is allowed to do this:</p>\n\n<pre><code>struct newData\n{\n    int x;\n    char padding1[523];\n    int y;\n    char padding2[364];\n    int z;\n    char padding3[251];\n};\n</code></pre>\n\n<p>Of course, this is an extreme example. But you get the general idea; it's not guaranteed that your loop will work because it's not guaranteed that <code>struct newData</code> is equivalent to <code>int[3]</code>.</p>\n\n<p>So no, it's not possible in the general case because it's not always possible in the specific case!</p>\n\n<hr>\n\n<p>Now, you might be thinking: \"What idiots decided this?!\" Well, I can't tell you that, but I <em>can</em> tell you why. Computers are very different to each other, and if you want code to run fast then the compiler has to be able to choose how to compile the code. Here's an example:</p>\n\n<p>Processor 8 has an instruction to get individual bytes, and put them in a register:</p>\n\n<pre><code>GETBYTE addr, reg\n</code></pre>\n\n<p>This works well with this struct:</p>\n\n<pre><code>struct some_bytes {\n   char age;\n   char data;\n   char stuff;\n}\n</code></pre>\n\n<p><code>struct some_bytes</code> can happily take up 3 bytes, and the code is fast. But what about Processor 16? It doesn't have <code>GETBYTE</code>, but it <em>does</em> have <code>GETWORD</code>:</p>\n\n<pre><code>GETWORD even_addr, reghl\n</code></pre>\n\n<p>This only accepts an even-numbered address, and reads two bytes; one into the \"high\" part of the register and one into the \"low\" part of the register. In order to make the code fast, the compiler has to do this:</p>\n\n<pre><code>struct some_bytes {\n   char age;\n   char pad1;\n   char data;\n   char pad2;\n   char stuff;\n   char pad3;\n}\n</code></pre>\n\n<p>This means that the code can run faster, but it also means that your loop won't work. That's OK though, because it's something called \"Undefined Behaviour\"; the compiler is allowed to assume that it'll never happen, and if it does happen the behaviour is undefined.</p>\n\n<p>In fact, you've already run across this behaviour! Your particular compiler was doing this:</p>\n\n<pre><code>struct newData\n{\n    int x;\n    int pad1;\n    int y;\n    int pad2;\n    int z;\n    int pad3;\n};\n</code></pre>\n\n<p>Because your particular compiler defines <code>long int</code> as twice the length of <code>int</code>, you were able to do this:</p>\n\n<pre><code>|  x  | pad |  y  | pad |  z  | pad |\n\n| long no.1 | long no.2 | long no.3 |\n| int |     | int |     | int |     \n</code></pre>\n\n<p>That code is, as you can tell by my precarious diagram, precarious. It probably won't work anywhere else. What's worse, your compiler, if it was being clever, would be able to do this:</p>\n\n<blockquote>\n<pre><code>for (int i=0; i&lt;3; i++)\n{\n    printf(\"%d \\n\", *(addr+i));\n}\n</code></pre>\n  \n  <p>Hmm... <code>addr</code> is from <code>data2</code> which is from <code>data1</code> which is a pointer to a <code>struct newData</code>. The C specification says that only the pointer to the start of the struct will ever be dereferenced, so I can assume that <code>i</code> is always <code>0</code> in this loop!</p>\n\n<pre><code>for (int i=0; i&lt;3 &amp;&amp; i == 0; i++)\n{\n    printf(\"%d \\n\", *(addr+i));\n}\n</code></pre>\n  \n  <p>That means it only runs once! Hooray!</p>\n\n<pre><code>printf(\"%d \\n\", *(addr + 0));\n</code></pre>\n  \n  <p>And all I need to compile is this:</p>\n\n<pre><code>int main()\n{\n    printf(\"%d \\n\", 10);\n}\n</code></pre>\n  \n  <p>Wow, the programmer will be so pleased that I've managed to speed this code up so much!</p>\n</blockquote>\n\n<p>You won't be pleased. In fact, you'll get unexpected behaviour, and won't be able to work out why. But you <em>would</em> be pleased if you had written code free of Undefined Behaviour, and your compiler had done something similar. So it stays.</p>\n"}, {"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1539795358, "post_id": 52859232, "comment_id": 92634609, "body": "Worth mentioning, since you included the note about one-past-the-end-of-the-array-object thing, that while the pointer arithmetic for that is valid, it is still illegal to dereference the pointer that is beyond the end of the array."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1539792510, "creation_date": 1539792510, "answer_id": 52859232, "question_id": 52859148, "link": "https://stackoverflow.com/questions/52859148/looping-over-structure-elements-using-pointers-in-c/52859232#52859232", "title": "Looping over structure elements using pointers in C", "body": "<p>You're invoking <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  Just because it appears to work doesn't mean it's valid.</p>\n\n<p>Pointer arithmetic is only valid when the original and resulting point both point to the same array object (or one past the end of the array object).  You have multiple distinct objects (even though they're members of the same struct), so a pointer to one can't legally be used to get a pointer to the other.</p>\n\n<p>This is detailed in section 6.5.6p8 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p>When  an  expression  that  has  integer  type  is  added  to  or \n  subtracted  from  a  pointer,  the result has the type of the pointer\n  operand.  If the pointer operand points to an element of an array\n  object, and the array is large enough, the result points to an element\n  offset from the original element such that the difference of the\n  subscripts of the resulting and original array elements equals the\n  integer expression.  In other words, if the expression P points to the\n  i-th  element  of  an  array  object,  the  expressions (P)+N (equivalently, N+(P) )  and (P)-N (where N has the value n ) point to,\n  respectively, the i+n-th and i\u2212n-th elements of the  array  object,  provided  they  exist.   Moreover,  if  the  expression P points  to  the  last element of an\n  array object, the expression (P)+1 points one past the last element of\n  the array  object,  and  if  the  expression Q points  one  past  the \n  last  element  of  an  array  object, the  expression (Q)-1 points  to\n  the  last  element  of  the  array  object.  If  both  the  pointer\n  operand  and  the  result  point  to  elements  of  the  same  array \n  object,  or  one  past  the  last element of the array object, the\n  evaluation shall not produce an overflow; otherwise, the behavior is\n  undefined.  If the result points one past the last element of the\n  array object, it shall not be used as the operand of a unary\n  * operator that is evaluated.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 3, "last_activity_date": 1539792841, "last_edit_date": 1539792841, "creation_date": 1539792714, "answer_id": 52859294, "question_id": 52859148, "link": "https://stackoverflow.com/questions/52859148/looping-over-structure-elements-using-pointers-in-c/52859294#52859294", "title": "Looping over structure elements using pointers in C", "body": "<p>Not only can you not do this with mixed types, even the code in question is ill-advised. Your code</p>\n\n<ul>\n<li>assumes that there is no padding between the members</li>\n<li>has strict aliasing violation (<code>int</code> and <code>long</code> are not compatible)</li>\n<li>does not have the explicit cast when assigning <code>long int *addr = data2;</code></li>\n<li>assumes that <code>int</code> and <code>long</code> are of the same size (not so on 64-bit Linux)</li>\n<li>has array access out of bounds: even when cast to a pointer to the first member (<code>int *addr = (int*)data;</code>), doing <code>addr[1]</code> accesses array out of bounds.</li>\n</ul>\n\n<p>TL;DR: In C \"it works\" does not mean it is correct. So if your program is wonky, don't be surprised if sometime, somewhere, someplace when you least expect it, someone steps up to you and says, smile! You've got undefined behaviour here.</p>\n"}, {"comments": [{"owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "edited": false, "score": 1, "creation_date": 1539799160, "post_id": 52859955, "comment_id": 92636394, "body": "I might be weird, but I tend to write unions of different pointers, instead of using a <code>(void *)</code> pointer. That&#39;s not to say I don&#39;t cast, but I like to be explicit to the compiler in case it spots a clever shortcut."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "edited": false, "score": 0, "creation_date": 1539799954, "post_id": 52859955, "comment_id": 92636774, "body": "@wizzwizz4 Yeah, for something of this nature where you know exactly what the possibilities are, that would be an option that makes sense."}], "tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": true, "score": 1, "last_activity_date": 1539795171, "creation_date": 1539795171, "answer_id": 52859955, "question_id": 52859148, "link": "https://stackoverflow.com/questions/52859148/looping-over-structure-elements-using-pointers-in-c/52859955#52859955", "title": "Looping over structure elements using pointers in C", "body": "<p>The short answer is \"no\".</p>\n\n<p>The longer answer: Your example of what \"works\" is not really legal, either.  If, for whatever reason, you really want to be able to loop over multiple types, you can get creative with structs and unions.  Such as having a struct with one member that informs of the data-type the other member holds.  The other member would be a union of all the possible data-types.  Something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nenum TYPE {INT, DOUBLE};\n\nunion some_union {\n  int x;\n  double y;\n};\n\nstruct multi_type {\n  enum TYPE type;\n  union some_union u;\n};\n\nstruct some_struct {\n  struct multi_type array[2];\n};\n\nint main(void) {\n   struct some_struct derp;\n\n   derp.array[0].type = INT;\n   derp.array[0].u.x = 5;\n   derp.array[1].type = DOUBLE;\n   derp.array[1].u.y = 5.5;\n\n   for(int i = 0; i &lt; 2; ++i) {\n      switch (derp.array[i].type) {\n         case INT:\n            printf(\"Element %d is type 'int' with value %d\\n\", i, derp.array[i].u.x);\n            break;\n         case DOUBLE:\n            printf(\"Element %d is type 'double' with value %lf\\n\", i, derp.array[i].u.y);\n            break;\n      }\n   }\n   return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>It does cause a waste of space when there is a large disparity in size of the types of elements in your union.  If, for example, instead of just having <code>int</code> and <code>double</code>, you had some large complex structs that took up kilobytes of space, even your simple <code>int</code> elements would take up that much space.</p>\n\n<p>Alternatively, if you were okay with the data not being directly in your struct, but only holding pointers to the data, you could use a similar technique that ditches unions.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nenum TYPE {INT, DOUBLE};\n\nstruct multi_type {\n  enum TYPE type;\n  void *data;\n};\n\nstruct some_struct {\n  struct multi_type array[2];\n};\n\nint main(void) {\n   struct some_struct derp;\n   int x;\n   double y;\n\n   derp.array[0].type = INT;\n   derp.array[0].data = &amp;x;\n   *(int *)(derp.array[0].data) = 5;\n   derp.array[1].type = DOUBLE;\n   derp.array[1].data = &amp;y;\n   *(double *)derp.array[1].data = 5.5;\n\n   for(int i = 0; i &lt; 2; ++i) {\n      switch (derp.array[i].type) {\n         case INT:\n            printf(\"Element %d is type 'int' with value %d\\n\", i, *(int *)derp.array[i].data);\n            break;\n         case DOUBLE:\n            printf(\"Element %d is type 'double' with value %lf\\n\", i, *(double *)derp.array[i].data);\n            break;\n      }\n   }\n   return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Before going about doing any of that, though, I recommend thinking over your design again and think if you really <em>need</em> to loop over elements of different types, or if perhaps there's a better way to go about your design such as looping through each type of element separately.</p>\n"}, {"tags": [], "owner": {"reputation": 593, "user_id": 9658875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841f55a02830a8f0655c07654401670f?s=128&d=identicon&r=PG&f=1", "display_name": "GermanNerd", "link": "https://stackoverflow.com/users/9658875/germannerd"}, "is_accepted": false, "score": 1, "last_activity_date": 1539869198, "creation_date": 1539869198, "answer_id": 52875150, "question_id": 52859148, "link": "https://stackoverflow.com/questions/52859148/looping-over-structure-elements-using-pointers-in-c/52875150#52875150", "title": "Looping over structure elements using pointers in C", "body": "<p>All good answers above. But there is another thing that is dangerous in your code:</p>\n\n<pre><code>struct newData *data2 = &amp;data1;\nlong int *addr = data2;\n</code></pre>\n\n<p>Here you assume that on your particular machine you can convert a pointer into your structure to a pointer to a long int. While on modern machines that probably is almost always true, there is no guarantee for that, and most compilers will at least throw a warning at you.</p>\n\n<p>All the problems with dereferencing into a struct aside, you could use something like this:</p>\n\n<pre><code>struct newData *data2 = &amp;data1;\nvoid * addr = data2;\n\nfor(int i=0; i &lt; 3; i++){\n    printf(\"%d \\n\", *((long int *)addr+i));\n}\n</code></pre>\n\n<p>Now that still is bad code. You use long int to compensate for the padding your compiler has put into your structure; I presume you got to that by experimentation.</p>\n\n<p>You can find out about the padding, if any, the compiler applies to your structure:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n.\n.\n.\nassert(sizeof(struct newData) / sizeof(int) == 3);\n</code></pre>\n\n<p>This will at least terminate your program if there is anything fishy going on, either by padding or because your structure does not match a 3 int thing.\nStill bad code.</p>\n\n<p>You could expand the examination of the possible padding in the structure by making a more step-by-step examination of sizes and structure member addresses, but that really is quite horrible. The following pointer arithmetic to get to the individual members would get more and more obfuscated, like this:</p>\n\n<p>(assuming you had calculated some padding value between your (identical!) struct members:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n.\n.\n.\n//assert(sizeof(struct newData) / sizeof(int) == 3);\n\n//Very ugly....don't really do this.\nint padding = (sizeof(struct newData) / sizeof(int) / 3)  - 1;\n\n.\n.\n.\nstruct newData *data2 = &amp;data1;\n\n// Use a void pointer, which can hold all other data pointers\nvoid * addr = data2;\n\nfor(int i=0; i &lt; 3; i++)\n{\n// Cast the pointer to (char*), because that is the only guaranteed\n// type size - 1 byte\n// Do your pointer arithmetic by using the actual size of int on your \n// machine, plus the padding\n\nprintf(\"%d \\n\", *((char *)addr + (i * (sizeof(int) + padding))));\n}\n</code></pre>\n\n<p>But still it remains really nasty code. You might need to do some things like that if you want to read a specific binary input, maybe from an audio file, into some structure, but there are much better ways to do that.</p>\n\n<p>PS: There is, AFAIK, no guarantee that the memory occupied by a struct is contiguous, regardless of padding issues. I guess that (small) structs on the stack are contiguous most of the time, but large ones on the heap might very well be splattered all over different memory locations.</p>\n\n<p>So it is very dangerous to do pointer arithmetic into a struct at any time.  </p>\n"}], "owner": {"reputation": 340, "user_id": 10341985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d242bfa7a0d328a2830bec3561a0c39b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman H", "link": "https://stackoverflow.com/users/10341985/iman-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1537, "favorite_count": 0, "accepted_answer_id": 52859955, "answer_count": 5, "score": 4, "last_activity_date": 1539869198, "creation_date": 1539792205, "question_id": 52859148, "link": "https://stackoverflow.com/questions/52859148/looping-over-structure-elements-using-pointers-in-c", "title": "Looping over structure elements using pointers in C", "body": "<p>I wrote this code to iterate over members of a structure. It works fine. Can I use similar method for structures with mixed type elements, i.e. some integers, some floats and ...? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct newData\n{\n    int x;\n    int y;\n    int z;\n}  ;\n\nint main()\n{\n    struct newData data1;\n    data1.x = 10;\n    data1.y = 20;\n    data1.z = 30;\n\n    struct newData *data2 = &amp;data1;\n    long int *addr = data2;\n    for (int i=0; i&lt;3; i++)\n    {\n        printf(\"%d \\n\", *(addr+i));\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "swift", "unsafemutablepointer", "bridging"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539792082, "post_id": 52858897, "comment_id": 92632931, "body": "We are talink Objective-C here, i take it. <code>let str = String.fromCString(x)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 249309, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "is_accepted": true, "score": 2, "last_activity_date": 1539792631, "creation_date": 1539792631, "answer_id": 52859261, "question_id": 52858897, "link": "https://stackoverflow.com/questions/52858897/unsafemutablepointerint8-to-utf8-string/52859261#52859261", "title": "UnsafeMutablePointer&lt;Int8&gt; to UTF8 String", "body": "<p>CChar is an alias for Int8, so you can use <a href=\"https://developer.apple.com/documentation/swift/string/1641523-init\" rel=\"nofollow noreferrer\">CChar-based methods</a> here.</p>\n\n<pre><code>let str = String(cString: pointer)\n</code></pre>\n"}], "owner": {"reputation": 773, "user_id": 4259003, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/100008429016474/picture?type=large", "display_name": "Peter Prographo", "link": "https://stackoverflow.com/users/4259003/peter-prographo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 52859261, "answer_count": 1, "score": 0, "last_activity_date": 1539792631, "creation_date": 1539791388, "question_id": 52858897, "link": "https://stackoverflow.com/questions/52858897/unsafemutablepointerint8-to-utf8-string", "title": "UnsafeMutablePointer&lt;Int8&gt; to UTF8 String", "body": "<p>I have a UnsafeMutablePointer pointing at a C string, I want to convert the bytes at this pointer to a Swift String, the data is a C string, so UTF8.</p>\n\n<p>Is it possible to iterate byte by byte until NULL? Or some easier way?</p>\n"}, {"tags": ["c", "pipe", "fork", "dup2"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4038917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3bfa4acf5fd65bd3f840b0a5cd78e2?s=128&d=identicon&r=PG&f=1", "display_name": "the constant gardener", "link": "https://stackoverflow.com/users/4038917/the-constant-gardener"}, "edited": false, "score": 0, "creation_date": 1540223004, "post_id": 52885361, "comment_id": 92775444, "body": "Thanks for your answer! Are you sure about &quot;Use non-blocking reads, and use pselect(2) to block to avoid spinning the CPU forever.&quot;. In my benchmark the blocking read() did not had measurable impact on performances."}, {"owner": {"reputation": 103, "user_id": 4038917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3bfa4acf5fd65bd3f840b0a5cd78e2?s=128&d=identicon&r=PG&f=1", "display_name": "the constant gardener", "link": "https://stackoverflow.com/users/4038917/the-constant-gardener"}, "edited": false, "score": 0, "creation_date": 1540223053, "post_id": 52885361, "comment_id": 92775472, "body": "What scenario can be prevented with the use of SIGCHLD as you describe?"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 103, "user_id": 4038917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3bfa4acf5fd65bd3f840b0a5cd78e2?s=128&d=identicon&r=PG&f=1", "display_name": "the constant gardener", "link": "https://stackoverflow.com/users/4038917/the-constant-gardener"}, "edited": false, "score": 0, "creation_date": 1540226800, "post_id": 52885361, "comment_id": 92777394, "body": "@theconstantgardener Re CPU usage, the &quot;spin forever&quot; scenario would only happen if you used non-blocking reads without pselect, which is what I was warning against. Blocking reads would be fine with regards to CPU."}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 103, "user_id": 4038917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3bfa4acf5fd65bd3f840b0a5cd78e2?s=128&d=identicon&r=PG&f=1", "display_name": "the constant gardener", "link": "https://stackoverflow.com/users/4038917/the-constant-gardener"}, "edited": false, "score": 1, "creation_date": 1540226897, "post_id": 52885361, "comment_id": 92777448, "body": "@theconstantgardener Re SIGCHLD, the idea is to make sure an EINTR happens to let your program out of the select call when the child dies."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1539918537, "creation_date": 1539918537, "answer_id": 52885361, "question_id": 52858818, "link": "https://stackoverflow.com/questions/52858818/pipe-guarantee-to-close-after-the-child-has-exited/52885361#52885361", "title": "Pipe guarantee to close after the child has exited", "body": "<p>Regarding your ideas:</p>\n\n<ul>\n<li>If the child spawns children of its own, the <code>read()</code> won't return 0 until all of its descendants either die or close stdout and stderr. If it doesn't, or if the child always outlives all of its descendants, then just waiting for <code>read()</code> to return 0 is good enough and won't ever cause a problem.</li>\n<li>If the child dies but the parent hasn't yet <code>wait(2)</code>ed on it, then <code>kill(pid, 0)</code> will succeed as if the child were still alive (at least on Linux), so this isn't an effective check from within your parent program.</li>\n<li>A non-blocking <code>waitpid()</code> on its own would appear to fix the problem with the child having children of its own, but would actually introduce a subtle race condition. If the child exited right after the <code>waitpid()</code> but before the <code>read()</code>, then the <code>read()</code> would block until the rest of the descendants exited.</li>\n<li>On its own, if you used <code>select()</code> in a blocking way, it's no better than just calling <code>read()</code>. If you used <code>select()</code> in a non-blocking way, you'd just end up burning CPU time in a loop.</li>\n</ul>\n\n<p>What I'd do:</p>\n\n<ul>\n<li>Add a no-op signal handler function for SIGCHLD, just so that it causes EINTR when it occurs.</li>\n<li>Block SIGCHLD in the parent before you start looping.</li>\n<li>Use non-blocking <code>read</code>s, and use <code>pselect(2)</code> to block to avoid spinning the CPU forever.</li>\n<li>During the <code>pselect</code>, pass in a <code>sigset_t</code> that doesn't have SIGCHLD blocked, so that it's guaranteed to cause an EINTR for it when it eventually gets sent.</li>\n<li>Somewhere in the loop, do a non-blocking <code>waitpid(2)</code>, and handle its return appropriately. (Make sure you do this at least once after blocking SIGCHLD but before calling <code>select</code> for the first time, or you'll have a race condition.)</li>\n</ul>\n"}], "owner": {"reputation": 103, "user_id": 4038917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3bfa4acf5fd65bd3f840b0a5cd78e2?s=128&d=identicon&r=PG&f=1", "display_name": "the constant gardener", "link": "https://stackoverflow.com/users/4038917/the-constant-gardener"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1539918537, "creation_date": 1539791142, "last_edit_date": 1539918258, "question_id": 52858818, "link": "https://stackoverflow.com/questions/52858818/pipe-guarantee-to-close-after-the-child-has-exited", "title": "Pipe guarantee to close after the child has exited", "body": "<p>In the code below, is it safe to rely on <strong>read() failure</strong> to detect termination of child? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main(void)\n{\n   int pipefd[2];\n   pipefd[0] = 0;\n   pipefd[1] = 0;\n   pipe(pipefd);\n\n   pid_t pid = fork();\n\n   if (pid == 0)\n   {\n      // child\n      close(pipefd[0]);    // close unused read end\n      while ((dup2(pipefd[1], STDOUT_FILENO) == -1) &amp;&amp; (errno == EINTR)) {}             // send stdout to the pipe\n      while ((dup2(pipefd[1], STDERR_FILENO) == -1) &amp;&amp; (errno == EINTR)) {} // send stderr to the pipe\n      close(pipefd[1]);    // close unused write end\n\n      char *argv[3];\n      argv[0] = \"worker-app\";\n      argv[1] = NULL;\n      argv[2] = NULL;\n      execvp(\"./worker-app\", argv);\n      printf(\"failed to execvp, errno %d\\n\", errno);\n      exit(EXIT_FAILURE);\n   }\n   else if (pid == -1)\n   {\n   }\n   else\n   {\n      // parent\n      close(pipefd[1]);  // close the write end of the pipe in the parent\n\n      char buffer[1024];\n      memset(buffer, 0, sizeof(buffer));\n      while (1) // &lt;= here is it safe to rely on read below to break from this loop ?\n      {\n        ssize_t count = read(pipefd[0], buffer, sizeof(buffer)-1);\n        printf(\"pipe read return %d\\n\", (int)count);\n        if (count &gt; 0)\n        {\n          printf(\"child: %s\\n\", buffer);\n        }\n        else if (count == 0)\n        {\n          printf(\"end read child pipe\\n\", buffer);\n          break;\n        }\n        else if (count == -1)\n        {\n          if (errno == EINTR)\n          {   continue;\n          }\n          printf(\"error read child pipe\\n\", buffer);\n          break;\n        }\n      }\n\n      close(pipefd[0]); // close read end, prevent descriptor leak\n\n      int waitStatus = 0;\n      waitpid(pid, &amp;waitStatus, 0);\n  }\n\n  fprintf(stdout, \"All work completed :-)\\n\");\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Should I add something in the while(1) loop to detect child termination? What specific scenario could happen and break this app ?</p>\n\n<p>Some thoughts of improvements below. However would I just waste CPU cycles? </p>\n\n<ol>\n<li><p>Use kill with special argument 0 that won't kill the process but just check if it is responsive:\n<code>if (kill(pid, 0)) { break; /* child exited */ };</code>\n/* If sig is 0, then no signal is sent, but error checking is still performed; this can be used to check for the existence of a process ID or process group ID. <a href=\"https://linux.die.net/man/2/kill\" rel=\"nofollow noreferrer\">https://linux.die.net/man/2/kill</a> */</p></li>\n<li><p>Use waitpid non-blocking in the while(1) loop to check if child has exited.</p></li>\n<li><p>Use select() to check for pipe readability to prevent read() from possibly hanging?</p></li>\n</ol>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "binary", "twos-complement"], "comments": [{"owner": {"reputation": 763, "user_id": 8706759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/48tgN.jpg?s=128&g=1", "display_name": "Ganesh Chowdhary Sadanala", "link": "https://stackoverflow.com/users/8706759/ganesh-chowdhary-sadanala"}, "edited": false, "score": 0, "creation_date": 1539791615, "post_id": 52858804, "comment_id": 92632696, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7300650/how-to-find-tmax-without-using-shifts\">How to find TMax without using shifts</a>"}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539793619, "post_id": 52858804, "comment_id": 92633757, "body": "His question allows using a shift.  In fact, that&#39;s how I answered it."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539793974, "post_id": 52858804, "comment_id": 92633957, "body": "I looked at the question you referenced.  I am sorry, it is not the same question."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539796162, "post_id": 52858804, "comment_id": 92634961, "body": "What not use <code>INT_MAX</code> for max <code>int</code> or <code>INTMAX_MAX</code> for maximum &quot;integer&quot;?"}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539819633, "post_id": 52858804, "comment_id": 92644250, "body": "It may be that the only right answer is 1&lt;&lt;(n-1) -1,  the question is to explain that.  One of the points is that integer types are not a fixed size in C.  So any solution, apart from using the macros, has to accommodate the full range of the integer type that is used."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539819719, "post_id": 52858804, "comment_id": 92644258, "body": "The question that you marked correct, is actually incorrect.  I posted a new answer, check it out. This is a standard course work question."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539822758, "post_id": 52858804, "comment_id": 92644831, "body": "Lets clarify something.  Do want to TMAX given an integer data type, or TMAX given a number of bits?"}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1539792980, "post_id": 52859044, "comment_id": 92633416, "body": "As a standalone expression: <code>(int)(~0u &gt;&gt; 1)</code>"}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539793533, "post_id": 52859044, "comment_id": 92633703, "body": "The C language standard allows int to be as small as 16 bits."}, {"owner": {"reputation": 763, "user_id": 8706759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/48tgN.jpg?s=128&g=1", "display_name": "Ganesh Chowdhary Sadanala", "link": "https://stackoverflow.com/users/8706759/ganesh-chowdhary-sadanala"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1539793540, "post_id": 52859044, "comment_id": 92633708, "body": "@anatolyg you are using the same expression used by him but combinely."}, {"owner": {"reputation": 763, "user_id": 8706759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/48tgN.jpg?s=128&g=1", "display_name": "Ganesh Chowdhary Sadanala", "link": "https://stackoverflow.com/users/8706759/ganesh-chowdhary-sadanala"}, "reply_to_user": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539793602, "post_id": 52859044, "comment_id": 92633745, "body": "@DrM How would you feel to use long int"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539796732, "post_id": 52859044, "comment_id": 92635256, "body": "This make the very reasonable assumption that <code>UINT_MAX&#47;2 == INT_MAX</code>.  Although this is very common, C only requires <code>UINT_MAX &gt;= INT_MAX</code>.  &#167;6.2.5 9.  Also. This answer does not need to rely on  two&#39;s complement at all."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1539808982, "post_id": 52859044, "comment_id": 92640975, "body": "To the downvoter, OP said he&#39;s looking for the &quot;maximum two&#39;s complement integer&quot;, which implies <code>int</code>, whatever the size of <code>int</code> may be.  OP just assumed 32-bit, as that&#39;s what the vast majority of current implementations use."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539819425, "post_id": 52859044, "comment_id": 92644194, "body": "its not correct, try it when int is not 32 bits, it fails.  The point is that sizes of integer types are not fixed in C.  If this is for a course, any answer other than 1&lt;&lt;(n-1) -1, will be incorrect,  What he asked for was an explanation why that is so."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539819563, "post_id": 52859044, "comment_id": 92644230, "body": "@DrM It does work, in fact your answer with the same code <b>demonstrates</b> that it works.  You&#39;re fixating on the OP saying &quot;I know that the correct value is 0x7fffffff&quot;, which is <b>only</b> correct if <code>int</code> is 32 bits."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539822647, "post_id": 52859044, "comment_id": 92644806, "body": "I think it may be that the question is not well defined.  If he wants the max for a given type, number of bits unknown, then indeed -1&gt;&gt;1 in the type, will do it. But if he wants the max for a defined number of bits, then the formula is the only way to it without a mask."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1539792376, "last_edit_date": 1539792376, "creation_date": 1539791866, "answer_id": 52859044, "question_id": 52858804, "link": "https://stackoverflow.com/questions/52858804/c-find-maximum-twos-complement-integer/52859044#52859044", "title": "C find maximum two&#39;s complement integer", "body": "<p>Assuming you know that your machine uses two's complement representation, this is how you would do so in a standard compliant manner:</p>\n\n<pre><code>unsigned int x = ~0u;\nx &gt;&gt;= 1;\nprintf(\"max int = %d\\n\", (int)x);\n</code></pre>\n\n<p>By using an <code>unsigned int</code>, you prevent any implementation defined behavior caused by right shifting a negative value.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1539798716, "last_edit_date": 1539798716, "creation_date": 1539798279, "answer_id": 52860759, "question_id": 52858804, "link": "https://stackoverflow.com/questions/52858804/c-find-maximum-twos-complement-integer/52860759#52860759", "title": "C find maximum two&#39;s complement integer", "body": "<blockquote>\n  <p>find maximum two's complement integer</p>\n</blockquote>\n\n<p><code>int TMax = -1u &gt;&gt; 1</code> or <code>-1u/2</code> is sufficient when <code>INT_MAX == UINT_MAX/2</code> to find the maximum <code>int</code>, </p>\n\n<p>This \"works\" even if <code>int</code> is encoded as 2's complement or the now rare 1s complement or sign magnitude.</p>\n\n<hr>\n\n<p>Better to use</p>\n\n<pre><code>#include &lt;limits.h&gt;\nint TMax = INT_MAX;\n</code></pre>\n\n<hr>\n\n<p>Other tricks can involve <em>undefined, implementation defined, unspecified behavior</em> which are best avoided in C.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539827820, "post_id": 52864874, "comment_id": 92645747, "body": "&quot; the formulate 1&lt;&lt;(n-1)-1 produces the correct answer on any compliant platform&quot; --&gt; No.  Certainly on the vast majority of platforms, yet <code>UINT_MAX == INT_MAX</code> is possible - even if it only applies to graveyard big-iron."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539828082, "post_id": 52864874, "comment_id": 92645796, "body": "Re your 1st comment:  Really?  How would that work for twos complement?  It seems by definition INT_MAX has to be less than UINT_MAX, unless something in hardware steps in to intervene.  I&#39;ve built a lot of hardware, I dont see that happening so readily."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539828092, "post_id": 52864874, "comment_id": 92645800, "body": "<code>sizeof(...)*8</code> best matches <code>&quot;%zu&quot;</code>, not <code>&quot;%lu&quot;</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539828274, "post_id": 52864874, "comment_id": 92645837, "body": "C has &quot;The range of nonnegative values of a signed integer type is a subrange of the corresponding unsigned integer type&quot; &#167;6.2.5 9  I take &quot;sub-range&quot; to imply an overlapping range.  Even with old machines, I&#39;ve only seen this on the widest types and not <code>int</code>."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539828350, "post_id": 52864874, "comment_id": 92645857, "body": "Re your 3rd comment, fine.  I&#39;ll check it and fix it as appropriate.  But regardless, that&#39;s kinda not the point."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539828399, "post_id": 52864874, "comment_id": 92645865, "body": "<a href=\"https://stackoverflow.com/questions/52858804/c-find-maximum-twos-complement-integer/52860759#comment92645819_52864874\">Re</a> - Yes you are correct.  Code tends to speak louder than surrounding text - useful to comment in the code that it has a short-coming."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539828423, "post_id": 52864874, "comment_id": 92645868, "body": "Re your 4th comment, I haven&#39;t seen it, and I have been doing this since punch cards and wire wrap programming."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539828525, "post_id": 52864874, "comment_id": 92645895, "body": "I remain with the conjecture that the question is not well phrased. See my last comment on his question."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539828686, "post_id": 52864874, "comment_id": 92645930, "body": "The formula 1&lt;&lt;(n-1) - 1, is actually the text book speaking.  Its a question that appears on exams."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1539828783, "post_id": 52864874, "comment_id": 92645951, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182058/discussion-between-chux-and-drm\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "is_accepted": false, "score": 1, "last_activity_date": 1540432178, "last_edit_date": 1540432178, "creation_date": 1539818385, "answer_id": 52864874, "question_id": 52858804, "link": "https://stackoverflow.com/questions/52858804/c-find-maximum-twos-complement-integer/52864874#52864874", "title": "C find maximum two&#39;s complement integer", "body": "<p>There are two scenarios in which you may be looking for the maximum positive number, either given an integer data type or given a number of bits. The are also two solutions.</p>\n\n<p><strong>Fill and shift right</strong></p>\n\n<p>Working in an integer data type of a size that exactly matches the size of the desired twos complement data type, you might be able to solve the problem by</p>\n\n<pre><code>(unsigned 'type') ^0)&gt;&gt;1 \n</code></pre>\n\n<p>or equivalently,</p>\n\n<pre><code>(unsigned 'type') ^0)/2.\n</code></pre>\n\n<p>For example, on a machine where short is 16 bits,</p>\n\n<pre><code>(unsigned short) ^0   ==&gt;  0xFFFF  (65535)\n((unsigned short) ^0 ) &gt;&gt; 1  ==&gt;  0x7FFF  (32767)\n</code></pre>\n\n<p>On a 32 bit data type, this method gives us 0x7FFFFFFF (2147483647).</p>\n\n<p>In C, an integer type has a minimum size only, c.f. an <strong>int</strong> can be 16 bits, 32 bits, or larger.  But, the word size used in the calculation must exactly match that of the intended target.</p>\n\n<p>Also, note that the data must be an unsigned type. The right shift for a signed type is usually implemented as a sign extended shift (the sign bit is copied into the result).</p>\n\n<p><strong>Set the sign bit only and subtract 1</strong></p>\n\n<p>The second technique, which works for any word size equal to or larger than the number of bits of the desired twos complement word size, is</p>\n\n<pre><code>(unsigned integer_type) 1&lt;&lt;(n-1)-1\n</code></pre>\n\n<p>For example, in any integer word size greater to or larger than 16, we can find the TMAX for 16 as</p>\n\n<pre><code>(unsigned integer_type) 1&lt;&lt;15  ==&gt;  binary 1000 0000 0000 0000  (0x8000)\n(unsigned integer_type) (1&lt;&lt;15 - 1) == &gt; 0111 1111 1111 1111 (0x7FFF)\n</code></pre>\n\n<p>This is robust and works on almost any scenario that provides adequate word size.</p>\n\n<p>Again the data type for the calculation has to be unsigned if the word size in the calculation is that of the target. This is not necessary for a larger word size.</p>\n\n<p><strong>Examples</strong></p>\n\n<p>In the first example, we show that the second method works for 32 bits, using long or long long types.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n  printf( \"%ld\\n\", (long) ( ( ((unsigned long) 1)&lt;&lt;31 ) - 1 ) );\n  printf( \"%lld\\n\", (long long) ( ( ((unsigned long long) 1)&lt;&lt;31 ) - 1 ) );\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2147483647\n2147483647\n</code></pre>\n\n<p>And here we show that the first method, shift right from all bits set, fails when int is not exactly 32 bits, which as noted, is not guaranteed in C.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n  printf( \"from long long %lld  (%zu bits)\\n\", ( (unsigned long long) ~0 )&gt;&gt;1,\n      sizeof(unsigned long long)*8 );\n\n  printf( \"from long %ld  (%zu bits)\\n\",  ( (unsigned long) ~0 )&gt;&gt;1,\n      sizeof(unsigned long)*8  );\n\n  printf( \"from int %d  (%zu bits)\\n\",  ( (unsigned int) ~0 )&gt;&gt;1,\n      sizeof(unsigned int)*8  );\n\n  printf( \"from short %d  (%zu bits)\\n\",  ( (unsigned short) ~0 )&gt;&gt;1,\n      sizeof(unsigned short)*8  );\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>from long long 9223372036854775807  (64 bits)\nfrom long 9223372036854775807  (64 bits)\nfrom int 2147483647  (32 bits)\nfrom short 32767  (16 bits)\n</code></pre>\n\n<p>Again, recall that the C language only guarantees a minimum size for  any integer data types.  An <strong>int</strong> can be 16 bits or 32 bits or larger, depending on your platform.</p>\n"}, {"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1540171743, "post_id": 52874422, "comment_id": 92752077, "body": "This code involves integer overflow, which may behave in unexpected ways (undefined behavior). Within the rules of the game (no <code>unsigned</code> arithmetic) this is OK, but if not constrained by such rules, better not use this code."}, {"owner": {"reputation": 1788, "user_id": 4867193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08dafc81858d97aae00892fd98d4c96?s=128&d=identicon&r=PG", "display_name": "DrM", "link": "https://stackoverflow.com/users/4867193/drm"}, "edited": false, "score": 0, "creation_date": 1540432063, "post_id": 52874422, "comment_id": 92866734, "body": "You really should read my answer again.   I revised it to explain how all of this works in a more clear way.    What you wrote here is really not the right answer and it will fail on some computers."}], "tags": [], "owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "is_accepted": false, "score": 0, "last_activity_date": 1539880180, "last_edit_date": 1539880180, "creation_date": 1539866889, "answer_id": 52874422, "question_id": 52858804, "link": "https://stackoverflow.com/questions/52858804/c-find-maximum-twos-complement-integer/52874422#52874422", "title": "C find maximum two&#39;s complement integer", "body": "<p>Thanks for the help, everyone! Turns out I cannot use macros, unsigned, or longs. I came to this solution:</p>\n\n<pre><code>~(1 &lt;&lt; 31)\n</code></pre>\n\n<p>That generates the correct output, so I will leave it at that!</p>\n"}], "owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3829, "favorite_count": 0, "accepted_answer_id": 52859044, "answer_count": 4, "score": -2, "last_activity_date": 1540432178, "creation_date": 1539791103, "question_id": 52858804, "link": "https://stackoverflow.com/questions/52858804/c-find-maximum-twos-complement-integer", "title": "C find maximum two&#39;s complement integer", "body": "<p>I am tasked with finding maximum two's complement integer, or the TMax. I am at a complete loss for how to do this. I know that the correct value is 0x7fffffff, or 2147483647, but I do not know how exactly to get to this result. That's the maximum number for a 32 bit integer. I cannot use functions or conditionals, and at most I can use 4 operations. Can anyone try and help explain this to me? I know the way to find the maximum number for a certain bit count is 2^(bits - 1) - 1, so 2^(31) - 1 = 2147483647</p>\n"}, {"tags": ["c", "process", "fork", "system"], "comments": [{"owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "edited": false, "score": 0, "creation_date": 1539791160, "post_id": 52858795, "comment_id": 92632490, "body": "Not all of us speak French; it&#39;d be nice if you translated the comments and strings."}, {"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "reply_to_user": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "edited": false, "score": 0, "creation_date": 1539849325, "post_id": 52858795, "comment_id": 92652379, "body": "@wizzwizz4 done"}], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1539849577, "post_id": 52858869, "comment_id": 92652502, "body": "I understand what you say but before entering entering the switch the child process is executing create_process(); which (in my understanding) creates a new process (with the same code) which creates another child_process, which in turn will also create another child_process ... I dont understand how this code stops creating new processes..."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1539861518, "post_id": 52858869, "comment_id": 92659079, "body": "@DavidGeismar First the parent calls <code>create_process</code>.  In this function, it calls <code>fork</code>.  This creates the child process, then <b>both</b> processes return from <code>fork</code>, with 0 being returned to the child and the child&#39;s pid being returned to the parent.  In both cases, the <code>while</code> loop exits and both processes return from <code>create_process</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1539791309, "creation_date": 1539791309, "answer_id": 52858869, "question_id": 52858795, "link": "https://stackoverflow.com/questions/52858795/forking-process-in-c/52858869#52858869", "title": "Forking process in C", "body": "<pre><code>do {\n    pid = fork();\n} while ((pid == -1) &amp;&amp; (errno == EAGAIN));\n</code></pre>\n\n<p>Assuming the call to <code>fork</code> is successful, it only gets called once.  So only one new process is created.  Then the child calls <code>child_process</code> and the parent calls <code>father_process</code>.  After that, they both return to the <code>main</code> function where they break out of the <code>switch</code> statement and return from <code>main</code>.</p>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539849314, "creation_date": 1539791042, "last_edit_date": 1539849314, "question_id": 52858795, "link": "https://stackoverflow.com/questions/52858795/forking-process-in-c", "title": "Forking process in C", "body": "<p>I have this code in the course of system programming I am following : </p>\n\n<pre><code>/* La fonction create_process duplique le processus appelant et retourne\n   le PID du processus fils ainsi cr\u00e9\u00e9 */\npid_t create_process(void)\n{\n    /* On cr\u00e9e une nouvelle valeur de type pid_t */\n    pid_t pid;\n\n    /* On fork() tant que l'erreur est EAGAIN */\n    do {\n    pid = fork();\n    } while ((pid == -1) &amp;&amp; (errno == EAGAIN));\n\n    /* On retourne le PID du processus ainsi cr\u00e9\u00e9 */\n    return pid;\n}\n\n/* La fonction child_process effectue les actions du processus fils */\nvoid child_process(void)\n{\n    printf(\" We are in the son's process !\\n\"\n       \" son's pid is est %d.\\n\"\n       \" son's PPID is %d.\\n\", (int) getpid(), (int) getppid());\n}\n\n/* La fonction father_process effectue les actions du processus p\u00e8re */\nvoid father_process(int child_pid)\n{\n    printf(\" We are in the father process !\\n\"\n       \"  son's PID is %d.\\n\"\n       \" father's PID is %d.\\n\", (int) child_pid, (int) getpid());\n}\n\nint main(void)\n{\n    pid_t pid = create_process();\n\n    switch (pid) {\n    /* Si on a une erreur irr\u00e9m\u00e9diable (ENOMEM dans notre cas) */\n    case -1:\n    perror(\"fork\");\n    return EXIT_FAILURE;\n    break;\n    /* Si on est dans le fils */\n    case 0:\n    child_process();\n    break;\n    /* Si on est dans le p\u00e8re */\n    default:\n    father_process(pid);\n    break;\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The output of the function is :</p>\n\n<p>We are in the father's process!\n son's PID is 6246.\n father's PID is 6245.\n We are in the son's process !\n son's PID is 6246.\n son's PPID is 1.</p>\n\n<p>I dont understand why this code produces this output :\nThe function create_process forks a new process from the parent. So in the parent process the function create_process returns the child_process pid and I understand the first part :</p>\n\n<pre><code>We are in the father's process!\nson's PID is 6246.\nfather's PID is 6245.\n</code></pre>\n\n<p>Then I guess the child_process is executing and the create_process function returns 0 because we are in the child_process now and I also understand the following output :</p>\n\n<pre><code>We are in the son's process!\nson's PID is 6246.\nson's PPID is 1.\n</code></pre>\n\n<p>But I dont understand why the execution stops after that... we are still forking the child process right ? So I feel like it should keep on creating new processes and printing:</p>\n\n<pre><code>We are in the son's process !\nson's PID is OTHER.\nson's PPID is 6246.\n</code></pre>\n\n<p>Could someone please explain to me why this code does not keep on creating processes</p>\n"}, {"tags": ["c", "memory", "struct", "buffer-overflow", "aslr"], "comments": [{"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1539790999, "post_id": 52858650, "comment_id": 92632401, "body": "ASLR randomizes the starting position of contiguous blocks of virtual memory. Your variable is still going to be inside one of those blocks. Buffer overflow problems are not going to magically go away with ASLR."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 0, "creation_date": 1539792234, "post_id": 52858650, "comment_id": 92633000, "body": "You may find this post helpful: <a href=\"https://stackoverflow.com/questions/3605222/what-is-address-space-layout-randomization\" title=\"what is address space layout randomization\">stackoverflow.com/questions/3605222/&hellip;</a>"}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 0, "creation_date": 1539799398, "post_id": 52858650, "comment_id": 92636517, "body": "Note that there&#39;s a difference between &quot;buffer overflow&quot; as a problem, and &quot;buffer overflow attacks.&quot;  ALSR does not address the problem of buffer overflows as bugs.  It just makes it harder to effectively use such a bug in an attack.  More specifically, it makes it harder to use such a bug to do things like steal information or gain access.  It doesn&#39;t make it much harder for an attack to crash the program."}, {"owner": {"reputation": 357, "user_id": 8356121, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh4.googleusercontent.com/-Bo_a6i-Zw8o/AAAAAAAAAAI/AAAAAAAAABk/nvVj3e8lKHg/photo.jpg?sz=128", "display_name": "Miguel.G", "link": "https://stackoverflow.com/users/8356121/miguel-g"}, "edited": false, "score": 0, "creation_date": 1539871039, "post_id": 52858650, "comment_id": 92664861, "body": "Hi! Thanks both, I will check it:)"}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 8356121, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh4.googleusercontent.com/-Bo_a6i-Zw8o/AAAAAAAAAAI/AAAAAAAAABk/nvVj3e8lKHg/photo.jpg?sz=128", "display_name": "Miguel.G", "link": "https://stackoverflow.com/users/8356121/miguel-g"}, "edited": false, "score": 0, "creation_date": 1539870944, "post_id": 52858687, "comment_id": 92664807, "body": "Thanks for your answer! C reference is perfect for what I was looking for. :)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1539792147, "last_edit_date": 1539792147, "creation_date": 1539790653, "answer_id": 52858687, "question_id": 52858650, "link": "https://stackoverflow.com/questions/52858650/address-space-layout-randomization-and-structures-in-c/52858687#52858687", "title": "Address space layout randomization and structures in C", "body": "<p>The specific overflow you mentioned is still possible.</p>\n\n<p>With the exception of bitfields, the fields of a structure follow one another in order in memory (with some possible padding in between).  This is detailed in section 6.7.2.1p15 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p><strong>Within  a  structure  object,  the  non-bit-field  members  and  the \n  units  in  which  bit-fields reside have addresses that increase in\n  the order in which they are declared.</strong>  A pointer to a structure \n  object,  suitably  converted,  points  to  its  initial  member  (or \n  if  that  member  is  a bit-field,  then  to  the  unit  in  which  it\n  resides),  and  vice  versa.   There  may  be  unnamed padding within\n  a structure object, but not at its beginning.</p>\n</blockquote>\n\n<p>So in this case the <code>author</code> field will <em>always</em> follow the <code>title</code> field, regardless of what specific address an object of type <code>struct Books</code> is located at.  The only possible difference could be the amount of padding, but unless you add or remove fields in the struct this probably won't change.</p>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 8356121, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh4.googleusercontent.com/-Bo_a6i-Zw8o/AAAAAAAAAAI/AAAAAAAAABk/nvVj3e8lKHg/photo.jpg?sz=128", "display_name": "Miguel.G", "link": "https://stackoverflow.com/users/8356121/miguel-g"}, "edited": false, "score": 0, "creation_date": 1539871019, "post_id": 52858705, "comment_id": 92664853, "body": "Thanks for your answer! :)"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 2, "last_activity_date": 1539790727, "creation_date": 1539790727, "answer_id": 52858705, "question_id": 52858650, "link": "https://stackoverflow.com/questions/52858650/address-space-layout-randomization-and-structures-in-c/52858705#52858705", "title": "Address space layout randomization and structures in C", "body": "<p>ASLR does not affect stuff that is compile-time. The compiler chooses the layout of the structure at the time of compilation and this is hardcoded in the resulting object code.</p>\n\n<p>Furthermore, the C standard requires that successive struct members are laid out in memory in the order they appear in the struct definition (with unspecified padding in between members, but this too is fixed at the compilation time)</p>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 8356121, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh4.googleusercontent.com/-Bo_a6i-Zw8o/AAAAAAAAAAI/AAAAAAAAABk/nvVj3e8lKHg/photo.jpg?sz=128", "display_name": "Miguel.G", "link": "https://stackoverflow.com/users/8356121/miguel-g"}, "edited": false, "score": 0, "creation_date": 1539870983, "post_id": 52858874, "comment_id": 92664827, "body": "Hi! Thanks for your explanation, it is very clear! Everything is undertood right now. :)"}], "tags": [], "owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "is_accepted": false, "score": 2, "last_activity_date": 1539871100, "last_edit_date": 1539871100, "creation_date": 1539791320, "answer_id": 52858874, "question_id": 52858650, "link": "https://stackoverflow.com/questions/52858650/address-space-layout-randomization-and-structures-in-c/52858874#52858874", "title": "Address space layout randomization and structures in C", "body": "<p>I think you are misunderstanding the effects of ASLR (Address Space Layout Randomization): ASLR randomly arranges the positions of different virtual memory areas of a process (executable, stack, heap, data, libraries, etc) to be different in every execution. It does not change the relative position of elements in the same virtual memory area.</p>\n\n<hr>\n\n<p>Take for example the following simple program:</p>\n\n<pre><code>int main(void) {\n    struct {\n        char a[10];\n        char b[10];\n    } myvar;\n\n    printf(\"a: %p\\n\", &amp;myvar.a);\n    printf(\"b: %p\\n\", &amp;myvar.b);\n\n    return 0;\n}\n</code></pre>\n\n<p>Here's the program's virtual memory with ASLR <strong>disabled</strong>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0x555555554000     0x555555555000 r-xp     1000 0      /home/marco/test/test [executable segment]\n0x555555754000     0x555555755000 r--p     1000 0      /home/marco/test/test [read only data]\n0x555555755000     0x555555756000 rw-p     1000 1000   /home/marco/test/test [bss (global variables)]\n0x7ffffffde000     0x7ffffffff000 rw-p    21000 0      [stack] &lt;-- myvar is here\n</code></pre>\n\n<p>Output (ASLR disabled):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./test\na: 0x7ffffffde080\nb: 0x7ffffffde08a\n$ ./test\na: 0x7ffffffde080\nb: 0x7ffffffde08a\n$ ./test\na: 0x7ffffffde080\nb: 0x7ffffffde08a\n</code></pre>\n\n<p>And here's the same program with ASLR <strong>enabled</strong>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0x559fefcbe000     0x559fefcbf000 r-xp     1000 0      /home/marco/test/test [executable segment]\n0x559fefebe000     0x559fefebf000 r--p     1000 0      /home/marco/test/test [read only data]\n0x559fefebf000     0x559fefec0000 rw-p     1000 1000   /home/marco/test/test [bss (global variables)]\n0x7ffe3bb5e000     0x7ffe3bb7f000 rw-p    21000 0      [stack] &lt;-- myvar is here\n</code></pre>\n\n<p>Output (ASLR enabled):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./test\na: 0x7ffe3bb5e080\nb: 0x7ffe3bb5e08a\n$ ./test \na: 0x7ff4abdeea80\nb: 0x7ff4abdeea8a\n$ ./test \na: 0x7efa6b8fa080\nb: 0x7efa6b8fa08a\n</code></pre>\n\n<hr>\n\n<p><strong>Your variable is still going to be inside a certain <em>contiguous</em> block of virtual memory</strong>, and the <em>relative position</em> of the fields will not change at all. Contiguous arrays will still be contiguous using ASLR: they will just start at a different position in memory.</p>\n\n<p>Since <code>struct</code> fields are by standard contiguous in memory (and follow their declaration order), this means that <strong>buffer overflow will still be a potential problem</strong>, even when using ASLR.</p>\n"}], "owner": {"reputation": 357, "user_id": 8356121, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh4.googleusercontent.com/-Bo_a6i-Zw8o/AAAAAAAAAAI/AAAAAAAAABk/nvVj3e8lKHg/photo.jpg?sz=128", "display_name": "Miguel.G", "link": "https://stackoverflow.com/users/8356121/miguel-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 603, "favorite_count": 2, "accepted_answer_id": 52858687, "answer_count": 3, "score": 3, "last_activity_date": 1539871100, "creation_date": 1539790542, "last_edit_date": 1539797888, "question_id": 52858650, "link": "https://stackoverflow.com/questions/52858650/address-space-layout-randomization-and-structures-in-c", "title": "Address space layout randomization and structures in C", "body": "<p>I have this structure:</p>\n\n<pre><code>struct Books {\n char  title[50];\n char  author[50];\n};\n</code></pre>\n\n<p>Let's say that I know that if I pass <code>arg1</code> to the program, in some part of the code, it adds some chars in the direction <code>$title+52</code>, so the <code>author</code> value is overwritten (buffer overflow). </p>\n\n<p>Now I add ASLR to my binary. By this way, some directions are random, so I think the buffer overflow that I described before could not be possible.</p>\n\n<p>Is this true? Or even if I add ASLR the directions of struct members are together and buffer overflow could be possible?</p>\n"}, {"tags": ["c", "char-pointer"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1539790153, "post_id": 52858489, "comment_id": 92631917, "body": "Do read the &quot;duplicate&quot;. The accepted answer is excellent. Then the answer to your particular question will be obvious."}, {"owner": {"reputation": 33671, "user_id": 453005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rjx6y.png?s=128&g=1", "display_name": "DwB", "link": "https://stackoverflow.com/users/453005/dwb"}, "edited": false, "score": 0, "creation_date": 1539790498, "post_id": 52858489, "comment_id": 92632133, "body": "Your warning (which is legit) is caused because you are comparing a memory address (ch) to a not memory address (element &quot;i&quot; in the operator array).  It seems likely that what you actually want this comparison <code>*ch == operator[i]</code> (the thing in memory at location &quot;ch&quot; compared to the &quot;ith&quot; element  of the operator array).  The same applies to the delimiter code."}], "owner": {"user_type": "does_not_exist", "display_name": "user10519390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1539790127, "answer_count": 0, "score": 0, "last_activity_date": 1539790032, "creation_date": 1539790032, "question_id": 52858489, "link": "https://stackoverflow.com/questions/52858489/comparison-between-pointer-and-integer-errors", "closed_reason": "Duplicate", "title": "Comparison between pointer and integer errors", "body": "<p>I have seen  various explanations about pointer and integer comparison issues, however I am still very confused on the matter. I have struggled with pointers ever since I started coding, just something that I can not seem to grasp. And I find myself running in to this similar problem frequently. I have obtained the following \"warning\" signals, which I believe the solution to each are similar. Can anyone help explain this common pointer problem a little in depth?</p>\n\n<p><strong>Errors</strong></p>\n\n<pre><code>scanner.c: In function \u2018delimiters\u2019:\nscanner.c:14:9: warning: comparison between pointer and integer [enabled by default]\nif(ch == delimiter[i])\n     ^\nscanner.c: In function \u2018operators\u2019:\nscanner.c:27:9: warning: comparison between pointer and integer [enabled by default]\n if(ch == operator[i]){\n     ^\nscanner.c: In function \u2018validIdentifier\u2019:\nscanner.c:43:2: warning: passing argument 1 of \u2018delimiters\u2019 makes pointer from integer without a cast [enabled by default]\nif(id[0] == '0' || id[0] == '1' || id[0] == '2' || id[0] == '3' || id[0] == '4' || id[0] == '5' || id[0] == '6' || id[0] == '7' || id[0] == '8' || id[0] == '9' || delimiters(id[0]) == true || isupper(id[0]) )\n                                                                            ^\nscanner.c:8:6: note: expected \u2018char *\u2019 but argument is of type \u2018char\u2019\nbool delimiters(char *ch){\n  ^\nscanner.c: In function \u2018keywords\u2019:\nscanner.c:51:2: warning: passing argument 2 of \u2018strcmp\u2019 from incompatible pointer type [enabled by default]\n if(!strcmp(ch, keyword)){\n ^\nIn file included from scanner.c:3:0:\n/usr/include/string.h:140:12: note: expected \u2018const char *\u2019 but argument is of type \u2018const char **\u2019\nextern int strcmp (const char *__s1, const char *__s2)\n</code></pre>\n\n<p><strong>code.c</strong></p>\n\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include \"token.h\"\n\nbool delimiters(char *ch){\n    int i, j;\n    int len = strlen(ch);\n    const char delimiter[10];\n\n    for(i = 0; i &lt; len; i++){\n            if(ch == delimiter[i])\n                    j = true;;\n            j = false;\n    }\n    return (j);\n}\n\nbool operators(char *ch){\n    int i, j;\n    int len = strlen(ch);\n    const char operator[10];\n\n    for(i = 0; i &lt; len; i++){\n            if(ch == operator[i]){\n                    j = true;\n            }\n            j = false;\n    }\n    return (j);\n}\n\nbool validIdentifier(char* id){\n    int len = strlen(id);\n\n    if((len == 0) || (len &gt; 8)){\n            printf(\"Invalid identifier (string) length\\n\");\n            return (false);\n    }\n\n    if(id[0] == '0' || id[0] == '1' || id[0] == '2' || id[0] == '3' || id[0] == '4' || id[0] == '5' || id[0] == '6' || id[0] == '7' || id[0] == '8' || id[0] == '9' || delimiters(id[0]) == true || isupper(id[0]) )\n            return (false);\n    return (true);\n}\n\nbool keywords(char* ch){\n    const char* keyword[12];\n\n    if(!strcmp(ch, keyword)){\n            return (true);\n    }\n    return (false);\n}\n\nbool isInteger(char* ch){\n    int i;\n    int len = strlen(ch);\n\n    if((len == 0) || (len &gt; 8)){\n            printf(\"Invalid number length\\n\");\n            return (false);\n    }\n\n    for(i = 0; i &lt; len; i++){\n            if((ch[i] != '0' &amp;&amp; ch[i] != '1' &amp;&amp; ch[i] != '2' &amp;&amp; ch[i] != '3' &amp;&amp; ch[i] != '4' &amp;&amp; ch[i] != '5' &amp;&amp; ch[i] != '6' &amp;&amp; ch[i] != '7' &amp;&amp; ch[i] != '8' &amp;&amp; ch[i] != '9' &amp;&amp; ch[i] != '.') || (ch[i] == '-' &amp;&amp; i &gt; 0)){\n                    return (false);\n            }\n    }\n    return (true);\n}\n\nchar* sub(char* str, int l, int r){\n    int i;\n    char* subString = (char*)malloc(sizeof(char) * (r - l + 2));\n\n    for(i = l; i &lt; r; i++){\n            subString[i - l] = str[i];\n    }\n\n    subString[r - l + 1] = '\\0';\n    return (subString);\n}\n</code></pre>\n"}, {"tags": ["c", "makefile", "compilation", "object-files"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1539790658, "post_id": 52858251, "comment_id": 92632222, "body": "Please only ask one question and choose a title which  matches that."}], "answers": [{"tags": [], "owner": {"reputation": 13458, "user_id": 1773798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4Ljqn.png?s=128&g=1", "display_name": "Renaud Pacalet", "link": "https://stackoverflow.com/users/1773798/renaud-pacalet"}, "is_accepted": false, "score": 0, "last_activity_date": 1539790591, "creation_date": 1539790591, "answer_id": 52858667, "question_id": 52858251, "link": "https://stackoverflow.com/questions/52858251/makefile-object-file-generation-variable-substitution-and-other-questions/52858667#52858667", "title": "Makefile object file generation, variable substitution, and other questions", "body": "<ol>\n<li>Automatic variables are expanded with the <code>$</code> prefix, as any other variable, not <code>%</code>.</li>\n<li>As your object and source files are in different directories you cannot simply <code>%.o: %.c</code>.</li>\n</ol>\n\n<p>Try:</p>\n\n<pre><code>CC = gcc\nCFLAGS = -Wall -ansi -g\n\nOBJECTS = $(patsubst src/%.c,bin/%.o,$(SOURCE))\n\nbin/%.o: src/%.c\n    $(CC) $(CFLAGS) -c $&lt; -o $@\n</code></pre>\n\n<p>Note: the standard make variable for the C compiler is <code>CC</code>and <code>CFLAGS</code> for the flags. It is better to use them.</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 0, "last_activity_date": 1539790616, "creation_date": 1539790616, "answer_id": 52858675, "question_id": 52858251, "link": "https://stackoverflow.com/questions/52858251/makefile-object-file-generation-variable-substitution-and-other-questions/52858675#52858675", "title": "Makefile object file generation, variable substitution, and other questions", "body": "<pre><code>OBJECTS = $(SOURCE:.c=.o)\nOBJECTS = $(SOURCE: src/=bin/)\n</code></pre>\n\n<p>You're assigning to <code>OBJECTS</code> twice there - the first result gets overwritten by the second which doesn't work. You want to combine them into one statement like this</p>\n\n<pre><code>OBJECTS=$(SOURCE:src/%.c=bin/%.o)\n</code></pre>\n\n<p>Your next problem is you need to tell <code>make</code> that \"bin/whatever.o\" is built from \"src/whatever.c\". Currently it'll look for \"whatever.c\" in \"bin/\"</p>\n\n<p>So your recipe for building .o files needs the directories added</p>\n\n<pre><code>bin/%.o: src/%.c\n    $(COMPILER) $(FLAGS) -c $&lt; -o $@\n</code></pre>\n\n<p>You also should have <code>$@</code> instead of <code>%@</code> and <code>$&lt;</code> instead of <code>%&lt;</code></p>\n"}], "owner": {"reputation": 123, "user_id": 9781834, "user_type": "registered", "profile_image": "https://graph.facebook.com/2246257368734706/picture?type=large", "display_name": "Alexandre Rodrigues", "link": "https://stackoverflow.com/users/9781834/alexandre-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 52858675, "answer_count": 2, "score": 1, "last_activity_date": 1539790616, "creation_date": 1539789337, "question_id": 52858251, "link": "https://stackoverflow.com/questions/52858251/makefile-object-file-generation-variable-substitution-and-other-questions", "title": "Makefile object file generation, variable substitution, and other questions", "body": "<p>I'm currently trying to create a Makefile for a c university project, but reading through the tutorials hasn't quite helped me (also, the makefile is not part of the evaluation process, and we aren't taught how to do it)</p>\n\n<p>My objective is making the makefile automatic, so it automatically creates object files from .c files in src (src/*.c), puts the object files in the bin folder, and links them into an executable in the main directory.</p>\n\n<pre><code>project/\n    bin/\n        (object files)\n    src/\n        (source files)\n    executable\n    Makefile\n</code></pre>\n\n<p>So far, I've roughly put together this makefile and test source code, but it doesn't work the way I intend it to, which I'll explain how just ahead:</p>\n\n<pre><code>#compiler used\nCOMPILER = gcc\n\n#flags for individual object file compilation\nFLAGS = -Wall -ansi -g\n#RELEASE\n# -Wall -ansi -O3\n#DEVELOPMENT\n# -Wall -ansi -g\n\n#source .c files\nSOURCE = $(wildcard src/*.c)\n#object files created\nOBJECTS = $(SOURCE:.c=.o)\nOBJECTS = $(SOURCE: src/=bin/)\n\n#executable name\nEXECUTABLE = app\n\n############################################################\n\nall: $(EXECUTABLE)\n\n$(EXECUTABLE): $(OBJECTS)\n    $(COMPILER) $(FLAGS) -o $(EXECUTABLE) $(OBJECTS)\n\n%.o: %.c\n    $(COMPILER) $(FLAGS) -c %&lt; -o %@\n</code></pre>\n\n<p>The result is the following command:</p>\n\n<pre><code>user@user-lenovo:~/Desktop/C Projects/AED/project$ make\ngcc -Wall -ansi -g -o app src/main.c src/test.c\n</code></pre>\n\n<p>Ironically, it works, but really shouldn't. It also defeats the purpose of having a makefile, as everything is compiled again once one change is detected.</p>\n\n<p>First of all, what I noticed is OBJECTS directly copied SOURCE, and didn't substitute .c for .o, or src/ for bin/. I've tried substituting the '=' for ':=' but the result is the same, and I don't quite understand what the difference between them is in the first place. My idea would be src/main.c becoming bin/main.o, for example.</p>\n\n<pre><code>%.o: %.c\n    $(COMPILER) $(FLAGS) -c %&lt; -o %@\n</code></pre>\n\n<p>This part is my also failed attempt at generating all the object files individually with a single target. I tried reading up on it, but couldn't figure out how these work: '%&lt;', '%@' or the '%.o' and '%.c'</p>\n\n<p>I do believe it isn't being run at all though, since no object files showed up.</p>\n\n<p>I hope you can help me fix this mess up, thanks in advance!</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1539789522, "post_id": 52858131, "comment_id": 92631527, "body": "What exactly do you intend to do with this number?  Are you performing some calculation on it?  If so, what exactly?"}, {"owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1539789616, "post_id": 52858131, "comment_id": 92631571, "body": "It&#39;s meant to go over BLE to a different device, hence the need to keep the memory footprint as small as possible."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1539791638, "post_id": 52858131, "comment_id": 92632709, "body": "What is the other end doing with it?  If it&#39;s just being printed as an ID it makes more sense to send it as text.  Sure, it will take up 20 bytes but then the use more closely fits the formatting as is less cumbersome and confusing."}, {"owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1539793262, "post_id": 52858131, "comment_id": 92633573, "body": "Once it gets to the other end, it&#39;ll just be saved in a database.  I do agree treating it as string would be less cumbersome.  There is user interaction involved so I&#39;ll need to see how much extra delay is cause by 10 more bytes over BLE."}], "answers": [{"comments": [{"owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "edited": false, "score": 0, "creation_date": 1539790929, "post_id": 52858738, "comment_id": 92632374, "body": "I did consider that but that makes for clunky code as well.  I now need to move around 2 variables as opposed to one.  To clarify, it&#39;s not used to print (I just included that as a minimum example).  The end result will be sent via Bluetooth Low Energy to another device."}, {"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "reply_to_user": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "edited": false, "score": 0, "creation_date": 1539791307, "post_id": 52858738, "comment_id": 92632558, "body": "This is just storing the information. Theoretically, it can be stored in 65 bits but this does not help you since it is sent byte by byte. So 9 is the minimum. You can convert the information to 9 bytes which you&#39;ll send and then represent them on the other device. Consider creating a struct of <code>uint64_t</code> and <code>uint8_t</code> assuming your function expects a pointer, cast the pointer to the struct to <code>uint8_t*</code> and send 9 bytes."}], "tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": true, "score": 1, "last_activity_date": 1539791718, "last_edit_date": 1539791718, "creation_date": 1539790825, "answer_id": 52858738, "question_id": 52858131, "link": "https://stackoverflow.com/questions/52858131/scanning-sscanf-large-integer-into-bytes/52858738#52858738", "title": "Scanning (sscanf) large integer into bytes", "body": "<p>Judging by the question and the OP comment you need a smaller footprint and will not use the number for any operations except print.</p>\n\n<p>Then, why don't you use the same technique to get the first 18 digits in the <code>uint64_t</code> and the last two in one <code>uint8_t</code>. </p>\n\n<pre><code>int main()\n{\n    printf(\"Hello World\");\n    char arr[21] = \"01234567890123456789\";\n    unsigned long long int a;\n    unsigned char b;\n\n    sscanf(arr, \"%18llu%2hhu\",&amp;a,&amp;b);\n\n    printf(\"%18llu%2hhu\",a,b);\n\n    return 0;\n }\n</code></pre>\n\n<p>Note that the leading zero will not be printed.</p>\n\n<p>This will reduce the memory footprint by 1 byte and obviously you cannot go less than this because it doesn't fit in 8 bytes(uint64_t).</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1539793109, "last_edit_date": 1539793109, "creation_date": 1539791410, "answer_id": 52858910, "question_id": 52858131, "link": "https://stackoverflow.com/questions/52858131/scanning-sscanf-large-integer-into-bytes/52858910#52858910", "title": "Scanning (sscanf) large integer into bytes", "body": "<p>Code can use a loop and <code>\"%n\"</code> to track scanning progress.</p>\n\n<p>Might not be prettier, yet does allow for easier M changes.</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n#include &lt;stdio.h&gt;\n#define M 10\n\nint parse_bytes(const char *resp) {\n  uint8_t bytes[M] = {0};\n  int n = 0;\n  sscanf(resp, \"+QCCID: %n\", &amp;n);\n  if (n == 0) return -1;  // missing prefix \n  int m;\n  for (m = 0; m &lt; M; m++) { \n    resp += n;\n    n = 0;\n    sscanf(resp, \"%2\" SCNu8 \"%n\", &amp;bytes[M - 1 - m], &amp;n);\n    if (n == 0) return -1;  // missing number\n  } \n  if (resp[n]) return -1;  // trailing junk\n\n  for (int i = m-1; i &gt;= 0; i--) {\n    printf(\"%02d\", bytes[i]);\n  }\n  return m;\n}\n</code></pre>\n\n<hr>\n\n<p>If code wanted to insure consecutive digits and no whitespace or sign characters, could add test:</p>\n\n<pre><code>    n = 0;\n    if (!isdigit((unsigned char) *resp)) return -1;  // digit expected.\n    sscanf(resp, \"%2\" SCNu8 \"%n\", &amp;bytes[M - 1 - m], &amp;n);\n</code></pre>\n\n<p>A case not handled.  OP asserted \"20 digit number\".  If less than that, we should re-think the whole approach.  Perhaps scan digit by digit into  <code>d[M*2]</code> and then form <code>bytes[]</code> from the \"right\" or maybe:</p>\n\n<pre><code>  int n1, n2 = 0; \n  sscanf(resp, \"+QCCID: %n%*[0-9]%n\", &amp;n1, &amp;n2);\n  if (n2 == 0 || n2 - n1 &gt; 2*M) fail();\n\n  // now process resp[n2-1] to resp[n1] with TBD code\n</code></pre>\n\n<p>Many possibilities.</p>\n"}, {"tags": [], "owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "is_accepted": false, "score": 0, "last_activity_date": 1539813570, "creation_date": 1539813570, "answer_id": 52864219, "question_id": 52858131, "link": "https://stackoverflow.com/questions/52858131/scanning-sscanf-large-integer-into-bytes/52864219#52864219", "title": "Scanning (sscanf) large integer into bytes", "body": "<p>My final solution is below.  I ended up with a bit field struct because it turned out that I need to use first 6 digits elsewhere.  Further, this is running on an embedded system with a <code>newlib nano</code> which doesn't support 64 bit formatting, so I can't scan/print <code>uint64_t</code>.  </p>\n\n<p>Of course, since you can't take an address of a bit field, I scan into <code>uint32_t</code> first and then create the struct.</p>\n\n<pre><code>typedef struct __attribute__((packed)) {\n  uint32_t d1_6   : 20;\n  uint32_t d7_12  : 20;\n  uint32_t d13_20 : 32;\n} lte_sim_iccid_t;\n\nlte_sim_iccid_t parse_into_struct() {\n  uint8_t bytes[10] = {0};\n\n  uint32_t i1 = 0, i2 = 0, i3 = 0;\n  sscanf(resp, \"+QCCID: %6u%6u%8u\", &amp;i1, &amp;i2, &amp;i3);\n\n  lte_sim_iccid_t s = { i1, i2, i3 };\n\n  // sanity check\n  printf(\"ICCID: %u %u %u (size %lu bytes)\\n\", s.d1_6, s.d7_12, s.d13_20, sizeof(s));\n  return s;\n}\n</code></pre>\n"}], "owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 52858738, "answer_count": 3, "score": 0, "last_activity_date": 1539813613, "creation_date": 1539788992, "last_edit_date": 1539813613, "question_id": 52858131, "link": "https://stackoverflow.com/questions/52858131/scanning-sscanf-large-integer-into-bytes", "title": "Scanning (sscanf) large integer into bytes", "body": "<p>I need to <code>sscanf</code> a 20 digit number, which is just out of range of <code>uint64_t</code>.  If I can't have the entire number in a <code>uint64_t</code>, I'd like to have it as <code>uint8_t[10]</code> (representing 2 digits per byte), which I can get doing this:</p>\n\n<pre><code>const char *resp = \"+QCCID: 89445003071864431280\";\n\nvoid parse_bytes() {\n  uint8_t bytes[10] = {0};\n  sscanf(resp, \"+QCCID: %2hhu%2hhu%2hhu%2hhu%2hhu%2hhu%2hhu%2hhu%2hhu%2hhu\", \n         &amp;bytes[9], &amp;bytes[8], &amp;bytes[7], &amp;bytes[6], &amp;bytes[5], \n         &amp;bytes[4], &amp;bytes[3], &amp;bytes[2], &amp;bytes[1], &amp;bytes[0]);\n\n  // print just for testing, not the end result\n  for(int i=9; i&gt;=0; i--) {\n    printf(\"%02d\", bytes[i]);\n  }\n}\n</code></pre>\n\n<p>This works just fine but is not particularly pretty code.  Is there a more concise way of scanning something like this into an array?</p>\n\n<p>To clarify the intent for the result:  the result won't be used in a calculation, it will be sent via Bluetooth Low Energy to another device.</p>\n\n<p>Update: I ended up going with a modified version of what @PetarVelev suggested.  I  used a bit field struct, for reasons outside the scope of this question.  In case anyone is interested, I posted my solution as one of the answers bellow.</p>\n"}, {"tags": ["c", "debugging"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539786756, "post_id": 52857329, "comment_id": 92629857, "body": "If you can view the assembler inlined between the C code lines, it will probably become clearer."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1539786790, "post_id": 52857329, "comment_id": 92629881, "body": "If you&#39;re going to (single-step) debug your program, compile with no optimizations (<code>gcc -O0 ...</code>) or debugging-friendly optimizations (<code>gcc -Og ...</code>). For <code>gcc</code>  see <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html</a>"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1539786847, "post_id": 52857329, "comment_id": 92629916, "body": "My guess you need to check your optimization strategy while compiling a debug binary"}], "answers": [{"tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": false, "score": 6, "last_activity_date": 1539787860, "last_edit_date": 1539787860, "creation_date": 1539786680, "answer_id": 52857390, "question_id": 52857329, "link": "https://stackoverflow.com/questions/52857329/how-to-stop-c-statements-executing-multiple-times/52857390#52857390", "title": "How to stop c statements executing multiple times?", "body": "<p>The output of the debugger has the job of printing the line number of the source code, while the code is executing.</p>\n\n<p>As compiler optimizations often mean that the executable of the program is altered such that it effectively runs the same, but isn't required to have the exact same text structure, this means that the running program being debugged might have a slightly different representation than the source code.</p>\n\n<p>Odds are your debugger is stepping over different instructions in the executable that map to the same line of source code, and is not actually attempting to open the PATH four times.</p>\n\n<p>To generate an executable that has a closer representation of the source code in structure, alter your compiler's optimizer to do minimal optimization.  For gcc, that should be the option:</p>\n\n<pre><code>-O0\n</code></pre>\n\n<p>These optimizations (if present) also explain why some lines seem to be skipped, or executed out-of-order (both scenarios you're likely to see if you debug optimized code long enough).</p>\n"}], "owner": {"reputation": 227, "user_id": 6610056, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3c186fa9c0c9cb4efef16a88521cb38e?s=128&d=identicon&r=PG&f=1", "display_name": "ssg", "link": "https://stackoverflow.com/users/6610056/ssg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1539787860, "creation_date": 1539786471, "question_id": 52857329, "link": "https://stackoverflow.com/questions/52857329/how-to-stop-c-statements-executing-multiple-times", "title": "How to stop c statements executing multiple times?", "body": "<p>I am facing one problem were I can see that c statements gets executed multiple times even-tough it is not called either using another threads or by other means,</p>\n\n<pre><code>63      BOOLEAN_T DRV_Init(void)\n(gdb) n\n70          volatile UI32_T                 base_addr = 0;\n(gdb)\n73          /* Lock interrupt. */\n(gdb)\n70          volatile UI32_T                 drv_base_addr = 0;\n(gdb)\n73          /* Lock interrupt. */\n(gdb)\n75\n(gdb)\n73          /* Lock interrupt. */\n(gdb)\n75\n(gdb)\n79              addr = 7;\n(gdb)\n81              subaddr2 = 0;\n(gdb)\n90          /* Open device. */\n(gdb)\n91          fd = open(PATH, O_RDWR | O_SYNC | O_DSYNC | O_RSYNC);\n(gdb)\n90          /* Open device. */\n(gdb)\n91          fd = open(PATH, O_RDWR | O_SYNC | O_DSYNC | O_RSYNC);\n(gdb)\n92\n(gdb)\n91          fd = open(PATH, O_RDWR | O_SYNC | O_DSYNC | O_RSYNC);\n(gdb)\n92\n(gdb)\n91          fd = open(PATH, O_RDWR | O_SYNC | O_DSYNC | O_RSYNC);\n(gdb)\n93          if (fd &lt; 0)\n(gdb)\n90          /* Open device. */\n(gdb)\n93          if (fd &lt; 0)\n</code></pre>\n\n<p>Please help me to understand above behavior, I tried searching the same question in stack overflow but did not get appropriate result, also I am seeing few of the lines got skipped in execution , I placed if condition before below lines which are not executed</p>\n\n<pre><code>79              addr = 7;\n(gdb)\n81              subaddr2 = 0;\n</code></pre>\n\n<p>Please clarify the doubts</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1539785536, "post_id": 52856951, "comment_id": 92628991, "body": "<code>c2 = &amp;c[1];</code> - There is no <code>c[1]</code>. You&#39;re code invokes <i>undefined behavior</i> upon dereference of <code>c2</code>. The array <code>c</code> has one element, and with zero-based indexing, that means <code>c[0]</code> is viable. <code>c[1]</code> is <i>not</i>."}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1539785718, "post_id": 52856951, "comment_id": 92629105, "body": "Array index starts from 0. So how is it possible to access c[1] when the size of the array is 1????"}, {"owner": {"reputation": 13, "user_id": 10464602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c98d4f5f8207b6ad1eaf38f1b4505e2d?s=128&d=identicon&r=PG&f=1", "display_name": "SALOMO", "link": "https://stackoverflow.com/users/10464602/salomo"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1539785796, "post_id": 52856951, "comment_id": 92629161, "body": "@WhozCraig so I must change the variable c[1] ?"}, {"owner": {"reputation": 13, "user_id": 10464602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c98d4f5f8207b6ad1eaf38f1b4505e2d?s=128&d=identicon&r=PG&f=1", "display_name": "SALOMO", "link": "https://stackoverflow.com/users/10464602/salomo"}, "reply_to_user": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1539785843, "post_id": 52856951, "comment_id": 92629198, "body": "@suvojit_007 I think the size of array starts from 0. So the array must be c[2] right?"}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 1, "creation_date": 1539785895, "post_id": 52856951, "comment_id": 92629237, "body": "If your array size is n then you can access from <b>0</b> to <b>n-1</b>."}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 2, "creation_date": 1539785960, "post_id": 52856951, "comment_id": 92629282, "body": "Yes the array size must be c[2] in order to access c[0] and c[1]"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1539786006, "post_id": 52856951, "comment_id": 92629316, "body": "I honestly don&#39;t even know what this code is trying to do (not that it matters). You claimed this &quot;worked&quot; correctly; not true. The undefined behavior I pointed was an originating issue. Another issue comes with your addendum in changing your <code>printf</code> format specifiers. Now, on top of the undefined behavior mentioned before, you&#39;re <i>lying</i> to <code>printf</code> by claiming it will be sent two <code>float</code>, then sending it two <code>int</code> instead (one of which isn&#39;t even valid). That&#39;s just more <i>undefined behavior</i>. If you don&#39;t have your compiler warning levels maxed, do so."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1539786216, "post_id": 52856951, "comment_id": 92629463, "body": "Yout title is &quot;Pointer points different data type&quot; and in the text you also mention pointers with different types. I suppose you want to address &quot;strict aliasing&quot; but there is however nothing in your code where two pointers are of different type."}, {"owner": {"reputation": 13, "user_id": 10464602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c98d4f5f8207b6ad1eaf38f1b4505e2d?s=128&d=identicon&r=PG&f=1", "display_name": "SALOMO", "link": "https://stackoverflow.com/users/10464602/salomo"}, "reply_to_user": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1539786234, "post_id": 52856951, "comment_id": 92629482, "body": "Thank you @suvojit_007  for your answer. Actually I&#39;m still new to this array and pointers so I don&#39;t really understand how to use them."}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1539786295, "post_id": 52856951, "comment_id": 92629531, "body": "@WhozCraig <i>I read that if we use pointer, the data type must be the same. But I&#39;ve test this code, and there is no error.</i> - I think now he has got his answer. c1 and c2 are pointer to <b>integer</b> not <b>float</b>"}, {"owner": {"reputation": 13, "user_id": 10464602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c98d4f5f8207b6ad1eaf38f1b4505e2d?s=128&d=identicon&r=PG&f=1", "display_name": "SALOMO", "link": "https://stackoverflow.com/users/10464602/salomo"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1539786309, "post_id": 52856951, "comment_id": 92629542, "body": "@WhozCraig sorry but actually i&#39;m new in this lesson so i don&#39;t really understand."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539786370, "post_id": 52856951, "comment_id": 92629585, "body": "@SALOMO <b><i>What</i></b> is it you don&#39;t understand??"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539786376, "post_id": 52856951, "comment_id": 92629590, "body": "@SALOMO what are you <i>actually</i> trying to do with your code? The code is pretty weird and wrong as already pointed out."}, {"owner": {"reputation": 13, "user_id": 10464602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c98d4f5f8207b6ad1eaf38f1b4505e2d?s=128&d=identicon&r=PG&f=1", "display_name": "SALOMO", "link": "https://stackoverflow.com/users/10464602/salomo"}, "edited": false, "score": 0, "creation_date": 1539786386, "post_id": 52856951, "comment_id": 92629597, "body": "Thanks for ur answer all. I will study this material more and more."}, {"owner": {"reputation": 13, "user_id": 10464602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c98d4f5f8207b6ad1eaf38f1b4505e2d?s=128&d=identicon&r=PG&f=1", "display_name": "SALOMO", "link": "https://stackoverflow.com/users/10464602/salomo"}, "edited": false, "score": 0, "creation_date": 1539786423, "post_id": 52856951, "comment_id": 92629624, "body": "Sorry my code seems so complicated. But now i got the reason."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1539786854, "post_id": 52856951, "comment_id": 92629922, "body": "@SALOMO <code>printf(&quot;\\nMatrice c is [%f ; %f]\\n&quot;, *c1, *c2);</code> Oh no, don&#39;t. Your <code>c1</code> is a pointer to <b>int</b>. So <code>*c1</code> is an <b>int</b>. To print an <b>int</b> use <code>%d</code>  (As others have mentioned, the problem with your original code is: <code>int *c1, *c2, c[1];</code> It shall be <code>int *c1, *c2, c[2];</code>"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539787093, "post_id": 52856951, "comment_id": 92630074, "body": "@SALOMO Your code is not complicated if you want to demonstrate something by using arrays and pointers. Otherwise just <code>int i_and_k = i + k; int j_and_l = j + l; printf(&quot;[%d; %d]\\n&quot;, i_and_k, j_and_l);</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": true, "score": 1, "last_activity_date": 1539786997, "last_edit_date": 1539786997, "creation_date": 1539786662, "answer_id": 52857388, "question_id": 52856951, "link": "https://stackoverflow.com/questions/52856951/pointer-points-different-data-type/52857388#52857388", "title": "Pointer points different data type", "body": "<pre><code>int* c1;    //pointer to int\nint c[1];   //int array with one element\nc1 = &amp;c[0]; // c1 points to the the first and only element of the array.\n\nc[0] = 5;   // the first element of the array c is 5\n*c1 = 5;    // The element to which the pointer is pointing is 5 (dereferencing)\n</code></pre>\n\n<p>In your code, the problem is that the array size is not enough.\nThere is no element <code>c[1]</code> so the behavior is undefined.</p>\n\n<p>This results in <code>segmentation fault</code> most often but you were unlucky.</p>\n\n<p>Declare the array <code>c</code> as <code>int c[2];</code>.</p>\n\n<p>Also, note what does the <code>[]</code> operator.<br>\nIf you define a variable it shows how much elements would this array hold - how much memory should be allocated.</p>\n\n<p>In expression <code>array[N]</code> is the same as <code>*(array + N)</code></p>\n"}], "owner": {"reputation": 13, "user_id": 10464602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c98d4f5f8207b6ad1eaf38f1b4505e2d?s=128&d=identicon&r=PG&f=1", "display_name": "SALOMO", "link": "https://stackoverflow.com/users/10464602/salomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 52857388, "answer_count": 1, "score": -4, "last_activity_date": 1539786997, "creation_date": 1539785434, "last_edit_date": 1539785662, "question_id": 52856951, "link": "https://stackoverflow.com/questions/52856951/pointer-points-different-data-type", "title": "Pointer points different data type", "body": "<p>I read that if we use pointer, the data type must be the same. But I've test this code, and there is no error. I think there'll be an error there. But nothing happens. The program works like it should be.  Why can we explain this? </p>\n\n<p>code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\nfloat i, j, k, l;\nint *c1, *c2, c[1];\n\nprintf(\"Enter i : \");\nscanf(\"%f\", &amp;i);\nprintf(\"Enter j : \");\nscanf(\"%f\", &amp;j);\nprintf(\"Enter k : \");\nscanf(\"%f\", &amp;k);\nprintf(\"Enter l : \");\nscanf(\"%f\", &amp;l);\n\nc1 = &amp;c[0];\n*c1 = i+k;\nc2 = &amp;c[1];\n*c2 = j+l;\nprintf(\"\\nMatrice c is [%d ; %d]\\n\", *c1, *c2);\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>output :</p>\n\n<pre><code>Enter i : 1\nEnter j : 2\nEnter k : 3\nEnter l : 4\n\nMatrice c is [4 ; 6]\n\nProcess returned 0 (0x0)   execution time : 1.447 s\nPress any key to continue.\n</code></pre>\n\n<p>I've edited this code</p>\n\n<pre><code>printf(\"\\nMatrice c is [%d ; %d]\\n\", *c1, *c2);\n</code></pre>\n\n<p>to become</p>\n\n<pre><code>printf(\"\\nMatrice c is [%f ; %f]\\n\", *c1, *c2);\n</code></pre>\n\n<p>And the output is error.</p>\n\n<pre><code>Enter i : 1\nEnter j : 2\nEnter k : 3\nEnter l : 4\n\nMatrice c is [0.000000 ; 42581666233418238000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000]\n\nProcess returned 0 (0x0)   execution time : 1.164 s\nPress any key to continue.\n</code></pre>\n"}, {"tags": ["c", "libwebsockets"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539785045, "post_id": 52856544, "comment_id": 92628655, "body": "Could you switch into <code>Build log</code> tab and read detailed compiler error output from there. It seems like library API of websokets you are using is newer then used in example code, so you need to make changes in your code or find newer example somewhere in github."}, {"owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539785771, "post_id": 52856544, "comment_id": 92629146, "body": "@VictorGubin i have added the build log output"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539787149, "post_id": 52856544, "comment_id": 92630108, "body": "Goto menu bar and choose  <code>Build-&gt;Rebuild</code>. 2. Have you added websockets incude and library directories to the <a href=\"https://www.learncpp.com/cpp-tutorial/a3-using-libraries-with-codeblocks/\" rel=\"nofollow noreferrer\">compiler and linker search patch</a>."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 1, "creation_date": 1539787211, "post_id": 52856544, "comment_id": 92630139, "body": "One of those questions with images and links..."}, {"owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539788816, "post_id": 52856544, "comment_id": 92631118, "body": "@VictorGubin Yeah i have added include and and library directories to the search path but still same errors"}], "owner": {"reputation": 11, "user_id": 10518927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e6ad77136e927cfb1a81d6eb7430eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Paine", "link": "https://stackoverflow.com/users/10518927/tim-paine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539785742, "creation_date": 1539784256, "last_edit_date": 1539785742, "question_id": 52856544, "link": "https://stackoverflow.com/questions/52856544/linking-libwebsockets-library", "title": "Linking libwebsockets library", "body": "<p>I have searched alot but didn't find anything reasonable to me. I want to link <a href=\"https://libwebsockets.org\" rel=\"nofollow noreferrer\">https://libwebsockets.org</a> to a C program. I have tried using builds available here <a href=\"https://ci.appveyor.com/project/lws-team/libwebsockets\" rel=\"nofollow noreferrer\">https://ci.appveyor.com/project/lws-team/libwebsockets</a> but those were giving errors when i used websocket server code available here <a href=\"https://gist.github.com/martinsik/3216369\" rel=\"nofollow noreferrer\">https://gist.github.com/martinsik/3216369</a>\nI got these errors when i used build with webserver code</p>\n\n<p><img src=\"https://i.stack.imgur.com/Fr8uv.png\" alt=\"Errors when i used the websocket server code\"></p>\n\n<p>Build Log\n<img src=\"https://i.stack.imgur.com/aTEOv.png\" alt=\"Build log\"></p>\n\n<p>I want to know how to build this library myself and i tried notes available here <a href=\"https://libwebsockets.org/lws-api-doc-master/html/md_READMEs_README_8build.html\" rel=\"nofollow noreferrer\">https://libwebsockets.org/lws-api-doc-master/html/md_READMEs_README_8build.html</a> but it was too complicated for me to understand. Can anyone help?</p>\n"}, {"tags": ["c", "linux", "windows", "sockets", "udp"], "comments": [{"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1539787308, "post_id": 52856463, "comment_id": 92630207, "body": "tcpdump perhaps as the first step"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1539787766, "post_id": 52856463, "comment_id": 92630483, "body": "Check your firewall settings on the windows box.  If the firewall is active, it\u2019s likely blocking incoming udp packets."}], "owner": {"reputation": 2149, "user_id": 649810, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/45b1f8c1496ad21fbb35e9dfb72ebb08?s=128&d=identicon&r=PG", "display_name": "m4n07", "link": "https://stackoverflow.com/users/649810/m4n07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539786564, "creation_date": 1539784034, "last_edit_date": 1539786564, "question_id": 52856463, "link": "https://stackoverflow.com/questions/52856463/problem-sending-msg-to-udpclient-on-windows-from-udpserver-on-linux", "title": "Problem sending msg to UDPClient on windows from UDPServer on linux", "body": "<p>I have the UDPServer program running on linux and UDPClient program running on windows 10.</p>\n\n<p>Note: In the UDP client program you have to add the linux server IP in the hash define.</p>\n\n<p>Compilation on windows: gcc -Wall -o UDPClient UDPClient.c -lws2_32 </p>\n\n<p><strong>Problem</strong>\nUDPServer receives msg from UDP client and replies back. But the UDPClient on windows doesnt receive the msg from windows.</p>\n\n<p>UDPServer.c (on linux)</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;unistd.h&gt; \n#include &lt;string.h&gt; \n#include &lt;sys/types.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;arpa/inet.h&gt; \n#include &lt;netinet/in.h&gt; \n\n#define PORT     6200 \n#define MAXLINE 1024 \n\n\nint main() { \n    int sockfd; \n    char buffer[MAXLINE]; \n    char *hello = \"Hello from server\"; \n    struct sockaddr_in servaddr, cliaddr;\n    int n;\n    socklen_t from_len = sizeof(struct sockaddr);\n    socklen_t to_len = sizeof(struct sockaddr);\n\n    // Creating socket file descriptor \n    if ( (sockfd = socket(AF_INET, SOCK_DGRAM, 0)) &lt; 0 ) { \n        perror(\"socket creation failed\"); \n        exit(EXIT_FAILURE); \n    } \n\n    memset(&amp;servaddr, 0, sizeof(servaddr)); \n    memset(&amp;cliaddr, 0, sizeof(cliaddr)); \n\n    // Filling server information \n    servaddr.sin_family    = AF_INET; // IPv4 \n    //servaddr.sin_addr.s_addr = inet_addr(IP_ADDR); ; \n    servaddr.sin_addr.s_addr = INADDR_ANY;\n    servaddr.sin_port = htons(PORT); \n\n    // Bind the socket with the server address \n    if ( bind(sockfd, (const struct sockaddr *)&amp;servaddr, sizeof(servaddr)) &lt; 0 ) \n    { \n        perror(\"bind failed\"); \n        exit(EXIT_FAILURE); \n    } \n\n    n = recvfrom(sockfd, (char *)buffer, MAXLINE, 0, ( struct sockaddr *) &amp;cliaddr, &amp;from_len); \n    buffer[n] = '\\0'; \n    printf(\"Client : %s ; IP = %s ; Port = %d\\n\", buffer,inet_ntoa(cliaddr.sin_addr), ntohs(cliaddr.sin_port));\n\n    sendto(sockfd, (const char *)hello, strlen(hello), MSG_CONFIRM, (const struct sockaddr *) &amp;cliaddr, to_len); \n    printf(\"Hello message sent.\\n\");  \n\n    return 0; \n}\n</code></pre>\n\n<hr>\n\n<pre><code>// UDP client (on windows)\n#include&lt;stdio.h&gt;\n#include&lt;winsock2.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;inttypes.h&gt; \n\n#define PORT     6200\n#define IP_ADDR \"xx.xx.xx.xx\"  //Add the linux server IP\n#define BUF_SIZE 1024\n\n/* Compilation: gcc -Wall -o UDPClient UDPClient.c -lws2_32 */\n\nint SetupWinSock()\n{\n    WSADATA wsa;\n\n    //printf(\"SetupWinSock: Initializing socket system\\n\");\n    if (WSAStartup(MAKEWORD(2,2),&amp;wsa) != 0)\n    {\n        printf(\"SetupWinSock: Failed. Error Code : %d\",WSAGetLastError());\n        return -1;\n    }\n    //printf(\"SetupWinSock: Initialization complete\\n\");\n\n    return 0;\n}\n\n\nSOCKET CreateUDPSocket()\n{\n    SOCKET udpSocket;\n\n    if((udpSocket = socket(AF_INET , SOCK_DGRAM , IPPROTO_UDP )) == INVALID_SOCKET)\n    {\n        printf(\"CreateUDPSocket: Failed to create socket : %d\" , WSAGetLastError());\n        return -1;\n    }\n    else\n    {\n        //printf(\"CreateUDPSocket: Socket creation successful\\n\");\n    }\n\n    return udpSocket;\n}\n\nint main() { \n    char buffer[BUF_SIZE]; \n    char *hello = \"Hello from client\"; \n    struct sockaddr_in servaddr, localAddr; \n        SOCKET udpSocket;\n    int n, len; \n\n        SetupWinSock();\n\n    // Creating socket file descriptor \n    udpSocket = CreateUDPSocket();\n\n    memset(&amp;servaddr, 0, sizeof(servaddr)); \n\n    // Server info\n    servaddr.sin_family = AF_INET; \n    servaddr.sin_port = htons(PORT); \n    servaddr.sin_addr.s_addr = inet_addr(IP_ADDR); \n    // Client info\n    localAddr.sin_family = AF_INET;\n    localAddr.sin_port = htons(PORT);\n    localAddr.sin_addr.s_addr = INADDR_ANY;\n\n    if ( bind(udpSocket,(const struct sockaddr *)&amp;localAddr, sizeof(localAddr)) &lt; 0 )\n    {\n      printf(\"Failed to bind\\n\");\n      return -1;\n    }\n\n    sendto(udpSocket, (const char *)hello, strlen(hello), 0, (const struct sockaddr *) &amp;servaddr, sizeof(servaddr)); \n    printf(\"Hello message sent.\\n\"); \n\n    n = recvfrom(udpSocket, (char *)buffer, BUF_SIZE, 0, (struct sockaddr *) &amp;servaddr, &amp;len); \n    buffer[n] = '\\0'; \n    printf(\"Server : %s\\n\", buffer);\n    fflush(stdout);\n\n        closesocket(udpSocket);\n        WSACleanup();\n\n        while(1);\n\n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1539782117, "post_id": 52855674, "comment_id": 92626674, "body": "You can see that <code>static_store</code>, <code>String Literal</code> and <code>Quoted String</code> are roughly in the same &quot;memory region&quot; (<code>0x10a62xxx</code>). So are <code>auto_store</code> and <code>Auto char Array</code> (<code>0x7ffee55df</code>). The rest (dynamic allocation) is still in another &quot;region&quot; (<code>0x7fbf1d40</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 9, "last_activity_date": 1539783405, "last_edit_date": 1539783405, "creation_date": 1539782223, "answer_id": 52855852, "question_id": 52855674, "link": "https://stackoverflow.com/questions/52855674/a-program-uses-different-regions-of-memory-for-static-objects-automatic-objects/52855852#52855852", "title": "A program uses different regions of memory for static objects, automatic objects, and dynamically allocated objects", "body": "<p>The <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\">C standard</a> states that an object can have one of 4 different <strong>storage durations</strong>.  These are:</p>\n\n<ul>\n<li>static</li>\n<li>automatic</li>\n<li>allocated</li>\n<li>thread</li>\n</ul>\n\n<p>The code above addresses the first 3 of these.</p>\n\n<p>A <strong>static</strong> object is is declared either at file scope or at local scope with the <code>static</code> modifier.  String literals are also static objects.</p>\n\n<p>An <strong>automatic</strong> object, typically referred to as a local variable, it declared within a function or an enclosing scope.</p>\n\n<p>An <strong>allocated</strong> object is one whose memory is returned by an allocation function such as <code>malloc</code>.</p>\n\n<p>In practice, compilers will typically place each of these object types in a different area of memory.  Static objects are typically placed in the data section of an executable, automatic (read: local) objects are typically stored on the <strong>stack</strong>, and allocated objects are typically stored on the <strong>heap</strong>.</p>\n\n<p>String literals in particular are static objects, and are typically placed in a special part of the data section marked read-only.</p>\n\n<p>These regions are typically in different distinct regions of memory, however they are not required to be.  So while in practice the addresses of objects in each of these regions will be noticeably different, they aren't required to be.</p>\n\n<p>So you don't really need to \"assure\" that different types of variables are in different regions.  The compiler takes care of that for you depending on how you define them.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1539782559, "post_id": 52855916, "comment_id": 92626969, "body": "(String literals don&#39;t necessarily end up in .rodata, but you get the idea)"}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539814976, "post_id": 52855916, "comment_id": 92643108, "body": "Why are you showing two <code>static int</code> variables (<code>bss1</code> and <code>data1</code>) in the same context (inside <code>main</code>)? The difference seems to be that one is initialised and the other one isn&#39;t, but does that matter? Maybe you wanted to put one of them outside of <code>main</code>?"}, {"owner": {"reputation": 2683, "user_id": 3063736, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/siang.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3063736/mark"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539817459, "post_id": 52855916, "comment_id": 92643783, "body": "@FabioTurati, with some compilers, it matters, with others, it doesn&#39;t."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539844341, "post_id": 52855916, "comment_id": 92649901, "body": "@FabioTurati Because I wanted to illustrate that bss and data end up in quite different address spaces, as shown by the output example. Yes, initialization matters. <a href=\"https://electronics.stackexchange.com/a/237759/6102\">This</a> might be helpful in order to understand the different sections (it was written for embedded systems for applies universally, except there&#39;s no true NVM on a PC)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2683, "user_id": 3063736, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/siang.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3063736/mark"}, "edited": false, "score": 1, "creation_date": 1539844392, "post_id": 52855916, "comment_id": 92649919, "body": "@Mark It has nothing to do with the compiler but rather linker format standards and the &quot;CRT&quot; executed before main() is called."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 19, "last_activity_date": 1548838603, "last_edit_date": 1548838603, "creation_date": 1539782401, "answer_id": 52855916, "question_id": 52855674, "link": "https://stackoverflow.com/questions/52855674/a-program-uses-different-regions-of-memory-for-static-objects-automatic-objects/52855916#52855916", "title": "A program uses different regions of memory for static objects, automatic objects, and dynamically allocated objects", "body": "<p>Different regions have very different addresses. If they were in the same region, they would have similar addresses. Better example, where we allocate 2 objects in each region:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (void)\n{\n  int stack1;\n  int stack2;\n  static int bss1;\n  static int bss2;\n  static int data1=1;\n  static int data2=1;\n  int* heap1 = malloc(1);\n  int* heap2 = malloc(1);  \n  char* rodata1 = \"hello\";\n  char* rodata2 = \"world\";\n\n  printf(\".stack\\t%p %p\\n\",  &amp;stack1,  &amp;stack2);\n  printf(\".bss\\t%p %p\\n\",    &amp;bss1,    &amp;bss2);\n  printf(\".data\\t%p %p\\n\",   &amp;data1,   &amp;data2);\n  printf(\".heap\\t%p %p\\n\",   heap1,    heap2);\n  printf(\".rodata\\t%p %p\\n\", rodata1,  rodata2);\n\n  free(heap1);\n  free(heap2);\n}\n</code></pre>\n\n<p>Output (for example):</p>\n\n<pre><code>.stack  000000000022FE2C 000000000022FE28\n.bss    0000000000407030 0000000000407034\n.data   0000000000403010 0000000000403014\n.heap   0000000000477C50 0000000000477C70\n.rodata 0000000000404000 0000000000404006\n</code></pre>\n\n<p>As you can see the two variables in the same segment have nearly identical addresses, the only difference being the size of the objects (and possibly some room for alignment). While they have very different addresses compared to variables in the other segments.</p>\n"}, {"tags": [], "owner": {"reputation": 555, "user_id": 1142788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea6902724f1b6e3383db234af25fdf70?s=128&d=identicon&r=PG", "display_name": "yussuf", "link": "https://stackoverflow.com/users/1142788/yussuf"}, "is_accepted": false, "score": 1, "last_activity_date": 1539782638, "creation_date": 1539782638, "answer_id": 52856007, "question_id": 52855674, "link": "https://stackoverflow.com/questions/52855674/a-program-uses-different-regions-of-memory-for-static-objects-automatic-objects/52856007#52856007", "title": "A program uses different regions of memory for static objects, automatic objects, and dynamically allocated objects", "body": "<p>What might help a bit to get the actual sections allocated for the program is the nm command, there you could e.g. see the static_store offset.</p>\n\n<p><code>static_store: 30 at 0x600b00</code>\n==> <code>0000000000600b00 D static_store</code></p>\n\n<p>See it live on coliru: <a href=\"http://coliru.stacked-crooked.com/a/1b45e01f508ec7b7\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/1b45e01f508ec7b7</a></p>\n\n<p>Note the attached nm command:\n<code>gcc main.cpp &amp;&amp; ./a.out &amp;&amp; nm a.out</code></p>\n\n<p>However, you have to keep in mind that you're typically on a system with MMU thus having virtual memory addresses mapped to real memory.</p>\n\n<p>Find more infos e.g. on <a href=\"https://www.embeddedrelated.com/showarticle/900.php\" rel=\"nofollow noreferrer\">https://www.embeddedrelated.com/showarticle/900.php</a></p>\n"}, {"tags": [], "owner": {"reputation": 6958, "user_id": 6893866, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/aefa0df51c67447c39a26252720cea2e?s=128&d=identicon&r=PG&f=1", "display_name": "Tezra", "link": "https://stackoverflow.com/users/6893866/tezra"}, "is_accepted": false, "score": 0, "last_activity_date": 1539807096, "creation_date": 1539807096, "answer_id": 52862886, "question_id": 52855674, "link": "https://stackoverflow.com/questions/52855674/a-program-uses-different-regions-of-memory-for-static-objects-automatic-objects/52862886#52862886", "title": "A program uses different regions of memory for static objects, automatic objects, and dynamically allocated objects", "body": "<p>I want to try and explain this in a more simple way.</p>\n\n<p><code>0x...</code> is a hexadecimal string that represents a string of binary bits. You can think of it as representing a number, but shorthand because you don't need to know the number, just it's relative value to other similarly coded numbers. So this means that the \"address value\" is actually just a number.</p>\n\n<p>Why use numbers to represent memory locations? Because for all intents and purposes, memory is just a really large byte array, who's values can be read by index. C logically (not physically) divides this memory array into different sections for efficient storage. So the closer 2 address locations are in memory, the closer they are together in that byte array representation.</p>\n\n<p>The address range available to any application is determined at runtime, and is not actually any part of specific memory spaces. So in all fairness, there is no why to know for sure that certain items are in a certain memory region. Just that it is highly statistically implausible for 2 objects close together in memory to be in different regions.</p>\n"}], "owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 977, "favorite_count": 4, "accepted_answer_id": 52855916, "answer_count": 4, "score": 15, "last_activity_date": 1548838603, "creation_date": 1539781759, "last_edit_date": 1542100554, "question_id": 52855674, "link": "https://stackoverflow.com/questions/52855674/a-program-uses-different-regions-of-memory-for-static-objects-automatic-objects", "title": "A program uses different regions of memory for static objects, automatic objects, and dynamically allocated objects", "body": "<p>I am following the book <em>\"C Primer Plus\"</em> and encounter a problem to understand the regions of memory. In the book, it states:</p>\n\n<blockquote>\n  <p>Typically, a program uses different regions of memory for static objects, automatic objects, and dynamically allocated objects. Listing 12.15 illustrates this point.</p>\n</blockquote>\n\n<pre><code>// where.c -- where's the memory?\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint static_store = 30;\nconst char * pcg = \"String Literal\";\nint main(void)\n{\n    int auto_store = 40;\n    char auto_string[] = \"Auto char Array\";\n    int *pi;\n    char *pcl;\n\n    pi = (int *) malloc(sizeof(int));\n    *pi = 35;\n    pcl = (char *) malloc(strlen(\"Dynamic String\") + 1);\n    strcpy(pcl, \"Dynamic String\");\n\n    printf(\"static_store: %d at %p\\n\", static_store, &amp;static_store);\n    printf(\"  auto_store: %d at %p\\n\", auto_store, &amp;auto_store);\n    printf(\"         *pi: %d at %p\\n\", *pi, pi);\n    printf(\"  %s at %p\\n\", pcg, pcg);\n    printf(\" %s at %p\\n\", auto_string, auto_string);\n    printf(\"  %s at %p\\n\", pcl, pcl);\n    printf(\"   %s at %p\\n\", \"Quoted String\", \"Quoted String\");\n    free(pi);\n    free(pcl);\n\n    return 0;\n}\n</code></pre>\n\n<p>Run the code and get:</p>\n\n<pre><code>static_store: 30 at 0x10a621040\n  auto_store: 40 at 0x7ffee55df768\n         *pi: 35 at 0x7fbf1d402ac0\n  String Literal at 0x10a620f00\n Auto char Array at 0x7ffee55df770\n  Dynamic String at 0x7fbf1d402ad0\n   Quoted String at 0x10a620f9b\n</code></pre>\n\n<p>the book's conclusion:</p>\n\n<blockquote>\n  <p>As you can see, static data, including string literals occupies one region, automatic data a second region, and dynamically allocated data a third region (often called a memory heap or free store).</p>\n</blockquote>\n\n<p>I could figure out they are of different address. How could I assure that they are of different regions?</p>\n"}, {"tags": ["c", "mergesort"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539781727, "post_id": 52855544, "comment_id": 92626435, "body": "Please indent your code. I&#39;m sure in your tutorial the code is indented correctly."}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 2, "creation_date": 1539781770, "post_id": 52855544, "comment_id": 92626461, "body": "You need to give a more specific description than &quot;it doesn&#39;t seem to do anything&quot;."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1539781803, "post_id": 52855544, "comment_id": 92626479, "body": "Welcome to Stack Overflow. You mention that you got some warnings. Good. Now please <a href=\"https://stackoverflow.com/posts/52855544/edit\">edit</a> the question and paste those warnings into your question body, essentially providing a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10518637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wRq7iZxV2U8/AAAAAAAAAAI/AAAAAAAAA2M/pwV_mpK8XVI/photo.jpg?sz=128", "display_name": "Lucas van B", "link": "https://stackoverflow.com/users/10518637/lucas-van-b"}, "edited": false, "score": 0, "creation_date": 1539798045, "post_id": 52855813, "comment_id": 92635861, "body": "Thanks! you are the best"}], "tags": [], "owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "is_accepted": true, "score": 1, "last_activity_date": 1539784687, "last_edit_date": 1539784687, "creation_date": 1539782134, "answer_id": 52855813, "question_id": 52855544, "link": "https://stackoverflow.com/questions/52855544/mergesort-bug-warnings/52855813#52855813", "title": "Mergesort bug + warnings", "body": "<p>Here you're incrementing <code>i</code> but you should increment <code>j</code> in <code>Merge</code> function.</p>\n\n<pre><code> while(j&lt;mR)\n        {\n        a[k]=R[j];\n        j++;\n        k++;\n        }\n</code></pre>\n\n<p>Edit:</p>\n\n<p>put function declation after the header files <code>void Merge(int *a,int *L,int *R,int length);</code> otherwise you will get <code>implicit declaration of function \u2018Merge\u2019</code> warning.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nvoid Merge(int *a,int *L,int *R,int length);\n\n//rest of your code\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10518637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wRq7iZxV2U8/AAAAAAAAAAI/AAAAAAAAA2M/pwV_mpK8XVI/photo.jpg?sz=128", "display_name": "Lucas van B", "link": "https://stackoverflow.com/users/10518637/lucas-van-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 52855813, "answer_count": 1, "score": -3, "last_activity_date": 1539784687, "creation_date": 1539781388, "last_edit_date": 1539782141, "question_id": 52855544, "link": "https://stackoverflow.com/questions/52855544/mergesort-bug-warnings", "title": "Mergesort bug + warnings", "body": "<p>I have the following code, followed it form a tutorial, and it doesn't seem to do anything. I tried debugging it with KDB but I can't find the problem why it doesn't sort.</p>\n\n<p>Maybe someone on here can help me, thanks in advance!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid Mergesort(int *a, int length) {\n    int i = 0;\n    int mid = 0;\n    int *L, *R;\n    mid = length / 2;\n    if (length &lt; 2)\n        return;\n    else {\n        L = (int*)malloc(sizeof(int) * mid);   \n        R = (int*)malloc(sizeof(int) * (length - mid));\n        for (i = 0; i &lt; mid; i++) {\n            L[i] = a[i];\n        }\n        for (i = mid; i &lt; length; i++) {\n            R[i - mid] = a[i];\n        }\n        Mergesort(L, mid);\n        Mergesort(R, length - mid);\n        Merge(a, L, R, length);\n    }\n}\n\nvoid Merge(int *a, int *L, int *R, int length) {\n    int i = 0, j = 0, k = 0;\n    int mL, mR;\n    mL = length / 2;\n    mR = length - mL;\n\n    while (i &lt; mL &amp;&amp; j &lt; mR) {\n         if (L[i] &lt; R[j]) {\n             a[k] = L[i];\n             i++;\n         } else {\n             a[k] = R[j];\n             j++;\n         }\n         k++;\n    }\n    while (i &lt; mL) {\n        a[k] = L[i];\n        i++;\n        k++;\n    }\n    while (j &lt; mR) {\n        a[k] = R[j];\n        i++;\n        k++;\n    }\n}\n\nvoid main() {\n    int a[7] = { 5, 4, 99, 13, 34, 54, 2 };\n    int u = 0;\n    Mergesort(a, 7);     // call to Mergesort\n\n    for (u = 0; u &lt; 7; u++) {\n        printf(\" %d\\t\", a[u]);   \n    }\n    printf(\"\\n\\n\\n\");\n}   \n</code></pre>\n\n<p>I would really appreciate it since I need to understand it before Thursday next week :P </p>\n"}, {"tags": ["c", "multithreading", "memory", "malloc", "heap-corruption"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1539781559, "post_id": 52855450, "comment_id": 92626323, "body": "C allows more than one character for variable names. Use them. And if you are not forced to use C89 but C99 or higher declare and define variables where they are used. Next familiarize yourself with your favourite debugger. Your <code>load_sentence()</code> does not do what its name suggests."}, {"owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "edited": false, "score": 0, "creation_date": 1539781785, "post_id": 52855450, "comment_id": 92626469, "body": "It is running for me in ideone: <a href=\"https://ideone.com/QVOALf\" rel=\"nofollow noreferrer\">ideone.com/QVOALf</a> with your input <code>aaaaaaaaa.aaaaaaaaaaaaa.aaaaaaaaaaaaaaaaaa.</code>"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 1, "creation_date": 1539782008, "post_id": 52855450, "comment_id": 92626613, "body": "you are corrupting memory. your <code>text</code> has place for only 10 pointers. though your <code>load_sentence</code> can access as many as the sentence lenght is, more than 10 for <code>aaaa...</code>"}, {"owner": {"reputation": 15, "user_id": 9518006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c8a5abc50c16290ca06ad1cf404152?s=128&d=identicon&r=PG&f=1", "display_name": "erika", "link": "https://stackoverflow.com/users/9518006/erika"}, "edited": false, "score": 0, "creation_date": 1539782204, "post_id": 52855450, "comment_id": 92626729, "body": "I know C allows more than one character for variable names, I&#39;m sorry it&#39;s not that readable this way. But it&#39;s not the problem, right? Why do you say that function <code>load_sentence()</code>does not do what its name suggests? It indeed copies a sentence, pointed by pointer <code>p</code>, in a bidimensional array <code>q</code> at position <code>i</code>."}, {"owner": {"reputation": 15, "user_id": 9518006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c8a5abc50c16290ca06ad1cf404152?s=128&d=identicon&r=PG&f=1", "display_name": "erika", "link": "https://stackoverflow.com/users/9518006/erika"}, "edited": false, "score": 0, "creation_date": 1539782743, "post_id": 52855450, "comment_id": 92627103, "body": "Serge, can you please explain better what you&#39;re trying to say? I know there are only 10 pointers, but they are, pointers to pointers,  it means that in these way this code can read only 10 sentences..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539782892, "post_id": 52855450, "comment_id": 92627202, "body": "You need to null terminate them there strings. <code>char alphabet[26+1] = &quot;abc...</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539783015, "post_id": 52855450, "comment_id": 92627278, "body": "As in, you ran into this little pitfall: <a href=\"https://stackoverflow.com/a/52385480/584518\">stackoverflow.com/a/52385480/584518</a>"}, {"owner": {"reputation": 15, "user_id": 9518006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c8a5abc50c16290ca06ad1cf404152?s=128&d=identicon&r=PG&f=1", "display_name": "erika", "link": "https://stackoverflow.com/users/9518006/erika"}, "edited": false, "score": 0, "creation_date": 1539783597, "post_id": 52855450, "comment_id": 92627679, "body": "Thank you for your comment Lundin, but it seems that modifying that doesn&#39;t solve the problem..."}, {"owner": {"reputation": 1876, "user_id": 2353816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/t5smr.jpg?s=128&g=1", "display_name": "Anders Cedronius", "link": "https://stackoverflow.com/users/2353816/anders-cedronius"}, "edited": false, "score": 0, "creation_date": 1539784900, "post_id": 52855450, "comment_id": 92628555, "body": "I guess it&#39;s a school project to learn threaded programming? if not.. remove the mutex and threading it will not speed up the process as the code it&#39;s written... Also why do you read sentence by sentence when you present the data flat anyway?"}, {"owner": {"reputation": 15, "user_id": 9518006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c8a5abc50c16290ca06ad1cf404152?s=128&d=identicon&r=PG&f=1", "display_name": "erika", "link": "https://stackoverflow.com/users/9518006/erika"}, "edited": false, "score": 0, "creation_date": 1539785164, "post_id": 52855450, "comment_id": 92628745, "body": "Yeah, school request... Our professor wasn&#39;t indeed that helpful, unfortunately. The request is to read the text this way, sentence by sentence."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9518006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c8a5abc50c16290ca06ad1cf404152?s=128&d=identicon&r=PG&f=1", "display_name": "erika", "link": "https://stackoverflow.com/users/9518006/erika"}, "edited": false, "score": 0, "creation_date": 1539801702, "post_id": 52858410, "comment_id": 92637630, "body": "Anders Cedronius, thank you for your answer at this problem, it was useful. Unfortunately, the assignment requires those passages, that&#39;s why I introduce those functions ;( Anyway, thanks! :)"}], "tags": [], "owner": {"reputation": 1876, "user_id": 2353816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/t5smr.jpg?s=128&g=1", "display_name": "Anders Cedronius", "link": "https://stackoverflow.com/users/2353816/anders-cedronius"}, "is_accepted": false, "score": 0, "last_activity_date": 1539811400, "last_edit_date": 1539811400, "creation_date": 1539789760, "answer_id": 52858410, "question_id": 52855450, "link": "https://stackoverflow.com/questions/52855450/c-multithreading-count-frequency-of-letters-causes-memory-error/52858410#52858410", "title": "C - Multithreading count frequency of letters causes memory error", "body": "<p>Erika,</p>\n\n<p>Since I don't really know your assignment please see this as just another way out of a 1000 to count characters. I have not checked it for bugs, rewrite to your needs. Anyhow this is how I would have solved it. If memory is sparse I would read character by character from the file until \".\". Anyhow hope it helps you and you get great grades :-)...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdatomic.h&gt;\n\n#define MAX_THREADS 100\natomic_int threadCount;\n#define NCHAR 26\nchar alphabet[NCHAR] = \"abcdefghijklmnopqrstuvwxyz\";\natomic_int count[NCHAR];\n\n\nvoid* count_letter(void * s){\n    threadCount++;\n    char* p = (char*) s;\n        for (int i=0; i&lt;NCHAR; i++)\n            if (*p == alphabet[i])\n                count[i]++;\n    threadCount--;\n    return NULL;\n}\n\nint main(int argc, char* argv[]){\n\n    //Init variables\n    FILE *file;\n    char *myText;\n    unsigned long fileLen;\n    int deadLockGuard=0;\n    threadCount=0;\n\n    //Open the file\n    file = fopen(argv[1], \"rb\");\n    if (!file) {\n        fprintf(stderr, \"Unable to open file %s\", argv[1]);\n        return EXIT_FAILURE;\n    }\n    fseek(file, 0, SEEK_END);\n    fileLen=ftell(file);\n    rewind(file);\n\n    //reserve memory and read the file\n    myText=(char *)malloc(fileLen+1);\n    if (!myText) {\n        fprintf(stderr, \"Memory error!\");\n        fclose(file);\n        return EXIT_FAILURE;\n    }\n    fread(myText, fileLen, 1, file);\n    fclose(file);\n\n    //Get each sentence ending with a . and then for each character look at the count for each character in it's own thread.\n    char *subString = strtok(myText, \".\"); //This is your sentence/load_sentence method\n    while (subString != NULL) {\n        for (int v = 0;v&lt;strlen(subString);v++) { //This is your frequency method\n        deadLockGuard=0;\n        while (threadCount &gt;= MAX_THREADS) {\n            usleep(100); //Sleep 0.1ms\n            if(deadLockGuard++ == 10000) {\n                printf(\"Dead-lock guard1 triggered.. Call Bill Gates for help!\"); //No free threads after a second.. Either the computer is DEAD SLOW or we got some creepy crawler in da house.\n                return EXIT_FAILURE;\n            }\n        }\n\n        pthread_t tid; //Yes you can overwrite it.. I use a counter to join the workers.\n        pthread_create(&amp;tid, NULL, count_letter, (void*) subString+v);\n    }\n        subString = strtok(NULL, \".\");\n    }\n    deadLockGuard=0;\n    //pthread_join all the still woring threads\n    while (threadCount) {\n        usleep(1000); //sleep a milli\n        if(deadLockGuard++ == 2*1000) {\n            printf(\"Dead-lock guard2 triggered.. Call Bill Gates for help!\"); //Threads are running after 2 seconds.. Exit!!\n            return EXIT_FAILURE;\n        }\n    }\n    //Garbage collect and print the results.\n    free(myText);\n    for (int j=0; j&lt;NCHAR; j++)\n        printf(\"%c : %d times\\n\", alphabet[j], count[j]);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 9518006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c8a5abc50c16290ca06ad1cf404152?s=128&d=identicon&r=PG&f=1", "display_name": "erika", "link": "https://stackoverflow.com/users/9518006/erika"}, "edited": false, "score": 0, "creation_date": 1539811097, "post_id": 52862717, "comment_id": 92641870, "body": "Thank you rafix07 for the explanation! I really had a hard time to figure out. Memory management with C it&#39;s not that easy...! I&#39;ve added that code and now it works fine. Thanks :)"}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 0, "last_activity_date": 1539807382, "last_edit_date": 1539807382, "creation_date": 1539806361, "answer_id": 52862717, "question_id": 52855450, "link": "https://stackoverflow.com/questions/52855450/c-multithreading-count-frequency-of-letters-causes-memory-error/52862717#52862717", "title": "C - Multithreading count frequency of letters causes memory error", "body": "<p>Your previous version with <code>mutex</code> had undefined behaviour because you initialized mutex multiple times, according to <a href=\"https://linux.die.net/man/3/pthread_mutex_init\" rel=\"nofollow noreferrer\">reference</a>:</p>\n\n<blockquote>\n  <p>Attempting to initialize an already initialized mutex results in\n  undefined behavior.</p>\n</blockquote>\n\n<p>You are accesing <code>count</code> concurrently, so you have to use mutex to make thread-safe code. You called <code>pthread_mutex_init</code> in <code>count_letter</code> it is incorrect, this function is the body of your thread (multiple initialization of mutex without destroying it leads to UB), you should call <code>pthread_mutex_init</code> only once, for instance as first line in main function:</p>\n\n<pre><code>int main() {\n pthread_mutex_init(&amp;mtx,NULL);\n</code></pre>\n\n<p>before return add</p>\n\n<pre><code> pthread_mutex_destroy(&amp;mtx);\n</code></pre>\n\n<p>Critical section in your count_letter function is line </p>\n\n<pre><code>count[i]++;\n</code></pre>\n\n<p>you should modify it as follows</p>\n\n<pre><code>pthread_mutex_lock(&amp;mtx);\ncount[i]++;\npthread_mutex_unlock(&amp;mtx);\n</code></pre>\n\n<hr>\n\n<p>Now, return to <code>sentence</code> implementation, you need to check if <code>*p</code> doesn't point to null terminator before comparing with <code>.</code>:</p>\n\n<pre><code>for (i=0; *p &amp;&amp; *p != '.'; i++){ \n          ^^ added\n</code></pre>\n\n<p>without testing it,  <code>\\0</code> != <code>.</code> returns true and your loop continues ...</p>\n"}], "owner": {"reputation": 15, "user_id": 9518006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c8a5abc50c16290ca06ad1cf404152?s=128&d=identicon&r=PG&f=1", "display_name": "erika", "link": "https://stackoverflow.com/users/9518006/erika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 52862717, "answer_count": 2, "score": 0, "last_activity_date": 1539811400, "creation_date": 1539781097, "last_edit_date": 1539806647, "question_id": 52855450, "link": "https://stackoverflow.com/questions/52855450/c-multithreading-count-frequency-of-letters-causes-memory-error", "title": "C - Multithreading count frequency of letters causes memory error", "body": "<p>I'm trying to use C multithreading to find out the frequency of each alphabet letter in a text file. Assignment is to: 1) write a function that read every single sentence in a text, ended by '.' 2) write a function that load a sentence in a bidimensional array 3) write a function that generates a pthread for every letter for every sentence (pthread function add 1 to a counter for that letter). \nEDIT: I figured out with Valgrind that the problem is in <code>sentence</code> function, by I dont understand why.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/types.h&gt;\n\nchar alphabet[26] = \"abcdefghijklmnopqrstuvwxyz\";\nint count[26];\n\nchar* sentence(char * s){\n    char* p;\n    char* q;\n    char* arr;\n    int i;\n    p = s;\n    q = malloc(100);\n    arr = q;\n    for (i=0; *p != '.'; i++){ \n        *q = *p;\n        q++;\n        p++; \n    }\n    *q = '\\0';\n    return arr;\n}\n\nchar** load_sentence(char* p, char** q, int i){\n    q[i] = malloc(strlen(p)+1);\n    strcpy(q[i], p);\n    return q;\n}\n\nvoid* count_letter(void * s){\n    char* p = (char*) s;\n    int i;\n    for (i=0; i&lt;26; i++){\n        if (*p == alphabet[i]){\n            count[i]++;\n        }\n    }\n}\n\nvoid frequency(char* str){\n    char* s = str;\n    int i, j, l;\n    l = strlen(str);\n    pthread_t tid[l];\n    for (i=0; i&lt;l; i++){\n        pthread_create(&amp;tid[i], NULL, count_letter, (void*) s);\n        s++;\n    }\n    for (j=0; j&lt;l; j++){\n        pthread_join(tid[j], NULL);\n    }\n}\n\n\nint main(int argc, char* argv[]){\n\n    int fd;\n    char buff[100];\n    fd = open(argv[1], O_RDONLY);\n    char ** text = malloc(10*sizeof(char*));\n    read(fd, buff, sizeof(buff));\n    char* start = buff;\n    int i = 0; //number of phrases!\n    char* p = NULL;\n\n    while (*(p = sentence(start)) != '\\0'){\n        text = load_sentence(p, text, i);\n        start += strlen(p)+1;\n        i++;\n   }\n\n   int j, k;\n\n   for (k=0; k&lt;i; k++){\n        frequency(text[k]);\n   }\n\n   for (j=0; j&lt;26; j++){\n        printf(\"%c : %d times\\n\", alphabet[j], count[j]);\n   }\n}\n</code></pre>\n\n<p>It looks like that with cases like this:\n    <code>hope it's a good reading. bye.</code>\nThe output is correct:</p>\n\n<pre><code>a : 2 times\nb : 1 times\nc : 0 times\nd : 2 times\ne : 3 times\nf : 0 times\ng : 3 times\nh : 1 times\ni : 2 times\nj : 0 times\nk : 0 times\nl : 0 times\nm : 0 times\nn : 1 times\no : 3 times \np : 1 times\nq : 0 times\nr : 1 times\ns : 1 times\nt : 1 times\nu : 0 times\nv : 0 times\nw : 0 times\nx : 0 times\ny : 1 times\nz : 0 times\n</code></pre>\n\n<p>With others, a \"memory error\", that begins with <code>free() : invalid next size (normal)</code>. The error has many lines of memory map and ends with abortion. </p>\n\n<p>I'm quite new to C, sorry for my inexperience.</p>\n\n<p>Is it necessary to introduce a <code>mutex</code> in this case?</p>\n"}, {"tags": ["c", "segmentation-fault"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10490715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e7471980c0aca4022584061905833c?s=128&d=identicon&r=PG&f=1", "display_name": "JulienRC", "link": "https://stackoverflow.com/users/10490715/julienrc"}, "edited": false, "score": 0, "creation_date": 1539809107, "post_id": 52855207, "comment_id": 92641021, "body": "But I don&#39;t understand when I need to restore the overwritten instructions because when the program B stop at fgets, my program A starts and stops at the second waitpid. If a put a ptrace(PTRACE_POKETEXT, pid, address, theOldInstruction) after the waitpid, it will never be seen by B and if I put ptrace before the waitpid I will overwritten at the trap and B will never execute the trap."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 39, "user_id": 10490715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e7471980c0aca4022584061905833c?s=128&d=identicon&r=PG&f=1", "display_name": "JulienRC", "link": "https://stackoverflow.com/users/10490715/julienrc"}, "edited": false, "score": 0, "creation_date": 1539811298, "post_id": 52855207, "comment_id": 92641930, "body": "@JulienRC You have to restart execution of your process B at the trap instruction to guarantee a consistent execution of the process. And it is a loop, correct? So it will be executed 100 times"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 5, "last_activity_date": 1539781064, "last_edit_date": 1539781064, "creation_date": 1539780368, "answer_id": 52855207, "question_id": 52854538, "link": "https://stackoverflow.com/questions/52854538/c-segmentation-fault-with-ptrace-and-waitpid/52855207#52855207", "title": "C - Segmentation fault with ptrace and waitpid", "body": "<p>The program is working as expected:</p>\n\n<p>First, you change the running process image to set <code>0xcc</code> at the start of function <code>foo</code>, which triggers a breakpoint/trap.</p>\n\n<p>Then, you call this function while the process is traced by process <code>a</code>.\nSo this call</p>\n\n<pre><code>waitpid(pidTargetProgram, NULL, WUNTRACED) &lt; 0) // Process a\n</code></pre>\n\n<p>returns. Now you detach from process b with</p>\n\n<pre><code>ptrace(PTRACE_DETACH, pidTargetProgram, NULL, NULL);\n</code></pre>\n\n<p>however, you did not restore the overwritten instructions in the process previously! So, the next instructions are corrupted and lead to the segfault you observe. Furthermore, the process restarts at the next instruction PC+1 (directly after the 0xcc), so you need to set the PC back one byte using <code>PTRACE_GETREGS/PTRACE_SETREGS</code></p>\n\n<p>Btw. it is more elegant to use the ptrace interface to set and reset the breakpoint instruction with <code>PTRACE_POKETEXT</code> instead of using the <code>/proc/pid/mem</code> way.</p>\n\n<p>TL;DR: You need to restore the original instructions first and reset the PC before restarting process b, then it should work as you expect.</p>\n"}], "owner": {"reputation": 39, "user_id": 10490715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e7471980c0aca4022584061905833c?s=128&d=identicon&r=PG&f=1", "display_name": "JulienRC", "link": "https://stackoverflow.com/users/10490715/julienrc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1539781064, "creation_date": 1539778068, "last_edit_date": 1539778974, "question_id": 52854538, "link": "https://stackoverflow.com/questions/52854538/c-segmentation-fault-with-ptrace-and-waitpid", "title": "C - Segmentation fault with ptrace and waitpid", "body": "<p>For a labs school in C, we have to code a process (we are going to call it A) who need to attach to another process (B) and put a trap in a function (trap instruction is 0xCC) so we did it but when B enter is this function we have a Segmentation Fault</p>\n\n<p>So this is the process A which attach to the other processes </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/ptrace.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]) {\n\npid_t pidTargetProgram;\nFILE *file;\nint buf;\nchar path[50];\nlong long int address;\n\n\nif (argc == 2) {\n   fprintf(stderr, \"Argument waited !\\n\");\n   exit(1);\n }\n\n// The second argument is the PID of the program \npidTargetProgram = atoi(argv[1]);\n\n// The third argument is the address of the function where we are going to put a trap\naddress = strtoll(argv[2], NULL, 16);\n\n// We put the path to the file mem of the program \nsprintf(path, \"/proc/%s/mem\", argv[1]);\n\n// We attach to the other program\nif(ptrace(PTRACE_ATTACH, pidTargetProgram, NULL, NULL) &lt; 0) {\n  perror(\"Error with ptrace_attach !\");\n  exit(1);\n}\n\n// We wait it to be synchronize\nif (waitpid(pidTargetProgram, NULL, WUNTRACED) &lt; 0) {\n  perror(\"Error with waitpid !\\n\");\n  exit(0);\n  }\n\n\n\n// We open the file mem in read and write mode\n  if ((file = fopen(path, \"r+\")) == NULL) {\n    perror(\"Error during the opening of mem file from process !\");\n    exit(1);\n  }\n\n\n\n// We place our cursor on the address of the function\n  fseek(file, address, SEEK_SET);\n\n  char trap[] = {0xCC, 0x00, 0x00, 0x00};\n\n  // We put the trap in the foo function\n  if (fwrite(trap, 1, 5, file) &lt; 1) {\n    perror(\"Error to write !\");\n    exit(1);\n    }\n\n  int counter = 0;\n\n  fseek(file, address, SEEK_SET);\n\n  // We print the other function's memory\n  while (fread(&amp;buf, 4, 1, file) &gt; 0) {\n    printf(\"Line n\u00b0%d : 0x%x\\n\", counter++, buf);\n    }\n\n  // We close the file\n  if (fclose(file) != 0) {\n    perror(\"Error during the closing !\");\n    exit(1);\n  }\n\n  // We said to continue to the other program\n  if (ptrace(PTRACE_CONT, pidTargetProgram, NULL, NULL) &lt; 0) {\n    perror(\"Error during ptrace_cont !\\n\");\n    exit(1);\n    }\n\n  printf(\"continued !\\n\");\n\n  // We wait the other program stop\n  if (waitpid(pidTargetProgram, NULL, WUNTRACED) &lt; 0) {\n    perror(\"Error with waitpid !\\n\");\n    exit(0);\n    }\n\n  printf(\"Trace declenched !\\n\");\n\n  // We detach \n  if (ptrace(PTRACE_DETACH, pidTargetProgram, NULL, NULL) &lt; 0) {\n    perror(\"Error during ptrace_detach !\");\n    exit(1);\n    }\n\n  printf(\"detach success ! \\n\");\n\n  return 0;\n}\n</code></pre>\n\n<p>And this is the processus B : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n\n// Function to execute to take the trap\nvoid foo(){\n  int i = 0;\n  printf(\"foo :::: %d\", i);\n}\n\nint main(int argc, char *argv[]) {\n\n  char text[10];\n  pid_t pidProgram;\n\n  // We get the PID\n  pidProgram = getpid();\n\n  // We print the PID\n  fprintf(stdout, \"PID's program : %d\\n\", pidProgram);\n\n  // We print the address of foo()\n  fprintf(stdout, \"foo address : %p\\n\", &amp;(foo));\n\n  // We stop the program to lunch the other program\n  fgets(text, 10, stdin);\n\n  int i;\n  for(i = 0 ; i &lt; 100 ; i++){\n    foo(i);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>To execute this, we start first the B so it gives us the PID and the address and it makes a pause at the fgets.\nSo after that, we start the program A and we give it the PID and the address, it's stop at the second waitpid.\nAfter that we continue B and write something and we have a segmentation fault and stop. We don't understand why because in the memory we can clearly see the trap (0xCC) and it doesn't work\nBut on the program A, we have \nTrace declenched !\ndetach success ! </p>\n\n<p>So no error on A but B have segmentation fault</p>\n\n<p>Do you have any idea for this ?\nWe use Centos as Operating System.\nSorry for my english.</p>\n\n<p>Thank</p>\n\n<p>Julien</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 4, "creation_date": 1539777488, "post_id": 52854358, "comment_id": 92623764, "body": "This is an excellent moment to start learning how to use your debugger!"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1539777608, "post_id": 52854358, "comment_id": 92623847, "body": "Try <code>scanf(&quot; &quot;) &#47;* consume whitespace *&#47;;</code> (the &quot;format string&quot; contains a single space) to consume optional whitespace in the input buffer."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1539778598, "post_id": 52854358, "comment_id": 92624461, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>="}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5434006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R48fCP4jFu8/AAAAAAAAAAI/AAAAAAAAACs/56WxpTz4rBY/photo.jpg?sz=128", "display_name": "Ernest Mercado", "link": "https://stackoverflow.com/users/5434006/ernest-mercado"}, "edited": false, "score": 0, "creation_date": 1539787349, "post_id": 52854650, "comment_id": 92630238, "body": "Thanks a lot @suvojit_007 . As I said I&#39;m a newb in C and have no idea whatsoever what to do with it so thanks a lot for answering."}], "tags": [], "owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "is_accepted": true, "score": 1, "last_activity_date": 1539787338, "last_edit_date": 1539787338, "creation_date": 1539778438, "answer_id": 52854650, "question_id": 52854358, "link": "https://stackoverflow.com/questions/52854358/c-programming-rock-paper-scissors-not-working/52854650#52854650", "title": "C Programming Rock-Paper-Scissors Not Working", "body": "<p>Just change <code>scanf(\"%c\",&amp;one);</code> to <code>scanf(\" %c\",&amp;one);</code> and <code>scanf(\"%c\",&amp;two);</code> to&emsp;&emsp;&emsp;&emsp;&emsp; <code>scanf(\" %c\",&amp;two);</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/29775323/scanf-function-seems-to-be-skipped-in-c\">scanf function seems to be skipped in c</a></p>\n"}], "owner": {"reputation": 3, "user_id": 5434006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R48fCP4jFu8/AAAAAAAAAAI/AAAAAAAAACs/56WxpTz4rBY/photo.jpg?sz=128", "display_name": "Ernest Mercado", "link": "https://stackoverflow.com/users/5434006/ernest-mercado"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "closed_date": 1539779382, "accepted_answer_id": 52854650, "answer_count": 1, "score": -6, "last_activity_date": 1539787338, "creation_date": 1539777433, "question_id": 52854358, "link": "https://stackoverflow.com/questions/52854358/c-programming-rock-paper-scissors-not-working", "closed_reason": "Duplicate", "title": "C Programming Rock-Paper-Scissors Not Working", "body": "<p>I'm having a problem with this C Programming activity. I'm new to C-Programming and would really like to ask you guys for your help. So please bear with me.</p>\n\n<p>So here's the problem...</p>\n\n<p>When I run the program as I enter my choice for Player Two the program automatically stops and closes. It wont even let me press \"ENTER\" before it closes. I tried everything else I can and looked for a solution online but to no avail. I am only allowed to use the conditional statement If-Else for this. I would really appreciate any suggestions. Thanks in advance. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nvoid main(){\nclrscr();\nchar one, two;\n\nprintf(\"\\t\\t\\t      Rock-Paper-Scissors\\n\");\nprintf(\"Choose from the following:\\n\");\nprintf(\"r for Rock\\np for Paper\\ns for Scissors\\n\\n\");\nprintf(\"Player One enter your choice: \");\nscanf(\"%c\",&amp;one);\nprintf(\"Player Two enter your choice: \");\nscanf(\"%c\",&amp;two);\nprintf(\"\\n\");\n\n\n//rock over scissors\nif (one == 'r' &amp;&amp; two == 's'){\n    printf(\"Rock Destroys Scissors\\n\");\n    printf(\"Player One Wins!\");\n}\nelse if (two == 'r' &amp;&amp; one == 's'){\n    printf(\"Rock Destroys Scissors\\n\");\n    printf(\"Player Two Wins!\");\n}\n//paper over rock\nelse if (one == 'p' &amp;&amp; two == 'r'){\n    printf(\"Paper Covers Rock\\n\");\n    printf(\"Player One Wins!\");\n}\nelse if (two == 'p' &amp;&amp; one == 'r'){\n    printf(\"Paper Covers Rock\\n\");\n    printf(\"Player Two Wins!\");\n}\n//scissors over paper\nelse if (one == 's' &amp;&amp; two == 'p'){\n    printf(\"Scissors Cut Paper\\n\");\n    printf(\"Player One Wins!\");\n}\nelse if (two == 's' &amp;&amp; one == 'p'){\n    printf(\"Scissors Cut Paper\\n\");\n    printf(\"Player Two Wins!\");\n}\nelse\n    printf(\"It's a Tie!\");\ngetch();\n}\n</code></pre>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539777809, "post_id": 52854063, "comment_id": 92623975, "body": "It guess hash should be the message hashed with same algorithm that the signature that was generated from the message. Maybe read <a href=\"https://crypto.stackexchange.com/questions/12768/why-hash-the-message-before-signing-it-with-rsa\">Why hash the message before signing it with RSA?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 9859120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2cee8fad2693e88b246a8c3f25b4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Noob14", "link": "https://stackoverflow.com/users/9859120/noob14"}, "edited": false, "score": 0, "creation_date": 1539780425, "post_id": 52854564, "comment_id": 92625575, "body": "Thanks! one more question to your answer, data and datalen what is that?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 145, "user_id": 9859120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2cee8fad2693e88b246a8c3f25b4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Noob14", "link": "https://stackoverflow.com/users/9859120/noob14"}, "edited": false, "score": 0, "creation_date": 1539780453, "post_id": 52854564, "comment_id": 92625593, "body": "@Noob14 The data for which you want to verify the signature (i.e. a message)"}, {"owner": {"reputation": 145, "user_id": 9859120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2cee8fad2693e88b246a8c3f25b4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Noob14", "link": "https://stackoverflow.com/users/9859120/noob14"}, "edited": false, "score": 0, "creation_date": 1539781347, "post_id": 52854564, "comment_id": 92626186, "body": "Okay, perfect! now it works. Thank you very much! :)"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 2, "last_activity_date": 1539778147, "creation_date": 1539778147, "answer_id": 52854564, "question_id": 52854063, "link": "https://stackoverflow.com/questions/52854063/how-to-use-mbedtls-pk-verify-to-verify-signature/52854564#52854564", "title": "how to use mbedtls_pk_verify to verify signature", "body": "<p><code>md</code> is the <code>message digest</code> (usually a hash value).</p>\n\n<p>To verify a signature, you have to feed the message through the <em>same hash algorithm</em> that was used when creating the signature. If the signature was created using SHA1, then you have to calculate the SHA1 hash value for the message you want to verify first. Then you pass this value together with its length (20 bytes in this case) to the function.</p>\n\n<p>You can use the mbedtls library itself to calculate the message digest:</p>\n\n<pre><code>// Get the message digest info structure for SHA1\nmbetdtls_md_info_t *mdinfo = mbedtls_md_info_from_type(MBEDTLS_MD_SHA1);\nchar *md = malloc(mdinfo-&gt;size);\n// Calculate the message digest for the data\nmbedtls_md(mdinfo, data, datalen, md);\n\n// Now verify the signature for the given hash of the data\nint st = mbedtls_pk_verify(&amp;public_key_context, \n                           mdinfo-&gt;type, md, mdinfo-&gt;size,\n                           signature, signature_length);\nif (st != 0) {\n      // Signature invalid!\n} else {\n      // Signature valid\n}\n\nfree(md);\n</code></pre>\n\n<p>This should do what you need.</p>\n"}], "owner": {"reputation": 145, "user_id": 9859120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2cee8fad2693e88b246a8c3f25b4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Noob14", "link": "https://stackoverflow.com/users/9859120/noob14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 2, "accepted_answer_id": 52854564, "answer_count": 1, "score": 1, "last_activity_date": 1539778147, "creation_date": 1539776547, "question_id": 52854063, "link": "https://stackoverflow.com/questions/52854063/how-to-use-mbedtls-pk-verify-to-verify-signature", "title": "how to use mbedtls_pk_verify to verify signature", "body": "<p>How to use this function.</p>\n\n<pre><code>int mbedtls_pk_verify(mbedtls_pk_context *  ctx, mbedtls_md_type_t md_alg, const unsigned char * hash, size_t hash_len, const unsigned char * sig, size_t sig_len)\n</code></pre>\n\n<p>So by calling the function like this <code>mbedtls_pk_verify(&amp;public_key_context, MBEDTLS_MD_SHA1, md, sizeof(md), signature, signature_lenght)</code> how should I initialize md and how do I know what it is?</p>\n"}, {"tags": ["java", "c", "java-native-interface", "utf"], "comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 1, "creation_date": 1539776262, "post_id": 52853941, "comment_id": 92623040, "body": "Afaik no, C uses Ascii (8-Bit), while Java uses UTF-16 (16-Bit)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1539779910, "post_id": 52853941, "comment_id": 92625245, "body": "@hellow C doesn&#39;t certainly &quot;use Ascii (8-Bit)&quot;."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1539784125, "post_id": 52853941, "comment_id": 92628008, "body": "@hellow: The C standard does not require ASCII. Many C implementations use ASCII, but there are alternatives. And C is not limited to eight-bit characters. In addition to the fact that <code>char</code> is not limited to eight bits by the C standard, C also supports wide characters in its <code>wchar_t</code> type."}], "answers": [{"comments": [{"owner": {"reputation": 529, "user_id": 9188311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9d5d6a8907c0aa066b871e4c4d8f12?s=128&d=identicon&r=PG&f=1", "display_name": "Mens Rifles", "link": "https://stackoverflow.com/users/9188311/mens-rifles"}, "edited": false, "score": 0, "creation_date": 1539778333, "post_id": 52854301, "comment_id": 92624278, "body": "Thanks, the javaByteArray is from a java string using .getBytes(UTF8) so I should be ok."}, {"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "reply_to_user": {"reputation": 529, "user_id": 9188311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9d5d6a8907c0aa066b871e4c4d8f12?s=128&d=identicon&r=PG&f=1", "display_name": "Mens Rifles", "link": "https://stackoverflow.com/users/9188311/mens-rifles"}, "edited": false, "score": 0, "creation_date": 1539779005, "post_id": 52854301, "comment_id": 92624708, "body": "Yes; in fact me crying out <b>No</b> is quite relative; there are just a couple of things to consider - that were listed."}, {"owner": {"reputation": 529, "user_id": 9188311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9d5d6a8907c0aa066b871e4c4d8f12?s=128&d=identicon&r=PG&f=1", "display_name": "Mens Rifles", "link": "https://stackoverflow.com/users/9188311/mens-rifles"}, "edited": false, "score": 0, "creation_date": 1539780421, "post_id": 52854301, "comment_id": 92625574, "body": "It all worked. You are wise and have the wisdom of the ancients."}], "tags": [], "owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "is_accepted": true, "score": 3, "last_activity_date": 1539777243, "creation_date": 1539777243, "answer_id": 52854301, "question_id": 52853941, "link": "https://stackoverflow.com/questions/52853941/do-java-and-c-represent-a-utf-char-byte-in-the-same-way/52854301#52854301", "title": "Do Java and C represent a UTF char byte in the same way?", "body": "<p><strong>No.</strong></p>\n\n<p><em>Binary</em> byte arrays presenting data like two shorts would be identical.</p>\n\n<p><em>Text</em> is another matter. Java had by design <strong>text</strong> (String, char) in Unicode, and <code>char</code> is a two byte UTF-16 value. There always is a conversion from <code>byte[]</code> to <code>String</code> with some encoding of those bytes to be used.</p>\n\n<p>So one has in java:</p>\n\n<pre><code>byte[] bytes = string.getBytes(StandardCharsets.UTF_8);\n</code></pre>\n\n<p>This would almost be a C array, but for these differences:</p>\n\n<ul>\n<li>bytes.length as field</li>\n<li>C has an extra terminating nul char: <code>'\\0'</code> </li>\n<li>the java String could contain a nul char; some classes (<a href=\"https://docs.oracle.com/javase/10/docs/api/java/io/DataOutputStream.html#writeUTF(java.lang.String)\" rel=\"nofollow noreferrer\">DataOutputStream.writeUTF8</a>)\nwill encode it too in a multi-byte sequence for interoperability with C strings.\nThis is called <em>modified UTF-8</em>.</li>\n</ul>\n\n<p>But there is no real problem. Only ensure:</p>\n\n<ul>\n<li>Use <code>String.getBytes(StandardCharsets.UTF_8)</code> instead of <code>String.getBytes()</code>.</li>\n<li>Use <code>new String(bytes, StandardCharsets.UTF_8)</code> instead of <code>new String(bytes)</code>.</li>\n<li>Never ever use String and char for binary data, as one would use C <code>unsigned char*</code>. It would use twice the memory, a slow conversion back and forth that may corrupt the data.</li>\n<li>Concerning binary data (<code>ByteBuffer.order</code>): short, int, long and such are big-endian in java.</li>\n</ul>\n\n<p>As the latter versions use the default encoding of the platform, which is not portable.</p>\n"}], "owner": {"reputation": 529, "user_id": 9188311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9d5d6a8907c0aa066b871e4c4d8f12?s=128&d=identicon&r=PG&f=1", "display_name": "Mens Rifles", "link": "https://stackoverflow.com/users/9188311/mens-rifles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52854301, "answer_count": 1, "score": 0, "last_activity_date": 1539778107, "creation_date": 1539776123, "last_edit_date": 1539778107, "question_id": 52853941, "link": "https://stackoverflow.com/questions/52853941/do-java-and-c-represent-a-utf-char-byte-in-the-same-way", "title": "Do Java and C represent a UTF char byte in the same way?", "body": "<p>I'm passing an array of bytes from Java to C, I think Java and C represent UTF char bytes the same way.</p>\n\n<p>Can I just do this:</p>\n\n<pre><code>jbyte *bytePtr = (*env)-&gt;GetByteArrayElements(env, javaByteArray, NULL);\n\n// javaByteArray has java bytes for the UTF chars: 'A', 'B', 'C'\n\nunsigned char *bytePtrC = (unsigned char *) bytePtr;\n\nprintf(\"%c %c %c \\n\", bytePtrC, bytePtrC+1, bytePtrC+2);\n\n// will this print A B C ?\n</code></pre>\n"}, {"tags": ["c", "memory-management", "struct"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1539776147, "post_id": 52853914, "comment_id": 92622965, "body": "The compiler won&#39;t/won&#39;t need to complain. In run-time the program will abort with  seg fault."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1539776180, "post_id": 52853914, "comment_id": 92622987, "body": "Dereferencing a null pointer leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>, and if using the pointer to write some data (like in your example assignment) then you will most likely have a crash. <b><i>Always</i></b> check pointers."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1539776208, "post_id": 52853914, "comment_id": 92623012, "body": "The compiler doesn&#39;t care, you are the programmer... The OS surely will get very disappointed..."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1539776402, "creation_date": 1539776402, "answer_id": 52854013, "question_id": 52853914, "link": "https://stackoverflow.com/questions/52853914/try-to-access-data-through-null-address-in-c/52854013#52854013", "title": "Try to access data through null address in C?", "body": "<p>The compiler won't complain.</p>\n\n<p>However, in runtime, you will invoke <em>Undefined Behavior</em> (UB), since you are dereferencing a NULL pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539781462, "post_id": 52854411, "comment_id": 92626261, "body": "@Antti Haapala Stop vandalizing my post and go read what 6.3.2.3/3 actually says :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539781638, "post_id": 52854411, "comment_id": 92626370, "body": "@AnttiHaapala No you edited in &quot;to an object&quot; while it says &quot;to an object or function&quot;. Essentially meaning any pointer type."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539781924, "post_id": 52854411, "comment_id": 92626557, "body": "@AnttiHaapala Fine, I added some extra text..."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1539781895, "last_edit_date": 1539781895, "creation_date": 1539777658, "answer_id": 52854411, "question_id": 52853914, "link": "https://stackoverflow.com/questions/52853914/try-to-access-data-through-null-address-in-c/52854411#52854411", "title": "Try to access data through null address in C?", "body": "<p>To clear out the terms:</p>\n\n<ul>\n<li>The macro <code>NULL</code> is a null pointer constant (7.19/3).</li>\n<li>A <em>null pointer constant</em> is either the value <code>0</code> or <code>(void*)0</code> (6.3.2.3/3).</li>\n<li>When a null pointer constant is assigned to a pointer of any type, the resulting pointer becomes a <em>null pointer</em> which is guaranteed to compare unequal to any other pointer (which is pointing to an object or function) (6.3.2.3/3).</li>\n</ul>\n\n<p>You can't really know the actual representation of a null pointer on the given system. What happens if you try to access it as if it was a valid address is not specified by the standard - it is undefined behavior.</p>\n\n<p>Meaning that anything can happen, including segmentation faults, bus errors, nothing at all, program starting to run amok etc etc.</p>\n"}], "owner": {"reputation": 15, "user_id": 10445620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4d4c9426a1e33c23071235ca4cbbb35?s=128&d=identicon&r=PG&f=1", "display_name": "clinnsin", "link": "https://stackoverflow.com/users/10445620/clinnsin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1539777837, "accepted_answer_id": 52854411, "answer_count": 2, "score": -1, "last_activity_date": 1539781895, "creation_date": 1539776061, "question_id": 52853914, "link": "https://stackoverflow.com/questions/52853914/try-to-access-data-through-null-address-in-c", "closed_reason": "Duplicate", "title": "Try to access data through null address in C?", "body": "<p>Just a curious question. What happens if i try to access data from an address that has <code>NULL</code> value.\nfor eg: If i have a structure pointer <code>ulog</code> which stores <code>NULL</code> and the compiler (in my case GCC) comes across <code>ulog-&gt;data=12</code> ?</p>\n\n<p>I wanna know majorly if this messes with my memory, is <code>NULL</code> returned when used with control statement and what goes down with the compiler ?</p>\n"}, {"tags": ["c", "compiler-errors", "embedded", "cross-compiling"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539785005, "post_id": 52855094, "comment_id": 92628624, "body": "that solved it the errors are consistent now, and here it is: @next comment because too long"}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539785018, "post_id": 52855094, "comment_id": 92628633, "body": "In file included from main.c:23:0:     ./include/common/platform.h:30:2: error: #error &quot;Platform provided is      not supported in this Build System&quot;      #error &quot;Platform provided is not supported in this Build System&quot;       ^~~~~     main.c: In function &#39;main&#39;:     main.c:49:5: error: implicit declaration of function &#39;PRINTF&#39; [-      Werror=implicit-function-declaration]          PRINTF(&quot;%c&quot;, buffer[i]);          ^~~~~~     cc1: all warnings being treated as errors     Makefile:67: recipe for target &#39;main.o&#39; failed         make: *** [main.o] Error 1"}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539785492, "post_id": 52855094, "comment_id": 92628959, "body": "also added to CFLAGS $(INCLUDES)"}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539814140, "post_id": 52855094, "comment_id": 92642871, "body": "I got it in the morning and it was very helpful, thank you a lot. I just restrained from writing a comment because I was told twice to not write thanks comment xD  but here it is, a comment to confirm that these answers completely solved my problems."}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 2, "last_activity_date": 1539786220, "last_edit_date": 1539786220, "creation_date": 1539780030, "answer_id": 52855094, "question_id": 52853496, "link": "https://stackoverflow.com/questions/52853496/native-and-cross-compile-using-gnu-make-embedded-c/52855094#52855094", "title": "Native and cross compile using GNU make, embedded C", "body": "<p>First, I will answer the case when <code>PLATFORM</code> and <code>HOST</code> are the same:</p>\n\n<blockquote>\n<pre><code>$ make main.o PLATFORM=HOST\n</code></pre>\n  \n  <p>I get this error, they are 2 different errors and I can't understand the reason behind this.</p>\n\n<pre><code>gcc -c main.c -mcpu= -m --specs= -Wall -Werror -g -O0  -std=c99 -o \nmain.o\ngcc: warning: \u2018-mcpu=\u2019 is deprecated; use \u2018-mtune=\u2019 or \u2018-march=\u2019 \ninstead\ngcc: error: missing argument to \u2018-mcpu=\u2019\ngcc: error: missing argument to \u2018--specs=\u2019\ngcc: error: unrecognized command line option \u2018-m\u2019\nMakefile:64: recipe for target 'main.o' failed\nmake: *** [main.o] Error 1\n</code></pre>\n</blockquote>\n\n<p>This is due to your makefile: <code>CPU</code>, <code>ARCH</code> and <code>SPECS</code> are only set when \n<code>PLATFORM</code> is <code>MSP432</code></p>\n\n<p>So the line <code>CFLAGS = -mcpu=$(CPU) -m$(ARCH) --specs=$(SPECS) -Wall -Werror -g -O0 -std=c99</code> \nis evalued as <code>CFLAGS = -mcpu= -m --specs= -Wall -Werror -g -O0 -std=c99</code></p>\n\n<p>When <code>gcc</code> is invoked with <code>CFLAGS</code> as argument, which is incorrect.</p>\n\n<p>To correct this, you can make theses little changes in your makefile:</p>\n\n<pre><code>include sources.mk\n\nifeq ($(PLATFORM),MSP432)\n# Platform Overrides\n\n# Architectures Specific Flags\nLINKER_FILE = msp432p401r.lds\nCPU = cortex-m4\nARCH = thumb\nSPECS = nosys.specs\n\nLDFLAGS_ARCH = -T $(LINKER_FILE)\nCFLAGS_ARCH = -mcpu=$(CPU) -m$(ARCH) --specs=$(SPECS)\n\n# Compiler Flags and Defines\nCC = arm-none-eabi-gcc\nLD = arm-none-eabi-ld\nendif\n\nifeq ($(PLATFORM),HOST)\n\nCC = gcc\n\nendif\n\n\nTARGET = c1m1\nLDFLAGS = -Wl,-Map=$(TARGET).map $(LDFLAGS_ARCH)\nCFLAGS = $(CFLAGS_ARCH) -Wall -Werror -g -O0  \n-std=c99\nCPPFLAGs =\n</code></pre>\n\n<p>Now, for the <code>main.c:23:22: fatal error: platform.h: No such file or directory</code>\nYou have to find where this file is locatted and eventually add it as a <code>gcc</code> option.</p>\n\n<p>For instance, if the file <code>platform.h</code> is in <code>/some/directory</code>, you can add this \noption to <code>gcc</code> to help it to find it:</p>\n\n<pre><code>-I/some/directory\n</code></pre>\n\n<p>So in makefile, you can have this line:</p>\n\n<pre><code>CFLAGS_ARCH = -mcpu=$(CPU) -m$(ARCH) --specs=$(SPECS) -I/some/directory\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>In comments, you add this problem for your question:</p>\n\n<blockquote>\n  <p>that solved it the errors are consistent now, and here it is</p>\n\n<pre><code> In file included from main.c:23:0: ./include/common/platform.h:30:2: error:\n #error \"Platform provided is not supported in this Build System\" #error \"... *** [main.o] Error 1 \n</code></pre>\n</blockquote>\n\n<p>Regarding the <code>platform.h</code> file, macro <code>MSP432</code> or <code>HOST</code> must be defined in order to run.</p>\n\n<p>To define such macro, the <code>-D</code> option must be passed to <code>gcc</code>.</p>\n\n<p>So the idea is to add some line to the makefile to define <code>MSP432</code> or <code>HOST</code> when necessary:</p>\n\n<pre><code>...\nifeq ($(PLATFORM),MSP432)\n# Platform Overrides\n\n# Architectures Specific Flags\nLINKER_FILE = msp432p401r.lds\nCPU = cortex-m4\nARCH = thumb\nSPECS = nosys.specs\n\nLDFLAGS_ARCH = -T $(LINKER_FILE)\nCFLAGS_ARCH = -mcpu=$(CPU) -m$(ARCH) --specs=$(SPECS) -DMSP432 \n\n# Compiler Flags and Defines\nCC = arm-none-eabi-gcc\nLD = arm-none-eabi-ld\nendif\n\nifeq ($(PLATFORM),HOST)\n\nCFLAGS_ARCH = -DHOST \n\nCC = gcc\n\nendif\n...\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 1, "accepted_answer_id": 52855094, "answer_count": 1, "score": 4, "last_activity_date": 1553440595, "creation_date": 1539774692, "last_edit_date": 1539784747, "question_id": 52853496, "link": "https://stackoverflow.com/questions/52853496/native-and-cross-compile-using-gnu-make-embedded-c", "title": "Native and cross compile using GNU make, embedded C", "body": "<p>I'm working on a Makefile to make me able to native and cross-compile. choosing wether to compile for host linux or ti MSP432 should be done from command line:</p>\n\n<pre><code>$ make build PLATFORM=MSP432\n$ make build PLATFORM=HOST\n</code></pre>\n\n<p>here's my Makefile that I tried to do it in:</p>\n\n<pre><code>include sources.mk\n\nifeq ($(PLATFORM),MSP432)\n# Platform Overrides\n\n# Architectures Specific Flags\nLINKER_FILE = msp432p401r.lds\nCPU = cortex-m4\nARCH = thumb\nSPECS = nosys.specs\n\n# Compiler Flags and Defines\n\nCC = arm-none-eabi-gcc\nLD = arm-none-eabi-ld\nendif\n\n\nifeq ($(PLATFORM),HOST)\n\nCC = gcc\n\nendif\n\n\nTARGET = c1m1\nLDFLAGS = -Wl,-Map=$(TARGET).map -T $(LINKER_FILE)\nCFLAGS = -mcpu=$(CPU) -m$(ARCH) --specs=$(SPECS) -Wall -Werror -g -O0  \n-std=c99\nCPPFLAGs =\n\n\n.PHONY: build\nbuild: $(TARGET).out\n\n\n.PHONY: clean\nclean:  \n    rm -f $(OBJS) $(TARGET).out $(TARGET).map\n\n%.o : %.c\n$(CC) -c $&lt; $(CFLAGS) -o $@\n    OBJS = $(SOURCES:.c=.o)\n\n$(TARGET).out: $(OBJS)\n    $(CC) $(OBJS) $(CFLAGS) $(LDFLAGS) -o $@\n</code></pre>\n\n<p>is this the right way to do that?   </p>\n\n<p>there's also another weird error happening when I compile using:</p>\n\n<pre><code>$ make main.o PLATFORM=MSP432\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>arm-none-eabi-gcc -c main.c -mcpu=cortex-m4 -mthumb -- \nspecs=nosys.specs -Wall -Werror -g -O0  -std=c99 -o main.o\nmain.c:23:22: fatal error: platform.h: No such file or directory \n #include \"platform.h\"\n                  ^\ncompilation terminated.\nMakefile:64: recipe for target 'main.o' failed\nmake: *** [main.o] Error 1\n</code></pre>\n\n<p>and when I compile using this:</p>\n\n<pre><code>$ make main.o PLATFORM=HOST\n</code></pre>\n\n<p>I get this error, they are 2 different errors and I can't understand the reason behind this.</p>\n\n<pre><code>gcc -c main.c -mcpu= -m --specs= -Wall -Werror -g -O0  -std=c99 -o \nmain.o\ngcc: warning: \u2018-mcpu=\u2019 is deprecated; use \u2018-mtune=\u2019 or \u2018-march=\u2019 \ninstead\ngcc: error: missing argument to \u2018-mcpu=\u2019\ngcc: error: missing argument to \u2018--specs=\u2019\ngcc: error: unrecognized command line option \u2018-m\u2019\nMakefile:64: recipe for target 'main.o' failed\nmake: *** [main.o] Error 1\n</code></pre>\n\n<p>I posted those apparently different questions in 1 question, because I think they are affecting eachother.</p>\n\n<p>this is also another headerfile that is called platform.h that has some conditionals to include some directives, which after the answer I think might be needed for compile time switches </p>\n\n<pre><code>#ifndef __PLATFORM_H__\n#define __PLATFORM_H__\n\n#if defined (MSP432)\n#include \"msp432p401r.h\"\n#define PRINTF(...)\n\n\n\n\n#elif defined (HOST)\n#include &lt;stdio.h&gt;\n#define PRINTF(...) printf(__VA_ARGS__)\n\n\n\n#else\n#error \"Platform provided is not supported in this Build System\"\n#endif\n\n#endif /* __PLATFORM_H__ */\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "mpi"], "comments": [{"owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "edited": false, "score": 0, "creation_date": 1539774615, "post_id": 52853323, "comment_id": 92622069, "body": "could it be that MPI_Scatter dereferences the pointer? if so, that could be the cause. for (rank == 0),you send &amp;local which is a pointer is not pointing to an allocated area in the memory."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1539775290, "post_id": 52853323, "comment_id": 92622509, "body": "You should use <code>local</code>, not <code>&amp;local</code>! Also, you must provide <code>local</code> memory for the root. Where in your code is it <i>defined as a vector &quot;directly&quot;</i>?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1539778457, "post_id": 52853323, "comment_id": 92624343, "body": "In your second example, you should either <code>local=malloc(...)</code> (and pass <code>local</code> to <code>MPI_Scatter()</code>) or declare <code>point local ;</code>. In all cases, you should clearly state how many MPI tasks you are running."}, {"owner": {"reputation": 1, "user_id": 7963782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5a05e518a94c680dd3896271269b42?s=128&d=identicon&r=PG&f=1", "display_name": "Caosman", "link": "https://stackoverflow.com/users/7963782/caosman"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1539804468, "post_id": 52853323, "comment_id": 92638914, "body": "@Zulan thank you, i wasn&#39;t thinking that root task is also a receiver so it needs memory for local. Also i forgot to remove the &amp;, i&#39;m an idiot. Now it works, thank you!"}, {"owner": {"reputation": 1, "user_id": 7963782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5a05e518a94c680dd3896271269b42?s=128&d=identicon&r=PG&f=1", "display_name": "Caosman", "link": "https://stackoverflow.com/users/7963782/caosman"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1539804530, "post_id": 52853323, "comment_id": 92638943, "body": "@GillesGouaillardet in the working code i didn&#39;t state the number of tasks but it works. Why should i declare it inside the code?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1539814300, "post_id": 52853323, "comment_id": 92642923, "body": "You only need to add your <code>mpirun</code> command line to your question. If you run 6 MPI tasks, it might not crash despite a buffer overflow ... an other option is to add an <code>assert()</code> and a comment in your code to abort if more than 5 MPI tasks."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1539814391, "post_id": 52853323, "comment_id": 92642949, "body": "Also, there is <code>MPI_IN_PLACE</code> if you do not require a receive buffer on the root rank."}], "owner": {"reputation": 1, "user_id": 7963782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5a05e518a94c680dd3896271269b42?s=128&d=identicon&r=PG&f=1", "display_name": "Caosman", "link": "https://stackoverflow.com/users/7963782/caosman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1539774065, "creation_date": 1539774065, "question_id": 52853323, "link": "https://stackoverflow.com/questions/52853323/mpi-scatter-segmentation-fault-with-malloc", "title": "MPI_Scatter segmentation fault with malloc", "body": "<p>Can you explain why this code works perfectly fine:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;mpi.h&gt;\n\ntypedef struct Point\n{\n    double x;\n    double y;\n} point;\n\nint main(int argc, char *argv[]) {\n  int rank, size;\n  MPI_Init(&amp;argc, &amp;argv);\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n  MPI_Datatype mpi_point;\n  MPI_Type_contiguous(2, MPI_DOUBLE, &amp;mpi_point);\n  MPI_Type_commit(&amp;mpi_point);\n\n\n  point local[2];\n\n  if(rank==0)\n  {\n    point *buf;\n    buf = malloc(10*sizeof(point));\n    for(int i = 0; i&lt;10; i++)\n    {\n        buf[i].x= (double)i;\n        buf[i].y= (double)i+i;\n    }\n    MPI_Scatter(buf, 2, mpi_point, &amp;local, 2, mpi_point, 0, MPI_COMM_WORLD);\n    free(buf);\n  }\n  else\n  {\n    point *buf = NULL;\n    MPI_Scatter(buf, 2, mpi_point, &amp;local, 2, mpi_point, 0, MPI_COMM_WORLD);\n  }\n\n  printf(\"Hello, process %d has points: 1-&gt; %f %f 2-&gt; %f %f\\n\", rank, local[0].x, local[0].y, local[1].x, local[1].y);\n  MPI_Finalize();\n  return 0;\n}\n</code></pre>\n\n<p>and this one below doesn't work? A lot of error output ending with <code>segmentation fault</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;mpi.h&gt;\n\ntypedef struct Point\n{\n    double x;\n    double y;\n} point;\n\nint main(int argc, char *argv[]) {\n  int rank, size;\n  MPI_Init(&amp;argc, &amp;argv);\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n  MPI_Datatype mpi_point;\n  MPI_Type_contiguous(2, MPI_DOUBLE, &amp;mpi_point);\n  MPI_Type_commit(&amp;mpi_point);\n\n\n  point *local;\n\n  if(rank==0)\n  {\n    point *buf;\n    buf = malloc(10*sizeof(point));\n    for(int i = 0; i&lt;10; i++)\n    {\n        buf[i].x= (double)i;\n        buf[i].y= (double)i+i;\n    }\n    MPI_Scatter(buf, 2, mpi_point, &amp;local, 2, mpi_point, 0, MPI_COMM_WORLD);\n    free(buf);\n  }\n  else\n  {\n    point *buf = NULL;\n    local = malloc(2*sizeof(point));\n    MPI_Scatter(buf, 2, mpi_point, &amp;local, 2, mpi_point, 0, MPI_COMM_WORLD);\n  }\n\n  printf(\"Hello, process %d has points: 1-&gt; %f %f 2-&gt; %f %f\\n\", rank, local[0].x, local[0].y, local[1].x, local[1].y);\n  MPI_Finalize();\n  return 0;\n}\n</code></pre>\n\n<p>The only difference is that <code>local</code> in one case is defined as a vector \"directly\" and in the other one it's a pointer and then I do the <code>malloc</code>. Shouldn't it be the same thing? Both of them are allocated in the stack with the same dimension, so how is it possible that the one with <code>malloc</code> doesn't work?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1539773487, "post_id": 52853017, "comment_id": 92621395, "body": "Assume for a second we didn&#39;t all read &quot;21 Century C&quot;, you need to specify what outcome you expect and what you get instead."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1539773564, "post_id": 52853017, "comment_id": 92621438, "body": "<code>asprintf()</code> is not defined by the C Standard or POSIX. I&#39;d try to <b>not use</b> that function."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1539773597, "post_id": 52853017, "comment_id": 92621462, "body": "@StoryTeller I thnk the question is well-formed.  The code sure appears to be utter garbage, emanating from the south end of a northbound bull.  At <b>best</b> it relies upon an ability to access freed memory safely and is thus undefined behavior. At worst it&#39;s completely wrong.  Burn the book."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1539773714, "post_id": 52853017, "comment_id": 92621530, "body": "@AndrewHenle - Well formed? Is it BS from the book or from the OP&#39;s own feverish mind? Did the book do something different? Hardly well-formed."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1539773783, "post_id": 52853017, "comment_id": 92621567, "body": "The question is self-contained and clear:  &quot;This code is confusing.  I can&#39;t figure it out.&quot;  I&#39;ve been coding in C for decades, and it makes my head hurt too."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1539773904, "post_id": 52853017, "comment_id": 92621634, "body": "@StoryTeller This appears to be the code in question:  <a href=\"https://github.com/sandersch/21st-century-c/blob/master/text/sasprintf.c\" rel=\"nofollow noreferrer\">github.com/sandersch/21st-century-c/blob/master/text/&hellip;</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1539773979, "post_id": 52853017, "comment_id": 92621670, "body": "@AndrewHenle - Okay, it&#39;s BS from the book. It&#39;s still up to the OP to make a point of saying as much."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539788584, "post_id": 52853017, "comment_id": 92630990, "body": "<code>free(tmp_string_for_extend);</code> does not update <code>write_to</code>, yet frees memory associated with it.  <code>Sasprintf()</code> macro is poor code."}, {"owner": {"reputation": 408, "user_id": 3893952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a884b44c310ccf1107774f74d83327fb?s=128&d=identicon&r=PG&f=1", "display_name": "codexplorer", "link": "https://stackoverflow.com/users/3893952/codexplorer"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539832790, "post_id": 52853017, "comment_id": 92646753, "body": "@chux  I don&#39;t get it, could you explain why free(tmp_string_for_extend) does not update write_to to free the memory associated with it? Thanks,"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539835113, "post_id": 52853017, "comment_id": 92647242, "body": "@codexplorer After <code>free(tmp_string_for_extend)</code> is called the data pointed to by <code>write_to</code> is freed. This is <code>q</code> in <code>Sasprintf(q,&quot;select * from tab&quot;);</code>.  Now <code>Sasprintf(q,&quot;%s where col%i is not null&quot;,q,i);</code> is called with the invalid pointer.  This is &quot;OK&quot; as <code>q</code> is <code>NULL</code>, but had code been <code>char *q = malloc(10);</code> the free due to <code>Sasprintf(q,&quot;select * from tab&quot;);</code> would be passing a non-NULL (and now invalid pointer) to <code>Sasprintf(q,&quot;%s where col%i is not null&quot;,q,i);</code>."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1539774355, "post_id": 52853220, "comment_id": 92621901, "body": "Summary:  This code is a horrible an failed attempt to skip having to call <code>free()</code> after using <code>asprintf()</code>."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 3, "creation_date": 1539774451, "post_id": 52853220, "comment_id": 92621962, "body": "Isn&#39;t the point of the <code>free(tmp_string_for_extend)</code> to free the memory allocated on the <i>previous</i> invocation of the macro? Then there is a memory leak in that the final invocation never frees its memory."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1539789093, "post_id": 52853220, "comment_id": 92631271, "body": "@DavidBowling I&#39;d opine that it&#39;s a bit of a stretch to infer any intent behind that code.  If that is the intent, the example usage relies on being able to access the created string after it&#39;s been freed.  It looks more like the code &quot;works&quot; only by accident."}, {"owner": {"reputation": 408, "user_id": 3893952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a884b44c310ccf1107774f74d83327fb?s=128&d=identicon&r=PG&f=1", "display_name": "codexplorer", "link": "https://stackoverflow.com/users/3893952/codexplorer"}, "edited": false, "score": 0, "creation_date": 1539831773, "post_id": 52853220, "comment_id": 92646565, "body": "@Some programmer dude Is there a difference between free((write_to)) and free(write_to)?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 408, "user_id": 3893952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a884b44c310ccf1107774f74d83327fb?s=128&d=identicon&r=PG&f=1", "display_name": "codexplorer", "link": "https://stackoverflow.com/users/3893952/codexplorer"}, "edited": false, "score": 0, "creation_date": 1539841907, "post_id": 52853220, "comment_id": 92648973, "body": "@codexplorer No. Except that for macro arguments <i>always</i> use extra parentheses to prevent some otherwise hard to find problems."}, {"owner": {"reputation": 408, "user_id": 3893952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a884b44c310ccf1107774f74d83327fb?s=128&d=identicon&r=PG&f=1", "display_name": "codexplorer", "link": "https://stackoverflow.com/users/3893952/codexplorer"}, "edited": false, "score": 0, "creation_date": 1539847579, "post_id": 52853220, "comment_id": 92651451, "body": "@Some programmer dude I agree with you that I should call free(q) after I&#39;m fully done with q. Originally the author uses asprintf to append the strings, but in order to prevent a memory leak from the snippet at the original address of q which isn\u2019t released when q is given a new location by asprintf, the author uses macro Sasprintf(i.e. safer asprintf) in place of asprintf. But in my case if it really wants to release the original memory, it has to use free(write_to), not free(tmp_string_for_extend) and eventually the macro doesn&#39;t really take effect to release the memory it was allocated."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1539773690, "creation_date": 1539773690, "answer_id": 52853220, "question_id": 52853017, "link": "https://stackoverflow.com/questions/52853017/what-is-a-trick-in-asprintf-to-release-the-memory/52853220#52853220", "title": "What is a trick in asprintf() to release the memory?", "body": "<p>Lets take a closer look at these two lines:</p>\n\n<pre><code>char *q=NULL;\nSasprintf(q,\"select * from tab\");\n</code></pre>\n\n<p>If we expand the macro it will become (roughly):</p>\n\n<pre><code>char *q=NULL;\n{\n    char *tmp_string_for_extend = (q);\n    asprintf(&amp;(q), \"select * from tab\");\n    free(tmp_string_for_extend);\n}\n</code></pre>\n\n<p>It should be quite clear that the initialization of <code>tmp_string_for_extend</code> will be equivalent to initialize it to <code>NULL</code>, since <code>q</code> at that point is <code>NULL</code>.</p>\n\n<p>So when you call <code>free(tmp_string_for_extend)</code> you're effectively doing <code>free(NULL)</code>. Calling <code>free</code> with a null pointer does <em>nothing</em>.</p>\n\n<p>If you instead do <code>free((write_to))</code> in the macro then it will be expanded to <code>free((q))</code> which will free the memory you just allocated with <code>asprintf</code>. Dereferencing <code>q</code> after that (which happens when you print the contents) will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n\n<p>You should call <code>free(q)</code> <em>after</em> you're fully done with <code>q</code>.</p>\n\n<hr>\n\n<p>Also note that for most <code>sprintf</code> variants, probably including the GNU libc-specific <code>asprintf</code> function, using the same argument for both source (as an argument) and as destination usually is <em>undefined behavior</em> as well. Which makes your second macro invocation invalid. And even if it was defined, then it could be a memory leak if <code>asprintf</code> doesn't free any non-null pointer.</p>\n"}], "owner": {"reputation": 408, "user_id": 3893952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a884b44c310ccf1107774f74d83327fb?s=128&d=identicon&r=PG&f=1", "display_name": "codexplorer", "link": "https://stackoverflow.com/users/3893952/codexplorer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 52853220, "answer_count": 1, "score": 1, "last_activity_date": 1539788866, "creation_date": 1539773012, "last_edit_date": 1539788866, "question_id": 52853017, "link": "https://stackoverflow.com/questions/52853017/what-is-a-trick-in-asprintf-to-release-the-memory", "title": "What is a trick in asprintf() to release the memory?", "body": "<p>Below is a snippet cited from \"21 century C\".\nI can't figure out why the outcome of the program is so different if I release the memory with free(tmp_string_for_extend), not free(write_to) in the macro Sasprintf. Thanks,</p>\n\n<pre><code>#define Sasprintf(write_to,  ...) {           \\\n    char *tmp_string_for_extend = (write_to); \\\n    asprintf(&amp;(write_to), __VA_ARGS__);       \\\n    free(tmp_string_for_extend);              \\\n}\n\nint main() {\n    inti = 3;\n    char *q = NULL;\n    Sasprintf(q,\"select * from tab\");\n    Sasprintf(q,\"%s where col%i is not null\",q,i);\n    printf(\"%s\\n\",q);\n}\n</code></pre>\n"}, {"tags": ["android", "c", "android-ndk", "cross-compiling"], "answers": [{"tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": false, "score": 0, "last_activity_date": 1540405133, "creation_date": 1540405133, "answer_id": 52975621, "question_id": 52852734, "link": "https://stackoverflow.com/questions/52852734/cross-compiling-of-c-source-file-to-android-arm/52975621#52975621", "title": "Cross Compiling of C source file to Android Arm", "body": "<p>You have to use an Android toolchain to build for Android. Your system's g++ targets Windows, not Android.</p>\n\n<p>I'd strongly suggest using ndk-build or CMake, but if you need to use Clang directly for some reason you should use a <a href=\"https://developer.android.com/ndk/guides/standalone_toolchain\" rel=\"nofollow noreferrer\">standalone toolchain</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 10084006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4cmkF.jpg?s=128&g=1", "display_name": "Gerome Tapales", "link": "https://stackoverflow.com/users/10084006/gerome-tapales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 450, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540405133, "creation_date": 1539772165, "last_edit_date": 1539776052, "question_id": 52852734, "link": "https://stackoverflow.com/questions/52852734/cross-compiling-of-c-source-file-to-android-arm", "title": "Cross Compiling of C source file to Android Arm", "body": "<p>I'm trying to make a cross compiler on C language in mobile devices from windows using nim . I have managed until compilation but I cannot export/push it on my phone using USB debugging\n below is the batch file I've created.. can anyone tell me what's wrong? I just want to compile directly to my mobile device using gcc or clang.</p>\n\n<pre><code>@echo off\n\nset PATH=%PATH%;C:/Users/PCTechRinz/AppData/Local/Android/Sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/windows/bin\n\n nim c --cpu:arm --os:android --compileOnly hello.nim\n\npath = C:/cygwin/bin\n\ng++ -I../sysroot/usr/include -I/path=D:/Installer/nim-0.19.0/lib -pie -o hello.bin hello.cpp stdlib_system.cpp\n\npath = C:/Users/PCTechRinz/AppData/Local/Android/Sdk/platform-tools\n adb root\n adb push hello.bin /data/local/tmp/hello.bin\n adb shell \n\ncd /data/local/tmp/hello.bin\nchmod 755 hello\n./hello\npause\n</code></pre>\n\n<p>below is the what I am getting</p>\n\n<pre><code>Hint: used config file 'D:\\Installer\\nim-0.19.0\\config\\nim.cfg' [Conf]\nHint: system [Processing]\nHint: hello [Processing]\nHint: operation successful (12267 lines compiled; 0.268 sec total; 10.773MiB pea\nkmem; Debug Build) [SuccessX]\nadb: error: failed to get feature set: no devices/emulators found\nerror: no devices/emulators found\nThe system cannot find the path specified.\n'chmod' is not recognized as an internal or external command,\noperable program or batch file.\n'.' is not recognized as an internal or external command,\noperable program or batch file.\nPress any key to continue . . .\n</code></pre>\n\n<p>I have enabled USB debugging on my phone</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 8, "creation_date": 1539771435, "post_id": 52852421, "comment_id": 92620266, "body": "The variables <code>a</code>, <code>b</code>, etc. in <code>main()</code> are not related to <code>extern int a, b;</code> etc. If you declare a variable in inner scope with a same name then the resp. variable of outer scope is <a href=\"https://en.cppreference.com/w/cpp/language/declarations#Notes\" rel=\"nofollow noreferrer\">eclipsed</a>. (It&#39;s still there but you cannot access in inner scope.)"}, {"owner": {"reputation": 51, "user_id": 10517877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54269d6c55f7d1f1560cf9a8104b7559?s=128&d=identicon&r=PG&f=1", "display_name": "user10517877", "link": "https://stackoverflow.com/users/10517877/user10517877"}, "edited": false, "score": 0, "creation_date": 1539771619, "post_id": 52852421, "comment_id": 92620377, "body": "inner scope is what is located in the main()?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 5, "creation_date": 1539771720, "post_id": 52852421, "comment_id": 92620418, "body": "Each <code>{</code> opens a new scope which ends with the corresponding <code>}</code>. <code>int a; int a;</code> is invalid -&gt; redeclaration. <code>int main() { int a; { int a; } }</code> is not -&gt; variables are declared in different scopes."}], "answers": [{"comments": [{"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 1, "creation_date": 1539771804, "post_id": 52852577, "comment_id": 92620457, "body": "Minor clarification: the extern&#39;d variable could be declared in a .h file as well as a .c file."}, {"owner": {"reputation": 51, "user_id": 10517877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54269d6c55f7d1f1560cf9a8104b7559?s=128&d=identicon&r=PG&f=1", "display_name": "user10517877", "link": "https://stackoverflow.com/users/10517877/user10517877"}, "edited": false, "score": 0, "creation_date": 1539772189, "post_id": 52852577, "comment_id": 92620687, "body": "Then what is the purpose of the declaration in this case?"}, {"owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "reply_to_user": {"reputation": 51, "user_id": 10517877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54269d6c55f7d1f1560cf9a8104b7559?s=128&d=identicon&r=PG&f=1", "display_name": "user10517877", "link": "https://stackoverflow.com/users/10517877/user10517877"}, "edited": false, "score": 0, "creation_date": 1539772239, "post_id": 52852577, "comment_id": 92620715, "body": "@user10517877 Nothing! :) It will work fine without it."}, {"owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1539772267, "post_id": 52852577, "comment_id": 92620726, "body": "@nicomp Read this: <a href=\"https://stackoverflow.com/questions/12727881/c-what-is-the-use-of-extern-in-header-files\" title=\"c what is the use of extern in header files\">stackoverflow.com/questions/12727881/&hellip;</a>"}, {"owner": {"reputation": 51, "user_id": 10517877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54269d6c55f7d1f1560cf9a8104b7559?s=128&d=identicon&r=PG&f=1", "display_name": "user10517877", "link": "https://stackoverflow.com/users/10517877/user10517877"}, "edited": false, "score": 1, "creation_date": 1539772333, "post_id": 52852577, "comment_id": 92620757, "body": "Ok. If you want to add anything about declaration worth noting, feel free to do it. I am accepting your answer."}, {"owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "reply_to_user": {"reputation": 51, "user_id": 10517877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54269d6c55f7d1f1560cf9a8104b7559?s=128&d=identicon&r=PG&f=1", "display_name": "user10517877", "link": "https://stackoverflow.com/users/10517877/user10517877"}, "edited": false, "score": 0, "creation_date": 1539772446, "post_id": 52852577, "comment_id": 92620816, "body": "@user10517877 You should define <code>int a=3</code> outside <code>main</code> (above <code>main</code>) and try to run it and then try to run it after (below) <code>main</code> and check the difference."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1539788877, "post_id": 52852577, "comment_id": 92631150, "body": "@Observer Please be more direct if you want to tell me something."}], "tags": [], "owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "is_accepted": true, "score": 3, "last_activity_date": 1539771705, "creation_date": 1539771705, "answer_id": 52852577, "question_id": 52852421, "link": "https://stackoverflow.com/questions/52852421/is-variable-declaration-necessary-in-c/52852577#52852577", "title": "Is variable declaration necessary in C?", "body": "<p>If the declaration was missing then it would create no problem in <code>main</code> function since the locally defined variables i.e. <code>a,b,c,f</code> will be used in the functionality of <code>main</code> till its scope ends.</p>\n\n<p>The declaration merely tells that the definition lies elsewhere (in some other <code>.c</code> file) or the definition lies after the function <code>main</code> in the same <code>.c</code> file.</p>\n"}, {"tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": false, "score": 2, "last_activity_date": 1539773080, "last_edit_date": 1539773080, "creation_date": 1539772316, "answer_id": 52852778, "question_id": 52852421, "link": "https://stackoverflow.com/questions/52852421/is-variable-declaration-necessary-in-c/52852778#52852778", "title": "Is variable declaration necessary in C?", "body": "<p>There will be no problem here if the mentioned declaration is missing.</p>\n\n<pre><code>// Variable declaration:\nextern int a, b;\nextern int c;\nextern float f;\n</code></pre>\n\n<p>This tells the compiler that these variables are defined somewhere else(in another file).</p>\n\n<pre><code>/* variable definition: */\nint a, b;\nint c;\nfloat f;\n</code></pre>\n\n<p>This is where you define variables but they are not the same as the external variables you declared since they are in the inner scope of the main function.</p>\n\n<p>The scope is the place where variables live. <code>extern</code> keyword notes that the scope is global.\nYou can define variables with the same name in an inner scope and access only them as you did in the main function but it's not a good practice.</p>\n\n<pre><code>void foo()\n{\n    int a = 5;\n    printf(\"%d\\n\", a); // 5\n\n    // Creating an inner scope\n    {\n        int a = 20;\n        printf(\"%d\\n\", a); // 20\n    }\n    printf(\"%d\\n\", a); // 5\n}\n</code></pre>\n\n<p>The correct way to use the <code>extern</code> keyword with variables is like this.</p>\n\n<pre><code>//h1.h\nextern int global_var;  // Declaration of the variable\n\n//c1.c\n#include h1.h\nint global_var = 0; // Definition of the global var. Memory is allocated here.\n\n//main.c\n#include h1.h\nint main()\n{\n    printf(\"global var value is %d\\n\", global_var); // use of the var defined and \n                                                    // initialized in c1.c\n    return 0;\n}\n</code></pre>\n\n<p>This program will print <code>0</code> since the variable is defined and initialized in c1.c.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1539779727, "post_id": 52852807, "comment_id": 92625135, "body": "<code>extern</code> does not actually change the visibility. Visibility is a matter of <i>scope</i>, and <code>extern</code> does not change where in the source text an identifier will be known and can be used. <code>extern</code> changes <i>linkage</i>. Linkage is a process by which different declarations of the same identifier can be made to refer to the same object. (And, unfortunately, the semantics of <code>extern</code> mean it does not always provide external linkage, so explaining it is complicated.)"}], "tags": [], "owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "is_accepted": false, "score": 1, "last_activity_date": 1539772392, "creation_date": 1539772392, "answer_id": 52852807, "question_id": 52852421, "link": "https://stackoverflow.com/questions/52852421/is-variable-declaration-necessary-in-c/52852807#52852807", "title": "Is variable declaration necessary in C?", "body": "<p>Extern extends the visibility of the C variables and C functions. so that lets the compiler know that there is another place that those vars are declared and memory was allocated for them elsewhere. \nfor example in another c file.\nif you compile a c file containing a global var for example:\nint c = 5;\nand you create a function on you c  file that uses this c var, for example:</p>\n\n<pre><code>int someFunc(void){\n\nreturn c;}\n</code></pre>\n\n<p>if you run someFunc in your main and print its return value, you will get 5. but you must compile both c files together.\nin your program, you only use the locally allocated var declared in your main function.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539780104, "post_id": 52852930, "comment_id": 92625378, "body": "&quot;overriding the previous declarations.&quot; the identifiers are <i>hidden</i>, not overwritten. A commonly used term is <i>shadowing</i>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1539780843, "post_id": 52852930, "comment_id": 92625840, "body": "@Swordfish, you wrote <i>overwritten</i> instead of <i>overridden</i>.  Nobody suggested overwriting.  That said, you&#39;re absolutely correct that the standard term here is <b>shadowing</b>."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1539781057, "post_id": 52852930, "comment_id": 92625986, "body": "@TobySpeight Sorry, I am not a native speaker. But I think it is understandable from the context what I was trying to say. Note that &quot;shadowing&quot; is not used in the standard."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1539781514, "post_id": 52852930, "comment_id": 92626294, "body": "I didn&#39;t mean &quot;standard&quot;; I should have written something like &quot;conventional&quot;.  Touche!"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539852961, "post_id": 52852930, "comment_id": 92654378, "body": "@Swordfish I picked &quot;overriding&quot; because that is the first that came to my mind, and this is a commonly used term in oop when you write a new version of a superclass method. But you&#39;re correct. I have fixed it now."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 0, "last_activity_date": 1539852859, "last_edit_date": 1539852859, "creation_date": 1539772750, "answer_id": 52852930, "question_id": 52852421, "link": "https://stackoverflow.com/questions/52852421/is-variable-declaration-necessary-in-c/52852930#52852930", "title": "Is variable declaration necessary in C?", "body": "<p>When it comes to simple variables, there is really no difference between the declaration and definition. There is a difference when it comes to structs and functions. Here is an example:</p>\n\n<pre><code>// Declarations\nstruct myStruct;\nint foo();\n\nint main() \n{\n   ...\n}\n\n// Definitions\nstruct myStruct {\n    int a, b;\n};\n\nint foo() {\n    return 42;\n}\n</code></pre>\n\n<p>In your case, you are hiding the previous declarations so that they are not accessible before the end of the scope. This is commonly called <em>shadowing</em>. It's basically the same thing as this:</p>\n\n<pre><code>int main()\n{\n    int i=0;\n    printf(\"i: %d\\n\", i);\n    {\n        int i=42; // Now the previous i is inaccessible within this scope\n        printf(\"i: %d\\n\", i);\n    }\n    // And now it is accessible again\n    printf(\"i: %d\\n\", i);\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 10517877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54269d6c55f7d1f1560cf9a8104b7559?s=128&d=identicon&r=PG&f=1", "display_name": "user10517877", "link": "https://stackoverflow.com/users/10517877/user10517877"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 52852577, "answer_count": 4, "score": 4, "last_activity_date": 1539852859, "creation_date": 1539771227, "question_id": 52852421, "link": "https://stackoverflow.com/questions/52852421/is-variable-declaration-necessary-in-c", "title": "Is variable declaration necessary in C?", "body": "<p>See the comments to see what is being referred as declaration.\nIf the whole variable declaration part was missing, what would be the problem?</p>\n\n<p>Appears that variable definition and initialization either simultaneously or separately like in the example would suffice.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// Variable declaration:\nextern int a, b;\nextern int c;\nextern float f;\n\nint main () {\n\n   /* variable definition: */\n   int a, b;\n   int c;\n   float f;\n\n   /* actual initialization */\n   a = 10;\n   b = 20;\n\n   c = a + b;\n   printf(\"value of c : %d \\n\", c);\n\n   f = 70.0/3.0;\n   printf(\"value of f : %f \\n\", f);\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "algorithm"], "comments": [{"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 1, "creation_date": 1539771469, "post_id": 52852012, "comment_id": 92620287, "body": "Does each query have a different target sum (x) or only a different subarray?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8401765"}, "reply_to_user": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 1, "creation_date": 1539771996, "post_id": 52852012, "comment_id": 92620566, "body": "Is it possible for you to store the data in a sorted array? If so, I can probably offer an algorithm with an O(n) complexity per query, n being the size of the sub-array. Also what @\u05d2\u05dc\u05e2\u05d3\u05d1\u05e8\u05e7\u05df asked."}, {"owner": {"reputation": 2815, "user_id": 8592647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b767a670f36224da825fc41092e5934e?s=128&d=identicon&r=PG&f=1", "display_name": "SaiBot", "link": "https://stackoverflow.com/users/8592647/saibot"}, "edited": false, "score": 1, "creation_date": 1539774458, "post_id": 52852012, "comment_id": 92621965, "body": "@BananaSenpai Isn&#39;t the original algorithm not already O(n)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8401765"}, "reply_to_user": {"reputation": 2815, "user_id": 8592647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b767a670f36224da825fc41092e5934e?s=128&d=identicon&r=PG&f=1", "display_name": "SaiBot", "link": "https://stackoverflow.com/users/8592647/saibot"}, "edited": false, "score": 0, "creation_date": 1539775116, "post_id": 52852012, "comment_id": 92622406, "body": "Touche, @SaiBot!! but he&#39;s using a hash table. I&#39;m sorry i didn&#39;t point this out earlier, but my algorithm has the same complexity in an array, which is a much less space complex Data structure. Also, having a hash table wont help if you have a changing sub-array and sum specification, because hashing won&#39;t preserve the indexes, meaning, he&#39;ll have to create a new hash map for every query making his method as complex as O(n^2), because it requires generating a hashmap and then searching it."}, {"owner": {"reputation": 2815, "user_id": 8592647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b767a670f36224da825fc41092e5934e?s=128&d=identicon&r=PG&f=1", "display_name": "SaiBot", "link": "https://stackoverflow.com/users/8592647/saibot"}, "edited": false, "score": 0, "creation_date": 1539776811, "post_id": 52852012, "comment_id": 92623341, "body": "@BananaSenpai uhm... for each query generating a hashmap is O(n) searching it n times is also O(n) which is O(n) in total, right?"}, {"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1539778196, "post_id": 52852012, "comment_id": 92624204, "body": "Also, are all the queries given in advance?"}, {"owner": {"reputation": 111, "user_id": 10390214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a98024a63e0f81f6cd37e60e9f2a816?s=128&d=identicon&r=PG", "display_name": "ChocoLite", "link": "https://stackoverflow.com/users/10390214/chocolite"}, "reply_to_user": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1539778827, "post_id": 52852012, "comment_id": 92624599, "body": "The target sum is the same. But the subarry keeps changing. We get the values of the endpoints from the user. @\u05d2\u05dc\u05e2\u05d3\u05d1\u05e8\u05e7\u05df"}, {"owner": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "edited": false, "score": 1, "creation_date": 1539780205, "post_id": 52852012, "comment_id": 92625443, "body": "@user10390214 what do you mean by end points? you mean 0 and arr.length-1, i.e. the start and end indices of the array?"}, {"owner": {"reputation": 2815, "user_id": 8592647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b767a670f36224da825fc41092e5934e?s=128&d=identicon&r=PG&f=1", "display_name": "SaiBot", "link": "https://stackoverflow.com/users/8592647/saibot"}, "edited": false, "score": 0, "creation_date": 1539780432, "post_id": 52852012, "comment_id": 92625579, "body": "I guess OP means the start and end points of the subarray-queries are user input. Which means they are not known beforehand."}, {"owner": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "reply_to_user": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1539781799, "post_id": 52852012, "comment_id": 92626478, "body": "@\u05d2\u05dc\u05e2\u05d3\u05d1\u05e8\u05e7\u05df &quot;Also, are all the queries given in advance?&quot; usually this is not done in practice or for any problem solving exercise too as far as I know. Queries shouldn&#39;t be considered when devising an algorithm. It will make the algorithm tuned to those specific queries only and any future queries will suffer."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1539782647, "post_id": 52852012, "comment_id": 92627030, "body": "You only need to record the values (<code>x</code>), you don&#39;t also need to record <code>sum-x</code>."}, {"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "reply_to_user": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "edited": false, "score": 0, "creation_date": 1539783530, "post_id": 52852012, "comment_id": 92627635, "body": "@SomeDude in every online platform that I&#39;ve encountered that tests code submissions against a given task, all queries were always given (to the submitted program) in advance. That said, I agree with you that it may be useful to consider a more general approach."}, {"owner": {"reputation": 1639, "user_id": 8071889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ECS55.jpg?s=128&g=1", "display_name": "suvojit_007", "link": "https://stackoverflow.com/users/8071889/suvojit-007"}, "edited": false, "score": 0, "creation_date": 1539785435, "post_id": 52852012, "comment_id": 92628924, "body": "Is your array sorted? If yes then we won&#39;t require any hash table as it won&#39;t be space efficient. If not then hashtable would be the only option to solve this problem in linear time."}], "answers": [{"tags": [], "owner": {"reputation": 2815, "user_id": 8592647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b767a670f36224da825fc41092e5934e?s=128&d=identicon&r=PG&f=1", "display_name": "SaiBot", "link": "https://stackoverflow.com/users/8592647/saibot"}, "is_accepted": false, "score": 1, "last_activity_date": 1539790820, "creation_date": 1539790820, "answer_id": 52858736, "question_id": 52852012, "link": "https://stackoverflow.com/questions/52852012/subarray-pair-sum/52858736#52858736", "title": "Subarray - Pair Sum", "body": "<p>To start off the discussion, what about precomputing all results and then making them accessible efficiently?</p>\n\n<p>Precomputing all index pairs <code>&lt;i, j&gt;</code> where <code>a[i] + a[j] = sum</code> can be performed offline in <code>O(n)</code> where <code>n</code> is the size of the input array <code>a</code>.</p>\n\n<p>Afterwards you could store the precomputed pairs in a 2d spatial index structure (e.g., <a href=\"https://en.wikipedia.org/wiki/R-tree#Search\" rel=\"nofollow noreferrer\">R-Tree</a> or Quadtree). </p>\n\n<p>A subarray query <code>(start, end)</code> corresponds then to a range query (with a quadratic box) on the 2d index with <code>min = (start, start)</code> and <code>max = (end, end)</code>. </p>\n\n<p>Depending on the extent of the query this should be possible in O(log m) where m is the overall number of pairs. </p>\n"}, {"comments": [{"owner": {"reputation": 2815, "user_id": 8592647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b767a670f36224da825fc41092e5934e?s=128&d=identicon&r=PG&f=1", "display_name": "SaiBot", "link": "https://stackoverflow.com/users/8592647/saibot"}, "edited": false, "score": 0, "creation_date": 1539858398, "post_id": 52866904, "comment_id": 92657390, "body": "step 2) of your algorithm unfortunately has O(n^2) runtime which is worse than the original idea  (having O(n)) mentioned in the question."}, {"owner": {"reputation": 76, "user_id": 10518808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5008c9f7136ee4dd52c6d10c97d69de?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Vajpeyi", "link": "https://stackoverflow.com/users/10518808/abhinav-vajpeyi"}, "reply_to_user": {"reputation": 2815, "user_id": 8592647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b767a670f36224da825fc41092e5934e?s=128&d=identicon&r=PG&f=1", "display_name": "SaiBot", "link": "https://stackoverflow.com/users/8592647/saibot"}, "edited": false, "score": 0, "creation_date": 1539870930, "post_id": 52866904, "comment_id": 92664800, "body": "No the total complexity would still be O(n).Because we are using hash maps. so the searching for the element would take O(1)"}, {"owner": {"reputation": 2815, "user_id": 8592647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b767a670f36224da825fc41092e5934e?s=128&d=identicon&r=PG&f=1", "display_name": "SaiBot", "link": "https://stackoverflow.com/users/8592647/saibot"}, "edited": false, "score": 0, "creation_date": 1539874000, "post_id": 52866904, "comment_id": 92666823, "body": "you should add that crucial part to your answer. However, this is still no improvement over the original O(n), right?"}, {"owner": {"reputation": 76, "user_id": 10518808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5008c9f7136ee4dd52c6d10c97d69de?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Vajpeyi", "link": "https://stackoverflow.com/users/10518808/abhinav-vajpeyi"}, "reply_to_user": {"reputation": 2815, "user_id": 8592647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b767a670f36224da825fc41092e5934e?s=128&d=identicon&r=PG&f=1", "display_name": "SaiBot", "link": "https://stackoverflow.com/users/8592647/saibot"}, "edited": false, "score": 0, "creation_date": 1539967680, "post_id": 52866904, "comment_id": 92705890, "body": "yes, It would still take o(n) time, but I don&#39;t think we can solve this problem in less than O(n) time. I tried but couldn&#39;t solve it in less than O(n)."}], "tags": [], "owner": {"reputation": 76, "user_id": 10518808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5008c9f7136ee4dd52c6d10c97d69de?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Vajpeyi", "link": "https://stackoverflow.com/users/10518808/abhinav-vajpeyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1539968527, "last_edit_date": 1539968527, "creation_date": 1539835792, "answer_id": 52866904, "question_id": 52852012, "link": "https://stackoverflow.com/questions/52852012/subarray-pair-sum/52866904#52866904", "title": "Subarray - Pair Sum", "body": "<p>Algorithm for finding the number of pairs of a given subarray which have their sum equal to a definite target sum:</p>\n\n<ol>\n<li>Create a map to store frequency of each number in the array.</li>\n<li>For every element check if it can be combined with any other element (other than itself!) to give the desired sum. Increment the counter accordingly.</li>\n<li>Divide count by 2 and return.(why? because every pair is counted two times.)</li>\n</ol>\n\n<p>Edit 1:\nHere is my python solution. It can also be done using sets.</p>\n\n<pre><code>s=set()\nresult=set()\nfor item in a:\n    target=original_target-i\n    if target not in s:\n       s.add(i)\n    else:\n        result.add((i,target))\nprint(len(result))\n</code></pre>\n\n<p>Note-sets are implemented as hash tables in python so unless the load factor is too high searching would take O(1) time. so the total complexity would be O(n)</p>\n"}], "owner": {"reputation": 111, "user_id": 10390214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a98024a63e0f81f6cd37e60e9f2a816?s=128&d=identicon&r=PG", "display_name": "ChocoLite", "link": "https://stackoverflow.com/users/10390214/chocolite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1539968527, "creation_date": 1539770030, "last_edit_date": 1539781564, "question_id": 52852012, "link": "https://stackoverflow.com/questions/52852012/subarray-pair-sum", "title": "Subarray - Pair Sum", "body": "<p>How to find the number of pairs of a given subarray which have their sum equal to a definite target sum?</p>\n\n<p>I have tried using a hash-table and finding the number of occurences of sum-x and x, x is i-th element of the subarray. </p>\n\n<p>But how to optimise it for mutiple queries?\nWe cannot make a hash table for each of the mutiple query.</p>\n\n<p>Edit: The target sum is the same. We keep on getting the endpoints of the subarray from the user.</p>\n"}, {"tags": ["c", "multithreading", "openmp"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1539772006, "post_id": 52851985, "comment_id": 92620576, "body": "Note that <i>&quot;it does not work&quot;</i> is never a sufficient problem description."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1539772764, "post_id": 52851985, "comment_id": 92620994, "body": "&quot;As you can see&quot; No, where should we see this?  A clever compiler might optimize the function quite a bit to make it take only very little time."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539773246, "post_id": 52851985, "comment_id": 92621247, "body": "Infinite numbers do not exist. The value you use will not fit in an <code>int</code>, so you end up overflowing it. What happens from there is undefined behavior, anything can happen, including a program crash or the program seemingly working ok. Speculations about what your program does are useless until this bug is fixed. As a side note, you should not go anywhere near OpenMP or multi-threading if you don&#39;t even know the limits of the standard integer types. Start by learning the basics of C."}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 10088459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8364f9e1dd2321499350c8859ec4b2?s=128&d=identicon&r=PG&f=1", "display_name": "mpountou", "link": "https://stackoverflow.com/users/10088459/mpountou"}, "edited": false, "score": 0, "creation_date": 1539773048, "post_id": 52852636, "comment_id": 92621142, "body": "forget the increment example. Assume that function increment1() takes too long and we cant do anything for that."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 0, "last_activity_date": 1539771867, "creation_date": 1539771867, "answer_id": 52852636, "question_id": 52851985, "link": "https://stackoverflow.com/questions/52851985/run-thread-in-background-and-continue-main-with-openmp/52852636#52852636", "title": "Run thread in background and continue main with OpenMP", "body": "<p>OpenMP doesn't work like this. Idiomatically you use OpenMP to make the loop in <code>increment1</code> run faster, e.g. by applying <code>#pragma omp parallel for</code>. Of course the specific worksharing approach depends on what your <em>actual</em> function does.</p>\n\n<p>If you do need to use functional parallelism, i.e. run different functions at the same time, <strong>all</strong> of the functions that are supposed to run simultaneously (therefore including the code doing the <code>printf</code>) need to be in <code>section</code>s (or <code>task</code>s).</p>\n"}, {"tags": [], "owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "is_accepted": false, "score": 0, "last_activity_date": 1539774289, "last_edit_date": 1539774289, "creation_date": 1539773729, "answer_id": 52853234, "question_id": 52851985, "link": "https://stackoverflow.com/questions/52851985/run-thread-in-background-and-continue-main-with-openmp/52853234#52853234", "title": "Run thread in background and continue main with OpenMP", "body": "<p>You can use omp tasks:</p>\n\n<pre><code>int main() {\n#pragma omp parallel\n  {\n#pragma omp single\n    {\n#pragma omp task\n      increment1(300000000);\n#pragma omp task // if you leave out this pragma the printf will be executed \n                 // by the same thread that created the increment1 task\n                 // otherwise it can be scheduled by any OMP thread\n      printf(\"continue\\n\");\n\n#pragma omp taskwait\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>This example will create two tasks (one for the <code>increment1</code> function and one for <code>printf(\"continue\\n\")</code> which will be distributed among the OMP threads. The tasks might be scheduled in any order, but when there are more OMP threads than tasks they will be scheduled concurrently.</p>\n\n<p>Additional note: The <code>#pragma omp single</code> directive is there so that the tasks are only created by one thread. other wise each thread would create a task for <code>increment1</code> and the <code>printf</code> statement.</p>\n"}], "owner": {"reputation": 518, "user_id": 10088459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8364f9e1dd2321499350c8859ec4b2?s=128&d=identicon&r=PG&f=1", "display_name": "mpountou", "link": "https://stackoverflow.com/users/10088459/mpountou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 52852636, "answer_count": 2, "score": 2, "last_activity_date": 1539774289, "creation_date": 1539769943, "last_edit_date": 1539771971, "question_id": 52851985, "link": "https://stackoverflow.com/questions/52851985/run-thread-in-background-and-continue-main-with-openmp", "title": "Run thread in background and continue main with OpenMP", "body": "<p>Here is an example of what I want.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;omp.h&gt;\n\nvoid increment1(){\n  int x;\n  x=0;\n  for(int i = 0; i&lt;30000000000000;i++){\n    ++x;\n  }\n  printf(\"%d\\n\",x );\n}\n\nint main(){\n  #pragma omp parallel  \n  {\n    #pragma omp sections  \n    {\n      #pragma omp section\n      { increment1(); }\n    }\n  }\n  printf(\"Continue\\n\" );\n\n  return 0;\n}\n</code></pre>\n\n<p>As you can see <code>increment1()</code> takes too much time to finish. My question is how can i set this task in background and print first <code>printf(\"Continue\\n\" );</code>message and then <code>printf(\"%d\\n\",x );</code> once <code>increment1()</code> is finished.\nAlso tried <a href=\"https://stackoverflow.com/questions/9131875/openmp-run-threads-but-continue-main\">OpenMP run threads but continue main</a> but it does not work</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1539768588, "post_id": 52851455, "comment_id": 92618594, "body": "Think of it this way: the deck, per example is not the property of a card. A card can exist on its own without a deck. So the deck is not part of <code>card</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 15, "creation_date": 1539770413, "post_id": 52851455, "comment_id": 92619652, "body": "It&#39;s just sloppy declaration style, combined with using &quot;Linux style&quot; structs instead of the more commonly used <code>typedef struct { } card_t;</code>... <code>card_t card;</code>"}, {"owner": {"reputation": 15365, "user_id": 52074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd14249e07e1f1d6a949bffa569377ad?s=128&d=identicon&r=PG", "display_name": "Trevor Boyd Smith", "link": "https://stackoverflow.com/users/52074/trevor-boyd-smith"}, "reply_to_user": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 8, "creation_date": 1539777009, "post_id": 52851455, "comment_id": 92623469, "body": "The code is hard to read, not intuitive, functionally correct but not as readable as how @MichaWiedenmann rewrite. Readable code is more important."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1539795510, "post_id": 52851455, "comment_id": 92634668, "body": "@Lundin Or even just <code>struct card { ... }</code> ... <code>struct card drawn;</code> (Which is what I prefer, but it&#39;s more a style thing)"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1539810334, "post_id": 52851455, "comment_id": 92641567, "body": "consider: <code>struct human {face_t* face, torso_t* torso, arms_t* arms, legs_t* legs} Belverus;</code>. What&#39;s the difference between face/torso/arms/legs and Belverus?"}, {"owner": {"reputation": 14194, "user_id": 732016, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d2eb40aff994d83e1d271a3543efb22?s=128&d=identicon&r=PG", "display_name": "wchargin", "link": "https://stackoverflow.com/users/732016/wchargin"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1539825321, "post_id": 52851455, "comment_id": 92645320, "body": "@Lundin: There are <a href=\"https://stackoverflow.com/a/4566358\">good reasons <i>not</i> to typedef structs</a>. It\u2019s not \u201csloppy\u201d; <a href=\"https://www.kernel.org/doc/html/v4.10/process/coding-style.html#typedefs\" rel=\"nofollow noreferrer\">Linux does it for a reason</a>."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1539826268, "post_id": 52851455, "comment_id": 92645507, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17843145/c-what-does-the-name-after-the-closing-class-bracket-means\">c++ - What does the name after the closing class bracket means?</a> --- actually that is for c++ not c, but the syntax is inherited."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1539826402, "post_id": 52851455, "comment_id": 92645531, "body": "There is also <a href=\"https://stackoverflow.com/questions/16057238/defining-structure-variable-after-structure-type\" title=\"defining structure variable after structure type\">stackoverflow.com/questions/16057238/&hellip;</a> - but it&#39;s about a different problem."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 14194, "user_id": 732016, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d2eb40aff994d83e1d271a3543efb22?s=128&d=identicon&r=PG", "display_name": "wchargin", "link": "https://stackoverflow.com/users/732016/wchargin"}, "edited": false, "score": 1, "creation_date": 1539841994, "post_id": 52851455, "comment_id": 92649005, "body": "@wchargin: read their comment again. Lundin said it is sloppy and typedef-free, not sloppy <i>because</i> it is typedef free. In my opinion, what&#39;s sloppy here is the combined struct layout and variable declaration."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 14194, "user_id": 732016, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d2eb40aff994d83e1d271a3543efb22?s=128&d=identicon&r=PG", "display_name": "wchargin", "link": "https://stackoverflow.com/users/732016/wchargin"}, "edited": false, "score": 0, "creation_date": 1539843813, "post_id": 52851455, "comment_id": 92649676, "body": "@wchargin If you read my comment again, you&#39;ll find that the sloppy part refers to the variable declarations and not the struct style. That being said, the Linux kernel style guide is an amateur-level document, completely without rationale or sources. Notably, the link offered provides no rationale, just opinions. And so the Linux kernel is about as far from canonical C as you can get, filled with reliance on poorly-defined behavior and non-standard extensions.  If you want serious coding guidelines for professionals, use MISRA or CERT."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1541185870, "post_id": 52851455, "comment_id": 93143784, "body": "You are not leaving nothing - struct followed by tag name and optionally followed by curly braces is part of the type."}], "answers": [{"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1539873766, "post_id": 52851510, "comment_id": 92666664, "body": "Yes, the to-typedef or not-to-typedef debate rages on. But why introduce something that wan&#39;t present in the original question? It just complicates the answer. Sorry, but I&#39;m downvoting for this reason, and upvoting <a href=\"https://stackoverflow.com/a/52851603/119527\">Jabberwocky&#39;s answer instead</a>."}], "tags": [], "owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "is_accepted": false, "score": 74, "last_activity_date": 1539934699, "last_edit_date": 1539934699, "creation_date": 1539768424, "answer_id": 52851510, "question_id": 52851455, "link": "https://stackoverflow.com/questions/52851455/why-do-we-leave-some-structure-variables-out-of-the-curly-brackets/52851510#52851510", "title": "Why do we leave some structure variables out of the curly brackets?", "body": "<p>You are mixing things up. A <code>struct card</code> has the members <code>face</code> and <code>suit</code>. But there are three variables using the <code>struct card</code> type, namely <code>aCard, deck, cardPtr</code>.</p>\n\n<p>Alternatively one could have written:</p>\n\n<pre><code>typedef struct {\n    char *face;\n    char *suit;\n} Card;\n\nCard aCard, deck[52], *cardPtr;\n// or even\nCard aCard;\nCard deck[52];\nCard *cardPtr;\n</code></pre>\n\n<p>For the <code>typedef</code> have a look at: <a href=\"https://stackoverflow.com/questions/252780/why-should-we-typedef-a-struct-so-often-in-c\">Why should we typedef a struct so often in C?</a> (It goes into the <code>typedef struct { ... } Foo;</code> vs <code>struct Foo {...}</code> debate).</p>\n"}, {"tags": [], "owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "is_accepted": false, "score": 0, "last_activity_date": 1539768536, "creation_date": 1539768536, "answer_id": 52851543, "question_id": 52851455, "link": "https://stackoverflow.com/questions/52851455/why-do-we-leave-some-structure-variables-out-of-the-curly-brackets/52851543#52851543", "title": "Why do we leave some structure variables out of the curly brackets?", "body": "<p><code>aCard</code> and the rest you have mentioned are variables of type <code>struct card</code> and each of these variables contain <code>char *face</code> and <code>char *suit</code>. So how can some variable can contain itself i.e. <code>aCard</code> being inside the struct node.</p>\n"}, {"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1539768673, "creation_date": 1539768673, "answer_id": 52851592, "question_id": 52851455, "link": "https://stackoverflow.com/questions/52851455/why-do-we-leave-some-structure-variables-out-of-the-curly-brackets/52851592#52851592", "title": "Why do we leave some structure variables out of the curly brackets?", "body": "<p>You have declared three variables. <code>aCard</code> is of type <code>struct card</code>, <code>deck</code> is of type <code>struct card[52]</code> and <code>cardPtr</code> is of type <code>struct card *</code></p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 2540278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bg0II.png?s=128&g=1", "display_name": "JamesDev", "link": "https://stackoverflow.com/users/2540278/jamesdev"}, "edited": false, "score": 3, "creation_date": 1539780869, "post_id": 52851599, "comment_id": 92625854, "body": "The <code>struct card</code> and <code>int</code> are indeed both types, but they are not equivalent. I want to clarify this as I think this answer can be misread by some beginners or people not fluent in english."}], "tags": [], "owner": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "is_accepted": false, "score": 6, "last_activity_date": 1539786330, "last_edit_date": 1539786330, "creation_date": 1539768707, "answer_id": 52851599, "question_id": 52851455, "link": "https://stackoverflow.com/questions/52851455/why-do-we-leave-some-structure-variables-out-of-the-curly-brackets/52851599#52851599", "title": "Why do we leave some structure variables out of the curly brackets?", "body": "<p>A</p>\n\n<pre><code>struct card {\n    char *face;\n    char *suit;\n }\n</code></pre>\n\n<p>is just like <code>int</code>, but it is user defined, and</p>\n\n<pre><code>aCard, deck[52], *cardPtr;\n</code></pre>\n\n<p>are variable names, for example,</p>\n\n<pre><code>int aCard, deck[41], *cardPtr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 28, "last_activity_date": 1539768716, "creation_date": 1539768716, "answer_id": 52851603, "question_id": 52851455, "link": "https://stackoverflow.com/questions/52851455/why-do-we-leave-some-structure-variables-out-of-the-curly-brackets/52851603#52851603", "title": "Why do we leave some structure variables out of the curly brackets?", "body": "<p>Your piece of code could be written like this which makes it clearer:</p>\n\n<pre><code>struct card {          // define the struct card\n    char *face;\n    char *suit;\n };\n\nstruct card aCard;     // declare a variable \"aCard\" of type \"struct card \"\nstruct card deck[52]   // declare an array of 52 variables of type \"struct card\"\nstruct card *cardPtr;  // declare a variable \"cardPtr\" of type \"pointer to struct card\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 215, "user_id": 4406754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280c38f4cc343f0f3be19b35d2195c91?s=128&d=identicon&r=PG&f=1", "display_name": "jamesqf", "link": "https://stackoverflow.com/users/4406754/jamesqf"}, "edited": false, "score": 1, "creation_date": 1539796276, "post_id": 52854634, "comment_id": 92635015, "body": "Or to put it in a nutshell, the whole &quot;struct foo {...}&quot; in the OP&#39;s code is just the same as int or float in &quot;int i, j, k;&quot; or &quot;float x, y, z;&quot;."}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": true, "score": 20, "last_activity_date": 1540073522, "last_edit_date": 1540073522, "creation_date": 1539778370, "answer_id": 52854634, "question_id": 52851455, "link": "https://stackoverflow.com/questions/52851455/why-do-we-leave-some-structure-variables-out-of-the-curly-brackets/52854634#52854634", "title": "Why do we leave some structure variables out of the curly brackets?", "body": "<p>Though, this question has already answered, I am posting my answer because I think the OP has doubt in structure declaration and definition of variable of a structure type.</p>\n\n<p>If you don't know what is a structure in C, please have a look at <sup>1)</sup> below.</p>\n\n<p>The keyword <em>struct</em> introduces a structure declaration, which is a list of declarations <strong>enclosed in braces</strong>. An optional name called a structure tag may\nfollow the word <em>struct</em>. Hence, this is a structure declaration:</p>\n\n<pre><code>struct card {\n    char *face;\n    char *suit;\n };\n</code></pre>\n\n<p>here <code>face</code> and <code>suit</code> are <strong>member variables</strong>. Note that a structure declaration reserves no storage; it merely describes a template of a structure.</p>\n\n<p><strong>A struct declaration defines a type.</strong> The right brace that terminates the list of members may be followed by a list of variables. So, in your case:</p>\n\n<pre><code>....\n} aCard, deck[52], *cardPtr;\n</code></pre>\n\n<p><code>aCard</code>, <code>deck[52]</code> and <code>*cardPtr</code> are the <strong>variables of type</strong> <code>struct card</code>.</p>\n\n<p>Since your structure declaration is tagged with name <code>card</code>, the tag <code>card</code> can be used later in definitions of instances of the structure. e.g. given the declaration of structure <code>card</code> above,</p>\n\n<pre><code>struct card someCard;\n</code></pre>\n\n<p>defines a variable <code>someCard</code> which is a structure of type <code>struct card</code>.</p>\n\n<p>Alternatively, you can <code>typedef</code> a structure declaration and use it to define variables of its type.</p>\n\n<hr>\n\n<p>1)</p>\n\n<p>By definition - A structure is a collection of one or more variables, possibly of different types, grouped together under a single name.</p>\n\n<p>As per C standard#6.2.5 [Types]:</p>\n\n<blockquote>\n  <p>A structure type describes a sequentially allocated nonempty set of member objects (and, in certain circumstances, an incomplete array), each of which has an optionally specified name and possibly distinct type. </p>\n  \n  <p>.....<br>\n  .....<br>\n  Arithmetic types and pointer types are collectively called scalar types. Array and structure types are collectively called aggregate types.46) </p>\n</blockquote>\n"}], "owner": {"reputation": 613, "user_id": 10009621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fb9e76523b45cfd70dde3d0501e881?s=128&d=identicon&r=PG&f=1", "display_name": "Belverus", "link": "https://stackoverflow.com/users/10009621/belverus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6270, "favorite_count": 2, "accepted_answer_id": 52854634, "answer_count": 6, "score": 40, "last_activity_date": 1540073522, "creation_date": 1539768293, "last_edit_date": 1539769022, "question_id": 52851455, "link": "https://stackoverflow.com/questions/52851455/why-do-we-leave-some-structure-variables-out-of-the-curly-brackets", "title": "Why do we leave some structure variables out of the curly brackets?", "body": "<p>I'm trying to understand <code>struct</code> in C. I couldn't get the idea about this definition below. Why do we leave <code>aCard</code>, <code>deck[ ]</code> and <code>*cardPtr</code> out? What is the difference between including them in and leaving them out?  </p>\n\n<pre><code> struct card {\n    char *face;\n    char *suit;\n } aCard, deck[52], *cardPtr;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1539766029, "post_id": 52850650, "comment_id": 92617061, "body": "variable shadowing considered harmful"}, {"owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "reply_to_user": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1539766340, "post_id": 52850650, "comment_id": 92617226, "body": "ok, I get it .@sp2danny"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1539767847, "post_id": 52850650, "comment_id": 92618131, "body": "Make x` inside the second <code>while</code> loop <code>static</code>.   That way, changes of its value will persist between iterations."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1539768169, "post_id": 52850650, "comment_id": 92618343, "body": "@sp2danny -- that code snippet is specifically designed to show how variables are scoped in C."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539768432, "post_id": 52850650, "comment_id": 92618499, "body": "Hint: compile with the <code>-Wshadow</code> option. And also read <a href=\"https://stackoverflow.com/questions/25151524/get-warning-when-a-variable-is-shadowed\">this</a>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1539768449, "post_id": 52850650, "comment_id": 92618509, "body": "I remember <i>C Primer Plus</i> as being a pretty good book, but something here gives me reservations: note that you must cast addresses to <code>void *</code> before printing to avoid undefined behavior (but maybe this shows up later in the book). E.g. <code>printf(&quot;x in outer block: %d at %p\\n&quot;, x, (void *) &amp;x);</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1539779711, "post_id": 52850650, "comment_id": 92625127, "body": "The whole idea is probably to make you look at the printed address and realize you are dealing with different objects."}], "answers": [{"tags": [], "owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "is_accepted": false, "score": 3, "last_activity_date": 1539766164, "last_edit_date": 1539766164, "creation_date": 1539765851, "answer_id": 52850695, "question_id": 52850650, "link": "https://stackoverflow.com/questions/52850650/inner-increment-i-output-unchanged-result/52850695#52850695", "title": "inner increment i++ output unchanged result", "body": "<p>It happens because inside the <code>while</code> loop scope the variable <code>x</code> is redefined each execution to be equal to 100, this shadows the <code>x</code> defined outside, and hence you are not incrementing that one 3 times, but the inner one. At each new iteration the <em>new</em> x is incremented by 1, and you see 101 in the output.</p>\n"}, {"comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 1, "creation_date": 1539767257, "post_id": 52851038, "comment_id": 92617779, "body": "Please format your answer and add some more text. You don&#39;t need to copy the whole code, but instead only snippets"}], "tags": [], "owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "is_accepted": true, "score": 3, "last_activity_date": 1539768803, "last_edit_date": 1539768803, "creation_date": 1539766898, "answer_id": 52851038, "question_id": 52850650, "link": "https://stackoverflow.com/questions/52850650/inner-increment-i-output-unchanged-result/52851038#52851038", "title": "inner increment i++ output unchanged result", "body": "<p>Every time you enter the while loop you reset your inner x value to 100, you can add an outer var, and increment it in the while loop, add its value to the 100.</p>\n\n<pre><code>int main()\n{\n    int x = 30;\n    int y = 0;\n    printf(\"x in outer block: %d at \\n\", x);\n    {\n        int x = 77; /* new x , hides first x*/\n        printf(\"x in inner block: %d at \\n\", x);\n    }\n    printf(\"x in outer block: %d at\\n\", x);\n\n    while (x++ &lt; 33) /*original x*/\n    {\n        int x = 100;/*value resets on every entry to 100*/\n        x++;\n        x +=y;\n        ++y;/*value is incremented on every entry */\n\n        printf(\"x in while loop: %d at\\n\", x);\n    }\n    printf(\"x in outer block: %d at \\n\", x);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 1, "last_activity_date": 1539767845, "creation_date": 1539767845, "answer_id": 52851320, "question_id": 52850650, "link": "https://stackoverflow.com/questions/52850650/inner-increment-i-output-unchanged-result/52851320#52851320", "title": "inner increment i++ output unchanged result", "body": "<p>There is quite a bit of explanation here so</p>\n\n<p>let me <strong>just answer</strong> your question straight \"<em>How could I make it output?</em>\"</p>\n\n<pre><code>while (x++ &lt; 33) //original x\n{\n    //int x = 100;\n    static int x = 100;\n    x++;\n    printf(\"x in while loop: %d at %p\\n\", x, &amp;x);\n}\n</code></pre>\n\n<p>I'd say read something on <code>static</code> variables and in general <code>storage classes</code></p>\n"}, {"tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1539767854, "creation_date": 1539767854, "answer_id": 52851325, "question_id": 52850650, "link": "https://stackoverflow.com/questions/52850650/inner-increment-i-output-unchanged-result/52851325#52851325", "title": "inner increment i++ output unchanged result", "body": "<p>In this while loop:</p>\n\n<pre><code>while (x++ &lt; 33) //original x\n{\n    int x = 100; // this x hides the original x\n    x++;\n    printf(\"x in while loop: %d at %p\\n\", x, &amp;x);\n}\n</code></pre>\n\n<p>the <code>x</code> declared in the loop body hides the original <code>x</code> (used as counter in the <code>while</code> loop expression). In every iteration of <code>while</code> loop you are getting same value <code>101</code> of inner <code>x</code> because each iteration of <code>while</code> loop creates new instance of <code>x</code> (inner <code>x</code>) which is initialized with value <code>100</code> and destroy's at the end of the loop body.</p>\n\n<blockquote>\n  <blockquote>\n    <p>How could I make it output?</p>\n  </blockquote>\n</blockquote>\n\n<p>You can simply make the inner <code>x</code> static, if you want its last value to be persist in every iteration of <code>while</code> loop:</p>\n\n<pre><code>while (x++ &lt; 33) //original x\n{\n    static int x = 100;\n    x++;\n    printf(\"x in while loop: %d at %p\\n\", x, &amp;x);\n}\n</code></pre>\n"}], "owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 52851038, "answer_count": 4, "score": -1, "last_activity_date": 1539768803, "creation_date": 1539765693, "last_edit_date": 1539765795, "question_id": 52850650, "link": "https://stackoverflow.com/questions/52850650/inner-increment-i-output-unchanged-result", "title": "inner increment i++ output unchanged result", "body": "<p>I am following the book \"C Primer Plus\" and encounter such a snippet of code:</p>\n\n<pre><code>int main()\n{\n    int x = 30;\n\n    printf(\"x in outer block: %d at %p\\n\", x, &amp;x);\n    {\n        int x = 77; // new x , hides first x\n        printf(\"x in inner block: %d at %p\\n\", x, &amp;x);\n    }\n    printf(\"x in outer block: %d at %p\\n\", x, &amp;x);\n    while (x++ &lt; 33) //original x\n    {\n        int x = 100;\n        x++;\n        printf(\"x in while loop: %d at %p\\n\", x, &amp;x);\n    }\n    printf(\"x in outer block: %d at %p\\n\", x, &amp;x);\n\n    return 0;\n}\n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>In [23]: !./a.out\nx in outer block: 30 at 0x7ffee7243788\nx in inner block: 77 at 0x7ffee7243784\nx in outer block: 30 at 0x7ffee7243788\nx in while loop: 101 at 0x7ffee7243780\nx in while loop: 101 at 0x7ffee7243780\nx in while loop: 101 at 0x7ffee7243780\nx in outer block: 34 at 0x7ffee7243788\n</code></pre>\n\n<p>It confuse me a lot on </p>\n\n<pre><code>x in while loop: 101 at 0x7ffee7243780\nx in while loop: 101 at 0x7ffee7243780\nx in while loop: 101 at 0x7ffee7243780\n</code></pre>\n\n<p>How could I make it output?</p>\n\n<pre><code>x in while loop: 101 at 0x7ffee7243780\nx in while loop: 102 at 0x7ffee7243780\nx in while loop: 103 at 0x7ffee7243780\n</code></pre>\n"}, {"tags": ["c", "sockets", "networking", "io", "c-standard-library"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1539763729, "post_id": 52850028, "comment_id": 92615813, "body": "Note that these restrictions are only if you open the stream in <i>update mode</i> (using <code>&#39;+&#39;</code> in the call to <a href=\"https://en.cppreference.com/w/c/io/fopen\" rel=\"nofollow noreferrer\"><code>fopen</code></a> or <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fdopen.html\" rel=\"nofollow noreferrer\"><code>fdopen</code></a>). If you open the stream in read-only or write-only modes, those restrictions doesn&#39;t apply."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539770309, "post_id": 52850409, "comment_id": 92619584, "body": "So, not only socket streams have these two restrictions but also normal disk file streams?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539774433, "post_id": 52850409, "comment_id": 92621945, "body": "@Alaneuler  emphatically <b>no</b>, you&#39;re completely misunderstanding what the quote means. I don&#39;t have the book but I am pretty sure it means &quot;these restrictions are the reason why sockets are not ordinarily wrapped into a <code>FILE *</code>."}, {"owner": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539832214, "post_id": 52850409, "comment_id": 92646641, "body": "OK... from what I know, <code>FILE *</code> stream share the same file descriptor, so they share the same file position, do you mean input and output have distinct file position due to buffering (e.g., from very beginning, input and output both have file position 0, one reading of a <code>char</code> causes input position to 1 while output is still 0; then a writing of 10 <code>char</code> causes output position to 10 while input position is still 1)? What about the file position in file table?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539837647, "post_id": 52850409, "comment_id": 92647793, "body": "@Alaneuler A <code>FILE *</code> has its <i>own</i> file position that is distinct from the position of the file description."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539837827, "post_id": 52850409, "comment_id": 92647845, "body": "There are no <i>input and output</i> positions. If you read 1 character with stdio, the file description can be advanced 2048 characters. <code>ftell</code> will tell 1. The output position for file description is 2048. There is no output position for stdio... if you write without seek, the behaviour is undefined."}, {"owner": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539847923, "post_id": 52850409, "comment_id": 92651611, "body": "Wow, thank you very much for the explanations, now I understand the reason for the two restrictions. But I have one final question: you&#39;ve said that socket is not seekable, but the excerpt says that &quot;The latter three functions (which are <code>fsetpos</code>, <code>rewind</code> and <code>fseek</code>) use the Unix I/O <code>lseek</code> function to reset the current \ufb01le position&quot;, is this wrong in the CSAPP book?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539849739, "post_id": 52850409, "comment_id": 92652590, "body": "The book is right. But <code>lseek</code> will <i>fail</i> on sockets, hence the former three will fail as well."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 1, "last_activity_date": 1539774735, "last_edit_date": 1539774735, "creation_date": 1539764780, "answer_id": 52850409, "question_id": 52850028, "link": "https://stackoverflow.com/questions/52850028/why-the-restrictions-on-c-standard-i-o-streams-that-interact-with-sockets/52850409#52850409", "title": "Why the restrictions on C standard I/O streams that interact with sockets?", "body": "<p>The <code>stdio</code> functions are for <em>buffered file input and output</em>. A socket is not a file, but a socket. It doesn't even have a file position, and the buffer requirements are quite distinct from ordinary files - sockets can have independent input and output buffers, stdio file I/O cannot!</p>\n\n<p>The problem is that the <em>file input</em> and <em>file output</em> share the <em>same</em> file position, and the operating system might have (and indeed will have on Unix) a distinct file position from what the file position due to the buffering in C would be.</p>\n\n<p>Hence, from C99 rationale</p>\n\n<blockquote>\n  <p>A change of input/output direction on an update file is only allowed following a successful\n  <code>fsetpos</code>, <code>fseek</code>, <code>rewind</code>, or <code>fflush</code> operation, since these are precisely the functions\n  which assure that the I/O buffer has been flushed.</p>\n</blockquote>\n\n<p>Note that all this applies to only files opened with <code>+</code> - with files opened in any other standard modes, it is not possible to mix input and output.</p>\n\n<p>Since it is required by the C standard that when switching from <em>input</em> to <em>output</em> on <code>FILE *</code> one of the functions <code>fsetpos</code>, <code>rewind</code> or <code>fseek</code>, which essentially invoke <code>lseek</code> must be successful (mind you, calling <code>fflush</code> flushes the output, not input buffer!) before an output function is attempted... yet a socket is not seekable and <code>lseek</code> would therefore always <em>fail</em> - it means that you cannot use a <code>FILE *</code> that has been opened for both reading and writing wrapping the socket for actually both <em>reading</em> and <em>writing</em> to the socket.</p>\n\n<hr>\n\n<p>It is possible to use <code>fdopen</code> to open a <code>FILE *</code> with stream sockets if you really need to: just open <em>2</em> files - one <code>\"rb\"</code> for input and <em>another</em> with <code>\"wb\"</code> for output.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539774782, "post_id": 52852846, "comment_id": 92622183, "body": "That&#39;s incorrect actually. There is no function you can call after input to switch to output. (Except in POSIX.1-2008)"}, {"owner": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539848310, "post_id": 52852846, "comment_id": 92651824, "body": "@Steve Summit just cannot grab what you want to point, can you elaborate?"}, {"owner": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539848436, "post_id": 52852846, "comment_id": 92651893, "body": "From what I understand currently, if you are working with normal disk file <code>FILE *</code> stream, there is no such restriction, you can freely switch back and forth between writing and reading. But with <code>FILE *</code> stream on socket, you have to do the extra work between switching. Am I wrong?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "edited": false, "score": 0, "creation_date": 1539861773, "post_id": 52852846, "comment_id": 92659197, "body": "@Alaneuler That doesn&#39;t match my understanding -- I stand by my answer.  But Antti Haapala seems to be disagreeing with my answer, so I can&#39;t be perfectly sure.  (And I haven&#39;t had time to test anything.)"}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1539772517, "creation_date": 1539772517, "answer_id": 52852846, "question_id": 52850028, "link": "https://stackoverflow.com/questions/52850028/why-the-restrictions-on-c-standard-i-o-streams-that-interact-with-sockets/52852846#52852846", "title": "Why the restrictions on C standard I/O streams that interact with sockets?", "body": "<p>When it says \"An input function cannot follow an output function without an intervening call to fflush, fseek, fsetpos, or rewind\", what it means is that if you don't, it might not work as you expect.  But they're mostly talking about i/o to/from ordinary files.</p>\n\n<p>If you have a <code>FILE *</code> stream connected to a socket, and you want to switch back and forth between writing and reading, I would expect it to work just fine if you called <code>fflush</code> when switching from writing to reading.  I would not expect it to be necessary to call anything when switching from reading to writing.</p>\n\n<p>(When working with files, the call to <code>fseek</code> or one of its relatives is necessary in order to update the file position properly, but streams don't have a file position to update.)</p>\n"}], "owner": {"reputation": 113, "user_id": 3217538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qvpob.png?s=128&g=1", "display_name": "Alaneuler", "link": "https://stackoverflow.com/users/3217538/alaneuler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 52850409, "answer_count": 2, "score": 1, "last_activity_date": 1539774735, "creation_date": 1539763393, "last_edit_date": 1592644375, "question_id": 52850028, "link": "https://stackoverflow.com/questions/52850028/why-the-restrictions-on-c-standard-i-o-streams-that-interact-with-sockets", "title": "Why the restrictions on C standard I/O streams that interact with sockets?", "body": "<p>In book CSAPP section 10.9, it says that there are two restrictions on standard I/O streams that interact badly with restrictions on sockets.</p>\n<blockquote>\n<p>Restriction 1: Input functions following output functions. An input function cannot follow an output function without an intervening call to fflush, fseek, fsetpos, or rewind. The fflush function empties the buffer associated with a stream. The latter three functions use the Unix I/O lseek function to reset the current \ufb01le position.</p>\n<p>Restriction 2: Output functions following input functions. An output function cannot follow an input function without an intervening call to fseek, fsetpos, or rewind, unless the input function encounters an end-of-\ufb01le.</p>\n</blockquote>\n<p>But I cannot figure out why the restrictions imposed. So, my question is: what factors result to the two restrictions?</p>\n<p>It also says that &quot;It is illegal to use the lseek function on a socket.&quot;, but how is it possible <code>fseek</code>, <code>fsetpos</code> and <code>rewind</code> use <code>lseek</code> to reset the current file position if it is true?</p>\n<p>There is a similar question <a href=\"https://stackoverflow.com/questions/20605967/restriction-of-c-standard-i-o-and-why-we-cant-use-c-standard-i-o-with-sockets\">here</a>, but my question different from this one.</p>\n"}, {"tags": ["c", "function", "pointers", "arguments"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1539773580, "post_id": 52849923, "comment_id": 92621458, "body": "You mix up 3 different terms. An array variable declaration is different from an function parameter declaration which is different from an expression using arrays."}], "answers": [{"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1539763982, "post_id": 52849977, "comment_id": 92615935, "body": "...and <code>*(a + i)</code> makes <code>a[i] == i[a]</code>!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1539773643, "post_id": 52849977, "comment_id": 92621490, "body": "@haccks <code>puts( &amp;false[&quot;not this crap again...&quot;] );</code>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539774165, "post_id": 52849977, "comment_id": 92621789, "body": "@Lundin; Hehe. BTW, this will certainly give a compile error :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1539777025, "post_id": 52849977, "comment_id": 92623476, "body": "@haccks Not if you include stdio.h and stdbool.h. Perfectly valid C :)"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 11, "last_activity_date": 1539763208, "creation_date": 1539763208, "answer_id": 52849977, "question_id": 52849923, "link": "https://stackoverflow.com/questions/52849923/is-ai-really-the-same-as-a-i-in-c/52849977#52849977", "title": "Is a[i] really the same as *(a + i) in C?", "body": "<p>The <strong><em>expression</em></strong> <code>a[i]</code> is equal to the <strong><em>expression</em></strong> <code>*(a + i)</code>. Using the pointer-arithmetic syntax in declarations is invalid.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 6, "last_activity_date": 1539763694, "creation_date": 1539763694, "answer_id": 52850111, "question_id": 52849923, "link": "https://stackoverflow.com/questions/52849923/is-ai-really-the-same-as-a-i-in-c/52850111#52850111", "title": "Is a[i] really the same as *(a + i) in C?", "body": "<p>The syntax is correct when the <code>[]</code> is used as the postfix array subscription operator, not as an array declarator.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.5.2.1</p>\n\n<blockquote>\n  <p>A postfix expression followed by an expression in square brackets <code>[]</code> is a subscripted\n  designation of an element of an array object. The definition of the subscript operator []\n  is that <code>E1[E2]</code> is identical to <code>(*((E1)+(E2)))</code>. Because of the conversion rules that\n  apply to the binary <code>+</code> operator, if <code>E1</code> is an array object (equivalently, a pointer to the\n  initial element of an array object) and <code>E2</code> is an integer, <code>E1[E2]</code> designates the <code>E2</code>-th\n  element of <code>E1</code> (counting from zero). </p>\n</blockquote>\n"}], "owner": {"reputation": 887, "user_id": 8768374, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-Hyjh8IMe3Ho/AAAAAAAAAAI/AAAAAAAAAMQ/mqo_dEpoGPQ/photo.jpg?sz=128", "display_name": "Sleeping On a Giant&#39;s Shoulder", "link": "https://stackoverflow.com/users/8768374/sleeping-on-a-giants-shoulder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 52849977, "answer_count": 2, "score": 1, "last_activity_date": 1539763694, "creation_date": 1539763028, "question_id": 52849923, "link": "https://stackoverflow.com/questions/52849923/is-ai-really-the-same-as-a-i-in-c", "title": "Is a[i] really the same as *(a + i) in C?", "body": "<pre><code>#include &lt;stdio.h&gt;\nint sum2d(int row, int col, int p[row][col]);\nint main(void)\n{\n    int a[2][3] = {{1, 2, 3}, {4, 5, 6}};\n\n    printf(\"%d\\n\", sum2d(2, 3, a));\n\n\n    return 0;\n}\nint sum2d(int row, int col, int p[row][col])\n{\n    int total = 0;\n    for (int i = 0; i &lt; row; i++)\n        for (int j = 0; j &lt; col; j++)\n            total += (*(p + i))[j];\n    return total;\n}\n</code></pre>\n\n<p>Look at the above code.  It works perfectly.</p>\n\n<p>However, after I changed <strong>p[row]</strong> into <strong>*(p + row)</strong>, </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint sum2d(int row, int col, int (*(p + row))[col]);\nint main(void)\n{\n    int a[2][3] = {{1, 2, 3}, {4, 5, 6}};\n\n    printf(\"%d\\n\", sum2d(2, 3, a));\n\n\n    return 0;\n}\nint sum2d(int row, int col, int (*(p + row))[col])\n{\n    int total = 0;\n    for (int i = 0; i &lt; row; i++)\n        for (int j = 0; j &lt; col; j++)\n            total += (*(p + i))[j];\n    return total;\n}\n</code></pre>\n\n<p>it can't be compiled and displays the following error message :</p>\n\n<pre><code>test.c:2:38: error: expected \u2018)\u2019 before \u2018+\u2019 token\n int sum2d(int row, int col, int (*(p + row))[col]);\n                                      ^\ntest.c: In function \u2018main\u2019:\ntest.c:7:2: warning: implicit declaration of function \u2018sum2d\u2019 [-Wimplicit-function-declaration]\n  printf(\"%d\\n\", sum2d(2, 3, a));\n  ^\ntest.c: At top level:\ntest.c:12:38: error: expected \u2018)\u2019 before \u2018+\u2019 token\n int sum2d(int row, int col, int (*(p + row))[col])\n</code></pre>\n\n<p>At my current level, I barely understand it.</p>\n\n<p>In C, I thought <strong>a[i]</strong> = <strong>*(a + i)</strong> . </p>\n\n<p>Why is my code not correct ?</p>\n"}, {"tags": ["c", "data-structures", "queue"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1539762891, "post_id": 52849721, "comment_id": 92615374, "body": "When you assign <code>z-&gt;ptr=new_node;</code>, <code>z</code> has not been initialized."}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 1, "creation_date": 1539762924, "post_id": 52849721, "comment_id": 92615396, "body": "I think it&#39;s time to learn how to use a debugger. <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\" title=\"what is a debugger and how can it help me diagnose problems\">stackoverflow.com/questions/25385173/&hellip;</a> :)"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1539767004, "post_id": 52849721, "comment_id": 92617635, "body": "How do you feed your program?"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10517100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAkmY.png?s=128&g=1", "display_name": "ak_ghoul", "link": "https://stackoverflow.com/users/10517100/ak-ghoul"}, "edited": false, "score": 0, "creation_date": 1541102508, "post_id": 52851404, "comment_id": 93112392, "body": "There were some queue codes where I did cast the malloc returned value but they seem to work perfectly fine. What&#39;s so special about this one?"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1539768111, "creation_date": 1539768111, "answer_id": 52851404, "question_id": 52849721, "link": "https://stackoverflow.com/questions/52849721/command-terminated-by-signal-11/52851404#52851404", "title": "Command terminated by signal 11", "body": "<p>Well, you code is not far from working I think.</p>\n\n<p>There are some problems that can be corrected:</p>\n\n<ul>\n<li><p>the <code>scanf</code> usage is problematic</p>\n\n<ul>\n<li><code>%c</code> selector must be use with caution, use <code>\" %c %d\"</code> to prevent end of line problems</li>\n<li>return value must be checked</li>\n</ul></li>\n<li><p>in function insert, <code>z</code> may not be initialized (if <code>insert()</code> is called when start is not <code>NULL</code>)</p></li>\n<li>You don't need to <a href=\"https://stackoverflow.com/a/605858/1212012\">cast <code>malloc</code></a> returned value.</li>\n</ul>\n\n<p>I tested the following code with this input:</p>\n\n<pre><code>a 2\nb 3\nc 1\nd -1\ne 0 \n</code></pre>\n\n<p>And I got this result:</p>\n\n<pre><code>Enter -1 to stop.\nEnter the characters and their priorities: \nDisplaying elements:\n    a [Priority=2]\n    b [Priority=3]\n    c [Priority=1]\n\nDisplaying elements:\n    c [Priority=1]\n    a [Priority=2]\n    b [Priority=3]\n\nEnter character and priority for new node:\ns: 'e' n: '0'\ne00\nDisplaying elements:\n    e [Priority=0]\n    c [Priority=1]\n    a [Priority=2]\n    b [Priority=3]    \n</code></pre>\n\n<p>Seems to work isn't? You can test it <a href=\"https://tio.run/##lVVNj9owEL3nV3ip@AgKq6W9EcKpva2qXqoeulWVdQxYCk5iGy0J4q@Xemwn2AG66iWJn9/MeGaeJ3i2wfh8/kAZzvcZWQqZ0eJxuwpcJKevHrRL87zAAAnJ91giVmTkGCCEtylHWSrTWC0ok6iED4eEpqXkcXCKAw8UMuUy@fr9@bm3QZkgXE7C4Nj3w8jbb/iKpk0bjO13cXsIAV8lV/B6MnhhX5gkHM3mSBbKTVE@DsJbBLkl2jzFaiVQyjKAKAdiwamkRCyQMRU4ZcoSDTEaZoNoJKKRiq@33rY0JxO1ekhm81ABcHiE2hMnpnwTQRtSrCdOVqE2vzBnK6hlIvpomdhUVd7gAIqnqxdqzISDesFGaxZbtEk03i4dr5LbFgB@0k@SC@L5bAyv7/SeFwhnTFyv/6gdEDiRe86QPebJV0RGRZmn9S1JaCE46V26@9kYUbZRGZEdYVIsXtjA6Vbz0BXQpNoZS3XKn99M/@tkmP1ShlFjWgPv0jbNTfTdLETBJb2p6yaaVq2gZSfnQy81e2gdsH/yyqu4YVYPN/ShtAPMVQVJWKzdQ0hqN3G3PiQ26QsEhKTyWJYDqM8FWiK9tSYeWuhk35X26Avmv2oLWrw/N2p3YPjjok4mHjV856L2p0c3OfTgsCOjRuuCw/3Qhov7w6PnUg2a8RCPEYN3NgbRiQgZVu0OhlrPA9d4iAeRpXhOIVTdClY1ny11AW33Tedrc4OdEWGmSB17t8JzBR2xg@J4SWC9HnQ346Zu1WOZsNGor2K/3fZAF8BOoBr6fq0EaOsupcy2vtUBGHaTQ3fAXsCrDVc9V5s22pOKdD6n6GPwij4FGM2DTP1bAoKe/uB1nm7EefZDSecv\" rel=\"nofollow noreferrer\">online</a></p>\n\n<p>And here's the corrected code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;malloc.h&gt;\nstruct node{\n    char data;\n    int p;\n    struct node *ptr;\n};\nstruct node *start=NULL;\n\nstruct node *insert()\n{\n    /* initialize z in case of start is not null */\n    struct node *new_node,*z = start;\n    int num, ok;\n    char s;\n    printf(\"\\nEnter -1 to stop.\");\n    printf(\"\\nEnter the characters and their priorities: \");\n\n    /* read the scanf return value */\n    ok = scanf(\" %c %d\",&amp;s,&amp;num);\n    /* and assert two elements have been read*/\n    while(ok == 2 &amp;&amp; num!=-1)\n    {\n        new_node=malloc(sizeof(struct node));\n        new_node-&gt;data=s;\n        new_node-&gt;p=num;\n        if(start==NULL)\n        {\n            start=new_node;\n            z=start;\n            new_node-&gt;ptr=NULL;\n        }\n        else\n        {\n            z-&gt;ptr=new_node;\n            new_node-&gt;ptr=NULL;\n            z=z-&gt;ptr;\n        }\n        ok = scanf(\" %c %d\",&amp;s,&amp;num);\n    }\n    return start;\n}\nstruct node *display()\n{\n    struct node *z;\n    z=start;\n    printf(\"\\nDisplaying elements:\\n\");\n    while(z!=NULL)\n    {\n        printf(\"\\t%c [Priority=%d]\\n\",z-&gt;data,z-&gt;p);\n        z=z-&gt;ptr;\n    }\n    return start;\n}\nstruct node *sortit()\n{\n    struct node *z,*q;\n    int t;\n    char x;\n    z=start;\n    while(z-&gt;ptr!=NULL)\n    {\n        q=z-&gt;ptr;\n        while(q!=NULL)\n        {\n            if(z-&gt;p&gt;q-&gt;p)\n            {\n                t=z-&gt;p;\n                x=z-&gt;data;\n                z-&gt;p=q-&gt;p;\n                z-&gt;data=q-&gt;data;\n                q-&gt;p=t;\n                q-&gt;data=x;\n            }\n            q=q-&gt;ptr;\n        }\n        z=z-&gt;ptr;\n    }\n    return start;\n}\nstruct node *new_insert()\n{\n    struct node *y,*z;\n    int n, ok;\n    char s;\n\n    printf(\"\\nEnter character and priority for new node:\");\n    ok = scanf(\" %c %d\",&amp;s,&amp;n);\n    if (2 == ok)\n    {\n        /* alloc y after having check that user gave usage stuff */\n        y = malloc(sizeof(struct node));\n        y-&gt;data=s;\n        y-&gt;p=n;\n        printf(\"%c\",y-&gt;data);\n        printf(\"%d\",y-&gt;p);\n        if(n&lt;start-&gt;p)\n        {\n            y-&gt;ptr=start;\n            start=y;\n            printf(\"%d\",y-&gt;p);\n        }\n        else\n        {\n            printf(\"\\nff\");\n            z=start;\n            while(z-&gt;ptr-&gt;p&lt;=n&amp;&amp;z-&gt;ptr!=NULL)\n                z=z-&gt;ptr;\n\n            y-&gt;ptr=z-&gt;ptr;\n            z-&gt;ptr=y;\n        }\n    }\n    return start;\n}\nint main()\n{\n    insert();\n    display();\n    sortit();\n    display();\n    new_insert();\n    display();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10517100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAkmY.png?s=128&g=1", "display_name": "ak_ghoul", "link": "https://stackoverflow.com/users/10517100/ak-ghoul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539768111, "creation_date": 1539762395, "last_edit_date": 1539762719, "question_id": 52849721, "link": "https://stackoverflow.com/questions/52849721/command-terminated-by-signal-11", "title": "Command terminated by signal 11", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;malloc.h&gt;\nstruct node{\n  char data;\n  int p;\n  struct node *ptr;\n};\nstruct node *start=NULL;\nstruct node *insert()\n{\n  struct node *new_node,*z;\n  int num;\n  char s;\n  printf(\"\\nEnter -1 to stop.\");\n  printf(\"\\nEnter the characters and their priorities: \");\n  scanf(\"\\n%c %d\",&amp;s,&amp;num);\n  while(num!=-1)\n  {\n    new_node=(struct node *)malloc(sizeof(struct node));\n    new_node-&gt;data=s;\n    new_node-&gt;p=num;\n    if(start==NULL)\n    {\n      start=new_node;\n      z=start;\n      new_node-&gt;ptr=NULL;\n    }\n    else\n    {\n      z-&gt;ptr=new_node;\n      new_node-&gt;ptr=NULL;\n      z=z-&gt;ptr;\n    }\n    scanf(\"%c %d\",&amp;s,&amp;num);\n  }\n  return start;\n}\nstruct node *display()\n{\n  struct node *z;\n  z=start;\n  printf(\"\\nDisplaying elements:\\n\");\n  while(z!=NULL)\n  {\n    printf(\"\\t%c [Priority=%d]\\n\",z-&gt;data,z-&gt;p);\n    z=z-&gt;ptr;\n  }\n  return start;\n}\nstruct node *sortit()\n{\n  struct node *z,*q;\n  int t;\n  char x;\n  z=start;\n  while(z-&gt;ptr!=NULL)\n  {\n    q=z-&gt;ptr;\n    while(q!=NULL)\n    {\n      if(z-&gt;p&gt;q-&gt;p)\n      {\n        t=z-&gt;p;\n        x=z-&gt;data;\n        z-&gt;p=q-&gt;p;\n        z-&gt;data=q-&gt;data;\n        q-&gt;p=t;\n        q-&gt;data=x;\n      }\n      q=q-&gt;ptr;\n    }\n    z=z-&gt;ptr;\n  }\n  return start;\n}\nstruct node *new_insert()\n{\n  struct node *y,*z;\n  int n;\n  char s;\n  y=(struct node *)malloc(sizeof(struct node));\n  printf(\"\\nEnter character and priority for new node:\");\n  scanf(\"%c %d\",&amp;s,&amp;n);\n  printf(\"%c\",s);\n  y-&gt;data=s;\n  y-&gt;p=n;\n  printf(\"%c\",y-&gt;data);\n  printf(\"%d\",y-&gt;p);\n  if(n&lt;start-&gt;p)\n  {\n    y-&gt;ptr=start;\n    start=y;\n    printf(\"%d\",y-&gt;p);\n  }\n  else\n  {printf(\"\\nff\");\n    z=start;\n  while(z-&gt;ptr-&gt;p&lt;=n&amp;&amp;z-&gt;ptr!=NULL)\n    z=z-&gt;ptr;\n  y-&gt;ptr=z-&gt;ptr;\n  z-&gt;ptr=y;\n}\n  return start;\n}\nint main()\n{\n  insert();\n  display();\n  sortit();\n  display();\n  new_insert();\n  display();\n  return 0;\n}\n</code></pre>\n\n<p>In this C code, I have tried to implement priority queues.</p>\n\n<p>Everything works perfectly fine except the <code>new_insert()</code> function. The print statements after <code>y-&gt;p=n;</code> in <code>new_insert()</code> function print <code>0</code>.</p>\n\n<p>Hence, the function doesn't work properly. Also, in <code>display()</code> function the print statement prints the <code>[Priority]</code> twice.</p>\n\n<p>Hence, I am not able to add an external node in my priority queue.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539761339, "post_id": 52849299, "comment_id": 92614588, "body": "You need to copy the error message into the question <b>itself</b> in <b>plain text</b>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539761407, "post_id": 52849299, "comment_id": 92614619, "body": "(and the first task is to google with the error message text)"}, {"owner": {"reputation": 3, "user_id": 10517033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LMu0L.jpg?s=128&g=1", "display_name": "SGarcia", "link": "https://stackoverflow.com/users/10517033/sgarcia"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539761673, "post_id": 52849299, "comment_id": 92614769, "body": "@AnttiHaapala thanks! I already edited my question. I was searching and I didn&#39;t find anything. Thanks anyways, I will try the another post."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539761943, "post_id": 52849299, "comment_id": 92614910, "body": "You didn&#39;t find anything googling &quot;variable length array declaration not allowed at file scope&quot;??"}, {"owner": {"reputation": 3, "user_id": 10517033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LMu0L.jpg?s=128&g=1", "display_name": "SGarcia", "link": "https://stackoverflow.com/users/10517033/sgarcia"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539762264, "post_id": 52849299, "comment_id": 92615057, "body": "@Jabberwocky I can&#39;t find something that works with my code.. So I still need help, hahaha"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539762313, "post_id": 52849299, "comment_id": 92615080, "body": "@SGarcia69 <code>mat[fc][fc]</code> -&gt; <code>mat[10][10]</code> should do the job."}, {"owner": {"reputation": 3, "user_id": 10517033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LMu0L.jpg?s=128&g=1", "display_name": "SGarcia", "link": "https://stackoverflow.com/users/10517033/sgarcia"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539762672, "post_id": 52849299, "comment_id": 92615254, "body": "@Jabberwocky sir, its working, thanks a lot! But one more question, how can I use a variable (Global one to manipulate the size of a global matrix) Does it not work on this compiler?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539762717, "post_id": 52849299, "comment_id": 92615275, "body": "@SGarcia69 you can&#39;t. Not with clang and not with any other C compiler"}, {"owner": {"reputation": 3, "user_id": 10517033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LMu0L.jpg?s=128&g=1", "display_name": "SGarcia", "link": "https://stackoverflow.com/users/10517033/sgarcia"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539762857, "post_id": 52849299, "comment_id": 92615350, "body": "@Jabberwocky I cant understand why, since I learned C it was working on Dev C++ on all the windows machines I&#39;ve touch..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539762926, "post_id": 52849299, "comment_id": 92615399, "body": "@SGarcia69 I don&#39;t know Dev C++, but VLAs at file scope are not standard."}, {"owner": {"reputation": 3, "user_id": 10517033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LMu0L.jpg?s=128&g=1", "display_name": "SGarcia", "link": "https://stackoverflow.com/users/10517033/sgarcia"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539763084, "post_id": 52849299, "comment_id": 92615477, "body": "@Jabberwocky I found one solution, Using #define FC 10, will allow me to use it as a global const... Thanks a lot for the help. The point is that I cant use variables as size for a matrix."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1539769625, "post_id": 52849299, "comment_id": 92619193, "body": "move the array into <code>main</code>, or allocate memory manually"}], "owner": {"reputation": 3, "user_id": 10517033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LMu0L.jpg?s=128&g=1", "display_name": "SGarcia", "link": "https://stackoverflow.com/users/10517033/sgarcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1539761393, "answer_count": 0, "score": 0, "last_activity_date": 1539763167, "creation_date": 1539760805, "last_edit_date": 1539763167, "question_id": 52849299, "link": "https://stackoverflow.com/questions/52849299/how-to-make-matrix-on-clang-llvm-c-language", "closed_reason": "Duplicate", "title": "How to make matrix on clang LLVM (C Language)", "body": "<p>I saw that I can compile C and C++ with clang LLVM compiler, that's integrated with MacOS... But when I try to run this code, it doesn't accept my Matrix, It works perfectly on windows, but I don't know how to make it works on this thing (I am new on Mac).</p>\n\n<p>I tried to compile it from terminal and also from Xcode, but them both use the same compiler... The error is this one: </p>\n\n<pre><code>cc     hello.c   -o hello\nhello.c:4:19: error: variable length array declaration not allowed at file scope\nint i=0,j=0,fc=10,mat[fc][fc];\n                  ^   ~~\n1 error generated.\nmake: *** [hello] Error 1\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint i=0,j=0,fc=10,mat[fc][fc];\nvoid setMat(){\n    for ( i = 0; i &lt; fc; ++i){\n        for ( j = 0; j &lt; fc; ++j){\n            mat[i][j]=j+1;\n        }\n    }\n}\nvoid _printMat(){\n    for ( i = 0; i &lt; fc; ++i){\n        for ( j = 0; j &lt; fc; ++j){\n            printf(\"%d \",mat[i][j]);\n        }\n    }\n}\nint main(){\n    setMat();\n    _printMat();\n}\n</code></pre>\n\n<p>First edit: What do I need to change to make it works? </p>\n\n<p>Thanks for reading, and answering, and if someone has some kind of translation from normal C to this one, I will appreciate if you share it.</p>\n\n<p>found a solution: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define FC 10\nint mat[FC][FC];\nint i=0,j=0;\n\nvoid setMat(){\n    for ( i = 0; i &lt; FC; ++i)\n    {\n        for ( j = 0; j &lt; FC; ++j)\n        {\n            mat[i][j]=j+1;\n        }\n    }\n}\n\nvoid _printMat(){\n    for ( i = 0; i &lt; FC; ++i)\n    { printf(\"\\n\");\n        for ( j = 0; j &lt; FC; ++j)\n        {\n            printf(\"%d \",mat[i][j]);\n        }\n    }\n}\n\nint main(){\n    setMat();\n    _printMat();\n}\n</code></pre>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["c", "xcode", "sdl"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10516889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8cc847151a20cee1b9f670414d52eab?s=128&d=identicon&r=PG&f=1", "display_name": "Coldpe", "link": "https://stackoverflow.com/users/10516889/coldpe"}, "edited": false, "score": 0, "creation_date": 1539761742, "post_id": 52849185, "comment_id": 92614817, "body": "I totally agree with you. But, this code is a very short &quot;test&quot; code. With this code I want to just &quot;redraw&quot; a part of the screen. I tried it an other program with longer code, and I had this problem. So your solution works great, but I don&#39;t want to clear the screen and &quot;redraw&quot; everything because here there is not so much thing to redraw, but with a more complicated code, that will be painful. I&#39;m not sure I&#39;m very clear but for sum up I want to redraw just a part of the screen (like in a game, a dialogue&#39;s box or the menu&#39;s box &quot;above&quot; the game)."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 13, "user_id": 10516889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8cc847151a20cee1b9f670414d52eab?s=128&d=identicon&r=PG&f=1", "display_name": "Coldpe", "link": "https://stackoverflow.com/users/10516889/coldpe"}, "edited": false, "score": 0, "creation_date": 1539852060, "post_id": 52849185, "comment_id": 92653885, "body": "@Coldpe Then you can render to texture and then copy that texture to back buffer."}, {"owner": {"reputation": 13, "user_id": 10516889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8cc847151a20cee1b9f670414d52eab?s=128&d=identicon&r=PG&f=1", "display_name": "Coldpe", "link": "https://stackoverflow.com/users/10516889/coldpe"}, "edited": false, "score": 0, "creation_date": 1539947488, "post_id": 52849185, "comment_id": 92694990, "body": "Yes, I think it&#39;s the &quot;less worst&quot; solutions. SDL&#39;s doc tells about SDL_RenderPresent  : &quot;The backbuffer should be considered invalidated after each present&quot;. I think it&#39;s the reason why I should not proceed the way I wanted. Thanks for your help !"}], "tags": [], "owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 0, "last_activity_date": 1539760394, "creation_date": 1539760394, "answer_id": 52849185, "question_id": 52848905, "link": "https://stackoverflow.com/questions/52848905/renderer-troubles-with-sdl2-and-xcode/52849185#52849185", "title": "Renderer troubles with SDL2 and Xcode", "body": "<p>I think the issue here is that you clear backbuffer with desired color only once. When next frame is rendered old backbuffer content is gone so you need to redraw it again. That is <code>displayText</code> should start with</p>\n\n<pre><code>SDL_SetRenderDrawColor(rdr,64,64,64,0xff);\nSDL_RenderClear(rdr);\nSDL_SetRenderDrawColor(rdr,128,128,128,0xff);\nSDL_Rect r={WND_WIDTH/2-100,WND_HEIGHT/2-100,200,200};\nSDL_RenderFillRect(rdr,&amp;r);\nSDL_SetRenderDrawColor(rdr,64,64,64,0xff);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10516889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8cc847151a20cee1b9f670414d52eab?s=128&d=identicon&r=PG&f=1", "display_name": "Coldpe", "link": "https://stackoverflow.com/users/10516889/coldpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 52849185, "answer_count": 1, "score": 1, "last_activity_date": 1539790282, "creation_date": 1539759230, "last_edit_date": 1539790282, "question_id": 52848905, "link": "https://stackoverflow.com/questions/52848905/renderer-troubles-with-sdl2-and-xcode", "title": "Renderer troubles with SDL2 and Xcode", "body": "<p>I try to write something in C with SDL2 but I have some troubles with the renderer.</p>\n\n<p>My code is: </p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include \"main.h\"\n\n#define WND_WIDTH   800\n#define WND_HEIGHT  600\n\nvoid displayText(SDL_Renderer *rdr,TTF_Font *font,char *str,SDL_Color *color,SDL_Rect *text_coo) \n\n{\nSDL_Surface *text=TTF_RenderText_Blended(font,str,*color);\nSDL_Texture *tx_text=SDL_CreateTextureFromSurface(rdr,text);\nSDL_QueryTexture(tx_text,NULL,NULL,&amp;text_coo-&gt;w,&amp;text_coo-&gt;h);\ntext_coo-&gt;x=(WND_WIDTH-text_coo-&gt;w)/2;\ntext_coo-&gt;y=(WND_HEIGHT-text_coo-&gt;h)/2;\nSDL_RenderCopy(rdr,tx_text,NULL,text_coo);\nSDL_RenderPresent(rdr);\nSDL_DestroyTexture(tx_text);\nSDL_FreeSurface(text);\n}\n\nint main(int argc,char *argv[]) \n{\n  SDL_Window *wnd;\n  SDL_Renderer *rdr;\n  SDL_Rect text_coo;\n\n  SDL_Init(SDL_INIT_VIDEO);\n  TTF_Init();\n  TTF_Font *font=TTF_OpenFont(\"/Users/coldpe/Documents/SDLProject2/SDLProject/Batang.ttf\",24);\n         wnd=SDL_CreateWindow(\"Noname\",SDL_WINDOWPOS_CENTERED,SDL_WINDOWPOS_CENTERED,WND_WIDTH,WND_HEIGHT,SDL_WINDOW_HIDDEN);\n\nrdr=SDL_CreateRenderer(wnd,-1,SDL_RENDERER_ACCELERATED);\nSDL_ShowWindow(wnd);\nSDL_SetRenderDrawColor(rdr,64,64,64,0xff);\nSDL_RenderClear(rdr);\nSDL_SetRenderDrawColor(rdr,128,128,128,0xff);\nSDL_Rect r={WND_WIDTH/2-100,WND_HEIGHT/2-100,200,200};\nSDL_RenderFillRect(rdr,&amp;r);\nSDL_SetRenderDrawColor(rdr,64,64,64,0xff);\n\nSDL_Color normal_color={0,0,255,0xff};\nSDL_Color selected_color={0,255,0,0xff};\nSDL_Color *pc=&amp;normal_color;\ndisplayText(rdr,font,\"Hello\",pc,&amp;text_coo);\nbool done=false;\n\nwhile(!done) {\n    SDL_Event event;\n    if(SDL_PollEvent(&amp;event)) {\n\n        if(event.type==SDL_QUIT)\n            done=true;\n\n        if(event.type==SDL_MOUSEMOTION) \n{\n            if(event.motion.x&gt;=text_coo.x &amp;&amp; event.motion.x&lt;=text_coo.x+text_coo.w &amp;&amp;\n               event.motion.y&gt;=text_coo.y &amp;&amp; event.motion.y&lt;=text_coo.y+text_coo.h) {\n                if(pc!=&amp;selected_color) {\n                    pc=&amp;selected_color;\n                    displayText(rdr,font,\"Hello\",pc,&amp;text_coo);\n                }\n            }\n            else\n                if(pc!=&amp;normal_color) {\n                    pc=&amp;normal_color;\n                    displayText(rdr,font,\"Hello\",pc,&amp;text_coo);\n                }\n        }\n    }\n}\n\nSDL_DestroyRenderer(rdr);\nSDL_DestroyWindow(wnd);\nTTF_CloseFont(font);\nTTF_Quit();\nSDL_Quit();\n\nreturn(0);\n}\n</code></pre>\n\n<p>I already tried to ask for help in other forum's website, and I should obtain this image with mouse not in the text : </p>\n\n<p><img src=\"https://i.stack.imgur.com/Lc7gF.png\" alt=\"Mouse not on the text\"></p>\n\n<p>And this image with mouse on the text : </p>\n\n<p><img src=\"https://i.stack.imgur.com/LfYyL.png\" alt=\"Mouse on the text\"></p>\n\n<p>But, for a reason that I don't know, here is the image I really obtain with mouse not on the text : </p>\n\n<p><img src=\"https://i.stack.imgur.com/WFVCz.png\" alt=\"Mouse not on the text\"></p>\n\n<p>And here is the result I obtain with mouse on the text : </p>\n\n<p><img src=\"https://i.stack.imgur.com/dLS9G.png\" alt=\"Mouse on the text\"></p>\n\n<p>Why when the mouse is on the text, the \"background\" is black ? </p>\n\n<p>I'm sure that it is not a code's trouble because this code works with some other peoples...\nFor your information, I'm in Xcode 9 (Xcode 10 have some bugs with OpenGL).</p>\n\n<p>Someone have answers ?</p>\n"}, {"tags": ["c", "algorithm", "time-complexity", "big-o"], "comments": [{"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 7, "creation_date": 1539759313, "post_id": 52848847, "comment_id": 92613511, "body": "Time complexity seems to be infinite for <code>m=1</code> and <code>n=0</code>, so if you don&#39;t specify some more constraints, then it&#39;s hard to answer. Big-O typically only makes sense for algorithms that can be proven to terminate."}, {"owner": {"reputation": 191, "user_id": 10458439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471084ace261d6c1240035d53fac5cf8?s=128&d=identicon&r=PG&f=1", "display_name": "newby", "link": "https://stackoverflow.com/users/10458439/newby"}, "edited": false, "score": 0, "creation_date": 1539759562, "post_id": 52848847, "comment_id": 92613636, "body": "don&#39;t take invalid input like i want to calculate time complexity for very large inputs(like we usually do) say n and m"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1539769411, "post_id": 52848847, "comment_id": 92619066, "body": "If there are any cases where some code does not terminate, its complexity is indeterminate.   Saying &quot;ignore invalid inputs&quot; doesn&#39;t change that.   The loop will also have undefined behaviour if <code>m</code> and <code>n</code> are of signed integral type, and have opposite sign (e.g. one is positive and the other is negative)"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 3, "creation_date": 1539769487, "post_id": 52848847, "comment_id": 92619105, "body": "I&#39;m voting to close this question as off-topic because it is seeking an answer, and the answer is indeterminate."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2512323"}, "is_accepted": false, "score": 4, "last_activity_date": 1539759772, "creation_date": 1539759772, "answer_id": 52849046, "question_id": 52848847, "link": "https://stackoverflow.com/questions/52848847/what-could-be-the-more-accurate-time-complexity-for-this-algorithm/52849046#52849046", "title": "What could be the more accurate time complexity for this algorithm?", "body": "<p>Assuming <code>m,n &gt; 0</code>, the time complexity is <code>O(max(n,m))</code> (or, equivalently, <code>O(n+m)</code>).</p>\n\n<p>The reasoning is: </p>\n\n<ul>\n<li>On every iteration, either <code>n</code> decreases, or <code>m</code> decreases, so there cannot be more than <code>n + m</code> iterations (upper bound).</li>\n<li>We can present a worst case scenario <code>n=1</code>, <code>m=k</code> (and, symmetrically, <code>n=k</code>, <code>m=1</code>), which gives us exactly <code>k</code> iterations (lower bound).</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 191, "user_id": 10458439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471084ace261d6c1240035d53fac5cf8?s=128&d=identicon&r=PG&f=1", "display_name": "newby", "link": "https://stackoverflow.com/users/10458439/newby"}, "edited": false, "score": 0, "creation_date": 1539761512, "post_id": 52849359, "comment_id": 92614687, "body": "<code>o(m&#47;n)</code> can be equal to <code>o(n)</code>?"}, {"owner": {"reputation": 191, "user_id": 10458439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471084ace261d6c1240035d53fac5cf8?s=128&d=identicon&r=PG&f=1", "display_name": "newby", "link": "https://stackoverflow.com/users/10458439/newby"}, "edited": false, "score": 0, "creation_date": 1539761564, "post_id": 52849359, "comment_id": 92614704, "body": "@deniss is this sloution correct? This looking weird because we cannot say O(1/n) is equal to O(n) not have different meanings"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2512323"}, "reply_to_user": {"reputation": 191, "user_id": 10458439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471084ace261d6c1240035d53fac5cf8?s=128&d=identicon&r=PG&f=1", "display_name": "newby", "link": "https://stackoverflow.com/users/10458439/newby"}, "edited": false, "score": 0, "creation_date": 1539791632, "post_id": 52849359, "comment_id": 92632705, "body": "@newby, <code>O(n&#47;m)</code> is <i>in</i> <code>O(n)</code> (for <code>n,m &gt;= 1</code>) in the same sense as <code>O(n)</code> is in <code>O(n^2)</code>, but I&#39;d argue this algorithm is not <code>O(n&#47;m)</code>. Counterexample is <code>n=k, m=k+1</code>, which is reduced to <code>n=k, m=1</code> after the first iteration and loops for <code>k+1</code> iterations total."}], "tags": [], "owner": {"reputation": 99, "user_id": 7332896, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lmUiUdpv39k/AAAAAAAAAAI/AAAAAAAAABM/XIy1LhaRpSs/photo.jpg?sz=128", "display_name": "sahushivam", "link": "https://stackoverflow.com/users/7332896/sahushivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1539761808, "last_edit_date": 1539761808, "creation_date": 1539761008, "answer_id": 52849359, "question_id": 52848847, "link": "https://stackoverflow.com/questions/52848847/what-could-be-the-more-accurate-time-complexity-for-this-algorithm/52849359#52849359", "title": "What could be the more accurate time complexity for this algorithm?", "body": "<p>Assuming your m and n follow certain constraint and loop doesn't go into infinite loop.ie <code>m&gt;0</code> and <code>n&gt;0</code> or <code>m!=1</code> and <code>n=0</code> </p>\n\n<p><code>If m&gt;=n</code></p>\n\n<p><code>if m%n==0</code> then loop will execute m/n-1 times \n <code>else if m%n!=0</code> then loop will execute ceil(m/n) times.</p>\n\n<pre><code>If m&lt;n\n</code></pre>\n\n<p><code>if n%m==0</code> then loop will execute m/n-1 times \n <code>else if n%m!=0</code> then loop will execute ceil(m/n) times.</p>\n\n<p>in either case complexity will be <code>0(m/n)</code> or <code>0(n/m)</code>which is equal to <code>0(m)</code> or <code>0(n)</code> respectively.</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1539761343, "creation_date": 1539761343, "answer_id": 52849442, "question_id": 52848847, "link": "https://stackoverflow.com/questions/52848847/what-could-be-the-more-accurate-time-complexity-for-this-algorithm/52849442#52849442", "title": "What could be the more accurate time complexity for this algorithm?", "body": "<p>There is no clear answer for the time complexity. The number of iterations depends on m and n.</p>\n\n<ol>\n<li>if m == n the loop exits in 1 step. </li>\n<li>if m == 1 and n == 100, loop will take 100 steps. </li>\n</ol>\n\n<p>So, if you keep n constant and keep increasing m, you will get a cyclic pattern. </p>\n\n<p>The image below shows the no of iterations for n = 2000 and m ranging from 1 to 10000</p>\n\n<p><a href=\"https://i.stack.imgur.com/6cEAH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6cEAH.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 10517162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6chlo.jpg?s=128&g=1", "display_name": "Rick Park", "link": "https://stackoverflow.com/users/10517162/rick-park"}, "is_accepted": false, "score": 0, "last_activity_date": 1539762289, "last_edit_date": 1539762289, "creation_date": 1539761764, "answer_id": 52849552, "question_id": 52848847, "link": "https://stackoverflow.com/questions/52848847/what-could-be-the-more-accurate-time-complexity-for-this-algorithm/52849552#52849552", "title": "What could be the more accurate time complexity for this algorithm?", "body": "<p>You have no prove that the loop shall end.</p>\n\n<p>In particular if any of m or n is zero, it will cycle forever.</p>\n\n<p>So time complexity is not definite.</p>\n\n<p>Add constraints.</p>\n\n<p>Hope this help.</p>\n"}], "owner": {"reputation": 191, "user_id": 10458439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/471084ace261d6c1240035d53fac5cf8?s=128&d=identicon&r=PG&f=1", "display_name": "newby", "link": "https://stackoverflow.com/users/10458439/newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1540849082, "answer_count": 4, "score": -1, "last_activity_date": 1539762289, "creation_date": 1539759031, "last_edit_date": 1539761243, "question_id": 52848847, "link": "https://stackoverflow.com/questions/52848847/what-could-be-the-more-accurate-time-complexity-for-this-algorithm", "closed_reason": "Not suitable for this site", "title": "What could be the more accurate time complexity for this algorithm?", "body": "<p>This is my program:</p>\n\n<pre><code> for(m!=n){\n   if(m&gt;n)\n     m=m-n;\n   else \n     n=n-m; \n }\n</code></pre>\n\n<p>If I take m=16 and n=2, then the loop is executing 7 times.\nif I take m=16 and n=12 then the loop is executing 3 times.\nHow to give a more accurate time complexity for this program and what is the procedure for calculating the time complexity for this type of algorithm in which we have two inputs?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1539758665, "post_id": 52848702, "comment_id": 92613168, "body": "It&#39;s purpose is to allow the address of the double-pointer to change within a function without returning a value (it&#39;s a simulated pass by reference for a double-pointer). Becoming a <i>3-star programmer</i> in C is not a compliment. A better design would be to type <code>Reading</code> as <code>int **Reading(...)</code> and declare <code>M</code> within <code>Reading</code>, allocate, validate and then return <code>M</code> and assign to the double-pointer in the caller."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1539760227, "post_id": 52848840, "comment_id": 92613978, "body": "Technically in C there is only <i>one way to pass a variable</i> and that is <i>by value</i>. You can simulate a reference by passing the <i>address of</i> (e.g. a pointer to) the variable."}, {"owner": {"reputation": 31, "user_id": 10516686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a4245b6b52b26f978492e52c7a47c4?s=128&d=identicon&r=PG&f=1", "display_name": "Nangs", "link": "https://stackoverflow.com/users/10516686/nangs"}, "edited": false, "score": 0, "creation_date": 1539760950, "post_id": 52848840, "comment_id": 92614354, "body": "I understand that. But let&#39;s say we remove the third pointer from M, put the mallocs in main and leave only the two for loops and a scanf in the Reading function. The **M is still going to return modified with only two asterisks right ?"}], "tags": [], "owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "is_accepted": false, "score": 0, "last_activity_date": 1539759009, "creation_date": 1539759009, "answer_id": 52848840, "question_id": 52848702, "link": "https://stackoverflow.com/questions/52848702/the-purpose-of-a-triple-pointer-in-c/52848840#52848840", "title": "The purpose of a triple pointer in C", "body": "<blockquote>\n  <p>If I take the malloc procedures and put them into main, the triple pointer isn't needed anymore.</p>\n</blockquote>\n\n<p>There are two ways to pass a variable to a function: either by value or by reference. When you pass the reference of a variable, that allows you to modify it.</p>\n\n<p>Example:</p>\n\n<pre><code>void fun(int a) {\n   a = 42; // Does nothing\n}\n\nint b = 9;\nfun(b);\n// b is unchanged.\n\nvoid fun(int *a) {\n   *a = 42;\n}\n\nint b = 9;\nfun(&amp;b);\n// b equals 42.\n</code></pre>\n\n<p>Your variable happens to be a of type <code>int **</code>, when you pass the address (reference) of this variable, this makes it a <code>int ***</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 10516686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a4245b6b52b26f978492e52c7a47c4?s=128&d=identicon&r=PG&f=1", "display_name": "Nangs", "link": "https://stackoverflow.com/users/10516686/nangs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 614, "favorite_count": 0, "closed_date": 1539759013, "answer_count": 1, "score": -1, "last_activity_date": 1539759009, "creation_date": 1539758510, "question_id": 52848702, "link": "https://stackoverflow.com/questions/52848702/the-purpose-of-a-triple-pointer-in-c", "closed_reason": "Duplicate", "title": "The purpose of a triple pointer in C", "body": "<p>While I have seen some threads on this, I fail to understand the meaning behind triple pointers, since it seems that it's possible to do the same without them.</p>\n\n<pre><code>void Reading(int *N, int ***M) {\n\nprintf(\"Input an integer N: \\n\");\nscanf(\"%d\", N);\n*M = malloc(N * sizeof(int*)); \nint i;\nfor (i = 0; i &lt; N; i++)\n    *(*M+i) = malloc(N * sizeof(int));\nprintf(\"Input N*N integers that will form a matrix \\n\");\nint i, j;\nfor (i = 0; i &lt; *N; i++)\n    for (j = 0; j &lt; *N; j++)\n        scanf(\"%d\", &amp;((*M)[i][j]));\n}\n</code></pre>\n\n<p>This code makes **M a 2D array. If I take the malloc procedures and put them into main, the triple pointer isn't needed anymore. Could someone please explain why this is the case ?</p>\n"}, {"tags": ["c", "pthreads", "mutex", "shared-memory"], "comments": [{"owner": {"reputation": 1, "user_id": 3182474, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345826573/picture?type=large", "display_name": "user3182474", "link": "https://stackoverflow.com/users/3182474/user3182474"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539757027, "post_id": 52848184, "comment_id": 92612453, "body": "Ive read about that, also system V semaphores, but i also came across this post suggesting mutexes are better <a href=\"https://stackoverflow.com/questions/6477525/interprocess-mutex-with-pthreads\" title=\"interprocess mutex with pthreads\">stackoverflow.com/questions/6477525/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539757916, "post_id": 52848184, "comment_id": 92612856, "body": "Please edit your question and fix the indention."}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539791919, "post_id": 52848184, "comment_id": 92632848, "body": "@Someprogrammerdude Process-shared mutexes are a valuable resource. One big advantage is that (on linux at least) with a <code>pthread_mutex_t</code>, in the uncontested case, no system call is needed to lock or unlock. That&#39;s a big performance win, if you need it."}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1539809259, "post_id": 52848184, "comment_id": 92641076, "body": "Correcting my comment (as to performance benefit): I just looked at glibc source and (if I read it right) it appears that <code>sem_open</code> and friends on linux should also be able to complete without a system call in uncontended cases."}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539831299, "post_id": 52848184, "comment_id": 92646460, "body": "@Someprogrammerdude: The purpose of the <code>PTHREAD_PROCESS_SHARED</code> flag is to intialise a mutex for inter-process locking.  There&#39;s nothing wrong with that."}], "answers": [{"tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": false, "score": 0, "last_activity_date": 1539791647, "creation_date": 1539791647, "answer_id": 52858983, "question_id": 52848184, "link": "https://stackoverflow.com/questions/52848184/shared-memory-mutex-with-struct-pointers/52858983#52858983", "title": "shared memory mutex with struct pointers", "body": "<p>I'm doing the same thing in some code I have, and it looks very similar - in part. The idea is really pretty straight-forward. The size of the space allocated to the mutex is exactly <code>sizeof(pthread_mutex_t)</code>. You create the shared file, <code>mmap</code> it and initialize the mutex in one process, then others can simply <code>mmap</code> the file and set their <code>pthread_mutex_t *</code> pointer to it.</p>\n\n<p>One thing I don't understand is the <code>struct GenQ</code> part. The <code>volatile</code> keywords hint that this structure <em>already</em> resides in shared memory. However, if it <em>is</em> in shared memory, the mutex pointer you're stashing there <em>won't be valid</em> outside the process that created it. The mutex itself may reside in shared memory, and other process(es) may have a pointer to the mutex too, but the exact location of the shared memory region within their virtual address space may differ, hence their pointer value would differ as well (and therefore the pointer should be private to the process).</p>\n\n<p>So if the <code>GenQ</code> structure is <em>already</em> in shared memory, why not simply declare a <code>pthread_mutex_t</code> (<em>not</em> a pointer -- space for the actual mutex) within the <code>GenQ</code> structure, and then do the same initialization from your master process as you have in the above code. You then don't need a separate shared memory file for the mutex; it will be contained in the same shared memory space as the other queue information.</p>\n\n<p>Also, consider adding the <code>PTHREAD_MUTEX_ROBUST</code> attribute (with <code>pthread_mutexattr_setrobust</code>) to the mutex as well so that you can recover in the case where one of the processes crashes while holding the lock.</p>\n\n<p>That code looks something like this:</p>\n\n<pre><code>    int err = pthread_mutex_lock(mutex_ptr);\n    if (err) {\n        if (err == EOWNERDEAD) {\n            WARN(\"Mutex owner died while holding -- recovering\");\n            err = pthread_mutex_consistent(mutex_ptr);\n            if (err)\n                 FATAL(\"Huh?\");\n        } else {\n            FATAL(\"Wha?\");\n        }\n    }\n</code></pre>\n\n<p>Lastly, I would quibble with your use of <code>volatile</code>. That is neither necessary nor sufficient. If you access shared variables while you hold the mutex, the <code>volatile</code> qualifier is not needed. If you do not hold the mutex, <code>volatile</code> by itself is insufficient to ensure proper synchronization -- you will still need to use some sort of atomic increments/decrements or atomic compare-and-swap.</p>\n"}], "owner": {"reputation": 1, "user_id": 3182474, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345826573/picture?type=large", "display_name": "user3182474", "link": "https://stackoverflow.com/users/3182474/user3182474"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539791647, "creation_date": 1539756130, "last_edit_date": 1539758967, "question_id": 52848184, "link": "https://stackoverflow.com/questions/52848184/shared-memory-mutex-with-struct-pointers", "title": "shared memory mutex with struct pointers", "body": "<p>Im looking for some feedback on if I am doing the following properly. Im working on porting some windows real time code that had heavy use of named mutex's. It took some searching but i came across some stuff saying you can use shared memory as mutexes in linux, using shm open.</p>\n\n<p>I cant include all of the code here, but i put together the key areas that i need some feed back on. My questions are if im setting up the shared memory region, and mutex correctly, and also if my pointers will be set correctly, along with how to utilize it for locking/unlocking. </p>\n\n<pre><code>volatile struct GenQ {\n    volatile pthread_mutex_t *qMutexId\n    volatile sem_t  qSemId\n    volatile int    nexton\n    volatile int    nextoff\n}\n\ntypedef struct Node{\n    void                *qid\n    char                shmname[80]\n    sem_t               *semid\n    pthread_mutex_t     *mutexID\n    struct node         *next\n    struct node         *prev   \n}\n\n\nvoid * init (const char *qname)\n{\n    struct GenQ *myq;\n    char mtxstr[80];\n    pthread_mutex_t *mutexQueAccess;\n    int mode = S_IRWXU | S_IRWXG;\n    int fd = 0;\n    int status = 0;\n\n    mtxstr[0] = \"\\0\";\n    strcpy(mtxstr,\"/\");\n    strcat(mtxstr, qname);\n    strcat(mtxstr, \"_MTX\");\n\n    fd = shm_open(mtxstr, O_CREATE | O_RDWR | O_TRUNC, mode);\n    if (fd == -1)\n        //err handling stuff\n\n    status = ftruncate(fd, sizeof(pthread_mutex_t));\n    if(status==0){\n        //err handling stuff\n\n    mutexQueAccess = (pthread_mutex_t*) mmap(NULL, sizeof(pthread_mutex_t), \n    PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);\n    if(mutexQueAccess == MAP_FAILED)\n    //err handling stuff\n\n    pthread_mutexattr_t mutexAttr;\n    pthread_mutexattr_init(&amp;mutexAttr);\n    pthread_mutexattr_setpshared(&amp;mutexAttr, PTHREAD_PROCESS_SHARED);\n    pthread_mutex_init(mutexQueAccess, &amp;mutexAttr);\n\n    myq-&gt;qMutexId = mutexQueAccess;\n\n    newNode = (Node*)malloc(sizeof(node));\n    newNode-&gt;mutedID = mutexQueAccess;\n    //add node to link list\n\n}\n\nvoid * openQ(*const char *qname)\n{\n    pthread_mutex_t *mutexQueAccess;\n    int fd = 0;\n    int status = 0;\n    char mtxstr[80];\n    int mode = S_IRWXU | S_IRWXG;\n\n    mtxstr[0] = \"\\0\";\n    strcpy(mtxstr,\"/\");\n    strcat(mtxstr, qname);\n    strcat(mtxstr, \"_MTX\");\n\n    fd = shm_open(mtxstr, O_CREATE | O_RDWR, mode);\n        //check fd for err\n\n    mutexQueAccess = (pthread_mutex_t *)mmap(NULL, sizeof(pthread_mutex_t), \n    PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);\n        //check for err on mmap\n\n    newNode = (Node*)malloc(sizeof(node));\n    newNode-&gt;mutedID = mutexQueAccess;\n    //add node to link list\n\n\n}\n\nvoid * enque(const char *qname, char *msg_data)\n{\n    node = //search for node\n    pthread_mutex_lock(&amp;(node-&gt;mutexQueAccess))\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1539755447, "post_id": 52848026, "comment_id": 92611891, "body": "Is that a message generated by ggc during compiling/building?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1539755677, "post_id": 52848026, "comment_id": 92611959, "body": "Scanf() allows for many possible mistakes and misunderstandings. What happens if you hard code e.g. <code>n=4;</code> instead of scanf()? And please never ignore the return value of scanf()."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1539755688, "post_id": 52848026, "comment_id": 92611963, "body": "Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1539755767, "post_id": 52848026, "comment_id": 92611988, "body": "Please edit for consistent indentation, it currently makes code interpretation needlessly hard."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 3, "creation_date": 1539756257, "post_id": 52848026, "comment_id": 92612164, "body": "BTW if you consider coordinates <code>x</code> and <code>y</code> that go from <code>-(n-1)</code> to <code>n-1</code> included, in each position the value to print is <code>max(abs(i), abs(j)) + 1</code>. Exploiting this fact the code becomes way simpler (indeed, it becomes just two nested loops)."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1539756671, "post_id": 52848026, "comment_id": 92612312, "body": "(example of the above: <a href=\"https://ideone.com/q0qdxx\" rel=\"nofollow noreferrer\">ideone.com/q0qdxx</a>)"}, {"owner": {"reputation": 13, "user_id": 10272258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384e9698743457b7fbb14d5918792304?s=128&d=identicon&r=PG&f=1", "display_name": "Tidem23", "link": "https://stackoverflow.com/users/10272258/tidem23"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1539757511, "post_id": 52848026, "comment_id": 92612661, "body": "@Matteo Italia thank you."}], "answers": [{"comments": [{"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 3, "creation_date": 1539757534, "post_id": 52848121, "comment_id": 92612669, "body": "This really good shows how important are meaningful names for variables"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1539759527, "post_id": 52848121, "comment_id": 92613614, "body": "And the value of limiting the scope of variables to the innermost loop (statement block) where they&#39;re used."}], "tags": [], "owner": {"reputation": 493, "user_id": 4786752, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-D0KydcBXECc/AAAAAAAAAAI/AAAAAAAAAWM/WGguvmdWrvI/photo.jpg?sz=128", "display_name": "Mohammad Mahzoun", "link": "https://stackoverflow.com/users/4786752/mohammad-mahzoun"}, "is_accepted": true, "score": 6, "last_activity_date": 1539755817, "creation_date": 1539755817, "answer_id": 52848121, "question_id": 52848026, "link": "https://stackoverflow.com/questions/52848026/printing-a-pattern-in-c-using-loops/52848121#52848121", "title": "Printing a pattern in C using loops", "body": "<p>In your last loop, you increment the wrong variable. </p>\n\n<pre><code>for(k1=j1;k1&lt;=n*2-1;k++){\n   p+=1;\n   printf(\"%d \",p);\n}\n</code></pre>\n\n<p>change <code>k</code> to <code>k1</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 10272258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384e9698743457b7fbb14d5918792304?s=128&d=identicon&r=PG&f=1", "display_name": "Tidem23", "link": "https://stackoverflow.com/users/10272258/tidem23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 52848121, "answer_count": 1, "score": 0, "last_activity_date": 1539786503, "creation_date": 1539755316, "last_edit_date": 1539786503, "question_id": 52848026, "link": "https://stackoverflow.com/questions/52848026/printing-a-pattern-in-c-using-loops", "title": "Printing a pattern in C using loops", "body": "<p>The pattern to be printed(for user input n) is:</p>\n\n<pre><code>                        4 4 4 4 4 4 4  \n                        4 3 3 3 3 3 4   \n                        4 3 2 2 2 3 4   \n                        4 3 2 1 2 3 4   \n                        4 3 2 2 2 3 4   \n                        4 3 3 3 3 3 4   \n                        4 4 4 4 4 4 4 \n</code></pre>\n\n<p>My attempt:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() \n{\n    int i,j,k,l,p,n,tc,i1,j1,k1;\n    n=4;\n\n    for(i=1;i&lt;=n*2-1;i++)\n    {\n        p=n;\n        if(i&lt;=n)\n        {\n        for(j=1;j&lt;=i-1;j++)\n        {\n            printf(\"%d \",p);\n            p--;\n        }\n        for(k=j;k&lt;=n*2-j;k++)\n            printf(\"%d \",p);\n        for(l=k;l&lt;=n*2-1;l++)\n        {\n            p++;\n            printf(\"%d \",p);\n        }\n        }\n        else\n        {\n            p=n;\n            for(i1=1;i1&lt;=n*2-i-1;i1++)\n            {\n                printf(\"%d \",p);\n                p-=1;\n            }\n            for(j1=i1;j1&lt;=n*2-i1;j1++)\n                printf(\"%d \",p);\n            for(k1=j1;k1&lt;=n*2-1;k++)\n            {\n                p+=1;\n                printf(\"%d \",p);\n            }\n        }\n        printf(\"\\n\");\n    }\n   return 0;\n} //main\n</code></pre>\n\n<p>I am using a gcc 6.3 compiler and it is giving </p>\n\n<pre><code>Output File Size Exceeded\n</code></pre>\n\n<p>Where am I going wrong?I can't figure it out. I have tried this code in gcc 4.x and I was getting the correct output.</p>\n"}, {"tags": ["c", "compilation", "mpi", "c-preprocessor"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539752005, "post_id": 52847319, "comment_id": 92610800, "body": "Perhaps define it away: <code>#if CONST_NOT_NEEDED #define const &#47;* const *&#47;</code> #endif`?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1539753079, "post_id": 52847319, "comment_id": 92611099, "body": "an option is to automatically generate the prototype/signature of your profiling library based on <code>mpi.h</code>. some <code>const</code> qualifiers were recently added in Open MPI, so you might also want to use the CONST qualifier, and either build with <code>-DCONST=const</code> or <code>-DCONST=</code>"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 7510090, "user_type": "registered", "profile_image": "https://graph.facebook.com/1195053827244382/picture?type=large", "display_name": "Andersen", "link": "https://stackoverflow.com/users/7510090/andersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1539753025, "creation_date": 1539753025, "answer_id": 52847635, "question_id": 52847319, "link": "https://stackoverflow.com/questions/52847319/automatically-detect-if-need-to-add-a-const-qualifier-in-function-parameters/52847635#52847635", "title": "Automatically detect if need to add a &quot;const&quot; qualifier in function parameters", "body": "<p>Usually in this situations where a variable or defines can be defined in multiple places is used <code>#ifdef</code> or <code>#ifndef</code>.\nYou would have something like: </p>\n\n<p><code>#ifndef _YOU_CONSTANT \n #define _YOU_CONSTANT\n #endif</code></p>\n"}, {"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 2, "last_activity_date": 1539763152, "creation_date": 1539763152, "answer_id": 52849962, "question_id": 52847319, "link": "https://stackoverflow.com/questions/52847319/automatically-detect-if-need-to-add-a-const-qualifier-in-function-parameters/52849962#52849962", "title": "Automatically detect if need to add a &quot;const&quot; qualifier in function parameters", "body": "<p><code>const</code>-correctness for the C bindings, i.e. <code>const</code> pointers for <code>IN</code> parameters, was added in MPI 3.0. You can handle this the following:</p>\n\n<pre><code>#if MPI_VERSION &gt;= 3\n    #define MPI_CONST const\n#else\n    #define MPI_CONST\n#endif\n\nint PMPI_Gather(MPI_CONST void *sendbuf, int sendcount, ...)\n</code></pre>\n\n<p>Note: you can see the changes easily in section <em>A.2 C Bindings</em> of the <a href=\"https://www.mpi-forum.org/docs/mpi-3.0/mpi30-report-changeonlyreview.pdf\" rel=\"nofollow noreferrer\">\"diff to 3.0\" version of the standard</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6449249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591f0a04dfdc61cf77ee1d65132616fa?s=128&d=identicon&r=PG&f=1", "display_name": "maneka m", "link": "https://stackoverflow.com/users/6449249/maneka-m"}, "edited": false, "score": 0, "creation_date": 1541139093, "post_id": 52855353, "comment_id": 93121619, "body": "interesting, I didn&#39;t know about _Generic. Although it wouldn&#39;t have been a very appealing solution for my case since there are a lot of functions that need to be checked for const. The code would be a mess. But I learned something new, thank you."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 53, "user_id": 6449249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591f0a04dfdc61cf77ee1d65132616fa?s=128&d=identicon&r=PG&f=1", "display_name": "maneka m", "link": "https://stackoverflow.com/users/6449249/maneka-m"}, "edited": false, "score": 0, "creation_date": 1541144003, "post_id": 52855353, "comment_id": 93123183, "body": "@manekam Typically you put the check inside a macro not to clutter the code, so that&#39;s not an issue. And these are compile-time checks so they cost nothing in execution time."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1539780842, "creation_date": 1539780842, "answer_id": 52855353, "question_id": 52847319, "link": "https://stackoverflow.com/questions/52847319/automatically-detect-if-need-to-add-a-const-qualifier-in-function-parameters/52855353#52855353", "title": "Automatically detect if need to add a &quot;const&quot; qualifier in function parameters", "body": "<p>An alternative to <code>#ifdef ...</code> is to simply check which type the function got:</p>\n\n<pre><code>typedef int PMPI_Gather_noconst (void *sendbuf, int sendcount, ...);\ntypedef int PMPI_Gather_const (const void *sendbuf, int sendcount, ...);\n\nif( _Generic(PMPI_Gather, PMPI_Gather_noconst*:true, PMPI_Gather_const*:false) )\n{\n  PMPI_Gather_noconst* stuff;\n  ...\n}\nelse\n{\n  PMPI_Gather_const* stuff;\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6449249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591f0a04dfdc61cf77ee1d65132616fa?s=128&d=identicon&r=PG&f=1", "display_name": "maneka m", "link": "https://stackoverflow.com/users/6449249/maneka-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 52849962, "answer_count": 3, "score": 2, "last_activity_date": 1539780842, "creation_date": 1539750637, "question_id": 52847319, "link": "https://stackoverflow.com/questions/52847319/automatically-detect-if-need-to-add-a-const-qualifier-in-function-parameters", "title": "Automatically detect if need to add a &quot;const&quot; qualifier in function parameters", "body": "<p>I have written a PMPI profiling library that intercepts many MPI functions.\nOn my local machine I have an OpenMPI installation and some function parameters have a const qualifier, for example: </p>\n\n<pre><code>int PMPI_Gather(const void *sendbuf, int sendcount, ...)  \n</code></pre>\n\n<p>So naturally, my PMPI library also has those const qualifiers in corresponding hook functions. However, the remote machine where I'm often running stuff has an MPI installation in which function parameters in mpi.h don't have const qualifiers, so when I compile my library I get a whole bunch of warnings that the function declaration is incompatible. Of course, I can just ignore the warnings, suppress them or manually delete the const qualifier. </p>\n\n<p>I wonder if there is a more graceful way to handle the situation, if it's possible to detect somehow if function declarations in mpi.h have or haven't const parameters and automatically add or remove the const qualifier in the profiling library code during compilation, or perhaps it could be some kind of a configuration feature.</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539754268, "post_id": 52846809, "comment_id": 92611485, "body": "&quot;0, 1, 2, 3, 4, 5&quot; will not work with <code>scanf(&quot;%d&quot;...</code> given those commas.  Post <i>exact</i> example input."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539754345, "post_id": 52846809, "comment_id": 92611513, "body": "<code>freq[row][col] = -1;</code> is UB as that is outside <code>freq</code>.  What is that code for?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539754583, "post_id": 52846809, "comment_id": 92611593, "body": "<code>freq[N][M]</code> is not initialized.  Some elements are assigned later - certainly a problem when totalizing.  Code is not clear as to its goals."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10511255, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l67uq-Qo4-M/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDl05AeyZehYSQoc2ESld6QAAMBHA/mo/photo.jpg?sz=128", "display_name": "Philipp Penalber", "link": "https://stackoverflow.com/users/10511255/philipp-penalber"}, "edited": false, "score": 0, "creation_date": 1539916873, "post_id": 52846941, "comment_id": 92683326, "body": "thanks it works now, but I don&#39;t understand why you set digits[row][col] = currentvalue, why the array freq is only 1-D, and why you used row for freq[row]. Would you mind explaining it to me?"}, {"owner": {"reputation": 324, "user_id": 9731705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2756de1a443ca00b6711268aed962fd4?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mayen", "link": "https://stackoverflow.com/users/9731705/d-mayen"}, "reply_to_user": {"reputation": 33, "user_id": 10511255, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l67uq-Qo4-M/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDl05AeyZehYSQoc2ESld6QAAMBHA/mo/photo.jpg?sz=128", "display_name": "Philipp Penalber", "link": "https://stackoverflow.com/users/10511255/philipp-penalber"}, "edited": false, "score": 0, "creation_date": 1539953421, "post_id": 52846941, "comment_id": 92697995, "body": "Sure. currentValue is a temporal variable that will store user input is just for doing the code more verbose, you can remove it but then we will have freq[digits[row][col]]++; that looks hard to read."}, {"owner": {"reputation": 324, "user_id": 9731705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2756de1a443ca00b6711268aed962fd4?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mayen", "link": "https://stackoverflow.com/users/9731705/d-mayen"}, "reply_to_user": {"reputation": 33, "user_id": 10511255, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l67uq-Qo4-M/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDl05AeyZehYSQoc2ESld6QAAMBHA/mo/photo.jpg?sz=128", "display_name": "Philipp Penalber", "link": "https://stackoverflow.com/users/10511255/philipp-penalber"}, "edited": false, "score": 0, "creation_date": 1539953843, "post_id": 52846941, "comment_id": 92698199, "body": "And about freq 1-D array is because it will need to have the frequency of numbers from 0-9 so if it&#39;s an array of 10 positions which index starts in 0 we can say each position represents one digit. When the users enter 0, we increase freq[0] by one.  The second cycle just reutilize row, but you can use a new variable like digit instead. What the second cycle does is iterating through freq from 0-9 (position and digit) and printing the value of each one."}], "tags": [], "owner": {"reputation": 324, "user_id": 9731705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2756de1a443ca00b6711268aed962fd4?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mayen", "link": "https://stackoverflow.com/users/9731705/d-mayen"}, "is_accepted": true, "score": 2, "last_activity_date": 1539955740, "last_edit_date": 1539955740, "creation_date": 1539747583, "answer_id": 52846941, "question_id": 52846809, "link": "https://stackoverflow.com/questions/52846809/frequency-of-digits-in-my-2-d-array-not-outputting-correctly/52846941#52846941", "title": "Frequency of digits in my 2-D array not outputting correctly", "body": "<p>I think the second loop is not counting what you expect, why don't you try something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n int row, col, digit, N, M, currentValue;\n\n printf(\"This program counts occurrences of digits 0 through 9 in an NxM array.\\n\");\n printf(\"Enter the size of the array (Row Column): \");\n scanf(\"%d %d\", &amp;N, &amp;M);\n\n int digits[N][M], freq[10] = { 0 };\n\n for (row = 0; row &lt; N; row++){ \n  printf(\"Enter row %d: \", row);\n  for (col = 0; col &lt; M; col++){\n   scanf(\"%d\", &amp;currentValue);\n   digits[row][col] = currentValue;\n   if (currentValue &gt;= 0 &amp;&amp; currentValue &lt;=9) {\n     freq[currentValue]++;\n   }\n  }\n } \n\n printf(\"Total counts for each digit:\\n\");\n for (digit = 0; digit &lt; 10; digit++){\n   if (freq[digit] != 0){\n    printf(\"Digit %d occurs %d times\\n\", digit, freq[digit]);\n   }\n } \n\n return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10511255, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l67uq-Qo4-M/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDl05AeyZehYSQoc2ESld6QAAMBHA/mo/photo.jpg?sz=128", "display_name": "Philipp Penalber", "link": "https://stackoverflow.com/users/10511255/philipp-penalber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52846941, "answer_count": 1, "score": 0, "last_activity_date": 1539955740, "creation_date": 1539746259, "question_id": 52846809, "link": "https://stackoverflow.com/questions/52846809/frequency-of-digits-in-my-2-d-array-not-outputting-correctly", "title": "Frequency of digits in my 2-D array not outputting correctly", "body": "<p>My goal is if for example I would make the size of my array 2x6 and I would input values (0, 1, 2, 3, 4, 5) for row 1 and values (0, 1, 6, 7, 8, 9) for row 2 it would output:\nDigit 0 occurs 2 times\nDigit 1 occurs 2 times\nDigit 2 occurs 1 times\netc.\nbut it doesn't.\nHere is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n int row, col, N, M, count, row1, col1;\n\n printf(\"This program counts occurrences of digits 0 through 9 in an NxM array.\\n\");\n printf(\"Enter the size of the array (Row Column): \");\n scanf(\"%d %d\", &amp;N, &amp;M);\n\n int digits[N][M], freq[N][M];\n\n for (row = 0; row &lt; N; row++){ \n  printf(\"Enter row %d: \", row);\n  for (col = 0; col &lt; M; col++){\n   scanf(\"%d\", &amp;digits[row][col]);\n  }\n } \n\n freq[row][col] = -1;\n\n for (row = 0; row &lt; N; row++){\n  count = 1;\n  for (row1 = row + 1; row1 &lt; N; row1++){\n   for (col = 0; col &lt; M; col++){\n    for (col1 = col + 1; col1 &lt; M; col1++){\n     if (digits[row][col] == digits[row1][col1]){\n      count++;\n      freq[row1][col1] = 0;\n     }\n    }\n    if (freq[row][col] != 0){\n     freq[row][col] = count;\n    }\n   } \n  } \n }\n\n printf(\"Total counts for each digit:\\n\");\n for (row = 0; row &lt; N; row++){\n  for (col = 0; col &lt; M; col++){\n   if (freq[row][col] != 0){\n    printf(\"Digit %d occurs %d times\\n\", digits[row][col], freq[row][col]);\n   }\n  } \n } \n\n return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "pointers", "malloc", "double-pointer"], "comments": [{"owner": {"reputation": 23, "user_id": 10323502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eaZG-Yvzeqc/AAAAAAAAAAI/AAAAAAAAADw/JhPqbPCyejc/photo.jpg?sz=128", "display_name": "Leigo I", "link": "https://stackoverflow.com/users/10323502/leigo-i"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1539745035, "post_id": 52846578, "comment_id": 92609222, "body": "edited to increment j, still doesn&#39;t print anything"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539745213, "post_id": 52846578, "comment_id": 92609251, "body": "OT: when calling any of the heap allocation functions: <code>malloc</code> <code>calloc</code> <code>realloc</code>, 1) always check (!=NULL) the returned value to assure the operation was successful.  2) the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1539745260, "post_id": 52846578, "comment_id": 92609269, "body": "<code>input[i] = line;</code> don&#39;t make sense, you erase your previous allocation !"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539745433, "post_id": 52846578, "comment_id": 92609307, "body": "regarding: <code>input[i] = line;</code> after the next call to <code>getline()</code>, that char * will be pointing to memory that is no longer part of your program.  Suggest: <code>strcpy( input[i], line);</code>"}, {"owner": {"reputation": 23, "user_id": 10323502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eaZG-Yvzeqc/AAAAAAAAAAI/AAAAAAAAADw/JhPqbPCyejc/photo.jpg?sz=128", "display_name": "Leigo I", "link": "https://stackoverflow.com/users/10323502/leigo-i"}, "edited": false, "score": 0, "creation_date": 1539745628, "post_id": 52846578, "comment_id": 92609347, "body": "thanks for the tip! Using strcpy(input[i], line) seems to fix the problem!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539745751, "post_id": 52846578, "comment_id": 92609365, "body": "I was first thinking that your code was just keeping the pointer to the &#39;line&#39;.  And no, <code>strdup()</code> does not do the same thing.  <code>strdup()</code> makes a copy (somewhere in the heap) of the original string, then returns a pointer to that copy."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10323502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eaZG-Yvzeqc/AAAAAAAAAAI/AAAAAAAAADw/JhPqbPCyejc/photo.jpg?sz=128", "display_name": "Leigo I", "link": "https://stackoverflow.com/users/10323502/leigo-i"}, "edited": false, "score": 0, "creation_date": 1539745491, "post_id": 52846693, "comment_id": 92609324, "body": "thanks, using strcpy(input[i],line) solved the problem! :D"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1539745554, "post_id": 52846693, "comment_id": 92609335, "body": "the expression: <code>sizeof( char )</code> is defined in the C standard as 1.  Multiplying anything by 1 has no effect (and just clutters the code)"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539745606, "post_id": 52846693, "comment_id": 92609343, "body": "@user3629249 I know and agree, but it does not hurt, either."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539746076, "post_id": 52846693, "comment_id": 92609450, "body": "actually, such useless code does hurt.  It makes the code more difficult to understand, debug, etc"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1539746427, "post_id": 52846693, "comment_id": 92609534, "body": "&quot;Finally, you must free(line) and set it to NULL at the end of each iteration. Otherwise, getline may not allocate enough space and you will have a memory leak.&quot; what ? that the purpose of getline to not free line each time but only at the end of the parsing !"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1539747141, "post_id": 52846693, "comment_id": 92609694, "body": "@Stargateur You are right. The buffer still must be freed later on."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539747378, "post_id": 52846693, "comment_id": 92609753, "body": "@user3629249 I&#39;ve never seen anyone who had problems understanding <code>sizeof(char)</code>. In theory, you may be right. Practically, it does not matter."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 1, "last_activity_date": 1539747227, "last_edit_date": 1539747227, "creation_date": 1539745240, "answer_id": 52846693, "question_id": 52846578, "link": "https://stackoverflow.com/questions/52846578/cant-print-char-outside-of-getline-while-loop/52846693#52846693", "title": "Can&#39;t print char** outside of getline() while loop", "body": "<p>Your problem is not printing. It is in reading and storing.</p>\n\n<ol>\n<li><p><code>sizeof(char) * strlen(line)</code> must be <code>sizeof(char) * (strlen(line) + 1)</code> (you did not allocate space for the NULL terminator). In fact,  <code>(strlen(line) + 1)</code> will suffice (see the comment by @user3629249), and even <code>(len + 1)</code> (because <code>len</code> holds the length of the read string).</p></li>\n<li><p><code>input[i] = line;</code> does not create a copy of a string. You must use <code>strcpy(input[i], line);</code>.</p></li>\n<li>Finally, you must <code>free(line)</code> at the end.</li>\n</ol>\n"}], "owner": {"reputation": 23, "user_id": 10323502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eaZG-Yvzeqc/AAAAAAAAAAI/AAAAAAAAADw/JhPqbPCyejc/photo.jpg?sz=128", "display_name": "Leigo I", "link": "https://stackoverflow.com/users/10323502/leigo-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 52846693, "answer_count": 1, "score": 0, "last_activity_date": 1539747227, "creation_date": 1539744340, "last_edit_date": 1539745011, "question_id": 52846578, "link": "https://stackoverflow.com/questions/52846578/cant-print-char-outside-of-getline-while-loop", "title": "Can&#39;t print char** outside of getline() while loop", "body": "<p>Trying to read a file from commandline argument with getline() and store into char**, but when I try to access the data inside like using printf(), it prints nothing. Although printf() works fine within the while loop after each getline().</p>\n\n<p>Any help is greatly appreciated!</p>\n\n<pre><code>int main (int argc, char* argv[])\n{\n    //open file\n    FILE *stream = NULL;\n    char *line = NULL;\n    size_t len = 0;\n    ssize_t nread;\n    if (argc != 2)\n    {\n        fprintf(stderr, \"Usage: %s &lt;file&gt;\\n\", argv[0]);\n        exit(EXIT_FAILURE);\n    }\n    stream = fopen(argv[1], \"r\");\n    if (stream == NULL)\n    {\n        perror(\"fopen\");\n        exit(EXIT_FAILURE);\n    }\n\n    //read file line by line\n    char ** input = NULL;\n    int i = 0;\n    int j = 0;\n    while ((nread = getline(&amp;line, &amp;len, stream)) != -1)\n    {\n        j++;\n        input = (char **)realloc(input, sizeof(char*) * j);\n        input[i] = (char *)malloc(sizeof(char) * strlen(line));\n        input[i] = line;\n\n        //print each line (PRINTS FINE)\n        printf(\"%s\",input[i]);\n        i++;\n    }\n\n    //print each line outside of while loop (PRINTS NOTHING)\n    for (int z = 0; z &lt; j ; z++)\n    {\n        printf(\"%s\",input[z]);\n    }\n}\n</code></pre>\n\n<p>Welcome to try with any .txt file like this</p>\n\n<pre><code>./a.out input.txt\n</code></pre>\n"}, {"tags": ["c", "algorithm", "data-structures"], "comments": [{"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1539791653, "post_id": 52846485, "comment_id": 92632718, "body": "Have you searched for &quot;circular linked list,&quot; and tried to implement something? There are plenty of examples available online. Do that and if you&#39;re still having trouble, post your linked list code and explain what problem you&#39;re having. See <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "is_accepted": false, "score": 1, "last_activity_date": 1539747962, "creation_date": 1539747962, "answer_id": 52846980, "question_id": 52846485, "link": "https://stackoverflow.com/questions/52846485/populating-a-circular-double-linked-list-with-a-txt-file/52846980#52846980", "title": "Populating a circular double linked list with a txt file", "body": "<p>Assuming that <code>gamefile</code> contains the name of your <code>circle.txt</code> file, your <code>fscanf()</code> call will only read numbers as it's currently written.  You'll need to add something to read the names as well.</p>\n\n<p><code>fscanf(f, \"%s %d\", args...)</code> would be a good starting point.</p>\n"}], "owner": {"reputation": 1, "user_id": 10516126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccca51ae7d926e2fba22422a59f4a5c7?s=128&d=identicon&r=PG&f=1", "display_name": "J.Carter", "link": "https://stackoverflow.com/users/10516126/j-carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539901361, "creation_date": 1539743622, "last_edit_date": 1539901361, "question_id": 52846485, "link": "https://stackoverflow.com/questions/52846485/populating-a-circular-double-linked-list-with-a-txt-file", "title": "Populating a circular double linked list with a txt file", "body": "<p>I'm given a txt file named <code>circle.txt</code>. This txt file consists of names and shirt numbers like </p>\n\n<pre><code>Cameron 1\nDavid 2\nDorothy 3\nHeather 4\n</code></pre>\n\n<p>etc... to 100</p>\n\n<p>So I have to do a project based on the game count-to-oust and one part of the project requires one to create a circular double linked list\nusing the <code>void createGame(char* gameFile, int numOfPlayers);</code> function for the specified number of players so that each link represents a player. Then I have to Set the names and shirt numbers for the players based on values read in from the file. So my header file which has all the functions looks like</p>\n\n<p>countOust.h</p>\n\n<pre><code>#ifndef CountOust_h\n#define CountOust_h\n\nstruct listNode\n{\n    int hName; //represents numbers in file\n    char data[15]; // represents name in file\n    struct listNode *next;\n    struct listNode *prev;\n\n};\ntypedef struct listNode sNode;\n\nvoid createGame(char *gameFile, int numOfPlayers);\n//void traverseFwd(sNode *list);\n//void insertAt(sNode *list, sNode *player);\n//void lRemove(sNode *player);\n//void traverseBwd(sNode *list);\n//void startGame();\n\n#endif\n</code></pre>\n\n<p>Some functions are commented out because the main focus is on the <code>createGame</code> function.</p>\n\n<p>So I have tried populating the link in my <code>countOust.c</code> list using <code>fopen</code> and a for loop with <code>fscanf</code>. I've tried something like</p>\n\n<p>countOust.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include \"CountOust.h\"\n\nvoid createGame(char *gameFile, int numOfPlayers)\n{\n    FILE* f;\n    f = fopen(gameFile, \"r\");\n\n   // head = (struct sNode *)malloc(sizeof(sNode);\n\n    fscanf(f, \"%s %d\", head-&gt;data, &amp;head-&gt;hName);\n\n    for (int i = 0; i &lt; numOfPlayers - 1; i++)\n    {\n\n\n    }\n\n\n    fscanf(f, \"%s %d\", tail-&gt;data, &amp;tail-&gt;hName);\n\n\n}\n</code></pre>\n\n<p>^This gives an error because its brainstorming code</p>\n\n<p>I need an fscanf which will contain a string and integer representing the names in the files and the numbers in the file. </p>\n\n<p>I need to set the\nmalloc space for a node, and the node should have a name number reference to next node and a reference to the prev node. Then I need to set the the name and number and then set the pointer for prev and next nodes.</p>\n\n<p>So how would I create a circular double linked list and populate a txt file for the player names and shirt numbers using fscanf, malloc, referencing the nodes from my header file struct, to create a circular double linked list off a txt file? </p>\n"}, {"tags": ["c", "malloc", "bit"], "comments": [{"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1539742395, "post_id": 52846320, "comment_id": 92608653, "body": "Did you try a debugger? What do you think *array = &amp;bit; is supposed to do?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1539742988, "post_id": 52846320, "comment_id": 92608760, "body": "When you step through the code in the debugger, which line is causing the fault? What does reading that line carefully tell you?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539746018, "post_id": 52846320, "comment_id": 92609431, "body": "the posted code fails to compile!.  Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can help you"}, {"owner": {"reputation": 507, "user_id": 2654727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c319a24a493153df59e86b43ff78fde0?s=128&d=identicon&r=PG", "display_name": "Tom Drake", "link": "https://stackoverflow.com/users/2654727/tom-drake"}, "edited": false, "score": 0, "creation_date": 1539748178, "post_id": 52846320, "comment_id": 92609942, "body": "why are you calling strlen(bit), bit is an int value, which, according to your sample input, should either be 0 or 1. calling strlen(0) is essentially passing a null pointer to strlen."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539759399, "post_id": 52846320, "comment_id": 92613561, "body": "There are many issues. Actually about every thing in this piece of code is wrong. IMO this code is unsalvageable. You should start reading your C text book from the beginning. At least compile with all warnings enabled and treat them as errors, but I&#39;m not sure this will help much with your level of knowledge."}], "owner": {"user_type": "does_not_exist", "display_name": "user9587342"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539741889, "creation_date": 1539741889, "question_id": 52846320, "link": "https://stackoverflow.com/questions/52846320/array-pointer-program-to-flip-bits-and-add-one", "title": "Array Pointer Program to Flip Bits and Add One", "body": "<p>I am trying to write a program that will take an arbitrary number and flip the bits and add one, and I have written the code, but I keep getting a segmentation fault (core dumped) error. Could someone look at my code and see why that error is occurring. I have attached my code below and the input and output I would like to receive.</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"malloc.h\" //Needed for malloc, realloc, and free\n\n#define GROW_BY 2\n#define MAX_BITS 32\n\nint add_one(int in_array[], int num){\n        for (int i = 0; in_array[i] != NULL; i++) {\n                int add_one = in_array[num - i] + 1;\n        }\n        return add_one;\n}\n\nint main() {\n\n        //Declaration and Initialization of Variables\n        int* array = NULL;\n\n        int bit = getchar();\n        int count = 0;\n        while (bit != '\\n') {\n                bit = bit - '0';\n                *array = &amp;bit;\n                array = (int*)malloc((strlen(bit) + 1) * sizeof(int));\n                if (array == NULL) {\n                        printf(\"An error has occurred and the program will now $\n                        return 1;\n                }\n                bit = getchar();\n        }\n\n        for (int j = count - 1; j &gt;= 1; j--) {\n                if (array[j] == '1') {\n                        array = (int*)realloc(array, GROW_BY * sizeof(int));\n                        if (array == NULL) {\n                                printf(\"An error has occurred and the program w$\n                        }\n              }\n                else if (array[j] == '0' ) {\n                        array = (int*)realloc(array, GROW_BY * sizeof(int));\n                        if (array == NULL) {\n                                printf(\"An error has occurred and the program w$\n                                return 1;\n                        }\n                }\n        }\n\n        add_one(array, bit);\n\n        for (int j = count - 1; j &gt;= 1; j--) {\n                if (array[j] == '1' &amp;&amp; add_one == 1) {\n                        array[j] = '0';\n                }\n                else if (array[j] == '0' &amp;&amp; add_one == 1) {\n                        array[j] = '1';\n                        int add_one = 0;\n                }\n                else {\n                        array[j] = array[j];\n                }\n        }\n\n\n        printf(\"%ls/n\", array);\n\n        free(array);\n\n        return 0;\n}\n\nInput: 101011110\nOutput: 010100010\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "visual-studio", "winapi"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1539741456, "post_id": 52846179, "comment_id": 92608481, "body": "<code>AllocConsole winapi</code> is a search phrase you&#39;ll find useful."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1539743674, "post_id": 52846179, "comment_id": 92608895, "body": "Related: <a href=\"https://stackoverflow.com/questions/52825867/\">How can I output to the parent console window from a Win32 C++ application?</a>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1539746621, "post_id": 52846179, "comment_id": 92609582, "body": "There are many posts related to this and it turns out to be hard to do as you might hope, and always hack. Some websearch will find many results. If you want to log, use a different solution."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8383035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NtJy6.png?s=128&g=1", "display_name": "Michael Loda", "link": "https://stackoverflow.com/users/8383035/michael-loda"}, "is_accepted": false, "score": 0, "last_activity_date": 1539741405, "creation_date": 1539741405, "answer_id": 52846256, "question_id": 52846179, "link": "https://stackoverflow.com/questions/52846179/how-to-show-and-output-to-the-console-cmd-on-windows-c-winapi-under-subsy/52846256#52846256", "title": "How to show and output to the console (cmd) on Windows (C++ WinApi) under `SUBSYSTEM:WINDOWS`", "body": "<p>Yes, set the subsystem to WINDOWS and /ENTRY (entry point) to <code>WinMainCRTStartup</code> (or <code>wWinMainCRTStartup</code> if you're using unicode). You can even set it only for the Debug configuration, so the console won't appear for the Release.</p>\n"}, {"comments": [{"owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1539745095, "post_id": 52846483, "comment_id": 92609233, "body": "This looks hacky. Would it be too much to ask for sample code? Thanks for answering."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1539746602, "post_id": 52846483, "comment_id": 92609579, "body": "@Nik-Lz a non-console app writing to a console is hacky to begin with. And there are plenty of examples of the functions I mentioned if you Google them"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1539743618, "creation_date": 1539743618, "answer_id": 52846483, "question_id": 52846179, "link": "https://stackoverflow.com/questions/52846179/how-to-show-and-output-to-the-console-cmd-on-windows-c-winapi-under-subsy/52846483#52846483", "title": "How to show and output to the console (cmd) on Windows (C++ WinApi) under `SUBSYSTEM:WINDOWS`", "body": "<p>Use <code>AttachConsole</code> to attach to an existing console, or <code>AllocConsole</code> to create a new console. Then redirect <code>cin</code>/<code>cout</code> to that console as needed (depending on the requirements of your compiler's particular runtime implementation). Or, just use <code>ReadConsole</code>/<code>WriteConsole</code> instead.</p>\n"}], "owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 52846483, "answer_count": 2, "score": 0, "last_activity_date": 1539743618, "creation_date": 1539740491, "question_id": 52846179, "link": "https://stackoverflow.com/questions/52846179/how-to-show-and-output-to-the-console-cmd-on-windows-c-winapi-under-subsy", "title": "How to show and output to the console (cmd) on Windows (C++ WinApi) under `SUBSYSTEM:WINDOWS`", "body": "<p>I have seen windows applications that operate with both a Window and a console. I find myself wondering about this every now and then and I remember whenever I do research it I never find a solution. </p>\n\n<p>Is there a way to program my WinApi C++ application such that I can output to the console as I would normally do when under the linker option <code>SUBSYSTEM:CONSOLE</code>? In other words I can have a Window open, with my <code>WinMain</code> and <code>WndProc</code> etc. but I would also like to do <code>std::cout</code>, <code>std::cin</code> and <code>std::wcout</code>.. A good use-case for that, would be to use the console for logging stuff and the Window as the main application.</p>\n\n<p>Would It be a good idea to use <code>std::system()</code> instead and launch <code>cmd</code> from that and then output? I don't think so, but of course I don't know.</p>\n\n<p>Windows 8.1, x86_64, MSVS 2017.</p>\n"}, {"tags": ["c", "formatting"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 5, "creation_date": 1539738283, "post_id": 52845897, "comment_id": 92607828, "body": "Ask yourself what does <code>printf (&quot;\\n&quot;);</code> do?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1539738758, "post_id": 52845897, "comment_id": 92607931, "body": "...and equally important, <i>where</i> it&#39;s doing it."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539738816, "post_id": 52845897, "comment_id": 92607945, "body": "It is new line but if I don&#39;t use those, it will looks messy. You can take look at it. <a href=\"https://repl.it/repls/HeartySandybrownTask\" rel=\"nofollow noreferrer\">repl.it/repls/HeartySandybrownTask</a>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1539739085, "post_id": 52845897, "comment_id": 92607999, "body": "Who said anything about not using  them? The question was, <i>what</i> do they do, and <i>where</i> are they doing it? <a href=\"https://repl.it/repls/StaidKindlyDesignmethod\" rel=\"nofollow noreferrer\">Let me put that another way</a>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539739616, "post_id": 52845897, "comment_id": 92608122, "body": "regarding these kinds of statements: <code>printf(&quot;%#3d &quot;, i);</code>  The <code>#</code> should not be there.  Amongst other things, it causes the compiler to output a warning message.  Suggest removing the <code>#</code> from the format statements"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539742811, "post_id": 52845897, "comment_id": 92608727, "body": "regarding: <code>repl.it&#47;repls&#47;HeartySandybrownTask</code>   DO NOT post links to external web sites, they tend to move or disappear."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 0, "last_activity_date": 1539743130, "last_edit_date": 1539743130, "creation_date": 1539742623, "answer_id": 52846394, "question_id": 52845897, "link": "https://stackoverflow.com/questions/52845897/c-programming-to-make-multiplication-table-1-12/52846394#52846394", "title": "C programming to make multiplication table (1-12)", "body": "<p>the following code:</p>\n\n<ol>\n<li>corrects the output formatting,</li>\n<li>checks if there is a command line parameter, </li>\n<li>follows the axiom:\n<em>only one statement per line and (at most) one variable declaration per statement.</em></li>\n<li>checks the command line parameter to assure it is numeric and in the range 1...12</li>\n<li>limits the <code>scope</code> of each variable</li>\n<li>calls <code>puts()</code> where appropriate as <code>printf()</code> is very expensive in CPU cycles</li>\n<li>uses appropriate horizontal spacing for readability</li>\n</ol>\n\n<p>and now, the proposed code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;   // exit(), EXIT_FAILURE\n#include &lt;ctype.h&gt;    // isdigit()\n\n#define MAX_VALUE 12\n#define MIN_VALUE 1\n\nint main( int argc, char *argv[] ) \n{\n\n    if( argc != 2 )\n    {\n        fprintf( stderr, \"USAGE: %s &lt;maxTableSize: range 1...12&gt;\\n\", argv[0] );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, user entered a command line parameter\n\n    if( !isdigit( argv[1][0] ) )\n    {\n        fprintf( stderr, \"command line parameter not numeric\\n\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, command line parameter starts with digit\n\n    int maxTableSize = atoi( argv[1] );\n\n    if( MIN_VALUE &gt; maxTableSize || maxTableSize &gt; MAX_VALUE )\n    {\n        fprintf( stderr, \"command line parameter not in valid range ( 1...12 )\\n\");\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, command line parameter contains valid value\n\n    printf(\" +  \");\n    for ( int i = 1; i &lt;= maxTableSize; ++i ) \n    {\n        printf(\"%4d \", i);\n    }\n    puts(\"\");\n\n    for ( int i = 1; i &lt; 5+(maxTableSize*5); ++i ) \n    {\n        printf( \"-\" );\n    }\n    puts(\"\");\n\n    for ( int i = 1; i &lt;= maxTableSize; ++i ) \n    {\n        printf( \"%2d |\", i );\n\n        for ( int j = 1; j &lt;= maxTableSize; ++j ) \n        {\n            printf( \"%4d \", i * j );\n        }\n        puts(\"\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>the following demonstrates the various conditions of running the program. (where <code>untitled</code> is the name of the program.)</p>\n\n<pre><code>./untitled\nUSAGE: ./untitled &lt;maxTableSize: range 1...12&gt;\n\n./untitled a\ncommand line parameter not numeric\n\n./untitled 0\ncommand line parameter not in valid range ( 1...12 )\n\n./untitled 13\ncommand line parameter not in valid range ( 1...12 )\n\n\n./untitled 1\n +     1 \n--------\n 1 |   1 \n\n./untitled 2\n +     1    2 \n------------\n 1 |   1    2 \n 2 |   2    4 \n\n .....\n\n./untitled 12\n +     1    2    3    4    5    6    7    8    9   10   11   12 \n----------------------------------------------------------------\n 1 |   1    2    3    4    5    6    7    8    9   10   11   12 \n 2 |   2    4    6    8   10   12   14   16   18   20   22   24 \n 3 |   3    6    9   12   15   18   21   24   27   30   33   36 \n 4 |   4    8   12   16   20   24   28   32   36   40   44   48 \n 5 |   5   10   15   20   25   30   35   40   45   50   55   60 \n 6 |   6   12   18   24   30   36   42   48   54   60   66   72 \n 7 |   7   14   21   28   35   42   49   56   63   70   77   84 \n 8 |   8   16   24   32   40   48   56   64   72   80   88   96 \n 9 |   9   18   27   36   45   54   63   72   81   90   99  108 \n10 |  10   20   30   40   50   60   70   80   90  100  110  120 \n11 |  11   22   33   44   55   66   77   88   99  110  121  132 \n12 |  12   24   36   48   60   72   84   96  108  120  132  144 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1539750081, "creation_date": 1539750081, "answer_id": 52847249, "question_id": 52845897, "link": "https://stackoverflow.com/questions/52845897/c-programming-to-make-multiplication-table-1-12/52847249#52847249", "title": "C programming to make multiplication table (1-12)", "body": "<p>In your code, you are making 2 mistakes.</p>\n\n<ol>\n<li><p>You are adding the <code>printf (\"\\n\")</code> inside the for loop. This should be outside the <code>for</code> loop in case of single loop. In case of nested loop, the new line should be after each internal <code>for</code> loop.</p></li>\n<li><p>You are using <code>%#3d</code> in printf. The <code>#</code> should be removed.</p></li>\n</ol>\n\n<p>Other than that, after making few changes in printf alignment, the updated code is below</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    int i, j;\n\n    printf(\"   +\");\n    for (i = 1; i &lt; 13; ++i) \n    {\n        printf(\"%4d \", i);\n    }\n    printf(\"\\n\");\n\n    for (i = 1; i &lt; 64; ++i) \n    {\n        printf(\"-\");\n    }\n    printf(\"\\n\");\n\n    for (i = 1; i &lt; 13; ++i) \n    {\n        printf(\"%2d |\", i);\n\n        for (j = 1; j &lt; 13; ++j) \n        {\n            printf(\"%4d \", i * j);\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>Output is as below</p>\n</blockquote>\n\n<pre><code>   +   1    2    3    4    5    6    7    8    9   10   11   12\n---------------------------------------------------------------\n 1 |   1    2    3    4    5    6    7    8    9   10   11   12\n 2 |   2    4    6    8   10   12   14   16   18   20   22   24\n 3 |   3    6    9   12   15   18   21   24   27   30   33   36\n 4 |   4    8   12   16   20   24   28   32   36   40   44   48\n 5 |   5   10   15   20   25   30   35   40   45   50   55   60\n 6 |   6   12   18   24   30   36   42   48   54   60   66   72\n 7 |   7   14   21   28   35   42   49   56   63   70   77   84\n 8 |   8   16   24   32   40   48   56   64   72   80   88   96\n 9 |   9   18   27   36   45   54   63   72   81   90   99  108\n10 |  10   20   30   40   50   60   70   80   90  100  110  120\n11 |  11   22   33   44   55   66   77   88   99  110  121  132\n12 |  12   24   36   48   60   72   84   96  108  120  132  144\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 892, "favorite_count": 0, "accepted_answer_id": 52846394, "answer_count": 2, "score": 0, "last_activity_date": 1539750081, "creation_date": 1539738014, "last_edit_date": 1539738673, "question_id": 52845897, "link": "https://stackoverflow.com/questions/52845897/c-programming-to-make-multiplication-table-1-12", "title": "C programming to make multiplication table (1-12)", "body": "<p>I want to make a program that takes a single integer command line argument (n) and makes n x n multiplication table resembling the 4x4 example below. It should be only 1 through 12, but shouldn't be no smaller or larger. So if there is not enough argument, it should be print a usuage: <code>Usage: program &lt;n&gt; \\n</code> or if it is out of range then it should be print: <code>n out of range (1-12)\\n</code> and exit.</p>\n\n<p>Example:\n./program 4</p>\n\n<pre><code>*    1   2   3   4\n  +----------------\n 1|   1   2   3   4\n 2|   2   4   6   8\n 3|   3   6   9  12\n 4|   4   8  12  16\n</code></pre>\n\n<p>My code I have tried but wasn't success. I have copied the compiled is not what I expected in the below. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    int i, j;\n\n    printf(\" +\");\n    for (i = 1; i &lt; 13; ++i) \n    {\n        printf(\"%#3d \", i);\n        printf(\"\\n\");\n    }\n\n    for (i = 1; i &lt; 64; ++i) \n    {\n        printf(\"-\");\n        printf(\"\\n\");\n    }\n\n    for (i = 1; i &lt; 13; ++i) \n    {\n        printf(\"%#2d |\", i);\n\n        for (j = 1; j &lt; 11; ++j) \n        {\n            printf(\"%#3d \", i * j);\n            printf(\"\\n\");\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>After compile:</p>\n\n<pre><code>gcc version 4.6.3\n\n +  1 \n  2 \n  3 \n  4 \n  5 \n  6 \n  7 \n  8 \n  9 \n 10 \n 11 \n 12 \n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n 1 |  1 \n  2 \n  3 \n  4 \n  5 \n  6 \n  7 \n  8 \n  9 \n 10 \n 2 |  2 \n  4 \n  6 \n  8 \n 10 \n 12 \n 14 \n 16 \n 18 \n 20 \n 3 |  3 \n  6 \n  9 \n 12 \n 15 \n 18 \n 21 \n 24 \n 27 \n 30 \n 4 |  4 \n  8 \n 12 \n 16 \n 20 \n 24 \n 28 \n 32 \n 36 \n 40 \n 5 |  5 \n 10 \n 15 \n 20 \n 25 \n 30 \n 35 \n 40 \n 45 \n 50 \n 6 |  6 \n 12 \n 18 \n 24 \n 30 \n 36 \n 42 \n 48 \n 54 \n 60 \n 7 |  7 \n 14 \n 21 \n 28 \n 35 \n 42 \n 49 \n 56 \n 63 \n 70 \n 8 |  8 \n 16 \n 24 \n 32 \n 40 \n 48 \n 56 \n 64 \n 72 \n 80 \n 9 |  9 \n 18 \n 27 \n 36 \n 45 \n 54 \n 63 \n 72 \n 81 \n 90 \n10 | 10 \n 20 \n 30 \n 40 \n 50 \n 60 \n 70 \n 80 \n 90 \n100 \n11 | 11 \n 22 \n 33 \n 44 \n 55 \n 66 \n 77 \n 88 \n 99 \n110 \n12 | 12 \n 24 \n 36 \n 48 \n 60 \n 72 \n 84 \n 96 \n108 \n120\n</code></pre>\n</blockquote>\n\n<p>I have been stuck on this for 2 days and trying to figure it out why is it going straight down.. Thank you. </p>\n"}, {"tags": ["c", "arrays", "initialization"], "comments": [{"owner": {"reputation": 11, "user_id": 9454002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91385b41549ccf77eb5d62e75f08f994?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9454002/paul"}, "edited": false, "score": 0, "creation_date": 1539736248, "post_id": 52845596, "comment_id": 92607403, "body": "Sorry about asking a question like this. I would have asked my teacher, but he is gone for the night. Thanks to anyone that helps me out though."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1539736581, "post_id": 52845596, "comment_id": 92607465, "body": "Fyi, the protoype for <code>customer()</code> should be <code>customers()</code>, and no definition of the symbol <code>QUIT</code>. The former is a problem; the latter a show-stopper. We can&#39;t compile it, much less test it. Unrelated, dumping the result of <code>scanf</code> into the argument list for <code>printf</code> ? was that intentional?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1539736925, "post_id": 52845596, "comment_id": 92607546, "body": "The error is you actually asked about is explicit: you declare a pointer, <code>user</code> in <code>main</code>. You pass this <i>indeterminate</i> pointer (it was given no formal address, nor NULL) to <code>accounts</code>, where it is promptly used for various things. The compiler is telling you that&#39;s probably wrong, and it&#39;s <i>definitely</i> right. Frankly, there are a ton of things wrong in this code, but that was the one you asked about, and hopefully you understand the problem now."}, {"owner": {"reputation": 11, "user_id": 9454002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91385b41549ccf77eb5d62e75f08f994?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9454002/paul"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1539739022, "post_id": 52845596, "comment_id": 92607985, "body": "Okay so I was able to compile it, but now when I try to enter a name, I get a segmentation fault."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1539741648, "post_id": 52845596, "comment_id": 92608517, "body": "Well I see that user is not initialized. Where in the code do you suppose user gets initialized?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539743442, "post_id": 52845596, "comment_id": 92608842, "body": "when writing a function prototype, like: <code>int customerS();</code>  1) the function name must match the actual function name.  2) a prototype for a function that takes no parameters needs to be written as: <code>int customerS( void );</code>  so the compiler does not produce code that will enable that function to take any number of parameters."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539743538, "post_id": 52845596, "comment_id": 92608859, "body": "OT: when calling any of the <code>scanf()</code> family of functions, always check the returned value (not the parameter values) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539743587, "post_id": 52845596, "comment_id": 92608867, "body": "the posted code does not compile, amongst other things, it is missing the needed include statements for the needed header files.  Are you expecting us to guess as to which header files your code actually includes?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539743720, "post_id": 52845596, "comment_id": 92608909, "body": "OT: for ease of readability and understaning, follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539743807, "post_id": 52845596, "comment_id": 92608927, "body": "regarding this kind of statement: <code>char *fast = &amp;userStart-&gt;lastName[LENGTH],</code>  this is setting <code>fast</code> to point to 1 character past the end of the field <code>lastName</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539744080, "post_id": 52845596, "comment_id": 92608996, "body": "in C, the index into an array starts with 0 and ends with (number of entries in array -1)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1539744274, "post_id": 52845596, "comment_id": 92609041, "body": "@user3629249 also, the <code>S</code> should be <code>s</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539744472, "post_id": 52845596, "comment_id": 92609088, "body": "regarding: <code>while((amount = customers()) != 0)</code>  this statement, in <code>main()</code>, results in the user of the program being ask, for every customer, how many customers will be entered.  Suggest moving the call to <code>customers()</code> to before the <code>main()</code> loop and using the resulting variable: <code>amount</code> in the <code>main()</code> loop"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539744912, "post_id": 52845596, "comment_id": 92609196, "body": "regarding: <code>for(user = userStart; (user - userStart) &lt; amount; user++)</code>  this is performing pointer arithmetic.  so comparing that difference in pointers with <code>amount</code> will not perform the desired operation.  Perhaps you might use: <code>for(user = userStart; (user - userStart) &lt; (amount*sizeof( *user ) ); user++)</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1539748878, "post_id": 52845596, "comment_id": 92610076, "body": "@user3629249 the sizeof calculation is not correct. Pointer arithmetic will do the right thing during that difference calculation, so long as <code>user</code> and <code>userStart</code> are both in the same sequence or the one-past address. The OP&#39;s code in that for-loop is actually correct. There are <i>plenty</i> of places where things are wrong, but that isn&#39;t one of them."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9454002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91385b41549ccf77eb5d62e75f08f994?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9454002/paul"}, "edited": false, "score": 0, "creation_date": 1539743270, "post_id": 52846226, "comment_id": 92608811, "body": "Okay, I allocated it, but I&#39;m still getting a segmentation fault. I think the problem may be in the accounts function. I&#39;ll try changing some things up there."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539748616, "post_id": 52846226, "comment_id": 92610015, "body": "A less complicated, easy to code, review and maintain allocation is <code>user = malloc(sizeof *user);</code>."}], "tags": [], "owner": {"reputation": 883, "user_id": 10096436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKBUJ.png?s=128&g=1", "display_name": "Micromuncher", "link": "https://stackoverflow.com/users/10096436/micromuncher"}, "is_accepted": false, "score": 0, "last_activity_date": 1539741165, "creation_date": 1539741165, "answer_id": 52846226, "question_id": 52845596, "link": "https://stackoverflow.com/questions/52845596/trouble-with-a-pointer-not-being-initialized/52846226#52846226", "title": "Trouble with a pointer not being initialized", "body": "<p>struct info *user;</p>\n\n<p>This allocates a pointer to a user struct, not the struct itself.</p>\n\n<p>So, you can allocate it on the stack via <code>struct info user;</code> and pass &amp;user to the functions, or dynamically allocated it via <code>user = (struct info*)malloc( sizeof(struct info) )</code>.  </p>\n\n<p>Either way should avoid your segmentation fault (because the pointer is not initialized).\n..)</p>\n"}], "owner": {"reputation": 11, "user_id": 9454002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91385b41549ccf77eb5d62e75f08f994?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9454002/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539741165, "creation_date": 1539735187, "last_edit_date": 1539736728, "question_id": 52845596, "link": "https://stackoverflow.com/questions/52845596/trouble-with-a-pointer-not-being-initialized", "title": "Trouble with a pointer not being initialized", "body": "<p>I'm trying to make a program that asks for a users name and the amount of money they owe to the company. The problem is, every time I try to compile the program I get this warning saying that \"user may not be initialized.\" I'm not quite sure what that means. Any help to out what I'm doing wrong? Thanks!</p>\n\n<pre><code>#define END  '\\0'        \n#define LENGTH 20          \n\nstruct info\n{\n   char  lastName[LENGTH]; \n   float payment;\n};\n\nint customerS();\nvoid accounts(struct info *userStart, int amount);\nvoid changeNames(struct info *userStart, int amount);\nvoid sort(struct info *userStart, int amount);\nvoid results(struct info *userStart, int amount);\n\nint main()\n{\n   struct info *user;\n   int amount;\n\n    while((amount = customers()) != 0)\n   {\n\n      accounts(user, amount);\n      changeNames(user, amount);\n      sortNames(user, amount);\n      results(user, amount);\n      free(user);\n   }\n\n   return 0;\n}\n\nint customers()\n{\n   int choice;\n\n   do\n   {      \n      printf(\"\\nHow many customers do you have (2 to 300, 0=quit): \",\n      scanf(\"%d\", &amp;choice);\n   }\n   while((choice &lt; 2|| choice &gt; 300) &amp;&amp; choice != 0);\nreturn choice;\n}\n\nvoid accounts(struct info *userStart, int amount)\n{\n   struct info *user;\n   char   *name[LENGTH];\n   float  owed;\n\n   for(user = userStart; (user - userStart) &lt; amount; user++)\n   {\n      scanf (\" %s\", name[LENGTH]);\n      getchar();\n      do\n      {\n         name[LENGTH] = getchar();\n         name[LENGTH]++;\n      }\n      while(!('\\n'));\n      user-&gt;lastName[LENGTH + 1] = END;\n      scanf(\"%f\", &amp;owed);\n      user-&gt;payment = owed;\n   }\n   return;\n}\n\nvoid changeNames(struct info *userStart, int amount)\n{\n   char *fast = &amp;userStart-&gt;lastName[LENGTH],\n        *slow = &amp;userStart-&gt;lastName[LENGTH];\n\n   if(tolower(*fast))\n      *slow++ = toupper(*fast);       \n   while(*fast != END)\n   {\n      if(!isspace(*fast) || isalpha(*fast))\n         *slow++ = tolower(*fast);\n      fast++;\n   }\n   *slow = END;\n   return;\n}\n\nvoid sort(struct info *userStart, int amount)\n{\n   struct info *user;\n   char *in,\n        *out,\n        temp;\n\n   for(out = user-&gt;lastName; (out - userStart-&gt;lastName) &lt; amount; out++)\n   {\n      for(in = out + 1; (in - userStart-&gt;lastName) &lt; amount; in++)\n      {\n         if(strcmp(user-&gt;lastName, userStart-&gt;lastName))\n         {\n            temp = *out;\n            *out = *in;\n            *in = temp;\n         }\n      }\n   }\n   return;\n}\nvoid results(struct info *userStart, int amount)\n{\n   struct info *user;\n   printf(\"\\nName: %s        Payment: $%.2f\", user-&gt;lastName,  user-&gt;payment);\n   return;\n}\n</code></pre>\n"}, {"tags": ["c", "macos", "macos-mojave"], "comments": [{"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1539734387, "post_id": 52845501, "comment_id": 92606991, "body": "You&#39;re using only a single underscore. Does __APPLE__ or __MACH__ work?"}, {"owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "reply_to_user": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1539734437, "post_id": 52845501, "comment_id": 92607004, "body": "No, sorry, In my real code I&#39;m using the double underscore, just a typo in here. I&#39;ll edit the post."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539734671, "post_id": 52845501, "comment_id": 92607067, "body": "Can you post the output of <code>gcc -dM -E - &lt; &#47;dev&#47;null</code> ? see <a href=\"https://stackoverflow.com/questions/2224334/gcc-dump-preprocessor-defines\">gcc-dump-preprocesor-defines</a>."}, {"owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "edited": false, "score": 0, "creation_date": 1539735043, "post_id": 52845501, "comment_id": 92607143, "body": "<code>#define __APPLE__ 1</code> is missing from it, so that&#39;s clearly why it isn&#39;t working. I am going to reinstall gcc and see if it comes back."}, {"owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "edited": false, "score": 0, "creation_date": 1539736381, "post_id": 52845501, "comment_id": 92607432, "body": "reinstalling fixed this. May have corrupted from OS update, I had to reinstall xCode command line tools when i first upgraded too."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "is_accepted": true, "score": 0, "last_activity_date": 1539736438, "creation_date": 1539736438, "answer_id": 52845737, "question_id": 52845501, "link": "https://stackoverflow.com/questions/52845501/does-c-preprocessor-for-osx-detection-work-on-mojave/52845737#52845737", "title": "Does C preprocessor for OSX detection work on Mojave?", "body": "<p>Reinstalling GCC seems to have resolved the issue. <code>#define __APPLE__ 1</code> was missing from gcc when I ran <code>gcc -dM -E - &lt; /dev/null</code> in terminal. It has returned upon reinstall. Possible corruption from upgrading. </p>\n"}], "owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 52845737, "answer_count": 1, "score": 2, "last_activity_date": 1539736438, "creation_date": 1539734251, "last_edit_date": 1539734469, "question_id": 52845501, "link": "https://stackoverflow.com/questions/52845501/does-c-preprocessor-for-osx-detection-work-on-mojave", "title": "Does C preprocessor for OSX detection work on Mojave?", "body": "<p>Is the C preprocessor for Mac OSX not working with Mojave correctly, or am I making some dumb mistake? The code below compiles but will not print \"test\" to the console. </p>\n\n<p>According to <a href=\"https://sourceforge.net/p/predef/wiki/OperatingSystems/\" rel=\"nofollow noreferrer\">https://sourceforge.net/p/predef/wiki/OperatingSystems/</a> and multiple Stack Overflow posts I have looked at <code>__APPLE__</code> <em>should</em> do the trick. I've also tried <code>__MACH__</code> and using <code>__APPLE__ &amp;&amp; __MACH__</code> but this does not work either. </p>\n\n<p>I'm compiling in terminal via gcc. </p>\n\n<p>Is it possible that these don't work with the newest version of OSX as it was only released a few weeks ago? I never had this problem until I updated to Mojave.</p>\n\n<p>I've also tried calling a function in place of <code>printf(\"test\");</code> but the results are the same.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{  \n    #ifdef __APPLE__\n      printf(\"test\");\n    #endif\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "performance", "mmap"], "comments": [{"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539734034, "post_id": 52845387, "comment_id": 92606897, "body": "@AjayBrahmakshatriya Are you saying that you&#39;re seeing different numbers on your system?"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1539734089, "post_id": 52845387, "comment_id": 92606918, "body": "did you try something like <code>perf stat</code> ?"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539734300, "post_id": 52845387, "comment_id": 92606962, "body": "@AjayBrahmakshatriya The number of page faults in each execution is given in the post. It&#39;s 4607 vs 302965."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1539734464, "post_id": 52845387, "comment_id": 92607012, "body": "Are you accounting for file caching in these tests?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1539734540, "post_id": 52845387, "comment_id": 92607029, "body": "Interesting, the large memcpy took less combined (user+system) CPU time, but had a ton more context switches, presumably being responsible for it being so much slower on the wall clock?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1539734664, "post_id": 52845387, "comment_id": 92607063, "body": "Is it possible that the smaller memcpy was able to trigger multiple forward-looking disk reads and get the number of pending reads high enough that the disk was more saturated?  Do you have any disk command queue and read throughput stats for the disk while it&#39;s running?  Also, what RAID config is the disk in?  Not sure it matters, but I&#39;m curious.. 0?  5?  50? etc"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 2, "creation_date": 1539735918, "post_id": 52845387, "comment_id": 92607337, "body": "Also, when I build this with optimizations turned on, the memcpy is optimized out completely since it results in no observable changes -- <a href=\"https://godbolt.org/z/zGdG1w\" rel=\"nofollow noreferrer\">godbolt.org/z/zGdG1w</a>  what compiler and flags are you using to build this?  adding something silly after the memcpy puts it back in, though:     volatile uint8_t c = buffer[10];  <a href=\"https://godbolt.org/z/ctTRPV\" rel=\"nofollow noreferrer\">godbolt.org/z/ctTRPV</a>"}, {"owner": {"reputation": 121, "user_id": 10514679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3365e5831caceffe3259383aefde1c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10514679/alex"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1539780953, "post_id": 52845387, "comment_id": 92625914, "body": "@xaxxon I&#39;m just using gcc 4.8.5 with -O3 plus any required defines (e.g. MEMCPY_SIZE). If I change to that configuration on Compiler Explorer, it seems to still include the memcpy with no changes. The system is using hardware RAID (MegaRaid SAS) in a RAID-6 configuration. atop shows an average queue depth of ~1 and ~0.14ms per request for the 1MB copy and queue depth of ~1.3 and ~0.07ms per request for the 4KB copy."}, {"owner": {"reputation": 121, "user_id": 10514679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3365e5831caceffe3259383aefde1c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10514679/alex"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1539781136, "post_id": 52845387, "comment_id": 92626048, "body": "@thatotherguy The tests were run multiple times and while the figures weren&#39;t exactly the same each time, they were always similar with a substantial difference in wall clock time and major page faults."}, {"owner": {"reputation": 121, "user_id": 10514679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3365e5831caceffe3259383aefde1c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10514679/alex"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1539801162, "post_id": 52845387, "comment_id": 92637356, "body": "@SeverinPappadeux <code>perf stat</code> showed page-faults to be the same on the 2 different memcpy sizes (it seems to be the same as &quot;minor page faults&quot; in <code>&#47;usr&#47;bin&#47;time -v</code>), but shows context switches to be ~4 times as many with the 1MB copy."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1539803240, "post_id": 52845387, "comment_id": 92638355, "body": "@Alex basically it looks like problem with allocating 1MB chunk. It is allocated as anonymous or /dev/zero mmap, so it is causing a lot more pagefaults. It is useless in this situation because source is mmaped already. You could try to check this theory either by disabling mmap in malloc (<a href=\"https://www.gnu.org/software/libc/manual/html_node/The-GNU-Allocator.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/The-GNU-Allocator.ht&zwnj;&#8203;ml</a>), or running strace to get syscalls."}, {"owner": {"reputation": 121, "user_id": 10514679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3365e5831caceffe3259383aefde1c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10514679/alex"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1539872829, "post_id": 52845387, "comment_id": 92666046, "body": "@SeverinPappadeux Thanks for the idea, but this change doesn&#39;t seem to have made a noticeable difference to the performance. I verified with strace that it was currently using mmap for the 1MB allocation (it was, as you expected), then ran with the environment variable MALLOC_MMAP_MAX_=0 and confirmed it was no longer using mmap for the 1MB allocation (it wasn&#39;t, there were &quot;brk&quot; system calls instead). It didn&#39;t improve the performance or the number of major page faults though, unfortunately."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1539874461, "post_id": 52845387, "comment_id": 92667142, "body": "@Alex Interesting, very interesting. Let me think about it a bit more"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1541373365, "post_id": 52845387, "comment_id": 93184162, "body": "memcpy uses different algorithm depending on the size. A larger sized copy will avoid using the L2/L3 cache. Maybe that&#39;s the cause of the difference. Btw., if you memcpy a large portion, you should not use mmap. Use <code>read</code> instead."}, {"owner": {"reputation": 5986, "user_id": 1010175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26b622e6f69528866cb2f8426ec3a38b?s=128&d=identicon&r=PG", "display_name": "cegfault", "link": "https://stackoverflow.com/users/1010175/cegfault"}, "edited": false, "score": 0, "creation_date": 1541456626, "post_id": 52845387, "comment_id": 93216692, "body": "@Alex - (a) how much physical memory is there on the machine? (b) how much swap space?, and (c) any difference in performance if you add <code>MAP_NORESERVE</code> to <code>mmap_flags</code>?"}, {"owner": {"reputation": 121, "user_id": 10514679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3365e5831caceffe3259383aefde1c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10514679/alex"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1541501120, "post_id": 52845387, "comment_id": 93230325, "body": "@geza It might be the issue, I don&#39;t really know. This example is a lot simpler than the real code, it just exhibits the same issue. Using mmap makes it simpler to handle the other logic. I have also tried a version with vectored IO instead of mmap (the real application handles a &quot;header&quot; structure and &quot;payload&quot; for each block, and the payload has to be copied to a specific location while the header just needs to be read by the application), and it performs similarly to the 4KB mmap copy version, while making the code a lot less readable due to handling of partial reads with vectored I/O."}, {"owner": {"reputation": 121, "user_id": 10514679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3365e5831caceffe3259383aefde1c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10514679/alex"}, "reply_to_user": {"reputation": 5986, "user_id": 1010175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26b622e6f69528866cb2f8426ec3a38b?s=128&d=identicon&r=PG", "display_name": "cegfault", "link": "https://stackoverflow.com/users/1010175/cegfault"}, "edited": false, "score": 0, "creation_date": 1541502256, "post_id": 52845387, "comment_id": 93230888, "body": "@cegfault (a) 64GB of memory -- nothing much is running while I&#39;m doing these tests. (b) It&#39;s never gone in to swap. (c) Thanks for the suggestion, but that didn&#39;t make a difference. I&#39;m surprised that most of the flags seem to make things worse -- particularly MADV_SEQUENTIAL which made it crawl, even though this is very sequential. I&#39;d read using MADV_SEQUENTIAL and MAP_POPULATE together would hint to read ahead, which I thought would help."}, {"owner": {"reputation": 5986, "user_id": 1010175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26b622e6f69528866cb2f8426ec3a38b?s=128&d=identicon&r=PG", "display_name": "cegfault", "link": "https://stackoverflow.com/users/1010175/cegfault"}, "edited": false, "score": 0, "creation_date": 1541525637, "post_id": 52845387, "comment_id": 93244092, "body": "This is a really interesting problem; the performance for me between 1m and 4k is negligible until I hit about 8GB, which is the amount of ram on my current machine.  It appears mmap works differently (or, more accurately, vm_allocate in the kernel) on huge sizes, and differently again on sizes larger than physical memory.  Since your 29GB file is smaller than 64GB ram, we can rule out the kernel&#39;s handling of values larger than memory.  That said, there is another cutoff somewhere where performance magically drops, and I don&#39;t know if that&#39;s machine independent."}, {"owner": {"reputation": 5986, "user_id": 1010175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26b622e6f69528866cb2f8426ec3a38b?s=128&d=identicon&r=PG", "display_name": "cegfault", "link": "https://stackoverflow.com/users/1010175/cegfault"}, "edited": false, "score": 0, "creation_date": 1541525679, "post_id": 52845387, "comment_id": 93244114, "body": "It might be helpful if you ran this code against file sizes from 1GB on up to 30GB so we can see if/where there&#39;s a change in performance."}, {"owner": {"reputation": 71, "user_id": 547152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d6778c7bea46cc007b327069865d9bc?s=128&d=identicon&r=PG", "display_name": "crash", "link": "https://stackoverflow.com/users/547152/crash"}, "edited": false, "score": 0, "creation_date": 1541667542, "post_id": 52845387, "comment_id": 93296788, "body": "The memcpy implementation used in Centos 7 seems to use a non linear memory access pattern, which non optimal for mmapped files. Could you try to use a simple handwritten implementation. For benchmarking use a separate cpp-File to avoid inlining."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1541686813, "post_id": 52845387, "comment_id": 93307156, "body": "Can you put here the disassembly of memcpy? Just to confirm my (and crash&#39;s) theory."}], "answers": [{"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1541689056, "creation_date": 1541689056, "answer_id": 53210331, "question_id": 52845387, "link": "https://stackoverflow.com/questions/52845387/improving-mmap-memcpy-file-read-performance/53210331#53210331", "title": "Improving mmap memcpy file read performance", "body": "<p>If the underlying file and disk systems aren't fast enough, whether your use <code>mmap()</code> or POSIX <code>open()</code>/<code>read()</code> or standard C <code>fopen()</code>/<code>fread()</code> or C++ <code>iostream</code> won't matter much at all.</p>\n\n<p>If performance really matters and the underlying file and disk system(s) are fast enough, though, <code>mmap()</code> is probably the worst possible way to read a file sequentially. The creation of mapped pages is a relatively expensive operation, and since each byte of data is read only once that cost per actual access can be extreme.  Using <code>mmap()</code> can also increase memory pressure on your system.  You can explicitly <code>munmap()</code> pages after you read them, but then your processing can stall while the mappings are torn down.</p>\n\n<p>Using direct IO will probably be the fastest, especially for large files as there's not a massive number of page faults involved.  Direct IO bypasses the page cache, which is a good thing for data read only once.  Caching data read only once - never to be reread - is not only useless but potentially counterproductive as CPU cycles get used to evict useful data from the page cache.</p>\n\n<p>Example (headers and error checking omitted for clarity):</p>\n\n<pre><code>int main( int argc, char **argv )\n{\n    // vary this to find optimal size\n    // (must be a multiple of page size)\n    size_t copy_size = 1024UL * 1024UL;\n\n    // get a page-aligned buffer\n    char *buffer;\n    ::posix_memalign( &amp;buffer, ( size_t ) ( 4UL * 1024UL ), copy_size );\n\n    // make sure the entire buffer's virtual-to-physical mappings\n    // are actually done (can actually matter with large buffers and\n    // extremely fast IO systems)\n    ::memset( buffer, 0, copy_size );\n\n    fd = ::open( argv[ 1 ], O_RDONLY | O_DIRECT );\n\n    for ( ;; )\n    {\n        ssize_t bytes_read = ::read( fd, buffer, copy_size );\n        if ( bytes_read &lt;= 0 )\n        {\n            break;\n        }\n    }\n\n    return( 0 );\n}\n</code></pre>\n\n<p>Some caveats exist when using direct IO on Linux.  File system support can be spotty, and implementations of direct IO can be finicky.  You probably have to use a page-aligned buffer to read data in, and you may not be able to read the very last page of the file if it's not a full page.</p>\n"}], "owner": {"reputation": 121, "user_id": 10514679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3365e5831caceffe3259383aefde1c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10514679/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 4, "answer_count": 1, "score": 12, "last_activity_date": 1541689056, "creation_date": 1539733305, "last_edit_date": 1541368644, "question_id": 52845387, "link": "https://stackoverflow.com/questions/52845387/improving-mmap-memcpy-file-read-performance", "title": "Improving mmap memcpy file read performance", "body": "<p>I have an application that sequentially reads data from a file. Some is read directly from a pointer to the <code>mmap</code>ed file and other parts are <code>memcpy</code>ed from the file to another buffer. I noticed poor performance when doing a large <code>memcpy</code> of all the memory that I needed (1MB blocks) and better performance when doing a lot of smaller <code>memcpy</code> calls (In my tests, I used 4KB, the page size, which took 1/3 of the time to run.) I believe that the issue is a very large number of major page faults when using a large <code>memcpy</code>.</p>\n\n<p>I've tried various tuning parameters (<code>MAP_POPUATE</code>, <code>MADV_WILLNEED</code>, <code>MADV_SEQUENTIAL</code>) without any noticeable improvement.</p>\n\n<p>I'm not sure why many small <code>memcpy</code> calls should be faster; it seems counter-intuitive. Is there any way to improve this?</p>\n\n<p>Results and test code follow.</p>\n\n<p>Running on CentOS 7 (linux 3.10.0), default compiler (gcc 4.8.5), reading 29GB file from a RAID array of regular disks.</p>\n\n<p>Running with <code>/usr/bin/time -v</code>:</p>\n\n<p>4KB <code>memcpy</code>:</p>\n\n<pre><code>User time (seconds): 5.43\nSystem time (seconds): 10.18\nPercent of CPU this job got: 75%\nElapsed (wall clock) time (h:mm:ss or m:ss): 0:20.59\nMajor (requiring I/O) page faults: 4607\nMinor (reclaiming a frame) page faults: 7603470\nVoluntary context switches: 61840\nInvoluntary context switches: 59\n</code></pre>\n\n<p>1MB <code>memcpy</code>:</p>\n\n<pre><code>User time (seconds): 6.75\nSystem time (seconds): 8.39\nPercent of CPU this job got: 23%\nElapsed (wall clock) time (h:mm:ss or m:ss): 1:03.71\nMajor (requiring I/O) page faults: 302965\nMinor (reclaiming a frame) page faults: 7305366\nVoluntary context switches: 302975\nInvoluntary context switches: 96\n</code></pre>\n\n<p><code>MADV_WILLNEED</code> did not seem to have much impact on the 1MB copy result.</p>\n\n<p><code>MADV_SEQUENTIAL</code> slowed down the 1MB copy result by so much, I didn't wait for it to finish (at least 7 minutes).</p>\n\n<p><code>MAP_POPULATE</code> slowed the 1MB copy result by about 15 seconds.</p>\n\n<p>Simplified code used for the test:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\n#include &lt;fcntl.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;unistd.h&gt;\n\nint\nmain(int argc, char *argv[])\n{\n  try {\n    char *filename = argv[1];\n\n    int fd = open(filename, O_RDONLY);\n    if (fd == -1) {\n      throw std::runtime_error(\"Failed open()\");\n    }\n\n    off_t file_length = lseek(fd, 0, SEEK_END);\n    if (file_length == (off_t)-1) {\n      throw std::runtime_error(\"Failed lseek()\");\n    }\n\n    int mmap_flags = MAP_PRIVATE;\n#ifdef WITH_MAP_POPULATE\n    mmap_flags |= MAP_POPULATE;  // Small performance degredation if enabled\n#endif\n\n    void *map = mmap(NULL, file_length, PROT_READ, mmap_flags, fd, 0);\n    if (map == MAP_FAILED) {\n      throw std::runtime_error(\"Failed mmap()\");\n    }\n\n#ifdef WITH_MADV_WILLNEED\n    madvise(map, file_length, MADV_WILLNEED);    // No difference in performance if enabled\n#endif\n\n#ifdef WITH_MADV_SEQUENTIAL\n    madvise(map, file_length, MADV_SEQUENTIAL);  // Massive performance degredation if enabled\n#endif\n\n    const uint8_t *file_map_i = static_cast&lt;const uint8_t *&gt;(map);\n    const uint8_t *file_map_end = file_map_i + file_length;\n\n    size_t memcpy_size = MEMCPY_SIZE;\n\n    uint8_t *buffer = new uint8_t[memcpy_size];\n\n    while (file_map_i != file_map_end) {\n      size_t this_memcpy_size = std::min(memcpy_size, static_cast&lt;std::size_t&gt;(file_map_end - file_map_i));\n      memcpy(buffer, file_map_i, this_memcpy_size);\n      file_map_i += this_memcpy_size;\n    }\n  }\n  catch (const std::exception &amp;e) {\n    std::cerr &lt;&lt; \"Caught exception: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "swift"], "answers": [{"comments": [{"owner": {"reputation": 5185, "user_id": 359532, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Ngxi2.jpg?s=128&g=1", "display_name": "Michael Ozeryansky", "link": "https://stackoverflow.com/users/359532/michael-ozeryansky"}, "edited": false, "score": 0, "creation_date": 1548384848, "post_id": 52846808, "comment_id": 95531268, "body": "I was able to do this with CF_ENUM since it&#39;s a C API. I have a custom define that is CF_ENUM when compiling for iOS and defined as something else when compiling for the microcontroller."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1583484095, "post_id": 52846808, "comment_id": 107140027, "body": "<a href=\"https://stackoverflow.com/q/60559599/1187415\">This</a>  may be useful when the enumeration is defined in a \u201cpure\u201d C header."}], "tags": [], "owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "is_accepted": true, "score": 5, "last_activity_date": 1539746243, "creation_date": 1539746243, "answer_id": 52846808, "question_id": 52845357, "link": "https://stackoverflow.com/questions/52845357/how-to-import-c-enum-in-swift/52846808#52846808", "title": "How to import c enum in swift", "body": "<p>When Swift imports usual C-enums, cases are imported as global constants.</p>\n\n<p>As if as follows:</p>\n\n<pre><code>let A = Foo(1)\nlet B = Foo(2)\n</code></pre>\n\n<p>You can use them like this:</p>\n\n<pre><code>var someFoo: Foo = A\n</code></pre>\n\n<p>I'm not sure why these constants are not included in the Generated Interface.</p>\n\n<hr>\n\n<p>If you can touch your .h file and can import some headers for Objective-C classes, you can use the macro <code>NS_ENUM</code>.</p>\n\n<pre><code>typedef NS_ENUM(NSInteger, Bar) {\n    A = 1,\n    B = 2\n};\n</code></pre>\n\n<p>The generated header would be like this:</p>\n\n<pre><code>public enum Bar : Int {\n\n\n    case A\n\n    case B\n}\n</code></pre>\n\n<p>(Generated Interface does not show <code>rawValue</code>s, but they are 1 and 2 respectively as in the original code.)</p>\n\n<p>But I wonder if this can be your option.</p>\n"}], "owner": {"reputation": 5185, "user_id": 359532, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Ngxi2.jpg?s=128&g=1", "display_name": "Michael Ozeryansky", "link": "https://stackoverflow.com/users/359532/michael-ozeryansky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 0, "accepted_answer_id": 52846808, "answer_count": 1, "score": 1, "last_activity_date": 1539746243, "creation_date": 1539733026, "question_id": 52845357, "link": "https://stackoverflow.com/questions/52845357/how-to-import-c-enum-in-swift", "title": "How to import c enum in swift", "body": "<p>When I import my c enum into swift, it becomes a struct and loses the cases. How can I get this to import as an enum in swift?</p>\n\n<p>c code:</p>\n\n<pre><code>enum Foo {\n    A = 1,\n    B = 2\n};\n</code></pre>\n\n<p>Generated Swift:</p>\n\n<pre><code>public struct Foo : Equatable, RawRepresentable {\n\n    public init(_ rawValue: UInt32)\n\n    public init(rawValue: UInt32)\n\n    public var rawValue: UInt32\n}\n</code></pre>\n\n<p>Expected Swift:</p>\n\n<pre><code>enum Foo: UInt32 {\n    case A = 1,\n    case B = 2\n}\n</code></pre>\n"}, {"tags": ["c", "types"], "comments": [{"owner": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 3, "creation_date": 1539732370, "post_id": 52845256, "comment_id": 92606559, "body": "Allow me to reverse the question: <b>why</b> would you do that? Every element in a char array is a char, so that test is pretty pointless. Do you want/need to know whether the element is alphabetic or a number or something like that?"}, {"owner": {"reputation": 19, "user_id": 10431230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468e29a8f5b4c0790e8b80bf3009ea57?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/10431230/learner"}, "reply_to_user": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 0, "creation_date": 1539733098, "post_id": 52845256, "comment_id": 92606714, "body": "yes i want to know  whether its alphabetic or numeric"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1539734079, "post_id": 52845256, "comment_id": 92606912, "body": "Then test that."}, {"owner": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "edited": false, "score": 0, "creation_date": 1539734420, "post_id": 52845256, "comment_id": 92606999, "body": "In the bad old days that may have been a bit of a pain to do (unless you conveniently assumed all text was ascii - then it&#39;s easy), but nowadays the C library includes the functions <code>isalpha</code> and <code>isdigit</code> (amongst others - try <code>man ctype.h</code>) which make it trivial to do the test you want."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "reply_to_user": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "edited": false, "score": 0, "creation_date": 1539736324, "post_id": 52845256, "comment_id": 92607419, "body": "@Roflcopter4 <code>isdigit()</code>, <code>isalpha()</code> and friends have existed ever since the K&amp;R days!"}, {"owner": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1539757716, "post_id": 52845256, "comment_id": 92612768, "body": "@Ken Y-N They probably did. I know nothing other than what I learned messing about with a Unix V6 emulator, in which I&#39;m pretty sure they didn&#39;t exist. But that&#39;s pretty darn early stuff."}], "answers": [{"comments": [{"owner": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "edited": false, "score": 1, "creation_date": 1539733933, "post_id": 52845310, "comment_id": 92606882, "body": "&gt; C; &gt; strongly typed; These are two terms rarely used in the same breath."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "reply_to_user": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "edited": false, "score": 0, "creation_date": 1539734456, "post_id": 52845310, "comment_id": 92607008, "body": "@Roflcopter4: To paraphrase Rev. Dodgson: \u201cWhen I use a type,\u201d Humpty Dumpty said, in rather a scornful tone, \u201cit means just what I choose it to mean\u2014neither more nor less.\u201d \u201cThe question is,\u201d said Alice, \u201cwhether you can make types mean so many different things.\u201d \u201cThe question is,\u201d said Humpty Dumpty, \u201cwhich is to be master\u2014that&#39;s all.\u201d"}, {"owner": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539734635, "post_id": 52845310, "comment_id": 92607051, "body": "@Bob Jarvis I agree with that sentiment completely. I just know that there are many who very much do not agree with that sentiment, and many who can&#39;t seem to mention C and its type system without washing their hands afterwards."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539734854, "post_id": 52845310, "comment_id": 92607100, "body": "Washing their hands? I&#39;d suggest a shower. Hot water. Lots of soap. :-)"}, {"owner": {"reputation": 5219, "user_id": 1166774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2186f597c73ae03edf7912fa5ec93cc7?s=128&d=identicon&r=PG&f=1", "display_name": "LoztInSpace", "link": "https://stackoverflow.com/users/1166774/loztinspace"}, "edited": false, "score": 0, "creation_date": 1539736883, "post_id": 52845310, "comment_id": 92607536, "body": "Still better than JavaScript."}], "tags": [], "owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "is_accepted": false, "score": 0, "last_activity_date": 1539734029, "last_edit_date": 1539734029, "creation_date": 1539732561, "answer_id": 52845310, "question_id": 52845256, "link": "https://stackoverflow.com/questions/52845256/type-checking-in-c/52845310#52845310", "title": "Type checking in C", "body": "<p>C is a statically typed language.  Any variable declared to be a certain type is guaranteed to be that type at run time.</p>\n"}, {"tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": false, "score": 2, "last_activity_date": 1539733372, "creation_date": 1539733372, "answer_id": 52845400, "question_id": 52845256, "link": "https://stackoverflow.com/questions/52845256/type-checking-in-c/52845400#52845400", "title": "Type checking in C", "body": "<p>All the items in a character array are of type char.  Perhaps you mean to check if they are printable characters, in which case you can use <code>if (isprint(char[a])) {...}</code>.  </p>\n\n<p><code>isprint()</code> is defined in <code>&lt;ctype.h&gt;</code> along with other character class tests.</p>\n\n<p>Based on your comment, it looks like you are looking for <code>isalnum()</code></p>\n"}, {"tags": [], "owner": {"reputation": 1025, "user_id": 1683793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384cc6ed9450635fc4189e1a5a840dd5?s=128&d=identicon&r=PG", "display_name": "user1683793", "link": "https://stackoverflow.com/users/1683793/user1683793"}, "is_accepted": false, "score": 1, "last_activity_date": 1539733930, "creation_date": 1539733930, "answer_id": 52845462, "question_id": 52845256, "link": "https://stackoverflow.com/questions/52845256/type-checking-in-c/52845462#52845462", "title": "Type checking in C", "body": "<p>As observed elsewhere, ANYTHING in a char array is a char.  If you want to see about alphas or characters check out isdigit() and isalpha().  </p>\n\n<p>There is a C'ism: If you want to know if a char is any from a list, say \"asdfjkl\" you can run</p>\n\n<pre><code>if(strchr(\"asdfjkl\",chars[a]) != NULL  )\n{\n    oneOfThem();\n}\n</code></pre>\n\n<p>The strchr function returns null if the character is not found. In this case, you don't care which one matches, just if it on the list so check for <code>!= NULL</code>.  If you are a minimalist programmer, you can also type <code>(if(strchr())</code> which will do the same thing.</p>\n"}], "owner": {"reputation": 19, "user_id": 10431230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468e29a8f5b4c0790e8b80bf3009ea57?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/10431230/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2046, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1539735703, "creation_date": 1539732211, "last_edit_date": 1539735703, "question_id": 52845256, "link": "https://stackoverflow.com/questions/52845256/type-checking-in-c", "title": "Type checking in C", "body": "<p>I am coding the following if-statement:</p>\n\n<pre><code>if(chars[a]== char)\n{\n  do sth;\n}\n</code></pre>\n\n<p>My purpose is to test if the element in chars array is a character and if so do something to it. In languages like Python, there is the type function used to find the data type. C doesn't have those. In this case, how can I do something like the above in C?</p>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1539730942, "post_id": 52845040, "comment_id": 92606249, "body": "Note that long is not necessarily 64 bits."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1539742035, "post_id": 52845040, "comment_id": 92608586, "body": "you need <code>1UL &lt;&lt; (sizeof(n)*8-1)</code> <a href=\"https://stackoverflow.com/q/31744305/995714\">bit shifting with unsigned long type produces wrong results</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1539742106, "post_id": 52845040, "comment_id": 92608598, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35119136/is-unsigned-long-int-correct-for-this-operation\">Is unsigned long int correct for this operation?</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539748397, "post_id": 52845040, "comment_id": 92609978, "body": "What output should occur with <code>printbits(0)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539752840, "post_id": 52845119, "comment_id": 92611041, "body": "Ry-, for fun, to cope with those padded <code>unsigned long</code> implementations, (rotting in a computer graveyard), code could use the portable <code>i = ULONG_MAX - ULONG_MAX&#47;2;</code>"}], "tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": false, "score": 4, "last_activity_date": 1539731543, "last_edit_date": 1539731543, "creation_date": 1539731188, "answer_id": 52845119, "question_id": 52845040, "link": "https://stackoverflow.com/questions/52845040/printing-a-long-in-binary-64-bit-representation/52845119#52845119", "title": "Printing a long in binary 64-bit representation", "body": "<ul>\n<li>4 isn\u2019t the right number of bits in a byte</li>\n<li>Even though you\u2019re assigning it to an <code>unsigned long</code>, <code>1 &lt;&lt; \u2026</code> is an <code>int</code>, so you need <code>1UL</code></li>\n<li><code>n&amp;1</code> should be <code>n&amp;i</code></li>\n<li>There\u2019s a missing closing brace</li>\n</ul>\n\n<p>Fixes only:</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt; \n\nvoid printbits(unsigned long n){\n    unsigned long i; \n    i = 1UL&lt;&lt;(sizeof(n)*CHAR_BIT-1);\n    while(i&gt;0){\n         if(n&amp;i)\n              printf(\"1\"); \n         else \n              printf(\"0\"); \n         i &gt;&gt;= 1;\n    }\n}\n\nint main(){\n    unsigned long n=10; \n    printbits(n); \n    printf(\"\\n\"); \n}\n</code></pre>\n\n<p>And if you want to print a 64-bit number specifically, I would hard-code 64 and use <code>uint_least64_t</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1539731413, "post_id": 52845120, "comment_id": 92606347, "body": "You want <code>sizeof(n) * CHAR_BIT</code> (defined in <code>&lt;limits.h&gt;</code>). And if you want a type that&#39;s exactly 64 bits, use <code>uint64_t</code>. If you want at least 64 bits, use <code>unsigned long long</code> or <code>uint_least64_t</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1539731483, "post_id": 52845120, "comment_id": 92606365, "body": "<code>1ULL</code> would be better (<code>1LL &lt;&lt; 63</code> is undefined behaviour)"}], "tags": [], "owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "is_accepted": false, "score": 2, "last_activity_date": 1539748525, "last_edit_date": 1539748525, "creation_date": 1539731188, "answer_id": 52845120, "question_id": 52845040, "link": "https://stackoverflow.com/questions/52845040/printing-a-long-in-binary-64-bit-representation/52845120#52845120", "title": "Printing a long in binary 64-bit representation", "body": "<p>The problem is that <code>i = 1&lt;&lt;(sizeof(n)*4-1)</code> is not correct for a number of reasons.</p>\n\n<ol>\n<li><code>sizeof(n)*4</code> is 32, not 64.  you probably want <code>sizeof(n)*8</code></li>\n<li><code>1&lt;&lt;63</code> may give you overflow because 1 may be 32-bits by default.  You should use <code>1ULL&lt;&lt;(sizeof(n)*8-1)</code></li>\n<li><code>unsigned long</code> is not necessarily 64 bits.  You should use <code>unsigned long long</code></li>\n</ol>\n\n<p>If you want to be extra thorough, use <code>sizeof(n) * CHAR_BIT</code> (defined in <code>&lt;limits.h&gt;</code>).</p>\n\n<p>In general, you should use <code>stdint</code> defines (e.g. <code>uint64_t</code>) whenever possible.</p>\n"}, {"comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1539755383, "post_id": 52845125, "comment_id": 92611867, "body": "There is no recursive call."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1539794329, "post_id": 52845125, "comment_id": 92634136, "body": "Oops, my bad, I renamed the function to be more inline with the name OP chose and forgot to rename the recursive call too. Should be fixed now."}], "tags": [], "owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "is_accepted": false, "score": 0, "last_activity_date": 1539794346, "last_edit_date": 1539794346, "creation_date": 1539731227, "answer_id": 52845125, "question_id": 52845040, "link": "https://stackoverflow.com/questions/52845040/printing-a-long-in-binary-64-bit-representation/52845125#52845125", "title": "Printing a long in binary 64-bit representation", "body": "<p>The following should do what you want:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid printbits(unsigned long number, unsigned int num_bits_to_print)\n{\n    if (number || num_bits_to_print &gt; 0) {\n        printbits(number &gt;&gt; 1, num_bits_to_print - 1);\n        printf(\"%d\", number &amp; 1);\n    }\n}\n</code></pre>\n\n<p>We keep calling the function recursively until either we've printed enough bits, or we've printed the whole number, whichever takes more bits.</p>\n\n<p>wrapping this in another function directly does exactly what you want:</p>\n\n<pre><code>void printbits64(unsigned long number) {\n    printbits(number, 64);\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9274420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a25a5be9198146162e7b74e02abd7d?s=128&d=identicon&r=PG&f=1", "display_name": "pigsploof", "link": "https://stackoverflow.com/users/9274420/pigsploof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1016, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1539794346, "creation_date": 1539730527, "question_id": 52845040, "link": "https://stackoverflow.com/questions/52845040/printing-a-long-in-binary-64-bit-representation", "title": "Printing a long in binary 64-bit representation", "body": "<p>I'm trying to print the binary representation of a long in order to practice bit manipulation and setting various bits in the long for a project I am working on. I successfully can print the bits on ints but whenever I try to print 64 bits of a long the output is screwy. \nHere is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nvoid printbits(unsigned long n){\n    unsigned long i; \n    i = 1&lt;&lt;(sizeof(n)*4-1);\n    while(i&gt;0){\n         if(n&amp;1)\n              printf(\"1\"); \n         else \n              printf(\"0\"); \n         i &gt;&gt;= 1; \n}\n\nint main(){\n    unsigned long n=10; \n    printbits(n); \n    printf(\"\\n\"); \n}\n</code></pre>\n\n<p>My output is 0000000000000000000000000000111111111111111111111111111111111110.\nThanks for help! </p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1539731811, "post_id": 52845032, "comment_id": 92606439, "body": "That actually compiles? You should be getting  lots of warnings at the very least."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1539739320, "post_id": 52845032, "comment_id": 92608056, "body": "Inside your <code>fgets</code> loop, replace your <code>if</code> statement with another loop that does: <code>char *found = str; while (1) { found = strstr(found,search_word); if (found == NULL) break; ++i; }</code>"}, {"owner": {"reputation": 356, "user_id": 7850159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-waMjeDlXzRE/AAAAAAAAAAI/AAAAAAAAAJM/-nICyEJzQxg/photo.jpg?sz=128", "display_name": "sundb", "link": "https://stackoverflow.com/users/7850159/sundb"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1539745907, "post_id": 52845032, "comment_id": 92609404, "body": "@CraigEstey found need move to next char, else will dead loop"}, {"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1539748990, "post_id": 52845032, "comment_id": 92610107, "body": "use strtok, or pos=0; pos=strstr(pos), so that you can count repeated instances on single line."}], "answers": [{"comments": [{"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1539749258, "post_id": 52845370, "comment_id": 92610167, "body": "Good catch on type of &quot;search_word&quot;. The more interesting question is where does scanf put the scanned values? because scanf is interpreting search_word as a char*. As the OP to printf(&quot;search_word %p\\n&quot;,(char*)search_word);"}], "tags": [], "owner": {"reputation": 81, "user_id": 7510090, "user_type": "registered", "profile_image": "https://graph.facebook.com/1195053827244382/picture?type=large", "display_name": "Andersen", "link": "https://stackoverflow.com/users/7510090/andersen"}, "is_accepted": false, "score": 1, "last_activity_date": 1539733551, "last_edit_date": 1539733551, "creation_date": 1539733207, "answer_id": 52845370, "question_id": 52845032, "link": "https://stackoverflow.com/questions/52845032/searching-for-word-in-file-and-add-to-count/52845370#52845370", "title": "Searching for word in file and add to count", "body": "<p>First thing i can see as a potential problem is the variable used in the scanf, you're trying to put an array of char in a char, so instead of using <code>char search_word</code>, use something like  <code>char search_word[32];</code>  this way you're able to read an array of char in this case up to 32 characters. and also another problem you have is the usage of the strstr, the function returns the first time the word is found in a string, meaning that if you are using a string like  <code>\"Hello my name is Jeff. is ...\"</code>and you are using the <code>strstr</code> function to search the word <code>\"is\"</code> the return of the function is the a pointer to <code>\"is Jeff. is ...\"</code> so you need to use to return value until you get a null return and then move to the next line.</p>\n"}, {"comments": [{"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1539749090, "post_id": 52846744, "comment_id": 92610136, "body": "Only incrementing found by 1 brings up interesting question about whether poster intends to count overlapping words... does OP intend that found+=strlen(search_word) (which is constant, so only grab that length once, prior to loop. For example, search for &quot;aaa&quot;, and file contains &quot;...aaaaaaaaa...&quot; - how many &quot;aaa&quot;s appear in the above?"}, {"owner": {"reputation": 356, "user_id": 7850159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-waMjeDlXzRE/AAAAAAAAAAI/AAAAAAAAAJM/-nICyEJzQxg/photo.jpg?sz=128", "display_name": "sundb", "link": "https://stackoverflow.com/users/7850159/sundb"}, "reply_to_user": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1539755267, "post_id": 52846744, "comment_id": 92611835, "body": "@ChuckCottrill This depends on the author&#39;s needs."}], "tags": [], "owner": {"reputation": 356, "user_id": 7850159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-waMjeDlXzRE/AAAAAAAAAAI/AAAAAAAAAJM/-nICyEJzQxg/photo.jpg?sz=128", "display_name": "sundb", "link": "https://stackoverflow.com/users/7850159/sundb"}, "is_accepted": false, "score": 3, "last_activity_date": 1539746084, "last_edit_date": 1539746084, "creation_date": 1539745713, "answer_id": 52846744, "question_id": 52845032, "link": "https://stackoverflow.com/questions/52845032/searching-for-word-in-file-and-add-to-count/52846744#52846744", "title": "Searching for word in file and add to count", "body": "<p>You can use fget instead of scanf</p>\n\n<p>You need to loop strstr a line</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    char search_word[100];\n    printf(\"What word would you like to search for?\");\n    gets(search_word);    // change scanf to gets\n\n    char line[1024];\n    int i = 0;\n    while (fgets(line, sizeof(line), fp)) {\n        char* found = line;\n\n        // After getting a line of characters, loop to find search_word and\n        // go to found empty\n        while ((found = strstr(found, search_word)) != NULL) {\n            i++;\n            found++;    // move found to next char\n        }\n    }\n\n    printf(\"Your word appears %d times.\", i);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9074886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15e4a893fac4f129dce52013395059ca?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Roehrich", "link": "https://stackoverflow.com/users/9074886/sam-roehrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539746084, "creation_date": 1539730477, "question_id": 52845032, "link": "https://stackoverflow.com/questions/52845032/searching-for-word-in-file-and-add-to-count", "title": "Searching for word in file and add to count", "body": "<p>I am attempting to search for a word in a file and add to a counter variable every time it appears in the text. In my research I have not been able to find a solution that works. This is the code block I am using so far. N is a variable used earlier in the code to store input from the user(the program prints a menu with multiple options, search is the first in the list). I have checked that the file is opened properly but when I try to execute this block I get an error that buffer != nullptr. Does anyone see the issue?</p>\n\n<pre><code>if (strcmp(n, \"S\") == 0) {\n            char search_word = NULL;\n            printf(\"What word would you like to search for?\");\n            scanf(\"%s\", search_word);\n            while(fgets(str, sizeof(str), fp)){\n                if ((strstr(str, search_word)) != NULL)\n                    i++;\n            }\n            printf(\"Your word appears %d times.\", &amp;i);\n        }\n</code></pre>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 2, "creation_date": 1539725910, "post_id": 52844374, "comment_id": 92604791, "body": "what flags did you compile with?  Make sure you&#39;re compiling with -O3 on both setups."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1539726016, "post_id": 52844374, "comment_id": 92604840, "body": "<i><code>Compilation of code: &quot;gcc name.c -o name -lm&quot;</code></i> - Why didn&#39;t you enable optimizations? Try with <code>gcc -O2</code>."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1539726039, "post_id": 52844374, "comment_id": 92604848, "body": "<i>&quot;I tried ... some ... options like <code>gcc -corei7</code> etc., but nothing helped&quot;</i> Have you tried <code>-O3</code> (or any <code>-O_</code>)? <code>-march=native</code>? <code>-ffast-math</code>?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1539726382, "post_id": 52844374, "comment_id": 92604967, "body": "With <code>-O3</code>, I get 25 seconds on my system (Ubuntu 18.04, gcc 7.3, x86_64). With <code>-O3 -ffast-math</code> I get 3 seconds. (<code>-ffast-math</code> can break things.)"}, {"owner": {"reputation": 13, "user_id": 4103225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a7691a1462389eafeada895a1fa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Zden\u011bk \u010cervenka", "link": "https://stackoverflow.com/users/4103225/zden%c4%9bk-%c4%8cervenka"}, "edited": false, "score": 0, "creation_date": 1539726953, "post_id": 52844374, "comment_id": 92605139, "body": "Thank you very much guys! This works &quot;-O3 -ffast-math&quot; perfect! I have 4 seconds now. Thats a big difference. I was not aware of this option. Thank you for your time!  You&#39;re good!"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539727392, "post_id": 52844374, "comment_id": 92605261, "body": "Still does not explain the speed <i>difference</i> however.  How fast does it run on Win10 with the same options I wonder?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1539727893, "post_id": 52844374, "comment_id": 92605414, "body": "You should use appropriate types for your variables. <code>i</code>, <code>nq</code> and perhaps <code>x</code> and <code>konec</code> should be integers. Maybe some others as well. You are going on the edge when comparing these numbers while floating point."}, {"owner": {"reputation": 13, "user_id": 4103225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a7691a1462389eafeada895a1fa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Zden\u011bk \u010cervenka", "link": "https://stackoverflow.com/users/4103225/zden%c4%9bk-%c4%8cervenka"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1539728582, "post_id": 52844374, "comment_id": 92605642, "body": "@Eugene Sh. Thank you for comments! I am just an amatuer free time programmer."}, {"owner": {"reputation": 13, "user_id": 4103225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a7691a1462389eafeada895a1fa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Zden\u011bk \u010cervenka", "link": "https://stackoverflow.com/users/4103225/zden%c4%9bk-%c4%8cervenka"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539728698, "post_id": 52844374, "comment_id": 92605675, "body": "@Clifford Now with option &quot;-O3 -ffast-math&quot; is the speed exactly the same 4 seconds on both systems Linux and Windows. Strange thing is, that I have used on Windows the gcc command without any of these options. So it must be preset?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1539731072, "post_id": 52844374, "comment_id": 92606273, "body": "@Zden\u011bk\u010cervenka: gcc is actually a frontend for a number of other programs, so it uses a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Spec-Files.html\" rel=\"nofollow noreferrer\">spec file</a> that defines how those other programs are run.  You can run <code>gcc -dumpspecs</code> on different OSes and compare them (especially the <code>cc1</code> section for C compiler options), or <code>gcc -specs=FILE ...</code> to use a different spec file than the default installed."}, {"owner": {"reputation": 13, "user_id": 4103225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a7691a1462389eafeada895a1fa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Zden\u011bk \u010cervenka", "link": "https://stackoverflow.com/users/4103225/zden%c4%9bk-%c4%8cervenka"}, "edited": false, "score": 0, "creation_date": 1539806250, "post_id": 52844374, "comment_id": 92639716, "body": "Very good. Thank you very much for explanation!"}], "owner": {"reputation": 13, "user_id": 4103225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a7691a1462389eafeada895a1fa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Zden\u011bk \u010cervenka", "link": "https://stackoverflow.com/users/4103225/zden%c4%9bk-%c4%8cervenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 680, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539725975, "creation_date": 1539725839, "last_edit_date": 1539725975, "question_id": 52844374, "link": "https://stackoverflow.com/questions/52844374/very-slow-speed-of-gcc-compiled-c-program-under-linux", "title": "Very slow speed of gcc compiled C-program under Linux", "body": "<p>I have two OS on my PC with i7-3770 @ 3.40 GHz. One OS is latest Linux Kubuntu 18.04, the other OS is Windows 10 Pro running on same HDD.</p>\n\n<p>I have tested a simple funny program written in C language doing some arithmetic calculations from number theory. On Kubuntu compiled with gcc 7.3.0, on Windows compiled with gcc 5.2.0. built by MinGW-W64 project.</p>\n\n<p>The result is amazing, running program was 4-times slower on Linux, than on Windows.</p>\n\n<p>On Windows the elapsed time is just 6 seconds. On Linux is elapsed time 24 seconds! On the same hardware.</p>\n\n<p>I tried on Kubuntu to compile with some CPU specific options like \"gcc -corei7\" etc., but nothing helped. In the program is used \"math.h\" library, so the compilation is done with \"-lm\" on both systems. The source code is the same.</p>\n\n<p>Is there a reason for this slow speed under Linux?</p>\n\n<p>Further more I have compiled the same code also on older 32-bit machine with Core Duo T2250 @ 1.73 GHz under Linux Mint 19 with gcc 7.3.0. The elapsed time was 28 seconds! Not much difference than 64-bit machine running on double frequency under Linux.</p>\n\n<p>The sorce code is below, you can compile it and test it.</p>\n\n<pre><code>/* Program for playing with sigma(n) and tau(n) functions */\n/* Compilation of code: \"gcc name.c -o name -lm\"             */ \n\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\ndouble i, nq, x, zacatek, konec, p;       \ndouble odx, soucet, delitel, celkem, ZM;\nunsigned long cas1, cas2;\n\ni=(double)0; soucet=(double)0; celkem=(double)0; nq=(double)0;\n\nzacatek=(double)1; konec=(double)1000000; x=zacatek;\n\nZM=(double)16 / (double)10;\n\nprintf(\"\\n Program for playing with sigma(n) and tau(n) functions \\n\");\nprintf(\"---------------------------------------------------------\\n\");\nprintf(\"Calculation is running in range from %.0lf to %.0lf\\n\\n\\n\", zacatek, konec);\nprintf(\"Finding numbers which have sigma(n)/n = %.3lf\\n\\n\", ZM);\n\ncas1=time(NULL); \n\n while (x &lt;= konec) {\n  i=1; celkem=0; nq=0;\n  odx=sqrt(x)+1;\n  while (i &lt;= odx) {   \n     if (fmod(x, i)==0) {\n     nq++;\n     celkem=celkem+x/i+i;\n     }\n   i++;\n   }    \n   nq=2*nq-1;\n   if ((odx-floor(odx))==0) {celkem=celkem-odx;}\n   if (fabs(celkem - (ZM*x)) &lt; 0.001) {\n      printf(\"%.0lf has sum of all divisors = %.3lf times the number itself (%.0lf, %.0lf)\\n\", x, ZM, celkem, nq+1);\n      }\n   x++;\n }\n\ncas2=time(NULL);\n\nprintf(\"\\n\\nProgram ended.\\n\\n\");\nprintf(\"Elapsed time %lu seconds.\\n\\n\", cas2-cas1);\n\nreturn (0);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "visual-studio-2012", "programming-languages"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1539725253, "post_id": 52844235, "comment_id": 92604564, "body": "Are you aware of <code>void*</code> or templates?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1539725383, "post_id": 52844235, "comment_id": 92604608, "body": "1.  You mean &quot;signedness&quot; not &quot;sign&quot;.  2.  C and C++ don&#39;t have separate operators for signed and unsigned operations, the behavior is determined by the type.  So it is natural that the type is not just a size (as you want) but also imbues semantics."}, {"owner": {"reputation": 119, "user_id": 2871903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bea4b48368b79d35d9a8c8582d648cb?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysNub", "link": "https://stackoverflow.com/users/2871903/alwaysnub"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1539725664, "post_id": 52844235, "comment_id": 92604708, "body": "@Tas void* works for removing the required sign but now the size isn&#39;t explicit. The size can only be 8-bit and any sized variable can be passed with void*."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1539725809, "post_id": 52844235, "comment_id": 92604761, "body": "What&#39;s unclean about typecasting?"}, {"owner": {"reputation": 119, "user_id": 2871903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bea4b48368b79d35d9a8c8582d648cb?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysNub", "link": "https://stackoverflow.com/users/2871903/alwaysnub"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1539725817, "post_id": 52844235, "comment_id": 92604765, "body": "@BenVoigt I aware C/C++ dont have separate operators for signed and unsigned operations. Read the last part of my post."}, {"owner": {"reputation": 119, "user_id": 2871903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bea4b48368b79d35d9a8c8582d648cb?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysNub", "link": "https://stackoverflow.com/users/2871903/alwaysnub"}, "edited": false, "score": 0, "creation_date": 1539725924, "post_id": 52844235, "comment_id": 92604797, "body": "And seriously? a down vote within 1 sec of posting? did you even read the full post people? I think i bring up an interesting thought at the end of my post!"}, {"owner": {"reputation": 119, "user_id": 2871903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bea4b48368b79d35d9a8c8582d648cb?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysNub", "link": "https://stackoverflow.com/users/2871903/alwaysnub"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1539725969, "post_id": 52844235, "comment_id": 92604821, "body": "@ChristianGibbons nothing unclear about it. just looking for something cleaner. If possible."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1539727231, "post_id": 52844235, "comment_id": 92605217, "body": "You could define two functions, where one uses a typecast to call the other."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1539745385, "post_id": 52844235, "comment_id": 92609290, "body": "You most likely got downvoted for mixing C and C++."}, {"owner": {"reputation": 119, "user_id": 2871903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bea4b48368b79d35d9a8c8582d648cb?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysNub", "link": "https://stackoverflow.com/users/2871903/alwaysnub"}, "edited": false, "score": 0, "creation_date": 1539813234, "post_id": 52844235, "comment_id": 92642600, "body": "Why would that matter? C and C++ are very similar languages! I wanted a solution that i could put into a header file that i could use for both C and C++. Like how writing a C or C++ program on windows (visual studio) uses the same Windows.h file. This project is for developers, not just me. That&#39;s why i was looking for a clean method."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2871903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bea4b48368b79d35d9a8c8582d648cb?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysNub", "link": "https://stackoverflow.com/users/2871903/alwaysnub"}, "edited": false, "score": 0, "creation_date": 1539726985, "post_id": 52844398, "comment_id": 92605153, "body": "Hmm. Yea that could work but not for my particular case cause the function is actually written in assembly and declared in C/C++ and called from there."}, {"owner": {"reputation": 119, "user_id": 2871903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bea4b48368b79d35d9a8c8582d648cb?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysNub", "link": "https://stackoverflow.com/users/2871903/alwaysnub"}, "edited": false, "score": 0, "creation_date": 1539728483, "post_id": 52844398, "comment_id": 92605611, "body": "+1 up-vote for ya since you had an answer that would have worked if the function itself was written in C++"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1539725980, "creation_date": 1539725980, "answer_id": 52844398, "question_id": 52844235, "link": "https://stackoverflow.com/questions/52844235/define-sign-ambiguous-pointer-parameter-for-a-function/52844398#52844398", "title": "Define sign ambiguous pointer parameter for a function", "body": "<p>If the logic for the two types of objects is the same, your best option is to use a function template.</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid MyFunction(T* Var);\n</code></pre>\n\n<p>If you want to restrict the use of the function only for 8-bit types, you can use a <code>static_assert</code> in the implementation.</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid MyFunction(T* Var)\n{\n   static_assert(sizeof(T) == 1, \"Wrong type. Can only deal with 8-bit types.\");\n   ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 2871903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bea4b48368b79d35d9a8c8582d648cb?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysNub", "link": "https://stackoverflow.com/users/2871903/alwaysnub"}, "edited": false, "score": 0, "creation_date": 1539728593, "post_id": 52844660, "comment_id": 92605645, "body": "Thanks!. The _Generic method is probably gonna be the closest i get in these languages."}], "tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": true, "score": 1, "last_activity_date": 1539728814, "last_edit_date": 1539728814, "creation_date": 1539727667, "answer_id": 52844660, "question_id": 52844235, "link": "https://stackoverflow.com/questions/52844235/define-sign-ambiguous-pointer-parameter-for-a-function/52844660#52844660", "title": "Define sign ambiguous pointer parameter for a function", "body": "<p>With C, you have limited options.  You can do the typecasting that you don't like when you call the function:</p>\n\n<pre><code>void MyFunction(unsigned char* Var);\n\nint main(void) {\n    unsigned char Var1 = 5U;\n    signed char Var2 = 5;\n\n    MyFunction(&amp;Var1);\n    MyFunction((unsigned char *)&amp;Var2);\n}\n</code></pre>\n\n<p>you can use <code>void *</code> and typecast in the function itself and just not pass the wrong type of pointer to it:</p>\n\n<pre><code>void MyFunction(void* Var);\n\nint main(void) {\n    unsigned char Var1 = 5U;\n    signed char Var2 = 5;\n\n    MyFunction(&amp;Var1);\n    MyFunction(&amp;Var2);\n}\n</code></pre>\n\n<p>Or if you <em>really</em> want something beyond that, you can use a _Generic macro to automagically typecast it for you.  It may or may not be the \"best\" approach, but I think it will accomplish your goal.</p>\n\n<pre><code>#define MY_FUNCTION_HELPER(X) MyFunction( _Generic((X), \\\n   char *: (unsigned char *)X, \\\n   signed char *: (unsigned char *)X, \\\n   unsigned char *: X \\\n   ) \\\n)\n\nvoid MyFunction(unsigned char *Var);\n\nint main(void) {\n    unsigned char Var1 = 5U;\n    signed char Var2 = 5;\n\n    MY_FUNCTION_HELPER(&amp;Var1);\n    MY_FUNCTION_HELPER(&amp;Var2);\n}\n</code></pre>\n\n<p>The last one works by using the C11-introduced <code>_Generic</code> which allows a form of polymorphism to use different expressions based on the type of a controlling expression.  In this case, if <code>X</code> is <code>char *</code> or <code>signed char *</code>, it will perform a typecast to <code>unsigned char *</code>.  If <code>X</code> is already <code>unsigned char *</code>, it will remain as such.  If <code>X</code> is anything else, it will fail to compile as no other types are accounted for in the generic association list.</p>\n"}], "owner": {"reputation": 119, "user_id": 2871903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bea4b48368b79d35d9a8c8582d648cb?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysNub", "link": "https://stackoverflow.com/users/2871903/alwaysnub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 52844660, "answer_count": 2, "score": -6, "last_activity_date": 1539728814, "creation_date": 1539725105, "question_id": 52844235, "link": "https://stackoverflow.com/questions/52844235/define-sign-ambiguous-pointer-parameter-for-a-function", "title": "Define sign ambiguous pointer parameter for a function", "body": "<p>Is it possible to define a sign ambiguous pointer parameter for a function in C and/or C++?</p>\n\n<p>For example, say i have a function that works on both unsigned and signed types of a 8-Bit variable and the function takes a pointer to the variable to be processed/manipulated.</p>\n\n<p>I know i can typecast with (unsigned char*) or (signed char*) but im looking for something cleaner.</p>\n\n<pre><code>unsigned char Var1;\nsigned char Var2;\n\nvoid MyFunction(unsigned char* Var);\n\nMyFunction(&amp;Var2); // This creates an error\n</code></pre>\n\n<p>With that said i like to bring up the thought i had that languages higher than assembly shouldn't be using names such as BYTE / WORD / DWORD or QWORD to define a variable with an explicit sign type. I say this because these are size operators for assembly and don't actually define a sign. The sign in assembly is picked by the instruction chosen. Yet i see these names used everywhere in C/C++ and defined as unsinged, at least on windows. This seems like a conflict of interest to me...</p>\n"}, {"tags": ["c", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1539782169, "post_id": 52844227, "comment_id": 92626704, "body": "Did you read the man page?  What didn&#39;t you understand?"}], "answers": [{"tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": false, "score": 2, "last_activity_date": 1539725528, "creation_date": 1539725528, "answer_id": 52844318, "question_id": 52844227, "link": "https://stackoverflow.com/questions/52844227/valgrind-in-c-to-find-if-there-is-no-leaks/52844318#52844318", "title": "Valgrind in C to find if there is no leaks", "body": "<p><code>man valgrind</code></p>\n\n<blockquote>\n  <p>-v, --verbose</p>\n  \n  <p>Be more verbose. Gives extra information on various aspects of your program, such as: the shared objects loaded, the suppressions used, the progress of the instrumentation and execution engines, and warnings about\n             unusual behaviour. Repeating the option increases the verbosity level.</p>\n  \n  <p>--leak-check= [default: summary]</p>\n  \n  <p>When enabled, search for memory leaks when the client program finishes. If set to summary, it says how many leaks occurred. <em>If set to full or yes, each individual leak will be shown in detail and/or counted as an error,\n             as specified by the options --show-leak-kinds and --errors-for-leak-kinds.</em></p>\n</blockquote>\n"}], "owner": {"reputation": 45, "user_id": 10480276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54aa3879aa497ba08b764f1dd8d2317?s=128&d=identicon&r=PG&f=1", "display_name": "myadeniboy", "link": "https://stackoverflow.com/users/10480276/myadeniboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1539725528, "creation_date": 1539725067, "question_id": 52844227, "link": "https://stackoverflow.com/questions/52844227/valgrind-in-c-to-find-if-there-is-no-leaks", "title": "Valgrind in C to find if there is no leaks", "body": "<p>Using Valgrind to find if there is no leaks. I found these two commands online but what is the different? Is there a different Valgrind command other than these two that is better/correct? </p>\n\n<pre><code>valgrind --leak-check=yes ./program\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>valgrind --leak-check=full -v ./program\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "char", "uart"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1539722748, "post_id": 52843780, "comment_id": 92603521, "body": "use <code>TX_SEND(char * send)</code>"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1539722898, "post_id": 52843780, "comment_id": 92603568, "body": "Is this going to be run on a system that doesn&#39;t have space for the standard library? In other words, is it not possible to include &quot;string.h&quot; and call strlen() to get the length of the string passed in?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1539722985, "post_id": 52843780, "comment_id": 92603611, "body": "he&#39;s got strcat in there, so i supposed strlen is fine too"}, {"owner": {"reputation": 3, "user_id": 10515254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07b598b84268b6f756b8e980f12e64b?s=128&d=identicon&r=PG&f=1", "display_name": "SomeBodyElse", "link": "https://stackoverflow.com/users/10515254/somebodyelse"}, "edited": false, "score": 0, "creation_date": 1539725120, "post_id": 52843780, "comment_id": 92604514, "body": "This is for a raspberry pi, I have plenty of space for libraries, is strlen() for constant strings or for string arrays?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10515254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07b598b84268b6f756b8e980f12e64b?s=128&d=identicon&r=PG&f=1", "display_name": "SomeBodyElse", "link": "https://stackoverflow.com/users/10515254/somebodyelse"}, "edited": false, "score": 0, "creation_date": 1539725683, "post_id": 52843851, "comment_id": 92604715, "body": "Thanks for this, I will read about these functions to better understand them.  I like the char *send, I had no idea how to refer to data &quot;string1&quot; as input."}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 0, "last_activity_date": 1539722956, "creation_date": 1539722956, "answer_id": 52843851, "question_id": 52843780, "link": "https://stackoverflow.com/questions/52843780/pointers-and-char-arrays-from-strings/52843851#52843851", "title": "Pointers and char arrays from strings", "body": "<p>i think you want</p>\n\n<pre><code>int TX_SEND(char *send)\n{\n\n\n    int n = write(fd,send,strlen(send));\n    if (n &lt; 0) {\n            perror(\"Write failed - \");\n            return -1;\n    }\n    return(0);\n}\n</code></pre>\n\n<p>you cannot tack on \\n to send with strcat. I would add it in the calling function, or declare an intermediate buffer and sprintf to it </p>\n\n<p>like this</p>\n\n<pre><code>int TX_SEND(char *send)\n{\n    char buff[50]; // i dont know a good max size\n    snprintf(buff, sizeof(buff), \"%s\\n\", send);\n\n    int n = write(fd,buff,strlen(buff));\n    if (n &lt; 0) {\n            perror(\"Write failed - \");\n            return -1;\n    }\n    return(0);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10515254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07b598b84268b6f756b8e980f12e64b?s=128&d=identicon&r=PG&f=1", "display_name": "SomeBodyElse", "link": "https://stackoverflow.com/users/10515254/somebodyelse"}, "edited": false, "score": 0, "creation_date": 1539725473, "post_id": 52844144, "comment_id": 92604641, "body": "Thank you so much for making this plain for me I had a vague idea about 4, 6 and 7 but the rest is new for me."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1539724501, "creation_date": 1539724501, "answer_id": 52844144, "question_id": 52843780, "link": "https://stackoverflow.com/questions/52843780/pointers-and-char-arrays-from-strings/52844144#52844144", "title": "Pointers and char arrays from strings", "body": "<p>I'm not going to go through your code line-by-line, but I urge you to focus on these facts:</p>\n\n<ol>\n<li>chars are chars and strings are strings, and never the twain shall meet.  (They're totally different.)</li>\n<li>'x' is a character constant.</li>\n<li>\"x\" is a string constant.</li>\n<li>A string is an array of characters (terminated by <code>'\\0'</code>).</li>\n<li>When you mention an array (including a string) in a context where you need its value, what you get is a pointer to the array's first element.</li>\n<li>When you put a <code>&amp;</code> in front of something, what you get is a pointer to that something.</li>\n<li>When you put a <code>*</code> in front of a pointer, what you get is the thing that the pointer points to.</li>\n</ol>\n\n<p>Putting this together, we could write</p>\n\n<pre><code>char str[] = \"xyz\";\nchar *p = str;       /* per rule 5, this is fine, and p gets a pointer to str's first element */\nchar c = *p;         /* per rule 7, c gets the first character of str, which is 'x' */\nprintf(\"%c\\n\", c);\n</code></pre>\n\n<p>If you're just starting with C, you may not have come across rule 5 yet.  It will probably surprise you at first.  Learn it well, though: you'll never understand arrays and pointers in C without it.</p>\n"}], "owner": {"reputation": 3, "user_id": 10515254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07b598b84268b6f756b8e980f12e64b?s=128&d=identicon&r=PG&f=1", "display_name": "SomeBodyElse", "link": "https://stackoverflow.com/users/10515254/somebodyelse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 52843851, "answer_count": 2, "score": -2, "last_activity_date": 1539758843, "creation_date": 1539722604, "last_edit_date": 1539758843, "question_id": 52843780, "link": "https://stackoverflow.com/questions/52843780/pointers-and-char-arrays-from-strings", "title": "Pointers and char arrays from strings", "body": "<p>Hi I have been reading for hours and still can't grasp the conversions between </p>\n\n<pre><code>{\n    char i =\"adf\";\n    char foo[];\n    char bar[256];\n}\n</code></pre>\n\n<p>and adding <code>*</code> and <code>&amp;</code> makes it more confusing</p>\n\n<p>I have some code that is working.</p>\n\n<pre><code>int TX_SEND(char send[])\n{\n    unsigned char *p_tx_buffer;\n    p_tx_buffer = &amp;send[0];\n    strcat(send, \"\\r\");\n    // Write to the port\n\n    int n = write(fd,&amp;send[0],3);\n    if (n &lt; 0) {\n        perror(\"Write failed - \");\n        return -1;\n    }\n    return(0);\n}\n</code></pre>\n\n<p>code is working but I need help with 2 parts.  </p>\n\n<ol>\n<li>I want to be able to run this function like kind of like <code>printf IE TX_SEND(\"AT+CGMSD=STUFF\");</code> but I am stuck</li>\n</ol>\n\n<p>but before hand I do this alot.</p>\n\n<pre><code> char txsend[] = \"at\";\n TX_SEND(txsend);\n</code></pre>\n\n<ol start=\"2\">\n<li>Also inside my <code>TX_WRITE()</code> I am using <code>write(fd,&amp;send[0],3)</code>, but it is hardcoded to send 3 bytes from <code>send[]</code>. I want this to be dynamic so I can just send strings at any length (realistically they will be less than 300 ASCII chars always).  I tried to do something with a pointer in there but gave up (<code>*p_tx_buffer</code> was my beginning attempt).</li>\n</ol>\n"}, {"tags": ["c", "binary"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539722186, "post_id": 52843664, "comment_id": 92603306, "body": "Your code is too complex with that many nested <code>for</code> loops!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1539724567, "post_id": 52843664, "comment_id": 92604275, "body": "What&#39;s your input? What is the file format?"}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1539734638, "post_id": 52843664, "comment_id": 92607053, "body": "I edited your post to make it more comprehensible. Feel free to change it if I did something wrong."}], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1539724190, "post_id": 52843822, "comment_id": 92604103, "body": "I don&#39;t believe <code>0b10000000</code> et al. is a standard numerical format in C."}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1539724370, "post_id": 52843822, "comment_id": 92604184, "body": "@ChristianGibbons yeah that&#39;s a built-in GCC/Clang extension."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539732675, "post_id": 52843822, "comment_id": 92606636, "body": "Not exactly what I need... Like there are many numbers data from data.txt to generating number into binary with stars..."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539732835, "post_id": 52843822, "comment_id": 92606665, "body": "60:   ****    66:  *    *  128: *        128: *        128: *         66:  *    *   60:   ****     0:          124:  *****   130: *     *  128: *        124:  *****     2:       *  130: *     *  124:  *****     0:          254: *******  128: *        128: *        252: ******     2:       *    2:       *  252: ******     0:          124:  *****   134: *    **  138: *   * *  146: *  *  *  162: * *   *  194: **    *  124:  *****     0:          124:  *****   134: *    **  138: *   * *  146: *  *  *  162: * *   *  194: **    *  124:  *****"}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "reply_to_user": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539732848, "post_id": 52843822, "comment_id": 92606669, "body": "@MikeODell wait... is the data.txt a long list of numbers?"}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539732849, "post_id": 52843822, "comment_id": 92606670, "body": "From data.txt I created."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539732885, "post_id": 52843822, "comment_id": 92606676, "body": "Yes, sir.. That&#39;s what I meant. Sorry for the confusion @Marco Bonelli"}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539734728, "post_id": 52843822, "comment_id": 92607079, "body": "Made another answer so you can see it."}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "reply_to_user": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539734977, "post_id": 52843822, "comment_id": 92607129, "body": "@MikeODell ok, edited again. Try it out now., and be careful when copying."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539735308, "post_id": 52843822, "comment_id": 92607202, "body": "Sorry for another answers but I&#39;m new to Stackoverflow but THANK YOU THANk you!"}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "reply_to_user": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "edited": false, "score": 0, "creation_date": 1539735365, "post_id": 52843822, "comment_id": 92607222, "body": "@MikeODell You&#39;re welcome. If my answer solved your problem don&#39;t forget to click the check mark under the vote buttons to accept it, you can also upvote it if you want."}], "tags": [], "owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "is_accepted": true, "score": 0, "last_activity_date": 1539734700, "last_edit_date": 1539734700, "creation_date": 1539722853, "answer_id": 52843822, "question_id": 52843664, "link": "https://stackoverflow.com/questions/52843664/convert-numbers-from-a-file-to-binary-notation/52843822#52843822", "title": "Convert numbers from a file to binary notation", "body": "<p>You'll need to use <code>scanf()</code> to get the numbers as input, and then print their binary representation. Keep scanning until <code>scanf()</code> returns <code>EOF</code>, which means that you have reached the end of the input.</p>\n\n<p>Here's what you're looking for:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int i;\n\n    while (scanf(\"%d\", &amp;i) != EOF) {\n        printf(\"%3d: \", i);\n        printf(i &amp; 128 ? \"*\" : \" \");\n        printf(i &amp;  64 ? \"*\" : \" \");\n        printf(i &amp;  32 ? \"*\" : \" \");\n        printf(i &amp;  16 ? \"*\" : \" \");\n        printf(i &amp;   8 ? \"*\" : \" \");\n        printf(i &amp;   4 ? \"*\" : \" \");\n        printf(i &amp;   2 ? \"*\" : \" \");\n        printf(i &amp;   1 ? \"*\" : \" \");\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>After compiling, call the program from a shell like this:</p>\n\n<pre><code>./program &lt; data.txt\n</code></pre>\n\n<hr>\n\n<p>Example input file <code>data.txt</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>234\n2\n221\n24\n89\n22\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>234: *** * * \n  2:       * \n221: ** *** *\n 24:    **   \n 89:  * **  *\n 22:    * ** \n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 52843822, "answer_count": 1, "score": 1, "last_activity_date": 1539734700, "creation_date": 1539722039, "last_edit_date": 1539733636, "question_id": 52843664, "link": "https://stackoverflow.com/questions/52843664/convert-numbers-from-a-file-to-binary-notation", "title": "Convert numbers from a file to binary notation", "body": "<p>I have a program to convert numbers from 0 to 255 into binary notation using spaces and asterisks. I want to use it to convert numbers from a <code>.txt</code> file into their binary notation, something like this:</p>\n\n <pre class=\"lang-none prettyprint-override\"><code>./binary &lt; binaryData.txt\n 60:   ****\n 66:  *    *\n128: *\n...\n</code></pre>\n\n<p>How can I accomplish this?</p>\n\n<p>This is the code I've got so far, but it doesn't any input:</p>\n\n<pre><code>int main(void) {\n    int a, b, c, d, e, f, g, h;\n\n    int v = 0;\n    //printf(\"%d: \", v);\n\n    for (a = 0; a &lt; 2; a++) {\n        for (b = 0; b &lt; 2; b++) {\n            for (c = 0; c &lt; 2; c++) {\n                for (d = 0; d &lt; 2; d++) {\n                    for (e = 0; e &lt; 2; e++) {\n                        for (f = 0; f &lt; 2; f++) {\n                            for (g = 0; g &lt; 2; g++) {\n                                for (h = 0; h &lt; 2; h++) {\n                                    printf(\"%3d: \", v);\n\n                                    if (a) printf(\"*\");\n                                    else printf(\" \");\n\n                                    if (b) printf(\"*\");\n                                    else printf(\" \");\n\n                                    if (c) printf(\"*\");\n                                    else printf(\" \");\n\n                                    if (d) printf(\"*\");\n                                    else printf(\" \");\n\n                                    if (e) printf(\"*\");\n                                    else printf(\" \");\n\n                                    if (f) printf(\"*\");\n                                    else printf(\" \");\n\n                                    if (g) printf(\"*\");\n                                    else printf(\" \");\n\n                                    if (h) printf(\"*\");\n                                    else printf(\" \");\n\n                                    printf(\"\\n\");\n                                    v++;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1539722035, "post_id": 52843642, "comment_id": 92603229, "body": "Small tip: instead using 9 switch cases you can directly convert between grid numbers and indices with some modulo math"}, {"owner": {"reputation": 47, "user_id": 9342019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c61e4eb01c059eae41db34c2a7b52d9a?s=128&d=identicon&r=PG", "display_name": "Michael Bonnet", "link": "https://stackoverflow.com/users/9342019/michael-bonnet"}, "reply_to_user": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1539722097, "post_id": 52843642, "comment_id": 92603261, "body": "@meowgoesthedog the assignment requires switch statements, so I&#39;ll keep them in my submitted file, but I&#39;m curious to know how that would work."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1539722172, "post_id": 52843642, "comment_id": 92603300, "body": "It seems like you expect execution to jump from the end of an <code>if</code> statement in one of the other cases, to the <code>default</code> case? That isn&#39;t how switch...case works.  The <code>default</code> case is only entered if none of the other <code>case:</code> cases were entered."}, {"owner": {"reputation": 573, "user_id": 8168483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c739c33f9cbd40c31fed10707f1a8e88?s=128&d=identicon&r=PG&f=1", "display_name": "kerrytazi", "link": "https://stackoverflow.com/users/8168483/kerrytazi"}, "edited": false, "score": 0, "creation_date": 1539722249, "post_id": 52843642, "comment_id": 92603328, "body": "add <code>else</code> statement for each of your <code>if</code> in <code>switch</code>. that will be your error"}, {"owner": {"reputation": 47, "user_id": 9342019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c61e4eb01c059eae41db34c2a7b52d9a?s=128&d=identicon&r=PG", "display_name": "Michael Bonnet", "link": "https://stackoverflow.com/users/9342019/michael-bonnet"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1539722689, "post_id": 52843642, "comment_id": 92603495, "body": "@M.M how would I implement the content of the <code>default</code> case in each case to avoid skipping? I tried just copypasting the content of <code>default</code> inside an else statement tagged on to every case&#39;s <code>if</code> but it made things super wonky. Edit: I put everything inside brackets on each else statement and it works perfectly now."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1539722960, "post_id": 52843642, "comment_id": 92603599, "body": "@SOMEK you could tag on an <code>else invalid_move = true;</code> or something like that to each <code>if</code>, and then have the error message case after the loop where you test the <code>invalid_move</code> variable, which would avoid having quite so much copy and pasting"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539723836, "post_id": 52843642, "comment_id": 92603948, "body": "The only thing in the <code>case</code> statement should be assigning a value to <code>i</code> and <code>j</code>. Then you can check the value <code>ttt[i][j]</code> to determine whether someone already played there, and either display an error and loop back to get a new input, or make that player&#39;s move if the input is valid. You should be running the same code whatever the values of <code>i</code> and <code>j</code> are."}, {"owner": {"reputation": 47, "user_id": 9342019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c61e4eb01c059eae41db34c2a7b52d9a?s=128&d=identicon&r=PG", "display_name": "Michael Bonnet", "link": "https://stackoverflow.com/users/9342019/michael-bonnet"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539724479, "post_id": 52843642, "comment_id": 92604231, "body": "@TimRandall I don&#39;t really understand what you&#39;re trying to say. Though the instructions said to use i and j to make the array thing happen, I wasn&#39;t able to figure it out and so just manually created the values. I&#39;m still trying to figure out how to do it."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539724902, "post_id": 52843642, "comment_id": 92604423, "body": "Instead of code that says <code>if (ttt[2][1] == &#39;8&#39;) {ttt[2][1] = mark;}</code> you want something more like <code>i=2;j=1;... if (ttt[i][j] == choice) {ttt[i][j] = mark;}else{printf(&quot;Invalid...</code> Just put a value of 0, 1, or 2 into <code>i</code> and <code>j</code> and use the variables where your current code has numbers"}], "answers": [{"comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539725619, "post_id": 52844315, "comment_id": 92604694, "body": "Isn&#39;t this <code>if (ttt[(choice - 1) &#47; 3][(choice - 1) % 3] == &#39;0&#39; + choice) { ttt[choice&#47;3][choice%3] = mark; okay = 1; }</code> simpler ?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1539725942, "post_id": 52844315, "comment_id": 92604810, "body": "@KamilCuk From the top comments [AFAICT], OP <i>must</i> use the <code>switch</code>, so I left it in. But, yes, it&#39;s a bit verbose/ugly."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539727161, "post_id": 52844315, "comment_id": 92605191, "body": "@KamilCuk Since OP wanted [as extra credit], a solution similar to yours, I&#39;ve added one. It requires a range check on <code>choice</code> which you didn&#39;t have [and was not required with the <code>switch</code>]. Your indexing was correct for the <code>if</code> but was incorrect for the assignment. I fixed that. And, I predecremented <code>choice</code> so the code could be simplified."}, {"owner": {"reputation": 47, "user_id": 9342019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c61e4eb01c059eae41db34c2a7b52d9a?s=128&d=identicon&r=PG", "display_name": "Michael Bonnet", "link": "https://stackoverflow.com/users/9342019/michael-bonnet"}, "edited": false, "score": 0, "creation_date": 1539730389, "post_id": 52844315, "comment_id": 92606125, "body": "@CraigEstey what does predecrementing and adding &#39;1&#39; to choice do for the calculations?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1539730894, "post_id": 52844315, "comment_id": 92606230, "body": "Kamilcuk&#39;s <code>if</code> and assignment used [or <i>should</i> have used] <code>choice - 1</code> in <i>four</i> places. By predecrementing, we can replace those with <code>choice</code>. <code>&#39;1&#39;</code> compensates for the predecrement when the original value was needed"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 1, "last_activity_date": 1539726937, "last_edit_date": 1539726937, "creation_date": 1539725510, "answer_id": 52844315, "question_id": 52843642, "link": "https://stackoverflow.com/questions/52843642/creating-tic-tac-toe-in-c-array-not-showing-changes-not-returning-error-messa/52844315#52844315", "title": "Creating Tic-Tac-Toe in C - array not showing changes, not returning error messages", "body": "<p>Try adding an extra boolean variable and moving the error message <em>outside</em> of the <code>switch</code>:</p>\n\n<pre><code>int okay = 0;\n\nswitch (choice) {\ncase 1:\n    if (ttt[0][0] == '1') {\n        ttt[0][0] = mark;\n        okay = 1;\n    }\n    break;\n\ncase 2:\n    if (ttt[0][1] == '2') {\n        ttt[0][1] = mark;\n        okay = 1;\n    }\n    break;\n\ncase 3:\n    if (ttt[0][2] == '3') {\n        ttt[0][2] = mark;\n        okay = 1;\n    }\n    break;\n\ncase 4:\n    if (ttt[1][0] == '4') {\n        ttt[1][0] = mark;\n        okay = 1;\n    }\n    break;\n\ncase 5:\n    if (ttt[1][1] == '5') {\n        ttt[1][1] = mark;\n        okay = 1;\n    }\n    break;\n\ncase 6:\n    if (ttt[1][2] == '6') {\n        ttt[1][2] = mark;\n        okay = 1;\n    }\n    break;\n\ncase 7:\n    if (ttt[2][0] == '7') {\n        ttt[2][0] = mark;\n        okay = 1;\n    }\n    break;\n\ncase 8:\n    if (ttt[2][1] == '8') {\n        ttt[2][1] = mark;\n        okay = 1;\n    }\n    break;\n\ncase 9:\n    if (ttt[2][2] == '9') {\n        ttt[2][2] = mark;\n        okay = 1;\n    }\n    break;\n}\n\nif (! okay) {\n    printf(\"Invalid input. Please choose and type a number 1-9 corresponding to a position that is not already taken.\\n\");\n    printf(\"Press any key to continue.\\n\");\n    player--;\n    getch();\n}\n</code></pre>\n\n<hr>\n\n<p>With a bit of trickery, we can make this a bit more compact:</p>\n\n<pre><code>int savemark = mark;\n\nswitch (choice) {\ncase 1:\n    if (ttt[0][0] == '1') {\n        ttt[0][0] = mark++;\n    }\n    break;\n\ncase 2:\n    if (ttt[0][1] == '2') {\n        ttt[0][1] = mark++;\n    }\n    break;\n\ncase 3:\n    if (ttt[0][2] == '3') {\n        ttt[0][2] = mark++;\n    }\n    break;\n\ncase 4:\n    if (ttt[1][0] == '4') {\n        ttt[1][0] = mark++;\n    }\n    break;\n\ncase 5:\n    if (ttt[1][1] == '5') {\n        ttt[1][1] = mark++;\n    }\n    break;\n\ncase 6:\n    if (ttt[1][2] == '6') {\n        ttt[1][2] = mark++;\n    }\n    break;\n\ncase 7:\n    if (ttt[2][0] == '7') {\n        ttt[2][0] = mark++;\n    }\n    break;\n\ncase 8:\n    if (ttt[2][1] == '8') {\n        ttt[2][1] = mark++;\n    }\n    break;\n\ncase 9:\n    if (ttt[2][2] == '9') {\n        ttt[2][2] = mark++;\n    }\n    break;\n}\n\nif (mark == savemark) {\n    printf(\"Invalid input. Please choose and type a number 1-9 corresponding to a position that is not already taken.\\n\");\n    printf(\"Press any key to continue.\\n\");\n    player--;\n    getch();\n}\n</code></pre>\n\n<hr>\n\n<p>You mentioned that you <em>must</em> use a <code>switch</code> but expressed the desire to see the more compact solution. So, here's a way:</p>\n\n<pre><code>int okay = 0;\n\ndo {\n    if (choice &lt; 1)\n        break;\n\n    if (choice &gt; 9)\n        break;\n\n    choice -= 1;\n\n    if (ttt[choice / 3][choice % 3] == ('1' + choice)) {\n        ttt[choice / 3][choice % 3] = mark;\n        okay = 1;\n    }\n} while (0);\n\nif (! okay) {\n    printf(\"Invalid input. Please choose and type a number 1-9 corresponding to a position that is not already taken.\\n\");\n    printf(\"Press any key to continue.\\n\");\n    player--;\n    getch();\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9342019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c61e4eb01c059eae41db34c2a7b52d9a?s=128&d=identicon&r=PG", "display_name": "Michael Bonnet", "link": "https://stackoverflow.com/users/9342019/michael-bonnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 52844315, "answer_count": 1, "score": 1, "last_activity_date": 1539726937, "creation_date": 1539721925, "question_id": 52843642, "link": "https://stackoverflow.com/questions/52843642/creating-tic-tac-toe-in-c-array-not-showing-changes-not-returning-error-messa", "title": "Creating Tic-Tac-Toe in C - array not showing changes, not returning error messages", "body": "<p>I am trying to create a tic-tac-toe game in C. </p>\n\n<p>My instructions are as follows:</p>\n\n<p>Write a C program that lets two people play tic-tac-toe. Use a global array: <code>char ttt[3][3];</code> to represent the board state, and globals for the player (a char to hold X or O or whatever you characters you want), i and j integers for indexes, and an integer to count the number of moves completed. Show the game board for each move two characters for the players with a key for the user to type one character or digit to say what spot to take in the board. At the end of a game, say who won or that it is a tie. Have at least the functions to print the board, get a valid move, and check for a win; do use printf, scanf, if-else, switch (to find indexes into ttt) while, for.</p>\n\n<p>My code is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\n// Global array for the board\n\nchar ttt[3][3] = {\n    {'1', '2', '3'},\n    {'4', '5', '6'},\n    {'7', '8', '9'}\n\n};\n\nvoid PrintTheBoard() { // Print the board as it currently is\n\n    printf(\"| %c | | %c | | %c |\\n\", ttt[0][0], ttt[0][1], ttt[0][2]);\n    printf(\"| %c | | %c | | %c |\\n\", ttt[1][0], ttt[1][1], ttt[1][2]);\n    printf(\"| %c | | %c | | %c |\\n\", ttt[2][0], ttt[2][1], ttt[2][2]);\n\n}\n\n// Check for a win\n\nint CheckForWin() {\n\n    // Checks for horizontal win conditions\n\n    if (ttt[0][0] == ttt[0][1] &amp;&amp; ttt[0][1] == ttt[0][2])\n        return 1;\n    else if (ttt[1][0] == ttt[1][1] &amp;&amp; ttt[1][1] == ttt[1][2])\n        return 1;\n    else if (ttt[2][0] == ttt[2][1] &amp;&amp; ttt[2][1] == ttt[2][2])\n        return 1;\n\n    // Checks for vertical wins\n\n    else if (ttt[0][0] == ttt[1][0] &amp;&amp; ttt[1][0] == ttt[2][0])\n        return 1;\n    else if (ttt[0][1] == ttt[1][1] &amp;&amp; ttt[1][1] == ttt[2][1])\n        return 1;\n    else if (ttt[0][2] == ttt[1][2] &amp;&amp; ttt[1][2] == ttt[2][2])\n        return 1;\n\n    // Checks for diagonal wins\n\n    else if (ttt[0][0] == ttt[1][1] &amp;&amp; ttt[1][1] == ttt[2][2])\n        return 1;\n    else if (ttt[0][2] == ttt[1][1] &amp;&amp; ttt[1][1] == ttt[2][0])\n        return 1;\n\n    else if (ttt[0][0] != '1' &amp;&amp; ttt[0][1] != '2' &amp;&amp; ttt[0][2] != '3' &amp;&amp;\n             ttt[1][0] != '4' &amp;&amp; ttt[1][1] != '5' &amp;&amp; ttt[1][2] != '6' &amp;&amp;\n             ttt[2][0] != '7' &amp;&amp; ttt[2][1] != '8' &amp;&amp; ttt[2][2] != '9')\n        return 2;\n    else\n        return 0;\n\n}\n\nint main() { // The function below gets a move, validates it, and keep tracks of the # of moves made.\n\n    int choice;\n    int player = 1;\n    int i;\n    int counter = 0;\n    char mark;\n    int isValid;    \n\n    // Gets user input\n\n    do {\n\n    PrintTheBoard();\n\n    player = (player % 2) ? 1 : 2;\n\n    printf(\"Player %d, enter a number:  \", player);\n    scanf(\"%d\", &amp;choice);\n\n    // Determines what mark to make, depending on the current player by way of \"if current player is player 1, use X, otherwise, use O\"\n\n    mark = (player == 1) ? 'X' : 'O';\n\n    /*\n\n    The below switch function is a bit convoluted. Depending on the value of the \"choice\" variable (1-9, chosen by the active player\n    and corresponding to a position on the board), the value is checked for position validity by checking if the position in the\n    array corresponding to the choice still has its original numeral value, which indicates the spot is not taken.\n\n    If it still has that original value, the position is assigned an X or an O depending on the current player.\n\n    If the spot is taken, indicated by the value not being equal to its original numeral, the player is told that the position is\n    invalid.\n\n    If the player does not choose a valid case, the player is informed of this and told what to do.\n\n    */\n\n    switch(choice) {\n\n        case 1:\n            if (ttt[0][0] == '1') {\n                ttt[0][0] = mark;\n            }\n\n        break;\n\n        case 2:\n            if (ttt[0][1] == '2') {\n                ttt[0][1] = mark;\n            }\n\n        break;\n\n        case 3:\n            if (ttt[0][2] == '3') {\n                ttt[0][2] = mark;\n            }\n\n        break;\n\n        case 4:\n            if (ttt[1][0] == '4') {\n                ttt[1][0] = mark;\n            }\n\n        break;\n\n        case 5:\n            if (ttt[1][1] == '5') {\n                ttt[1][1] = mark;\n            }\n\n        break;\n\n        case 6:\n            if (ttt[1][2] == '6') {\n                ttt[1][2] = mark;\n            }\n\n        break;\n\n        case 7:\n            if (ttt[2][0] == '7') {\n                ttt[2][0] = mark;\n        }\n        break;\n\n        case 8:\n            if (ttt[2][1] == '8') {\n                ttt[2][1] = mark;\n            }\n\n        break;\n\n        case 9:\n            if (ttt[2][2] == '9') {\n                ttt[2][2] = mark;\n            }\n        break;\n\n        default:\n            printf(\"Invalid input. Please choose and type a number 1-9 corresponding to a position that is not already taken.\\n\");\n            printf(\"Press any key to continue.\\n\");\n            player--;\n            getch();\n\n        }\n\n\n    i = CheckForWin();\n\n\n    if (i != 1 &amp;&amp; i != 2)\n        player++;\n\n    } while (i == 0);\n\n    PrintTheBoard();\n\n    if (i == 1) \n        printf(\"Player %d wins!\", player);\n    else\n        printf(\"The game is a draw!\");\n\n}\n</code></pre>\n\n<p>My issue is that the error message is not printed when the two players choose the same spot. The program then goes to the next players turn, effectively skipping the player who chose an occupied spot. The player who occupied the spot in question keeps the spot.</p>\n\n<p>Furthermore, I don't really understand how to use i and j integers to fill out the indexes. When I try code blocks previously used for this, tons of errors show up.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c", "embedded", "gnu-make"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1539722697, "post_id": 52843597, "comment_id": 92603502, "body": "Unclear what&#39;s going on with the <code>else</code> related error, but your compilation clearly doesn&#39;t know where <code>platform.h</code> is. You need to tell the compiler where to search for it since it&#39;s in a subfolder."}, {"owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "edited": false, "score": 0, "creation_date": 1539722830, "post_id": 52843597, "comment_id": 92603544, "body": "sources.mk has some defines in there for the includes, but its not added to the CFLAGS, so to find the includes at least you will need to add $(INCLUDES) to the CFLAGS variable"}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 1, "creation_date": 1539723139, "post_id": 52843597, "comment_id": 92603675, "body": "There&#39;s no &quot;else&quot; at line 32 of the Makefile in your GitHub, and there&#39;s no line 61 at all, so clearly the output you&#39;re showing is not from running <code>make</code> with that makefile."}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539727486, "post_id": 52843597, "comment_id": 92605302, "body": "sorry for that madscientist, I edited the error, and made sure github and error are matching and uptodate with code."}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "reply_to_user": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "edited": false, "score": 0, "creation_date": 1539727515, "post_id": 52843597, "comment_id": 92605309, "body": "@lostbard I tried this and it didn&#39;t work"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539727931, "post_id": 52843597, "comment_id": 92605424, "body": "You should place all information necessary to answer the question in the question - external links to transient information does not make for a good SO question. The error message is emitted by the C pre-processor and is nothing to to with make.  The command line does not include any <code>-I&lt;path&gt;</code> directives.  For <code>platform.h</code> in this case at least you need <code>-I .&#47;include&#47;common</code>, but there are other headers in other paths that will also need resolving."}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539728207, "post_id": 52843597, "comment_id": 92605516, "body": "@Clifford ask for any information and I will give it, as I don&#39;t know what kind of information is needed. the     -I./include/common is added in the variable INCLUDES in sources.mk, and even when I copy platform.h to the main repo directory it doesn&#39;t compile. any thoughts?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539728575, "post_id": 52843597, "comment_id": 92605636, "body": "Being in INCLUDES does not solve the problem - it is not magic; you have to use the macro to build the command line.  Clearly the <code>arm-none-eabi ...</code> command issued by <code>make</code> does not use <code>INCLUDES</code>.  To be clear <code>make</code> is not responsible for finding the header file; it simply emits the build commands - it is the pre-processor (executed by the compiler driver) that is failing to find the header."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539728753, "post_id": 52843597, "comment_id": 92605695, "body": "The information necessary here in this case is the <code>makefile</code> and <code>sources.mk</code> content."}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539728936, "post_id": 52843597, "comment_id": 92605752, "body": "they are available and organized on the hub, could you check them?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539729299, "post_id": 52843597, "comment_id": 92605856, "body": "No - as I said, that is not how SO works.  Useful questions will likely survive longer that your code might remain on github.  Or worse your code on github will be corrected and the question will no longer make any sense.  However it is now academic - I have fixed the question for you."}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539729436, "post_id": 52843597, "comment_id": 92605891, "body": "I got your point, I will definitely make my questions more useful in the future"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1539730324, "post_id": 52843597, "comment_id": 92606106, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539729313, "post_id": 52844856, "comment_id": 92605860, "body": "I did and here&#39;s the error I get      arm-none-eabi-gcc -c main.c -mcpu=cortex-m4 -mthumb --      specs=nosys.specs --I ./include/CMSIS -I ./include/common -I      ./include/msp432  -Wall -Werror -g -O0  -std=c99 -o main.o     arm-none-eabi-gcc: error: unrecognized command line option &#39;--I&#39;; did you      mean &#39;-I&#39;?     Makefile:52: recipe for target &#39;main.o&#39; failed     make: *** [main.o] Error 1"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539730126, "post_id": 52844856, "comment_id": 92606058, "body": "@MahmoudSaad : Fine, so the change <i>did</i> work (not as you suggested in an earlier comment).  What you have now is clearly a <i>different</i> error.  You need to ask a different question if you cannot resolve it.  The problem however is that you have erroneously added a <code>-</code> somewhere.  My guess is that you have <code>-$(INCLUDES)</code> rather then just <code>$(INCLUDES)</code>.  <code>INCLUDES</code> is not a single option, and already has <code>-</code> in the individual directives in contains."}, {"owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "edited": false, "score": 0, "creation_date": 1539730128, "post_id": 52844856, "comment_id": 92606060, "body": "oooooh, I get it now, I was adding a minus sign before $(INCLUDES), after I removed it this error is solved but I have a new error, I will do my research and solve it.  Thanks sir for your guidance.  I will definitly keep what I learned here today in mind specially about asking useful questions."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "edited": false, "score": 1, "creation_date": 1539778403, "post_id": 52844856, "comment_id": 92624313, "body": "@lostbard Since there is only one correct answer, it can be no surprise that they look the same!  Comments should not be used for posting answers, and in a true answer it is possible to be much clearer. You were free to post your own answer, and probably should have."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 1, "last_activity_date": 1539728981, "creation_date": 1539728981, "answer_id": 52844856, "question_id": 52843597, "link": "https://stackoverflow.com/questions/52843597/gnu-make-doesnt-include-headerfile/52844856#52844856", "title": "GNU make doesn&#39;t include headerfile", "body": "<p>You have not used the <code>INCLUDES</code> macro in makefile's <code>CFLAGS</code> macro.  Consequently the <code>arm-none-eabi-gcc ...</code> command line does not specify the include paths to the compiler (or strictly the pre-processor).</p>\n\n<pre><code>CFLAGS = -mcpu=$(CPU) -m$(ARCH) --specs=$(SPECS) $(INCLUDES) -Wall -Werror -g -O0  -std=c99\n                                                 ^^^^^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10478157, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yLCB_zqy4Qg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWKSeZduf3wSBfk7b32D4xjoZsN6w/mo/photo.jpg?sz=128", "display_name": "Mahmoud Saad", "link": "https://stackoverflow.com/users/10478157/mahmoud-saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 52844856, "answer_count": 1, "score": 1, "last_activity_date": 1539728981, "creation_date": 1539721706, "last_edit_date": 1539728899, "question_id": 52843597, "link": "https://stackoverflow.com/questions/52843597/gnu-make-doesnt-include-headerfile", "title": "GNU make doesn&#39;t include headerfile", "body": "<p>I have been searching for 6 hours and I can't seem to find the issue with this GNU make file, everytime I try to compile by main.o by the order</p>\n\n<pre><code>make main.o\n</code></pre>\n\n<p>it gives me this error:</p>\n\n<pre><code>arm-none-eabi-gcc -c main.c -mcpu=cortex-m4 -mthumb -- \nspecs=nosys.specs  -Wall -Werror -g -O0  -std=c99 -o main.o\nmain.c:23:22: fatal error: platform.h: No such file or directory\n#include \"platform.h\"\n                     ^\ncompilation terminated.\nMakefile:52: recipe for target 'main.o' failed\nmake: *** [main.o] Error 1\n</code></pre>\n\n<p>makefile:</p>\n\n<pre><code>include sources.mk\n\n# Platform Overrides\nPLATFORM = MSP432\n\n# Architectures Specific Flags\nLINKER_FILE = msp432p401r.lds\nCPU = cortex-m4\nARCH = thumb\nSPECS = nosys.specs\n\n# Compiler Flags and Defines\nCC = arm-none-eabi-gcc\nLD = arm-none-eabi-ld\nTARGET = c1m1\nLDFLAGS = -Wl,-Map=$(TARGET).map -T $(LINKER_FILE)\nCFLAGS = -mcpu=$(CPU) -m$(ARCH) --specs=$(SPECS)  -Wall -Werror -g -O0  -std=c99\nCPPFLAGs =\n\n\n.PHONY: all\nall: $(TARGET).out\n\n.PHONY: clean\nclean:  \n    rm -f $(OBJS) $(TARGET).out $(TARGET).map\n\n%.o : %.c\n    $(CC) -c $&lt; $(CFLAGS) -o $@\n\nOBJS = $(SOURCES:.c=.o)\n\n$(TARGET).out: $(OBJS)\n    $(CC) $(OBJS) $(CFLAGS) $(LDFLAGS) -o $@\n</code></pre>\n\n<p>sources.mk:</p>\n\n<pre><code># Add your Source files to this variable\nSOURCES =./main.c \\\n    ./memory.c \\\n    ./startup_msp432p401r_gcc.c \\\n    ./system_msp432p401r.c  \\\n    ./interrupts_msp432p401r_gcc.c  \n\n\n\n# Add your include paths to this variable\nINCLUDES =-I./include/CMSIS \\\n    -I./include/common \\\n    -I./include/msp432\n</code></pre>\n\n<p>here's my code on github:</p>\n\n<p><a href=\"https://github.com/Mahmoud5Saad/so.git\" rel=\"nofollow noreferrer\">github repository</a></p>\n"}, {"tags": ["c", "casting", "c-preprocessor"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1539721628, "post_id": 52843529, "comment_id": 92603064, "body": "Sometimes you want to avoid signedness issues and stick to unsigned values (mostly for bitwise operations)."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539721773, "post_id": 52843529, "comment_id": 92603120, "body": "Isn&#39;t it more common to see something like: <code>42u</code> rather than <code>(uint8_t)42</code>?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539721805, "post_id": 52843529, "comment_id": 92603135, "body": "@FiddlingBits <code>42u</code> is an <code>unsigned int</code>, not a <code>uint8_t</code>."}, {"owner": {"reputation": 589, "user_id": 1646196, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c28655108e00a7186d9fa7b4fe690fd?s=128&d=identicon&r=PG", "display_name": "user1646196", "link": "https://stackoverflow.com/users/1646196/user1646196"}, "edited": false, "score": 2, "creation_date": 1539721996, "post_id": 52843529, "comment_id": 92603213, "body": "It&#39;s also worth mentioning that for coding standards for high integrity software such as MISRA all preprocessor definitions need to be surround by brackets and have a typecast. There&#39;s too many subtle bugs that can occur especially as code gets more complex"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1539723170, "post_id": 52843529, "comment_id": 92603690, "body": "try outputting <code>sizeof(THE_ANSWER)</code>"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539724987, "post_id": 52843529, "comment_id": 92604452, "body": "@FiddlingBits I don&#39;t know that it&#39;s all that common that people are even aware of the existence of explicitly unsigned integer literals."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539738408, "post_id": 52843529, "comment_id": 92607854, "body": "@FiddlingBits <code>42u</code> is an unsigned integer, typically 4 bytes these days but could be 2, 8, or something else.  <code>(uint8_t)42</code> will be a different type and only be 1 byte."}], "answers": [{"tags": [], "owner": {"reputation": 465, "user_id": 8584675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666086d04bb306a5829c392e6d8f6fb9?s=128&d=identicon&r=PG&f=1", "display_name": "nullp0tr", "link": "https://stackoverflow.com/users/8584675/nullp0tr"}, "is_accepted": false, "score": 1, "last_activity_date": 1539721734, "creation_date": 1539721734, "answer_id": 52843604, "question_id": 52843529, "link": "https://stackoverflow.com/questions/52843529/c-typecasts-in-define-directives/52843604#52843604", "title": "C Typecasts in #define directives", "body": "<p>One example is multiplication. Say you have the following:</p>\n\n<pre><code>#define KILO 1024\n</code></pre>\n\n<p>what happens if you later on do the following?</p>\n\n<pre><code>unsigned long long val = KILO * KILO * KILO * KILO * KILO * ...\n</code></pre>\n\n<p>you might think that the multiplication would get evaluated with the type <code>unsigned long long</code>, but in reality all those multiplications happen on <code>int</code>. So if your directive doesn't have a typecast, or better yet it isn't <code>1024L</code> you might end up with unexpected behavior because of an <code>int</code> overflow, even though your variable's type can actually hold the result.</p>\n"}], "owner": {"reputation": 11, "user_id": 9492316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ad649c6852647a97dde8c41df0317a7?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Waelti", "link": "https://stackoverflow.com/users/9492316/matthias-waelti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539721764, "creation_date": 1539721378, "question_id": 52843529, "link": "https://stackoverflow.com/questions/52843529/c-typecasts-in-define-directives", "title": "C Typecasts in #define directives", "body": "<p>I've seen many #defines for literals using a type cast.\nAs example <code>#define THE_ANSWER ((uint8_t) 42)</code>.</p>\n\n<p>Until now, I can hardly imagine a situation where this really matters.</p>\n\n<p>Can someone give me an example where a #define directive without a type cast leads to an \"unexpected\" behaviour.\nMaybe there is a good example for desktop environment and one for embedded or microcontroller environment.</p>\n\n<p>Thank you for your suggestions.</p>\n"}, {"tags": ["c", "function", "stdio"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539719884, "post_id": 52843138, "comment_id": 92602229, "body": "<code>stdin</code> still has the <code>&#39;\\n&#39;</code> character; second <code>scanf</code> takes <code>&#39;\\n&#39;</code> for <code>k</code>."}, {"owner": {"reputation": 1300, "user_id": 7602468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3XKX5.gif?s=128&g=1", "display_name": "p._phidot_", "link": "https://stackoverflow.com/users/7602468/p-phidot"}, "edited": false, "score": 1, "creation_date": 1539719957, "post_id": 52843138, "comment_id": 92602277, "body": "<code>A&lt;=c&lt;=Z</code> is two conditions, not 1. you need to separate them."}, {"owner": {"reputation": 465, "user_id": 8584675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666086d04bb306a5829c392e6d8f6fb9?s=128&d=identicon&r=PG&f=1", "display_name": "nullp0tr", "link": "https://stackoverflow.com/users/8584675/nullp0tr"}, "edited": false, "score": 1, "creation_date": 1539720092, "post_id": 52843138, "comment_id": 92602352, "body": "<code>A</code>, <code>Z</code>, <code>a</code>, and <code>z</code> are all uninitialized variables."}, {"owner": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539720253, "post_id": 52843138, "comment_id": 92602426, "body": "@FiddlingBits I&#39;m sorry i think i understood what you&#39;re saying but i don&#39;t know how to fix it,you&#39;re saying that giving let&#39;s say int k=9 and pressing enter the char h is taking the &#39;enter&#39; button i&#39;m pressing ?"}, {"owner": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "reply_to_user": {"reputation": 465, "user_id": 8584675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666086d04bb306a5829c392e6d8f6fb9?s=128&d=identicon&r=PG&f=1", "display_name": "nullp0tr", "link": "https://stackoverflow.com/users/8584675/nullp0tr"}, "edited": false, "score": 0, "creation_date": 1539720372, "post_id": 52843138, "comment_id": 92602480, "body": "@nullp0tr@p._phidot_ I&#39;m sorry i think i could use char variables and then assign to them their integer value from ascii,is that correct ?"}, {"owner": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "edited": false, "score": 0, "creation_date": 1539720432, "post_id": 52843138, "comment_id": 92602511, "body": "@p._phidot_I&#39;m sorry i think i got this one,could i say if (A&lt;=c &amp;&amp; c&lt;=Z) ?"}, {"owner": {"reputation": 465, "user_id": 8584675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666086d04bb306a5829c392e6d8f6fb9?s=128&d=identicon&r=PG&f=1", "display_name": "nullp0tr", "link": "https://stackoverflow.com/users/8584675/nullp0tr"}, "edited": false, "score": 0, "creation_date": 1539720579, "post_id": 52843138, "comment_id": 92602572, "body": "Yes you need to assign the letters to those variables, or you can just use single quotes around the letters to immediately compare them, without using any extra variables."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539720584, "post_id": 52843138, "comment_id": 92602574, "body": "@jacopoburelli Yes, I believe that is happening.  Maybe you need a loop to consume remainder of input."}, {"owner": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539721307, "post_id": 52843138, "comment_id": 92602899, "body": "@FiddlingBits Do you have an idea on how to do that ? the function keeps doing that, if i enter 2 returns me 0 right afterwards."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539721554, "post_id": 52843138, "comment_id": 92603019, "body": "@jacopoburelli I&#39;m not sure what the best way is but maybe something like: <code>while(getc() != &#39;\\n&#39;) continue;</code>"}, {"owner": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539721827, "post_id": 52843138, "comment_id": 92603145, "body": "@FiddlingBits I tried c=getchar() and the while but doesn&#39;t work, i&#39;m gonna figure out something i hope, thanks!"}, {"owner": {"reputation": 896, "user_id": 9996322, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CKb7ymEsXic/AAAAAAAAAAI/AAAAAAAAAUE/PhlIctjmhPI/photo.jpg?sz=128", "display_name": "Jacob Boertjes", "link": "https://stackoverflow.com/users/9996322/jacob-boertjes"}, "edited": false, "score": 0, "creation_date": 1539722775, "post_id": 52843138, "comment_id": 92603531, "body": "<code>if(A&lt;=c&lt;=Z)</code> should be changed to <code>if(&#39;A&#39;&lt;=c &amp;&amp; c&lt;=&#39;Z&#39;)</code>, same with the check for between &#39;a&#39; and &#39;z&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "edited": false, "score": 0, "creation_date": 1539720513, "post_id": 52843243, "comment_id": 92602549, "body": "I see,thank you, but why can&#39;t i initialize A,z,a,z; as char variable and then, omitting the &#39; &#39;, consider them as integers?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "edited": false, "score": 0, "creation_date": 1539720755, "post_id": 52843243, "comment_id": 92602664, "body": "You can initialize four variables if you want, but you don&#39;t win anything. At the end of the day they are constants."}, {"owner": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "edited": false, "score": 0, "creation_date": 1539721394, "post_id": 52843243, "comment_id": 92602944, "body": "Okay thanks a lot,i understood everything you said, the problem of the programm now is that i enter the integer let&#39;s say 9 the programm ends because i entered the &#39;\\n&#39; for the scanf that is taken as the second character"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "edited": false, "score": 0, "creation_date": 1539721522, "post_id": 52843243, "comment_id": 92603006, "body": "Sorry, it&#39;s been a long time since I did any low level input code, so I can&#39;t help with that"}], "tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 1, "last_activity_date": 1539720707, "last_edit_date": 1539720707, "creation_date": 1539720166, "answer_id": 52843243, "question_id": 52843138, "link": "https://stackoverflow.com/questions/52843138/character-c-function-misconception-on-its-behaviour/52843243#52843243", "title": "Character C-function, misconception on its behaviour", "body": "<p>This isn't going to do what you probably expect</p>\n\n<pre><code>if(A&lt;=c&lt;=Z)\n</code></pre>\n\n<p>... for all sorts of reasons. Firstly, the values of <code>A</code> and <code>Z</code> are uninitialized. Second, the logic is written to be read by a mathematician, not a C compiler.</p>\n\n<p>You almost certainly wanted this:</p>\n\n<pre><code>if('A'&lt;=c &amp;&amp; c&lt;='Z')\n</code></pre>\n\n<p>... and remove the four variables <code>char A,Z,a,z;</code></p>\n\n<p>Note that use of character constants such as <code>'A'</code> and <code>'Z'</code> assumes a runtime environment using ASCII character sets. If you're interested in a more portable solution, you can look up <code>isupper()</code> and <code>islower()</code></p>\n"}], "owner": {"reputation": 257, "user_id": 10509496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9445a53f69784dc425980a3bfb9153?s=128&d=identicon&r=PG&f=1", "display_name": "jacopoburelli", "link": "https://stackoverflow.com/users/10509496/jacopoburelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 52843243, "answer_count": 1, "score": 1, "last_activity_date": 1539720707, "creation_date": 1539719744, "last_edit_date": 1539720467, "question_id": 52843138, "link": "https://stackoverflow.com/questions/52843138/character-c-function-misconception-on-its-behaviour", "title": "Character C-function, misconception on its behaviour", "body": "<p>An exercise asked to write a function that:</p>\n\n<ul>\n<li><p>reads a sequence of alphabetic characters (without memorizing the sequence) that ends only when the users enters '\\n'.</p></li>\n<li><p>returns 1 if the number of capitalized letters went beyond the lower ones of at most an integer m, entered by the user, or 0 else.</p></li>\n</ul>\n\n<p>I tried with the following code:  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint read(int p,char c)\n{\n    int M=0,m=0,d;\n    char A,Z,a,z;\n\n    while(c != '\\n')\n    {\n        if(A&lt;=c&lt;=Z)\n        {\n            M++;\n        }\n        else if(a&lt;=c&lt;=z)\n        {\n            m++;\n        }\n        scanf(\"%c\",&amp;c);\n    }\n\n    if(M-m&gt;0)\n        d=(m-M);\n    else \n        d=0;\n\n    if(d==0)\n        return 0;\n    else if (d&lt;=p)\n        return 1;\n}\n\nint main()\n{\n    int a,h;\n    char k;\n\n    scanf(\"%d\", &amp;h);\n    scanf(\"%c\", &amp;k);\n    a=read(h,k);\n    printf(\"%d\\n\",a);\n    return 0;\n}\n</code></pre>\n\n<p>At this point, trying to execute the program with the gcc command, i noticed that the program was taking just the integer, let's say 2, and gave back 0 as if it entered in the function without taking the second scan on the character.</p>\n\n<p>Besides the formal misconception and errors about the program and c function that i'm glad you rectify,</p>\n\n<p>I was trying to understand, because as they say i'm trying to be self-taught, how <code>scanf</code> function and function work in general, when and to who priority is given.</p>\n\n<p>For example in function <code>read</code> it's not clear to me when the value i'm returning to the function are taken putting a higher if as i did.</p>\n"}, {"tags": ["c", "arrays", "char", "c-strings"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539719650, "post_id": 52843092, "comment_id": 92602095, "body": "Have you tried it without the <code>flush</code>?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1539719667, "post_id": 52843092, "comment_id": 92602108, "body": "Once you read in 8 characters for the password (<i>please</i> tell me this isn&#39;t a security-critical application; that is not enough), the rest are still there. You need to discard the rest of the line before reading the key file path."}, {"owner": {"reputation": 49, "user_id": 6652016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/739df9013c1145875dab3c8304dc69b3?s=128&d=identicon&r=PG&f=1", "display_name": "kernel", "link": "https://stackoverflow.com/users/6652016/kernel"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539719691, "post_id": 52843092, "comment_id": 92602119, "body": "@FiddlingBits yes. Still same result."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 2, "creation_date": 1539719734, "post_id": 52843092, "comment_id": 92602146, "body": "@FiddlingBits have <b>you</b> read about <code>fflush</code>ing stdin having undefined behaviour"}, {"owner": {"reputation": 49, "user_id": 6652016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/739df9013c1145875dab3c8304dc69b3?s=128&d=identicon&r=PG&f=1", "display_name": "kernel", "link": "https://stackoverflow.com/users/6652016/kernel"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1539719858, "post_id": 52843092, "comment_id": 92602216, "body": "@DanielH yes, its a security critical (but my pet project so far). And I do want to discard the rest of the line in password. Thats exactly what I am trying to do. Thats why I put fflush there to clear out the input buffer."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1539719920, "post_id": 52843092, "comment_id": 92602247, "body": "Then you shouldn&#39;t discard any part of the password; you should let the user have a 300-byte password if they want. Don&#39;t impose arbitrary limits on passwords. If you must, at least make it long enough to fit in a decent pass phrase."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539719965, "post_id": 52843092, "comment_id": 92602283, "body": "@AnttiHaapala I believe I have read that. That&#39;s why I was asking OP. Why are you asking me?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539720039, "post_id": 52843092, "comment_id": 92602325, "body": "@FiddlingBits omg indeed you did :D and I read incorrectly, sorry about that. Though it doesn&#39;t fix it either."}, {"owner": {"reputation": 49, "user_id": 6652016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/739df9013c1145875dab3c8304dc69b3?s=128&d=identicon&r=PG&f=1", "display_name": "kernel", "link": "https://stackoverflow.com/users/6652016/kernel"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1539720042, "post_id": 52843092, "comment_id": 92602327, "body": "@DanielH I want to use it as a key for DES (Data Encryption Standard). 64-bit key size is a standard for DES. Cant use more than that."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 2, "creation_date": 1539720183, "post_id": 52843092, "comment_id": 92602391, "body": "@kernel 8 user-entered characters is not actually 64 bits of entropy (nobody is going to enter <code>\\x07</code> and they <i>cannot</i> enter <code>\\n</code>), and DES is broken and you shouldn&#39;t use it if you actually care about security."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539720206, "post_id": 52843092, "comment_id": 92602404, "body": "@AnttiHaapala No problem. I forgive you. ;-)"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 2, "creation_date": 1539720731, "post_id": 52843092, "comment_id": 92602650, "body": "In general, it&#39;s a bad idea to write your own cryptography code. DES has been withdrawn and is no longer a NIST standard; you should use AES instead, or possibly something built using AES depending on the application. But you shouldn&#39;t write the AES code yourself, for several reasons (you might have bugs which were discovered in other code, you might be vulnerable to side-channel attacks, the library probably knows how to make it faster than you do, etc). Use a library, or the kernel cryptography API."}, {"owner": {"reputation": 465, "user_id": 8584675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666086d04bb306a5829c392e6d8f6fb9?s=128&d=identicon&r=PG&f=1", "display_name": "nullp0tr", "link": "https://stackoverflow.com/users/8584675/nullp0tr"}, "edited": false, "score": 3, "creation_date": 1539720938, "post_id": 52843092, "comment_id": 92602733, "body": "The security concerns of the other commentators are all valid, and you should seriously take them into mind. If you still wanna shoot yourself in the foot, you can use <code>int ch; while (ch = getchar() != &#39;\\n&#39; &amp;&amp; ch != EOF);</code> to flush the input after the first <code>fgets</code>."}, {"owner": {"reputation": 49, "user_id": 6652016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/739df9013c1145875dab3c8304dc69b3?s=128&d=identicon&r=PG&f=1", "display_name": "kernel", "link": "https://stackoverflow.com/users/6652016/kernel"}, "reply_to_user": {"reputation": 465, "user_id": 8584675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/666086d04bb306a5829c392e6d8f6fb9?s=128&d=identicon&r=PG&f=1", "display_name": "nullp0tr", "link": "https://stackoverflow.com/users/8584675/nullp0tr"}, "edited": false, "score": 0, "creation_date": 1539723924, "post_id": 52843092, "comment_id": 92603984, "body": "@nullp0tr Thanks man! I know DES is broken but its hard to explain why I&#39;m doing this. Can you explain how this flushes the input buffer? and why <code>fflush</code> wasn&#39;t working?"}, {"owner": {"reputation": 49, "user_id": 6652016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/739df9013c1145875dab3c8304dc69b3?s=128&d=identicon&r=PG&f=1", "display_name": "kernel", "link": "https://stackoverflow.com/users/6652016/kernel"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1539724008, "post_id": 52843092, "comment_id": 92604027, "body": "Thanks @DanielH! Appreciate it man."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6652016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/739df9013c1145875dab3c8304dc69b3?s=128&d=identicon&r=PG&f=1", "display_name": "kernel", "link": "https://stackoverflow.com/users/6652016/kernel"}, "edited": false, "score": 0, "creation_date": 1539724603, "post_id": 52843951, "comment_id": 92604291, "body": "Yeah I just added the the <code>consume rest of line</code> part. It was the necessary evil.  The method is way too much complicated for reading a char array.  Anyway, Thanks man, Appreciate it. :)"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1539741256, "last_edit_date": 1539741256, "creation_date": 1539723439, "answer_id": 52843951, "question_id": 52843092, "link": "https://stackoverflow.com/questions/52843092/c-truncated-char-array-input-automatically-assigned-to-next-char-array/52843951#52843951", "title": "C - Truncated char array input automatically assigned to next char array", "body": "<p>In OP's code, the input that does not fit in the first <code>fgets()</code> remains for subsequent input.  Better code would consume the entire line and detect if the line is excessively long.</p>\n\n<p>Use <code>fgets()</code> with a long enough buffer to look for incomplete <em>line</em> input.<br>\nRead at least 2 more characters: extra character and <code>'\\n'</code>.</p>\n\n<hr>\n\n<p>Perhaps use your own <code>my_gets()</code> to read a line.</p>\n\n<pre><code>// Read a line\n// If input, without the \\n fits in the destination, return `s`\n// else return NULL\n// Conditions: line != NULL,  0 &lt; sz &lt;= INT_MAX\nchar *my_gets(char *line, size_t sz) {\n  if (fgets(line, (int) sz, stdin) == NULL) {\n    line[0] = '\\0';\n    return NULL; // EOF\n  }\n\n  size_t length = strlen(line);\n  if (length &gt; 0 &amp;&amp; line[length - 1] == '\\n') {\n    line[--length] = '\\0';  // Chop off \\n\n  } else if (length == sz - 1) {\n    // Consume rest of line\n    bool looped = false;\n    int ch;\n    while ((ch = fgetc(stdin)) != '\\n' &amp;&amp; ch != EOF) {\n      looped = true;\n    }\n    if (looped) {\n      return NULL; // Line too long\n    }\n  }\n  return line;\n}\n</code></pre>\n\n<p>Application</p>\n\n<pre><code>int main(void) {\n    printf(\"Enter Password: \");\n    char password[9];\n    if (my_gets(password, sizeof password) == NULL) {\n      return EXIT_FAILURE; \n    }\n    puts(password);\n\n    printf(\"Enter key file path: \");\n    char file_path[200];\n    if (my_gets(file_path, sizeof file_path) == NULL) {\n      return EXIT_FAILURE; \n    }\n    puts(file_path);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<hr>\n\n<p>From a security standpoint, good to scrub <code>password[]</code> and <code>line[]</code> after code is done with it.</p>\n\n<pre><code>memset(password, 0, sizeof password);\n</code></pre>\n\n<p>Yet the call to <code>fgets(), fgetc()</code> are themselves not so secure as they are not specified to \"cover their tracks\" as they return.  This is a deeper subject beyond this post.</p>\n"}], "owner": {"reputation": 49, "user_id": 6652016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/739df9013c1145875dab3c8304dc69b3?s=128&d=identicon&r=PG&f=1", "display_name": "kernel", "link": "https://stackoverflow.com/users/6652016/kernel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539741256, "creation_date": 1539719507, "question_id": 52843092, "link": "https://stackoverflow.com/questions/52843092/c-truncated-char-array-input-automatically-assigned-to-next-char-array", "title": "C - Truncated char array input automatically assigned to next char array", "body": "<p>I've been trying to input 2 char arrays from user. </p>\n\n<p>I want to truncate the input characters if they are more than specified length.\nThis is what I have done so far.</p>\n\n<pre><code>int main(){\n\n    printf(\"Enter Password: \");\n    char password[9]= {0};\n    fgets(password, sizeof(password), stdin);\n\n\n    printf(\"Enter key file path: \");\n    char file_path[200];\n    fflush(stdin);\n    fgets(file_path, sizeof(file_path), stdin);\n    puts(file_path);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>I get this output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dOvQi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dOvQi.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I enter more than 8 chars, it automatically assigns charcaters above 8 to my <code>file_path</code>. It does not ask for the 2nd input!</p>\n\n<p>PS: I tried <code>scanf(\"%8s\", password)</code> instead of fgets. Same issue. </p>\n\n<p>Please Help, Thanks</p>\n"}, {"tags": ["c", "visual-studio", "visual-studio-2017"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539716875, "post_id": 52842401, "comment_id": 92600799, "body": "Need to add <code>-levent</code> to the options?"}, {"owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539717019, "post_id": 52842401, "comment_id": 92600867, "body": "what options..?"}, {"owner": {"reputation": 103, "user_id": 5560550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZ5Uq.png?s=128&g=1", "display_name": "Ewa Kropkowska", "link": "https://stackoverflow.com/users/5560550/ewa-kropkowska"}, "edited": false, "score": 0, "creation_date": 1539792621, "post_id": 52842401, "comment_id": 92633201, "body": "did you try to link to libevent built using CMake for Windows, like suggested here: <a href=\"https://github.com/libevent/libevent#cmake-windows-1\" rel=\"nofollow noreferrer\">github.com/libevent/libevent#cmake-windows-1</a> ?"}, {"owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "reply_to_user": {"reputation": 103, "user_id": 5560550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZ5Uq.png?s=128&g=1", "display_name": "Ewa Kropkowska", "link": "https://stackoverflow.com/users/5560550/ewa-kropkowska"}, "edited": false, "score": 0, "creation_date": 1539875178, "post_id": 52842401, "comment_id": 92667652, "body": "Well, I have a project which uses libevent library. Libevent, libevent_core, libevent_extra. I am trying to compile myproject.sln and getting above errors. If i follow instructions for tha link. I will have two sln files and i dont know how that supposed to work? @EwaAr"}, {"owner": {"reputation": 103, "user_id": 5560550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZ5Uq.png?s=128&g=1", "display_name": "Ewa Kropkowska", "link": "https://stackoverflow.com/users/5560550/ewa-kropkowska"}, "edited": false, "score": 1, "creation_date": 1539883223, "post_id": 52842401, "comment_id": 92672080, "body": "when you follow the instruction above, you will get projects and solution files in the location .../libevent-release-2.1.8-stable/build/*. Than open libevent.sln in VS and build it. If it build successfully, you will get 3 static libraries in location ...//libevent-release-2.1.8-stable/build/lib/&lt;DEBUG or RELEASE&gt;/*.lib (event.lib, event_core.lib, event_extra.lib). Than you have to open myproject.sln in VS, in Solution Explorer find the project that you want to link event.lib to, right-click to Properties-&gt;Linker-&gt;Input-&gt;Additional Dependencies, add libevent libraries."}, {"owner": {"reputation": 103, "user_id": 5560550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZ5Uq.png?s=128&g=1", "display_name": "Ewa Kropkowska", "link": "https://stackoverflow.com/users/5560550/ewa-kropkowska"}, "edited": false, "score": 0, "creation_date": 1539883231, "post_id": 52842401, "comment_id": 92672085, "body": "Than in Properties-&gt;Linker-&gt;General-&gt;Additional Library Directories add location of libevent libraries."}, {"owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "reply_to_user": {"reputation": 103, "user_id": 5560550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZ5Uq.png?s=128&g=1", "display_name": "Ewa Kropkowska", "link": "https://stackoverflow.com/users/5560550/ewa-kropkowska"}, "edited": false, "score": 0, "creation_date": 1539887732, "post_id": 52842401, "comment_id": 92674402, "body": "Thank you for explaining so clearly. But thing is, i already have those build library available so can&#39;t i use those directly without compiling again? @EwaAr"}, {"owner": {"reputation": 103, "user_id": 5560550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZ5Uq.png?s=128&g=1", "display_name": "Ewa Kropkowska", "link": "https://stackoverflow.com/users/5560550/ewa-kropkowska"}, "edited": false, "score": 1, "creation_date": 1539932471, "post_id": 52842401, "comment_id": 92687510, "body": "it depends on what compiler was used to build them, since many compilers are mutually incompatible. If you build both libraries and your project with the same toolchain, it should not be problem. Also, you may check if you include right libevent headers and function declaration match definition"}, {"owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "reply_to_user": {"reputation": 103, "user_id": 5560550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZ5Uq.png?s=128&g=1", "display_name": "Ewa Kropkowska", "link": "https://stackoverflow.com/users/5560550/ewa-kropkowska"}, "edited": false, "score": 0, "creation_date": 1540323866, "post_id": 52842401, "comment_id": 92821008, "body": "@EwaAr i compiled libevent but there is no folder created in build. Project.sln has been created instead of libevent.sln. What am i doing wrong?"}], "owner": {"reputation": 43, "user_id": 10167681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06afd12933439869fd932b1d2eb845d3?s=128&d=identicon&r=PG&f=1", "display_name": "RookieDev", "link": "https://stackoverflow.com/users/10167681/rookiedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539716807, "creation_date": 1539716807, "question_id": 52842401, "link": "https://stackoverflow.com/questions/52842401/linker-error-while-building-libevent-project", "title": "Linker error while building libevent project", "body": "<p>I have one project which uses libevent libraries and i am compiling it VS2017. It runs in linux perfectly. I am getting errors like below:</p>\n\n<pre><code>1&gt;ftpcmd.obj : error LNK2019: unresolved external symbol evutil_snprintf referenced in function do_client_read\n1&gt;ftpcmd.obj : error LNK2019: unresolved external symbol evutil_inet_pton referenced in function handle_pasv\n1&gt;ftpdata.obj : error LNK2001: unresolved external symbol evutil_inet_pton\n1&gt;ftpcmd.obj : error LNK2019: unresolved external symbol bufferevent_free referenced in function fs_client_free\n1&gt;ftpdata.obj : error LNK2001: unresolved external symbol bufferevent_free\n</code></pre>\n\n<p>Does anyone know how to link libevent with project? I read some question related to that and they say i need to compile libevent using VS commad prompt. I tried that with <code>nmake -f Makefile.nmake</code> libevent-2.1.8-stable but it failed.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 883, "user_id": 10096436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKBUJ.png?s=128&g=1", "display_name": "Micromuncher", "link": "https://stackoverflow.com/users/10096436/micromuncher"}, "edited": false, "score": 0, "creation_date": 1539715836, "post_id": 52842110, "comment_id": 92600317, "body": "strcpy copies up to and including the terminator..."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 4, "creation_date": 1539715842, "post_id": 52842110, "comment_id": 92600321, "body": "In your <code>copy</code> function the <code>while</code> loop writes a <code>NUL</code> character to <code>to[i]</code> before checking to see if it&#39;s a <code>NUL</code> character.  <code>to[i] = &#39;\\0</code> is thus redundant."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1539716019, "post_id": 52842110, "comment_id": 92600419, "body": "If program logic is too convoluted to follow mentally, use a debugger to see what&#39;s going on."}, {"owner": {"reputation": 23, "user_id": 10390050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630b7e57e50a3fa0616cec7f0ce6d2cc?s=128&d=identicon&r=PG&f=1", "display_name": "Vibha Sharma", "link": "https://stackoverflow.com/users/10390050/vibha-sharma"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539716055, "post_id": 52842110, "comment_id": 92600439, "body": "Oh!! I totally missed it @Fiddling Bits.....thanks I think I got my answer."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1539716167, "post_id": 52842110, "comment_id": 92600498, "body": "Fyi, <code>copy</code> can be trimmed to just: <code>while ((*to++ = *from++));</code> It&#39;s not like you need those pointers for anything later anyway."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1539716676, "post_id": 52842185, "comment_id": 92600699, "body": "why double parentheses on <code>while ((*to++ = *from++));</code> ?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1539716778, "post_id": 52842185, "comment_id": 92600754, "body": "@Jean-Fran&#231;oisFabre <a href=\"https://stackoverflow.com/questions/5476759/compiler-warning-suggest-parentheses-around-assignment-used-as-truth-value\">suggest parentheses around assignment used as truth value</a>"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 5, "last_activity_date": 1539716319, "last_edit_date": 1539716319, "creation_date": 1539715930, "answer_id": 52842185, "question_id": 52842110, "link": "https://stackoverflow.com/questions/52842110/does-a-copied-string-end-with-a-0-section-1-9-the-c-programming-language-kr/52842185#52842185", "title": "Does a copied string end with a &#39;\\0&#39; (Section 1.9 The C Programming Language K&amp;R2)", "body": "<p>The statement</p>\n\n<pre><code>while ((to[i] = from[i]) != '\\0')\n    ++i;\n</code></pre>\n\n<p>first assigns the value of <code>from[i]</code> to <code>to[i]</code> and <em>then</em> compares the assigned value to <code>\\0</code> - if it was the null terminator that was just copied, the loop ends.</p>\n\n<p>Thus</p>\n\n<pre><code>to[i] = '\\0';\n</code></pre>\n\n<p>is unnecessary, but not otherwise incorrect here. </p>\n\n<p>However, having unnecessary code around is not good style because it makes refactoring and reasoning about the other code <em>harder</em>. Just the presence of that last assignment could then confuse a future reader into thinking that the loop in itself is not sufficient to properly terminate the string.</p>\n\n<p>Additionally, should someone come and edit the code into </p>\n\n<pre><code>while ((*to++ = *from++));\n</code></pre>\n\n<p>as suggested by WhozCraig, they could then mistakenly think that they <em>do</em> need to add the null terminator, this time potentially writing out of bounds:</p>\n\n<pre><code>*to++ = 0;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10390050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/630b7e57e50a3fa0616cec7f0ce6d2cc?s=128&d=identicon&r=PG&f=1", "display_name": "Vibha Sharma", "link": "https://stackoverflow.com/users/10390050/vibha-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 52842185, "answer_count": 1, "score": 2, "last_activity_date": 1539716319, "creation_date": 1539715633, "question_id": 52842110, "link": "https://stackoverflow.com/questions/52842110/does-a-copied-string-end-with-a-0-section-1-9-the-c-programming-language-kr", "title": "Does a copied string end with a &#39;\\0&#39; (Section 1.9 The C Programming Language K&amp;R2)", "body": "<p>In the last line of  <strong>copy function</strong> I have stored a <strong>'\\0'</strong> at the end of the copied string, this was not originally in the code.</p>\n\n<pre><code>include &lt;stdio.h&gt;\n#define MAXLINE 1000               /* maximum input line size */\n\nint getline(char line[ ], int maxline);    \nvoid copy(char to[ ], char from[ ]);\n\n/* print longest input line*/\nint main()\n{\n    int len;                   /* current line length */\n    int max;                  /* maximum length seen so far */\n    char line[MAXLINE];      /*current input line*/\n    char longest[MAXLINE];  /* longest line saved here */\n\n    max=0;\n    while ((len=getline(line, MAXLINE)) &gt; 0)     \n        if (len &gt; max)\n        {\n            max=len;\n            copy(longest, line); \n        }\n    if (max&gt;0)         /* there was a line*/\n        printf(\"%s\", longest);\n    return 0;\n}\n\n/* getline: read a line into s, return length */\nint getline(char s[ ], int lim)\n{            \n    int c,i;\n    for(i=0; i&lt;lim-1 &amp;&amp; (c=getchar())!=EOF &amp;&amp; c!='\\n'; ++i)\n        s[i]=c;\n    if(c=='\\n')\n    {\n        s[i]=c;\n        ++i;\n    }\n   s[i]='\\0';\n   return i;\n}\n\n/* copy: copy 'from' into 'to'; assume to is big enough */\nvoid copy(char to[], char from[])\n{\n    int i;\n    i=0;\n    while((to[i]=from[i])!='\\0')\n        ++i;\n    to[i] = '\\0';      /*&lt;-----Problematic Area*/\n}\n</code></pre>\n\n<p>My question here is, whether the <em>copied string already contains a '\\0'</em> at the end. If it is not so then is it a good practice to include it as I have done in the code.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1539715077, "post_id": 52841941, "comment_id": 92599896, "body": "It would be much simpler to do something like: <code>f[str[j] - &#39;0&#39;]++</code>"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 1, "creation_date": 1539715118, "post_id": 52841941, "comment_id": 92599913, "body": "@FiddlingBits yikes. There are letters in that string"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 2, "creation_date": 1539715222, "post_id": 52841941, "comment_id": 92599976, "body": "@TimRandall Thanks for the catch.  How about: <code>if(isdigit(str[j])) f[str[j] - &#39;0&#39;]++;</code>"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1539715333, "post_id": 52841941, "comment_id": 92600028, "body": "Never use <code>gets</code>. It is deprecated."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539715356, "post_id": 52841941, "comment_id": 92600041, "body": "What value did you enter for &#39;n&#39; before entering the string? Because that&#39;s a classic security vulnerability"}, {"owner": {"reputation": 3092, "user_id": 648368, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/nsODi.jpg?s=128&g=1", "display_name": "Tomer W", "link": "https://stackoverflow.com/users/648368/tomer-w"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539715500, "post_id": 52841941, "comment_id": 92600121, "body": "@TimRandall Didn&#39;t know that is possible... where is <code>str</code> placed on the heap or miracuously stack ? (my guess heap, but with a weird syntax). it sure aint ANSI C."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1539715928, "post_id": 52841941, "comment_id": 92600368, "body": "@Broman It&#39;s more than deprecated; It&#39;s <i>gone</i> as of C11. It is no longer part of the language standard library. Any implementations that still provides it do so at their own peril; the library no longer requires it <i>at all</i>, and implementations are free (and encouraged) to omit it."}, {"owner": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "reply_to_user": {"reputation": 3092, "user_id": 648368, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/nsODi.jpg?s=128&g=1", "display_name": "Tomer W", "link": "https://stackoverflow.com/users/648368/tomer-w"}, "edited": false, "score": 0, "creation_date": 1539716489, "post_id": 52841941, "comment_id": 92600622, "body": "@TomerW: Variable length arrays, see <a href=\"https://stackoverflow.com/questions/1887097/why-arent-variable-length-arrays-part-of-the-c-standard\">VLA</a>"}, {"owner": {"reputation": 13, "user_id": 10272258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384e9698743457b7fbb14d5918792304?s=128&d=identicon&r=PG&f=1", "display_name": "Tidem23", "link": "https://stackoverflow.com/users/10272258/tidem23"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539718240, "post_id": 52841941, "comment_id": 92601412, "body": "@TimRandall  when my input for n is 50.the output is something like this  0 0 0 0 0 0 0 0 0 -48 -48  (both -48 and -48 are in different lines and all 0s on the 1st line"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539718464, "post_id": 52841941, "comment_id": 92601526, "body": "My question has been superseded by dbush&#39;s answer. You wouldn&#39;t have had a problem if your code had contained <code>char str[]=&quot;1wjhue73b38409598&quot;;</code> instead of the <code>gets</code> stuff."}, {"owner": {"reputation": 13, "user_id": 10272258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384e9698743457b7fbb14d5918792304?s=128&d=identicon&r=PG&f=1", "display_name": "Tidem23", "link": "https://stackoverflow.com/users/10272258/tidem23"}, "edited": false, "score": 0, "creation_date": 1539718770, "post_id": 52841941, "comment_id": 92601666, "body": "But when i am not entering any value of n ,I am getting the output as mentioned in my question. and entering giving a value to n gives me ( 0 0 0..).so how is the former method giving a more accurate  output(except for frequency of first element)?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539718974, "post_id": 52841941, "comment_id": 92601775, "body": "I don&#39;t understand what you&#39;re saying. Or rather, why you&#39;re saying it. We&#39;ve established (below) the problems with your code as written above. I don&#39;t think there&#39;s any benefit to discussing exactly what it does when it gets specific inputs, because we already know what&#39;s wrong with it"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1539719007, "post_id": 52841941, "comment_id": 92601785, "body": "@Tidem23 It has to do with mixing <code>scanf</code> and <code>gets</code>.  See the update to my answer."}, {"owner": {"reputation": 13, "user_id": 10272258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384e9698743457b7fbb14d5918792304?s=128&d=identicon&r=PG&f=1", "display_name": "Tidem23", "link": "https://stackoverflow.com/users/10272258/tidem23"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539719206, "post_id": 52841941, "comment_id": 92601871, "body": "@TimRandall i dont understand how entering a value of &#39;n&#39; is a classic security vulnerability?can you please elaborate?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539719442, "post_id": 52841941, "comment_id": 92601990, "body": "If you search for &quot;buffer overflow attack&quot; there is plenty of information. The problem is that you&#39;re trusting the user to tell you how long a string is going to be. There&#39;s nothing to stop them entering more data than they promised. And where is their data going to go? Onto your stack, quite possibly. This was my initial guess as to what was wrong, but dbush got to the truth."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1539718976, "last_edit_date": 1539718976, "creation_date": 1539715681, "answer_id": 52842121, "question_id": 52841941, "link": "https://stackoverflow.com/questions/52841941/to-find-frequency-of-digits0-9-in-a-string/52842121#52842121", "title": "to find frequency of digits(0-9) in a string", "body": "<p>This is what happens when you mix <code>scanf</code> with <code>gets</code> / <code>fgets</code>.</p>\n\n<p>The call to <code>scanf</code> is expecting a number.  When you enter \"1wjhue73b38409598\" as the input it reads the 1 at the start of the string and stops reading when it sees the \"w\".  So <code>n</code> gets set to 1.</p>\n\n<p>Then <code>gets</code> immediately reads the remaining characters (i.e. \"wjhue73b38409598\") without prompting.  Since the 1 is not part of this string, it doesn't get counted.  </p>\n\n<p>There's another problem however.  Because <code>n</code> is set to 1, <code>str</code> can only hold 1 character.  So the <code>gets</code> call writes past the end of the buffer.  This invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  In this <em>particular</em> case, things appeared to otherwise work, however a minor change to the code could change how undefined behavior manifests.</p>\n\n<p>Even if you were to enter a proper value for <code>n</code> such as 50, the <code>scanf</code> call leaves a newline in the buffer.  The subsequent call to <code>gets</code> then immediately reads the newline and stops, so all of the counters are 0.</p>\n\n<p>Use a fixed size buffer instead and use <code>fgets</code>, which can be given a maximum size to read, to read the string:</p>\n\n<pre><code>char str[50];\nfgets(str, sizeof(str), stdin);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10272258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384e9698743457b7fbb14d5918792304?s=128&d=identicon&r=PG&f=1", "display_name": "Tidem23", "link": "https://stackoverflow.com/users/10272258/tidem23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 52842121, "answer_count": 1, "score": 0, "last_activity_date": 1539718976, "creation_date": 1539714892, "last_edit_date": 1539715224, "question_id": 52841941, "link": "https://stackoverflow.com/questions/52841941/to-find-frequency-of-digits0-9-in-a-string", "title": "to find frequency of digits(0-9) in a string", "body": "<p>My code for finding the frequency of digits in a character array in C is not giving the desired output.</p>\n\n<pre><code>int main() {\n    int n;\n    scanf(\"%d\",&amp;n);\n    char str[n];\n    int f[10],i,j,ns;\n    gets(str);\n    for(i=0;i&lt;10;i++)\n    {\n        f[i]=0;\n        for(j=0;j&lt;strlen(str);j++)\n        {\n            ns=str[j]-'0';\n            if(i==ns)\n                f[i]+=1;\n        }\n    }\n    for(i=0;i&lt;10;i++)\n        printf(\"%d \",f[i]);\n    return 0;\n}\n</code></pre>\n\n<p>If I enter the string</p>\n\n<pre><code>1wjhue73b38409598\n</code></pre>\n\n<p>I am getting the output of frequency of (0-9):</p>\n\n<pre><code>1 0 0 2 1 1 0 1 2 2 \n</code></pre>\n\n<p>Instead of frequency 1 for '1'.\nWhere am I going wrong?</p>\n"}, {"tags": ["c", "bash", "shell", "space"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1539711905, "post_id": 52841139, "comment_id": 92598257, "body": "use <code>exec*</code> instead, or posix_spawn"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 2, "creation_date": 1539712017, "post_id": 52841139, "comment_id": 92598319, "body": "Take the <a href=\"https://stackoverflow.com/tour\">tour</a>, read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 10438003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f069dbd25d989be90b8d0f4302d0?s=128&d=identicon&r=PG", "display_name": "Christopher M", "link": "https://stackoverflow.com/users/10438003/christopher-m"}, "edited": false, "score": 0, "creation_date": 1539712210, "post_id": 52841139, "comment_id": 92598425, "body": "Did I not comply with the rules?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1539719797, "post_id": 52841139, "comment_id": 92602185, "body": "BTW, see the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> guidelines -- ideally, a question should include (1) a <b>runnable</b> example (that is, code complete enough that it can be copied and pasted without other work to run), (2) <i>desired</i> output (meaning that the program actually needs to be complete enough that it <i>should</i> generate specific output when run), and (3) <i>actual</i> output... while being the shortest thing that meets those criterial (as described in the coverage for &quot;minimal&quot;, or in &quot;tricks for trimming&quot; at <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">sscce.org</a>)."}, {"owner": {"reputation": 1, "user_id": 10438003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f069dbd25d989be90b8d0f4302d0?s=128&d=identicon&r=PG", "display_name": "Christopher M", "link": "https://stackoverflow.com/users/10438003/christopher-m"}, "edited": false, "score": 0, "creation_date": 1539725139, "post_id": 52841139, "comment_id": 92604523, "body": "I would rather not put my entire program on there, but I will try to make it runnable but it might be better to do so."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1539746511, "post_id": 52841139, "comment_id": 92609555, "body": "We don&#39;t <i>want</i> your entire program -- that would be out of compliance with the &quot;minimal&quot; part of the guidelines. We want the shortest possible complete and runnable program that illustrates the problem. That&#39;s two separate criteria that should both be simultaneously met: (1) shortest possible; (2) complete and runnable."}], "answers": [{"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 1, "user_id": 10438003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f069dbd25d989be90b8d0f4302d0?s=128&d=identicon&r=PG", "display_name": "Christopher M", "link": "https://stackoverflow.com/users/10438003/christopher-m"}, "edited": false, "score": 0, "creation_date": 1539718384, "post_id": 52842756, "comment_id": 92601495, "body": "No. The quotes are for illustrative purposes, to generate a shell command equivalent to what <code>system()</code> is doing. If <code>s=&quot;echo hello&quot;</code>, then <code>system(s)</code> does the same thing as running <code>sh -c &#39;echo hello&#39;</code> does at your shell."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 1, "user_id": 10438003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f069dbd25d989be90b8d0f4302d0?s=128&d=identicon&r=PG", "display_name": "Christopher M", "link": "https://stackoverflow.com/users/10438003/christopher-m"}, "edited": false, "score": 0, "creation_date": 1539718508, "post_id": 52842756, "comment_id": 92601548, "body": "...thing is, <code>system()</code> with non-constant arguments is massively insecure. Let&#39;s say that <code>hello</code> comes from a string -- if instead of containing <code>hello</code> that string contained <code>$(rm -rf ~)&#39;$(rm -rf ~)&#39;</code>, you couldn&#39;t ever concatenate it into a string that a POSIX-compliant <code>sh</code> instance <i>wouldn&#39;t</i> treat as an instruction to run <code>rm</code> as a subprocess."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 1, "user_id": 10438003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f069dbd25d989be90b8d0f4302d0?s=128&d=identicon&r=PG", "display_name": "Christopher M", "link": "https://stackoverflow.com/users/10438003/christopher-m"}, "edited": false, "score": 0, "creation_date": 1539718630, "post_id": 52842756, "comment_id": 92601597, "body": "...so, for the <code>echo hello</code> example, the <b>safe</b> way to execute is by doing a <code>fork()</code>, then a <code>execlp(&quot;echo&quot;, &quot;echo&quot;, &quot;hello&quot;, NULL);</code> inside the child -- no <code>system()</code> at all."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 1, "user_id": 10438003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f069dbd25d989be90b8d0f4302d0?s=128&d=identicon&r=PG", "display_name": "Christopher M", "link": "https://stackoverflow.com/users/10438003/christopher-m"}, "edited": false, "score": 0, "creation_date": 1539718700, "post_id": 52842756, "comment_id": 92601626, "body": "...that said, if you <b>really</b> want a shell, you can do that: <code>execlp(&quot;bash&quot;, &quot;bash&quot;, &quot;-c&quot;, &quot;echo \\&quot;$1\\&quot;&quot;, &quot;_&quot;, &quot;hello&quot;, NULL);</code>"}], "tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": false, "score": 2, "last_activity_date": 1539719437, "last_edit_date": 1539719437, "creation_date": 1539718117, "answer_id": 52842756, "question_id": 52841139, "link": "https://stackoverflow.com/questions/52841139/how-to-run-a-bash-command-regardless-of-spaces/52842756#52842756", "title": "How to run a bash command regardless of spaces", "body": "<p><code>system(str)</code> <strong>always</strong> invokes <code>sh -c \"$str\"</code>. That's what it does.</p>\n\n<p>What you're doing here is <code>sh -c \"sh -c$str\"</code>. Why this is broken should, in that context, be obvious.</p>\n\n<p>Also, <code>sh</code> is not bash -- on many operating systems it's a completely different shell, like <code>ash</code> or <code>dash</code>, and even where it's provided by the <code>bash</code> package, it runs in a POSIX-compatibility mode with different features when invoked under the <code>sh</code> name.</p>\n\n<hr>\n\n<p>If you want to invoke bash from your C program, don't use <code>system()</code> at all.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\n/* Here's our actual shell script.\n * Note that it's a constant string; this is CRITICAL for security.\n * Do not UNDER ANY CIRCUMSTANCES concatenate untrusted data with this string; instead,\n * use placeholders ($1, $2, etc) to pull in other data.\n */\nconst char* bash_script = \"printf '%s\\n' \\\"First argument: $1\\\" \\\"Second argument: $2\\\"\";\n\nint main(void) {\n\n    int pid = fork();                /* if we didn't fork, execlp() would end our program */\n    if (pid == 0) {                  /* if we're the child process fork() created...      */\n        execlp(\"bash\",                    /* command to invoke; in exec*p, found in PATH  */\n               \"bash\", \"-c\", bash_script, /* actually running bash with our script        */\n               \"bash\",                    /* $0 for the script is \"bash\"; \"_\" also common */\n               \"Argument One\",            /* $1 for the script                            */\n               \"Argument Two\",            /* $2 for the script                            */\n               NULL                       /* NUL terminator for argument list             */\n        );\n    } else {\n        int exit=0;\n        waitpid(pid, &amp;exit, 0);\n        printf(\"Shell exited with status: %d\\n\", exit);\n    }\n}\n</code></pre>\n\n<p>You can see this running at <a href=\"https://ideone.com/UXxH02\" rel=\"nofollow noreferrer\">https://ideone.com/UXxH02</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10438003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f069dbd25d989be90b8d0f4302d0?s=128&d=identicon&r=PG", "display_name": "Christopher M", "link": "https://stackoverflow.com/users/10438003/christopher-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1539719437, "creation_date": 1539711658, "last_edit_date": 1539717636, "question_id": 52841139, "link": "https://stackoverflow.com/questions/52841139/how-to-run-a-bash-command-regardless-of-spaces", "title": "How to run a bash command regardless of spaces", "body": "<p>I am working on a C program, with system commands. I have configured it to sh -c . This does not work with commands with spaces. Is there a command to run a command with spaces over shell regardless if it has spaces. I am currently using the sh -c command, like so:</p>\n\n<pre><code>char s[500];\n  strcpy (s, \"sh -c\");\n  strcat (s, i);\n  system (s);\n</code></pre>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539713332, "post_id": 52841066, "comment_id": 92598966, "body": "You&#39;ve got a rather lowly limit for &quot;arbitrary&quot; :D"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1539713428, "post_id": 52841066, "comment_id": 92599029, "body": "Is your problem with the input or with the transformation for the output? Please extract a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, it would improve the quality of you question immensely!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10514421, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YQZ3XMkOupc/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUInRSCwgrcVXy4CEURiBVL102rjA/mo/photo.jpg?sz=128", "display_name": "Sarthak Mehra", "link": "https://stackoverflow.com/users/10514421/sarthak-mehra"}, "edited": false, "score": 0, "creation_date": 1539712120, "post_id": 52841098, "comment_id": 92598373, "body": "Fantastic!! I was not using &amp; operator due to which the extra new lines were not being considered and the program was getting into the IN word mode. Rectifying the above mistake made the program work as expected. Thanks."}], "tags": [], "owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "is_accepted": false, "score": 2, "last_activity_date": 1539711516, "creation_date": 1539711516, "answer_id": 52841098, "question_id": 52841066, "link": "https://stackoverflow.com/questions/52841066/displaying-a-string-one-word-per-line-using-in-out-flag/52841098#52841098", "title": "Displaying a string one word per line using IN/OUT flag", "body": "<p>First bug that jumps out at me:</p>\n\n<pre><code>if(s[i]!=' ' || s[i]!='\\n' || s[i]!='\\t')\n</code></pre>\n\n<p>will always return true. You want <code>&amp;&amp;</code>, or else use a <code>!()</code> around the whole condition that you use the other place, for symmetry.</p>\n\n<p>Or better yet, factor that out into a function, or use <code>isspace</code> from <code>&lt;ctype.h&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539713679, "post_id": 52841518, "comment_id": 92599159, "body": "&quot;using the isspace ... which accepts a character&quot; --&gt; Detail: <code>is...(int ch)</code> functions accept an <code>int</code> with a value in the <code>unsigned char</code>, <code>EOF</code> range."}], "tags": [], "owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "is_accepted": true, "score": 0, "last_activity_date": 1539714045, "last_edit_date": 1539714045, "creation_date": 1539713171, "answer_id": 52841518, "question_id": 52841066, "link": "https://stackoverflow.com/questions/52841066/displaying-a-string-one-word-per-line-using-in-out-flag/52841518#52841518", "title": "Displaying a string one word per line using IN/OUT flag", "body": "<p>Your filtering condition for determining if a character is white space is not correct. The <code>||</code> operator means OR. Using chained OR will allow the expression to evaluate to true every time. You need the AND operator <code>&amp;&amp;</code>. The and operator fails as soon as one operand evaluates to false, or in the case of C, <code>0</code>.</p>\n\n<p>Besides that, there are better ways to check for white space. One idea is using the <code>isspace</code> function from <a href=\"http://www.cplusplus.com/reference/cctype/isspace/\" rel=\"nofollow noreferrer\"><code>&lt;ctype.h&gt;</code></a>, which accepts a character as an <code>int</code>, which can also be an <code>unsigned char</code>, and determines if that character is any of <code>' ', '\\t', '\\v', '\\n' or '\\r'</code>. You can also do character checking via switch statements</p>\n\n<pre><code>switch(ch) {\n    case ' ':\n       // do something\n        break;\n    case '\\n':\n      //do something\n        break;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10514421, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YQZ3XMkOupc/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUInRSCwgrcVXy4CEURiBVL102rjA/mo/photo.jpg?sz=128", "display_name": "Sarthak Mehra", "link": "https://stackoverflow.com/users/10514421/sarthak-mehra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 52841518, "answer_count": 2, "score": 0, "last_activity_date": 1539714045, "creation_date": 1539711330, "last_edit_date": 1539711568, "question_id": 52841066, "link": "https://stackoverflow.com/questions/52841066/displaying-a-string-one-word-per-line-using-in-out-flag", "title": "Displaying a string one word per line using IN/OUT flag", "body": "<p>I have written a program that first stores an arbitrary number of lines of text from the user. After that, it checks when a new word has come and if it does, then it prints it in a new line.\nBelow is my code:</p>\n\n<pre><code> #include&lt;stdio.h&gt;\n #define IN 1   //inside a word\n #define OUT 0  //outside a word\n\nint main()\n{\n  char s[100];   //storing the string entered by user\n  int c;         //getchar reading variable\n  int i=0;       //iterating variable\n\n  while((c=getchar())!=EOF)\n  {\n    s[i++]=c;\n  }\n  s[i]='\\0';   //end of string\n\n\n  i=0;\n  int p=0;    //stores the start of the word\n  int current=OUT; //flag to indicate if program is inside or outside a word\n\n  while(s[i]!='\\0')  \n  {\n    if(current==OUT)  //when program is outside a word\n    {\n        if(s[i]!=' ' || s[i]!='\\n' || s[i]!='\\t')  //word found\n        {\n            p=i;  //store starting position of word \n            current=IN;\n        }\n    }\n    else if(current==IN) //program is inside a word\n    {\n        if(s[i]==' ' || s[i]=='\\n' || s[i]=='\\t') //end of word found\n        {\n            current=OUT; //flag now outside the word\n            for(int j=p;j&lt;i;j++) //print from starting position of word\n            {\n                printf(\"%c\",s[j]);\n            }\n\n            printf(\"\\n\");  //go next line\n\n        }\n\n    }\n    ++i;  //incremnent the iterator variable\n }\n\nreturn 0;\n}\n</code></pre>\n\n<p>My program works well if I just enter the string in a proper manner, i.e. without any extra spaces or new lines. \nBut if I enter a line as follows ( <em>notice the extra spaces and new lines</em>):</p>\n\n<p>*I  am   a boy</p>\n\n<p>I went to Japan */</p>\n\n<p>Then it prints those extra newlines and spaces along with word too, which according to me should not happen because of the IN and OUT flags.\nThe output is like this:\n<a href=\"https://i.stack.imgur.com/0HmjR.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nI request you to please help me out.</p>\n\n<p><em>I know I can do this easily with the putchar() method checking one character at one time, but I am just curious as to what I am doing wrong in this implementation.</em></p>\n"}, {"tags": ["c", "paho"], "answers": [{"comments": [{"owner": {"reputation": 1531, "user_id": 407700, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/781b7b8808aa435d573b14e5af8f41e4?s=128&d=identicon&r=PG", "display_name": "Oscar", "link": "https://stackoverflow.com/users/407700/oscar"}, "edited": false, "score": 0, "creation_date": 1614889399, "post_id": 52858766, "comment_id": 117530796, "body": "Thanks! Just encountered this myself. Except it seems that &quot;static&quot; is no longer part of the filename, unless it was eliminated because I ONLY built static... &quot;Linking C static library src/libpaho-mqtt3c.a&quot;"}], "tags": [], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "is_accepted": true, "score": 1, "last_activity_date": 1539790921, "creation_date": 1539790921, "answer_id": 52858766, "question_id": 52840804, "link": "https://stackoverflow.com/questions/52840804/what-are-the-different-eclipse-paho-c-libraries/52858766#52858766", "title": "What are the different Eclipse Paho C Libraries", "body": "<p>Okay, I found my answer. This is from the README from downloading the Darwin prebuilt binaries. I didn't find it in the other readmes.</p>\n\n<ul>\n<li>libmqttv3a.so - asynchronous</li>\n<li>libmqttv3as.so - asynchronous with SSL</li>\n<li>libmqttv3c.so - \"classic\" / synchronous</li>\n<li>libmqttv3cs.so - \"classic\" / synchronous with SSL</li>\n</ul>\n\n<p>So my guesses were correct.</p>\n"}], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 52858766, "answer_count": 1, "score": 1, "last_activity_date": 1539790921, "creation_date": 1539710269, "question_id": 52840804, "link": "https://stackoverflow.com/questions/52840804/what-are-the-different-eclipse-paho-c-libraries", "title": "What are the different Eclipse Paho C Libraries", "body": "<p>I've been searching for the answer to this question but so far have come up dry.</p>\n\n<p>I am building the Eclipse Paho C and C++ libraries. I followed the directions to build the C library using CMake. Because I don't want to distribute the shared libraries to our target machines, I intend to statically link, so I added the flags for that.</p>\n\n<pre><code>cmake -DPAHO_WITH_SSL=TRUE -DPAHO_BUILD_DOCUMENTATION=TRUE -DPAHO_BUILD_STATIC=TRUE ../paho.mqtt.c\nmake\n</code></pre>\n\n<p>This produces the shared libraries as well as four static libraries:</p>\n\n<pre><code>./src/libpaho-mqtt3cs-static.a\n./src/libpaho-mqtt3a-static.a\n./src/libpaho-mqtt3c-static.a\n./src/libpaho-mqtt3as-static.a\n</code></pre>\n\n<p>The contents appear to be the same list of files, but lengths are different, so I presume they are compiled with different options. Clearly one would only link against one library, but I'm not sure what the differences are, so I'm not sure which one to use.</p>\n\n<p>I am guessing that the combinations are:</p>\n\n<ul>\n<li>Synchronous vs. Asynchronous</li>\n<li>SSL vs. no SSL?</li>\n</ul>\n\n<p>If those guesses are correct, then perhaps the a vs. c is async vs. sync (not sure why a c, but whatever), and the ones ending in s.a are the SSL versions. But i'm only guessing.</p>\n\n<p>Does someone definitively know?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 310, "user_id": 7026242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Luj5q.jpg?s=128&g=1", "display_name": "anupam691997", "link": "https://stackoverflow.com/users/7026242/anupam691997"}, "edited": false, "score": 1, "creation_date": 1539708899, "post_id": 52840442, "comment_id": 92596804, "body": "inside the second loop re-initialize sum to 0 every time"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1539709186, "post_id": 52840442, "comment_id": 92596943, "body": "This might be a good moment to learn <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">how to debug small programs</a>. As a side note, this a really nice example of why should variables be created as close as possible to usages."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1539709823, "post_id": 52840442, "comment_id": 92597235, "body": "My TurboC++ sense is tingling, so here&#39;s a somewhat-standard warning. TurboC++ is ancient. It&#39;s going to be hard to find online support as most of what you will find will only go back as far as the C++98 or C99 Standards. (Note that the 98 and 99 refer to 1998 and 1999. Turbo C++ is older than that by about a decade). In addition it can be more difficult to adapt to the workforce because you&#39;ve effectively been trained in the use of the bronze-tipped spear and your competition is using guns. I recommend augmenting your education with a book or two on and practice with modern C++."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1539712935, "post_id": 52840442, "comment_id": 92598781, "body": "Tauqeer, do not move the goalposts on a question once answers start rolling in. Prefer to ask one question per Question. If you find that the answer to you question raises more questions, ask more Questions."}, {"owner": {"reputation": 15, "user_id": 10266961, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dqw7LjshTzc/AAAAAAAAAAI/AAAAAAAAGNo/Zh3qdYs3iYQ/photo.jpg?sz=128", "display_name": "Tauqeer", "link": "https://stackoverflow.com/users/10266961/tauqeer"}, "edited": false, "score": 1, "creation_date": 1539715645, "post_id": 52840442, "comment_id": 92600210, "body": "Ok, I&#39;ll keep that in mind now"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10266961, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dqw7LjshTzc/AAAAAAAAAAI/AAAAAAAAGNo/Zh3qdYs3iYQ/photo.jpg?sz=128", "display_name": "Tauqeer", "link": "https://stackoverflow.com/users/10266961/tauqeer"}, "edited": false, "score": 0, "creation_date": 1539711510, "post_id": 52840621, "comment_id": 92598058, "body": "can you tell me how do i find the largest palindrome, its too hard to find it manually, and i don&#39;t get that how to fit that code in this program."}], "tags": [], "owner": {"reputation": 106, "user_id": 9172922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e821894f5eb57f994cdb80affe49827?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sharma", "link": "https://stackoverflow.com/users/9172922/gaurav-sharma"}, "is_accepted": true, "score": 1, "last_activity_date": 1539709864, "last_edit_date": 1539709864, "creation_date": 1539709518, "answer_id": 52840621, "question_id": 52840442, "link": "https://stackoverflow.com/questions/52840442/largest-palindrome-product-program-not-running-written-solution-but-couldnt/52840621#52840621", "title": "Largest palindrome product - program not running, written solution but couldn&#39;t understand the problem", "body": "<p><code>int sum=0</code> should be inside the inner for loop, just before the line <code>no=i*j</code>:\nFor each new number, the value of the sum should be started from zero. If it is placed at the very beginning, it will take the value of <code>sum</code> generated from the previous <code>no</code> for all coming <code>no</code>.</p>\n\n<p>If you place <code>sum=0</code> inside the <code>j</code> loop before <code>while</code> loop then for each new combination of <code>i*j</code> the sum will start from <code>0</code> and you will 100% get all the desired palindromes</p>\n"}], "owner": {"reputation": 15, "user_id": 10266961, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dqw7LjshTzc/AAAAAAAAAAI/AAAAAAAAGNo/Zh3qdYs3iYQ/photo.jpg?sz=128", "display_name": "Tauqeer", "link": "https://stackoverflow.com/users/10266961/tauqeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52840621, "answer_count": 1, "score": 0, "last_activity_date": 1539712854, "creation_date": 1539708780, "last_edit_date": 1539712854, "question_id": 52840442, "link": "https://stackoverflow.com/questions/52840442/largest-palindrome-product-program-not-running-written-solution-but-couldnt", "title": "Largest palindrome product - program not running, written solution but couldn&#39;t understand the problem", "body": "<p>I knew the code for finding out a palindrome in case of a given number, and I tried to generalize it for finding the largest palindrome made from the product of two 3-digit numbers like this :-</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nvoid main()\n{\n    int i,no,d,j,temp;\n    int sum=0;\n    clrscr();\nfor(i=1;i&lt;1000;i++)\n{\n    for(j=1;j&lt;1000;j++)\n    {       \n           sum=0;\n           no=i*j;\n           temp=no;\n           while(no&gt;0)\n           {\n                 d=no%10;\n                 sum=sum*10 + d;\n                 no=no/10;\n           }\n           if(sum==temp)\n           {\n                 printf(\"number is Palindrome %d\\n\",sum);\n           }\n    }\n}\ngetch();\n}\n</code></pre>\n\n<p>But, I am not getting the solution, can anyone Help?</p>\n"}, {"tags": ["c", "linux-kernel", "embedded-linux"], "comments": [{"owner": {"reputation": 1812, "user_id": 2689839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1pQkd.jpg?s=128&g=1", "display_name": "Parthiban", "link": "https://stackoverflow.com/users/2689839/parthiban"}, "edited": false, "score": 0, "creation_date": 1539707607, "post_id": 52840077, "comment_id": 92596166, "body": "To much generic or incomplete question. Which .o files of Linux Kernel? What is your target architecture? What you are trying to do and what is the question in it?"}, {"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "reply_to_user": {"reputation": 1812, "user_id": 2689839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1pQkd.jpg?s=128&g=1", "display_name": "Parthiban", "link": "https://stackoverflow.com/users/2689839/parthiban"}, "edited": false, "score": 2, "creation_date": 1539707856, "post_id": 52840077, "comment_id": 92596287, "body": "@Parthiban Pretty generic question. Looking for a yes/no and not looking to add any more detail than I have already."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1539708207, "post_id": 52840077, "comment_id": 92596459, "body": "No, it is not safe. Some objects might be removed by the build process. Some C files might be used only with specific config etc.."}, {"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1539708311, "post_id": 52840077, "comment_id": 92596515, "body": "@Eugene Sh. Okay great that&#39;s what I needed to know ty!"}], "owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1539707419, "creation_date": 1539707419, "question_id": 52840077, "link": "https://stackoverflow.com/questions/52840077/o-files-and-the-linux-kernel", "title": ".o files and the Linux kernel", "body": "<p>If I do a kernel build and in some directory there are a host of .o files that were generated. Is it safe to assume that any of the .c files which did not generate a .o file are not being used?</p>\n"}, {"tags": ["c", "code-snippets"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1539705624, "post_id": 52839349, "comment_id": 92595132, "body": "Actually, I&#39;m not sure why the &quot;Correct Output&quot; is not correct in this case, as the rules about multiple side effects on the same object in an expression applies to <i>unsequenced</i> side effects, and there are sequence points within the conditional expression."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1539705947, "post_id": 52839349, "comment_id": 92595306, "body": "hmm only now did I read the question. Are you sure that the bolded lines are not mixed?"}, {"owner": {"reputation": 35, "user_id": 9199867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de09b5d56d1b4d9924155dc21c3c90e2?s=128&d=identicon&r=PG&f=1", "display_name": "Aayush Chachan", "link": "https://stackoverflow.com/users/9199867/aayush-chachan"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539706136, "post_id": 52839349, "comment_id": 92595384, "body": "What do mean by mixed? I didn&#39;t get you properly @AnttiHaapala"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1539706207, "post_id": 52839349, "comment_id": 92595423, "body": "what does the bolded text mean? Didn&#39;t the program print <b>b=22</b> when you ran it?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539706257, "post_id": 52839349, "comment_id": 92595448, "body": "You need to clearly specify what is the output from the program and what you think is the correct output. The way you have specified in the question right now, it is not clear what you mean by &quot;Correct output&quot;"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539706360, "post_id": 52839349, "comment_id": 92595510, "body": "I am pretty sure we&#39;re just all reading incorrectly what OP meant here, and &quot;getting&quot; means: &quot;when I do it on paper or in my mind, I get this result&quot;"}, {"owner": {"reputation": 35, "user_id": 9199867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de09b5d56d1b4d9924155dc21c3c90e2?s=128&d=identicon&r=PG&f=1", "display_name": "Aayush Chachan", "link": "https://stackoverflow.com/users/9199867/aayush-chachan"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539706418, "post_id": 52839349, "comment_id": 92595545, "body": "@AnttiHaapala yes I am getting b=22 only when I ran the code. I was thinking it should it be b=21 but I was wrong. Now I understood how macro function is handled and executed."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1539706468, "post_id": 52839349, "comment_id": 92595570, "body": "For once in the history of SO, some one trusted the compiler and doubted themselves and we went after them!"}, {"owner": {"reputation": 35, "user_id": 9199867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de09b5d56d1b4d9924155dc21c3c90e2?s=128&d=identicon&r=PG&f=1", "display_name": "Aayush Chachan", "link": "https://stackoverflow.com/users/9199867/aayush-chachan"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539706476, "post_id": 52839349, "comment_id": 92595573, "body": "@AjayBrahmakshatriya Yes b=22 is correct."}, {"owner": {"reputation": 35, "user_id": 9199867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de09b5d56d1b4d9924155dc21c3c90e2?s=128&d=identicon&r=PG&f=1", "display_name": "Aayush Chachan", "link": "https://stackoverflow.com/users/9199867/aayush-chachan"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539706535, "post_id": 52839349, "comment_id": 92595611, "body": "@AnttiHaapala Thanks for sharing that link. My doubt is cleared"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1539706547, "post_id": 52839349, "comment_id": 92595619, "body": "@AayushChachan see the question linked as duplicate. The answers in it describe why <code>b</code> is incremented twice here."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1539706561, "post_id": 52839349, "comment_id": 92595623, "body": "@AayushChachan yea I edited your question, please be careful with your wording. When you wrote that you&#39;re <i>getting</i> this result, we thought that the program produced that result."}, {"owner": {"reputation": 35, "user_id": 9199867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de09b5d56d1b4d9924155dc21c3c90e2?s=128&d=identicon&r=PG&f=1", "display_name": "Aayush Chachan", "link": "https://stackoverflow.com/users/9199867/aayush-chachan"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539706655, "post_id": 52839349, "comment_id": 92595670, "body": "@AnttiHaapala I&#39;ll take care of this from next time. Thanks again"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539707905, "post_id": 52839349, "comment_id": 92596308, "body": "@AnttiHaapala Thanks for editing the question to clarify what OP meant. I thought I must be going crazy!"}, {"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1539712794, "post_id": 52839349, "comment_id": 92598713, "body": "This is a macro side-effect if you interpret this macro it would mean: <code>l = a++&gt;=b++?a++:b++;</code>... And you can clearly see <b>b</b> is added two times here... First when it is checked and second when it is returned... But since it is a post-increment operator... The first one executes and the second one executes after this line completes... That is when you print it..."}], "owner": {"reputation": 35, "user_id": 9199867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de09b5d56d1b4d9924155dc21c3c90e2?s=128&d=identicon&r=PG&f=1", "display_name": "Aayush Chachan", "link": "https://stackoverflow.com/users/9199867/aayush-chachan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1539704939, "answer_count": 0, "score": 0, "last_activity_date": 1539706523, "creation_date": 1539704767, "last_edit_date": 1539706523, "question_id": 52839349, "link": "https://stackoverflow.com/questions/52839349/can-someone-please-explain-this-output", "closed_reason": "Duplicate", "title": "Can someone please explain this output?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#define LARGEST(x,y) (x&gt;=y)?x:y\nint main()\n{\n    int a=10,b=20,l=0;\n    l=LARGEST(a++,b++);\n    printf(\"a=%d,b=%d,largest=%d\",a,b,l);\n    return 0;\n}\n</code></pre>\n\n<p><strong>I thought it should output <code>a=11,b=21,largest=21</code>.</strong></p>\n\n<p><strong>But when I run it, the output is<code>a=11,b=22,largest=21</code>!</strong></p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 1, "creation_date": 1539704231, "post_id": 52839139, "comment_id": 92594305, "body": "<code>printf</code> has nothing to do with why <code>&quot;space farers&quot;</code> decays to <code>char *</code> here."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 0, "creation_date": 1539704269, "post_id": 52839139, "comment_id": 92594322, "body": "@trentcl It does in that <code>printf</code> is a function, so yes it has something to do with why."}, {"owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "edited": false, "score": 0, "creation_date": 1539704344, "post_id": 52839139, "comment_id": 92594360, "body": "sorry, I am trying to learn the tough topic. Is it char* or *char?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "edited": false, "score": 2, "creation_date": 1539704362, "post_id": 52839139, "comment_id": 92594373, "body": "@riderdragon It&#39;s <code>char*</code>. <code>char*</code> says <i>a pointer to a <code>char</code></i>. The syntax you mentioned is called dereferencing and that&#39;s used to get the value of what the pointer is pointing to."}, {"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 4, "creation_date": 1539705148, "post_id": 52839139, "comment_id": 92594841, "body": "<code>&quot;space farers&quot;</code> <i>isn&#39;t</i> passed to the function. It&#39;s the argument of the dereference operator <code>*</code>."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 0, "last_activity_date": 1539704351, "last_edit_date": 1539704351, "creation_date": 1539704099, "answer_id": 52839139, "question_id": 52839067, "link": "https://stackoverflow.com/questions/52839067/the-address-of-space-farers-pointer-to/52839139#52839139", "title": "the address of `*&quot;space farers&quot;` pointer to", "body": "<p><code>\"space farers\"</code>is of type <code>char[]</code>. When passed to a function (<code>printf</code> in this case) it decays to <code>char*</code> and so <code>*\"space farers\"</code> is of type <code>char</code> and holds <code>'s'</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 3, "creation_date": 1539704937, "post_id": 52839199, "comment_id": 92594706, "body": "I would say this is incorrect by omission. A string literal is an array and C <i>may</i> handle this  - <i>depending on context</i> - by converting it to a pointer to the first element (character). See: <a href=\"https://godbolt.org/z/ckDEZK\" rel=\"nofollow noreferrer\">godbolt.org/z/ckDEZK</a> - if what you say in your answer was universally true, the static assertion would pass - but it fails instead."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1539706072, "post_id": 52839199, "comment_id": 92595365, "body": "For a rep 89 person I think we need to pitch the answer at the appropriate level"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1539708428, "post_id": 52839199, "comment_id": 92596576, "body": "How does the 89 begin to explain it... more so than the title of the book?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1539763323, "post_id": 52839199, "comment_id": 92615614, "body": "regardless I think that adding a note saying &quot;(this is a simplification which doesn&#39;t always apply)&quot; would make the answer more correct and not make it less useful for beginners."}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 3, "last_activity_date": 1539704259, "creation_date": 1539704259, "answer_id": 52839199, "question_id": 52839067, "link": "https://stackoverflow.com/questions/52839067/the-address-of-space-farers-pointer-to/52839199#52839199", "title": "the address of `*&quot;space farers&quot;` pointer to", "body": "<p><code>\"space farers\"</code> is a sequence of characters. C handles this by treating it as a pointer to the first character. This is why you see</p>\n\n<pre><code>char * str = \"space farers\";\n</code></pre>\n\n<p><code>*xx</code> says 'return what this pointer xx points at'. For  <code>*\"space farers\"</code> thats the first character of the string, ie <code>s</code>.</p>\n\n<p>A clearer way would be</p>\n\n<pre><code> char * str = \"space farers\";\n char s = *str;\n</code></pre>\n\n<p>this removes the strange <code>*\"....\"</code> construct;</p>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 3, "last_activity_date": 1539707141, "last_edit_date": 1539707141, "creation_date": 1539705420, "answer_id": 52839523, "question_id": 52839067, "link": "https://stackoverflow.com/questions/52839067/the-address-of-space-farers-pointer-to/52839523#52839523", "title": "the address of `*&quot;space farers&quot;` pointer to", "body": "<p><code>\"space farers\"</code> is a string literal - a string literal is an <a href=\"https://stackoverflow.com/questions/579421/often-used-seldom-defined-terms-lvalue\"><em>lvalue</em></a> in C is of type <code>char [n]</code> where <code>n</code> is the number of characters in the literal plus one for the null terminator. In this case it is 13.</p>\n\n<p>In almost all contexts an lvalue of array type decays to a pointer to the first element. Since the elements are of type <code>char</code>, the value after decay is of type <code>char *</code>.</p>\n\n<p>The <code>*</code> dereferences the given pointer, which results to an lvalue of the element type - here of type <code>char</code>. This then is evaluated for its value - i.e. the value of the first character, which is integer <code>'s'</code> (115 if ASCII is the execution character).</p>\n\n<hr>\n\n<p>TL;DR:</p>\n\n<p><code>*\"space farers\"</code> in itself is not an address, but an <em>lvalue</em> of type <code>char</code> that is the first character in the string. You can take an address of an <em>lvalue</em> with the <code>&amp;</code> operator.</p>\n\n<hr>\n\n<p>P.S. String literals, and string values are <strong>not</strong> pointers, but arrays.</p>\n"}, {"comments": [{"owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "edited": false, "score": 0, "creation_date": 1539731807, "post_id": 52839948, "comment_id": 92606437, "body": "so any array  such as <code>{1, 2, 3}</code> is a pointer in its nature?"}, {"owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "edited": false, "score": 0, "creation_date": 1539733022, "post_id": 52839948, "comment_id": 92606701, "body": "&quot;space farers&quot; is equivalent to {&#39;s&#39;, &#39;p&#39;,&#39;a&#39;,...}, but *{&#39;s&#39;,&#39;p&#39;,&#39;a&#39;,...} does not work."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "edited": false, "score": 1, "creation_date": 1539734640, "post_id": 52839948, "comment_id": 92607055, "body": "@riderdragon:  No, arrays are not pointers; array <i>expressions</i> are converted to pointer expressions as necessary, but array <i>objects</i> are not pointers.  The brace notation only works in an initializer."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 3, "last_activity_date": 1539706974, "creation_date": 1539706974, "answer_id": 52839948, "question_id": 52839067, "link": "https://stackoverflow.com/questions/52839067/the-address-of-space-farers-pointer-to/52839948#52839948", "title": "the address of `*&quot;space farers&quot;` pointer to", "body": "<p>Under most circumstances, an <em>expression</em> of type \"N-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array.  The exceptions occur when the array expression is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize a character array in a declaration.</p>\n\n<p>Thus, for any array</p>\n\n<pre><code>T arr[N];\n</code></pre>\n\n<p>the expression <code>arr</code> will \"decay\" to type \"pointer to <code>T</code>\", and the value will be the same as <code>&amp;arr[0]</code>.  </p>\n\n<p>The <em>expression</em> <code>\"space farers\"</code> has type \"13-element array of <code>char</code>\".  Since it isn't the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, and it isn't being used to initialize a character array in a declaration, it \"decays\" to an expression of type <code>char *</code>, and the value of the expression is the address of the first element of the array.  Just as <code>*arr</code> is equivalent to <code>arr[0]</code>, <code>*\"space farers\"</code> is equivalent to <code>\"space farers\"[0]</code>, and gives us the <em>value</em> stored in the first element of the array - the character value <code>'s'</code>.  </p>\n"}], "owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 52839948, "answer_count": 4, "score": 0, "last_activity_date": 1539707141, "creation_date": 1539703861, "question_id": 52839067, "link": "https://stackoverflow.com/questions/52839067/the-address-of-space-farers-pointer-to", "title": "the address of `*&quot;space farers&quot;` pointer to", "body": "<p>I am following the \"C Primer Plus\" and encounter the following codes:</p>\n\n<pre><code>//strptr.c -- strings are pointers\n#include &lt;stdio.h&gt;\nint main(void)\n{\n    printf(\"%s, %p, %c\\n\", \"We\", \"are\", *\"space farers\");\n\n    return 0;\n}\n</code></pre>\n\n<p>Run it and come by:</p>\n\n<pre><code>./a.out\nWe, 0x1066e4fa1, s\n</code></pre>\n\n<p>Reference to the <code>*\"space farers\"</code>, the book explains that:</p>\n\n<blockquote>\n  <p>*\"space farers\" should produce the value to which the address points, which should be the first character of the string \"space farers\".</p>\n</blockquote>\n\n<p>Does it mean that <code>*\"space farers\"</code> is an address?<br>\nThere's no pointers declared in the head?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1539704176, "post_id": 52839057, "comment_id": 92594273, "body": "what <code>combinations[k] = day[x],&quot;.&quot;,month[y],&quot;.&quot;,year[0];</code> is supposed to do? btw, <code>day[30]</code> should be <code>day[31]</code>"}, {"owner": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1539704357, "post_id": 52839057, "comment_id": 92594369, "body": "its supposed to do &quot;01.01.2000 ..... 31.12.2001&quot;"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1539704526, "post_id": 52839057, "comment_id": 92594461, "body": "combinations array is <code>int</code>, and you&#39;re trying to convert ints to string and concatenate them, it is not how it works in c"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539704539, "post_id": 52839057, "comment_id": 92594471, "body": "<code>,</code> is a comma operator, it works similar to <code>;</code>. In this case <code>combinations[k] = day[x],&quot;.&quot;,month[y],&quot;.&quot;,year[0];</code> is just <code>combinations[k] = day[x]; &quot;.&quot;; month[y]; &quot;.&quot;; year[0];</code> which is just <code>combinations[k] = day[x];</code>. C is not php."}, {"owner": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "edited": false, "score": 0, "creation_date": 1539704808, "post_id": 52839057, "comment_id": 92594621, "body": "any ideas how to fix it ? when I do day[x] + &quot;.&quot; + month[y] + &quot;.&quot; + ...  ; it says it cant add pointers :("}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539704954, "post_id": 52839057, "comment_id": 92594717, "body": "There is much work needed. You want a string? You need to convert all integers into a string, concatenate that with your custom parts, probably you will go for <code>snprintf</code> and declare <code>combinations</code> as an array of arrays of characters (an array of strings) or an array of pointers to characters and handle dynamic memory allocation and dealocation. An advice would be to grab a good C book and learn about strings in C."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539705171, "post_id": 52839057, "comment_id": 92594855, "body": "You have undefined behavior in your program when accessing day and month in the loop. <code>day</code> is declared as <code>int[30]</code> so it has 30 elements, not 31. The indexing start from zero, so the max index is 29. Yet in the loop for <code>(int i = 1; i &lt;= 31; i++) {     day[i - 1] = i;</code> once <code>i = 31</code> then <code>day[30] = 31</code>, which is accesses the memory out of bound"}, {"owner": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "edited": false, "score": 0, "creation_date": 1539705234, "post_id": 52839057, "comment_id": 92594887, "body": "can you please tell me how to start to snprintf ?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1539705318, "post_id": 52839057, "comment_id": 92594950, "body": "Stackoverflow is not a learning site..... You can pretty much find everything on the net, including <a href=\"https://www.systutorials.com/docs/linux/man/3p-snprintf/\" rel=\"nofollow noreferrer\">documenatation</a> and <a href=\"http://joequery.me/code/snprintf-c/\" rel=\"nofollow noreferrer\">cool tutorials</a>. Just google <code>snprintf tutorial</code> and such..."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "edited": false, "score": 0, "creation_date": 1539706546, "post_id": 52839690, "comment_id": 92595618, "body": "I want to save it as a string, do I have to convert it to char ?"}, {"owner": {"reputation": 377, "user_id": 9493000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Pedro Lima", "link": "https://stackoverflow.com/users/9493000/pedro-lima"}, "reply_to_user": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "edited": false, "score": 0, "creation_date": 1539706801, "post_id": 52839690, "comment_id": 92595746, "body": "No you dont xD It&#39;s much easier to simply do a struct with 3 fields(year, month and  day). You make an array of that and in each iteration of the inner cycle (where i wrote &quot;combination code goes here&quot;) you set each field with the day,month,year values which are the index of the cycles."}, {"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "reply_to_user": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "edited": false, "score": 0, "creation_date": 1539706811, "post_id": 52839690, "comment_id": 92595751, "body": "@\u0421\u0442\u0435\u043f\u0430\u043d\u0411\u0430\u043d\u0434\u0435\u0440\u0430 keep in mind that what we call a &quot;string&quot; is actually a <code>char*</code>"}, {"owner": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "edited": false, "score": 0, "creation_date": 1539707273, "post_id": 52839690, "comment_id": 92595987, "body": "aren`t structs kinda OOP ?"}, {"owner": {"reputation": 377, "user_id": 9493000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Pedro Lima", "link": "https://stackoverflow.com/users/9493000/pedro-lima"}, "edited": false, "score": 0, "creation_date": 1539707411, "post_id": 52839690, "comment_id": 92596057, "body": "No, a class and a struct are two entirely diferent things. Can look kinda similar at a first glance, but dont mix things up!"}], "tags": [], "owner": {"reputation": 377, "user_id": 9493000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Pedro Lima", "link": "https://stackoverflow.com/users/9493000/pedro-lima"}, "is_accepted": false, "score": 1, "last_activity_date": 1539706008, "creation_date": 1539706008, "answer_id": 52839690, "question_id": 52839057, "link": "https://stackoverflow.com/questions/52839057/how-to-print-out-all-combinations/52839690#52839690", "title": "How to print out all combinations?", "body": "<p>First of all, quick mistakes there:</p>\n\n<ul>\n<li>In the second for-cycle you are printing the day array, the only reason the outut there is correct is because the numbers are the same and the cycle stop at 12. Anyways, you should fix that, for the sake of good programing.</li>\n<li>The last cyle shouldnt be done like that, you are literally asking for bugs. Divide that cycle to 3 different ones. The outside cycle is the year, it will be executed twice (2000, 2001), the inner cycle will iterate 12 times( that will be the month) and the last one will iterate 31 times (that will be the days)</li>\n</ul>\n\n<p>Doing it like this, makes it much easier to read and to do it right, since in your code that cycle will only be executed twice, since Z stops at 2 and you increase it every iteration. </p>\n\n<pre><code>for(year = 0; year &lt; 2 ; year ++)\n    for(month = 0; month &lt; 12; month ++)\n        for(day = 0; day &lt; 31; day++)\n            //combination code goes here\n</code></pre>\n\n<p>Last things, if you want to save the date you cant make it like an int, unless you sum the days and use it as a reference, if you want something like \"11-05-2000\" you either creat a struct for that or save it as string. Second you are assuming 31 for every month...</p>\n\n<p>Any further question, as you may have, feel free to ask :) </p>\n"}, {"comments": [{"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1539706745, "post_id": 52839846, "comment_id": 92595721, "body": "please provide an explanation for your answer.  only having a code block will not suffice for most users."}, {"owner": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "edited": false, "score": 0, "creation_date": 1539706902, "post_id": 52839846, "comment_id": 92595804, "body": "Yesss ! It works, thanks man, I will try to understand this code :) it s greatly appericated"}, {"owner": {"reputation": 310, "user_id": 7026242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Luj5q.jpg?s=128&g=1", "display_name": "anupam691997", "link": "https://stackoverflow.com/users/7026242/anupam691997"}, "reply_to_user": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1539707953, "post_id": 52839846, "comment_id": 92596334, "body": "@Tau you should have seen the code, i have explained the code in comments"}, {"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1539708099, "post_id": 52839846, "comment_id": 92596409, "body": "apologies, i had only glanced at your post when i posted the previous comment."}, {"owner": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "edited": false, "score": 0, "creation_date": 1539709323, "post_id": 52839846, "comment_id": 92597013, "body": "but how to save it to file <code>FILE *f = fopen(&quot;all_dates.txt&quot;, &quot;w&quot;); \tfor (int a = 0; a &lt; 744; a++) \t{ \t\tfwrite(&quot;Combination: %d.%d.%d\\n&quot;, combinations1[a], combinations2[a], combinations3[a], f); \t}</code> this doesnt work..."}], "tags": [], "owner": {"reputation": 310, "user_id": 7026242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Luj5q.jpg?s=128&g=1", "display_name": "anupam691997", "link": "https://stackoverflow.com/users/7026242/anupam691997"}, "is_accepted": true, "score": 0, "last_activity_date": 1539707924, "last_edit_date": 1539707924, "creation_date": 1539706626, "answer_id": 52839846, "question_id": 52839057, "link": "https://stackoverflow.com/questions/52839057/how-to-print-out-all-combinations/52839846#52839846", "title": "How to print out all combinations?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n\n//changed days to 31 and months to 12\n\nint day[31],\n    month[12],\n    year[2] = { 2000, 2001 };\n\n//made three arrays one for days,one for months,one for year storage, or you can use structure array, structure should have three fields\nint combinations1[744];\nint combinations2[744];\nint combinations3[744];\n\nprintf(\"Days:\\n\");\n\n\nfor (int i = 1; i &lt;= 31; i++)\n{\n    day[i - 1] = i;\n    printf(\"%d \", day[i-1]);\n}\n\nprintf(\"\\n\\nMonth:\\n\");\n\nfor (int j = 1; j &lt;= 12; j++)\n{\n    month[j - 1] = j;\n    printf(\"%d \", day[j - 1]);\n}\n\nprintf(\"\\n\\nYear:\\n%d %d\\n\\n\", year[0], year[1]);\n\nint x,y,z,k=0;\n\n//this will be code for storing all combination of days, looping through all days of a month of a year, then to next month and finally to next year\n\nfor(x = 0; x &lt; 2 ; x ++)\n{\n    for(y = 0; y &lt; 12; y ++)\n    {\n        for(z = 0; z &lt; 31; z++)\n    {   \n    combinations1[k]=z+1;\n    combinations2[k]=y+1;\n    combinations3[k]=year[x];   \nk++;\n}\n}\n}\n\n// printing all combinations\n\nfor (int a = 0; a &lt; 744; a++)\n{\n    printf(\"Combination: %d.%d.%d\\n\", combinations1[a],combinations2[a],combinations3[a]);\n}\n\n//getch();\n}\n</code></pre>\n\n<p>I have explained the code in comments. Please read the comments to understand</p>\n"}], "owner": {"reputation": 71, "user_id": 10129123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BICUytQ4qAM/AAAAAAAAAAI/AAAAAAAACow/2pdu_YtkeyA/photo.jpg?sz=128", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/10129123/yuriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 52839846, "answer_count": 2, "score": -2, "last_activity_date": 1539707924, "creation_date": 1539703833, "question_id": 52839057, "link": "https://stackoverflow.com/questions/52839057/how-to-print-out-all-combinations", "title": "How to print out all combinations?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\nint day[30],\n    month[11],\n    year[2] = { 2000, 2001 };\nint combinations[743];\n\nprintf(\"Days:\\n\");\n\nfor (int i = 1; i &lt;= 31; i++)\n{\n    day[i - 1] = i;\n    printf(\"%d \", day[i-1]);\n}\n\nprintf(\"\\n\\nMonth:\\n\");\n\nfor (int j = 1; j &lt;= 12; j++)\n{\n    month[j - 1] = j;\n    printf(\"%d \", day[j - 1]);\n}\n\nprintf(\"\\n\\nYear:\\n%d %d\\n\\n\", year[0], year[1]);\n\nfor (int x = 0, y = 0, z = 0, k = 0;\n    x &lt;= 30, y &lt;= 11, z &lt;= 1, k &lt;= 743;\n    x++, y++, z++, k++)\n{\n    if (x == 31)\n    {\n        x = 0;\n    }\n\n    if (y == 11)\n    {\n        y = 0;\n    }\n\n    combinations[k] = day[x],\".\",month[y],\".\",year[0];\n}\n\nfor (int a = 0; a &lt;= 20; a++)\n{\n    printf(\"Combination: %d \\n\", combinations[a]);\n}\n\ngetch();}\n</code></pre>\n\n<p>I want to make a program that prints out all combinations for birthdays for 2000,2001 people, but I get something weird in the output </p>\n\n<p>It looks like this:</p>\n\n<p>Days:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31</p>\n\n<p>Month:\n1 2 3 4 5 6 7 8 9 10 11 12</p>\n\n<p>Year:\n2000 2001</p>\n\n<p>Combination: 1\nCombination: 2\nCombination: 3\nCombination: 4\nCombination: 5\nCombination: 6\nCombination: 7\nCombination: 8\nCombination: 9\nCombination: 10\nCombination: 11\nCombination: 12\nCombination: 13\nCombination: 14\nCombination: 15\nCombination: 16\nCombination: 17\nCombination: 18\nCombination: 19\nCombination: 20\nCombination: 21</p>\n"}, {"tags": ["c", "crc32"], "comments": [{"owner": {"reputation": 14614, "user_id": 236528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a221fd62b8d25184a812d1d270e691c1?s=128&d=identicon&r=PG", "display_name": "mjuarez", "link": "https://stackoverflow.com/users/236528/mjuarez"}, "edited": false, "score": 0, "creation_date": 1539703067, "post_id": 52838711, "comment_id": 92593579, "body": "You could use the library mentioned here: <a href=\"https://stackoverflow.com/questions/302914/crc32-c-or-c-implementation\" title=\"crc32 c or c implementation\">stackoverflow.com/questions/302914/crc32-c-or-c-implementati&zwnj;&#8203;on</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1539703431, "post_id": 52838711, "comment_id": 92593802, "body": "What the data represents is irrelevant, any CRC function should just treat the data as a series of bytes."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539703437, "post_id": 52838711, "comment_id": 92593805, "body": "By using bitwise XOR. This isn&#39;t the place to ask for the complete code with no attempts shown. But you shouldn&#39;t need to roll out this code manually either, look for a reliable implementation on the internet instead."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539711591, "post_id": 52838711, "comment_id": 92598104, "body": "Posting text as <i>text</i> is more useful and considerate rather than as a <i>picture</i>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539712298, "post_id": 52838711, "comment_id": 92598466, "body": "The only variable here is the byte order, and you only have two choices.  Use the example you have and try it one way and the other until you get the expected value."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1539713186, "post_id": 52838711, "comment_id": 92598897, "body": "You need to know the <a href=\"https://en.wikipedia.org/wiki/Cyclic_redundancy_check#Polynomial_representations_of_cyclic_redundancy_checks\" rel=\"nofollow noreferrer\">CRC polynomial</a>, which is not shown in that image."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539718360, "post_id": 52838711, "comment_id": 92601473, "body": "You will not need to swap the byte order if your target is little-endian (for example a PC).  There are any number of CRC-32 implementations available.  Start with one of those and ask a <i>specific</i> question if you have difficulties."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1539718557, "post_id": 52838711, "comment_id": 92601569, "body": "@user3386109 : Unless explicitly stated otherwise, you can normally assume thet &quot;CRC-32&quot; refers to the standard CRC-32-IEEE polynomial, as used to HDLC, Ethernet etc."}, {"owner": {"reputation": 6079, "user_id": 34989, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f16eae47ba215ccc1fe3f05f1750adc?s=128&d=identicon&r=PG", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/34989/gerhard"}, "edited": false, "score": 0, "creation_date": 1539847908, "post_id": 52838711, "comment_id": 92651604, "body": "I always use <i>A painless guide to crc error detection algorithms</i> @ <a href=\"http://www.ross.net/crc/crcpaper.html\" rel=\"nofollow noreferrer\">ross.net/crc/crcpaper.html</a> It includes C source code."}], "answers": [{"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1539722104, "post_id": 52841752, "comment_id": 92603263, "body": "It is a solution, but for such small data payloads, the look-up table method is probably unnecessary - a lot of memory used for an unnecessary performance improvement.  Moreover there are smarter ways of handling MSB/LSB without duplicating the code, and the <code>reflect</code> functions can be avoided too."}], "tags": [], "owner": {"reputation": 41, "user_id": 8543044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c92993b6b5f1666a683e2cafe84fb68?s=128&d=identicon&r=PG&f=1", "display_name": "Eerik", "link": "https://stackoverflow.com/users/8543044/eerik"}, "is_accepted": false, "score": 0, "last_activity_date": 1539718899, "last_edit_date": 1539718899, "creation_date": 1539714124, "answer_id": 52841752, "question_id": 52838711, "link": "https://stackoverflow.com/questions/52838711/how-to-calculate-a-crc-32-from-16-bit-data/52841752#52841752", "title": "How to calculate a CRC-32 from 16-bit data?", "body": "<p>I managed to get the correct CRC32 online (<a href=\"http://www.sunshine2k.de/coding/javascript/crc/crc_js.html\" rel=\"nofollow noreferrer\">Link to online CRC page</a>). </p>\n\n<p>I swapped the byte order of the 8-bit pairs.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VHSxu.png\" rel=\"nofollow noreferrer\">Screen dump of CRC32 calculation</a> </p>\n\n<p>And also managed to solve the C implementation (don't know if this is the optimal solution):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n\nuint16_t data[15] = {\n    0x0000, 0x083A, 0x0000, 0xFFF7, 0x0000, 0xFFFE, 0x0000, 0x0001, 0x5001, 0x0003, 0xE00A, 0x0015, 0xC009, 0x0320, 0x8A54\n};\n\nconst uint32_t crcTable[] = {\n0x00000000, 0x04C11DB7, 0x09823B6E, 0x0D4326D9, 0x130476DC, 0x17C56B6B, 0x1A864DB2, 0x1E475005, \n0x2608EDB8, 0x22C9F00F, 0x2F8AD6D6, 0x2B4BCB61, 0x350C9B64, 0x31CD86D3, 0x3C8EA00A, 0x384FBDBD, \n0x4C11DB70, 0x48D0C6C7, 0x4593E01E, 0x4152FDA9, 0x5F15ADAC, 0x5BD4B01B, 0x569796C2, 0x52568B75, \n0x6A1936C8, 0x6ED82B7F, 0x639B0DA6, 0x675A1011, 0x791D4014, 0x7DDC5DA3, 0x709F7B7A, 0x745E66CD, \n0x9823B6E0, 0x9CE2AB57, 0x91A18D8E, 0x95609039, 0x8B27C03C, 0x8FE6DD8B, 0x82A5FB52, 0x8664E6E5, \n0xBE2B5B58, 0xBAEA46EF, 0xB7A96036, 0xB3687D81, 0xAD2F2D84, 0xA9EE3033, 0xA4AD16EA, 0xA06C0B5D, \n0xD4326D90, 0xD0F37027, 0xDDB056FE, 0xD9714B49, 0xC7361B4C, 0xC3F706FB, 0xCEB42022, 0xCA753D95, \n0xF23A8028, 0xF6FB9D9F, 0xFBB8BB46, 0xFF79A6F1, 0xE13EF6F4, 0xE5FFEB43, 0xE8BCCD9A, 0xEC7DD02D, \n0x34867077, 0x30476DC0, 0x3D044B19, 0x39C556AE, 0x278206AB, 0x23431B1C, 0x2E003DC5, 0x2AC12072, \n0x128E9DCF, 0x164F8078, 0x1B0CA6A1, 0x1FCDBB16, 0x018AEB13, 0x054BF6A4, 0x0808D07D, 0x0CC9CDCA, \n0x7897AB07, 0x7C56B6B0, 0x71159069, 0x75D48DDE, 0x6B93DDDB, 0x6F52C06C, 0x6211E6B5, 0x66D0FB02, \n0x5E9F46BF, 0x5A5E5B08, 0x571D7DD1, 0x53DC6066, 0x4D9B3063, 0x495A2DD4, 0x44190B0D, 0x40D816BA, \n0xACA5C697, 0xA864DB20, 0xA527FDF9, 0xA1E6E04E, 0xBFA1B04B, 0xBB60ADFC, 0xB6238B25, 0xB2E29692, \n0x8AAD2B2F, 0x8E6C3698, 0x832F1041, 0x87EE0DF6, 0x99A95DF3, 0x9D684044, 0x902B669D, 0x94EA7B2A, \n0xE0B41DE7, 0xE4750050, 0xE9362689, 0xEDF73B3E, 0xF3B06B3B, 0xF771768C, 0xFA325055, 0xFEF34DE2, \n0xC6BCF05F, 0xC27DEDE8, 0xCF3ECB31, 0xCBFFD686, 0xD5B88683, 0xD1799B34, 0xDC3ABDED, 0xD8FBA05A, \n0x690CE0EE, 0x6DCDFD59, 0x608EDB80, 0x644FC637, 0x7A089632, 0x7EC98B85, 0x738AAD5C, 0x774BB0EB, \n0x4F040D56, 0x4BC510E1, 0x46863638, 0x42472B8F, 0x5C007B8A, 0x58C1663D, 0x558240E4, 0x51435D53, \n0x251D3B9E, 0x21DC2629, 0x2C9F00F0, 0x285E1D47, 0x36194D42, 0x32D850F5, 0x3F9B762C, 0x3B5A6B9B, \n0x0315D626, 0x07D4CB91, 0x0A97ED48, 0x0E56F0FF, 0x1011A0FA, 0x14D0BD4D, 0x19939B94, 0x1D528623, \n0xF12F560E, 0xF5EE4BB9, 0xF8AD6D60, 0xFC6C70D7, 0xE22B20D2, 0xE6EA3D65, 0xEBA91BBC, 0xEF68060B, \n0xD727BBB6, 0xD3E6A601, 0xDEA580D8, 0xDA649D6F, 0xC423CD6A, 0xC0E2D0DD, 0xCDA1F604, 0xC960EBB3, \n0xBD3E8D7E, 0xB9FF90C9, 0xB4BCB610, 0xB07DABA7, 0xAE3AFBA2, 0xAAFBE615, 0xA7B8C0CC, 0xA379DD7B, \n0x9B3660C6, 0x9FF77D71, 0x92B45BA8, 0x9675461F, 0x8832161A, 0x8CF30BAD, 0x81B02D74, 0x857130C3, \n0x5D8A9099, 0x594B8D2E, 0x5408ABF7, 0x50C9B640, 0x4E8EE645, 0x4A4FFBF2, 0x470CDD2B, 0x43CDC09C, \n0x7B827D21, 0x7F436096, 0x7200464F, 0x76C15BF8, 0x68860BFD, 0x6C47164A, 0x61043093, 0x65C52D24, \n0x119B4BE9, 0x155A565E, 0x18197087, 0x1CD86D30, 0x029F3D35, 0x065E2082, 0x0B1D065B, 0x0FDC1BEC, \n0x3793A651, 0x3352BBE6, 0x3E119D3F, 0x3AD08088, 0x2497D08D, 0x2056CD3A, 0x2D15EBE3, 0x29D4F654, \n0xC5A92679, 0xC1683BCE, 0xCC2B1D17, 0xC8EA00A0, 0xD6AD50A5, 0xD26C4D12, 0xDF2F6BCB, 0xDBEE767C, \n0xE3A1CBC1, 0xE760D676, 0xEA23F0AF, 0xEEE2ED18, 0xF0A5BD1D, 0xF464A0AA, 0xF9278673, 0xFDE69BC4, \n0x89B8FD09, 0x8D79E0BE, 0x803AC667, 0x84FBDBD0, 0x9ABC8BD5, 0x9E7D9662, 0x933EB0BB, 0x97FFAD0C, \n0xAFB010B1, 0xAB710D06, 0xA6322BDF, 0xA2F33668, 0xBCB4666D, 0xB8757BDA, 0xB5365D03, 0xB1F740B4 \n};\n\nuint8_t reflect8(uint8_t b) {\n    uint8_t from = 0x01;\n    uint8_t to = 0x80;\n    uint8_t r = 0;\n    while(to)\n    {\n        if(b &amp; from) r |= to;\n        from &lt;&lt;= 1;\n        to &gt;&gt;= 1;\n    }\n    return r;\n}\n\nuint32_t reflect32(uint32_t b) {\n    uint32_t from = 0x00000001;\n    uint32_t to = 0x80000000;\n    uint32_t r = 0;\n    while(to)\n    {\n        if(b &amp; from) r |= to;\n        from &lt;&lt;= 1;\n        to &gt;&gt;= 1;\n    }\n    return r;\n}\n\nuint32_t\ncrc32 (const uint16_t *buf, size_t size)\n{\n  uint32_t crc;\n\n  crc = 0xFFFFFFFF; /* CRC is set to specified initial value */\n  while (size--)\n  {\n    /* Take LSB */\n\n    uint8_t b = reflect8(*buf); /* Reflect input byte */\n\n    /* XOR-in next input byte into MSB of crc and get this MSB, that's our new intermediate divident */\n    uint8_t pos = (uint8_t)((crc ^ (b &lt;&lt; 24)) &gt;&gt; 24);\n\n    /* Shift out the MSB used for division per lookuptable and XOR with the remainder */\n    crc = (crc &lt;&lt; 8) ^ crcTable[pos];\n\n    /* Take MSB */\n\n    b = reflect8(*buf &gt;&gt; 8); /* Reflect input byte */\n    buf++;\n\n    /* XOR-in next input byte into MSB of crc and get this MSB, that's our new intermediate divident */\n    pos = (uint8_t)((crc ^ (b &lt;&lt; 24)) &gt;&gt; 24);\n\n    /* Shift out the MSB used for division per lookuptable and XOR with the remainder */\n    crc = (crc &lt;&lt; 8) ^ crcTable[pos];\n  }\n  /* Reflect result crc */\n  crc = reflect32(crc);\n  /* Xor the crc value with specified final XOR value before returning */\n  return crc ^ 0xFFFFFFFF;\n}\n\n\nint\nmain ()\n{\n  uint32_t crc = crc32(data, 15);\n  printf(\"CRC = 0x%\" PRIx32 \"\\n\", crc);\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 0, "last_activity_date": 1539721551, "creation_date": 1539721551, "answer_id": 52843569, "question_id": 52838711, "link": "https://stackoverflow.com/questions/52838711/how-to-calculate-a-crc-32-from-16-bit-data/52843569#52843569", "title": "How to calculate a CRC-32 from 16-bit data?", "body": "<p>Firstly the actual CRC-32 calculation has been dome many times, and made freely available from many sources. <a href=\"http://www.hackersdelight.org/hdcodetxt/crc.c.txt\" rel=\"nofollow noreferrer\">Here</a> for example are several implementations to choose from, all share the same interface of the form:</p>\n\n<pre><code>unsigned int crc32(unsigned char *message);\n</code></pre>\n\n<p>This is not immediately suited to your needs as it assumes that <code>message</code> is a null-terminated text string rather than binary data, it also assumes a 32-bit <code>int</code>.  So you need to remove those assumptions and explicitly pass the length.  To avoid casting, you could make the data a <code>void*</code>:</p>\n\n<pre><code>uint32_t crc32( void* data, size_t length ) ;\n</code></pre>\n\n<p>Since you entered each value in low-byte/high-byte order in your test, then for a little-endian platform (such as an x86 PC or most ARM devices), then you do not need to swap the byte order</p>\n\n<pre><code>uint32_t crc = crc32( adis16495_data, sizeof(adis16495_data) ) ;\n</code></pre>\n\n<p>So adapting the second example at the link above (because it is the shortest, not because it is necessarily the best - in this case I doubt it matters), and cleaning up the code a little:</p>\n\n<pre><code>uint32_t crc32( void* data, size_t length ) \n{\n   uint32_t byte ;\n   uint32_t mask ;\n   uint32_t crc = 0xFFFFFFFFu;\n   uint8_t* byte_data = (uint8_t*)data ;\n\n   for( int i = 0; i &lt; length; i++) \n   {\n      byte = byte_data[i];            // Get next byte.\n      crc = crc ^ byte;\n      for( int j = 7; j &gt;= 0; j--) \n      {\n         mask = -(crc &amp; 1);\n         crc = (crc &gt;&gt; 1) ^ (0xEDB88320u &amp; mask);\n      }\n   }\n\n   return ~crc;\n} \n</code></pre>\n\n<p>If you your data was in big-endian form, then rather than laboriously swapping the byte order, the the function could be specialised, explicitly for 16 bit data:</p>\n\n<pre><code>uint32_t crc32_16bit( uint16_t* data, size_t count ) \n{\n   uint32_t byte ;\n   uint32_t mask ;\n   uint32_t crc = 0xFFFFFFFFu;\n   size_t length = count * 2 ;\n\n   for( int i = 0; i &lt; length; i++) \n   {\n      // Get next byte, LSB on even i, MSB on odd i\n      byte = (i &amp; 1) == 0) ? data[i] &amp; 0x00FF : \n                             data[i] &gt;&gt; 8 ; \n      crc = crc ^ byte ;\n      for( int j = 7; j &gt;= 0; j--) \n      {\n         mask = -(crc &amp; 1);\n         crc = (crc &gt;&gt; 1) ^ (0xEDB88320u &amp; mask);\n      }\n   }\n\n   return ~crc;\n} \n</code></pre>\n\n<p>In this, the <code>count</code> argument is the number of 16 bit words, not the byte length as before, so it might be called:</p>\n\n<pre><code>uint32_t crc = crc32( adis16495_data, sizeof(adis16495_data) / sizeof(uint16_t) ) ;\n</code></pre>\n\n<p>for example.</p>\n"}], "owner": {"reputation": 295, "user_id": 4828482, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/396eb9b08bc61c82d79fc9552ecf87c9?s=128&d=identicon&r=PG&f=1", "display_name": "Eerik Sweden", "link": "https://stackoverflow.com/users/4828482/eerik-sweden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1794, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1552000157, "creation_date": 1539702782, "last_edit_date": 1552000157, "question_id": 52838711, "link": "https://stackoverflow.com/questions/52838711/how-to-calculate-a-crc-32-from-16-bit-data", "title": "How to calculate a CRC-32 from 16-bit data?", "body": "<p>How would I (in C/C++) calculate the CRC32 from the following 16-bit data?</p>\n\n<p>The data is:</p>\n\n<p>0x0000,\n0x083A,\n0x0000,\n0xFFF7,\n0x0000,\n0xFFFE,\n0x0000,\n0x0001,\n0x5001,\n0x0003,\n0xE00A,\n0x0015,\n0xC009,\n0x0320,\n0x8A54</p>\n\n<p>I assume the CRC32 = 0xB6C815B4 according to the following (from the ADIS16495 datasheet):</p>\n\n<p><a href=\"https://i.stack.imgur.com/z763n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z763n.png\" alt=\"enter image description here\"></a></p>\n\n<p>I managed to get the correct CRC32 online (<a href=\"http://www.sunshine2k.de/coding/javascript/crc/crc_js.html\" rel=\"nofollow noreferrer\">Link to online CRC page</a>). </p>\n\n<p>I swapped the byte order of the 8-bit pairs.</p>\n\n<p>But I don't know how to implement it in C. There is at least a pre-calculated lookup table on the page.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VHSxu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VHSxu.png\" alt=\"Screen dump of CRC32 calculation\"></a> </p>\n"}, {"tags": ["c", "math", "latitude-longitude"], "comments": [{"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 1, "creation_date": 1539702579, "post_id": 52838580, "comment_id": 92593286, "body": "Way too broad for SO. Write some code and we will help you."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1539702703, "post_id": 52838580, "comment_id": 92593355, "body": "<code>Has anybody any idea how a formula can be formed that takes a latitude or longitude as starting point and a distance in [mm] and then returnes the corrected latitude or longitude?</code> There are more than one solution to this. Can you give an example how the data is given?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 2, "creation_date": 1539702758, "post_id": 52838580, "comment_id": 92593386, "body": "It seems more like a math problem than a programming problem."}, {"owner": {"reputation": 13, "user_id": 10098345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a309ea42ec1c9b2d9e69567476d027?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/10098345/marcel"}, "edited": false, "score": 0, "creation_date": 1539703894, "post_id": 52838580, "comment_id": 92594108, "body": "I actually is a math problem. I&#39;ll edit the tags but I&#39;m not sure what else I can do."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539703912, "post_id": 52838580, "comment_id": 92594120, "body": "Given that a GPS has an accuracy of roughly +/-4000mm, you better hand over this project to a professional instead..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539704047, "post_id": 52838580, "comment_id": 92594200, "body": "You may however be able to get some sort of accuracy with 3 axis accelerometers + gyro, nowadays available in MEMS."}, {"owner": {"reputation": 13, "user_id": 10098345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a309ea42ec1c9b2d9e69567476d027?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/10098345/marcel"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1539704075, "post_id": 52838580, "comment_id": 92594218, "body": "@Lundin The location is being fixed using RTK. The accuracy is about +/- 2cm. I&#39;ve edited the question for future replies."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1539714567, "post_id": 52838580, "comment_id": 92599635, "body": "I&#39;d be wary of any conversion done using macros. There&#39;s no guarantee that the calculation is going to be performed using the data type you expect. This, rounding errors may surprise you."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1539762163, "post_id": 52838580, "comment_id": 92615015, "body": "A reading of <a href=\"https://en.wikipedia.org/wiki/Haversine_formula\" rel=\"nofollow noreferrer\">Haversine formula - Wikipedia</a> would help."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10098345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a309ea42ec1c9b2d9e69567476d027?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/10098345/marcel"}, "edited": false, "score": 0, "creation_date": 1539703079, "post_id": 52838721, "comment_id": 92593588, "body": "Thanks for your reply. I&#39;m sure the GPS device has this resolution (it&#39;s RKT fixed using a base station and the accuracy is about +/- 2cm, small enough for this application) Sorry for the misplacement, next time I&#39;ll put it in the right place."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1539703082, "post_id": 52838721, "comment_id": 92593590, "body": "You can&#39;t just use <code>cos()</code> like that unless you have a spherical Earth.  The Earth I know is somewhat oblate."}, {"owner": {"reputation": 13, "user_id": 10098345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a309ea42ec1c9b2d9e69567476d027?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/10098345/marcel"}, "edited": false, "score": 0, "creation_date": 1539704963, "post_id": 52838721, "comment_id": 92594722, "body": "I just realised you where talking about a factor. Not the actual distance. I did the math and it seems to be pretty accurate (accurate enough :) ). Thanks!!"}, {"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1539761502, "post_id": 52838721, "comment_id": 92614683, "body": "@TobySpeight You are right, taking into account that the precision I gave is quite high. But my calculation can be taken as a first approach."}], "tags": [], "owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "is_accepted": true, "score": 0, "last_activity_date": 1539761565, "last_edit_date": 1539761565, "creation_date": 1539702808, "answer_id": 52838721, "question_id": 52838580, "link": "https://stackoverflow.com/questions/52838580/calculate-coordinates-from-a-distance-in-mm/52838721#52838721", "title": "Calculate coordinates from a distance in mm", "body": "<p>I am sure this is not the right place, it might be a better fit to use <a href=\"https://gis.stackexchange.com\">https://gis.stackexchange.com</a>.</p>\n\n<p>About the latitude, it is always (about) 111 km per degree, so .00000001\u00b0 (1E-8\u00b0) should indeed be 1.1 mm in y direction.</p>\n\n<p>The relation for the longitude indeed depends on your current latitude: here, the factor per degree is 111 km multiplied by cos(latitude). In your case, that would (on a spherical earth) make a factor of 0.60445804192912, resulting in 67.1 km per degree or .671 mm per 1E-8\u00b0. On our earch, being flattened at the poles, the value is slightly different, but should be about the same (I cannot, however, tell how big the error is.)</p>\n\n<p>Are you sure that your GPS device has this high resolution of several mm?</p>\n"}], "owner": {"reputation": 13, "user_id": 10098345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a309ea42ec1c9b2d9e69567476d027?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/10098345/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "closed_date": 1539703933, "accepted_answer_id": 52838721, "answer_count": 1, "score": -1, "last_activity_date": 1539761565, "creation_date": 1539702385, "last_edit_date": 1539704006, "question_id": 52838580, "link": "https://stackoverflow.com/questions/52838580/calculate-coordinates-from-a-distance-in-mm", "closed_reason": "Needs more focus", "title": "Calculate coordinates from a distance in mm", "body": "<p>I'm writing a piece of software which is responsible for logging the position of certain machine parts.</p>\n\n<p>Now this is the case: </p>\n\n<ul>\n<li>There is 1 RTK fixed GPS receiver (+/- 2cm accuracy), fixed on the machine. The heading is calculated using 2 different locations </li>\n<li>There are 2 arms (left and right arm) on the machine that can rotate independent of each other outwards or inwards </li>\n<li>There is 1 arm (mid arm) with a fixed location on the machine </li>\n</ul>\n\n<p>What I Already have:</p>\n\n<p>A piece of software which calculates the location of the outer location of the arms (this works like a charm). This produces a shapefile as logfile in which the location of the arms are visible and this works good for every heading.</p>\n\n<p>The problem is:</p>\n\n<p>The algorithm is calculating the location of the arms using the delta X and delta Y distances in mm. \nMy assumption was that the longitude 0.00000001 is equal to 1.1 mm on the X axis (<a href=\"https://gis.stackexchange.com/questions/8650/measuring-accuracy-of-latitude-and-longitude\">source</a>). Boy, what was I wrong...</p>\n\n<p>When the shapefile that is generated is being measured using a shapefile viewer it returnes 2,19 meter instead of the calculated 3,25. Note that this is on the latitude 52.810146939 (Northern Hemisphere). </p>\n\n<p>Thus the question:</p>\n\n<p>Has anybody any idea how a formula can be formed that takes a latitude or longitude as starting point and a distance in [mm] and then returnes the corrected latitude or longitude? Or how I can calcuate the relative delta coordinates values to sum them with the Original coordinates? </p>\n\n<p>I've got a snippet of the code:</p>\n\n<pre><code>Armlocations-&gt;leftarm.locationX = ownLocation.locationX + MM_TO_COOR(deltaX);\nArmlocations-&gt;leftarm.locationY = ownLocation.locationY + MM_TO_COOR(deltaY);\n</code></pre>\n\n<p>deltaX and deltaY are the distances in mm that should be added to the coordinate. The macro MM_TO_COOR is this:</p>\n\n<pre><code>#define COOR_TO_MM(x)   ((x) * 110000000)\n#define MM_TO_COOR(x)   ((x) / 110000000)\n</code></pre>\n\n<p>The question is not about programming -> I got that going for me, but more about the math involved to this.</p>\n"}, {"tags": ["c", "libevent"], "answers": [{"comments": [{"owner": {"reputation": 579, "user_id": 870150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b567e03be435826b65c805bad55d00a8?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/870150/alex"}, "edited": false, "score": 0, "creation_date": 1593758456, "post_id": 52930036, "comment_id": 110896031, "body": "I have also added the libevhtp library which allows registering callbacks for uploaded chunks. This way I don&#39;t have to buffer the whole file in memory and can write the content directly to a file while it is being uploaded."}], "tags": [], "owner": {"reputation": 579, "user_id": 870150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b567e03be435826b65c805bad55d00a8?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/870150/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1541068125, "last_edit_date": 1541068125, "creation_date": 1540213251, "answer_id": 52930036, "question_id": 52838295, "link": "https://stackoverflow.com/questions/52838295/libevent-blocks-when-posting-multipart-file-upload/52930036#52930036", "title": "libevent blocks when posting multipart file upload", "body": "<p>I kept reading online and found a solution that worked for me, mostly inspired by this code here: <a href=\"https://gist.github.com/kzk/665437#file-evhttp-multh-thread-httpd-cpp-L82\" rel=\"nofollow noreferrer\">Multi-Threaded HTTPServer using evhttp</a></p>\n\n<pre><code>struct eventbase *eventbase2;\n\nvoid threadfunction(){\n    eventbase2 = event_base_new();\n    struct evhttp* http2 = evhttp_new(event_base2);\n    evhttp_set_cb(http2, \"/upload\", upload_cb, NULL);\n    struct evhttp_bound_socket* handle = \n        evhttp_bind_socket_with_handle(http2, \"0.0.0.0\", 8080);\n    event_base_dispatch(event_base2);  // &lt;-------- it will wait here\n    evhttp_del_accept_socket(http2, handle);\n    evhttp_free(http2);\n    event_base_free(event_base2);\n}\n\n// initialize a thread with the threadfunction\n</code></pre>\n\n<p>I created a new thread (not shown in code above) that uses <code>threadfunction</code> as its thread function. The function hosts a second <code>eventbase</code> so the upload url can be called and can take as much time as it wants. Since the status url is handled by the first eventbase, it will work in parallel and the upload url will not block it while it does its thing.</p>\n\n<p>To stop the running thread you should call</p>\n\n<pre><code>event_base_loopbreak(event_base2);\n</code></pre>\n\n<p>and then probably clean up after your thread. </p>\n"}], "owner": {"reputation": 579, "user_id": 870150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b567e03be435826b65c805bad55d00a8?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/870150/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 52930036, "answer_count": 1, "score": 2, "last_activity_date": 1541068125, "creation_date": 1539701528, "last_edit_date": 1539935482, "question_id": 52838295, "link": "https://stackoverflow.com/questions/52838295/libevent-blocks-when-posting-multipart-file-upload", "title": "libevent blocks when posting multipart file upload", "body": "<p>I am working on an embedded arm board in C with linux kernel 4.14.\nI am using libevent version 2 and have created handlers for two URLs.\nOne is for posting files and the other for getting the status of the upload. \nA user will be connected via browser and upload a file via multipart form POST and get the status of the upload using a GET request. </p>\n\n<p>Here is some pseudo code so you can get a picture of the process. </p>\n\n<pre><code>void upload_cb(struct evhttp_request *req, void *arg){\n    struct bufferevent *bev = evhttp_connection_get_bufferevent(req-&gt;evcon);\n    if (bev) //Prio is initialized with 10 states in main\n        bufferevent_priority_set(bev, 9); // set to low priority\n    struct evbuffer* post_buffer = evhttp_request_get_input_buffer(req);\n    size_t body_size = evbuffer_get_length(post_buffer);\n    // a multipart parser takes care of writing the \n    // post_buffer content to a file\n    // this takes a few seconds and after completing this \n    // the status_cb is accessible again\n}\n\nvoid status_cb(struct evhttp_request *req, void *arg){\n    // send some json\n}\n\nevhttp_set_cb(_http, \"/upload\", upload_cb, NULL);\nevhttp_set_cb(_http, \"/status\", status_cb, NULL);\n</code></pre>\n\n<p>When I upload a file of around 10 Mb and at the same time poll the status URL every 1 second, the status URL will not respond for about 12 seconds until the file was properly handled and the function returned. </p>\n\n<p>upload_cb takes a while to process the data and therefore holds up status_cb from executing.\nThis is undesirable because the application is not responsive at that moment. </p>\n\n<p>I am trying to continually get the status from the application and keep the UI up to date about what is going on. \nFrom what I can tell, the upload_cb callback is called once all the data has been buffered and is ready for the callback to process it. This means it would buffer the whole 10 Mb in memory.</p>\n\n<p>I have tried to lower the priority of the buffers in hopes that an event scheduler would interrupt and give some time to other events but it seems my idea of how libevent works is incorrect. </p>\n\n<p>I was looking into alternative solutions and feel that I could create a separate thread in which I could handle the upload + save to file and then hand control back to the main thread. \nBut I would prefer to ask here if there is a more elegant solution that involves staying completely with libevent. </p>\n\n<p>Can I get libevent to interrupt processing the upload and reply to the status request? \nCan I force libevent to receive the data in chunks so that it can handle other callbacks?</p>\n\n<hr>\n\n<p><strong>UPDATE 1:</strong> according to <a href=\"https://stackoverflow.com/questions/20536507/write-non-blocking-event-with-with-libevent-in-c-programming\">this question</a> I have to use non-blocking api calls. Although writing files is non-blocking, it seems the kernel write buffer is filled because I write 10+ Mb to a file. \nI have moved parsing and writing to a new thread which allows libevent to return from the function and am now investigating how I should handle the post_buffer (multiple thread access, freeing it after use etc.)</p>\n\n<p><strong>UPDATE 2:</strong> moving parsing to a new thread doesn't work because then the callback <code>upload_cb</code> returns and the <code>evhttp_request</code> and its buffer get cleaned up while the thread still wants to parse it.\nI am leaning toward creating an additional event_base instance to handle seamless uploading as outlined in the links to <a href=\"https://stackoverflow.com/questions/20426251/multi-threaded-http-server-with-libevent\">this question</a></p>\n"}]