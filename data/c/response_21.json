[{"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1433376377, "post_id": 30632750, "comment_id": 49331277, "body": "Is the file located on NFS or other network mount?"}, {"owner": {"reputation": 23, "user_id": 4929504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30286382e67474b747ffdddc276d8267?s=128&d=identicon&r=PG&f=1", "display_name": "JacLax", "link": "https://stackoverflow.com/users/4929504/jaclax"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1433376465, "post_id": 30632750, "comment_id": 49331299, "body": "The file is specified in the arguments, from the console (I run the program using ./a.out test.txt). The file is in the same folder as the program itself as well."}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1433376698, "post_id": 30632750, "comment_id": 49331351, "body": "Your time code looks ok. And the difference is almost 1 hr in future. So my guess is - modification is done on a server which is in a different timezone."}, {"owner": {"reputation": 23, "user_id": 4929504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30286382e67474b747ffdddc276d8267?s=128&d=identicon&r=PG&f=1", "display_name": "JacLax", "link": "https://stackoverflow.com/users/4929504/jaclax"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1433377367, "post_id": 30632750, "comment_id": 49331522, "body": "Thank you for the help! Do you have any suggestions on how to work through this? I&#39;ve tried using localtime and some other timezone tutorials but no luck."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4929504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30286382e67474b747ffdddc276d8267?s=128&d=identicon&r=PG&f=1", "display_name": "JacLax", "link": "https://stackoverflow.com/users/4929504/jaclax"}, "edited": false, "score": 0, "creation_date": 1433378524, "post_id": 30633129, "comment_id": 49331810, "body": "That was exactly the issue, the lab computer I&#39;m using is about an hour and 2 minutes off. Adding 3480 to my current time &quot;fixes&quot; the issue. Thanks!"}], "tags": [], "owner": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "is_accepted": true, "score": 1, "last_activity_date": 1433378294, "creation_date": 1433378294, "answer_id": 30633129, "question_id": 30632750, "link": "https://stackoverflow.com/questions/30632750/file-modified-time-result-does-not-match-up-with-current-time/30633129#30633129", "title": "File modified time result does not match up with current time", "body": "<p>This almost certainly has to be a file stored on a different server.  The st_mtime field is updated by the server using the server's clock even if the file was modified remotely from a client machine.   When the clocks differ on the client and server, this can lead to apparent discrepencies for modification times.</p>\n\n<p>Either the server or the host where you are running the program has the clock set wrong.    </p>\n\n<p>The values returned either by time() or stat should be irrespective of timezones as they should be the standard linux Epoch (which is the number of seconds since 00:00:00 UTC Jan 1 1970 -with some minor caveats)   So differences in timezone settings shouldn't account for it.</p>\n\n<p>You can do a simple test from the host where you are running the program while you are in the same directory that you are using now:</p>\n\n<pre><code> echo x &gt; file; ls -l file;  date\n</code></pre>\n\n<p>The times reported by ls and date should very closely agree.  If not, the clock is set wrong on the client or server.</p>\n"}], "owner": {"reputation": 23, "user_id": 4929504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30286382e67474b747ffdddc276d8267?s=128&d=identicon&r=PG&f=1", "display_name": "JacLax", "link": "https://stackoverflow.com/users/4929504/jaclax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "accepted_answer_id": 30633129, "answer_count": 1, "score": 1, "last_activity_date": 1433378294, "creation_date": 1433375460, "question_id": 30632750, "link": "https://stackoverflow.com/questions/30632750/file-modified-time-result-does-not-match-up-with-current-time", "title": "File modified time result does not match up with current time", "body": "<p>I am working on a program in which I need to compare the time of which a file was modified to the current time. If a file has not been modified for a certain amount of time, then it is considered \"old\" and a process is killed.</p>\n\n<p>However, when I get my current time and my modification time they do not return comparable results. They appear to come back in the same format, but the difference between the two doesn't make sense. I am assuming that this has something to do with the timezone or perhaps how I am returning the times. Tried doing some searching but haven't been able to find anything that has fixed my issue.</p>\n\n<p>Get modified time:</p>\n\n<pre><code>time_t getMod(const char *file){\n    struct stat attrib;\n    if (stat(file, &amp;attrib) == -1) {\n        perror(file);\n        exit(1);\n    }\n    return attrib.st_mtime;\n}\n</code></pre>\n\n<p>Get current time and compare:</p>\n\n<pre><code>while(loop == 1){\n    printf (\"Sleeping..\\n\");\n    sleep(numSleep); //Sleep\n    printf (\"Awake..\\n\");\n\n    curTime = time(0); //Current time\n    modTime = getMod(argv[fileIndex]); //Modified time\n\n    printf (\"Current time: %d\\n\", curTime);\n    printf (\"Modified time: %d\\n\", modTime);\n\n    seconds = curTime - modTime;\n    printf (\"Seconds: %d\\n\", seconds);\n    if(seconds &gt; numSleep){\n        kill(pid, SIGKILL); \n    }\n}\n</code></pre>\n\n<p>An example of the output I have been getting when I modify the file while sleep:</p>\n\n<pre><code>Current time: 1433371851\nModified time: 1433374890\n</code></pre>\n"}, {"tags": ["c", "printf", "scanf"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1433374797, "post_id": 30632651, "comment_id": 49330878, "body": "Using what source? Any normal output terminal obeys <code>\\n</code>."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 4, "creation_date": 1433374809, "post_id": 30632651, "comment_id": 49330883, "body": "There is no &quot;normal&quot; way that C outputs. It does exactly what you tell it to do, but since you show no code we have no idea what you told it to do."}], "answers": [{"comments": [{"owner": {"reputation": 1987, "user_id": 3803800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/88d5e7500b9f3f4c36f849f44630dad5?s=128&d=identicon&r=PG&f=1", "display_name": "Mauricio Trajano", "link": "https://stackoverflow.com/users/3803800/mauricio-trajano"}, "edited": false, "score": 0, "creation_date": 1433375075, "post_id": 30632684, "comment_id": 49330961, "body": "This is most likely it, I believe he is adding \\n to the end of printf thinking it&#39;s necessary"}], "tags": [], "owner": {"reputation": 353, "user_id": 303475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4b05def28b2b3c3ac2eb49064458?s=128&d=identicon&r=PG", "display_name": "Danny Sung", "link": "https://stackoverflow.com/users/303475/danny-sung"}, "is_accepted": true, "score": 3, "last_activity_date": 1433374985, "creation_date": 1433374985, "answer_id": 30632684, "question_id": 30632651, "link": "https://stackoverflow.com/questions/30632651/how-do-you-type-something-on-the-same-line-of-text-in-c/30632684#30632684", "title": "How do you type something on the same line of text in C", "body": "<p>From your tags, I'm guessing you're using printf().  Simply leave out the \"\\n\" character, which means \"newline.\".</p>\n\n<p>In other words.</p>\n\n<p><code>printf(\"&gt; \"); printf(\"text\\n\");</code></p>\n\n<p>This will print:</p>\n\n<blockquote>\n  <p>> text</p>\n</blockquote>\n"}], "owner": {"reputation": 57, "user_id": 4852883, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Swjqz.jpg?s=128&g=1", "display_name": "ozy", "link": "https://stackoverflow.com/users/4852883/ozy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "closed_date": 1433409754, "accepted_answer_id": 30632684, "answer_count": 1, "score": -8, "last_activity_date": 1433374985, "creation_date": 1433374706, "question_id": 30632651, "link": "https://stackoverflow.com/questions/30632651/how-do-you-type-something-on-the-same-line-of-text-in-c", "closed_reason": "Not suitable for this site", "title": "How do you type something on the same line of text in C", "body": "<p>I was wondering how can you type something in one line in C?</p>\n\n<p>This is the normal way it outputs.</p>\n\n<p>Output</p>\n\n<pre><code> &gt; \n &lt;text&gt;\n</code></pre>\n\n<p>Instead</p>\n\n<pre><code> &gt; &lt;text&gt;\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 2, "creation_date": 1433374391, "post_id": 30632598, "comment_id": 49330749, "body": "Does your compiler issue a warning on the <code>return longest</code> line?"}, {"owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "edited": false, "score": 0, "creation_date": 1433374437, "post_id": 30632598, "comment_id": 49330764, "body": "Why don&#39;t you just pass it to the function as a pointer?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1433374483, "post_id": 30632598, "comment_id": 49330781, "body": "Choose between starting with a longer string in your source (so there is room for expansion), or allocating it and passing a <i>pointer</i> to the pointer (so it can be reallocated in the function)."}, {"owner": {"reputation": 275, "user_id": 4253715, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1c766dc7859efc91ab86a0f4fd2ad772?s=128&d=identicon&r=PG&f=1", "display_name": "kris", "link": "https://stackoverflow.com/users/4253715/kris"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1433374677, "post_id": 30632598, "comment_id": 49330838, "body": "@dasblinkenlight, yes it does have a warning: <code>address of stack memory associated with local variable &#39;longest&#39; returned</code>"}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433374749, "post_id": 30632598, "comment_id": 49330861, "body": "@kris: Yeah, that means you&#39;re returning a local variable which when accessed from the outside, will result in undefined behavior."}, {"owner": {"reputation": 275, "user_id": 4253715, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1c766dc7859efc91ab86a0f4fd2ad772?s=128&d=identicon&r=PG&f=1", "display_name": "kris", "link": "https://stackoverflow.com/users/4253715/kris"}, "reply_to_user": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433375104, "post_id": 30632598, "comment_id": 49330977, "body": "@rost0031 can I find out why the variable will result in undefined behavior?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1433375320, "post_id": 30632598, "comment_id": 49331036, "body": "<code>const char* longestWord(char line[])</code> &lt;- note that this is equivalent to <code>const char* longestWord(char *line)</code> because of a (stupid) quirk of C syntax. You&#39;re already passing a pointer."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433375517, "post_id": 30632598, "comment_id": 49331087, "body": "Because it&#39;s a variable that is only defined within the scope of the function.  When you return a pointer to an array only defined within the function, other functions may use that memory since it&#39;s no longer being used by that function.  Sometimes things will work, sometimes they won&#39;t.  IE: don&#39;t do this. Look up &quot;scope of variables in C&quot; on google and read if you want more details than I&#39;m giving here."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433375636, "post_id": 30632598, "comment_id": 49331122, "body": "@kris: also, just so you know, your code only checks the first character of each new line every time you call this function.  I doubt that&#39;s what you are trying to actually accomplish.  What is your code supposed to do?"}], "answers": [{"tags": [], "owner": {"reputation": 682, "user_id": 859726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd62390328cae31e2d2ebd6ecd911c59?s=128&d=identicon&r=PG", "display_name": "tom", "link": "https://stackoverflow.com/users/859726/tom"}, "is_accepted": false, "score": 2, "last_activity_date": 1433374657, "creation_date": 1433374657, "answer_id": 30632644, "question_id": 30632598, "link": "https://stackoverflow.com/questions/30632598/appending-character-to-string-and-return-string/30632644#30632644", "title": "Appending Character to String and return String", "body": "<p>Unless <code>line</code> is large enough to hold as much as it will ever need, you won't be able to do it this way.</p>\n\n<p>Most straightforward solution here would be to have the argument be on the heap, so allocate it with <code>malloc(length_of_str)</code>. In <code>longestWord</code> you may then call <code>line = realloc(line, new_length)</code> in order to get yourself more room to stuff characters in.</p>\n\n<p>Returning <code>longest</code> won't ever work as it is on the stack, which will be freed once your method is left. You may allocate <code>longest</code> via <code>malloc()</code> as well and return that pointer, in which case you'll only need to call <code>free()</code> on the returned pointer once you no longer need it.</p>\n"}, {"tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": true, "score": 0, "last_activity_date": 1433374887, "creation_date": 1433374887, "answer_id": 30632677, "question_id": 30632598, "link": "https://stackoverflow.com/questions/30632598/appending-character-to-string-and-return-string/30632677#30632677", "title": "Appending Character to String and return String", "body": "<p>Just pass the array to the function and you don't need to return anything:</p>\n\n<pre><code>void longestWord(char line[], char longest[])\n                     //       ^^^^^^^^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 4253715, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1c766dc7859efc91ab86a0f4fd2ad772?s=128&d=identicon&r=PG&f=1", "display_name": "kris", "link": "https://stackoverflow.com/users/4253715/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 30632677, "answer_count": 2, "score": 0, "last_activity_date": 1433382224, "creation_date": 1433374271, "last_edit_date": 1433382224, "question_id": 30632598, "link": "https://stackoverflow.com/questions/30632598/appending-character-to-string-and-return-string", "title": "Appending Character to String and return String", "body": "<p>I'm trying to call in a <code>String</code>, add a character based on certain conditions, update the longest <code>String</code> and then return the <code>String</code>.</p>\n\n<p>I know that since I'm changing the <code>String</code> (by adding characters), I can't use <code>const char* pointer</code>, thus I must use a <code>char array[]</code>. </p>\n\n<p>But I also know that <code>char array[]</code> can't be returned, just the pointer. So I'm confused on how I can update a String (as a <code>char array[]</code>), and then return it (as a <code>const char* pointer</code>).</p>\n\n<pre><code> const char* longestWord(char line[])\n {\n     int pos = 0;\n     char longest[250]; \n     char ch = line[pos];\n     int longestLength = 0;\n     char current[250];\n     int currentLength = 0;\n\n      if(isalpha(ch) || isdigit(ch))\n      {\n          longest[longestLength] = ch;\n          longest[longestLength + 1] = '\\0';\n          currentLength++;\n      }\n\n    pos++;  \n }\n return longest;\n</code></pre>\n"}, {"tags": ["c", "gcc", "floating-point", "c11", "sigfpe"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1433374141, "post_id": 30632566, "comment_id": 49330677, "body": "<code>i % i</code> divide by 0."}, {"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1433374337, "post_id": 30632566, "comment_id": 49330725, "body": "@BLUEPIXY a number modulo itself should result in <code>0</code>, I can&#39;t see the &quot;division&quot; you are mentioning or the problem in general . There should be no problem in adding the result of a modulo operation ."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1433374430, "post_id": 30632566, "comment_id": 49330760, "body": "Division is done when determining the remainder. try <code>i += (i % i);</code> change to <code>i += 0;</code>"}, {"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1433374618, "post_id": 30632566, "comment_id": 49330822, "body": "@BLUEPIXY can you post a complete answer and expand on that? I don&#39;t really get what you are mentioning."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 3, "creation_date": 1433374739, "post_id": 30632566, "comment_id": 49330854, "body": "@gzp: <code>0 % 0</code> is undefined (just like <code>0 &#47; 0</code>), so generates a SIGFPE..."}, {"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1433374805, "post_id": 30632566, "comment_id": 49330879, "body": "@ChrisDodd ok, I get the math, I don&#39;t get why floating point computation gets involved in this at all when I use an <code>unsigned int</code>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1433374948, "post_id": 30632566, "comment_id": 49330917, "body": "Does it still behave badly without the typedef?"}, {"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1433375141, "post_id": 30632566, "comment_id": 49330987, "body": "@ChrisDodd to be clear my point is not about the logic of the math involved, it&#39;s about why something related to floating point computation kicks in while doing integer math ."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 5, "creation_date": 1433375162, "post_id": 30632566, "comment_id": 49330992, "body": "@gzp: No floating point is invovled.  Its a historical accident that POSIX calls the signal <code>SIGFPE</code> even though it is generated for all numerical exceptions, both integer and floating point.  <code>SIGFPE</code> has subcodes <code>FPE_INTDIV</code> (div/mod by zero) and <code>FPE_INTOVF</code> (overflow) which can be generated by integer instructions."}, {"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1433375626, "post_id": 30632566, "comment_id": 49331118, "body": "@ChrisDodd that&#39;s just like watching the world burn ... it makes no sense at all even as an historical accident; how do you confuse floating-point with integers and manage to smash them together under the same label ? It really is an achievement ."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433376120, "post_id": 30632566, "comment_id": 49331226, "body": "@gzp: Do you understand the phrase &quot;historical reasons&quot;? Just take it as a general arithmetic exception. Chainging it would break too much existing legacy software. Banking software for instance does notoriously rely on established behaviour. You&#39;re welcome to re-write billions of code (including COBOL and FORTRAN). Further explanation: decent CPUs only had floating point exceptions, but none for integer division. That was actually catched by program code."}, {"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433376291, "post_id": 30632566, "comment_id": 49331261, "body": "@Olaf I would really like to know how this happened, there must be a real explanation of what happened in that room where someone wrote specs for this signals ..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433376437, "post_id": 30632566, "comment_id": 49331288, "body": "@gzp: How about searching the web, digging in historical stuff (news archives might be a good start). But do not annoy or blame ppl here, it is not their fault (well, unless there is one here who actually defined that - possible, but not likely). You already got an answer to your question. That is not a forum!"}, {"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433376638, "post_id": 30632566, "comment_id": 49331336, "body": "@Olaf I&#39;m not blaming anyone, I&#39;m just trying to expand and discuss"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433376700, "post_id": 30632566, "comment_id": 49331352, "body": "@gzp: C11 draft, 6.5.5#5: &quot;The result of the / operator ...  the result of the % operator is the remainder. In both operations, if the value of the second operand is zero, the behavior is undefined.&quot; So, you can get anything. Do not complain if demons crawl up your keyboard."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433376741, "post_id": 30632566, "comment_id": 49331362, "body": "@gzp: Just again: This is a Q&amp;A site, not a discussion forum! You&#39;ve got your answer on two levels now (C and POSIX)."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "edited": false, "score": 0, "creation_date": 1433375512, "post_id": 30632732, "comment_id": 49331086, "body": "no, I just run this inside <code>gdb</code> and got the <code>SIGFPE</code> which was the weirdest possible possible for me and I didn&#39;t check further because I was mislead by the naming of this signal and convinced that the problem was somewhere else or part of a gcc bug . naming an integer-related signal like that is a really a poor choice ."}, {"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "edited": false, "score": 0, "creation_date": 1433375715, "post_id": 30632732, "comment_id": 49331137, "body": "by the way <code>clang</code> optimize this out completely, probably some dead code elimination, there is no trace of the modulo operation in the assembly generated by <code>clang</code>, that&#39;s why it runs ."}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "reply_to_user": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "edited": false, "score": 0, "creation_date": 1433375955, "post_id": 30632732, "comment_id": 49331187, "body": "It is not a bug at all, in fact, its standard, <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C 11 Standard</a>, on page 265, <i>SIGFPE - an erroneous arithmetic operation, such as zero divide or an operation resulting in overflow</i>"}, {"owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "edited": false, "score": 0, "creation_date": 1433376440, "post_id": 30632732, "comment_id": 49331291, "body": "yes, my problems start when you starting naming your dog &quot;cat&quot;, and your cat &quot;dog&quot; . this was a discovery for me and I really think it&#39;s just an error ; it&#39;s not even about the math of the modulo at this point, it should be considered an error emitting a signal with that name in this case."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433377301, "post_id": 30632732, "comment_id": 49331500, "body": "It actually is UB: 6.5.5#5; And 7.14#4 makes this signal (among most others) optional."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "edited": false, "score": 0, "creation_date": 1433377467, "post_id": 30632732, "comment_id": 49331550, "body": "@gzp SIGSEGV covers all sorts of memory access errors too, not just accessing the wrong segment.  You can only pack so much info into 3 or 4 letters, at the end of the day there&#39;s no substitute for reading the documentation of what that signal means."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1433377614, "post_id": 30632732, "comment_id": 49331591, "body": "@MattMcNabb: well, if 17576 or 456976 combinations are not enough, we might include other unicode letters. &quot;umlauts&quot; come into my mind ;-))"}], "tags": [], "owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "is_accepted": true, "score": 2, "last_activity_date": 1433376134, "last_edit_date": 1433376134, "creation_date": 1433375277, "answer_id": 30632732, "question_id": 30632566, "link": "https://stackoverflow.com/questions/30632566/sigfpe-with-gcc-and-unsigned-integers/30632732#30632732", "title": "SIGFPE with gcc and unsigned integers", "body": "<p>After running the code, this was under cygwin, gdb dumped the trace.</p>\n\n<pre><code>$ cat sigfpe.exe.stackdump\nException: STATUS_INTEGER_DIVIDE_BY_ZERO at rip=00100401115\nrax=0000000000000000 rbx=000000000022CB20 rcx=0000000000000001\nrdx=0000000000000000 rsi=000000060003A2F0 rdi=0000000000000000\nr8 =0000000000000000 r9 =0000000000000000 r10=0000000000230000\nr11=0000000000000002 r12=0000000000000000 r13=0000000000000001\nr14=000000000022CB63 r15=000000000022CB64\nrbp=000000000022CAD0 rsp=000000000022CAA0\nprogram=C:\\cygwin64\\home\\luser\\sigfpe.exe, pid 6808, thread main\ncs=0033 ds=002B es=002B fs=0053 gs=002B ss=002B\nStack trace:\nFrame        Function    Args\n0000022CAD0  00100401115 (00000000020, 30001000000FF00, 0018004830F, 0000022D680                                                                                                                )\n0000022CBC0  00180048380 (00000000000, 00000000000, 00000000000, 00000000000)\n00000000000  0018004607C (00000000000, 0003E704021, 00000000000, 0000000002D)\n00000000000  00180046114 (00000000000, 00000000000, 00000000000, 00000000000)\n00000000000  00100401191 (00000000000, 00000000000, 00000000000, 00000000000)\n00000000000  00100401010 (00000000000, 00000000000, 00000000000, 00000000000)\n00000000000  000772E59CD (00000000000, 00000000000, 00000000000, 00000000000)\n00000000000  0007741B981 (00000000000, 00000000000, 00000000000, 00000000000)\nEnd of stack trace\n</code></pre>\n\n<p>The clue is in the operation <code>i += (i % i)</code></p>\n\n<p>when the loop is initial value of 0, of course, divide by zero error.</p>\n\n<p>Have you tried to catch the signal?</p>\n\n<p>Look at the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">C11 standard</a> on Page 265, <strong>SIGFPE</strong> - <em>an erroneous arithmetic operation, such as zero divide or an operation resulting in overflow</em></p>\n\n<p>It is not a compiler bug, that is implementation defined.</p>\n"}, {"tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 0, "last_activity_date": 1433377116, "creation_date": 1433377116, "answer_id": 30632958, "question_id": 30632566, "link": "https://stackoverflow.com/questions/30632566/sigfpe-with-gcc-and-unsigned-integers/30632958#30632958", "title": "SIGFPE with gcc and unsigned integers", "body": "<p>Do not complain if demons crawl up your keyboard when using undefined behaviour (UB):</p>\n\n<blockquote>\n  <p>C11 draft, 6.5.5#5: \"The result of the / operator ... the result of\n  the % operator is the remainder. In both operations, if the value of\n  the second operand is zero, the behavior is undefined.\"</p>\n</blockquote>\n\n<p>UB can be anything. You should actually be happy to get an exception, whatever it is called (it actually does even show the correct reason) and not just have the program produce wrong results unnoticed (the worst that can actually happen!).\nFor many CPUs, you will not notice anything. Just enable compiler warnings; that might help detect such cases (yet not guranteed).</p>\n"}], "owner": {"reputation": 13, "user_id": 4971708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa64e08938add180f292878e71aefcd?s=128&d=identicon&r=PG&f=1", "display_name": "gzp", "link": "https://stackoverflow.com/users/4971708/gzp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 30632732, "answer_count": 2, "score": 1, "last_activity_date": 1433377116, "creation_date": 1433374069, "last_edit_date": 1433374453, "question_id": 30632566, "link": "https://stackoverflow.com/questions/30632566/sigfpe-with-gcc-and-unsigned-integers", "title": "SIGFPE with gcc and unsigned integers", "body": "<p>I'm getting this weird behaviour from an executable compiled with different versions of <code>gcc</code>, all emit the <code>SIGFPE</code> signal and the best part is that I have no floating point of any kind in my code; if someone could shed some light on this ... I literally don't know where to start to debug this, it's so weird and this bug is triggered by all the gcc installations that I have from <code>4.9</code> to <code>6.0</code>.</p>\n\n<p>Here is a snippet that reproduces the problem</p>\n\n<pre><code>// Floating point exception - SIGFPE\n#include &lt;stdio.h&gt;\ntypedef unsigned int T;\nint main()\n{\n#define N 256 \n  for (T i = 0; i &lt; N; ++i)\n    {\n      i += (i % i);\n      printf(\"%u\\t\", i);\n    }\n}\n// bug uncovered with\n// gcc version 4.9.2 (Debian 4.9.2-10)\n// gcc version 5.1.0 (GCC)\n// gcc version 6.0.0 20150517 (experimental) (GCC)\n// using -std=c11 or -std=c99\n</code></pre>\n\n<p>The purpose of this code is to reproduce the problem, I know that the logic of it doesn't really make too much sense ( the modulo part ) but <code>clang</code> passes the test, no version of <code>gcc</code> does the same and I would like to know why if there is a technical explanation for this kind of behaviour .</p>\n"}, {"tags": ["c", "linux-kernel", "fork", "zombie-process"], "comments": [{"owner": {"reputation": 5621, "user_id": 3692399, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/b24bx.jpg?s=128&g=1", "display_name": "askb", "link": "https://stackoverflow.com/users/3692399/askb"}, "edited": false, "score": 0, "creation_date": 1433388949, "post_id": 30632364, "comment_id": 49334236, "body": "Its best if you give more information along with sample code on what you are trying to achieve. How are you accessing the <code>struct task_struct</code> ? What is stopping you from using <code>vfork()</code> to block the parent until the child returns."}], "answers": [{"tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": false, "score": 3, "last_activity_date": 1435777246, "last_edit_date": 1435777246, "creation_date": 1435774411, "answer_id": 31168709, "question_id": 30632364, "link": "https://stackoverflow.com/questions/30632364/wait-for-child-process-without-freeing-its-resources/31168709#31168709", "title": "Wait for child process without freeing its resources", "body": "<p>You can call <code>waitid(2)</code> with the <code>WNOWAIT</code> flag. Here's an excerpt from the manpage:</p>\n\n<blockquote>\n  <p>WNOWAIT</p>\n  \n  <p>Leave the child in a waitable state; a later wait call can\n  be used to again retrieve the child status information.</p>\n</blockquote>\n\n<p>So, something like this:</p>\n\n<pre><code>siginfo_t siginfo;\nif (waitid(P_ALL, 0, &amp;siginfo, WNOWAIT) &lt; 0) {\n    // Handle error...\n} else {\n    // PID of terminated child lives in siginfo.si_pid\n}\n</code></pre>\n\n<p>This makes sure that the parent blocks until the child terminates, but it will still leave the child zombie laying around in the system.</p>\n\n<p>If you want to wait for a specific child process with pid <code>X</code>, use <code>waitid(P_PID, X, &amp;siginfo, WNOWAIT)</code>.</p>\n\n<p>The child's exit status can be retrieved from <code>siginfo.si_status</code>. See <code>man waitid</code> to learn about the other fields in <code>siginfo</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 24558, "user_id": 457237, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34f7425ea0a472d1493230c28204010a?s=128&d=identicon&r=PG&f=1", "display_name": "Pavan Manjunath", "link": "https://stackoverflow.com/users/457237/pavan-manjunath"}, "is_accepted": false, "score": 0, "last_activity_date": 1435778651, "creation_date": 1435778651, "answer_id": 31169949, "question_id": 30632364, "link": "https://stackoverflow.com/questions/30632364/wait-for-child-process-without-freeing-its-resources/31169949#31169949", "title": "Wait for child process without freeing its resources", "body": "<p>Quoting from <a href=\"http://www.makelinux.net/books/lkd2/ch03lev1sec1\" rel=\"nofollow\">makelinux</a>,</p>\n\n<blockquote>\n  <p><strong>TASK_ZOMBIE</strong> The task has terminated, but its parent has not yet issued\n  a <code>wait4()</code> system call. The task's process descriptor must remain in\n  case the parent wants to access it. If the parent calls wait4(), the\n  process descriptor is deallocated.</p>\n</blockquote>\n\n<p>The process descriptor or your <code>task_struct</code> will persist even if your child has terminated until its parent has waited upon it. So, you can go ahead and access the child's <code>task_struct</code> just like you would have done if it were to be alive. The <code>task_struct</code> may be moved to a different kernel queue, though. Something like, a terminated queue instead of the running or ready queue</p>\n\n<p>Also, if you want to notified of your child's death and do not want to block in a <code>waitid</code> with <code>WNOWAIT</code> set, you can set up a signal handler for <a href=\"http://docs.oracle.com/cd/E19455-01/806-4750/signals-7/index.html\" rel=\"nofollow\">SIGCHLD</a></p>\n"}], "owner": {"reputation": 119, "user_id": 4971456, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/uEX98.png?s=128&g=1", "display_name": "Nyan Octo Cat", "link": "https://stackoverflow.com/users/4971456/nyan-octo-cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1435778651, "creation_date": 1433372833, "last_edit_date": 1435774499, "question_id": 30632364, "link": "https://stackoverflow.com/questions/30632364/wait-for-child-process-without-freeing-its-resources", "title": "Wait for child process without freeing its resources", "body": "<p>I am looking for a way to access the child's task_struct from the parent when the child is just about to end, or has just ended. The reason I don't want to use wait/waitpid is because after wait is finished, the task_struct and other things are freed.</p>\n\n<p>Is there any way for the parent to wait for the child process to end without calling wait (so the task_struct can still be accessed from the zombie process)?\nAny ideas what can be tried?</p>\n"}, {"tags": ["c", "winapi", "locale"], "answers": [{"comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1433378311, "post_id": 30632825, "comment_id": 49331743, "body": "In that case I wonder why <code>DTS_SHORTDATECENTURYFORMAT</code> is present at all... I may wind up just keeping what I currently have (take whatever <code>GetLocaleInfoEx()</code> returns for the default short date string), if that is the best of the options presented here. Thanks in the meantime."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1433529627, "post_id": 30632825, "comment_id": 49409038, "body": "I think I&#39;m going to go with the changing <code>yy</code> to <code>yyyy</code> option as this seems to be what the standard control does for <code>DTS_SHORTDATECENTURYFORMAT</code> :/ Better to imitate and be consistent with the rest of the system, I suppose. Thanks."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 3, "last_activity_date": 1433376013, "creation_date": 1433376013, "answer_id": 30632825, "question_id": 30632211, "link": "https://stackoverflow.com/questions/30632211/what-is-the-correct-way-to-get-a-locale-sshortdate-that-is-guaranteed-to-have-a/30632825#30632825", "title": "What is the correct way to get a LOCALE_SSHORTDATE that is guaranteed to have a full (4-digit) year number?", "body": "<p>No you can't rely on <code>LOCALE_SSHORTDATE</code> having a four-digit year, since the user is able to configure this through the Region control panel and options with two-digit years are available.</p>\n\n<p>If you want to enforce a four digit year (and override the user's preference) you may as well just provide your own short date string. Alternatively, you could scan the user's string and change \"yy\" to \"yyyy\".</p>\n"}, {"tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 2, "last_activity_date": 1433390220, "creation_date": 1433390220, "answer_id": 30634707, "question_id": 30632211, "link": "https://stackoverflow.com/questions/30632211/what-is-the-correct-way-to-get-a-locale-sshortdate-that-is-guaranteed-to-have-a/30634707#30634707", "title": "What is the correct way to get a LOCALE_SSHORTDATE that is guaranteed to have a full (4-digit) year number?", "body": "<p>You can also use <code>GetDateFormat</code> and <code>GetTimeFormat</code> in combination with <code>LOCALE_SSHORTDATE</code> etc.</p>\n\n<pre><code>wchar_t buf[100];\n\nSYSTEMTIME st;\nGetSystemTime(&amp;st);\nGetDateFormat(0, DATE_LONGDATE, &amp;st, 0, buf, 100);\nGetDateFormat(0, DATE_SHORTDATE, &amp;st, 0, buf, 100);\nGetTimeFormat(0, 0, &amp;st, 0, buf, 100);\nGetTimeFormat(0, TIME_NOSECONDS, &amp;st, 0, buf, 100);\n</code></pre>\n\n<p>Then maybe you don't have to worry about how the formatting is done. Year is sometimes set to <code>yy</code> even for long date format. For example in ControlPanel->Region->Format: switch to French language, it allows different options than US English.</p>\n"}], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 1, "accepted_answer_id": 30632825, "answer_count": 2, "score": 3, "last_activity_date": 1433390220, "creation_date": 1433372006, "question_id": 30632211, "link": "https://stackoverflow.com/questions/30632211/what-is-the-correct-way-to-get-a-locale-sshortdate-that-is-guaranteed-to-have-a", "title": "What is the correct way to get a LOCALE_SSHORTDATE that is guaranteed to have a full (4-digit) year number?", "body": "<p>I want to create a date-time picker control that shows both date and time, as a combination of the <code>DTS_SHORTDATECENTURYFORMAT</code> and <code>DTS_TIMEFORMAT</code> styles. Since there is no such style built into the date-time picker, I have to do it myself with <code>GetLocaleInfoEx()</code>.</p>\n\n<p>I notice that by default, <code>GetLocaleInfoEx(LOCALE_SSHORTDATE)</code> seems to return a four-digit year, which is what I want. Is this reliable? It's not documented anywhere, only that there can be more than one string for <code>LOCALE_SSHORTDATE</code>. If I have to enumerate the possible strings, how would I know which one is the one I want? Do I just look for the first string to contain <code>yyyy</code>? That doesn't sound reliable to me, at least not on its own...</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "winapi", "winsock"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4722775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1548b67e09c724841d973a2e95048ea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Peters", "link": "https://stackoverflow.com/users/4722775/andrew-peters"}, "edited": false, "score": 0, "creation_date": 1433371335, "post_id": 30632074, "comment_id": 49329631, "body": "Oooh, so instead of <code>buf</code> in <code>WriteFile</code>, I do: <code>while (var1 = recv(mySock, buf, FILEBUFFER, 0) &gt; 0){ WriteFile(hFile, var1, sizeof(var1), &amp;bytes, NULL); }</code> ?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 69, "user_id": 4722775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1548b67e09c724841d973a2e95048ea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Peters", "link": "https://stackoverflow.com/users/4722775/andrew-peters"}, "edited": false, "score": 0, "creation_date": 1433371368, "post_id": 30632074, "comment_id": 49329643, "body": "@AndrewPeters: <code>sizeof(var1)</code> ? Seriously? <code>buf</code> is still the buffer to write, <code>var1</code> is how much data there is in it."}, {"owner": {"reputation": 69, "user_id": 4722775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1548b67e09c724841d973a2e95048ea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Peters", "link": "https://stackoverflow.com/users/4722775/andrew-peters"}, "edited": false, "score": 0, "creation_date": 1433371547, "post_id": 30632074, "comment_id": 49329737, "body": "Lol sorry, that was a quick 30 second response without thinking about wthat you said first. So <code>var1</code> would replace my <code>sizeof()</code>, if thats what you&#39;re saying? Because recv() returns the &quot;quantity&quot; or size of the bytes it reads for the current instance?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 69, "user_id": 4722775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1548b67e09c724841d973a2e95048ea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Peters", "link": "https://stackoverflow.com/users/4722775/andrew-peters"}, "edited": false, "score": 0, "creation_date": 1433371617, "post_id": 30632074, "comment_id": 49329779, "body": "@AndrewPeters: yes. And of course, don&#39;t just blindly read from the connection until it fails, either.  If you don&#39;t know the size of the file ahead of time, you can&#39;t do adequate error checking to make sure you actually received the entire file.  So send/receive the file size first, then receive the actual file, and compare the read size to the actual size.  If they do not match, do not use the file."}, {"owner": {"reputation": 69, "user_id": 4722775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1548b67e09c724841d973a2e95048ea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Peters", "link": "https://stackoverflow.com/users/4722775/andrew-peters"}, "edited": false, "score": 0, "creation_date": 1433371976, "post_id": 30632074, "comment_id": 49329922, "body": "Thanks a lot for the advice remy, I would give you a +1 if I could. But how would I retrieve just the content-length segment from the response?"}, {"owner": {"reputation": 69, "user_id": 4722775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1548b67e09c724841d973a2e95048ea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Peters", "link": "https://stackoverflow.com/users/4722775/andrew-peters"}, "edited": false, "score": 0, "creation_date": 1433372700, "post_id": 30632074, "comment_id": 49330195, "body": "Oh hold on now, I removed the check mark as, I did what you guys said, and I still received the same error message after opening the file."}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 0, "creation_date": 1433373506, "post_id": 30632074, "comment_id": 49330473, "body": "Just a &#39;dumb&#39; question, what is the architecture of you host machine, <i>i.e.</i> is it 32-bit or 64-bit.  And what architecture is the file you are downloading compiled for?  The error message you give, would lead me to think that you have a mismatch in architecture."}, {"owner": {"reputation": 69, "user_id": 4722775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1548b67e09c724841d973a2e95048ea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Peters", "link": "https://stackoverflow.com/users/4722775/andrew-peters"}, "edited": false, "score": 0, "creation_date": 1433373698, "post_id": 30632074, "comment_id": 49330537, "body": "I tried both x64 &amp; x86 files for this specific one I am trying to download. My host is x64."}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 0, "creation_date": 1433374016, "post_id": 30632074, "comment_id": 49330634, "body": "another dumb question...what are the first four bytes of the file you downloaded?  ((BTW, this is running through all the &#39;silly&#39; things I&#39;ve seen people do, and the lack of information about what you are doing forces me to ask these questions))"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433374124, "post_id": 30632074, "comment_id": 49330669, "body": "^^ yeah, all &#39;standard&#39; TCP erorrs:("}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 3, "last_activity_date": 1433371194, "creation_date": 1433371194, "answer_id": 30632074, "question_id": 30632022, "link": "https://stackoverflow.com/questions/30632022/file-download-winsock/30632074#30632074", "title": "File Download - WinSock", "body": "<p>You're assuming <code>recv</code> returns the full buffer every time, but there's no guarantee (when simply testing <code>&gt; 0</code>) that it returns any more than 1 byte. You need to use the result of <code>recv</code> as the amount of data to write to the file.</p>\n"}, {"tags": [], "owner": {"reputation": 1315, "user_id": 570078, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6AOeF.jpg?s=128&g=1", "display_name": "shebaw", "link": "https://stackoverflow.com/users/570078/shebaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1433430601, "creation_date": 1433430601, "answer_id": 30647625, "question_id": 30632022, "link": "https://stackoverflow.com/questions/30632022/file-download-winsock/30647625#30647625", "title": "File Download - WinSock", "body": "<p>First of all, if you are using plain winsock to download files, you need to construct the proper http requests and process the responses properly. When you get the response from the server, make sure you process the response instead of blindly writing it with the file.   </p>\n\n<p>Second, you should check the return value of <code>recv</code> to see how many bytes it received and write that amount instead.    </p>\n\n<p>Third, if you  just want to download a file without manually processing the requests and responses, you can use the <code>URLDownloadToFile</code> API or use the WinInet APIs.</p>\n"}], "owner": {"reputation": 69, "user_id": 4722775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1548b67e09c724841d973a2e95048ea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Peters", "link": "https://stackoverflow.com/users/4722775/andrew-peters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1433430601, "creation_date": 1433371011, "last_edit_date": 1433371576, "question_id": 30632022, "link": "https://stackoverflow.com/questions/30632022/file-download-winsock", "title": "File Download - WinSock", "body": "<p>After downloading an exe file from my server via WinSock in C. I get this error:</p>\n\n<p><img src=\"https://i.stack.imgur.com/E69q6.png\" alt=\"image\"></p>\n\n<p>Here is the code I use to write the bytes read to the file:</p>\n\n<pre><code>while (recv(mySock, buf, FILEBUFFER, 0) &gt; 0)\n{\n     WriteFile(hFile, buf, sizeof(buf), &amp;bytes, NULL);\n}\n</code></pre>\n\n<p>Here are the variable definitions used:</p>\n\n<pre><code>#define FILEBUFFER 2048\n\nCHAR buf[2048]\n</code></pre>\n\n<p>Anyone know how I can fix this, or what the problem is?</p>\n"}, {"tags": ["c", "math"], "comments": [{"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1433370678, "post_id": 30631890, "comment_id": 49329353, "body": "What exactly do you need help with? Do you not understand double integrals?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1433370701, "post_id": 30631890, "comment_id": 49329362, "body": "yeah, consult an introductory calculus book. (hint: you may find nested loops useful.)"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1433370712, "post_id": 30631890, "comment_id": 49329369, "body": "I&#39;m voting to close this question as off-topic because it is about maths."}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1433506026, "post_id": 30631890, "comment_id": 49394128, "body": "This is an easy integration to perform using Gaussian quadrature.  The rectangular domain couldn&#39;t be simpler, and the function is well behaved."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433372563, "post_id": 30632129, "comment_id": 49330149, "body": "The name of the man was &quot;Riemann&quot; (just to find it on wikipedia)."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1433372804, "last_edit_date": 1433372804, "creation_date": 1433371501, "answer_id": 30632129, "question_id": 30631890, "link": "https://stackoverflow.com/questions/30631890/double-integration-using-rectangular-method-in-c/30632129#30632129", "title": "double integration using rectangular method in C", "body": "<p>You can use the definition of the (cascading) <a href=\"http://en.wikipedia.org/wiki/Riemann_integral\" rel=\"nofollow noreferrer\"><em>Riemann integral</em></a>:</p>\n\n<pre><code>int n = 5000;//or a large number, the discretization step\ndouble dxy = 1.0d/n;\ndouble integral = 0.0d;\nfor(int yi = 0; yi &lt; n; yi++) {\n    double y = yi*dxy; //the y-value\n    for(int xi = 0; xi &lt; n; xi++) {\n        double x = xi*dxy; //the x-value\n        integral += 1.0d/(1.0d+x*x+y*y); //function call\n    }\n}\nreturn integral*dxy*dxy;\n</code></pre>\n\n<p>In other words, you calculate the integral like:</p>\n\n<p><img src=\"https://i.stack.imgur.com/un52n.gif\" alt=\"enter image description here\"></p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1433535175, "last_edit_date": 1433535175, "creation_date": 1433472892, "answer_id": 30657641, "question_id": 30631890, "link": "https://stackoverflow.com/questions/30631890/double-integration-using-rectangular-method-in-c/30657641#30657641", "title": "double integration using rectangular method in C", "body": "<p>This double integral is effectively calculating the volume from the plane z = 0 to the surface defined by z = 1 / (1 + x^2 + y^2) for y = 0 to 1, x = 0 to 1. The following example calculates the volume of (n^2) columns with height z and square base \u0394y \u0394x using the mid point of the square bases to calculate z. Other than using the mid point of the squares, it's the same as CommuSoft's example.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define n 1000\n/* sum should ~= 0.63951 */\nint main()\n{\nint ix, iy;\ndouble x, y, sum, dydx;\n    dydx = 1./((double)n * (double)n);\n    sum = 0.0;\n    for(iy = 0; iy &lt; n; iy++){\n        y = (0.5+(double)iy)/((double)n);\n        for(ix = 0; ix &lt; n; ix++){\n            x = (0.5+(double)ix)/((double)n);\n            sum += 1. / (1. + x*x + y*y);\n        }\n    }\n    sum *= dydx;\n    printf(\"%.15lf\\n\", sum);\n    return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 3860480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2027518ede54145788604e4a67b57db?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Kabias", "link": "https://stackoverflow.com/users/3860480/mr-kabias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2556, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1433535175, "creation_date": 1433370446, "last_edit_date": 1433371544, "question_id": 30631890, "link": "https://stackoverflow.com/questions/30631890/double-integration-using-rectangular-method-in-c", "title": "double integration using rectangular method in C", "body": "<p>i would like to know how can i calculate the double integral shown in the picture below</p>\n\n<p><img src=\"https://i.stack.imgur.com/mUoOM.png\" alt=\"http://i.stack.imgur.com/mUoOM.png\"></p>\n\n<p>i need to calculate it in C using the rectangular method\ni already know how to calculate an integral but not a double one\ni have calculated the above integral like this in C\nintegral(1/(1+x^2)) x from 0 to 1\nbut i do not understand how i should proceed any further</p>\n\n<p>if someone can point me to the right direction on how i should approach this solution.</p>\n"}, {"tags": ["android", "c++", "c", "boost", "libtorrent-rasterbar"], "comments": [{"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433367316, "post_id": 30631113, "comment_id": 49327922, "body": "&quot;it wouldn&#39;t compile using those flags&quot; What were the errors?"}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433367359, "post_id": 30631113, "comment_id": 49327951, "body": "Shared libs tend to be quite big since they compile in ALL the symbols available.  Compile it as a static and link statically.  The linker can then automatically strip out all the unused symbols."}, {"owner": {"reputation": 326109, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1433367429, "post_id": 30631113, "comment_id": 49327982, "body": "Or export only public symbols. This is a bit more involved, but it works"}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "edited": false, "score": 0, "creation_date": 1433367437, "post_id": 30631113, "comment_id": 49327987, "body": "I&#39;ll try compiling it as static right now. Will post the results in a few minutes once it finishes. Thanks for the suggestions guys!"}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433367857, "post_id": 30631113, "comment_id": 49328157, "body": "Compiled as a static library, the size is 118.1mb. Ouch! @rost0031"}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433367930, "post_id": 30631113, "comment_id": 49328185, "body": "@TavianBarnes It wouldn&#39;t configure when i used the -02 flag. The configure error was &quot;Cannot compile C executable&quot; . It could be my setup but it compiles fine without that flag."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433367933, "post_id": 30631113, "comment_id": 49328188, "body": "Try linking against it with <code>-Wl,--gc-sections</code> flag to gcc.  That should strip out all the unused symbols."}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433367985, "post_id": 30631113, "comment_id": 49328216, "body": "@Seth Then the relevant error will be in <code>config.log</code>"}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433368009, "post_id": 30631113, "comment_id": 49328226, "body": "@rost0031 So, change the LDFLAGS to include -Wl and --gc-selections? Thanks!"}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433368086, "post_id": 30631113, "comment_id": 49328266, "body": "If the linker is being called by directly calling <code>ld</code>, then you don&#39;t need the <code>-Wl,</code>.  If it&#39;s calling gcc, it has to know to pass the flag to the linker, hence the <code>-Wl,--gc-sections</code>."}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433368093, "post_id": 30631113, "comment_id": 49328267, "body": "@TavianBarnes Checking the log now. Thanks for your input!"}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433368155, "post_id": 30631113, "comment_id": 49328298, "body": "@rost0031 I&#39;ll try compiling it with the -verbose flag so i know for sure how the linking process takes place."}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433368234, "post_id": 30631113, "comment_id": 49328330, "body": "@TavianBarnes the error is &quot;arm-linux-androideabi-gcc: error: unrecognized command line option &#39;-02&#39;&quot;"}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433368457, "post_id": 30631113, "comment_id": 49328428, "body": "@TavianBarnes should i set the optimization for both the CFLAGS and the CPPFLAGS?"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433368672, "post_id": 30631113, "comment_id": 49328533, "body": "@Seth Just CFLAGS is fine (for Android) because the NDK includes them when building C++ files too."}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433369150, "post_id": 30631113, "comment_id": 49328764, "body": "@TavianBarnes Thanks. I just re-compiled with the -O2 flag got the same results. One massive 118.1mb .a file."}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "edited": false, "score": 0, "creation_date": 1433385403, "post_id": 30631113, "comment_id": 49333363, "body": "Using clang i got the size down to 51mb... still way to big for usage."}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433385739, "post_id": 30631113, "comment_id": 49333443, "body": "@TavianBarnes - Success (presumably) . I ran &quot;arm-linux-androideabi-strip&quot; on the .a and .so files. This brought the .a size from 91mb to 5.5mb. I&#39;m presuming that they will work but i haven&#39;t tried yet. Thanks for all the suggestions!"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 1, "creation_date": 1433388883, "post_id": 30631113, "comment_id": 49334225, "body": "@Seth You can also add <code>-s</code> to <code>LDFLAGS</code> to do the same thing :)"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433422867, "post_id": 30631113, "comment_id": 49352983, "body": "@Seth Also <code>--enable-debug=yes</code> might help"}, {"owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433555961, "post_id": 30631113, "comment_id": 49417729, "body": "@TavianBarnes Thanks. I&#39;ll try re-compiling with those flags. You all have been very helpful!"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1433557055, "post_id": 30631113, "comment_id": 49417882, "body": "@Seth You&#39;re welcome!  And of course I meant <code>--enable-debug=no</code> :P"}], "owner": {"reputation": 180, "user_id": 4093161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd920b6872dcd1ca08918becbe32420f?s=128&d=identicon&r=PG&f=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/4093161/seth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1433380049, "creation_date": 1433366994, "last_edit_date": 1433380049, "question_id": 30631113, "link": "https://stackoverflow.com/questions/30631113/libtorrent-rasterbar-so-file-very-large-60mb", "title": "libtorrent-rasterbar.so - file very large (60mb+)", "body": "<p>I've compiled Libtorrent-rasterbar for Android (arm) using the libtorrent-rasterbar sources (github) but ran into some questionable results. Below i list the steps that i took before compilation:</p>\n\n<p>After setting up a stand-alone toolchain for arm i moved the openssl libs into the toolchains lib folder and the headers into the toolchains include folder etc. I did this with the boost-android libs as well. \nNext i exported my environment variables as follows:</p>\n\n<pre><code>    export SYSROOT=$ANDROIDNDK/platforms/android-16/arch-arm\n    export PATH=/opt/android/toolchains/gcc-arm/bin:$PATH\n    export CC=arm-linux-androideabi-gcc\n    export CXX=arm-linux-androideabi-g++\n    export CROSSHOST=arm-linux-androideabi\n    export CROSSHOME=/opt/android/toolchains/gcc-arm\n</code></pre>\n\n<p>And finally, i configured using the following:</p>\n\n<pre><code>./configure --host=$CROSSHOST --prefix=$CROSSHOME --with-boost=$CROSSHOME --with-boost-libdir=$CROSSHOME/lib --enable-shared --disable-static --enable-debug=yes --enable-loggin-yes --with-openssl=$CROSSHOME\n</code></pre>\n\n<p>Everything compiles fine but the shared library produced is way larger than it should be. 65mb. I tried changing my CPPFLAGS to include -O2 (optimization setting) but it didn't make a size difference. Is there anybody who has compiled libtorrent-rasterbar as a shared or static library for android? If so, what was the size of your final binary and what steps did you take? </p>\n\n<p>Thanks so much!</p>\n\n<p>UPDATE: I forgot to include what machine i'm compiling on. Here goes:</p>\n\n<ol>\n<li>CPU i7 4770k</li>\n<li>MEM 16gb 2133mhz</li>\n<li>HDD 400gb SSD partition</li>\n<li>OS OSX Yosemite</li>\n<li>GCC arm-linux-android-gcc (4.9)</li>\n<li>NDK r10e</li>\n<li>TOOLCHAIN arm-linux-androideabi-4.9</li>\n<li>GPU nvidia gtx970 (irrelevant)..</li>\n</ol>\n\n<p>yes, it's a hackintosh.</p>\n"}, {"tags": ["c", "list", "crash", "free"], "comments": [{"owner": {"reputation": 6288, "user_id": 2499076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72dcd37bc8460b1645d72f7a8248156e?s=128&d=identicon&r=PG", "display_name": "Ewan Mellor", "link": "https://stackoverflow.com/users/2499076/ewan-mellor"}, "edited": false, "score": 1, "creation_date": 1433366601, "post_id": 30630939, "comment_id": 49327575, "body": "Where does it crash, how does it crash, what&#39;s in the structures at the time, how are the structures declared, how does the data get allocated, how do you know it hasn&#39;t been freed already?  We&#39;re not mind-readers."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1433366605, "post_id": 30630939, "comment_id": 49327577, "body": "<code>temp2-&gt;next = NULL; &#47;&#47;this would be the previous node</code> : <code>temp2</code> to be <code>NULL</code>"}, {"owner": {"reputation": 1987, "user_id": 3803800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/88d5e7500b9f3f4c36f849f44630dad5?s=128&d=identicon&r=PG&f=1", "display_name": "Mauricio Trajano", "link": "https://stackoverflow.com/users/3803800/mauricio-trajano"}, "edited": false, "score": 0, "creation_date": 1433366779, "post_id": 30630939, "comment_id": 49327664, "body": "Your code is a bit confusing but my guess would be that you&#39;re freeing a NULL pointer, try to free the pointer before you set it to NULL"}, {"owner": {"reputation": 27, "user_id": 2580054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1351688778/picture?type=large", "display_name": "El Mapo Mapo", "link": "https://stackoverflow.com/users/2580054/el-mapo-mapo"}, "edited": false, "score": 0, "creation_date": 1433368294, "post_id": 30630939, "comment_id": 49328357, "body": "Guys, the problem is the else if clause, where there&#39;s the commet &quot;//if last element&quot;. As BLUEPIXY said, that row was the problem, but i still don&#39;t know how to solve the problem."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1433369372, "post_id": 30630939, "comment_id": 49328836, "body": "such like as <a href=\"http://stackoverflow.com/a/30578168/971127\">stackoverflow.com/a/30578168/971127</a>"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 2580054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1351688778/picture?type=large", "display_name": "El Mapo Mapo", "link": "https://stackoverflow.com/users/2580054/el-mapo-mapo"}, "edited": false, "score": 0, "creation_date": 1433368203, "post_id": 30631111, "comment_id": 49328314, "body": "ok, that makes the program crash, but how to solve the problem? if i just delete that row, the only free, does not deference the pointer to last element. How to solve?"}], "tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 2, "last_activity_date": 1433366992, "creation_date": 1433366992, "answer_id": 30631111, "question_id": 30630939, "link": "https://stackoverflow.com/questions/30630939/c-crash-while-try-to-delete-last-element-in-a-list/30631111#30631111", "title": ",C, Crash while try to delete last element in a list", "body": "<p>Go through what will happen if you call eliminapari passing p as a the only struct instance (in other words, p->next is NULL. then the first line inside the while loop sets temp2 == NULL. But then in the \"else\" clauses you try to dereference temp2 (temp2->next = NULL), but temp2 is NULL, so <em>Crash</em>.</p>\n"}], "owner": {"reputation": 27, "user_id": 2580054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1351688778/picture?type=large", "display_name": "El Mapo Mapo", "link": "https://stackoverflow.com/users/2580054/el-mapo-mapo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1433366992, "creation_date": 1433366321, "question_id": 30630939, "link": "https://stackoverflow.com/questions/30630939/c-crash-while-try-to-delete-last-element-in-a-list", "title": ",C, Crash while try to delete last element in a list", "body": "<p>my program's aim is to delete all the elements with a numeric even value. The program works fine, except when it should delete the last element: that makes the program crash.</p>\n\n<p>I have created a list with this structure:</p>\n\n<pre><code>struct elemento{\n       int dato;\n       struct elemento *next;\n};\n</code></pre>\n\n<p>You can ignore how the list is created, since i know that the error is only in this function: </p>\n\n<pre><code>struct elemento *eliminapari(struct elemento *p){\n\n   struct elemento * start = p;\n   struct elemento * temp, *temp2;\n   int cont;\n   cont = 0;\n   temp2 = p;\n   while(p != NULL &amp;&amp; cont != 20){\n         temp2 = temp2-&gt;next;\n\n         if((p-&gt;dato % 2) == 0){\n             if (cont == 0){ //if first element \n                start = p-&gt;next;\n                free(p);\n                p = start;\n\n             }else if(p-&gt;next == NULL){ //if last element\n                temp2-&gt;next = NULL; //this would be the previous node\n                free(p);\n                p = NULL;\n\n             }else{\n                temp = p-&gt;next;\n                p-&gt;dato = p-&gt;next-&gt;dato;\n                p-&gt;next = p-&gt;next-&gt;next;\n                free(temp);\n\n             }\n         }else{printf(\"\\n3\\n\"); p = p-&gt;next;}\n\n       cont = cont + 1;  \n   }\n\n       return(start);\n\n   }\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "pointers", "memory-management", "global-variables"], "comments": [{"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 1, "creation_date": 1433365411, "post_id": 30630641, "comment_id": 49326980, "body": "You don&#39;t need to cast the result of <code>malloc</code> in C. <code>P = malloc(nums * sizeof(DATA))</code> is fine."}, {"owner": {"reputation": 41, "user_id": 3790952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ff4ac45348fee6139bffd0dcb70dc7?s=128&d=identicon&r=PG&f=1", "display_name": "TimeFall", "link": "https://stackoverflow.com/users/3790952/timefall"}, "reply_to_user": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433367145, "post_id": 30630641, "comment_id": 49327838, "body": "Oh, ok, cool. I&#39;d always been taught that it was good to do, but I&#39;d never really thought about why, to be honest. I&#39;ll have to look into that, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3790952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ff4ac45348fee6139bffd0dcb70dc7?s=128&d=identicon&r=PG&f=1", "display_name": "TimeFall", "link": "https://stackoverflow.com/users/3790952/timefall"}, "edited": false, "score": 1, "creation_date": 1433367606, "post_id": 30630814, "comment_id": 49328053, "body": "Great, thanks! That seems to have fixed it. As for the names, they are terrible names and not what I actually use lol, I just went with them for this to be as simple as possible."}], "tags": [], "owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "is_accepted": true, "score": 0, "last_activity_date": 1433366204, "last_edit_date": 1433366204, "creation_date": 1433365861, "answer_id": 30630814, "question_id": 30630641, "link": "https://stackoverflow.com/questions/30630641/munmap-chunck-invalid-pointer-in-c/30630814#30630814", "title": "munmap_chunck(): invalid pointer in c", "body": "<p>This is a common problem which occurs when you provide <code>free</code> a pointer which doesn't point to the start of an allocated memory block. For example, the code</p>\n\n<pre><code>int* something = malloc(sizeof(int)); // Allocate space for 1 int\n...\nfree(something);\n</code></pre>\n\n<p>will work fine as you are providing <code>free</code> with the original pointer returned by <code>malloc</code>. However, if you do something like this:</p>\n\n<pre><code>int* something = malloc(sizeof(int) * 5); // Allocate space for 5 ints\n...\nsomething += sizeof(int); // Shift the allocated memory by 1 int\n...\nfree(something);\n</code></pre>\n\n<p>Then <code>free</code> has been provided a pointer to somewhere in the middle of the allocated memory block. This means that essentially, <code>free</code> has no idea where the block starts or ends, therefore throwing an error. This can be fixed by storing the original pointer value in another pointer:</p>\n\n<pre><code>int* something = malloc(sizeof(int) * 5);\nint* another_something = something; // `another_something` contains the same pointer value as `something`\n...\nsomething += sizeof(int); // `something` changes, `another_something` doesn't\n...\nfree(another_something); // Free the original pointer\n</code></pre>\n\n<p>So, in your case, something like this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct DATA\n{\n    /* variables*/\n} DATA;\n\n/* Declare another DATA*, P1 */\nDATA *P, *P1;\nvoid function1(void);\n\nint main(int argc, char **argv)\n{\n    function1();\n    /*do some stuff*/\n\n    /* Free the original pointer, in P1 */\n    free(P1);\n    return 0;\n}\n\nvoid function1(void)\n{\n    if(!(P = (DATA *)malloc(nums * sizeof(DATA))))\n    {\n        printf(\"Error!\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    /* Store the original value of `P` in P1 */\n    P1 = P;\n\n    /*do stuff*/\n}\n</code></pre>\n\n<p>Lastly, please fix your naming conventions. <code>P</code> and <code>function1</code> are awful names.</p>\n"}], "owner": {"reputation": 41, "user_id": 3790952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ff4ac45348fee6139bffd0dcb70dc7?s=128&d=identicon&r=PG&f=1", "display_name": "TimeFall", "link": "https://stackoverflow.com/users/3790952/timefall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 30630814, "answer_count": 1, "score": 0, "last_activity_date": 1433366204, "creation_date": 1433365303, "question_id": 30630641, "link": "https://stackoverflow.com/questions/30630641/munmap-chunck-invalid-pointer-in-c", "title": "munmap_chunck(): invalid pointer in c", "body": "<p>I have a program that I've written to do some data analysis, and this data is stored in a global structure called P. I allocate the memory for this structure in one function and then, since I need it for the entire program, don't call free until the very end of main. Malloc is not called in main because the size of the array is obtained from a file, so I figured that it made the most sense to read in the file and allocate the memory there, rather than doing all of it in main.   </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct DATA\n{\n    /* variables*/\n} DATA;\n\nDATA *P;\nvoid function1(void);\n\nint main(int argc, char **argv)\n{\n    function1();\n    /*do some stuff*/\n    free(P);\n    return 0;\n}\n\nvoid function1(void)\n{\n    if(!(P = (DATA *)malloc(nums * sizeof(DATA))))\n    {\n        printf(\"Error!\\n\");\n        exit(EXIT_FAILURE);\n    }\n    /*do stuff*/\n}\n</code></pre>\n\n<p>Essentially, when I run my code, I get the error: munmap_chunck(): invalid pointer. I've done a bit of reading and it seems to be related to the function free.  I've also read that malloc and free should be called in the same function.  If this is the case, then my question is: since P is a global variable, why does it matter which function malloc and free are called in for this particular variable? If, in fact, the problem is not caused by malloc and free being called in different functions, does anyone have any advice on what it might be instead? Thank you very much! </p>\n"}, {"tags": ["c", "memory-management", "resize", "shared-memory", "mmap"], "comments": [{"owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 0, "creation_date": 1433365554, "post_id": 30630051, "comment_id": 49327055, "body": "Question: do you know how many buffers you will need and a max size for each?  I&#39;m thinking predefined size with predefined number of buffers.  How else would you manage these &quot;buffers used individually for it&#39;s own purpose&quot;?  Predefined buffer sizes means no fragmentation after all..."}, {"owner": {"reputation": 226, "user_id": 2936306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/907ac0b7e1ec4827e6725dcbd2be9703?s=128&d=identicon&r=PG&f=1", "display_name": "user2936306", "link": "https://stackoverflow.com/users/2936306/user2936306"}, "reply_to_user": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 0, "creation_date": 1433365874, "post_id": 30630051, "comment_id": 49327199, "body": "The number and size of buffers comes from outside the program, so there is not way I can predict what they will be."}, {"owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 0, "creation_date": 1433366128, "post_id": 30630051, "comment_id": 49327349, "body": "Sounds like an initialization thing...  delay until you know and save yourself a lot of headaches."}, {"owner": {"reputation": 226, "user_id": 2936306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/907ac0b7e1ec4827e6725dcbd2be9703?s=128&d=identicon&r=PG&f=1", "display_name": "user2936306", "link": "https://stackoverflow.com/users/2936306/user2936306"}, "reply_to_user": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 0, "creation_date": 1433366271, "post_id": 30630051, "comment_id": 49327412, "body": "No, the buffers are added/removed and resized any number of times throughout runtime."}, {"owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 0, "creation_date": 1433366730, "post_id": 30630051, "comment_id": 49327635, "body": "And you don&#39;t know the worst case scenario?  If you do, you should build for that."}, {"owner": {"reputation": 226, "user_id": 2936306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/907ac0b7e1ec4827e6725dcbd2be9703?s=128&d=identicon&r=PG&f=1", "display_name": "user2936306", "link": "https://stackoverflow.com/users/2936306/user2936306"}, "reply_to_user": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 0, "creation_date": 1433366934, "post_id": 30630051, "comment_id": 49327737, "body": "Yes I could set a maximum size for each buffer and a maximum number of buffers and set them as limits. However that would be a last resort solution, I hope I wont have to do that."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1433368383, "post_id": 30630051, "comment_id": 49328393, "body": "I don&#39;t understand why you are doing all this copying stuff. You could just do <code>unmap</code>, <code>ftruncate</code> and then <code>mmap</code> again, no?"}, {"owner": {"reputation": 226, "user_id": 2936306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/907ac0b7e1ec4827e6725dcbd2be9703?s=128&d=identicon&r=PG&f=1", "display_name": "user2936306", "link": "https://stackoverflow.com/users/2936306/user2936306"}, "edited": false, "score": 0, "creation_date": 1433368732, "post_id": 30630051, "comment_id": 49328556, "body": "Yes, so long as I don&#39;t need the original content anymore. Which in some cases I don&#39;t, otherwise I would have to refill the entire buffer again instead of just the new part."}], "answers": [{"tags": [], "owner": {"reputation": 291, "user_id": 2045856, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ywehv.png?s=128&g=1", "display_name": "Dank&#243; D&#225;vid", "link": "https://stackoverflow.com/users/2045856/dank%c3%b3-d%c3%a1vid"}, "is_accepted": false, "score": 4, "last_activity_date": 1454062466, "creation_date": 1454062466, "answer_id": 35081893, "question_id": 30630051, "link": "https://stackoverflow.com/questions/30630051/how-do-i-implement-dynamic-shared-memory-resizing/35081893#35081893", "title": "How do I implement dynamic shared memory resizing?", "body": "<p>As best as I understand you need to grow (or shrink) the existing memory mapping.\nUnder linux shared memory implemented as a file, located in /dev/shm memory filesystem. All operations in this file is the same as on the regular files  (and file descriptors).</p>\n\n<p>if you want to grow the existing mapping first expand the file size with ftruncate (as you wrote) then use <code>mremap</code> to expand the mapping to the requested size.</p>\n\n<p>If you store pointers points to this region you maybe have to update these, but first try to call with 0 flag. In this case the system tries to grow the existing mapping to the requested size (if there is no collision with other preserved memory region) and pointers remains valid.</p>\n\n<p>If previous option not available use MREMAP_MAYMOVE flag. In this case the system remaps to another locations, but mostly it's done effectively (no copy applied by the system.) then update the pointers.</p>\n\n<p>Shrinking is the same but the reverse order.</p>\n"}, {"comments": [{"owner": {"reputation": 709, "user_id": 1737132, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e6dae553c76a448f32e2a649c0cb9c67?s=128&d=identicon&r=PG", "display_name": "FaceBro", "link": "https://stackoverflow.com/users/1737132/facebro"}, "edited": false, "score": 0, "creation_date": 1503276935, "post_id": 35111292, "comment_id": 78534021, "body": "The solution does not make sense, since from the beginning the lib takes larger memory space than required. The resize is simply return the pre occupied memory"}, {"owner": {"reputation": 1124, "user_id": 5844347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZzQU.png?s=128&g=1", "display_name": "dancancode", "link": "https://stackoverflow.com/users/5844347/dancancode"}, "reply_to_user": {"reputation": 709, "user_id": 1737132, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e6dae553c76a448f32e2a649c0cb9c67?s=128&d=identicon&r=PG", "display_name": "FaceBro", "link": "https://stackoverflow.com/users/1737132/facebro"}, "edited": false, "score": 0, "creation_date": 1503277186, "post_id": 35111292, "comment_id": 78534063, "body": "The larger span does not allocate the memory but merely claims the addresses."}, {"owner": {"reputation": 709, "user_id": 1737132, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e6dae553c76a448f32e2a649c0cb9c67?s=128&d=identicon&r=PG", "display_name": "FaceBro", "link": "https://stackoverflow.com/users/1737132/facebro"}, "edited": false, "score": 0, "creation_date": 1503277380, "post_id": 35111292, "comment_id": 78534100, "body": "by claiming the memory, the claimed memory cannot be used for other purpose, Right? In this sense, it has the same effect of allocating the reserved memory."}, {"owner": {"reputation": 1124, "user_id": 5844347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZzQU.png?s=128&g=1", "display_name": "dancancode", "link": "https://stackoverflow.com/users/5844347/dancancode"}, "reply_to_user": {"reputation": 709, "user_id": 1737132, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e6dae553c76a448f32e2a649c0cb9c67?s=128&d=identicon&r=PG", "display_name": "FaceBro", "link": "https://stackoverflow.com/users/1737132/facebro"}, "edited": false, "score": 1, "creation_date": 1503277515, "post_id": 35111292, "comment_id": 78534126, "body": "Claiming addresses is not the same as allocating memory."}, {"owner": {"reputation": 709, "user_id": 1737132, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e6dae553c76a448f32e2a649c0cb9c67?s=128&d=identicon&r=PG", "display_name": "FaceBro", "link": "https://stackoverflow.com/users/1737132/facebro"}, "edited": false, "score": 0, "creation_date": 1503277615, "post_id": 35111292, "comment_id": 78534148, "body": "Good to know,  let me do some research to educate myself first before making more comments. Thanks"}, {"owner": {"reputation": 356, "user_id": 4485708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwfmt.png?s=128&g=1", "display_name": "Whilom Chime", "link": "https://stackoverflow.com/users/4485708/whilom-chime"}, "edited": false, "score": 0, "creation_date": 1563887512, "post_id": 35111292, "comment_id": 100843615, "body": "Just for folks primarily interested in <i>shrinkable</i> shared mem, note that it appears rszshm doesn&#39;t shrink, it only grows."}], "tags": [], "owner": {"reputation": 1124, "user_id": 5844347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZzQU.png?s=128&g=1", "display_name": "dancancode", "link": "https://stackoverflow.com/users/5844347/dancancode"}, "is_accepted": false, "score": 4, "last_activity_date": 1454224400, "last_edit_date": 1592644375, "creation_date": 1454224078, "answer_id": 35111292, "question_id": 30630051, "link": "https://stackoverflow.com/questions/30630051/how-do-i-implement-dynamic-shared-memory-resizing/35111292#35111292", "title": "How do I implement dynamic shared memory resizing?", "body": "<p>I wrote an open source library for just this purpose:\n<a href=\"http://ccodearchive.net/info/rszshm.html\" rel=\"nofollow noreferrer\">rszshm - resizable pointer-safe shared memory</a></p>\n<p>To quote from the description page:</p>\n<blockquote>\n<p>To accommodate resizing, rszshm first maps a large, private, noreserve\nmap. This serves to claim a span of addresses. The shared file mapping\nthen overlays the beginning of the span. Later calls to extend the\nmapping overlay more of the span. Attempts to extend beyond the end of\nthe span return an error.</p>\n</blockquote>\n<p>I extend a mapping by calling mmap with MAP_FIXED at the original address, and with the new size.</p>\n"}], "owner": {"reputation": 226, "user_id": 2936306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/907ac0b7e1ec4827e6725dcbd2be9703?s=128&d=identicon&r=PG&f=1", "display_name": "user2936306", "link": "https://stackoverflow.com/users/2936306/user2936306"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2598, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1454224400, "creation_date": 1433363327, "question_id": 30630051, "link": "https://stackoverflow.com/questions/30630051/how-do-i-implement-dynamic-shared-memory-resizing", "title": "How do I implement dynamic shared memory resizing?", "body": "<p>Currently I use shm_open to get a file descriptor and then use ftruncate and mmap whenever I want to add a new buffer to the shared memory. Each buffer is used individually for its own purposes.</p>\n\n<p>Now what I need to do is arbitrarily resize buffers.\nAnd also munmap buffers and reuse the free space again later.</p>\n\n<p>The only solution I can come up with for the first problem is: ftuncate(file_size + old_buffer_size + extra_size), mmap, copy data accross into the new buffer and then munmap the original data. This looks very expensive to me and there is probably a better way. It also entails removing the original buffer every time.</p>\n\n<p>For the second problem I don't even have a bad solution, I clearly can't move memory around everytime a buffer is removed. And if I keep track of free memory and use it whenever possible it will slow down allocation process as well as leave me with bits and pieces in between that are unused.</p>\n\n<p>I hope this is not too confusing.\nThanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1433363172, "post_id": 30629943, "comment_id": 49325766, "body": "They appear to be the same. Can you point out the functional difference you perceive?"}, {"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1433363203, "post_id": 30629943, "comment_id": 49325784, "body": "@Jongware I am asking about the syntax. One misses the keywords such as &quot;sig&quot; and &quot;func&quot;."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1433363234, "post_id": 30629943, "comment_id": 49325800, "body": "@KorayTugay: Those aren&#39;t keywords. Keywords are thinks like <code>if</code> and <code>return</code>."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1433363249, "post_id": 30629943, "comment_id": 49325809, "body": "Those are not &quot;syntax&quot;. Check your course book on &quot;function declarations&quot; (and on &quot;keywords in C&quot;)."}, {"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1433363402, "post_id": 30629943, "comment_id": 49325886, "body": "@Jongware I tought function declaration was syntax."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1433363562, "post_id": 30629943, "comment_id": 49325973, "body": "It is. Both are &quot;function declarations&quot;, both are valid, both are the same. That is why I said that they appear the same to me (and your compiler ought to do so as well)."}, {"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1433363638, "post_id": 30629943, "comment_id": 49326014, "body": "@Jongware Well I did not know C allowed both syntax for declaring functions, hence the confusion. Thanks."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1433363695, "post_id": 30629943, "comment_id": 49326050, "body": "Part of your confusion likely stems from the fact that the second is a mix of supplied and omitted parameter names; at least the first one omits all parameter names consistently."}], "answers": [{"comments": [{"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "edited": false, "score": 0, "creation_date": 1433363365, "post_id": 30630015, "comment_id": 49325859, "body": "So when declaring a function in C, I can avoid the variable names? Only include the types? Like int myFunc(int,int,int) ? I did not know that, hence the confusion. Thanks."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "edited": false, "score": 0, "creation_date": 1433363416, "post_id": 30630015, "comment_id": 49325893, "body": ".. But put in variable names - helps in understanding"}, {"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "edited": false, "score": 0, "creation_date": 1433363497, "post_id": 30630015, "comment_id": 49325934, "body": "Yes definetly.. Thanks."}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": true, "score": 3, "last_activity_date": 1433363220, "creation_date": 1433363220, "answer_id": 30630015, "question_id": 30629943, "link": "https://stackoverflow.com/questions/30629943/which-of-these-declarations-is-the-proper-one-for-declaring-a-c-function/30630015#30630015", "title": "Which of these declarations is the proper one for declaring a C function?", "body": "<p>Both are the same.</p>\n\n<p>One declaration happens to give them names to aid in understanding. The other is less helpful.</p>\n\n<p>The ones with names are trying to be self documenting</p>\n"}, {"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 5, "last_activity_date": 1433363759, "last_edit_date": 1433363759, "creation_date": 1433363363, "answer_id": 30630060, "question_id": 30629943, "link": "https://stackoverflow.com/questions/30629943/which-of-these-declarations-is-the-proper-one-for-declaring-a-c-function/30630060#30630060", "title": "Which of these declarations is the proper one for declaring a C function?", "body": "<p>In a function type, parameters may but do not need to have names. There is nothing you can do with the names, and they serve as documentation at best:</p>\n\n<pre><code>typedef bool(*checker_v1)(int);\ntypedef bool(*checker_v2)(int arg);    // optional parameter name\n\nchecker_v1 f = is_even;\nchecker_v2 g = is_odd;\nf = g;                    // f and g have the same type\n\ntypedef bool(fchecker)(int);   // also OK, fchecker* == checker_v1 == checker_v2\n</code></pre>\n\n<p>Function pointers can be the type of function parameters:</p>\n\n<pre><code>void process(int n, checker_v1 f, fchecker* g, bool(*h)(int pointless))\n{\n    if (f(n)) { do_a(); }\n    if (g(n)) { do_b(); }\n    if (h(n)) { do_c(); }\n}\n</code></pre>\n\n<p>In the final example, note that the name of the parameter of the type of the fourth parameter type of <code>process</code> is completely irrelevant.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1433363405, "creation_date": 1433363405, "answer_id": 30630075, "question_id": 30629943, "link": "https://stackoverflow.com/questions/30629943/which-of-these-declarations-is-the-proper-one-for-declaring-a-c-function/30630075#30630075", "title": "Which of these declarations is the proper one for declaring a C function?", "body": "<pre><code>void foo(int);\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>void foo(int x);\n          // ^^ name of the argument.\n</code></pre>\n\n<p>In the same vein,</p>\n\n<pre><code>void (*signal(int, void (*)(int)))(int);\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>void (*signal(int sig, void (*func) (int)))(int);\n                           // ^^^^ name of the argument.\n</code></pre>\n"}], "owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 30630015, "answer_count": 3, "score": 1, "last_activity_date": 1433363759, "creation_date": 1433363008, "question_id": 30629943, "link": "https://stackoverflow.com/questions/30629943/which-of-these-declarations-is-the-proper-one-for-declaring-a-c-function", "title": "Which of these declarations is the proper one for declaring a C function?", "body": "<p>I am trying to understand the Signals and studying from various resources. </p>\n\n<p>One resource I found is <a href=\"http://www.csl.mtu.edu/cs4411.choi/www/Resource/signal.pdf\" rel=\"nofollow\">this</a>. </p>\n\n<p>Here the declaration is as follows:</p>\n\n<pre><code>void (*signal(int, void (*)(int)))(int);\n</code></pre>\n\n<p>And the other one is <a href=\"http://www.dslreports.com/forum/r8932390-Can-someone-help-me-with-this-syntax-C-language\" rel=\"nofollow\">this</a>. </p>\n\n<p>Here the declaration is as follows:</p>\n\n<pre><code>void (*signal(int sig, void (*func) (int)))(int);\n</code></pre>\n\n<p>So side-by-side(!) they are:</p>\n\n<pre><code>void (*signal(int, void (*)(int)))(int);\nvoid (*signal(int sig, void (*func) (int)))(int);\n</code></pre>\n\n<p>Which one is the proper way and why?</p>\n"}, {"tags": ["c", "list", "hyperlink", "crash"], "comments": [{"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433363066, "post_id": 30629931, "comment_id": 49325706, "body": "You should post the rest of your code.  You have a <code>free</code> and we don&#39;t see where it&#39;s being allocated.  Also, are you calling <code>main</code>?  That can&#39;t be right..."}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1433363289, "post_id": 30629931, "comment_id": 49325828, "body": "Is <code>delName</code> really a <code>char</code> or is it a <code>char *</code>?  You should compile with all warnings on (<code>gcc -Wall</code> if you are using gcc)."}, {"owner": {"reputation": 41, "user_id": 4966239, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/60847da727ff7647e07d7ff506e31652?s=128&d=identicon&r=PG&f=1", "display_name": "john jil", "link": "https://stackoverflow.com/users/4966239/john-jil"}, "edited": false, "score": 0, "creation_date": 1433363349, "post_id": 30629931, "comment_id": 49325850, "body": "i called main just to purpose the menu again once the user completes a task, it goes back and prompts them again."}, {"owner": {"reputation": 41, "user_id": 4966239, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/60847da727ff7647e07d7ff506e31652?s=128&d=identicon&r=PG&f=1", "display_name": "john jil", "link": "https://stackoverflow.com/users/4966239/john-jil"}, "edited": false, "score": 0, "creation_date": 1433363574, "post_id": 30629931, "comment_id": 49325978, "body": "I made delName a pointer and it does not crash. Now I cant get it to call main and reopen the menu so I can check to see if it really is deleted :O"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1433363760, "post_id": 30629931, "comment_id": 49326084, "body": "are you calling <code>main()</code> from <code>delete()</code>???"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1433363963, "post_id": 30630156, "comment_id": 49326185, "body": "The function <code>delete</code> is also hard to follow since the conditionals all <code>return</code> yet continue with <code>else</code> statements. The instruction <code>temp= temp-&gt;next;</code> should be unconditional as it is essential for the loop to continue."}, {"owner": {"reputation": 41, "user_id": 4966239, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/60847da727ff7647e07d7ff506e31652?s=128&d=identicon&r=PG&f=1", "display_name": "john jil", "link": "https://stackoverflow.com/users/4966239/john-jil"}, "edited": false, "score": 0, "creation_date": 1433372323, "post_id": 30630156, "comment_id": 49330057, "body": "ok thanks! Ill replace that main() issue. So calling main in any function is a no no."}], "tags": [], "owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "is_accepted": true, "score": 1, "last_activity_date": 1433363736, "creation_date": 1433363736, "answer_id": 30630156, "question_id": 30629931, "link": "https://stackoverflow.com/questions/30629931/incompatible-types-when-assigning-to-type-char50-from-type-char/30630156#30630156", "title": "incompatible types when assigning to type &#39;char[50]&#39; from type &#39;char *&#39;", "body": "<p>The main problem is that this:</p>\n\n<pre><code>void delete(char delName)\n</code></pre>\n\n<p>should be this:</p>\n\n<pre><code>void delete(char *delName)\n</code></pre>\n\n<p>However, there are many other problems with your program and it would take a long time to list all of them.  I'll just give you two things to fix:</p>\n\n<ol>\n<li><p>You should turn on warnings and fix all of them.</p></li>\n<li><p>Your functions shouldn't call <code>main()</code>.  Instead, <code>main()</code> should contain a loop, like this:</p>\n\n<pre><code>//create the portion that decides the user input\nint userSelection = 0 ;\ndo {\n    scanf(\"%d\", &amp;userSelection);\n    userSelect(userSelection);\n} while (userSelection != 5);\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 41, "user_id": 4966239, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/60847da727ff7647e07d7ff506e31652?s=128&d=identicon&r=PG&f=1", "display_name": "john jil", "link": "https://stackoverflow.com/users/4966239/john-jil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "accepted_answer_id": 30630156, "answer_count": 1, "score": 0, "last_activity_date": 1435768986, "creation_date": 1433362955, "last_edit_date": 1435768986, "question_id": 30629931, "link": "https://stackoverflow.com/questions/30629931/incompatible-types-when-assigning-to-type-char50-from-type-char", "title": "incompatible types when assigning to type &#39;char[50]&#39; from type &#39;char *&#39;", "body": "<p>I am trying to create a link list. I have a function that deletes (delete function)  stuff from my link list. But it seems to crash when I try to compare strings. It works up until the last random printf statement. </p>\n\n<p>Here is the code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nstruct node {\n    char data[50];\n    struct node *next;\n}*head;\n\nint main()\n{\n    //creates a sudo user interface\n    printf(\"1. Insert\\n\");\n    printf(\"2. Display\\n\");\n    printf(\"3  Count\\n\");\n    printf(\"4. Delete\\n\");\n    printf(\"5. Exit\\n\");\n\n    //create the portion that decides the user input\n    int userSelection = 0 ;\n    scanf(\"%d\", &amp;userSelection);\n    userSelect(userSelection);\n\n\n    return 0;\n}\n//this function will handle user imput\nvoid userSelect(int num)\n{\n    if(num == 1)\n    {\n        printf(\"What is your name?\\n\");\n        char userName[30];\n        scanf(\" %s\", userName);\n        add(userName);\n\n    } else if(num ==2) {\n        display();\n\n    } else if (num ==2){\n        //do something\n    } else if (num ==3){\n        printf(\"%d\", count());\n        main();\n    } else if (num ==4 ){\n        char delName[50];\n        printf(\"Who do you want to remove?\\n\");\n        scanf(\"%s\", delName);\n        delete(delName);\n    }else if (num == 5){\n        // return 0;\n    }else if (num &gt; 6){\n        printf(\"\\n52Please make sure you use a valid option!\\n\\n\");\n        main();\n    }\n\n\n}\n\nvoid add( char userName[] )\n{\n    struct node *temp;\n\n    temp=(struct node *)malloc(sizeof(struct node));\n\n    strcpy(temp-&gt;data, userName);\n\n    if (head== NULL)\n    {\n        head=temp;\n        head-&gt;next=NULL;\n    }\n    else\n    {\n        temp-&gt;next=head;\n        head=temp;\n    }\n    printf(\"\\n\");\n    main();\n}\nint count()\n{\n    struct node *n;\n    int c=0;\n    n=head;\n    while(n!=NULL)\n    {\n        n=n-&gt;next;\n        c++;\n    }\n    printf(\"\\n\");\n    return c;\n}\nvoid display(struct node *r)\n{\n    r=head;\n    if(r==NULL)\n    {\n        return;\n    }\n    while(r!=NULL)\n    {\n        printf(\"%s \",r-&gt;data);\n        r=r-&gt;next;\n    }\n    printf(\"\\n\");\n    main();\n}\n\n\nvoid delete(char delName)\n{\n    struct node *temp, *prev;\n    temp=head;\n    printf(\"sffs\\n\");\n    while(temp!=NULL)\n    {\n        printf(\"sdg\\n\");\n        if(strcmp(temp-&gt;data, delName)==0)\n        {\n            if(temp==head)\n            {\n                head=temp-&gt;next;\n                free(temp);\n                return 1;\n            }\n            else\n            {\n                prev-&gt;next=temp-&gt;next;\n                free(temp);\n                return 1;\n            }\n        }\n        else\n        {\n            prev=temp;\n            temp= temp-&gt;next;\n        }\n    }\n    main();\n}\n</code></pre>\n\n<p>I think it has something to do with the strcmp in the delete function..but does anyone have any ideas?</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1433363880, "post_id": 30629860, "comment_id": 49326142, "body": "Side note: No need to re-declare function <code>nrerror</code>, and most certainly no need to declare it inside function <code>plgndr</code> (or any other function for that matter)."}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1433364487, "post_id": 30629860, "comment_id": 49326449, "body": "@barakmanos Thanks. I&#39;m still unclear how the Numerical Recipes series wishes one to use their nrerror function...."}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1433365112, "post_id": 30629860, "comment_id": 49326792, "body": "@banach-space <code>m</code> initalized to 2 should be no problem according to how P^m_l(x) is defined. The rule for <code>m</code> and <code>l</code> is <code>0&lt;=m&lt;=l</code>. So, that should be fine. The error is thrown by <code>m &lt; 0 || m &gt; l || fabs(x) &gt; 1.0</code> not if m is less than 0 or greater than 1."}, {"owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "edited": false, "score": 0, "creation_date": 1433365235, "post_id": 30629860, "comment_id": 49326867, "body": "See my answer below. There&#39;s a typo in your code."}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "edited": false, "score": 0, "creation_date": 1433365382, "post_id": 30629860, "comment_id": 49326966, "body": "@banach-space I finally see what you mean. Ugh, how embarrassing...."}], "answers": [{"comments": [{"owner": {"reputation": 3422, "user_id": 1458030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3728aa864efa903f4d0c7db9ac39989?s=128&d=identicon&r=PG", "display_name": "qPCR4vir", "link": "https://stackoverflow.com/users/1458030/qpcr4vir"}, "edited": false, "score": 0, "creation_date": 1433363862, "post_id": 30630019, "comment_id": 49326128, "body": "just test x=0.5 or 1.0 . or?"}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1433364050, "post_id": 30630019, "comment_id": 49326232, "body": "Yes, you are right. That is an error above. It should be (for testing purposes) x = 0.5"}], "tags": [], "owner": {"reputation": 3422, "user_id": 1458030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3728aa864efa903f4d0c7db9ac39989?s=128&d=identicon&r=PG", "display_name": "qPCR4vir", "link": "https://stackoverflow.com/users/1458030/qpcr4vir"}, "is_accepted": false, "score": 0, "last_activity_date": 1433363229, "creation_date": 1433363229, "answer_id": 30630019, "question_id": 30629860, "link": "https://stackoverflow.com/questions/30629860/bad-arguments-error-implementing-numerical-recipes-function/30630019#30630019", "title": "Bad arguments error, implementing Numerical Recipes function", "body": "<blockquote>\n  <p>while x lies in the range -1&lt;=x&lt;=1</p>\n</blockquote>\n\n<p>but</p>\n\n<pre><code>double x=2.0;\n\ndouble plgndr(int l, int m, double x) //originally written as float\n/* ... while x lies in   the range -1&lt;=x&lt;=1. */\n{\n</code></pre>\n\n<p>...</p>\n\n<pre><code>if (m &lt; 0 || m &gt; 1 || fabs(x) &gt; 1.0)\n    nrerror(\"Bad arguments in routine plgndr\");  // fail\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1433365286, "post_id": 30630454, "comment_id": 49326898, "body": "Oh no! You&#39;re right. I wrote <code>1</code> one , not <code>l</code> L.....That solves it. Now no errors are thrown :) Thanks!"}, {"owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "reply_to_user": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1433365433, "post_id": 30630454, "comment_id": 49326989, "body": "You&#39;re welcome. Tick as <code>accepted</code> if you&#39;re happy with the answer. Upvotes are also welcome ;-)"}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1433365596, "post_id": 30630454, "comment_id": 49327075, "body": "Thanks again! For the record, given my implementation above, what is the best way to call the function? <code>fprintf(plgndr)</code>?"}, {"owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "reply_to_user": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1433365926, "post_id": 30630454, "comment_id": 49327233, "body": "<code>fprintf(plgndr)</code>? What would like to achieve with this? That&#39;s definitely not the way you want to call <code>fprintf()</code>."}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1433366661, "post_id": 30630454, "comment_id": 49327602, "body": "No, I just want to call the function. I suspect the proper way to do this in C is to write within <code>int main()</code> something like <code>ret = plgndr(l,m,x) \\\\calls function</code> <code>printf( &quot;The value for P^m_l(x) is  : %d\\n&quot;, ret );</code>"}, {"owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "reply_to_user": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1433366844, "post_id": 30630454, "comment_id": 49327699, "body": "That&#39;s the way I would do it."}], "tags": [], "owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "is_accepted": true, "score": 1, "last_activity_date": 1433365194, "last_edit_date": 1433365194, "creation_date": 1433364676, "answer_id": 30630454, "question_id": 30629860, "link": "https://stackoverflow.com/questions/30629860/bad-arguments-error-implementing-numerical-recipes-function/30630454#30630454", "title": "Bad arguments error, implementing Numerical Recipes function", "body": "<p>According to the comment next to the definition of <code>plgndr()</code>, </p>\n\n<blockquote>\n  <p>(...) m and l are integers satisfying 0&lt;=m&lt;=l, while x lies in the\n  range -1&lt;=x&lt;=1.</p>\n</blockquote>\n\n<p>Update the following line in <code>plgndr()</code>:</p>\n\n<pre><code>if (m &lt; 0 || m &gt; 1 || fabs(x) &gt; 1.0)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>if (m &lt; 0 || m &gt; l || fabs(x) &gt; 1.0)\n/*               ^                */\n/*           (l, not 1)           */\n</code></pre>\n\n<p>It's a stupid typo. With this change the code doesn't crash, but I'm not able to verify it mathematically. </p>\n"}], "owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 30630454, "answer_count": 2, "score": 0, "last_activity_date": 1433365334, "creation_date": 1433362674, "last_edit_date": 1433365334, "question_id": 30629860, "link": "https://stackoverflow.com/questions/30629860/bad-arguments-error-implementing-numerical-recipes-function", "title": "Bad arguments error, implementing Numerical Recipes function", "body": "<p>EDIT: This is a typo error. I wrote <code>1</code> one but it should be <code>l</code> ell. Thanks everyone!</p>\n\n<p>I hate to ask a n00b question like this on SO, but I would like to write a simple program to check the functions written in Numerical Recipes by Press, Teukolsky, etc. I'm slightly inexperienced using C, so this may be entirely obvious. (Please be patient!) </p>\n\n<p>The function in question is the associated legendre polynomial from the chapter on Special Functions. I have documented this thoroughly in the code below. However, it appears I do not understand how to call a function correctly. When running the program below using <code>$ ./a.out</code> after compiling with <code>gcc program.c</code>, I get the following error:</p>\n\n<pre><code>Run time error....\nBad arguments in routine plgndr\nNow exiting the system\n</code></pre>\n\n<p>I'm guessing this is obvious to fix, but so far I haven't quite figured it out. I should better understand C after this question, even if it is not helpful to other SO readers...</p>\n\n<p>The <code>nrerror</code> function is a standard of the Numerical Recipes series, which is found in Appendix B. Here is my code (excuse the extensive comments at the beginning): </p>\n\n<pre><code>/* Recurrence relation, Legendre polynomial\n\n Numerical recipes in C, 1992\n Press, Flannery, Teukolsky, Vetterling\n\n Chapter 6., Special Functions, \n Section 6.8 Spherical Harmonics, p.252-254\n\n The Legendre polynomial recurrence relation is written as\n\n (n+1)*P_{n+1}(x)=(2n+1)*x*P_n(x)-n*P_{n-1}(x)\n\n float plgndr(int l, int m, float x)\n Computes the associated Legendre polynomial P^m_l(x). Here m and l\n are integers satisfying 0&lt;=m&lt;=l, while x lies in the range\n -1&lt;=x&lt;=1.\n\n P(0,x) = 1\n P(1,x) = x\n P(n,x) = (2*n-1)/n * x * P(n-1,x) - (n-1)/n * P(n-2,x)\n\n*/\n\n#include &lt;stdio.h&gt;    // standard file input and output header\n#include &lt;stdlib.h&gt;   // utility functons such as malloc() and rand()\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;     // mathematical functions such as sin() and cos()}\n#include &lt;stddef.h&gt;   // for error function\n\n/* function declarations */\nvoid nrerror(char error_text[]);\ndouble plgndr(int l, int m, double x);\n\n\n/* program begins */\nint main(void)\n{\n    int l=2; /* Asign values to variables here */\n    int m=2;\n    double x=0.5;  // x must be between -1 and 1\n    plgndr(l,m,x);\n    return 0;\n}\n\n/* functions */\nvoid nrerror(char error_text[]) //Numerical Recipes standard error handler\n{\n    fprintf(stderr, \"Run time error....\\n\");\n    fprintf(stderr, \"%s\\n\", error_text);\n    fprintf(stderr, \"Now exiting the system\\n\");\n    exit(1);\n}\ndouble plgndr(int l, int m, double x) //originally written as float\n/* Computes the associated Legendre polynomial P^m_l(x). Here m and l\n   are integers satisfying 0&lt;=m&lt;=l, while x lies in\n   the range -1&lt;=x&lt;=1. */\n{\n    void nrerror(char error_text[]);\n    double fact,pll,pmm,pmmp1,somx2;\n    int i,ll;\n\n    if (m &lt; 0 || m &gt; 1 || fabs(x) &gt; 1.0)\n        nrerror(\"Bad arguments in routine plgndr\");\n    pmm=1.0;          //Compute P^m_m\n    if (m &gt; 0){\n        somx2=sqrt((1.0-x)*(1.0+x));\n        fact=1.0;\n        for (i=1; i&lt;=m; i++){\n            pmm *= -fact*somx2;\n            fact += 2.0;\n        }\n    }\n    if (l == m)\n        return pmm;\n    else{             //Compute P^m_{m+1}\n        pmmp1=x*(2*m+1)*pmm;\n        if (l == (m+1))\n            return pmmp1;\n        else {         //Compute P^m_l, l &gt; m+1\n            for (ll=m+2; ll&lt;=l; ll++){\n                pll=(x*(2*ll-1)*pmmp1-(ll+m-1)*pmm)/(ll-m);\n                pmm=pmmp1;\n                pmmp1=pll;\n            }\n            return pll;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433362980, "post_id": 30629760, "comment_id": 49325660, "body": "What is an &quot;investor digit&quot;?"}, {"owner": {"reputation": 1754, "user_id": 3438854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6166f4f52597368408966dd0b679402?s=128&d=identicon&r=PG&f=1", "display_name": "John C", "link": "https://stackoverflow.com/users/3438854/john-c"}, "edited": false, "score": 0, "creation_date": 1433363074, "post_id": 30629760, "comment_id": 49325710, "body": "It should be the opposite order, no?  rev(12345) = 50000 + rev(1234) = 54000 + rev(123) = ... = 54321."}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1433363975, "post_id": 30629760, "comment_id": 49326195, "body": "Please post the expected output and the actual output."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433364130, "post_id": 30629760, "comment_id": 49326270, "body": "Note: values like <code>1234567899</code> will not reverse properly as <code>9987654321</code> is likely outside <code>int</code> range."}, {"owner": {"reputation": 1131, "user_id": 3780071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lq0ha.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/3780071/kevin"}, "reply_to_user": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1433364231, "post_id": 30629760, "comment_id": 49326325, "body": "@QuestionC I get the correct output, I just want to know that values is taking with (num % 10)"}], "answers": [{"comments": [{"owner": {"reputation": 1131, "user_id": 3780071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lq0ha.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/3780071/kevin"}, "edited": false, "score": 0, "creation_date": 1433363806, "post_id": 30629965, "comment_id": 49326100, "body": "this confuses me more"}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1433364176, "post_id": 30629965, "comment_id": 49326286, "body": "It helps to note that <code>log10(x)</code> returns a floating point value in the form <code>A.B</code> where <code>A</code> is the number of digits in <code>x</code>.  So <code>(int)log10(num)</code> is the number of digits in <code>num</code>.  That&#39;s just a mathematical property of base 10 logarithms."}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1433365081, "post_id": 30629965, "comment_id": 49326769, "body": "Er, it returns 1 less than the number of digits."}], "tags": [], "owner": {"reputation": 1017, "user_id": 2072005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba025189d0d4e0fe5a3e6b2b9062be3?s=128&d=identicon&r=PG", "display_name": "Jonatan Goebel", "link": "https://stackoverflow.com/users/2072005/jonatan-goebel"}, "is_accepted": true, "score": 4, "last_activity_date": 1433365476, "last_edit_date": 1433365476, "creation_date": 1433363057, "answer_id": 30629965, "question_id": 30629760, "link": "https://stackoverflow.com/questions/30629760/not-understand-this-recursive-function-that-inverts-digits-of-a-number/30629965#30629965", "title": "Not understand this recursive function that inverts digits of a number", "body": "<pre><code>int rev(int num) // num = 12345\n{\n    if(num &lt; 10) // false\n        return num;\n    else\n        return (num % 10) * pow(10, (int)log10(num)) + rev(num/10);\n        //     (12345 % 10) * 10 ^ (log 12345) + rev(12345/10);\n        //     5 * 10 ^ (4) + rev (1234)\n        //     50000 + rev(1234)\n}\n</code></pre>\n\n<p>Based on this, we can assume that:</p>\n\n<pre><code>rev(12345) = 50000 + rev(1234)\nrev(1234) = 4000 + rev(123)\nrev(123) = 300 + rev(12)\nrev(12) = 20 + rev(1)\nrev(1) = 1\n</code></pre>\n\n<p>So, the end result is:</p>\n\n<pre><code>rev(12345) = 50000 + 4000 + 300 + 20 + 1 = 54321\n</code></pre>\n\n<p>It is a simple math, the only non trivial rule is <code>(int)log10(num)</code>, but it was explained by @QuestionC in his comment. </p>\n"}], "owner": {"reputation": 1131, "user_id": 3780071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lq0ha.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/3780071/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 30629965, "answer_count": 1, "score": 0, "last_activity_date": 1433365996, "creation_date": 1433362387, "last_edit_date": 1433365996, "question_id": 30629760, "link": "https://stackoverflow.com/questions/30629760/not-understand-this-recursive-function-that-inverts-digits-of-a-number", "title": "Not understand this recursive function that inverts digits of a number", "body": "<p>I found this code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint rev(int num)\n{\n    if(num &lt; 10)\n        return num;\n    else\n        return (num % 10) * pow(10, (int)log10(num)) + rev(num/10);\n}\n\nint main(void)\n{\n    printf(\"%d\\n\", rev(12345));\n\n    return 0;\n}\n</code></pre>\n\n<p>And I set out to analyzing it, but now I have one doubt it is the following, to return to the starting point what values are obtained with <em>(num % 10)</em> according to my understanding should be (1,2,3,4,5) but when trying do the calculation manually I do not get the expected value.</p>\n\n<p>What happens here, if someone explains to me this, or I missed out something?</p>\n"}, {"tags": ["c", "executable", "elf", "readelf"], "answers": [{"tags": [], "owner": {"reputation": 728, "user_id": 5922180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c63faa62b64336441393d7c11e1ec79a?s=128&d=identicon&r=PG&f=1", "display_name": "DrPrItay", "link": "https://stackoverflow.com/users/5922180/drpritay"}, "is_accepted": false, "score": -1, "last_activity_date": 1484435335, "creation_date": 1484435335, "answer_id": 41656014, "question_id": 30629085, "link": "https://stackoverflow.com/questions/30629085/read-plt-section-of-elf-binary-and-print-function-virtual-address/41656014#41656014", "title": "Read plt section of ELF binary and print function virtual address", "body": "<p>Uhmm, If I've understood what your question is correctly then you can't.... ASLR - Adress Space Layout Randomization, Every SO gets loaded into some Random address, and during load-time or run-time (dependant on the symbol's binding - Lazy or not ) the GOT is changed to the actual virtual address of the loaded external symbol, When calling some external function you are basically jumping to some pre defined offset (into the GOT) and call the function out of the address that would be stored within that offset. It is the goal of ld or the OS loader to change that address into the address you should jump into during runtime</p>\n"}], "owner": {"reputation": 4889, "user_id": 512251, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/22e7b72b9263f93415e9bd80039671f3?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/512251/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2622, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1484435335, "creation_date": 1433360130, "last_edit_date": 1433361486, "question_id": 30629085, "link": "https://stackoverflow.com/questions/30629085/read-plt-section-of-elf-binary-and-print-function-virtual-address", "title": "Read plt section of ELF binary and print function virtual address", "body": "<p>I want to read .plt section of an ELF binary and get all the virtual addresses of external functions. </p>\n\n<pre><code>Disassembly of section .plt:\n\n0000000000400400 &lt;puts@plt-0x10&gt;:\n  400400:       ff 35 02 0c 20 00       pushq  0x200c02(%rip)        # 601008 &lt;_GLOBAL_OFFSET_TABLE_+0x8&gt;\n  400406:       ff 25 04 0c 20 00       jmpq   *0x200c04(%rip)        # 601010 &lt;_GLOBAL_OFFSET_TABLE_+0x10&gt;\n  40040c:       0f 1f 40 00             nopl   0x0(%rax)\n\n0000000000400410 &lt;puts@plt&gt;:\n  400410:       ff 25 02 0c 20 00       jmpq   *0x200c02(%rip)        # 601018 &lt;_GLOBAL_OFFSET_TABLE_+0x18&gt;\n  400416:       68 00 00 00 00          pushq  $0x0\n  40041b:       e9 e0 ff ff ff          jmpq   400400 &lt;_init+0x20&gt;\n\n0000000000400420 &lt;__libc_start_main@plt&gt;:\n  400420:       ff 25 fa 0b 20 00       jmpq   *0x200bfa(%rip)        # 601020 &lt;_GLOBAL_OFFSET_TABLE_+0x20&gt;\n  400426:       68 01 00 00 00          pushq  $0x1\n  40042b:       e9 d0 ff ff ff          jmpq   400400 &lt;_init+0x20&gt;\n\n0000000000400430 &lt;__gmon_start__@plt&gt;:\n  400430:       ff 25 f2 0b 20 00       jmpq   *0x200bf2(%rip)        # 601028 &lt;_GLOBAL_OFFSET_TABLE_+0x28&gt;\n  400436:       68 02 00 00 00          pushq  $0x2\n  40043b:       e9 c0 ff ff ff          jmpq   400400 &lt;_init+0x20&gt;\n</code></pre>\n\n<p>For example, <code>0x400410</code> and the function name <code>puts@plt</code> and so on. I've tried to read <code>REL_PLT</code> section of ELF binary. But I get the address <code>0x601108</code> for PLT entry <code>0x400410</code> which is from Global Offset Table. How can I get the virtual addresses of plt entries?</p>\n\n<p><strong>EDIT</strong>: It turned out I'm reading <code>got.plt</code> section. How can I read just <code>.plt</code> section using readelf?</p>\n"}, {"tags": ["c", "binary", "hex", "driver", "masking"], "comments": [{"owner": {"reputation": 2047, "user_id": 1589074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w6pws.jpg?s=128&g=1", "display_name": "Abhinav", "link": "https://stackoverflow.com/users/1589074/abhinav"}, "edited": false, "score": 0, "creation_date": 1433360058, "post_id": 30628922, "comment_id": 49323937, "body": "What is the expected result? Should the ## be always 0? or always 1? or some arbitrary combination?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1433361422, "post_id": 30628922, "comment_id": 49324701, "body": "Since my answer was cut short when the question was singlehandedly marked as duplicate and the linked answer only gives general hints about bit-fiddling: You need <code>a = (a &amp; ~(3 &lt;&lt; 18)) | (i &lt;&lt; 18);</code> Here, <code>a</code> is the original value and <code>i</code> is a value from 0 to 3 that you wish to set bits 18 and 19 to."}], "owner": {"reputation": 41, "user_id": 4921576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce16afe33a65e1b77666a439a6b47b5?s=128&d=identicon&r=PG&f=1", "display_name": "IronMage", "link": "https://stackoverflow.com/users/4921576/ironmage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1433360202, "answer_count": 0, "score": 0, "last_activity_date": 1433360186, "creation_date": 1433359641, "question_id": 30628922, "link": "https://stackoverflow.com/questions/30628922/masking-driver-bits-with-c", "closed_reason": "Duplicate", "title": "Masking driver bits with C", "body": "<p>I'm working on a driver, and I'm having trouble finding a way to manipulate the bits I want to on a digital register.</p>\n\n<p>The register has 20 bits (0-19) and I'm only concerned with writing over the last two (19,18).  These bits are part of a hex representing that section, so to visualize, the #'s are what I want to change:</p>\n\n<p>Hex    5    B    0    F</p>\n\n<p>[##00 0101 1011 0000 1111]</p>\n\n<p>All of the other bits must be kept as they are\u2014the example above is arbitrary, so the masking has to handle any combination of bits.  </p>\n\n<p>I've tried creating a mask with any combination of <code>&amp;</code> and <code>|</code> with <code>0xFFFFF</code> and also <code>0x00000</code> but neither change <em>just</em> the first two bits of the hex that will be written.</p>\n\n<p>Any ideas to get this to function would be great; and if you could explain how the solution works, even better.</p>\n"}, {"tags": ["c", "unix", "signals", "posix", "bsd"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1433357291, "post_id": 30628167, "comment_id": 49322320, "body": "Same way you access any function argument -- by the name you gave the formal parameter."}, {"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1433357329, "post_id": 30628167, "comment_id": 49322349, "body": "@BenVoigt Sorry I am not very experienced with System Programming and C. What do you mean by your comment?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1433357375, "post_id": 30628167, "comment_id": 49322382, "body": "Why not use <code>sigaction()</code> rather than the obsolete(ish) <code>signal()</code>, and enjoy the pleasures of getting a <code>struct siginfo*</code> full of goodness?"}, {"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1433357424, "post_id": 30628167, "comment_id": 49322420, "body": "@RossRidge Fixed the tags, sorry."}, {"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433357635, "post_id": 30628167, "comment_id": 49322554, "body": "@EOF I am really just reading the Manual right now."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1433357912, "post_id": 30628167, "comment_id": 49322719, "body": "@KorayTugay: When you define a function, you provide a signature which contains a type and name for each argument.  Inside that function, using that name (called a formal parameter) accesses the value passed by the caller (called an actual parameter)."}, {"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1433357961, "post_id": 30628167, "comment_id": 49322748, "body": "@BenVoigt Can you at least give a simple example to this so I can understand? Examples are always better for me."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1433358052, "post_id": 30628167, "comment_id": 49322804, "body": "@KorayTugay: Every C program starts with <code>int main(int argc, char** argv)</code> and you access the arguments by their names <code>argc</code> and <code>argv</code>.  When you create a function to handle your signals, you will give names to the arguments."}], "answers": [{"comments": [{"owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "edited": false, "score": 0, "creation_date": 1433357747, "post_id": 30628371, "comment_id": 49322621, "body": "What is the (2) in the function name?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "edited": false, "score": 0, "creation_date": 1433357824, "post_id": 30628371, "comment_id": 49322668, "body": "@KorayTugay: A manual section.  <a href=\"http://stackoverflow.com/questions/587676/why-do-programs-in-unix-like-environments-have-numbers-after-their-name\" title=\"why do programs in unix like environments have numbers after their name\">stackoverflow.com/questions/587676/&hellip;</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "edited": false, "score": 0, "creation_date": 1433358104, "post_id": 30628371, "comment_id": 49322842, "body": "This is another explanation of the <code>(2)</code>: <a href=\"http://stackoverflow.com/q/62936/103167\">stackoverflow.com/q/62936/103167</a>"}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 4, "last_activity_date": 1435248261, "last_edit_date": 1435248261, "creation_date": 1433357696, "answer_id": 30628371, "question_id": 30628167, "link": "https://stackoverflow.com/questions/30628167/how-to-get-further-information-on-sigfpe-signal/30628371#30628371", "title": "How to get further information on SIGFPE signal?", "body": "<p>As EOF mentioned in the comments, the much better way to do this, that doesn't require formally broken casts, and a bonus is correctly documented, is to install your signal handler using <code>sigaction</code> and the <code>SA_SIGINFO</code> flag, and then in the <code>si_code</code> field of the second parameter (type <code>siginfo_t</code>) you can determine which floating-point error occurred:</p>\n\n<blockquote>\n  <p>The following values can be placed in <code>si_code</code> for a <code>SIGFPE</code> signal:</p>\n  \n  <p><strong><code>FPE_INTDIV</code></strong>\n            Integer divide by zero.</p>\n  \n  <p><strong><code>FPE_INTOVF</code></strong>\n            Integer overflow.</p>\n  \n  <p><strong><code>FPE_FLTDIV</code></strong>\n            Floating-point divide by zero.</p>\n  \n  <p><strong><code>FPE_FLTOVF</code></strong>\n            Floating-point overflow.</p>\n  \n  <p><strong><code>FPE_FLTUND</code></strong>\n            Floating-point underflow.</p>\n  \n  <p><strong><code>FPE_FLTRES</code></strong>\n            Floating-point inexact result.</p>\n  \n  <p><strong><code>FPE_FLTINV</code></strong>\n            Floating-point invalid operation.</p>\n  \n  <p><strong><code>FPE_FLTSUB</code></strong>\n            Subscript out of range.</p>\n</blockquote>\n\n<p>Source: <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow\">Linux sigaction(2) man page</a></p>\n\n<p>The same list is also readily available on the <a href=\"http://www.freebsd.org/cgi/man.cgi?query=siginfo\" rel=\"nofollow\">FreeBSD siginfo man page</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "is_accepted": false, "score": 1, "last_activity_date": 1433360430, "last_edit_date": 1433360430, "creation_date": 1433359621, "answer_id": 30628917, "question_id": 30628167, "link": "https://stackoverflow.com/questions/30628167/how-to-get-further-information-on-sigfpe-signal/30628917#30628917", "title": "How to get further information on SIGFPE signal?", "body": "<p>The information that glibc refers to is a historic mechanism, and is not portable. On FreeBSD, the <a href=\"https://www.freebsd.org/cgi/man.cgi?query=sigvec&amp;sektion=2\" rel=\"nofollow\">sigvec(2)</a> manual page includes a notation that it is only supported on the VAX-11 architecture:</p>\n\n<blockquote>\n  <p>On    the VAX-11 The handler routine can be declared:</p>\n\n<pre><code>void  handler(sig, code, scp)\nint sig, code;\nstruct sigcontext *scp;\n</code></pre>\n  \n  <p>Here sig is the signal number, into which the hardware faults and traps\n      are mapped    as defined below.  The code argument is either a constant as\n      given below or, for compatibility mode faults, the    code provided by the\n      hardware (Compatibility mode faults are distinguished from    the other\n      SIGILL traps by having PSL_CM set in the psl).  The scp argument is a\n      pointer to    the sigcontext structure (defined in <code>&lt;signal.h&gt;</code>), used to\n      restore the context from before the signal.</p>\n</blockquote>\n\n<p>The mapping list is not actually provided in this version of the manpage. It can be found in the <a href=\"https://www.freebsd.org/cgi/man.cgi?query=signal&amp;sektion=3&amp;manpath=4.3BSD+Reno\" rel=\"nofollow\">4.3BSD-Reno signal(3) manpage</a>. It's worth noting that this text is 25 years old.</p>\n\n<p>On modern systems, you should use the sigaction mechanism, which is much more well-defined and portable.</p>\n\n<blockquote>\n  <p>BUGS - This manual page is still confusing.</p>\n</blockquote>\n\n<p>Indeed it is.</p>\n"}], "owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1429, "favorite_count": 0, "accepted_answer_id": 30628371, "answer_count": 2, "score": 3, "last_activity_date": 1435248261, "creation_date": 1433357054, "last_edit_date": 1433357415, "question_id": 30628167, "link": "https://stackoverflow.com/questions/30628167/how-to-get-further-information-on-sigfpe-signal", "title": "How to get further information on SIGFPE signal?", "body": "<p>This is from <strong>The GNU C Library Reference Manual</strong></p>\n\n<blockquote>\n  <p>int SIGFPE</p>\n  \n  <p>The SIGFPE signal reports a fatal arithmetic error. This signal\n  actually covers all arithmetic errors, including division by zero and\n  overflow.</p>\n  \n  <p>BSD systems provide the SIGFPE handler with an extra argument that\n  distinguishes various causes of the exception. In order to access\n  this argument, you must define the handler to accept two arguments,\n  which means you must cast it to a one-argument function type in order\n  to establish the handler.</p>\n</blockquote>\n\n<p>But there is no example on how to <strong>access the extra argument</strong>. </p>\n\n<p>I did my google work but could not find anything. </p>\n\n<p>How can I get this extra information?</p>\n"}, {"tags": ["c", "event-handling", "gtk", "glib"], "answers": [{"tags": [], "owner": {"reputation": 324, "user_id": 4489948, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/64be8803c5824e2a6e1dfc72be43f2dd?s=128&d=identicon&r=PG&f=1", "display_name": "nintyfan", "link": "https://stackoverflow.com/users/4489948/nintyfan"}, "is_accepted": false, "score": 1, "last_activity_date": 1433399182, "creation_date": 1433399182, "answer_id": 30636458, "question_id": 30628121, "link": "https://stackoverflow.com/questions/30628121/gtk-glib-event-loop-and-emit-signal-to-event-loop/30636458#30636458", "title": "GTK+/GLIB event loop and emit signal to event loop", "body": "<p>I have found solution, but not very good. I must add timeout event, which will emit my signal. I didn't find better solution yet.</p>\n"}], "owner": {"reputation": 324, "user_id": 4489948, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/64be8803c5824e2a6e1dfc72be43f2dd?s=128&d=identicon&r=PG&f=1", "display_name": "nintyfan", "link": "https://stackoverflow.com/users/4489948/nintyfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433399182, "creation_date": 1433356901, "last_edit_date": 1433398333, "question_id": 30628121, "link": "https://stackoverflow.com/questions/30628121/gtk-glib-event-loop-and-emit-signal-to-event-loop", "title": "GTK+/GLIB event loop and emit signal to event loop", "body": "<p>I have one problem. I'm creating interface generation library, called libgreattao. It is able to using many backends to rendering GUI, while running in GUI mode. The problem is in GTK+2.0 backend. I must run main loop and on some event exits from it to destroy window in next step. On window's destroy event I will exit from main loop again - and do only this. Why I call main loop again? Because I must handle events created, while destroying window(window must destroy all it's control and hide). The problem is: callback for destroy signal is called once gtk_widget_destroy is called. I must ensure callback pass by application are called in main loop to allow exit from it, so I define custom signal for class GTKWIDGET. Of course, I can use workarounds, like destroying window in first signal type(the signal which ends main loop), but my library should works in any cases.</p>\n"}, {"tags": ["c", "linux", "file-io"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1433356767, "post_id": 30627991, "comment_id": 49322009, "body": "Your situation sounds much like a <code>pipe</code>. Would it really be a problem for the reader to block if the writer isn&#39;t done? Would your reader have something better to do?"}, {"owner": {"reputation": 1906, "user_id": 994179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3e5674bafaccc1fba08313a3530f8896?s=128&d=identicon&r=PG", "display_name": "PaeneInsula", "link": "https://stackoverflow.com/users/994179/paeneinsula"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433357342, "post_id": 30627991, "comment_id": 49322356, "body": "@EOF, I&#39;m a newbie, so not sure about how pipes work.  But it would certainly be fine if this were to happen: FileReader can check somehow that data is being appended, and wait until the append operation is finished.  Is there a portable way to do this?  How would FileReader determine if FileAppender is active?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433357656, "post_id": 30627991, "comment_id": 49322565, "body": "The traditional <code>pipe</code>-way of life: The producer (write-end of the pipe) does whatever it does, writes its results to the pipe, and blocks when the pipe is full. The consumer (read-end) blocks in a read of the pipe until data is available, is automagically woken by the OS once data has been written, consumes that data. Since the pipe is no longer full, the producer is awoken, and everyone is happy."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1433360771, "post_id": 30627991, "comment_id": 49324344, "body": "Regarding <i>But I don&#39;t want FileReader to close the file whenever the FileAppender needs to append data</i>.  Does this mean you want FileAPpender to wait until file is closed, then open and append?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1433361978, "post_id": 30627991, "comment_id": 49325050, "body": "The <code>tail</code> command acts like a <i>FileReader</i>, and does the job without any cooperation from the <i>FileAppender</i>. (Use <code>tail -f filename</code> to run in <i>FileReader</i> mode.) Be sure that the <i>FileAppender</i> calls <code>fflush</code> whenever it wants the <i>FileReader</i> to see changes. Otherwise, the system may buffer the data until <code>fclose</code> is called.  So my suggestion is to rummage around the internet to find the source code for <code>tail</code> to see how they did it."}], "answers": [{"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 1, "last_activity_date": 1433364386, "last_edit_date": 1433364386, "creation_date": 1433361092, "answer_id": 30629374, "question_id": 30627991, "link": "https://stackoverflow.com/questions/30627991/in-c-append-to-file-open-for-read-by-another-program-on-windows-console-and-lin/30629374#30629374", "title": "In C, append to file open for read by another program on Windows console and Linux", "body": "<p>The Linux/UNIX -tail command as described in the comments does not exist for windows, But yes, there are several ways to do this even without that command.  Here is one that I have used, that should work cross-platform:  </p>\n\n<p>First recognize you are describing a <strong><em>shared</em></strong> (file system) <strong><em>resource</em></strong>, that can only be accessed by one process at any one time. The two (or more) applications need some kind of semaphore (signalling) method  to signal the current state of the target file by checking the existence of another.  I have used a <em>Token</em> file for this, and it has worked for me.  A <em>Token</em> file is simply a file with a unique name that indicates <em>permission</em> to access the target file, <strong><em>where target file is</em></strong> the file being edited by more than one process.   This Token file can be checked by processes (applications) for its existence.   If token exists, the target file is busy, and should not be accessed.  If the token does not exist, create it, then access the target file.  Close token when done appending to target.</p>\n\n<p>Simple concept flow:   </p>\n\n<pre><code>Process 1\nwhile(token exists)\n{\n   //Sleep(20)\n}\ncreate token\nOpen target file for append\nwrite to target file\nclose target file\nclose token\n\nProcess 2\nwhile(token exists)\n{\n   //Sleep(20)\n}\ncreate token\nOpen target file for append\nwrite to target file\nclose target file\nclose token\n</code></pre>\n"}], "owner": {"reputation": 1906, "user_id": 994179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3e5674bafaccc1fba08313a3530f8896?s=128&d=identicon&r=PG", "display_name": "PaeneInsula", "link": "https://stackoverflow.com/users/994179/paeneinsula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 30629374, "answer_count": 1, "score": 1, "last_activity_date": 1433364386, "creation_date": 1433356498, "question_id": 30627991, "link": "https://stackoverflow.com/questions/30627991/in-c-append-to-file-open-for-read-by-another-program-on-windows-console-and-lin", "title": "In C, append to file open for read by another program on Windows console and Linux", "body": "<p>I have two different C programs running on the same machine.  The first program, called FileReader, opens a file for reading, and keeps it open.  Periodically, I want another program, FileAppender, to open the file using the \"a\" (append) mode, append data, and then close the file.</p>\n\n<p>But I don't want FileReader to close the file whenever the FileAppender needs to append data. </p>\n\n<p>My questions: First, can this be done at all, and if so, can it be done in a portable, reliable way for both Windows console program and Linux? The reason I'm asking about \"reliable\" is because I am afraid that in testing it may work, but not necessarily reliably.</p>\n\n<p>Second, if this can be done, portability- and reliability-wise, how can the FileReader program know if data has been appended?  One thought I had was to do an fseek to EOF, but worry about the situation where FileAppender is still in the process of writing data to the file.</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1433356800, "post_id": 30627851, "comment_id": 49322029, "body": "Well, your &#39;PC queue&#39; has an extra contraint above that usually seen - you have to fill up the entire array before a consumer gets to process any data."}, {"owner": {"reputation": 911, "user_id": 4433969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8322e261ca132ca41379ee7d605181?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Zavaritsky", "link": "https://stackoverflow.com/users/4433969/nick-zavaritsky"}, "edited": false, "score": 3, "creation_date": 1433356984, "post_id": 30627851, "comment_id": 49322133, "body": "This solution seams suboptimal. If a producer finds a full queue it is going to sleep and retry in 2000 secs and a consumer exhibits the same behavior when encountered an empty queue. In practice multithreaded code relying on sleep almost never works reliably. If a sleep period is too large latency suffers and if it is too small you are effectively creating a busy wait."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1433357138, "post_id": 30627851, "comment_id": 49322226, "body": "Thanks for the question, it generated an interesting read here <a href=\"http://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem</a> but that page mentions two scenarios, a) &quot;An inadequate solution could result in a deadlock where both processes are waiting to be awakened.&quot; and b) &quot;a less experienced programmer might come up with a solution shown below&quot;... so I wonder if you have really solved a classic problem."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 911, "user_id": 4433969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8322e261ca132ca41379ee7d605181?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Zavaritsky", "link": "https://stackoverflow.com/users/4433969/nick-zavaritsky"}, "edited": false, "score": 0, "creation_date": 1433357154, "post_id": 30627851, "comment_id": 49322236, "body": "@NickZavaritsky prolly 2000 us, but still very poor performance overall compared with a &#39;conventional 2 semaphore + mutex&#39; PC queue:("}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1433357219, "post_id": 30627851, "comment_id": 49322283, "body": "It&#39;s not really a PC queue.  It&#39;s an array protected by a binary semaphore acting as a mutex."}, {"owner": {"reputation": 911, "user_id": 4433969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8322e261ca132ca41379ee7d605181?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Zavaritsky", "link": "https://stackoverflow.com/users/4433969/nick-zavaritsky"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433357949, "post_id": 30627851, "comment_id": 49322733, "body": "@MartinJames In posix world sleep sleeps the specified number of seconds. We have also got the fancy nanosleep. This is probably irrelevant to the op question anyway :)"}, {"owner": {"reputation": 237, "user_id": 4966271, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-ur_wlp_C7wk/AAAAAAAAAAI/AAAAAAAAADQ/EFn1AtgRPeE/photo.jpg?sz=128", "display_name": "DIVAKAR VENKATRAMANI", "link": "https://stackoverflow.com/users/4966271/divakar-venkatramani"}, "edited": false, "score": 0, "creation_date": 1433358995, "post_id": 30627851, "comment_id": 49323371, "body": "I got the point that people are making. Still either the producer/consumer will not be immediately signaled to process if one of them finishes its job when one semaphore and a sleep is involved. With two sems, immediately, which ever is blocked could go ahead once the other finishes its job."}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1433356968, "post_id": 30628084, "comment_id": 49322120, "body": "I think that the single semaphore is merely being used as a mutex to protect the array.  It&#39;s not really a producer-consumer queue."}, {"owner": {"reputation": 454, "user_id": 4913639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2b7eb972b9f3e0d2b2c2f45e4c7c0541?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler R", "link": "https://stackoverflow.com/users/4913639/tyler-r"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433365091, "post_id": 30628084, "comment_id": 49326777, "body": "I was more answering in general about semaphores on producer consumer queues as I was in a hurry.  Now that I look back it seems you would be correct."}], "tags": [], "owner": {"reputation": 454, "user_id": 4913639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2b7eb972b9f3e0d2b2c2f45e4c7c0541?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler R", "link": "https://stackoverflow.com/users/4913639/tyler-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1433356773, "creation_date": 1433356773, "answer_id": 30628084, "question_id": 30627851, "link": "https://stackoverflow.com/questions/30627851/c-solution-for-producer-consumer-with-only-one-semaphore/30628084#30628084", "title": "C solution for producer-consumer with only ONE semaphore", "body": "<p>The reason you need two semaphores is that the producer cannot do anything when the \"bin\" or whatever the producer and consumer are sharing is full, but the consumer cannot do anything when the bin is empty.</p>\n\n<p>Therefore, the producer needs to have a semaphore for full and the consumer one for empty.</p>\n"}, {"comments": [{"owner": {"reputation": 237, "user_id": 4966271, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-ur_wlp_C7wk/AAAAAAAAAAI/AAAAAAAAADQ/EFn1AtgRPeE/photo.jpg?sz=128", "display_name": "DIVAKAR VENKATRAMANI", "link": "https://stackoverflow.com/users/4966271/divakar-venkatramani"}, "edited": false, "score": 0, "creation_date": 1433388110, "post_id": 30631583, "comment_id": 49334018, "body": "I agree with you. CPU cycles would be wasted if we busy-wait."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": false, "score": 0, "last_activity_date": 1433368964, "creation_date": 1433368964, "answer_id": 30631583, "question_id": 30627851, "link": "https://stackoverflow.com/questions/30627851/c-solution-for-producer-consumer-with-only-one-semaphore/30631583#30631583", "title": "C solution for producer-consumer with only ONE semaphore", "body": "<blockquote>\n  <p>Question is why two semaphores (empty and full) are used? Cant the problem be solved with one semaphore?</p>\n</blockquote>\n\n<p>Generally speaking, it is needed <strong>two</strong> some sort of <strong>condition variables</strong> (empty and full) to solve the problem. These variables used in <code>wait()</code> and <code>notify()</code> semantics.</p>\n\n<p>One semaphore can be use as one of such variables in the given problem, so <strong>two semaphores</strong> are sufficient.</p>\n\n<p>Another way is to use <strong>two actual condition variables</strong> with <strong>single monitor/mutex</strong> (see <code>Using monitors</code> section at <a href=\"http://en.wikipedia.org/wiki/Producer\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Producer</a>\u2013consumer_problem).</p>\n\n<p>Your variant is similar to the last case, but you use busy-wait(<code>sleep 2</code>) instead of actual waiting on condition variable(<code>wait()</code>).</p>\n"}], "owner": {"reputation": 237, "user_id": 4966271, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-ur_wlp_C7wk/AAAAAAAAAAI/AAAAAAAAADQ/EFn1AtgRPeE/photo.jpg?sz=128", "display_name": "DIVAKAR VENKATRAMANI", "link": "https://stackoverflow.com/users/4966271/divakar-venkatramani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1433368964, "creation_date": 1433355954, "last_edit_date": 1433358843, "question_id": 30627851, "link": "https://stackoverflow.com/questions/30627851/c-solution-for-producer-consumer-with-only-one-semaphore", "title": "C solution for producer-consumer with only ONE semaphore", "body": "<p>Following Code solves ( I think) producer-consumer problem with two threads using only one semaphore.     </p>\n\n<pre><code>sem_t sem; //init to 1\nint arr[100];\n\nvoid producer()\n{\n    while(;;) {\n    sem_wait(sem)\n    if it is fully filled {\n        sem_post(sem);\n    } else { \n        run 100 times and fill the items\n\n        sem_post(sem);\n    }\n    sleep(2);   \n    }\n}\n\nvoid consumer()\n{\n    while(;;) {\n    sem_wait(sem)\n    if it is empty {\n        sem_post(sem);\n    } else {\n        run 100 times and read the items\n        reset the start index to 0 so producer could fill again\n        sem_post(sem);\n    }\n    sleep(2);   \n    }\n}\n\nint main()\n{\n    //create thread 1 calling consumer\n    //create thread 2 calling producer\n}\n</code></pre>\n\n<p>Question is why two semaphores (empty and full) are used? Cant the problem be solved with one semaphore?</p>\n"}, {"tags": ["c", "pointers", "struct", "linked-list", "typedef"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1433353910, "post_id": 30627183, "comment_id": 49320332, "body": "Does the definition of the function match the declaration? Show the declaration."}, {"owner": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "edited": false, "score": 1, "creation_date": 1433353952, "post_id": 30627183, "comment_id": 49320352, "body": "Your first struct is named &#39;node&#39;. Your function returns &#39;list_node*&#39;"}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 1, "creation_date": 1433354000, "post_id": 30627183, "comment_id": 49320381, "body": "Are you defining/declaring your function before you use it?  Most (all?) compilers will give you an implicit function type, and then complain that the types don&#39;t match."}, {"owner": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "edited": false, "score": 3, "creation_date": 1433354163, "post_id": 30627183, "comment_id": 49320463, "body": "Your bracing in the function isn&#39;t correct; the function closes off before your return statement, so you might want to verify the source you&#39;ve posted. You also have a <code>struct moves_list_node</code> in your <code>malloc</code> call, but then assign that pointer to a <code>list_node*</code>"}, {"owner": {"reputation": 11, "user_id": 4970775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de8de81a768f5548aa59df1114d5c62?s=128&d=identicon&r=PG&f=1", "display_name": "hercules", "link": "https://stackoverflow.com/users/4970775/hercules"}, "edited": false, "score": 0, "creation_date": 1433409217, "post_id": 30627183, "comment_id": 49343793, "body": "this is the declaration :    struct list_node*  function(location piece), i&#39;ve  confused some &#39;node&#39; with &#39; list_node&#39; while copying the function to here but now it seems ok."}], "answers": [{"comments": [{"owner": {"reputation": 896, "user_id": 1066474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AginY.png?s=128&g=1", "display_name": "Carlos Sanchez", "link": "https://stackoverflow.com/users/1066474/carlos-sanchez"}, "edited": false, "score": 0, "creation_date": 1433355739, "post_id": 30627244, "comment_id": 49321435, "body": "Did you mean &quot;bracket&quot; instead of &quot;parenthesis&quot;?"}, {"owner": {"reputation": 1910, "user_id": 192051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb9f1f099fd95badfe79d0088834a017?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/192051/joe"}, "reply_to_user": {"reputation": 896, "user_id": 1066474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AginY.png?s=128&g=1", "display_name": "Carlos Sanchez", "link": "https://stackoverflow.com/users/1066474/carlos-sanchez"}, "edited": false, "score": 0, "creation_date": 1433361727, "post_id": 30627244, "comment_id": 49324900, "body": "Thanks. Actually I meant curly brace. :-) Edited."}], "tags": [], "owner": {"reputation": 1910, "user_id": 192051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb9f1f099fd95badfe79d0088834a017?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/192051/joe"}, "is_accepted": false, "score": 4, "last_activity_date": 1433361739, "last_edit_date": 1433361739, "creation_date": 1433353906, "answer_id": 30627244, "question_id": 30627183, "link": "https://stackoverflow.com/questions/30627183/returning-a-linked-list-struct-from-c-function/30627244#30627244", "title": "Returning a linked list struct from C function", "body": "<p>You have an extra curly brace at the end of the if statement. The return isn't in the function.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4970775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de8de81a768f5548aa59df1114d5c62?s=128&d=identicon&r=PG&f=1", "display_name": "hercules", "link": "https://stackoverflow.com/users/4970775/hercules"}, "is_accepted": false, "score": 0, "last_activity_date": 1433408980, "creation_date": 1433408980, "answer_id": 30639633, "question_id": 30627183, "link": "https://stackoverflow.com/questions/30627183/returning-a-linked-list-struct-from-c-function/30639633#30639633", "title": "Returning a linked list struct from C function", "body": "<p>It's just a mistake i've made while copying the function over here, in my code the return state is located correctly, and i'm still having the same problem.\ni've corrected the problem in the original message.</p>\n"}, {"tags": [], "owner": {"reputation": 896, "user_id": 1066474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AginY.png?s=128&g=1", "display_name": "Carlos Sanchez", "link": "https://stackoverflow.com/users/1066474/carlos-sanchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1433424399, "last_edit_date": 1495541785, "creation_date": 1433424399, "answer_id": 30645086, "question_id": 30627183, "link": "https://stackoverflow.com/questions/30627183/returning-a-linked-list-struct-from-c-function/30645086#30645086", "title": "Returning a linked list struct from C function", "body": "<p>It could be that you're trying to use the function before it's declared. For instance, let's say you have:</p>\n\n<pre><code>int func1()\n{\n   prinft(\"%d\\n\", func2());\n}\n\ndouble func2()\n{\n    return 1.0;\n}\n</code></pre>\n\n<p>If you did not create a <a href=\"http://en.wikipedia.org/wiki/Function_prototype\" rel=\"nofollow noreferrer\">function prototype</a> for \"func2\", then the compiler assumes that the function has an integer return type. Of course it doesn't really, but because the compiler hasn't seen func2() before it is called, it makes an incorrect assumption about the return type. In your code, you could be calling the \"function\" function <em>before</em> you've defined it. You can remedy this with a function prototype, which is basically a way to tell the compiler what sort of functions to expect:</p>\n\n<pre><code>//Function prototypes\nint func1();\ndouble func2();\n\nint func1()\n{\n   prinft(\"%d\\n\", func2());\n}\n\ndouble func2()\n{\n    return 1.0;\n}\n</code></pre>\n\n<p>Also, see: <a href=\"https://stackoverflow.com/questions/5691650/conflicting-types-error-when-compiling-c-program-using-gcc\">conflicting types error when compiling c program using gcc</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4970775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de8de81a768f5548aa59df1114d5c62?s=128&d=identicon&r=PG&f=1", "display_name": "hercules", "link": "https://stackoverflow.com/users/4970775/hercules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5756, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1433424399, "creation_date": 1433353601, "last_edit_date": 1433409028, "question_id": 30627183, "link": "https://stackoverflow.com/questions/30627183/returning-a-linked-list-struct-from-c-function", "title": "Returning a linked list struct from C function", "body": "<p>I've created the following linked list struct:</p>\n\n<pre><code> struct node {\n    struct data *data;\n    struct node *next;\n };\n</code></pre>\n\n<p>My problem is that when I'm trying to create a function that returns this linked list struct, I'm getting the following error message:</p>\n\n<pre><code>\"Conflicting types for 'function'\".\n</code></pre>\n\n<p>My function looks like this :</p>\n\n<pre><code>struct list_node *function(location piece){\n    struct list_node *details;\n    details = malloc( sizeof(struct list_node) );\n    details-&gt;next = NULL;\n    details-&gt;current = NULL;\n    if (global_var == WHITE_M){\n            struct list_node *temp;\n            temp = malloc( sizeof(struct list_node) );\n            data new_data;\n            *temp-&gt;data = new_data;\n            temp-&gt;next = malloc( sizeof(struct list_node) );\n            temp-&gt;next = details;\n            details = temp;\n        }\n return details;\n}\n</code></pre>\n\n<p>Actually what I'm trying to do in my function is creating new linked list, then connecting new nodes to it, and return the linked list.</p>\n\n<p>Every return phrase I've tried, and evert declaration I've tried brought me to the same error, can someone please help me ?</p>\n"}, {"tags": ["c", "openmp"], "comments": [{"owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "reply_to_user": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 0, "creation_date": 1433354656, "post_id": 30627170, "comment_id": 49320794, "body": "yeah, I thought about this, then I rewrote this code in Go and got 167ms, 84ms and 31ms... Don&#39;t you think C code should at least equal Go timings?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433357059, "post_id": 30627170, "comment_id": 49322175, "body": "Well, openMP may not be the right tool to parallelize this."}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1433357833, "post_id": 30627170, "comment_id": 49322679, "body": "All looks good to me, but try printing the number of threads just to be sure openmp is really enabled."}, {"owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "reply_to_user": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1433358488, "post_id": 30627170, "comment_id": 49323083, "body": "@Les yes, it is. I printed <code>omp_get_num_threads()</code> inside parallel block and it have shown the right number of threads."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1433360380, "post_id": 30627170, "comment_id": 49324123, "body": "The benchmark is making a single pass over a lot of data and doing almost no work at all. It&#39;s probably completely memory bound."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1433403147, "post_id": 30627170, "comment_id": 49339977, "body": "@Mysticial, I agree it&#39;s memory bandwidth bound but that does not mean it should not see some significant benefit from using multiple threads <a href=\"https://stackoverflow.com/questions/25179738/measuring-memory-bandwidth-from-the-dot-product-of-two-arrays\" title=\"measuring memory bandwidth from the dot product of two arrays\">stackoverflow.com/questions/25179738/&hellip;</a>. So I&#39;m a bit surprised the OP sees essentially no scaling. But I don&#39;t have the time right now to think about this."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 1, "creation_date": 1433594309, "post_id": 30627170, "comment_id": 49426027, "body": "I cannot reproduce your results. Compiling your code with gcc 4.8 (same as you) on Ubuntu 15.04 (same as you) gives me, depending on the CPU, a speedup of between 1.13 and 1.83 for 2 threads - which is approximately what you can expect for a memory-bound program like yours (experiments like loop unrolling and replacing your floating-point operations by pure memory access confirmed that it actually is memory-bound). Your speed-up of 1.05 seems far too low, especially considering that I got the highest speed-up on the system that is most similar to yours."}, {"owner": {"reputation": 1461, "user_id": 2548418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156f12e9212d196d272e7f3d3bd20e67?s=128&d=identicon&r=PG&f=1", "display_name": "user2548418", "link": "https://stackoverflow.com/users/2548418/user2548418"}, "edited": false, "score": 0, "creation_date": 1433810633, "post_id": 30627170, "comment_id": 49499900, "body": "Could you try specifying the schedule explicitly for the for loops? I would recommend schedule(static, 16384). I wasn&#39;t able to reproduce your results with your code as is, however if I specify the schedule to be dynamic with a small chunk size, I am able to get no speedup. Perhaps your platform&#39;s default which is used when the schedule is left unspecified is not static."}, {"owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "reply_to_user": {"reputation": 1461, "user_id": 2548418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156f12e9212d196d272e7f3d3bd20e67?s=128&d=identicon&r=PG&f=1", "display_name": "user2548418", "link": "https://stackoverflow.com/users/2548418/user2548418"}, "edited": false, "score": 0, "creation_date": 1433962582, "post_id": 30627170, "comment_id": 49582321, "body": "@user2548418 with <code>schedule(static, 16384)</code> times got worse, but it&#39;s scaling: 1008ms, 535ms and 324ms"}, {"owner": {"reputation": 1461, "user_id": 2548418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156f12e9212d196d272e7f3d3bd20e67?s=128&d=identicon&r=PG&f=1", "display_name": "user2548418", "link": "https://stackoverflow.com/users/2548418/user2548418"}, "edited": false, "score": 0, "creation_date": 1434041125, "post_id": 30627170, "comment_id": 49623160, "body": "@DiogoDoreto perhaps in that case you could try other scheduling primitives and chunk sizes? <a href=\"https://software.intel.com/en-us/articles/openmp-loop-scheduling\" rel=\"nofollow noreferrer\">software.intel.com/en-us/articles/openmp-loop-scheduling</a>"}, {"owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "reply_to_user": {"reputation": 1461, "user_id": 2548418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156f12e9212d196d272e7f3d3bd20e67?s=128&d=identicon&r=PG&f=1", "display_name": "user2548418", "link": "https://stackoverflow.com/users/2548418/user2548418"}, "edited": false, "score": 0, "creation_date": 1434049097, "post_id": 30627170, "comment_id": 49627921, "body": "@user2548418 I&#39;ve tried many combinations... the times were larger than or equal your former suggestion"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1434106399, "post_id": 30627170, "comment_id": 49650849, "body": "Have you verified that you&#39;re getting the number of threads you request? Are you doing exactly <code>OMP_NUM_THREADS=1 .&#47;dp 100000000</code>? or do you do this is separate lines? If the second case you need <code>export OMP_NUM_THREADS=1 .&#47;dp 100000000</code>."}, {"owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1434118781, "post_id": 30627170, "comment_id": 49658977, "body": "@Zboson yes, I&#39;ve verified. The command is in one line as shown in the results section, and I&#39;ve even printed <code>omp_get_num_threads()</code> to make sure."}, {"owner": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "edited": false, "score": 0, "creation_date": 1434121131, "post_id": 30627170, "comment_id": 49660491, "body": "@DiogoDoreto Are you running this on a Virtual Machine?"}, {"owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "reply_to_user": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "edited": false, "score": 0, "creation_date": 1434121694, "post_id": 30627170, "comment_id": 49660829, "body": "@Alan no, I&#39;m not running on a VM"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1434211377, "post_id": 30627170, "comment_id": 49687656, "body": "Here you can test your code, edit it, compile, and run and see for yourself <a href=\"http://coliru.stacked-crooked.com/a/3993175059df6430\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/3993175059df6430</a> that it scales."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1434211840, "post_id": 30627170, "comment_id": 49687812, "body": "Why don&#39;t you run some benchmark tests on your system and then see how it compares to what you expect with your system? I suggest <a href=\"http://www.cs.virginia.edu/stream/ref.html\" rel=\"nofollow noreferrer\">STREAM</a>. You can set the number of threads and if it does not improve with STREAM then that may indicate your system has a hardware problem. How kind of memory does your system have and how is it installed?"}], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "edited": false, "score": 0, "creation_date": 1433621712, "post_id": 30685305, "comment_id": 49433827, "body": "Thanks for your answer. On my results section I&#39;ve just removed unnecessary content to go direct to the point. I&#39;ve tested the code on my university&#39;s machine, which is very similar to mine, and got the same results. I&#39;m thinking that, since my CPU is already very fast, the overhead of parallelizing may overcome the benefits. Does that make sense?"}, {"owner": {"reputation": 35530, "user_id": 196844, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20232ad0698d2ac6c0f127d5eb850254?s=128&d=identicon&r=PG", "display_name": "Daniel Trebbien", "link": "https://stackoverflow.com/users/196844/daniel-trebbien"}, "reply_to_user": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "edited": false, "score": 0, "creation_date": 1433623190, "post_id": 30685305, "comment_id": 49434209, "body": "@DiogoDoreto:  I suppose that could be the case.  I am wondering, though, why the program exhibits performance improvements when re-written in Go.  Would you mind posting the Go version of your program?  Also, what is the speed of your memory?  I am using two 8 GiB DDR3 memory banks @ 1600 MHz."}, {"owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "edited": false, "score": 1, "creation_date": 1433625938, "post_id": 30685305, "comment_id": 49434902, "body": "I have 1 of 8192MB @ 1600MHz. You can see the relevant part of Go code here: <a href=\"https://bitbucket.org/DiogoDoreto/tcc-go-desvio-padr-o/src/192b2a83bc928ff6bd402cbc6742f04baeb692a5/parallel.go?at=master\" rel=\"nofollow noreferrer\">bitbucket.org/DiogoDoreto/tcc-go-desvio-padr-o/src/&hellip;</a>"}, {"owner": {"reputation": 35530, "user_id": 196844, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20232ad0698d2ac6c0f127d5eb850254?s=128&d=identicon&r=PG", "display_name": "Daniel Trebbien", "link": "https://stackoverflow.com/users/196844/daniel-trebbien"}, "reply_to_user": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "edited": false, "score": 1, "creation_date": 1433680656, "post_id": 30685305, "comment_id": 49445656, "body": "Hi @DiogoDoreto.  I have updated my answer with timings from running your Go version.  I get approximately the same timings as the OpenMP version."}, {"owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "edited": false, "score": 0, "creation_date": 1433702076, "post_id": 30685305, "comment_id": 49452386, "body": "Thanks for trying to help and running the codes in your side. But what I am expecting as answer is an explanation of why this is happening on my side, as I was able to reproduce this behavior on others systems."}], "tags": [], "owner": {"reputation": 35530, "user_id": 196844, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20232ad0698d2ac6c0f127d5eb850254?s=128&d=identicon&r=PG", "display_name": "Daniel Trebbien", "link": "https://stackoverflow.com/users/196844/daniel-trebbien"}, "is_accepted": false, "score": 3, "last_activity_date": 1433680547, "last_edit_date": 1433680547, "creation_date": 1433609556, "answer_id": 30685305, "question_id": 30627170, "link": "https://stackoverflow.com/questions/30627170/c-openmp-reduction-scalability/30685305#30685305", "title": "C OpenMP - Reduction scalability", "body": "<p>I am not reproducing your results with Ubuntu 14.04.2 LTS, gcc 4.8, and a 2.3 GHz Intel Core&nbsp;i7.  Here are the results that I get:</p>\n\n<pre>\n$ OMP_NUM_THREADS=1 ./so30627170 100000000\nTest Size: 100000000\nStd. Deviation = 619920018.463329\nDuration: 206.301721ms\n$ OMP_NUM_THREADS=2 ./so30627170 100000000\nTest Size: 100000000\nStd. Deviation = 619901821.463117\nDuration: 110.381279ms\n$ OMP_NUM_THREADS=4 ./so30627170 100000000\nTest Size: 100000000\nStd. Deviation = 619883614.594906\nDuration: 78.241708ms\n</pre>\n\n<p>Because the output listed in the \"Results\" section of your question could not match the output from the code as listed, you may be running an old version of your code.</p>\n\n<p>I thought about possibly using X86 intrinsics within the parallel <code>for</code> loops, but examining the assembly output, gcc already uses SIMD instructions in this case.  Without march options, I was seeing gcc use SSE2 instructions.  Compiling with <code>-march=native</code> or <code>-mavx</code>, gcc would use AVX instructions.</p>\n\n<p><strong>EDIT:</strong> Running the Go version of your program, I get:</p>\n\n<pre>\n$ ./tcc-go-desvio-padrao -w 1 -n 15 -t 100000000\n2015/06/07 08:26:43 Workers: 1\n2015/06/07 08:26:43 Tests: [100000000]\n2015/06/07 08:26:43 # of executions of each test: 15\n2015/06/07 08:26:43 Time to allocate memory: 584.477\u00b5s\n2015/06/07 08:26:43 ===========================================\n2015/06/07 08:26:43 Current test size: 100000000\n2015/06/07 08:27:05 Time to fill the array: 1.322556083s\n2015/06/07 08:27:05 Time to calculate: 194.10728ms\n$ ./tcc-go-desvio-padrao -w 2 -n 15 -t 100000000\n2015/06/07 08:27:10 Workers: 2\n2015/06/07 08:27:10 Tests: [100000000]\n2015/06/07 08:27:10 # of executions of each test: 15\n2015/06/07 08:27:10 Time to allocate memory: 565.273\u00b5s\n2015/06/07 08:27:10 ===========================================\n2015/06/07 08:27:10 Current test size: 100000000\n2015/06/07 08:27:22 Time to fill the array: 677.755324ms\n2015/06/07 08:27:22 Time to calculate: 113.095753ms\n$ ./tcc-go-desvio-padrao -w 4 -n 15 -t 100000000\n2015/06/07 08:27:28 Workers: 4\n2015/06/07 08:27:28 Tests: [100000000]\n2015/06/07 08:27:28 # of executions of each test: 15\n2015/06/07 08:27:28 Time to allocate memory: 576.568\u00b5s\n2015/06/07 08:27:28 ===========================================\n2015/06/07 08:27:28 Current test size: 100000000\n2015/06/07 08:27:34 Time to fill the array: 353.646193ms\n2015/06/07 08:27:34 Time to calculate: 79.86221ms\n</pre>\n\n<p>The timings appear about the same as the OpenMP version.</p>\n"}], "owner": {"reputation": 873, "user_id": 1057015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16e625ef0bb65ea7995547d72dc746c?s=128&d=identicon&r=PG", "display_name": "DiogoDoreto", "link": "https://stackoverflow.com/users/1057015/diogodoreto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 1, "answer_count": 1, "score": 13, "last_activity_date": 1434105606, "creation_date": 1433353557, "last_edit_date": 1433353973, "question_id": 30627170, "link": "https://stackoverflow.com/questions/30627170/c-openmp-reduction-scalability", "title": "C OpenMP - Reduction scalability", "body": "<p>I'm testing the performance speedup of some algorithms when using OpenMP and one of then is not scaling. Am I doing something wrong?</p>\n\n<h2>PC Details:</h2>\n\n<ul>\n<li><strong>Memory:</strong> 7,7 GiB</li>\n<li><strong>Processor:</strong> Intel\u00ae Core\u2122 i7-4770 CPU @ 3.40GHz \u00d7 8 </li>\n<li><strong>OS:</strong> Ubuntu 15.04 64-bit</li>\n<li><strong>gcc:</strong> gcc (Ubuntu 4.8.2-19ubuntu1) 4.8.2</li>\n</ul>\n\n<h2>Code:</h2>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;omp.h&gt;\n\nint main(int argc, char **argv) {\n  int test_size, i;\n  double *vector, mean, stddeviation, start_time, duration;\n\n  if (argc != 2) {\n    printf(\"Usage: %s &lt;test_size&gt;\\n\", argv[0]);\n    return 1;\n  }\n\n  srand((int) omp_get_wtime());\n\n  test_size = atoi(argv[1]);\n  printf(\"Test Size: %d\\n\", test_size);\n\n  vector = (double *) malloc(test_size * sizeof(double));\n  for (i = 0; i &lt; test_size; i++) {\n    vector[i] = rand();\n  }\n\n  start_time = omp_get_wtime();\n  mean = 0;\n  stddeviation = 0;\n#pragma omp parallel default(shared) private(i)\n  {\n#pragma omp for reduction(+:mean)\n    for (i = 0; i &lt; test_size; i++) {\n      mean += vector[i];\n    }\n#pragma omp single\n    mean /= test_size;\n\n#pragma omp for reduction(+:stddeviation)\n    for (i = 0; i &lt; test_size; i++) {\n      stddeviation += (vector[i] - mean)*(vector[i] - mean);\n    }\n  }\n  stddeviation = sqrt(stddeviation / test_size);\n  duration = omp_get_wtime() - start_time;\n\n  printf(\"Std. Deviation = %lf\\n\", stddeviation);\n  printf(\"Duration: %fms\\n\", duration*1000);\n\n  return 0;\n}\n</code></pre>\n\n<h2>Compilation line</h2>\n\n<pre><code>gcc -c -o main.o main.c -fopenmp -lm -O3\ngcc -o dp main.o -fopenmp -lm -O3\n</code></pre>\n\n<h2>Results</h2>\n\n<pre><code>$ OMP_NUM_THREADS=1 ./dp 100000000\n166.224199ms\n\n$ OMP_NUM_THREADS=2 ./dp 100000000\n157.924034ms\n\n$ OMP_NUM_THREADS=4 ./dp 100000000\n159.056189ms\n</code></pre>\n"}, {"tags": ["c", "undefined-behavior"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1433353498, "post_id": 30627110, "comment_id": 49320109, "body": "Its undefined behavior. Comma operator not gonna help here."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1433354392, "post_id": 30627110, "comment_id": 49320616, "body": "see <a href=\"http://stackoverflow.com/q/52550/1708801\">What does the comma operator <code>,</code> do in C?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 4, "creation_date": 1433353687, "post_id": 30627174, "comment_id": 49320222, "body": "Good except minor correction: the result from <code>(a += 3, 5, a)</code> is the <i>last</i> item, though here the result is the same (<code>a</code>)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1433354072, "post_id": 30627174, "comment_id": 49320419, "body": "I.E. the 5 has absolutely no effect on what is printed"}, {"owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1433354411, "post_id": 30627174, "comment_id": 49320636, "body": "@user3629249, the 5 is completely superfluous here."}, {"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1433354577, "post_id": 30627174, "comment_id": 49320745, "body": "your latest edit is incorrect, the comma operator must be evaluated left-to-right."}, {"owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "reply_to_user": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1433355033, "post_id": 30627174, "comment_id": 49321013, "body": "@Sean, indeed, I was too hasty with the previous edit. As far as I can tell the only 2 possible outcomes for this would be a = 8 and a = 2 depending on the order in which the assignment to a happened."}], "tags": [], "owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "is_accepted": true, "score": 6, "last_activity_date": 1433354683, "last_edit_date": 1433354683, "creation_date": 1433353566, "answer_id": 30627174, "question_id": 30627110, "link": "https://stackoverflow.com/questions/30627110/how-will-be-operands-inside-a-3-5-a-are-going-to-dealt-or-caculated-in-or/30627174#30627174", "title": "How will be operands inside (a += 3, 5, a) are going to dealt or caculated in order to print the value of &quot;a&quot;?", "body": "<p>This is an effect how the comma operator works, the last element is the one that is used as the value of the statement. So essentially what you got here is the following:</p>\n\n<pre><code>a += (a += 3, 5, a)\n</code></pre>\n\n<p>This evaluates <code>a+=3</code> first, this makes <code>a=4</code> this result is discarded, then evaluate <code>5</code> then this result is discarded, then evaluate <code>a</code> and keep this as it's the last item. The result from <code>(a += 3, 5, a)</code> is the last item which is a which is 4.</p>\n\n<p>Then you get</p>\n\n<pre><code>a += 4\n</code></pre>\n\n<p>so <code>a</code> is <code>8</code>.</p>\n\n<p><em>Important Note</em>: that this is an artifact of how your compiler has generated the code. The C standard doesn't guarantee the order of execution for the assignment to <code>a</code> in this situation. See haccks answer for more information about that.</p>\n"}, {"comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 2, "creation_date": 1433354249, "post_id": 30627253, "comment_id": 49320522, "body": "actually you are confusing the comma separator (used for separation of function parameters) with the comma operator (which is actually sequenced) ... OP case is NOT undefined behaviour, although at first glance it may seem so ... in this particular case, the left most a in the parentheses will be evaluated BEFORE the right most a. For further detail.  <a href=\"http://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Comma_operator</a>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1433354297, "post_id": 30627253, "comment_id": 49320567, "body": "@AhmedMasud; I read that wiki article many times. You need to read that again and thanks for your downvote."}, {"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 3, "creation_date": 1433354469, "post_id": 30627253, "comment_id": 49320670, "body": "The ambiguity isn&#39;t a result of the comma operator, but rather in the final assignment of <code>a</code>. It&#39;s equivalent to <code>a += (a += 3)</code> which has undefined behavior according to the part of the standard haccks quoted"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "reply_to_user": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 1, "creation_date": 1433355112, "post_id": 30627253, "comment_id": 49321056, "body": "@Sean this is subtly different from the OP statement. The comma operator has the <i>lowest</i> precedence of all operators. which forces a+=3 to be evaluated before 5 and before the second a ... which forces the sequence..  a+= (a+=3) is undefined YES; and a+=(5, a+=3) is undefined (I&#39;m not quite sure whether yet, it may not be have to check); however a+=(a+=3, 5) is not undefined, the comma operator acts an explicit sequence point -- which guarantees that any side effects of a+=3 inside the parenthesis would have been performed BEFORE 5 is evaluated."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1433355411, "post_id": 30627253, "comment_id": 49321234, "body": "@AhmedMasud; Comma operator guarantees the evaluation <code>a += 3</code> before <code>5</code> but it doesn&#39;t guarantee the evaluation of left most <code>a</code> before the evaluation of <code>(a+=3, 5)</code>."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1433355935, "post_id": 30627253, "comment_id": 49321542, "body": "actually it does, since comma operator is a sequence point, it DOES guarantee all side effects of the expression before it to be evaluated PRIOR to 5 being touched."}, {"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1433356167, "post_id": 30627253, "comment_id": 49321670, "body": "interesting, i see what you mean. i think you&#39;re correct"}, {"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1433356375, "post_id": 30627253, "comment_id": 49321776, "body": "some relevant discussion <a href=\"http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\">here</a>, notably an example given: <code>i = (++i,i++,i) &#47;&#47; well defined </code>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1433356654, "post_id": 30627253, "comment_id": 49321944, "body": "@Sean; Yes <code>i = (++i,i++,i)</code> is well defined, but is <code>i += (++i,i++,i)</code> also well defined? Think over it. Standard says: <i>If a side effect on a scalar object is unsequenced relative to either a different side effect on the same scalar object or a value computation using the value of the same scalar object, the behavior is undefined.</i> (C11: 6.5 Expressions)."}, {"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1433356928, "post_id": 30627253, "comment_id": 49322098, "body": "@haccks it follows from the same reason that <code>i = (++i, i)</code> is well defined, doesn&#39;t it? before the <code>+=</code> operator is evaluated, the comma sequence point ensures that all side effects from <code>++i</code> are complete. it appears to me that <code>i = (++i, i);</code> is equivalent to <code>++i; i = i;</code> and that <code>i += (++i, i);</code> is equivalent to <code>++i; i += i;</code>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1433357039, "post_id": 30627253, "comment_id": 49322162, "body": "@Sean; No. <code>i += (++i, i)</code> is <b>not equivalent to</b>  <code>++i; i += i</code>. I quoted the standard in my last comment."}, {"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1433357645, "post_id": 30627253, "comment_id": 49322561, "body": "@haccks yes, yes, thinking about it more i think you&#39;re right again. i&#39;ve flip-flopped on this about three times now :). similarly,  <code>i = i + (++i, i);</code> is undefined, yes?"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1433357672, "post_id": 30627253, "comment_id": 49322578, "body": "actually i stand corrected, haacks is right... I kinda screwed up my own thinking here ..."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1433357979, "post_id": 30627253, "comment_id": 49322761, "body": "@Sean; Yes exactly. Thank you."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 1, "creation_date": 1433358145, "post_id": 30627253, "comment_id": 49322867, "body": "To fix my own thinking, I broke the thing down on paper as following stack based machine where oder of push in not garanteed... So Example: a = 7; a = a + (a = 7+3, 5, a)... If order is push a (7); push a(7) ; add 3 ; assign a(10) ; push 5; pop 5; push a; add ; assign a ... then a = 17 ; however if order is push a(7) add 3; assign a(10); push 5; pop 5; push a (10); push a(10) ; add ; assign... then a = 20 ;;  thus the undefined behavior"}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 10, "last_activity_date": 1433354632, "last_edit_date": 1433354632, "creation_date": 1433353922, "answer_id": 30627253, "question_id": 30627110, "link": "https://stackoverflow.com/questions/30627110/how-will-be-operands-inside-a-3-5-a-are-going-to-dealt-or-caculated-in-or/30627253#30627253", "title": "How will be operands inside (a += 3, 5, a) are going to dealt or caculated in order to print the value of &quot;a&quot;?", "body": "<p>The expression <code>a += (a += 3, 5, a)</code> will invoke undefined behavior.  </p>\n\n<p>C standard says  </p>\n\n<h3>C11: 6.5.16 Assignment operators (p3):</h3>\n\n<blockquote>\n  <p>[...] The side effect of updating the stored value of the left operand is\n  sequenced after the value computations of the left and right operands. <strong>The evaluations of the operands are unsequenced</strong>.  </p>\n</blockquote>\n\n<p>It is not guaranteed that whether the left most <code>a</code> will be evaluated before or after the evaluation of <code>(a += 3, 5, a)</code>. That will result in undefined behavior.  </p>\n"}, {"comments": [{"owner": {"reputation": 10474, "user_id": 5015356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d774038494809a56eb21a730d9ba454?s=128&d=identicon&r=PG&f=1", "display_name": "Ruben Helsloot", "link": "https://stackoverflow.com/users/5015356/ruben-helsloot"}, "edited": false, "score": 0, "creation_date": 1607468700, "post_id": 65176387, "comment_id": 115281581, "body": "Please try to improve your answer. I tried to improve the grammar, but got lost in the chaos. I&#39;d be happy to retract my downvote then. See also <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 14249487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U8jwZ.jpg?s=128&g=1", "display_name": "Ankit Kumar", "link": "https://stackoverflow.com/users/14249487/ankit-kumar"}, "is_accepted": false, "score": -1, "last_activity_date": 1607468650, "last_edit_date": 1607468650, "creation_date": 1607317474, "answer_id": 65176387, "question_id": 30627110, "link": "https://stackoverflow.com/questions/30627110/how-will-be-operands-inside-a-3-5-a-are-going-to-dealt-or-caculated-in-or/65176387#65176387", "title": "How will be operands inside (a += 3, 5, a) are going to dealt or caculated in order to print the value of &quot;a&quot;?", "body": "<p>As we know that comma has lowest precedence as operator so in,\n<strong>a + = (a + = 3, 5, a)</strong> in this what will happen is first evaluation will be like this <strong>a+3 = 4</strong> but then <em>it will be discarded</em> now evalutation will be <strong>a+5 = 6</strong> now in <strong>third step we have to do a+a</strong> right\nso here answer will be value from previous operation i.e. 6 and then\n<strong>6+1 = 7</strong> now we will come out of the brackets and we will do a = a+ 7 which is\n<strong>a = 1 + 7</strong> so answer will be <strong>8</strong>\nso therefore <strong>(a += 3,5,a)</strong> will get you <strong>7</strong> and <strong>a = a + 7</strong> will get you <strong>8</strong> which will be printed finally</p>\n"}], "owner": {"reputation": 53, "user_id": 3056533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac87dbf17467fd2f86e01fda9a618877?s=128&d=identicon&r=PG&f=1", "display_name": "Devinder Kaur", "link": "https://stackoverflow.com/users/3056533/devinder-kaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3368, "favorite_count": 0, "accepted_answer_id": 30627174, "answer_count": 3, "score": 4, "last_activity_date": 1607468650, "creation_date": 1433353395, "last_edit_date": 1433415247, "question_id": 30627110, "link": "https://stackoverflow.com/questions/30627110/how-will-be-operands-inside-a-3-5-a-are-going-to-dealt-or-caculated-in-or", "title": "How will be operands inside (a += 3, 5, a) are going to dealt or caculated in order to print the value of &quot;a&quot;?", "body": "<p>The code snippet is:</p>\n\n<pre><code>int main()\n{\n     int a = 1, b = 2, c = 3;\n     printf(\"%d\", a += (a += 3, 5, a));\n}\n</code></pre>\n\n<p>Though it displays 8 in the terminal as an output. But am not getting the concept behind it.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1433353381, "post_id": 30627073, "comment_id": 49320042, "body": "You can&#39;t add string literals..."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 2, "creation_date": 1433353418, "post_id": 30627073, "comment_id": 49320064, "body": "You&#180;re mathematically adding a character to a memory address here (at least you want to). Don&#180;t confuse C or C++ with eg. Java, and decide for one language (C &quot;or&quot; C++), then we can show you something correct."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1433353767, "creation_date": 1433353767, "answer_id": 30627215, "question_id": 30627073, "link": "https://stackoverflow.com/questions/30627073/invalid-operands-of-types-const-char-and-const-char-93-to-binary/30627215#30627215", "title": "invalid operands of types &#39;const char*&#39; and &#39;const char [93]&#39; to binary", "body": "<p>You cannot add string literals in C++.  If you use a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"noreferrer\"><code>std::string</code></a> object then you can do:</p>\n\n<pre><code>int i = 'a';\nchar b = (char)i;\nstd::string text = std::string(\"function make_page(\") + b + \"){\"\n    \"var url = 'http://www.gigasena.com.br/loterias/mega-sena/resultados/resultado-mega-sena-'+\" + b + \"+'.htm';\"\n    \"var page = require('webpage').create();\"\n    \"var fs = require('fs');\"\n    \"page.open(url, function () {\"\n    \"page.evaluate(function(){\"\n    \"\"\n    \"});\"\n    \"page.render('results/export-'+\" + b + \"+'.png');\"\n    \"fs.write('results/'+\" + b + \"+'.html', page.content, 'w');\"\n    \"phantom.exit();\"\n    \"});\"\n    \"}\"\n    \"make_page(\" + b + \");\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 259, "user_id": 4918170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2cd461a60c719d148b1aaf83faacb?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Edwards", "link": "https://stackoverflow.com/users/4918170/josh-edwards"}, "is_accepted": false, "score": 2, "last_activity_date": 1433354486, "creation_date": 1433354486, "answer_id": 30627445, "question_id": 30627073, "link": "https://stackoverflow.com/questions/30627073/invalid-operands-of-types-const-char-and-const-char-93-to-binary/30627445#30627445", "title": "invalid operands of types &#39;const char*&#39; and &#39;const char [93]&#39; to binary", "body": "<p>You cannot use operator+ on two c strings. You can use this:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/string/byte/strcat\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/string/byte/strcat</a></p>\n\n<p>Or you can do something like this:</p>\n\n<pre><code>char b;\nstd::string text = std::string(\"your text here\") + b + std::string(\"more text etc\");\n//then use text.c_str() if you need const char*\n</code></pre>\n"}], "owner": {"reputation": 7341, "user_id": 1776681, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/vykfV.jpg?s=128&g=1", "display_name": "Arthur Yakovlev", "link": "https://stackoverflow.com/users/1776681/arthur-yakovlev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6398, "favorite_count": 1, "closed_date": 1449240494, "accepted_answer_id": 30627215, "answer_count": 2, "score": -3, "last_activity_date": 1433354486, "creation_date": 1433353250, "question_id": 30627073, "link": "https://stackoverflow.com/questions/30627073/invalid-operands-of-types-const-char-and-const-char-93-to-binary", "closed_reason": "Duplicate", "title": "invalid operands of types &#39;const char*&#39; and &#39;const char [93]&#39; to binary", "body": "<pre><code>char b = (char)i;\n        char *text = \"function make_page(\"+b+\"){\"\n\"var url = 'http://www.gigasena.com.br/loterias/mega-sena/resultados/resultado-mega-sena-'+\"+b+\"+'.htm';\"\n\"var page = require('webpage').create();\"\n\"var fs = require('fs');\"\n\"page.open(url, function () {\"\n    \"page.evaluate(function(){\"\n\"\"\n    \"});\"\n    \"page.render('results/export-'+\"+b+\"+'.png');\"\n    \"fs.write('results/'+\"+b+\"+'.html', page.content, 'w');\"\n    \"phantom.exit();\"\n\"});\"\n\"}\"\n\"make_page(\"+b+\");\";\n</code></pre>\n"}, {"tags": ["c", "header", "include", "c-preprocessor"], "comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 2, "creation_date": 1433355878, "post_id": 30627021, "comment_id": 49321510, "body": "Yes, please post your attempts, because this will show where exactly you got stuck."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433363079, "post_id": 30627021, "comment_id": 49325714, "body": "There are plenty resources out there about how to read a line of text once you have a FILE pointer, as returned by fopen(). I would  also recommend a book on C; cf. <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/562303/&hellip;</a> with some free ones."}, {"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 0, "creation_date": 1433492278, "post_id": 30627021, "comment_id": 49385535, "body": "It goes like this: Analyse problem. Devise solution. <b>Read documentation of your tools</b>. Implement solution. Test."}], "answers": [{"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433362667, "post_id": 30627187, "comment_id": 49325483, "body": "The lines copied from the included file should be subjected to the same processing; includes are nested."}, {"owner": {"reputation": 21, "user_id": 4892018, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vxQOTwazAg/AAAAAAAAAAI/AAAAAAAAAEY/BcMCVn11f7k/photo.jpg?sz=128", "display_name": "Ahdriam", "link": "https://stackoverflow.com/users/4892018/ahdriam"}, "edited": false, "score": 0, "creation_date": 1433363527, "post_id": 30627187, "comment_id": 49325951, "body": "Thanks for answering. How do I open the source file so I could read from it. I only know to use fopen with the file name, and I only got the FILE * pointer."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 21, "user_id": 4892018, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vxQOTwazAg/AAAAAAAAAAI/AAAAAAAAAEY/BcMCVn11f7k/photo.jpg?sz=128", "display_name": "Ahdriam", "link": "https://stackoverflow.com/users/4892018/ahdriam"}, "edited": false, "score": 1, "creation_date": 1433364011, "post_id": 30627187, "comment_id": 49326213, "body": "@Ahdriam: if you have to ask that, the entire rest of this project of yours is most likely beyond your current skills. Perhaps you ought to start with something a bit easier."}, {"owner": {"reputation": 21, "user_id": 4892018, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vxQOTwazAg/AAAAAAAAAAI/AAAAAAAAAEY/BcMCVn11f7k/photo.jpg?sz=128", "display_name": "Ahdriam", "link": "https://stackoverflow.com/users/4892018/ahdriam"}, "edited": false, "score": 0, "creation_date": 1433365131, "post_id": 30627187, "comment_id": 49326805, "body": "yes, I have started very recently but I think that after being able to read the source file, I can manage the rest, and I have never seen before an example of opening of a file with a pointer to it, just by its name, I tried difference things and I search for it on google, and I havn&#39;t find an example for that."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1433409256, "post_id": 30627187, "comment_id": 49343829, "body": "This is a very basic question and you should read a book on C. But to answer: you give <code>fopen</code> the name of the file you want to open. It returns a pointer to a &quot;thing&quot; you use to tell <code>fgets</code> from what opened file to read. <code>FILE *fp=fopen(&quot;myFile&quot;, &quot;r&quot;); ... fgets(buf, bufsize, fp);...</code>"}, {"owner": {"reputation": 21, "user_id": 4892018, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vxQOTwazAg/AAAAAAAAAAI/AAAAAAAAAEY/BcMCVn11f7k/photo.jpg?sz=128", "display_name": "Ahdriam", "link": "https://stackoverflow.com/users/4892018/ahdriam"}, "edited": false, "score": 0, "creation_date": 1433775450, "post_id": 30627187, "comment_id": 49482498, "body": "But the thing is I have a function which returns a file pointer, and another function gets this file pointer as a parameter, and I want the second function to open the file, which is recived closed, and I don&#39;t want to transfer the file name"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1433776865, "post_id": 30627187, "comment_id": 49483536, "body": "If you get a pointer to a file, that is, to a <code>FILE *</code> and it is closed, then you <i>cannot</i> re-open it. You either must give the file pointer as an open file, or give the filename."}, {"owner": {"reputation": 21, "user_id": 4892018, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vxQOTwazAg/AAAAAAAAAAI/AAAAAAAAAEY/BcMCVn11f7k/photo.jpg?sz=128", "display_name": "Ahdriam", "link": "https://stackoverflow.com/users/4892018/ahdriam"}, "edited": false, "score": 0, "creation_date": 1433777608, "post_id": 30627187, "comment_id": 49484115, "body": "oh, and I tried for so long to do it....  now, I didn&#39;t close the file and passed the pointer, and then I did:  fscanf(file, &quot;%s&quot;, string)  where file is the pointer name, but instead of getting the first &quot;word&quot; in the file, string got the name of the file. Why is that?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 21, "user_id": 4892018, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vxQOTwazAg/AAAAAAAAAAI/AAAAAAAAAEY/BcMCVn11f7k/photo.jpg?sz=128", "display_name": "Ahdriam", "link": "https://stackoverflow.com/users/4892018/ahdriam"}, "edited": false, "score": 1, "creation_date": 1433778191, "post_id": 30627187, "comment_id": 49484526, "body": "@Ahdriam, I changed the solution to adress your problem. I suggest you forget your own code and use the solution. Otherwise you must post yur code so we can study it and tell you all your &quot;why&#39;s&quot;."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 2, "last_activity_date": 1433778086, "last_edit_date": 1433778086, "creation_date": 1433353613, "answer_id": 30627187, "question_id": 30627021, "link": "https://stackoverflow.com/questions/30627021/write-a-simple-c-preprocessor/30627187#30627187", "title": "Write a simple C preprocessor", "body": "<ul>\n<li><p>You open your output file</p></li>\n<li><p>You <code>fgets</code> line by line from your source file.</p></li>\n<li><p>You check each line if it starts with <code>#include</code>. If no, copy the line read to your output. If yes, open the file whose name follows after the <code>#include</code> and copy its content to your output.</p></li>\n<li><p>repeat until end of input.</p></li>\n</ul>\n\n<p>The following is your preprocessor (I haven't tested it; it should work):</p>\n\n<pre><code>#define FALSE   0\n#define TRUE    1\n#define MAX_LINE 1024\n\nchar linebuf[MAX_LINE];\nFILE *fpout;\n\nint preprocessor(FILE *fpin);\n\nint main(int argc, char **argv)\n{\n    FILE *fpin;\n    if ((fpout=fopen(argv[2],\"w\"))==NULL) return(1);\n    if ((fpin= fopen(argv[1],\"r\"))==NULL) return(1);\n    preprocessor(fpin);\n    fclose(fpin);\n    fclose(fpout);\n    return(0);\n}\nint preprocessor(FILE *fpin)\n{\n    FILE *fpin2;\n    while (fgets(linebuf,MAX_LINE,fpin))\n    {\n        if (strncmp(linebuf,\"#include\",8)==0) {\n            char *cp1, *cp2;\n            if ((cp1= strchr(linebuf+9,'\"'))==NULL) {fclose(fpin); return(FALSE);}\n            if ((cp2= strchr(cp1+1,    '\"'))==NULL) {fclose(fpin); return(FALSE);}\n            *cp2='\\0';\n            if ((fpin2=fopen(cp1,\"r\"))==NULL) {\n                printf(\"File '%s' not found.\\n\",cp1);\n                return(FALSE);\n            }\n            if (!preprocessor(fpin2)) {fclose(fpin2); return(FALSE);}\n            fclose(fpin2);\n        }\n        else fputs(linebuf, fpout);\n    }\n    return(TRUE);\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4892018, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vxQOTwazAg/AAAAAAAAAAI/AAAAAAAAAEY/BcMCVn11f7k/photo.jpg?sz=128", "display_name": "Ahdriam", "link": "https://stackoverflow.com/users/4892018/ahdriam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 30627187, "answer_count": 1, "score": -1, "last_activity_date": 1464264069, "creation_date": 1433353053, "last_edit_date": 1464264069, "question_id": 30627021, "link": "https://stackoverflow.com/questions/30627021/write-a-simple-c-preprocessor", "title": "Write a simple C preprocessor", "body": "<p>I am trying to write a program that imitates the functions of the <strong>C</strong> preprocessor.\nSo my question is about expanding  <code>#include \"header.h\"</code> statements.</p>\n\n<p>I have a <code>FILE *</code> pointer to the source file, so I need to scan for all the header files included in the source file, and for each one, enter to the header file and copy its content to a new file, and than copy the original source file to the new file, which will result in an expanded header files program.</p>\n\n<p>My problem: reaching to the actual header files by scanning the source file (this is just for headers I have written, so they should be looked for in the folder where the source file is).</p>\n\n<p>Any ideas would be appreciated. (I haven't posted my miserable attempts, but if it will help somehow, I will post them).</p>\n"}, {"tags": ["c", "asynchronous", "signals"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433358011, "post_id": 30626990, "comment_id": 49322783, "body": "&quot;asynchronous&quot; or &quot;a-synchronous&quot; means not synchronized.  As the process runs, signals to it are not strongly timed in relationship to process activity - there occur &quot;whenever&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 4825204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HvrZbZ64s2Q/AAAAAAAAAAI/AAAAAAAAAJM/YbL74OqOVq4/photo.jpg?sz=128", "display_name": "Blake McConnell", "link": "https://stackoverflow.com/users/4825204/blake-mcconnell"}, "is_accepted": true, "score": 0, "last_activity_date": 1433356393, "creation_date": 1433356393, "answer_id": 30627962, "question_id": 30626990, "link": "https://stackoverflow.com/questions/30626990/what-is-meant-by-a-signal-being-asynchronous/30627962#30627962", "title": "What is meant by a signal being asynchronous?", "body": "<p>It seems to me that the statement you highlight from the Wikipedia article is too general to be helpful in figuring out what is happening \"under the hood.\"  In regard to implementation of callbacks, for example, take a look at this part of the <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html\" rel=\"nofollow\">Open Group specification</a>:</p>\n\n<blockquote>\n  <p><strong>pointer to a function</strong></p>\n  \n  <p>Catch signal.</p>\n  \n  <p>On delivery of the signal, the receiving process is to execute the\n  signal-catching function at the specified address. After returning\n  from the signal-catching function, the receiving process shall resume\n  execution at the point at which it was interrupted.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1433358728, "last_edit_date": 1433358728, "creation_date": 1433357541, "answer_id": 30628326, "question_id": 30626990, "link": "https://stackoverflow.com/questions/30626990/what-is-meant-by-a-signal-being-asynchronous/30628326#30628326", "title": "What is meant by a signal being asynchronous?", "body": "<p>It looks as if \"asynchronous\" could be left out in </p>\n\n<blockquote>\n  <p>A signal is an asynchronous notification sent to a process or to a specific thread within the same process in order to notify it of an event that occurred.</p>\n</blockquote>\n\n<p>Whether the sending process continues or waits is not known to the signal recipient. Neither is it of importance to the receiver (except maybe in protocols where it is \"agreed\" that the sender waits or continues, possibly dictating constraints on the response time by the receiver).</p>\n\n<p>Another view could be:</p>\n\n<ul>\n<li><p>An asynchronous event could mean that more of the same or different events can be received from the sender before the first event has been processed by the receiver.</p></li>\n<li><p>A synchronous event could mean that no events of the same type will be recieved from the sender until the previous synchronous event of the type has been processed by the receiver. (It may be though that other types of synchronous or asynchronous events can be received from the sender.)</p></li>\n</ul>\n\n<p>It seems that the statement of [a]synchronousness of an event is only of relevance to what the receiver can expect from the sender, but I suspect that the Wikipedia definiton refers to the sender blocking/continuing its processing, which is not of importance to the receiver.</p>\n\n<p>How would this translate to multiple senders sending the same type of synchronous event to a single receiver?</p>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 13695519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qkB7V.png?s=128&g=1", "display_name": "MrIo", "link": "https://stackoverflow.com/users/13695519/mrio"}, "is_accepted": false, "score": 0, "last_activity_date": 1605549035, "last_edit_date": 1605549035, "creation_date": 1605132669, "answer_id": 64794928, "question_id": 30626990, "link": "https://stackoverflow.com/questions/30626990/what-is-meant-by-a-signal-being-asynchronous/64794928#64794928", "title": "What is meant by a signal being asynchronous?", "body": "<p>A signal is <strong>asynchronous</strong> because a thread may receive a signal at <strong>any point in execution</strong>. This contrasts with the synchronicity of all other things in the code: one statement follow another, after a function call you expect a value, this instruction follows the one before, etc... you get the idea. A signal handler may start executing at any moment (normally interrupting the current flow execution until it finishes).</p>\n<p>The problem is that the paragraph does not refer to the same <em>asynchronous</em> term: it refer instead to non-blocking calls that may execute &quot;in the background&quot;, allowing the current thread to do other tasks while it <em>waits for the response to be received</em> (notice how this reception is <strong>asynchronous</strong> in the same way signals are).</p>\n"}], "owner": {"reputation": 20326, "user_id": 1173112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1", "display_name": "Koray Tugay", "link": "https://stackoverflow.com/users/1173112/koray-tugay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 1, "accepted_answer_id": 30627962, "answer_count": 3, "score": 1, "last_activity_date": 1605549035, "creation_date": 1433352964, "question_id": 30626990, "link": "https://stackoverflow.com/questions/30626990/what-is-meant-by-a-signal-being-asynchronous", "title": "What is meant by a signal being asynchronous?", "body": "<p>Both definitions from Wikipedia:</p>\n\n<blockquote>\n  <p>In computer science, asynchronous I/O, or non-blocking I/O is a form\n  of input/output processing that permits other processing to continue\n  before the transmission has finished.</p>\n  \n  <p>Signals are a limited form of inter-process communication used in\n  Unix, Unix-like, and other POSIX-compliant operating systems. A signal\n  is an asynchronous notification sent to a process or to a specific\n  thread within the same process in order to notify it of an event that\n  occurred.</p>\n</blockquote>\n\n<p>I can not really understand what is meant by: </p>\n\n<blockquote>\n  <p><strong>A signal is an asynchronous notification sent to a process</strong></p>\n</blockquote>\n\n<p>Does this mean, just like I/O, a signal is sent to a process and the process which sends the signal does not wait for the return value of the the process receiving the signal, and keeps going? </p>\n\n<p>If a signal were to be synchronous, then would the sending process wait for the return value? </p>\n"}, {"tags": ["c", "time", "time.h"], "answers": [{"tags": [], "owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "is_accepted": false, "score": 1, "last_activity_date": 1433353514, "creation_date": 1433353514, "answer_id": 30627157, "question_id": 30626866, "link": "https://stackoverflow.com/questions/30626866/timing-in-c-with-time-h/30627157#30627157", "title": "Timing in C with time.h", "body": "<p>If <code>CLOCKS_PER_SEC</code> is the typical value of <code>1000000</code>, it's entirely possible that the range you're measuring is less than one clock (1 microsecond).  Also, <code>sleep</code> will not contribute to increases in <code>clock</code> aside from the overhead of the call itself, since <code>clock</code> measures process time, not wall clock time.</p>\n\n<p>Instead, try measuring the time taken to perform multiple calls to the assembler function, then dividing the results by the number of iterations.  If the total time to execute the assembler function is very small (e.g. 1ns) you'll need to be clever about how you do this, otherwise the overhead of the loop could end up being a significant part of the measurement.</p>\n"}, {"comments": [{"owner": {"reputation": 4887, "user_id": 83348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a1203dd766cfafabdfa21c3b196454?s=128&d=identicon&r=PG", "display_name": "mctylr", "link": "https://stackoverflow.com/users/83348/mctylr"}, "edited": false, "score": 2, "creation_date": 1433435850, "post_id": 30627620, "comment_id": 49362321, "body": "While correct, the lack of explanation limits the educational value. It is not clear <i>why</i> this solution is better. It could be improved by identifying what the problem was (the lack of resolution in <code>clock</code>, as well as its functions suitability -- user-time versus wall-clock time) and how this resolves those problems."}], "tags": [], "owner": {"reputation": 84, "user_id": 2445797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b58c6d3662e3e9da5412fd782d43a9b?s=128&d=identicon&r=PG", "display_name": "user2445797", "link": "https://stackoverflow.com/users/2445797/user2445797"}, "is_accepted": true, "score": 0, "last_activity_date": 1433434437, "last_edit_date": 1433434437, "creation_date": 1433355124, "answer_id": 30627620, "question_id": 30626866, "link": "https://stackoverflow.com/questions/30626866/timing-in-c-with-time-h/30627620#30627620", "title": "Timing in C with time.h", "body": "<p>Here's a simple example, compiled on a Ubuntu box:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;time.h&gt;\n\nint64_t timestamp_now (void)\n{\n    struct timeval tv;\n    gettimeofday (&amp;tv, NULL);\n    return (int64_t) tv.tv_sec * CLOCKS_PER_SEC + tv.tv_usec;\n}\n\ndouble timestamp_to_seconds (int64_t timestamp)\n{\n    return timestamp / (double) CLOCKS_PER_SEC;\n}\n\nint\nmain ()\n{\n    int64_t start = timestamp_now ();\n    sleep (1);\n    printf (\"sleep(1) took %f seconds\\n\", \n            timestamp_to_seconds (timestamp_now () - start));\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1433358694, "creation_date": 1433358694, "answer_id": 30628648, "question_id": 30626866, "link": "https://stackoverflow.com/questions/30626866/timing-in-c-with-time-h/30628648#30628648", "title": "Timing in C with time.h", "body": "<p>From the helpful <code>man</code>-page for <code>clock()</code>:</p>\n\n<blockquote>\n  <p>DESCRIPTION</p>\n\n<pre><code>   The clock() function returns an **approximation of processor time used by the program**.\n</code></pre>\n</blockquote>\n\n<p>In other words, <code>clock()</code> is probably not what you want here, because you want to count elapsed wall-clock time, not CPU-usage time (note: <code>sleep()</code> uses almost no CPU time - it just sets an alarm for a wake-up time in the future and then, well, sleeps...).</p>\n"}, {"tags": [], "owner": {"reputation": 285, "user_id": 768976, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6e1171df39f6ffc39380e06fd440f33a?s=128&d=identicon&r=PG", "display_name": "Pedro Mu&#241;oz", "link": "https://stackoverflow.com/users/768976/pedro-mu%c3%b1oz"}, "is_accepted": false, "score": 0, "last_activity_date": 1433436841, "creation_date": 1433436841, "answer_id": 30649789, "question_id": 30626866, "link": "https://stackoverflow.com/questions/30626866/timing-in-c-with-time-h/30649789#30649789", "title": "Timing in C with time.h", "body": "<p>Use difftime:</p>\n\n<p>First:</p>\n\n<pre><code>time_t t_ini;\nt_ini=time(NULL);\n</code></pre>\n\n<p>At the end:</p>\n\n<pre><code>difftime((int)time(NULL), (int)t_ini);\n</code></pre>\n"}], "owner": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2447, "favorite_count": 0, "accepted_answer_id": 30627620, "answer_count": 4, "score": 1, "last_activity_date": 1433436841, "creation_date": 1433352558, "last_edit_date": 1433435178, "question_id": 30626866, "link": "https://stackoverflow.com/questions/30626866/timing-in-c-with-time-h", "title": "Timing in C with time.h", "body": "<p>I am working on Ubuntu, and I want to time an assembler function in C.</p>\n\n<p>Thats my code:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\nextern void assembler_function(char*,int);\n\nint main(){\n   char *text1 = \"input.txt\";\n   clock_t start=clock();\n   sleep(3); // used for test\n   //assembler_function(text1,0);\n   clock_t stop=clock();\n\n   //printf(\"%d %f\\n\",(int)stop,((float)stop)/CLOCKS_PER_SEC);\n   printf(\"Time : %f \\n\",(double)start/CLOCKS_PER_SEC);\n   printf(\"Time : %f \\n\",(double)stop/CLOCKS_PER_SEC);\n   printf(\"Time : %f \\n\",(double)(stop-start)/CLOCKS_PER_SEC);\n\n   return 0;\n}\n</code></pre>\n\n<p>The results are :</p>\n\n<p>Time : 0.000000</p>\n\n<p>Time : 0.000000</p>\n\n<p>Time : 0.000000</p>\n"}, {"tags": ["c", "arm", "stm32", "stm32f4discovery", "can-bus"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433356108, "post_id": 30626663, "comment_id": 49321638, "body": "Maybe a packed struct?  Is there nothing useful in the included .h files?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3223379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2034396d455174dc3eb4acba58d3e8a7?s=128&d=identicon&r=PG&f=1", "display_name": "etz01", "link": "https://stackoverflow.com/users/3223379/etz01"}, "edited": false, "score": 0, "creation_date": 1433593270, "post_id": 30630676, "comment_id": 49425755, "body": "Can you give me the link for the examples ? I can&#39;t find anything on the ST site plus the link they actually give out www.st.com/stm32f4-discovery does not work."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 1, "user_id": 3223379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2034396d455174dc3eb4acba58d3e8a7?s=128&d=identicon&r=PG&f=1", "display_name": "etz01", "link": "https://stackoverflow.com/users/3223379/etz01"}, "edited": false, "score": 0, "creation_date": 1433617394, "post_id": 30630676, "comment_id": 49432670, "body": "Pretty sure it&#39;s the last one on this page (not the cube one): <a href=\"http://www.st.com/web/catalog/tools/FM147/CL1794/SC961/SS1743/LN1939/PF257901\" rel=\"nofollow noreferrer\">st.com/web/catalog/tools/FM147/CL1794/SC961/SS1743/LN1939/&hellip;</a>  If anything, you&#39;re looking for &quot;STM32 standard peripheral library&quot;.  It comes with examples."}], "tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": false, "score": 1, "last_activity_date": 1433365424, "creation_date": 1433365424, "answer_id": 30630676, "question_id": 30626663, "link": "https://stackoverflow.com/questions/30626663/stm32f4-discovery-and-can-programming/30630676#30630676", "title": "STM32F4 Discovery and CAN programming", "body": "<p>Here's an example of a CAN loopback you can try.  It's a CAN loopback test. It's in the stm32f4 examples that you can download from the STM website.  This is for an STM32439 eval board but it should work on a discovery.  (Both are STM32F4 chips).</p>\n\n<pre><code>#define USE_CAN1\n/* Uncomment the line below if you will use the CAN 2 peripheral */\n/* #define USE_CAN2 */\n\n#ifdef  USE_CAN1\n  #define CANx              CAN1\n  #define CAN_CLK           RCC_APB1Periph_CAN1      \n\n#else /* USE_CAN2 */\n  #define CANx              CAN2\n  #define CAN_CLK           (RCC_APB1Periph_CAN1 | RCC_APB1Periph_CAN2)   \n#endif  /* USE_CAN1 */\n\ntypedef enum {FAILED = 0, PASSED = !FAILED} TestStatus;\n\n__IO uint32_t ret = 0; /* for return of the interrupt handling */\nvolatile TestStatus TestRx;\n\nTestStatus CAN_Polling(void);\n\nint main(void) {\n    /*!&lt; At this stage the microcontroller clock setting is already configured, \n       this is done through SystemInit() function which is called from startup\n       files (startup_stm32f40_41xxx.s/startup_stm32f427_437xx.s/startup_stm32f429_439xx.s)\n       before to branch to application main. \n       To reconfigure the default setting of SystemInit() function, refer to\n       system_stm32f4xx.c file\n     */   \n\n    /* CANx Periph clock enable */\n    RCC_APB1PeriphClockCmd(CAN_CLK, ENABLE);\n\n    /* Initialize LEDs mounted on EVAL board */\n    STM_EVAL_LEDInit(LED1);\n    STM_EVAL_LEDInit(LED2);\n\n    /* CAN transmit at 125Kb/s and receive by polling in loopback mode */\n    TestRx = CAN_Polling();\n\n    if (TestRx !=  FAILED) { /* OK */\n        /* Turn on LED1 */\n        STM_EVAL_LEDOn(LED1);\n    } else { /* KO */\n        /* Turn on LED2 */\n        STM_EVAL_LEDOn(LED2);\n    }\n\n    /* Infinite loop */\n    while (1) { }\n}\n\n/**\n * @brief  Configures the CAN, transmit and receive by polling\n * @param  None\n * @retval PASSED if the reception is well done, FAILED in other case\n */\nTestStatus CAN_Polling(void) {\n    CAN_InitTypeDef        CAN_InitStructure;\n    CAN_FilterInitTypeDef  CAN_FilterInitStructure;\n    CanTxMsg TxMessage;\n    CanRxMsg RxMessage;\n    uint32_t uwCounter = 0;\n    uint8_t TransmitMailbox = 0;\n\n    /* CAN register init */\n    CAN_DeInit(CANx);\n\n    /* CAN cell init */\n    CAN_InitStructure.CAN_TTCM = DISABLE;\n    CAN_InitStructure.CAN_ABOM = DISABLE;\n    CAN_InitStructure.CAN_AWUM = DISABLE;\n    CAN_InitStructure.CAN_NART = DISABLE;\n    CAN_InitStructure.CAN_RFLM = DISABLE;\n    CAN_InitStructure.CAN_TXFP = DISABLE;\n    CAN_InitStructure.CAN_Mode = CAN_Mode_LoopBack;\n    CAN_InitStructure.CAN_SJW = CAN_SJW_1tq;\n\n    /* CAN Baudrate = 175kbps (CAN clocked at 42 MHz) */\n    CAN_InitStructure.CAN_BS1 = CAN_BS1_6tq;\n    CAN_InitStructure.CAN_BS2 = CAN_BS2_8tq;\n    CAN_InitStructure.CAN_Prescaler = 16;\n    CAN_Init(CANx, &amp;CAN_InitStructure);\n\n    /* CAN filter init */\n#ifdef  USE_CAN1\n    CAN_FilterInitStructure.CAN_FilterNumber = 0;\n#else /* USE_CAN2 */\n    CAN_FilterInitStructure.CAN_FilterNumber = 14;\n#endif  /* USE_CAN1 */\n    CAN_FilterInitStructure.CAN_FilterMode = CAN_FilterMode_IdMask;\n    CAN_FilterInitStructure.CAN_FilterScale = CAN_FilterScale_32bit;\n    CAN_FilterInitStructure.CAN_FilterIdHigh = 0x0000;\n    CAN_FilterInitStructure.CAN_FilterIdLow = 0x0000;\n    CAN_FilterInitStructure.CAN_FilterMaskIdHigh = 0x0000;\n    CAN_FilterInitStructure.CAN_FilterMaskIdLow = 0x0000;  \n    CAN_FilterInitStructure.CAN_FilterFIFOAssignment = 0;\n\n    CAN_FilterInitStructure.CAN_FilterActivation = ENABLE;\n    CAN_FilterInit(&amp;CAN_FilterInitStructure);\n\n    /* transmit */\n    TxMessage.StdId = 0x11;\n    TxMessage.RTR = CAN_RTR_DATA;\n    TxMessage.IDE = CAN_ID_STD;\n    TxMessage.DLC = 2;\n    TxMessage.Data[0] = 0xCA;\n    TxMessage.Data[1] = 0xFE;\n\n    TransmitMailbox = CAN_Transmit(CANx, &amp;TxMessage);\n    uwCounter = 0;\n    while((CAN_TransmitStatus(CANx, TransmitMailbox)  !=  CANTXOK) &amp;&amp; (uwCounter  !=  0xFFFF)) {\n        uwCounter++;\n    }\n\n    uwCounter = 0;\n    while((CAN_MessagePending(CANx, CAN_FIFO0) &lt; 1) &amp;&amp; (uwCounter  !=  0xFFFF)) {\n        uwCounter++;\n    }\n\n    /* receive */\n    RxMessage.StdId = 0x00;\n    RxMessage.IDE = CAN_ID_STD;\n    RxMessage.DLC = 0;\n    RxMessage.Data[0] = 0x00;\n    RxMessage.Data[1] = 0x00;\n    CAN_Receive(CANx, CAN_FIFO0, &amp;RxMessage);\n\n    if (RxMessage.StdId != 0x11) {\n        return FAILED;  \n    }\n\n    if (RxMessage.IDE != CAN_ID_STD) {\n        return FAILED;\n    }\n\n    if (RxMessage.DLC != 2) {\n        return FAILED;  \n    }\n\n    if ((RxMessage.Data[0]&lt;&lt;8|RxMessage.Data[1]) != 0xCAFE) {\n        return FAILED;\n    }\n\n    return PASSED; /* Test Passed */\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3223379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2034396d455174dc3eb4acba58d3e8a7?s=128&d=identicon&r=PG&f=1", "display_name": "etz01", "link": "https://stackoverflow.com/users/3223379/etz01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9773, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433365424, "creation_date": 1433351921, "question_id": 30626663, "link": "https://stackoverflow.com/questions/30626663/stm32f4-discovery-and-can-programming", "title": "STM32F4 Discovery and CAN programming", "body": "<p>I am trying to start learning programming and I am trying to get this code to work: <a href=\"https://github.com/espruino/Espruino/blob/master/targetlibs/stm32f4/lib/stm32f4xx_can.c\" rel=\"nofollow\">https://github.com/espruino/Espruino/blob/master/targetlibs/stm32f4/lib/stm32f4xx_can.c</a>\nI am using Atollic TruStudio Lite. </p>\n\n<p>I did the basic LED blinking code with Discovery, but other than that. I have no clue how to do this. </p>\n\n<p>I don't get how am i supposed to simulate CAN message (and other things) via STM32. </p>\n\n<p>I am a total beginner, so please, don't rip my throat out. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "c", "interface", "python-c-api"], "comments": [{"owner": {"reputation": 15679, "user_id": 369450, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/5cf82bfcd75a3bd40deaad83f7657c59?s=128&d=identicon&r=PG&f=1", "display_name": "All Workers Are Essential", "link": "https://stackoverflow.com/users/369450/all-workers-are-essential"}, "edited": false, "score": 2, "creation_date": 1433424291, "post_id": 30626626, "comment_id": 49354009, "body": "I can&#39;t reproduce this error on Linux. I&#39;m running <code>Python 3.4.3 (default, Mar 25 2015, 17:13:50) [GCC 4.9.2 20150304 (prerelease)] on linux</code>. One potential bug is in your <code>if(module == NULL) { ...; Py_RETURN_NONE; }</code>. If <code>module</code> is <code>NULL</code>, an exception has been raised, and you should return <code>NULL</code> instead of <code>Py_RETURN_NONE</code> to indicate to the calling method your module initialization function failed."}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "reply_to_user": {"reputation": 15679, "user_id": 369450, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/5cf82bfcd75a3bd40deaad83f7657c59?s=128&d=identicon&r=PG&f=1", "display_name": "All Workers Are Essential", "link": "https://stackoverflow.com/users/369450/all-workers-are-essential"}, "edited": false, "score": 0, "creation_date": 1433432133, "post_id": 30626626, "comment_id": 49359963, "body": "Replaced with <code>return NULL;</code> and now it says <code>Memory Error</code>, any ideas? Btw, I &quot;fixed&quot; it by replacing the -1 with a zero in <code>CAPModule </code>"}, {"owner": {"reputation": 15679, "user_id": 369450, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/5cf82bfcd75a3bd40deaad83f7657c59?s=128&d=identicon&r=PG&f=1", "display_name": "All Workers Are Essential", "link": "https://stackoverflow.com/users/369450/all-workers-are-essential"}, "edited": false, "score": 0, "creation_date": 1433458581, "post_id": 30626626, "comment_id": 49373898, "body": "<code>0</code> is a reasonable value, but I don&#39;t know why that fixes your issue. The documentation for <a href=\"https://docs.python.org/3/c-api/module.html#c.PyModuleDef.m_size\" rel=\"nofollow noreferrer\">PyModuleDef.m_size</a> indicates a size of <code>-1</code> &quot;means that the module can not be re-initialized because it has global state&quot; but as far as I can tell your module shouldn&#39;t be reinitialized."}], "owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433368620, "creation_date": 1433351801, "last_edit_date": 1433368620, "question_id": 30626626, "link": "https://stackoverflow.com/questions/30626626/import-c-module-not-working-in-python-3", "title": "Import C module not working in Python 3", "body": "<p>I tried to write a module for python using the c-api but the module wouldn't import. The problem persists for this minimal example:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic PyMethodDef CAPMethods[] = {\n    {NULL, NULL, 0, NULL}        /* Sentinel for end of array*/\n};\n\nstatic struct PyModuleDef CAPModule = {\n   PyModuleDef_HEAD_INIT,\n   \"puzzler\",   /* name of module */\n   NULL, /* module documentation, may be NULL */\n   -1,       /* -1 if the module keeps state in global variables. */\n   CAPMethods, /* Method table */\n};\n\nPyMODINIT_FUNC\nPyInit_puzzler(void)\n{\n    printf(\"Initializing...\\n\");\n    PyObject* module = PyModule_Create(&amp;CAPModule);\n    if(module == NULL)\n    {\n        printf(\"Minimal Failed!\\n\");\n        Py_RETURN_NONE;\n    }\n    printf(\"Success!\\n\");\n\n    return module;\n}\n</code></pre>\n\n<p>It feels like I'm missing something really obvious but I can't tell what it is. For completeness here is my setup.py:</p>\n\n<pre><code>from distutils.core import setup, Extension\n\nCAP = Extension(\n        'puzzler',\n        sources = ['minimal.c'],\n    )\n\nsetup(  name = 'PuzzleSolver',\n        version = '1.0',\n        description = 'This is a demo package',\n        ext_modules = [CAP])\n</code></pre>\n\n<p>If someone knows what I could do wrong or wants additional information about my setup, feel free to ask in the comments. I compile using <code>python setup.py install</code> (<code>Python 3.3.3 (v3.3.3:c3896275c0f6, Nov 18 2013, 21:19:30) [MSC v.1600 64 bit (AMD64)] on win32</code>).</p>\n\n<p>Here is the python console output when I try it out:</p>\n\n<pre><code>&gt;&gt;&gt; import puzzler\nInitializing...\nMinimal Failed!\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nSystemError: initialization of puzzler raised unreported exception\n</code></pre>\n"}, {"tags": ["c", "winapi", "comctl32"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 2, "creation_date": 1433373322, "post_id": 30626549, "comment_id": 49330408, "body": "I tried this on Win8 and I get the same result. It&#39;s probably an error in documentation. You should calculate the height yourself anyway, depending on font height."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1433533964, "post_id": 30626549, "comment_id": 49411177, "body": "All right; I&#39;ll just use the width then. Thanks."}], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1433351539, "creation_date": 1433351539, "question_id": 30626549, "link": "https://stackoverflow.com/questions/30626549/what-is-the-proper-use-of-dtm-getidealsize-treating-the-returned-size-as-pixels", "title": "What is the proper use of DTM_GETIDEALSIZE? Treating the returned size as pixels gives me very large, sometimes variable, heights", "body": "<p>I'm trying to autosize some date-time picker controls with <code>DTM_GETIDEALSIZE</code>, but I don't quite get how to use this message properly. While widths returned seem to be fine if treated as pixels, heights seem to be not only way off, but sometimes change over time!</p>\n\n<p>The sample program below creates three date-time pickers. The first shows both date and time with a custom format, the second shows dates only with <code>DTS_SHORTDATECENTURYFORMAT</code>, and the third shows times only with <code>DTS_TIMEFORMAT</code>. Resizing the window resizes all three pickers using <code>DTM_GETIDEALSIZE</code>. The widths seem to be fine. However, the heights of the first two are always 100, and the height of the last (the time picker) seems to start at 98 or so and decreases by two with each resize until it reaches 16, at which point it stays at 16.</p>\n\n<p>This is tested both with Windows Vista and with Windows 7. Error checking in the below program is inconsistent (but some errors are not checked for the purposes of keeping this a simple test example). However, I will note that MSDN explicitly documents <code>DTM_GETIDEALSIZE</code> as only ever returning <code>TRUE</code> with no error condition specified.</p>\n\n<p>Thanks.</p>\n\n<pre><code>// 3 june 2015\n#define UNICODE\n#define _UNICODE\n#define STRICT\n#define STRICT_TYPED_ITEMIDS\n#define CINTERFACE\n#define WINVER 0x0600\n#define _WIN32_WINNT 0x0600\n#define _WIN32_WINDOWS 0x0600\n#define _WIN32_IE 0x0700\n#define NTDDI_VERSION 0x06000000\n#include &lt;windows.h&gt;\n#include &lt;commctrl.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;uxtheme.h&gt;\n#include &lt;string.h&gt;\n#include &lt;wchar.h&gt;\n#include &lt;windowsx.h&gt;\n#include &lt;vsstyle.h&gt;\n#include &lt;vssym32.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;oleacc.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid die(char *s)\n{\n    // TODO\n}\n\nHWND mainwin;\nHWND dtp1, dtp2, dtp3;\n\nvoid idealsize(HWND dtp, char *n, int *x, int *y)\n{\n    SIZE s;\n\n    s.cx = 0;\n    s.cy = 0;\n    printf(\"%s | %I32d \", n, SendMessageW(dtp, DTM_GETIDEALSIZE, 0, (LPARAM) (&amp;s)));\n    printf(\"%I32d %I32d\\n\", s.cx, s.cy);\n    MoveWindow(dtp, *x, *y, s.cx, s.cy, TRUE);\n    *y += s.cy;\n}\n\nLRESULT CALLBACK wndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    int x, y;\n    SIZE s;\n\n    switch (uMsg) {\n    case WM_CLOSE:\n        PostQuitMessage(0);\n        return 0;\n    case WM_SIZE:\n        x = 10;\n        y = 10;\n        idealsize(dtp1, \"1\", &amp;x, &amp;y);\n        idealsize(dtp2, \"2\", &amp;x, &amp;y);\n        idealsize(dtp3, \"3\", &amp;x, &amp;y);\n        break;\n    }\n    return DefWindowProcW(hwnd, uMsg, wParam, lParam);\n}\n\nstatic HWND makedtp(DWORD style, WCHAR *format)\n{\n    HWND hwnd;\n\n    hwnd = CreateWindowExW(WS_EX_CLIENTEDGE,\n        DATETIMEPICK_CLASSW, L\"\",\n        style | WS_TABSTOP | WS_CHILD | WS_VISIBLE,\n        0, 0, 100, 100,\n        mainwin, NULL, GetModuleHandle(NULL), NULL);\n    if (format != NULL)\n        if (SendMessageW(hwnd, DTM_SETFORMAT, 0, (LPARAM) format) == 0)\n            die(\"error applying format string to date/time picker in finishNewDateTimePicker()\");\n    return hwnd;\n}\n\n#define GLI(what, buf, n) GetLocaleInfoEx(LOCALE_NAME_USER_DEFAULT, what, buf, n)\n\nHWND makeDateTimePicker(void)\n{\n    WCHAR *date, *time, *datetime;\n    int ndate, ntime;\n    int n;\n    HWND hwnd;\n\n    // TODO verify that this always returns a century year\n    ndate = GLI(LOCALE_SSHORTDATE, NULL, 0);\n    if (ndate == 0)\n        die(\"error getting date string length in uiNewDateTimePicker()\");\n    date = (WCHAR *) malloc(ndate * sizeof (WCHAR));\n    if (GLI(LOCALE_SSHORTDATE, date, ndate) == 0)\n        die(\"error geting date string in uiNewDateTimePicker()\");\n\n    ntime = GLI(LOCALE_STIMEFORMAT, NULL, 0);\n    if (ndate == 0)\n        die(\"error getting time string length in uiNewDateTimePicker()\");\n    time = (WCHAR *) malloc(ntime * sizeof (WCHAR));\n    if (GLI(LOCALE_STIMEFORMAT, time, ntime) == 0)\n        die(\"error geting time string in uiNewDateTimePicker()\");\n\n    n = _scwprintf(L\"%s %s\", date, time);\n    datetime = (WCHAR *) malloc((n + 1) * sizeof (WCHAR));\n    snwprintf(datetime, n + 1, L\"%s %s\", date, time);\n    hwnd = makedtp(0, datetime);\n\n    free(datetime);\n    free(time);\n    free(date);\n\n    return hwnd;\n}\n\nHWND makeDatePicker(void)\n{\n    return makedtp(DTS_SHORTDATECENTURYFORMAT, NULL);\n}\n\nHWND makeTimePicker(void)\n{\n    return makedtp(DTS_TIMEFORMAT, NULL);\n}\n\nstatic void makeWindows(void)\n{\n    mainwin = CreateWindowExW(0,\n        L\"mainwin\", L\"Full Window\",\n        WS_OVERLAPPEDWINDOW,\n        CW_USEDEFAULT, CW_USEDEFAULT,\n        500, 500,\n        NULL, NULL, GetModuleHandle(NULL), NULL);\n\n    dtp1 = makeDateTimePicker();\n    dtp2 = makeDatePicker();\n    dtp3 = makeTimePicker();\n}\n\nvoid initCommonControls(BOOL);\n\nint main(int argc, char *argv[])\n{\n    WNDCLASSW wc;\n    MSG msg;\n    HBRUSH b;\n\n    initCommonControls(TRUE);\n\n    ZeroMemory(&amp;wc, sizeof (WNDCLASSW));\n    wc.lpszClassName = L\"mainwin\";\n    wc.lpfnWndProc = wndProc;\n    wc.hInstance = GetModuleHandle(NULL);\n    wc.hIcon = LoadIconW(NULL, IDI_APPLICATION);\n    wc.hCursor = LoadCursorW(NULL, IDC_ARROW);\n    wc.hbrBackground = (HBRUSH) (COLOR_BTNFACE + 1);\n    RegisterClassW(&amp;wc);\n\n    makeWindows();\n\n    ShowWindow(mainwin, SW_SHOWDEFAULT);\n    UpdateWindow(mainwin);\n\n    while (GetMessageW(&amp;msg, NULL, 0, 0) &gt; 0) {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n    return 0;\n}\n\nstatic const char manifest[] = \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?&gt;\\n&lt;assembly xmlns=\\\"urn:schemas-microsoft-com:asm.v1\\\" manifestVersion=\\\"1.0\\\"&gt;\\n&lt;assemblyIdentity\\n    version=\\\"1.0.0.0\\\"\\n    processorArchitecture=\\\"*\\\"\\n    name=\\\"CompanyName.ProductName.YourApplication\\\"\\n    type=\\\"win32\\\"\\n/&gt;\\n&lt;description&gt;Your application description here.&lt;/description&gt;\\n&lt;dependency&gt;\\n    &lt;dependentAssembly&gt;\\n        &lt;assemblyIdentity\\n            type=\\\"win32\\\"\\n            name=\\\"Microsoft.Windows.Common-Controls\\\"\\n            version=\\\"6.0.0.0\\\"\\n            processorArchitecture=\\\"*\\\"\\n            publicKeyToken=\\\"6595b64144ccf1df\\\"\\n            language=\\\"*\\\"\\n        /&gt;\\n    &lt;/dependentAssembly&gt;\\n&lt;/dependency&gt;\\n&lt;/assembly&gt;\\n\";\n\nstatic ULONG_PTR comctlManifestCookie;\nstatic HMODULE comctl32;\n\nvoid initCommonControls(BOOL comctl6)\n{\n    WCHAR temppath[MAX_PATH + 1];\n    WCHAR filename[MAX_PATH + 1];\n    HANDLE file;\n    DWORD nExpected, nGot;\n    ACTCTX actctx;\n    HANDLE ac;\n    INITCOMMONCONTROLSEX icc;\n    FARPROC f;\n    // this is listed as WINAPI in both Microsoft's and MinGW's headers, but not on MSDN for some reason\n    BOOL (*WINAPI ficc)(const LPINITCOMMONCONTROLSEX);\n\n    if (comctl6) {\n        if (GetTempPathW(MAX_PATH + 1, temppath) == 0)\n            die(\"getting temporary path for writing manifest file\");\n        if (GetTempFileNameW(temppath, L\"manifest\", 0, filename) == 0)\n            die(\"getting temporary filename for writing manifest file\");\n        file = CreateFileW(filename, GENERIC_WRITE,\n            0,          // don't share while writing\n            NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);\n        if (file == NULL)\n            die(\"creating manifest file\");\n        nExpected = (sizeof manifest / sizeof manifest[0]) - 1;     // - 1 to omit the terminating null character)\n        if (WriteFile(file, manifest, nExpected, &amp;nGot, NULL) == 0)\n            die(\"writing manifest file\");\n        if (nGot != nExpected)\n            die(\"short write to manifest file\");\n        if (CloseHandle(file) == 0)\n            die(\"closing manifest file (this IS an error here because not doing so will prevent Windows from being able to use the manifest file in an activation context)\");\n\n        ZeroMemory(&amp;actctx, sizeof (ACTCTX));\n        actctx.cbSize = sizeof (ACTCTX);\n        actctx.dwFlags = ACTCTX_FLAG_SET_PROCESS_DEFAULT;\n        actctx.lpSource = filename;\n        ac = CreateActCtx(&amp;actctx);\n        if (ac == INVALID_HANDLE_VALUE)\n            die(\"creating activation context for synthesized manifest file\");\n        if (ActivateActCtx(ac, &amp;comctlManifestCookie) == FALSE)\n            die(\"activating activation context for synthesized manifest file\");\n    }\n\n    ZeroMemory(&amp;icc, sizeof (INITCOMMONCONTROLSEX));\n    icc.dwSize = sizeof (INITCOMMONCONTROLSEX);\n    icc.dwICC = ICC_STANDARD_CLASSES | ICC_PROGRESS_CLASS | ICC_TAB_CLASSES | ICC_LISTVIEW_CLASSES | ICC_UPDOWN_CLASS | ICC_BAR_CLASSES | ICC_DATE_CLASSES;\n\n    comctl32 = LoadLibraryW(L\"comctl32.dll\");\n    if (comctl32 == NULL)\n        die(\"loading comctl32.dll\");\n    f = GetProcAddress(comctl32, \"InitCommonControlsEx\");\n    if (f == NULL)\n        die(\"loading InitCommonControlsEx()\");\n    ficc = (BOOL (*WINAPI)(const LPINITCOMMONCONTROLSEX)) f;\n    if ((*ficc)(&amp;icc) == FALSE)\n        die(\"initializing Common Controls (comctl32.dll)\");\n}\n</code></pre>\n"}, {"tags": ["c", "networking", "kernel"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1433360575, "post_id": 30626503, "comment_id": 49324233, "body": "So, basically, you want to rewrite the entire network stack in your module? That&#39;s a rather large project...."}, {"owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1433375366, "post_id": 30626503, "comment_id": 49331046, "body": "The purpose is not tout rewrite the entire network stack, but just to try some things to understand how it&#39;s done ;)"}], "owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433767832, "creation_date": 1433351420, "last_edit_date": 1433767832, "question_id": 30626503, "link": "https://stackoverflow.com/questions/30626503/how-to-manually-manage-packet-received-by-device-in-kernel", "title": "How to manually manage packet received by device in Kernel", "body": "<p>I would like to know how I could manually manage each packets received by a specific net device in the Kernel ? I do not want to use a socket, neither let the Kernel unpack them for me, or manage them for me. For example, if an ICMP packet comes, I would send an answer with my own module.</p>\n"}, {"tags": ["c", "string", "file", "random", "io"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1433351596, "post_id": 30626477, "comment_id": 49318940, "body": "Welcome to Stack Overflow! Please take some time to read the <a href=\"https://stackoverflow.com/tour\">tour</a>. Consider a title that better explains your problem. Your #2 is because <code>strlen</code> needs <code>string.h</code> included."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4937557, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LsTqqJZnbUk/AAAAAAAAAAI/AAAAAAAAALQ/7m9ybkDljE8/photo.jpg?sz=128", "display_name": "Theavengingknee", "link": "https://stackoverflow.com/users/4937557/theavengingknee"}, "edited": false, "score": 0, "creation_date": 1433352757, "post_id": 30626610, "comment_id": 49319630, "body": "I am a little confused on what you are reffering to with where the \\0a should be. this is on a linux client."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 11, "user_id": 4937557, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LsTqqJZnbUk/AAAAAAAAAAI/AAAAAAAAALQ/7m9ybkDljE8/photo.jpg?sz=128", "display_name": "Theavengingknee", "link": "https://stackoverflow.com/users/4937557/theavengingknee"}, "edited": false, "score": 0, "creation_date": 1433407495, "post_id": 30626610, "comment_id": 49342539, "body": "should have been &#39;\\x0a&#39;  of course ... it&#39;s the newline character itself (the same as &#39;\\n&#39;). Look at the updates answer. I hope it&#39;s clear now"}], "tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": false, "score": 1, "last_activity_date": 1433407491, "last_edit_date": 1433407491, "creation_date": 1433351750, "answer_id": 30626610, "question_id": 30626477, "link": "https://stackoverflow.com/questions/30626477/c-program-to-get-file-name-and-range-of-numbers-from-user-generate-numbers-from/30626610#30626610", "title": "C Program to get file name and range of numbers from user generate numbers from a specified range and print to file", "body": "<ul>\n<li><p>concerning the file name: remove the newline character <code>'\\n'</code> (or <code>'\\x0a'</code>) at the end of <code>s</code> after <code>fgets()</code>:</p>\n\n<pre><code>if( s[strlen(s)-1] == '\\n' )\n     s[strlen(s)-1] = '\\0';\n</code></pre>\n\n<p>for completeness: on windows you had to remove carriage return + newline <code>'\\r'</code>+<code>'\\n'</code> (or <code>'\\x0d'</code>+<code>'\\x0a'</code>)</p></li>\n<li>concerning the wrong numbers: it should be <code>x = (rand() % a) + l;</code> (modulus range + lowest, not the other way round)</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 4937557, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LsTqqJZnbUk/AAAAAAAAAAI/AAAAAAAAALQ/7m9ybkDljE8/photo.jpg?sz=128", "display_name": "Theavengingknee", "link": "https://stackoverflow.com/users/4937557/theavengingknee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433407491, "creation_date": 1433351358, "last_edit_date": 1433351537, "question_id": 30626477, "link": "https://stackoverflow.com/questions/30626477/c-program-to-get-file-name-and-range-of-numbers-from-user-generate-numbers-from", "title": "C Program to get file name and range of numbers from user generate numbers from a specified range and print to file", "body": "<p>I am writing a program to get a few things from the user and then write the results to a file. The program will get the file name, number of numbers to generate, the lowest and highest numbers to be generate, then write it all to a file that is named by the user.</p>\n\n<p>The program is doing two things that are not correct:</p>\n\n<ol>\n<li><p>it is generating numbers outside the user specified range</p></li>\n<li><p>it is adding a ? to the end of the file name, I tried using strlen to remove the last character of the string but I get and error: incompatible implicit declaration of built-in function 'strlen'.</p></li>\n</ol>\n\n<p></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n char s[100];\n FILE *fout;\n int i, x, len;\n int h, l, q, a;\n\n printf(\"Please enter the file name: \");\n fgets(s, sizeof(s), stdin);\n printf(\"How many numbers should we generate: \");\n scanf(\"%d\", &amp;q);\n printf(\"lowest number to generate: \");\n scanf(\"%d\", &amp;l);\n printf(\"Highest number to generate: \");\n scanf(\"%d\", &amp;h);\n\n fout = fopen(s, \"wb\");\n\n a = h - l;\n\n if ( fout == NULL)\n {\n  printf(\"That file is not available\\n\");\n  exit(1);\n }\n\n fprintf(fout, \"%d\\n\", q);\n\n for (i=0; i &lt; q; ++i) \n {\n  x = (rand() % l) + a;\n  fprintf(fout, \"%d \", x);\n }\n\nfclose(fout);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433351431, "post_id": 30626391, "comment_id": 49318834, "body": "This is environment/OS specific.  Common Desktop/Server OS are very good at cleaning up after process termination, no matter how caused."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433351510, "post_id": 30626391, "comment_id": 49318890, "body": "So... which OS/environment?"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1433351585, "post_id": 30626391, "comment_id": 49318936, "body": "Might want to read about virtual memory as well."}, {"owner": {"reputation": 136, "user_id": 4936024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/G9uc6.jpg?s=128&g=1", "display_name": "Kunal Saini", "link": "https://stackoverflow.com/users/4936024/kunal-saini"}, "edited": false, "score": 0, "creation_date": 1433356193, "post_id": 30626391, "comment_id": 49321685, "body": "<a href=\"http://stackoverflow.com/questions/654754/what-really-happens-when-you-dont-free-after-malloc\" title=\"what really happens when you dont free after malloc\">stackoverflow.com/questions/654754/&hellip;</a>    This will solve your problem to a large extent"}], "answers": [{"tags": [], "owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "is_accepted": false, "score": 0, "last_activity_date": 1433353101, "last_edit_date": 1433353101, "creation_date": 1433351748, "answer_id": 30626609, "question_id": 30626391, "link": "https://stackoverflow.com/questions/30626391/ownership-of-dynamic-allocated-memory/30626609#30626609", "title": "ownership of dynamic allocated memory", "body": "<p>On linux, as long as the process terminated, all its memory will be freed, for reuse.</p>\n\n<p>If your program runs long term(e.g shell or web server daemon), you should free every piece of memory by hand, otherwise, as time goes the limit of memory might be reached, and you can no long allocate memory.</p>\n\n<p>If your program runs very short, you can leave the free job be done automatically when process terminate. Actually, free() itself also takes time, so this would save some machine resource, even though it's strongly not suggested.</p>\n\n<p>free() every piece of memory by hand, also improve your maintainabiliy &amp; readability of your project for long term.</p>\n"}, {"tags": [], "owner": {"reputation": 1400, "user_id": 4970622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8sl2.jpg?s=128&g=1", "display_name": "Samurai Jack", "link": "https://stackoverflow.com/users/4970622/samurai-jack"}, "is_accepted": false, "score": 0, "last_activity_date": 1433352256, "creation_date": 1433352256, "answer_id": 30626763, "question_id": 30626391, "link": "https://stackoverflow.com/questions/30626391/ownership-of-dynamic-allocated-memory/30626763#30626763", "title": "ownership of dynamic allocated memory", "body": "<p>referred :  <a href=\"http://www.gnu.org/software/libc/manual/html_node/Freeing-after-Malloc.html\" rel=\"nofollow\">GNU libc manual page for free()</a></p>\n\n<p>So, according to libc manual</p>\n\n<p><strong>There is no point in freeing blocks at the end of a program, because all of the program\u2019s space is given back to the system when the process terminates.</strong></p>\n\n<p>So even if your program crashed, memory will be freed and given back to system</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 4936024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/G9uc6.jpg?s=128&g=1", "display_name": "Kunal Saini", "link": "https://stackoverflow.com/users/4936024/kunal-saini"}, "is_accepted": true, "score": 1, "last_activity_date": 1433356621, "last_edit_date": 1495540710, "creation_date": 1433356621, "answer_id": 30628030, "question_id": 30626391, "link": "https://stackoverflow.com/questions/30626391/ownership-of-dynamic-allocated-memory/30628030#30628030", "title": "ownership of dynamic allocated memory", "body": "<p><a href=\"https://stackoverflow.com/questions/654754/what-really-happens-when-you-dont-free-after-malloc\">Memory Deallocation And Allocation</a></p>\n\n<p>This link will help you to a great extent to solve your problem</p>\n\n<p>The text below is from the above mentioned link:-</p>\n\n<p>Just about every modern operating system will recover all the allocated memory space after a program exits. The only exception I can think of might be something like Palm OS where the program's static storage and runtime memory are pretty much the same thing, so not freeing might cause the program to take up more storage. (I'm only speculating here.)</p>\n\n<p>So generally, there's no harm in it, except the runtime cost of having more storage than you need. Certainly in the example you give, you want to keep the memory for a variable that might be used until it's cleared.</p>\n\n<p>However, it's considered good style to free memory as soon as you don't need it any more, and to free anything you still have around on program exit. It's more of an exercise in knowing what memory you're using, and thinking about whether you still need it. If you don't keep track, you might have memory leaks.</p>\n\n<p>On the other hand, the similar admonition to close your files on exit has a much more concrete result - if you don't, the data you wrote to them might not get flushed, or if they're a temp file, they might not get deleted when you're done. Also, database handles should have their transactions committed and then closed when you're done with them. Similarly, if you're using an object oriented language like C++ or Objective C, not freeing an object when you're done with it will mean the destructor will never get called, and any resources the class is responsible might not get cleaned up.</p>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 30628030, "answer_count": 3, "score": 0, "last_activity_date": 1433356621, "creation_date": 1433351039, "question_id": 30626391, "link": "https://stackoverflow.com/questions/30626391/ownership-of-dynamic-allocated-memory", "title": "ownership of dynamic allocated memory", "body": "<p>What is the ownership of the dynamic allocated memory?</p>\n\n<p>For example, in one program dynamic allocate memory like this:</p>\n\n<pre><code>int main()\n{\n   int * p = malloc(10 * sizeof(int));\n\n   return 0;\n} \n</code></pre>\n\n<p>1) if this program exit, then will the memory pointed by <code>p</code> be <code>freed()</code>?\n   I think the answer will be, it will not be freed automatically.</p>\n\n<p>2) if this program crash, then will the memory pointed by <code>p</code> be <code>freed()</code>?</p>\n"}, {"tags": ["c", "arrays", "variables"], "comments": [{"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 1, "creation_date": 1433350697, "post_id": 30626258, "comment_id": 49318358, "body": "What&#39;s your question?"}, {"owner": {"reputation": 3, "user_id": 4566308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5bEc-H6yLmc/AAAAAAAAAAI/AAAAAAAAAi8/l_Y6TPoXo6A/photo.jpg?sz=128", "display_name": "Tan Yi Qian", "link": "https://stackoverflow.com/users/4566308/tan-yi-qian"}, "reply_to_user": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433350786, "post_id": 30626258, "comment_id": 49318430, "body": "Haha just corrected that mistake. Need to know how to put the data from a variable into an array."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433351156, "post_id": 30626258, "comment_id": 49318655, "body": "What problem are you experiencing?  Is it not compiling?  Post the compiler error.  Is it crashing?  Is it giving an incorrect result?  What&#39;s the expected and the observed behavior?"}, {"owner": {"reputation": 3, "user_id": 4566308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5bEc-H6yLmc/AAAAAAAAAAI/AAAAAAAAAi8/l_Y6TPoXo6A/photo.jpg?sz=128", "display_name": "Tan Yi Qian", "link": "https://stackoverflow.com/users/4566308/tan-yi-qian"}, "reply_to_user": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433351371, "post_id": 30626258, "comment_id": 49318798, "body": "Right.. Probably should have placed that in too what&#39;s the problem that I am facing.. Umm it&#39;s not giving me my desired result. Basically say &quot;AG001&quot; is currently stored under the variable &quot;itemCode&quot;, I want to move that into an array."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433351372, "post_id": 30626258, "comment_id": 49318799, "body": "Also, you need to post the declaration of &quot;taxitems&quot; array.  It&#39;s impossible to deduce what is going wrong just from your &quot;//HERE&#39;S WHERE I NEED HELP&quot; comment."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4566308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5bEc-H6yLmc/AAAAAAAAAAI/AAAAAAAAAi8/l_Y6TPoXo6A/photo.jpg?sz=128", "display_name": "Tan Yi Qian", "link": "https://stackoverflow.com/users/4566308/tan-yi-qian"}, "edited": false, "score": 0, "creation_date": 1433411315, "post_id": 30626778, "comment_id": 49345227, "body": "Thanks ! This helped !"}], "tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": true, "score": 0, "last_activity_date": 1433352287, "creation_date": 1433352287, "answer_id": 30626778, "question_id": 30626258, "link": "https://stackoverflow.com/questions/30626258/putting-data-from-a-variable-into-an-array/30626778#30626778", "title": "Putting data from a variable into an array", "body": "<pre><code>taxitems[0][i] = itemCode[i];\n</code></pre>\n\n<p>You can't copy char arrays with simple assignment.  You need to use the strcpy() function instead.</p>\n\n<pre><code>strcpy( taxitems[0][i], itemcode[i], strlen(itemcode[i]);\n</code></pre>\n\n<p>You will need to add </p>\n\n<pre><code>#include &lt;string.h&gt; \n</code></pre>\n\n<p>to your code.  You can find the reference to strcpy() function <a href=\"http://www.cplusplus.com/reference/cstring/strcpy/\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 3, "user_id": 4566308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5bEc-H6yLmc/AAAAAAAAAAI/AAAAAAAAAi8/l_Y6TPoXo6A/photo.jpg?sz=128", "display_name": "Tan Yi Qian", "link": "https://stackoverflow.com/users/4566308/tan-yi-qian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 30626778, "answer_count": 1, "score": -1, "last_activity_date": 1433354541, "creation_date": 1433350647, "last_edit_date": 1433354541, "question_id": 30626258, "link": "https://stackoverflow.com/questions/30626258/putting-data-from-a-variable-into-an-array", "title": "Putting data from a variable into an array", "body": "<p>Hello good people of Stack Overflow. Need some help with my code. I am basically trying to put the data that is stored in the variables itemCode, itemName, pricepu, and stock into array and I have NO IDEA how to do so..</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;math.h&gt;\n\n#define totalitems 20\n#define maxitems 300\n\nvoid mainmenu(void);\nvoid alt_menu(void);\nvoid purchase(void);\nvoid edit_item(void);\nvoid update_item(void);\nvoid del_item(void);\nvoid shw_item(void);\nvoid invent_menu(void);\nvoid alt_invent_menu(void);\nvoid daily_trans(void);\nvoid exit_escape(void);\nvoid back_inventmenu(void);\nvoid back_menu(void);\nvoid gst_array(void);\n\n\nchar invent_back, back;                         //global declarations\nchar input, newinput;\nchar *barcode;\nchar taxitems[20][20];\nchar ntaxitems[20][20];\n\n\nchar line[2048];\nchar *itemCode[20][20];\nchar itemName[20][20];\nunsigned char pricepu[10][20];\nchar stock[10][20];\n\nint i, ret, quantpurchase;\ndouble total;\n\nvoid purchase() {\n    char exitcode[] = \"-1\";\n    barcode = (char*) malloc(5);\n\n    printf(\" Please key in the barcode number of the product: \");\n    scanf(\" %s\", barcode);\n\n\n    while(strcmp(exitcode, barcode) != '\\0') {\n\n        double priceint;\n        FILE *gst = fopen(\"gst.txt\", \"r\");\n        FILE *ngst = fopen(\"ngst.txt\", \"r\");\n\n        printf(\"\\n\");\n        printf(\"\\n Item Code Entered: %s\\n\", barcode);\n        while(fgets(line, sizeof(line), gst) != NULL) { //while fgets does not fail to scan a line\n            if(sscanf(line, \"%[^;];%[^;];%[^;];%[^;]\", itemCode, itemName, pricepu, stock) != 4) { \n                //If sscanf failed to scan everything from the scanned line\n                //%[^;] scans everything until a ';'\n                printf(\"Bad line detected\\n\");\n                exit(-1);                          //Exit the program\n            }\n\n            for (i=0; i &lt; totalitems; i++) {\n                if (strcmp(itemCode[i], barcode) == '\\0') {\n                    printf(\"\\n\");\n                    printf(\" Item Found.\\n\");\n                    printf(\"\\n\");\n                    printf(\"===========================================================================\\n\");\n                    printf(\" Item code\\t Item name \\t\\t\\tPrice\\t    Stock Available \\n\");\n                    printf(\"===========================================================================\\n\");\n                    printf(\" %-10s\\t %-16s\\t\\t%s\\t    %s\\n\", itemCode, itemName, pricepu, stock);\n                    printf(\"\\n\");\n                    printf(\"\\n\");\n\n                    priceint = strtod(pricepu, (char **)NULL);\n\n                    printf(\" How many would you like: \");\n                    scanf(\"%d\", &amp;quantpurchase);\n\n                    total = priceint * quantpurchase;\n                    printf(\" %.2lf\\n\", total);\n\n                    for (i=0; i&lt;maxitems; i++) {\n                        taxitems[0][i] = itemCode[i];\n                        printf(\" %s\", taxitems[0][0]); //HERE'S WHERE I NEED HELP\n                    }\n                    purchase();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>It's not giving me my desired result. Basically say \"AG001\" is currently stored under the variable \"itemCode\", I want to move that into an array. Appreciate all the help I can get. Thanks.</p>\n"}, {"tags": ["c", "coupling", "cohesion"], "comments": [{"owner": {"reputation": 16309, "user_id": 247763, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1bc88bb482be923525ecc7ab10066413?s=128&d=identicon&r=PG", "display_name": "derekerdmann", "link": "https://stackoverflow.com/users/247763/derekerdmann"}, "edited": false, "score": 0, "creation_date": 1433350915, "post_id": 30626180, "comment_id": 49318508, "body": "Coupling and cohesion usually refer to software components on a much larger scale, not the contracts of individual functions. Analyzing scanf this way doesn&#39;t contribute much; consider instead how your own classes and modules rely on each other or can perform their tasks in isolation."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433352657, "post_id": 30626180, "comment_id": 49319567, "body": "Detail:  <code>scanf()</code> normally does not take inputs types like <code>float</code> and <code>char</code>.  It does take input types like   <code>float *</code> and <code>char *</code>."}], "answers": [{"tags": [], "owner": {"reputation": 15167, "user_id": 16827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/xMFTQ.png?s=128&g=1", "display_name": "Remo.D", "link": "https://stackoverflow.com/users/16827/remo-d"}, "is_accepted": false, "score": 2, "last_activity_date": 1433355208, "creation_date": 1433355208, "answer_id": 30627646, "question_id": 30626180, "link": "https://stackoverflow.com/questions/30626180/is-scanf-cohesive-or-coupled/30627646#30627646", "title": "Is scanf cohesive or coupled?", "body": "<p>As the word suggests, I would say that you can only discuss <em>coupling</em> if you have at least <em>two</em> elements involved.</p>\n\n<p>Saying that <code>scanf()</code>, by itself, is coupled, does not make much sense to me.</p>\n\n<p>Given two modules (two functions, two classes, ...) they may be more or less \"coupled\" depending on how much one depends on the other.</p>\n\n<p>For example, they may share a global variable or (a file) so that if one alters it, the other is affected too.  Or they must be called in a certain order (or they won't work).</p>\n\n<p>Too tight coupling is a bad thing from a maintenance perspective, you may change something in a module and later discover that you introduced a bug in another module! </p>\n\n<p>From this perspective I can't think of any function in the standard C library on which <code>scanf()</code> may depend. But even if there were one it would be a problem for the standard library mainteners, not for programmers.</p>\n\n<p>Cohesion, instead, refers to the fact that a module (again: a function, a class, ...) performs a single, identified task. The worst you can have is when you have a function that performs two (or more) unrelated tasks just because they <em>can</em> be performed at the same time. For example you have a function that computes the average of a set of numbers <em>and</em> cleans up the directory where you will store the results.\nThis is bad from a clarity point of view (and hence, you are increasing the chance of bugs) and from a reuse point of view (little chance you will ever call that function again in the program).</p>\n\n<p>As far as I can tell, <code>scanf()</code> does a single job (reading a set of values from stdin according a pattern) and does it well.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433355208, "creation_date": 1433350394, "question_id": 30626180, "link": "https://stackoverflow.com/questions/30626180/is-scanf-cohesive-or-coupled", "title": "Is scanf cohesive or coupled?", "body": "<p>I came to know that scanf is coupled and it is coupled because it takes different types of inputs like integer, float, char and others.</p>\n\n<p>But cohesion indicates doing a single task and scanf does it(scanning input from stdin).</p>\n\n<p>I agree that although it does the desired task of reading, it lack cohesion in the form reading different types of data.</p>\n\n<p>But how does reading different types of data indicate it is coupled? I saw that coupling is a degree to which a component/module is connected to the other modules or independence of modules. How does reading different types of data make it dependent?</p>\n\n<p>Can anyone explain how can we say a function is coupled or cohesive and is scanf coupled or cohesive?</p>\n"}, {"tags": ["c", "arrays", "string"], "answers": [{"comments": [{"owner": {"reputation": 8382, "user_id": 398461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ixu8F.jpg?s=128&g=1", "display_name": "wcochran", "link": "https://stackoverflow.com/users/398461/wcochran"}, "edited": false, "score": 1, "creation_date": 1433350412, "post_id": 30626154, "comment_id": 49318221, "body": "Yep. Try <code>char *str = strdup(&quot;abc&quot;);</code> to get a mutatable string."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 75, "user_id": 2717002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4T5qu.jpg?s=128&g=1", "display_name": "Mohammed Raqeeb", "link": "https://stackoverflow.com/users/2717002/mohammed-raqeeb"}, "edited": false, "score": 0, "creation_date": 1433397222, "post_id": 30626154, "comment_id": 49336790, "body": "@MohammedRaqeeb Remember that <code>strdup</code> allocates memory that you need to <code>free</code>!"}, {"owner": {"reputation": 75, "user_id": 2717002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4T5qu.jpg?s=128&g=1", "display_name": "Mohammed Raqeeb", "link": "https://stackoverflow.com/users/2717002/mohammed-raqeeb"}, "edited": false, "score": 0, "creation_date": 1433421012, "post_id": 30626154, "comment_id": 49351715, "body": "@JoachimPileborg Thanks for pointing it out, just went through the man page of strdup(), we indeed need to explicitly free the memory as it is allocated on heap."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1433350310, "creation_date": 1433350310, "answer_id": 30626154, "question_id": 30626127, "link": "https://stackoverflow.com/questions/30626127/swapping-elements-of-a-char-array-works-but-swapping-elements-of-a-char-string-l/30626154#30626154", "title": "Swapping elements of a char array works but swapping elements of a char string leads to core dump", "body": "<p>String literals are <em>read-only</em>, trying to modify a string literal leads to <em>undefined behavior</em>.</p>\n\n<p>Simplest solution? Declare it as an array instead:</p>\n\n<pre><code>char str[] = \"abc\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 2717002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4T5qu.jpg?s=128&g=1", "display_name": "Mohammed Raqeeb", "link": "https://stackoverflow.com/users/2717002/mohammed-raqeeb"}, "edited": false, "score": 0, "creation_date": 1433392321, "post_id": 30626512, "comment_id": 49335069, "body": "..Thanks. Does it mean the char string (allocated memory in .rdata section) will have global scope (not sure if it would be global or static) if in case it does."}], "tags": [], "owner": {"reputation": 1400, "user_id": 4970622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8sl2.jpg?s=128&g=1", "display_name": "Samurai Jack", "link": "https://stackoverflow.com/users/4970622/samurai-jack"}, "is_accepted": true, "score": 0, "last_activity_date": 1433351455, "creation_date": 1433351455, "answer_id": 30626512, "question_id": 30626127, "link": "https://stackoverflow.com/questions/30626127/swapping-elements-of-a-char-array-works-but-swapping-elements-of-a-char-string-l/30626512#30626512", "title": "Swapping elements of a char array works but swapping elements of a char string leads to core dump", "body": "<pre><code>char *str = \"abc\";\n</code></pre>\n\n<p>Above puts the string in the constant data section (also known as .rdata) of the program.As this is treated as constant data, it can not be modified </p>\n\n<pre><code>char str[] = \"abc\";\n</code></pre>\n\n<p>Above puts the string in the stack area of the program, as declared inside the function scope.This data can be modified.</p>\n\n<p>As this is about the storage of string data, you are getting Crash in first declaration.</p>\n"}, {"tags": [], "owner": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "is_accepted": false, "score": 0, "last_activity_date": 1433398501, "creation_date": 1433398501, "answer_id": 30636265, "question_id": 30626127, "link": "https://stackoverflow.com/questions/30626127/swapping-elements-of-a-char-array-works-but-swapping-elements-of-a-char-string-l/30636265#30636265", "title": "Swapping elements of a char array works but swapping elements of a char string leads to core dump", "body": "<p>'char *str = \"abc\";'\nThe above places the abc in read only memory. So it cannot be modified.\n'char str[]=\"abc\";' is placed in stack. so it can be modified.</p>\n"}], "owner": {"reputation": 75, "user_id": 2717002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4T5qu.jpg?s=128&g=1", "display_name": "Mohammed Raqeeb", "link": "https://stackoverflow.com/users/2717002/mohammed-raqeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 30626512, "answer_count": 3, "score": 2, "last_activity_date": 1433398501, "creation_date": 1433350214, "question_id": 30626127, "link": "https://stackoverflow.com/questions/30626127/swapping-elements-of-a-char-array-works-but-swapping-elements-of-a-char-string-l", "title": "Swapping elements of a char array works but swapping elements of a char string leads to core dump", "body": "<p>I am trying to perform swap operation as shown in below program, but it seems to crash when I am copying the element b into a (line 3 in swap() method) - this happens if the input is a char string i.e, char *str;  If it is a character array instead (as in char str[];) the swap operation works fine. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid swap(char *a, char *b)\n{\n  char tmp;\n  tmp = *a;\n  *a = *b;       /* crash occurs here */\n  *b = tmp;\n}\n\nvoid func(char *a)\n{\n  swap(a+1, a+2);\n}\n\nint main()\n{\n  char *str = \"abc\";\n\n  // char str[] = \"abc\";   /* with this char array, the above swap func works */  \n\n  func(str);\n}\n</code></pre>\n\n<p>I think this is related to some C string rules that I seem to be unaware of. Please help! </p>\n"}, {"tags": ["c", "arrays", "char", "unsigned", "calloc"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1433349223, "post_id": 30625807, "comment_id": 49317523, "body": "should be <code>newmatriz=calloc(width, sizeof(unsigned char*))</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433349226, "post_id": 30625807, "comment_id": 49317524, "body": "Do <b>not</b> cast <code>void *</code> as returned by <code>calloc()</code>&amp;friends. Also: do not use <code>sizeof(char)</code> (signed/unsigned the same). That will never be different than 1, as that&#39;s what is is explicitly defined to yield by the standard."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1433349502, "post_id": 30625807, "comment_id": 49317693, "body": "The code is missing an asterisk (see BLUEPIXY&#39;s comment). Voting to close as a typo."}, {"owner": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "edited": false, "score": 0, "creation_date": 1433349603, "post_id": 30625807, "comment_id": 49317741, "body": "I removed the cast from calloc, still getting the same error in fact, I get this warning when compiling: filtrodefinitivo.c:298:29: warning: assignment makes pointer from integer without a cast [enabled by default]              if (newmatriz[j]=calloc(width, sizeof(unsigned char)) == NULL){"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1433349961, "post_id": 30625807, "comment_id": 49317953, "body": "@user3055867, that&#39;s a good reason not to explicitly cast the return value of <code>malloc</code> family of functions. You were hiding a problem by using explicit cast."}, {"owner": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "edited": false, "score": 0, "creation_date": 1433350198, "post_id": 30625807, "comment_id": 49318096, "body": "It&#39;s already included."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1433350208, "post_id": 30625807, "comment_id": 49318105, "body": "... and if it&#39;s not the typo that causes the error it might very well be the missing include. Btw.: Have you edited your question because you haven&#39;t had the typo in the original code? The problem is, that the answers now don&#39;t make sense anymore"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1433350511, "post_id": 30625807, "comment_id": 49318267, "body": "<code>if (newmatriz[j]=calloc(width, sizeof(unsigned char)) == NULL){</code> shoud be <code>if ((newmatriz[j]=calloc(width, sizeof(unsigned char))) == NULL){ </code>"}, {"owner": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "edited": false, "score": 0, "creation_date": 1433350766, "post_id": 30625807, "comment_id": 49318412, "body": "I did rollback on the code, sorry. And thanks to all, was a brackets problem! Neverminded"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "edited": false, "score": 0, "creation_date": 1433349991, "post_id": 30625988, "comment_id": 49317972, "body": "I have also tried that before and now but still doesn&#39;t working."}, {"owner": {"reputation": 1099, "user_id": 722634, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fece74c7785ec500d6c3fe8068f23616?s=128&d=identicon&r=PG", "display_name": "ceorron", "link": "https://stackoverflow.com/users/722634/ceorron"}, "reply_to_user": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "edited": false, "score": 0, "creation_date": 1433350192, "post_id": 30625988, "comment_id": 49318094, "body": "Should work so long as you don&#39;t run out of memory, which you are testing for."}], "tags": [], "owner": {"reputation": 1099, "user_id": 722634, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fece74c7785ec500d6c3fe8068f23616?s=128&d=identicon&r=PG", "display_name": "ceorron", "link": "https://stackoverflow.com/users/722634/ceorron"}, "is_accepted": false, "score": 1, "last_activity_date": 1433349756, "creation_date": 1433349756, "answer_id": 30625988, "question_id": 30625807, "link": "https://stackoverflow.com/questions/30625807/segmentation-fault-in-2d-array-unsigned-char-using-calloc-in-c/30625988#30625988", "title": "Segmentation fault in 2D array unsigned char using calloc in C", "body": "<p>The answer is simple newmatriz is an array (aka pointer) to unsigned char* you are allocation unsigned char simply change the top line to allocate the correctly sized array, in this case you want an array of byte size <code>width*sizeof(unsigned char*)</code> not <code>width*sizeof(unsigned char)</code> as you currently have it.</p>\n\n<pre><code>newmatriz = (unsigned char**) calloc(width, sizeof(unsigned char*));\nfor (j=0 ; j &lt; width; j++){\n    if (newmatriz[j]=(unsigned char*)calloc(witdh, sizeof(unsigned char)) == NULL){\n       printf(\"Memory allocation error. Exit program\\n\");\n        exit(1);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "edited": false, "score": 0, "creation_date": 1433350040, "post_id": 30626049, "comment_id": 49317992, "body": "Hi, the pointer was fixing, the loops are just for checking the access to the matrix, but I get segmentation fault."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "edited": false, "score": 0, "creation_date": 1433350266, "post_id": 30626049, "comment_id": 49318142, "body": "@user3055867 See my updated post. Next time please try to copy and paste at least a compiled example that demonstrates the problem."}, {"owner": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "edited": false, "score": 0, "creation_date": 1433350746, "post_id": 30626049, "comment_id": 49318391, "body": "Thanks!! That was the error!! Now it compiles with no warnings and seems to work !"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "edited": false, "score": 1, "creation_date": 1433350819, "post_id": 30626049, "comment_id": 49318452, "body": "@user3055867 You should always pay attention to warnings."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1433350546, "last_edit_date": 1433350546, "creation_date": 1433349967, "answer_id": 30626049, "question_id": 30625807, "link": "https://stackoverflow.com/questions/30625807/segmentation-fault-in-2d-array-unsigned-char-using-calloc-in-c/30626049#30626049", "title": "Segmentation fault in 2D array unsigned char using calloc in C", "body": "<p>There is a typo in this statement. Instead of <code>sizeof( unsigned char )</code> you have to use <code>sizeof( unsigned char * )</code></p>\n\n<pre><code>newmatriz = (unsigned char**) calloc(width, sizeof(unsigned char *));\n                                                            ^^^^^^\n</code></pre>\n\n<p>Also this if statement is incorrect</p>\n\n<pre><code>if ( newmatriz[j] = calloc(witdh, sizeof(unsigned char) ) == NULL){\n</code></pre>\n\n<p>In this statement <code>newmatriz[j]</code> is set either to 1 or 0 depending on whether the memory allocation was successfull or not.</p>\n\n<p>I think you mean</p>\n\n<pre><code>if ( ( newmatriz[j] = calloc(witdh, sizeof(unsigned char) ) ) == NULL){\n</code></pre>\n\n<p>And these loops</p>\n\n<pre><code>for (i=0;i&lt;width;i++)\n{\n    for(j=0;j&lt;width;j++)\n    {\n        newmatriz[i][j] = 0;\n    }\n}\n</code></pre>\n\n<p>do not make sense because <code>calloc</code> already initialized the allocated memory by zeroes.</p>\n"}, {"tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": false, "score": 0, "last_activity_date": 1433350548, "creation_date": 1433350548, "answer_id": 30626230, "question_id": 30625807, "link": "https://stackoverflow.com/questions/30625807/segmentation-fault-in-2d-array-unsigned-char-using-calloc-in-c/30626230#30626230", "title": "Segmentation fault in 2D array unsigned char using calloc in C", "body": "<p>In the second <code>calloc()</code> there are some brackets missing:</p>\n\n<pre><code>if (newmatriz[j] = calloc(witdh, sizeof(unsigned char)) == NULL){\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>if ((newmatriz[j] = calloc(witdh, sizeof(unsigned char))) == NULL){\n</code></pre>\n\n<p>Without that, <code>calloc()</code>s result is compared with NULL and the result of the comparison instead of the pointer is stored in <code>newmatriz[j]</code></p>\n"}], "owner": {"reputation": 55, "user_id": 3055867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0056843b75ab1d859696ae11914637ac?s=128&d=identicon&r=PG&f=1", "display_name": "user3055867", "link": "https://stackoverflow.com/users/3055867/user3055867"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 30626049, "answer_count": 3, "score": 1, "last_activity_date": 1433350619, "creation_date": 1433349140, "last_edit_date": 1433350619, "question_id": 30625807, "link": "https://stackoverflow.com/questions/30625807/segmentation-fault-in-2d-array-unsigned-char-using-calloc-in-c", "title": "Segmentation fault in 2D array unsigned char using calloc in C", "body": "<p>I've trying to allocate an <code>unsigned char**</code> using <strong>calloc</strong>:</p>\n\n<pre><code>newmatriz = (unsigned char**) calloc(width, sizeof(unsigned char));\n\nfor (j=0 ; j &lt; width; j++)\n{\n    if (newmatriz[j]=(unsigned char*)calloc(witdh, sizeof(unsigned char)) == NULL){\n        printf(\"Memory allocation error. Exit program\\n\");\n        exit(1);\n    }\n}\n\nfor (i=0;i&lt;width;i++)\n{\n    for(j=0;j&lt;width;j++)\n    {\n        newmatriz[i][j] = 0;\n    }\n}\n</code></pre>\n\n<p>But I get segmentation fault when I'm trying to acces the pos [i][j] </p>\n\n<p>Is problem be related to the use int as iterator?</p>\n"}, {"tags": ["c", "linux", "unix", "ls", "bin"], "answers": [{"tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 2, "last_activity_date": 1433349134, "creation_date": 1433349134, "answer_id": 30625802, "question_id": 30625771, "link": "https://stackoverflow.com/questions/30625771/what-is-the-address-from-which-bin-ls-program-execution-starts/30625802#30625802", "title": "What is the address from which /bin/ls program execution starts?", "body": "<p>That would be platform dependent. For a recent system, that should actually be randomized.</p>\n"}], "owner": {"reputation": 83, "user_id": 4968522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74dc1e080e9cb836f71ea3f411cc37aa?s=128&d=identicon&r=PG&f=1", "display_name": "wooden", "link": "https://stackoverflow.com/users/4968522/wooden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 30625802, "answer_count": 1, "score": -5, "last_activity_date": 1433369969, "creation_date": 1433349048, "last_edit_date": 1433369969, "question_id": 30625771, "link": "https://stackoverflow.com/questions/30625771/what-is-the-address-from-which-bin-ls-program-execution-starts", "title": "What is the address from which /bin/ls program execution starts?", "body": "<p>I need to know what's the address from which <code>/bin/ls</code> program execution starts (after dynamic linker fix the environment, what address gets the control?) I need it in hexadecimal (<em>0xNNN...</em>) or decimal format</p>\n"}, {"tags": ["c++", "c", "compilation", "linker", "mpir"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1433351819, "post_id": 30625744, "comment_id": 49319082, "body": "Thanks, I tried that; it still &quot;cannot find -lmpir&quot;.  Compiling with a &quot;-v&quot; option yields, among others: &quot;... #include &quot;...&quot; search starts here: [newline] #include &lt;...&gt; search starts here: [newline]  c:\\mingw\\bin\\../lib/gcc/mingw32/4.8.1/include [newline] ...&quot; and similars; does that indicate that the compiler did not leave the MinGW directory? I did, however, add the MPIR path to the PATH environment variable, and am also working in the directory containing the #included file... ???"}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1433352023, "post_id": 30625744, "comment_id": 49319209, "body": "Try to manually find the libmpir.a in the mingw directory.  That&#39;s where your -L flag needs to point to."}, {"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1433353123, "post_id": 30625744, "comment_id": 49319879, "body": "There is none. In the MPIR directory, however, there are various similarly named files, in particular libmpir.la, libmpir.lai, libmpir.dll.a and more, the first one in the top mpir-2.7.0 directory, the others in the .lib subdirectory. I did, however, perform &quot;make check&quot; and &quot;make install&quot; without any errors... how do I check if the installation was successful? thanks."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1433353232, "post_id": 30625744, "comment_id": 49319950, "body": "Ok, that&#39;s your directory that you need to point to with the -L flag.  So you should have -lmplr -LC:\\MPLR-or-whatever\\path\\to\\lib at the very end of your compile/link command."}, {"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1433354433, "post_id": 30625744, "comment_id": 49320652, "body": "Yes... that&#39;s what I do... I use exactly what you wrote, gcc mytest.c -o mytest -lmpir -IC:/MPIR/mpir-2.7.0/ -LC:/MPIR/mpir-2.7.0 . However, is there a file &quot;libmpir.a&quot; missing which ought to be generated in the build process? It still does not find any mpir library."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1433354865, "post_id": 30625744, "comment_id": 49320919, "body": "Try <code>-lmplr.dll</code> since you only seem to have the libmplr.dll.a file available.  This is a static library that is converted to a dll by the build process later and should be statically linkable."}, {"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1433373801, "post_id": 30625744, "comment_id": 49330569, "body": "libmpir.dll.a is available, not libmplr.dll.a . I tried this, but it neither helped."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1433374099, "post_id": 30625744, "comment_id": 49330662, "body": "Sorry, I couldn&#39;t tell the difference between the spellings with capital <code>I</code> and lowercase <code>l</code>.  I should have noticed the order of your flags as well.  Glad you figured it out."}], "tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": false, "score": 1, "last_activity_date": 1433348951, "creation_date": 1433348951, "answer_id": 30625744, "question_id": 30625676, "link": "https://stackoverflow.com/questions/30625676/mpir-gcc-compilation-cannot-find-lmpir/30625744#30625744", "title": "MPIR gcc compilation - cannot find -lmpir", "body": "<p>Change</p>\n\n<blockquote>\n  <p>gcc mytest.c -o mytest -lmpir -I/C:/MPIR/mpir-2.7.0/</p>\n</blockquote>\n\n<p>to </p>\n\n<blockquote>\n  <p>gcc mytest.c -o mytest -lmpir -IC:/MPIR/mpir-2.7.0/ -LC:/MPIR/mpir-2.7.0</p>\n</blockquote>\n\n<p>You don't need a / in front of C: and the -L flag tells the linker where to find the library that you are linking to with -l flag.</p>\n\n<p>Also, I would recommend using relative paths to your includes and libraries instead of absolute.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1434554965, "post_id": 30632484, "comment_id": 49831031, "body": "Hm. After two weeks (not trying it), the above still did compile without error, but when executing the program via &quot;mytest&quot;, it complained &quot;The program could not be started since libmpir-16.dll is missing. Install the program again.&quot; But this file is actually sitting in the C:/MPIR/mpir-2.7.0/.libs directory (while eg. mpir.a or libmpir.a are not!)... or do I need to look for it somewhere else? I have added the MinGW/bin and the mpir-2.7.0/ path to the PATH environment variable... no improvement. Where else can they be and should they be?"}], "tags": [], "owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "is_accepted": true, "score": 0, "last_activity_date": 1433373632, "creation_date": 1433373632, "answer_id": 30632484, "question_id": 30625676, "link": "https://stackoverflow.com/questions/30625676/mpir-gcc-compilation-cannot-find-lmpir/30632484#30632484", "title": "MPIR gcc compilation - cannot find -lmpir", "body": "<p>Ok, I fixed it.<br>\nSummarizing, critical points are:<br>\n- the order of the gcc options matter: \"-o mytest\" needs to go to the end, and \"-lname\" before but after the \"-Ldir\";<br>\n- the path should have \".libs\" at the end because this is where the libraries are (even if they do not need to be named libmpir.a)<br>\n- (at least in MinGW) the working format is c:/MPIR/mpir-2.7.0/.libs (thus absolute, also from /usr/local/ or other places) </p>\n\n<p>What worked was for example:</p>\n\n<p>$ gcc mytest.c  -Lc:/MPIR/mpir-2.7.0/.libs -lmpir -o mytest<br>\n$ gcc mytest.c  -Lc:/MPIR/mpir-2.7.0/.libs -lmpir.dll -o mytest  </p>\n\n<p>Best.</p>\n"}], "owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 30632484, "answer_count": 2, "score": 0, "last_activity_date": 1433373632, "creation_date": 1433348769, "question_id": 30625676, "link": "https://stackoverflow.com/questions/30625676/mpir-gcc-compilation-cannot-find-lmpir", "title": "MPIR gcc compilation - cannot find -lmpir", "body": "<p>I am trying to compile a simple C program using GCC with MPIR under MinGW on my Windows 7 machine. I installed MPIR successfully (I guess) with configure, make, make check and make install (did not use \"sudo\" - what is this?).</p>\n\n<p>The program is called \"mytest.cpp\", sits in the top folder of MPIR, namely C:/MPIR/mpir-2.7.0/, where also \"mpir.h\" is sitting (is it \"the\" (correct one? are there several?) mpir.h?):  </p>\n\n<pre><code>#include \"mpir.h\"\nusing namespace std;\n\nint main ()\n{\n  mpz_t z; \n  mpz_init(z);   \n  return 0;\n}\n</code></pre>\n\n<p>I tried compiling via</p>\n\n<p>gcc mytest.c -o mytest -lmpir -I/C:/MPIR/mpir-2.7.0/ </p>\n\n<p>with the hope that GCC would then be able to locate mpir.h, \"-lmpir\" because a helpful developer told me to; but then it says:</p>\n\n<p>\"C:/mingw/ [...] /bin/ld.exe: cannot find -lmpir\"</p>\n\n<p>where \"[...]\" stands for some directory up-and-down-climbs inside the \"minGW\" directory. However, I am with the shell currently in the \nC:/MPIR/mpir-2.7.0/ directory.</p>\n\n<p>What is wrong? How to make GCC find the mpir files? Should the compile option \"-I\" be spelled differently? I also heard about some \"-L\" option but could not find that anywhere. Thanks.</p>\n"}, {"tags": ["c", "arduino", "network-programming", "esp8266"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2170949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92322c495982f99e4a7716101b464184?s=128&d=identicon&r=PG", "display_name": "user2170949", "link": "https://stackoverflow.com/users/2170949/user2170949"}, "edited": false, "score": 0, "creation_date": 1433433305, "post_id": 30632375, "comment_id": 49360738, "body": "Hi~ Thank you!  It works when I sending the broadcast message using 192.168.1.255. And the another question is: Is it possible to send by 255.255.255.255?"}, {"owner": {"reputation": 665, "user_id": 4946720, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/622978bee90b9bd34da2af337578bf32?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/4946720/some-user"}, "reply_to_user": {"reputation": 31, "user_id": 2170949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92322c495982f99e4a7716101b464184?s=128&d=identicon&r=PG", "display_name": "user2170949", "link": "https://stackoverflow.com/users/2170949/user2170949"}, "edited": false, "score": 0, "creation_date": 1433437860, "post_id": 30632375, "comment_id": 49363459, "body": "broadcast addresses support often depends on the router and the device. And wireless support for broadcast on router maybe even worse. But if it works for you and that is your deployment scenario, I guess it is fine."}], "tags": [], "owner": {"reputation": 665, "user_id": 4946720, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/622978bee90b9bd34da2af337578bf32?s=128&d=identicon&r=PG&f=1", "display_name": "some user", "link": "https://stackoverflow.com/users/4946720/some-user"}, "is_accepted": false, "score": 4, "last_activity_date": 1433372904, "creation_date": 1433372904, "answer_id": 30632375, "question_id": 30625557, "link": "https://stackoverflow.com/questions/30625557/using-wifi-module-esp8266-to-send-udp-broadcast-message/30632375#30632375", "title": "Using Wifi module ESP8266 to send UDP broadcast message", "body": "<p>I don't have enough reputation to leave a comment so I will make an answer. </p>\n\n<p>I have a feeling that your registerUDP() need to specify an IP address and I guess you are supplying your DHCP assigned IP address. Where as the UDP broadcast is sent using a multicast or broadcast IP.</p>\n\n<p>You can modify the initiator code to send UDP packet to all IP within the same subnet (e.g. 192.168.1.1 to 192.168.1.254) and see if it works.</p>\n"}], "owner": {"reputation": 31, "user_id": 2170949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92322c495982f99e4a7716101b464184?s=128&d=identicon&r=PG", "display_name": "user2170949", "link": "https://stackoverflow.com/users/2170949/user2170949"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9303, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1471784016, "creation_date": 1433348368, "last_edit_date": 1471784016, "question_id": 30625557, "link": "https://stackoverflow.com/questions/30625557/using-wifi-module-esp8266-to-send-udp-broadcast-message", "title": "Using Wifi module ESP8266 to send UDP broadcast message", "body": "<p>I need to communicate Arduino module with my Phone through ESP8266 wifi module</p>\n\n<p>They all link to the local LAN network and didn't know the IP address of each other, so I plan to send UDP broadcast message from my phone, but ESP8266 module seems doesn't receive the message</p>\n\n<p>The ESP8266 library I use is from here:\n<a href=\"https://github.com/itead/ITEADLIB_Arduino_WeeESP8266\" rel=\"nofollow\">https://github.com/itead/ITEADLIB_Arduino_WeeESP8266</a></p>\n\n<p>and use the function registerUDP() and recv()</p>\n\n<p>Can somebody help me?</p>\n"}, {"tags": ["c", "vector", "normalization"], "comments": [{"owner": {"reputation": 95, "user_id": 4876374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56ba4970d39ebb09cf476ea8c4e00cbd?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Polivchuk", "link": "https://stackoverflow.com/users/4876374/mark-polivchuk"}, "edited": false, "score": 2, "creation_date": 1433348404, "post_id": 30625528, "comment_id": 49317034, "body": "Usually normalizing the vector means making the size of it equal one. Calculate the size of the vector (square root of the sum of each element&#39;s square) and divide every element by the size."}, {"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 0, "creation_date": 1433350157, "post_id": 30625528, "comment_id": 49318069, "body": "I believe that is more correctly called length, not size, of a vector. Size, in turn, is the number of components in a vector."}, {"owner": {"reputation": 553, "user_id": 3479876, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f95f32c7d39b3efc1bc893719854926b?s=128&d=identicon&r=PG&f=1", "display_name": "lukieleetronic", "link": "https://stackoverflow.com/users/3479876/lukieleetronic"}, "edited": false, "score": 0, "creation_date": 1433350297, "post_id": 30625528, "comment_id": 49318155, "body": "if I were to normalize this vector I&#39;d find the length which is square root of sum all the elements squared. But if you follow the link included... it just divides each element by sum(vector) which I don&#39;t really get why.."}], "owner": {"reputation": 553, "user_id": 3479876, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f95f32c7d39b3efc1bc893719854926b?s=128&d=identicon&r=PG&f=1", "display_name": "lukieleetronic", "link": "https://stackoverflow.com/users/3479876/lukieleetronic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433348294, "creation_date": 1433348294, "last_edit_date": 1492088034, "question_id": 30625528, "link": "https://stackoverflow.com/questions/30625528/what-does-it-mean-by-renormalization-of-a-vector", "title": "What does it mean by renormalization of a vector?", "body": "<p>I have a vector which I need to renormalize according to the algorithm, </p>\n\n<p>for example, in C if I have the following,  </p>\n\n<pre><code>double V[4] = {1,2,3,4};\n</code></pre>\n\n<p>The algorithm says I need to renormalize the vector V and I have no idea what that means, </p>\n\n<p>I found this link while I was researching but I don't understand it either...</p>\n\n<p><a href=\"https://scicomp.stackexchange.com/questions/19041/when-and-why-is-r-sumr-not-a-good-way-to-renormalize-a-vector-in-pagerank-c\">https://scicomp.stackexchange.com/questions/19041/when-and-why-is-r-sumr-not-a-good-way-to-renormalize-a-vector-in-pagerank-c</a></p>\n\n<p>Could someone please help</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "edited": false, "score": 0, "creation_date": 1433348251, "post_id": 30625469, "comment_id": 49316950, "body": "It&#39;s probably something related to the size of int and/or endianess. Please correct me if I&#39;m wrong."}], "answers": [{"comments": [{"owner": {"reputation": 1700, "user_id": 2125444, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VqC96.jpg?s=128&g=1", "display_name": "reggaeguitar", "link": "https://stackoverflow.com/users/2125444/reggaeguitar"}, "edited": false, "score": 0, "creation_date": 1433348659, "post_id": 30625575, "comment_id": 49317195, "body": "I&#39;m curious why this worked on my machine but failed on the website, any ideas?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 1700, "user_id": 2125444, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VqC96.jpg?s=128&g=1", "display_name": "reggaeguitar", "link": "https://stackoverflow.com/users/2125444/reggaeguitar"}, "edited": false, "score": 2, "creation_date": 1433348763, "post_id": 30625575, "comment_id": 49317263, "body": "@reggaeguitar It&#39;s undefined behavior so anything can happen. Your Windows compiler probably filled in the uninitialized array with zeroes or negative values so it seemed to work."}], "tags": [], "owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "is_accepted": true, "score": 5, "last_activity_date": 1433348423, "creation_date": 1433348423, "answer_id": 30625575, "question_id": 30625469, "link": "https://stackoverflow.com/questions/30625469/getting-different-answer-on-windows-vs-linux/30625575#30625575", "title": "Getting different answer on Windows vs Linux", "body": "<pre><code>memset(flowerCosts, 0, 100);\n</code></pre>\n\n<p>The 100 should be <code>sizeof(flowerCosts)</code>. The 100 doesn't fill the whole array because it's the size in bytes.</p>\n\n<pre><code>qsort(flowerCosts, 100, sizeof(int), comp_desc);\n</code></pre>\n\n<p>You probably want to sort only the entries you filled in (<code>flowersNeeded</code>) rather than all 100 of them.</p>\n\n<p>As a result of these two bugs, you're sorting garbage values in the uninitialized part of your array.</p>\n"}], "owner": {"reputation": 1700, "user_id": 2125444, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VqC96.jpg?s=128&g=1", "display_name": "reggaeguitar", "link": "https://stackoverflow.com/users/2125444/reggaeguitar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 30625575, "answer_count": 1, "score": 0, "last_activity_date": 1433348423, "creation_date": 1433348130, "question_id": 30625469, "link": "https://stackoverflow.com/questions/30625469/getting-different-answer-on-windows-vs-linux", "title": "Getting different answer on Windows vs Linux", "body": "<p>I'm trying to solve this problem <a href=\"https://www.hackerrank.com/challenges/flowers\" rel=\"nofollow\">https://www.hackerrank.com/challenges/flowers</a>\nWhen I run my code in Visual Studio 2013 on Windows 7 on my machine I get the correct answers but on the site (I'm pretty sure they use Linux and I'm positive this is the compiler they use gcc 4.9.2, C99 standard) I get very large numbers for answers, specifically 12588576 (instead of 13) for the first test case and 1395920336 (instead of 15) for the second test case. I'm guessing it has something to do with the qsort call.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint comp_desc(const void * a, const void * b)\n{\n    int * aPtr = (int*)a;\n    int * bPtr = (int*)b;\n    return *bPtr - *aPtr;\n}\n\nint main()\n{\n    int flowersNeeded, numFriends, i;\n    scanf(\"%d %d\", &amp;flowersNeeded, &amp;numFriends);\n    getchar();\n    int flowerCosts[100];\n    memset(flowerCosts, 0, 100);\n    for (i = 0; i &lt; flowersNeeded; ++i)\n    {\n        scanf(\"%d\", &amp;flowerCosts[i]);\n    }\n    qsort(flowerCosts, 100, sizeof(int), comp_desc);\n    int flowersBought = 0;\n    int moneySpent = 0;\n    int multiplier = 1;\n    for (i = 0; i &lt; flowersNeeded; ++i)\n    {\n        moneySpent += flowerCosts[i] * multiplier;\n        multiplier = (++flowersBought / numFriends) + 1;\n    }\n    printf(\"%d\\n\", moneySpent);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows-runtime", "windows-phone"], "comments": [{"owner": {"reputation": 54248, "user_id": 95190, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a58c0b44762885ca46ecee7f5b379f3d?s=128&d=identicon&r=PG", "display_name": "WiredPrairie", "link": "https://stackoverflow.com/users/95190/wiredprairie"}, "edited": false, "score": 0, "creation_date": 1433360437, "post_id": 30625447, "comment_id": 49324164, "body": "This is really well documented ..., like <a href=\"http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361</a> have you tried an option that doesn&#39;t work? You&#39;ll need to periodically save the parameters."}, {"owner": {"reputation": 4145, "user_id": 1410669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e48a0c062eea7f211bd8cf5ae31c2886?s=128&d=identicon&r=PG&f=1", "display_name": "UpAndAdam", "link": "https://stackoverflow.com/users/1410669/upandadam"}, "edited": false, "score": 0, "creation_date": 1433542628, "post_id": 30625447, "comment_id": 49414993, "body": "Remove WP RT from your question title and put this information clearly into your question itself please."}], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 4559427, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/770564156361988/picture?type=large", "display_name": "Augusto Accorsi", "link": "https://stackoverflow.com/users/4559427/augusto-accorsi"}, "edited": false, "score": 0, "creation_date": 1433784233, "post_id": 30635392, "comment_id": 49488173, "body": "It worked, thanks @NullPointer, I just need to figure how do this for lists"}], "tags": [], "owner": {"reputation": 8439, "user_id": 461561, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a2614a382fe86e0f69c1beb27182a63b?s=128&d=identicon&r=PG", "display_name": "Null Pointer", "link": "https://stackoverflow.com/users/461561/null-pointer"}, "is_accepted": true, "score": 1, "last_activity_date": 1433394763, "creation_date": 1433394763, "answer_id": 30635392, "question_id": 30625447, "link": "https://stackoverflow.com/questions/30625447/save-parameters-when-application-is-closed/30635392#30635392", "title": "Save parameters when application is closed", "body": "<p>You can use LocalSettings for that.</p>\n\n<p>Use below code to save values in to the settings</p>\n\n<pre><code>Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;\nlocalSettings.Values[\"exampleSetting\"] = \"test\";\n</code></pre>\n\n<p>to retrieve settings use below code</p>\n\n<pre><code>var value = localSettings.Values[\"exampleSetting\"] as string;\n</code></pre>\n\n<p>More details available <a href=\"https://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 128, "user_id": 4559427, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/770564156361988/picture?type=large", "display_name": "Augusto Accorsi", "link": "https://stackoverflow.com/users/4559427/augusto-accorsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 30635392, "answer_count": 1, "score": 0, "last_activity_date": 1433599427, "creation_date": 1433348069, "last_edit_date": 1433599427, "question_id": 30625447, "link": "https://stackoverflow.com/questions/30625447/save-parameters-when-application-is-closed", "title": "Save parameters when application is closed", "body": "<p>How do I save parameters before closing my Windows Phone Runtime app and use these parameters when I activate my app? I have a String and an int that I need to save. </p>\n"}, {"tags": ["c", "printf", "overflow"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433353135, "post_id": 30625357, "comment_id": 49319886, "body": "Minor: Why a <code>&quot;+&quot;</code> in <code>&quot;+%FT%T&quot;</code>?  Per <a href=\"http://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO8601</a>, it seems <code>+</code> only needed should the year value exist outside range 0-9999, in which case <code>char datetime[21];</code> is too small."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433353889, "post_id": 30625357, "comment_id": 49320324, "body": "Minor: In experimenting with <code>&quot;%F&quot;</code>, a <code>+</code> or <code>-</code> was all ready added when needed.   Recommend dropping <code>+</code> and using a larger buffer."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 3401283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa8da7382f7d76da07a9edd4853cd001?s=128&d=identicon&r=PG&f=1", "display_name": "IWill80", "link": "https://stackoverflow.com/users/3401283/iwill80"}, "edited": false, "score": 0, "creation_date": 1433358897, "post_id": 30625870, "comment_id": 49323323, "body": "Thnak you very much! I&#39;ll think to redisign this API for a future version of the library!"}], "tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": true, "score": 2, "last_activity_date": 1433349331, "creation_date": 1433349331, "answer_id": 30625870, "question_id": 30625357, "link": "https://stackoverflow.com/questions/30625357/double-check-the-size-of-a-buffer/30625870#30625870", "title": "Double check the size of a buffer", "body": "<p>Put simply - you can't...<br>\nThere is no way to determine the \"length\" of a memory address you receive as pointer because there is no entity that can verify it in runtime. This is the reason you request the length in the first place!  </p>\n\n<p>The only solution in your case will be to allocate the memory yourself and return that to the user, transferring the responsibility for managing that memory to the user:</p>\n\n<pre><code>char* strftime_ISO8601(uint64_t ns) {\n    //The standard format ISO 8601 is 20 bytes + 1 null\n    char datetime[21];\n    char *res = malloc(EXPECTED_SIZE)\n    struct tm tm;\n    struct timespec ts = //convert nanoseconds into timespec\n\n    gmtime_r(&amp;ts.tv_sec, &amp;tm);\n    strftime(datetime, sizeof(datetime), \"+%FT%T\", &amp;tm);\n    snprintf(res, EXPECTED_SIZE, \"%s.%.9ld\", datetime, ts.tv_nsec);\n\n    return res;\n}\n</code></pre>\n\n<p>This way, you are in control of the memory allocation and thus can prevent buffer overflows</p>\n"}], "owner": {"reputation": 57, "user_id": 3401283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa8da7382f7d76da07a9edd4853cd001?s=128&d=identicon&r=PG&f=1", "display_name": "IWill80", "link": "https://stackoverflow.com/users/3401283/iwill80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 30625870, "answer_count": 1, "score": 0, "last_activity_date": 1433370499, "creation_date": 1433347810, "last_edit_date": 1433370499, "question_id": 30625357, "link": "https://stackoverflow.com/questions/30625357/double-check-the-size-of-a-buffer", "title": "Double check the size of a buffer", "body": "<p>I have a doubt about a potential buffer overflow in a library I developed, where there is the following API that can be called from external application. I've tried to find a possible solution but I didn't find yet the \"right\" one. The API is the following:</p>\n\n<pre><code>char* strftime_ISO8601(uint64_t ns, char* buf, size_t buflen) {\n    if (buf) {\n        //The standard format ISO 8601 is 20 bytes + 1 null\n        char datetime[21];\n        struct tm tm;\n        struct timespec ts = //convert nanoseconds into timespec\n\n        gmtime_r(&amp;ts.tv_sec, &amp;tm);\n        strftime(datetime, sizeof(datetime), \"+%FT%T\", &amp;tm);\n        snprintf(buf, buflen, \"%s.%.9ld\", datetime, ts.tv_nsec);\n    }\n    return buf;\n}\n</code></pre>\n\n<p>I need to provide code that is safe enough against \"buffer overflow\". For this reason I'm using the snprintf where the size of the destination buffer is given as parameter and the resulting string is NULL-terminated. \nI'm also using some static analysis tools like RATS to highlight potential vulnerability. In this case I have the following notice:</p>\n\n<pre><code>Double check that your buffer is as big as you specify. When using functions that accept a number n of bytes to copy, such as strncpy, be aware that if the destination buffer size = n it may not NULL-terminate the string.\n</code></pre>\n\n<p>on the snprintf</p>\n\n<pre><code>snprintf(buf, buflen, \"%s.%.9ld\", datetime, ts.tv_nsec);\n</code></pre>\n\n<p>Using the snprintf I'm sure that the string will be NULL-terminated, but how can I double check if the buffer given in input is really of size buflen?</p>\n\n<p>I mean, if the user call the API with a bad size like e.g.</p>\n\n<pre><code>...\nchar bad[5]\nstrftime_ISO8601(x, bad, 1024);\n....\n</code></pre>\n\n<p>or even worst using an uninitialized buffer like this:</p>\n\n<pre><code>...\nchar *bad;\nstrftime_ISO8601(x, bad, 1024);\n...\n</code></pre>\n\n<p>A part from a potential segmentation fault, I don't see any particular vulnerability in the above API. But how can I verify if the buflen that the API receive as input is the right size?</p>\n\n<p>Thank you all!</p>\n"}, {"tags": ["c", "concurrency", "process", "fork"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1433347312, "post_id": 30625013, "comment_id": 49316377, "body": "<code>write</code> is always safe. If you use <code>stdio</code> functions, you need to take care of buffering."}], "answers": [{"comments": [{"owner": {"reputation": 1390, "user_id": 4947867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mticV.png?s=128&g=1", "display_name": "No-Bugs Hare", "link": "https://stackoverflow.com/users/4947867/no-bugs-hare"}, "edited": false, "score": 0, "creation_date": 1433348069, "post_id": 30625338, "comment_id": 49316846, "body": "Bottom line: don&#39;t use flock and fcntl, use some IPC instead (as suggested in this answer, I&#39;d prefer more explicit semaphore) - it is generally much more reliable."}, {"owner": {"reputation": 1353, "user_id": 3475234, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c10e56b2459bc8ed9750b6599515ca32?s=128&d=identicon&r=PG&f=1", "display_name": "user3475234", "link": "https://stackoverflow.com/users/3475234/user3475234"}, "edited": false, "score": 0, "creation_date": 1433350211, "post_id": 30625338, "comment_id": 49318108, "body": "Thank you! I&#39;ll use a semaphore, I didn&#39;t realize they could be applied to processes as well."}], "tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": true, "score": 3, "last_activity_date": 1433348168, "last_edit_date": 1433348168, "creation_date": 1433347766, "answer_id": 30625338, "question_id": 30625013, "link": "https://stackoverflow.com/questions/30625013/concurrent-programming-is-it-necessary-to-manually-lock-files-that-multiple-pr/30625338#30625338", "title": "Concurrent programming - Is it necessary to manually lock files that multiple processes will be accessing?", "body": "<p>Short answer: you have to do it manually.  There are certain guarantees on the atomicity of each write, but you'll still need to synchronize the processes to avoid interleaving writes.  There are a lot of techniques for synchronizing processes.  Since all of your writers are descendants of a common process, probably the easiest thing to do is to pass a token on a common pipe.  Before you fork, create a pipe and write a single byte into it.  Any time a process wants to write to the file, it will do a blocking read on the pipe.  If it gets a byte, then it proceeds to write to the file.  When it is done, it writes a byte back into the pipe.  If any other process wants to access the file, it will block on the pipe read until the other process is done writing.  This is often simpler than using a semaphore, which is another excellent technique.</p>\n"}], "owner": {"reputation": 1353, "user_id": 3475234, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c10e56b2459bc8ed9750b6599515ca32?s=128&d=identicon&r=PG&f=1", "display_name": "user3475234", "link": "https://stackoverflow.com/users/3475234/user3475234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 30625338, "answer_count": 1, "score": 0, "last_activity_date": 1433348168, "creation_date": 1433346828, "question_id": 30625013, "link": "https://stackoverflow.com/questions/30625013/concurrent-programming-is-it-necessary-to-manually-lock-files-that-multiple-pr", "title": "Concurrent programming - Is it necessary to manually lock files that multiple processes will be accessing?", "body": "<p>I know for pthreads, if they're modifying the same variables or files, you can use <code>pthread_mutex_lock</code> to prevent simultaneous writes.</p>\n\n<p>If I'm using <code>fork()</code> to have multiple processes, which are editing the same file, how can I make sure they're not writing simultaneously to that file?</p>\n\n<p>Ideally I'd like to lock the file for one writer at a time, and each process would only need to write once (no loops necessary). Do I need to do this manually or will UNIX do it for me?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 0, "creation_date": 1433345535, "post_id": 30624428, "comment_id": 49315088, "body": "Double check that your loops are going to iterate over the correct indexes for your valid set of inputs. Looks like you will attempt to index outside our array in multiple places. Also, it looks like you want &#39;==&#39; rather than &#39;=&#39;."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1433345601, "post_id": 30624428, "comment_id": 49315151, "body": "Do you loops break ever? Check those loop conditions: <code>i = (C1 + 11)</code>, <code>i = (C2 + 11)</code>, <code>i = 3</code> etc."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1433345688, "post_id": 30624428, "comment_id": 49315221, "body": "<code>for(i = (C1 - 1); i = (C1 + 11); i + 4) {</code> : This is an infinite loop. infinite  do <code>j = j + 1;</code> then <code>arr1[j]</code> out of bounds"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1433345751, "post_id": 30624428, "comment_id": 49315271, "body": "And how do you access A[C1][i] when i is C1 + 11? A is only 4x4."}, {"owner": {"reputation": 23, "user_id": 4968014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c0293df168be2c71444092e291d58c?s=128&d=identicon&r=PG&f=1", "display_name": "Boya", "link": "https://stackoverflow.com/users/4968014/boya"}, "edited": false, "score": 0, "creation_date": 1433345820, "post_id": 30624428, "comment_id": 49315320, "body": "My understanding was that &quot;for(i = (C1 - 1); i = (C1 + 11); i + 4)&quot; was equatable to &quot;for i = C1-1: 4 : C1+11&#39; based on prior MATLAB experience. Perhaps this is not the case?"}, {"owner": {"reputation": 667, "user_id": 3906361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdf387cd03d5d6185ca62d7683d72f21?s=128&d=identicon&r=PG&f=1", "display_name": "aakansha", "link": "https://stackoverflow.com/users/3906361/aakansha"}, "edited": false, "score": 0, "creation_date": 1433346079, "post_id": 30624428, "comment_id": 49315524, "body": "I suggest you to first study about 2 dimensional arrays.As your code has lots of bugs"}], "answers": [{"comments": [{"owner": {"reputation": 616, "user_id": 2374138, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8ed241e48a489336e975af2e14329fe9?s=128&d=identicon&r=PG", "display_name": "ERed", "link": "https://stackoverflow.com/users/2374138/ered"}, "edited": false, "score": 1, "creation_date": 1433346516, "post_id": 30624664, "comment_id": 49315820, "body": "I aggree with this answer, besides you should also deal with pointers as a better praxis to deal with memory. Anyway using Matlab or Octave will always be better if you&#39;re just trying to compute some data or even using it to learn machine learning algorithms, etc."}, {"owner": {"reputation": 616, "user_id": 2374138, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8ed241e48a489336e975af2e14329fe9?s=128&d=identicon&r=PG", "display_name": "ERed", "link": "https://stackoverflow.com/users/2374138/ered"}, "edited": false, "score": 0, "creation_date": 1433346716, "post_id": 30624664, "comment_id": 49315970, "body": "A good practice since you are learning is to debug and use breakpoints and print some results as well to check what&#39;s going on within your program. Also writing and checking the loop is always better than just copying a snippet. Notice the difference as pointed by AzNjoE between &#39;==&#39; and &#39;=&#39; and the correct syntaxis to perform the increment of &#39;i&#39;. Have fun coding!"}], "tags": [], "owner": {"reputation": 663, "user_id": 3330452, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1516574038/picture?type=large", "display_name": "AzNjoE", "link": "https://stackoverflow.com/users/3330452/aznjoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1433436082, "last_edit_date": 1433436082, "creation_date": 1433345839, "answer_id": 30624664, "question_id": 30624428, "link": "https://stackoverflow.com/questions/30624428/basic-arrays-and-functions-in-c-selftaught/30624664#30624664", "title": "basic arrays and functions in C - selftaught", "body": "<p>Your array 'A' is a 4x4 2D array, but you access your array's 2nd index using 'i', which will eventually be 12 in the first two loops in your function colAdd(). This will cause an index out of bounds error (or segmentation fault). </p>\n\n<p>I'm guessing 'i' should be 'j' when indexing through the 2D array.</p>\n\n<p>Also you should use \"==\" for the terminating condition in your for loop, instead of \"=\" which is assignment. Also how you increment through the loop 'i + 4', won't change 'i', you need a \"+=\" or do \"i = i + 4\".</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 4968014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c0293df168be2c71444092e291d58c?s=128&d=identicon&r=PG&f=1", "display_name": "Boya", "link": "https://stackoverflow.com/users/4968014/boya"}, "edited": false, "score": 0, "creation_date": 1433346754, "post_id": 30624777, "comment_id": 49315995, "body": "I&#39;ve had a massive light-bulb moment on the basis of both your and AzNjoE&#39;s answers. There&#39;s much about C I&#39;m still learning, but this has cleared up an awful deal concerning both arrays and loops in C. I suspect I&#39;m going to have a lot of fun with this. Thank you both."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 23, "user_id": 4968014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c0293df168be2c71444092e291d58c?s=128&d=identicon&r=PG&f=1", "display_name": "Boya", "link": "https://stackoverflow.com/users/4968014/boya"}, "edited": false, "score": 0, "creation_date": 1433346879, "post_id": 30624777, "comment_id": 49316089, "body": "@Boya, glad I was able to help."}, {"owner": {"reputation": 667, "user_id": 3906361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdf387cd03d5d6185ca62d7683d72f21?s=128&d=identicon&r=PG&f=1", "display_name": "aakansha", "link": "https://stackoverflow.com/users/3906361/aakansha"}, "edited": false, "score": 0, "creation_date": 1433347133, "post_id": 30624777, "comment_id": 49316247, "body": "@RSahu arr1[i]=A[C1][i].I think this should be arr1[i]=A[i][C1] since Boya wants to add the columns."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1433347168, "last_edit_date": 1433347168, "creation_date": 1433346186, "answer_id": 30624777, "question_id": 30624428, "link": "https://stackoverflow.com/questions/30624428/basic-arrays-and-functions-in-c-selftaught/30624777#30624777", "title": "basic arrays and functions in C - selftaught", "body": "<p>You have:</p>\n\n<pre><code>// The following takes column C1 of A and places the result in arr1\nfor(i = (C1 - 1); i = (C1 + 11); i + 4) {\n   arr1[j] = A[C1][i];\n   j = j + 1;\n}\n</code></pre>\n\n<p>Your code doesn't do what your comment says it should. Your understanding of <code>for</code> statement is not quite right.</p>\n\n<p>Use:</p>\n\n<pre><code>for(i = 0;  // This is executed only once.\n    i &lt; 4;  // This is executed for every iteration of the loop.\n            // The loop is terminated if this statement is false.\n    ++i)    // This is executed for every iteration after the\n            // statements of the loop are executed. \n{\n   arr1[i] = A[i][C1];\n}\n</code></pre>\n\n<p>Hopefully this gives you enough to fix the rest of the function.</p>\n"}], "owner": {"reputation": 23, "user_id": 4968014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c0293df168be2c71444092e291d58c?s=128&d=identicon&r=PG&f=1", "display_name": "Boya", "link": "https://stackoverflow.com/users/4968014/boya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 30624777, "answer_count": 2, "score": -1, "last_activity_date": 1433436082, "creation_date": 1433345262, "question_id": 30624428, "link": "https://stackoverflow.com/questions/30624428/basic-arrays-and-functions-in-c-selftaught", "title": "basic arrays and functions in C - selftaught", "body": "<p>I'm very new to the C programming language and Stack Exchange. I'm learning on my own and have recently refined a rudimentary skill set in Matlab. I'm attempting to mess around with arrays in the following C code sample, which I hope I have adequately explained throughout. When I compile the code, however, I'm immediately met with a segmentation fault. I'm not sure where I've hit my iceberg, and I'm looking for a solution so I can learn by good example.</p>\n\n<pre><code>/* colAdd takes a 4,4 array 'A' and adds columns 'C1' and 'C2', \n   placing the result in column 'C1'. Prints  matrix 'A'. \n   Void function as result is only printed, not returned.\n   Main tests colAdd with simple 4,4 array */\n\n#include &lt;stdio.h&gt;\n\n// Function colAdd is declared\nvoid colAdd(int A[4][4], int C1, int C2);\n\nint main()\n{\n    // Function colAdd is initialised\n    int A[4][4] = {{1,2,3,4},{5,6,7,8},{9,10,11,12},{13,14,15,16}}; \n    colAdd(A,1,3);\n}\n\nvoid colAdd(int A[4][4], int C1, int C2)\n{\n    int j = 0; int i; int arr1[4]; int arr2[4]; int arr3[4];\n\n    // The following takes column C1 of A and places the result in arr1\n    for(i = (C1 - 1); i = (C1 + 11); i + 4) {\n    arr1[j] = A[C1][i];\n    j = j + 1;\n    }\n    j = 0;\n\n    // The following takes column C2 of A and places the result in arr2\n    for(i = (C2 - 1); i = (C2 + 11); i + 4) {\n    arr2[j] = A[C2][i];\n    j = j + 1;\n    }\n\n    // The following takes the addition of arr1 and arr2 and places the result in arr3\n    for(i = 0; i = 3; i++) {\n    arr3[i] = arr2[i] + arr1[i];\n    }\n    j = 0;\n\n    // The following replaces column C1 of array A with arr3\n    for(i = (C1 - 1); i = (C1 + 11); i + 4) {\n    A[C1][i] = arr3[j];\n    j = j + 1;\n    }\n\n    //Finally, the resultant array A is printed\n    const int rows = 4; \n    const int cols = 4; \n    int k; int l;\n    for(k = 0; k &lt; rows; k++) {\n        for(l = 0; l &lt; cols; l++) {\n        printf(\"ans[%d, %d] = %d \\n\", k, l, A[k][l]);\n        }\n    }\n}\n</code></pre>\n\n<p>Any advice would be much appreciated. Thank you all kindly.</p>\n"}, {"tags": ["c++", "c", "visual-studio-2010"], "comments": [{"owner": {"reputation": 7445, "user_id": 1174378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8e5416e29987d91116420dc387e7153?s=128&d=identicon&r=PG", "display_name": "Mihai Todor", "link": "https://stackoverflow.com/users/1174378/mihai-todor"}, "edited": false, "score": 0, "creation_date": 1433345568, "post_id": 30624230, "comment_id": 49315124, "body": "Give this a read: <a href=\"http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B</a>"}, {"owner": {"reputation": 15, "user_id": 4628868, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f4cbb5211cdcdf3eabe5215b071f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Cardoso", "link": "https://stackoverflow.com/users/4628868/jo%c3%a3o-cardoso"}, "reply_to_user": {"reputation": 7445, "user_id": 1174378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8e5416e29987d91116420dc387e7153?s=128&d=identicon&r=PG", "display_name": "Mihai Todor", "link": "https://stackoverflow.com/users/1174378/mihai-todor"}, "edited": false, "score": 0, "creation_date": 1433346543, "post_id": 30624230, "comment_id": 49315848, "body": "Thanks I will read carefully"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4628868, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f4cbb5211cdcdf3eabe5215b071f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Cardoso", "link": "https://stackoverflow.com/users/4628868/jo%c3%a3o-cardoso"}, "edited": false, "score": 0, "creation_date": 1433357965, "post_id": 30624549, "comment_id": 49322753, "body": "Can I create a exe. with the C++ library and execute inside of main project instead?"}, {"owner": {"reputation": 481, "user_id": 1587449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e85cac5fa6729637c6aa44e5ec2fd0d0?s=128&d=identicon&r=PG", "display_name": "Da Maex", "link": "https://stackoverflow.com/users/1587449/da-maex"}, "reply_to_user": {"reputation": 15, "user_id": 4628868, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f4cbb5211cdcdf3eabe5215b071f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Cardoso", "link": "https://stackoverflow.com/users/4628868/jo%c3%a3o-cardoso"}, "edited": false, "score": 1, "creation_date": 1433359043, "post_id": 30624549, "comment_id": 49323400, "body": "Could be done aswell, but isn&#39;t the nicest way. You would have to build all functions you will use like a command line app and interpret the results from within your c application. Believe me, would be a lot more work and complexicity. The Link provided by Mihai Todor is explaining the same as my answer. And i would definitly go this way, compile as static librarys with <code>extern &quot;C&quot;</code> and use it directly."}, {"owner": {"reputation": 15, "user_id": 4628868, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f4cbb5211cdcdf3eabe5215b071f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Cardoso", "link": "https://stackoverflow.com/users/4628868/jo%c3%a3o-cardoso"}, "edited": false, "score": 0, "creation_date": 1433450432, "post_id": 30624549, "comment_id": 49370477, "body": "Thanks, I will consider that way. This library only converts a string of words to words+phonemes. Because of that &quot;simple&quot; implementation, I have considered to execute the library inside of main project."}], "tags": [], "owner": {"reputation": 481, "user_id": 1587449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e85cac5fa6729637c6aa44e5ec2fd0d0?s=128&d=identicon&r=PG", "display_name": "Da Maex", "link": "https://stackoverflow.com/users/1587449/da-maex"}, "is_accepted": false, "score": 1, "last_activity_date": 1433345548, "creation_date": 1433345548, "answer_id": 30624549, "question_id": 30624230, "link": "https://stackoverflow.com/questions/30624230/c-static-library-in-c-main-project/30624549#30624549", "title": "C++ Static Library in C Main Project", "body": "<p>If you can't compile the MainProject in C++ you could write a wrapper for your C++ Library to handle the functionality you need.</p>\n\n<p>Basically build another library which links in the C++ library. It shall provide the functions as <code>extern \"C\"</code> and you can call them from your C application.</p>\n\n<p>Check this link for more Information: <a href=\"http://www.teddy.ch/c++_library_in_c/\" rel=\"nofollow\">http://www.teddy.ch/c++_library_in_c/</a></p>\n"}], "owner": {"reputation": 15, "user_id": 4628868, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f4cbb5211cdcdf3eabe5215b071f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Cardoso", "link": "https://stackoverflow.com/users/4628868/jo%c3%a3o-cardoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433345548, "creation_date": 1433344750, "question_id": 30624230, "link": "https://stackoverflow.com/questions/30624230/c-static-library-in-c-main-project", "title": "C++ Static Library in C Main Project", "body": "<p>My VS2010 project has 2 Static Libraries in C. I want to add another one, but in C++. My main project is already in C, so my objective is to change it the minimum possible. Is it possible to add another static library in C++? How?\nI already link the projects and only include the header in \"main.cpp\". But I get this error:</p>\n\n<pre><code>\"1&gt;c:\\program files (x86)\\microsoft visual studio\n10.0\\vc\\include\\cmath(19): error C2061: syntax error : identifier 'acosf' 1&gt;c:\\program files (x86)\\microsoft visual studio\n10.0\\vc\\include\\cmath(19): error C2059: syntax error : ';' 1&gt;c:\\program files (x86)\\microsoft visual studio\n10.0\\vc\\include\\cmath(19): error C2061: syntax error : identifier 'asinf' 1&gt;c:\\program files (x86)\\microsoft visual studio\n10.0\\vc\\include\\cmath(19): error C2059: syntax error : ';' 1&gt;c:\\program files (x86)\\microsoft visual studio\n10.0\\vc\\include\\cmath(20): error C2061: syntax error : identifier 'atanf' 1&gt;c:\\program files (x86)\\microsoft visual studio\n10.0\\vc\\include\\cmath(20): error C2059: syntax error : ';' 1&gt;c:\\program files (x86)\\microsoft visual studio\n10.0\\vc\\include\\cmath(20): error C2061: syntax error : identifier 'atan2f' 1&gt;c:\\program files (x86)\\microsoft visual studio\n10.0\\vc\\include\\cmath(20): error C2059: syntax error : ';'\n</code></pre>\n\n<p>The solutions that I already see, tell me to compile the main project in C++, which I can't do.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 3, "creation_date": 1433345035, "post_id": 30624227, "comment_id": 49314686, "body": "Show us an example of this &quot;strange output&quot;, otherwise we&#39;re just guessing."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1433345314, "post_id": 30624227, "comment_id": 49314920, "body": "Why are you allocating memory and not putting anything into it?"}, {"owner": {"reputation": 811, "user_id": 4895040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YLzeG.jpg?s=128&g=1", "display_name": "raymelfrancisco", "link": "https://stackoverflow.com/users/4895040/raymelfrancisco"}, "edited": false, "score": 0, "creation_date": 1433345316, "post_id": 30624227, "comment_id": 49314925, "body": "You should also do the freeing before the program exits."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1433345401, "post_id": 30624227, "comment_id": 49314992, "body": "Your main problem is that your scanf&#39;s are going into unallocated memory."}, {"owner": {"reputation": 811, "user_id": 4895040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YLzeG.jpg?s=128&g=1", "display_name": "raymelfrancisco", "link": "https://stackoverflow.com/users/4895040/raymelfrancisco"}, "edited": false, "score": 0, "creation_date": 1433345877, "post_id": 30624227, "comment_id": 49315363, "body": "Take a look here: <a href=\"http://stackoverflow.com/questions/2614249/dynamic-memory-for-2d-char-array\">dynamic memory for 2D char array</a>."}, {"owner": {"reputation": 55, "user_id": 2722928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0bfa217301d7f89e5e3ac4b5e633152?s=128&d=identicon&r=PG&f=1", "display_name": "user2722928", "link": "https://stackoverflow.com/users/2722928/user2722928"}, "reply_to_user": {"reputation": 811, "user_id": 4895040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YLzeG.jpg?s=128&g=1", "display_name": "raymelfrancisco", "link": "https://stackoverflow.com/users/4895040/raymelfrancisco"}, "edited": false, "score": 0, "creation_date": 1433352068, "post_id": 30624227, "comment_id": 49319251, "body": "Good tip @raymelfrancisco :-)"}], "answers": [{"comments": [{"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1433346094, "post_id": 30624459, "comment_id": 49315533, "body": "This line is also having no effect. <code>iPhoneBook_nr = realloc(iPhoneBook_nr, sizeof(int));</code> and failing to extend the array of numbers."}, {"owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "reply_to_user": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1433346291, "post_id": 30624459, "comment_id": 49315656, "body": "Good find :). So in general just remember <code>pointer = realloc(pointer*newItemCount*sizeof(type))</code>."}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 2, "creation_date": 1433346893, "post_id": 30624459, "comment_id": 49316095, "body": "Ahem, <code>pointer = realloc(pointer , newItemCount*sizeof(type))</code>."}, {"owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "reply_to_user": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 1, "creation_date": 1433346990, "post_id": 30624459, "comment_id": 49316157, "body": "Haha, oops, i&#39;ll go make coffee ;)"}, {"owner": {"reputation": 55, "user_id": 2722928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0bfa217301d7f89e5e3ac4b5e633152?s=128&d=identicon&r=PG&f=1", "display_name": "user2722928", "link": "https://stackoverflow.com/users/2722928/user2722928"}, "edited": false, "score": 0, "creation_date": 1433352005, "post_id": 30624459, "comment_id": 49319201, "body": "Thanks @Davidvanrijn ! It helped a lot! I finished the code with your help. :-)"}], "tags": [], "owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "is_accepted": true, "score": 2, "last_activity_date": 1433345818, "last_edit_date": 1433345818, "creation_date": 1433345324, "answer_id": 30624459, "question_id": 30624227, "link": "https://stackoverflow.com/questions/30624227/strange-output-while-using-dynamic-memory-allocation-i-c/30624459#30624459", "title": "Strange output while using dynamic memory allocation i C", "body": "<p>The problem lies within this:</p>\n\n<pre><code>printf(\"\\n%s %d\\n\", &amp;cPhoneBook_name[i], iPhoneBook_nr[i]);\n</code></pre>\n\n<p><code>cPhoneBook_name</code> if of type <code>char[]</code>. So for example the expression <code>char[1]</code> gives you the second charachter in the list. While a name in your code is 80 <code>char</code>s wide. So try: </p>\n\n<pre><code>printf(\"\\n%s %d\\n\", &amp;cPhoneBook_name[i*80], iPhoneBook_nr[i]);\n</code></pre>\n\n<h1>Edit:</h1>\n\n<p>I also found that this:</p>\n\n<pre><code>cPhoneBook_name = realloc(cPhoneBook_name, 80 * sizeof(char));\n</code></pre>\n\n<p>Has no effect, because you're resizing <code>cPhoneBook_name</code> from 80 to 80.\ntry:</p>\n\n<pre><code>    cPhoneBook_name = realloc(cPhoneBook_name, (iContacts+1) 80 * sizeof(char)); \n</code></pre>\n\n<p>and also:\n     scanf(\"%s\", &amp;cPhoneBook_name[80*iContacts]);</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1433347724, "creation_date": 1433347724, "answer_id": 30625323, "question_id": 30624227, "link": "https://stackoverflow.com/questions/30624227/strange-output-while-using-dynamic-memory-allocation-i-c/30625323#30625323", "title": "Strange output while using dynamic memory allocation i C", "body": "<p>This is most likely the root of your \"strange ouput\" when you enter more than one contact:</p>\n\n<pre><code>cPhoneBook_name = realloc(cPhoneBook_name, 80 * sizeof(char));\n</code></pre>\n\n<p>You're not actually extending the size of the <code>cPhoneBook_name</code> array; in a <code>realloc</code> call, the second parameter is the <em>new size</em> of the array, not the amount to add to the existing size.  </p>\n\n<p>Having said that, this whole approach is wrong; you're not creating an array of strings, you're (unsuccessfully) creating a single string that gets extended every time you add a contact, and your <code>iContacts</code> index will point to the <code>i</code>'th <em>character</em> of the string, not the <code>i</code>'th string in the list of strings.  </p>\n\n<p>Here's an approach that should work:</p>\n\n<pre><code>#define ROWS 5 // start with 5 rows in your contact list\n\n// Create a type to store a single phone book entry\nstruct PhoneBookEntry {\n  char name[80];  // fixed size to keep things simple\n  int number;\n};\n\n// Create an array that can initially store ROWS\n// phone book entries\nstruct PhoneBookEntry *phoneBook = malloc ( sizeof *phoneBook * ROWS );\nsize_t phoneBookRows = ROWS;\n...\ncase 1: // Add contact\n  // Before adding a contact, see if we need to extend the phone book\n  // array\n  if ( iContacts == phoneBookRows )\n  {\n    // double the size of the phone book array\n    struct PhoneBookEntry *tmp = realloc( phoneBook, 2 * sizeof *phoneBook * phoneBookRows );\n    if ( tmp )\n    {\n      phoneBook = tmp;\n      phoneBookRows *= 2; \n    }\n    else\n    {\n      fprintf( stderr, \"Could not extend phone book!\\n\" );\n      break;\n    }\n  }\n  ...\n  scanf( \"%s\", phoneBook[iContacts].name ); // note no &amp; operator; arrays are special\n  ...\n  scanf( \"%d\", &amp;phoneBook[iContacts].number );\n</code></pre>\n\n<p>Some things to note:</p>\n\n<p>First, <strong>DO NOT</strong> cast the result of <code>malloc</code>, <code>calloc</code>, or <code>realloc</code> in C code; it's unnecessary, and under C89 compilers can mask a bug.  You <em>do</em> need to cast the results of those functions in C++ code, but if you're writing C++ you shouldn't be using <code>malloc</code>, <code>calloc</code>, or <code>realloc</code> anyway.  </p>\n\n<p>Second, avoid using type names as <code>sizeof</code> arguments where you can help it.  Use something like the following instead:</p>\n\n<pre><code>T *p = malloc( N * sizeof *p );\n</code></pre>\n\n<p>The type of the <em>expression</em> <code>*p</code> is <code>T</code>, so <code>sizeof *p</code> is equivalent to <code>sizeof (T)</code>.  This way, <code>malloc</code> will always allocate the correct amount of memory regardless of <code>T</code>, and if you ever decide to change <code>T</code>, you only have to make that change in one place.  </p>\n\n<p>Third, <code>realloc</code> will return <code>NULL</code> if it can't satisfy the request; if you assign that <code>NULL</code> to your <code>phoneBook</code> variable, you will lose your reference to the memory you've already allocated.  It's safer to assign the result of <code>realloc</code> to a temporary variable, test for <code>NULL</code>, and then assign it to your <code>phoneBook</code> variable.  </p>\n\n<p>Fourth, <code>realloc</code> calls can be expensive, so you want to minimize them when it makse sense to do so.  Doubling the size of the array is a common technique.  </p>\n"}], "owner": {"reputation": 55, "user_id": 2722928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0bfa217301d7f89e5e3ac4b5e633152?s=128&d=identicon&r=PG&f=1", "display_name": "user2722928", "link": "https://stackoverflow.com/users/2722928/user2722928"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 30624459, "answer_count": 2, "score": 0, "last_activity_date": 1433347724, "creation_date": 1433344748, "last_edit_date": 1433344983, "question_id": 30624227, "link": "https://stackoverflow.com/questions/30624227/strange-output-while-using-dynamic-memory-allocation-i-c", "title": "Strange output while using dynamic memory allocation i C", "body": "<p>I'm working on this code, and it's not finished yet. But while testing the add new contacts function and printing function, I get this strange output. Everythin looks ok as long as I'm not adding more than one contact. What am I doing wrong here?</p>\n\n<pre><code>//Libraries:\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//Function prototypes\nint showMenu(); //Shows user options\n\n//Main function\nint main() {\n\n    //Variable declerations\n    int i = 0;\n    int iOption = 0;\n    int iContacts = 0;\n    char *cPhoneBook_name;\n    int *iPhoneBook_nr;\n\n    cPhoneBook_name = (char *) calloc(1, 80 * sizeof(char));\n    iPhoneBook_nr = (int *) calloc(1, sizeof(int));\n\n    do {\n\n        //Memory check\n        if(cPhoneBook_name == NULL || iPhoneBook_nr == NULL){\n            printf(\"\\nOut of Memory!\\n\");\n            return;\n        }\n\n        //Show menu\n        iOption = showMenu();\n\n        switch (iOption) {\n            case 1: //Add contact\n                printf(\"\\nEnter name:\\n\");\n                scanf(\"%s\", &amp;cPhoneBook_name[iContacts]);\n                printf(\"\\nEnter number:\\n\");\n                scanf(\"%d\", &amp;iPhoneBook_nr[iContacts]);\n                cPhoneBook_name = realloc(cPhoneBook_name, 80 * sizeof(char));\n                iPhoneBook_nr = realloc(iPhoneBook_nr, sizeof(int));\n                iContacts += 1;\n                break;\n            case 2: //Modify contact\n                //Code here\n                break;\n            case 3: //Show contacts\n                for(i = 0 ; i &lt; iContacts ; i++) {\n                    printf(\"\\n%s %d\\n\", &amp;cPhoneBook_name[i], iPhoneBook_nr[i]);\n                }\n                break;\n            case 4: //Free memory (delete contacts)\n                free(cPhoneBook_name);\n                free(iPhoneBook_nr);\n                break;\n        }\n    }while(iOption != 5);//Exit if iOption is 5;\n\n    system(\"clear\");\n    return 0;\n}\n\n\n//Function definition - showMenu()\nint showMenu() {\n\n    int iOption = 0;\n\n    //system(\"clear\");\n\n    printf(\"\\n   Phone book   \\n\");\n    printf(\"------------------------\\n\");\n    printf(\"1. Add new contact.\\n\");\n    printf(\"2. Edit existing contact\\n\");\n    printf(\"3. Show contact(s)\\n\");\n    printf(\"4. Clear phone book\\n\");\n    printf(\"5. Exit\\n\");\n    printf(\"------------------------\\n\");\n    printf(\"Option --&gt; \");\n    scanf(\"%d\", &amp;iOption);\n\n    return iOption;\n}\n//---------------------------------------------------------\n</code></pre>\n"}, {"tags": ["c", "arrays", "stack"], "comments": [{"owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "edited": false, "score": 2, "creation_date": 1433344565, "post_id": 30624093, "comment_id": 49314282, "body": "Fix indentation. Please."}, {"owner": {"reputation": 1268, "user_id": 3129752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9TDZu.jpg?s=128&g=1", "display_name": "Baris Demiray", "link": "https://stackoverflow.com/users/3129752/baris-demiray"}, "edited": false, "score": 2, "creation_date": 1433344600, "post_id": 30624093, "comment_id": 49314322, "body": "And <code>CreateStack</code> is only creating, not returning.."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433344734, "post_id": 30624093, "comment_id": 49314426, "body": "You don&#39;t have compiler errors, but I bet you have warnings (if not turned off..)"}, {"owner": {"reputation": 7673, "user_id": 3004881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lFgVw.jpg?s=128&g=1", "display_name": "Dan Getz", "link": "https://stackoverflow.com/users/3004881/dan-getz"}, "edited": false, "score": 0, "creation_date": 1433344878, "post_id": 30624093, "comment_id": 49314550, "body": "When I run that code, it asks me for input, and does not go into an infinite loop. Either you posted the wrong code, or you&#39;re not telling us &quot;the desired behavior, a specific problem or error and the shortest code necessary to reproduce it&quot; in your question. See <a href=\"http://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7673, "user_id": 3004881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lFgVw.jpg?s=128&g=1", "display_name": "Dan Getz", "link": "https://stackoverflow.com/users/3004881/dan-getz"}, "edited": false, "score": 0, "creation_date": 1433344987, "post_id": 30624093, "comment_id": 49314643, "body": "@DanGetz there is a UB, so you might not get the same result as OP does."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433345049, "post_id": 30624093, "comment_id": 49314697, "body": "@Priya Sharma Please don&#39;t fix the code in the question on the fly. It is invalidating the valid answers."}, {"owner": {"reputation": 1, "user_id": 4284376, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-96rYQM1YjZw/AAAAAAAAAAI/AAAAAAAAAC4/gOhFYI7_CeY/photo.jpg?sz=128", "display_name": "Priya Sharma", "link": "https://stackoverflow.com/users/4284376/priya-sharma"}, "edited": false, "score": 0, "creation_date": 1433345342, "post_id": 30624093, "comment_id": 49314939, "body": "I am using ideone.com (online compiler), it is not asking for any input."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1433345726, "post_id": 30624093, "comment_id": 49315256, "body": "You appear to misunderstand how websites work :/"}, {"owner": {"reputation": 7673, "user_id": 3004881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lFgVw.jpg?s=128&g=1", "display_name": "Dan Getz", "link": "https://stackoverflow.com/users/3004881/dan-getz"}, "edited": false, "score": 0, "creation_date": 1433391464, "post_id": 30624093, "comment_id": 49334850, "body": "It doesn&#39;t look like ideone.com will emulate an interactive terminal with input and output for you. You should be compiling and running programs like this on your own computer."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1433344666, "creation_date": 1433344666, "answer_id": 30624197, "question_id": 30624093, "link": "https://stackoverflow.com/questions/30624093/stack-implementation-using-array/30624197#30624197", "title": "Stack Implementation using array", "body": "<p>You could start by having <code>CreateStack</code> return something, as it is expected to.</p>\n"}, {"tags": [], "owner": {"reputation": 1614, "user_id": 2708768, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/da49bf507d07666987c1546e894dee8d?s=128&d=identicon&r=PG", "display_name": "Mustafa Berkay Mutlu", "link": "https://stackoverflow.com/users/2708768/mustafa-berkay-mutlu"}, "is_accepted": false, "score": 0, "last_activity_date": 1433534987, "creation_date": 1433534987, "answer_id": 30674971, "question_id": 30624093, "link": "https://stackoverflow.com/questions/30624093/stack-implementation-using-array/30674971#30674971", "title": "Stack Implementation using array", "body": "<p>First of all, I tried <a href=\"http://ideone.com/\" rel=\"nofollow\">ideone.com</a> and it is not asking for user input. So I suggest you to install a compiler to your own computer and compile yourself.</p>\n\n<p><strong>1.</strong> Your if statement in <code>StackPush(stack, int)</code> method is wrong, it should be <code>StackIsFull(stack)</code>, not <code>StackIsEmpty(stack)</code></p>\n\n<pre><code>void StackPush(stack *s, int data)\n{\n    if(StackIsFull(s))\n    {\n        printf(\"Stack overflow\\n\");\n        exit(1);\n    }\n\n    s-&gt;array[++s-&gt;top] = data;\n}\n</code></pre>\n\n<p><strong>2.</strong> You didn't used the variable <code>element</code> in your <code>StackSearch(stack, int)</code> method. So I replaced it with the variable <code>data</code></p>\n\n<pre><code>void StackSearch(stack *s, int data)\n{\n    int i, j;\n    int counter = 0;\n\n    if(StackIsEmpty(s)){\n        printf(\"Stack Is Empty\\n\");\n    }\n    else\n    {\n        for(i = s-&gt;top, j = 1 ; i &gt;= 0 ; i--, j++)\n        {\n            if(data == s-&gt;array[i])\n            {\n                counter++;\n                printf(\"Element %d found at position %d\\n\", data, j);\n            }\n        }\n\n        if(counter == 0)\n            printf(\"Element not found in stack\\n\");\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>Also, for the record, this method prints the index based from top, not bottom.</p>\n\n<p>Those are the only important changes I've made. But I've made some changes to fix code format and output format, you can find the complete code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* Stack has three properties. capacity stands for the maximum number of  elements stack can hold.\n    top stands for the current size of the stack and array is the array of elements */\ntypedef struct Stack\n{\n    int capacity;\n    int top;\n    int *array;\n}stack;\n\n\nstack* CreateStack(int);\nvoid StackDestroy(stack*);\n\nint StackIsEmpty(stack*);\nint StackIsFull(stack*);\n\nvoid StackPush(stack*, int);\nint StackPop(stack*);\n\nvoid Display(stack*);\nvoid StackSearch(stack*, int);\n\nint StackTop(stack*);\nint StackSize(stack*);\n\n\n/* CreateStack function takes as argument the maximum number of elements the stack can hold, creates\n  a stack according to it and returns a pointer to the stack. */\nstack* CreateStack(int maxSize)\n{\n    /* Create a stack*/\n    stack *s;\n    s = (stack*) malloc(sizeof(stack));\n\n    /* Initialize it's properties*/\n    s-&gt;array = (int*) malloc(sizeof(int) * maxSize);\n\n    s-&gt;capacity = maxSize;\n    s-&gt;top = -1;\n\n    return s;\n}\n\n\n/* StackDestroy function will destroy the stack after the function is   called. */\nvoid StackDestroy(stack *s)\n{\n    free(s-&gt;array);\n\n    s-&gt;array = NULL;\n    s-&gt;capacity = 0;\n    s-&gt;top = -1;\n\n    printf(\"Stack is destroyed.\\n\");\n}\n\n\nint StackIsEmpty(stack *s)\n{\n    return s-&gt;top &lt; 0;\n}\n\n\nint StackIsFull(stack *s)\n{\n    return (s-&gt;top == s-&gt;capacity-1);\n}\n\n\nvoid StackPush(stack *s, int data)\n{\n    if(StackIsFull(s))\n    {\n        printf(\"Cannot push, stack overflow.\\n\");\n    }\n    else\n    {\n        s-&gt;array[++s-&gt;top] = data;\n    }\n}\n\n\nint StackPop(stack *s)\n{\n    if(StackIsEmpty(s))\n    {\n        printf(\"Cannot pop, stack is empty\\n\");\n    }\n    else\n    {\n        return (s-&gt;array[s-&gt;top--]);\n    }\n}\n\n\nvoid Display(stack *s)\n{\n    int i;\n\n    if(StackIsEmpty(s))\n        printf(\"Stack Is Empty\\n\");\n\n    else{\n\n        printf(\"___STACK___\\n\");\n\n        for(i = s-&gt;top ; i &gt;= 0 ; i--){\n            printf(\"%3d: %d\\n\", i, s-&gt;array[i]);\n        }\n    }\n}\n\n\nvoid StackSearch(stack *s, int data)\n{\n    int i, j;\n    int counter = 0;\n\n    if(StackIsEmpty(s)){\n        printf(\"Stack Is Empty\\n\");\n    }\n    else\n    {\n        for(i = s-&gt;top, j = 1 ; i &gt;= 0 ; i--, j++)\n        {\n            if(data == s-&gt;array[i])\n            {\n                counter++;\n                printf(\"Element %d found at position %d\\n\", data, j);\n            }\n        }\n\n        if(counter == 0)\n            printf(\"Element not found in stack\\n\");\n    }\n    printf(\"\\n\");\n}\n\n\nint StackTop(stack *s)\n{\n    return s-&gt;array[s-&gt;top];\n}\n\n\nint StackSize(stack *s)\n{\n    return s-&gt;top;\n}\n\nint main() {\n    int choice, item, size;\n\n    printf(\"Enter size of stack: \");\n    scanf(\"%d\", &amp;size);\n    stack *s = CreateStack(size);\n\n    printf(\"Implementation of Stack\\n\");\n    do\n    {\n        printf(\"\\nMain Menu\");\n        printf(\"\\n1.Push \\n2.Pop \\n3.Search \\n4.Display \\n5.Stack Top \\n6.Stack Size \\n7.Destroy Stack \\n8.exit\");\n        printf(\"\\nEnter Your Choice: \");\n        scanf(\"%d\", &amp;choice);\n\n        switch (choice)\n        {\n            case 1:\n                printf(\"\\nEnter The element to be pushed: \");\n                scanf(\"%d\", &amp;item);\n                StackPush(s, item);\n            break;\n\n            case 2:\n                item = StackPop(s);\n                printf(\"\\nThe popped element is %d\", item);\n            break;\n\n            case 3:\n                printf(\"\\nEnter element to be searched: \");\n                scanf(\"%d\", &amp;item);\n                StackSearch(s, item);\n            break;\n\n            case 4:\n                Display(s);\n            break;\n\n            case 5:\n                item=StackTop(s);\n                printf(\"\\nThe last inserted element is %d\",item);\n            break;\n\n            case 6:\n                item = StackSize(s);\n                printf(\"\\nThe size of stack is %d\", item + 1);\n            break;\n\n            case 7:\n                StackDestroy(s);\n            break;\n\n            case 8:\n                exit(0);\n        }\n    } while(1);\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4284376, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-96rYQM1YjZw/AAAAAAAAAAI/AAAAAAAAAC4/gOhFYI7_CeY/photo.jpg?sz=128", "display_name": "Priya Sharma", "link": "https://stackoverflow.com/users/4284376/priya-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1433534987, "creation_date": 1433344362, "last_edit_date": 1433534650, "question_id": 30624093, "link": "https://stackoverflow.com/questions/30624093/stack-implementation-using-array", "title": "Stack Implementation using array", "body": "<p>I made this program on stack implementation using array. It is running in an infinite loop without asking the user for input. </p>\n\n<p>Can someone point out the necessary changes required in this program. The code is running and has no compile error, there is a logical error of where to place the CreateStack().</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* Stack has three properties. capacity stands for the maximum number of  elements stack can hold.\n    top stands for the current size of the stack and array is the array of elements */\n\ntypedef struct Stack\n{\n    int capacity;\n    int top;\n    int *array;\n}stack;\n\n\nstack* CreateStack(int);\nvoid StackDestroy(stack*);\n\nint StackIsEmpty(stack*);\nint StackIsFull(stack*);\n\nvoid StackPush(stack*, int);\nint StackPop(stack*);\n\nvoid Display(stack*);\nvoid StackSearch(stack*, int);\n\nint StackTop(stack*);\nint StackSize(stack*);\n\n\n/* CreateStack function takes as argument the maximum number of elements the stack can hold, creates\n  a stack according to it and returns a pointer to the stack. */\n\nstack* CreateStack(int maxSize)\n{\n    /* Create a stack*/\n    stack *s;\n    s=(stack*)malloc(sizeof(stack));\n\n    /* Initialize it's properties*/\n    s-&gt;array = (int *)malloc(sizeof(int)*maxSize);\n\n    s-&gt;capacity=maxSize;\n    s-&gt;top=-1;\n\n    return s;\n}\n\n\n/* StackDestroy function will destroy the stack after the function is   called. */\n\nvoid StackDestroy(stack *s)\n{\n    free(s-&gt;array);\n\n    s-&gt;array=NULL;\n    s-&gt;capacity=0;\n    s-&gt;top=-1;\n}\n\n\nint StackIsEmpty(stack *s)\n{\n    return s-&gt;top&lt;0;\n}\n\n\nint StackIsFull(stack *s)\n{\n    return (s-&gt;top==s-&gt;capacity-1);\n}\n\n\nvoid StackPush(stack *s,int data)\n{\n    if(StackIsEmpty(s))\n    {\n        printf(\"Stack overflow\\n\");\n        exit(1);\n    }\n\n    s-&gt;array[++s-&gt;top]=data;\n}\n\n\nint StackPop(stack *s)\n{\n    if(StackIsEmpty(s))\n    {\n        printf(\"Stack Underflow\\n\");\n        exit(1);\n    }\n\n    return (s-&gt;array[s-&gt;top--]);\n}\n\n\nvoid Display(stack *s)\n{\n    int i;\n\n    if(StackIsEmpty(s))\n        printf(\"Stack Is Empty\\n\");\n\n    else\n        for(i=s-&gt;top;i&gt;=0;i--)\n            printf(\"%d\\n\", s-&gt;array[i]);\n}\n\n\nvoid StackSearch(stack *s, int data)\n{\n    int i, j, element;\n    int counter = 0;\n    if(StackIsEmpty(s))\n        printf(\"Stack Is Empty\\n\");\n\n    else\n    {\n        for(i=s-&gt;top,j=1;i&gt;=0;i--,j++)\n        {\n            if(data==s-&gt;array[i])\n            {\n                counter++;\n                printf(\"Element %d found at position %d\",element, j);\n                printf(\"\\n\");\n            }\n        }\n        if(counter == 0)\n            printf(\"Element not found in stack\\n\");\n    }\n    printf(\"\\n\");\n}\n\n\nint StackTop(stack *s)\n{\n    return s-&gt;array[s-&gt;top];\n}\n\n\nint StackSize(stack *s)\n{\n    return s-&gt;top;\n}\n\nint main() {\n    int choice, item, size;\n\n    printf(\"Enter size of stack:\");\n    scanf(\"%d\", &amp;size);\n    stack *s = CreateStack(size);\n\n    printf(\"Implementation of Stack\\n\");\n    do\n    {\n        printf(\"\\nMain Menu\");\n        printf(\"\\n1.Push \\n2.Pop \\n3.Search \\n4.Display \\n5.Stack Top \\n6.Stack Size \\n7.Destroy Stack \\n8.exit\");\n        printf(\"\\nEnter Your Choice\");\n        scanf(\"%d\", &amp;choice);\n\n        switch (choice)\n        {\n            case 1:\n                printf(\"\\nEnter The element to be pushed\");\n                scanf(\"%d\", &amp;item);\n                StackPush(s, item);\n            break;\n\n            case 2:\n                item =StackPop(s);\n                printf(\"\\nThe popped element is %d\", item);\n            break;\n\n            case 3:\n                printf(\"\\nEnter element to be searched\");\n                scanf(\"%d\", &amp;item);\n                StackSearch(s, item);\n            break;\n\n            case 4:\n                Display(s);\n            break;\n\n            case 5:\n                item=StackTop(s);\n                printf(\"\\nThe last inserted element is %d\",item);\n            break;\n\n            case 6:\n                item=StackSize(s);\n                printf(\"\\nThe size of stack is %d\",item);\n            break;\n\n            case 7:\n                StackDestroy(s);\n            break;\n\n            case 8:\n                exit(0);\n        }\n    } while(1);\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "edited": false, "score": 0, "creation_date": 1433342534, "post_id": 30623231, "comment_id": 49312626, "body": "That&#39;s not a multiple increment strictly though,former one is assignment, the latter is the incremental code strictly."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1433342562, "post_id": 30623231, "comment_id": 49312647, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19236658/is-it-possible-to-do-multiple-operations-in-increment-part-of-for-loop-in-c-c\">Is it possible to do multiple operations in increment part of for loop in C/C++?</a>"}, {"owner": {"reputation": 1281, "user_id": 648633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfc58dd0f861020511073f08b85b63dc?s=128&d=identicon&r=PG", "display_name": "onitake", "link": "https://stackoverflow.com/users/648633/onitake"}, "edited": false, "score": 0, "creation_date": 1433342711, "post_id": 30623231, "comment_id": 49312766, "body": "On a different note, I&#39;d avoid for loops without an termination condition. You can always exit the loop with a break, but if you forget it, ..."}], "answers": [{"tags": [], "owner": {"reputation": 8639, "user_id": 424406, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/7Avez.jpg?s=128&g=1", "display_name": "rounak", "link": "https://stackoverflow.com/users/424406/rounak"}, "is_accepted": false, "score": 0, "last_activity_date": 1433342488, "creation_date": 1433342488, "answer_id": 30623314, "question_id": 30623231, "link": "https://stackoverflow.com/questions/30623231/what-do-multiple-increments-mean-in-a-for-loop/30623314#30623314", "title": "What do multiple increments mean in a for loop?", "body": "<p>Yes, the two last expressions will be executed after each iteration of the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 1503, "user_id": 135669, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e9db14b762e9f4ca5a81cf29bff95292?s=128&d=identicon&r=PG", "display_name": "foxx1337", "link": "https://stackoverflow.com/users/135669/foxx1337"}, "is_accepted": false, "score": 1, "last_activity_date": 1433342491, "creation_date": 1433342491, "answer_id": 30623315, "question_id": 30623231, "link": "https://stackoverflow.com/questions/30623231/what-do-multiple-increments-mean-in-a-for-loop/30623315#30623315", "title": "What do multiple increments mean in a for loop?", "body": "<p>Have a look at the <a href=\"http://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow\">comma operator</a>. Basically, the increment part of the <code>for</code> consists of an expression with the comma operator. So your assumption is correct.</p>\n"}, {"tags": [], "owner": {"reputation": 911, "user_id": 214063, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZbqM8.png?s=128&g=1", "display_name": "Glenn Smith", "link": "https://stackoverflow.com/users/214063/glenn-smith"}, "is_accepted": false, "score": 5, "last_activity_date": 1433342564, "creation_date": 1433342564, "answer_id": 30623344, "question_id": 30623231, "link": "https://stackoverflow.com/questions/30623231/what-do-multiple-increments-mean-in-a-for-loop/30623344#30623344", "title": "What do multiple increments mean in a for loop?", "body": "<p>In this case, on every iteration of the loop, both statements are called. It appears to be some sort of linked-list. You can clearly see how this works if you write it as a while loop:</p>\n\n<pre><code>p = prevp-&gt;s.ptr;\nwhile (true) {\n    //Loop body here\n\n    prevp = p;\n    p = p-&gt;s.ptr;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "edited": false, "score": 0, "creation_date": 1433343603, "post_id": 30623613, "comment_id": 49313507, "body": "Are you sure this is the right format of the <code>for</code> loop?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "edited": false, "score": 0, "creation_date": 1433343735, "post_id": 30623613, "comment_id": 49313605, "body": "@banach-space Your comment would be much more helpful if you were expanding a bit. But it&#39;s ok, I&#39;ve figured it out. On the way on updating the answer"}, {"owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "edited": false, "score": 0, "creation_date": 1433343905, "post_id": 30623613, "comment_id": 49313738, "body": "I figured you would figure it out yourself ;-)"}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 2, "last_activity_date": 1433344022, "last_edit_date": 1433344022, "creation_date": 1433343168, "answer_id": 30623613, "question_id": 30623231, "link": "https://stackoverflow.com/questions/30623231/what-do-multiple-increments-mean-in-a-for-loop/30623613#30623613", "title": "What do multiple increments mean in a for loop?", "body": "<p>The <code>for</code> loop has the following format:</p>\n\n<pre><code>for( &lt;initialization&gt;; &lt;condition&gt;; &lt;recurring operation&gt; ) ....\n</code></pre>\n\n<p><em><code>&lt;initialization&gt;</code></em> is taking place before the loop is entered first time (if at all). <br>\n<em><code>&lt;recurring operation&gt;</code></em> is performed <em>after</em> each iteration. <br>\n<em><code>&lt;condition&gt;</code></em> is checked before each iteration. <br></p>\n\n<p>In your case: <br>\n<code>&lt;initialization&gt;</code> = <code>p = prevp-&gt;s.ptr</code> - initializing p to some pointer value <br>\n<code>&lt;condition&gt;</code> = nothing. So the loop will run forever, unless there is a <code>break</code> statement or some other flow control expression breaking the loop encountered.<br>\n<code>&lt;recurring operation&gt;</code> = <code>prevp = p, p = p-&gt;s.ptr</code>. It is updating two variables here <code>prevp</code> and <code>p</code>, such that in the next iteration they both will have the new values. The coma operator is evaluated from left to right, so first <code>prevp</code> is updated, and next the <code>p</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1433343386, "post_id": 30623675, "comment_id": 49313309, "body": "<code>expression 2</code> allows only one expression."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1433343660, "post_id": 30623675, "comment_id": 49313554, "body": "@haccks, Not true. You can use the comma operator to have multiple expression there too. It will be pretty ugly code but the syntax allows it. See it working at <a href=\"http://ideone.com/3I0Vy2\" rel=\"nofollow noreferrer\">ideone.com/3I0Vy2</a>."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1433346387, "post_id": 30623675, "comment_id": 49315721, "body": "<code>i &lt; 10, j &lt; 20;</code> will ruin the purpose of using comma operator."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1433346679, "post_id": 30623675, "comment_id": 49315939, "body": "@haccks, I agree. That was just a quick and dirty hack to show that it is legal."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1433343319, "creation_date": 1433343319, "answer_id": 30623675, "question_id": 30623231, "link": "https://stackoverflow.com/questions/30623231/what-do-multiple-increments-mean-in-a-for-loop/30623675#30623675", "title": "What do multiple increments mean in a for loop?", "body": "<p>The formal syntax of <code>for</code> statement is:</p>\n\n<pre><code>for ( clause-1 ; expression-2 ; expression-3 ) statement\n</code></pre>\n\n<p>Any of <code>clause-1</code>, <code>expression-2</code>, and <code>expression-3</code> can allow multiple expressions in them by using the <a href=\"http://en.cppreference.com/w/cpp/language/operator_other\" rel=\"nofollow\">comma operator</a>.</p>\n\n<p>In <code>clause-1</code>, you can initialize multiple variables.</p>\n\n<pre><code>for ( cp1 = s1, cp2 = s2; ...\n</code></pre>\n\n<p>In <code>expression-3</code>, you can change multiple variables.</p>\n\n<pre><code>for ( cp1 = s1, cp2 = s2; ...; ++cp1, ++cp2 )\n</code></pre>\n\n<p>In your case, <code>expression-3</code> is <code>prevp = p, p = p-&gt;s.ptr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9978, "user_id": 2986537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff296a622eb6993b28017005d1f7e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Razib", "link": "https://stackoverflow.com/users/2986537/razib"}, "is_accepted": false, "score": 0, "last_activity_date": 1433343597, "creation_date": 1433343597, "answer_id": 30623793, "question_id": 30623231, "link": "https://stackoverflow.com/questions/30623231/what-do-multiple-increments-mean-in-a-for-loop/30623793#30623793", "title": "What do multiple increments mean in a for loop?", "body": "<p>In this statement -  </p>\n\n<pre><code>for (p = prevp-&gt;s.ptr; ; prevp = p, p = p-&gt;s.ptr) \n</code></pre>\n\n<p>Actually there is no multiple increment. At the beginning of the for loop we see <code>p =  prev-&gt;s.ptr</code> which is actually initialization of <code>p</code>. </p>\n\n<p>Then the code placed in the for loop will be executed.</p>\n\n<p>After that the <code>condition</code> portion is evaluated. Here there is no condition. So the loop continues unless it is break from inside the code block of the for-loop.   </p>\n\n<p>The the increment section of the for-loop is reached. Now <code>previous</code>  point to <code>p</code> and <code>p</code> point will takes the next value. </p>\n"}], "owner": {"reputation": 225, "user_id": 4853347, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/02479a29ee587deff71e6962a7e55709?s=128&d=identicon&r=PG&f=1", "display_name": "Montao", "link": "https://stackoverflow.com/users/4853347/montao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2732, "favorite_count": 0, "accepted_answer_id": 30623613, "answer_count": 6, "score": 3, "last_activity_date": 1433344022, "creation_date": 1433342309, "question_id": 30623231, "link": "https://stackoverflow.com/questions/30623231/what-do-multiple-increments-mean-in-a-for-loop", "title": "What do multiple increments mean in a for loop?", "body": "<p>I'm reading code and I come across this code:</p>\n\n<p><code>for (p = prevp-&gt;s.ptr; ; prevp = p, p = p-&gt;s.ptr)</code></p>\n\n<p>How should I interpret it? Does the for loop have multiple increments? I've seen multiple conditions before, separated by comma, but I never saw multiple increments before. </p>\n"}, {"tags": ["c", "pipe", "fork", "ubuntu-12.04"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1433342121, "post_id": 30623107, "comment_id": 49312319, "body": "You need to <code>pipe()</code> <i>before</i>  you <code>fork()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "is_accepted": true, "score": 2, "last_activity_date": 1433342230, "creation_date": 1433342230, "answer_id": 30623203, "question_id": 30623107, "link": "https://stackoverflow.com/questions/30623107/read-write-misbehaving-with-pipes/30623203#30623203", "title": "Read Write misbehaving with pipes", "body": "<p>You're <code>fork</code>ing <em>before</em> creating the pipe, so you are indeed creating <em>two</em> pipes (four file descriptors).</p>\n\n<p>So, the <code>fd[READ_END]</code> in one of the two process isn't related anyhow with the <code>fd[WRITE_END]</code> in the other process.</p>\n\n<p>It has helped me to run <code>system(\"ls -l /proc/$$/fd/\")</code> in each process to see how the pipes are working.</p>\n"}], "owner": {"reputation": 19, "user_id": 1579232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f3c79d61fccdc0abeed3d7018a3881?s=128&d=identicon&r=PG", "display_name": "Zaid Munir", "link": "https://stackoverflow.com/users/1579232/zaid-munir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 30623203, "answer_count": 1, "score": 0, "last_activity_date": 1433342230, "creation_date": 1433341995, "question_id": 30623107, "link": "https://stackoverflow.com/questions/30623107/read-write-misbehaving-with-pipes", "title": "Read Write misbehaving with pipes", "body": "<p>I have this standard piece of code which refuses to run correctly. The read always returns zero. The write call seems to get stuck and never returns. I have tried changing the order of parent and child but does not seem to work. I fail to figure out whats wrong. A bug perhaps?? Help would be appreciated.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define READ_END 0\n#define WRITE_END 1\n\nint main()\n{\n  int pid;//,bytes;\n  pid=fork();\n  char buffer[100];\n  char msg[]=\"Hello\";\n  //const char *msg2=\"Hi\";\n  int fd[2];\n  //int p2[2];\n\n  /* create the pipe */\n  if (pipe(fd) == -1) \n  {\n    fprintf(stderr,\"Pipe failed\");\n    return 1;\n  }\n\n\n  if (pid &lt; 0) \n  { /* error occurred */\n    fprintf(stderr, \"Fork Failed\");\n    return 1;\n  }\n  if (pid &gt; 0) \n  { /* parent process */\n    /* close the unused end of the pipe */\n    close(fd[WRITE_END]);\n    /* read from the pipe */\n    int bytesRead = read(fd[READ_END], buffer, 100);\n    printf(\"read %d\",bytesRead);\n    /* close the write end of the pipe */\n    close(fd[READ_END]);\n    wait(NULL);\n  }\n  else \n  { \n    /* child process */\n    /* close the unused end of the pipe */\n    close(fd[READ_END]);\n    /* write to the pipe */\n    int bytesWritten = write(fd[WRITE_END], msg, strlen(msg)+1);\n    printf(\"%d\",bytesWritten);\n    /* close the write end of the pipe */\n    close(fd[WRITE_END]);\n\n\n  }\n\n  return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "fork", "linux-device-driver"], "comments": [{"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 4, "creation_date": 1433344310, "post_id": 30622769, "comment_id": 49314071, "body": "I don&#39;t understand why pnotify (<a href=\"http://lwn.net/Articles/153187/\" rel=\"nofollow noreferrer\">lwn.net/Articles/153187</a>) never made it into the kernel, that would&#39;ve been perfect!"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 2331251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eXxP0.jpg?s=128&g=1", "display_name": "Daniel Meir Doron", "link": "https://stackoverflow.com/users/2331251/daniel-meir-doron"}, "edited": false, "score": 0, "creation_date": 1433959109, "post_id": 30753423, "comment_id": 49580204, "body": "that would entail creating a minimal LSM module, in effect replacing the default DAC or selinux LSM module. I do not want to replace the default LSM module just for the purpose of hooking..."}], "tags": [], "owner": {"reputation": 180, "user_id": 4396287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/044d08510b8a33d874dfc71654e0ea5b?s=128&d=identicon&r=PG&f=1", "display_name": "borisp", "link": "https://stackoverflow.com/users/4396287/borisp"}, "is_accepted": false, "score": 1, "last_activity_date": 1433931325, "creation_date": 1433931325, "answer_id": 30753423, "question_id": 30622769, "link": "https://stackoverflow.com/questions/30622769/how-to-listen-to-new-forks-in-kernel/30753423#30753423", "title": "How to listen to new forks in kernel", "body": "<p>You could try to use a <a href=\"http://taiga.selinuxproject.org/~rhaines/NB4-diagrams/10-fork.png\" rel=\"nofollow\">LSM hook</a>\n to do this. The function you want to implement is security_task_create </p>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 2331251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eXxP0.jpg?s=128&g=1", "display_name": "Daniel Meir Doron", "link": "https://stackoverflow.com/users/2331251/daniel-meir-doron"}, "edited": false, "score": 0, "creation_date": 1433957442, "post_id": 30763038, "comment_id": 49579152, "body": "&quot;SystemTap provides free software (GPL) infrastructure to simplify the gathering of information about the running Linux system. This assists diagnosis of a performance or functional problem&quot;  I am not looking at troubleshooting a problem but rather run-time information in my module so I can act upon it."}, {"owner": {"reputation": 31, "user_id": 4775261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d583afa1fa9e47df5b184a37b8472b73?s=128&d=identicon&r=PG&f=1", "display_name": "pavan", "link": "https://stackoverflow.com/users/4775261/pavan"}, "reply_to_user": {"reputation": 109, "user_id": 2331251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eXxP0.jpg?s=128&g=1", "display_name": "Daniel Meir Doron", "link": "https://stackoverflow.com/users/2331251/daniel-meir-doron"}, "edited": false, "score": 0, "creation_date": 1433958443, "post_id": 30763038, "comment_id": 49579765, "body": "Wouldn&#39;t your requirement fall into the category of &quot;gathering of information about the running Linux system&quot;? I know for a fact that SystemTap lacks the intelligence/capacity to compel you to use this information to troubleshoot alone ;)"}], "tags": [], "owner": {"reputation": 31, "user_id": 4775261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d583afa1fa9e47df5b184a37b8472b73?s=128&d=identicon&r=PG&f=1", "display_name": "pavan", "link": "https://stackoverflow.com/users/4775261/pavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1433956496, "creation_date": 1433956496, "answer_id": 30763038, "question_id": 30622769, "link": "https://stackoverflow.com/questions/30622769/how-to-listen-to-new-forks-in-kernel/30763038#30763038", "title": "How to listen to new forks in kernel", "body": "<p>I don't know about the state of SystemTap but I think you can do a function boundary tracing like DTrace on Solaris using SystemTap. You'd need to know which linux kernel function to trace though, but that's the simpler part I presume.</p>\n"}, {"tags": [], "owner": {"reputation": 180, "user_id": 4396287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/044d08510b8a33d874dfc71654e0ea5b?s=128&d=identicon&r=PG&f=1", "display_name": "borisp", "link": "https://stackoverflow.com/users/4396287/borisp"}, "is_accepted": false, "score": 1, "last_activity_date": 1435068501, "creation_date": 1435068501, "answer_id": 31005103, "question_id": 30622769, "link": "https://stackoverflow.com/questions/30622769/how-to-listen-to-new-forks-in-kernel/31005103#31005103", "title": "How to listen to new forks in kernel", "body": "<p>There are a few possible hacks you could use to solve this.</p>\n\n<p>You could hook the relevant syscall table entry, replace sys_fork with your code and call the original sys_fork. </p>\n\n<p>Otherwise, you could hook sys_fork itself.</p>\n"}], "owner": {"reputation": 109, "user_id": 2331251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eXxP0.jpg?s=128&g=1", "display_name": "Daniel Meir Doron", "link": "https://stackoverflow.com/users/2331251/daniel-meir-doron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 3, "answer_count": 3, "score": 10, "last_activity_date": 1435068501, "creation_date": 1433341109, "last_edit_date": 1434896905, "question_id": 30622769, "link": "https://stackoverflow.com/questions/30622769/how-to-listen-to-new-forks-in-kernel", "title": "How to listen to new forks in kernel", "body": "<p>kernel: 3.4+ </p>\n\n<p>Does anyone know of any other way beside using kernel process events connector to \"listen\" to new forks. </p>\n\n<p>I want to be simply notified in my module every time a new task (process) is created.</p>\n"}, {"tags": ["c", "arrays", "pointers", "static", "return"], "comments": [{"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 4, "creation_date": 1433341241, "post_id": 30622741, "comment_id": 49311636, "body": "If you have a function that performs a <code>malloc</code>, you should also have a matching function to do <code>free()</code>, even if it is just a wrapper. It is bad design to call <code>free(pointer)</code> in your <code>main</code> - Which you&#39;re not doing in the example, thus leaking memory...kinda."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 7, "creation_date": 1433341297, "post_id": 30622741, "comment_id": 49311675, "body": "Standard Warning : Please <a href=\"http://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family in <code>C</code>."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1433341757, "post_id": 30622741, "comment_id": 49312034, "body": "<code>malloc</code> returns a pointer and is a big part of the standard lib. What do you think?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1433342036, "post_id": 30622741, "comment_id": 49312244, "body": "How would you get along in any non-trivial program in C without that??"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433353963, "post_id": 30622741, "comment_id": 49320357, "body": "Close voters: Seriously, if people think good/bad program design is &quot;opinion-based&quot; or <i>&quot;the arts&quot;</i>, then you need to get out of the garage and get some proper programming education. What&#39;s good and bad program design is <i>not</i> opinion-based, there is plenty of research on the topic and there is plenty of consensus among programmers all around the world. If people can&#39;t ask program design questions on SO, then I don&#39;t know what can be asked here."}], "answers": [{"comments": [{"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1433341674, "post_id": 30622827, "comment_id": 49311966, "body": "what is the wrapper looks like, I do not know about it"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1433341752, "post_id": 30622827, "comment_id": 49312025, "body": "It&#39;s not necessarily bad - it just transfers the responsibility for freeing the allocated memory to the caller"}, {"owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "edited": false, "score": 1, "creation_date": 1433342259, "post_id": 30622827, "comment_id": 49312424, "body": "Which is bad design, because the caller shouldn&#39;t be assumed to free those structures."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1433353038, "post_id": 30622827, "comment_id": 49319823, "body": "@IshayPeled Unless you are writing your own memory allocation routine or some such, then that is <i>bad design</i> and one of the most common causes for memory leaks in all software released the last decades."}], "tags": [], "owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "is_accepted": true, "score": 4, "last_activity_date": 1433341812, "last_edit_date": 1433341812, "creation_date": 1433341273, "answer_id": 30622827, "question_id": 30622741, "link": "https://stackoverflow.com/questions/30622741/return-pointer-from-a-c-function-is-good-bad-design/30622827#30622827", "title": "return pointer from a C function is good/bad design?", "body": "<p>The only reason it is bad is because you don't have any memory managing structure behind it. In your current code, you have a memory leak because you allocate a <code>person</code> struct via malloc() but do not free it.</p>\n\n<p>Consider writing a wrapper function that handles that memory management for you like so:</p>\n\n<pre><code>void freePerson(struct person * personToDelete)\n{\n    free(personToDelete);\n}\n</code></pre>\n\n<p>Then in your main:</p>\n\n<pre><code>int main()\n{\n   person* pointer = getPersonInfo();\n   freePerson(pointer); // After you are done using it\n   return 0;\n}\n</code></pre>\n\n<p>I also have to warn against casting the results of <code>malloc()</code>. In my experience it can result in undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1433345886, "post_id": 30622978, "comment_id": 49315374, "body": "what is the encapsulation you mean, this is in C"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1433346623, "post_id": 30622978, "comment_id": 49315893, "body": "Encapsulation is a term not specific to OOP - you encapsulate the memory allocation in the function you use to calculate it"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433353298, "post_id": 30622978, "comment_id": 49319990, "body": "&quot;only one possible out parameter&quot; Err... no? C has pointers. Passing parameters by pointers is everyday C programming. Pointer-to-pointers exist pretty much for the sole reason of returning dynamic memory through a parameter. &quot;Memory has to be allocated on the heap every time&quot;. No, you can write static memory pools or use alloca or similar. And where memory is allocated is not really related to the program design."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433353509, "post_id": 30622978, "comment_id": 49320120, "body": "@IshayPeled Encapsulation <i>is</i> a term specific to OOP, but <b>OO design has nothing to do with language choice</b>. Some languages have support for OO features, but just because they do, it doesn&#39;t necessarily mean that your program turns OO just because you program in a language with such features. Similarly, you can use OO design when writing C programs. <a href=\"http://stackoverflow.com/questions/351733/can-you-write-object-oriented-code-in-c\" title=\"can you write object oriented code in c\">stackoverflow.com/questions/351733/&hellip;</a>"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1433398540, "post_id": 30622978, "comment_id": 49337406, "body": "Lyndon - encapsulation is a term in the English language, please look it up and see what I meant by encapsulating memory allocation. If you return the memo"}], "tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": 0, "last_activity_date": 1433346679, "last_edit_date": 1433346679, "creation_date": 1433341698, "answer_id": 30622978, "question_id": 30622741, "link": "https://stackoverflow.com/questions/30622741/return-pointer-from-a-c-function-is-good-bad-design/30622978#30622978", "title": "return pointer from a C function is good/bad design?", "body": "<p>It's a matter of decision more than everything else. </p>\n\n<p>Both options are valid as long as you're aware of each pro's and con's</p>\n\n<p>Returning pointer pros:</p>\n\n<ol>\n<li>Encapsulation of memory allocation</li>\n<li>Support dynamic memory sizes on the fly</li>\n</ol>\n\n<p>Returning pointer cons:</p>\n\n<ol>\n<li>only one possible out parameter</li>\n<li>Memory has to be allocated on the heap every time</li>\n</ol>\n\n<p>Accepting pointer as input pros are exactly the opposite:</p>\n\n<ol>\n<li>multiple out parameters</li>\n<li>Memory does not have to be allocated on the heap, the caller can use a variable on it's stack to use as output parameter</li>\n</ol>\n\n<p>Accepting pointer as input cons:</p>\n\n<ol>\n<li>No encapsulation of memory allocation</li>\n<li>No support for dynamic memory sizes on the fly - sizes must be fixed or pre-specified</li>\n</ol>\n\n<p>In your specific example, I'd use an output parameter as it is fixed size and can easily be called without allocating memory dynamically.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 3639612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af23bfbf7f0bfe3873a2b4078d427cb7?s=128&d=identicon&r=PG&f=1", "display_name": "user3639612", "link": "https://stackoverflow.com/users/3639612/user3639612"}, "is_accepted": false, "score": 0, "last_activity_date": 1433341831, "creation_date": 1433341831, "answer_id": 30623023, "question_id": 30622741, "link": "https://stackoverflow.com/questions/30622741/return-pointer-from-a-c-function-is-good-bad-design/30623023#30623023", "title": "return pointer from a C function is good/bad design?", "body": "<p>To be a good design you must have a matching function that frees the allocated memory when it is no longer needed.</p>\n"}, {"comments": [{"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1433343275, "post_id": 30623391, "comment_id": 49313213, "body": "somehow, the data.c is used to keep all the data needed by the program, and then the main function in main file will fetch the needed data from the data.c file, in your example, looks like the data is kept in caller file? And how about if the person is a array?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1433352758, "post_id": 30623391, "comment_id": 49319631, "body": "@ratzip With this approach, everything is allocated by the data.c file and only that file knows what to do with it. The actual data is stored on the heap... not in a file. If you want an array, simply <code>person* p[n];</code> and call the create function in a loop."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1433342671, "creation_date": 1433342671, "answer_id": 30623391, "question_id": 30622741, "link": "https://stackoverflow.com/questions/30622741/return-pointer-from-a-c-function-is-good-bad-design/30623391#30623391", "title": "return pointer from a C function is good/bad design?", "body": "<p>It is bad practice to return pointers to private variables. Also, with the current design, your .c file can only have one instance of the person object. </p>\n\n<p>And almost needless to say, the same code which dynamically allocates an object should also be responsible of freeing it. Code which is written so that some other module in the program is expected to clean up the mess always ends up with memory leaks, per design.</p>\n\n<p>If you are writing an at least somewhat complex data type, where you need to restrict access to private variables, have multiple instances of the struct etc, then it is good practice to use \"opaque type\" instead. Example (not tested):</p>\n\n<p>// data.h</p>\n\n<pre><code>#ifndef DATA_H \n#define DATA_H\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n\ntypedef struct person person; // opaque type\n\nperson* person_create (void);\n\nvoid person_delete (person* p);\n\nvoid person_set_age (person* p, int age);\nint  person_get_age (const person* p);\n// ... and so on, setters/getters\n\n#endif // DATA_H\n</code></pre>\n\n<p>// data.c</p>\n\n<pre><code>#include \"data.h\"\n\nstruct\n{\n  int age;\n  int number;\n} person;    \n\n\nperson* person_create (void)\n{\n  return malloc(sizeof(struct person));\n}\n\nvoid person_delete (person* p)\n{\n  free(p);\n}\n\nvoid person_set_age (person* p, int age)\n{\n  p-&gt;age = age;\n}\n\nint person_get_age (const person* p)\n{\n  return p-&gt;age;\n}\n</code></pre>\n\n<p>// caller:</p>\n\n<pre><code>#include \"data.h\"\n\nint main()\n{\n   person* p = person_create();\n\n   person_set_age(p, 50);\n   printf(\"%d\", person_get_age(p));\n\n   person_delete(p);\n   return 0;\n}\n</code></pre>\n\n<p>Some things to consider: </p>\n\n<ul>\n<li>Always use header guards in h files. </li>\n<li>Never use empty parameter list <code>()</code> for C functions (but always do in C++).</li>\n<li>Don't cast the result of malloc in C (but always do in C++).</li>\n<li>There needs to be some error handling added to this code in case malloc fails.</li>\n</ul>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1657, "favorite_count": 0, "closed_date": 1433365329, "accepted_answer_id": 30622827, "answer_count": 4, "score": 4, "last_activity_date": 1433346679, "creation_date": 1433341045, "last_edit_date": 1495542124, "question_id": 30622741, "link": "https://stackoverflow.com/questions/30622741/return-pointer-from-a-c-function-is-good-bad-design", "closed_reason": "Opinion-based", "title": "return pointer from a C function is good/bad design?", "body": "<p>I want to know if return pointer from a C function is good/bad design? If it is a bad practice, what would be a good practice in the following example:</p>\n\n<p>The question is a continued part of:\n<a href=\"https://stackoverflow.com/questions/30621760/c-function-return-static-variable\">c function return static variable</a></p>\n\n<p>in <code>data.h</code> file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n\ntypedef struct\n{\n   int age;\n   int number;\n} person;\n\nperson * getPersonInfo();\n</code></pre>\n\n<p>in <code>data.c</code></p>\n\n<pre><code>#include \"data.h\"\nstatic struct person* person_p = NULL;\n\nperson * getPersonInfo()\n{\n   person_p = (struct person*)malloc(10 * sizeof(struct person));\n   return person_p;\n}\n</code></pre>\n\n<p>in <code>main.c</code></p>\n\n<pre><code>#include \"data.h\"\n\nint main()\n{\n   person* pointer = getPersonInfo();\n   return 0;\n}\n</code></pre>\n\n<p>basically, the <code>main</code> function in <code>main</code> file needs to get the value of all the elements of array which is pointed by static pointer <code>person_p</code>, if it is not a good practice, then what a good practice should be?</p>\n"}, {"tags": ["c", "types", "casting"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1433340551, "post_id": 30622448, "comment_id": 49311063, "body": "Interessting question, could you state why you need this microoptimization?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1433340565, "post_id": 30622448, "comment_id": 49311079, "body": "<code>float result; memcpy( &amp;result, &amp;asInt, sizeof(uint32_t));return result;</code>.  You might also want to have some sort of static assertion that <code>sizeof(float) == sizeof(uint32_t)</code> even if that is quite common today."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1433340751, "post_id": 30622448, "comment_id": 49311222, "body": "To expand on @MichaelBurr&#39;s point: What you are currently doing is violating the strict aliasing rule, and is undefined behavior."}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1433340934, "post_id": 30622448, "comment_id": 49311387, "body": "Use a union. Or wrap the casts in a macro."}, {"owner": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1433340953, "post_id": 30622448, "comment_id": 49311396, "body": "@ckruczek: What kind of microoptimization are you talking about? If you mean not using float division: That&#39;s because this runs on an microcontroller which has to implement it very costly in software."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1433341002, "post_id": 30622448, "comment_id": 49311440, "body": "Yep I was talking about division. Ok thanks for your answer. Now it makes sense to me, to do it :)"}, {"owner": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1433341144, "post_id": 30622448, "comment_id": 49311553, "body": "@MichaelBurr: That would remove the need for an uint32_t variable but introduce an float variable and make it sort of even more complicated / ugly.  You&#39;re right with the static assumtion."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1433342239, "post_id": 30622448, "comment_id": 49312409, "body": "Note that there a re a lot of <i>undefined</i> codes in the binary representation of a float. Further signal special conditions, like NAN, +INF, -INF, etc. There are also two 0 representations (+0, -0). Do you really have thought about <b>all</b> implications?"}, {"owner": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433342429, "post_id": 30622448, "comment_id": 49312552, "body": "@Olaf: You&#39;re right of cause :) I&#39;m currently reading this: <a href=\"http://www.cprogramming.com/tutorial/floating_point/understanding_floating_point_representation.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/floating_point/&hellip;</a> but not to the end by now."}, {"owner": {"reputation": 3904, "user_id": 2417578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2e6626f1fc0b76fc7e8981687304f40?s=128&d=identicon&r=PG", "display_name": "sh1", "link": "https://stackoverflow.com/users/2417578/sh1"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433344524, "post_id": 30622448, "comment_id": 49314253, "body": "@Olaf, <a href=\"http://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">IEEE</a> leaves no undefined space, just a lot of NaNs.  They all require an exponent of 0xff, and the OP&#39;s code sets the exponent to 0x7e to give a random value in the range of [0.5,1.0)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3904, "user_id": 2417578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2e6626f1fc0b76fc7e8981687304f40?s=128&d=identicon&r=PG", "display_name": "sh1", "link": "https://stackoverflow.com/users/2417578/sh1"}, "edited": false, "score": 0, "creation_date": 1433345504, "post_id": 30622448, "comment_id": 49315065, "body": "@sh1: You are basically right. For NaN, however, the lower matissa bits are platform-defined, so the codes could very well be seen &quot;not defined by the standard&quot;. So, the value is still valid. In that sense, &quot;undefined&quot; is wrong - right."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433345606, "post_id": 30622448, "comment_id": 49315155, "body": "Sheintod: We might have quite different definitions about a &quot;hobby&quot;. Even for &quot;hobby&quot;, I actually prefer knowing what I do:-). However, as that is my Job, I actually <i>do</i> have to know what I do. Most important is you really know the actual format your platform uses. Then, you dig that implementaion deeply in a system-dependent library and forget about the internals (still comment the code very well !!)"}, {"owner": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433346178, "post_id": 30622448, "comment_id": 49315581, "body": "@Olaf: I do software development for a living, too. But I&#39;m more in other programming languages. This code happens to be for some kind of mood-light I&#39;m currently building for my bedroom. The question wasn&#39;t intended to discuss ieee but more of: how can i get c to do what I want. (Namely to use that bits that I have and regard them as float.) So it&#39;s more about learning some stuff I just find interessting. But at least when I&#39;m done I will know what I have done ;)"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1433346540, "post_id": 30622448, "comment_id": 49315845, "body": "@Scheintod: while the <code>memcpy()</code> doesn&#39;t get rid of a local and in fact adds another one, it has the advantages of being simple and well defined - unless there&#39;s there&#39;s something I don&#39;t understand about floating point representation. That&#39;s quite likely, but is also being discussed in other commentary (and the <code>memcpy()</code> doesn&#39;t make things worse than the reinterpret-style cast). I believe that the <code>memcpy()</code> is actually more understandable than the reinterpret-style double cast. And finally, I think there&#39;s not much value in removing locals just for the sake of removing them. They&#39;re cheap."}, {"owner": {"reputation": 223115, "user_id": 426671, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zgBsf.jpg?s=128&g=1", "display_name": "Taryn", "link": "https://stackoverflow.com/users/426671/taryn"}, "edited": false, "score": 0, "creation_date": 1433347203, "post_id": 30622448, "comment_id": 49316300, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/79555/discussion-on-question-by-scheintod-c-change-variable-type-without-casting\">moved to chat</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433347212, "post_id": 30622448, "comment_id": 49316309, "body": "The best is yet to come... Why can&#39;t ppl just phrase a clear question? Anyway, I still do not understand why that would be more ugly than the thing as such? This **is__ ugly platform-dependent stuff anyway. If will not become less ugly with flowers all around. Fact is, you <i>cannot</i> do such things &quot;beatiful&quot;. You might use a pointer to a union, but that is still ugly and would hide the actual stuff. I&#39;d prefer the explicit casts (Python&#39;s credo: &quot;explicit is better than implicit&quot;). Note to care not to aliasing: instantly return after the cast or do that in a function (possibly inline)."}], "answers": [{"comments": [{"owner": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "edited": false, "score": 0, "creation_date": 1433341234, "post_id": 30622694, "comment_id": 49311622, "body": "This looks like a nice idea. But it still needs an additional variable, does it?"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "edited": false, "score": 0, "creation_date": 1433341878, "post_id": 30622694, "comment_id": 49312119, "body": "Nope, sizeof(union convertor) == 4, a union size, as opposed to a struct only uses the maximum memory needed to keep its most expansive component."}, {"owner": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "edited": false, "score": 0, "creation_date": 1433342287, "post_id": 30622694, "comment_id": 49312448, "body": "I ended up with <code>float random_float( uint64_t seed ) {                                                               union _convertor c = { ((random_int( seed ) &amp; 0x7FFFFF) | (0x7E000000&gt;&gt;1)) };                   return c.asFloat;                                                                           }                                                                                               </code> which is a nicer and works. What I&#39;m refering to is <code>c</code> variable here. Or do you suggest casting to the union?"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "edited": false, "score": 0, "creation_date": 1433342748, "post_id": 30622694, "comment_id": 49312794, "body": "This is exactly the way to do it, I&#39;d be more explicit about the type I&#39;m using just to make it more readable: c.asInt = ((random_int( seed ) &amp; 0x7FFFFF) | (0x7E000000&gt;&gt;1)); return c.asFloat."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433343110, "post_id": 30622694, "comment_id": 49313069, "body": "An <code>int</code> can have any size beyond 15+1 bits. And it does actually. Also, a float has undefined/special encoding for special/non-value conditions (NAN, +/-INF, +/-0), etc. Also, the vaues depend on endianess fo float and int, not just the size of the int. Truely: forget about that!"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433343247, "post_id": 30622694, "comment_id": 49313190, "body": "@olaf - hence the &quot;as long as you make sure the types are identical in memory sizes&quot; note. This is an architecture specific solution. About the second part you are correct, I&#39;ll add it to my answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433343301, "post_id": 30622694, "comment_id": 49313236, "body": "I refered to your first comment. My comment also was not just about memory size. And I forget to mention alignment."}], "tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": true, "score": 6, "last_activity_date": 1433343762, "last_edit_date": 1433343762, "creation_date": 1433340899, "answer_id": 30622694, "question_id": 30622448, "link": "https://stackoverflow.com/questions/30622448/c-change-variable-type-without-casting/30622694#30622694", "title": "c: change variable type without casting", "body": "<p>You could try union - as long as you make sure the types are identical in memory sizes:</p>\n\n<pre><code>union convertor {\n    int asInt;\n    float asFloat;\n};\n</code></pre>\n\n<p>Then you can assign your int to asFloat (or the other way around if you want to). I use it a lot when I need to do bitwise operations on one hand and still get a uint32_t representation on the number on the other hand</p>\n\n<p>[EDIT]<br>\nLike many of the commentators rightfully state, you must take into consideration values that are not presentable by integers like like NAN, +INF, -INF, +0, -0.</p>\n"}, {"comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1433344596, "post_id": 30623507, "comment_id": 49314318, "body": "There are hacks that require integer operations on float&#39;s raw data, like the famous &quot;fast inverse sqrt&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1433345024, "post_id": 30623507, "comment_id": 49314678, "body": "@D-side:As much as any soft-FPU has to (that isqrt <i>is</i> actually one aspect of a Soft-PFU. However, that is deep down implementation stuff. The question above does not imply such. And as the TO apparently is not aware about reserved codes, I do not assume that&#39;s what he actually wants. However, I mostly show the drawbacks; he is still free to ignore me."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 0, "last_activity_date": 1433346523, "last_edit_date": 1433346523, "creation_date": 1433342948, "answer_id": 30623507, "question_id": 30622448, "link": "https://stackoverflow.com/questions/30622448/c-change-variable-type-without-casting/30623507#30623507", "title": "c: change variable type without casting", "body": "<p>Reinterpreting the binary representation of an int to a float would result in major problems:</p>\n\n<ul>\n<li>There are a lot of undefined codes in the binary representation of a float.</li>\n<li>Other codes represent special conditions, like NAN, +INF, -INF, +0, -0 (sic!), etc.</li>\n</ul>\n\n<p>Also, if that is a random value, even if catching all non-value representations, that would yield a very bad random distribution.</p>\n\n<p>If you are working on an MCU without FPU, you should better think about avoiding float at all. An alternative might be fraction or scaled integers. There are many implementations of algorithms which use float, but can be easily converted to fixed point types with acceptable loss of precision (or even none at all). Some might even yield more precision than float (note that single precision float has only 23 bits of mantissa, an int32 would have 31 bits (+ 1 sign for either), same for a fractional or fixed scaled int.</p>\n\n<p>Note that C11 added (optional) support for _Frac. You might want to research on that.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>According you your comments, you seem to convert the int to a float in range 0..&lt;1. For that, you can assemble the float using bit operations on an uint32_t (e.g. the original value). You just need to follow the IEEE format (presumed your toolchain does comply to the C standard! See <a href=\"https://en.wikipedia.org/wiki/IEEE_floating_point\" rel=\"nofollow\">wikipedia</a>.</p>\n\n<p>The result (still uint32_t) can then be reinterpreted by a union or pointer as described by others already. Pack that in a system-dependent, well-commented library and dig it deep. Do not forget to check about endianess and alignment (likely both the same for float and uint32_t, but important for the bit-ops).</p>\n"}, {"comments": [{"owner": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "edited": false, "score": 0, "creation_date": 1433345484, "post_id": 30624127, "comment_id": 49315052, "body": "Looks interesting. Actually I&#39;m trying to generate randoms in range 0..1 but I&#39;m not there yet."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "edited": false, "score": 0, "creation_date": 1433345865, "post_id": 30624127, "comment_id": 49315352, "body": "@Scheintod: if that&#39;s what you want, why would that be so complicated using standard? If hard-FPU, the code might not be more complicated than the hack, with soft-FPU, the compiler might be able to optimize so the result generates (almost) the same code. Have you actually tried even to compile and look at your code? Such optimization should always be the last ressort and only if really necessary."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433346053, "post_id": 30624127, "comment_id": 49315509, "body": "Hmm.. ldexpf (C11, 7.12.6.6) already requires a float argument. I suppose the TO wants to contruct a float from an integer."}, {"owner": {"reputation": 3904, "user_id": 2417578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2e6626f1fc0b76fc7e8981687304f40?s=128&d=identicon&r=PG", "display_name": "sh1", "link": "https://stackoverflow.com/users/2417578/sh1"}, "edited": false, "score": 0, "creation_date": 1433350730, "post_id": 30624127, "comment_id": 49318378, "body": "Not sure that <code>ldexpf</code> is any more efficient than <code>rand24b() * 0x1p-24)</code>.  Its first argument is float so that conversion still has to be done, and a sensible compiler should recognise a multiply by power of two and do what&#39;s most efficient there."}, {"owner": {"reputation": 3904, "user_id": 2417578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2e6626f1fc0b76fc7e8981687304f40?s=128&d=identicon&r=PG", "display_name": "sh1", "link": "https://stackoverflow.com/users/2417578/sh1"}, "edited": false, "score": 0, "creation_date": 1433352302, "post_id": 30624127, "comment_id": 49319373, "body": "Also, your <code>r0to1()</code> implementation on github appears to have the same flaws as a direct cast and scale from a uniform integer distribution to a floating-point number.  That is, as the exponent approaches -52, you get fewer and fewer variable bits in your mantissa.  This means that you can only return about 2^53 unique values, when a double can represent roughly 2^62 values between 0 and 1.0."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 3904, "user_id": 2417578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2e6626f1fc0b76fc7e8981687304f40?s=128&d=identicon&r=PG", "display_name": "sh1", "link": "https://stackoverflow.com/users/2417578/sh1"}, "edited": false, "score": 0, "creation_date": 1433400870, "post_id": 30624127, "comment_id": 49338672, "body": "@sh1 That&#39;s actually on purpose. It&#39;s documented in the comments. The choice is between having uniform distance between all numbers that are possible to generate (which reduces the number of bits in the mantissa) or to make all the numbers in the range possible, but then some are more likely to be returned than others. I chose the first option."}, {"owner": {"reputation": 3904, "user_id": 2417578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2e6626f1fc0b76fc7e8981687304f40?s=128&d=identicon&r=PG", "display_name": "sh1", "link": "https://stackoverflow.com/users/2417578/sh1"}, "edited": false, "score": 0, "creation_date": 1433452179, "post_id": 30624127, "comment_id": 49371352, "body": "So why all the complexity?  Why not simply <code>rand52b() * 0x1p-52</code>, or the same thing using <code>ldexp()</code>?  The bit scan will be done in hardware during the conversion anyway.  Not need to repeat it manually."}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 1, "last_activity_date": 1433344459, "creation_date": 1433344459, "answer_id": 30624127, "question_id": 30622448, "link": "https://stackoverflow.com/questions/30622448/c-change-variable-type-without-casting/30624127#30624127", "title": "c: change variable type without casting", "body": "<p>So you seem to want to generate floating point numbers between 0.5 and 1.0 judging from your code.</p>\n\n<p>Assuming that your microcontroller has a standard C library with floating point support, you can do this all standards compliant without actually involving any floating point operations, all you need is the <code>ldexp</code> function that itself doesn't actually do any floating point math.</p>\n\n<p>This would look something like this:</p>\n\n<pre><code>return ldexpf((1 &lt;&lt; 23) + random_thing_smaller_than_23_bits(), -24);\n</code></pre>\n\n<p>The trick here is that we happen to know that IEEE754 binary32 floating point numbers have integer precision between 2^23 and 2^24 (I could be off-by-one here, double check please, I'm translating this from some work I've done on doubles). So the compiler should know how to convert that number to a float trivially. Then <code>ldexp</code> multiplies that number by 2^-24 by just changing the bits in the exponent. No actual floating point operations involved and no undefined behavior, the code is fully portable to any standard C implementation with IEEE754 numbers. Double check the generated code, but a good compiler and c library should not use any floating point instructions here.</p>\n\n<p>If you want to peek at some experiments I've done around generating random floating point numbers <a href=\"https://github.com/art4711/random-double\" rel=\"nofollow\">you can peek at this github repo</a>. It's all about doubles, but should be trivially translatable to floats.</p>\n"}], "owner": {"reputation": 7344, "user_id": 1455622, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5pFTF.png?s=128&g=1", "display_name": "Scheintod", "link": "https://stackoverflow.com/users/1455622/scheintod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1297, "favorite_count": 1, "accepted_answer_id": 30622694, "answer_count": 3, "score": 3, "last_activity_date": 1433346523, "creation_date": 1433340301, "question_id": 30622448, "link": "https://stackoverflow.com/questions/30622448/c-change-variable-type-without-casting", "title": "c: change variable type without casting", "body": "<p>I'm changing an uint32_t to a float but without changing the actual bits.</p>\n\n<p>Just to be sure: I <em>don't wan't to cast</em> it. So <code>float f = (float) i</code> is the exact opposite of what I wan't to do because it changes bits.</p>\n\n<p>I'm going to use this to convert my (pseudo) random numbers to float without doing unneeded math.</p>\n\n<p>What I'm currently doing and what is already working is this:</p>\n\n<pre><code>float random_float( uint64_t seed ) {\n\n    // Generate random and change bit format to ieee\n    uint32_t asInt = (random_int( seed ) &amp; 0x7FFFFF) | (0x7E000000&gt;&gt;1);\n\n    // Make it a float\n    return *(float*)(void*)&amp;asInt; // &lt;-- pretty ugly and nees a variable\n}                                                                      \n</code></pre>\n\n<p><strong>The Question</strong>: Now I'd like to get rid of the <code>asInt</code> variable and I'd like to know if there is a better / not so ugly way then getting the address of this variable, casting it twice and dereferencing it again?</p>\n"}, {"tags": ["c", "linker", "autotools", "automake"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1433339168, "post_id": 30621919, "comment_id": 49309991, "body": "You don&#39;t link static libraries, they are added to your binary."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1433339194, "post_id": 30621919, "comment_id": 49310012, "body": "It&#39;s not clear to me what exactly you&#39;re trying to do, but note that you cannot link one static library to another. They&#39;re just a collection of object files, and there is no mechanism in static libraries to indicate that they depend on another library."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1433339259, "post_id": 30621919, "comment_id": 49310060, "body": "@nos true, however if there is dependency, i.e. if <code>liba.a</code> uses symbols from <code>libb.a</code> then when including the libraries in your binary you must be careful about the order in which you pass them. Which means that circular dependencies are <b>not allowed</b>."}, {"owner": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "edited": false, "score": 0, "creation_date": 1433339335, "post_id": 30621919, "comment_id": 49310121, "body": "<a href=\"http://stackoverflow.com/questions/2157629/linking-static-libraries-to-other-static-libraries\">Possible Duplicate</a>"}, {"owner": {"reputation": 7323, "user_id": 343957, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FAVPm.jpg?s=128&g=1", "display_name": "mathk", "link": "https://stackoverflow.com/users/343957/mathk"}, "edited": false, "score": 0, "creation_date": 1433339352, "post_id": 30621919, "comment_id": 49310133, "body": "Copy past the compiler warning."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1433339498, "post_id": 30621919, "comment_id": 49310241, "body": "@iharob Circular dependencies can be handled,  but you must mention the libraries several times when linking the program that uses them, e.g. pass the flags <code>-lA -lB -lA</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1433340755, "post_id": 30621919, "comment_id": 49311229, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3821916/how-to-merge-two-ar-static-libraries-into-one\">How to merge two &quot;ar&quot; static libraries into one</a>"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1433359968, "post_id": 30621919, "comment_id": 49323888, "body": "This does make sense in the context of <code>libtool</code> libraries, where you can create convenience libraries with <code>noinst_LTLIBRARIES</code>, and use: <code>libb_la_LIBADD = .&#47;liba.la</code> to let <code>libtool</code> take care of resolving static library dependencies. But as others have pointed out, these are just archives."}], "answers": [{"comments": [{"owner": {"reputation": 1249, "user_id": 2725182, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eadd286d1a7f0a34d12920751087fee5?s=128&d=identicon&r=PG", "display_name": "2mac", "link": "https://stackoverflow.com/users/2725182/2mac"}, "edited": false, "score": 0, "creation_date": 1433340597, "post_id": 30622152, "comment_id": 49311105, "body": "I suppose I was considering &quot;linking&quot; the static libraries to be &quot;include the object files from the other one in the final one&quot;."}, {"owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "reply_to_user": {"reputation": 1249, "user_id": 2725182, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eadd286d1a7f0a34d12920751087fee5?s=128&d=identicon&r=PG", "display_name": "2mac", "link": "https://stackoverflow.com/users/2725182/2mac"}, "edited": false, "score": 1, "creation_date": 1433341029, "post_id": 30622152, "comment_id": 49311475, "body": "That&#39;s very far from linking :) if you meant merging two archives into another, there is no universal way of doing so (because static libraries are not meant to be handled like that), but you might find platform-specific ways. For instance, GCC/Clang static libraries are <code>ar</code> archives that you could extract, merge and repack. Instead, MSVC has a tool for that. Be careful with conflicting names or symbols though."}], "tags": [], "owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "is_accepted": true, "score": 1, "last_activity_date": 1433340476, "last_edit_date": 1433340476, "creation_date": 1433339536, "answer_id": 30622152, "question_id": 30621919, "link": "https://stackoverflow.com/questions/30621919/link-static-library-with-static-library/30622152#30622152", "title": "Link static library with static library", "body": "<p>You can't do it. Actually, what you are trying to do doesn't really make sense. Static libraries are just archives containing object files and a table of contents. Put simply, you can think of a static library as a <code>.zip</code> containing <code>.o</code> files.</p>\n\n<p>The linking phase only takes place when compiling a shared object or executable. When your program is linked against <code>liba.a</code>, you also need to specify <code>-static -lb</code> or similar and that's it.</p>\n"}], "owner": {"reputation": 1249, "user_id": 2725182, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eadd286d1a7f0a34d12920751087fee5?s=128&d=identicon&r=PG", "display_name": "2mac", "link": "https://stackoverflow.com/users/2725182/2mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 30622152, "answer_count": 1, "score": 0, "last_activity_date": 1433340476, "creation_date": 1433338993, "question_id": 30621919, "link": "https://stackoverflow.com/questions/30621919/link-static-library-with-static-library", "title": "Link static library with static library", "body": "<p>I have a <code>Makefile.am</code> with two <code>noinst_LIBRARIES</code>, and one of them needs to link with the other.</p>\n\n<p>Adding it to the <code>CFLAGS</code> throws a compiler warning, but as far as I know, automake likes to freak out about using <code>LDADD</code> with libraries, since they are not complete programs.</p>\n\n<p>How can I do this, assuming <code>libb.a</code> needs to pull in <code>liba.a</code>?</p>\n"}, {"tags": ["c", "floating-accuracy"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1433339043, "post_id": 30621791, "comment_id": 49309885, "body": "In C, all floating-point arithmetic is in <code>double</code>-precision <i>anyway</i>. <code>float</code> is for storage only."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1433339081, "post_id": 30621791, "comment_id": 49309918, "body": "@EOF His point is that the intermediate sum is being stored at a higher precision."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433339107, "post_id": 30621791, "comment_id": 49309933, "body": "@EOF: That was in the very first C version. In current versions, it depends on the compiler, but usually arithmetic involving float will be done using float precision."}, {"owner": {"reputation": 480, "user_id": 4462413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KqFVA.png?s=128&g=1", "display_name": "Anish Sharma", "link": "https://stackoverflow.com/users/4462413/anish-sharma"}, "edited": false, "score": 0, "creation_date": 1433340029, "post_id": 30621791, "comment_id": 49310658, "body": "Well your method is interesting but using large precision variables will obviously decrease the program performance. Anyways I have a happy side towards your idea."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 480, "user_id": 4462413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KqFVA.png?s=128&g=1", "display_name": "Anish Sharma", "link": "https://stackoverflow.com/users/4462413/anish-sharma"}, "edited": false, "score": 0, "creation_date": 1433340171, "post_id": 30621791, "comment_id": 49310765, "body": "@AnishSharma Depending on the compiler and the architecture, storing as <code>double</code> may in fact increase performance."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "reply_to_user": {"reputation": 480, "user_id": 4462413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KqFVA.png?s=128&g=1", "display_name": "Anish Sharma", "link": "https://stackoverflow.com/users/4462413/anish-sharma"}, "edited": false, "score": 0, "creation_date": 1433340312, "post_id": 30621791, "comment_id": 49310871, "body": "@AnishSharma: Using larger precision does not always decrease the performance of the program.  This depends on what the target processor can do and if the values must be moved across a memory bus that&#39;s smaller than they are very often.  Many processors would rather work on 64 bit floating point values than 32 bit."}, {"owner": {"reputation": 480, "user_id": 4462413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KqFVA.png?s=128&g=1", "display_name": "Anish Sharma", "link": "https://stackoverflow.com/users/4462413/anish-sharma"}, "edited": false, "score": 0, "creation_date": 1433340539, "post_id": 30621791, "comment_id": 49311051, "body": "I must appreciate your help. I am a novice student in CS so I might not have the best idea. Thanks for enlightening me."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433340778, "post_id": 30621791, "comment_id": 49311250, "body": "@EOF: Even if the compiler and processor are doing higher or highest precision arithmetic, you have to watch out for storing and accessing intermediary values to a low(er) precision type.  <code>float x = A + B + C;</code> could have a different result than <code>float x = 0; x += A; x+= B; x+= C;</code> since in the second the values are likely to be truncated so that the result would be the same as if the statements were in separate functions."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1433341175, "post_id": 30621791, "comment_id": 49311580, "body": "@user877329: If you want the most accurate summation of floating point values use the largest accumulator (the <code>sum</code> variable in your code), sort the values by magnatude from least to greatest, and add them in that order.  This will give the little values the opportunity to add together in to form higher values before they lose precision due to any rounding that takes place when the processor is adding them to values with a different exponent (the decimal point is in a different place)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433344755, "post_id": 30621791, "comment_id": 49314447, "body": "@EOF: C11 6.3.1.8: Float will not necessarily be converted to double, but the compiler may."}], "answers": [{"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 2, "last_activity_date": 1433339202, "creation_date": 1433339202, "answer_id": 30621999, "question_id": 30621791, "link": "https://stackoverflow.com/questions/30621791/use-higher-precision-than-needed-when-computing-a-sum/30621999#30621999", "title": "Use higher precision than needed when computing a sum", "body": "<p>The one thing that <em>isn't</em> good practice is reducing the precision at the end. </p>\n\n<p>Anyway, your code is dividing by zero, because when you do the division, begin == end. </p>\n"}, {"comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1433340106, "post_id": 30622043, "comment_id": 49310716, "body": "In both hardware and software implementations, converting between <code>float</code> and <code>double</code> is one of the cheapest FP operations you can do."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1433340260, "post_id": 30622043, "comment_id": 49310833, "body": "Houses are cheaper in Marylebone than Mayfair but I still wouldn&#39;t buy one. Btw, loved your answer - plus one."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1433339708, "last_edit_date": 1433339708, "creation_date": 1433339297, "answer_id": 30622043, "question_id": 30621791, "link": "https://stackoverflow.com/questions/30621791/use-higher-precision-than-needed-when-computing-a-sum/30622043#30622043", "title": "Use higher precision than needed when computing a sum", "body": "<p>I wouldn't: doing this sort of thing further ties your implementation to a particular platform. There's no guarantee in C that as <code>float</code> is less precise than a <code>double</code>, and a precision reduction at the end is not good practice and not particularly cheap computationally speaking either.</p>\n\n<p>I'd leave the compiler to do its job.</p>\n\n<p>When adding numbers though in floating point, it's a good idea to accumulate the smaller magnitude numbers first. Then they stand a better chance of contributing to the sum. There are more advanced floating point summation methods; you should consider them too.</p>\n"}, {"comments": [{"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "edited": false, "score": 0, "creation_date": 1433342215, "post_id": 30622084, "comment_id": 49312387, "body": "It would be interesting with a quantification of &quot;not very much&quot; assuming random numbers from some distribution"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "edited": false, "score": 0, "creation_date": 1433343390, "post_id": 30622084, "comment_id": 49313313, "body": "@user877329 The difference in exponent at which a particular level of cancellation occurs is given by the mantissa size. That is, with <code>float</code> intermediate results, <code>1 + ~6e-8 - 1</code> is on the edge of cancelling to zero, while with <code>double</code> intermediate results, <code>1 + ~1e-16 - 1</code> is."}], "tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": true, "score": 5, "last_activity_date": 1433339395, "creation_date": 1433339395, "answer_id": 30622084, "question_id": 30621791, "link": "https://stackoverflow.com/questions/30621791/use-higher-precision-than-needed-when-computing-a-sum/30622084#30622084", "title": "Use higher precision than needed when computing a sum", "body": "<p>It depends on what you're trying to avoid, but probably not.</p>\n\n<p>If you're trying to avoid catastrophic cancellation (where <code>10^100 + 1 - 10^100</code> results in 0 instead of 1), using a wider FP type will help a little bit but not very much.</p>\n\n<p>If the numbers are a lot closer together in magnitude, but you're still worried about LSBs falling off the end as the sum grows (e.g. <code>1e-8 + 1e-8 + (1e8 copies) != 1</code>), the wider type <em>can</em> help, but again, only up to a point.</p>\n\n<p>What <em>really</em> helps is cleverer methods of floating point summation. The easiest method is known as \"pairwise summation\", where you view your array of numbers as the leaves of a binary tree, and recursively sum pairs of them until you're left with only one number. For iterative summation as you're doing there, you can also sort the numbers first, which tends to decrease the error. And there are more complex, and more exact methods available... google \"compensated summation\" for details.</p>\n\n<p>All of which is to say, if you suspect that rounding errors are going to be a problem for you, <code>double sum</code> is helpful, but is probably not going to be enough.</p>\n\n<p>Oh, and with regards to \"things can go wrong when converting between the data types\": Things <em>can</em> go wrong (in particular, double-rounding errors), but the imprecision you're likely to see from them is not significant compared to the error from performing the summation itself.</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1433345688, "creation_date": 1433345688, "answer_id": 30624606, "question_id": 30621791, "link": "https://stackoverflow.com/questions/30621791/use-higher-precision-than-needed-when-computing-a-sum/30624606#30624606", "title": "Use higher precision than needed when computing a sum", "body": "<p>Sneftel mentioned methods of summation. Here are a set of functions that work with an array of 2048 IEEE 64 bit doubles (passed by the caller). (Assumes that unsigned long long is also 64 bits) .</p>\n\n<pre><code>/* clear array */\nvoid clearsum(double asum[2048])\n{\nsize_t i;\n    for(i = 0; i &lt; 2048; i++)\n        asum[i] = 0.;\n}\n\n/* add a number into array */\nvoid addtosum(double d, double asum[2048])\n{\nsize_t i;\n    while(1){\n        /* i = exponent of d */\n        i = ((size_t)((*(unsigned long long *)&amp;d)&gt;&gt;52))&amp;0x7ff;\n        if(i == 0x7ff){         /* max exponent, could be overflow */\n            asum[i] += d;\n            return;\n        }\n        if(asum[i] == 0.){      /* if empty slot store d */\n            asum[i] = d;\n            return;\n        }\n        d += asum[i];           /* else add slot to d, clear slot */\n        asum[i] = 0.;           /* and continue until empty slot */\n    }\n}\n\n/* return sum from array */\ndouble returnsum(double asum[2048])\n{\ndouble sum = 0.;\nsize_t i;\n    for(i = 0; i &lt; 2048; i++)\n        sum += asum[i];\n    return sum;\n}\n</code></pre>\n"}], "owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 30622084, "answer_count": 4, "score": 2, "last_activity_date": 1433345688, "creation_date": 1433338709, "last_edit_date": 1433339585, "question_id": 30621791, "link": "https://stackoverflow.com/questions/30621791/use-higher-precision-than-needed-when-computing-a-sum", "title": "Use higher precision than needed when computing a sum", "body": "<p>Is it a good practice to use larger precision when computing a sum and reduce the precision at the end of the algorithm? Like</p>\n\n<pre><code>float average(const float* begin, const float* end)\n    {\n    double sum=0;\n    size_t N=end-begin;\n    while(begin!=end)\n        {\n        sum+=(double)(*begin);\n        ++begin;\n        }\n\n    return (float)( sum/N); //Assume range is not empty\n    }\n</code></pre>\n\n<p>It may be, because there are less errors in the accumulation. On the other hand things can go wrong when converting between the data types.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1433338915, "post_id": 30621774, "comment_id": 49309746, "body": "Copy-pasting your code, I get the output you expect. I suggest you specify which OS you&#39;re compiling/running this in."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1433339007, "post_id": 30621774, "comment_id": 49309852, "body": "I can&#39;t reproduce this. But you need to <code>#include &lt;unistd.h&gt;</code> (instead of pthread.h, pthread.h isn&#39;t needed here).  If it still doesn&#39;t work, you should post more info, such as how you compile and run your program, and which platform you&#39;re working on."}, {"owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "edited": false, "score": 0, "creation_date": 1433340207, "post_id": 30621774, "comment_id": 49310798, "body": "the printf from son worked but it is the printf from dad which did not work ... you definitely need to specify your environment"}, {"owner": {"reputation": 319, "user_id": 4881213, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ec8c86d9574e5efc132e66182356161f?s=128&d=identicon&r=PG&f=1", "display_name": "Feng Yu", "link": "https://stackoverflow.com/users/4881213/feng-yu"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1433342343, "post_id": 30621774, "comment_id": 49312491, "body": "I use the unistd.h instead of pthread.h, but it still doesn&#39;t work. This is how I compile: <code>gcc fork.c -o fork</code> then <code>.&#47;fork</code>. My gcc version is 4.8.2 and OS is Ubuntu 14. @nos @theadnangondal @ m0skit0"}], "answers": [{"comments": [{"owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "edited": false, "score": 0, "creation_date": 1433340635, "post_id": 30621935, "comment_id": 49311134, "body": "The fork did create a child. Otherwise == 0 check would have failed. It returns 0 only in child and pid of child in parent ... else it returns -1 in parent and child is not created.............. So the child is created it means fork passed"}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "reply_to_user": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "edited": false, "score": 0, "creation_date": 1433341891, "post_id": 30621935, "comment_id": 49312131, "body": "@theadnangondal He should check -1 before anything else. That&#39;s the way it&#39;s done. If he omits that check, how can he be sure that everything else is correct? And why omit this check in the first place? It must be there."}, {"owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "edited": false, "score": 0, "creation_date": 1433347528, "post_id": 30621935, "comment_id": 49316525, "body": "no doubt you are right. But here something happened to parent . child process did it&#39;s job"}], "tags": [], "owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "is_accepted": false, "score": 4, "last_activity_date": 1433341944, "last_edit_date": 1495540274, "creation_date": 1433339036, "answer_id": 30621935, "question_id": 30621774, "link": "https://stackoverflow.com/questions/30621774/confusion-about-output-of-fork-calls/30621935#30621935", "title": "Confusion about output of fork calls", "body": "<p>You need to check the \"fork failed\" condition. When fork() returns -1, an error happened. This is part of the semantics of the function, so if you omit it, you will get incorrect results.</p>\n\n<p>See an example which takes into account the possibility of fork failing <a href=\"http://en.wikipedia.org/wiki/Fork_(system_call)#Example_in_C\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>See a discussion of why fork could fail in this <a href=\"https://stackoverflow.com/q/19990704/96780\">related question</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 6443, "user_id": 201506, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/om1R2.jpg?s=128&g=1", "display_name": "geert3", "link": "https://stackoverflow.com/users/201506/geert3"}, "is_accepted": true, "score": 0, "last_activity_date": 1433421197, "creation_date": 1433421197, "answer_id": 30643975, "question_id": 30621774, "link": "https://stackoverflow.com/questions/30621774/confusion-about-output-of-fork-calls/30643975#30643975", "title": "Confusion about output of fork calls", "body": "<p>The <code>$</code> is just the prompt that is displaying in between the process output. Because the child runs \"detached\" from the parent, the parent may return to the shell before the child has finished. So the prompt is printed, then the child's output. If you would redirect all output to a file, the <code>$</code> will not be in there.</p>\n"}], "owner": {"reputation": 319, "user_id": 4881213, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ec8c86d9574e5efc132e66182356161f?s=128&d=identicon&r=PG&f=1", "display_name": "Feng Yu", "link": "https://stackoverflow.com/users/4881213/feng-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 30643975, "answer_count": 2, "score": 0, "last_activity_date": 1433421197, "creation_date": 1433338671, "last_edit_date": 1433420062, "question_id": 30621774, "link": "https://stackoverflow.com/questions/30621774/confusion-about-output-of-fork-calls", "title": "Confusion about output of fork calls", "body": "<p>Consider the output of the below program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\nvoid main()\n{\n    pid_t pid;\n    int a = 5;\n    pid = fork();\n    if (pid == 0)\n        printf(\"This is the son process, a = %d\\n\", --a);\n    else\n        printf(\"This is the dad process, a = %d\\n\", ++a);\n}\n</code></pre>\n\n<p>The output that I expected is:</p>\n\n<pre><code>This is the son process, a = 4;\nThis is the dad process, a = 6;\n</code></pre>\n\n<p>But I got the output as:</p>\n\n<pre><code>This is the son process, a = 4\n</code></pre>\n\n<p>So why the parent process did not execute the printf ? How can i get the output i want?</p>\n\n<p>Update:  </p>\n\n<p>Just now I tried once more, output like this:</p>\n\n<pre><code>$ gcc fork.c -o fork\n$ ./fork\nThis is the dad process, a = 6\n$ This is the son process, a = 4\n</code></pre>\n\n<p>Now there is still a problem: why is there a <code>$</code> between two lines of output?</p>\n\n<p>I think the expected output should be like this:</p>\n\n<pre><code>$ gcc fork.c -o fork\n$ ./fork\nThis is the dad process, a = 6\nThis is the son process, a = 4\n</code></pre>\n\n<p>I can't figure out why <code>$</code> is there.</p>\n\n<p>More details:  </p>\n\n<pre><code>gcc version: gcc 4.8.2  \nOS: ubuntu 14.04\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "static"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338741, "post_id": 30621760, "comment_id": 49309628, "body": "<a href=\"http://stackoverflow.com/a/605858/1983495\">Do not cast the return value of <code>malloc()</code></a>, static in this context is related to the scope, the sotrage is always static for global variables."}, {"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338963, "post_id": 30621760, "comment_id": 49309796, "body": "what does this mean &quot;static in this context is related to the scope, the sotrage is always static for global variables&quot;"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433339081, "post_id": 30621760, "comment_id": 49309915, "body": "Using <code>static</code> inside a function means that the variable has <code>static</code> storage class, which causes that it preserves the value accross calls to the function, <code>static</code> at the file scope means that you cannot <code>extern</code>alize the variable/function to a different <code>.c</code> file."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1433339129, "post_id": 30621760, "comment_id": 49309958, "body": "<code>static</code> keyword effects 2 things, visibility (depending on linkage) and lifetime..  Using <code>static</code> for a variable declared with global scope is redundant."}, {"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1433339261, "post_id": 30621760, "comment_id": 49310063, "body": "yes, but the static variable is used to declare this variable is only visible in data.c"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1433339345, "post_id": 30621760, "comment_id": 49310128, "body": "function <code>getPersonInfo()</code> returns a pointer <code>person_p</code> holding value(value of return of malloc, side-effect assing to <code>person_p</code>)."}, {"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1433339403, "post_id": 30621760, "comment_id": 49310172, "body": "@BLUEPIXY sorry, can you explain"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1433339490, "post_id": 30621760, "comment_id": 49310237, "body": "function getPersonInfo() returns value of <code>person_p</code> (this value is copy on stack), isn&#39;t itself."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433340085, "post_id": 30621760, "comment_id": 49310703, "body": "Allowed and legal? Yes. Good programming practice? No."}, {"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1433340175, "post_id": 30621760, "comment_id": 49310771, "body": "in this case, what is a good practice? In this particular example, what is a good practice to solve this problem?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433340420, "post_id": 30621760, "comment_id": 49310949, "body": "It is bad practice to return pointers to private variables. Also, with the current design, your .c file can only have one instance of the <code>person</code> object. Good practice would be to use opaque type instead. Move the struct definition to the .c file. In the h file, only have <code>typedef struct person person;</code>. All access to the members of this struct has to go through interface functions in the C file. I&#39;d post an example but it would be off-topic since not related to the question. Feel free to post a different question and I can post an example."}, {"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433341093, "post_id": 30621760, "comment_id": 49311515, "body": "@Lundin Hi, I posted a new question regarding the good manner, can you give a example for this? <a href=\"http://stackoverflow.com/questions/30622741/return-pointer-from-a-c-function-is-good-bad-design\" title=\"return pointer from a c function is good bad design\">stackoverflow.com/questions/30622741/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433342699, "post_id": 30621760, "comment_id": 49312754, "body": "@ratzip Roger that, I posted an example."}], "answers": [{"comments": [{"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 2, "creation_date": 1433338850, "post_id": 30621826, "comment_id": 49309709, "body": "but the pointer is defined as static, which is visible only in data.c"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1433339218, "post_id": 30621826, "comment_id": 49310033, "body": "Is this an answer to the post, or a comment to a specific follow-on question in the comments???"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1433340097, "post_id": 30621826, "comment_id": 49310714, "body": "The question is about returing the pointer from a function. But the answer talks about returing a pointer to a static variable isn&#39;t it? Or am I not on track?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1433340407, "post_id": 30621826, "comment_id": 49310942, "body": "@Gopi; Question asked by OP: <i>function <code>getPersonInfo()</code> returns a pointer which is a static pointer in <code>data.c</code>, is this allowed and legal?</i>"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1433340501, "post_id": 30621826, "comment_id": 49311021, "body": "Yeah but my point was the location to which the static pointer is pointing to. OP does a malloc and return the address so that is valid is what I meant"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1433340554, "post_id": 30621826, "comment_id": 49311070, "body": "@Gopi; This question is all about static duration."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 1, "creation_date": 1433344525, "post_id": 30621826, "comment_id": 49314254, "body": "@ratzip, that <code>person_p</code> has internal linkage (as a <code>static</code>, file-scope variable) is not relevant to whether a function may return <i>a copy of its value</i>.  It is the variable that is static, not its value.  In fact, however, it would also be fine to return a pointer to the variable (<code>&amp;person_p</code>), which is as close as you can come to returning the variable itself."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 3, "last_activity_date": 1433391702, "last_edit_date": 1433391702, "creation_date": 1433338783, "answer_id": 30621826, "question_id": 30621760, "link": "https://stackoverflow.com/questions/30621760/c-function-return-static-variable/30621826#30621826", "title": "c function return static variable", "body": "<p>Line</p>\n\n<pre><code>static struct person* person_p = NULL;  \n</code></pre>\n\n<p>declares a variable <code>person_p</code> which has static storage duration, file scope and internal linkage. It means that it can be referenced by name only in file <code>data.c</code> and internal linkage restricts its sharing to this single file.    </p>\n\n<p>Static storage duration means once the memory is allocated to <code>person_p</code> it will stay at the same storage location as long as program is running, allowing it to retain its value indefinitely. It means you can return a pointer to that location.<br>\nTherefore, your code is valid and legal. </p>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1433339855, "creation_date": 1433339855, "answer_id": 30622278, "question_id": 30621760, "link": "https://stackoverflow.com/questions/30621760/c-function-return-static-variable/30622278#30622278", "title": "c function return static variable", "body": "<p><code>person_p</code> is a variable whose scope is just for the file <code>data.c</code> as it is a static variable. You are using this variable to allocate some memory on heap and return the address to <code>main.c</code> and there is a variable which holds this value in main.c i.e. <code>pointer</code>. </p>\n\n<p>So here you are not returning the variable but the value the variable is holding which is totally fine because even if the variable goes out of scope the value returned(i.e. address) is still valid which is on heap.</p>\n"}, {"tags": [], "owner": {"reputation": 231, "user_id": 4946427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ab8bebe7076c9f2a634d55da49c010?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/4946427/sascha"}, "is_accepted": false, "score": 1, "last_activity_date": 1433391741, "last_edit_date": 1433391741, "creation_date": 1433350906, "answer_id": 30626348, "question_id": 30621760, "link": "https://stackoverflow.com/questions/30621760/c-function-return-static-variable/30626348#30626348", "title": "c function return static variable", "body": "<p>It is legal, as already noted in the other answers. You could even rewrite your <code>data.c</code> to this:</p>\n\n<pre><code>#include \"data.h\"\nstatic struct person person;\n\nperson * getPersonInfo()\n{\n   return &amp;person;\n}\n</code></pre>\n\n<p>This will return a pointer to your structure in data memory, without any need to allocate it first on the heap. The <code>static</code> keyword is just about the scope of your symbol <code>person</code> (local to data.c) but the data itself is valid global in your program.</p>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4240, "favorite_count": 1, "accepted_answer_id": 30621826, "answer_count": 3, "score": 4, "last_activity_date": 1433391741, "creation_date": 1433338625, "question_id": 30621760, "link": "https://stackoverflow.com/questions/30621760/c-function-return-static-variable", "title": "c function return static variable", "body": "<p>I have a question about how C function returns static variable:</p>\n\n<p>in <code>data.h</code> file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n\ntypedef struct\n{\n   int age;\n   int number;\n} person;\n\nperson * getPersonInfo();\n</code></pre>\n\n<p>in <code>data.c</code></p>\n\n<pre><code>#include \"data.h\"\nstatic struct person* person_p = NULL;\n\nperson * getPersonInfo()\n{\n   person_p = (struct person*)malloc(10 * sizeof(struct person));\n   return person_p;\n}\n</code></pre>\n\n<p>in <code>main.c</code></p>\n\n<pre><code>#include \"data.h\"\n\nint main()\n{\n   person* pointer = getPersonInfo();\n   return 0;\n}\n</code></pre>\n\n<p>function <code>getPersonInfo()</code> returns a pointer which is a static pointer in <code>data.c</code>, is this allowed and legal? in the <code>main.c</code>, can the function <code>getPersonInfo()</code> be used like this: <code>person* pointer = getPersonInfo();</code></p>\n"}, {"tags": ["c++", "c", "caching", "volatile"], "comments": [{"owner": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "reply_to_user": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 1, "creation_date": 1433338979, "post_id": 30621742, "comment_id": 49309821, "body": "how could it do that, volatile is only a instruction for compiler to not cache a variable in cpu register, it doesn&#39;t create memory barrier, how can it ensure value read is coherent with RAM?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1433339255, "post_id": 30621742, "comment_id": 49310059, "body": "Usually memory mapped hardware is not cachable."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1433340140, "post_id": 30621742, "comment_id": 49310747, "body": "@user3528438: <code>volatile</code> variables in normal RAM are also used for thread/interrupt synchronization. With C11, <code>stdatomic.h</code> might be a better choice, Once multiple CPUs are involved, <code>volatile</code> is close to useless for that."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1433340291, "post_id": 30621742, "comment_id": 49310858, "body": "@swang you would need to issue a hardware/cpu specific instruction to do that if the memory model of the hardware doesn&#39;t guarantee coherency (e.g. the mfence instruction on x86). But don&#39;t do that. Either you&#39;re working on a low level processor where you map certain hardware registers to memory (which isn&#39;t cachable) and use volatile in your C program, or use mutexes/semaphores or atomic features of newer C/C++ versions, or an existing atomic library for your platform that is well tested."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433340792, "post_id": 30621742, "comment_id": 49311260, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/12710336/can-compiler-sometimes-cache-variable-declared-as-volatile\" title=\"can compiler sometimes cache variable declared as volatile\">stackoverflow.com/questions/12710336/&hellip;</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1433341519, "post_id": 30621742, "comment_id": 49311848, "body": "@nos: That&#39;s where <code>_Atomic</code> and friends come into play. Imo the most important addition with C11, yet optional."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433347157, "post_id": 30621742, "comment_id": 49316267, "body": "@Olaf reordering hadn&#39;t occurred to me; original comment deleted and this one added to record that I originally posted a comment containing incorrect information."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1433347819, "post_id": 30621742, "comment_id": 49316698, "body": "@nos: Hmm. on larger Irons, you also would have hardware registers. That is no sole feature of &quot;small systems&quot;. Whatever &quot;small&quot; means here, even Cortex-M now has more performance and (occasionally) memory than most PCs in the 90ies."}], "answers": [{"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 1, "last_activity_date": 1433338925, "creation_date": 1433338925, "answer_id": 30621882, "question_id": 30621742, "link": "https://stackoverflow.com/questions/30621742/am-i-right-volatile-keyword-in-c-needs-special-hardware-support-to-work/30621882#30621882", "title": "Am I right volatile keyword in C needs special hardware support to work?", "body": "<p>volatile on its own only tells the compiler \"assume that when you store to a volatile object, someone might take notice, so you can't optimise the store away\" and \"assume that when you read a volatile object, the result might not be the same as what you stored, and also someone might take notice that you read the volatile object, so you can't optimise the read away, and you must use the value read and not what you think should be stored there\". </p>\n\n<p>For example, if you write</p>\n\n<pre><code>int x = 0 * (*p);\n</code></pre>\n\n<p>the compiler can't say \"I'll set x to 0 whatever *p is, so I don' need to bother reading *p\". It's wrong if *p is volatile. </p>\n\n<p>In C11 there are new features to help you, or you might want to use proper OS functions. </p>\n"}, {"comments": [{"owner": {"reputation": 1390, "user_id": 4947867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mticV.png?s=128&g=1", "display_name": "No-Bugs Hare", "link": "https://stackoverflow.com/users/4947867/no-bugs-hare"}, "edited": false, "score": 0, "creation_date": 1433339720, "post_id": 30621957, "comment_id": 49310415, "body": "If going beyond x86, all kinds of reordering are possible, not just store-store rewrites (which is what I think you&#39;ve meant under &quot;write buffers&quot;); see <a href=\"https://www.kernel.org/doc/Documentation/memory-barriers.txt\" rel=\"nofollow noreferrer\">kernel.org/doc/Documentation/memory-barriers.txt</a> for details on possible reorders."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1390, "user_id": 4947867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mticV.png?s=128&g=1", "display_name": "No-Bugs Hare", "link": "https://stackoverflow.com/users/4947867/no-bugs-hare"}, "edited": false, "score": 0, "creation_date": 1433340237, "post_id": 30621957, "comment_id": 49310814, "body": "@No-BugsHare: As an embedded developer, I <i>always</i> go beyond x86. Where did I restrict the meaning of re-ordering?"}, {"owner": {"reputation": 1390, "user_id": 4947867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mticV.png?s=128&g=1", "display_name": "No-Bugs Hare", "link": "https://stackoverflow.com/users/4947867/no-bugs-hare"}, "edited": false, "score": 0, "creation_date": 1433340496, "post_id": 30621957, "comment_id": 49311016, "body": "Not only &quot;write buffers&quot; may reorder, as it may be (mis)understood from your reply; there are tons of different reorders possible. I don&#39;t insist you meant it, but it can be easily misunderstood this way."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1390, "user_id": 4947867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mticV.png?s=128&g=1", "display_name": "No-Bugs Hare", "link": "https://stackoverflow.com/users/4947867/no-bugs-hare"}, "edited": false, "score": 0, "creation_date": 1433340882, "post_id": 30621957, "comment_id": 49311348, "body": "@No-BugsHare: I forgot a closing parenthesis. To clarify even more, I also added now two letters and two dots. Hmm, I might add the CPUs as well; actually I did not exclude them, you wanted to state the non-obvious. But you&#39;re right, x86 users might forget the CPU might also reorder."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1433341151, "post_id": 30621957, "comment_id": 49311557, "body": "@Jongware: I deleted that sentence and added one at the end of that paragraph. C11 6.7.3#7 leaves some room for ID, that&#39;s what I might have confused. Thanks for the hint."}, {"owner": {"reputation": 1390, "user_id": 4947867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mticV.png?s=128&g=1", "display_name": "No-Bugs Hare", "link": "https://stackoverflow.com/users/4947867/no-bugs-hare"}, "edited": false, "score": 0, "creation_date": 1433341231, "post_id": 30621957, "comment_id": 49311620, "body": "@Olaf: Oh, now I see what you&#39;ve meant from the very beginning ;-); I&#39;m coming at it from quite a different point of view (large multi-socket boxes, which applies to x86 too), where all the reordering is done by CPUs, but with pretty much the same overall effect ;-)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1390, "user_id": 4947867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mticV.png?s=128&g=1", "display_name": "No-Bugs Hare", "link": "https://stackoverflow.com/users/4947867/no-bugs-hare"}, "edited": false, "score": 0, "creation_date": 1433341371, "post_id": 30621957, "comment_id": 49311735, "body": "@No-BugsHare: Embedded is also not a single 8051 MCU anymore;-). ARM Cortex-M and the smaller Cortex-As (5,7) have changed the field very much. With DMA added, I have to be very aware of concurrent memory accesses and their ordering."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1390, "user_id": 4947867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mticV.png?s=128&g=1", "display_name": "No-Bugs Hare", "link": "https://stackoverflow.com/users/4947867/no-bugs-hare"}, "edited": false, "score": 0, "creation_date": 1433341716, "post_id": 30621957, "comment_id": 49312007, "body": "On the smaller irons bare-metal, I have the whole control after all. No hidden &quot;magic&quot;. Except for &quot;features&quot; not specified in the datasheet - an ever growing problem with the quality of documentation."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 4, "last_activity_date": 1433348082, "last_edit_date": 1433348082, "creation_date": 1433339085, "answer_id": 30621957, "question_id": 30621742, "link": "https://stackoverflow.com/questions/30621742/am-i-right-volatile-keyword-in-c-needs-special-hardware-support-to-work/30621957#30621957", "title": "Am I right volatile keyword in C needs special hardware support to work?", "body": "<p><code>volatile</code> forbids the compiler to optimize-out accesses to such variables or re-order such accesses with regard to all volatile variables (only!). Actual semantics might be <em>implementation defined</em> (but have to be specified by the compiler).</p>\n\n<p>For the hardware: yes, caches and bus-buffers (e.g. \"write buffers\") may still reorder, not to speak of the CPU(s). <code>volatile</code> does not imply fences/barriers. So the underlying hardware has to tag such memory areas as \"(strongly) ordered\" at least. If external hardware is involved, the area must also be tagged \"uncached\", so every access will directly go to the hardware. That might also apply for other CPUs unless there is some kind of \"snooping\" hardware in the system (each CPU gets notified on cache-changes in another CPU).</p>\n\n<p>C11 provides <code>stdatomic.h</code> (optional). That would be better suited for thread/interrupt synchronization. If multiple CPUs, <code>volatile</code> is close to useless for that anyway. However, it still has applications for hardware (possible requiring additional mutex or implicit exclusive access to a peripheral device).</p>\n"}, {"tags": [], "owner": {"reputation": 1390, "user_id": 4947867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mticV.png?s=128&g=1", "display_name": "No-Bugs Hare", "link": "https://stackoverflow.com/users/4947867/no-bugs-hare"}, "is_accepted": false, "score": 0, "last_activity_date": 1433339591, "creation_date": 1433339591, "answer_id": 30622175, "question_id": 30621742, "link": "https://stackoverflow.com/questions/30621742/am-i-right-volatile-keyword-in-c-needs-special-hardware-support-to-work/30622175#30622175", "title": "Am I right volatile keyword in C needs special hardware support to work?", "body": "<ol>\n<li><p>No, volatile as such doesn't need hardware support to work. See answer by gnaster729 for details.</p></li>\n<li><p>Cache synchronization issues are related to so-called \"Memory model\" (<a href=\"https://en.wikipedia.org/wiki/Memory_ordering\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Memory_ordering</a> ); if describing it very short - there is no such thing as \"if another device has changed variable\" (it is not observable from reading side), there is only a thing \"if another device changed variable a earlier than variable b\" - this IS observable. To deal with it, so-called \"memory fences\" a.k.a. \"memory barriers\" are used (<a href=\"https://en.wikipedia.org/wiki/Memory_barrier\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Memory_barrier</a> and <a href=\"https://www.kernel.org/doc/Documentation/memory-barriers.txt\" rel=\"nofollow\">https://www.kernel.org/doc/Documentation/memory-barriers.txt</a> ), which, if I'm not mistaken, have special support in C++11. On x86, memory fences are implicit on CAS instructions; x86 is widely believed to comply with so-called TSO (total store ordering) memory model, which is quite strict and one of the easiest to deal with (though, as described in kernel.org ref above, it is perfectly feasible to deal with correctness under <em>any</em> memory model).</p></li>\n</ol>\n"}], "owner": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 30621957, "answer_count": 3, "score": 0, "last_activity_date": 1433348082, "creation_date": 1433338573, "last_edit_date": 1495542203, "question_id": 30621742, "link": "https://stackoverflow.com/questions/30621742/am-i-right-volatile-keyword-in-c-needs-special-hardware-support-to-work", "title": "Am I right volatile keyword in C needs special hardware support to work?", "body": "<p>I understand what volatile does and what it doesn't do, taking the example from <a href=\"https://stackoverflow.com/questions/72552/why-does-volatile-exist\">this question</a></p>\n\n<pre><code>void waitForSemaphore()\n{\n   volatile uint16_t* semPtr = WELL_KNOWN_SEM_ADDR;/*well known address to my semaphore*/\n   while ((*semPtr) != IS_OK_FOR_ME_TO_PROCEED);\n}\n</code></pre>\n\n<p>my question is: in the presence of cpu cache, volatile can not guarantee the above works, because it only forces cpu to read smePer from memory but cpu doesn't know if the memory is in RAM or one of the caches. Therefore if another device changed content of WELL_KNOWN_SEM_ADDR, waitForSemaphore won't necessarily know. So there must be something else make it work. </p>\n\n<p>I have read <a href=\"https://stackoverflow.com/questions/18695120/volatile-and-cache-behaviour\">this</a> and <a href=\"https://stackoverflow.com/questions/7872175/c-volatile-variables-and-cache-memory?rq=1\">this</a>, it seems volatile itself is not enough to guarantee such program works, there must be some platform dependent magic that either by passes L1/2/3 cache or force flush them, am I right? If so are such support available on all popular platforms, for example x86?</p>\n"}, {"tags": ["c", "linux", "compilation", "shared-libraries"], "comments": [{"owner": {"reputation": 7592, "user_id": 2371054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gWrKl.jpg?s=128&g=1", "display_name": "mshildt", "link": "https://stackoverflow.com/users/2371054/mshildt"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338459, "post_id": 30621632, "comment_id": 49309390, "body": "It is possible, try running /lib/libc.so on your machine. And I don&#39;t really want to do it, I want to know how the GNU guys (and gals) did it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338608, "post_id": 30621632, "comment_id": 49309508, "body": "Interesting, it has a <code>__libc_main()</code> function in it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338662, "post_id": 30621632, "comment_id": 49309560, "body": "What was the purpose of running it in the book?"}, {"owner": {"reputation": 7592, "user_id": 2371054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gWrKl.jpg?s=128&g=1", "display_name": "mshildt", "link": "https://stackoverflow.com/users/2371054/mshildt"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338696, "post_id": 30621632, "comment_id": 49309587, "body": "Simply to show that you can find out version and compilation information about the system&#39;s libc.so by running it."}, {"owner": {"reputation": 7592, "user_id": 2371054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gWrKl.jpg?s=128&g=1", "display_name": "mshildt", "link": "https://stackoverflow.com/users/2371054/mshildt"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338774, "post_id": 30621632, "comment_id": 49309649, "body": "Tried chaning my <code>main</code> to <code>__libc_main()</code>. Still segfaults though."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338962, "post_id": 30621632, "comment_id": 49309795, "body": "I didn&#39;t mean that changing <code>main()</code> to <code>__libc_main()</code> would do the trick, I meant that the <code>libc.so</code> had one, and it did run."}], "answers": [{"tags": [], "owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "is_accepted": true, "score": 4, "last_activity_date": 1433396527, "last_edit_date": 1433396527, "creation_date": 1433340200, "answer_id": 30622406, "question_id": 30621632, "link": "https://stackoverflow.com/questions/30621632/how-is-the-gnu-libc-so-both-a-shared-object-and-a-standalone-executable/30622406#30622406", "title": "How is the GNU libc.so both a shared object and a standalone executable?", "body": "<p>In file <code>Makerules</code> of <code>glibc</code>:</p>\n\n<pre><code># Give libc.so an entry point and make it directly runnable itself.\nLDFLAGS-c.so += -e __libc_main\n</code></pre>\n\n<p>And in <code>csu/version.c</code></p>\n\n<pre><code>extern void __libc_print_version (void);\nvoid\n__libc_print_version (void)\n{\n  __write (STDOUT_FILENO, banner, sizeof banner - 1);\n}\n</code></pre>\n\n<p>This is called by <code>__libc_main()</code>.</p>\n\n<p>In file <code>elf/interp.c</code> a program interpreter is added to the shared object.</p>\n\n<p>This is working for me on 64 bit Linux: <code>gcc -Wall -Wextra -fPIC -shared -o myso.so myso.c</code></p>\n\n<pre><code>//myso.c\n#include &lt;unistd.h&gt;\n\nchar const __invoke_dynamic_linker__[] __attribute__ ((section (\".interp\")))\n#ifdef __LP64__\n  = \"/lib64/ld-linux-x86-64.so.2\";\n#else\n  = \"/lib/ld-linux.so.2\";\n#endif\n\nvoid _start(void)\n{\n    static char const msg[] = \"Hello world!\\n\";\n\n    write(STDOUT_FILENO, msg, sizeof msg - 1);          \n    _exit(0);\n}\n</code></pre>\n\n<p>The <code>__invoke_dynamic_linker__[]</code> line is needed because without it dynamic linking of <code>write</code> and <code>_exit</code> can't be done. The name of this variable is not important. There is an option for <code>ld</code>, <code>-dynamic-linker</code>, which would do the same, but it is ignored with <code>-shared</code>, but putting the line into the source code works.</p>\n\n<p>Here is a variant without dynamic linking:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/syscall.h&gt;\n\n__asm__(\n#ifdef __LP64__\n    \"syscall: mov    %rdi,%rax;\"\n    \"   mov    %rsi,%rdi;\"\n    \"   mov    %rdx,%rsi;\"\n    \"   mov    %rcx,%rdx;\"\n    \"   mov    %r8,%r10;\"\n    \"   mov    %r9,%r8;\"\n    \"   mov    0x8(%rsp),%r9;\"\n    \"   syscall;\"\n    \"   cmp    $0xfffffffffffff001,%rax;\"\n    \"   jae    __syscall_error;\"\n    \"   retq;   \"\n    \"__syscall_error: neg    %rax;\"\n    \"   mov    %eax,%fs:0xffffffffffffffd0;\"\n    \"   or     $0xffffffffffffffff,%rax;\"\n    \"   retq;\"   \n#else\n    \"syscall:   push   %ebp;\"\n    \"   push   %edi;\"\n    \"   push   %esi;\"\n    \"   push   %ebx;\"\n    \"   mov    0x2c(%esp),%ebp;\"\n    \"   mov    0x28(%esp),%edi;\"\n    \"   mov    0x24(%esp),%esi;\"\n    \"   mov    0x20(%esp),%edx;\"\n    \"   mov    0x1c(%esp),%ecx;\"\n    \"   mov    0x18(%esp),%ebx;\"\n    \"   mov    0x14(%esp),%eax;\"\n    \"   int    $0x80;\"\n    \"   pop    %ebx;\"\n    \"   pop    %esi;\"\n    \"   pop    %edi;\"\n    \"   pop    %ebp;\"\n    \"   cmp    $0xfffff001,%eax;\"\n    \"   jae    __syscall_error;\"\n    \"   ret;\"    \n    \"__syscall_error:   neg    %eax;\"\n    \"   mov    %gs:0x0,%ecx;\"\n    \"   mov    %eax,-0x18(%ecx);\"\n    \"   mov    $0xffffffff,%eax;\"\n    \"   ret;\"    \n#endif\n);\n\nvoid _start(void)\n{\n    static char const msg[] = \"Hello world!\\n\";\n\n    syscall(SYS_write, STDOUT_FILENO, msg, sizeof msg - 1);\n    syscall(SYS_exit, 0);\n}\n</code></pre>\n"}], "owner": {"reputation": 7592, "user_id": 2371054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gWrKl.jpg?s=128&g=1", "display_name": "mshildt", "link": "https://stackoverflow.com/users/2371054/mshildt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 2, "accepted_answer_id": 30622406, "answer_count": 1, "score": 8, "last_activity_date": 1433396527, "creation_date": 1433338328, "last_edit_date": 1433344949, "question_id": 30621632, "link": "https://stackoverflow.com/questions/30621632/how-is-the-gnu-libc-so-both-a-shared-object-and-a-standalone-executable", "title": "How is the GNU libc.so both a shared object and a standalone executable?", "body": "<p>In Linux, the shared library for the GNU standard C library (libc.so) is not only a shared library, but can also be run as a standalone executable, which prints out version information:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[me@computer ~]$ /lib/libc.so.6 \n\nGNU C Library stable release version 2.12, by Roland McGrath et al.\nCopyright (C) 2010 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE.\nCompiled by GNU CC version 4.4.7 20120313 (Red Hat 4.4.7-11).\nCompiled on a Linux 2.6.32 system on 2015-01-07.\nAvailable extensions:\n    The C stubs add-on version 2.1.2.\n    crypt add-on version 2.1 by Michael Glad and others\n    GNU Libidn by Simon Josefsson\n    Native POSIX Threads Library by Ulrich Drepper et al\n    BIND-8.2.3-T5B\n    RT using linux kernel aio\nlibc ABIs: UNIQUE IFUNC\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/libc/bugs.html&gt;.\n</code></pre>\n\n<p>How did they do this? I tried creating a shared library that also happened to have a <code>main()</code> function, but it segfaulted when I tried to run it.</p>\n\n<p>What I tried:\n</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/* myso.c */\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic void foo(void) {\n    printf(\"hello foo\\n\");\n}\n\nint main(int argc, char *argv[]) {\n    printf(\"hello world\\n\");\n    foo();\n    return 0;\n}\n</code></pre>\n\n<p>Then:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ gcc -Wall -fPIC -shared -o myso.so myso.c\n$ ./myso.so\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>As a note: I don't really want to do this for any real purpose, I just want to know how the GNU guys (and gals) did it.</p>\n"}, {"tags": ["c", "encryption", "openssl", "cryptography", "rsa"], "comments": [{"owner": {"reputation": 32972, "user_id": 150978, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/150978/robert"}, "edited": false, "score": 0, "creation_date": 1433341664, "post_id": 30621457, "comment_id": 49311956, "body": "PEM certificate files contain an base64 encoded X509 certificate. The X509 structure then contains the PUBKEY which is often an RSA key, but there are other certificates that use DSA or elleptic curves... Unfortunately OpenSSL seems to rely on FILE as input for PEM reading data, at least the functions I have found."}, {"owner": {"reputation": 1461, "user_id": 3913991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/911bddca1764453d14029d9718033efa?s=128&d=identicon&r=PG&f=1", "display_name": "demonguy", "link": "https://stackoverflow.com/users/3913991/demonguy"}, "reply_to_user": {"reputation": 32972, "user_id": 150978, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/150978/robert"}, "edited": false, "score": 0, "creation_date": 1433348524, "post_id": 30621457, "comment_id": 49317095, "body": "@Robert Thats the problem i have"}], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 1167793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9uaNJ.png?s=128&g=1", "display_name": "Greg Wittmeyer", "link": "https://stackoverflow.com/users/1167793/greg-wittmeyer"}, "edited": false, "score": 1, "creation_date": 1488266900, "post_id": 30626251, "comment_id": 72143262, "body": "EVP_PKEY_base_id() appears to do exactly what your EVP_PKEY_get_type() function does.  Why they named it that, I don&#39;t know."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 386, "user_id": 1167793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9uaNJ.png?s=128&g=1", "display_name": "Greg Wittmeyer", "link": "https://stackoverflow.com/users/1167793/greg-wittmeyer"}, "edited": false, "score": 0, "creation_date": 1488267836, "post_id": 30626251, "comment_id": 72143756, "body": "@Gammadyne - yeah, I think you are right. Be careful if you use it. It will try to dereference a NULL pointer."}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 9, "last_activity_date": 1433480001, "last_edit_date": 1433480001, "creation_date": 1433350622, "answer_id": 30626251, "question_id": 30621457, "link": "https://stackoverflow.com/questions/30621457/how-to-translate-pem-public-key-into-openssl-rsa-structure/30626251#30626251", "title": "How to translate pem public key into openssl RSA* structure", "body": "<blockquote>\n  <p>I can't use BIO because i just want to transplant openssl into a bootloader which doesn't have a UNIX filesystem</p>\n</blockquote>\n\n<p>I think you can still use a <code>BIO</code>, it just has to be a memory <code>BIO</code>, and not a file <code>BIO</code>.</p>\n\n<p>If you can't use a memory <code>BIO</code> either, then I'm not sure you can use OpenSSL here.</p>\n\n<hr>\n\n<blockquote>\n  <p>How to translate pem public key into openssl RSA* structure</p>\n</blockquote>\n\n<p>Use <code>PEM_read_PUBKEY</code> or <code>PEM_read_bio_PUBKEY</code> (or one of the <code>*_PUBKEY</code> routines). They return an <code>EVP_PKEY</code>. Then, use <code>EVP_PKEY_get1_RSA</code> to convert it to a <code>RSA</code>.</p>\n\n<p>Something like:</p>\n\n<pre><code>static const char key[] = \"-----BEGIN PUBLIC KEY-----\\n\"\n    \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC7vbqajDw4o6gJy8UtmIbkcpnk\\n\"\n    \"O3Kwc4qsEnSZp/TR+fQi62F79RHWmwKOtFmwteURgLbj7D/WGuNLGOfa/2vse3G2\\n\"\n    \"eHnHl5CB8ruRX9fBl/KgwCVr2JaEuUm66bBQeP5XeBotdR4cvX38uPYivCDdPjJ1\\n\"\n    \"QWPdspTBKcxeFbccDwIDAQAB\\n\"\n    \"-----END PUBLIC KEY-----\\n\";\n\nBIO* bio = BIO_new_mem_buf(key, (int)sizeof(key));\nASSERT(bio != NULL);\n\nEVP_PKEY* pkey = PEM_read_bio_PUBKEY(bio, NULL, NULL, NULL);\nASSERT(pkey != NULL);\n\nint type = EVP_PKEY_get_type(pkey);\nASSERT(type == EVP_PKEY_RSA || type == EVP_PKEY_RSA2);\n\nRSA* rsa = EVP_PKEY_get1_RSA(pkey);\nASSERT(rsa != NULL);\n\n...\n\nEVP_PKEY_free(pkey);\nRSA_free(rsa);\nBIO_free(bio);\n</code></pre>\n\n<p>And here's the helper you need. <code>EVP_PKEY_get_type</code> is not part of the library:</p>\n\n<pre><code>int EVP_PKEY_get_type(EVP_PKEY *pkey)\n{\n    ASSERT(pkey);\n    if (!pkey)\n        return EVP_PKEY_NONE;\n\n    return EVP_PKEY_type(pkey-&gt;type);\n}\n</code></pre>\n\n<hr>\n\n<p>Related, you can also use the non-PEM version, which is the ASN.1/DER encoding of the key. This will allow you to save some size in the image. Then, you would use <code>d2i_PUBKEY_bio</code> to read the key.</p>\n\n<p>Converting from PEM to ASN.1/DER will save about 110 bytes:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ls -al pubkey.*\n-rw-r--r--  1 user  staff  162 Jun  5 00:36 pubkey.der\n-rw-r--r--  1 user  staff  272 Jun  5 00:52 pubkey.pem\n</code></pre>\n\n<p>To convert the PEM encoded public key to ASN.1/DER, follow these steps. First, copy the key to the clipboard. Second, pipe it into <code>openssl pkey</code> with a tool like <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/pbpaste.1.html\"><code>pbpaste</code></a> on OS X or <a href=\"http://linux.die.net/man/1/xclip\"><code>xclip</code></a> on Linux:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ pbpaste | openssl pkey -pubin -inform PEM -out pubkey.der -outform DER\n</code></pre>\n\n<p>Then, inspect the public key:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> $ dumpasn1 pubkey.der \n  0 159: SEQUENCE {\n  3  13:   SEQUENCE {\n  5   9:     OBJECT IDENTIFIER rsaEncryption (1 2 840 113549 1 1 1)\n 16   0:     NULL\n       :     }\n 18 141:   BIT STRING, encapsulates {\n 22 137:     SEQUENCE {\n 25 129:       INTEGER\n       :         00 BB BD BA 9A 8C 3C 38 A3 A8 09 CB C5 2D 98 86\n       :         E4 72 99 E4 3B 72 B0 73 8A AC 12 74 99 A7 F4 D1\n       :         F9 F4 22 EB 61 7B F5 11 D6 9B 02 8E B4 59 B0 B5\n       :         E5 11 80 B6 E3 EC 3F D6 1A E3 4B 18 E7 DA FF 6B\n       :         EC 7B 71 B6 78 79 C7 97 90 81 F2 BB 91 5F D7 C1\n       :         97 F2 A0 C0 25 6B D8 96 84 B9 49 BA E9 B0 50 78\n       :         FE 57 78 1A 2D 75 1E 1C BD 7D FC B8 F6 22 BC 20\n       :         DD 3E 32 75 41 63 DD B2 94 C1 29 CC 5E 15 B7 1C\n       :         0F\n157   3:       INTEGER 65537\n       :       }\n       :     }\n       :   }\n</code></pre>\n\n<p>Finally, do something like:</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n    UNUSED(argc), UNUSED(argv);\n\n    static const unsigned char key[] = {\n        0x30, 0x81, 0x9f, 0x30, 0x0d, 0x06, 0x09, 0x2a, 0x86, 0x48, 0x86, 0xf7, 0x0d, 0x01, 0x01, 0x01,\n        0x05, 0x00, 0x03, 0x81, 0x8d, 0x00, 0x30, 0x81, 0x89, 0x02, 0x81, 0x81, 0x00, 0xbb, 0xbd, 0xba,\n        0x9a, 0x8c, 0x3c, 0x38, 0xa3, 0xa8, 0x09, 0xcb, 0xc5, 0x2d, 0x98, 0x86, 0xe4, 0x72, 0x99, 0xe4,\n        0x3b, 0x72, 0xb0, 0x73, 0x8a, 0xac, 0x12, 0x74, 0x99, 0xa7, 0xf4, 0xd1, 0xf9, 0xf4, 0x22, 0xeb,\n        0x61, 0x7b, 0xf5, 0x11, 0xd6, 0x9b, 0x02, 0x8e, 0xb4, 0x59, 0xb0, 0xb5, 0xe5, 0x11, 0x80, 0xb6,\n        0xe3, 0xec, 0x3f, 0xd6, 0x1a, 0xe3, 0x4b, 0x18, 0xe7, 0xda, 0xff, 0x6b, 0xec, 0x7b, 0x71, 0xb6,\n        0x78, 0x79, 0xc7, 0x97, 0x90, 0x81, 0xf2, 0xbb, 0x91, 0x5f, 0xd7, 0xc1, 0x97, 0xf2, 0xa0, 0xc0,\n        0x25, 0x6b, 0xd8, 0x96, 0x84, 0xb9, 0x49, 0xba, 0xe9, 0xb0, 0x50, 0x78, 0xfe, 0x57, 0x78, 0x1a,\n        0x2d, 0x75, 0x1e, 0x1c, 0xbd, 0x7d, 0xfc, 0xb8, 0xf6, 0x22, 0xbc, 0x20, 0xdd, 0x3e, 0x32, 0x75,\n        0x41, 0x63, 0xdd, 0xb2, 0x94, 0xc1, 0x29, 0xcc, 0x5e, 0x15, 0xb7, 0x1c, 0x0f, 0x02, 0x03, 0x01,\n        0x00, 0x01\n    };\n\n    BIO* bio = BIO_new_mem_buf(key, (int)sizeof(key));\n    ASSERT(bio != NULL);\n\n    EVP_PKEY* pkey = d2i_PUBKEY_bio(bio, NULL);\n    ASSERT(pkey != NULL);\n\n    int type = EVP_PKEY_get_type(pkey);\n    ASSERT(type == EVP_PKEY_RSA || type == EVP_PKEY_RSA2);\n\n    RSA* rsa = EVP_PKEY_get1_RSA(pkey);\n    ASSERT(rsa != NULL);\n\n    // ...\n\n    EVP_PKEY_free(pkey);\n    RSA_free(rsa);\n    BIO_free(bio);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3976878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edd5e34b26c68485dda8b0f83e36fb29?s=128&d=identicon&r=PG&f=1", "display_name": "atv", "link": "https://stackoverflow.com/users/3976878/atv"}, "is_accepted": false, "score": 1, "last_activity_date": 1472516990, "last_edit_date": 1472516990, "creation_date": 1472514327, "answer_id": 39216814, "question_id": 30621457, "link": "https://stackoverflow.com/questions/30621457/how-to-translate-pem-public-key-into-openssl-rsa-structure/39216814#39216814", "title": "How to translate pem public key into openssl RSA* structure", "body": "<p>To load the RSA pub key from the pem file </p>\n\n<pre><code>int loadKey(string &amp;fileName, RSA ** pubkey)\n{\n\n  FILE *fp = fopen(fileName.data(), \"r\");\n  if (fp &lt; 0){\n   printf(\"%s\\n\",\"Invalide certificate file name\");\n   return -1;\n }\n\n *pubkey = PEM_read_RSA_PUBKEY(fp,pubkey, NULL, NULL);\n\n if(*pubkey == NULL){\n   printf(\"%s\\n\",\"error reading Public key\");\n   return -1;\n }\n</code></pre>\n\n<p>To verify the signature </p>\n\n<pre><code>int verify_signature(vector&lt;uint8_t&gt; &amp;msg, vector&lt;uint8_t&gt; &amp;sig, RSA* pkey)\n{\n  /* Returned to caller */\n  int result = -1;\n  vector &lt;uint8_t&gt; pDecrypted(PACKAGE_SIGNATURE_SIZE);\n\n\n  result = RSA_public_decrypt(PACKAGE_SIGNATURE_SIZE, sig.data(), pDecrypted.data(), pkey, RSA_NO_PADDING);\n  if (result == -1)\n  {\n     printf(\"RSA_public_decrypt failed with error %s\\n\", ERR_error_string(ERR_get_error(), NULL));\n    //  goto prog_end;\n  }\n\n\n  /* verify the data */\n  result = RSA_verify_PKCS1_PSS(pkey,msg.data() , EVP_sha256(), pDecrypted.data(), -2 /* salt length recovered from signature*/);\n  if (result == 1)\n  {\n     printf(\"Signature verification successfull!\\n\");\n  }\n  else\n  {\n     printf(\"RSA_verify_PKCS1_PSS failed with error %s\\n\", ERR_error_string(ERR_get_error(), NULL));\n  }\n\n  return !!result;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1461, "user_id": 3913991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/911bddca1764453d14029d9718033efa?s=128&d=identicon&r=PG&f=1", "display_name": "demonguy", "link": "https://stackoverflow.com/users/3913991/demonguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9503, "favorite_count": 4, "answer_count": 2, "score": 4, "last_activity_date": 1472516990, "creation_date": 1433337908, "question_id": 30621457, "link": "https://stackoverflow.com/questions/30621457/how-to-translate-pem-public-key-into-openssl-rsa-structure", "title": "How to translate pem public key into openssl RSA* structure", "body": "<p>Suppose i have to public pem key like this</p>\n\n<pre><code>-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC7vbqajDw4o6gJy8UtmIbkcpnk\nO3Kwc4qsEnSZp/TR+fQi62F79RHWmwKOtFmwteURgLbj7D/WGuNLGOfa/2vse3G2\neHnHl5CB8ruRX9fBl/KgwCVr2JaEuUm66bBQeP5XeBotdR4cvX38uPYivCDdPjJ1\nQWPdspTBKcxeFbccDwIDAQAB\n-----END PUBLIC KEY-----\n</code></pre>\n\n<p>And i want to use openssl</p>\n\n<p><code>int RSA_public_decrypt(int flen, const unsigned char *from, unsigned char *to,RSA *rsa, int padding)</code>. How can i translate the pem key to <code>RSA *rsa</code> structure?</p>\n\n<p>FYI: I can't use BIO because i just want to transplant openssl into a bootloader which doesn't have a UNIX filesystem. The only way i can do is translate public key into a C array.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 6, "creation_date": 1433337861, "post_id": 30621389, "comment_id": 49308871, "body": "I am almost sure that <code>ptr || default_ptr</code> will evalute to <code>1</code> or <code>0</code>."}, {"owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "edited": false, "score": 0, "creation_date": 1433337901, "post_id": 30621389, "comment_id": 49308907, "body": "The conditional expression will return a value but the logical expression will always return either 0 or 1."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 9, "creation_date": 1433337924, "post_id": 30621389, "comment_id": 49308923, "body": "Did you consider checking the result to see if your hypothesis that it <i>could</i> be safe is valid? (You would have had the answer by now.)"}, {"owner": {"reputation": 541, "user_id": 392401, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6f9200fa96cd0eb7955f66596788e719?s=128&d=identicon&r=PG", "display_name": "Nielk", "link": "https://stackoverflow.com/users/392401/nielk"}, "edited": false, "score": 0, "creation_date": 1433338004, "post_id": 30621389, "comment_id": 49309005, "body": "As a side note, you can refer to <a href=\"http://en.cppreference.com/w/cpp/language/eval_order\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/eval_order</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1433338278, "post_id": 30621389, "comment_id": 49309253, "body": "&quot;I rarely see it in C/C++&quot;. Perhaps the reason is that such code won&#39;t even compile in most cases?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1433338318, "post_id": 30621389, "comment_id": 49309275, "body": "@n.m. It could compile, with a warning like <code>making pointer from integer without a cast</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338493, "post_id": 30621389, "comment_id": 49309422, "body": "@iharob: The reverse: &quot;implicit conversion of pointer to integer&quot;. Hmm.. actually not, as the test if for NULL-pointer. Yes: it is valid."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1433349261, "post_id": 30621389, "comment_id": 49317545, "body": "&quot;<i>I rarely see it in C/C++.&quot;</i> Perhaps the reason is that C/C++ doesn&#39;t exist?"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 1, "creation_date": 1433999030, "post_id": 30621389, "comment_id": 49595064, "body": "Just a curiousity: GCC has the non-Standard behaviour of supporting <code>ptr ?: default_ptr</code> to get the behaviour sought in this question... <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.1.0/gcc/Conditionals.html\" rel=\"nofollow noreferrer\">docs here</a>.  You may want to tune your warnings if you actually use this."}], "answers": [{"comments": [{"owner": {"reputation": 10691, "user_id": 861565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6yfIc.png?s=128&g=1", "display_name": "Josh Darnell", "link": "https://stackoverflow.com/users/861565/josh-darnell"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1433354867, "post_id": 30621466, "comment_id": 49320922, "body": "The edit to your answer doesn&#39;t make sense, I think because you misquoted @LightnessRacesinOrbit as claiming the answer is only valid in C++ (which makes the second paragraph seem confusing and contradictory).  Additionally, I don&#39;t see the point of the link to the YouTube flame-bait claiming that C and C++ should be one language."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 10691, "user_id": 861565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6yfIc.png?s=128&g=1", "display_name": "Josh Darnell", "link": "https://stackoverflow.com/users/861565/josh-darnell"}, "edited": false, "score": 0, "creation_date": 1433356370, "post_id": 30621466, "comment_id": 49321773, "body": "@jadarnel27 The link to the video, is just to note that even though c and c++ are not the same languages c++ tries to be as much as possible like c, because the original intention of the creator was to make it one language."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 10691, "user_id": 861565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6yfIc.png?s=128&g=1", "display_name": "Josh Darnell", "link": "https://stackoverflow.com/users/861565/josh-darnell"}, "edited": false, "score": 2, "creation_date": 1433378023, "post_id": 30621466, "comment_id": 49331680, "body": "@jadarnel27: It&#39;s also misleading/wrong because it suggests that the only difference between C and C++ is the type of the expression when, in fact, short-circuiting \u2014 ostensibly the very point of this question \u2014 only works on built-in boolean operators. <a href=\"http://stackoverflow.com/a/628554/560648\">Once you overload them, a C++ feature, that goes away</a>. I probably wouldn&#39;t have bothered commenting otherwise. Thus, the answer is still sort of wrong. That said, despite the title, it&#39;s difficult to see where short-circuiting <i>really</i> fits into this question."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1433378826, "post_id": 30621466, "comment_id": 49331897, "body": "@LightnessRacesinOrbit I see your point, you&#39;re right, and that&#39;s one of the reasons why I don&#39;t like c++, it&#39;s so complicated."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1433418478, "post_id": 30621466, "comment_id": 49350058, "body": "@iharob: It really is awful :)"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 11, "last_activity_date": 1433378796, "last_edit_date": 1495539877, "creation_date": 1433337925, "answer_id": 30621466, "question_id": 30621389, "link": "https://stackoverflow.com/questions/30621389/short-circuiting-of-non-booleans/30621466#30621466", "title": "Short-circuiting of non-booleans", "body": "<p>The second expression will evaluate to either <code>1</code> or <code>0</code>.</p>\n\n<p>Quoting the C11 standard draft:</p>\n\n<blockquote>\n  <p><strong>6.5.14 Logical OR operator</strong></p>\n  \n  <ol start=\"3\">\n  <li>The <code>||</code> operator shall yield 1 if either of its operands compare unequal to 0; otherwise, it yields 0. The result has type <code>int</code>.</li>\n  </ol>\n</blockquote>\n\n<p>So the two expressions are very different, since one of them yields a pointer, and the other one an integer.</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>One of the comments claims that this answer is only valid for c, and @<a href=\"https://stackoverflow.com/users/560648/lightness-races-in-orbit\">Lightness Races in Orbit</a>  is right.</p>\n\n<p>There are also answers that are only correct for c++<sup>1</sup>, although the only difference with them is that c++ has type <code>bool</code> and then it evaluates this expression as <code>bool</code> instead of <code>int</code>. But <a href=\"https://stackoverflow.com/a/628554/1983495\">apparently there is an important issue with overloading <code>||</code> operator in c++</a>, which prvents short-citcuiting  to <em>apply</em> for the object that overloads it.</p>\n\n<p>So for c++ there are more things to consider, but since this question was tagged with both languages tags, then it's necessary to mention at least the differece.</p>\n\n<p>The rule still applies when short-circuiting applies, i.e. the result of the evaluation of the expressions is either <code>1</code> or <code>0</code> for c and <code>true</code> or <code>false</code> for c++.</p>\n\n<hr>\n\n<p><sup>1</sup> Like these answers: <a href=\"https://stackoverflow.com/a/30621471/1983495\">1</a>, <a href=\"https://stackoverflow.com/a/30621597/1983495\">2</a></p>\n"}, {"tags": [], "owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "is_accepted": false, "score": 3, "last_activity_date": 1433337934, "creation_date": 1433337934, "answer_id": 30621469, "question_id": 30621389, "link": "https://stackoverflow.com/questions/30621389/short-circuiting-of-non-booleans/30621469#30621469", "title": "Short-circuiting of non-booleans", "body": "<p>No. The result type is <code>int</code> (or <code>bool</code> in C++), and will be either <code>1</code> or <code>0</code> (<code>true</code> or <code>false</code> in C++).</p>\n"}, {"tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 3, "last_activity_date": 1433337938, "creation_date": 1433337938, "answer_id": 30621471, "question_id": 30621389, "link": "https://stackoverflow.com/questions/30621389/short-circuiting-of-non-booleans/30621471#30621471", "title": "Short-circuiting of non-booleans", "body": "<p><code>operator||</code> for pointers returns a <code>bool</code>, so <code>ptr || default_ptr</code> will evaluate to <code>true</code> if either <code>ptr</code> or <code>default_ptr</code> are non-null.</p>\n"}, {"comments": [{"owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 1, "creation_date": 1433340039, "post_id": 30621597, "comment_id": 49310669, "body": "Nitpick, if the return value from <code>function_returning_bool()</code> is a class with an overridden <code>operator||()</code> method, then short-circuiting won&#39;t happen...."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "reply_to_user": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1433340106, "post_id": 30621597, "comment_id": 49310717, "body": "@AndreKostur Thanks, forgot about that. I always appreciate nitpicking :)"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1433370257, "post_id": 30621597, "comment_id": 49329202, "body": "Obviously, it&#39;s a matter of taste whether <code>condition() || exec_on_false()</code> is good style. I&#39;d rather say it isn&#39;t: since the result is boolean, you can pretty much only use it for side-effect-only functions, and for these you might as well use an <code>if</code>, which is much clearer."}], "tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 5, "last_activity_date": 1433338258, "creation_date": 1433338258, "answer_id": 30621597, "question_id": 30621389, "link": "https://stackoverflow.com/questions/30621389/short-circuiting-of-non-booleans/30621597#30621597", "title": "Short-circuiting of non-booleans", "body": "<p>Concerning the Perl style, which usually is of type</p>\n\n<pre><code>do_someting || die(\"didn't work\")\n</code></pre>\n\n<p>This would work in C++ also.</p>\n\n<pre><code>function_returning_bool(some) || std::cout &lt;&lt; \"Error!\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>This is due to the <code>||</code> being a logical OR operator and causing the short-circuit in this case if the return value is true.</p>\n\n<p>But using it instead of the ternary operator is impossible.</p>\n\n<pre><code>std::cout &lt;&lt; (\"asd\" || \"dsa\");\n</code></pre>\n\n<p>This will result in <code>1</code> being output.</p>\n"}], "owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 30621466, "answer_count": 4, "score": 10, "last_activity_date": 1433378796, "creation_date": 1433337745, "question_id": 30621389, "link": "https://stackoverflow.com/questions/30621389/short-circuiting-of-non-booleans", "title": "Short-circuiting of non-booleans", "body": "<p>Is it safe to shorten this usage of the ternary operator:</p>\n\n<pre><code>process_ptr(ptr ? ptr : default_ptr);\n</code></pre>\n\n<p>with the short-circuit:</p>\n\n<pre><code>process_ptr(ptr || default_ptr);\n</code></pre>\n\n<p>in C and C++? In other words, are we guaranteed to get <em>either</em> <code>ptr</code> <em>or</em> <code>default_ptr</code> back from the experssion, or is it perhaps allowed for the expression to result in an arbitrary \"logical true\" value, if the expression is logically true?</p>\n\n<p>This is the kind of code you'd see all over Perl code, but I rarely see it in C/C++, that's the original basis of my question.</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433337596, "post_id": 30621250, "comment_id": 49308652, "body": "You can <code>void foo_a_10_20(int array[10][20])</code>!"}, {"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1433337970, "post_id": 30621250, "comment_id": 49308972, "body": "Yes, but the idea, and maybe I didn&#39;t stress this enough, is that I do not know the size of the array beforehand."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338120, "post_id": 30621250, "comment_id": 49309102, "body": "I don&#39;t think you can do that."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1433338334, "post_id": 30621250, "comment_id": 49309287, "body": "You need to do the pointer arithmetic correctly yourself. <code>*(arr + i*n + j)</code> I&#39;m afraid..."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 2, "creation_date": 1433338409, "post_id": 30621250, "comment_id": 49309347, "body": "@Eregrith, a pointer to a pointer to int is not the same as multidimensional array. The indexing uses different arithmetic."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433338562, "post_id": 30621250, "comment_id": 49309481, "body": "Indeed <a href=\"http://ideone.com/mL7Gyt\" rel=\"nofollow noreferrer\">I just tested that on ideone</a> and saw I&#39;m wrong"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1433338673, "post_id": 30621250, "comment_id": 49309569, "body": "@StoryTeller has the correct answer. Sir, you should put that in an answer ^^"}], "answers": [{"comments": [{"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1433341574, "post_id": 30622764, "comment_id": 49311886, "body": "With your second example involving <code>malloc()</code>ed arrays you answered a question I already had lined up in the back of my head. Very nice!"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1433341096, "creation_date": 1433341096, "answer_id": 30622764, "question_id": 30621250, "link": "https://stackoverflow.com/questions/30621250/passing-multidimensional-array-in-c90-pre-vla-style/30622764#30622764", "title": "Passing multidimensional array in c90 (pre VLA-style)", "body": "<p>One method is to pass a pointer to the first element of the array along with the array dimensions, then treat that pointer as a 1-d array in your function.</p>\n\n<p>Example:</p>\n\n<pre><code>void foo( int *arr, size_t r, size_t c )  // process a 2D array defined as int arr[r][c]\n{\n  for ( size_t i = 0; i &lt; r; i++ )\n    for ( size_t j = 0; j &lt; c; j++ )\n      arr[i * r + j] = some_value();  // calculate index manually\n}\n\nint main( void )\n{\n  int arr[4][5];\n\n  foo( &amp;arr[0][0], 4, 5 );\n}\n</code></pre>\n\n<p>This scales up pretty easily to higher dimensioned arrays.  Naturally this only works for true multi-dimensional arrays where the rows are all adjacent in memory.  This won't work for arrays dynamically allocated a row at a time, such as</p>\n\n<pre><code>int **arr = malloc( sizeof *arr * rows );\nfor ( size_t i = 0; i &lt; rows; i++ )\n  arr[i] = malloc( sizeof *arr[i] * cols );\n</code></pre>\n\n<p>since the rows aren't guaranteed to be adjacent, but in that case you'd just use the <code>arr</code> pointer as-is:</p>\n\n<pre><code>void bar( int **arr, size_t r, size_t c ) // process a 2D array defined as int **arr\n{\n  for ( size_t i = 0; i &lt; r; i++ )\n    for ( size_t j = 0; j &lt; c; j++ )\n      arr[i][j] = some_value();\n}\n</code></pre>\n"}], "owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 30622764, "answer_count": 1, "score": 2, "last_activity_date": 1433341096, "creation_date": 1433337401, "last_edit_date": 1433338019, "question_id": 30621250, "link": "https://stackoverflow.com/questions/30621250/passing-multidimensional-array-in-c90-pre-vla-style", "title": "Passing multidimensional array in c90 (pre VLA-style)", "body": "<p>Given the rise of VLA since <code>c99</code> it has become easier to pass a multidimensional array of <strong>unknown size</strong> to a function. But there is a decent amount of controversy around using VLAs. Some readily endorse it <a href=\"http://cgit.freedesktop.org/systemd/systemd/tree/CODING_STYLE?id=dde8bb32b12c855509777ce52ff59a835155ac78\" rel=\"nofollow\">\"It is often nicer\n  to use dynamic memory, alloca() or VLAs.\"</a><sup>1</sup> others <a href=\"https://stackoverflow.com/questions/7326547/is-it-safe-to-use-variable-length-arrays\">scorne them</a>. The question I was asking myself is what the standard way was in the <code>c90</code> days to passing a multidimensional array to a function. Here is a little code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\n\n        int arr[2][4];\n\n        int i;\n        int j;\n\n        for(i = 0; i &lt; 2; i++) {\n                for(j = 0; j &lt; 4; j++) {\n                        arr[i][j] = j;\n                }\n        }    \n        exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>I could think of one way: passing a pointer to a pointer:</p>\n\n<pre><code>void foo_a(int m, int n, int **ptr_arr)\n{\n        int i, j;\n        for (i = 0; i &lt; m; i++) {\n                for (j = 0; j &lt; n; j++) {\n                        ptr_arr[i][j] += 1;\n                }\n                printf(\"\\n\");\n        }\n}\n</code></pre>\n\n<p>But that would involve flattening the array first by inserting something like into main (which is not pretty).</p>\n\n<pre><code>int *unidim_arr[ROW];\nfor (i = 0; i &lt; ROW; i++) {\n        unidim_arr[i] = &amp;(arr[i][0]);\n}\n</code></pre>\n\n<p>Another one would probably be using a single pointer and calculating the offset by hand which is error prone:</p>\n\n<pre><code>void foo_b(int m, int n, int *ptr_arr)\n{\n        int i, j;\n        for (i = 0; i &lt; m; i++) {\n                for (j = 0; j &lt; n; j++) {\n                         *((ptr_arr + i * n) + j) += 1;\n                }\n        }\n}\n</code></pre>\n\n<p>The solution that strikes me as nicest is using something like</p>\n\n<pre><code>void foo_c(int m, int n, int (*ptr_arr)[])\n{\n        int i, j;\n        for (i = 0; i &lt; m; i++) {\n                for (j = 0; j &lt; n; j++) {\n                        ptr_arr[i][j] += 1;\n                }\n        }\n}\n</code></pre>\n\n<p>but to my understanding this would only work with VLAs where I can simply specify <code>(*ptr_arr)[n]</code> in the functions parameter list? Is there another way to do it in <code>c90</code> with special attention to <code>foo_c()</code>?</p>\n\n<p><sub>\n1. Please, no systemd-bashing.\n</sub></p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433336609, "post_id": 30620885, "comment_id": 49307827, "body": "Can you please post <code>numcmp</code>?, and anyway that&#39;s no a good idea in my opinion, write a different <code>qsort()</code> for each data type."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1433336695, "post_id": 30620885, "comment_id": 49307892, "body": "You shouldn&#39;t cast a function pointer to a different type. Using it afterwards is undefined."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1433337048, "post_id": 30620885, "comment_id": 49308166, "body": "And you need two functions with the same prototype in the conditional expression."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433337645, "post_id": 30620885, "comment_id": 49308694, "body": "And specially using the ternary operator with variables of different types is not going to compile."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1433338276, "post_id": 30620885, "comment_id": 49309249, "body": "@sby - Or, you could edit your post with this definition and format it to be readable. :)"}, {"owner": {"reputation": 21, "user_id": 4969619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2b669846d2167e25f2b87812add580?s=128&d=identicon&r=PG&f=1", "display_name": "sby", "link": "https://stackoverflow.com/users/4969619/sby"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433338391, "post_id": 30620885, "comment_id": 49309330, "body": "@iharob added numcmp fuction and my teacher wroted as i wrote."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1433338499, "post_id": 30620885, "comment_id": 49309427, "body": "Does it help if you change the signature of <code>numcmp</code> to <code>int numcmp(const char *s1, const char *s2)</code>?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1433338735, "post_id": 30620885, "comment_id": 49309623, "body": "You wouldn&#39;t happen to be using the K&amp;R C book? It contains exactly that code. The language has changed since 1988, and if you have a C99 compiler there&#39;s a lot in there it will refuse to compile."}, {"owner": {"reputation": 21, "user_id": 4969619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2b669846d2167e25f2b87812add580?s=128&d=identicon&r=PG&f=1", "display_name": "sby", "link": "https://stackoverflow.com/users/4969619/sby"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1433338952, "post_id": 30620885, "comment_id": 49309779, "body": "@KlasLindb&#228;ck changing signature doesn&#39;t help.."}, {"owner": {"reputation": 21, "user_id": 4969619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2b669846d2167e25f2b87812add580?s=128&d=identicon&r=PG&f=1", "display_name": "sby", "link": "https://stackoverflow.com/users/4969619/sby"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1433339148, "post_id": 30620885, "comment_id": 49309972, "body": "@molbdnilo hmm.. Is The C programming Language second edition wrote by  Dennis Ritchie and Brian Kernighan you said?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1433339719, "post_id": 30620885, "comment_id": 49310412, "body": "@sby Changing the signature removes the compiler error for me. Perhaps there is a declaration of <code>numcmp</code> higher up in the code that you forgot to change."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1433346585, "creation_date": 1433346585, "answer_id": 30624927, "question_id": 30620885, "link": "https://stackoverflow.com/questions/30620885/pointer-type-mismatch-in-conditional-expression/30624927#30624927", "title": "pointer type mismatch in conditional expression", "body": "<p>The conditional expression in question is this:</p>\n\n<pre><code>numeric ? numcmp : strcmp\n</code></pre>\n\n<p>The compiler is complaining that the type of the sub-expression <code>numcmp</code> is different from the type of the sub-expression <code>strcmp</code>.  The former has type <code>int (*)(char *, char *)</code>, and the latter has type <code>int (*)(const char *, const char *)</code> (provided that you have remembered to <code>#include &lt;string.h&gt;</code>, which you must do).  These are not the same, nor even compatible (in the standard's sense of the term \"compatible\").</p>\n\n<p>You could probably get get around the error by adding <code>const</code> qualifiers to the parameters of function <code>numcmp()</code>.  GCC may still complain about the cast you perform on the expression's value, however.</p>\n"}], "owner": {"reputation": 21, "user_id": 4969619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2b669846d2167e25f2b87812add580?s=128&d=identicon&r=PG&f=1", "display_name": "sby", "link": "https://stackoverflow.com/users/4969619/sby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1199, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491695645, "creation_date": 1433336483, "last_edit_date": 1491695645, "question_id": 30620885, "link": "https://stackoverflow.com/questions/30620885/pointer-type-mismatch-in-conditional-expression", "title": "pointer type mismatch in conditional expression", "body": "<p>I'm studying pointers, and I copied a quicksort implementation.\n When I compile, gcc shows the error:</p>\n\n<blockquote>\n  <p>pointer type mismatch in conditional expression</p>\n</blockquote>\n\n<p>The line that invoked the error is:</p>\n\n<pre><code>qSort((void**)lineptr, 0, nlines-1, (int(*)(void*, void*))(numeric ? numcmp : strcmp)); \n</code></pre>\n\n<p>The types in that code are the same as the initialized types:</p>\n\n<pre><code>void qSort(void *lineptr[], int left, int right, int (*comp)(void *, void *));\n</code></pre>\n\n<p>Here is the <code>numcmp</code> implementation:</p>\n\n<pre><code>int numcmp(char *s1, char *s2) \n{ \n    double v1, v2; v1 = atof(s1); \n    v2 = atof(s2); \n    if (v1 &lt; v2) \n        return -1; \n    else if (v1 &gt; v2) \n        return 1; \n    else\n        return 0; \n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "compilation", "compiler-errors", "dereference"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1433336065, "post_id": 30620670, "comment_id": 49307366, "body": "<i>Which</i> compilation error ?"}, {"owner": {"reputation": 1408, "user_id": 1988249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10a828baf476a25167bf4b44bd2c46d8?s=128&d=identicon&r=PG", "display_name": "Ginu Jacob", "link": "https://stackoverflow.com/users/1988249/ginu-jacob"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1433336225, "post_id": 30620670, "comment_id": 49307506, "body": "Error[Pe137]: expression must be a modifiable lvalue"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1433336226, "post_id": 30620670, "comment_id": 49307509, "body": "<code>((char*)somePtr)</code> is not a variable, you can&#39;t inctement it."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 3, "last_activity_date": 1433740332, "last_edit_date": 1433740332, "creation_date": 1433336081, "answer_id": 30620739, "question_id": 30620670, "link": "https://stackoverflow.com/questions/30620670/using-increment-operator-with-de-referencing-in-c/30620739#30620739", "title": "Using Increment operator with de-referencing in C", "body": "<p>A cast does not yield an lvalue <sub>(see section 6.5.4 footnote 104 of C11 standard)</sub>, therefore you can't apply post increment <code>++</code> operator to its result.   </p>\n\n<p><a href=\"http://www.c-faq.com/ptrs/castincr.html\" rel=\"nofollow\">c-faq: 4.5</a>:</p>\n\n<blockquote>\n  <p>In C, a cast operator does not mean \"pretend these bits have a different type, and treat them accordingly\"; <strong>it is a conversion operator, and by definition it yields an rvalue, which cannot be assigned to, or incremented with ++</strong>. (It is either an accident or a deliberate but nonstandard extension if a particular compiler accepts expressions such as the above.)  </p>\n</blockquote>\n\n<p>Try this instead  </p>\n\n<pre><code>char *charPtr = ((char*)somePtr);\ncharPtr++;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 1, "creation_date": 1433336546, "post_id": 30620862, "comment_id": 49307783, "body": "a note: you code implies gnu c compatibility. std didn&#39;t define addition to a void ptr."}, {"owner": {"reputation": 7207, "user_id": 743290, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4e19b7e5dbf742b9cce6981a0956f700?s=128&d=identicon&r=PG", "display_name": "Vineet1982", "link": "https://stackoverflow.com/users/743290/vineet1982"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 1, "creation_date": 1433336617, "post_id": 30620862, "comment_id": 49307832, "body": "I agree but he didn&#39;t ask for a std"}, {"owner": {"reputation": 1408, "user_id": 1988249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10a828baf476a25167bf4b44bd2c46d8?s=128&d=identicon&r=PG", "display_name": "Ginu Jacob", "link": "https://stackoverflow.com/users/1988249/ginu-jacob"}, "edited": false, "score": 0, "creation_date": 1433336622, "post_id": 30620862, "comment_id": 49307840, "body": "The problem is I need to move to next location but this being a void pointer , I am trying to tell the compiler that I need to dereference it as a char pointer and increment. So the problem statement is while doing both of this together it gives a compiler error"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1433339303, "post_id": 30620862, "comment_id": 49310094, "body": "the problem is op may not use gcc or any compatible ones. std compliant is default when environment or tool chain is not specified."}], "tags": [], "owner": {"reputation": 7207, "user_id": 743290, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4e19b7e5dbf742b9cce6981a0956f700?s=128&d=identicon&r=PG", "display_name": "Vineet1982", "link": "https://stackoverflow.com/users/743290/vineet1982"}, "is_accepted": false, "score": 1, "last_activity_date": 1433336420, "creation_date": 1433336420, "answer_id": 30620862, "question_id": 30620670, "link": "https://stackoverflow.com/questions/30620670/using-increment-operator-with-de-referencing-in-c/30620862#30620862", "title": "Using Increment operator with de-referencing in C", "body": "<p>If you want to move the pointer to next then you can use:</p>\n\n<pre><code>*ptr++;\n</code></pre>\n\n<p>If you want to Change copy the pointer position to another variable then:</p>\n\n<pre><code>char *abc = (char*)(def + 1);\n</code></pre>\n\n<p>It really depends on your motive to do things</p>\n"}], "owner": {"reputation": 1408, "user_id": 1988249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10a828baf476a25167bf4b44bd2c46d8?s=128&d=identicon&r=PG", "display_name": "Ginu Jacob", "link": "https://stackoverflow.com/users/1988249/ginu-jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 30620739, "answer_count": 2, "score": 0, "last_activity_date": 1433740332, "creation_date": 1433335926, "last_edit_date": 1433337248, "question_id": 30620670, "link": "https://stackoverflow.com/questions/30620670/using-increment-operator-with-de-referencing-in-c", "title": "Using Increment operator with de-referencing in C", "body": "<p>To my function i get a void pointer, I would like to point to the next location considering the incoming pointer is of char type. </p>\n\n<pre><code>int doSomething( void * somePtr )\n{\n   ((char*)somePtr)++; // Gives Compilation error\n}\n</code></pre>\n\n<p>I get the following compilation error:</p>\n\n<pre><code>Error[Pe137]: expression must be a modifiable lvalue\n</code></pre>\n\n<p>Is this an issue with the priority of operators?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1433335111, "post_id": 30620297, "comment_id": 49306595, "body": "First of allo use <code>malloc</code> to allocate space of string..."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1433335169, "post_id": 30620297, "comment_id": 49306648, "body": "@LPs: <code>malloc</code> to allocate a string of 2 bytes on the heap?"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433335241, "post_id": 30620297, "comment_id": 49306711, "body": "Read the manual for <code>strcat</code>. It says the receiving buffer needs to be of enough allocated space to receive the copy"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1433335308, "post_id": 30620297, "comment_id": 49306760, "body": "@MOehm no, for the <code>char *string</code>. You are pointing somethong around the memory map. Your pointer is not initialized."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 0, "creation_date": 1433335458, "post_id": 30620297, "comment_id": 49306872, "body": "Whilst all the comments are correct in stating that you need to allocate memory for the string pointer, what&#39;s your actual question?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1433335463, "post_id": 30620297, "comment_id": 49306877, "body": "It is not clear what you are trying to achieve. Why not declare <code>char string[2]</code> and assign it directly? Or, if you are dealing with single-letter strings throughout, just store them as <code>char</code> and compare them directly?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1433335572, "post_id": 30620297, "comment_id": 49306966, "body": "@LPs: I know that you mean the <code>char *string</code>, but allocating a buffer on the heap (and thus creating the memory management overhead) for something that needs two bytes is not a good advice, in my opinion."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433335595, "post_id": 30620297, "comment_id": 49306987, "body": "You must <b>not</b> put a <code>char</code> into a pointer (you do not want to)! You might want, however store the value of a a <code>char</code> variable the pointer <i>points to</i> (provided it is a <i>pointer to</i> <code>char</code>. Or store the <i>address of</i> a <code>char</code> variable into a pointer. For the example: the <i>pointer to</i> <code>char</code> string points to no valid address. So you have to allocate memory first. Note also, that C does not have <i>strings</i>, but only <i>arrays of</i> <code>char</code>. So it is your responsibility to provide enough free space in an array and have every <i>pointer to</i> <code>char</code> pointing to valid memory space."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1433335759, "post_id": 30620297, "comment_id": 49307112, "body": "@MOehm: Agree for production code, but perhaps for a lesson? But that&#39;s all speculative, as the TO does not explain what he actually wants to achieve."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1433335800, "post_id": 30620297, "comment_id": 49307149, "body": "@MOehm, you could use an array, as someone else answered you, but you <b>have to</b> initialize your pointer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433335972, "post_id": 30620297, "comment_id": 49307309, "body": "@iharob: &quot;pure C&quot; would be a C-only compiler? (Not combined with a C++ compiler;-)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433336096, "post_id": 30620297, "comment_id": 49307395, "body": "@Olaf, there is no such thing, c compilers and c++ compilers are very diffrent, it&#39;s not like Oh, lets make a c compiler complete by adding support for c++, c compilers compile c, c++ compilers compile c++, and c++ can compile code that a c compiler can compile but it&#39;d still be c++."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433336607, "post_id": 30620297, "comment_id": 49307824, "body": "@iharob: You really should debug your regex for emoticons  ;-) ;-) ;-) However, that is not (completely) true. For the parser, you are right, but the lexxer is basically the same, quite some optimizations can also be shared (between most languages, actually, see gcc and llvm, clang), symbol management mostly too, etc. Gues why llvm becomes more and more popular"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433336715, "post_id": 30620297, "comment_id": 49307903, "body": "The generated code is also different because the functions names are altered by the c++ compiler, but I see that you know that."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1433336758, "post_id": 30620297, "comment_id": 49307935, "body": "&quot;... an unlimited ... store in a variable&quot;. That is impossible! Space is always limited,computer memory even more than space in universe."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1433337025, "post_id": 30620297, "comment_id": 49308143, "body": "@iharob: Well, I have done quite some research on compiler construction some years ago and I currently think about it just again for a reason (once I get some free time)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1433338014, "post_id": 30620297, "comment_id": 49309012, "body": "If you want to receive input <i>without any predefined limit</i> and store it in memory, then there is no alternative to dynamic allocation (<code>malloc()</code> / <code>calloc()</code>).  If you cannot determine before you start receiving the input how much there will be (i.e. on a run-by-run basis), then you must additionally be prepared to reallocate to obtain more space (<code>realloc()</code>).  There is no trick to get around this -- these functions are <i>the</i> way C provides for handling memory usage requirements such as you describe."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1433338490, "post_id": 30620297, "comment_id": 49309420, "body": "&quot;unlimited amount of characters&quot; - there is no such thing. As @JohnBollinger states, you surely mean <i>without any predefined limit</i> stored in memory. If you don&#39;t dynamically create a buffer to hold the characters, you can create a very large array on the stack, though this is not recommended and you should still check for input larger than your allocated array."}, {"owner": {"reputation": 5526, "user_id": 557153, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/h2fWz.png?s=128&g=1", "display_name": "avgvstvs", "link": "https://stackoverflow.com/users/557153/avgvstvs"}, "edited": false, "score": 0, "creation_date": 1433346485, "post_id": 30620297, "comment_id": 49315804, "body": "Use strncat instead of strcat if this is eventually going to become production code."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1433335448, "creation_date": 1433335448, "answer_id": 30620476, "question_id": 30620297, "link": "https://stackoverflow.com/questions/30620297/how-to-put-a-char-into-a-empty-pointer-of-a-string-in-pure-c/30620476#30620476", "title": "How to put a char into a empty pointer of a string in pure C", "body": "<p>You have undefined behavior.</p>\n\n<p>You never set <code>string</code> to point anywhere, so you can't dereference that pointer.</p>\n\n<p>You need something like:</p>\n\n<pre><code>char buf[1024] = \"\", *string = buf;\n</code></pre>\n\n<p>that initializes <code>string</code> to point to valid memory where you can write, and also sets that memory to an empty string so you can use <code>strcat()</code>.</p>\n\n<p>Note that looping <code>strcat()</code> like this is very inefficient, since it needs to find the end of the destination string on each call. It's better to just use pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "is_accepted": false, "score": 0, "last_activity_date": 1433337852, "last_edit_date": 1433337852, "creation_date": 1433336248, "answer_id": 30620785, "question_id": 30620297, "link": "https://stackoverflow.com/questions/30620297/how-to-put-a-char-into-a-empty-pointer-of-a-string-in-pure-c/30620785#30620785", "title": "How to put a char into a empty pointer of a string in pure C", "body": "<blockquote>\n  <p>char *string;</p>\n</blockquote>\n\n<p>You've declared an uninitialised variable with this statement. With some compilers, in debug this may be initialised to 0. In other compilers and a release build, you have no idea what this is pointing to in memory. You may find that when you build and run in release, your program will crash, but appears to be ok in debug. The actual behaviour is undefined.</p>\n\n<p>You need to either create a variable on the stack by doing something like this</p>\n\n<pre><code>char string[100]; // assuming you're not going to receive more than 99 characters (100 including the NULL terminator)\n</code></pre>\n\n<p>Or, on the heap: -</p>\n\n<pre><code>char string* = (char*)malloc(100);\n</code></pre>\n\n<p>In which case you'll need to free the character array when you're finished with it.</p>\n\n<p>Assuming you don't know how many characters the user will type, I suggest you keep track in your loop, to ensure you don't try to concatenate beyond the memory you've allocated. </p>\n\n<p>Alternatively, you could limit the number of characters that a user may enter.</p>\n\n<pre><code>const int MAX_CHARS = 100;\n\nchar string[MAX_CHARS + 1]; // +1 for Null terminator\n\nint numChars = 0;\nwhile(numChars &lt; MAX_CHARS) &amp;&amp; (c=getchar())!= EOF) \n{\n    ...\n    ++numChars;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1433337159, "post_id": 30621012, "comment_id": 49308273, "body": "what if realloc fails? Also: that would still be <b>limited</b>. The NSA is currently the only with <b>unlimited</b> space (apparently). ..."}, {"owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1433337300, "post_id": 30621012, "comment_id": 49308386, "body": "You have a point, but at least is better than <code>char buf[sizof(RAM)];</code>  ;)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1433337469, "post_id": 30621012, "comment_id": 49308544, "body": "as long as <code>sizeof(RAM) &lt; sizeof(UNIVERSE) &#47; 2</code>, there&#39;s still space left for us. (just don&#39;t want to wait until all is initialized near the border-case) :-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433337625, "post_id": 30621012, "comment_id": 49308676, "body": "I just will not start to discuss performance of realloc. The alternative will very likely be beyond the TO&#39;s skills (that is a statement, no offense)."}, {"owner": {"reputation": 21, "user_id": 4969570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L3AFWwuhIzE/AAAAAAAAAAI/AAAAAAAAABk/Kk74MJIqrEY/photo.jpg?sz=128", "display_name": "CIA  A big guy", "link": "https://stackoverflow.com/users/4969570/cia-a-big-guy"}, "edited": false, "score": 0, "creation_date": 1433337751, "post_id": 30621012, "comment_id": 49308782, "body": "I updated my code but &#39;buf&#39; doesn&#39;t return anything when I try to puts/printf it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1433337771, "post_id": 30621012, "comment_id": 49308794, "body": "And you should really learn how to use <code>realloc()</code> correctly."}, {"owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "edited": false, "score": 0, "creation_date": 1433338234, "post_id": 30621012, "comment_id": 49309216, "body": "Apologies, i forgot to add the trailing <code>&#39;\\0&#39;</code> . Will edit now."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433343790, "post_id": 30621012, "comment_id": 49313660, "body": "Ok, but I do will not discuss this (just had an argument on that). <code>realloc()</code> might have to copy, depending on heap fragmentation and OS optimizations, this might be avoidable mostly, but not completely. It also might add to fragmentation and if it copies, both areas have to be reserved in parallel. The alternative: linked list of arrays. Once the corrent block is full, chain the next. For systems without MMU, this is definitively superiour and for others likely (just choose the size of the array appropriately). ..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433344042, "post_id": 30621012, "comment_id": 49313865, "body": "... Tradeof: indexing is more difficult, but you might build an index table once finished filling. That still produces some overhead, but for many algorithms that will be negligible. For parallel algorithms that might allow to split the buffer per node, allowing to change CPU-association of the memory area (NUMA e.g.). On small embedded, that would be the structure of choice; these often do not support realloc, or even malloc&amp;co as such."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433344285, "post_id": 30621012, "comment_id": 49314052, "body": "Disclaimer (to ever reader of the above): I do not recomend that if you are just practicing and do not really know what a linked list is! But you might take this as a hint to learn about them - they are one of the most basic and most versatile data structures in programming."}], "tags": [], "owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "is_accepted": false, "score": 2, "last_activity_date": 1433338414, "last_edit_date": 1433338414, "creation_date": 1433336808, "answer_id": 30621012, "question_id": 30620297, "link": "https://stackoverflow.com/questions/30620297/how-to-put-a-char-into-a-empty-pointer-of-a-string-in-pure-c/30621012#30621012", "title": "How to put a char into a empty pointer of a string in pure C", "body": "<p>If you want <strong>unlimited</strong> amount of character input, you'll need to actively manage the size of your buffer. Which is not as hard as it sounds. </p>\n\n<ul>\n<li>first use malloc to allocate, say, 1000 bytes. </li>\n<li>read until this runs out.</li>\n<li>use realloc to allocate 2000</li>\n<li>read until this runs out.</li>\n</ul>\n\n<p>like this:</p>\n\n<pre><code>int main(){\n  int buf_size=1000;\n  char* buf=malloc(buf_size);\n  char c;\n  int n=0;\n  while((c=getchar())!= EOF) \n     buf[n++] = c;\n     if(n=&gt;buf_size-1)\n     {\n        buf_size+=1000;\n        buf=realloc(buf, buf_size);\n     }\n  }\n  buf[n] = '\\0'; //add trailing 0 at the end, to make it a proper string\n  //do stuff with buf;\n  free(buf);\n  return 0;\n}\n</code></pre>\n\n<p>You won't get around using malloc-oids if you want unlimited input.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1433343621, "last_edit_date": 1433343621, "creation_date": 1433342981, "answer_id": 30623524, "question_id": 30620297, "link": "https://stackoverflow.com/questions/30620297/how-to-put-a-char-into-a-empty-pointer-of-a-string-in-pure-c/30623524#30623524", "title": "How to put a char into a empty pointer of a string in pure C", "body": "<p>As I wrote in comments, you cannot avoid <code>malloc()</code> / <code>calloc()</code> and probably <code>realloc()</code> for a problem such as you have described, where your program does not know until run time how much memory it will need, and must not have any predetermined limit.  In addition to the memory management issues on which most of the discussion and answers have focused, however, your code has some additional issues, including:</p>\n\n<ul>\n<li><p><code>getchar()</code> returns type <code>int</code>, and to correctly handle all possible inputs you must not convert that <code>int</code> to <code>char</code> before testing against EOF.  In fact, for maximum portability you need to take considerable care in converting to <code>char</code>, for if default <code>char</code> is signed, or if its representation has certain other allowed (but rare) properties, then the value returned by <code>getchar()</code> may exceed its maximum value, in which case direct conversion exhibits undefined behavior.  (In truth, though, this issue is often ignored, usually to no ill effect in practice.)</p></li>\n<li><p><strong>Never</strong> pass a user-provided string to <code>printf()</code> as the format string.  It will not do what you want for some inputs, and it can be exploited as a security vulnerability.  If you want to just print a string verbatim then <code>fputs(string, stdout)</code> is a better choice, but you can also safely do <code>printf(\"%s\", string)</code>.</p></li>\n</ul>\n\n<p>Here's a way to approach your problem that addresses all of these issues:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;limits.h&gt;\n\n#define INITIAL_BUFFER_SIZE 1024\n\nint main()\n{\n    char *string = malloc(INITIAL_BUFFER_SIZE);\n    size_t cap = INITIAL_BUFFER_SIZE;\n    size_t next = 0;\n    int c;\n\n    if (!string) {\n        // allocation error\n        return 1;\n    }\n\n    while ((c = getchar()) != EOF) {\n        if (next + 1 &gt;= cap) {\n            /* insufficient space for another character plus a terminator */\n            cap *= 2;\n            string = realloc(string, cap);\n            if (!string) {\n                /* memory reallocation failure */\n                /* memory was leaked, but it's ok because we're about to exit */\n                return 1;\n            }\n        }\n\n#if (CHAR_MAX != UCHAR_MAX)\n        /* char is signed; ensure defined behavior for the upcoming conversion */\n        if (c &gt; CHAR_MAX) {\n            c -= UCHAR_MAX;\n#if ((CHAR_MAX != (UCHAR_MAX &gt;&gt; 1)) || (CHAR_MAX == (-1 * CHAR_MIN)))\n            /* char's representation has more padding bits than unsigned\n               char's, or it is represented as sign/magnitude or ones' complement */\n            if (c &lt; CHAR_MIN) {\n                /* not representable as a char */\n                return 1;\n            }\n#endif\n        }\n#endif\n\n        string[next++] = (char) c;\n    }\n    string[next] = '\\0';\n\n    fputs(string, stdout);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4969570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L3AFWwuhIzE/AAAAAAAAAAI/AAAAAAAAABk/Kk74MJIqrEY/photo.jpg?sz=128", "display_name": "CIA  A big guy", "link": "https://stackoverflow.com/users/4969570/cia-a-big-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1433343621, "creation_date": 1433334992, "last_edit_date": 1433336193, "question_id": 30620297, "link": "https://stackoverflow.com/questions/30620297/how-to-put-a-char-into-a-empty-pointer-of-a-string-in-pure-c", "title": "How to put a char into a empty pointer of a string in pure C", "body": "<p>I want to store a single char into a char array pointer and that action is in a while loop, adding in a new char every time. I <em>strictly</em> want to be into a variable and not printed because I am going to compare the text. Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n     char c;\n     char *string;\n\n     while((c=getchar())!= EOF) //gets the next char in stdin and checks if stdin is not EOF.\n     { \n        char temp[2];  // I was trying to convert c, a char to temp, a const char so that I can use strcat to concernate them to string but printf returns nothing.\n        temp[0]=c;  //assigns temp\n        temp[1]='\\0';  //null end point\n        strcat(string,temp);  //concernates the strings \n    }\n\n    printf(string);  //prints out the string.\n    return 0;\n}\n</code></pre>\n\n<p>I am using GCC on Debain (POSIX/UNIX operating system) and want to have windows compatability.</p>\n\n<p>EDIT:</p>\n\n<p>I notice some communication errors with what I actually intend to do so I will explain: I want to create a system where I can input a unlimited amount of characters and have the that input be store in a variable and read back from a variable to me, and to get around using realloc and malloc I made it so it would get the next available char until EOF. Keep in mind that I am a beginner to C (though most of you have probably guess it first) and haven't had a lot of experience memory management.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433334871, "post_id": 30620163, "comment_id": 49306425, "body": "Welcome to stack overflow ! Please show us what you have tried and what part causes you trouble exactly so we can help you"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433334921, "post_id": 30620163, "comment_id": 49306463, "body": "Try drawing what you want on paper, with boxes for the structures and arrows for the pointers."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433334962, "post_id": 30620163, "comment_id": 49306492, "body": "The syntax should have been explained by your teacher/tutor. Also you will find plenty of tutorial about linked list in the web already."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433335040, "post_id": 30620163, "comment_id": 49306545, "body": "@JoachimPileborg: Huh? Then I do it wrong for decades. I use fat dots for the pointer and the arrows for the relations;-)"}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1433397507, "post_id": 30620163, "comment_id": 49336918, "body": "Thanks, and explaining that English is not your native language, are both not necessary here (and two spelling errors where in the message about that itself ;-)  (<i>sorry</i>, <i>English</i>))"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4969393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01cd76cf54da9b49108678155283d52a?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel ", "link": "https://stackoverflow.com/users/4969393/gabriel"}, "edited": false, "score": 0, "creation_date": 1433358528, "post_id": 30620380, "comment_id": 49323108, "body": "Thats really helpfull! Thank you !"}, {"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "reply_to_user": {"reputation": 21, "user_id": 4969393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01cd76cf54da9b49108678155283d52a?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel ", "link": "https://stackoverflow.com/users/4969393/gabriel"}, "edited": false, "score": 0, "creation_date": 1433361334, "post_id": 30620380, "comment_id": 49324653, "body": "@Gabriel If this helped, please accept as the answer"}], "tags": [], "owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "is_accepted": false, "score": 0, "last_activity_date": 1433335199, "creation_date": 1433335199, "answer_id": 30620380, "question_id": 30620163, "link": "https://stackoverflow.com/questions/30620163/array-of-linked-lists-in-c/30620380#30620380", "title": "Array of linked lists in C", "body": "<p>Something like this:</p>\n\n<pre><code>t_point* array[10]\n\nvoid link_list()\n{\n    int array_length = sizeof(array) / sizeof(t_point*);\n\n    // Allocate the memory for the first list item\n    array[0] = malloc(sizeof(t_point));\n\n    // Iterate through each item in `array` and allocate it some memory\n    for (int i = 1; i &lt; array_length; i++)\n    {\n        // Allocate memory for the next item\n        array[i] = malloc(sizeof(t_point));\n\n        // Set the previous item's `next` field to the current item pointed to by `i`\n        array[i - 1]-&gt;next = array[i];\n    }\n\n    // Close the list by adding a NULL pointer\n    array[array_length - 1]-&gt;next = NULL;\n}\n</code></pre>\n\n<p>Also remember to <code>free</code> the <code>malloc</code>'ed memory otherwise you will get memory leaks. I'll leave that up to you.</p>\n"}], "owner": {"reputation": 21, "user_id": 4969393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01cd76cf54da9b49108678155283d52a?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel ", "link": "https://stackoverflow.com/users/4969393/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433397507, "creation_date": 1433334654, "last_edit_date": 1433397507, "question_id": 30620163, "link": "https://stackoverflow.com/questions/30620163/array-of-linked-lists-in-c", "title": "Array of linked lists in C", "body": "<p>I'm having difficulties on making an array of linked lists. I have this struct</p>\n\n<pre><code>typedef struct node {\n    int id;\n    struct node * next;\n} t_point;\n\nt_point* array[10];\n</code></pre>\n\n<p>and I want, for example, that array[0] points to the head of a linked list, and then fill with, repeating this process to all spaces of the array</p>\n\n<p>I understand how I need to code it, but I can't get it right. I just want someone to show me and explain me the syntax.</p>\n"}, {"tags": ["c", "gcc", "language-lawyer", "c11", "gets"], "comments": [{"owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "edited": false, "score": 1, "creation_date": 1433333892, "post_id": 30619780, "comment_id": 49305716, "body": "GCC 4.8.2 here. In pedantic mode the first snippet will not compiler because <code>gets</code> is never defined. In non-pedantic mode I get <code>warning: the `gets&#39; function is dangerous and should not be used.</code>. The second snippet is not an issue, because nothing prevents you from declaring a symbol called <code>gets</code>. For instance, <code>int printf;</code> is perfectly legal. Am I missing the point of the question?"}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 1, "creation_date": 1433334062, "post_id": 30619780, "comment_id": 49305838, "body": "What <code>libc</code> are you using? In Unix-like systems standard C library is shipped with OS. For example, in Linux it is usually <i>glibc</i>, which was removed <code>gets</code> in version 2.16"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "edited": false, "score": 1, "creation_date": 1433334145, "post_id": 30619780, "comment_id": 49305894, "body": "@StefanoSanfilippo You seem to be missing the point regarding the second half, it shouldn&#39;t fail (<code>gets</code> shouldn&#39;t collide with anything), but it does."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 2, "creation_date": 1433334219, "post_id": 30619780, "comment_id": 49305949, "body": "I&#39;m for a bug specific to gcc 4.9.1 as version 4.8.2 and &gt; 4.9.2 do fail."}, {"owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1433334314, "post_id": 30619780, "comment_id": 49306020, "body": "@unwind thanks. Actually in my case it doesn&#39;t, so I&#39;d call it a library mismatch or compiler bug, but I don&#39;t want to jump to conclusions :\\"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433334390, "post_id": 30619780, "comment_id": 49306076, "body": "In case it matters, it is Mingw for 64 bit Windows. I&#39;m using the default lib that came with the download. Is there a way I can check the lib version?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 11, "creation_date": 1433334777, "post_id": 30619780, "comment_id": 49306360, "body": "MinGW uses Microsoft&#39;s standard library, which does not even support C99 properly."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1433335572, "post_id": 30619780, "comment_id": 49306967, "body": "@interjay Seriously? Then how can any modern C at all work in Mingw? I thought MS had dropped C support long time ago, let alone C11 support."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1464371235, "post_id": 30619780, "comment_id": 62475343, "body": "@interjay: It is funny, considering that Microsoft has properly removed <code>gets</code> from their libraries."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1464371289, "post_id": 30619780, "comment_id": 62475361, "body": "@Lundin: Microsoft is devotedly supporting C language in their compilers. I don&#39;t know where you got the idea that &quot;MS had dropped C support&quot;."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1464377333, "post_id": 30619780, "comment_id": 62478338, "body": "@haccks: No, gcc has never supported <code>gets</code> -- or <code>fgets</code> for that matter. If <code>gets</code> is supported by a given implementation, it&#39;s implemented by the library, not by the compiler."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1464377868, "post_id": 30619780, "comment_id": 62478609, "body": "@KeithThompson; My wording was wrong. It is still present GNU C library."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1464378134, "post_id": 30619780, "comment_id": 62478734, "body": "@haccks: Yes and no. In the <code>&lt;stdio.h&gt;</code> header provided by the GNU C library, <code>gets</code> is still declared, but the declaration is surrounded by <code>#if !defined __USE_ISOC1</code> ... <code>#endif</code>. The <i>implementation</i> is still there, but in a way that permits user code to define a function with the same name."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1464394805, "post_id": 30619780, "comment_id": 62484073, "body": "Backwards compatibility \u2014 programs exist that use <code>gets()</code>, and it is deemed better to let them run than to prevent them running."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433508501, "post_id": 30665511, "comment_id": 49395813, "body": "I did run <code>mingw-get update</code> and <code>mingw-get upgrade</code>, same error afterwards."}, {"owner": {"reputation": 543, "user_id": 3587570, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001071662888/picture?type=large", "display_name": "Valy", "link": "https://stackoverflow.com/users/3587570/valy"}, "edited": false, "score": 0, "creation_date": 1435219555, "post_id": 30665511, "comment_id": 50111724, "body": "As Andrew mentioned, the key line is the #include &lt;stdio.h&gt;. You should find and analyze the stdio.h file that is used by gcc to perform the compilation. That file probably still has the gets function defined."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1433504116, "creation_date": 1433504116, "answer_id": 30665511, "question_id": 30619780, "link": "https://stackoverflow.com/questions/30619780/why-can-i-use-gets-in-gcc-std-c11/30665511#30665511", "title": "Why can I use gets() in gcc -std=c11?", "body": "<p>The key line of your code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n</code></pre>\n\n<p>Did you update your system's C library and headers?  They're also part of the C implementation, along with the compiler.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 4, "creation_date": 1464377208, "post_id": 37489406, "comment_id": 62478283, "body": "This is misleading.  gcc didn&#39;t remove <code>gets</code> because gcc never provided <code>gets</code> in the first place. It&#39;s provided by the library, not by the compiler (which why that status page refers to it as a &quot;library issue&quot;)."}, {"owner": {"reputation": 19, "user_id": 2505894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C1cuo.jpg?s=128&g=1", "display_name": "owlfox", "link": "https://stackoverflow.com/users/2505894/owlfox"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1464394887, "post_id": 37489406, "comment_id": 62484099, "body": "@Keith Thompson. Thanks for the answer! That&#39;s amazing clear and helpful :)."}], "tags": [], "owner": {"reputation": 19, "user_id": 2505894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C1cuo.jpg?s=128&g=1", "display_name": "owlfox", "link": "https://stackoverflow.com/users/2505894/owlfox"}, "is_accepted": false, "score": 1, "last_activity_date": 1464396946, "last_edit_date": 1464396946, "creation_date": 1464370733, "answer_id": 37489406, "question_id": 30619780, "link": "https://stackoverflow.com/questions/30619780/why-can-i-use-gets-in-gcc-std-c11/37489406#37489406", "title": "Why can I use gets() in gcc -std=c11?", "body": "<p><strong>update</strong> this may not be an answer to the question, I try to make it informational.</p>\n\n<p>I happened to find that gcc mentioned <strong>gets</strong> is not following C11 standard for some library issue <code>glibc 2.16</code>.</p>\n\n<p>See gcc supporting status of C11: <a href=\"https://gcc.gnu.org/wiki/C11Status\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/wiki/C11Status</a>\n<a href=\"https://i.stack.imgur.com/g9abM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g9abM.png\" alt=\"croped from the above link\"></a></p>\n\n<p>But I cannot find the definition of \"library issue\" and current status for other versions of glibc.</p>\n\n<p>So I tried on my machine ubuntu16.04 with gcc version <code>5.3.1 20160413</code>, glibc version <code>Ubuntu GLIBC 2.23</code> \nWe can get enough warning on compile time, but it's still OK to execute the output object file for \"Backwards compatibility\".</p>\n\n<pre><code>warning: implicit declaration of function \u2018gets\u2019 [-Wimplicit-function-declaration]\nwarning: the `gets' function is dangerous and should not be used.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1464378026, "post_id": 37490970, "comment_id": 62478694, "body": "Though C standard library droped <code>gets</code>, GNU C library still includes this function."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1464378182, "post_id": 37490970, "comment_id": 62478756, "body": "Copying my response to your other comment: @haccks: Yes and no. In the &lt;stdio.h&gt; header provided by the GNU C library, gets is still declared, but the declaration is surrounded by #if !defined __USE_ISOC1 ... #endif. The implementation is still there, but in a way that permits user code to define a function with the same name."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1464378743, "post_id": 37490970, "comment_id": 62478998, "body": "OK. Do you consider this as a bug?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 3, "creation_date": 1464378944, "post_id": 37490970, "comment_id": 62479081, "body": "@haccks: It&#39;s a failure of this particular implementation (MinGW) to conform to the C11 standard. (See also MinGW&#39;s problems with <code>long double</code>, something that applies to C90, C99, and C11.) Sure, I&#39;d say it&#39;s a bug. (But it&#39;s an easily avoidable one -- don&#39;t use <code>gets</code>, even if your compiler fails to warn you about it.)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1464379231, "post_id": 37490970, "comment_id": 62479204, "body": "Thanks for correcting me. I am glad you came to this post almost after an year (little bit surprised!!) to share this information."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1464379443, "post_id": 37490970, "comment_id": 62479303, "body": "@haccks: I didn&#39;t even notice the date until you mentioned it. I think it showed up on my front page because somebody else posted an answer."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1464379504, "post_id": 37490970, "comment_id": 62479344, "body": "Oh! I can see now."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 12, "last_activity_date": 1464377270, "creation_date": 1464377270, "answer_id": 37490970, "question_id": 30619780, "link": "https://stackoverflow.com/questions/30619780/why-can-i-use-gets-in-gcc-std-c11/37490970#37490970", "title": "Why can I use gets() in gcc -std=c11?", "body": "<p>gcc is just the compiler, not the entire implementation.</p>\n\n<p>On my system (Linux Mint 17.3, gcc 4.8.4, GNU libc 2.19), I get:</p>\n\n<pre><code>$ gcc -std=c11 -pedantic-errors -Wall -Wextra -c c.c\nc.c: In function \u2018main\u2019:\nc.c:5:3: error: implicit declaration of function \u2018gets\u2019 [-Wimplicit-function-declaration]\n   (void) gets (NULL);\n   ^\n</code></pre>\n\n<p>To correctly diagnose the error, the <em>implementation</em> needs to be conforming. That means both the compiler (which never provided <code>gets</code> in the first place) and the library.</p>\n\n<p>You're using a library that still provides the <code>gets</code> function. Because of that the <em>implementation</em> as a whole (which consists of the compiler gcc, the library, and a few other pieces) does not conform to C11.</p>\n\n<p>Bottom line: This is not a gcc issue, and there's not much that gcc can do about it. (Well, it <em>could</em> issue a special-case diagnostic for <code>gets</code>, but then it would have to determine that it's not a valid call to a user-defined function with the same name.)</p>\n"}], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1438, "favorite_count": 3, "accepted_answer_id": 37490970, "answer_count": 3, "score": 13, "last_activity_date": 1464396946, "creation_date": 1433333549, "last_edit_date": 1433334258, "question_id": 30619780, "link": "https://stackoverflow.com/questions/30619780/why-can-i-use-gets-in-gcc-std-c11", "title": "Why can I use gets() in gcc -std=c11?", "body": "<p>The <code>gets()</code> function has been removed from the C language. No such function exists in the standard.</p>\n\n<p>Yet I compile the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n  (void) gets (NULL);\n}\n</code></pre>\n\n<p>using</p>\n\n<pre><code>gcc -std=c11 -pedantic-errors -Wall -Wextra\n</code></pre>\n\n<p>and it compiles without giving any errors or warnings. Similarly,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint gets;\n\nint main (void)\n{}\n</code></pre>\n\n<p>will not compile (error: 'gets' redeclared as different kind of symbol).</p>\n\n<p>In the standard 4. Conformance \u00a76 we can read:</p>\n\n<blockquote>\n  <p>A conforming implementation may have extensions (including additional\n  library functions), provided they do not alter the behavior of any\n  strictly conforming program</p>\n</blockquote>\n\n<p>Given the above I don't think gcc is standard-compliant, even in pedantic mode. Is there a reason for this? Is this intentional or is it a bug?</p>\n\n<p>GCC version 4.9.1.</p>\n\n<p>Edit: </p>\n\n<pre><code>gcc --version\ngcc (x86_64-win32-seh-rev1, Built by MinGW-W64 project) 4.9.1\n</code></pre>\n"}, {"tags": ["c", "math", "raytracing"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 2, "creation_date": 1433333815, "post_id": 30619749, "comment_id": 49305651, "body": "Hey :D ! Thought I&#39;d never see one from Epitech around here. Your <code>reflection</code> function does not respect the norm (too many lines). Apart from that, reflection is replacing your hit coordinate with the eye and cast a new ray you get from the hitting ray and the vector perpendicular to the surface hit"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433334224, "post_id": 30619749, "comment_id": 49305956, "body": "And seeing your capture it seems you might have a rounding problem, or a small problem calculating that second ray&#39;s orientation OR you can have problems along &quot;calculate_light&quot; and returning black instead of the actual reflected object&#39;s color"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1433334801, "post_id": 30619749, "comment_id": 49306381, "body": "And GG for your 42 reputation :P"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 1, "creation_date": 1433348182, "post_id": 30619749, "comment_id": 49316911, "body": "either your vectors are not what they should be or  they are not in the same coordinate system , try to add debug draw for single ray drawing the vectors and see if they are really what they should (V reflected ray,N surface normal,R incident ray) beware R and V should be opposite directions !!! Also you could have problem with color mixing of each ray together they depend on the dot product too, shininess, etc ... the <code>number_loop </code> looks suspicious where it is reseted ? I see only reset after overflow and 200 recursions seem like too much I use 3-12 tops"}, {"owner": {"reputation": 1809, "user_id": 770302, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6ph2.png?s=128&g=1", "display_name": "Daniel A. Thompson", "link": "https://stackoverflow.com/users/770302/daniel-a-thompson"}, "edited": false, "score": 0, "creation_date": 1440859640, "post_id": 30619749, "comment_id": 52452197, "body": "It looks like you&#39;ve got some fuzz on your sphere - you may be able to fix this by moving the intersection point by a small epsilon in the direction of the surface normal before casting your shadow or reflection rays."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 1809, "user_id": 770302, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6ph2.png?s=128&g=1", "display_name": "Daniel A. Thompson", "link": "https://stackoverflow.com/users/770302/daniel-a-thompson"}, "edited": false, "score": 0, "creation_date": 1538299835, "post_id": 30619749, "comment_id": 92088480, "body": "@DanielA.Thompson hmm still not solved? maybe this <a href=\"https://stackoverflow.com/a/45140313/2521214\">Reflection and refraction impossible without recursive ray tracing?</a> will help (for comparison). The noisy sphere is most likely due to low precision (<code>float</code> is not enough try <code>double</code> instead)"}], "owner": {"reputation": 1247, "user_id": 4284745, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-PPay30ot1_k/AAAAAAAAAAI/AAAAAAAAAFM/j7wqJ8SG30g/photo.jpg?sz=128", "display_name": "Dimitri Danilov", "link": "https://stackoverflow.com/users/4284745/dimitri-danilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1433333455, "creation_date": 1433333455, "question_id": 30619749, "link": "https://stackoverflow.com/questions/30619749/implementing-reflection-in-my-raytracer", "title": "Implementing reflection in my raytracer", "body": "<p>I am trying to implement reflection but I have problems with formulas I have found.</p>\n\n<p>Calculate the Standards N and V, to make these 2 vectors unitary.\nNext, calculate the scalar product N.V. To finish with the forumulas below calculate R coordinate : Rx, Ry and Rz.</p>\n\n<p>R = -2N * V.N + V.</p>\n\n<p>At the moment I have this but it does not look great: </p>\n\n<p><img src=\"https://i.stack.imgur.com/iugKu.png\" alt=\"enter image description here\"></p>\n\n<p>And this is my function of reflection :</p>\n\n<pre><code>t_color         reflection(t_rt *rt, t_obj *obj, t_lvector *vec, t_color tmp_color)\n{\n  static int    number_loop;\n  t_vector      new_vec;\n  t_vector      eye;\n  t_vector      normal;\n  t_color       color;\n  float         scalaire;\n  t_obj         *new_obj;\n\n  if (++number_loop == 200)\n    {\n      number_loop = 0;\n      return (tmp_color);\n    }\n  color.r = tmp_color.r;\n  color.g = tmp_color.g;\n  color.g = tmp_color.b;\n  find_normal(&amp;normal, vec, obj);\n  scalaire = (rt-&gt;vec-&gt;x * normal.x) +\n    (rt-&gt;vec-&gt;y * normal.y) + (rt-&gt;vec-&gt;z * normal.z);\n  eye.x = vec-&gt;px;\n  eye.y = vec-&gt;py;\n  eye.z = vec-&gt;pz;\n  new_vec.x = -2 * normal.x * scalaire + rt-&gt;vec-&gt;x;\n  new_vec.y = -2 * normal.y * scalaire + rt-&gt;vec-&gt;y;\n  new_vec.z = -2 * normal.z * scalaire + rt-&gt;vec-&gt;z;\n  rt-&gt;vec = &amp;new_vec;\n  rt-&gt;eye = &amp;eye;\n  new_obj = find_nearest_obj(rt-&gt;obj, &amp;eye, &amp;new_vec);\n  if (new_obj)\n    color = calculate_light(rt, new_obj);\n  return (color);\n}\n</code></pre>\n\n<p>vec->pXYZ is the coordinate of where the ray hits an object.</p>\n\n<p>Thanks ! </p>\n\n<p>PS : Sorry for my bad english, I am french.</p>\n"}, {"tags": ["c", "function", "object"], "comments": [{"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 3, "creation_date": 1433333264, "post_id": 30619668, "comment_id": 49305258, "body": "Yes. it is possible."}, {"owner": {"reputation": 11, "user_id": 4969455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500c8cec2f399b617777a2c8ddf0e678?s=128&d=identicon&r=PG&f=1", "display_name": "Neurchak", "link": "https://stackoverflow.com/users/4969455/neurchak"}, "reply_to_user": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433333773, "post_id": 30619668, "comment_id": 49305620, "body": "Do you know how i could do that ?"}, {"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433333880, "post_id": 30619668, "comment_id": 49305704, "body": "@Neurchack I have no experience with Eclipse (being an Emacs/Command line person), but I assume you could hook something up with the linker settings. If not, someone with Eclipse knowledge can step in ;)"}, {"owner": {"reputation": 11, "user_id": 4969455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500c8cec2f399b617777a2c8ddf0e678?s=128&d=identicon&r=PG&f=1", "display_name": "Neurchak", "link": "https://stackoverflow.com/users/4969455/neurchak"}, "reply_to_user": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 1, "creation_date": 1433333982, "post_id": 30619668, "comment_id": 49305782, "body": "So you think it is just a question of linker ?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1433334018, "post_id": 30619668, "comment_id": 49305812, "body": "One init function is bad. Five is terrible."}, {"owner": {"reputation": 11, "user_id": 4969455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500c8cec2f399b617777a2c8ddf0e678?s=128&d=identicon&r=PG&f=1", "display_name": "Neurchak", "link": "https://stackoverflow.com/users/4969455/neurchak"}, "edited": false, "score": 0, "creation_date": 1433336136, "post_id": 30619668, "comment_id": 49307428, "body": "&quot;Five&quot; is terrible ?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4969455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500c8cec2f399b617777a2c8ddf0e678?s=128&d=identicon&r=PG&f=1", "display_name": "Neurchak", "link": "https://stackoverflow.com/users/4969455/neurchak"}, "edited": false, "score": 0, "creation_date": 1433335148, "post_id": 30619910, "comment_id": 49306625, "body": "I don&#39;t have the motor_init.h that is why i need to use the .o"}, {"owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "reply_to_user": {"reputation": 11, "user_id": 4969455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500c8cec2f399b617777a2c8ddf0e678?s=128&d=identicon&r=PG&f=1", "display_name": "Neurchak", "link": "https://stackoverflow.com/users/4969455/neurchak"}, "edited": false, "score": 0, "creation_date": 1433335396, "post_id": 30619910, "comment_id": 49306827, "body": "Well, i you did you&#39;d still need the .o file, but then this is the way to go, or write your own header file."}, {"owner": {"reputation": 11, "user_id": 4969455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500c8cec2f399b617777a2c8ddf0e678?s=128&d=identicon&r=PG&f=1", "display_name": "Neurchak", "link": "https://stackoverflow.com/users/4969455/neurchak"}, "edited": false, "score": 0, "creation_date": 1433335685, "post_id": 30619910, "comment_id": 49307049, "body": "I&#39;m using gcc yes but i also use already created makefiles. The linker part is of the .mk is:  <code># Linker $(build-exe-y): $(dep-y) $(obj-y) $(os-orti-y) $(sim-y) $(libitem-y) $(ldcmdfile-y) \t@echo \t@echo &quot;  &gt;&gt; LD $@&quot; \t$(do-ld-pre) $(libitem-y)\t ifeq ($(CROSS_COMPILE)$(COMPILER),gcc) \t$(Q)$(CC) $(LDFLAGS) -Xlinker -Map=$(basename $(@F)).map -o $@ $(libpath-y) $(obj-y) $(lib-y) $(libitem-y)</code>  I don&#39;t really know how to change it"}, {"owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "reply_to_user": {"reputation": 11, "user_id": 4969455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500c8cec2f399b617777a2c8ddf0e678?s=128&d=identicon&r=PG&f=1", "display_name": "Neurchak", "link": "https://stackoverflow.com/users/4969455/neurchak"}, "edited": false, "score": 0, "creation_date": 1433335795, "post_id": 30619910, "comment_id": 49307143, "body": "From what it looks like you should probably add <code>motor_init.o</code> to you <code>$(lib-y)</code> variable somewhere. Or you can just hard-code it right after."}], "tags": [], "owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "is_accepted": false, "score": 3, "last_activity_date": 1433333953, "creation_date": 1433333953, "answer_id": 30619910, "question_id": 30619668, "link": "https://stackoverflow.com/questions/30619668/c-language-call-function-from-object-file/30619910#30619910", "title": "C Language - Call function from object file", "body": "<p>Yes, that's what <code>.o</code> files ar for, containing function. You have already defined the signatures, so all you'll need to do is is create <code>init.o</code> and link them together into your final product. </p>\n\n<p>if you're using gcc as compiler:</p>\n\n<pre><code>gcc -c init.c\ngcc init.o motor_init.o -o output\n</code></pre>\n\n<p>Sorry i don't know specifics about eclipse plugins.</p>\n\n<p>Also, if you have it, i would recommend using <code>motor_init.h</code>. </p>\n"}], "owner": {"reputation": 11, "user_id": 4969455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500c8cec2f399b617777a2c8ddf0e678?s=128&d=identicon&r=PG&f=1", "display_name": "Neurchak", "link": "https://stackoverflow.com/users/4969455/neurchak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1863, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433334253, "creation_date": 1433333226, "last_edit_date": 1433334253, "question_id": 30619668, "link": "https://stackoverflow.com/questions/30619668/c-language-call-function-from-object-file", "title": "C Language - Call function from object file", "body": "<p>I have a little problem while compiling an Eclipse project.\nI have a file that needs to call functions present in an already compiled files (.o files).</p>\n\n<p>Init.c</p>\n\n<pre><code>#include Init.h\nvoid Init() {\n    InitA();\n    InitB();\n    InitC();\n    InitD();\n}\n</code></pre>\n\n<p>Init.h</p>\n\n<pre><code>extern void InitA();\nextern void InitB();\nextern void InitC();\nextern void InitD();\nvoid Init();\n</code></pre>\n\n<p>And the 4 functions are present in the object file motor_init.o</p>\n\n<p>I would like to know if it is possible to call these functions and how.</p>\n"}, {"tags": ["c", "arrays", "structure", "gets"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 4, "creation_date": 1433331737, "post_id": 30619085, "comment_id": 49304126, "body": "The main error here is that you&#39;re using <code>gets</code>. Use <code>fgets</code> instead."}, {"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 2, "creation_date": 1433331968, "post_id": 30619085, "comment_id": 49304300, "body": "@szczurcio not to mention even <i>thinking</i> of using <code>conio.h</code> ;)"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1433332020, "post_id": 30619085, "comment_id": 49304331, "body": "@szczurcio , That won&#39;t solve the problem, though."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1433332062, "post_id": 30619085, "comment_id": 49304355, "body": "@CoolGuy Yes, this is why it&#39;s a comment, not an answer ;)"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433332232, "post_id": 30619085, "comment_id": 49304479, "body": "You never use the first index of <code>th</code>(Arrays in C are 0 based,i.e, indices start from 0 and end at length-1). Also, check the value of <code>t</code> to prevent out-of-bounds."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1433332343, "post_id": 30619085, "comment_id": 49304561, "body": "As arrays start with zero, use <code>for(i=0;i&lt;t;i++)</code>. Don&#39;t forget to check <code>t&lt;=10</code>."}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 0, "creation_date": 1433332818, "post_id": 30619085, "comment_id": 49304922, "body": "This unknown thing also happen when i was using for(i=0;i&lt;10;i++)  ,, but now i got my answer , thnx"}], "answers": [{"comments": [{"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 0, "creation_date": 1433332654, "post_id": 30619137, "comment_id": 49304798, "body": "Thank you very much :) you are the best !"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1433351220, "post_id": 30619137, "comment_id": 49318709, "body": "Hardcoding the buffer size in <code>fgets</code> is bad IMO, <code>sizeof(th[i].Name)</code> is better."}, {"owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1433417419, "post_id": 30619137, "comment_id": 49349391, "body": "@szczurcio: Yes you are right, I just gave a simple example, though I agree with you."}], "tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": true, "score": 4, "last_activity_date": 1433332159, "last_edit_date": 1495540947, "creation_date": 1433331848, "answer_id": 30619137, "question_id": 30619085, "link": "https://stackoverflow.com/questions/30619085/error-in-getting-input-in-structure-using-gets/30619137#30619137", "title": "Error in getting input in structure using gets()", "body": "<p>Use this:</p>\n\n<pre><code>getchar();\n</code></pre>\n\n<p>before </p>\n\n<pre><code> gets(th[i].Name);\n</code></pre>\n\n<p>to consume leading whitespaces and newlines, which were left in the buffer due to previous statements.</p>\n\n<p>Also, I would recommend <code>fgets</code>, which is safer than <code>gets</code> as:</p>\n\n<pre><code>fgets(th[i].Name,30,stdin);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>fgets(th[i].Qualifications,20,stdin);\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">Why gets is dangerous</a></p>\n"}, {"tags": [], "owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "is_accepted": false, "score": 1, "last_activity_date": 1433332298, "last_edit_date": 1433332298, "creation_date": 1433332086, "answer_id": 30619238, "question_id": 30619085, "link": "https://stackoverflow.com/questions/30619085/error-in-getting-input-in-structure-using-gets/30619238#30619238", "title": "Error in getting input in structure using gets()", "body": "<p>When you enter the number of teachers that is t you enter a \\n after the integer which stays in your buffer and is accepted as input in gets statement. Therefore use a getchar after entering integer to solve the problem.</p>\n\n<pre><code>int t,i;\nprintf(\"Enter how many teachers are in department\\n\");\nscanf(\"%d\",&amp;t);\ngetchar();\n</code></pre>\n\n<p>and add another getchar after the scanf in the for loop.</p>\n\n<pre><code>scanf(\"%d\",&amp;th[i].experience_year);\ngetchar();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 3, "last_activity_date": 1433333502, "creation_date": 1433333502, "answer_id": 30619768, "question_id": 30619085, "link": "https://stackoverflow.com/questions/30619085/error-in-getting-input-in-structure-using-gets/30619768#30619768", "title": "Error in getting input in structure using gets()", "body": "<p>First a remind for good and bad pratices :</p>\n\n<ul>\n<li>thou shall not use <code>gets</code> - only <code>fgets</code> is good</li>\n<li>thou shall not mix <code>[f]gets</code> and <code>[f]scanf</code> - only stick to one input mode</li>\n</ul>\n\n<p>Now let's be serious.</p>\n\n<p><code>gets</code> tries to put in your input array as many characters as are present in input stream : it used to be the cause of countless memory violation. <strong>Never use it</strong> and only use <code>fgets</code> in you want to deal with line mode input (but do not forget that the input of <code>fgets</code> keeps the terminating <code>\\n</code>)</p>\n\n<p><code>[f]scanf</code> is used for blank delimited fields. That is it reads a field until next blank character (at least space, tab, <code>\\r</code> or <code>\\n</code>) and <strong>leaves it in input stream</strong>. You can try to skip over that using a <code>fgets</code> and discarding what was read, or reading character by character until a <code>\\n</code>. Avoid it because you got a number of <em>bad</em> answers advising to use a single <code>getchar()</code>. That's always the first try, and it works until you get an input with (unvisible) spaces before the newline - just try it and you will understand why it is a wrong solution.</p>\n\n<p>So what should you do ? If input is line oriented, only use <code>fgets</code>, and then decode the input values with <code>sscanf</code> :</p>\n\n<pre><code>void teacher()\n{    \n int t,i;\n char line[16];\n printf(\"Enter how many teachers are in department\\n\");\n fgets(line, sizeof(line), stdin);\n sscanf(line, \"%d\",&amp;t);\n for(i=1;i&lt;=t;i++)\n {       \n   printf(\"Enter name of teacher : \");\n   fgets(th[i].Name, 30, stdin);\n   printf(\"Enter qualification of teacher : \");\n   fgets(th[i].Qualifications, 30, stdin);\n   printf(\"Enter experience_year of teacher : \");\n   fgets(line, sizeof(line), stdin);\n   sscanf(line, \"%d\",&amp;th[i].experience_year);\n }\n ...\n</code></pre>\n\n<p>And in really good practices (in fact everything that could be used in real workd) you should <strong>always</strong> test the result of input functions (left as an exercise for the reader in above code :-) )</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7891537, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/32627e77e7d27601c20f3e40c0059b39?s=128&d=identicon&r=PG", "display_name": "labkush poudel", "link": "https://stackoverflow.com/users/7891537/labkush-poudel"}, "edited": false, "score": 1, "creation_date": 1492625761, "post_id": 43503183, "comment_id": 74060867, "body": "this can be used in case of structure too"}], "tags": [], "owner": {"reputation": 11, "user_id": 7891537, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/32627e77e7d27601c20f3e40c0059b39?s=128&d=identicon&r=PG", "display_name": "labkush poudel", "link": "https://stackoverflow.com/users/7891537/labkush-poudel"}, "is_accepted": false, "score": 1, "last_activity_date": 1492627080, "last_edit_date": 1492627080, "creation_date": 1492625499, "answer_id": 43503183, "question_id": 30619085, "link": "https://stackoverflow.com/questions/30619085/error-in-getting-input-in-structure-using-gets/43503183#43503183", "title": "Error in getting input in structure using gets()", "body": "<p>Use:</p>\n\n<pre><code>#include &lt; stdio.h &gt; \n#include &lt; conio.h &gt;\nvoid main() {\n    char name[3][100], add[3][100];\n    int i;\n    printf(\"ENTER YOUR DETAIl:\");\n    for (i = 0; i &lt; 3; i++) {\n        fflush(stdin);\n        printf(\"ENTER NAME:  \");\n        gets(name[i]);\n        printf(\"ENTER ADDRESS: \");\n        gets(add[i]);\n    }\n    for (i = 0; i &lt; 3; i++) {\n        printf(\"\\n___________________\\n\");\n        printf(\"\\nNAME:%s\", name[i]);\n        printf(\"\\Address:%s\", add[i]);\n        printf(\"\\n___________________\\n\");\n    }\n    getch();\n}\n</code></pre>\n\n<p>You can use this way in c programming. If your program does not take a string with spaces as input for multiple string types of input.</p>\n\n<pre><code>fflush(stdin);\n</code></pre>\n\n<p>This function will clear your input buffer.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11840567, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HVygrJjRE0/AAAAAAAAAAI/AAAAAAAAAAU/6mLg5QghtBw/photo.jpg?sz=128", "display_name": "Sumit Shresht", "link": "https://stackoverflow.com/users/11840567/sumit-shresht"}, "is_accepted": false, "score": 0, "last_activity_date": 1564132381, "last_edit_date": 1564132381, "creation_date": 1564131185, "answer_id": 57216466, "question_id": 30619085, "link": "https://stackoverflow.com/questions/30619085/error-in-getting-input-in-structure-using-gets/57216466#57216466", "title": "Error in getting input in structure using gets()", "body": "<p>Use</p>\n\n<pre><code>fflush(stdin);\n</code></pre>\n\n<p>before every <code>gets()</code></p>\n"}], "owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10674, "favorite_count": 0, "accepted_answer_id": 30619137, "answer_count": 5, "score": 2, "last_activity_date": 1564132381, "creation_date": 1433331695, "question_id": 30619085, "link": "https://stackoverflow.com/questions/30619085/error-in-getting-input-in-structure-using-gets", "title": "Error in getting input in structure using gets()", "body": "<p>I am making a program to take input in teacher structure but there is unknown run time error , here is the code - </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nstruct Teacher\n{\n char Name[30];\n char Qualifications[20];\n int experience_year;\n}th[10];\n\nvoid teacher()\n{    \n int t,i;\n printf(\"Enter how many teachers are in department\\n\");\n scanf(\"%d\",&amp;t);\n for(i=1;i&lt;=t;i++)\n {       \n   printf(\"Enter name of teacher : \");\n   gets(th[i].Name);\n   printf(\"Enter qualification of teacher : \");\n   gets(th[i].Qualifications);\n   printf(\"Enter experience_year of teacher : \");\n   scanf(\"%d\",&amp;th[i].experience_year);\n }\n for(i=1;i&lt;=t;i++)\n {\n   printf(\"Details of %d teacher\\n\",i);\n   printf(th[i].Name);\n   printf(\" \");\n   printf(th[i].Qualifications);\n   printf(\" \");\n   printf(\"%d\",th[i].experience_year);\n   printf(\"\\n\");\n }\n}   \nint main()\n {\n   teacher();\n   return 0;\n }\n</code></pre>\n\n<p>Output is -</p>\n\n<pre><code>Enter number of teacher\n1\nEnter teachers name : Enter qualification of teacher :\n</code></pre>\n\n<p>How to get teacher's name(input).. and what is the error ?</p>\n"}, {"tags": ["c", "assembly", "operating-system", "stack-trace"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1433331518, "post_id": 30618895, "comment_id": 49303979, "body": "The compatibility etc is done by the OS/dynamic linker, that code is not in the binary."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1433331524, "post_id": 30618895, "comment_id": 49303984, "body": "GCC could do many funny things with the function, depending on settings/flags etc, so it&#39;s not guaranteed the arguments will be where you expect them. If you want to make sure no prologue is generated (then they&#39;ll be at <code>ESP + 4, ESP + 8</code> etc), there&#39;s an option for it, <code>__declspec(naked)</code> in MSVC, probably something similar in GCC."}, {"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1433331687, "post_id": 30618895, "comment_id": 49304092, "body": "@SamiKuhmonen How does the OS determine that?"}], "answers": [{"comments": [{"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1433331805, "post_id": 30619080, "comment_id": 49304186, "body": "So with that command I get code that is being run before main function? Is this the code that runs the first when i run program?"}], "tags": [], "owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "is_accepted": true, "score": 1, "last_activity_date": 1433331814, "last_edit_date": 1433331814, "creation_date": 1433331681, "answer_id": 30619080, "question_id": 30618895, "link": "https://stackoverflow.com/questions/30618895/why-does-main-function-differ-from-other-function-from-stack-point-of-view/30619080#30619080", "title": "Why does main function differ from other function from stack point of view", "body": "<ol>\n<li><p>Nope, the memory is not dynamically allocated. In the function before <code>main</code> (<code>_start</code>), <code>argv</code> and <code>argc</code> are pushed onto the stack for usage with <code>main</code></p></li>\n<li><p>The change in address has nothing to do with the number of arguments. It could be the batting of a butterfly's wings in another process which causes this</p></li>\n<li><p>This is implementation dependent. It is hard to tell. But you can run this command in GDB to see for yourself:</p>\n\n<pre><code>disass _start\n</code></pre></li>\n<li><p>^^^</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1433332674, "last_edit_date": 1433332674, "creation_date": 1433332360, "answer_id": 30619345, "question_id": 30618895, "link": "https://stackoverflow.com/questions/30618895/why-does-main-function-differ-from-other-function-from-stack-point-of-view/30619345#30619345", "title": "Why does main function differ from other function from stack point of view", "body": "<p>The function argument is <code>argv</code>, and is a normal parameter like any other having type <code>char**</code>.  <code>argv[1]</code> is not a function argument, it is an offset and dereference of <code>argv</code>, which you will find <em>is</em> in the expected location (which is target ABI dependent).</p>\n"}, {"tags": [], "owner": {"reputation": 650, "user_id": 3013509, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1357aaaa29ccd0e1a9f4dcdae0b0795f?s=128&d=identicon&r=PG&f=1", "display_name": "turboscrew", "link": "https://stackoverflow.com/users/3013509/turboscrew"}, "is_accepted": false, "score": 2, "last_activity_date": 1433372799, "creation_date": 1433372799, "answer_id": 30632361, "question_id": 30618895, "link": "https://stackoverflow.com/questions/30618895/why-does-main-function-differ-from-other-function-from-stack-point-of-view/30632361#30632361", "title": "Why does main function differ from other function from stack point of view", "body": "<p>Maybe this clarifies. Discovered this when assembling the same code with GCC and with GAS:</p>\n\n<pre><code># GCC\n# Stack is:\n#ESP -&gt; ret addr\n#       argc\n#       argv -&gt; argv[0] -&gt; \"program name\"\n#               argv[1] -&gt; \"Key\"\n#               argv[2] -&gt; \"Infile\"\n#               argv[3] -&gt; \"Outfile\"\n\n# GAS\n# Stack is:\n#ESP -&gt; argc\n#       argv[0] -&gt; \"program name\"\n#       argv[1] -&gt; \"Key\"\n#       argv[2] -&gt; \"Infile\"\n#       argv[3] -&gt; \"Outfile\"\n</code></pre>\n\n<p>And I recall that the \"argv-list\" is built by the OS.</p>\n"}], "owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 30619080, "answer_count": 3, "score": 0, "last_activity_date": 1433372799, "creation_date": 1433331168, "last_edit_date": 1433331966, "question_id": 30618895, "link": "https://stackoverflow.com/questions/30618895/why-does-main-function-differ-from-other-function-from-stack-point-of-view", "title": "Why does main function differ from other function from stack point of view", "body": "<p>I'm studying to use gdb and i got little confused. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nvoid g(char *password) {\n}\n\nint main(int argc, char *argv[]) {\nif(argc &gt; 1)\n    {\n        g(argv[1]);\n    } \n}\n</code></pre>\n\n<p>So with the regular function (<code>g()</code> in this example) if I want to examine function arguments, that would be ebp+8<code>, ebp+12.. etc. But in</code>main<code>function when I'm trying to examine command line arguments (for example</code>argv[1]`)It appears that previous way of examining arguments doesn't work out in this case. So my questions are:</p>\n\n<ol>\n<li>Is memory for argv allocated dynamically(with something like <code>malloc</code>)?</li>\n<li>Why does different size of argument changes address of <code>argv</code> itself?(With \"A\" it was <code>0xbffff084</code> but with \"A\"x10 it was <code>0xbffff074</code>)</li>\n<li>Why is <code>argv</code> so far from ebp?(In my case ebp appeared in <code>0xbfffefe8</code> and <code>argv</code> <code>0xbffff084</code> when I provided <code>\"A\"</code> as command line argument)</li>\n<li>What is between command line arguments and ebp register?</li>\n<li>And final question(Its not about this subject but...)\nHow to view the actual content of the file? I mean when program is run before assembly starts there are some instructions that are being run. For example to check if file is compatible with your operating system and etc...<br>\nSorry if question sounds silly I'm new with gdb. Thank you.</li>\n</ol>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433331599, "post_id": 30618887, "comment_id": 49304031, "body": "TCP is an octet, (byte), streaming service.  You cannot transfer any message larger than one byte without an extra protocol on top."}], "answers": [{"tags": [], "owner": {"reputation": 1585, "user_id": 421550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7a2292ef4ad3674b556df31e81efce?s=128&d=identicon&r=PG", "display_name": "domen", "link": "https://stackoverflow.com/users/421550/domen"}, "is_accepted": false, "score": 1, "last_activity_date": 1433331763, "creation_date": 1433331763, "answer_id": 30619115, "question_id": 30618887, "link": "https://stackoverflow.com/questions/30618887/c-socket-programming-1-client-read-reads-multiple-writes/30619115#30619115", "title": "C Socket Programming, 1 Client read reads multiple writes", "body": "<p>You are using a stream oriented socket. The server can't know if client has already received the data or not, and there's not really any difference between your multiple writes in a loop, or just one write which sends the whole array.</p>\n\n<p>You will need to use something packet oriented, or have a way to figure out what are your \"packets\". As you've figured out, you can't rely on timings, so you'll need to define some sort of protocol. Something simple would be to just read the ints*, and have a special value as end.</p>\n\n<p>Btw. your code also has a couple of issue with number representation. You need to used a fixed length type (int can be 16 or 32-bit, so use something like uint32_t), and you need to be aware of endianess issues (should probably use htonl/ntohl or similar).</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1433337157, "creation_date": 1433337157, "answer_id": 30621162, "question_id": 30618887, "link": "https://stackoverflow.com/questions/30618887/c-socket-programming-1-client-read-reads-multiple-writes/30621162#30621162", "title": "C Socket Programming, 1 Client read reads multiple writes", "body": "<p>I can see some problems in your code.</p>\n\n<p>You use a <code>strtok(readline, \"\\n\");</code> client side while sending raw int server side. It means that in one of the sent integers is <code>0x..10</code> or <code>0x10..</code> it will be changed to (resp.) <code>0x..00</code> or <code>0x00..</code>. Never use <code>strxx</code> functions on raw bytes !</p>\n\n<p>Next, you are using stream oriented sockets. You can have no assurance that packets send will not be grouped or splitted. So you should collate everything in the receiver until you have 3 consecutive chars containing <code>END</code>. But you cannot use <code>strxx</code> function for that ...</p>\n\n<p>Finally, you transfer raw integer, and wait for 3 characters END. But if you try to send <code>{12, 17743, 17408, 13}</code> (on a big-endian system) you will have a major problem : 17743 = 0x454F, and 17408 = 0x4400 => you have exactly \"END\" ! On a little endian, the magic values would be 20293 = 0x4F45 and 68 = 0x0044.</p>\n\n<p>The rules are :</p>\n\n<ul>\n<li>in you want to transer binary data, you should use a lenght + packet pattern because any pattern can happen in raw data. And a good practice is to convert all data longer than one byte to network order (<code>htonx</code> functions) to avoid endianness problems</li>\n<li>if you want to use delimiters, you should only use character data, ensuring (via escaping or ...) that the end pattern cannot occur in data.</li>\n</ul>\n\n<p>In you use case, you should simply tranfer textual representation, converting integer using <code>sprintf</code>, separating them with space, end terminating with <code>\\n</code>.</p>\n"}], "owner": {"reputation": 6930, "user_id": 1657309, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kOnqZ.jpg?s=128&g=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/1657309/khaled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 603, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1433337157, "creation_date": 1433331153, "last_edit_date": 1433332000, "question_id": 30618887, "link": "https://stackoverflow.com/questions/30618887/c-socket-programming-1-client-read-reads-multiple-writes", "title": "C Socket Programming, 1 Client read reads multiple writes", "body": "<p>In my code, the client will initiate a request to server, upon so, server will keep sending data to client until a special output is presented (say \"END\") then client will stop reading.\nHere's some code (just an example):</p>\n\n<pre><code>/**Client**/\nchar req[] = \"some-request\";\nwrite(socket,req,strlen(req));  \nwhile(1) \n{\n    read(socket,readline,100);\n    strtok(readline, \"\\n\");\n    if(strcmp(readline,\"END\") == 0){ //if end of sending\n        break;\n}   \n\n/** HANDLE OUTPUT **/\n}\n\n/** Server **/\n\nint data[] = {5532,127,332,65,723,8,912,2,421,126,8,3,2}\nint i;\n\nfor(i = 0 ; i &lt; sizeof(data); i++) \n{\n     write(socket, data[i], sizeof(data[i]);\n}\n\nwrite(socket, \"END\", 3);\n</code></pre>\n\n<p>This code works fine, but due some context switching in processes, the server writes twice before the client reads, so the client reads two lines at once, say:</p>\n\n<blockquote>\n  <p>5532127</p>\n  \n  <p>332</p>\n  \n  <p>65723</p>\n  \n  <p>8912</p>\n  \n  <p>2421</p>\n  \n  <p>1268</p>\n  \n  <p>32END</p>\n</blockquote>\n\n<p>As seen, sometimes 2 or more writes are grouped into 1 read, and as a result of course the END isn't handled as it is combined..</p>\n\n<p>I tried using <code>usleep()</code> function, which works most of the time, but still isn't a solution.\nSo any idea how I make sure the server doesn't write to buffer if it is not empty?</p>\n"}, {"tags": ["objective-c", "c", "uint8t"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1433331351, "post_id": 30618860, "comment_id": 49303859, "body": "&quot;I have added them to array&quot;. No you haven&#39;t. <code>uint8_t *theArray = { arrayOne,arrayTwo,arrayThree,arrayFour };</code> is not valid C and will not compile. Post the actual code you are using."}, {"owner": {"reputation": 553, "user_id": 4243572, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/75536972446c81f2f35f482049a09acc?s=128&d=identicon&r=PG&f=1", "display_name": "Roo", "link": "https://stackoverflow.com/users/4243572/roo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433331658, "post_id": 30618860, "comment_id": 49304076, "body": "It&#39;s an Objective-C. And it compiles."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433331981, "post_id": 30618860, "comment_id": 49304304, "body": "Ok, removed the C tag for you."}, {"owner": {"reputation": 553, "user_id": 4243572, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/75536972446c81f2f35f482049a09acc?s=128&d=identicon&r=PG&f=1", "display_name": "Roo", "link": "https://stackoverflow.com/users/4243572/roo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433332240, "post_id": 30618860, "comment_id": 49304482, "body": "Valid C is a valid Objective-C. And first part of question is C."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1433332284, "post_id": 30618860, "comment_id": 49304516, "body": "@Roo <code>uint8_t *theArray</code> should be <code>uint8_t *theArray[]</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433332371, "post_id": 30618860, "comment_id": 49304582, "body": "@Roo The first part of the question, including the declaration of <code>theArray</code>, is <i>not</i> valid C. What&#39;s allowed in Objective-C, I have no idea."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433332512, "post_id": 30618860, "comment_id": 49304702, "body": "@Lundin It&#39;s not valid in objective-C either, but the compiler lets it slide with the warning <i>&quot;Excess elements in scalar initializer&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 4243572, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/75536972446c81f2f35f482049a09acc?s=128&d=identicon&r=PG&f=1", "display_name": "Roo", "link": "https://stackoverflow.com/users/4243572/roo"}, "edited": false, "score": 0, "creation_date": 1433333496, "post_id": 30619313, "comment_id": 49305416, "body": "And how can I get the &quot;uint8_t arrayOne[12]&quot; in that method then?"}, {"owner": {"reputation": 2345, "user_id": 956531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bc58919dfd1e89d9d5be71a9c68dd9d?s=128&d=identicon&r=PG", "display_name": "alediaferia", "link": "https://stackoverflow.com/users/956531/alediaferia"}, "reply_to_user": {"reputation": 553, "user_id": 4243572, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/75536972446c81f2f35f482049a09acc?s=128&d=identicon&r=PG&f=1", "display_name": "Roo", "link": "https://stackoverflow.com/users/4243572/roo"}, "edited": false, "score": 0, "creation_date": 1433335797, "post_id": 30619313, "comment_id": 49307146, "body": "<code>uint8_t *arrayOne = pointersArray[0];</code> And then you can do <code>arrayOne[11]</code> or whatever index you need."}], "tags": [], "owner": {"reputation": 2345, "user_id": 956531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bc58919dfd1e89d9d5be71a9c68dd9d?s=128&d=identicon&r=PG", "display_name": "alediaferia", "link": "https://stackoverflow.com/users/956531/alediaferia"}, "is_accepted": true, "score": 1, "last_activity_date": 1433343540, "last_edit_date": 1433343540, "creation_date": 1433332286, "answer_id": 30619313, "question_id": 30618860, "link": "https://stackoverflow.com/questions/30618860/pass-uint8-t-array-to-method/30619313#30619313", "title": "Pass uint8_t array to method", "body": "<p>This line:</p>\n\n<pre><code>uint8_t *theArray = { arrayOne,arrayTwo,arrayThree,arrayFour };\n</code></pre>\n\n<p>is actually creating an array filled in with the <strong>pointers to your arrays  converted to uint8_t</strong> values. I don't think this is what you want.</p>\n\n<p>So first of all (notice the double pointer):</p>\n\n<pre><code>uint8_t *theArray[] = { arrayOne,arrayTwo,arrayThree,arrayFour };\n</code></pre>\n\n<p>Then your ObjC method becomes:</p>\n\n<pre><code>-(void)theMethod:(uint8_t **)pointersArray {\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1987, "user_id": 2938121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVfe2.jpg?s=128&g=1", "display_name": "lead_the_zeppelin", "link": "https://stackoverflow.com/users/2938121/lead-the-zeppelin"}, "is_accepted": false, "score": 0, "last_activity_date": 1433332304, "creation_date": 1433332304, "answer_id": 30619318, "question_id": 30618860, "link": "https://stackoverflow.com/questions/30618860/pass-uint8-t-array-to-method/30619318#30619318", "title": "Pass uint8_t array to method", "body": "<p>Declare your method to take in a pointer to array pointers</p>\n\n<pre><code>-(void)theMethod:(uint8_t **)pointersArray{\n...\n...\n}\n</code></pre>\n\n<p>Invoke the method by passing it like this like </p>\n\n<pre><code>[self theMethod:&amp;theArray];\n</code></pre>\n"}], "owner": {"reputation": 553, "user_id": 4243572, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/75536972446c81f2f35f482049a09acc?s=128&d=identicon&r=PG&f=1", "display_name": "Roo", "link": "https://stackoverflow.com/users/4243572/roo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "accepted_answer_id": 30619313, "answer_count": 2, "score": 0, "last_activity_date": 1433343540, "creation_date": 1433331058, "last_edit_date": 1433332705, "question_id": 30618860, "link": "https://stackoverflow.com/questions/30618860/pass-uint8-t-array-to-method", "title": "Pass uint8_t array to method", "body": "<p>I have four <code>uint8_t</code> arrays:</p>\n\n<pre><code>uint8_t arrayOne[12]   = { 0x00,0x01,0x00,0x00,0x00,0x06,0xFE,0x03,0x01,0xC1,0x00,0x01 };\n\nuint8_t arrayTwo[12]   = { 0x00,0x01,0x00,0x00,0x00,0x06,0xFE,0x03,0x4E,0x2D,0x00,0x0C };\n\nuint8_t arrayThree[12] = { 0x00,0x01,0x00,0x00,0x00,0x06,0xFE,0x03,0x01,0xF3,0x00,0x01 };\n\nuint8_t arrayFour[12]  = { 0x00,0x01,0x00,0x00,0x00,0x06,0xFE,0x03,0x20,0x04,0x00,0x01 };\n</code></pre>\n\n<p>I have added them to array:</p>\n\n<pre><code>uint8_t *theArray[] = { arrayOne,arrayTwo,arrayThree,arrayFour };\n</code></pre>\n\n<p>now I want to pass this array to a method, for example:</p>\n\n<pre><code>[self theMethod:theArray];\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>-(void)theMethod:(uint8_t *)pointersArray[]{\n...\n...\n}\n</code></pre>\n\n<p><strong>What is the proper way to point that array to a method in -(void)theMethod... ?</strong> </p>\n"}, {"tags": ["c", "avr", "adc", "atmega16"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1433330333, "post_id": 30618583, "comment_id": 49303135, "body": "1023 is too large to fit in an <code>unsigned char</code>. What you&#39;re getting is the least significant byte of 1023, which is 255."}, {"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433330365, "post_id": 30618583, "comment_id": 49303157, "body": "Hint: try an <code>unsigned short</code> or <code>unsigned int</code> instead of <code>unsigned char</code>"}, {"owner": {"reputation": 149, "user_id": 4113963, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8tJ7j7WKipQ/AAAAAAAAAAI/AAAAAAAAAEc/PW_XrLgdm0k/photo.jpg?sz=128", "display_name": "Yash", "link": "https://stackoverflow.com/users/4113963/yash"}, "edited": false, "score": 0, "creation_date": 1433330442, "post_id": 30618583, "comment_id": 49303214, "body": "I have tried float, int and others, but it doesn&#39;t work Please suggest appropriate datatype, if that is the only problem!!!"}, {"owner": {"reputation": 149, "user_id": 4113963, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8tJ7j7WKipQ/AAAAAAAAAAI/AAAAAAAAAEc/PW_XrLgdm0k/photo.jpg?sz=128", "display_name": "Yash", "link": "https://stackoverflow.com/users/4113963/yash"}, "reply_to_user": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433330567, "post_id": 30618583, "comment_id": 49303310, "body": "@Levi I have tried both unsigned int and unsigned short, but it doesn&#39;t worked"}, {"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 1, "creation_date": 1433330599, "post_id": 30618583, "comment_id": 49303338, "body": "@Yash: Is it possible that the <code>ADC</code> register is only 8 bits long? That could be the issue"}, {"owner": {"reputation": 149, "user_id": 4113963, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8tJ7j7WKipQ/AAAAAAAAAAI/AAAAAAAAAEc/PW_XrLgdm0k/photo.jpg?sz=128", "display_name": "Yash", "link": "https://stackoverflow.com/users/4113963/yash"}, "edited": false, "score": 0, "creation_date": 1433330706, "post_id": 30618583, "comment_id": 49303407, "body": "What do you mean by ADC register ?? Multiplying value will not increase the resolution."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1433330768, "post_id": 30618583, "comment_id": 49303443, "body": "@Yash Read a data sheet, specifying the processor&#39;s registers. The symbol <code>ADC</code> in your code is a reference to a hardware register, part of the A/D converter."}, {"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433330843, "post_id": 30618583, "comment_id": 49303503, "body": "@Yash: <a href=\"http://www.atmel.com/images/doc2466.pdf\" rel=\"nofollow noreferrer\">Here</a> you go"}, {"owner": {"reputation": 149, "user_id": 4113963, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8tJ7j7WKipQ/AAAAAAAAAAI/AAAAAAAAAEc/PW_XrLgdm0k/photo.jpg?sz=128", "display_name": "Yash", "link": "https://stackoverflow.com/users/4113963/yash"}, "reply_to_user": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433330850, "post_id": 30618583, "comment_id": 49303505, "body": "@Levi - multiplication will not solve the problem of resolution. I want 10bit resolution, not 8 bit."}, {"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 1, "creation_date": 1433333289, "post_id": 30618583, "comment_id": 49305276, "body": "Maybe, in the future, have a look at your compiler warnings, see e.g. <a href=\"http://stackoverflow.com/questions/22198305/is-there-a-gcc-flag-to-catch-integer-truncation\" title=\"is there a gcc flag to catch integer truncation\">stackoverflow.com/questions/22198305/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 1, "creation_date": 1433333341, "post_id": 30618673, "comment_id": 49305315, "body": "He will have to change <code>unsigned char ReadADC(unsigned char ch)</code> too."}, {"owner": {"reputation": 149, "user_id": 4113963, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8tJ7j7WKipQ/AAAAAAAAAAI/AAAAAAAAAEc/PW_XrLgdm0k/photo.jpg?sz=128", "display_name": "Yash", "link": "https://stackoverflow.com/users/4113963/yash"}, "edited": false, "score": 0, "creation_date": 1433398351, "post_id": 30618673, "comment_id": 49337294, "body": "There is one more problem, I am not able to set the maximum reference voltage. I have applied 5V at AVcc and a capicator to ground at Aref. But 5V output is also giving 1023 (max. value) and 3V output is also doing the same."}, {"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "reply_to_user": {"reputation": 149, "user_id": 4113963, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8tJ7j7WKipQ/AAAAAAAAAAI/AAAAAAAAAEc/PW_XrLgdm0k/photo.jpg?sz=128", "display_name": "Yash", "link": "https://stackoverflow.com/users/4113963/yash"}, "edited": false, "score": 0, "creation_date": 1433398658, "post_id": 30618673, "comment_id": 49337473, "body": "@Yash: That is an entirely different question, and is more suitable for <a href=\"http://electronics.stackexchange.com/\">electronics stack exchange</a>"}], "tags": [], "owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "is_accepted": true, "score": 3, "last_activity_date": 1433333464, "last_edit_date": 1433333464, "creation_date": 1433330467, "answer_id": 30618673, "question_id": 30618583, "link": "https://stackoverflow.com/questions/30618583/255-char-instead-of-1023-unable-to-set-reference-voltage/30618673#30618673", "title": "255 char. instead of 1023, Unable to set reference voltage", "body": "<p>In your code, the line</p>\n\n<pre><code>unsigned char value = ReadADC(0);\n</code></pre>\n\n<p>is restricting you to only 8 bits. You need to change the type of <code>value</code> to something larger, like an <code>unsigned short</code>, which can hold 16 bits worth of data. If you make this change, you must also change the definition of <code>ReadADC</code> to </p>\n\n<pre><code>unsigned short ReadADC(unsigned char ch)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 4113963, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8tJ7j7WKipQ/AAAAAAAAAAI/AAAAAAAAAEc/PW_XrLgdm0k/photo.jpg?sz=128", "display_name": "Yash", "link": "https://stackoverflow.com/users/4113963/yash"}, "is_accepted": false, "score": 0, "last_activity_date": 1433332014, "last_edit_date": 1433332014, "creation_date": 1433331713, "answer_id": 30619094, "question_id": 30618583, "link": "https://stackoverflow.com/questions/30618583/255-char-instead-of-1023-unable-to-set-reference-voltage/30619094#30619094", "title": "255 char. instead of 1023, Unable to set reference voltage", "body": "<p>Replace unsigned char by unit16_t</p>\n"}], "owner": {"reputation": 149, "user_id": 4113963, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8tJ7j7WKipQ/AAAAAAAAAAI/AAAAAAAAAEc/PW_XrLgdm0k/photo.jpg?sz=128", "display_name": "Yash", "link": "https://stackoverflow.com/users/4113963/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 30618673, "answer_count": 2, "score": 2, "last_activity_date": 1596170368, "creation_date": 1433330249, "last_edit_date": 1596170368, "question_id": 30618583, "link": "https://stackoverflow.com/questions/30618583/255-char-instead-of-1023-unable-to-set-reference-voltage", "title": "255 char. instead of 1023, Unable to set reference voltage", "body": "<p>I am using ATmega16 in my project. I want to get the value=<strong>1023 when I give 5V</strong> as input, and 0 when input = 0. The readADC function reads the particular channel of micro-controller ADC. The frequency of my clock is 4MHz. But on reading the input, I'm <strong>getting 255</strong> as the maximum value instead of 1023. \nSomeone who knows about avr programming can help !!!</p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;avr/delay.h&gt;\n#include &lt;avr/io.h&gt;\n#include &lt;avr/interrupt.h&gt;\n\nunsigned char ReadADC(unsigned char ch)\n{\n   ch = ch&amp;0b00000111;\n   ADMUX&amp;=0xF8;\n   ADMUX |= ch;\n   ADCSRA |= (1&lt;&lt;ADSC);\n   while(ADCSRA &amp; (1&lt;&lt;ADSC);   //wait for conversion to complete\n   return(ADC);\n}\n\nint main(void)\n{\n   SegDataDDR = 0xFF;\n   SegCntrlDDR = 0xF3;\n   SegCntrlPort = 0xF3;\n   SegDataPort = 0x00;\n\nADMUX = (1&lt;&lt;REFS0) | (0&lt;&lt;REFS1);\nADCSRA = (1&lt;&lt;ADEN) | (1&lt;&lt;ADPS2) | (1&lt;&lt;ADPS0);   // ADEN set to turn ADC on\n// clock frequency divided by 32 for operable 125KHz frequency\n\nwhile(1) \n{ \n   ADCSRA |= (1&lt;&lt;ADSC);    // start conversion\n   unsigned char value = ReadADC(0);    // Reads the value of the ADC\n}\n</code></pre>\n"}, {"tags": ["c", "type-conversion"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433330063, "post_id": 30618487, "comment_id": 49302971, "body": "Hint: <code>&quot;parameter1&quot;</code> is <code>argv[1]</code> and <code>&quot;parameter2&quot;</code> is <code>argv[2]</code>."}, {"owner": {"reputation": 11, "user_id": 4969276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4618c2e1e3ef5d87658482ccbcc18f50?s=128&d=identicon&r=PG&f=1", "display_name": "bartb", "link": "https://stackoverflow.com/users/4969276/bartb"}, "edited": false, "score": 1, "creation_date": 1433330331, "post_id": 30618487, "comment_id": 49303132, "body": "warning: assignment makes integer from pointer without a cast [enabled by default]"}, {"owner": {"reputation": 11, "user_id": 4969276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4618c2e1e3ef5d87658482ccbcc18f50?s=128&d=identicon&r=PG&f=1", "display_name": "bartb", "link": "https://stackoverflow.com/users/4969276/bartb"}, "edited": false, "score": 0, "creation_date": 1433330356, "post_id": 30618487, "comment_id": 49303154, "body": "void* buffer = (void*)malloc(ETH_FRAME_LEN);"}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 1, "creation_date": 1433330475, "post_id": 30618487, "comment_id": 49303242, "body": "<code>strcpy(data, argv[1]); strcat(data, argv[2]);</code> ?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433331692, "post_id": 30618487, "comment_id": 49304096, "body": "@bartb Please edit your post and add additional information to the question itself, rather than posting it as comments."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1433332204, "post_id": 30618487, "comment_id": 49304466, "body": "I&#39;m voting to close this question as off-topic because the question just changed significantly, indicating probable trolling."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1433401264, "post_id": 30618487, "comment_id": 49338903, "body": "suggest, when compiling, to enable all warnings, then fix those warnings.  Currently there are 12 warnings that need fixing.  in gcc, use &#39;-Wall -Wextra -pedantic&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "is_accepted": true, "score": 1, "last_activity_date": 1433332052, "creation_date": 1433332052, "answer_id": 30619229, "question_id": 30618487, "link": "https://stackoverflow.com/questions/30618487/run-program-with-parameters-c/30619229#30619229", "title": "Run program with parameters C", "body": "<p>This gives a compiler warning/error:</p>\n\n<pre><code>data[1] = argv[1];\n</code></pre>\n\n<p>here <code>data[1]</code> is of type <code>char</code>. and <code>argv[1]</code> is of type <code>char*</code>. Because <code>argv</code> is a list of charpointers (<code>char*</code>).</p>\n\n<p>to copy the whole first argument, you can do something like <code>strcpy(argv[0], data);</code>, but this doesn't check if the destination <code>data</code> has enough space, so long arguments can cause errors.</p>\n\n<p>To insure data has enough space, you can </p>\n\n<pre><code>char* data = (char*) malloc(strlen(argv[2]) +1);\n</code></pre>\n\n<p>then you do the same for <code>etherhead</code>:</p>\n\n<pre><code>char* etherhead = (char*) malloc(strlen(argv[1]) +1);\n</code></pre>\n\n<p>and make a nice structure for them both:</p>\n\n<pre><code>struct Buffer{\n  char* head;\n  char* data;\n};\n\nBuffer b = { etherhead, data };\n\n//use them\nprintf(\"data: %s \\n\", b.data);\n</code></pre>\n\n<hr>\n\n<p>if you want to concatenate them in one string it is also possible:</p>\n\n<pre><code>char* headerAndData = (char*) malloc(strlen(argv[1]) + strlen(argv[2]) +1);\n\nsprintf(headerAndData, \"%s%s\", argv[1], argv[2]);\n</code></pre>\n\n<hr>\n\n<p>Since you tagged the question with <code>typeconversion</code> i will assume that you want data that is not a string. You can do this in various ways, depending on your data type. For integer you can say <code>int i =  atoi(argv[1]);</code>. You can also have a look at <a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow\">scanf</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1433403643, "last_edit_date": 1433403643, "creation_date": 1433401733, "answer_id": 30637244, "question_id": 30618487, "link": "https://stackoverflow.com/questions/30618487/run-program-with-parameters-c/30637244#30637244", "title": "Run program with parameters C", "body": "<p>amongst several other problems with the code:</p>\n\n<pre><code>In C, do not cast the returned value from malloc()\nalways check (!=NULL) the returned value from malloc \n  to assure the operation was successful\n</code></pre>\n\n<p>The argc parameter of main() indicates the number of parameter (including a pointer to the program name as argv[0])</p>\n\n<p>So, with two parameters</p>\n\n<pre><code>if( 3 != argc )\n{ // then invalid parameter count\n    printf( \"Usage: %s &lt;parm1&gt; &lt;parm2&gt;\\n\", argv[0] );\n    exit( EXIT_FAILURE );\n}\n\n// implied else, correct number of parameters\n\n// argv[1] is a pointer to a string that contains the first parameter\n// argv[2] is a pointer to a string that contains the second parameter\n</code></pre>\n\n<p>regarding this question:</p>\n\n<p>How to input data from command line to this data[]? strcpy(data+10, argv[1]); gives 53 strcpy(data+11, argv[2]); gives 54 why is that?</p>\n\n<p>if the posted 53 and 54 are decimal values, then they represent '4' and '5'  However, if they are hexadecimal values, then they represent 'S' and 'T'</p>\n"}], "owner": {"reputation": 11, "user_id": 4969276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4618c2e1e3ef5d87658482ccbcc18f50?s=128&d=identicon&r=PG&f=1", "display_name": "bartb", "link": "https://stackoverflow.com/users/4969276/bartb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 30619229, "answer_count": 2, "score": 0, "last_activity_date": 1433403643, "creation_date": 1433330005, "last_edit_date": 1433332150, "question_id": 30618487, "link": "https://stackoverflow.com/questions/30618487/run-program-with-parameters-c", "title": "Run program with parameters C", "body": "<p>I need help how to make program run with parameters. I need it to run like : ./name_of_program parameter1 parameter2\nI need it to set parameteres in data[] table.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;linux/if_packet.h&gt;\n#include &lt;linux/if_ether.h&gt;\n#include &lt;linux/if_arp.h&gt;\n#include &lt;sys/ioctl.h&gt;\n\n#define INTERFACE   \"eth0\"\n\nint main(int argc, char *argv[]) {\n    puts(\"Wys\u0142anie ramki przez NIC\");\n\n    int s_out; /*deskryptor gniazda*/\n    int j;\n\n    void* buffer = (void*)malloc(ETH_FRAME_LEN);\n\n    unsigned char* etherhead = buffer;\n    unsigned char* data = buffer + 14;\n\n    struct ethhdr *eh = (struct ethhdr *)etherhead;\n    struct sockaddr_ll socket_address;\n    int send_result = 0;\n    struct ifreq ifr;\n    int ifindex = 0;\n\n    printf(\"Argumanty funkcji main:\\n----------------\\n\");\n        while(argc--)\n            printf(\"%s\\n\", *argv++);\n\n    printf(\"----------------\\n\");\n\n    socket_address.sll_halen    = ETH_ALEN;\n\n    unsigned char src_mac[6] = {0x00, 0x00, 0x00, 0xaa, 0x00, 0x00};\n    unsigned char dest_mac[6] = {0x00, 0x00, 0x00, 0x00, 0x10, 0x20};\n    memcpy((void*)buffer, (void*)dest_mac, ETH_ALEN);\n    memcpy((void*)(buffer+ETH_ALEN), (void*)src_mac, ETH_ALEN);\n    eh-&gt;h_proto = htons (0x0800);\n\n    data[0] = 0x45;\n        //pole-tos\ndata[1] = 0x00;\n        //calkowita-dlugosc\ndata[2] = 0x00;\ndata[3] = 0x54;\n        //identyfikacja\ndata[4] = 0x00;\ndata[5] = 0x00;\n        //flagi\ndata[6] = 0x40;\n        //fragment-offset\ndata[7] = 0x00;\n        //ttl\ndata[8] = 0x40;\n        //protocol\ndata[9] = 0x01;\n        //suma-kontrolna\nstrcpy(data+10, argv[1]);\nstrcpy(data+11, argv[2]);\n        //adres-zrodlowy\ndata[12] = 0x0a;\ndata[13] = 0x00;\ndata[14] = 0x00;\ndata[15] = 0x14;\n        //adres-docelowy\ndata[16] = 0x0a;\ndata[17] = 0x00;\ndata[18] = 0x00;\ndata[19] = 0x01;\n                //naglowek icmp\n        //request 0x08\n        //reply 0x00\ndata[20] = 0x08;\n        //kod icmp\ndata[21] = 0x00;\n        //suma-kontrolna\ndata[22] = 0x00;\ndata[23] = 0x00;\n        //identyfikator-BE i identyfikator-LE\ndata[24] = 0x00;\ndata[25] = 0x1f;\n        //numer-sekwencji-BE\ndata[26] = 0x00;\ndata[27] = 0x01;\n        //dane-icmp\ndata[28] = 0x00;\ndata[29] = 0x00;\ndata[30] = 0x00;\ndata[31] = 0x00;\ndata[32] = 0x00;\ndata[33] = 0x00;\ndata[34] = 0x00;\n\n    #if 1 \n        s_out = socket(AF_PACKET, SOCK_RAW, ETH_P_ALL);\n        if (s_out == -1) \n        {\n        printf (\"Nie moge otworzyc gniazda s_out\\n\");\n        }\n\n            strncpy(ifr.ifr_name, INTERFACE, IFNAMSIZ);\n            if (ioctl(s_out, SIOCGIFINDEX, &amp;ifr) == -1) \n        {\n            perror(\"SIOCGIFINDEX\");\n            exit(1);\n        }\n\n            ifindex = ifr.ifr_ifindex;\n        printf(\"Pobrano indeks karty NIC: %i\\n\", ifindex);\n\n\nsocket_address.sll_ifindex  = ifindex;\n\n        send_result = sendto(s_out, buffer, 49, 0,(struct sockaddr*)&amp;socket_address, sizeof(socket_address));\n        if (send_result == -1) \n        { \n        printf (\"Nie moge wyslac danych! \\n\"); \n        }\n            else \n            {\n            printf (\"Wyslalem dane do intefejsu: %s \\n\", INTERFACE);\n            }\n\n        #if 1\n            printf (\"Dane do wyslania: \\n\");\n            for (j=0;j&lt;send_result; j++) \n            {\n            printf (\"%02x \", *(etherhead+j));\n            }\n            printf (\"\\n\");\n        #endif\n\n\n#endif\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>How to input data from command line to this data[]?\nstrcpy(data+10, argv[1]); \ngives 53\nstrcpy(data+11, argv[2]); \ngives 54\nwhy is that?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433330098, "post_id": 30618465, "comment_id": 49302990, "body": "You need to provide 2 indices for your array as it is 2 dimensional. The line <code>scanf(&quot;%s&quot;, ar[][i]);</code> makes no sense"}], "answers": [{"tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": false, "score": 0, "last_activity_date": 1433330094, "creation_date": 1433330094, "answer_id": 30618519, "question_id": 30618465, "link": "https://stackoverflow.com/questions/30618465/reading-strings-in-2d-arraay-using-s-qualifier/30618519#30618519", "title": "reading strings in 2D arraay using %s qualifier", "body": "<p>Change your scanf statement to :</p>\n\n<pre><code>scanf(\"%s\",ar[i]);\n</code></pre>\n\n<p>and your printf statement to : </p>\n\n<pre><code>printf(\"%s\",ar[i]);\n</code></pre>\n\n<p>A string is an array of characters.</p>\n\n<p>In your declaration, </p>\n\n<pre><code>char ar[100][tc];\n</code></pre>\n\n<p><code>100</code> is the number of strings, and <code>tc</code> is te number of characters in each strings.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1433330163, "creation_date": 1433330163, "answer_id": 30618543, "question_id": 30618465, "link": "https://stackoverflow.com/questions/30618465/reading-strings-in-2d-arraay-using-s-qualifier/30618543#30618543", "title": "reading strings in 2D arraay using %s qualifier", "body": "<p>To start with, I assume you want an array of <code>tc</code> strings, each string <code>100</code> characters long? That's not what you declare, you declare an array of <code>100</code> strings, each <code>tc</code> characters long.</p>\n\n<p>From that is should be obvious that to get string <code>i</code> in the array, you need to use <code>ar[i]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "is_accepted": true, "score": 0, "last_activity_date": 1433330241, "creation_date": 1433330241, "answer_id": 30618577, "question_id": 30618465, "link": "https://stackoverflow.com/questions/30618465/reading-strings-in-2d-arraay-using-s-qualifier/30618577#30618577", "title": "reading strings in 2D arraay using %s qualifier", "body": "<p>It tooks like <code>tc</code> is test case count.</p>\n\n<p>You need to have <code>char ar[tc][100];</code></p>\n\n<p>Then in loop, which runs till <code>tc</code> is exhausted, do stuffs :</p>\n\n<pre><code>scanf(\"%s\",ar[i]); // Pass address of ith string\nprintf(\"%s\",ar[i]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 1, "creation_date": 1433330702, "post_id": 30618624, "comment_id": 49303403, "body": "VLA are allowed <code>C99</code>"}, {"owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "reply_to_user": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1433330900, "post_id": 30618624, "comment_id": 49303542, "body": "Yes it is but unfortunately mine doesn&#39;t support variable length arrays so wouldn&#39;t it be better to allocate a bit of extra memory or rather using malloc for assignment."}, {"owner": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 1, "creation_date": 1433331022, "post_id": 30618624, "comment_id": 49303637, "body": "You can&#39;t simply answer based on what your platform/environment support. <i>&quot;you cannot initialize a array at runtime...&quot;</i> is misleading"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433331126, "post_id": 30618624, "comment_id": 49303713, "body": "But just because you are using a 25 years old version of the standard, you can&#39;t assume that everyone else is too. Unless the question is specifically tagged C90, always assume latest version of the standard. This is explained in the <a href=\"http://stackoverflow.com/tags/c/info\">C tag wiki</a>."}], "tags": [], "owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "is_accepted": false, "score": 0, "last_activity_date": 1433331160, "last_edit_date": 1433331160, "creation_date": 1433330358, "answer_id": 30618624, "question_id": 30618465, "link": "https://stackoverflow.com/questions/30618465/reading-strings-in-2d-arraay-using-s-qualifier/30618624#30618624", "title": "reading strings in 2D arraay using %s qualifier", "body": "<p>Scanf requires the the address of a string varible. So when you write</p>\n\n<pre><code>scanf(\"%s\",ar[][i]);\n</code></pre>\n\n<p>it wrong.You should write</p>\n\n<pre><code>scanf(\"%s\",ar[i]);\n</code></pre>\n\n<p>Secondly </p>\n\n<pre><code>printf(\"%s\",ar[100*i]);\n</code></pre>\n\n<p>prints the 100*i th row which may not exist.\nSo use</p>\n\n<pre><code>printf(\"%s\",ar[i]);\n</code></pre>\n\n<p>Moreover you shouldn't initialize a array at runtime so scanning tc may not work on some compilers. You need to fix the size of the array.</p>\n\n<p>char ar[100][100];</p>\n"}], "owner": {"reputation": 380, "user_id": 4969251, "user_type": "registered", "profile_image": "https://graph.facebook.com/830876276982224/picture?type=large", "display_name": "Animesh Mukherkjee", "link": "https://stackoverflow.com/users/4969251/animesh-mukherkjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 30618577, "answer_count": 4, "score": 1, "last_activity_date": 1433331160, "creation_date": 1433329934, "last_edit_date": 1433330170, "question_id": 30618465, "link": "https://stackoverflow.com/questions/30618465/reading-strings-in-2d-arraay-using-s-qualifier", "title": "reading strings in 2D arraay using %s qualifier", "body": "<p>I need to read strings in the rows of a 2D array in C, use of %s qualifier and scanf is mandatory,code used is</p>\n\n<pre><code>int tc; \nscanf(\"%d\",&amp;tc); \nchar ar[100][tc];\nfor(int i=0;i&lt;tc;i++){\n    printf(\"\\n enter the string \\n\");\nscanf(\"%s\",ar[][i]);\nprintf(\"%s\",ar[][i]);\n}\n</code></pre>\n\n<p>I have tried using </p>\n\n<pre><code>scanf(\"%s\",ar[100*i]);\n</code></pre>\n\n<p>but i am getting an error as \"expected primary-expression before ']' token\".... how to do it?</p>\n"}, {"tags": ["c", "intel", "minix", "smp"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user781847"}, "edited": false, "score": 1, "creation_date": 1434003788, "post_id": 30618235, "comment_id": 49596979, "body": "Have you enabled the LAPIC in the IA32_APIC_BASE MSR? When sending the IPI, the vector field must be 0, the assert bit should be 0 and the Destination Mode bit should be 1 (seems you are using shorthands). When sending the SIPI, Destination Mode bit should be 1 too and you should not set the Delivery Status bit. Finally remember that the vector field is only 8 bit long, so your trampoline must not be over 0ff000h."}, {"owner": {"reputation": 341, "user_id": 2963216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9d0fa4bf879941ad132626e6e6fc454d?s=128&d=identicon&r=PG&f=1", "display_name": "user2963216", "link": "https://stackoverflow.com/users/2963216/user2963216"}, "edited": false, "score": 0, "creation_date": 1434128309, "post_id": 30618235, "comment_id": 49664951, "body": "thanks alot it works now"}, {"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1446929037, "post_id": 30618235, "comment_id": 54951189, "body": "A more generic howto: <a href=\"http://stackoverflow.com/questions/16364817/assessing-the-apic-and-creating-ipis-in-x86-assembly?lq=1\" title=\"assessing the apic and creating ipis in x86 assembly\">stackoverflow.com/questions/16364817/&hellip;</a>"}], "owner": {"reputation": 341, "user_id": 2963216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9d0fa4bf879941ad132626e6e6fc454d?s=128&d=identicon&r=PG&f=1", "display_name": "user2963216", "link": "https://stackoverflow.com/users/2963216/user2963216"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1446928950, "creation_date": 1433329337, "last_edit_date": 1446928950, "question_id": 30618235, "link": "https://stackoverflow.com/questions/30618235/cant-start-smp-ap-processors-in-minix-startup-ipi-restarts-and-hangs", "title": "Can&#39;t start SMP AP processors in MINIX: startup_IPI restarts and hangs", "body": "<p>i'm running minix 3.1.2a ,my goal is to start APs procesoors other than the BSP ,i followed the universal startup algorithm :</p>\n\n<ul>\n<li>BSP sends AP an INIT IPI  </li>\n<li>BSP DELAYs (10mSec)</li>\n<li>BSP sends AP a STARTUP IPI  </li>\n<li>BSP DELAYs (200\u03bcSEC)</li>\n<li>BSP sends AP a STARTUP IPI</li>\n<li>BSP DELAYs   (200\u03bcSEC)</li>\n</ul>\n\n<p>here's the Function to do INIT IPI AND STARTUP IPI after reading the ACPI table:</p>\n\n<pre><code>void START_APs2()\n    {\n\n u32_t trampoline_addr;\n int UseCPU = 1;\n u32_t reg;\n /* Try to allocate the trampoline for APs to start */\n                if ((trampoline_addr=find_trampoline())) \n                 {\n\n\n\n reg = LOCAL_APIC_READ(LOCAL_APIC_SPIV);\n   reg |= 0x1FF;    /* Disable apic */\n   LOCAL_APIC_WRITE(LOCAL_APIC_SPIV, reg);\n\n\n                        /*======================== INIT IPI==============================*/\n\n\n\n                     CLI();\n\n                        /*LOCAL_APIC_WRITE(LOCAL_APIC_ICR_HIGH, (unsigned long)cpus[UseCPU].ApicID &lt;&lt; 24);*/\n                       LOCAL_APIC_WRITE(LOCAL_APIC_ICR_LOW,  (unsigned long)  (0x4500) | (trampoline_addr&gt;&gt;12)|(DEST_OTHERS &lt;&lt; DEST_SHORT_SHIFT));\n                        /*wait_for_ipi_completion();*/\n                       VerifyLoop();\n\n                       /*Some delay ...*/\n                      milli_delay(100);\n\n                       /*=============================STARTUP IPI==============================*/\n\n\n                      /* LOCAL_APIC_WRITE(LOCAL_APIC_ICR_HIGH, (unsigned long)cpus[UseCPU].ApicID &lt;&lt;24);*/\n                       LOCAL_APIC_WRITE(LOCAL_APIC_ICR_LOW,  (unsigned long)  (0x5600) | (trampoline_addr&gt;&gt;12)|(DEST_OTHERS &lt;&lt; DEST_SHORT_SHIFT));\n                       VerifyLoop();\n\n                          /*Some delay ...*/\n                      milli_delay(200);\n\n                       /* send the IPI */\n\n                       /*LOCAL_APIC_WRITE(LOCAL_APIC_ICR_HIGH, (unsigned long)cpus[UseCPU].ApicID &lt;&lt;24);*/\n                       LOCAL_APIC_WRITE(LOCAL_APIC_ICR_LOW,  (unsigned long)  (0x5600) | (trampoline_addr&gt;&gt;12)|(DEST_OTHERS &lt;&lt; DEST_SHORT_SHIFT));\n                       VerifyLoop();\n\n                          /*Some delay ...*/\n                      milli_delay(200);\n\n                      STI();\n                     /* enable_cpu(this_cpu, WITHOUT_ECHO);*/\n                       if (! AP_running()) \n                          {\n                              Aprintf((\"\\n\\n*** WARNING! AP# %d  is not running ***\\n\\n\",(unsigned long)cpus[UseCPU].ApicID));\n\n                          }\n                          else\n                          {\n                               Aprintf(\"\\n\\n***AP RUNNING SUCCESSFULLY\");\n\n                          }\n\n                 }\n}\n</code></pre>\n\n<blockquote>\n  <p>i'd like to note that i run on a core i7 host machine with windows 7 ,64-bit\n  and i have 3 different virtual M/Cs :</p>\n</blockquote>\n\n<ul>\n<li>VMWARE WORKSTATION </li>\n<li>VBOX </li>\n<li>QEMU MANAGER</li>\n</ul>\n\n<blockquote>\n  <p>1-on VMWARE:</p>\n</blockquote>\n\n<p>mainly i run my guest minix on VMWARE ,when i run the previously mentioned code :</p>\n\n<ul>\n<li>when i choose the number of processors i.e 4 and number of cores\n1,and run that code the system will keep in restarting.</li>\n<li>when i choose the number of processors i.e 1 and number of cores\n4,and run that code the system will hang.</li>\n</ul>\n\n<blockquote>\n  <p>2-on VBOX:</p>\n</blockquote>\n\n<ul>\n<li>when i choose the number of processors 4 and run that code the system will hang.</li>\n</ul>\n\n<blockquote>\n  <p>3-on QEMU:\n  first the acpi checksum is incorrect ,so i enter the CPUAPIC ID  manually just to test i.e APIC ID =1\n   - when i choose the number of cpus 4 ,and run that code the system will hang.</p>\n</blockquote>\n\n<p>actually i stuck in that problem for more than 10 days and i pull out my all hair ,i can't reconize why is not starting ,so if any one can help i'll be appreciated</p>\n"}, {"tags": ["c", "linux", "wifi"], "answers": [{"tags": [], "owner": {"reputation": 3755, "user_id": 1940850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqElV.png?s=128&g=1", "display_name": "karel", "link": "https://stackoverflow.com/users/1940850/karel"}, "is_accepted": true, "score": 1, "last_activity_date": 1521236378, "last_edit_date": 1521236378, "creation_date": 1433416073, "answer_id": 30642256, "question_id": 30618104, "link": "https://stackoverflow.com/questions/30618104/how-to-debug-a-process-developed-in-c-running-as-a-wi-fi-access-point/30642256#30642256", "title": "How to debug a process developed in C running as a Wi-Fi Access Point?", "body": "<p>GNU Debugger (remote server)<br>\nGDB is a source-level debugger that supports C among other programming languages, capable of breaking programs at any specific line, displaying variable values, and determining where errors occurred.  </p>\n\n<p>To install GNU Debugger and GNU Debugger (remote server) in all currently supported versions of Ubuntu (which is <a href=\"https://superuser.com/questions/880321/how-to-link-hostapd-to-a-physical-wifi-card-via-ethernet\">your operating system</a>), open the terminal and type:  </p>\n\n<pre><code>sudo apt install gdb gdbserver  \n</code></pre>\n\n<h3>Usage</h3>\n\n<blockquote>\n  <ol>\n  <li><p>gdbserver is launched on the target system, with the arguments:  </p>\n  \n  <ul>\n  <li>Either a device name (to use a serial line) or a TCP hostname and portnumber, and  </li>\n  <li>The path and filename of the executable to be debugged<br>\n  It then waits passively for the host gdb to communicate with it.  </li>\n  </ul></li>\n  <li><p>gdb is run on the host (controller), with the arguments:   </p>\n  \n  <ul>\n  <li>The path and filename of the executable (and any sources) on the host, and  </li>\n  <li>A device name (for a serial line) or the IP address and port number needed for connection to the target system.  </li>\n  </ul></li>\n  </ol>\n</blockquote>\n\n<p><sub><b>Source: </b><a href=\"https://en.wikipedia.org/wiki/Gdbserver\" rel=\"nofollow noreferrer\">Wikipedia</a></sub></p>\n"}], "owner": {"reputation": 23, "user_id": 4588597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e60698b93e3af16c9bc775bf7ffd4548?s=128&d=identicon&r=PG&f=1", "display_name": "fati09", "link": "https://stackoverflow.com/users/4588597/fati09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 30642256, "answer_count": 1, "score": 2, "last_activity_date": 1521236378, "creation_date": 1433328975, "question_id": 30618104, "link": "https://stackoverflow.com/questions/30618104/how-to-debug-a-process-developed-in-c-running-as-a-wi-fi-access-point", "title": "How to debug a process developed in C running as a Wi-Fi Access Point?", "body": "<p>I have two processes developed in C. The first one is running as a WiFi Access Point in Linux machine and the second is running as a controller in another Linux machine in the ethernet network. This latter can send configuration commands to the AP.\nMy question is when running this two process and when I send a command from the controller to the AP, how can I debug the AP process? </p>\n"}, {"tags": ["c", "methods", "arguments", "printf"], "answers": [{"tags": [], "owner": {"reputation": 1007, "user_id": 3683576, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/90750714d4cbe8c8dececd2e2b0afbbf?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Munsch", "link": "https://stackoverflow.com/users/3683576/guillaume-munsch"}, "is_accepted": false, "score": 4, "last_activity_date": 1433329140, "creation_date": 1433329140, "answer_id": 30618170, "question_id": 30618102, "link": "https://stackoverflow.com/questions/30618102/how-many-parameter-in-this-printf-function/30618170#30618170", "title": "How many parameter in this printf() function?", "body": "<p><code>Printf</code> can take as many arguments as you want.</p>\n\n<p>In the man page you can see a <code>...</code> at the end, which stands for a var args.</p>\n\n<p>If you got 96 times <code>%s</code> in your first argument, you'll have 97 arguments (The first string + the 96 replaced strings ;) )</p>\n"}, {"tags": [], "owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "is_accepted": true, "score": 4, "last_activity_date": 1433329256, "creation_date": 1433329256, "answer_id": 30618209, "question_id": 30618102, "link": "https://stackoverflow.com/questions/30618102/how-many-parameter-in-this-printf-function/30618209#30618209", "title": "How many parameter in this printf() function?", "body": "<p>No, it's not correct to say that <code>printf</code> always takes 2 arguments. In your first case, it takes 3 arguments. In the second case, it takes 4 arguments.</p>\n\n<p><code>printf</code> is a <a href=\"http://en.wikipedia.org/wiki/Variadic_function\" rel=\"nofollow\"><em>variadic function</em></a>. It takes a variable number of arguments. In C, functionality for such functions is provided using <a href=\"http://en.wikipedia.org/wiki/Stdarg.h\" rel=\"nofollow\">the <code>stdarg.h</code> (or <code>varargs.h</code>) header file</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": false, "score": 2, "last_activity_date": 1433329391, "creation_date": 1433329391, "answer_id": 30618258, "question_id": 30618102, "link": "https://stackoverflow.com/questions/30618102/how-many-parameter-in-this-printf-function/30618258#30618258", "title": "How many parameter in this printf() function?", "body": "<p><code>printf</code> can take any number of inputs. This is what <code>printf</code> prototype looks like:</p>\n\n<pre><code>int printf ( const char * format, ... );\n</code></pre>\n\n<p>As you can see, <code>...</code> is an indication of variable number of arguments. </p>\n\n<p>An example is:</p>\n\n<pre><code> printf(\"%i %d %f %c %s\", int_var, int_var, float_var, char_var, string_var);\n</code></pre>\n\n<p>These are format specifiers: <code>%i, %d, %f, %c, %s</code>, and these correspond to the variables in order: <code>int_var, int_var, float_var, char_var, string_var</code></p>\n"}, {"tags": [], "owner": {"reputation": 203, "user_id": 4725787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705de42a1e38e58dffa0b5b4e0a850f4?s=128&d=identicon&r=PG&f=1", "display_name": "KajolK", "link": "https://stackoverflow.com/users/4725787/kajolk"}, "is_accepted": false, "score": 1, "last_activity_date": 1433329500, "creation_date": 1433329500, "answer_id": 30618301, "question_id": 30618102, "link": "https://stackoverflow.com/questions/30618102/how-many-parameter-in-this-printf-function/30618301#30618301", "title": "How many parameter in this printf() function?", "body": "<p><strong>Please Look:</strong> </p>\n\n<pre><code>printf(\"StudentId: %d CGPA: %f\", id, cgpa); //3 arguments \nprintf(\"Name: %s StudentId: %d CGPA: %f\", name, id, cgpa); // 4 arguments \n</code></pre>\n\n<p>The <code>printf()</code> can takes variable length of arguments. </p>\n"}, {"tags": [], "owner": {"reputation": 758, "user_id": 4906173, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/775dfb6f5f81291f24e55062cb755147?s=128&d=identicon&r=PG&f=1", "display_name": "cruxion effux", "link": "https://stackoverflow.com/users/4906173/cruxion-effux"}, "is_accepted": false, "score": 2, "last_activity_date": 1433329617, "creation_date": 1433329617, "answer_id": 30618351, "question_id": 30618102, "link": "https://stackoverflow.com/questions/30618102/how-many-parameter-in-this-printf-function/30618351#30618351", "title": "How many parameter in this printf() function?", "body": "<p>NO it takes variable number of arguments.</p>\n\n<p><code>int printf(const char *format, ...)</code> takes variable no of arguments</p>\n\n<p>format \u2212 This is the string that contains the text to be written to stdout. It can optionally contain embedded format tags that are replaced by the values specified in subsequent additional arguments and formatted as requested.</p>\n\n<p>The printf function uses its first argument to determine how many arguments will follow and of what types they are. If you don\u2019t use enough arguments or if they are of the wrong type than printf will get confuses, with as a result wrong answers.</p>\n\n<p>And rest of the arguments are the variables for the format tags that you gave in the first argument (as a string).</p>\n\n<p>Pleas read <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_printf.htm\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 51, "user_id": 4967242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56cf39ec80179fd970f1a914e38617ab?s=128&d=identicon&r=PG&f=1", "display_name": "Eme", "link": "https://stackoverflow.com/users/4967242/eme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4803, "favorite_count": 0, "closed_date": 1433329770, "accepted_answer_id": 30618209, "answer_count": 5, "score": 3, "last_activity_date": 1433329617, "creation_date": 1433328972, "last_edit_date": 1433329086, "question_id": 30618102, "link": "https://stackoverflow.com/questions/30618102/how-many-parameter-in-this-printf-function", "closed_reason": "Duplicate", "title": "How many parameter in this printf() function?", "body": "<p>I am very new to programming. Now I am learning <code>C</code>. Please look at this following code snippet -  </p>\n\n<pre><code>printf(\"StudentId: %d CGPA: %f\", id, cgpa); \nprintf(\"Name: %s StudentId: %d CGPA: %f\", name, id, cgpa);   \n</code></pre>\n\n<p>I know function takes argument. So I think, the both the first and second <code>printf()</code> methods takes only two arguments - </p>\n\n<p><strong>1.</strong> first argument inside the double quote that is - <strong><code>\"StudentId: %d CGPA:  %f\"</code></strong> or <strong><code>\"Name: %s StudentId: %d CGPA: %f\"</code></strong><br>\n<strong>2.</strong> and second one is outside the quote  that is - <strong><code>id, cgpa</code></strong> or <strong><code>name, id, cgpa</code></strong>  </p>\n\n<p>Now my question is - am I right while I'm thinking that <code>prinf()</code> methods takes only two arguments no matter how many variable (that is <strong>id, cgpa, name</strong> or even <strong>department</strong>) are placed after the double quotes?  </p>\n\n<p>Or If <code>printf()</code> method takes multiple argument then how it is handled in C?</p>\n"}, {"tags": ["c", "error-handling"], "comments": [{"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433328709, "post_id": 30617973, "comment_id": 49302048, "body": "It&#39;s not so much a question of good/bad practice, more so a matter of taste"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1433328845, "post_id": 30617973, "comment_id": 49302138, "body": "For fatal errors, where you can&#39;t continue, there&#39;s really nothing else you can realistically do."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1433337715, "post_id": 30617973, "comment_id": 49308759, "body": "Malloc returning NULL is far from fatal..."}], "answers": [{"comments": [{"owner": {"reputation": 5345, "user_id": 2768350, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a05c59ff1a1b667e80986ec143fcbf40?s=128&d=identicon&r=PG", "display_name": "jramm", "link": "https://stackoverflow.com/users/2768350/jramm"}, "edited": false, "score": 0, "creation_date": 1433331119, "post_id": 30618180, "comment_id": 49303709, "body": "Thanks. It is a console application which takes a config file as input, so not much room for asking users to redo stuff while it waits :) But yes, I am talking about fatal errors really (or errors where you know that if you continue execution you will produce garbage results etc..)"}, {"owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "reply_to_user": {"reputation": 5345, "user_id": 2768350, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a05c59ff1a1b667e80986ec143fcbf40?s=128&d=identicon&r=PG", "display_name": "jramm", "link": "https://stackoverflow.com/users/2768350/jramm"}, "edited": false, "score": 0, "creation_date": 1433331348, "post_id": 30618180, "comment_id": 49303857, "body": "Well, then it is the only soluting, since you are already reporting back what went wrong :)"}], "tags": [], "owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "is_accepted": false, "score": 1, "last_activity_date": 1433329176, "creation_date": 1433329176, "answer_id": 30618180, "question_id": 30617973, "link": "https://stackoverflow.com/questions/30617973/c-error-handling-best-practice-use-of-exit/30618180#30618180", "title": "C error handling best practice - use of exit()?", "body": "<p>As long as you are not writing a library for other people ;) you are free to do this. It is usually used as a last resource though, because with most errors it is enough to just cancel the action.</p>\n\n<p>Imagine this error: </p>\n\n<ul>\n<li>user clicks <em>open file</em></li>\n<li>file doesn't exist</li>\n<li>program exits</li>\n</ul>\n\n<p>That feels a bit harsh... So in that case it is better to handle the error with a message to the user etc. But since you didn't specify what kind of application, i can't tell you anything about that, but malloc failures usually indicate big trouble, so in that case it's probably best to <em>just exit</em>.</p>\n"}], "owner": {"reputation": 5345, "user_id": 2768350, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a05c59ff1a1b667e80986ec143fcbf40?s=128&d=identicon&r=PG", "display_name": "jramm", "link": "https://stackoverflow.com/users/2768350/jramm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433329176, "creation_date": 1433328628, "question_id": 30617973, "link": "https://stackoverflow.com/questions/30617973/c-error-handling-best-practice-use-of-exit", "title": "C error handling best practice - use of exit()?", "body": "<p>I have a c program which defines the following function:</p>\n\n<pre><code>void logFatal(char *msg, enum errors error)\n{\n    fprintf(stderr, msg);\n    exit(error);\n}\n</code></pre>\n\n<p>In the rest of the program if anything happens that means the program will not function properly if execution continues (typical example being a call to <code>malloc</code> fails to allocate memory), then I call <code>logFatal</code> and the program exits, where-ever it happens to be.</p>\n\n<p>Is this good/bad practice?</p>\n"}, {"tags": ["c", "mmap", "file-descriptor", "netbsd", "gnu99"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433328787, "post_id": 30617972, "comment_id": 49302096, "body": "Where and how do you open the descriptor?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433330981, "post_id": 30617972, "comment_id": 49303601, "body": "Are you sure <code>or</code>ing flags for <code>posix_fadvise()</code> is permissible?"}, {"owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433330988, "post_id": 30617972, "comment_id": 49303607, "body": "@JoachimPileborg : Just read the code I posted<code>int fd=strcatn_open((char *)REQUEST_URI,&quot;index.html&quot;)?:strcatn_open((char *)REQUEST_URI,&quot;index.htm&quot;)?:open(REQUEST_URI, O_RDONLY);</code>where<code>REQUEST_URI</code>is the URL sent by the web browser."}, {"owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433331054, "post_id": 30617972, "comment_id": 49303667, "body": "@EOF : Yes I\u2019m sure of it, and indeed it doesn\u2019t change anything if I comment out<code>posix_fadvise()</code>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1433331199, "post_id": 30617972, "comment_id": 49303768, "body": "Well, you being sure of it isn&#39;t going to make it right: <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/posix_fadvise.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/functions/&hellip;</a>: [...]The advice to be applied to the data is specified by the advice parameter and may be <b>one</b> of the following values:[...] (emphasis mine)."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1433331490, "post_id": 30617972, "comment_id": 49303961, "body": "Where&#39;s the call to <code>stat()</code> or <code>fstat()</code> to fill in <code>struct stat sb</code>?  Also, what happens if <code>open()</code> fails - and returns <code>-1</code>?  I don&#39;t know for sure, but I doubt <code>open()</code> returns <code>0</code> on failure on NetBSD."}], "answers": [{"comments": [{"owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433378465, "post_id": 30633054, "comment_id": 49331792, "body": "This doesn\u2019t solve the problem since my web hosting provider won\u2019t upgrade to NetBSD 7 for some years. Sure! Moreover, I\u2019m not root. It is like <a href=\"http://bugs.gw.com/view.php?id=455\" rel=\"nofollow noreferrer\">bugs.gw.com/view.php?id=455</a>"}, {"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "reply_to_user": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433378691, "post_id": 30633054, "comment_id": 49331855, "body": "I don&#39;t understand the problem.  You now know that this is a &quot;feature&quot; of <code>magic_descriptor()</code> -- deal with it!  Either re-open the file, or dup the descriptor first, or whatever makes sense to you."}, {"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "reply_to_user": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433378763, "post_id": 30633054, "comment_id": 49331876, "body": "or just use the source for the latest release directly"}, {"owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433378857, "post_id": 30633054, "comment_id": 49331905, "body": "Due too <a href=\"http://bugs.gw.com/view.php?id=455\" rel=\"nofollow noreferrer\">bugs.gw.com/view.php?id=455</a> I\u2019ll re-write that part myself. Since I can\u2019t install anything <i>(not to mention /bin/cat and make are not installed)</i>. And only then I will post my answer."}, {"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "reply_to_user": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433379153, "post_id": 30633054, "comment_id": 49331989, "body": "Excuses.  You can still use the original source (once it&#39;s on the github mirror) -- you don&#39;t have to install anything, just build it (static link it) into whatever you are building!"}, {"owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433379203, "post_id": 30633054, "comment_id": 49332004, "body": "How am I supposed to build it without cat and make?"}, {"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "reply_to_user": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433379312, "post_id": 30633054, "comment_id": 49332023, "body": "Where the heck are you compiling what you&#39;re building and testing now?  Just get the file source there and build it and link with it!"}, {"owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433379921, "post_id": 30633054, "comment_id": 49332160, "body": "And that source file require some definition on command line which can only be detected by autotools/configure. It needs re-writing."}, {"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "reply_to_user": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433401270, "post_id": 30633054, "comment_id": 49338912, "body": "Not the &quot;source file&quot; -- the <code>file</code> source.  Check it all out from github on the same machine where you are building your program.  Build <code>file</code> in your home directory and install libmagic in your home directory (<code>.&#47;configure --prefix=$HOME</code>).  Link your program with the static version of libmagic.  There, done.  No need to install anything new on the target machine (other than of course your program)."}, {"owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433413827, "post_id": 30633054, "comment_id": 49346933, "body": "if I try to run configure, it fails because it can&#39;t find the make versions and some essential commands are missing."}, {"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "reply_to_user": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433437331, "post_id": 30633054, "comment_id": 49363170, "body": "Perhaps you should start a new question?  You now know all the answers and work-arounds and alternatives to solve the problem in this question."}, {"owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1433455483, "post_id": 30633054, "comment_id": 49372673, "body": "No this will simply wait the weeks when I\u2019ll rewrite the code to post an answer. Or maybe shorter if someone post a such answer before me."}], "tags": [], "owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "is_accepted": false, "score": 1, "last_activity_date": 1433377884, "creation_date": 1433377884, "answer_id": 30633054, "question_id": 30617972, "link": "https://stackoverflow.com/questions/30617972/libmagic-close-file-descriptor-on-netbsd/30633054#30633054", "title": "libmagic close file descriptor on NetBSD", "body": "<p>As Google could have told you, this was a mis-feature/bug in the original source:</p>\n\n<p><a href=\"http://bugs.gw.com/view.php?id=276\" rel=\"nofollow\">0000276: magic_descriptor() closes underlying file descriptor (fd) when it finishes</a></p>\n\n<p>You should probably treat this as a known behaviour of <code>magic_descriptor()</code> in all releases of <code>file</code> and <code>libmagic</code> prior to 5.18.  I.e. don't expect the descriptor to remain open after that call unless you know you're using a more recent release.</p>\n\n<p>The fixed release of <code>file</code> will be included in NetBSD 7.0 -- gentle prodding on the appropriate NetBSD mailing list asking for a pullup to the current release branch may also have it included in the next release of NetBSD-6.x.</p>\n"}], "owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1433377884, "creation_date": 1433328627, "last_edit_date": 1433337859, "question_id": 30617972, "link": "https://stackoverflow.com/questions/30617972/libmagic-close-file-descriptor-on-netbsd", "title": "libmagic close file descriptor on NetBSD", "body": "<p>I\u2019m writing a FastCGI for providing zlib compression on static content for web providers which doesn\u2019t, and I\u2019m experiencing problems with<code>mmap()</code>on NetBSD.</p>\n\n<pre><code>#include &lt;magic.h&gt;\n#ifndef MADV_DONTFORK\n#define MADV_DONTFORK 0\n#endif\n#ifndef MADV_MERGEABLE\n#define MADV_MERGEABLE 0\n#endif\n#ifndef MADV_HUGEPAGE\n#define MADV_HUGEPAGE 0\n#endif\n#ifndef MADV_DONTDUMP\n#define MADV_DONTDUMP 0\n#endif\n\nstruct stat sb;\nint fd=strcatn_open((char *)REQUEST_URI,\"index.html\")?:strcatn_open((char *)REQUEST_URI,\"index.htm\")?:open(REQUEST_URI, O_RDONLY);\nif (fd==0)\n    HTTP_Return_Code(\"Status: 404 Not Found\");\nif(!strcmp(HTTP_CACHE_CONTROL?:\"ch\",\"no-cache\")) { //avoid to compare with a NULL pointer\n    if(IfModifiedSince)\n        if(tdate_parse((char *)IfModifiedSince)==sb.st_mtime) // UNIX : can compare directly\n            HTTP_Return_Code(\"Status: 304 Not Modified\\nCache-Control: public; max-age=2678400\");\n    if(IfUnmodifiedSince)\n        if(tdate_parse((char *)IfUnmodifiedSince)==sb.st_mtime) // UNIX : can compare directly\n            HTTP_Return_Code(\"Status: 304 Not Modified\\nCache-Control: public; max-age=2678400\");\n}\nstrftime(LastModified, sizeof(char)*30, \"%a, %d %b %Y %H:%M:%S GMT\", gmtime(&amp;(sb.st_mtime)) ); // RFC1123 format : \"%a, %d %b %Y %H:%M:%S GMT\"\nmagic_t mime_type=magic_open(MAGIC_PRESERVE_ATIME|MAGIC_DEVICES|MAGIC_SYMLINK|MAGIC_MIME|MAGIC_COMPRESS);\nmagic_load(mime_type,NULL); // load default magic database\nposix_fadvise(fd,0,sb.st_size,POSIX_FADV_SEQUENTIAL | POSIX_FADV_NOREUSE | POSIX_FADV_WILLNEED);\nsend_HTTP_Headers(\"Content-encoding: gzip\\nContent-Type: %s\\nLast-Modified: %s\\n\",magic_descriptor(mime_type,fd),LastModified);\nmagic_close(mime_type);\n\n//the problem is here\nvoid * HTTP_file=mmap(NULL,sb.st_size,PROT_READ,MAP_SHARED|MAP_FILE,fd,0);\nif(HTTP_file==(void *)-1)\n    err(1,\"errno=%d\",errno);\nuLong maxCompressLen=compressBound(sb.st_size);\nBytef* destbuffer=(Bytef *)malloc((size_t)maxCompressLen);\ncompress2(destbuffer,&amp;maxCompressLen,(const Bytef *)HTTP_file,sb.st_size,Z_BEST_COMPRESSION);\nmunmap(HTTP_file,sb.st_size);\nclose(fd);\nmadvise(destbuffer,(size_t)maxCompressLen,MADV_SEQUENTIAL | MADV_WILLNEED | MADV_DONTFORK | MADV_MERGEABLE | MADV_HUGEPAGE | MADV_DONTDUMP);\nwrite(STDOUT_FILENO, destbuffer, (size_t)maxCompressLen);\n</code></pre>\n\n<p>When I turn the fastCGI functions to printf()/scanf() for debugging I get this on NetBSD :</p>\n\n<pre><code>Content-encoding: gzip\nContent-Type: text/html; charset=utf-8\nLast-Modified: Wed, 27 May 2015 01:15:28 GMT\n</code></pre>\n\n<p>compressor: errno=9: Bad file descriptor\nwhich correspond to EBADF described by the mmap man page as<code>fd is not a valid open file descriptor</code>. Which I don\u2019t understand since the file descriptor seems pretty valid for me since it works with fstat and libmagic.\nWhen I mount the NetBSD filesystem over sshfs and compile/run the code for Linux I got :</p>\n\n<pre><code>Content-encoding: gzip\nContent-Type: text/html; charset=utf-8\nLast-Modified: Wed, 27 May 2015 01:15:28 GMT\n\nx\u06adW_o\ufffd6/\ufffd\ufffd\ufffdd\ufffdI\ufffd8\ufffd\ufffd4\ufffd\ufffd+4-0\ufffd\ufffdE\ufffd,\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd(\u042f\ufffd\ufffd\ufffd\ufffd3\ufffda\ufffd&amp;\ufffd\ufffd\n;R\ufffd#\ufffdv\ufffd\n       \ufffdX\ufffd\ufffd\ufffd\ufffd\ufffd~w\ufffd\ufffd\u03ff\ufffd\ufffd%\ufffd\ufffd\u2592(\ufffd\ufffdwd@\ufffd\ufffd\ufffd,%,\ufffd\u0680\ufffdM\u00e3\ufffd5\ufffdY[\ufffd\ufffd\ufffd\ufffda\ufffdk\ufffd\ufffd4&lt;SyI\ufffdH$\ufffd\ufffd\ufffdB\ufffd\n                                                                     \ufffd=C{iAs\u2592S\ufffdRi\u06d0\ufffd     n\ufffd!\ufffd\ufffd`\ufffd\ufffd\"\na\ufffd\ufffdaT\u00b0\ufffdM\u00f4(\ufffdPEC\ufffd6IZ\ufffdL\ufffdmBR\ufffd\ufffd9\n\n\ufffdcb\ufffdS:u+\"\ufffd\ufffd\ufffdj\ufffd\ufffd0:\ufffdc \ufffd\ufffd\u03ffS\u01a0r\ufffd\ufffdBw\u00d0&lt;^jE\ufffd4\ufffd\ufffd\ufffd?\ufffd\ufffd`\ufffd\ufffd\ufffd\ufffd\ufffdSyL\n                                        \ufffd-\u06fem\ufffd\ufffd\u0318x\ufffd9E\ufffd_\ufffd\u0169\ufffd\\\ufffd\ufffdl\ufffd\ufffd\ufffd\ufffd2V\u591e%\ufffd\ufffd\ufffdf\ufffd\n\ufffd\ufffd F\ufffdk}7A\ufffd\ufffdQ\ufffd\ufffd\ufffd0b                                                        y)\ufffd\ufffd\ufffd\ufffd\ufffd\u2592!\ufffd\ufffd\ufffd\ufffd\u0780\ufffdh\ufffd\u07d7CR\ufffd\u01e2\u2592\ufffd\ufffd\u04a52`\"\ufffdD\ufffd[B\ufffd\ufffd\ufffd\ufffds\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd1p\ufffdajz#R\"-y\ufffd\ufffd\ufffd\na*$\ufffd\ufffdZML0\u2592\u0135\ufffd\ufffd\ufffd\ufffdH\u07f6\ufffd&amp;?\ufffdz\ufffd\ufffd1\ufffd\ufffd     -8y\ufffdUq\\\ufffd\ufffdS\ufffd.\u0389J\ufffd !\ufffd\ufffd3^8.(y_\ufffd\ufffd\ufffd\ufffdG\ufffd?\ufffd\ufffd\ufffd\ufffd\n                                                                     \ufffdM\ufffd\ufffd\ufffd\ufffdL\ufffd\ufffd\ufffd.\ufffd\u0426i\ufffd0zu\ufffd\ufffd\ufffd\ufffdn\ufffdW\ufffdNw\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdn\ufffd\ufffd-\ufffd\ufffdX v^bJZ\ufffd\ufffd\ufffdqc%9\ufffd\ufffd   \ufffd\ufffd\ufffd\ufffd^V\n                                                                                                                                      \ufffd\ufffd\u077e%:e[\n?5Q\u2592\ufffd+\u2592$\ufffd\ufffd=\ufffd9\ufffd*\ufffd&amp;1\ufffd\ufffd\ufffd\ufffd\ufffd0\ufffd\u01ba5\ufffd:\u2592\"\ufffd*q5\ufffd\ufffd4                                                                                                       L\ufffd;D\u0666U46\ufffd\ufffdH\ufffd\ufffdj\ufffdrw\ufffd|\ufffd\ufffdPH6\ufffd\ufffd\ufffdO9\ufffdq\ufffdU5\ufffd\ufffdk\ufffd\ufffd\ufffd\u078f\ufffd\ufffd\ufffd2U6\ufffd\ufffdY\ufffd\ufffd\ufffd\ufffdR    \ufffd\ufffdiS\ufffd\ufffd'\ufffd\ufffdK9)\ufffd\ufffdm\ufffd(\ufffd\ufffdV\ufffd\ufffd\ufffdqf\ufffd\ufffd\ufffd\ufffd9\u0558*\ufffd\ufffd\ufffd\n\ufffd\ufffd\ufffd\ufffdy\ufffd\ufffd\ufffd\ufffd\ufffd@Vq\u024c)\ufffd\ufffd\u0578\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd%\ufffds\ufffd\ufffdWLo\ufffd\ufffdj\ufffd\u01ef.p\ufffd\ufffdnW_l\ufffd\ufffd\ufffdX\nP\ufffdnK\ufffd\ufffdF0\ufffd\ufffd\ufffdm.*\ufffdk$*$~a\ufffd\ufffd\ufffd9W\ufffd&amp;                      \ufffds%\ufffd6\ufffd\u00f6\ufffdA\ufffd\u2592\ufffd\ufffd \ufffd.G\ufffd\ufffdoc\ufffd\ufffd\ufffd\n                            \ufffd(\ufffd\ufffd\ufffd}@\u2592\ufffd\ufffdL\n'K\ufffd\ufffd\ufffd\ufffd\ufffdz\ufffd\ufffd@\ufffdD\ufffd\ufffd\ufffdl6\ufffd$\n         \ufffd0\u2592\ufffdE=@VtB\ufffdFW\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd:\ufffdr\ufffd%E\ufffdM\ufffd\ufffdmw\ufffd)i\ufffd\ufffd\ufffd;_\ufffd^0z   \ufffdAG+RRYgg\u02d6[)\ufffdi\ufffd*BFW\ufffdI\ufffd\ufffd\ufffdv\ufffd\ufffd3m\ufffd\ufffd\ufffd)\ufffd\u99d6\ufffd\ufffdi\ufffdr.)Cz\ufffd\ufffd+\ufffd-\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdQ~\\b\\b%V\u2592u)b\u06e0\ufffd-\ufffd\ufffdN\ufffde4Vj\ufffd\ufffdZ\nS\ufffd`\ufffdVW\ufffd\ufffd\ufffd\ufffds\ufffd(\ufffd.\u05aaz\ufffd\ufffd\ufffd\u0724\ufffd\ufffd\ufffdh\ufffd\ufffd\ufffdWm\ufffd^a0;U9\ufffd;\ufffdK\ufffd`\ufffd\ufffd\ufffdbR\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffda\ufffd\ufffd\ub1d7A\ufffdUpMuc6\n                                                                   0&lt;\ufffdK\ufffd&gt;\ufffd\ufffdQ\ufffd\ufffdpB&lt;\ufffd\ufffdNyyB\ufffd*\ufffd$&lt;\ufffd\u01cd|\ufffd\ufffd'\ufffd7X\u050c\ufffd\ufffdC(\n\ufffd}r\ufffd|N\u2592\u0660\ufffd       0[\ufffd\ufffdN\ufffd$\ufffd\ufffdy\ufffd\ufffd\ufffd!\ufffdy\ufffd\ufffd\ufffd4&lt;&gt;L\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd|\ufffd\u0767NQ[\ufffd:v\ufffd\ufffd\ufffdNg/X\u0636\u2592\ufffd8\n^\ufffdh\ufffds\ufffd\ufffd\ufffdL\ufffd\ufffd\ufffdZ\ufffd\ufffd\ufffd\ufffd\ufffd\u0400\ufffd\ufffd\ufffd\ufffd\ufffd?\ua332\n1\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdR\ufffdJ8\ufffd\ufffd\ufffd.IL\ufffd\ufffdf\ufffd\ufffd\ufffdWv\ufffdN\ufffd\ufffdw\ufffd&amp;c\ufffd\ufffd\ufffd-d\ufffd\ufffd\ufffd\ufffd%&gt;\ufffd_\ufffd/\ufffd\ufffd4R\u00ae\ufffdS\ufffdC6a\ufffd\ufffd-\ufffd1C\ufffd\ufffd\n                                                                   \ufffd\ufffd\ufffd^\ufffdG\ufffdk~q}\ufffd\ufffd\ufffd\u04cd\ufffdV\ufffd@\ufffd Y\ufffd$uo\u2592\u0139f\ufffd4q\ufffd\ufffd\n                                                                                                     \ufffd\u0212\ufffdk\ufffd\ufffd\ufffd\n                                                                                                            Xn\ufffd'&gt;kn\ufffd&gt;[\ufffdWO\ufffd\ufffd\ufffd(P\ufffdl\ufffd[jZ\ufffdR0#\ufffd\n                                                                                                                                         \ufffd&gt;\ufffd\ufffd\u0368\ufffd\u05f8-\ufffd&gt;\ufffd\u01b6\ufffdH)+\ufffd\ufffd\ufffd\ufffdz\ufffdS\ufffd\ufffd\ufffd\ufffdx,\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdp\ufffd\u2592j\ufffd\ufffd\ufffd\u01f9\ufffd\ufffd\ufffd7Rg]\ufffdk~\ufffd\ufffd\ufffdb\ufffd\ufffd\u05af[o\ufffd[\ufffd\ufffd_\ufffd\ufffd\ufffd_\ufffdF^F\n</code></pre>\n\n<p>Which means the same code is working on Linux without any modifications.</p>\n\n<p>Additional informations :</p>\n\n<ul>\n<li>uname -a on NetBSD returns<code>NetBSD odin 6.1.2 NetBSD 6.1.2 (GENERIC) amd64</code></li>\n<li>uname -a on Linux returns<code>Linux localhost.localdomain 3.16.0-rc7-ck2 #1 SMP Fri May 1 13:38:34 CEST 2015 x86_64 GNU/Linux</code></li>\n<li>gcc-4.5.3 is the compiler version on NetBSD</li>\n<li>gcc-4.9.2 is the compiler version on Linux</li>\n<li>both architectures are the same and both compilers use the same generic flags with all optimizations disabled. </li>\n</ul>\n\n<h2>Update</h2>\n\n<p>it seems for an unknown reason<code>magic_descriptor()</code>is closing the file descriptor on NetBSD and indeed the following simple code doesn\u2019t work :</p>\n\n<pre><code>// test case for a libmagic bug. Libmagic is part of NetBSD packages and is used with the file command\n#include &lt;errno.h&gt;\n#include &lt;err.h&gt;\n#include &lt;magic.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n/* gcc test.c -o test\n./test a_regular_file_with read permissions*/\nint main(int argc,char * argv[]) {\n        int fd=open(argv[1],O_RDONLY); // set fd to 8\n        struct stat sb;\n        fstat(fd, &amp;sb);\n\n        magic_t mime_type=magic_open(MAGIC_PRESERVE_ATIME|MAGIC_DEVICES|MAGIC_SYMLINK|MAGIC_MIME|MAGIC_COMPRESS);\n        magic_load(mime_type,NULL); // load default libmagic database\n        printf(\"Content-encoding: gzip\\nContent-Type: %s\\n\\r\\n\",magic_descriptor(mime_type,fd)); // after this fd still ==8 but the file is closed whereas it shouldn\u2019t. And indeed it doesn\u2019t on SUA and Linux distros.\n        //magic_close(mime_type);\n\n        void * HTTP_file=mmap(NULL,sb.st_size,PROT_READ,MAP_SHARED|MAP_FILE,fd,0); // always returns -1\n        if(HTTP_file==(void *)-1)\n                err(1,\"errno=%d\",errno); // errno is equal to 9 which mean the file descriptor is invalid\n        write(STDOUT_FILENO, HTTP_file, sb.st_size);\n}\n</code></pre>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1433328123, "post_id": 30617676, "comment_id": 49301662, "body": "You can access the virtual memory of your own process very easily."}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1433328181, "post_id": 30617676, "comment_id": 49301696, "body": "Edited question to explicitly clarify that it relates to any process."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1433346158, "post_id": 30617676, "comment_id": 49315571, "body": "Programs that act like debuggers can access another process&#39;s memory, but if the I/O is memory mapped, like DMA, then you need to call OS functions to lock memory pages and translate their addresses from virtual to physical addresses."}], "answers": [{"tags": [], "owner": {"reputation": 758, "user_id": 4906173, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/775dfb6f5f81291f24e55062cb755147?s=128&d=identicon&r=PG&f=1", "display_name": "cruxion effux", "link": "https://stackoverflow.com/users/4906173/cruxion-effux"}, "is_accepted": false, "score": 2, "last_activity_date": 1433328759, "creation_date": 1433328759, "answer_id": 30618012, "question_id": 30617676, "link": "https://stackoverflow.com/questions/30617676/entering-programs-internal-memory-area/30618012#30618012", "title": "Entering program&#39;s internal memory area", "body": "<p>A process can be attached to another process in such a way that it has access to that process's memory.</p>\n\n<p>It is used for debugging programs.</p>\n\n<p>A debugger needs to be attached to the process being debugged, and needs to be able to read any memory data, break execution, edit memory data, inject code, etc.</p>\n\n<p>Cheat Engine just re-purposes these debugger functions in order to cheat in games.</p>\n\n<p>Profilers also use this to see who is consuming what resources.</p>\n"}], "owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433328759, "creation_date": 1433327774, "last_edit_date": 1433328165, "question_id": 30617676, "link": "https://stackoverflow.com/questions/30617676/entering-programs-internal-memory-area", "title": "Entering program&#39;s internal memory area", "body": "<p>Is there any way (OS-independent) for accessing an arbitrary process's virtual memory with i/o access?\nAlternatively.. a way to launch such process in shared memory instance.</p>\n\n<p>(Isn't that the way <a href=\"http://www.cheatengine.org/\" rel=\"nofollow\">Cheat Engine</a> works? Some sort of IPC as far as I can tell..)</p>\n"}, {"tags": ["c", "while-loop", "nested-loops"], "comments": [{"owner": {"reputation": 1956, "user_id": 4429015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqxqf.png?s=128&g=1", "display_name": "B001\u16e6", "link": "https://stackoverflow.com/users/4429015/b001%e1%9b%a6"}, "edited": false, "score": 5, "creation_date": 1433327736, "post_id": 30617604, "comment_id": 49301393, "body": "Welcome to SO. Why don&#39;t you just try it yourself? There is no limit for the usage of loops."}, {"owner": {"reputation": 667, "user_id": 3906361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdf387cd03d5d6185ca62d7683d72f21?s=128&d=identicon&r=PG&f=1", "display_name": "aakansha", "link": "https://stackoverflow.com/users/3906361/aakansha"}, "edited": false, "score": 1, "creation_date": 1433328183, "post_id": 30617604, "comment_id": 49301698, "body": "The simple answer is YES.You can test it in Ideone.Its an online compiler and IDE ."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 1956, "user_id": 4429015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqxqf.png?s=128&g=1", "display_name": "B001\u16e6", "link": "https://stackoverflow.com/users/4429015/b001%e1%9b%a6"}, "edited": false, "score": 2, "creation_date": 1433332975, "post_id": 30617604, "comment_id": 49305045, "body": "@bub &quot;Try it yourself&quot; is a dangerous philosophy in C... Besides, saying there&#39;s &quot;no limit&quot; kinda defeats the purpose of the section of the C standard entitled <a href=\"http://www.iso-9899.info/n1570.html#5.2.4.1\" rel=\"nofollow noreferrer\">&quot;5.2.4.1 Translation Limits&quot;</a>, doesn&#39;t it?"}, {"owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "edited": false, "score": 0, "creation_date": 1433345234, "post_id": 30617604, "comment_id": 49314842, "body": "Yes. But be careful with performance!"}, {"owner": {"reputation": 27, "user_id": 4969172, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437452076564400/picture?type=large", "display_name": "casanovasky", "link": "https://stackoverflow.com/users/4969172/casanovasky"}, "edited": false, "score": 0, "creation_date": 1434101947, "post_id": 30617604, "comment_id": 49648325, "body": "Thanks everyone for the help!"}], "answers": [{"comments": [{"owner": {"reputation": 675, "user_id": 3227721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HtyqY.jpg?s=128&g=1", "display_name": "Atafar", "link": "https://stackoverflow.com/users/3227721/atafar"}, "reply_to_user": {"reputation": 3148, "user_id": 4230704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4b67dfe7c6db9b42bdc0b30db55d35?s=128&d=identicon&r=PG", "display_name": "Steve Lillis", "link": "https://stackoverflow.com/users/4230704/steve-lillis"}, "edited": false, "score": 0, "creation_date": 1433336464, "post_id": 30617709, "comment_id": 49307718, "body": "This was meant in an encouraging manner. The author is on the right track. If they try this out on their laptop, they will find it will work."}, {"owner": {"reputation": 27, "user_id": 4969172, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437452076564400/picture?type=large", "display_name": "casanovasky", "link": "https://stackoverflow.com/users/4969172/casanovasky"}, "edited": false, "score": 0, "creation_date": 1434101894, "post_id": 30617709, "comment_id": 49648293, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 675, "user_id": 3227721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HtyqY.jpg?s=128&g=1", "display_name": "Atafar", "link": "https://stackoverflow.com/users/3227721/atafar"}, "is_accepted": false, "score": 2, "last_activity_date": 1433336769, "last_edit_date": 1433336769, "creation_date": 1433327886, "answer_id": 30617709, "question_id": 30617604, "link": "https://stackoverflow.com/questions/30617604/can-i-use-multiple-whiles-within-a-while-loop/30617709#30617709", "title": "Can I use multiple whiles within a while loop?", "body": "<p>Yes, sure you can. Give it a go:-).</p>\n\n<p>An example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n  int i = 0, j = 0;\n\n  while (i &lt; 10) {\n    while (j &lt; i) {\n      printf(\"%d\\n\", j);\n      j++;\n    }\n    i++;\n  }\n  exit(0);\n}\n</code></pre>\n\n<p>It is not a very useful program. Just to illustrate the principle.</p>\n"}, {"comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1433332739, "post_id": 30617866, "comment_id": 49304880, "body": "I can use them <i>however I want</i>, eh? I&#39;m not sure about that... Does that mean that I decide what is valid and isn&#39;t valid in the world of C?"}, {"owner": {"reputation": 2465, "user_id": 4967340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baea9983227bd9906aaa700a01252f31?s=128&d=identicon&r=PG&f=1", "display_name": "BradzTech", "link": "https://stackoverflow.com/users/4967340/bradztech"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1433345045, "post_id": 30617866, "comment_id": 49314694, "body": "Sorry, that was a typo. You can NEST them howver you want."}, {"owner": {"reputation": 27, "user_id": 4969172, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437452076564400/picture?type=large", "display_name": "casanovasky", "link": "https://stackoverflow.com/users/4969172/casanovasky"}, "edited": false, "score": 0, "creation_date": 1434101904, "post_id": 30617866, "comment_id": 49648301, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 2465, "user_id": 4967340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baea9983227bd9906aaa700a01252f31?s=128&d=identicon&r=PG&f=1", "display_name": "BradzTech", "link": "https://stackoverflow.com/users/4967340/bradztech"}, "is_accepted": false, "score": 2, "last_activity_date": 1433344961, "last_edit_date": 1433344961, "creation_date": 1433328313, "answer_id": 30617866, "question_id": 30617604, "link": "https://stackoverflow.com/questions/30617604/can-i-use-multiple-whiles-within-a-while-loop/30617866#30617866", "title": "Can I use multiple whiles within a while loop?", "body": "<p>Yes. Loops in general are highly versatile; you can nest them however you want. However, without getting into multi-threading, only one loop can be executed at a time.</p>\n\n<p>Your code will execute the first sub-loop until it's condition is satisfied, then it will do the second one, then the third one, then if the main loop is still true, it will go back to the first one etc. It will NOT do all three simultaneously.</p>\n"}], "owner": {"reputation": 27, "user_id": 4969172, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437452076564400/picture?type=large", "display_name": "casanovasky", "link": "https://stackoverflow.com/users/4969172/casanovasky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1433344961, "creation_date": 1433327555, "last_edit_date": 1433331792, "question_id": 30617604, "link": "https://stackoverflow.com/questions/30617604/can-i-use-multiple-whiles-within-a-while-loop", "title": "Can I use multiple whiles within a while loop?", "body": "<pre><code>while (...) \n{\n    while (...)  \n    {   ......\n    }\n\n    while (...) \n    {   ......\n    }\n\n    while (...) \n    {   ......\n    }\n}\n</code></pre>\n\n<p>Can I write my code this way?</p>\n\n<p>Can I use multiple <code>while</code>s within a <code>while</code> loop in C language?</p>\n\n<p>(I don't have my laptop with me right now so I can't test it out myself.)</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1433327743, "post_id": 30617595, "comment_id": 49301400, "body": "Just pass the arguments to the method like this: <code>foo(arr,size);</code> Your function needs the following declaration: <code>void foo(int *array, int size);</code>"}, {"owner": {"reputation": 37, "user_id": 4268586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-iBf58ZuLT74/AAAAAAAAAAI/AAAAAAAAAGo/tCXwDHgP8WA/photo.jpg?sz=128", "display_name": "amith s bhat", "link": "https://stackoverflow.com/users/4268586/amith-s-bhat"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1433328518, "post_id": 30617595, "comment_id": 49301905, "body": "It works, but is it possible that i can access the size variable when I do the declaration as in method 1 , with its corresponding prototype declaration ?"}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 1, "creation_date": 1433328644, "post_id": 30617595, "comment_id": 49302001, "body": "Sorry, but I am very familiar with C but I never saw such a function call."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4268586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-iBf58ZuLT74/AAAAAAAAAAI/AAAAAAAAAGo/tCXwDHgP8WA/photo.jpg?sz=128", "display_name": "amith s bhat", "link": "https://stackoverflow.com/users/4268586/amith-s-bhat"}, "edited": false, "score": 0, "creation_date": 1433328750, "post_id": 30617826, "comment_id": 49302074, "body": "Shouldn&#39;t the declaration be : void foo(int (*arr)[], int size);"}, {"owner": {"reputation": 675, "user_id": 3227721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HtyqY.jpg?s=128&g=1", "display_name": "Atafar", "link": "https://stackoverflow.com/users/3227721/atafar"}, "reply_to_user": {"reputation": 37, "user_id": 4268586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-iBf58ZuLT74/AAAAAAAAAAI/AAAAAAAAAGo/tCXwDHgP8WA/photo.jpg?sz=128", "display_name": "amith s bhat", "link": "https://stackoverflow.com/users/4268586/amith-s-bhat"}, "edited": false, "score": 0, "creation_date": 1433333095, "post_id": 30617826, "comment_id": 49305125, "body": "In your question you have <code>int arr[size];</code>. In that case, <code>int arr[]</code> is the correct parameter declaration. Your declaration is &quot;a pointer to an array of int&quot;. (And the <code>argv</code> from the <code>main</code> example is &quot;an array of pointer to char&quot;.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1582007893, "post_id": 30617826, "comment_id": 106617443, "body": "The size IS part of the array object . You can use <code>sizeof</code> to find it."}], "tags": [], "owner": {"reputation": 675, "user_id": 3227721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HtyqY.jpg?s=128&g=1", "display_name": "Atafar", "link": "https://stackoverflow.com/users/3227721/atafar"}, "is_accepted": false, "score": 1, "last_activity_date": 1433328730, "last_edit_date": 1433328730, "creation_date": 1433328243, "answer_id": 30617826, "question_id": 30617595, "link": "https://stackoverflow.com/questions/30617595/passing-array-size-along-with-pointer-in-c/30617826#30617826", "title": "Passing Array Size along with pointer in c", "body": "<p>In C, the size is not part of the array \"object\". Therefore, idiomatic C code passes the size of an array along with the array itself:</p>\n\n<pre><code>foo(arr, size);\n</code></pre>\n\n<p>for function</p>\n\n<pre><code>void foo(int arr[], int size);\n</code></pre>\n\n<p>(in the case of an array of integers).</p>\n\n<p>See for example the <code>main</code> function:</p>\n\n<pre><code>int main(int argc, char *argv[]);\n</code></pre>\n\n<p>(Note the arguments are reversed here.)</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1485899819, "creation_date": 1485899819, "answer_id": 41968232, "question_id": 30617595, "link": "https://stackoverflow.com/questions/30617595/passing-array-size-along-with-pointer-in-c/41968232#41968232", "title": "Passing Array Size along with pointer in c", "body": "<p>3 approaches</p>\n\n<p><strong>Pass array and size.</strong>  (in any order.)  <code>b</code> will convert to the type and address of its first element - this becomes <code>a</code>.  <code>sizeof b/sizeof b[0]</code> will take on the value of 42 - useful to not repeat 42 all over the place.  <code>foo1</code> receives a pointer the the first element of the array and knows the array element count. </p>\n\n<pre><code>void foo1(int *a, size_t n);\nsize_t sz = 42;\nint b[sz];\nfoo1(b, sizeof b/sizeof b[0]);\n</code></pre>\n\n<p><strong>Pass a pointer to an fixed sized array.</strong>  The address of a fixed sized array is passed to <code>foo2()</code>.  <code>foo2()</code> can use <code>(*d)[0]</code> to access the first array element and <code>(*d)[41]</code> for the last element.  <code>foo2()</code> does not have to get receive the array element count, because the array element is known and fixed at 42.</p>\n\n<pre><code>void foo2(int (*d)[42]);\nint e[42];\nfoo2(&amp;e);\nint f[13];\nfoo2(&amp;f);  // invalid\n</code></pre>\n\n<p><strong>Pass the dimensions then a variable-length array.</strong>  VLA is available in C99 and optionally in C11.  Notice that <code>foo3()</code> understands <code>d2</code> in accessing <code>arr[i][j]</code>, but does not know <code>arr</code> outer dimension is <code>d1</code>, even if <code>/* d1 */</code> was replaced with <code>d1</code>.</p>\n\n<pre><code>void foo3(size_t d1, size_t d2, char  arr[/* d1 */][d2]) {\n  char x = 0;\n  for (size_t i=0; i&lt;d1; i++) {\n    for (size_t j=0; j&lt;d2; j++) {\n      arr[i][j] = ++x;\n    }\n  }\n}\nvoid foop(size_t d1, size_t d2, char  arr[/* d1 */][d2]) {\n  printf(\"ptr size:%zu,  sub-array size:%zu, element size:%zu |\", \n      sizeof arr, sizeof arr[0], sizeof arr[0][0]);\n  for (size_t i=0; i&lt;d1; i++) {\n    for (size_t j=0; j&lt;d2; j++) {\n      printf(\" %d\", arr[i][j]);\n    }\n  }\n printf(\"\\n\");\n}\n\nint foo2(int (*arr)[42]) {\n  printf(\"%zu\\n\", sizeof *arr);\n  return 0;\n}\n\n#define SZ(a)  (sizeof(a)/sizeof((a)[0]))\nint main() {\n  char  a[2][3];\n  char  b[4][5];\n  foo3(SZ(a),SZ(a[0]), a);\n  foop(SZ(a),SZ(a[0]), a);\n  foo3(SZ(b),SZ(b[0]), b);\n  foop(SZ(b),SZ(b[0]), b);\n}\n</code></pre>\n\n<p>Sample output</p>\n\n<pre><code>ptr size:4,  sub-array size:3, element size:1 | 1 2 3 4 5 6\nptr size:4,  sub-array size:5, element size:1 | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20\n</code></pre>\n\n<hr>\n\n<p>If a <em>fixed</em> array is needed, the array sizes may be omitted, depending on how the data is passed.</p>\n\n<p>For a variable sized array, the dimensions need to be passed in some fashion.</p>\n\n<p>Arrays may also be passed as a field of a <code>struct/union</code> - not shown.</p>\n"}], "owner": {"reputation": 37, "user_id": 4268586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-iBf58ZuLT74/AAAAAAAAAAI/AAAAAAAAAGo/tCXwDHgP8WA/photo.jpg?sz=128", "display_name": "amith s bhat", "link": "https://stackoverflow.com/users/4268586/amith-s-bhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1582006540, "creation_date": 1433327537, "last_edit_date": 1582006540, "question_id": 30617595, "link": "https://stackoverflow.com/questions/30617595/passing-array-size-along-with-pointer-in-c", "title": "Passing Array Size along with pointer in c", "body": "<p>I have a function <code>foo</code> which processes the elements of an array whose size is user defined.</p>\n\n<p>This function needs two parameters (not necessarily two separate arguments, or so do I think) - a pointer to the array and size of the array. </p>\n\n<p>Are the three methods used below to the call the function valid?</p>\n\n<pre><code>int size;                      // Obtained from user \nint arr[size];    \n\nfoo(int (*arr)[size]);         // Will size be available as a vairable inside foo ?\nfoo(int (*arr)[],size);        \nfoo(int (*arr)[size],size);    // Is the 2nd parameter redundant here ?\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "linux-kernel", "netlink"], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 1431765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f84fba161c6ba714f72577de43316f7?s=128&d=identicon&r=PG&f=1", "display_name": "user1431765", "link": "https://stackoverflow.com/users/1431765/user1431765"}, "is_accepted": true, "score": 2, "last_activity_date": 1434038320, "last_edit_date": 1434038320, "creation_date": 1434034179, "answer_id": 30784167, "question_id": 30617368, "link": "https://stackoverflow.com/questions/30617368/sending-netlink-taskstats-message-using-libnl-3/30784167#30784167", "title": "Sending Netlink Taskstats message using libnl-3", "body": "<p>The code you provided works fine for me, except for a syntax error in line 26. Make sure you are running the program as root. Note that you are creating a listener for exiting tasks, yet reading a single message, which is, as far as I understand, an ACK. Reading from the socket in a while(1) loop shows parsed messages whenever a task exits on CPU 0.</p>\n\n<p>EDIT: In the case where you are getting stats for a single PID, you should use nla_put_u32 instead:</p>\n\n<pre><code>nla_put_u32(msg, TASKSTATS_CMD_ATTR_PID, 583);\n</code></pre>\n\n<p>where 583 is an existing process id.</p>\n"}], "owner": {"reputation": 87, "user_id": 4944916, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e345a24c0b969d19516661850e2edd2f?s=128&d=identicon&r=PG&f=1", "display_name": "bkk", "link": "https://stackoverflow.com/users/4944916/bkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 1, "accepted_answer_id": 30784167, "answer_count": 1, "score": 3, "last_activity_date": 1434038320, "creation_date": 1433326936, "last_edit_date": 1433937060, "question_id": 30617368, "link": "https://stackoverflow.com/questions/30617368/sending-netlink-taskstats-message-using-libnl-3", "title": "Sending Netlink Taskstats message using libnl-3", "body": "<p>I want to read out linux kernel statistics of a single thread using netlink socket and taskstats.</p>\n\n<p>I could get taskstats to work using a python wrapper (<a href=\"https://github.com/facebook/gnlpy\" rel=\"nofollow\">https://github.com/facebook/gnlpy</a>) but I want to do a C implementation.</p>\n\n<p>After setting up the socket, the message parameters and sending, the receiving</p>\n\n<pre><code>nl_recvmsgs_default(sock)\n</code></pre>\n\n<p>always returns an error code -7 (\"Invalid input data or parameter\")  or -12 (\"Object not found\") depending on how I create the message to send.</p>\n\n<p>I checked all method invocations before nl_recvmsgs_default(sock) but dont get any error back. I guess I am missing a part in setting up the message or socket, but dont know what part it is.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;linux/taskstats.h&gt;\n#include &lt;netlink/netlink.h&gt;\n#include &lt;netlink/genl/genl.h&gt;\n#include &lt;netlink/genl/ctrl.h&gt;\n\nint callback_message(struct nl_msg *, void *);\n\nint main(int argc, char ** argv) {\n    struct nl_sock * sock;\n    struct nl_msg * msg;\n    int family;\n\n    sock = nl_socket_alloc();\n\n    // Connect to generic netlink socket on kernel side\n    genl_connect(sock);\n\n    // get the id for the TASKSTATS generic family\n    family = genl_ctrl_resolve(sock, \"TASKSTATS\");\n\n    // Allocate a new netlink message and inherit netlink message header. \n    msg = nlmsg_alloc();\n\n    genlmsg_put(msg, NL_AUTO_PID, NL_AUTO_SEQ, family, 0, 0, TASKSTATS_CMD_GET, TASKSTATS_VERSION))\n\n    //error code: -7 NLE_INVAL \"Invalid input data or parameter\",\n    nla_put_string(msg, TASKSTATS_CMD_ATTR_REGISTER_CPUMASK, \"0\");\n\n    //error code: -12 NLE_OBJ_NOTFOUND \"Obj not found\"\n    //nla_put_string(msg, TASKSTATS_CMD_ATTR_PID, \"583\");\n\n    nl_send_auto(sock, msg);\n\n    nlmsg_free(msg);\n\n    // specify a callback for inbound messages\n    nl_socket_modify_cb(sock, NL_CB_MSG_IN, NL_CB_CUSTOM, callback_message, NULL);\n\n    // gives error code -7 or -12 depending on the two nla_put_string alternatives above\n    printf(\"recv code (0 = success): %d\", nl_recvmsgs_default(sock));\n}\n\nint callback_message(struct nl_msg * nlmsg, void * arg) {\n\n    struct nlmsghdr * nlhdr;\n    struct nlattr * nlattrs[TASKSTATS_TYPE_MAX + 1];\n    struct nlattr * nlattr;\n    struct taskstats * stats;\n    int rem;\n\n    nlhdr = nlmsg_hdr(nlmsg);\n    int answer;\n\n    if ((answer = genlmsg_parse(nlhdr, 0, nlattrs, TASKSTATS_TYPE_MAX, NULL))\n            &lt; 0) {\n        printf(\"error parsing msg\\n\");\n    }\n\n    if ((nlattr = nlattrs[TASKSTATS_TYPE_AGGR_TGID]) || (nlattr =\n            nlattrs[TASKSTATS_TYPE_AGGR_PID]) || (nlattr =\n            nlattrs[TASKSTATS_TYPE_NULL])) {\n        stats = nla_data(nla_next(nla_data(nlattr), &amp;rem));\n\n        printf(\"---\\n\");\n        printf(\"pid: %u\\n\", stats-&gt;ac_pid);\n        printf(\"command: %s\\n\", stats-&gt;ac_comm);\n        printf(\"status: %u\\n\", stats-&gt;ac_exitcode);\n        printf(\"time:\\n\");\n        printf(\"  start: %u\\n\", stats-&gt;ac_btime);\n        printf(\"  elapsed: %llu\\n\", stats-&gt;ac_etime);\n        printf(\"  user: %llu\\n\", stats-&gt;ac_utime);\n        printf(\"  system: %llu\\n\", stats-&gt;ac_stime);\n        printf(\"memory:\\n\");\n        printf(\"  bytetime:\\n\");\n        printf(\"    rss: %llu\\n\", stats-&gt;coremem);\n        printf(\"    vsz: %llu\\n\", stats-&gt;virtmem);\n        printf(\"  peak:\\n\");\n        printf(\"    rss: %llu\\n\", stats-&gt;hiwater_rss);\n        printf(\"    vsz: %llu\\n\", stats-&gt;hiwater_vm);\n        printf(\"io:\\n\");\n        printf(\"  bytes:\\n\");\n        printf(\"    read: %llu\\n\", stats-&gt;read_char);\n        printf(\"    write: %llu\\n\", stats-&gt;write_char);\n        printf(\"  syscalls:\\n\");\n        printf(\"    read: %llu\\n\", stats-&gt;read_syscalls);\n        printf(\"    write: %llu\\n\", stats-&gt;write_syscalls);\n    } else {\n        printf(\"unknown attribute format received\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pcsc"], "comments": [{"owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433327093, "post_id": 30617360, "comment_id": 49300947, "body": "What is your target platform?"}, {"owner": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "reply_to_user": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "edited": false, "score": 0, "creation_date": 1433329926, "post_id": 30617360, "comment_id": 49302882, "body": "my target platform is a linux ubuntu."}], "owner": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433326903, "creation_date": 1433326903, "question_id": 30617360, "link": "https://stackoverflow.com/questions/30617360/get-data-form-a-sim-card-via-a-smart-card-reader", "title": "Get data form a sim card via a smart card reader", "body": "<p>I' trying to get it using a SmartCard reader with the communication protocol PC/SC and CCID.</p>\n\n<p>I send some bytes to the smartcard reader via the function sCardTransmit. The answer I get back is 61 2E. The documentation said that this means some data is available to read. But how can I read out the data with the functions from the library? Does this function will work SCardGetAttrib()? I thought I get the data back with the Transmit function.</p>\n\n<p>Thanks for help,</p>\n\n<p>Florian</p>\n"}, {"tags": ["c", "floating-point", "floating-point-conversion"], "answers": [{"comments": [{"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 3, "creation_date": 1433329860, "post_id": 30618334, "comment_id": 49302840, "body": "The reference to Dragon4 already defines what is meant by &quot;best&quot;. Namely, 1) The original value can be recovered from the output by rounding 2) The output is the shortest possible 3) The output is correctly rounded. See <a href=\"https://lists.nongnu.org/archive/html/gcl-devel/2012-10/pdfkieTlklRzN.pdf\" rel=\"nofollow noreferrer\"><i>How to Print Floating-Point Numbers Accurately</i></a> for more information."}, {"owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1433349079, "post_id": 30618334, "comment_id": 49317444, "body": "&quot;best&quot; criterions as exposed by @Ruslan are perfectly justified in some context, for example if these numbers are going to be used in read-eval-print loops. IMO it&#39;s a must for any language that wants to support such REPL."}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 0, "last_activity_date": 1433329573, "creation_date": 1433329573, "answer_id": 30618334, "question_id": 30617131, "link": "https://stackoverflow.com/questions/30617131/is-there-a-standard-c-way-to-print-floating-point-values-perfectly-a-la-dragon/30618334#30618334", "title": "Is there a standard C way to print floating-point values &quot;perfectly&quot; a la Dragon4?", "body": "<p>There is no such thing as \"best number of decimal places\" because floating point numbers are not stored as decimal numbers. So you need to define what you mean by \"best\". If you want to print the numbers without any possible loss of information C11 gives you the format specifier <code>%a</code> (except for non-normalized floating point numbers where the behavior is unspecified).</p>\n\n<p>The defaults from the C11 standard are 6 digits for <code>%f</code> and <code>%e</code> and for <code>%g</code> it is:</p>\n\n<blockquote>\n  <p>Let P equal the\n  precision if nonzero, 6 if the precision is omitted, or 1 if the precision is zero.\n  Then, if a conversion with style E would have an exponent of X:\n  \u2014 if P > X \u2265 \u22124, the conversion is with style f (or F) and precision\n  P \u2212 (X + 1).\n  \u2014 otherwise, the conversion is with style e (or E) and precision P \u2212 1.</p>\n</blockquote>\n\n<p>If you want to use that algorithm, implement your own function for it. Or hope that glibc have implemented it in the past 5 years. Or just rethink if the performance of printing floating point numbers is really a problem you have.</p>\n"}, {"comments": [{"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1433332421, "post_id": 30619192, "comment_id": 49304627, "body": "@Ruslan I think I had copy-pasted it wrong. Otherwise, I found it by googling \u201cpdf grisu loitsch\u201d"}], "tags": [], "owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "is_accepted": true, "score": 4, "last_activity_date": 1433332355, "last_edit_date": 1433332355, "creation_date": 1433331971, "answer_id": 30619192, "question_id": 30617131, "link": "https://stackoverflow.com/questions/30617131/is-there-a-standard-c-way-to-print-floating-point-values-perfectly-a-la-dragon/30619192#30619192", "title": "Is there a standard C way to print floating-point values &quot;perfectly&quot; a la Dragon4?", "body": "<p><a href=\"http://www.cs.tufts.edu/~nr/cs257/archive/florian-loitsch/printf.pdf\" rel=\"nofollow noreferrer\">This</a> is the actual article. The blog post is referring to the results in section 7 (in other words, \u201cthey\u201d are not comparing anything in the blog post, \u201cthey\u201d are regurgitating the information from the actual article, omitting crucial details):</p>\n\n<p><img src=\"https://i.stack.imgur.com/WWKwt.png\" alt=\"table of results with information\"></p>\n\n<p>Implementations of Dragon4 or Grisu3 can be found in implementations of modern programming languages that specify this \u201cminimal number of decimal digits\u201d fashion (I recommend you avoid calling it \u201cperfect\u201d). Java uses this type of conversion to decimal in some contexts, as does Ruby. C is not one of the languages that specify  \u201cminimal number of decimal digits\u201d conversion to decimal, so there is no reason for a compiler or for a libc to provide an implementation for Dragon4 or Grisu3.</p>\n"}], "owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 2, "accepted_answer_id": 30619192, "answer_count": 2, "score": 6, "last_activity_date": 1433332355, "creation_date": 1433326321, "last_edit_date": 1433326445, "question_id": 30617131, "link": "https://stackoverflow.com/questions/30617131/is-there-a-standard-c-way-to-print-floating-point-values-perfectly-a-la-dragon", "title": "Is there a standard C way to print floating-point values &quot;perfectly&quot; a la Dragon4?", "body": "<p>Reading <a href=\"http://web.archive.org/web/20150330014345/http://www.serpentine.com/blog/2011/06/29/here-be-dragons-advances-in-problems-you-didnt-even-know-you-had/\" rel=\"noreferrer\"><em>Here be dragons: advances in problems you didn\u2019t even know you had</em></a> I've noticed that they compare the new algorithm with the one used in glibc's <code>printf</code>:</p>\n\n<blockquote>\n  <p>Grisu3 is about 5 times faster than the algorithm used by printf in GNU libc</p>\n</blockquote>\n\n<p>But at the same time I've failed to find any format specifier for <code>printf</code> which would automatically find the best number of decimal places to print. All I tried either have some strange defaults like 6 digits after decimal point for <code>%f</code> or 2 after point for <code>%g</code> or 6 after point for <code>%e</code>.</p>\n\n<p>How do I actually make use of that algorithm implementation in glibc, mentioned in the article? Is there really any such implementation in glibc and is it even discussed in any way by the Standard?</p>\n"}, {"tags": ["c", "list", "sorting", "crash"], "comments": [{"owner": {"reputation": 27, "user_id": 2580054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1351688778/picture?type=large", "display_name": "El Mapo Mapo", "link": "https://stackoverflow.com/users/2580054/el-mapo-mapo"}, "edited": false, "score": 0, "creation_date": 1433325888, "post_id": 30616913, "comment_id": 49300060, "body": "Of course, the problem will be function ordinalista...."}, {"owner": {"reputation": 722, "user_id": 2575441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2jUxl.jpg?s=128&g=1", "display_name": "Shane_Yo", "link": "https://stackoverflow.com/users/2575441/shane-yo"}, "edited": false, "score": 0, "creation_date": 1433325970, "post_id": 30616913, "comment_id": 49300109, "body": "p is always not null"}, {"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 0, "creation_date": 1433326688, "post_id": 30616913, "comment_id": 49300646, "body": "A small point, but it would be helpful if you could <a href=\"http://stackoverflow.com/posts/30616913/edit\">edit</a> your question to (a) spread your comments so they are visible without horizontal scrolling and (b) translate your Italian comment to English."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433326739, "post_id": 30616913, "comment_id": 49300688, "body": "<code>scanf(&quot;%d&quot;,&amp;p2-&gt;dato);</code> --&gt; <code>scanf(&quot;%d&quot;,&amp;p-&gt;dato);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "is_accepted": true, "score": 0, "last_activity_date": 1433327344, "creation_date": 1433327344, "answer_id": 30617513, "question_id": 30616913, "link": "https://stackoverflow.com/questions/30616913/crash-while-trying-to-sort-a-list/30617513#30617513", "title": "Crash while trying to sort a list", "body": "<p>If <code>minimo()</code> is called on a sorted list, <code>if(p-&gt;dato &lt; minimo)</code>is never true, so <code>{ minimo = p-&gt;dato; ritorno = p;}</code> is never executed, so <code>ritorno</code> is left uninitialized. Change the function to:</p>\n\n<pre><code>struct elemento *minimo(struct elemento *p){\n       int minimo = p-&gt;dato;\n       struct elemento * ritorno = p;   //this line changed!\n       while(p != NULL){\n\n             if(p-&gt;dato &lt; minimo){ minimo = p-&gt;dato; ritorno = p;}\n\n\n        p= p-&gt;next;       \n       }\n       return(ritorno);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2580054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1351688778/picture?type=large", "display_name": "El Mapo Mapo", "link": "https://stackoverflow.com/users/2580054/el-mapo-mapo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 30617513, "answer_count": 1, "score": 1, "last_activity_date": 1433329155, "creation_date": 1433325753, "last_edit_date": 1433329155, "question_id": 30616913, "link": "https://stackoverflow.com/questions/30616913/crash-while-trying-to-sort-a-list", "title": "Crash while trying to sort a list", "body": "<p>I am learning C, so forgive me for any error. (and do the same for my bad english, since i am not english.)</p>\n\n<p>I have to sort a numerical int list. This is the pseudocode, on how it should work:</p>\n\n<pre><code>/* it takes the minimum of the entire list and put on first position, than it takes the minimum of the entire list but starting from second position, and etc... */\nwhile(list != null){\n    min = minimum(list);\n    swap(min-&gt;dato, list-&gt;dato);\n    list = list-&gt;next;\n}\n</code></pre>\n\n<p>I would know, why if I create a sorted list, the program crash?\nHere, the entire program:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nstruct elemento{\n       int dato;\n       struct elemento *next;\n};\n\nstruct elemento *crealista();\nvoid printlista(struct elemento *);\nstruct elemento *ordinalista(struct elemento *);\nstruct elemento *minimo(struct elemento *);\n\nmain(){\n\n    struct elemento * lista = crealista();\n\n    printf(\"PRIMA: \\n\");\n    printlista(lista);\n    printf(\"DOPO: \\n\");\n    printlista(ordinalista(lista));\n\n    system(\"PAUSE\"); \n\n}\n\nvoid printlista(struct elemento *p){\n\n     printf(\"START-&gt;\");\n     while(p != NULL){\n             printf(\"%d-&gt;\",p-&gt;dato);\n             p = p-&gt;next;\n     }\n     printf(\"NULL \\n\");\n\n}\n\nstruct elemento *minimo(struct elemento *p){\n       int minimo = p-&gt;dato;\n       struct elemento * ritorno;\n       while(p != NULL){\n\n             if(p-&gt;dato &lt; minimo){ minimo = p-&gt;dato; ritorno = p;}\n\n\n        p= p-&gt;next;       \n       }\n       return(ritorno);\n\n}\nstruct elemento *ordinalista(struct elemento *p){\n    bool flag = false;\n    int temp;\n    struct elemento * start = p;\n    struct elemento * min;\n         while(p != NULL){ \n\n              min = minimo(p);\n              temp = p-&gt;dato;\n              p-&gt;dato = min-&gt;dato;\n              min-&gt;dato = temp;\n\n          p=p-&gt;next;\n         }\n\n    return (start);\n}\n\nstruct elemento *crealista(){\n    struct elemento *p,*p2; \n    int i,n;\n    p = (struct elemento *)malloc(sizeof(struct elemento)); //p diventa un puntatore di tipo ELEMENTO, alla porzione di memoria restituita da malloc\n    printf(\"Gimme first dato: \"); scanf(\"%d\",&amp;p-&gt;dato);\n    printf(\"\\nHow many dato do u want?: \"); scanf(\"%d\",&amp;n);\n    if(n&gt;0){\n             p2 = p;\n        for(i=0; i&lt;n; i++){\n              p2-&gt;next = (struct elemento *)malloc(sizeof(struct elemento));\n              p2 = p2-&gt;next;\n              printf(\"\\nGimme %d dato: \",i); scanf(\"%d\",&amp;p2-&gt;dato);\n        }\n        p2-&gt;next = NULL;\n    }else{p-&gt;next = NULL;}\n    return (p); \n}\n</code></pre>\n"}, {"tags": ["c", "testing", "audio", "portaudio"], "comments": [{"owner": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1433325603, "post_id": 30616699, "comment_id": 49299849, "body": "You mean a software that would create sample sounds of some specified frequency, amplitude, phase, shape? Did you try to search on the internet?"}, {"owner": {"reputation": 2025, "user_id": 3753366, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CYKno.jpg?s=128&g=1", "display_name": "filaton", "link": "https://stackoverflow.com/users/3753366/filaton"}, "reply_to_user": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1433326043, "post_id": 30616699, "comment_id": 49300155, "body": "Actually, I mean one software which would be able to send audio to Portaudio and to get this audio back. I can not use an external soundcard as I do not have enough I/Os. I searched on the Internet and found Soundflower but I don&#39;t think it really fits my expectations."}, {"owner": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1433326122, "post_id": 30616699, "comment_id": 49300209, "body": "So, how do you feed data to Portaudio? You call some function, or send data to a socket?"}, {"owner": {"reputation": 2025, "user_id": 3753366, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CYKno.jpg?s=128&g=1", "display_name": "filaton", "link": "https://stackoverflow.com/users/3753366/filaton"}, "reply_to_user": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1433326997, "post_id": 30616699, "comment_id": 49300888, "body": "For now, I use my internal soundcard but I have to increase the number of channels in order to having a 5.1 input, which I can not have physically. Furthermore, working with my internal soundcard does not allow me to properly control input and output signals. I don&#39;t know if my problem makes sense, maybe the solution is really easy but I didn&#39;t find it yet."}, {"owner": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1433327458, "post_id": 30616699, "comment_id": 49301202, "body": "Ok, but how do you feed audio to PortAudio? Via function? Via socket? Or you can only feed data to PortAudio by a soundcard?"}, {"owner": {"reputation": 2025, "user_id": 3753366, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CYKno.jpg?s=128&g=1", "display_name": "filaton", "link": "https://stackoverflow.com/users/3753366/filaton"}, "reply_to_user": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1433327777, "post_id": 30616699, "comment_id": 49301431, "body": "By a soundcard. When initializing Portaudio, it gets the list of the available audio devices and connect to the one we want to process and consume audio data. What I would like is to have a virtual audio device which would be an interface between Portaudio and another audio program on my computer (Audacity for example) to provide custom audio to my program, some kind of redirection/pipe but for audio"}, {"owner": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1433419254, "post_id": 30616699, "comment_id": 49350599, "body": "Well, did you look for any program in the search engine? &quot;sound card emulator&quot; gives a lot of results"}, {"owner": {"reputation": 2025, "user_id": 3753366, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CYKno.jpg?s=128&g=1", "display_name": "filaton", "link": "https://stackoverflow.com/users/3753366/filaton"}, "reply_to_user": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1433421050, "post_id": 30616699, "comment_id": 49351738, "body": "I checked both here and on Google but I can&#39;t find some simple software with basic I/O functionalities. I want something like JACK but easier to set up"}], "owner": {"reputation": 2025, "user_id": 3753366, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CYKno.jpg?s=128&g=1", "display_name": "filaton", "link": "https://stackoverflow.com/users/3753366/filaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446409275, "creation_date": 1433325273, "last_edit_date": 1446409275, "question_id": 30616699, "link": "https://stackoverflow.com/questions/30616699/simulate-soundcard-to-test-audio-program", "title": "Simulate soundcard to test audio program", "body": "<p>I am currently developing an audio application using Portaudio.<br>\nTo test it, I would like to control the input and thus check the output of my application. However, I would love to achieve this only internally.</p>\n\n<p>Do you know of any software able to emulate a soundcard, whose output would be the input of my Portaudio program and whose input would be the output of my Portaudio program?</p>\n"}, {"tags": ["objective-c", "c", "uint8t"], "comments": [{"owner": {"reputation": 2792, "user_id": 3125367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/650027e104822e3cd1be56bb90fa5271?s=128&d=identicon&r=PG&f=1", "display_name": "user3125367", "link": "https://stackoverflow.com/users/3125367/user3125367"}, "edited": false, "score": 0, "creation_date": 1433326147, "post_id": 30616563, "comment_id": 49300227, "body": "Please specify what you want to do: copy them into a single 2d array, or create an array[4] of these array [pointers]. &quot;Add&quot; has too wide meaning here. (Both strategies already answered, btw.)"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 4, "last_activity_date": 1433325330, "creation_date": 1433325330, "answer_id": 30616724, "question_id": 30616563, "link": "https://stackoverflow.com/questions/30616563/array-of-uint8-t-arrays/30616724#30616724", "title": "Array of uint8_t arrays", "body": "<p>The toplevel array should just be an array of pointers:</p>\n\n<pre><code>uint8_t *theArrays[] = { arrayOne,arrayTwo,arrayThree,arrayFour };\n</code></pre>\n\n<p>You will lose information about the lengths of each \"row\", but that's fine.</p>\n\n<p>I don't think you can reference an array in the initializer like in your example and have the elements copied into a larger array automatically.</p>\n"}, {"tags": [], "owner": {"reputation": 3037, "user_id": 4761806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kgo7z.png?s=128&g=1", "display_name": "Noam M", "link": "https://stackoverflow.com/users/4761806/noam-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1433325535, "creation_date": 1433325535, "answer_id": 30616818, "question_id": 30616563, "link": "https://stackoverflow.com/questions/30616563/array-of-uint8-t-arrays/30616818#30616818", "title": "Array of uint8_t arrays", "body": "<p>You are trying to initialize an <strong>uint8_t array</strong> with <strong>pointers to uint8_t</strong>, not <strong>uint8_t</strong> elements.</p>\n\n<p>try this:</p>\n\n<pre><code>uint8_t *theArrays[] = { array1,array2, ... };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1433325615, "creation_date": 1433325615, "answer_id": 30616849, "question_id": 30616563, "link": "https://stackoverflow.com/questions/30616563/array-of-uint8-t-arrays/30616849#30616849", "title": "Array of uint8_t arrays", "body": "<p>You have to copy each array in the result array using standard function <code>memcpy</code> declared in header <code>&lt;string.h&gt;</code>. For example</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n\n//...\n\nuint8_t * arrayPtrs[] = { arrayOne, arrayTwo, arrayThree, arrayFour };\n\nfor ( size_t i = 0; i &lt; sizeof( theArray ) / sizeof( *theArray ); i++ )\n{\n    memcpy( theArray[i], arrayPtrs[i], sizeof( theArray[i] ) );\n}\n</code></pre>\n"}], "owner": {"reputation": 553, "user_id": 4243572, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/75536972446c81f2f35f482049a09acc?s=128&d=identicon&r=PG&f=1", "display_name": "Roo", "link": "https://stackoverflow.com/users/4243572/roo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4188, "favorite_count": 0, "accepted_answer_id": 30616724, "answer_count": 3, "score": 3, "last_activity_date": 1433328067, "creation_date": 1433324935, "last_edit_date": 1433328067, "question_id": 30616563, "link": "https://stackoverflow.com/questions/30616563/array-of-uint8-t-arrays", "title": "Array of uint8_t arrays", "body": "<p>I have four <code>uint8_t</code> arrays:</p>\n\n<pre><code>uint8_t arrayOne[12]   = { 0x00,0x01,0x00,0x00,0x00,0x06,0xFE,0x03,0x01,0xC1,0x00,0x01 };\n\nuint8_t arrayTwo[12]   = { 0x00,0x01,0x00,0x00,0x00,0x06,0xFE,0x03,0x4E,0x2D,0x00,0x0C };\n\nuint8_t arrayThree[12] = { 0x00,0x01,0x00,0x00,0x00,0x06,0xFE,0x03,0x01,0xF3,0x00,0x01 };\n\nuint8_t arrayFour[12]  = { 0x00,0x01,0x00,0x00,0x00,0x06,0xFE,0x03,0x20,0x04,0x00,0x01 };\n</code></pre>\n\n<p>and I want them to add to another array:</p>\n\n<pre><code>uint8_t theArray[4][12] = { arrayOne,arrayTwo,arrayThree,arrayFour };\n</code></pre>\n\n<p>but the values of arrays change when I add them to theArray.</p>\n\n<p><strong>Why?</strong> \n<strong>How could I add them to array properly?</strong> </p>\n"}, {"tags": ["c", "decimal", "octal"], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 10, "last_activity_date": 1433332189, "last_edit_date": 1433332189, "creation_date": 1433323533, "answer_id": 30615990, "question_id": 30615960, "link": "https://stackoverflow.com/questions/30615960/when-displaying-the-value-of-variable-int-a-011-i-get-9-why/30615990#30615990", "title": "When displaying the value of variable &quot;int a = 011&quot;, I get 9. Why?", "body": "<p>A leading <code>0</code>, in an <code>int</code> literal or <code>int</code> constant, represents the <a href=\"https://en.wikipedia.org/wiki/Octal\" rel=\"nofollow\"><em>octal</em></a> value. It is called an octal constant.</p>\n\n<p>Related: <code>C11</code> standard, chapter 6.4.4.1, <em>Integer constants</em>, Paragraph 3,</p>\n\n<blockquote>\n  <p>An octal constant consists of the prefix <code>0</code> optionally followed by a sequence of the digits <code>0</code> through <code>7</code> only.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 1, "creation_date": 1433323783, "post_id": 30616000, "comment_id": 49298548, "body": "I got an integer overflow when I wanted to count the amount of dupes for this question. But on the C tag there are just almost no users, who care about that. (It&#39;s like yesterday: <a href=\"http://stackoverflow.com/a/19652607/3933332\">stackoverflow.com/a/19652607/3933332</a>)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 1, "creation_date": 1433324556, "post_id": 30616000, "comment_id": 49299093, "body": "@Rizier123; I would say I am a lazy guy, yes a lazy guy."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 12, "last_activity_date": 1433324278, "last_edit_date": 1433324278, "creation_date": 1433323559, "answer_id": 30616000, "question_id": 30615960, "link": "https://stackoverflow.com/questions/30615960/when-displaying-the-value-of-variable-int-a-011-i-get-9-why/30616000#30616000", "title": "When displaying the value of variable &quot;int a = 011&quot;, I get 9. Why?", "body": "<p><code>011</code> is an octal value and its decimal equivalent is 9. Preceding integer literal with <code>0</code> indicates octal value.<br>\nUse <code>%o</code> specifier in <code>printf</code> to print the value in octal.</p>\n"}, {"tags": [], "owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "is_accepted": false, "score": 8, "last_activity_date": 1435824580, "last_edit_date": 1435824580, "creation_date": 1433323562, "answer_id": 30616005, "question_id": 30615960, "link": "https://stackoverflow.com/questions/30615960/when-displaying-the-value-of-variable-int-a-011-i-get-9-why/30616005#30616005", "title": "When displaying the value of variable &quot;int a = 011&quot;, I get 9. Why?", "body": "<p>With <code>0</code> at the beginning of of a numeric literal, you specify the octal system. And <code>11</code> in the octal system is <code>1*8 + 1 = 9</code>.</p>\n"}], "owner": {"reputation": 758, "user_id": 4384593, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R13Sg.jpg?s=128&g=1", "display_name": "Ivan Gandacov", "link": "https://stackoverflow.com/users/4384593/ivan-gandacov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3710, "favorite_count": 0, "closed_date": 1433323734, "accepted_answer_id": 30616000, "answer_count": 3, "score": 3, "last_activity_date": 1436504037, "creation_date": 1433323475, "last_edit_date": 1436504037, "question_id": 30615960, "link": "https://stackoverflow.com/questions/30615960/when-displaying-the-value-of-variable-int-a-011-i-get-9-why", "closed_reason": "Duplicate", "title": "When displaying the value of variable &quot;int a = 011&quot;, I get 9. Why?", "body": "<p>With this code snippet:</p>\n\n<pre><code>int a = 011;\nprintf(\"a = %d\", a);\n</code></pre>\n\n<p>Why is the result </p>\n\n<blockquote>\n  <p>a = 9</p>\n</blockquote>\n"}, {"tags": ["c", "linux", "multithreading", "sockets", "context-switch"], "comments": [{"owner": {"reputation": 4496, "user_id": 2876370, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e6f40b83e480344956f34b57bd7b702c?s=128&d=identicon&r=PG", "display_name": "Pavel \u0160imerda", "link": "https://stackoverflow.com/users/2876370/pavel-%c5%a0imerda"}, "reply_to_user": {"reputation": 610, "user_id": 4964928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90267b06c0fe8f738c4269c8b46a708c?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Man", "link": "https://stackoverflow.com/users/4964928/erik-man"}, "edited": false, "score": 0, "creation_date": 1433325098, "post_id": 30615959, "comment_id": 49299463, "body": "@ErikMan That sounds good enough for an answer."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1433325626, "post_id": 30615959, "comment_id": 49299867, "body": "The question here is really <i>why</i> do you have two read-write threads per client? It doesn&#39;t correspond to anything real. The client only has one. I could understand one read thread and one write thread, but two read-write threads simply does not make sense."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1433332004, "post_id": 30615959, "comment_id": 49304317, "body": "^^ what @EJP says.  If you insist on multiplexing different streams into one connection, (and you should not need to - that&#39;s what sockets/ports are for), then you should use one tx thread, one rx thread and a protocol to mux/demux the streams.  You are attempting a really weird thing:("}], "answers": [{"tags": [], "owner": {"reputation": 610, "user_id": 4964928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90267b06c0fe8f738c4269c8b46a708c?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Man", "link": "https://stackoverflow.com/users/4964928/erik-man"}, "is_accepted": true, "score": 0, "last_activity_date": 1433328907, "creation_date": 1433328907, "answer_id": 30618073, "question_id": 30615959, "link": "https://stackoverflow.com/questions/30615959/multi-threaded-socket-context-switch-in-c/30618073#30618073", "title": "Multi threaded socket context switch in c", "body": "<p>The easiest (bad practice, not-optimal) way is to have a mutex that blocks thread 2 to send message B.1 until A.2 has been received.</p>\n\n<p>A better (and more complicated way) would be to have one thread that receives responses and dispatched the messages to correct thread, but then you need a message loop on each thread for communication with the dispatcher.</p>\n"}], "owner": {"reputation": 89, "user_id": 3262393, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6365027ed1f9ecbe3186924f5b057b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3262393/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 1, "accepted_answer_id": 30618073, "answer_count": 1, "score": 1, "last_activity_date": 1433328907, "creation_date": 1433323474, "question_id": 30615959, "link": "https://stackoverflow.com/questions/30615959/multi-threaded-socket-context-switch-in-c", "title": "Multi threaded socket context switch in c", "body": "<p>environment: Linux<br/>\nlanguage: C</p>\n\n<p>If i have server and client processes.<br/>\nserver use socket to communicate with client.</p>\n\n<p>At server process,it has two threads(thread 1,thread 2).<br/>(thread 1 and thread 2 share the same file descriptor to communicate with client).<br/>\nAt client process,it just single thread.</p>\n\n<p>I excepted<br/>server:<br/></p>\n\n<pre><code>thread 1:\nsend message A.1 to client\nrecv message A.2 from client\n\nthread 2:\nsend message B.1 to client\nrecv message B.2 from client\n</code></pre>\n\n<p>but multi-thread it maybe happened context switch</p>\n\n<p>server:</p>\n\n<pre><code>thread 1:\nsend message A.1 to client\n\ncontext switch\n\nthread 2: \nsend message B.1 to client\nrecv message A.2 from client\n\ncontext switch\n\nthread 1:\nrecv message B.2 from client\n</code></pre>\n\n<p>how to avoid thread 2 recv A.2 from client??<br/>\ncan i prevent context switch until thread 1 recv A.2 message?</p>\n"}, {"tags": ["c", "linux", "header", "zlib"], "answers": [{"tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 1, "last_activity_date": 1433472715, "creation_date": 1433472715, "answer_id": 30657612, "question_id": 30615922, "link": "https://stackoverflow.com/questions/30615922/how-to-insert-type-0-block-along-with-data-in-zlib/30657612#30657612", "title": "How to insert type 0 block along with data in zlib", "body": "<p>There is no type 0 allowed in a zlib header.  There is a stored block type in the deflate format used within a zlib stream.  zlib will automatically use stored blocks if they are smaller than the same data compressed.</p>\n"}], "owner": {"reputation": 3662, "user_id": 2346402, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c0e30f814ad681056b998d16e385fd7f?s=128&d=identicon&r=PG", "display_name": "Chinna", "link": "https://stackoverflow.com/users/2346402/chinna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 30657612, "answer_count": 1, "score": -1, "last_activity_date": 1433472715, "creation_date": 1433323364, "question_id": 30615922, "link": "https://stackoverflow.com/questions/30615922/how-to-insert-type-0-block-along-with-data-in-zlib", "title": "How to insert type 0 block along with data in zlib", "body": "<p>I have to insert uncompressed data in between the compressed data bytes. Type 0 header in zlib allows me to do that. But How can i do that ? any clues ?</p>\n"}, {"tags": ["c", "sorting", "linked-list", "bubble-sort"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1433322991, "post_id": 30615735, "comment_id": 49297980, "body": "What about <code>tmp-&gt;right</code> and <code>nextnode-&gt;right-&gt;left</code>?"}, {"owner": {"reputation": 253, "user_id": 4326504, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/424b53930bcee16a3747c89c04e70549?s=128&d=identicon&r=PG&f=1", "display_name": "Zobo", "link": "https://stackoverflow.com/users/4326504/zobo"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433323095, "post_id": 30615735, "comment_id": 49298054, "body": "How should they be assigned?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1433323258, "post_id": 30615735, "comment_id": 49298162, "body": "Consider abstracting the swap to a separate function. Make sure the edge cases (swapping to and away from the start or end of the list) work."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1433323647, "post_id": 30615735, "comment_id": 49298450, "body": "Consider allocating a temporary array, copying the values from the list there, sorting the array using a simple <code>qsort()</code>, and then copying back into the list. No list changes needed, this is often way simpler and easier to get right. It does pay with higher (temporary) memory usage, of course."}, {"owner": {"reputation": 13041, "user_id": 466611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4acb374856006427ab9b84ff57c37371?s=128&d=identicon&r=PG", "display_name": "starrify", "link": "https://stackoverflow.com/users/466611/starrify"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1433323709, "post_id": 30615735, "comment_id": 49298495, "body": "@unwind ..and typically faster :)"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1433323926, "post_id": 30615735, "comment_id": 49298643, "body": "@unwind I think OP have done that as an exercice of manipulation on double-linked list, even though you are correct I don&#39;t think OP&#39;s code is anything made to be &quot;really used&quot;"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433332282, "post_id": 30615735, "comment_id": 49304514, "body": "@Eregrith - I sincerely hope not:)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433332326, "post_id": 30615735, "comment_id": 49304546, "body": "Even when all the bugs are out, it will be slower than Ruby."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433332562, "post_id": 30615735, "comment_id": 49304739, "body": "I&#39;m tempted to closevote this as an attempt to outsource debugging on a complex and essentially flawed data design that no professional/enthusiast developer would ever use:("}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1433856613, "post_id": 30615735, "comment_id": 49523152, "body": "@Zobo Why did you ask the same question anew about the bubble_sort for a double-linked list if you already asked this question here?"}], "answers": [{"tags": [], "owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "is_accepted": false, "score": 1, "last_activity_date": 1433323169, "creation_date": 1433323169, "answer_id": 30615835, "question_id": 30615735, "link": "https://stackoverflow.com/questions/30615735/bubble-sort-double-linked-list/30615835#30615835", "title": "Bubble sort double linked list", "body": "<p>You also need to replace the previous node (<code>tmp</code> in your code but I'd suggest a more explicit name...) <code>right</code> pointer, and the next-next node's left pointer :</p>\n\n<pre><code>tmp &lt;-&gt; node1 &lt;-&gt; node2 &lt;-&gt; nextnext\n</code></pre>\n\n<p>You are on <code>node1</code> and detect you need to swap it with <code>node2</code> :</p>\n\n<ul>\n<li>You need to have <code>tmp</code> -> <code>node1</code>  changed to <code>tmp</code> -> <code>node2</code></li>\n<li>You need to have <code>node2</code> &lt;- <code>nextnext</code> changed to <code>node1</code> &lt;- <code>nextnext</code> as well</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 253, "user_id": 4326504, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/424b53930bcee16a3747c89c04e70549?s=128&d=identicon&r=PG&f=1", "display_name": "Zobo", "link": "https://stackoverflow.com/users/4326504/zobo"}, "edited": false, "score": 0, "creation_date": 1433872381, "post_id": 30615932, "comment_id": 49534570, "body": "I have problem when sorting example data:  Before sort:  <code>Node value: 199  Node value: 100  Node value: 12  Node value: 101</code> After sort I got: <code>Node value: 199  Node value: 12  Node value: 101</code> Where is the bug?"}], "tags": [], "owner": {"reputation": 13041, "user_id": 466611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4acb374856006427ab9b84ff57c37371?s=128&d=identicon&r=PG", "display_name": "starrify", "link": "https://stackoverflow.com/users/466611/starrify"}, "is_accepted": true, "score": 2, "last_activity_date": 1433323384, "creation_date": 1433323384, "answer_id": 30615932, "question_id": 30615735, "link": "https://stackoverflow.com/questions/30615735/bubble-sort-double-linked-list/30615932#30615932", "title": "Bubble sort double linked list", "body": "<p>It's a double-linked list. To swap two nodes, typically 6 pointers need to be updated. Say we have <code>A &lt;-&gt; B &lt;-&gt; C &lt;-&gt; D</code> and you want to swap <code>B</code> and <code>C</code>: you'll need to update <code>right</code> of <code>A</code>, <code>B</code>, and <code>C</code>, and also <code>left</code> of <code>B</code>, <code>C</code>, and <code>D</code>.</p>\n\n<p>Your code is only updating 4 pointers here:</p>\n\n<pre><code>        if(node2-&gt;key &gt; node2-&gt;right-&gt;key)\n        {               \n            nextnode = node2-&gt;right;\n            tmp = node2-&gt;left;\n            node2-&gt;right = nextnode-&gt;right;             \n            node2-&gt;left = nextnode-&gt;left;\n            nextnode-&gt;right = node2;\n            nextnode-&gt;left = tmp;\n        }\n</code></pre>\n\n<p>This shall fix your issue:</p>\n\n<pre><code>        if(node2-&gt;key &gt; node2-&gt;right-&gt;key)\n        {               \n            nextnode = node2-&gt;right;\n            tmp = node2-&gt;left;\n            if (tmp)\n                tmp-&gt;right = nextnode;\n            if (nextnode-&gt;right)\n                nextnode-&gt;right-&gt;left = node2;\n            node2-&gt;right = nextnode-&gt;right;             \n            node2-&gt;left = nextnode-&gt;left;\n            nextnode-&gt;right = node2;\n            nextnode-&gt;left = tmp;\n        }\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 4326504, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/424b53930bcee16a3747c89c04e70549?s=128&d=identicon&r=PG&f=1", "display_name": "Zobo", "link": "https://stackoverflow.com/users/4326504/zobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1741, "favorite_count": 0, "accepted_answer_id": 30615932, "answer_count": 2, "score": 0, "last_activity_date": 1433323384, "creation_date": 1433322908, "question_id": 30615735, "link": "https://stackoverflow.com/questions/30615735/bubble-sort-double-linked-list", "title": "Bubble sort double linked list", "body": "<p>Hello everyone I'm trying to sort my double linked list in C using bubble sort algorithm. Here is my code:</p>\n\n<pre><code>struct node {\n                unsigned char key;\n                unsigned char num;\n                struct node *left;\n                struct node *right;\n            };\n</code></pre>\n\n<p>Here is my sort funcion: </p>\n\n<pre><code>void sort(int count, struct node *t_node)\n{\n    struct node *tmp,*nextnode, *node1, *node2;\n\n    for(node1 = t_node;node1-&gt;right != NULL ;node1 = node1-&gt;right) {\n        for(node2 = node1-&gt;right; node2-&gt;right != NULL; node2 = node2-&gt;right) {\n            if(node2-&gt;key &gt; node2-&gt;right-&gt;key)\n            {               \n                nextnode = node2-&gt;right;\n                tmp = node2-&gt;left;\n                node2-&gt;right = nextnode-&gt;right;             \n                node2-&gt;left = nextnode-&gt;left;\n                nextnode-&gt;right = node2;\n                nextnode-&gt;left = tmp;\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>It works in 80% because for example data: </p>\n\n<pre><code>node1 key=3\nnode2 key=144\nnode3 key=49\nnode4 key=207\n</code></pre>\n\n<p>The result after sort is:</p>\n\n<pre><code>node1 key=3\nnode2 key=144\nnode4 key=207\n</code></pre>\n\n<p>Why my third node disappeared? Where is the problem?</p>\n"}, {"tags": ["c", "coding-style", "static-analysis"], "comments": [{"owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "edited": false, "score": 0, "creation_date": 1433502644, "post_id": 30614971, "comment_id": 49391968, "body": "Are you looking for some <a href=\"http://stackoverflow.com/questions/93260/a-free-tool-to-check-c-c-source-code-against-a-set-of-coding-standards\">coding standards checker</a>?"}, {"owner": {"reputation": 26, "user_id": 4060679, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-919VsfoquYM/AAAAAAAAAAI/AAAAAAAAAD8/tTqmTakLDEY/photo.jpg?sz=128", "display_name": "Gaurav Tripathi", "link": "https://stackoverflow.com/users/4060679/gaurav-tripathi"}, "reply_to_user": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "edited": false, "score": 0, "creation_date": 1433509881, "post_id": 30614971, "comment_id": 49396837, "body": "Yes anol. Actually we have our own custom rule which I want to add and check the c source code according to it and provide warning accordingly."}, {"owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "edited": false, "score": 0, "creation_date": 1433511052, "post_id": 30614971, "comment_id": 49397695, "body": "From the comments in the question I linked to previously, I&#39;m afraid the wording in your question is less likely to attract good answers and might end up being considered as off-topic. Maybe you could follow the advice on the &quot;closed as off-topic&quot; box in <a href=\"http://stackoverflow.com/questions/93260/a-free-tool-to-check-c-c-source-code-against-a-set-of-coding-standards\">this question</a> and try to reformulate a question with a more precise description of the problem. Also, I&#39;d suggest adding tags [c] and [coding-style] instead of [frama-c], since the question is not specific to Frama-C at all."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1433841121, "post_id": 30614971, "comment_id": 49511781, "body": "Perhaps you might customize your <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> with <a href=\"http://gcc-melt.org/\" rel=\"nofollow noreferrer\">MELT</a>, but I am not sure to understand what you call a <i>syntactic rule checker</i> (stricto sensu, every compiler is checking the syntax of the source code it is compiling)"}], "owner": {"reputation": 26, "user_id": 4060679, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-919VsfoquYM/AAAAAAAAAAI/AAAAAAAAAD8/tTqmTakLDEY/photo.jpg?sz=128", "display_name": "Gaurav Tripathi", "link": "https://stackoverflow.com/users/4060679/gaurav-tripathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433840739, "creation_date": 1433320863, "last_edit_date": 1433840739, "question_id": 30614971, "link": "https://stackoverflow.com/questions/30614971/is-there-any-open-source-syntactic-rule-checker-for-c-language", "title": "Is there any open source syntactic rule checker for C language?", "body": "<p>I discovered Frama-c but it mainly focused on semantic rather than syntactic rule checker. \nSo is there any open source syntax checker which can do syntax checking and also customizable as per my rules ?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 8, "creation_date": 1433320723, "post_id": 30614885, "comment_id": 49296371, "body": "<code>S = malloc(10*sizeof(int));  S = NULL;</code> I think you need to review the basics of C programming. You overwrite your variable right away so your <code>malloc</code>&#39;d memory is lost. And with <code>if (S == NULL) S[0] = ...</code> you have yourself a nice boom"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1433320761, "post_id": 30614885, "comment_id": 49296399, "body": "Use a struct: <code>struct ArrayWithExtras { int *data; size_t total; size_t used; };</code>"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 3, "creation_date": 1433321883, "post_id": 30614885, "comment_id": 49297167, "body": "Sorry but this isn&#39;t about &quot;push and pop function&quot;, or &quot;finding the size of the array&quot;. This is &quot;my code isn&#39;t working, why?&quot;, with so many problems tossed together that it becomes unsuited for a Q&amp;A site. Voting to close. Sorry, really, but <a href=\"http://stackoverflow.com/questions/562303\">you need a book</a>."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1433320788, "creation_date": 1433320788, "answer_id": 30614942, "question_id": 30614885, "link": "https://stackoverflow.com/questions/30614885/push-and-pop-function/30614942#30614942", "title": "Push and Pop function", "body": "<p>You first allocate an array of ten integers and assign the pointer to <code>S</code>. You then <em>reassign</em> <code>S</code>, making it point to <code>NULL</code>. That is not a valid pointer you can dereference. Dereferencing a null-pointer leads to <em>undefined behavior</em>.</p>\n\n<p>You need to keep the size of the stack separately, and pass it along to the functions. Or use a structure containing both the pointer and the size.</p>\n"}, {"comments": [{"owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "edited": false, "score": 0, "creation_date": 1433324133, "post_id": 30615815, "comment_id": 49298788, "body": "Point 1 is irrelevant (many coding styles place return type above name), Point 2 is probably not what OP meant (guess he wanted to initialize the first element to <code>NULL</code>), point 3 is not entirely correct, since OP  wants to check <code>S[i]</code> to find the first <code>NULL</code>, but then he also have to check for <code>i &lt; MAX_LENGTH</code> as you suggest."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "edited": false, "score": 0, "creation_date": 1433324559, "post_id": 30615815, "comment_id": 49299098, "body": "@StefanoSanfilippo: While I agree with what you suggested through the comment above about points 1 and 3, but am taken aback by point 2. How would that be possible? after <code>s = NULL;</code> you loose the reference. Did you mean OP was trying somethink like <code>*s = NULL;</code>? even thats horrible!"}, {"owner": {"reputation": 4496, "user_id": 2876370, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e6f40b83e480344956f34b57bd7b702c?s=128&d=identicon&r=PG", "display_name": "Pavel \u0160imerda", "link": "https://stackoverflow.com/users/2876370/pavel-%c5%a0imerda"}, "edited": false, "score": 0, "creation_date": 1433325567, "post_id": 30615815, "comment_id": 49299821, "body": "I may repeat Stefano but... (1) Question was not about code style preference. (2) First suggested command is redundant and doesn&#39;t make sense."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433332969, "post_id": 30615815, "comment_id": 49305039, "body": "^^ it&#39;s totally pointless initializing a var if you are going to load it in the next line."}], "tags": [], "owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "is_accepted": true, "score": 0, "last_activity_date": 1433328776, "last_edit_date": 1433328776, "creation_date": 1433323111, "answer_id": 30615815, "question_id": 30614885, "link": "https://stackoverflow.com/questions/30614885/push-and-pop-function/30615815#30615815", "title": "Push and Pop function", "body": "<p>Firstly, so glad to see that you didn't cast the result of <code>malloc</code>.</p>\n\n<ol>\n<li><p>Your</p>\n\n<pre><code>int  \nmain(int argc, char **argv){\n</code></pre>\n\n<p>Be assured that it doesn't have any side effect on the code behaviour, but as I have seen most of the people doing it this way, improves readability. should be,</p>\n\n<pre><code>int main(int argc, char **argv){  \n</code></pre></li>\n<li><p>This</p>\n\n<pre><code>S = malloc(10*sizeof(int));\nS = NULL;\n</code></pre>\n\n<p>should be  </p>\n\n<pre><code>S = NULL;        \nS = malloc(10*sizeof(int));\n</code></pre></li>\n<li><p>I don't comprehend what you are trying through this:</p>\n\n<pre><code>for(i = 0; S[i]; i++)\n</code></pre>\n\n<p>May be this should be something like,</p>\n\n<pre><code>for(i = 0; i &lt; MAX_LENGTH; i++)  //MAX_LENGTH should be some integer #defined somewhere in the code\n</code></pre></li>\n</ol>\n\n<p>Apart from these obvious mistakes, you can actually think about adding a check to ensure that, in the <code>while</code> loop in the function <code>push()</code> you don't overrun the value of <code>size</code> than what <code>s</code> can accommodate. </p>\n\n<p>Then, instead of doing</p>\n\n<pre><code>if (S == NULL){\n    S[0] = n;\n}\n</code></pre>\n\n<p>in <code>push()</code>, I would have preferred checking if the memory is allocated after <code>malloc</code>. So,</p>\n\n<pre><code>S = malloc(10*sizeof(int));\nif (S == NULL)\n{\n    //Error handling supposed to be done if no memory is allocated\n}\n</code></pre>\n\n<p>This should do what you are looking forward to:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef int data_t;\n\nint top;    \n\nvoid push(data_t,int*);\nint  pop(int*);\n\nint\nmain(int argc, char **argv)\n{\n    int *S = NULL, i;\n    top = -1;\n\n    S = malloc(10*sizeof(int));\n    if(S == NULL)\n    {\n        printf(\"Memory Allocation failed\");\n        //other error handling implementation if any\n    }\n    push(1,S);\n    push(2,S);\n    push(3,S);\n\n    for(i = 0; i &lt;= top; i++){\n        printf(\"%d\\n\",S[i]);\n    }\n\n    printf(\"\\n Popping:\\n\");\n    pop(S);\n\n    for(i = 0; i &lt;= top; i++){\n        printf(\"%d\\n\",S[i]);\n    }\n\n    return 0;\n}\n\nvoid\npush(data_t n,int *S )\n{\n    //Check if Stack is full\n    if (top == 10)\n    {\n        printf(\"Stack Full\");\n        //other implementation\n    }\n    else\n    {\n       ++top;\n       S[top] = n;\n    }\n}\n\nint\npop(int *S)\n{\n    //Check if Stack is empty\n    if (top == -1)\n    {\n        printf(\"Stack Empty\");\n        //other implementation\n    }\n    else\n    {\n       return S[top--];\n    }\n}\n</code></pre>\n\n<p>The code is <strong>untested</strong> as I am travelling.</p>\n"}, {"tags": [], "owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "is_accepted": false, "score": 1, "last_activity_date": 1433344831, "last_edit_date": 1433344831, "creation_date": 1433329943, "answer_id": 30618469, "question_id": 30614885, "link": "https://stackoverflow.com/questions/30614885/push-and-pop-function/30618469#30618469", "title": "Push and Pop function", "body": "<p>I've written the below code on the fly! It seems to run good! It implements a stack management with stack overflow/underflow controls.</p>\n\n<p>The <code>main</code> contains code to demonstrate the use of all the stack functions:</p>\n\n<ul>\n<li><code>int initStack(StackType * stack, size_t numOfElement);</code></li>\n<li><code>int freeStack(StackType * stack);</code></li>\n<li><code>int push(StackType * stack, int value);</code></li>\n<li><code>int mayPush(StackType *stack);</code></li>\n<li><code>int pop(StackType * stack, int * value);</code></li>\n<li><code>int pop2(StackType * stack);</code></li>\n<li><code>int mayPop(StackType *stack);</code></li>\n<li><code>StackError getError(StackType * stack);</code></li>\n</ul>\n\n<p>The code uses the following basic stack operations:</p>\n\n<ul>\n<li>stack init: sp=\"stack dimension\".</li>\n<li>push: stack[--sp]=value;</li>\n<li>pop: stack[sp++]=value;</li>\n<li>Stack overflow: (sp==0) [when we try to push a value]</li>\n<li>Stack underflow: (sp==\"stack dimension\") [when we try to pop a value]</li>\n</ul>\n\n<p>The code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;malloc.h&gt;\n\ntypedef enum {\n    NO_ERROR,\n    MEMORY_ERROR,\n    STACK_OVERFLOW,\n    STACK_UNDERFLOW\n} StackError;\n\ntypedef struct {\n    int * stack;\n    size_t numOfElem;\n    size_t sp;     //stack pointer\n    StackError err;\n} StackType;\n\nint initStack(StackType * stack, size_t numOfElement);\nint freeStack(StackType * stack);\n\nint push(StackType * stack, int value);\nint mayPush(StackType *stack);\n\nint pop(StackType * stack, int * value);\nint pop2(StackType * stack);\nint mayPop(StackType *stack);\n\nStackError getError(StackType * stack);\n\nint initStack(StackType * stack, size_t numOfElement)\n{\n    if ( (stack-&gt;stack=malloc(sizeof(*stack-&gt;stack)*numOfElement))==NULL ) {\n        stack-&gt;err=MEMORY_ERROR;\n        return stack-&gt;err;\n    }\n\n    stack-&gt;err=NO_ERROR;\n\n    stack-&gt;numOfElem=numOfElement;\n    stack-&gt;sp=numOfElement;       //The stack is void!\n\n    return stack-&gt;err;\n}\n\nint freeStack(StackType * stack)\n{\n    if (stack-&gt;stack==NULL){\n        stack-&gt;err=MEMORY_ERROR;\n        return stack-&gt;err;\n    }\n\n    stack-&gt;err=NO_ERROR;\n    free(stack-&gt;stack);\n    stack-&gt;stack=NULL;\n\n    return stack-&gt;err;\n}\n\nint push(StackType * stack, int value)\n{\n    if (stack-&gt;stack==NULL) {\n        stack-&gt;err=MEMORY_ERROR;\n        return stack-&gt;err;\n    }\n\n    if (!stack-&gt;sp) {\n        stack-&gt;err=STACK_OVERFLOW;\n        return stack-&gt;err;\n    }\n\n    stack-&gt;err=NO_ERROR;\n    stack-&gt;stack[--stack-&gt;sp]=value;\n\n    return stack-&gt;err;\n}\n\nint pop(StackType * stack, int * value)\n{\n    if (stack-&gt;stack==NULL) {\n        stack-&gt;err=MEMORY_ERROR;\n        return stack-&gt;err;\n    }\n\n    if (stack-&gt;sp&gt;=stack-&gt;numOfElem) {\n        stack-&gt;err=STACK_UNDERFLOW;\n        return stack-&gt;err;\n    }\n\n    stack-&gt;err=NO_ERROR;\n    *value=stack-&gt;stack[stack-&gt;sp++];\n\n    return stack-&gt;err;\n}\n\nint pop2(StackType * stack)\n{\n    int value;\n\n    pop(stack,&amp;value);\n\n    return value;\n}\n\nint mayPush(StackType *stack)\n{\n    return (stack-&gt;stack!=NULL &amp;&amp; stack-&gt;sp&gt;0)?1:0;\n}\n\nint mayPop(StackType *stack)\n{\n    return (stack-&gt;stack!=NULL &amp;&amp; stack-&gt;sp&lt;stack-&gt;numOfElem)?1:0;\n}\n\nStackError getError(StackType * stack)\n{\n    return stack-&gt;err;\n}\n\nint main(void)\n{\n    StackType stack;\n    int res,i,j;\n    size_t max=20;\n\n    if ( (res=initStack(&amp;stack, max))!=NO_ERROR ) {\n        printf(\"Error: %d\\n\",res);\n        return res;\n    }\n\n    //Fill the stack;\n    printf(\"Pushing: \");\n    i=0;\n    while(mayPush(&amp;stack)) {\n        push(&amp;stack,++i);\n        printf(\"%d \",i);\n    }\n    puts(\"\");\n\n    //Try to push another element into the stack\n    res=push(&amp;stack,i);\n    if (res!=NO_ERROR) {\n        printf(\"Push error: %d\\n\",res);\n    }\n\n    //Read all the stack\n    printf(\"Popping: \");\n    while(mayPop(&amp;stack)) {\n        printf(\"%d \",pop2(&amp;stack));\n    }\n    puts(\"\");\n\n    //Try to pop another element into the stack form 1\n    res=pop(&amp;stack,&amp;i);\n    if (res!=NO_ERROR) {\n        printf(\"Pop error: %d\\n\",res);\n    }\n\n    //Try to pop another element into the stack form 2\n    i=pop2(&amp;stack);\n    res=getError(&amp;stack);\n    if (res!=NO_ERROR) {\n        printf(\"Pop error: %d\\n\",res);\n    }\n\n    //Fill an half of the stack\n    printf(\"Pushing: \");\n    for(i=1;i&lt;=(int)max/2;i++) {\n        push(&amp;stack,i);\n        printf(\"%d \",i);\n    }\n    puts(\"\");\n\n    //Get some value from the stack\n    printf(\"Popping: \");\n    for(i=1;i&lt;=(int)max/4;i++) {\n        printf(\"%d \",pop2(&amp;stack));\n    }\n    puts(\"\");\n\n    //Put some value in the stack (also generates errors)\n    for (j=0;j&lt;3;j++) {\n        printf(\"Pushing: \");\n        for(i=1;i&lt;=(int)max/3;i++) {\n            printf(\"%d \",i*3+j);\n            if ( (res=push(&amp;stack,i*3+j))!=NO_ERROR ) {\n                printf(\"Push error: %d\\n\",res);\n            }\n        }\n        puts(\"\");\n    }\n\n    //Get some value from the stack (also generates errors)\n    printf(\"Popping: \");\n    for(i=0;i&lt;(int)max+2;i++) {\n        if ( (res=pop(&amp;stack,&amp;j))!=NO_ERROR ) {\n            printf(\"\\nPop error: %d\",res);\n        } else {\n            printf(\"%d \",j);\n        }\n    }\n    puts(\"\");\n\n    puts(\"Deallocating the stack!\");\n    freeStack(&amp;stack);\n    printf(\"Pushing: \");\n    if ( (res=push(&amp;stack,415))!=NO_ERROR ) {\n        printf(\"Push error: %d\\n\",res);\n    }\n\n    puts(\"Re-Deallocating the stack!\");\n    if ( (freeStack(&amp;stack))!=NO_ERROR ) {\n        printf(\"freeStack Error: %d\\n\",res);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 773, "user_id": 4774835, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eff1b03a448cbb4b48512da5d87c6f54?s=128&d=identicon&r=PG&f=1", "display_name": "Kyuu", "link": "https://stackoverflow.com/users/4774835/kyuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2226, "favorite_count": 0, "closed_date": 1566652967, "accepted_answer_id": 30615815, "answer_count": 3, "score": -5, "last_activity_date": 1567369398, "creation_date": 1433320598, "last_edit_date": 1567369398, "question_id": 30614885, "link": "https://stackoverflow.com/questions/30614885/push-and-pop-function", "closed_reason": "Needs more focus", "title": "Push and Pop function", "body": "<p>Im trying to replicate the push and pop functions using integers and an int array. However Im having trouble with finding the size of the array in the push function. How would I find the size or 'push' a new value into the array</p>\n\n<pre><code>typedef int data_t;\nint\nmain(int argc, char **argv){\nint *S, i;\n\n    S = malloc(10*sizeof(int));\n    S = NULL;\n    push(1,S);\n    push(3,S);\n\n    for(i = 0; S[i]; i++){\n        printf(\"%d\\n\",S[i]);\n        }\n    return 0;\n}\n\nvoid\npush(data_t n,int *S ){\n    int size = 0, i = 0;\n\n    if (S == NULL){\n        S[0] = n;\n    }\n    else{\n        while(S[i] != NULL){\n            size++;\n            i++;\n        }\n        S[size] = n;\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1433319955, "post_id": 30614648, "comment_id": 49295882, "body": "Pointer. It&#39;s all about pointers here. :-)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433321507, "post_id": 30614648, "comment_id": 49296916, "body": "That struct is buggy. Since this is obviously a register map (for a RTC), it needs to be fixed into <code>((volatile RTC_TypeDef *) RTC_BASE)</code>, otherwise all code using it may contain random bugs. Also it is pretty confusing to use pointer arithmetic here, as there is no reason to. It is better to use <code>(*(volatile RTC_TypeDef *) RTC_BASE)</code> so that the code using that struct will be less confusing."}, {"owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433322417, "post_id": 30614648, "comment_id": 49297576, "body": "What &quot;pointer arithmetic&quot; @Lundin? RTC is defined as a pointer to struct, so it can be dereferenced in code like <code>RTC-&gt;CTRL = 1; RTC-&gt;IFS=2;</code> etc. Makes sense to me."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "edited": false, "score": 0, "creation_date": 1433325975, "post_id": 30614648, "comment_id": 49300114, "body": "@GrahamS It wasn&#39;t really clear by my comment, but I wanted to prevent ugly things like <code>RTC[3] = ...</code> by not treating RTC as a pointer. And yes, there are people writing such code with &quot;magic numbers&quot; when they are writing hardware peripheral drivers. (I&#39;m currently working with maintenance of such a program.) Anyway, the most important thing here is volatile: without it the code might crash &amp; burn."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1433320030, "creation_date": 1433320030, "answer_id": 30614692, "question_id": 30614648, "link": "https://stackoverflow.com/questions/30614648/peripheral-definition/30614692#30614692", "title": "Peripheral definition", "body": "<blockquote>\n  <p>Why are the brackets so unusual? What does the * mean? Pointer or\n  multiply operator ?</p>\n</blockquote>\n\n<p><code>*</code> here is a pointer not multiplication operator.</p>\n\n<p>There is nothing unusual here about the macro. It is just type casting the address to be of type <code>struct RTC_TypeDef</code></p>\n"}, {"comments": [{"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1442992433, "post_id": 30614941, "comment_id": 53307643, "body": "<i>... The following line means every time you write RTC_BASE, the compiler will replace that line with (0x40080000UL)</i>. Wrong, not the entire line, but just the <code>RTC_BASE</code>."}], "tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": 0, "last_activity_date": 1433322432, "last_edit_date": 1433322432, "creation_date": 1433320785, "answer_id": 30614941, "question_id": 30614648, "link": "https://stackoverflow.com/questions/30614648/peripheral-definition/30614941#30614941", "title": "Peripheral definition", "body": "<p>The structure definition is pretty straight forward, variables are encapsulated in a structure. That structure can then be referenced as <code>RTC_TypeDef</code> because you use <code>typedef</code>.  </p>\n\n<pre><code>typedef struct\n{\n  __IO uint32_t CTRL;     /**&lt; Control Register  */\n\n  __IO uint32_t CNT;      /**&lt; Counter Value Register  */\n  __IO uint32_t COMP0;    /**&lt; Compare Value Register 0  */\n  __IO uint32_t COMP1;    /**&lt; Compare Value Register 1  */\n  __I uint32_t  IF;       /**&lt; Interrupt Flag Register  */\n  __IO uint32_t IFS;      /**&lt; Interrupt Flag Set Register  */\n  __IO uint32_t IFC;      /**&lt; Interrupt Flag Clear Register  */\n  __IO uint32_t IEN;      /**&lt; Interrupt Enable Register  */\n\n  __IO uint32_t FREEZE;   /**&lt; Freeze Register  */\n  __I uint32_t  SYNCBUSY; /**&lt; Synchronization Busy Register  */\n} RTC_TypeDef;            /** @} */\n</code></pre>\n\n<p>The following line means every time you write <code>RTC_BASE</code>, the compiler will replace that line with <code>(0x40080000UL)</code></p>\n\n<pre><code>#define RTC_BASE          (0x40080000UL)\n</code></pre>\n\n<p>And finally, the following line can be broken into two parts:</p>\n\n<pre><code>(RTB_TypeDef *)RTC_BASE\n</code></pre>\n\n<p>Which means <code>(RTB_TypeDef *)(0x40080000UL)</code> - basically tells the compiler to treat memory address <code>0x40080000UL</code> as a pointer to <code>RTB_TypeDef</code></p>\n\n<p>and the extra parenthesis are there to denote a single variable as a compund expression RTC.\nFrom that point on, whenever the compiler sees <code>RTC</code>, it will replace it with <code>(RTB_TypeDef *)(0x40080000UL)</code>, basically a convenient way to mark the beginning of this structure in memory</p>\n"}, {"tags": [], "owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "is_accepted": false, "score": 0, "last_activity_date": 1433321243, "creation_date": 1433321243, "answer_id": 30615104, "question_id": 30614648, "link": "https://stackoverflow.com/questions/30614648/peripheral-definition/30615104#30615104", "title": "Peripheral definition", "body": "<p>Whenever you will encounter a single or multiple <code>*</code> after a datatype (even a user defined datatype), its a pointer.</p>\n\n<p>What you are calling a constructions:</p>\n\n<pre><code>typedef struct\n{\n    __IO uint32_t CTRL;     /**&lt; Control Register  */\n\n    __IO uint32_t CNT;      /**&lt; Counter Value Register  */\n    __IO uint32_t COMP0;    /**&lt; Compare Value Register 0  */\n    __IO uint32_t COMP1;    /**&lt; Compare Value Register 1  */\n    __I uint32_t  IF;       /**&lt; Interrupt Flag Register  */\n    __IO uint32_t IFS;      /**&lt; Interrupt Flag Set Register  */\n    __IO uint32_t IFC;      /**&lt; Interrupt Flag Clear Register  */\n    __IO uint32_t IEN;      /**&lt; Interrupt Enable Register  */\n\n    __IO uint32_t FREEZE;   /**&lt; Freeze Register  */\n    __I uint32_t  SYNCBUSY; /**&lt; Synchronization Busy Register  */\n} RTC_TypeDef;\n</code></pre>\n\n<p>is a structure and programmatically called a <code>struct</code>, a user-defined datatype. <code>struct</code> is keyword in C. And so is <code>typedef</code>. To keep it simple as of now, I'll say, <code>typedef</code> here is specifically used to have the convenience to write <code>RTC_TypeDef;</code> instead of having the need to write <code>struct stRTC</code> for example.</p>\n\n<p><code>RTC_BASE</code> is a macro. So, before compilation pre-processor will replace <code>RTC_BASE</code> with the value <code>(0x40080000UL)</code>, again, it is for convenience and readability.</p>\n\n<p>This last line: </p>\n\n<pre><code>#define RTC          ((RTC_TypeDef *) RTC_BASE)\n</code></pre>\n\n<p>also is a macro defined. Which is nothing but a pointer of the <code>RTC_Typedef</code> type, pointing to whatever is located at the address <code>(0x40080000UL)</code>\nSo, before the compilation the pre-processor will replace all instances of <code>RTC</code> with <code>((RTC_TypeDef *)0x40080000UL)</code>. \nIf you increment <code>RTC</code> pointer, it will increment by <code>sizeof(RTC_Typedef)</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4968592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d920380352da61bc9d5f191ffdeda679?s=128&d=identicon&r=PG&f=1", "display_name": "Herman12", "link": "https://stackoverflow.com/users/4968592/herman12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1433322540, "creation_date": 1433319904, "last_edit_date": 1433322540, "question_id": 30614648, "link": "https://stackoverflow.com/questions/30614648/peripheral-definition", "title": "Peripheral definition", "body": "<p>Could someone please explain the following construction to a beginner:</p>\n\n<pre><code>typedef struct\n{\n  __IO uint32_t CTRL;     /**&lt; Control Register               */\n  __IO uint32_t CNT;      /**&lt; Counter Value Register         */\n  __IO uint32_t COMP0;    /**&lt; Compare Value Register 0       */\n  __IO uint32_t COMP1;    /**&lt; Compare Value Register 1       */\n  __I uint32_t  IF;       /**&lt; Interrupt Flag Register        */\n  __IO uint32_t IFS;      /**&lt; Interrupt Flag Set Register    */\n  __IO uint32_t IFC;      /**&lt; Interrupt Flag Clear Register  */\n  __IO uint32_t IEN;      /**&lt; Interrupt Enable Register      */\n  __IO uint32_t FREEZE;   /**&lt; Freeze Register                */\n  __I uint32_t  SYNCBUSY; /**&lt; Synchronization Busy Register  */\n} RTC_TypeDef;    \n\n\n#define RTC_BASE     (0x40080000UL)\n#define RTC          ((RTC_TypeDef *) RTC_BASE)    \n</code></pre>\n\n<p>especially the last line</p>\n\n<p>Why are the brackets so unusual? What does the * mean? Pointer or multiply operator ?</p>\n\n<p>Thanks</p>\n"}]