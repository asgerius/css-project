[{"tags": ["c", "sorting", "compile-time"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1427327924, "post_id": 29268723, "comment_id": 46738840, "body": "I call it a pre-preprocessor. Basically you write a parser that modifies the source code before the compiler is invoked. Either that, or just put stuff in order manually."}, {"owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "edited": false, "score": 0, "creation_date": 1427327944, "post_id": 29268723, "comment_id": 46738846, "body": "I think you could do it in C++14 using variadic templates. But in plain C, i don&#39;t think so."}, {"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 1, "creation_date": 1427328285, "post_id": 29268723, "comment_id": 46738952, "body": "You can do this in C having a different macro function to get each of the <code>n</code> elements at each of the <code>i</code> positions, using the ?: syntax. But I don&#39;t think it will evaluate at compile time with strings though. <code>int</code> should get evaluated but there is no way to actually force the compiler to without const_expr."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1427328492, "post_id": 29268723, "comment_id": 46739011, "body": "If <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/preprocessor/doc/index.html\" rel=\"nofollow noreferrer\">Boost.Preprocessor</a> can&#39;t do it, it probably is unlikely that it can be done."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1427328654, "post_id": 29268723, "comment_id": 46739062, "body": "<code>Having to call SORT_5 to sort 5 elements is OK</code> Then you can write <code>SORT_5()</code> manually: you can do it with completely unreadable <code>? :</code> chain. (Not exactly preprocessor sorting, but it probably will be evaluated at compile time if arguments are constant.) Or write a program to generate <code>SORT_2..50()</code> for you."}, {"owner": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 0, "creation_date": 1427328935, "post_id": 29268723, "comment_id": 46739146, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2629219/c-gcc-is-it-possible-to-sort-arrays-using-preprocessor\">C/GCC - Is it possible to sort arrays using preprocessor?</a>"}, {"owner": {"reputation": 1562, "user_id": 4098326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a222a6f6508bea1c3b2f97cb0234be0?s=128&d=identicon&r=PG", "display_name": "user4098326", "link": "https://stackoverflow.com/users/4098326/user4098326"}, "reply_to_user": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 0, "creation_date": 1427329795, "post_id": 29268723, "comment_id": 46739377, "body": "@LieRyan Not really a duplicate, because this question doesn&#39;t specify element type."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1427657334, "post_id": 29268723, "comment_id": 46856394, "body": "If you already know the data, the best option is to sort it beforehand as also specified in the related question."}], "answers": [{"comments": [{"owner": {"reputation": 813, "user_id": 426736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edddecf45c7c30f5540f8fa7826bc538?s=128&d=identicon&r=PG", "display_name": "Tomek Sowi\u0144ski", "link": "https://stackoverflow.com/users/426736/tomek-sowi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1427358166, "post_id": 29269085, "comment_id": 46747002, "body": "Nice, I think one could even automate writing the expression for getting the nth element. And it could work for small strings with multichar literals (and all the portability problems they entail)."}, {"owner": {"reputation": 1705, "user_id": 1666959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f4f93101d451519e405ac62a0aaecc?s=128&d=identicon&r=PG", "display_name": "user1666959", "link": "https://stackoverflow.com/users/1666959/user1666959"}, "edited": false, "score": 0, "creation_date": 1427618399, "post_id": 29269085, "comment_id": 46844374, "body": "How many times is it acceptable to downvote a horrible, fragile, possibly disasterous  answer?  Consider: int i=0; int y[3] = {6, 2, 3}; int z[3] = { SORT_3(y[i++], y[i++], y[i++]) };. What do you get? At a bare minimum, put parenthesis around the uses of arguments in a macro, parenthesise your logical operators (&amp;&amp; and || properly) and turn -Wall on."}, {"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1427622955, "post_id": 29269085, "comment_id": 46845380, "body": "I added parenthesis around <code>(a)</code> etc because this is a required practice for durable macros, although keep in mind this is obviously a toy example for demonstration to begin with. Also, parenthesizing &amp;&amp; and || is a waste of time and almost never helps the code be readable. Would you write algebra that read <code>(3*x) + (4*y)</code> ?"}], "tags": [], "owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "is_accepted": true, "score": 7, "last_activity_date": 1427622770, "last_edit_date": 1427622770, "creation_date": 1427329959, "answer_id": 29269085, "question_id": 29268723, "link": "https://stackoverflow.com/questions/29268723/can-c-sort-at-compile-time/29269085#29269085", "title": "Can C sort at compile time?", "body": "<p>Here is a macro approach:</p>\n\n<pre><code>#define GET_1_of_3(a, b, c) ((a) &lt; (b) ? ((c) &lt; (a) ? (c) : (a)) : ((c) &lt; (b) ? (c) : (b)))\n#define GET_2_of_3(a, b, c) ((c) &gt; (a) &amp;&amp; (c) &lt; (b) || (c) &lt; (a) &amp;&amp; (c) &gt; (b) ? (c) : ((b) &gt; (a) &amp;&amp; (b) &lt; (c) || (b) &lt; (a) &amp;&amp; (b) &gt; (c) ? (b) : (a)))\n#define GET_3_of_3(a, b, c) ((a) &gt; (b) ? ((c) &gt; (a) ? (c) : (a)) : ((c) &gt; (b) ? (c) : (b)))\n#define SORT_3(a, b, c) GET_1_of_3(a, b, c),GET_2_of_3(a, b, c),GET_3_of_3(a, b, c)\n\nvoid main(){\n    int x[3] = { SORT_3(6,2,3) };\n    printf(\"%d, %d, %d\", x[0], x[1], x[2]);\n}\n</code></pre>\n\n<p>This works for <code>int</code> and works in C, but it's not possible for strings without <code>const_expr</code> from C++. Obviously, you're in for a lot of macro-writing to support a large number of <code>SORT_X</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1427330555, "post_id": 29269147, "comment_id": 46739593, "body": "This could work for anything, but you have to do a define for each possible input. You cannot support sorting even 2 generic <code>int</code> without having a prohibitively large file. But in certain limited applications like small enums, it could be feasible."}, {"owner": {"reputation": 1562, "user_id": 4098326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a222a6f6508bea1c3b2f97cb0234be0?s=128&d=identicon&r=PG", "display_name": "user4098326", "link": "https://stackoverflow.com/users/4098326/user4098326"}, "edited": false, "score": 0, "creation_date": 1427639566, "post_id": 29269147, "comment_id": 46850102, "body": "I know the limitations, but the question says &quot;any element type is fine&quot;. And maybe one can &quot;encode&quot; larger numbers to reduce the number of <code>#define</code>s required, for example, one could encode <code>123</code> as <code>((1,2),3)</code>  and use some specially written macros to compare two numbers ."}], "tags": [], "owner": {"reputation": 1562, "user_id": 4098326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a222a6f6508bea1c3b2f97cb0234be0?s=128&d=identicon&r=PG", "display_name": "user4098326", "link": "https://stackoverflow.com/users/4098326/user4098326"}, "is_accepted": false, "score": 3, "last_activity_date": 1427330331, "creation_date": 1427330331, "answer_id": 29269147, "question_id": 29268723, "link": "https://stackoverflow.com/questions/29268723/can-c-sort-at-compile-time/29269147#29269147", "title": "Can C sort at compile time?", "body": "<p>Let's consider sorting numbers that can only be 0 or 1. For two numbers, <code>SORT2</code> in the following code can sort them:</p>\n\n<pre><code>#define SORT2(a,b) SORT2_##a##b\n#define SORT2_00 0,0\n#define SORT2_01 0,1\n#define SORT2_10 0,1\n#define SORT2_11 1,1\n</code></pre>\n\n<p>This can of course be expanded to larger ranges and more arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1427655157, "last_edit_date": 1427655157, "creation_date": 1427624119, "answer_id": 29327901, "question_id": 29268723, "link": "https://stackoverflow.com/questions/29268723/can-c-sort-at-compile-time/29327901#29327901", "title": "Can C sort at compile time?", "body": "<p>Not really, you cannot sort in C at compile time (at least if you want to sort a sufficiently large number of compile-time constant integers; in that case having a 300 macros or functions named <code>SORT_1</code>, <code>SORT_2</code>, ... <code>SORT_300</code> is not practical, unless you generate these functions or macros, which you do not want to), however....</p>\n\n<p>Pragmatical approach would be to use your own or some other preprocessor (e.g. <a href=\"http://en.nothingisreal.com/wiki/GPP\" rel=\"nofollow\">gpp</a>) and have it do the sort. Or simply, have the numbers in some included file and generate that <em>sorted</em> file (e.g. with a <code>make</code> rule using <code>awk</code> &amp; <code>sort</code>)</p>\n\n<p>You could also consider linking using <a href=\"http://en.wikipedia.org/wiki/Interprocedural_optimization\" rel=\"nofollow\">link-time-optimization</a> to an LTO-compiled <a href=\"http://en.wikipedia.org/wiki/C_standard_library\" rel=\"nofollow\">libc</a>, using its LTO-optimized <code>qsort</code>. This is not usual, AFAIK, and you have no guarantee that the compiler is smart-enough to inline your LTO <code>qsort</code> etc... (AFAIK, current C compilers don't do that).</p>\n\n<p>If compiling with a recent <a href=\"http://gcc.gnu.org/\" rel=\"nofollow\">GCC</a> (4.8, 4.9 or soon 5.0 in march 2015), you could customize it (e.g. with <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> or with your own C++ plugin) to define your <code>__builtin_my_compile_time_sort</code> (or perhaps some <code>_Pragma</code>) to do the job. This is compiler specific (could mean several days of work, unless you know MELT already)</p>\n\n<p>The simplest thing would be to accept slightly complicating the build step. It is not a big deal.</p>\n"}], "owner": {"reputation": 813, "user_id": 426736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edddecf45c7c30f5540f8fa7826bc538?s=128&d=identicon&r=PG", "display_name": "Tomek Sowi\u0144ski", "link": "https://stackoverflow.com/users/426736/tomek-sowi%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 1, "accepted_answer_id": 29269085, "answer_count": 3, "score": 6, "last_activity_date": 1427655157, "creation_date": 1427327598, "last_edit_date": 1427615812, "question_id": 29268723, "link": "https://stackoverflow.com/questions/29268723/can-c-sort-at-compile-time", "title": "Can C sort at compile time?", "body": "<p>Is it possible to sort elements at compile time in C?</p>\n\n<p>Syntax is of secondary importance, I was thinking of a macro like this:</p>\n\n<pre><code>SORT(9, -1, 12, 4)   // expands to: -1, 4, 9, 12\nSORT(dog, cat, cow)  // expands to: cat, cow, dog\n</code></pre>\n\n<p>but I won't frown at any API as long as it sorts without issuing a single CPU instruction.</p>\n\n<p>The requirements are pretty lax:</p>\n\n<ul>\n<li><strong>Pure C, no C++</strong>. Staying within the C standard would be nice but established language extensions are fair game.</li>\n<li><strong>Compiler is the only tool allowed</strong>. Unix <code>sort</code> or home-brewed code generators are not welcome as they complicate the build step.</li>\n<li><strong>Any element type is fine</strong>. It's OK if it can sort e.g. numbers but not strings.</li>\n<li><strong>Fixed-length API is fine</strong>. Having to call <code>SORT_5</code> to sort 5 elements is OK.</li>\n</ul>\n\n<p>I realize the solution will probably resort to some language voodoo that barely compiles, I just want to know if it's possible.</p>\n"}, {"tags": ["c++", "c", "multiprocessing", "ipc", "daemon"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1427327405, "post_id": 29268650, "comment_id": 46738692, "body": "which part is tricky?"}], "answers": [{"tags": [], "owner": {"reputation": 1562, "user_id": 4098326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a222a6f6508bea1c3b2f97cb0234be0?s=128&d=identicon&r=PG", "display_name": "user4098326", "link": "https://stackoverflow.com/users/4098326/user4098326"}, "is_accepted": true, "score": 2, "last_activity_date": 1427327580, "creation_date": 1427327580, "answer_id": 29268718, "question_id": 29268650, "link": "https://stackoverflow.com/questions/29268650/forking-children-in-c-and-re-forking-when-they-die/29268718#29268718", "title": "Forking children in C and re-forking when they die", "body": "<p>Assuming Unix-like system, you can use <code>wait</code> or <code>waitpid</code> in the parent to monitor subprocesses synchronously. Alternatively, you can use <code>SIGCHLD</code> to monitor them asynchronously, and call <code>wait</code> or <code>waitpid</code> in the signal handler. You will get notified whenever a subprocesses terminates(including crashing).</p>\n\n<p>To re-fork a child with the same parameters when it crashes, you would have to record the parameters for each child.</p>\n"}], "owner": {"reputation": 4651, "user_id": 860522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vkbK1.jpg?s=128&g=1", "display_name": "OneSolitaryNoob", "link": "https://stackoverflow.com/users/860522/onesolitarynoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 29268718, "answer_count": 1, "score": 0, "last_activity_date": 1427327580, "creation_date": 1427327141, "question_id": 29268650, "link": "https://stackoverflow.com/questions/29268650/forking-children-in-c-and-re-forking-when-they-die", "title": "Forking children in C and re-forking when they die", "body": "<p>I have some code that forks a number of child \"workers\".    Child labor :(</p>\n\n<p>This works pretty good til a child dies due to some unpredictable error and the system throughput decreases.</p>\n\n<p>What's a good pattern for monitoring for the children crashing,  then re-forking them with the same params I fired them up with?     I haven't written this type of code before and it looks like a little tricky.</p>\n"}, {"tags": ["c", "performance", "openmp"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1427373513, "post_id": 29268258, "comment_id": 46755189, "body": "Simply disable OpenMP by setting the <code>OMP_NUM_THREADS</code> environment variable to 1. Spending too much time in barriers usually mean poorly balanced work distribution or a problem that is generally unsuited for OpenMP parallelisation."}, {"owner": {"reputation": 521, "user_id": 1157317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e9c8568b53b215dfd70d4adc928a618?s=128&d=identicon&r=PG", "display_name": "ReneSac", "link": "https://stackoverflow.com/users/1157317/renesac"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1427399364, "post_id": 29268258, "comment_id": 46772353, "body": "@HristoIliev Thanks, calling my program with  <code>env OMP_NUM_THREADS=1</code> before it seems to solve the slowdown. I tried to use <code>setenv()</code> and <code>putenv()</code> in C to replicate that w/o having to mess with the shell, but no luck. Any idea what I can do in C to disable the threads of something I call? The threads in libdivsufsort probably work better when processing megabytes of data a time, but I dunno."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1427410334, "post_id": 29268258, "comment_id": 46777684, "body": "Include <code>&lt;omp.h&gt;</code>, put in your code <code>omp_set_num_threads(1);</code> <b>before</b> the call to libdivsufsort, then compile and link with <code>-fopenmp</code>."}], "owner": {"reputation": 521, "user_id": 1157317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e9c8568b53b215dfd70d4adc928a618?s=128&d=identicon&r=PG", "display_name": "ReneSac", "link": "https://stackoverflow.com/users/1157317/renesac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427325115, "creation_date": 1427325115, "question_id": 29268258, "link": "https://stackoverflow.com/questions/29268258/how-to-avoid-bad-performance-when-calling-a-library-that-uses-openmp", "title": "How to avoid bad performance when calling a library that uses OpenMP", "body": "<p>I'm calling a dynamically linked <a href=\"https://github.com/y-256/libdivsufsort\" rel=\"nofollow\">libdivsufsort</a> in a loop, each iteration for a different piece of data and with a separate output. Only a few kbytes of data are processed each iteration (I can't change that). However, the performance I get is often abysmal.</p>\n\n<p>I discovered that if I call the right combination of functions over the output of divsufsort, my whole program runs up to 10x <em>FASTER</em> than if I do nothing except the divsufsort call. That varies with the gcc optimization options. I'm afraid that I can't provide any reasonable minimal working example short of my entire program, given the chaos-like nature that it appears to have...</p>\n\n<p>Profiling the program, I discovered that when it runs slower, 50% of the time is spent in <code>gomp_barrier_wait_end</code>, and other 40% of the time in <code>gomp_team_barrier_wait_end</code>, and less than 10% of the time actually doing useful work. Apparently divsufsort uses OpenMP (I never used it), and that is likely the cause of the slowdowns.</p>\n\n<p>So, what can in my end do to aways avoid that gomp barriers overhead?</p>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 6, "creation_date": 1427324760, "post_id": 29268164, "comment_id": 46737786, "body": "The error message is not related to the line you posted (which is also buggy by the way)."}, {"owner": {"reputation": 481, "user_id": 4625249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XacEU.gif?s=128&g=1", "display_name": "ProfOak", "link": "https://stackoverflow.com/users/4625249/profoak"}, "edited": false, "score": 1, "creation_date": 1427324839, "post_id": 29268164, "comment_id": 46737817, "body": "Please post more of the code. In the example string you do not use the %d formatter."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 1, "creation_date": 1427324852, "post_id": 29268164, "comment_id": 46737821, "body": "I don&#39;t think you are showing enough code. What is <code>date</code>?"}, {"owner": {"reputation": 481, "user_id": 4625249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XacEU.gif?s=128&g=1", "display_name": "ProfOak", "link": "https://stackoverflow.com/users/4625249/profoak"}, "edited": false, "score": 0, "creation_date": 1427325207, "post_id": 29268164, "comment_id": 46737961, "body": "Well now that you have changed the example, your error is probably different. My guess is that you&#39;re trying to use a struct containing fields doomsday, leapYear, month, and day but don&#39;t know how to access them.  Feel free to show more of the code, because it will only help us understand what you&#39;re talking about."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1427325377, "post_id": 29268164, "comment_id": 46738031, "body": "Taking a stab in the dark here, but you probably want to do this <code>scanf (&quot;%d %d %d %d&quot;, &amp;doomsday, &amp;leapYear, &amp;month, &amp;day);</code> where doomsday, leapYear, month, and day are <code>int</code>s. Then pass those to <code>date</code>."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1427325540, "post_id": 29268164, "comment_id": 46738101, "body": "The code you posted has other problems."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427325582, "post_id": 29268164, "comment_id": 46738115, "body": "The braces don&#39;t match, and it looks as if you are trying to nest a function in <code>main()</code>."}, {"owner": {"reputation": 11, "user_id": 4714370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444a9a25a184b6d9f8779f00d2dd6eab?s=128&d=identicon&r=PG&f=1", "display_name": "scissorkind", "link": "https://stackoverflow.com/users/4714370/scissorkind"}, "edited": false, "score": 0, "creation_date": 1427325604, "post_id": 29268164, "comment_id": 46738124, "body": "Could you please point them out? edit: forgot a brace, but it&#39;s there in the original. Can I not nest functions in main?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427325632, "post_id": 29268164, "comment_id": 46738136, "body": "Count them yourself. There are two <code>{</code> but only one <code>}</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427325793, "post_id": 29268164, "comment_id": 46738190, "body": "No. You can&#39;t nest functions in C."}, {"owner": {"reputation": 11, "user_id": 4714370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444a9a25a184b6d9f8779f00d2dd6eab?s=128&d=identicon&r=PG&f=1", "display_name": "scissorkind", "link": "https://stackoverflow.com/users/4714370/scissorkind"}, "edited": false, "score": 0, "creation_date": 1427325897, "post_id": 29268164, "comment_id": 46738219, "body": "Thank you - sorry for the complete newbie questions, but would fixing the attempted nesting also get rid of the error, or is that another formatting mistake on my part?"}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1427325929, "post_id": 29268164, "comment_id": 46738232, "body": "Move your <code>dayOfWeek</code> function outside of main and you&#39;re also re-declaring the parameters that are passed. It&#39;s hard to help when we don&#39;t know exactly what your intentions are. Also, is that all of your code?"}], "answers": [{"tags": [], "owner": {"reputation": 481, "user_id": 4625249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XacEU.gif?s=128&g=1", "display_name": "ProfOak", "link": "https://stackoverflow.com/users/4625249/profoak"}, "is_accepted": true, "score": 1, "last_activity_date": 1427325987, "creation_date": 1427325987, "answer_id": 29268429, "question_id": 29268164, "link": "https://stackoverflow.com/questions/29268164/formatting-error/29268429#29268429", "title": "Formatting error?", "body": "<p>This is what I can say about your question so far. To use the scanf function, you have to pass the memory address of your variable to it using the &amp; symbol.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid dayOfWeek (int doomsday, int leapYear, int month, int day) {\n    // what is this supposed to do?\n}\n\nint main (int argc, char *argv[]) {\n    int doomsday;\n    int month;\n    int day;\n    int leapYear;\n    // int date;\n    //int daysfromdd;\n\n    printf (\"Insert date: \");\n    scanf (\"%d %d %d %d\", &amp;doomsday, &amp;leapYear, &amp;month, &amp;day);\n\n    printf(\"DD: %d, LY: %d, M: %d, D: %d\\n\",\n            doomsday, leapYear, month, day);\n\n    return 0;\n}\n</code></pre>\n\n<p>However I don't know what dayOfTheWeek() is supposed to do since you put no description of it.</p>\n"}], "owner": {"reputation": 11, "user_id": 4714370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444a9a25a184b6d9f8779f00d2dd6eab?s=128&d=identicon&r=PG&f=1", "display_name": "scissorkind", "link": "https://stackoverflow.com/users/4714370/scissorkind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1427363814, "accepted_answer_id": 29268429, "answer_count": 1, "score": -2, "last_activity_date": 1427325987, "creation_date": 1427324682, "last_edit_date": 1427325432, "question_id": 29268164, "link": "https://stackoverflow.com/questions/29268164/formatting-error", "closed_reason": "Not suitable for this site", "title": "Formatting error?", "body": "<p>Possibly dumb question - I keep getting this error</p>\n\n<pre><code>error: format '%d' expects argument of type 'int', but argument 2 has type 'int (*)(int,  int,  int,  int)'\n</code></pre>\n\n<p>and have no idea what it means. Here is the relevant code:</p>\n\n<pre><code>int main (int argc, char *argv[]) {\nint dayOfWeek (int doomsday, int leapYear, int month, int day) {\n\n    int doomsday;\n    int daysfromdd;\n    int month;\n    int day;\n    int leapYear;\n    int date;\n\n    printf (\"Insert date\");\n    scanf (\"%d %d %d %d\", doomsday, leapYear, month, day);\n}\n</code></pre>\n\n<p>Would appreciate any insight.</p>\n"}, {"tags": ["c++", "c", "visual-c++", "visual-studio-2013", "ntfs"], "comments": [{"owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 0, "creation_date": 1427325377, "post_id": 29268145, "comment_id": 46738029, "body": "Are you running your process as an administrator user, and elevating the process? Manipulating symbolic links requires elevated privileges (beyond normal user) on Windows."}, {"owner": {"reputation": 1027, "user_id": 1099074, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f20e32678c68ec68ab4246d8904de875?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1099074/wes"}, "reply_to_user": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 0, "creation_date": 1427325517, "post_id": 29268145, "comment_id": 46738087, "body": "Visual Studio is run with admin permissions yes, but same error."}, {"owner": {"reputation": 4625, "user_id": 1478654, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BiUl3.png?s=128&g=1", "display_name": "Clay", "link": "https://stackoverflow.com/users/1478654/clay"}, "edited": false, "score": 0, "creation_date": 1429291368, "post_id": 29268145, "comment_id": 47546914, "body": "If you&#39;re opening with backup semantics, your process has to obtain the SE_BACKUP_NAME privilege and SE_RESTORE_NAME to write.  Have a look <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa387705%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">here</a>.  The article talks about Certificate Services, but its the same for editing a reparse point."}], "owner": {"reputation": 1027, "user_id": 1099074, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f20e32678c68ec68ab4246d8904de875?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1099074/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427324884, "creation_date": 1427324555, "last_edit_date": 1427324884, "question_id": 29268145, "link": "https://stackoverflow.com/questions/29268145/access-denied-modifying-existing-symbolic-link-target", "title": "Access denied modifying existing symbolic link target", "body": "<p>In a nutshell, I'm trying to modify an existing NTFS symbolic link's target programmatically using Visual C++. In this code snippet, I'm not actually doing anything to the link. I'm simply reading the structure into a buffer and then writing that buffer back to itself, for simplicity sake. I am getting <code>ERROR_ACCESS_DENIED</code> on the second <code>DeviceIoControl</code> call. It looks to me like the handle is opening the link with full permissions so I'm puzzled, there must be something else I'm doing wrong?  </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;ole2.h&gt;\n\ntypedef struct _REPARSE_DATA_BUFFER {\n    ULONG  ReparseTag;\n    USHORT  ReparseDataLength;\n    USHORT  Reserved;\n    union {\n        struct {\n            USHORT SubstituteNameOffset;\n            USHORT SubstituteNameLength;\n            USHORT PrintNameOffset;\n            USHORT PrintNameLength;\n            ULONG Flags;\n            WCHAR PathBuffer[1];\n        } SymbolicLinkReparseBuffer;\n        struct {\n            USHORT SubstituteNameOffset;\n            USHORT SubstituteNameLength;\n            USHORT PrintNameOffset;\n            USHORT PrintNameLength;\n            WCHAR PathBuffer[1];\n        } MountPointReparseBuffer;\n        struct {\n            UCHAR DataBuffer[1];\n        } GenericReparseBuffer;\n    };\n} REPARSE_DATA_BUFFER;\n\n#define REPARSE_MOUNTPOINT_HEADER_SIZE   8\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    HANDLE hFile;\n    LPCTSTR szMyFile = _T(\"C:\\\\Users\\\\Weston\\\\Desktop\\\\New folder\\\\SymbolicLink of test.txt\");\n\n    hFile = CreateFile(szMyFile, GENERIC_ALL, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS | FILE_FLAG_OPEN_REPARSE_POINT, NULL);\n    if (hFile == INVALID_HANDLE_VALUE)\n    {\n        _tprintf(_T(\"Could not open dir '%s'; error: %d\\n\"), szMyFile, GetLastError());\n        CloseHandle(hFile);\n        return 1;\n    }\n\n    REPARSE_DATA_BUFFER* rdata = (REPARSE_DATA_BUFFER*)malloc(MAXIMUM_REPARSE_DATA_BUFFER_SIZE);\n\n    DWORD dwRetLen = 0;\n    BOOL bRet = DeviceIoControl(hFile, FSCTL_GET_REPARSE_POINT, NULL, 0, rdata, MAXIMUM_REPARSE_DATA_BUFFER_SIZE, &amp;dwRetLen, NULL);\n    if (bRet == FALSE)\n    {\n        _tprintf(_T(\"DeviceIoControl1 failed with error: %d\\n\"), GetLastError());\n\n        CloseHandle(hFile);\n        return 1;\n    }\n\n    DWORD ioctl_return = 0xdeadbeef;\n    if (!DeviceIoControl(hFile,\n        FSCTL_SET_REPARSE_POINT,\n        rdata,\n        REPARSE_MOUNTPOINT_HEADER_SIZE + rdata-&gt;ReparseDataLength,\n        NULL,\n        0,\n        &amp;ioctl_return,\n        NULL)) {\n        _tprintf(_T(\"DeviceIoControl2 failed with error: %d\\n\"), GetLastError());\n        CloseHandle(hFile);\n        return 1;\n    }\n\n    CloseHandle(hFile);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 2, "creation_date": 1427324751, "post_id": 29268135, "comment_id": 46737783, "body": "Is there some reason why you can&#39;t just restart the system call? This is a fairly routine thing to happen."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1427331784, "post_id": 29268135, "comment_id": 46739912, "body": "You say the error message is &quot;Select : System interrupted call&quot;. Please update your question to show the <i>actual</i> error message. Copy-and-paste it, don&#39;t re-type it. (I&#39;m reasonably sure you got both the word order and the capitalization wrong. Seeing the exact error message can be important.)"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1427331922, "post_id": 29268135, "comment_id": 46739935, "body": "Exactly. What you really got was something like <code>select: interrupted system call</code> or <code>select: interrupted function call.</code> You cannot afford to be sloppy about things like this, or indeed anything in computing."}, {"owner": {"reputation": 593, "user_id": 4350809, "user_type": "registered", "accept_rate": 37, "profile_image": "https://lh5.googleusercontent.com/-iZEVFG6Z_pQ/AAAAAAAAAAI/AAAAAAAAAE0/uLDp6EX1bWE/photo.jpg?sz=128", "display_name": "Sam Gomari ", "link": "https://stackoverflow.com/users/4350809/sam-gomari"}, "edited": false, "score": 0, "creation_date": 1427396637, "post_id": 29268135, "comment_id": 46770908, "body": "Sure, the error is constantly being output to the command line as it is within a while(1) loop, because of perror(&quot;select&quot;) , and the error verbatim was :  &quot;Select : Interrupted System Call&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1427327172, "post_id": 29268278, "comment_id": 46738628, "body": "Call <code>select()</code> in a loop. If <code>select()</code> returns -1, check <code>errno</code> for <code>EINTR</code>, and if detected then simply <code>continue</code> to the next loop iteration, otherwise <code>break</code> the loop and move on."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1427327257, "post_id": 29268278, "comment_id": 46738648, "body": "For example, <code>do { rc = select(...); } while (rc == -1 &amp;&amp; errno == EINTR);</code> Is this really such a mystery? Is it a trick question?"}, {"owner": {"reputation": 593, "user_id": 4350809, "user_type": "registered", "accept_rate": 37, "profile_image": "https://lh5.googleusercontent.com/-iZEVFG6Z_pQ/AAAAAAAAAAI/AAAAAAAAAE0/uLDp6EX1bWE/photo.jpg?sz=128", "display_name": "Sam Gomari ", "link": "https://stackoverflow.com/users/4350809/sam-gomari"}, "edited": false, "score": 1, "creation_date": 1427329110, "post_id": 29268278, "comment_id": 46739184, "body": ":)) , i get what you&#39;re saying, it should be in its own little loop. Now, how about the timeouts, because the man page, says that timeout becomes undefined when an error arise, should i put the tv.sec and tv.usec inside the loop."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1427330916, "post_id": 29268278, "comment_id": 46739701, "body": "You don&#39;t really have to make a separate loop just to handle EINTR.  Instead you can just let your program do another iteration around the normal event loop when that happens.  (That will be equally efficient and will keep the code simpler)"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1442482340, "post_id": 29268278, "comment_id": 53103606, "body": "It took me a while to realize that Jeremy Friesner must mean to do a <code>continue</code> rather than just continuing in the loop."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1427332017, "last_edit_date": 1427332017, "creation_date": 1427325238, "answer_id": 29268278, "question_id": 29268135, "link": "https://stackoverflow.com/questions/29268135/issues-with-select-function-in-multicast-communication/29268278#29268278", "title": "Issues with select () function in Multicast communication", "body": "<blockquote>\n  <p>I am not sure if it is due to error in Select() or my multicast configuration.</p>\n</blockquote>\n\n<p>Neither. It is due to a signal being caught during the system call. Just loop around this condition, eg:</p>\n\n<pre><code>do\n{\n    // ...\n\n    rc = select(nls, &amp;rd_fds, NULL, NULL, &amp;tv);\n} while (rc == -1 &amp;&amp; errno == EINTR);\nif (rc == -1)\n{\n    perror(\"select\");\n}\nelse\n{\n    // ...\n}\n</code></pre>\n\n<blockquote>\n  <p>most importantly, why do i get , Select : System interrupt call in one computer but not another</p>\n</blockquote>\n\n<p>Because you got a signal on one computer and not the other. And it isn't important.</p>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1442486110, "creation_date": 1442486110, "answer_id": 32628250, "question_id": 29268135, "link": "https://stackoverflow.com/questions/29268135/issues-with-select-function-in-multicast-communication/32628250#32628250", "title": "Issues with select () function in Multicast communication", "body": "<blockquote>\n  <p>how about the timeouts, because the man page, says that timeout\n  becomes undefined when an error arise, should i put the tv.sec and\n  tv.usec inside the loop.</p>\n</blockquote>\n\n<p><a href=\"http://linux.die.net/man/2/select\" rel=\"nofollow\"><code>man 2 select</code></a>:</p>\n\n<blockquote>\n  <p>On Linux, <strong>select()</strong> modifies <em>timeout</em> to reflect the amount of time not\n  slept; most other implementations do not do this. (POSIX.1-2001\n  permits either behavior.)</p>\n</blockquote>\n\n<p>On Linux thus, the code shown in the question probably doesn't act as intended, because the timeout is set before the loop only once and zeroed if it expires - from then on, it remains zero. Here, it would be appropriate to set the desired timeout inside the main loop, but outside the proposed loop <code>\u2026 while (rc == -1 &amp;&amp; errno == EINTR)</code>.</p>\n\n<p>On systems that don't update <em>timeout</em> accordingly, there is in the presence of interruptions no such easy way to maintain the correct timeout.</p>\n"}], "owner": {"reputation": 593, "user_id": 4350809, "user_type": "registered", "accept_rate": 37, "profile_image": "https://lh5.googleusercontent.com/-iZEVFG6Z_pQ/AAAAAAAAAAI/AAAAAAAAAE0/uLDp6EX1bWE/photo.jpg?sz=128", "display_name": "Sam Gomari ", "link": "https://stackoverflow.com/users/4350809/sam-gomari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442486110, "creation_date": 1427324527, "last_edit_date": 1427397592, "question_id": 29268135, "link": "https://stackoverflow.com/questions/29268135/issues-with-select-function-in-multicast-communication", "title": "Issues with select () function in Multicast communication", "body": "<p>I will elaborate as much as possible without being too lengthy about the issue I would like help with, if possible:</p>\n\n<p>I'm writing a program that communicates with two sockets, I listen on the multicast socket, while I delegate to the other socket \"Unicast\" important information stemming from the communicated data coming from the first socket \"Multicast\". </p>\n\n<p>There are two issues that I think they are related:</p>\n\n<p>1- I run the program in one comuputer \"Linux\" communicating to another \"Linux\", and the program performs as expected. But when i take it to another computer \"running both my program and the other programs, all in one host\" with similar Multicast configuration, I get the following error:</p>\n\n<p>Select : Interrupted system call </p>\n\n<p>This is a perror message, but i am not sure if it is due to error in <code>select()</code> or my multicast configuration.</p>\n\n<p>2- As a result of the first issue, I am unable to delegate to the \"Unicast\" client socket, but the Unicast works because there is some periodic checking between \"Unicast client\" and my program running all the time.</p>\n\n<p>My code is as a follow:</p>\n\n<pre><code>struct ConfigStruct\n{\n struct sockaddr_in  Hinfo1, Hinfo2; \n struct sockaddr_in  Rinfo; \n int sock1, sock2;\n};\n\nint main()\n{\nConfigStruct StructArg;\nint fd1, fd2;\nint POS(1);  \n/****************** Network parameters declaration *************************/\n// Declaration for socket addresses      \nstruct sockaddr_in  Host_info1, Host_info2; \nstruct sockaddr_in  Remote_info;\n\nstruct in_addr localInterface;\nstruct ip_mreq Group;\n\nmemset((char *)&amp;Host_info1,0,sizeof(Host_info1));\nmemset((char *)&amp;Host_info2,0,sizeof(Host_info2));\nmemset((char *)&amp;Remote_info,0,sizeof(Remote_info));\nmemset((char *)&amp;Group,0,sizeof(Group));\n\n\n//**** Reads configuration file****************\ncout&lt;&lt;\"Reading configuration file...........\"&lt;&lt;endl;\nstd::string input1 =\"192.***.**.**\"; \nstd::string input2 = \"8888\"; \nstd::string input3 =\"192.***.**.**\"; \nstd::string input4 = \"8889\"; \n\nconst char* addr_input = input1.data();\nconst char* port_input = input2.data();\nconst char* addr_input2 = input3.data();\nconst char* port_input2 = input4.data();\n\nRemote_info.sin_addr.s_addr=inet_addr(addr_input);\nRemote_info.sin_port = htons((uint16_t)stoi(port_input,nullptr,0));\nRemote_info.sin_family=AF_INET;  \nHost_info1.sin_addr.s_addr=inet_addr(addr_input2);//htonl(INADDR_ANY);\nHost_info1.sin_port  = htons((uint16_t)stoi(port_input2,nullptr,0));\nHost_info1.sin_family=AF_INET;\n\n\n//***** First socket *******\nfd1= socket(AF_INET,SOCK_DGRAM,IPPROTO_UDP);\nif (fd1 == -1)\n    {\n      std::cout&lt;&lt;\"A problem occured\"&lt;&lt;endl;\n      cease(\"socket\", wd) ;\n    }\nif (setsockopt(fd1,SOL_SOCKET,SO_REUSEADDR, &amp;POS, sizeof(POS)) == -1) \n   {\n   perror(\" Error in setsockopt\");\n    exit(1);\n   }\n\n// **** I'M NOT SURE IF THIS NECESSARY **************\nint opts;\nopts = fcntl(fd1,F_GETFL);\nif (opts &lt; 0) \n{\n    perror(\"fcntl(F_GETFL)\");\n    exit(EXIT_FAILURE);\n}\nopts = (opts | O_NONBLOCK);\nif (fcntl(fd1,F_SETFL,opts) &lt; 0) \n{\n    perror(\"fcntl(F_SETFL)\");\n    exit(EXIT_FAILURE);\n}\n//*****************************************************\n\nif (bind(fd1,(struct sockaddr *)&amp;Host_info1,sizeof(Host_info1)) &lt; 0)\n    {\n      cease(\"Bind\",wd);\n    }\n  else\n    {\n      cout&lt;&lt;\" Socket ID number \"&lt;&lt;fd1&lt;&lt;endl;\n      cout&lt;&lt;\" Bound socket...\"&lt;&lt;endl;\n    } \n\n\n//********** The multicast network setup ***********************\nstd::string input5 =\"230.*.**.**\"; \nstd::string input6 = \"192.***.***\";   // The same host IP address as above\nstd::string input7 = \"1500\" ;  // The port number to listen to for Multicast message \n\nconst char* Group_Multi_Addr = input5.data();\nconst char* Group_Interface_Addr = input6.data();\nconst char* Host_port_input = input7.data();\n\nGroup.imr_multiaddr.s_addr = inet_addr(Group_Multi_Addr);\nGroup.imr_interface.s_addr = inet_addr(Group_Interface_Addr);\nHost_info2.sin_family = AF_INET;\nHost_info2.sin_addr.s_addr = INADDR_ANY;\nHost_info2.sin_port = htons((uint16_t)stoi(Host_port_input,nullptr,0));\n\n//***** The second socket *******\n\nfd2 = socket(AF_INET, SOCK_DGRAM, 0);\nif(fd2 &lt; 0)\n {\n  perror(\"Opening datagram socket error\");\n  exit(1);\n }\n else\n    printf(\"Opening the datagram socket...OK.\\n\");\n\nint reuse = 1;\nif(setsockopt(fd2, SOL_SOCKET, SO_REUSEADDR, (char *)&amp;reuse, sizeof(reuse)) &lt; 0)\n {\n close(fd2);\n  cease(\"Setting SO_REUSEADDR error\", wd);\n }\nelse\n  printf(\"Setting SO_REUSEADDR...OK.\\n\");\n\nif(bind(fd2, (struct sockaddr*)&amp;Host_info2, sizeof(Host_info2)))\n {\n close(fd2);\n cease(\"Binding datagram socket error\",wd);\n }\nelse\n printf(\"Binding datagram socket...OK.\\n\");\n\nif(setsockopt(fd2, IPPROTO_IP, IP_ADD_MEMBERSHIP,(char *)&amp;Group,sizeof(Group)) &lt; 0)\n {\n perror(\"Adding multicast group error\");\n close(fd2);\n exit(1);\n }\n else\n printf(\"Adding multicast group...OK.\\n\");\n\nStructArg.Hinfo1= Host_info1;\nStructArg.Hinfo2= Host_info2 ;\nStructArg.Rinfo= Remote_info ;\n\nStructArg.sock1=fd1;\nStructArg.sock2=fd2;\n\nfd_set readfds ,rd_fds;\nstruct timeval tv;\n// clear the set ahead of time\nFD_ZERO(&amp;readfds);\n// add our descriptors to the set\nFD_SET(StructArg.sock1, &amp;readfds);\nFD_SET(StructArg.sock2, &amp;readfds);\n\nnls = StructArg.sock2 + 1;\ntv.tv_sec = 0;\ntv.tv_usec = 50;\n\nchar Recv_buffer[125];\nchar TX_buffer[125];\n\nmemset((char *)&amp;Recv_buffer,'0',sizeof(Recv_buffer));\nmemset((char *)&amp;TX_buffer,'0',sizeof(TX_buffer));\n\nint lenremote(sizeof(StructArg.Rinfo));\nssize_t rs, rs2;\nuint8_t MsgSize; \nuint8_t MsgID;\n\n\ndo\n{\nrd_fds=readfds;\nif (select(nls, &amp;rd_fds, NULL, NULL, &amp;tv) &lt; 0) \n{\n    perror(\"select\"); // error occurred in select()\n} \nelse \n{\n// one or both of the descriptors have data\nif (FD_ISSET(StructArg.sock1, &amp;rd_fds)) \n {\n   rs =  recvfrom(StructArg.sock1,....,...,0,...,...)  ;\n   if ( rs &gt; 0 )\n    {\n     Do bunch of routines\n    }\n}\n\n if (FD_ISSET(StructArg.sock2, &amp;rd_fds)) \n{\n rs2 = recv(StructArg.sock2,&amp;Recv_buffer,sizeof(Recv_buffer),0);\n    if ( rs2 &gt; 0 )\n    {\n    send some data to  StructArg.sock1\n    }\n}\n// I do some work here , i send somethings to Sock 1  (Is this appropriate ??)\n}\nwhile(1);\nreturn 0;\n}\n</code></pre>\n\n<p>So most importantly, why do I get <code>Select : System interrupt call</code> in one computer but not another?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1427324057, "post_id": 29267958, "comment_id": 46737512, "body": "where does ccode gets filled in? In fact where are they declared? You have commented out the declaration"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1427325974, "post_id": 29267958, "comment_id": 46738244, "body": "Post a link to (or a couple of lines) of sample input. That will help provide a complete working example."}, {"owner": {"reputation": 8082, "user_id": 1446048, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/N05fy.jpg?s=128&g=1", "display_name": "OJFord", "link": "https://stackoverflow.com/users/1446048/ojford"}, "edited": false, "score": 1, "creation_date": 1427337880, "post_id": 29267958, "comment_id": 46741340, "body": "What does the empty <code>for</code> loop do? Which line do you think writes anything to the output file <code>fpoutpt</code>? I think you&#39;ve started removing things to debug, and posted that version. Please post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> so we can actually see the problem."}, {"owner": {"reputation": 797, "user_id": 99124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb4a98e32eb0337a855061470ea7a19?s=128&d=identicon&r=PG", "display_name": "mlp", "link": "https://stackoverflow.com/users/99124/mlp"}, "edited": false, "score": 0, "creation_date": 1427338105, "post_id": 29267958, "comment_id": 46741406, "body": "<code>fflush(stdin)</code> does nothing good. Remove it."}, {"owner": {"reputation": 797, "user_id": 99124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb4a98e32eb0337a855061470ea7a19?s=128&d=identicon&r=PG", "display_name": "mlp", "link": "https://stackoverflow.com/users/99124/mlp"}, "edited": false, "score": 0, "creation_date": 1427338203, "post_id": 29267958, "comment_id": 46741433, "body": "Each <code>case</code> without a <code>break</code> will fall through to the next <code>case</code> - that&#39;s probably not behaviour you want here."}, {"owner": {"reputation": 9, "user_id": 4552668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gqvn2.jpg?s=128&g=1", "display_name": "ag8or", "link": "https://stackoverflow.com/users/4552668/ag8or"}, "reply_to_user": {"reputation": 8082, "user_id": 1446048, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/N05fy.jpg?s=128&g=1", "display_name": "OJFord", "link": "https://stackoverflow.com/users/1446048/ojford"}, "edited": false, "score": 0, "creation_date": 1427340063, "post_id": 29267958, "comment_id": 46741880, "body": "@OllieFord Yes, i ended up removing the for loop completely. I left the FiveBR resistor function out of this new code because it adds ALOT of extra space. There&#39;s probably a much more efficient way to do this, I just don&#39;t know it."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1427340403, "post_id": 29267958, "comment_id": 46741953, "body": "What&#39;s the point of these loops like <code>for (mult=0; mult&lt;=6; mult++)</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1427340724, "post_id": 29267958, "comment_id": 46742030, "body": "Where do you print the result of the conversions?  Why do you call both <code>FourBR</code> and <code>FiveBR</code>; you can tell whether it is a 4-band or 5-band resistor and call just the correct one, can&#39;t you?  Don&#39;t forget that <code>fgets()</code> keeps the newline when it reads a line.  Note that <code>cval[]</code> is an array of <code>long</code>; it can only store <code>0.1</code> and <code>0.01</code> as <code>0</code>, which isn&#39;t what you want."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1427341240, "post_id": 29267958, "comment_id": 46742138, "body": "You&#39;re reading data into <code>str</code> and not passing it to your functions, so it isn&#39;t surprising they don&#39;t decode it properly."}, {"owner": {"reputation": 9, "user_id": 4552668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gqvn2.jpg?s=128&g=1", "display_name": "ag8or", "link": "https://stackoverflow.com/users/4552668/ag8or"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1427341680, "post_id": 29267958, "comment_id": 46742224, "body": "@JonathanLeffler Would it be best to decide which to call using an if statement? Also I completely missed the cval[] data type mistake. Thank you!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1427341770, "post_id": 29267958, "comment_id": 46742248, "body": "I would expect to use an <code>if</code> statement based on the length of the string to decide which function to call.  I&#39;d also aim to use one or two tables of colour codes rather than writing out a multiple case statements.  I agree with the question &quot;why the 6-step <code>for</code> loops&quot;, too."}, {"owner": {"reputation": 9, "user_id": 4552668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gqvn2.jpg?s=128&g=1", "display_name": "ag8or", "link": "https://stackoverflow.com/users/4552668/ag8or"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1427397641, "post_id": 29267958, "comment_id": 46771422, "body": "@JonathanLeffler  I was trying to leave enough space in my loop to include the potential 5 characters but also the \\n."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4552668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gqvn2.jpg?s=128&g=1", "display_name": "ag8or", "link": "https://stackoverflow.com/users/4552668/ag8or"}, "edited": false, "score": 0, "creation_date": 1427397540, "post_id": 29273773, "comment_id": 46771366, "body": "Thank you so much! You&#39;re explanation cleared up SO many things I was confused on."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 9, "user_id": 4552668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gqvn2.jpg?s=128&g=1", "display_name": "ag8or", "link": "https://stackoverflow.com/users/4552668/ag8or"}, "edited": false, "score": 0, "creation_date": 1427399676, "post_id": 29273773, "comment_id": 46772527, "body": "Glad I could help. C is just one of those languages that when you are learning, ... sometimes you just need a good push to get over the current roadblock. Keep up the good work. If you get stuck again, just drop a comment, or as another question."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1427358927, "last_edit_date": 1427358927, "creation_date": 1427357951, "answer_id": 29273773, "question_id": 29267958, "link": "https://stackoverflow.com/questions/29267958/c-read-a-file-interpret-the-file-output-interpretation-into-new-file/29273773#29273773", "title": "C, Read a File, Interpret the file, Output interpretation into new file", "body": "<p>With the caveat that I don't fully understand your color mapping code scheme, I think the following will help you with your project. For purposes of the code below, I let <code>A-J</code> provide the mapping of <code>0-9</code> on the resistor chart to show you an approach to mapping codes to resistor values. (if the input code contains a <code>'K'</code> or above, it is kicked out -- you can fill in that logic)</p>\n\n<p><strong>Note:</strong> the code below simply provides a mapping for the significant figure color bands (band/chars 1 &amp; 2 for 4-band, and 1, 2 &amp; 3 for 5-band resistors). The significant figure value is multiplied by the <strong>multiplier</strong> (band 3 in 4-band, and band 4 in 5-band resistors) to arrive at a resitor value. (the tolerance is ignored). </p>\n\n<p>One of the first things you will need to do in any project is get a handle on the range of values you will be dealing with in order to choose what data type will adequately hold the values while not wasting memory needlessly. Looking at your input, you will be reading string of up to 5 characters. <strong>note</strong>, the line ending in the file <code>'\\n'</code> is also a character that <code>fgets</code> will try to read, <strong>and</strong> you need room for a <code>null-terminating</code> charcter <code>'\\0'</code> at the end. So your <strong>minimum string size</strong> for reading your input file is <code>7</code>. (While you can get away with the minimum, it is wise to add a couple additional characters in case you port the code to dos and have <code>'\\r\\n'</code> line endings to deal with, or there is a stray char or two in the file). A reasonabe choice is in the <code>9-10</code> range. Now instead of hardcoding <code>10</code> throughout your code, make use of a <code>#define</code> to set this value once at the beginning of your file. (e.g. <code>#define LMAX 10</code> -- with no semi-colon for your 'line max'). You can easily adjust the value in the future if you need. </p>\n\n<p>The same logic applies to the rest of your variables. As a rule of thumb, if the range includes both positive and negative values, choose <code>int</code> or <code>long</code>. If the values will always be positive, choose <code>size_t</code> or <code>unsigned</code>, etc.. It helps to keep a quick reference handy:</p>\n\n<pre><code> data type sizes for x86_64:\n\n  sizeof (char)      : 1\n  sizeof (char*)     : 8  (all pointers)\n  sizeof (short)     : 2\n  sizeof (int)       : 4\n  sizeof (long)      : 8\n  sizeof (long long) : 8\n\n data type storage sizes for x86_64:\n\n  char - signed       :        -128  to  127\n  char - unsigned     :           0  to  255\n  short - signed      :      -32768  to  32767\n  short - unsigned    :           0  to  65535\n  int - signed        : -2147483648  to  2147483647\n  int - unsigned**    :           0  to  4294967295\n  (l)long - signed    : -9.2234e+18  to  9.2234e+18\n  (l)long - unsigned  :           0  to  1.8447e+19  18446744073709551613\n\n  ** size_t is an unsigned int for practical purposes\n</code></pre>\n\n<p>After choosing your types, and choosing variable names, remember to <strong>always initialize your variable to a value!</strong> Attempting to read from an unitialized variable is <strong>Undefined Behavior</strong> and is the bane of beginning C programmers.</p>\n\n<p>Next, you need to get information in/out of your program. In your case you need both input and output filenames. You can always prompt for, and read the variables, but it is far easier, and generally accepted, to pass the information your code needs to run -- as arguments to your program. (i.e. through <code>argv[1], argv[2], ...</code>) Simply use <code>int main (int argc, char **argv)</code>, and you have an array of strings that are the arguments to your code in <code>argv</code> (argv[0] is always the program name used to run the program). When you pass arguments in/out of your code or to functions within your code, <strong>verify/validate</strong> the input.</p>\n\n<p>For your resistor program, (and any program), you make life easier on yourself by thinking through what you need your code to do -- before you start pecking away. Input, processing and output. (i.e., get filenames, open input/output files, get string input, validate, strip trailing newlines, read individual band characters, read multiplier, convert significant figures to numbers, convert multiplier to number, multiply to get resistor value, etc..) Doing this upfront saves enormous amounts of time. It provides a roadmap for you to follow, and it allows you to identify similar/repetitive tasks to split into functions for repeated use.</p>\n\n<p>You already had the file opening, you had the file read (who knows where <code>308</code> came from), and you started tinkering with an approach to conversion, but that is pretty much where the wheels fell off. In your function, you understood that you needed to look at each character and map the character value to a number, but you got hung up on what needed a <code>numeric</code> (decimal) value and what needed to be a <code>character</code> value? (that just takes learning and paying close attention too)</p>\n\n<p>Getting the resistor value from the string input isn't too difficult. If you have limited the number of input characters to <code>5</code> (a 5-band max), then you know that your significant figure bands will be characters between <code>0 &lt; (length-2)</code> for both 4 &amp; 5-band resistors. Your approach with a <code>switch statement</code> was fine, but there are a couple of tricks that help.</p>\n\n<p>For the multiplier, you know that will always be the next to last character (band) in the string. (at <code>string[length-2]</code>) </p>\n\n<p>Instead of using a <code>switch</code> for the significant figure conversion, take a look at the <a href=\"http://www.asciitable.com/\" rel=\"nofollow\">[<strong>ASCII Table and Descriptions</strong>]</a>. Note that character <code>'A'</code> has an ASCII value of <code>65</code> and <code>'J'</code> a value of <code>74</code>. You can use the difference between the character values to convert the letters to character numerals by adding the difference to character <code>'0'(48)</code>. (i.e. <code>'G'(71) - 'A'(65) = 6</code> -- <code>'0'(48) + 6 = 54</code> [character <code>'6'</code>]) You want each value in your converted string to have the <strong>character value</strong> for the digit. (e.g. <strong>not</strong> the decimal value <code>6</code>). Note the subtle difference from what your <code>switch</code> statement was doing. (it was assigning the decimal, not the character value to <code>cval[x]</code>-- to fix it, you must quote your numbers). Unless you are going to manually convert (the <code>cval</code> array in your case) to a number, then all the conversion routines <code>atoi, strtol, etc..</code> expect to receive a string full of <strong>character values</strong> to convert, not a string of decimals.</p>\n\n<p>To find the multiplier, you can do the <strong>almost</strong> the same thing, <strong>except</strong> this time you <strong>do</strong> want the decimal value as you will be using that value directly without calling a conversion routine. Here you can find the multiplier places value by simply taking the difference between the characters and raising <code>10</code> to that power. (no need for the math library, a quick loop will do) Choosing an intial value for your multiplier variable of <code>1</code> allows you to quickly compute the multiplier once you translate the band to a value. A simple loop that multiplies your multiplier value by 10 the number of times indicated by the band will suffice.</p>\n\n<p>With all that jabber, which turned out to be much longer than I had originally thought, I put together a quick example illustrating the points. (<strong>note:</strong> I use <code>ccode</code> to collect the character digits, then I call the value converted to a number <code>cval</code> -- which is opposite from your naming) Also note, the only required argument to the program is the <strong>input</strong> file. If the <strong>output</strong> file is not given, it will simply dump the output to the screen along with the error messages. (handy for development) </p>\n\n<p>Look though the code. Take the time to understand what each part is doing (it is the price you pay to learn), and remember there are probably a dozed different correct ways to approach this problem. None more right than the other as long as they are correct.</p>\n\n<p>You have made the right choice to pursue C. There is no other high-level language that provides the flexibility and control that C does. However, with that level of flexibility and control, comes the responsibility to learn how to use it correctly. There are a lot of good people here that can help:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;     /* for strtol   */\n#include &lt;string.h&gt;     /* for strlen   */\n#include &lt;errno.h&gt;      /* for errno    */\n\n#define LMAX 10\n\nunsigned long resistor_val (char *s, unsigned char len);\n\nint main (int argc, char **argv)\n{\n\n    if (argc &lt; 2 ) {\n        fprintf (stderr, \"Error: insufficient input, usage: %s infile [outfile]\\n\", argv[0]);\n        return 1;\n    }\n\n    char str[LMAX] = {0};           /* input buffer (LMAX-1 chars)  */\n    FILE *ifp = NULL;               /* input file pointer           */\n    FILE *ofp = NULL;               /* output file pointer (stdout) */\n    size_t idx = 0;                 /* line index / counter         */\n    size_t nchr = 0;                /* number of chars in str       */\n    unsigned long rval = 0;         /* resistor value from ccode    */\n\n    /* open/validate input file */\n    if (!(ifp = fopen (argv[1], \"r\"))) {\n        fprintf (stderr, \"error: file open failed '%s'\\n\", argv[1]);\n        exit (EXIT_FAILURE);\n    }\n\n    /* open/validate output file (default: stdout) */\n    if (argc &gt; 2) {\n        if (!(ofp = fopen (argv[2], \"w\"))) {\n            fprintf (stderr, \"error: file open failed '%s'\\n\", argv[2]);\n            exit (EXIT_FAILURE);\n        }\n    }\n    else\n        ofp = stdout;\n\n    /* read loop - read each line in the input file */\n    while (fgets (str, LMAX, ifp) != NULL)\n    {\n        /* get the length of each string read */\n        nchr = strlen (str);\n\n        /* strip CR &amp; LF from each line  */\n        while (nchr &gt; 0 &amp;&amp; (str[nchr-1] == '\\r' || str[nchr-1] == '\\n'))\n            str [--nchr] = 0;\n\n        /* call resistor_val function, output results (or line if error) */\n        if ((rval = resistor_val (str, nchr)))\n            fprintf (ofp, \" line[%3zu]  code: %-5s  rval: %lu\\n\", idx, str, rval);\n        else\n            fprintf (ofp, \"*line[%3zu]  code: %-5s\\n\", idx, str);\n\n        idx++;\n    }\n\n    /* close input/output files */\n    if (ifp) fclose (ifp);\n    if (ofp != stdout)  fclose (ofp);\n\n    return 0;\n}\n\n/* read resistor colors presuming 4 or 5 band resistor\n   where the last band indicates 'tolerence', and the\n   band before it is the 'multiplier'. On success return \n   the ohm value for the resistor before any tolerence \n   or reliability factors are applied, 0 otherwise.\n   presumes code values of [A-J] only!\n*/\nunsigned long resistor_val (char *s, unsigned char len)\n{\n    char ccode[LMAX] = {0};             /* array to hold numbers    */\n    unsigned long cval = 0;             /* converted ccode value    */\n    unsigned char idx = 0;              /* ccode index / counter    */\n    unsigned char it = 0;               /* loop iterator            */\n    unsigned long mult = 1;             /* multiplier for resistor  */\n\n    /* validate input string and length */\n    for (it = 0; it &lt; len; it++)\n        if ((s[it] &lt; 'A' || s[it] &gt; 'J') {\n            fprintf (stderr, \"%s() error: argument contains chars outside [A-J] : '%s'.\\n\", \n                    __func__, s);\n            return 0;\n        }\n\n    if (len &gt; 5) {\n        fprintf (stderr, \"%s() error: input exceeds 5 characters\\n\", __func__);\n        return 0;\n    }\n\n    /* set the numeric value for each resistor value character */\n    for (idx = 0; idx &lt; len - 2; idx++)\n        ccode[idx] = '0' + s[idx] - 'A';\n\n    /* set the multiplier for the resistor */\n    for (it = 0; it &lt; s[len - 2] - 'A'; it++)\n        mult *= 10;\n\n    /* convert ccode to a number */\n    errno = 0;\n    cval = strtoul (ccode, NULL, 10);\n    if (errno) {\n        fprintf (stderr, \"%s() error: invalid cval conversion.\\n\", __func__);\n        return 0; \n    }\n\n    /* return multiplier times cval */\n    return mult * cval;\n}\n</code></pre>\n\n<p><strong>Compile</strong></p>\n\n<pre><code>gcc -Wall -Wextra -g -o resistors resistors.c\n</code></pre>\n\n<p>You can drop <code>-g</code> (generate debugging information) for your final compile, but it is needed if you are going to use the <code>gdb</code> debugger. (getting to know <code>gdb</code> is a must).</p>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/resistors dat/resifile.txt dat/resfile.txt\nresistor_val() error: argument contains chars outside [A-J] : '604'.\nresistor_val() error: argument contains chars outside [A-J] : 'KIJDJ'.\nresistor_val() error: argument contains chars outside [A-J] : 'EKCC'.\nresistor_val() error: argument contains chars outside [A-J] : 'HABKC'.\n\n$ cat dat/resfile.txt\n*line[  0]  code: 604\n line[  1]  code: CCIF   rval: 2200000000\n line[  2]  code: IJFCJ  rval: 89500\n line[  3]  code: CFHJ   rval: 250000000\n line[  4]  code: BJFG   rval: 1900000\n*line[  5]  code: KIJDJ\n*line[  6]  code: EKCC\n*line[  7]  code: HABKC\n line[  8]  code: JFID   rval: 9500000000\n line[  9]  code: ECHDA  rval: 427000\n line[ 10]  code: IJHEB  rval: 8970000\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4552668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gqvn2.jpg?s=128&g=1", "display_name": "ag8or", "link": "https://stackoverflow.com/users/4552668/ag8or"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427358927, "creation_date": 1427323672, "last_edit_date": 1427340505, "question_id": 29267958, "link": "https://stackoverflow.com/questions/29267958/c-read-a-file-interpret-the-file-output-interpretation-into-new-file", "title": "C, Read a File, Interpret the file, Output interpretation into new file", "body": "<p>I've been struggling to learn how to program in C for weeks now, but I'm at a point where I can't get myself unstuck. My program is supposed to read in a file of four and five band resistor color codes (i.e AGIE) where each letter represents a resistor band color, then using a standard resistor band interpretation chart print the value of the resistor and upper and lower tolerance limits. </p>\n\n<p>As of now, I think I'm correctly reading in my file; however, my function isn't producing any results and I don't know where to go with trying to decipher 4 or 5 bands. </p>\n\n<p>An example input would be: (where 604 is the number of resistor codes in the file)</p>\n\n<pre><code>604\nCCIF\nIJFCJ\nCFHJ\nBJFG\nKIJDJ\nEKCC\nHABKC\nJFID\nECHDA\nIJHEB\n</code></pre>\n\n<p>Any advice would be GREATLY appreciated. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nvoid FourBR(char ccode[], long cval[], double rval);\nvoid FiveBR(char ccode[], long cval[], double rval);\n\nint main()\n{\n//DECLARE VARIABLES AND POINTERS//\nchar str[604];\nchar ccode[6];\nlong cval[6];\nint num, i;\ndouble resistorval, rval;\nFILE *fpin;\nFILE *fpoutpt;\n\n//OPEN FILE//\nfpin=fopen(\"G:\\\\EGR 107\\\\EEHW4(AGraff)\\\\resistorInput.txt\", \"r\");\nfpoutpt=fopen(\"G:\\\\EGR 107\\\\EE\\\\EEHW4(AGraff)\\\\resistorOutput.txt\", \"w\");\n\n//ERROR CHECK//\nif(fpin==NULL)\n{\n    printf(\"Error reading file.\\n\");\n    exit (0);\n}\nfscanf(fpin, \"%d\", &amp;num);\nprintf(\"# of Resistors: %d\\n\", num);\n\nwhile((fgets (str, 604, fpin))!= NULL) {\n\nFourBR(ccode, cval, rval);\nFiveBR(ccode, cval, rval);\n\n\nfclose(fpin);\n\nreturn 0;\n}\n\n\nvoid FourBR(char ccode[], long cval[], double rval)\n{\nint i, j, k, mult;\nfor(i=0; i&lt;=6; i++) {\n\n    switch (ccode [0]) {\n    case('A'):\n        cval[0]=0;\n    case('B'):\n        cval[0]=1;\n    case('C'):\n        cval[0]=2;\n    case('D'):\n        cval[0]=3;\n    case('E'):\n        cval[0]=4;\n    case('F'):\n        cval[0]=5;\n    case('G'):\n        cval[0]=6;\n    case('H'):\n        cval[0]=7;\n    case('I'):\n        cval[0]=8;\n    case('J'):\n        cval[0]=9;\n\n    }\n}\n\nfor(j=0; j&lt;=6; j++)\n{\n    switch (ccode[1])\n    {\n    case 'A':\n        cval[1]=0;\n    case('B'):\n        cval[1]=1;\n    case('C'):\n        cval[1]=2;\n    case('D'):\n        cval[1]=3;\n    case('E'):\n        cval[1]=4;\n    case('F'):\n        cval[1]=5;\n    case('G'):\n        cval[1]=6;\n    case('H'):\n        cval[1]=7;\n    case('I'):\n        cval[1]=8;\n    case('J'):\n        cval[1]=9;\n    }\n    }\n for (mult=0; mult&lt;=6; mult++)\n {\n    switch (ccode[2])\n    {\n    case('A'):\n        cval[2]=1;\n    case('B'):\n        cval[2]=10;\n    case('C'):\n        cval[2]=100;\n    case('D'):\n        cval[2]=1000;\n    case('E'):\n        cval[2]=10*pow(10,3);\n    case('F'):\n        cval[2]=10*pow(10,4);\n    case('G'):\n        cval[2]=10*pow(10,5);\n    case('H'):\n        cval[2]=10*pow(10,6);\n    case('I'):\n        break;\n    case('J'):\n        break;\n    case('K'):\n        cval[2]=0.1;\n    case('L'):\n        cval[2]=0.01;\n    }\n }\n for (k=0; k&lt;=6; k++) {\n    switch (ccode[3]) {\n    case 'A':\n        break;\n    case('B'):\n        cval[3]=0.01;\n    case('C'):\n        cval[3]=0.02;\n    case('D'):\n        break;\n    case('E'):\n        break;\n    case('F'):\n        cval[3]=0.005;\n    case('G'):\n        cval[3]=0.0025;\n    case('H'):\n        cval[3]=0.001;\n    case('I'):\n        cval[3]=0.0005;\n    case('J'):\n        break;\n    case('K'):\n        cval[3]=0.05;\n    case('L'):\n        cval[3]=0.1;\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "codewarrior"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1427322329, "post_id": 29267676, "comment_id": 46736862, "body": "The name is normally Fahrenheit with an &#39;a&#39;, and Celsius has an &#39;s&#39; in the middle.  That is tangential to your other problems."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1427322457, "post_id": 29267676, "comment_id": 46736914, "body": "Please show us more code, in the form of an MCVE (<a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>) or SSCCE (<a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">Short, Self-Contained, Correct Example</a>).  We can&#39;t tell what is going wrong from the limited context you&#39;ve given us.  You can help yourself by adding <code>printf()</code> statements for the control variables, too."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1427322511, "post_id": 29267676, "comment_id": 46736929, "body": "I suspect you are probably changing the values in a function and you a passing the struct as an argument rather than a pointer to a struct. If you are, your changes are never preserved outside the function."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1427322557, "post_id": 29267676, "comment_id": 46736942, "body": "@DavidC.Rankin: except that <code>heat</code> is a plain variable, I&#39;m inclined to agree..."}, {"owner": {"reputation": 497, "user_id": 3915113, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28dde647a65c60cc3e729318b2326a91?s=128&d=identicon&r=PG&f=1", "display_name": "mstagg", "link": "https://stackoverflow.com/users/3915113/mstagg"}, "edited": false, "score": 0, "creation_date": 1427322629, "post_id": 29267676, "comment_id": 46736962, "body": "Sorry for the bad example, Im putting together a better code snippet and will update shortly."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 2, "creation_date": 1427322785, "post_id": 29267676, "comment_id": 46737013, "body": "Another tangential comment, but is this struct really necessary anyway? Couldn&#39;t you just store the temperature in Celsius and use that everywhere in your code? You only need to do the conversions to and from Fahrenheit and Kelvin when inputting or outputting data. There&#39;s no need to keep an internal representation of all three values."}, {"owner": {"reputation": 497, "user_id": 3915113, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28dde647a65c60cc3e729318b2326a91?s=128&d=identicon&r=PG&f=1", "display_name": "mstagg", "link": "https://stackoverflow.com/users/3915113/mstagg"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1427323359, "post_id": 29267676, "comment_id": 46737254, "body": "@squeamishossifrage I dont disagree. Im just an intern following orders. I was told to do it this way."}, {"owner": {"reputation": 497, "user_id": 3915113, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28dde647a65c60cc3e729318b2326a91?s=128&d=identicon&r=PG&f=1", "display_name": "mstagg", "link": "https://stackoverflow.com/users/3915113/mstagg"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1427323496, "post_id": 29267676, "comment_id": 46737299, "body": "@JonathanLeffler I added relevant code. The code is running on a development board. So I am printing the values of the variables to putty through a COM port. The if/else statement I was referring to is in NormalState.h"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1427323840, "post_id": 29267676, "comment_id": 46737431, "body": "You set <code>heat = TRUE</code> and <code>cool = TRUE</code>, but nowhere do you set <code>heat = FALSE</code> and <code>cool = FALSE</code>. So eventually, both will be true and will be true forever."}, {"owner": {"reputation": 497, "user_id": 3915113, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28dde647a65c60cc3e729318b2326a91?s=128&d=identicon&r=PG&f=1", "display_name": "mstagg", "link": "https://stackoverflow.com/users/3915113/mstagg"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1427323976, "post_id": 29267676, "comment_id": 46737487, "body": "@user3386109 That&#39;s not the case. That&#39;s done in the full code as well. I forgot to stick it in this example, though."}, {"owner": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1427324649, "post_id": 29267676, "comment_id": 46737745, "body": "If you change <code>cool = TRUE;</code> to <code>heat = FALSE;</code>  temperature will start to change. And set smaller value for <code>if(i &gt; 10000)</code> to see it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1427324796, "post_id": 29267676, "comment_id": 46737802, "body": "@mstagg Fair enough, but we can only help you fix the code that you post."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1427325724, "post_id": 29267676, "comment_id": 46738164, "body": "Having the function defined in the header file without the <code>inline</code> or <code>static</code> keyword normally means that only one source file (translation unit or TU) in the program can include that header. Are you sure that you&#39;ve done that (once in <code>Temperatures.h</code> and once in <code>NormalState.h</code>)? Also, as a general rule, headers you write go in double quotes; headers provided by &#39;the system&#39; go in angle brackets (<code>&lt;stdio.h&gt;</code>, etc). Also, also: your initialization for <code>struct Temp *currentTemp = createTemp();</code> and two other variables is using C++ initialization rules, not C initialization rules. What gives?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1427325836, "post_id": 29267676, "comment_id": 46738203, "body": "<i>[...Continuing...]</i> But then I see that you also have other executable code shown that cannot appear outside a function, but it is not shown inside a function, so this isn&#39;t an MCVE, isn&#39;t it? We can&#39;t copy and paste the code you&#39;ve shown and expect it to compile.  Please, pay attention to the advice you&#39;re given (like read up on an MCVE!)."}], "owner": {"reputation": 497, "user_id": 3915113, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28dde647a65c60cc3e729318b2326a91?s=128&d=identicon&r=PG&f=1", "display_name": "mstagg", "link": "https://stackoverflow.com/users/3915113/mstagg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427323312, "creation_date": 1427322218, "last_edit_date": 1427323312, "question_id": 29267676, "link": "https://stackoverflow.com/questions/29267676/issue-comparing-structs-in-c", "title": "Issue comparing structs in C", "body": "<p>I have created the following embedded C code using codewarrior. I have modified it and cut alot out to post this example. Three files:</p>\n\n<p>Main.c:</p>\n\n<pre><code>#include &lt;NormalState.h&gt;\n#include &lt;Temperatures.h&gt;\n\nstruct Temp *currentTemp = createTemp();\nstruct Temp *minTemp = createTemp();\nstruct Temp *maxTemp = createTemp();\nminTemp-&gt;fehrenheit = 68;\nmaxTemp-&gt;fehrenheit = 72;\ncurrentTemp-&gt;fehrenheit = 70;\nint i = 0;\nbuffer = 3;\n\nfor(;;)\n{\n    runNormalState();\n    if(i &gt; 10000)\n    {\n        if(heat == FALSE)\n        {\n            currentTemp-&gt;fehrenheit--;\n        }\n        else\n        {\n            currentTemp-&gt;fehrenheit++;\n        }\n\n        i = 0;\n    }\n    i++;\n}\n</code></pre>\n\n<p>Temperatures.h:</p>\n\n<pre><code>struct Temp{\n    float celcius;\n    float fehrenheit;\n    float kelvin;\n};\n\nstruct Temp *createTemp()\n{\n    return malloc(sizeof(struct Temp));\n}\n</code></pre>\n\n<p>NormalState.h:</p>\n\n<pre><code>#include &lt;Temperatures.h&gt;\n\nbyte buffer;\nbool heat, cool;\n\nvoid runNormalState()\n{\n    if(currentTemp-&gt;fehrenheit &lt;= minTemp-&gt;fehrenheit - buffer)\n    {\n        heat = TRUE;\n    }\n    else if(currentTemp-&gt;fehrenheit &gt;= maxTemp-&gt;fehrenheit + buffer)\n    {\n        cool = TRUE;\n    }\n}\n</code></pre>\n\n<p>I wrote some tests that start <code>currentTemp-&gt;fehrenheit</code> at 70 and deincrements it approximately every second. The if/else statement in NormalState.h checks if the heat needs to be turned on.</p>\n\n<p><code>buffer</code> is 3. <code>MinTemp-&gt;fehrenheit - buffer</code> is 65. So when <code>currentTemp-&gt;fehrenheit</code> drops below 65, heat should equal TRUE. However, the value never changes. Likewise, if I remove <code>buffer</code> from <code>minTemp-&gt;fehrenheit - buffer</code> from the if/else statement, so that it is just <code>minTemp-&gt;fehrenheit</code>, heat is always evaluated to TRUE.</p>\n\n<p>I cannot for the life of me figure out what is going on here. I can say what I have discovered already through tests:</p>\n\n<ul>\n<li>The if/else statement is NOT being skipped over. It is just not being evaluated.</li>\n<li>I have checked the values of both <code>currentTemp-&gt;fehrenheit</code> and <code>minTemp-&gt;fehrenheit</code>. They both equal what I would expect each respective value to be at that given time.</li>\n<li>It is not related to the struct data members being floats. I have the same issue if I made the data members of <code>Temp</code> ints, bytes, doubles, or floats.</li>\n</ul>\n\n<p>I have a feeling this is related to some kind of fundamental misunderstanding I may have with pointers or conversions. I could also be missing something incredibly basic, but I don't know where else to turn. The other engineer here couldn't figure it out either.</p>\n"}, {"tags": ["c", "compiler-construction", "bison"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 3453051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3c9e02f47e939f6216365f8655ff7cb?s=128&d=identicon&r=PG&f=1", "display_name": "mgmillani", "link": "https://stackoverflow.com/users/3453051/mgmillani"}, "edited": false, "score": 0, "creation_date": 1427326277, "post_id": 29268170, "comment_id": 46738348, "body": "While I cannot modify the main() function (this is for a course at the university), I managed to call <code>YYABORT</code> after the initial symbol when <code>error_count &gt; 0</code>. Dirty, but works."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 107, "user_id": 3453051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3c9e02f47e939f6216365f8655ff7cb?s=128&d=identicon&r=PG&f=1", "display_name": "mgmillani", "link": "https://stackoverflow.com/users/3453051/mgmillani"}, "edited": false, "score": 0, "creation_date": 1427326432, "post_id": 29268170, "comment_id": 46738397, "body": "@mgmillani: You can do it without modifying the main function, simply by giving <code>yyparse</code> a different name (say <code>internal_yyparse</code>) and then defining your own <code>yyparse</code> which calls the bison-generated one. I&#39;ll modify the example to do that."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 3, "last_activity_date": 1427326822, "last_edit_date": 1427326822, "creation_date": 1427324709, "answer_id": 29268170, "question_id": 29267595, "link": "https://stackoverflow.com/questions/29267595/how-can-i-create-a-grammar-rule-for-an-error/29268170#29268170", "title": "How can I create a grammar rule for an error?", "body": "<p>Since you intend to recover from syntax errors, you're not going to be able to use the return code from <code>yyparse</code> to signal that one or more errors occurred. Instead, you'll have to track that information yourself.</p>\n\n<p>The traditional way to do that would be to use a global error count (just showing the crucial pieces):</p>\n\n<pre><code>%{\n    int parse_error_count = 0;\n%}\n%%\nprogram: statement { yyerror(\"Missing semicolon\");\n                     ++parse_error_count; }\n%%\nint parse_interface() {\n  parse_error_count = 0;\n  int status = yyparse();\n  if (status) return status;        /* Might have run out of memory */\n  if (parse_error_count) return 3;  /* yyparse returns 0, 1 or 2 */\n  return 0;\n}\n</code></pre>\n\n<p>A more modern solution is to define an additional \"out\" parameter to yyparse:</p>\n\n<pre><code>%parse-param { int* error_count }\n%%\nprogram: statement { yyerror(\"Missing semicolon\");\n                     ++*error_count; }\n%%\nint main() {\n  int error_count = 0;\n  int status = yyparse(&amp;error_count);\n  if (status || error_count) { /* handle error */ }\n</code></pre>\n\n<p>Finally, in case you really need to export the symbol <code>yyparse</code> from your bison-generated code, you can do the following ugly hack:</p>\n\n<pre><code>%code top {\n#define yyparse internal_yyparse\n}\n%parse-param { int* error_count }\n%%\nprogram: statement { yyerror(\"Missing semicolon\");\n                     ++*error_count; }\n%%\n#undef yyparse\nint yyparse() {\n  int error_count = 0;\n  int status = internal_yyparse(&amp;error_count);\n  // Whatever you want to do as a summary\n  return status ? status : error_count ? 1 : 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1427391156, "last_edit_date": 1427391156, "creation_date": 1427324726, "answer_id": 29268176, "question_id": 29267595, "link": "https://stackoverflow.com/questions/29267595/how-can-i-create-a-grammar-rule-for-an-error/29268176#29268176", "title": "How can I create a grammar rule for an error?", "body": "<p><code>yyerror()</code> just prints an error message. It doesn't alter what <code>yyparse()</code> returns.</p>\n\n<p>What you're attempting is not a good idea. You'll enormously expand the grammar and you run a major risk of making it ambiguous. All you need to do is <em>remove</em> the production that calls <code>yyerror()</code>. That input will produce a syntax error anyway, and that will cause <code>yyparse()</code> not to return 0. You're keeping a dog and barking yourself. What you should be checking for is <em>semantic</em> errors that the parser can't see.</p>\n\n<p>If you really want to improve the error messages, there's enough information in the parse tables and state information to tell you what the expected next token was. However in most cases it's such a large set it's pointless to print it. But programmers are used to sorting out 'syntax error'. Don't sweat it. Writing compilers is hard enough already.</p>\n\n<p>NB You should make your grammar left-recursive to avoid excessive stack usage: for example, <code>program : program ';' command</code>.</p>\n"}], "owner": {"reputation": 107, "user_id": 3453051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c3c9e02f47e939f6216365f8655ff7cb?s=128&d=identicon&r=PG&f=1", "display_name": "mgmillani", "link": "https://stackoverflow.com/users/3453051/mgmillani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "accepted_answer_id": 29268170, "answer_count": 2, "score": 1, "last_activity_date": 1427391156, "creation_date": 1427321780, "question_id": 29267595, "link": "https://stackoverflow.com/questions/29267595/how-can-i-create-a-grammar-rule-for-an-error", "title": "How can I create a grammar rule for an error?", "body": "<p>I am writing a compiler in C, and I use bison for the grammar and flex for the tokens. To improve the quality of error messages, some common errors need to appear in the grammar. This has the side effect, however, of bison thinking that an invalid input is actually valid.</p>\n\n<p>For example, consider this grammar:</p>\n\n<pre><code>program\n  : command ';' program\n  | command ';'\n  | command {yyerror(\"Missing ;.\");} // wrong input\n  ;\ncommand\n  : INC\n  | DEC\n  ;\n</code></pre>\n\n<p>where <code>INC</code> and <code>DEC</code> are tokens and <code>program</code> is the initial symbol. In this case, <code>INC;</code> is a valid program, but <code>INC</code> is not, and an error message is generated. The function <code>yyparse()</code>, however, returns 0 as if the program were correct.</p>\n\n<p>Looking at the bison manual, I found the macro <code>YYERROR</code>, which should behave as if the parser itself found an error. But even if I add <code>YYERROR</code> after the call to <code>yyerror()</code>, the function <code>yyparse()</code> still returns 0. I could use <code>YYABORT</code> instead, but that would stop on the first error, which is terrible and not what I want.</p>\n\n<p>Is there anyway to make <code>yyparse()</code> return 1 without stopping on the first error?</p>\n"}, {"tags": ["c", "operating-system", "out-of-memory", "scheduler"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1427321001, "post_id": 29267333, "comment_id": 46736387, "body": "What is the value of ENULL"}, {"owner": {"reputation": 11, "user_id": 4713987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1d94704a14743194623425d48409fbf?s=128&d=identicon&r=PG&f=1", "display_name": "John Wang", "link": "https://stackoverflow.com/users/4713987/john-wang"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1427331918, "post_id": 29267333, "comment_id": 46739933, "body": "NULL is set to 0 whereas ENULL is set to -1. (sorry for not clearifying that)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1427346305, "post_id": 29267333, "comment_id": 46743360, "body": "so that&#39;s it, GDB says the pointer is pointing to an invalid memory address (does not know about ENULL)."}], "owner": {"reputation": 11, "user_id": 4713987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1d94704a14743194623425d48409fbf?s=128&d=identicon&r=PG&f=1", "display_name": "John Wang", "link": "https://stackoverflow.com/users/4713987/john-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427320722, "creation_date": 1427320722, "question_id": 29267333, "link": "https://stackoverflow.com/questions/29267333/nonexistant-memory-in-gdb", "title": "nonexistant memory in gdb", "body": "<p>I'm working on an OS class project with a variant of HOCA system.</p>\n\n<p>I'm trying to create the interrupt handler part of the OS where I/O device interrupts are detected and handled.</p>\n\n<p>(If you have no idea about HOCA, that's fine) My question is really about the internal manipulation of C.</p>\n\n<p>The whole system work like this:</p>\n\n<p>Main function of the OS calls an init() where all the parts are initialized.</p>\n\n<p>After initializing the OS, the root process is created and the first application is schedule()'ed to the specific application. Then the application processes are created and schedule()'ed in a tree structure which rooted from the root process.</p>\n\n<pre><code>void schedule(){\n    proc_t *front;\n    front = headQueue(RQ); //return the first available process in the Ready Queue\n    if (checkPointer(front)) {\n        intschedule();     // load a timeslice to the OS\n        LDST(&amp;(front-&gt;p_s));  // load the state to the OS\n                              // so that OS can process the application specified by p_s\n                              // LDST() is system function to load a state to processor\n    }\n    else {\n        intdeadlock();     // unlock a process from the blocked list and put in RQ\n    }\n}\n</code></pre>\n\n<p>Using gdb, I see everything is ok, until it processes right before if(checkPointer(front))</p>\n\n<pre><code>int checkPointer(void *p){\n    return ((p != (void *) ENULL)&amp;&amp;(p != (void *)NULL));\n}\n</code></pre>\n\n<p>gdb respond:</p>\n\n<blockquote>\n  <p>trap: nonexistant memory address: -1 memory size: 131072 ERROR: \n  address greater than MEMORYSIZE</p>\n</blockquote>\n\n<p>what's going wrong with this?</p>\n\n<p>checkPointer() is located in another file.</p>\n\n<p>Your help is much appreciated.</p>\n"}, {"tags": ["c", "linux", "linux-kernel"], "answers": [{"tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": true, "score": 6, "last_activity_date": 1427325732, "creation_date": 1427325732, "answer_id": 29268375, "question_id": 29267122, "link": "https://stackoverflow.com/questions/29267122/kernel-exported-symbols-vs-global-symbols-vs-static-global/29268375#29268375", "title": "kernel exported symbols vs global symbols vs static global?", "body": "<p><strong>Conceptually</strong>, using <code>static</code> keyword with function declaration means <em>internal linkage</em> -- so such function is only visible within single translation unit (*.o file). This may involve inlining of that function (in which case it will be unusable further), but since <code>EXPORT_SYMBOL()</code> takes address of static function, compiler should disable inlining optimization.</p>\n\n<p><strong>Implementation</strong> is a bit more complicated. This <em>internal</em> and <em>external linkage</em> rules are only apply to static <code>ld</code> linker which works when <code>vmlinux</code> or kernel module is built. Normally symbol with <em>external linkage</em> is added to <code>symtab</code> ELF section and when dynamic linker <code>ld.so</code> loads <em>shared object</em> it reads that section.</p>\n\n<p>But when module is loaded Linux Kernel uses separate symbol table <code>ksymtab</code>. <code>EXPORT_SYMBOL()</code> adds symbol to that table, but this process is completely transparent to compiler-linker toolchain thus it is not related with <em>internal</em> and <em>external linkage</em> at all.</p>\n"}], "owner": {"reputation": 593, "user_id": 2811028, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b76c98bac753e436934acd866feff8ce?s=128&d=identicon&r=PG&f=1", "display_name": "cosinus0", "link": "https://stackoverflow.com/users/2811028/cosinus0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 0, "accepted_answer_id": 29268375, "answer_count": 1, "score": 3, "last_activity_date": 1427325732, "creation_date": 1427319856, "last_edit_date": 1427324111, "question_id": 29267122, "link": "https://stackoverflow.com/questions/29267122/kernel-exported-symbols-vs-global-symbols-vs-static-global", "title": "kernel exported symbols vs global symbols vs static global?", "body": "<p>I am little bit stack with kernel symbols type meaning.\nSimple static symbols have the same meaning like C static. So local static variable have local scope and static allocation. Static functions scope is a file. But what about static exported symbols? How to deal with <code>EXPORT_SYMBOL()</code>, <code>EXPORT_PER_CPU_SYMBOL()</code>, <code>EXPORT_UNUSED_SYMBOL()</code> if macro export static symbol? What is the difference between global and exported symbols? Is it linker responsibility to add additional info for exported symbols? Is global static variable built-in kernel visible in all the kernel and loadable module? </p>\n\n<p>Kernel exported symbols can be accessed from loadable module. Is it good style touch such symbols inside kernel.\nWhen kernel resolve symbols is it lookup thru kernel symbols table?</p>\n"}, {"tags": ["c", "struct", "compilation"], "comments": [{"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 1, "creation_date": 1427318427, "post_id": 29266708, "comment_id": 46735176, "body": "I&#39;ll get you started: <code>#define LENGTH 30</code>"}, {"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1427318443, "post_id": 29266708, "comment_id": 46735188, "body": "Second prob: You need only single ="}, {"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1427318525, "post_id": 29266708, "comment_id": 46735228, "body": "If you cant debug with all those compiler warnings, it means you havent written this code. I will suggest start learning the basics of the language first."}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427318544, "post_id": 29266708, "comment_id": 46735244, "body": "Fixed that. Thanks! Still have 10 errors. :("}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427318668, "post_id": 29266708, "comment_id": 46735301, "body": "I have indeed written the code myself (except for the part labelled &quot;Joane&#39;s Code&quot;), UnderDog - just short on time and need to fix these errors as soon as possible."}, {"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 5, "creation_date": 1427318749, "post_id": 29266708, "comment_id": 46735342, "body": "You need to <b>read the error messages</b> one by one, starting from the first one. Take a look at the line corresponding to each error in the file (sometimes the previous line/statement as well) and work out what&#39;s wrong with it."}, {"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 1, "creation_date": 1427319082, "post_id": 29266708, "comment_id": 46735487, "body": "I am voting to close this question down for the reason you are asking us to debug the code you have written &quot;yourself&quot; and the errors could be solved with the basic understanding of C."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1427319216, "post_id": 29266708, "comment_id": 46735550, "body": "@UnderDog agreed, OP did not write this code."}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427319301, "post_id": 29266708, "comment_id": 46735584, "body": "Don&#39;t really know how to convince you on this; all I can say is this is my code. The errors are pretty basic, but I&#39;m having a hard time with them."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1427319624, "post_id": 29266708, "comment_id": 46735725, "body": "The clue is: you would not have got so far yet still have such basic errors. Nobody sits down and writes code of this extent without building and compiling step by step."}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427319695, "post_id": 29266708, "comment_id": 46735763, "body": "That&#39;s a mistake I made, then. Doesn&#39;t mean I didn&#39;t write the code myself."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427318860, "post_id": 29266789, "comment_id": 46735397, "body": "Thanks, Cidian! I fixed that but still get just as many errors."}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427319520, "post_id": 29266789, "comment_id": 46735676, "body": "Yes, I am using C99, I think. Added the following in the Codeblocks options: -std=c99"}, {"owner": {"reputation": 6174, "user_id": 4698204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b603d840c3b45d81538c21e8b1e1b72?s=128&d=identicon&r=PG", "display_name": "Sylvain Bugat", "link": "https://stackoverflow.com/users/4698204/sylvain-bugat"}, "reply_to_user": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427319706, "post_id": 29266789, "comment_id": 46735771, "body": "Ok indicate it in your question."}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427320348, "post_id": 29266789, "comment_id": 46736092, "body": "One of the errors says that &#39;title&#39; is undeclared. However, title was declared. so I don&#39;t understand the error."}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427320412, "post_id": 29266789, "comment_id": 46736130, "body": "Also, there are a number of errors saying &quot;expected &#39;)&#39; before &#39;;&#39; token&quot;. After inspecting the lines, I&#39;m not sure where the problem lies."}, {"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1427320467, "post_id": 29266789, "comment_id": 46736153, "body": "Congrats Cidian.. You have found yourself a HELP VAMPIRE"}, {"owner": {"reputation": 6174, "user_id": 4698204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b603d840c3b45d81538c21e8b1e1b72?s=128&d=identicon&r=PG", "display_name": "Sylvain Bugat", "link": "https://stackoverflow.com/users/4698204/sylvain-bugat"}, "edited": false, "score": 1, "creation_date": 1427320766, "post_id": 29266789, "comment_id": 46736292, "body": "I don&#39;t have this error, check your code why there are these errors. Your fixes seems to be incorrect. The compilator indicates error lines, you just have to see why the variable/token is unknown/missing/incorrect/... If you have difficulty to fix them,  try to write a new program from scratch (no copy/paste allowed) and compile it after writing each short block to fix each compile error at once."}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427320855, "post_id": 29266789, "comment_id": 46736332, "body": "Alright, thanks for all the help, Cidian! I&#39;ll do that."}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1427321806, "post_id": 29266789, "comment_id": 46736664, "body": "Just realized that I was using a &#39;;&#39; after #define LENGTH 30. Removing the &#39;;&#39; fixed most of the errors."}], "tags": [], "owner": {"reputation": 6174, "user_id": 4698204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b603d840c3b45d81538c21e8b1e1b72?s=128&d=identicon&r=PG", "display_name": "Sylvain Bugat", "link": "https://stackoverflow.com/users/4698204/sylvain-bugat"}, "is_accepted": true, "score": 1, "last_activity_date": 1427320083, "last_edit_date": 1427320083, "creation_date": 1427318544, "answer_id": 29266789, "question_id": 29266708, "link": "https://stackoverflow.com/questions/29266708/cant-figure-out-how-to-fix-compiler-errors-easy-beginner-program/29266789#29266789", "title": "Can&#39;t figure out how to fix compiler errors. (Easy beginner program)", "body": "<p>The define syntax is incorrect, the correct syntax is:</p>\n\n<pre><code>#define LENGTH 30\n</code></pre>\n\n<p>There is = and == mismatch here:</p>\n\n<pre><code>Course.dept = 000;\nCourse.num = 000;\n</code></pre>\n\n<p>Are you using C99? Unless it's the case, a declaration in the for loop is an error:</p>\n\n<pre><code>for (int counter=0; counter &lt;= 559999; counter++)\n</code></pre>\n\n<p>Don't assign static char[X] with = here:</p>\n\n<pre><code>ToAdd.div = div;\nToAdd.title = title;\n</code></pre>\n\n<p>strcpy or strncpy must be used or directly write char into the struct fields.</p>\n\n<p>Malformed while loop instrad of a for loop (C99 syntax):</p>\n\n<pre><code>while (int counter = 0, counter &lt; 560000, counter++) {\n</code></pre>\n\n<p>fp variable is unkown here:</p>\n\n<pre><code>while (count &lt; LENGTH &amp;&amp; (c = fgetc(fp)) != '\\n') {\n</code></pre>\n\n<p>Try to build to write your code progressively and compile it to detect as soon as possible each error. Once the #define is solved each error have their lines indicated, you just have to build, fix the first error, build, fix the second error and so on:</p>\n\n<pre><code>In function \u2018main\u2019:\n101:31: error: incompatible types when assigning to type \u2018char[3]\u2019 from type \u2018char *\u2019\n102:33: error: incompatible types when assigning to type \u2018char[30]\u2019 from type \u2018char *\u2019\n141:27: error: incompatible types when assigning to type \u2018char[3]\u2019 from type \u2018char *\u2019\n142:29: error: incompatible types when assigning to type \u2018char[30]\u2019 from type \u2018char *\u2019\n167:20: error: expected expression before \u2018int\u2019\n185:49: error: \u2018fp\u2019 undeclared (first use in this function)\n185:49: note: each undeclared identifier is reported only once for each function it appears in\n200:32: error: incompatible types when assigning to type \u2018char[30]\u2019 from type \u2018char *\u2019\n</code></pre>\n\n<p>After that you have to test your program.</p>\n"}], "owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 29266789, "answer_count": 1, "score": -2, "last_activity_date": 1427320083, "creation_date": 1427318251, "last_edit_date": 1427318927, "question_id": 29266708, "link": "https://stackoverflow.com/questions/29266708/cant-figure-out-how-to-fix-compiler-errors-easy-beginner-program", "title": "Can&#39;t figure out how to fix compiler errors. (Easy beginner program)", "body": "<p>I get the following errors when trying to compile in Codeblocks:</p>\n\n<pre><code>main.c|94|error: expected expression before '==' token|\nmain.c|99|error: expected expression before '==' token|\nmain.c|100|error: 'title' undeclared (first use in this function)|\nmain.c|100|note: each undeclared identifier is reported only once for each function it appears in|\nmain.c|119|error: incompatible types when assigning to type 'char[3]' from type 'char *'|\nmain.c|133|error: expected expression before '==' token|\nmain.c|138|error: expected expression before '==' token|\nmain.c|159|error: incompatible types when assigning to type 'char[3]' from type 'char *'|\nmain.c|188|error: expected expression before 'int'|\nmain.c|201|error: expected expression before '==' token|\nmain.c|206|error: expected expression before '==' token|\n||=== Build failed: 10 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n\n<p>Here is my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define LENGTH == 30;\n\ntypedef struct {\n    char div[3];\n    short dept, num;\n    char credits[3];\n    char title[30];\n} course;\n\nint main()\n{\n    printf(\"Welcome to the Ultimate Course Database App!\\n\");\n\n    int input;\n    char filenameOne[20];\n    char filenameTwo[20];\n\n    printf(\"Please type in the name of the database file:\\n\");\n    scanf(\"%s\", &amp;filenameOne);\n\n    FILE *in_file  = fopen(filenameOne, \"r\");\n\n    //If the file does not exist\n    if (!in_file)\n    {\n        printf(\"The file you entered does not exist. A new file with the same name will be created for you.\\n\");\n\n        //Create the file\n        FILE *in_file = fopen(filenameOne, \"w\");\n        course Course;\n        for (int counter=0; counter &lt;= 559999; counter++)\n        {\n            Course.dept == 000;\n            Course.num == 000;\n            fwrite(&amp;Course, sizeof(course), 1, in_file);\n        }\n    }\n\n    do\n    {\n        fseek(in_file, 0, SEEK_SET);\n\n        printf(\"Please choose from the options below, by typing in the corresponding number.\\n\");\n\n        printf(\"1: Create new courses from a plain text file, adding them to the database.\\n\");\n        printf(\"2: Add a single course to the database.\\n\");\n        printf(\"3: Display all the details of a particular course.\\n\");\n        printf(\"4: Display all the actual courses in the database.\\n\");\n        printf(\"5: Change the name of a course in the database.\\n\");\n        printf(\"6: Delete a course from the database.\\n\");\n        printf(\"7: Add a course to a semester course listing.\\n\");\n        printf(\"8: Remove a course from a semester course listing.\\n\");\n        printf(\"9: Display a semester course listing, in course number order.\\n\");\n        printf(\"10: Quit.\\n\");\n\n        scanf(\"%d\", &amp;input);\n\n        //If Option 1 is selected\n        if (input == 1) {\n            printf(\"You selected Option 1: Create new courses from a plain text file, adding them to the database.\\n\");\n            printf(\"Please type in the name of your text file below.\\n\");\n            scanf(\"%s\", &amp;filenameTwo);\n            FILE *in_file_text  = fopen(filenameTwo, \"r\");\n            if (!in_file_text) {\n                fprintf(stderr, \"File not found.\\n\");\n            }\n            while (feof(in_file_text)) {\n                //Joanne's code\n                int c1, c2;\n                char div[3], title[LENGTH+1];\n                int dept, num;\n                int count = 0;\n                int c = ' ';\n                fscanf(in_file_text, \"%2s.%d.%d %d.%d \", div, &amp;dept, &amp;num, &amp;c1, &amp;c2);\n                while (count &lt; LENGTH &amp;&amp; (c = fgetc(in_file_text)) != '\\n') {\n                    title[count++] = (char) c;\n                }\n                title[count] = '\\0';\n                while (c != '\\n') c = fgetc(in_file_text);\n\n                //error checking\n                if (!(dept&lt;701 &amp;&amp; dept&gt;001 &amp;&amp; num&lt;899 &amp;&amp; num&gt;100 &amp;&amp; (c1 == 0 || c1 == 1 || c1 == 5) &amp;&amp; (c2 == 0 || c2 == 1 || c2 == 5))) {\n                    fprintf(stderr, \"Invalid input.\\n\");\n                }\n\n                course ToVerify;\n                fseek(in_file, ((dept)*700)+(num-100), SEEK_SET);\n                fread(&amp;ToVerify, sizeof(course), 1, in_file);\n\n                //check to see if empty course or not\n                if (ToVerify.dept == 000 &amp;&amp; ToVerify.num == 000) {\n                    course ToAdd;\n                    ToAdd.dept = dept;\n                    ToAdd.num = num;\n                    ToAdd.div = div;\n                    ToAdd.title = title;\n                    fwrite(&amp;ToAdd, sizeof(course), 1, in_file);\n                }\n            }\n            fclose(in_file_text);\n        }\n\n        //If option 2 is selected\n        if (input == 2) {\n            printf(\"You selected Option 2: Add a single course to the database.\\n\");\n            printf(\"Please type in the course below.\\n\");\n            //Joanne's code\n            int c1, c2;\n            char div[3], title[LENGTH+1];\n            int dept, num;\n            int count = 0;\n            int c = ' ';\n            fscanf(stdin, \"%2s.%d.%d %d.%d \", div, &amp;dept, &amp;num, &amp;c1, &amp;c2);\n            while (count &lt; LENGTH &amp;&amp; (c = fgetc(stdin)) != '\\n') {\n                title[count++] = (char) c;\n            }\n            title[count] = '\\0';\n            while (c != '\\n') c = fgetc(stdin);\n\n            //do the whole thing from 1 all over again\n            //error checking\n            if (!(dept&lt;701 &amp;&amp; dept&gt;001 &amp;&amp; num&lt;899 &amp;&amp; num&gt;100 &amp;&amp; (c1 == 0 || c1 == 1 || c1 == 5) &amp;&amp; (c2 == 0 || c2 == 1 || c2 == 5))) {\n                fprintf(stderr, \"Invalid input.\\n\");\n            }\n\n            course ToVerify;\n            fseek(in_file, ((dept)*700)+(num-100), SEEK_SET);\n            fread(&amp;ToVerify, sizeof(course), 1, in_file);\n\n            //check to see if empty course or not\n            if (ToVerify.dept == 000 &amp;&amp; ToVerify.num == 000) {\n                course ToAdd;\n                ToAdd.dept = dept;\n                ToAdd.num = num;\n                ToAdd.div = div;\n                ToAdd.title = title;\n                fwrite(&amp;ToAdd, sizeof(course), 1, in_file);\n            }\n        }\n\n        //If option 3 is selected\n        if (input == 3) {\n            printf(\"You selected Option 3: Display all the details of a particular course.\\n\");\n            printf(\"Please type in the department and course number below.\\n\");\n            int dept, num;\n            fscanf(stdin, \"%d.%d\", &amp;dept, &amp;num);\n\n            // check for input error\n            if (!(dept&lt;701 &amp;&amp; dept&gt;001 &amp;&amp; num&lt;899 &amp;&amp; num&gt;100)) {\n                fprintf(stderr, \"Invalid input.\\n\");\n            }\n            course ToDisplay;\n            fseek(in_file, ((dept)*700)+(num-100), SEEK_SET);\n            fread(&amp;ToDisplay, sizeof(course), 1, in_file);\n            printf(\"%2s.%d.%d %d.%d \", ToDisplay.div, ToDisplay.dept, ToDisplay.num, ToDisplay.credits, ToDisplay.title);\n        }\n\n        //If Option 4 is selected\n        if (input == 4) {\n            printf(\"You selected Option 4: Display all courses.\\n\");\n            while (int counter = 0, counter &lt; 560000, counter++) {\n                course ToDisplay;\n                fread(&amp;ToDisplay, sizeof(course), 1, in_file);\n                if (ToDisplay.dept != 000 &amp;&amp; ToDisplay.num != 000) {\n                    printf(\"%2s.%d.%d %d.%d \", ToDisplay.div, ToDisplay.dept, ToDisplay.num, ToDisplay.credits, ToDisplay.title);\n                }\n            }\n        }\n\n        //If option 5 is selected\n        if (input == 5) {\n            printf(\"You selected Option 5: Change the name of a course.\\n\");\n            printf(\"Please type in the department and course number below, with the new name\\n\");\n            char title[LENGTH+1];\n            int dept, num;\n            int count = 0;\n            int c = ' ';\n            fscanf(stdin, \"%2s.%d.%d\", div, &amp;dept, &amp;num);\n            while (count &lt; LENGTH &amp;&amp; (c = fgetc(fp)) != '\\n') {\n                title[count++] = (char) c;\n            }\n            title[count] = '\\0';\n            while (c != '\\n') c = fgetc(stdin);\n\n            //check for input error DO\n            if (!(dept&lt;701 &amp;&amp; dept&gt;001 &amp;&amp; num&lt;899 &amp;&amp; num&gt;100)) {\n                fprintf(stderr, \"Invalid input.\\n\");\n            }\n\n            course ToChange;\n            fseek(in_file, ((dept)*700)+(num-100), SEEK_SET);\n            fread(&amp;ToChange, sizeof(course), 1, in_file);\n            if (ToChange.dept != 000 &amp;&amp; ToChange.num != 000) {\n                ToChange.title = title;\n                fwrite(&amp;ToChange, sizeof(course), 1, in_file);\n            }\n            if (ToChange.dept == 000 &amp;&amp; ToChange.num == 000) {\n                fprintf(stderr, \"Record id empty!\");\n            }\n        }\n\n        //If Option 6 is selected\n        if (input == 6) {\n            printf(\"You selected Option 6: Delete a course.\\n\");\n            printf(\"Please type in the department and course number below.\\n\");\n            int dept, num;\n            fscanf(stdin, \"%d.%d\", &amp;dept, &amp;num);\n\n            //check for input error DO\n            if (!(dept&lt;701 &amp;&amp; dept&gt;001 &amp;&amp; num&lt;899 &amp;&amp; num&gt;100)) {\n                fprintf(stderr, \"Invalid input.\\n\");\n            }\n\n            course ToDelete;\n            fseek(in_file, ((dept)*700)+(num-100), SEEK_SET);\n            fread(&amp;ToDelete, sizeof(course), 1, in_file);\n            if (ToDelete.dept != 000 &amp;&amp; ToDelete.num != 000) {\n                ToDelete.dept == 000;\n                ToDelete.num == 000;\n                ToDelete.div == \"\";\n                ToDelete.credits == \"\";\n                ToDelete.title == \"\";\n                fwrite(&amp;ToDelete, sizeof(course), 1, in_file);\n            }\n            if (ToDelete.dept == 000 &amp;&amp; ToDelete.num == 000) {\n                fprintf(stderr, \"Record id empty!\\n\");\n            }\n        }\n    }\n    while (input &lt; 10);\n    fclose(in_file);\n}\n</code></pre>\n"}, {"tags": ["c", "data-compression"], "comments": [{"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1427318800, "post_id": 29266693, "comment_id": 46735367, "body": "Yes, this looks reasonable to me. <code>fgetc</code> takes care of any signed char pitfalls for you. As for your second question you can keep track of the last read character and use it as the second index (&quot;context&quot;) into a [256][256] frequency table, much as you do already. Beware of the first character though."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1427318862, "post_id": 29266693, "comment_id": 46735399, "body": "the will be unprintable characters in almost any file.  some characters, when printed with &#39;%c&#39; will have adverse effects upon the display.  strongly suggest printing the symbols via &#39;%2x&#39;"}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 2, "creation_date": 1427319373, "post_id": 29266693, "comment_id": 46735615, "body": "Your loop condition is funky though, stopping on &#39;\\0&#39;. You want <code>while((c = fgetc(fp)) != EOF)</code> instead."}, {"owner": {"reputation": 55, "user_id": 4479484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48504f2becdd2dbaebc8033ac55380a4?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_oncode", "link": "https://stackoverflow.com/users/4479484/newbie-oncode"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427323777, "post_id": 29266693, "comment_id": 46737404, "body": "@user3629249 thx, its working better ;)"}, {"owner": {"reputation": 55, "user_id": 4479484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48504f2becdd2dbaebc8033ac55380a4?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_oncode", "link": "https://stackoverflow.com/users/4479484/newbie-oncode"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1427323900, "post_id": 29266693, "comment_id": 46737452, "body": "@doynax ok, i fixed this loop"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4479484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48504f2becdd2dbaebc8033ac55380a4?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_oncode", "link": "https://stackoverflow.com/users/4479484/newbie-oncode"}, "edited": false, "score": 0, "creation_date": 1427324773, "post_id": 29266790, "comment_id": 46737792, "body": "@doynax wrote about this solution too, but unfortunately i dont know how i should write this.  I can initialize table, but dont know how it should work in a loop."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 55, "user_id": 4479484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48504f2becdd2dbaebc8033ac55380a4?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_oncode", "link": "https://stackoverflow.com/users/4479484/newbie-oncode"}, "edited": false, "score": 0, "creation_date": 1427324920, "post_id": 29266790, "comment_id": 46737845, "body": "The code included in my answer is everything you&#39;d need in the loop. Declare the variable <code>b</code> outside the loop, so that it keeps its value across iterations, and initialize it to zero."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 1, "last_activity_date": 1427318544, "creation_date": 1427318544, "answer_id": 29266790, "question_id": 29266693, "link": "https://stackoverflow.com/questions/29266693/count-frequency-of-8-bit-symbols-from-file/29266790#29266790", "title": "Count frequency of 8-bit symbols from file", "body": "<blockquote>\n  <p>Now i need a help, what will be the best way to write a 2* point?</p>\n</blockquote>\n\n<p>Nearly the same as you're currently doing, except you need to use a 2D array and keep track of the previous character you saw, e.g.</p>\n\n<pre><code>++charArray[b][c];\nb = c;\n</code></pre>\n\n<p>And, of course, you'll need to handle both dimensions when printing the array.</p>\n"}], "owner": {"reputation": 55, "user_id": 4479484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48504f2becdd2dbaebc8033ac55380a4?s=128&d=identicon&r=PG&f=1", "display_name": "newbie_oncode", "link": "https://stackoverflow.com/users/4479484/newbie-oncode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 29266790, "answer_count": 1, "score": 0, "last_activity_date": 1427336962, "creation_date": 1427318197, "last_edit_date": 1427336962, "question_id": 29266693, "link": "https://stackoverflow.com/questions/29266693/count-frequency-of-8-bit-symbols-from-file", "title": "Count frequency of 8-bit symbols from file", "body": "<p>I have next challenge and need a little help ;)</p>\n\n<blockquote>\n  <p>Program to write: The file is treated as a row of 8-bit symbols. </p>\n  \n  <ol>\n  <li>Count the frequency (incidence) of these symbols </li>\n  <li>Count the frequency of these symbols after symbols (if the previous character is given, in front of first charakter is sign with code 0).</li>\n  </ol>\n  \n  <p>The program should work for doc, pdf, mp4, jpg (take a min 1MB file).</p>\n</blockquote>\n\n<p>So I wrote a little bit of code; here it is:</p>\n\n<p>main:</p>\n\n<pre><code>int array[256] = {0};\ndouble charArray[256][256] = {{0}};\n\nFILE *fp = fopen(\"test.txt\", \"rb\");\n\nint c;\nint b = 0;\n\nprintf(\"File content: \\n\");\nwhile((c = fgetc(fp)) != EOF)\n{\n    printf(\"%2x\", c);\n    ++charArray[b][c];\n    ++array[c];\n    b=c;\n}\n\nint k;\n\nprintf(\"\\nSymbols frequency counter: \\n\");\nfor(k=0;k&lt;256;k++) {\n    if(array[k] &gt; 0 ) {\n        printf(\"char %2x: %d times \\n\", k, array[k]);\n    }\n}\n\n\nint y,z;\nprintf(\"Symbols after symbols frequency counter: \\n\");\n\nfor(y=0;y&lt;256;y++){\n\n    for(z=0;z&lt;256;z++){\n\n        if(charArray[y][z] &gt; 0) {\n        printf(\"char %2x after char %2x: %.0f times\\n\", z, y, charArray[y][z]);\n        }\n    }\n}\n\nfclose(fp);\n\nreturn 0;\n</code></pre>\n\n<p>EDIT: It's now good?</p>\n"}, {"tags": ["c", "types", "casting"], "comments": [{"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 3, "creation_date": 1427316837, "post_id": 29266285, "comment_id": 46734308, "body": "You might wanna do ((float)nume/deno) to actually do type-casting"}, {"owner": {"reputation": 47, "user_id": 3255474, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/808184c7f03cb12c19eeeee78c242b67?s=128&d=identicon&r=PG&f=1", "display_name": "EPKasper", "link": "https://stackoverflow.com/users/3255474/epkasper"}, "reply_to_user": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1427317111, "post_id": 29266285, "comment_id": 46734472, "body": "I am still getting a conflicting types error even after trying that. I am still learning C so im sure once I figure it out I will have to slap myself haha."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1427317149, "post_id": 29266285, "comment_id": 46734503, "body": "@UnderDog Agree.  Could even use <code>average = (float)(((double)nume)&#47;deno);</code> for more precision with large <code>int</code> values."}, {"owner": {"reputation": 15583, "user_id": 469210, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/592987f474ee562a63b8391e2e2b3c18?s=128&d=identicon&r=PG", "display_name": "borrible", "link": "https://stackoverflow.com/users/469210/borrible"}, "edited": false, "score": 0, "creation_date": 1427317161, "post_id": 29266285, "comment_id": 46734508, "body": "You need to move the float cast to avoid doing integer division."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3255474, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/808184c7f03cb12c19eeeee78c242b67?s=128&d=identicon&r=PG&f=1", "display_name": "EPKasper", "link": "https://stackoverflow.com/users/3255474/epkasper"}, "edited": false, "score": 0, "creation_date": 1427317211, "post_id": 29266382, "comment_id": 46734537, "body": "Ahhh thank you that fixed my problem I did not know that the compiler assumes int unless you pre-declare the function. Thank you!"}], "tags": [], "owner": {"reputation": 15583, "user_id": 469210, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/592987f474ee562a63b8391e2e2b3c18?s=128&d=identicon&r=PG", "display_name": "borrible", "link": "https://stackoverflow.com/users/469210/borrible"}, "is_accepted": true, "score": 5, "last_activity_date": 1427317099, "creation_date": 1427317099, "answer_id": 29266382, "question_id": 29266285, "link": "https://stackoverflow.com/questions/29266285/conflicting-types-and-casting-in-c/29266382#29266382", "title": "Conflicting types and casting in C", "body": "<p>If you call your function before it is declared the compiler will assume it returns an <code>int</code>.  As your function returns a <code>float</code> you would get a <code>conflicting types</code> error.</p>\n"}], "owner": {"reputation": 47, "user_id": 3255474, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/808184c7f03cb12c19eeeee78c242b67?s=128&d=identicon&r=PG&f=1", "display_name": "EPKasper", "link": "https://stackoverflow.com/users/3255474/epkasper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 29266382, "answer_count": 1, "score": 2, "last_activity_date": 1427318649, "creation_date": 1427316771, "last_edit_date": 1427318649, "question_id": 29266285, "link": "https://stackoverflow.com/questions/29266285/conflicting-types-and-casting-in-c", "title": "Conflicting types and casting in C", "body": "<p>This is probably a simple question for you to figure out I am just having some trouble with my getAverage function, it returns a float variable type. I keep getting a \"Conflicting Types\" error message at the line 114, where my function is located. I am not sure if my syntax is wrong for my method or what is going on. Any help would be greatly appreciated.</p>\n\n<p>Here is my function:</p>\n\n<pre><code>float getAverage(int nume, int deno)\n{\n    float average;\n    average = (float)(nume/deno);\n    return average;\n}\n</code></pre>\n\n<p>Edit: My function is below my main function.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 0, "creation_date": 1427316184, "post_id": 29266056, "comment_id": 46733966, "body": "In my opinion, you should tag only c because the code looks like pure C. C and C++ are distinct languages. What compiler are you using, C or C++ compiler? Anyway, your code seems to have many issues. Why the loop if you calculate the maximum inside the loop? And why do you output into <code>dst[25]</code> as the maximum is a single number, not a matrix."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1427316263, "post_id": 29266056, "comment_id": 46734003, "body": "Please pick a language. In C++ you&#39;d call <a href=\"http://en.cppreference.com/w/cpp/algorithm/max_element\" rel=\"nofollow noreferrer\"><code>std::max_element</code></a> and be done."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1427316311, "post_id": 29266056, "comment_id": 46734030, "body": "The loop unrolling will be close to optimum. The challenge will be to automate the code to accept different widths and unroll appropriately. I believe I have seen similar routines on the net. You might google <code>c find matrix max loop unroll</code> and see what comes back. Also, the compiler with optimize the ternary operator for you, so that should be fine."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1427316983, "post_id": 29266056, "comment_id": 46734401, "body": "The loop serves no purpose in this code and should be removed."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1427317361, "post_id": 29266056, "comment_id": 46734613, "body": "&quot;Tagging c and cpp to get more coverage for this question.&quot; -- that&#39;s the true spirit of a spammer."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1427317478, "post_id": 29266056, "comment_id": 46734674, "body": "For one, the solutions might vary depending on whether you are programming in c++ or c. Second: have you actually tested whether the manual loop unrolling gives you any benefits compared to what the compiler would automatically generate?"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 0, "creation_date": 1429095632, "post_id": 29266698, "comment_id": 47436750, "body": "what about float variable ??"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "edited": false, "score": 1, "creation_date": 1429095853, "post_id": 29266698, "comment_id": 47436877, "body": "@studionstru: Can you be a bit more specific? If you are asking whether this code will work for and arrray of doubles, then yes (just replace <code>int max</code>with <code>double max</code> or just use <code>auto max</code>"}], "tags": [], "owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "is_accepted": false, "score": 3, "last_activity_date": 1427318221, "creation_date": 1427318221, "answer_id": 29266698, "question_id": 29266056, "link": "https://stackoverflow.com/questions/29266056/finding-maximum-from-matrix-optimise-way/29266698#29266698", "title": "Finding maximum from matrix : optimise way", "body": "<p>I don't know exactly what your code is supposed to do (especially as you are accessing memory locations outside of <code>src</code>), but I'd almost bet that </p>\n\n<pre><code>int max = *std::max_element(begin(src), end(src));\n</code></pre>\n\n<p>is actually faster than your construct.</p>\n"}], "owner": {"reputation": 111, "user_id": 4605661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/27d5e8575c09aab6a2441230f544520f?s=128&d=identicon&r=PG&f=1", "display_name": "studinstru", "link": "https://stackoverflow.com/users/4605661/studinstru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "closed_date": 1427336298, "answer_count": 1, "score": -3, "last_activity_date": 1427318221, "creation_date": 1427315943, "question_id": 29266056, "link": "https://stackoverflow.com/questions/29266056/finding-maximum-from-matrix-optimise-way", "closed_reason": "Not suitable for this site", "title": "Finding maximum from matrix : optimise way", "body": "<p>I want to find out maximum of number from this 5x5 matrix/array of size 25 .\nI am using below trick .But I want to know any other way I can optimize this logic or any other logic is also welcome .Tagging c and cpp to get more coverage for this question .</p>\n\n<pre><code>//Dummy code :\n#include &lt;stdio.h&gt;\ninline int max_val(int x, int y)\n{\n    return (x &gt; y)? x : y;\n}\nint main(){\nint src[25] =  {19,26, 34, 48, 50 , 24, 95, 91, 54, 28,47, 45, 48, 68, 24 ,27, 10, 20, 28, 65 ,98, 96, 94, 92, 20};\n/*  just showed as example\n19 26 34 48 50  \n24 95 91 54 28  \n47 45 48 68 24  \n27 10 20 28 65  \n98 96 94 92 20  */\n\nint dst[25]={0} ;//purposefully not initialised as it is dummy code\nint width = 5;\nint* pImage0 = src;\nint* pImage1 = pImage0 + width;\nint* pImage2 = pImage1 + width;\nint* pImage3 = pImage2 + width;\nint* pImage4 = pImage3 + width;\nint BoxMax0,BoxMax1,BoxMax2,BoxMax3,BoxMax4,BoxMax;\nfor(int loop =0; loop&lt;25;loop++){\n    BoxMax0 = max_val((pImage0[0]),max_val((pImage0[1]),max_val((pImage0[2]),max_val(pImage0[3],pImage0[4]))));\n    BoxMax1 = max_val((pImage1[0]),max_val((pImage1[1]),max_val((pImage1[2]),max_val(pImage1[3],pImage1[4]))));\n    BoxMax2 = max_val((pImage2[0]),max_val((pImage2[1]),max_val((pImage2[2]),max_val(pImage2[3],pImage2[4]))));\n    BoxMax3 = max_val((pImage3[0]),max_val((pImage3[1]),max_val((pImage3[2]),max_val(pImage3[3],pImage3[4]))));\n    BoxMax4 = max_val((pImage4[0]),max_val((pImage4[1]),max_val((pImage4[2]),max_val(pImage4[3],pImage4[4]))));\n    BoxMax  = max_val(BoxMax0,max_val(BoxMax1,max_val(BoxMax2,max_val(BoxMax3,BoxMax4)));\n    pImage0++;\n    pImage1++;\n    pImage2++;\n    pImage3++;\n    pImage4++;\n    dst[loop] = BoxMax;\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "pointers", "structure"], "answers": [{"tags": [], "owner": {"reputation": 1036, "user_id": 2516756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deb539e88fa2cbfeb025f1e024811dd?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Wolf", "link": "https://stackoverflow.com/users/2516756/jonas-wolf"}, "is_accepted": false, "score": 2, "last_activity_date": 1427346190, "last_edit_date": 1427346190, "creation_date": 1427317725, "answer_id": 29266559, "question_id": 29266022, "link": "https://stackoverflow.com/questions/29266022/difficult-with-structures-c/29266559#29266559", "title": "Difficult with structures C", "body": "<p>If you like to use the modified values of <code>useful_stuff</code> in other functions, you need to pass them using a pointer to <code>define_loop</code>.</p>\n\n<p>The <code>leo_stuff</code> variable needs to be declared as a normal variable and then passed using the address of operator &amp;.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1427321412, "post_id": 29267513, "comment_id": 46736517, "body": "Hold on, hit tab enter too soon."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1427321395, "creation_date": 1427321395, "answer_id": 29267513, "question_id": 29266022, "link": "https://stackoverflow.com/questions/29266022/difficult-with-structures-c/29267513#29267513", "title": "Difficult with structures C", "body": "<p>The issue you are having is not so much due to difficulty with structs, rather it is in understanding the difference between passing a variable, or the address of the variable.</p>\n\n<p>When you pass a variable as a function argument, the function receives a COPY of the variable, such that any changes made are only visible in the function. The value of the variable in the calling function (i.e. <code>main()</code>) remains unchanged.</p>\n\n<p>To have the function actually change the value of the variable in memory, you must pass the variable ADDRESS (i.e. a pointer) as an argument to the function. Then any changes made to the value at that address are also available in <code>main()</code> (or the calling function).</p>\n\n<p>Below is a tweak to your code reflecting this principle. It applies regardless of the type of data you are passing to the function. Let me know if you have questions.</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n\ntypedef struct useful_stuff \n{\n    int loop_var;\n\n} useful_stuff;\n\ntypedef struct leo_stuff\n{\n    int the_stuff;\n\n} leo_stuff;\n\n/* to change the value in main(), you must pass the address\nof u_s (i.e. a pointer to u_s) otherwise, the function just\ngets a COPY of u_s, and the value in main() is unchanged\n*/\nvoid define_loop (useful_stuff *u_s)\n{\n    u_s-&gt;loop_var = 10;   \n}\n\n\nvoid use_leo_stuff (useful_stuff u_s, leo_stuff *l_s)\n{\n    int i = 0;\n    int loop = 0;\n\n    loop = u_s.loop_var;\n\n    printf (\"\\nThe loop var is: %d\\n\\n\", loop);\n\n    for(i=0; i &lt; loop; ++i)\n    {\n        l_s-&gt;the_stuff = i + 1000;\n\n        printf(\"  l_s stuff from stuff1 is: %d\\n\",l_s-&gt;the_stuff);\n    }\n}\n\nvoid use_leo_stuff_again (useful_stuff u_s, leo_stuff *l_s)  \n{\n    int i = 0;\n    int loop = 0;\n\n    loop = u_s.loop_var;\n\n    printf(\"\\nThe loop var from again is: %d\\n\\n\",loop);\n\n    /* l_s-&gt;the_stuff is still 1009 from the first funciton \n    let's do something different here, like reduce it to\n    the original value\n    */\n    for(i=0; i&lt;loop; ++i)\n    { \n        printf(\"  the_stuff from again is: %d\\n\", l_s-&gt;the_stuff);\n        l_s-&gt;the_stuff -= 1;\n    }\n\n}\n\nint main()\n{\n    useful_stuff u_s;           /* declare an instance of u_s &amp; stuff       */\n    leo_stuff stuff;\n\n    leo_stuff *l_s = &amp;stuff;    /* then create your l_s pointer to stuff    */\n\n    define_loop (&amp;u_s);         /* pass the address to preserve the change  */\n\n    use_leo_stuff (u_s, l_s);   /* call your functions as normal    */\n\n    use_leo_stuff_again (u_s, l_s);\n\n    printf (\"\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/struct_ptrs\n\n  l_s stuff from stuff1 is: 1000\n  l_s stuff from stuff1 is: 1001\n  l_s stuff from stuff1 is: 1002\n  l_s stuff from stuff1 is: 1003\n  l_s stuff from stuff1 is: 1004\n  l_s stuff from stuff1 is: 1005\n  l_s stuff from stuff1 is: 1006\n  l_s stuff from stuff1 is: 1007\n  l_s stuff from stuff1 is: 1008\n  l_s stuff from stuff1 is: 1009\n\nThe loop var from again is: 10\n\n  the_stuff from again is: 1009\n  the_stuff from again is: 1008\n  the_stuff from again is: 1007\n  the_stuff from again is: 1006\n  the_stuff from again is: 1005\n  the_stuff from again is: 1004\n  the_stuff from again is: 1003\n  the_stuff from again is: 1002\n  the_stuff from again is: 1001\n  the_stuff from again is: 1000\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 3606299, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f81644245be84418c1b1730b35809d09?s=128&d=identicon&r=PG&f=1", "display_name": "LM_O", "link": "https://stackoverflow.com/users/3606299/lm-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1427346190, "creation_date": 1427315817, "question_id": 29266022, "link": "https://stackoverflow.com/questions/29266022/difficult-with-structures-c", "title": "Difficult with structures C", "body": "<p>I'm dealing with a big code that makes massive use of structures to access variables in multiple void functions.  I was trying to write an code with the basic structure of the program just to know how can I deal with it without break it.</p>\n\n<p>I wrote the code below with some questions can you guys help me ?</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n\ntypedef struct useful_stuff\n{\n\n    int loop_var;  /* I want to use the loop_var in multiple void \n                * functions to iterate my loops\n            */\n\n}useful_stuff;\n\ntypedef struct leo_stuff\n{\n\n    int the_stuff;/* the stuff is a member I will use and modify\n               *during the execution of the two void functions\n               */\n\n}leo_stuff;\n\nvoid define_loop(useful_stuff u_s)  // This variable I want to use during the code\n{\n    u_s.loop_var = 10;   \n}\n\nvoid use_leo_stuff(useful_stuff u_s,leo_stuff *l_s)\n{\n    int i,loop;\n    loop = u_s.loop_var;\n\n    printf(\"the loop var is: %d\\n\", loop);\n\n    for(i=0; i &lt; loop; ++loop)\n    {\n        l_s.the_stuff = i + 1000;\n        //(*l_s).the_stuff = i + 1000;  Is this more correct ?\n        printf(\"l_s stuff from stuff1 is: %d\\n\",l_s.the_stuff);\n        //here I'm expecting to see 1001,1002,1003.....\n    }\n\n}\n\n//why he choosed to call a struct with simple declaration or with a pointer ?\nvoid use_leo_stuff_again(useful_stuff u_s,leo_stuff *l_s)  \n{\n    int i,loop;\n    loop = u_s.loop_var;\n\n    printf(\"The loop var from again is: %d\\n\",loop);\n\n    for(i=0; i&lt;loop; ++i)\n    { \n        l_s.the_stuff = i+1000;\n        printf(\"the_stuff from again is: %d\\n\", the_stuff);\n        //here I expect to see 2011,2012,2013 ...\n    }\n\n}\n\nint main()\n{\n    useful_stuff u_s;  // Is this the correct way to call functions with \n                   //   structures in main ??\n    leo_stuff *l_s;\n\n    define_loop(useful_stuff u_s);\n\n    use_leo_stuff(useful_stuff u_s,leo_stuff *l_s);\n\n        use_leo_stuff_again(useful_stuff u_s,leo_stuff *l_s);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "c", "bit"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1427315627, "post_id": 29265800, "comment_id": 46733669, "body": "Not really familiar with Java, but Java has <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19\" rel=\"nofollow noreferrer\">two different right-shift operators</a>: signed ( <code>&gt;&gt;</code>)  and unsigned (<code>&gt;&gt;&gt;</code>). In C, the distinction is by the shiftee&#39;s type. In your Java code, you want <code>&gt;&gt;&gt;</code>."}, {"owner": {"reputation": 49, "user_id": 4007682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97e63f64999171768128d01120075f53?s=128&d=identicon&r=PG&f=1", "display_name": "tonihele", "link": "https://stackoverflow.com/users/4007682/tonihele"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1427316519, "post_id": 29265800, "comment_id": 46734142, "body": "I tried the  &gt;&gt;&gt;, but clearly I don&#39;t understand what the code is really doing. (255 &gt;&gt;&gt; 4) in JAVA results in 15, not -1 as the C function would return."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427316783, "post_id": 29265800, "comment_id": 46734274, "body": "the C code is not working with BYTES,  it is working with INTEGERS.  in modern hardware, a integer is either 32 bits (or more recently 64 bits)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427316807, "post_id": 29265800, "comment_id": 46734289, "body": "what does an &#39;av_const&#39; modifier do?"}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 1, "last_activity_date": 1427317562, "last_edit_date": 1427317562, "creation_date": 1427316890, "answer_id": 29266328, "question_id": 29265800, "link": "https://stackoverflow.com/questions/29265800/sign-extension-bit-shifting-in-java-help-understanding-a-c-code-bit/29266328#29266328", "title": "Sign extension, bit shifting in JAVA. Help understanding a C-code bit", "body": "<p>The reason why the code looks so odd is that C language is full of undefined behaviours that in Java are well-defined. For example in C bit-shifting a signed integer <em>left</em> so that the sign-bit changes is <em>undefined behaviour</em> and at that point the program can do <strong>anything</strong> - whatever the compiler causes the program to do - crash, print 42, make true = false, anything can happen, and the compiler still compiled it correctly.</p>\n\n<p>Now the code uses a 1 trick to shift the integer left: it uses an union that lays the bytes of members top of each other - making an unsigned and an signed integer to occupy the same bytes; the bitshift is defined with the <code>unsigned integer</code>; so we do the unsigned shift using it; then shift back using the signed shift (the code assumes that the right shift of a negative number produces properly sign-extended negative numbers, which is also not guaranteed by standard but usually these kinds of libraries have a configuration utility that can refuse compilation on such a quite esoteric platform; likewise this program assumes that <code>CHAR_BIT</code> is 8; however C only makes a guarantee that a <code>char</code> is <em>at least</em> 8 bits wide.</p>\n\n<p>In Java, you do not need anything like a union to accomplish this; instead you do:</p>\n\n<pre><code>static int signExtend(int val, int bits) {\n    int shift = 32 - bits;  // fixed size\n    int v = val &lt;&lt; shift;\n    return v &gt;&gt; shift;\n}\n</code></pre>\n\n<p>In Java the width of an <code>int</code> is always 32 bits; <code>&lt;&lt;</code> can be used for both signed and unsigned shift; and there is no undefined behaviour for extending to the sign bit; <code>&gt;&gt;</code> can be used for signed shift (<code>&gt;&gt;&gt;</code> would be unsigned).</p>\n"}, {"comments": [{"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1427323094, "post_id": 29266331, "comment_id": 46737160, "body": "You could actually do just <code>shift = - bits</code>, because all shifts of ints in Java are masked to their low 5 bits."}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 4, "last_activity_date": 1427316909, "creation_date": 1427316909, "answer_id": 29266331, "question_id": 29265800, "link": "https://stackoverflow.com/questions/29265800/sign-extension-bit-shifting-in-java-help-understanding-a-c-code-bit/29266331#29266331", "title": "Sign extension, bit shifting in JAVA. Help understanding a C-code bit", "body": "<p>Strictly speaking, the result of running this code with this input data has unspecified results because signed bitshift in C is only properly defined in circumstances that this scenario does not meet. From the C99 standard:</p>\n\n<blockquote>\n  <p>The result of <code>E1 &gt;&gt; E2</code> is <code>E1</code> right-shifted <code>E2</code> bit positions. If <code>E1</code> has unsigned type or if <code>E1</code> has signed type and a nonnegative value, the value of the result is the integral part of the quotient of <code>E1</code> / 2<sup><code>E2</code></sup>. <strong>If <code>E1</code> has a signed type and negative value, the resulting value is implementation-defined.</strong></p>\n</blockquote>\n\n<p>(Emphasis mine)</p>\n\n<p>But let's assume that your implementation defines signed right shift to extend the sign, meaning that the space on the left will be filled with ones if the sign bit is set and zeroes otherwise; the ffmpeg code clearly expects this to be the case. The following is happening: <code>shift</code> has the value of <code>28</code> (assuming 32-bit integers). In binary notation:</p>\n\n<pre><code>00000000 00000000 00000000 11111111 = val\n11110000 00000000 00000000 00000000 = (unsigned) val &lt;&lt; shift\n</code></pre>\n\n<p>Note that when interpreting <code>(unsigned) val &lt;&lt; shift</code> as signed integer, as the code proceeds to do (assuming <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow\">two's complement</a> representation, as today's computers all use<sup>1</sup>), the sign bit of that integer is set, so a signed shift to the right fills up with zeroes from the left, and we get</p>\n\n<pre><code>11110000 00000000 00000000 00000000 = v.s\n11111111 11111111 11111111 11111111 = v.s &gt;&gt; shift\n</code></pre>\n\n<p>...and in two's complement representation, that is -1.</p>\n\n<p>In Java, this trick works the same way -- except better, because there the behavior is actually guaranteed. Simply:</p>\n\n<pre><code>public static int sign_extend(int val, int bits) {\n  int shift = 32 - bits;  // int always has 32 bits in Java\n  int s = val &lt;&lt; shift;\n  return s &gt;&gt; shift;\n}\n</code></pre>\n\n<p>Or, if you prefer:</p>\n\n<pre><code>public static int sign_extend(int val, int bits) {\n  int shift = 32 - bits;\n  return val &lt;&lt; shift &gt;&gt; shift;\n}\n</code></pre>\n\n<p><sup>1</sup> Strictly speaking, this conversion does not have a well-defined value in the C standard either, for historical reasons. There used to be computers that used different representations, and the same bit pattern with a set sign bit has a completely different meaning in (for example) signed magnitude representation.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1427318027, "creation_date": 1427318027, "answer_id": 29266639, "question_id": 29265800, "link": "https://stackoverflow.com/questions/29265800/sign-extension-bit-shifting-in-java-help-understanding-a-c-code-bit/29266639#29266639", "title": "Sign extension, bit shifting in JAVA. Help understanding a C-code bit", "body": "<pre><code>given this code:\n\nstatic inline av_const int sign_extend(int val, unsigned bits)\n{\n    unsigned shift = 8 * sizeof(int) - bits;\n    union { unsigned u; int s; } v = { (unsigned) val &lt;&lt; shift };\n    return v.s &gt;&gt; shift;\n}\n</code></pre>\n\n<p>the 'static' modifier says the function is not visible outside the current file.</p>\n\n<p>The 'inline' modifier is a 'request' to the compiler to place the code 'inline' whereever the function is called rather than having a separate function with the associated call/return code sequences</p>\n\n<p>the 'sign_extend' is the name of the function</p>\n\n<pre><code> in C, a right shift, for a signed value will propagate the sign bit,\n In C, a right shift, for a unsigned value will zero fill.\n It looks like your java is doing the zero fill.\n\n regarding this line: \n unsigned shift = 8 * sizeof(int) - bits;\n on a 32bit machine, an integer is 32 bits and size of int is 4\n so the variable 'shift' will contain (8*4)-bits\n\nregarding this line:\nunion { unsigned u; int s; } v = { (unsigned) val &lt;&lt; shift };\n left shift of unsigned will shift the bits left,\n with the upper bits being dropped into the bit bucket\n and the lower bits being zero filled.\n\nregarding this line:\nreturn v.s &gt;&gt; shift;\nthis shifts the bits back to their original position,\nwhile propagating the (new) sign bit\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4007682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97e63f64999171768128d01120075f53?s=128&d=identicon&r=PG&f=1", "display_name": "tonihele", "link": "https://stackoverflow.com/users/4007682/tonihele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2539, "favorite_count": 0, "accepted_answer_id": 29266331, "answer_count": 3, "score": 1, "last_activity_date": 1427318027, "creation_date": 1427315014, "last_edit_date": 1427316885, "question_id": 29265800, "link": "https://stackoverflow.com/questions/29265800/sign-extension-bit-shifting-in-java-help-understanding-a-c-code-bit", "title": "Sign extension, bit shifting in JAVA. Help understanding a C-code bit", "body": "<p>I have the following C-code (from FFMPEG): </p>\n\n<pre><code>static inline av_const int sign_extend(int val, unsigned bits)\n{\n    unsigned shift = 8 * sizeof(int) - bits;\n    union { unsigned u; int s; } v = { (unsigned) val &lt;&lt; shift };\n    return v.s &gt;&gt; shift;\n}\n</code></pre>\n\n<p>I'm trying to reproduce this in JAVA. But I have difficulties understanding this. No matter how I toss the bits around, I don't get very close.</p>\n\n<p>As for the value parameter: it takes unsigned byte value as int.</p>\n\n<p>Bits parameter: 4</p>\n\n<p>If the value is 255 and bits is 4. It returns -1. I can't reproduce this in JAVA. Sorry for such fuzzy question. But can you help me understand this code?</p>\n\n<p>The big picture is that I'm trying to encode EA ADPCM audio in JAVA. In FFMPEG:\n<a href=\"https://gitorious.org/ffmpeg/ffmpeg/source/c60caa5769b89ab7dc4aa41a21f87d5ee177bd30:libavcodec/adpcm.c#L981\" rel=\"nofollow\">https://gitorious.org/ffmpeg/ffmpeg/source/c60caa5769b89ab7dc4aa41a21f87d5ee177bd30:libavcodec/adpcm.c#L981</a></p>\n"}, {"tags": ["ios", "c", "mobiledevice.framework"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4704896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f345266a9ea2e73cc67baeadb09725b?s=128&d=identicon&r=PG&f=1", "display_name": "cCoderfwerrf00", "link": "https://stackoverflow.com/users/4704896/ccoderfwerrf00"}, "edited": false, "score": 0, "creation_date": 1427315286, "post_id": 29265815, "comment_id": 46733453, "body": "Thanks :D (just started to learn C so it&#180;s  nice that so many people will help me  :D )"}], "tags": [], "owner": {"reputation": 31570, "user_id": 56837, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/t20K1.jpg?s=128&g=1", "display_name": "Stefan Arentz", "link": "https://stackoverflow.com/users/56837/stefan-arentz"}, "is_accepted": true, "score": 2, "last_activity_date": 1427315066, "creation_date": 1427315066, "answer_id": 29265815, "question_id": 29265663, "link": "https://stackoverflow.com/questions/29265663/c-how-to-print-cfnumberref/29265815#29265815", "title": "C how to print CFNumberRef", "body": "<p>You can use <code>CFShow()</code> to print core foundation types to the console.</p>\n\n<pre><code>CFShow(yourCFNumberInstance);\n</code></pre>\n\n<p>You can also use <code>NSLog()</code> if you want to format things:</p>\n\n<pre><code>NSLog(CFSTR(\"Number is %@\"), yourCFNumberInstance);\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4704896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f345266a9ea2e73cc67baeadb09725b?s=128&d=identicon&r=PG&f=1", "display_name": "cCoderfwerrf00", "link": "https://stackoverflow.com/users/4704896/ccoderfwerrf00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 29265815, "answer_count": 1, "score": 0, "last_activity_date": 1427315066, "creation_date": 1427314529, "last_edit_date": 1495541179, "question_id": 29265663, "link": "https://stackoverflow.com/questions/29265663/c-how-to-print-cfnumberref", "title": "C how to print CFNumberRef", "body": "<p>Quick question im wondering how I could print CFNumberRef.\nIm currently working on a program that comunicate with mobiledevice framework (Apple) that will print the ecid of a iDevice. And I currently have one problem, I read here <a href=\"http://theiphonewiki.com/wiki/ECID\" rel=\"nofollow noreferrer\">link</a> \nthat to get the ECID you have \"Call the AMDeviceCopyValue function in the MobileDevice Framework \" and after some help here earlier ( <a href=\"https://stackoverflow.com/questions/29220430/\">link to last post</a>\n) now I have one last question, on theiphonewiki it say that \"It returns the ECID as a CFNumber(kCFNumberSInt64Type) object. \", and the question I now have is how to a print to the console CFNumber(kCFNumberSInt64Type) object??? (im working in c)</p>\n"}, {"tags": ["c", "linux", "makefile", "linker", "kernel"], "comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1427315084, "post_id": 29265630, "comment_id": 46733341, "body": "In C, static functions can only be used from the same compilation unit (that is source file). You cannot write an extern declaration of a static function."}, {"owner": {"reputation": 498, "user_id": 1036361, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1d7a8fb2d53ad21e94bcec10773a80e2?s=128&d=identicon&r=PG", "display_name": "SailorCire", "link": "https://stackoverflow.com/users/1036361/sailorcire"}, "reply_to_user": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1427315474, "post_id": 29265630, "comment_id": 46733578, "body": "So...sounds like I got to copy the functions over. Put that in an answer with a little bit of explanation (in what cases can I use extern what different storage classes mean) and I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": true, "score": 3, "last_activity_date": 1427315935, "creation_date": 1427315935, "answer_id": 29266053, "question_id": 29265630, "link": "https://stackoverflow.com/questions/29265630/linux-kernel-linking/29266053#29266053", "title": "Linux Kernel Linking", "body": "<p>In C, global functions have external linkage by default, that means that they can be used from other compilation units (C source file) just by including a prototype.</p>\n\n<p>However, if the function is declared as <code>static</code>, then it changes to internal linkage, that is it can only be used from the same compilation unit. </p>\n\n<p>Practically speaking, a static function does not emit a symbol for the linker to use while a non-static function does emit such a function.</p>\n\n<p>It is a somewhat standard practice to write small utility functions as static functions in header files, optionally also tagged as <code>inline</code>.</p>\n\n<p>If the function is not very small my advice is just to make it external (non static). Note that in the Linux kernel, to be able to use your function from other module, you need to export the symbol using some specific macros (do not mix \"kernel module\" and \"compilation unit\").</p>\n"}], "owner": {"reputation": 498, "user_id": 1036361, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1d7a8fb2d53ad21e94bcec10773a80e2?s=128&d=identicon&r=PG", "display_name": "SailorCire", "link": "https://stackoverflow.com/users/1036361/sailorcire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 29266053, "answer_count": 1, "score": 0, "last_activity_date": 1427315935, "creation_date": 1427314410, "last_edit_date": 1495542134, "question_id": 29265630, "link": "https://stackoverflow.com/questions/29265630/linux-kernel-linking", "title": "Linux Kernel Linking", "body": "<p>So as I mentioned in <a href=\"https://stackoverflow.com/q/29151235/1036361\">here</a>, I'm doing some changes to the Linux Kernel.</p>\n\n<p>Right now, the changes are very small, but to isolate them, I want my stuff to be in its own file.</p>\n\n<p>My changes basically redefine some functions and as such, they rely on functions in a parent file.</p>\n\n<p>So <code>foo.c</code> contains:</p>\n\n<pre><code>/* headers.h does not contain a prototype my_fun2*/\n#include \"headers.h\"\nstatic void fun1(){\n  ...\n}\n\nvoid fun2(){\n ...\n fun1()\n}\n</code></pre>\n\n<p>And <code>my_foo.c</code> contains:</p>\n\n<pre><code>/* headers.h does not contain a prototype my_fun2*/\n#include \"headers.h\"\n/* Note: I'm not #include \"foo.c\" */\nextern void fun1();\n\nvoid my_fun2()\n{\n  ...\n  fun1()\n}\n</code></pre>\n\n<p>You'll note that in <code>my_foo.c</code> I have <code>extern void fun1()</code> and not <code>extern static void fun1()</code> because this apparently causes a conflict due to storage classes. Further explanation on this would be nice.</p>\n\n<p>Now that I have my code the way I want it, I'll edit the corresponding <code>Makefile</code> to have the following</p>\n\n<pre><code>obj-$(CONFIG_MY_FOO) +=foo.o my_foo.o\n</code></pre>\n\n<p>With all of this put together though, it doesn't seem to work. I've used make files before and normally a recipe would be:</p>\n\n<pre><code>foo: foo.o bar.o\n  $(cc) foo.o bar.o -o foo\n\nfoo.o: foo.c\n  $(cc) -c foo.c\n\nbar.o: bar.c\n  $(cc) -c bar.c\n</code></pre>\n\n<p>However, this doesn't seem to be the format in the Linux Kernel Makefiles. So when I run <code>make</code> I get the following error:</p>\n\n<pre><code>my_foo.c:XX: undefined reference to `fun1()'\n</code></pre>\n\n<p>What am I missing? Do I just need to copy the functions to <code>my_foo.c</code> because <code>fun1()</code> is static?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 469137, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1427315288, "post_id": 29265580, "comment_id": 46733455, "body": "What language is this, C? Please add the relevant language tag to your question."}], "answers": [{"tags": [], "owner": {"reputation": 1345, "user_id": 973616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2msVF.jpg?s=128&g=1", "display_name": "AvetisG", "link": "https://stackoverflow.com/users/973616/avetisg"}, "is_accepted": true, "score": 3, "last_activity_date": 1427315313, "last_edit_date": 1427315313, "creation_date": 1427314492, "answer_id": 29265649, "question_id": 29265580, "link": "https://stackoverflow.com/questions/29265580/how-would-i-make-an-array-to-store-strings/29265649#29265649", "title": "How would I make an array to store strings?", "body": "<p>Try using strcpy instead of assigning them by dereferencing.</p>\n"}, {"comments": [{"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1427316665, "post_id": 29265729, "comment_id": 46734223, "body": "Since you posted this answer the question has been tagged as C, not C++."}], "tags": [], "owner": {"reputation": 5, "user_id": 3593881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvlYu.png?s=128&g=1", "display_name": "nralbrecht", "link": "https://stackoverflow.com/users/3593881/nralbrecht"}, "is_accepted": false, "score": 0, "last_activity_date": 1427314880, "last_edit_date": 1427314880, "creation_date": 1427314759, "answer_id": 29265729, "question_id": 29265580, "link": "https://stackoverflow.com/questions/29265580/how-would-i-make-an-array-to-store-strings/29265729#29265729", "title": "How would I make an array to store strings?", "body": "<p>You could use an array of strings:</p>\n\n<pre><code>std::string test[20];\n</code></pre>\n\n<p>And avoid using <code>#include &lt;string.h&gt;</code>; use just <code>#include &lt;string&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3050344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7675d9d5fa0da6d1f7e49f5a7649b581?s=128&d=identicon&r=PG&f=1", "display_name": "barathe94", "link": "https://stackoverflow.com/users/3050344/barathe94"}, "is_accepted": false, "score": 1, "last_activity_date": 1427319725, "last_edit_date": 1427319725, "creation_date": 1427315055, "answer_id": 29265811, "question_id": 29265580, "link": "https://stackoverflow.com/questions/29265580/how-would-i-make-an-array-to-store-strings/29265811#29265811", "title": "How would I make an array to store strings?", "body": "<p>To store entire string use string copy. </p>\n\n<pre><code>char a[]=\"lalala\"; \nchar c[]=\"nanana\";\nchar d[3][10];\n\nstrcpy(d[0],a);\nstrcpy(d[1],b);\nstrcpy(d[2],c);\n\nprintf(\"%s -- %s -- %s\", d[0], d[1], d[2]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 204, "user_id": 4388969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b43e20243bc529c0e2fc9c380916b50?s=128&d=identicon&r=PG&f=1", "display_name": "musarithmia", "link": "https://stackoverflow.com/users/4388969/musarithmia"}, "is_accepted": false, "score": 1, "last_activity_date": 1427315484, "creation_date": 1427315484, "answer_id": 29265926, "question_id": 29265580, "link": "https://stackoverflow.com/questions/29265580/how-would-i-make-an-array-to-store-strings/29265926#29265926", "title": "How would I make an array to store strings?", "body": "<p>The declaration <code>char a[] = \"lalala\";</code> creates an array of characters, where the name <code>a</code> is an alias for the memory address where the first character is stored.</p>\n\n<p>To create an array of strings, you can make an array of character <em>pointers</em>, each of which holds the memory address of the starting position of a single character array. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n\n    /* Store the starting address of each character array in an array of\n     * character pointers */\n\n    char alpha[] = \"Alpha\";  /* Array of characters */\n    char beta[] = \"Beta\";\n    char gamma[] = \"Gamma\";\n\n    char *char_ptr_array[3]; /* Array of pointers to characters */\n\n    char_ptr_array[0] = &amp;alpha[0]; \n    char_ptr_array[1] = beta; \n        /* This does the same thing since the array's name is an alias\n         * for the address of the first element */\n    char_ptr_array[2] = gamma;\n\n    printf(\"%s, %s, %s\\n\", char_ptr_array[0], char_ptr_array[1], char_ptr_array[2]);\n\n    return(0);\n}\n</code></pre>\n\n<p>You can also make the assignment like this, which is a shorthand for doing the same thing:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n    char *alphabet[3] = { \"Alpha\", \"Beta\", \"Gamma\" };\n\n    printf(\"%s, %s, %s\\n\", alphabet[0], alphabet[1], alphabet[2]);\n\n    return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4708177, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/32db9b1cc69524aa9307cc05afcecb2b?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/4708177/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 29265649, "answer_count": 4, "score": -1, "last_activity_date": 1427319725, "creation_date": 1427314245, "last_edit_date": 1427315599, "question_id": 29265580, "link": "https://stackoverflow.com/questions/29265580/how-would-i-make-an-array-to-store-strings", "title": "How would I make an array to store strings?", "body": "<p>So I'm trying to figure this out with a simple program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n int main()\n{\n    char a[]=\"lalala\";\n    char b[]=\"bababa\";\n    char c[]=\"nanana\";\n    char d[3][10];\n\n    d[0][20]=*a;\n    d[1][20]=*b;\n    d[2][20]=*c;\n    printf(\"%s -- %s -- %s\", d[0], d[1], d[2]);\n    return 0;\n}\n</code></pre>\n\n<p>Whenever I run it, this is what comes out:</p>\n\n<pre><code>( -- \u2561\u25a0\u00a0\u00a0\u00a0:A&amp;w\u2550l&amp;w\u00c9\u221f@ -- l&amp;w\u00c9\u221f@\n</code></pre>\n\n<p>What I'm trying to do is make it print out\nlalala\nbababa\nnanana</p>\n\n<p>Am I missing something obvious or do I need to do something more complicated to make an array for strings?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 2, "creation_date": 1427314106, "post_id": 29265506, "comment_id": 46732759, "body": "<code>reverse(strdup(string))</code> or <code>inString = strdup(inString)</code> at the top of <code>reverse</code>"}, {"owner": {"reputation": 13340, "user_id": 2092587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63187c7f93648cd0c57e71e33ee2859a?s=128&d=identicon&r=PG", "display_name": "Trinimon", "link": "https://stackoverflow.com/users/2092587/trinimon"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1427314508, "post_id": 29265506, "comment_id": 46733016, "body": "@Colonel Thirty Two: that is too easy (<a href=\"http://codepad.org/ZDELCUzP\" rel=\"nofollow noreferrer\">codepad.org/ZDELCUzP</a>) :D ;)"}, {"owner": {"reputation": 302, "user_id": 4430757, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7d766983d20a5a28762b0ef58a151c47?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4430757/tom"}, "edited": false, "score": 0, "creation_date": 1427314680, "post_id": 29265506, "comment_id": 46733099, "body": "haha yeah, was definitely over complicating it."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1427314725, "post_id": 29265506, "comment_id": 46733125, "body": "Also don&#39;t forget to free the string. Also also add <code>return 0;</code> to the end of <code>main</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1427315036, "post_id": 29265506, "comment_id": 46733312, "body": "To insure <code>reverse</code> does not alter the original, add <code>const</code> --&gt; <code>char *reverse(const char *inString)</code>.  Now the body of <code>reverse()</code> needs changing. too."}, {"owner": {"reputation": 302, "user_id": 4430757, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7d766983d20a5a28762b0ef58a151c47?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4430757/tom"}, "edited": false, "score": 0, "creation_date": 1427315652, "post_id": 29265506, "comment_id": 46733680, "body": "I actually just added the const right before you said that.  Should have had it in there initially though. ty"}], "answers": [{"tags": [], "owner": {"reputation": 242, "user_id": 4697393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8J1Rr.jpg?s=128&g=1", "display_name": "Mariano Macchi", "link": "https://stackoverflow.com/users/4697393/mariano-macchi"}, "is_accepted": false, "score": 0, "last_activity_date": 1427314379, "creation_date": 1427314379, "answer_id": 29265617, "question_id": 29265506, "link": "https://stackoverflow.com/questions/29265506/string-reversal-without-altering-original-string/29265617#29265617", "title": "String reversal without altering original string", "body": "<p>string and outString are referencing the same object in memory, i.e. the \"hello world\" string array, that's why you get the same reversed string.</p>\n\n<p>Either you copy the array and reverse the copy or you reverse the string to its original form.</p>\n"}, {"tags": [], "owner": {"reputation": 8483, "user_id": 677022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jJlWr.png?s=128&g=1", "display_name": "Nicol&#225;s Ozimica", "link": "https://stackoverflow.com/users/677022/nicol%c3%a1s-ozimica"}, "is_accepted": false, "score": 0, "last_activity_date": 1427314393, "creation_date": 1427314393, "answer_id": 29265623, "question_id": 29265506, "link": "https://stackoverflow.com/questions/29265506/string-reversal-without-altering-original-string/29265623#29265623", "title": "String reversal without altering original string", "body": "<p>Your problem is you're indeed modifying your input string, in the line:</p>\n\n<pre><code>inString[i] = inString[j];\n</code></pre>\n\n<p>You don't need to do such thing. Just set the j-th char of the output string, after malloc-ing its proper space in memory.</p>\n"}, {"comments": [{"owner": {"reputation": 302, "user_id": 4430757, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7d766983d20a5a28762b0ef58a151c47?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4430757/tom"}, "edited": false, "score": 0, "creation_date": 1427315039, "post_id": 29265680, "comment_id": 46733313, "body": "This was actually what I was looking to do.  Maybe I need to add a 5th criteria and rule out strdup()."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1427315272, "last_edit_date": 1427315272, "creation_date": 1427314591, "answer_id": 29265680, "question_id": 29265506, "link": "https://stackoverflow.com/questions/29265506/string-reversal-without-altering-original-string/29265680#29265680", "title": "String reversal without altering original string", "body": "<p>My suggestion:</p>\n\n<ol>\n<li>Allocate memory for a new string.</li>\n<li>Fill the new string that contains the reverse of the input string.</li>\n<li>Return the new string.</li>\n<li>Make sure to deallocate memory of the new string in the calling function.</li>\n</ol>\n\n<p>Something like:</p>\n\n<pre><code>char *reverse(char *inString)\n{\n   int len = strlen(inString);\n   char* retString = malloc(len+1);\n   if ( retString != NULL )\n   {\n      for(int i = 0 ; i &lt; len; ++i)\n      {\n         retString[len-1-i] = inString[i];\n      }\n      retString[len] = '\\0';\n   }\n   return retString;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1427315162, "post_id": 29265810, "comment_id": 46733383, "body": "Sweet! (aside from the <code>* sizeof( char )</code> which is always <code>* 1</code>)."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1427315050, "creation_date": 1427315050, "answer_id": 29265810, "question_id": 29265506, "link": "https://stackoverflow.com/questions/29265506/string-reversal-without-altering-original-string/29265810#29265810", "title": "String reversal without altering original string", "body": "<p>Here is a demonstrative program that shows how the function can be written.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar * reverse( const char *s )\n{\n    size_t n = strlen( s );\n\n    char *t = malloc( ( n + 1 ) * sizeof( char ) );\n\n    if ( t )\n    {\n        size_t i = 0;\n        for ( ; i &lt; n; i++ ) t[i] = s[n - i - 1];\n        t[i] = '\\0';\n    }\n\n    return t;\n}\n\nint main(void) \n{\n    char *s = \"Hello World\";\n    char *t = reverse( s );\n\n    puts( s );\n    puts( t );\n\n    free( t );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Hello World\ndlroW olleH\n</code></pre>\n\n<p>As you see yourself you have to allocate memory for the reversed string.</p>\n"}], "owner": {"reputation": 302, "user_id": 4430757, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7d766983d20a5a28762b0ef58a151c47?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4430757/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 29265680, "answer_count": 4, "score": 1, "last_activity_date": 1427315651, "creation_date": 1427313998, "question_id": 29265506, "link": "https://stackoverflow.com/questions/29265506/string-reversal-without-altering-original-string", "title": "String reversal without altering original string", "body": "<p>So there seems to be a plethora of string reversal questions on here, but the specific in which I want to do it seems to not be covered.  I was doing this simply as a refresher in C serves no significant purpose.  The criteria I wanted to meet, </p>\n\n<p>1.Write a function that would reverse a string </p>\n\n<p>2.Would not alter the original</p>\n\n<p>3.Must only take in the original string as argument</p>\n\n<p>4.Would not use an existing string reverse function</p>\n\n<p>I initially wrote the simple code to do the reversal, but have had difficulty making it not alter the original.  Initial code follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nchar *reverse(char *inString){\n    int j = 0;\n    j = strlen(inString) -1;\n    char temp;\n    for(int i = 0 ; i&lt;=j; i++,j--){\n        temp = inString[i];\n        inString[i] = inString[j];\n        inString[j] = temp;\n    }\n    return inString;\n}\n\n\nint main(){\n    char string[20]=\"hello world\";\n    printf(\"%s\\n\",string);\n    char *outString = reverse(string);\n    printf(\"%s\\n\",string);\n    printf(\"%s\\n\",outString);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>hello world\ndlrow olleh\ndlrow olleh\n</code></pre>\n"}, {"tags": ["c", "windows", "matlab"], "owner": {"reputation": 53, "user_id": 3050873, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea39e172c4bd6e833c88d0eeee14bf91?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio HL", "link": "https://stackoverflow.com/users/3050873/sergio-hl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427313689, "creation_date": 1427313689, "question_id": 29265414, "link": "https://stackoverflow.com/questions/29265414/thorcam-c-api-implementation", "title": "Thorcam C API implementation", "body": "<p>This is kind of noob question since I don't program a lot in C. The problem I have is when using the C API for the DCU 223 camera from Thorlabs. I need to wrap some functions to use the video capabilites reported in the API under Matlab (through some mex files) but when  trying to make some simple examples, using only C, </p>\n\n<p>The program is:</p>\n\n<pre><code>#include \"uc480.h\"\n#include \"stdio.h\"\n\n\nint main() {\n\n    int * pnc;\n    int r = -1;\n\n    r = is_GetNumberOfCameras( pnc );\n\n    if(r == IS_SUCCESS)\n        printf(\"numero de camaras %d\", pnc);\n    else if(r == IS_NO_SUCCESS)\n        printf(\"numero de camaras %d\", pnc);\n\n    return r;\n}\n</code></pre>\n\n<p>Where I get this error when compiling</p>\n\n<pre><code>In file included from prueba.c:1:0:\nuc480.h:3225:5: error: expected identifier before '}' token\n} TRANSFER_CAPABILITY_FLAGS;\n</code></pre>\n\n<p>The specific line in uc480.h is:</p>\n\n<pre><code>typedef enum E_TRANSFER_CAPABILITY_FLAGS\n{\n} TRANSFER_CAPABILITY_FLAGS;\n</code></pre>\n\n<p>The video capabilites of the camera are accessible through a library called uc480_toos.h but when I try to call this library from matlab I get a lot of compilation errors.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Thaks for the attention.</p>\n"}, {"tags": ["c", "arrays", "list", "sorting", "tree"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 4663639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3bf738256ec0257f61ab8a5e6276247c?s=128&d=identicon&r=PG&f=1", "display_name": "Goma", "link": "https://stackoverflow.com/users/4663639/goma"}, "is_accepted": false, "score": 1, "last_activity_date": 1427403679, "creation_date": 1427403679, "answer_id": 29288780, "question_id": 29265402, "link": "https://stackoverflow.com/questions/29265402/sorting-a-binary-tree-function-reaches-seg-fault/29288780#29288780", "title": "Sorting a Binary Tree - Function reaches seg. fault", "body": "<p>This is how the code should look like after solving the segmentation fault.</p>\n\n<pre><code>void insert_Leaf(int L,int R, hojaNodo **leaf)\n{\n\n//JiCase\nprintf(\"inside insert_leaf\\n\");\n\n    if(L+R &gt;= 101)\n        return;\n\n\n    hojaNodo *tempLeafHead;\n    tempLeafHead = (hojaNodo*)malloc(sizeof(hojaNodo));\n    tempLeafHead = *leaf;\n\n\n\n\n\n    int tempLeft = L;\n    int tempRight = R;\n    int tempParent = tempLeft + tempRight;\n    //Creamos Parent\n  if(tempLeafHead == 0)\n    {\n    printf(\"head is null\\n\");\n\n\n    tempLeafHead = (hojaNodo*)malloc(sizeof(hojaNodo));\n\n    hojaNodo *tempLeafLeftChild;\n    tempLeafLeftChild = (hojaNodo*)malloc(sizeof(hojaNodo));\n\n    hojaNodo *tempLeafRightChild;\n    tempLeafRightChild = (hojaNodo*)malloc(sizeof(hojaNodo));\n\n\n      tempLeafHead-&gt;probabilidad = tempLeft + tempRight;\n      tempLeafHead-&gt;left = tempLeafLeftChild;\n      tempLeafHead-&gt;right = tempLeafRightChild;\n      tempLeafLeftChild-&gt;probabilidad = tempLeft;\n      tempLeafRightChild-&gt;probabilidad = tempRight;\n      *leaf = tempLeafHead;\n      return;\n    } else if(tempLeafHead != NULL){\n\n    printf(\"head is NOT null\\n\");\n        if(tempLeft &lt; tempLeafHead-&gt;probabilidad){\n\n        hojaNodo *tempLeafParent;\n        tempLeafParent = (hojaNodo*)malloc(sizeof(hojaNodo));\n\n        hojaNodo *tempLeafLeftChild;\n        tempLeafLeftChild = (hojaNodo*)malloc(sizeof(hojaNodo));\n\n        tempLeafParent-&gt;probabilidad = tempLeft + tempLeafHead-&gt;probabilidad;\n        tempLeafParent-&gt;right = tempLeafHead;\n        tempLeafParent-&gt;left = tempLeafLeftChild;\n\n        tempLeafLeftChild-&gt;probabilidad = tempLeft;\n        //tempLeaf-&gt;right = *leaf;\n        *leaf = tempLeafParent;\n        }//eof if\n\n   }//elseif\n\n}//eof insertLeaf\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4663639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3bf738256ec0257f61ab8a5e6276247c?s=128&d=identicon&r=PG&f=1", "display_name": "Goma", "link": "https://stackoverflow.com/users/4663639/goma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427403679, "creation_date": 1427313656, "last_edit_date": 1427401171, "question_id": 29265402, "link": "https://stackoverflow.com/questions/29265402/sorting-a-binary-tree-function-reaches-seg-fault", "title": "Sorting a Binary Tree - Function reaches seg. fault", "body": "<p>I want to create a tree using the next array:</p>\n\n<pre><code>int numbers[] = {4,6,7,23,60};\n</code></pre>\n\n<p>The idea is that the numbers sum up to 100.</p>\n\n<p>I want to order this list in a tree using the next format:</p>\n\n<p>1.Create a treeLeafNode space if it doesn't exist.</p>\n\n<ol start=\"2\">\n<li>Take the lowest values(4,6...This values will be the child nodes) and make a sum.(10...this will be the parent node)</li>\n</ol>\n\n<p>3.Trim the list using the parent node, you now have (10,7,23,60)</p>\n\n<ol start=\"4\">\n<li><p>Sort from the numbers you now have low-high(7,10,23,60)</p></li>\n<li><p>ReDo step 1,2,3,4 until you reach the 'top', which would be(LeftChildNode: 40, ParentNode: 100, RightChildNode: 60);</p></li>\n</ol>\n\n<p>The problem:From the tools you have now, what would be the easiest way to create the tree?</p>\n\n<p>Here's what I've got so far.</p>\n\n<p>I've got this functions: Trimming, Sorting from low to high.\nThe problem: My tree creating function is as follows...but reaches a segmentation fault:</p>\n\n<pre><code>void insert_Leaf(int L,int R, hojaNodo **leaf)\n{\n\n//JiCase \n    if(L+R &gt;= 101)\n        return;\n\n\n\n    hojaNodo *tempLeafMain;\n    tempLeafMain = (hojaNodo*)malloc(sizeof(hojaNodo));\n    tempLeafMain = *leaf;\n\n    hojaNodo *tempLeafLeft;\n    tempLeafLeft = (hojaNodo*)malloc(sizeof(hojaNodo));\n\n\n\n\n    int tempLeft = L;\n    int tempRight = R;\n    int tempParent = tempLeft + tempRight;\n    //Creamos Parent\n  if(tempLeafMain == 0)\n    {\n\n\n    hojaNodo *tempLeafRight;\n    tempLeafRight = (hojaNodo*)malloc(sizeof(hojaNodo));\n\n\n      tempLeafMain-&gt;probabilidad = tempParent;\n      // init los hijos a null \n      tempLeafMain-&gt;left = tempLeafLeft;\n      tempLeafMain-&gt;right = tempLeafRight;\n\n      tempLeafLeft -&gt;probabilidad = tempLeft;\n      tempLeafRight-&gt;probabilidad = tempRight;\n\n      return;\n    }//eof check doesnt exist\n\n   else if(tempLeafMain != NULL){\n   if(tempLeft &lt; tempLeafMain-&gt;probabilidad){\n\n    hojaNodo *tempLeafParent;\n    tempLeafParent = (hojaNodo*)malloc(sizeof(hojaNodo));\n    tempLeafParent-&gt;probabilidad = tempLeft + tempLeafMain-&gt;probabilidad;\n    tempLeafParent-&gt;right = tempLeafMain;\n    tempLeafParent-&gt;left = tempLeafLeft;\n\n    tempLeafLeft-&gt;probabilidad = tempLeft;\n    //tempLeaf-&gt;right = *leaf;\n    *leaf = tempLeafParent;\n    }//eof if\n\n   }//elseif\n\n   }//eof insertLeaf\n</code></pre>\n\n<p>Thank you for your time and if possible, your help.\nHave a good day!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1427313234, "post_id": 29265246, "comment_id": 46732317, "body": "<code>complex</code> isn&#39;t a keyword; it&#39;s simply a macro expanding to the keyword <code>_Complex</code>."}, {"owner": {"reputation": 78, "user_id": 2593260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9cad5f9a9f22733ee390c69d9f1925?s=128&d=identicon&r=PG", "display_name": "peterahrens", "link": "https://stackoverflow.com/users/2593260/peterahrens"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1427313338, "post_id": 29265246, "comment_id": 46732362, "body": "Edited to reflect the truth. Thanks @KerrekSB!"}, {"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1427313397, "post_id": 29265246, "comment_id": 46732397, "body": "Why do you want to implement this instead of something like <code>typdef &lt;whatever you want&gt; rabbit</code> and then <code>rabbit bar</code>"}, {"owner": {"reputation": 78, "user_id": 2593260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9cad5f9a9f22733ee390c69d9f1925?s=128&d=identicon&r=PG", "display_name": "peterahrens", "link": "https://stackoverflow.com/users/2593260/peterahrens"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1427313823, "post_id": 29265246, "comment_id": 46732614, "body": "@KerrekSB I realize that this is almost an answer to my question. Because <code>complex</code> expands to <code>_Complex</code> and <code>_Complex</code> is a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Complex.html/\" rel=\"nofollow noreferrer\">keyword</a> in C99, the compiler must do the work of associating the label <code>foo</code> to the appropriate type, and I can&#39;t easily declare my own keywords. It would have been nice though!"}, {"owner": {"reputation": 78, "user_id": 2593260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9cad5f9a9f22733ee390c69d9f1925?s=128&d=identicon&r=PG", "display_name": "peterahrens", "link": "https://stackoverflow.com/users/2593260/peterahrens"}, "reply_to_user": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1427314338, "post_id": 29265246, "comment_id": 46732896, "body": "@mstbaum I am implementing a type that functions very similarly to a <code>double</code> (alternate precision/additive properties), and felt that it modified a <code>double</code> in an analogous fashion to the how <code>_Complex</code> types modify a <code>double</code>. I realize that I should probably just give up and use a type named <code>double_rabbit</code>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1427315858, "post_id": 29265246, "comment_id": 46733783, "body": "@peterpants: No, if random developers could go around adding their own new keywords, that would be the exact opposite of &quot;nice&quot; :-S"}], "answers": [{"comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1427313597, "post_id": 29265347, "comment_id": 46732489, "body": "So why can <code>complex</code> do so? This doesn&#39;t answer the question."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1427314383, "post_id": 29265347, "comment_id": 46732925, "body": "@ColonelThirtyTwo It answers the part when OP asks how he can create his types."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1427316170, "post_id": 29265347, "comment_id": 46733951, "body": "Syntactically, <code>_Complex</code>, <code>long</code>, <code>float</code>, <code>double</code>, <code>signed</code>, <code>unsigned</code>, <code>int</code> et al are all type specifiers. There&#39;s no real distinction between modifiers and non-modifiers, and the type specifiers can appear in any order. For example, <code>double _Complex long</code> is valid and equivalent to <code>long double _Complex</code>."}], "tags": [], "owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "is_accepted": false, "score": 2, "last_activity_date": 1427314002, "last_edit_date": 1427314002, "creation_date": 1427313447, "answer_id": 29265347, "question_id": 29265246, "link": "https://stackoverflow.com/questions/29265246/how-does-the-complex-macro-modify-the-double-and-float-types-in-c/29265347#29265347", "title": "How does the &quot;complex&quot; macro modify the &quot;double&quot; and &quot;float&quot; types in C?", "body": "<p>You can't. </p>\n\n<p>You can't make <code>double rabbit x;</code> do something different, the same way you can't make <code>unsigned rabbit x;</code> do that.</p>\n\n<p><code>_Complex</code> is special cased in the language. There are three complex types: <code>float _Complex</code>, <code>double _Complex</code>, <code>long double _Complex</code>. As you can see, the <code>float/double/long double</code> is the modifier, just like <code>unsigned</code> or <code>long</code> or <code>short</code> are for <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 4, "last_activity_date": 1427330943, "last_edit_date": 1427330943, "creation_date": 1427313823, "answer_id": 29265454, "question_id": 29265246, "link": "https://stackoverflow.com/questions/29265246/how-does-the-complex-macro-modify-the-double-and-float-types-in-c/29265454#29265454", "title": "How does the &quot;complex&quot; macro modify the &quot;double&quot; and &quot;float&quot; types in C?", "body": "<p>Starting with C99, <code>_Complex</code> is a keyword, part of the core language. Syntactically it's a <em>type specifier</em>, like <code>long</code> or <code>unsigned</code>. It can be used along with any of <code>float</code>, <code>double</code>, or <code>long double</code>.</p>\n\n<p>Thus <code>_Complex double</code> is a type, built into the language.</p>\n\n<p>The standard header <code>&lt;complex.h&gt;</code> defines <code>complex</code> as a macro that expands to <code>_Complex</code>. This is just for convenience. The keyword was given the spelling <code>_Complex</code> to avoid conflicting with valid pre-C99 code; the macro can be used to enable the more common term <code>complex</code> for complex types.</p>\n\n<p>(The C11 standard makes complex types optional.)</p>\n\n<p>There is no language mechanism for defining your own type specifiers.</p>\n"}], "owner": {"reputation": 78, "user_id": 2593260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9cad5f9a9f22733ee390c69d9f1925?s=128&d=identicon&r=PG", "display_name": "peterahrens", "link": "https://stackoverflow.com/users/2593260/peterahrens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 29265454, "answer_count": 2, "score": 0, "last_activity_date": 1427330943, "creation_date": 1427313154, "last_edit_date": 1427313289, "question_id": 29265246, "link": "https://stackoverflow.com/questions/29265246/how-does-the-complex-macro-modify-the-double-and-float-types-in-c", "title": "How does the &quot;complex&quot; macro modify the &quot;double&quot; and &quot;float&quot; types in C?", "body": "<p>What preprocessor/compiler magic happens in order to make the declaration:</p>\n\n<pre><code>#include &lt;complex.h&gt;\ndouble complex foo;\n</code></pre>\n\n<p>resolve to a declaration of a complex double <code>foo</code>?</p>\n\n<p>More specifically, how can I mimic this functionality to create, say, a <code>rabbit</code> type so that I could <code>#include \"rabbit.h\"</code> and then when I declare:</p>\n\n<pre><code> double rabbit bar;\n</code></pre>\n\n<p><code>bar</code> is declared as a type of my choosing?</p>\n"}, {"tags": ["c", "assembly", "arm"], "comments": [{"owner": {"reputation": 23, "user_id": 4060036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc17c14b46b02e942ce9f4b8d026cb4?s=128&d=identicon&r=PG&f=1", "display_name": "prodigy09", "link": "https://stackoverflow.com/users/4060036/prodigy09"}, "edited": false, "score": 0, "creation_date": 1427312245, "post_id": 29264953, "comment_id": 46731769, "body": "my code isn&#39;t compiling properly on ARM , can anyone please point my mistake or whatever i&#39;m doing incorrect? THANKS"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1427316749, "post_id": 29264953, "comment_id": 46734262, "body": "Saying <code>isn&#39;t compiling properly</code> isn&#39;t very informative - how did you compile it, what compiler are you using and what error do you get?"}, {"owner": {"reputation": 23, "user_id": 4060036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc17c14b46b02e942ce9f4b8d026cb4?s=128&d=identicon&r=PG&f=1", "display_name": "prodigy09", "link": "https://stackoverflow.com/users/4060036/prodigy09"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1427317962, "post_id": 29264953, "comment_id": 46734921, "body": "using the ARM compiler, which compiles both assembly and C code and prints the output."}, {"owner": {"reputation": 23, "user_id": 4060036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc17c14b46b02e942ce9f4b8d026cb4?s=128&d=identicon&r=PG&f=1", "display_name": "prodigy09", "link": "https://stackoverflow.com/users/4060036/prodigy09"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1427318000, "post_id": 29264953, "comment_id": 46734945, "body": "its getting stuck in an infinite loop , in the assembly code i guess"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1427321936, "post_id": 29264953, "comment_id": 46736715, "body": "How does it get stuck in an infinite loop if it doesn&#39;t compile? The whole question needs more specific details like the compiler command line, and perhaps the expected output - I&#39;m not sure I&#39;ve guessed correctly as to which interpretation of &quot;insert&quot; is correct in this context, but I&#39;m <i>fairly</i> sure it&#39;s not the &quot;make a copy of the first string, but add some unknown value to every character (including the null terminator), and return a pointer past the end of it&quot; one... Stepping through the instructions in a debugger and watching the data in the registers would be a <i>very</i> valuable pastime."}], "owner": {"reputation": 23, "user_id": 4060036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc17c14b46b02e942ce9f4b8d026cb4?s=128&d=identicon&r=PG&f=1", "display_name": "prodigy09", "link": "https://stackoverflow.com/users/4060036/prodigy09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427316675, "creation_date": 1427312223, "last_edit_date": 1427316675, "question_id": 29264953, "link": "https://stackoverflow.com/questions/29264953/trying-to-write-a-assembly-function-that-will-insert-a-second-string-into-a-firs", "title": "Trying to write a assembly function that will insert a second string into a first string at a specific offset and return a pointer to the new string", "body": "<p><strong>My C Code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nextern char * ins( char * string1, char * string2, int place ) ;\n\nint main( int argc, char * argv[] ) \n{\n    char s1[] = \"String to insert into\" ;\n    char s2[] = \" this is the string to insert\" ;\n    int place = 9 ;\n    char * result ;\n\n    result = ins( s1, s2, place ) ;\n    printf( \"s1:\\t%s\\n\", s1 ) ;\n    printf( \"s2:\\t%s\\n\", s2 ) ;\n    printf( \"resulting string: %s\\n\", result ) ;\n\n    exit( 0 ) ;\n}\n</code></pre>\n\n<p>This C code will work with the following Assembly code as the function \"ins\" is defined below , The ARM compiler takes both C and assembly files and compiles them together...It should process the ins function in Assembly language , and print the result out from C.</p>\n\n<hr>\n\n<p><strong>My Assembly Code:</strong></p>\n\n<pre><code>    .global ins\nins:\n                stmfd sp!, {v1-v6, lr} \n                mov v1, a1             \n                bl strlen              \n                add a1, a1, #1         \n                mov v2, a1             \n                bl malloc             \n                mov v3, #0             \nloop:           \n                ldrb v4, [v1], #1       \n                subs v2, v2, #1\n                add v4, v4, a2         \n                strb v4, [a1], #1                \n                bne loop\n\n                ldmfd sp!, {v1-v6, pc} @std\n.end\n</code></pre>\n"}, {"tags": ["python", "c", "enums"], "comments": [{"owner": {"reputation": 173, "user_id": 4713687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqeGym4u0-E/AAAAAAAAAAI/AAAAAAAAAYY/Dmqo8J6H44A/photo.jpg?sz=128", "display_name": "ls6777", "link": "https://stackoverflow.com/users/4713687/ls6777"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1427403409, "post_id": 29264941, "comment_id": 46774616, "body": "@David, I did see before I posted <a href=\"http://stackoverflow.com/questions/36932/how-can-i-represent-an-enum-in-python\">How can I represent an &#39;Enum&#39; in Python?</a> but I didn&#39;t think it answered my specific request in a good way.  I believe the answers below are much better served for this particular request."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1427403537, "post_id": 29264941, "comment_id": 46774691, "body": "The answers here are a subset of, and a pale imitation, of the answers there. I suggest that you read those answers more closely."}, {"owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "edited": false, "score": 0, "creation_date": 1457515152, "post_id": 29264941, "comment_id": 59436186, "body": "I just went through those answers, and none of them address the OP&#39;s question.  If you are curious about my credentials: I&#39;m the primary author of the <a href=\"http://docs.python.org/3.4/library/enum.html\" rel=\"nofollow noreferrer\">Enum data type</a>, and of the <a href=\"https://pypi.python.org/pypi/enum34\" rel=\"nofollow noreferrer\">enum34 backport</a>."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4713687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqeGym4u0-E/AAAAAAAAAAI/AAAAAAAAAYY/Dmqo8J6H44A/photo.jpg?sz=128", "display_name": "ls6777", "link": "https://stackoverflow.com/users/4713687/ls6777"}, "edited": false, "score": 0, "creation_date": 1427325831, "post_id": 29265359, "comment_id": 46738202, "body": "Thanks! I think this and @Saturisk answers will work for my purposes.  I just need to pick which one I want to use :)"}], "tags": [], "owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "is_accepted": false, "score": 3, "last_activity_date": 1427316619, "last_edit_date": 1495542230, "creation_date": 1427313488, "answer_id": 29265359, "question_id": 29264941, "link": "https://stackoverflow.com/questions/29264941/creating-c-like-enum-in-python/29265359#29265359", "title": "Creating C like Enum in Python", "body": "<p>Maybe you could use some variant of <a href=\"https://docs.python.org/3/library/enum.html\" rel=\"nofollow noreferrer\">this</a> in Python 3. For Python 2, I simply did the following (with parentheses to avoid an ugly <code>\\</code> at the end of each line):</p>\n\n<pre><code>(T_OR, T_AND, T_NOT,\n T_OPEN_PAREN, T_CLOSE_PAREN,\n T_EQUAL, T_UNEQUAL,\n ...\n T_DEFCONFIG_LIST, T_MODULES, T_VISIBLE) = range(0, 39)\n</code></pre>\n\n<p>To handle multiple ranges, just use multiple separate <code>range()</code> assignments. The downside is that you have to specify the final value explicitly.</p>\n\n<p>There seems to be some fancier methods in <a href=\"https://stackoverflow.com/questions/36932/how-can-i-represent-an-enum-in-python\">How can I represent an &#39;Enum&#39; in Python?</a> too, but the above should be closest to a C-style <code>enum</code> with minimal syntactic overhead.</p>\n\n<p>Not a serious suggestion, but if you enjoy cryptic code and questionable practices, then the hack below seems to work as well for a C-style <code>enum</code> (with the caveat that the enumerators are always created at module scope). Feel free to harp on it. ;)</p>\n\n<pre><code>def create_var_range(first_val, *names):\n    for name in names:\n        globals()[name] = first_val\n        first_val += 1\n\ncreate_var_range(0,\n                 \"NONE\",\n                 \"HEARTBEAT\",\n                 ...)\n\ncreate_var_range(0x010000,\n                 \"START_SENDING_PICTURES\",\n                 \"STOP_SENDING_PICTURES\",\n                 ...)\n</code></pre>\n\n<p><code>create_var_range()</code> steps through its variable argument list of names and creates a variable for each, assigning increasing integer values starting from <code>first_val</code>. It makes use of the <code>globals()</code> function, which return a dictionary with the global symbol table.</p>\n"}, {"comments": [{"owner": {"reputation": 1979, "user_id": 3630690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74e07d479c6f8e67f5b06bfb152bd5e?s=128&d=identicon&r=PG&f=1", "display_name": "Shawnic Hedgehog", "link": "https://stackoverflow.com/users/3630690/shawnic-hedgehog"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1427319742, "post_id": 29265816, "comment_id": 46735790, "body": "I updated with working code. This is mostly a hack, but effectively works as a self-updating enumeration."}, {"owner": {"reputation": 173, "user_id": 4713687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqeGym4u0-E/AAAAAAAAAAI/AAAAAAAAAYY/Dmqo8J6H44A/photo.jpg?sz=128", "display_name": "ls6777", "link": "https://stackoverflow.com/users/4713687/ls6777"}, "edited": false, "score": 0, "creation_date": 1427326093, "post_id": 29265816, "comment_id": 46738281, "body": "I&#39;m not a huge fan of the <code>= ()</code> after each enum, but this does the job that I want.  Thanks!"}], "tags": [], "owner": {"reputation": 1979, "user_id": 3630690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74e07d479c6f8e67f5b06bfb152bd5e?s=128&d=identicon&r=PG&f=1", "display_name": "Shawnic Hedgehog", "link": "https://stackoverflow.com/users/3630690/shawnic-hedgehog"}, "is_accepted": false, "score": 3, "last_activity_date": 1606318945, "last_edit_date": 1606318945, "creation_date": 1427315068, "answer_id": 29265816, "question_id": 29264941, "link": "https://stackoverflow.com/questions/29264941/creating-c-like-enum-in-python/29265816#29265816", "title": "Creating C like Enum in Python", "body": "<p>Please see the <a href=\"https://docs.python.org/3/library/enum.html\" rel=\"nofollow noreferrer\">Python documentation</a> for Python 3.4 if this is applicable. I wrote my code based off of what I found here.</p>\n<p>This is mostly a hack because I'm sure there is a much more efficient way to solve what I have done.</p>\n<pre><code>from enum import IntEnum\nimport re\n\nclass AutoNumber(IntEnum):\n    def __new__(cls, *args):\n        numberList = re.findall(r'\\d+', str(cls._member_map_))\n        if len(cls.__members__) &gt; 0 and not args:\n            prevMax = max(map(int, numberList))\n            value = prevMax + 1\n            print(format(value, '#04x'))\n        else:\n            value = args[0]\n            print(format(value, '#04x'))\n\n        integer = int.__new__(cls)\n        integer._value_ = value\n        return integer\n\nclass EnumClass(AutoNumber):\n   NONE = 0\n   HEARTBEAT = () # 0x1\n   FLUID_TRANSFER_REQUEST = ()\n   # ...\n\n   # Camera App Messages\n   START_SENDING_PICTURES = 0x010000\n   STOP_SENDING_PICTURES = ()\n   START_RECORDING_VIDEO_REQ = ()\n   # ...\n\n   # Sensor Calibration\n   VOLUME_REQUEST = 0x020000\n   START_CAL = ()\n   # ...\n\n   # File Mananger\n   NEW_DELIVERY_REQ = 0x30000\n   GET_DELIVERY_FILE_REQ = ()\n   GET_FILE_REQ = ()\n   # ...\n</code></pre>\n<p>This 'enum' outputs are effectively:</p>\n<pre><code>0x00 # NONE\n0x01\n0x02\n...\n0x10000 # START_SENDING_PICTURES\n0x10001\n0x10002\n...\n0x20000 # VOLUME_REQUEST\n0x20001\n...\n0x30000 # NEW_DELIVERY_REQ\n0x30001\n0x30002\n...\n</code></pre>\n<p>Note, the output is when the item is created using the print statement, it was meant for debug purposes, but it's the nicest way I could get the data to come out.</p>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 4713687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqeGym4u0-E/AAAAAAAAAAI/AAAAAAAAAYY/Dmqo8J6H44A/photo.jpg?sz=128", "display_name": "ls6777", "link": "https://stackoverflow.com/users/4713687/ls6777"}, "edited": false, "score": 0, "creation_date": 1476309743, "post_id": 35965438, "comment_id": 67296332, "body": "This is pretty cool and may be the cleanest, simplest solution, but I didn&#39;t have the library at the time.  And I believe we were limited to what external libraries we could include.  Nice solution though @Ethan :)"}, {"owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 173, "user_id": 4713687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqeGym4u0-E/AAAAAAAAAAI/AAAAAAAAAYY/Dmqo8J6H44A/photo.jpg?sz=128", "display_name": "ls6777", "link": "https://stackoverflow.com/users/4713687/ls6777"}, "edited": false, "score": 1, "creation_date": 1476310076, "post_id": 35965438, "comment_id": 67296457, "body": "@ls6777:  Thanks!  If you like it, it&#39;s okay to up-vote it.  ;)"}, {"owner": {"reputation": 173, "user_id": 4713687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqeGym4u0-E/AAAAAAAAAAI/AAAAAAAAAYY/Dmqo8J6H44A/photo.jpg?sz=128", "display_name": "ls6777", "link": "https://stackoverflow.com/users/4713687/ls6777"}, "edited": false, "score": 0, "creation_date": 1476465330, "post_id": 35965438, "comment_id": 67373281, "body": "I did upvote, but it won&#39;t publicly display until I have 15 rep points ;)"}, {"owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 173, "user_id": 4713687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqeGym4u0-E/AAAAAAAAAAI/AAAAAAAAAYY/Dmqo8J6H44A/photo.jpg?sz=128", "display_name": "ls6777", "link": "https://stackoverflow.com/users/4713687/ls6777"}, "edited": false, "score": 1, "creation_date": 1476465931, "post_id": 35965438, "comment_id": 67373627, "body": "Ah, okay.  Thanks!"}, {"owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 461, "user_id": 1578968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76af36794698aec8c167a92d69b408b9?s=128&d=identicon&r=PG", "display_name": "roberto", "link": "https://stackoverflow.com/users/1578968/roberto"}, "edited": false, "score": 0, "creation_date": 1606319393, "post_id": 35965438, "comment_id": 114929986, "body": "@roberto:  More details, please -- I just tested with the latest versions of aenum and Python and it worked fine."}, {"owner": {"reputation": 461, "user_id": 1578968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76af36794698aec8c167a92d69b408b9?s=128&d=identicon&r=PG", "display_name": "roberto", "link": "https://stackoverflow.com/users/1578968/roberto"}, "edited": false, "score": 0, "creation_date": 1606461752, "post_id": 35965438, "comment_id": 114973282, "body": "yes it runs, but i was confused by the fact that pycharm underlines in red indicating &#39;Unresolved ref NONE&#39; and all the rest"}, {"owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 461, "user_id": 1578968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76af36794698aec8c167a92d69b408b9?s=128&d=identicon&r=PG", "display_name": "roberto", "link": "https://stackoverflow.com/users/1578968/roberto"}, "edited": false, "score": 0, "creation_date": 1606507520, "post_id": 35965438, "comment_id": 114990475, "body": "@roberto: Thank you, that&#39;s a much more useful comment.  And you&#39;re right -- linters, etc., will not be happy with the above code, or other code shenanigans (such as modifying <code>globals()</code> to create variables)."}], "tags": [], "owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "is_accepted": true, "score": 2, "last_activity_date": 1611936922, "last_edit_date": 1611936922, "creation_date": 1457832752, "answer_id": 35965438, "question_id": 29264941, "link": "https://stackoverflow.com/questions/29264941/creating-c-like-enum-in-python/35965438#35965438", "title": "Creating C like Enum in Python", "body": "<p>There is a new <a href=\"https://pypi.python.org/pypi/aenum\" rel=\"nofollow noreferrer\">aenum library</a> by the author of <a href=\"https://pypi.python.org/pypi/enum34\" rel=\"nofollow noreferrer\"><code>enum34</code></a> which has a few extra goodies (such as a class-based <code>NamedTuple</code> and a <code>Constant</code> class).</p>\n<p>One of the cool features available if you are using Python 3 is the built-in auto-numbering:</p>\n<pre><code>from aenum import Enum\n\nclass Id(Enum, start=0):\n    #\n    _auto_on_                   # needed since aenum 3.0\n    #\n    NONE  # 0x0\n    HEARTBEAT  # 0x1\n    FLUID_TRANSFER_REQUEST\n    FLUID_TRANSFER_STATUS_MSG\n    FLUID_TRANSFER_ERROR_MSG\n    # ...\n    # Camera App Messages\n    START_SENDING_PICTURES = 0x010000\n    STOP_SENDING_PICTURES\n    START_RECORDING_VIDEO_REQ\n    STOP_RECORDING_VIDEO_REQ\n    # ...\n    # Sensor Calibration\n    VOLUME_REQUEST = 0x020000\n    START_CAL\n    CLI_COMMAND_REQUEST\n    CLI_COMMAND_RESPONSE\n    #\n    # File Mananger\n    NEW_DELIVERY_REQ = 0x30000\n    GET_DELIVERY_FILE_REQ\n    GET_FILE_REQ\n    #\n    ACK_NACK\n    RESPONSE\n    #\n    LAST_ID\n</code></pre>\n<p>and in use:</p>\n<pre><code>print(repr(Id.HEARTBEAT))\n# &lt;Id.HEARTBEAT: 1&gt;\n\nprint(repr(Id.STOP_SENDING_PICTURES))\n# &lt;Id.STOP_SENDING_PICTURES: 65537&gt;\n\nprint(repr(Id.VOLUME_REQUEST))\n# &lt;Id.VOLUME_REQUEST: 131072&gt;\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 4713687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqeGym4u0-E/AAAAAAAAAAI/AAAAAAAAAYY/Dmqo8J6H44A/photo.jpg?sz=128", "display_name": "ls6777", "link": "https://stackoverflow.com/users/4713687/ls6777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1559, "favorite_count": 0, "accepted_answer_id": 35965438, "answer_count": 3, "score": 2, "last_activity_date": 1611936922, "creation_date": 1427312165, "question_id": 29264941, "link": "https://stackoverflow.com/questions/29264941/creating-c-like-enum-in-python", "title": "Creating C like Enum in Python", "body": "<p>Maybe I have already found the answer to this question in that it's not possible, but if there's a nifty trick... I'm all ears.  I'm trying to reproduce the following C enumeration list in python:</p>\n\n<pre><code>enum Id\n{\n   NONE = 0,\n   HEARTBEAT, //0x1\n   FLUID_TRANSFER_REQUEST,\n   FLUID_TRANSFER_STATUS_MSG,\n   FLUID_TRANSFER_ERROR_MSG,\n   FLUID_TRANSFER_RESUME,\n   EMERGENCY_STOP_MSG,\n   LOG_MSG,\n   VERSION_REQUEST,\n   VERSION_RESPONSE,\n   CHANNEL_INFORMATION_REQUEST,\n   CHANNEL_INFORMATION_RESPONSE,\n   TEST_REQUEST,\n   LED_CONTROL_REQ,\n   RESET_REQ,\n\n   // Camera App Messages\n   START_SENDING_PICTURES = 0x010000,\n   STOP_SENDING_PICTURES,\n   START_RECORDING_VIDEO_REQ,\n   STOP_RECORDING_VIDEO_REQ,\n   TAKE_PICTURE_REQ,\n   SET_VOLUME_LIMIT,         \n   VIDEO_FRAME_MSG,\n   PICTURE_MSG,\n   I_FRAME_REQUEST,\n   CURRENT_VOLUME,\n   START_ANALYZING_IMAGES_REQ,\n   STOP_ANALYZING_IMAGES_REQ,\n   SET_FILE_PATH,\n\n   //Sensor Calibration\n   VOLUME_REQUEST = 0x020000,\n   START_CAL,\n   CLI_COMMAND_REQUEST,\n   CLI_COMMAND_RESPONSE,\n\n   // File Mananger\n   NEW_DELIVERY_REQ = 0x30000,\n   GET_DELIVERY_FILE_REQ,\n   GET_FILE_REQ,\n\n   ACK_NACK,\n   RESPONSE,\n\n   LAST_ID\n};\n</code></pre>\n\n<p>However, I don't want to have to specify every value for the list because it's changing often.  Since I also have it set to a new value in the various sections, I can't use the AutoNumber methodology (e.g. VOLUME_REQUEST = 0x020000).  Anyone got a clever trick to reproduce C style enums in python, or am I stuck with reproducing it the hard way?</p>\n"}, {"tags": ["c", "data-structures", "tree", "binary-tree"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1427312324, "post_id": 29264905, "comment_id": 46731823, "body": "Use a local dynamic stack."}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 0, "last_activity_date": 1427312739, "creation_date": 1427312739, "answer_id": 29265095, "question_id": 29264905, "link": "https://stackoverflow.com/questions/29264905/binary-tree-traversal-without-using-recursion/29265095#29265095", "title": "Binary tree traversal without using recursion", "body": "<p>As pre-order can be done via <a href=\"http://en.wikipedia.org/wiki/Depth-first_search\" rel=\"nofollow\">depth-first search</a>, it could be done in this way; note that depth-first search is a recursive approach. That being said, I does not need to be implemented by recursive function calls but can be implemented by using a stack as an auxiliary data structure, which effectively is used to generate the visiting sequence which would otherwise be generated by recursion. In pseudocode, this can be done as follows, where <code>visit</code> would be the function to actually visit a node.</p>\n\n<pre><code>push the root of the tree to the stack;\nwhile (stack is not empty)\n{\n    Node = top of stack;\n    visit Node;\n    if Node has unvisited left child\n        push left child of Node\n    else if right child of Node is Not visited\n        push right child of Node\n    else\n        pop;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "is_accepted": false, "score": 0, "last_activity_date": 1427314056, "last_edit_date": 1427314056, "creation_date": 1427313520, "answer_id": 29265367, "question_id": 29264905, "link": "https://stackoverflow.com/questions/29264905/binary-tree-traversal-without-using-recursion/29265367#29265367", "title": "Binary tree traversal without using recursion", "body": "<p>I found this code :</p>\n\n<pre><code>void iterativePreorder(node *root)\n{\n     // Base Case\n    if (root == NULL)\n       return;\n\n    // Create an empty stack and push root to it\n    stack&lt;node *&gt; nodeStack;\n    nodeStack.push(root);\n\n    /* Pop all items one by one. Do following for every popped item\n       a) print it\n       b) push its right child\n       c) push its left child\n    Note that right child is pushed first so that left is processed first */\n    while (nodeStack.empty() == false)\n    {\n        // Pop the top item from stack and print it\n        struct node *node = nodeStack.top();\n        printf (\"%d \", node-&gt;data);\n        nodeStack.pop();\n\n        // Push right and left children of the popped node to stack\n        if (node-&gt;right)\n            nodeStack.push(node-&gt;right);\n        if (node-&gt;left)\n            nodeStack.push(node-&gt;left);\n    }\n}\n</code></pre>\n\n<p>here:\n<a href=\"http://www.geeksforgeeks.org/iterative-preorder-traversal/\" rel=\"nofollow\">http://www.geeksforgeeks.org/iterative-preorder-traversal/</a></p>\n\n<p>I am aware that this code is in C++ but you can create a simple stack set of functions in C to bypass that problem.</p>\n\n<p>If needed this link can help with that too :</p>\n\n<p><a href=\"http://groups.csail.mit.edu/graphics/classes/6.837/F04/cpp_notes/stack1.html\" rel=\"nofollow\">http://groups.csail.mit.edu/graphics/classes/6.837/F04/cpp_notes/stack1.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1427383061, "creation_date": 1427383061, "answer_id": 29282255, "question_id": 29264905, "link": "https://stackoverflow.com/questions/29264905/binary-tree-traversal-without-using-recursion/29282255#29282255", "title": "Binary tree traversal without using recursion", "body": "<p>You might be able to use a variant of a <a href=\"http://en.wikipedia.org/wiki/Threaded_binary_tree\" rel=\"nofollow\">threaded binary tree</a>; use the <code>right</code> link of the leaf nodes to point to the next node in the traverse, something like</p>\n\n<pre><code>                    +---+\n                    | A |\n                    +---+\n                   /     \\\n              +---+       +---+\n              | B |       | E |\n              +---+       +---+\n             /     \\      ^\n        +---+       +---+ |\n        | C |       | D | |\n        +---+       +---+ |\n            |       ^   | |\n            +-------+   +-+\n</code></pre>\n\n<p>The leaf node <code>C</code> explicitly points to <code>D</code>, which is the next node in the preorder traverse, and <code>D</code> explicitly points to <code>E</code>.  This makes insertions and deletions a bit more of a pain, but it gives you an easy preorder traverse without recursion and without an auxiliary stack.  </p>\n"}], "owner": {"reputation": 21, "user_id": 4713630, "user_type": "registered", "profile_image": "https://graph.facebook.com/1431539327143256/picture?type=large", "display_name": "Sourajit Behera", "link": "https://stackoverflow.com/users/4713630/sourajit-behera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1929, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1427383061, "creation_date": 1427312057, "question_id": 29264905, "link": "https://stackoverflow.com/questions/29264905/binary-tree-traversal-without-using-recursion", "title": "Binary tree traversal without using recursion", "body": "<p>Can anyone help to to create a binary tree and do a non recursive preorder traversal of the binary tree in c?</p>\n"}, {"tags": ["c", "linux", "gcc", "reverse-engineering", "reverse"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1427311707, "post_id": 29264694, "comment_id": 46731475, "body": "This has nothing to do with C or programming of any kind. It&#39;s an OS question: if I overwrite a file, can I recover it? Well, that depends on which OS you are using, but for 99% of them, the answer is no. Yet another reason programmers use Git."}, {"owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "edited": false, "score": 0, "creation_date": 1427311843, "post_id": 29264694, "comment_id": 46731562, "body": "It&#39;s more about reversing compilation I think."}, {"owner": {"reputation": 788, "user_id": 1843704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/572c3a3514bea91437fc0aaaa71be6a5?s=128&d=identicon&r=PG", "display_name": "plasma", "link": "https://stackoverflow.com/users/1843704/plasma"}, "edited": false, "score": 0, "creation_date": 1427311863, "post_id": 29264694, "comment_id": 46731571, "body": "You are essentially asking &quot;How do I decompile a binary?&quot; Google around and you&#39;ll see that decompilers exist, but won&#39;t give you what you are looking for: your original source code back. I hope you have backups and use version control!"}, {"owner": {"reputation": 788, "user_id": 1843704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/572c3a3514bea91437fc0aaaa71be6a5?s=128&d=identicon&r=PG", "display_name": "plasma", "link": "https://stackoverflow.com/users/1843704/plasma"}, "edited": false, "score": 0, "creation_date": 1427311904, "post_id": 29264694, "comment_id": 46731591, "body": "Also, see this link: <a href=\"http://boomerang.sourceforge.net/lostsource.php\" rel=\"nofollow noreferrer\">boomerang.sourceforge.net/lostsource.php</a>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1427314138, "post_id": 29264694, "comment_id": 46732777, "body": "Essentially no, but it you have a build with all the debug symbols, a good decompiler may be able to make only a huge mess."}, {"owner": {"reputation": 1, "user_id": 4474151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9bfdc77268b62617eeb19894b69b95a?s=128&d=identicon&r=PG&f=1", "display_name": "Alan_QT", "link": "https://stackoverflow.com/users/4474151/alan-qt"}, "edited": false, "score": 0, "creation_date": 1427396793, "post_id": 29264694, "comment_id": 46770987, "body": "I will try see boomerang,"}, {"owner": {"reputation": 1, "user_id": 4474151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9bfdc77268b62617eeb19894b69b95a?s=128&d=identicon&r=PG&f=1", "display_name": "Alan_QT", "link": "https://stackoverflow.com/users/4474151/alan-qt"}, "edited": false, "score": 0, "creation_date": 1427396967, "post_id": 29264694, "comment_id": 46771075, "body": "realy I could ask better my answer but you understood :)"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1427314082, "post_id": 29264804, "comment_id": 46732744, "body": "Note that &#39;code you have written&#39; and worst code you&#39;ve ever seen&#39; are not mutually exclusive :)"}], "tags": [], "owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "is_accepted": false, "score": 0, "last_activity_date": 1427311709, "creation_date": 1427311709, "answer_id": 29264804, "question_id": 29264694, "link": "https://stackoverflow.com/questions/29264694/gcc-revert-process-binary-to-c/29264804#29264804", "title": "GCC - revert Process binary to C", "body": "<p>Yes, but it will not be the code You have written.\nIt will be the worst code You've ever seen.</p>\n"}], "owner": {"reputation": 1, "user_id": 4474151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9bfdc77268b62617eeb19894b69b95a?s=128&d=identicon&r=PG&f=1", "display_name": "Alan_QT", "link": "https://stackoverflow.com/users/4474151/alan-qt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1427311709, "creation_date": 1427311329, "question_id": 29264694, "link": "https://stackoverflow.com/questions/29264694/gcc-revert-process-binary-to-c", "title": "GCC - revert Process binary to C", "body": "<p>I would like know if there are possible to do process revert gcc with binary code create as from source code in C , for exemple:\nI used ggc for compile my code using param -o then when went to set name for binary  , I set same name ex: code.c -> code.c and overwrite my source code and don't will edit again .\nthis was a example for application</p>\n\n<p>There are method for recovery the source code in C again ?</p>\n"}, {"tags": ["c", "gcc", "c11"], "comments": [{"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 0, "creation_date": 1427310931, "post_id": 29264462, "comment_id": 46730979, "body": "Why do you have the c++11 tag if what you ask is clearly about C11 and not C++11?"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 2, "creation_date": 1427311370, "post_id": 29264462, "comment_id": 46731248, "body": "Yes there is, and your post was already edited to have the c11 tag instead of c++11."}], "answers": [{"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1427311177, "post_id": 29264536, "comment_id": 46731136, "body": "It was defined in &#39;c99&#39; though."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 2, "creation_date": 1427311275, "post_id": 29264536, "comment_id": 46731193, "body": "@coin It shouldn&#39;t be - C99 also doesn&#39;t define <code>M_PI</code>."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1427311622, "post_id": 29264536, "comment_id": 46731414, "body": "damned, I ignored that I always thought C99 was the default standard for gcc. So what is it then?"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1427311705, "post_id": 29264536, "comment_id": 46731472, "body": "The default of GCC is <code>gnu90</code>. 5.1.0 (not released yet) will default to <code>gnu11</code>."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1427313506, "post_id": 29264536, "comment_id": 46732449, "body": "Perhaps one more question. Does <code>--std=c99</code> use glibc? If yes, what are the mechanism in gcc that undef <code>__STRICT_ANSI</code>?"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 1, "creation_date": 1427314027, "post_id": 29264536, "comment_id": 46732712, "body": "@coin: It uses the same libc as with different or without <code>-std</code> options (which usually is glibc, but doesn&#39;t have to be. E.g. on Windows). Also read <a href=\"http://man7.org/linux/man-pages/man7/feature_test_macros.7.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man7/feature_test_macros.7.html</a> and <a href=\"https://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/Feature-Test-Macros.h&zwnj;&#8203;tml</a> for more information."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 3, "creation_date": 1427314663, "post_id": 29264536, "comment_id": 46733088, "body": "@coin Why bother? Either you want more stuff, then you use <code>-std=gnu99</code> with extensions, or you don&#39;t want extensions because you want portability and don&#39;t want to accidentally limit yourself to a single compiler, in that case you use <code>-std=c99</code>."}], "tags": [], "owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "is_accepted": true, "score": 18, "last_activity_date": 1427311582, "last_edit_date": 1427311582, "creation_date": 1427310865, "answer_id": 29264536, "question_id": 29264462, "link": "https://stackoverflow.com/questions/29264462/m-pi-not-available-with-gcc-std-c11-but-with-std-gnu11/29264536#29264536", "title": "M_PI not available with gcc --std=c11 but with --std=gnu11?", "body": "<p>It's simple: <code>M_PI</code> is not defined in standard C. Provide your own definition if you want to be standard-compliant.</p>\n\n<p>C compilers <em>cannot</em> introduce such constants without breaking legal C programs (the name is not reserved, and could be used as an identifier), and as such, they are only defined as an extension. </p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/d972e64a186ea417\" rel=\"noreferrer\">GCC 4.9 when used with <code>-std=c99</code> doesn't define <code>M_PI</code></a>, but <a href=\"http://coliru.stacked-crooked.com/a/daded4fdfc402be7\" rel=\"noreferrer\">does when used with <code>-std=gnu99</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "is_accepted": false, "score": 3, "last_activity_date": 1427310873, "creation_date": 1427310873, "answer_id": 29264540, "question_id": 29264462, "link": "https://stackoverflow.com/questions/29264462/m-pi-not-available-with-gcc-std-c11-but-with-std-gnu11/29264540#29264540", "title": "M_PI not available with gcc --std=c11 but with --std=gnu11?", "body": "<p>The <code>M_PI</code> macro isn't defined by the C11 standard: <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf\" rel=\"nofollow\">http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf</a></p>\n\n<p>Therefore, the <code>#if</code> guards are protecting you from problems in case you want to define your own <code>M_PI</code> macro. gcc is doing exactly the right thing. The standard headers shouldn't arbitrarily define macros that are not in the standard.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1427315960, "post_id": 29265512, "comment_id": 46733836, "body": "For correct 1.16 --&gt; +1.  BTW: See any downside to having lots of PI digits  like 80 digits?"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1427317729, "post_id": 29265512, "comment_id": 46734799, "body": "@chux - not that I can think of. gcc at least includes the gmp / mpfr / mpc libraries to take care of all multiple-precision issues, with correct (and selectable) rounding modes, etc. If an 80 digit PI value was assigned to a single precision float, I would expect it to do the right thing. Don&#39;t know how up to date <a href=\"https://gcc.gnu.org/wiki/FloatingPointMath\" rel=\"nofollow noreferrer\">this</a> page is. I don&#39;t know clang&#39;s approach."}], "tags": [], "owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "is_accepted": false, "score": 8, "last_activity_date": 1427314372, "last_edit_date": 1427314372, "creation_date": 1427314010, "answer_id": 29265512, "question_id": 29264462, "link": "https://stackoverflow.com/questions/29264462/m-pi-not-available-with-gcc-std-c11-but-with-std-gnu11/29265512#29265512", "title": "M_PI not available with gcc --std=c11 but with --std=gnu11?", "body": "<p>If you just want <code>M_PI</code> while looking for a more comprehensive answer with POSIX / XOPEN feature tests macros, etc., an interim solution is:</p>\n\n<pre><code>#ifndef M_PI\n#define M_PI (3.14159265358979323846)\n#endif\n</code></pre>\n\n<p>That's \"1.20\" format, which is also sufficient for 'round-trip' representation for an 80 bit extended type. double precision is \"1.16\". For 128-bit quad precision:</p>\n\n<pre><code>#define M_PI (3.14159265358979323846264338327950288)\n</code></pre>\n\n<p>The \"1.35\" format for round-trip precision. This means if you want to print out a floating point double, and recover the same value when you read it back, you should use \"%+1.16\" for printf functions, as so on. You might say that a double doesn't have 17 significant digits, but those digits are not 'junk' if you want to recover a value.</p>\n\n<p>Anyway - there are better resources than this <a href=\"http://en.wikipedia.org/wiki/IEEE_floating_point#Character_representation\" rel=\"noreferrer\">available</a>.</p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13820, "favorite_count": 5, "accepted_answer_id": 29264536, "answer_count": 3, "score": 13, "last_activity_date": 1427314372, "creation_date": 1427310629, "last_edit_date": 1427311485, "question_id": 29264462, "link": "https://stackoverflow.com/questions/29264462/m-pi-not-available-with-gcc-std-c11-but-with-std-gnu11", "title": "M_PI not available with gcc --std=c11 but with --std=gnu11?", "body": "<p>I noticed <code>M_PI</code> is unavailable on <code>c11</code>. By looking at <code>/usr/include/math.h</code> I can see <code>M_PI</code> is defined if: </p>\n\n<pre><code>#if !defined(__STRICT_ANSI__) || ((_XOPEN_SOURCE - 0) &gt;= 500)\n...\n#define M_PI 3.1415...\n#endif \n</code></pre>\n\n<p>Moreover in the <code>math.h</code> from <a href=\"http://sourceware.org/git/?p=glibc.git;a=blob;f=math/math.h;h=c7ff16971e98662081e3192a1269038e9419af59;hb=refs/heads/master\" rel=\"noreferrer\">glibc</a> <code>__STRICT_ANSI__</code> is replaced with <code>__USE_MISC</code>. I am completely lost with this. </p>\n\n<p>What is the story in between <code>--std=c11</code> and the constants defined in <code>math.h</code>?</p>\n\n<p>Which <code>libc</code> should I consider on a <code>debian</code> distribution ?</p>\n\n<p>By the way, <code>M_PI</code> is defined in <code>c99</code> and <code>gnu11</code>...</p>\n"}, {"tags": ["c", "gcc", "compilation", "makefile"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1427310983, "post_id": 29264441, "comment_id": 46731015, "body": "Look into <a href=\"http://stackoverflow.com/questions/16751611/a-makefile-with-multiple-executables/16751650\">this</a> and other examples"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1427311004, "post_id": 29264441, "comment_id": 46731025, "body": "Make is just a tool to declare dependencies, really.  If a file is older than one of its dependencies, Make sees this, and runs the actions you specified to fix the situation.  That way, if your dependencies in the Makefile are correct, you never compile anything that doesn&#39;t need to be compiled. That&#39;s the purpose of Make.  When it says &quot;X is up to date&quot;, it means, &quot;I can&#39;t find any reason to recompile X; so I won&#39;t.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 4713634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8140ad93a894cc69881bd71479c55c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Fausnaught", "link": "https://stackoverflow.com/users/4713634/colin-fausnaught"}, "edited": false, "score": 0, "creation_date": 1427311144, "post_id": 29264533, "comment_id": 46731117, "body": "Oh my god I get it now!! Thanks so much. I had no clue what the .o files were. Thanks for your help everyone!"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 303, "user_id": 4713634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8140ad93a894cc69881bd71479c55c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Fausnaught", "link": "https://stackoverflow.com/users/4713634/colin-fausnaught"}, "edited": false, "score": 0, "creation_date": 1427311206, "post_id": 29264533, "comment_id": 46731155, "body": "<code>.o</code> files are object files. You don&#39;t need them to do this but the built-in rules will use them."}], "tags": [], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": true, "score": 3, "last_activity_date": 1427310842, "creation_date": 1427310842, "answer_id": 29264533, "question_id": 29264441, "link": "https://stackoverflow.com/questions/29264441/simple-compiling-using-a-makefile/29264533#29264533", "title": "Simple compiling using a Makefile?", "body": "<p>You told it to build <code>hs.c</code> not <code>hs</code>. So it tried but that existed and you didn't tell it any other files that would force it to think the file was out of date (which is good because you don't want that).</p>\n\n<p>You want:</p>\n\n<pre><code>hs:\n        gcc -o hs hs_util.c hs.c\n</code></pre>\n\n<p>but that's not enough either. That will only build once and then stop (you'll need to delete <code>hs</code> before it will build again).</p>\n\n<p>You need to teach make about what input files go in to making the target (<code>hs</code>).</p>\n\n<pre><code>hs: hs_util.c hs.c\n        gcc -o hs hs_util.c hs.c\n</code></pre>\n\n<p>Having done that you can use <a href=\"http://www.gnu.org/software/make/manual/make.html#Automatic-Variables\" rel=\"nofollow\">automatic variables</a> to avoid duplicating yourself.</p>\n\n<pre><code>hs: hs_util.c hs.c\n        gcc -o $@ $^\n</code></pre>\n\n<p>Having done that you can actually take advantage of the make <a href=\"http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules\" rel=\"nofollow\">built-in rules</a> and just do this.</p>\n\n<pre><code>hs: hs_util.o hs.o\n</code></pre>\n\n<p>If you want to also tell make that it needs to rebuild the <code>.o</code> files when the <code>.h</code> files change you can add this.</p>\n\n<pre><code>hs.o hs_util.o: hs_util.h hs_config.h\n</code></pre>\n\n<p>Remember that the general form for a make rule is (<a href=\"http://www.gnu.org/software/make/manual/make.html#Rule-Example\" rel=\"nofollow\">example</a>, <a href=\"http://www.gnu.org/software/make/manual/make.html#Rule-Syntax\" rel=\"nofollow\">syntax</a>):</p>\n\n<pre><code>output-file: input-file\n    commands to generate output-file from input-file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 4713634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8140ad93a894cc69881bd71479c55c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Fausnaught", "link": "https://stackoverflow.com/users/4713634/colin-fausnaught"}, "edited": false, "score": 0, "creation_date": 1427311162, "post_id": 29264583, "comment_id": 46731125, "body": "Oh I get it!! Thank you so much!!"}], "tags": [], "owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "is_accepted": false, "score": 0, "last_activity_date": 1427311004, "creation_date": 1427311004, "answer_id": 29264583, "question_id": 29264441, "link": "https://stackoverflow.com/questions/29264441/simple-compiling-using-a-makefile/29264583#29264583", "title": "Simple compiling using a Makefile?", "body": "<p>I think you have a little typo. Your makefile wants to build a target \"hs.c\"</p>\n\n<p>Try changing the following:</p>\n\n<pre><code>&gt; hs.c:\n&gt;         gcc -o hs hs_util.c hs.c\n</code></pre>\n\n<p>To</p>\n\n<pre><code>hs:\n        gcc -o hs hs_util.c hs.c\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 4713634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8140ad93a894cc69881bd71479c55c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Fausnaught", "link": "https://stackoverflow.com/users/4713634/colin-fausnaught"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 29264533, "answer_count": 2, "score": 2, "last_activity_date": 1427311004, "creation_date": 1427310558, "question_id": 29264441, "link": "https://stackoverflow.com/questions/29264441/simple-compiling-using-a-makefile", "title": "Simple compiling using a Makefile?", "body": "<p>I'm having some trouble grasping the concept of a Makefile. I'm coding a project in C and I have two .c files that need to be compiled together in order to run the program. I went over some of the concepts with some other people but am still having trouble grasping the concept of Makefiles. This is what I have.</p>\n\n<p>Makefile:</p>\n\n<pre><code>hs.c:\n        gcc -o hs hs_util.c hs.c\n</code></pre>\n\n<p>hs.c is dependent on hs_util.c's functions in order to accomplish tasks. I know this because the header file from hs_util is included...</p>\n\n<p>in hs.c:</p>\n\n<pre><code>#include \"hs_util.h\"\n#include \"hs_config.h\"\n</code></pre>\n\n<p>in hs_util.c</p>\n\n<pre><code>#include \"hs_config.h\"\n#include \"hs_util.h\"\n</code></pre>\n\n<p>when I run the \"make\" command, it says \"make: 'hs.c' is up to date.\" which is great, but the hs file isn't being created. What am I doing wrong?</p>\n"}, {"tags": ["c", "linux", "mmap", "fork"], "comments": [{"owner": {"reputation": 3205, "user_id": 488191, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3f033d35e3cabc78b54d551ee12513ee?s=128&d=identicon&r=PG", "display_name": "ssice", "link": "https://stackoverflow.com/users/488191/ssice"}, "edited": false, "score": 0, "creation_date": 1427315714, "post_id": 29264322, "comment_id": 46733712, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/23817309/both-map-anon-and-map-anonymous-undeclared-for-sys-mmap-in-c\">Both MAP_ANON and MAP_ANONYMOUS undeclared for sys/mmap in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1427310595, "post_id": 29264431, "comment_id": 46730778, "body": "Prior to <i>any</i> system header include."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1427310665, "post_id": 29264431, "comment_id": 46730828, "body": "@mafso - indeed, fixed."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1427310993, "post_id": 29264431, "comment_id": 46731019, "body": "Sorry for the nitpicking, but it&#39;s not only if some other header includes <code>&lt;sys&#47;mman.h&gt;</code> (I believe, system header aren&#39;t even allowed to do that). Every system header on my GNU system, for example, includes <code>&lt;features.h&gt;</code> to set the proper flags depending on macros defined. This header has header guards, so any later definition of a feature test macro will have no effect, as the header isn&#39;t included twice."}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": true, "score": 3, "last_activity_date": 1427310647, "last_edit_date": 1427310647, "creation_date": 1427310529, "answer_id": 29264431, "question_id": 29264322, "link": "https://stackoverflow.com/questions/29264322/mmap-error-on-linux-using-somethingelse/29264431#29264431", "title": "mmap error on linux (using somethingelse)", "body": "<p>From the man page for <code>mmap(2)</code> (my bold):</p>\n\n<blockquote>\n  <p>Certain  flags  constants  are defined only if either <code>_BSD_SOURCE</code> or <code>_SVID_SOURCE</code> is defined.  (Requiring <code>_GNU_SOURCE</code> also suffices, and requiring that macro specifically would have been more logical, since these flags are all Linux specific.)  The relevant flags are: <code>MAP_32BIT</code>, <code>MAP_ANONYMOUS</code> (<strong>and the synonym <code>MAP_ANON</code></strong>), <code>MAP_DENYWRITE</code>, <code>MAP_EXECUTABLE</code>, <code>MAP_FILE</code>, <code>MAP_GROWSDOWN</code>, <code>MAP_HUGETLB</code>, <code>MAP_LOCKED</code>, <code>MAP_NONBLOCK</code>, <code>MAP_NORESERVE</code>, <code>MAP_POPULATE</code>, and <code>MAP_STACK</code>.</p>\n</blockquote>\n\n<p>So you will need to define <code>_BSD_SOURCE</code>, <code>_SVID_SOURCE</code> or (if I read that right) <code>_GNU_SOURCE</code> at the top of the file, but in any event prior to</p>\n\n<pre><code>#include &lt;sys/mman.h&gt;\n</code></pre>\n\n<p>As per @mafso's comment, best to do this prior to any system header include (not least in case an another header itself includes <code>&lt;sys/mman.h&gt;</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4093559"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4871, "favorite_count": 0, "accepted_answer_id": 29264431, "answer_count": 1, "score": 1, "last_activity_date": 1427310647, "creation_date": 1427310160, "question_id": 29264322, "link": "https://stackoverflow.com/questions/29264322/mmap-error-on-linux-using-somethingelse", "title": "mmap error on linux (using somethingelse)", "body": "<p>Exactly, I thought that I finished my project until compiling isn't accepted on ubuntu because of <code>mmap()</code>. I'm trying to access(read) files by using <code>fork()</code>. It's okey. But, When I want to count number of read files, entered folder(directories) and child, I powned! How and What can I use or change <code>mmap()</code> because I get <code>error: \u2018MAP_ANON\u2019 undeclared (first use in this function)|</code>\n. On mac, It's okey but on ubuntu error. Thank you for helps.</p>\n\n<pre><code>    #define _XOPEN_SOURCE 700\n    #define _POSIX_C_SOURCE 200809L\n\n    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;sys/types.h&gt;\n    #include &lt;sys/stat.h&gt;\n    #include &lt;sys/wait.h&gt;\n    #include &lt;dirent.h&gt;\n    #include &lt;errno.h&gt;\n    #include &lt;ftw.h&gt;\n    #include &lt;ctype.h&gt;\n    #include &lt;sys/mman.h&gt;\n\n\n\n    #define MAX_PATH_LEN        2048\n\n\n    static int *wordCount = 0;\n    static int *childCount = 0;\n    static int *folderCount = 0;\n\n\n\n    int relatedWord(const char *arr);\n\n    int checkWord(const char arr[], int size);\n\n    void err_sys(const char *msg);\n\n    int disp(const char *filepath, const struct stat *finfo, int flag, struct FTW *ftw);\n\n\n    int main(int argc, char *argv[])\n    {\n        //struct stat finfo;\n\n        //int count = 0;\n\n        wordCount = mmap(NULL, sizeof *wordCount, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANON, -1, 0);\n        childCount = mmap(NULL, sizeof *childCount, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANON, -1, 0);\n        folderCount = mmap(NULL, sizeof *folderCount, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANON, -1, 0);\n\n        if (argc != 2) {\n            fprintf(stderr, \"Wrong number of arguments!\\nUsage: dirwalk6 &lt;path&gt;\\n\");\n            exit(EXIT_FAILURE);\n        }\n\n        if (nftw(argv[1], disp, 20, 0) &lt; 0)\n            err_sys(\"ntfw\");\n\n        printf( \"\\nTotal words = %d\\n\\n\", *wordCount);\n        printf( \"\\nTotal folders = %d\\n\\n\", *folderCount);\n        printf( \"\\nTotal childs = %d\\n\\n\", *childCount);\n\n\n        return 0;\n    }\n\nint disp(const char *filepath, const struct stat *finfo, int flag, struct FTW *ftw)\n{\n\n    int count = 0; /* number of words */\n\n    switch (flag) {\n        case FTW_F: /* determining file */\n\n            printf(\"%*s%s\\n\", ftw-&gt;level * 4, \"\", filepath);\n\n            pid_t pid;\n\n            pid=fork();\n\n            if(pid &lt; 0)\n            {\n                perror(\"Error corresponding to fork()\");\n            }\n            else if (pid == 0)\n            {\n\n                count += relatedWord(filepath);\n                *wordCount += count;\n                *childCount += 1;\n                exit(1);\n\n            }\n            else\n            {\n                while( pid != wait(0) ) ;\n            }\n            // printf( \"word = %d,   file = %s \\n\", count,filepath);\n\n            break;\n        case FTW_D:  /* determining folder */\n            printf(\"%*s%s\\n\", ftw-&gt;level * 4, \"\", filepath + ftw-&gt;base);\n            *folderCount += 1;\n            break;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1427309811, "post_id": 29264167, "comment_id": 46730345, "body": "My opinion that you should read the compiler error."}], "answers": [{"tags": [], "owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "is_accepted": false, "score": 0, "last_activity_date": 1427310035, "creation_date": 1427310035, "answer_id": 29264282, "question_id": 29264167, "link": "https://stackoverflow.com/questions/29264167/cast-table-to-a-struct/29264282#29264282", "title": "Cast table to a struct", "body": "<p><code>maStruct</code> is a variable name, not a type. Did you mean</p>\n\n<pre><code>typedef struct \n{\n    int a;\n    int b;\n} maStruct;\n</code></pre>\n\n<p>instead?</p>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 0, "last_activity_date": 1427310050, "creation_date": 1427310050, "answer_id": 29264289, "question_id": 29264167, "link": "https://stackoverflow.com/questions/29264167/cast-table-to-a-struct/29264289#29264289", "title": "Cast table to a struct", "body": "<p>You should define your <code>maStruct</code> type properly and also add return value to your function. This code compiles:</p>\n\n<pre><code>int tab[10];\ntypedef struct maStruct\n{\n int a;\n int b;\n} maStruct;\nint main()\n{\n ((maStruct*)(tab))-&gt;b=(int)2;\n return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 74, "user_id": 3573865, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44d6153b0e2d4945c14da176aca5ef20?s=128&d=identicon&r=PG&f=1", "display_name": "Bou6", "link": "https://stackoverflow.com/users/3573865/bou6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 29264289, "answer_count": 2, "score": -2, "last_activity_date": 1427310050, "creation_date": 1427309656, "question_id": 29264167, "link": "https://stackoverflow.com/questions/29264167/cast-table-to-a-struct", "title": "Cast table to a struct", "body": "<p>I want cast a table of int to a struct</p>\n\n<pre><code>int tab[10];\nstruct\n{\n int a;\n int b;\n}maStruct;\nint main()\n{\n ((maStruct*)(tab))-&gt;b=(int)2;\n}\n</code></pre>\n\n<p>this didn't compile what's wrong in your opinion???</p>\n"}, {"tags": ["python", "c", "linux", "bash", "python-2.7"], "comments": [{"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 1, "creation_date": 1427309539, "post_id": 29264053, "comment_id": 46730171, "body": "First of all, <b>flush</b> outout in your C program with <code>fflush(stdout);</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1290, "user_id": 117549, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b23ad279a76d12216d4483964b4bfb2a?s=128&d=identicon&r=PG", "display_name": "javanix", "link": "https://stackoverflow.com/users/117549/javanix"}, "edited": false, "score": 0, "creation_date": 1427310163, "post_id": 29264240, "comment_id": 46730548, "body": "So why can Python capture/recognize the buffered output if I specify <code>Popen(*args*, stdout=sys.stdout, stderr=sys.stderr</code>? Is there some way to copy the process buffer <i>only</i> into a new string without using <code>subprocess.PIPE</code>?"}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 1290, "user_id": 117549, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b23ad279a76d12216d4483964b4bfb2a?s=128&d=identicon&r=PG", "display_name": "javanix", "link": "https://stackoverflow.com/users/117549/javanix"}, "edited": false, "score": 0, "creation_date": 1427310264, "post_id": 29264240, "comment_id": 46730587, "body": "Are you saying  <code>stdout=sys.stdout</code> shows you output?"}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 1290, "user_id": 117549, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b23ad279a76d12216d4483964b4bfb2a?s=128&d=identicon&r=PG", "display_name": "javanix", "link": "https://stackoverflow.com/users/117549/javanix"}, "edited": false, "score": 0, "creation_date": 1427310581, "post_id": 29264240, "comment_id": 46730767, "body": "you can use <code>stdout=PIPE</code> and iterate over stdout.readline but the output will be buffered"}], "tags": [], "owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1427311271, "last_edit_date": 1427311271, "creation_date": 1427309924, "answer_id": 29264240, "question_id": 29264053, "link": "https://stackoverflow.com/questions/29264053/python-subprocess-communicate-does-not-capture-output-from-simple-binary/29264240#29264240", "title": "Python subprocess.communicate() does not capture output from simple binary", "body": "<p>The output is being buffered:</p>\n\n<p>You need to flush from c:</p>\n\n<pre><code>int main() {\n  srand(time(NULL));\n\n  do {\n    int r = rand();\n    printf(\"%s\\t%d\\n\", \"my.key\", r);\n    usleep(100000);\n    fflush(stdout);\n  } while ( 1 );\n}\n</code></pre>\n\n<p>And iterate over stdout.readline, <code>communicate</code> is waiting for the process to finish so you are not going to get any output:</p>\n\n<pre><code>for line in iter(p.stdout.readline,\"\"):\n    print(line)\n</code></pre>\n\n<p>If you want the output unbuffered without changing the c code you can use <a href=\"http://manpages.courier-mta.org/htmlman1/stdbuf.1.html\" rel=\"nofollow\">stdbuf</a> on linux:</p>\n\n<pre><code>p = Popen([\"stdbuf\",\"-oL\",\"binary\"], stdout=PIPE, stderr=PIPE)\n\nfor line in iter(p.stdout.readline,\"\"):\n    print(line)\n</code></pre>\n\n<p><code>-oL</code> will be line buffered.</p>\n\n<p>Using   <code>for line in iter(p.stdout.readline,\"\")</code> will work without changing the c code but the output will be buffered.</p>\n"}], "owner": {"reputation": 1290, "user_id": 117549, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b23ad279a76d12216d4483964b4bfb2a?s=128&d=identicon&r=PG", "display_name": "javanix", "link": "https://stackoverflow.com/users/117549/javanix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427311271, "creation_date": 1427309314, "last_edit_date": 1427309888, "question_id": 29264053, "link": "https://stackoverflow.com/questions/29264053/python-subprocess-communicate-does-not-capture-output-from-simple-binary", "title": "Python subprocess.communicate() does not capture output from simple binary", "body": "<p>I'm trying to use Python to capture the output from this compiled C program:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\n\nint main() {\n  srand(time(NULL));\n\n  do {\n    int r = rand();\n    printf(\"%s\\t%d\\n\", \"my.key\", r);\n    usleep(100000);\n  } while ( 1 );\n}\n</code></pre>\n\n<p>If I run the following, I see the output from my binary interleaved with my python output as I would expect (and since stdout/stderr are not <code>subprocess.PIPE</code>, <code>self.output</code> and <code>self.error</code> are <code>None</code>).</p>\n\n<pre><code>self.process = Popen(shlex.split(self.path_to_binary), stdout=sys.stdout, stderr=sys.stderr);\nself.output, self.error = self.process.communicate();\n</code></pre>\n\n<p>However, if I change the <code>stdout</code> and <code>stderr</code> arguments to <code>subprocess.PIPE</code>, <code>subprocess.communicate()</code> still doesn't capture anything in either <code>self.output</code> or <code>self.error</code>.</p>\n\n<pre><code>self.process = Popen(shlex.split(self.path_to_binary), stdout=subprocess.PIPE, stderr=subprocess.PIPE);\nself.output, self.error = self.process.communicate();\n</code></pre>\n\n<p>The same snippet of code <em>will</em> capture the output of a bash script:</p>\n\n<pre><code>#!/bin/bash\nwhile true ; do\n    printf \"%s\\t%s\\n\" \"my.key\" \"$RANDOM\"\n    usleep 100000\ndone\n</code></pre>\n\n<p>Neither script exits naturally - they are both killed via <code>self.process.kill()</code> after about three seconds.</p>\n\n<p>Why can Python capture the bash output but not the binary output? Is there anything that I can do on the <em>Python</em> side of the equation to capture the output from the binary, <em>without modifying the C source</em>?</p>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 1850, "user_id": 4490187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd7db68345be18ba3a94994b451217df?s=128&d=identicon&r=PG&f=1", "display_name": "DeDee", "link": "https://stackoverflow.com/users/4490187/dedee"}, "edited": false, "score": 0, "creation_date": 1427312291, "post_id": 29264022, "comment_id": 46731802, "body": "Environment? Shell? Language? Fix tags and expand the question please."}, {"owner": {"reputation": 626, "user_id": 4484753, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8773a50f7b470aa696c56b417a164a08?s=128&d=identicon&r=PG&f=1", "display_name": "GalaxyVintage", "link": "https://stackoverflow.com/users/4484753/galaxyvintage"}, "reply_to_user": {"reputation": 1850, "user_id": 4490187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd7db68345be18ba3a94994b451217df?s=128&d=identicon&r=PG&f=1", "display_name": "DeDee", "link": "https://stackoverflow.com/users/4490187/dedee"}, "edited": false, "score": 0, "creation_date": 1427312655, "post_id": 29264022, "comment_id": 46732000, "body": "Sorry, I&#39;m using my phone and for some reason I can&#39;t put file I/O as one tag ."}, {"owner": {"reputation": 1850, "user_id": 4490187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd7db68345be18ba3a94994b451217df?s=128&d=identicon&r=PG&f=1", "display_name": "DeDee", "link": "https://stackoverflow.com/users/4490187/dedee"}, "edited": false, "score": 0, "creation_date": 1427312983, "post_id": 29264022, "comment_id": 46732190, "body": "That looks good now :)"}, {"owner": {"reputation": 626, "user_id": 4484753, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8773a50f7b470aa696c56b417a164a08?s=128&d=identicon&r=PG&f=1", "display_name": "GalaxyVintage", "link": "https://stackoverflow.com/users/4484753/galaxyvintage"}, "edited": false, "score": 0, "creation_date": 1427327908, "post_id": 29264022, "comment_id": 46738831, "body": "Sorry my question wasn&#39;t really clear because I was using my phone. I was trying to find out how I can write data that is printed to stdout in to a file and I found freopen() which does the job :). Thanks for the help tho"}], "answers": [{"tags": [], "owner": {"reputation": 626, "user_id": 4484753, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8773a50f7b470aa696c56b417a164a08?s=128&d=identicon&r=PG&f=1", "display_name": "GalaxyVintage", "link": "https://stackoverflow.com/users/4484753/galaxyvintage"}, "is_accepted": true, "score": 0, "last_activity_date": 1427328017, "creation_date": 1427328017, "answer_id": 29268785, "question_id": 29264022, "link": "https://stackoverflow.com/questions/29264022/how-do-you-save-the-output-of-a-function-that-prints-in-c-language/29268785#29268785", "title": "how do you save the output of a function that prints in C language?", "body": "<p>I just found out I can use freopen() to write data into a file from stdout. My bad for not making the question more clear. </p>\n"}], "owner": {"reputation": 626, "user_id": 4484753, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8773a50f7b470aa696c56b417a164a08?s=128&d=identicon&r=PG&f=1", "display_name": "GalaxyVintage", "link": "https://stackoverflow.com/users/4484753/galaxyvintage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 1, "accepted_answer_id": 29268785, "answer_count": 1, "score": -1, "last_activity_date": 1427328017, "creation_date": 1427309230, "last_edit_date": 1427313041, "question_id": 29264022, "link": "https://stackoverflow.com/questions/29264022/how-do-you-save-the-output-of-a-function-that-prints-in-c-language", "title": "how do you save the output of a function that prints in C language?", "body": "<p>let's say there is a (void)function I define that prints some numbers and I want to check if it prints the correct content. I'm thinking writing the content to a file and read it back and check if it is what I wanted.  But I dont know how since the function is void and returns nothing. </p>\n"}, {"tags": ["c", "video", "ffmpeg", "frame-rate"], "answers": [{"tags": [], "owner": {"reputation": 27067, "user_id": 210785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561cd4d29738e18d9e565a6265d86ac?s=128&d=identicon&r=PG", "display_name": "szatmary", "link": "https://stackoverflow.com/users/210785/szatmary"}, "is_accepted": true, "score": 1, "last_activity_date": 1427314249, "creation_date": 1427314249, "answer_id": 29265583, "question_id": 29263801, "link": "https://stackoverflow.com/questions/29263801/ffmpeg-c-api-reduce-fps-but-maintain-video-duration/29265583#29265583", "title": "FFmpeg C Api - Reduce fps but maintain video duration", "body": "<p>It looks like you are decoding then re-encoding the video. In the decoded state there is no such thing as I/B/P. They are all I frames. This is also where you should be dropping frames. You must decode every frame, but once decoded, drop the frames you no longer want by simply not sending them to the encoder. And finally, don't touch the timebase at all. </p>\n"}], "owner": {"reputation": 231, "user_id": 2280473, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eG56X.jpg?s=128&g=1", "display_name": "Justin Bradley", "link": "https://stackoverflow.com/users/2280473/justin-bradley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 29265583, "answer_count": 1, "score": 0, "last_activity_date": 1427314249, "creation_date": 1427308582, "last_edit_date": 1427310363, "question_id": 29263801, "link": "https://stackoverflow.com/questions/29263801/ffmpeg-c-api-reduce-fps-but-maintain-video-duration", "title": "FFmpeg C Api - Reduce fps but maintain video duration", "body": "<p>Using the FFmpeg C API I'm trying to convert an input video into a video that looks like an animated gif - meaning no audio stream and a video stream of 4/fps.</p>\n\n<p>I have the decode/encode part working. I can drop the audio stream from the output file, but I'm having trouble reducing the fps. I can change the output video stream's time_base to 4/fps, but it increases the video's duration - basically playing it in slow mo.</p>\n\n<p>I think I need to drop the extra frames before I write them to the output container.</p>\n\n<p>Below is the loop where I read the input frames, and then write them to output container.</p>\n\n<p>Is this where I'd drop the extra frames? How do I determine which frames to drop (I,P,B frames)?</p>\n\n<pre><code>while(av_read_frame(input_container, &amp;decoded_packet)&gt;=0) {\n\n    if (decoded_packet.stream_index == video_stream_index) {\n        len = avcodec_decode_video2(input_stream-&gt;codec, decoded_frame, &amp;got_frame, &amp;decoded_packet);\n        if(len &lt; 0) {\n            exit(1);\n        }\n\n        if(got_frame) {\n            av_init_packet(&amp;encoded_packet);\n            encoded_packet.data =  NULL;\n            encoded_packet.size =  0;\n\n            if(avcodec_encode_video2(output_stream-&gt;codec, &amp;encoded_packet, decoded_frame, &amp;got_frame) &lt; 0) {\n                exit(1);\n            }\n            if(got_frame) {\n                if (output_stream-&gt;codec-&gt;coded_frame-&gt;key_frame) {\n                    encoded_packet.flags |= AV_PKT_FLAG_KEY;\n                }\n\n                encoded_packet.stream_index = output_stream-&gt;index;\n                encoded_packet.pts = av_rescale_q(current_frame_num, output_stream-&gt;codec-&gt;time_base, output_stream-&gt;time_base);\n                encoded_packet.dts = av_rescale_q(current_frame_num, output_stream-&gt;codec-&gt;time_base, output_stream-&gt;time_base);\n\n                if(av_interleaved_write_frame(output_container, &amp;encoded_packet) &lt; 0) {\n                    exit(1);\n                }\n                else {\n                    current_frame_num +=1;\n                }\n            }\n            frame_count+=1;\n            av_free_packet(&amp;encoded_packet);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 0, "creation_date": 1427308638, "post_id": 29263770, "comment_id": 46729569, "body": "have you tried this with large processing of data which take some time?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1427308682, "post_id": 29263770, "comment_id": 46729593, "body": "Run the algorithm several thousands of times, an then measure it to get somewhat feelable results."}], "answers": [{"tags": [], "owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "is_accepted": false, "score": 0, "last_activity_date": 1427310018, "last_edit_date": 1427310018, "creation_date": 1427309344, "answer_id": 29264063, "question_id": 29263770, "link": "https://stackoverflow.com/questions/29263770/execution-time-of-a-function-in-c-with-high-accuracy/29264063#29264063", "title": "Execution time of a function in C (with high accuracy)", "body": "<p>of course, you need some large processing of data to account for some measurable time considering the fact that computers become very fast these days.<br></p>\n\n<pre><code>int sum=2;\nclock_t start1,end1;\nstart1=clock();\nfor(int i=0;i&lt;100;i++){\n    for(int j=0;j&lt;100;j++){\n        sum+=2;\n    }\n}\nend1=clock();\ndouble extime1=(double)(end1-start1)*100000/CLOCKS_PER_SEC;\nprintf(\"EXECUTION TIME FOR THE BINARY SEARCH IS %.5f SECONDS:\\n\\n\",extime1);\n</code></pre>\n\n<blockquote>\n  <p>output:EXECUTION TIME FOR THE BINARY SEARCH IS 0.00000 SECONDS:</p>\n</blockquote>\n\n<pre><code>int sum=2;\nclock_t start1,end1;\nstart1=clock();\nfor(int i=0;i&lt;10000;i++){\n    for(int j=0;j&lt;10000;j++){\n        sum+=2;\n    }\n}\nend1=clock();\ndouble extime1=(double)(end1-start1)*100000/CLOCKS_PER_SEC;\nprintf(\"EXECUTION TIME FOR THE BINARY SEARCH IS %.5f SECONDS:\\n\\n\",extime1);\n</code></pre>\n\n<blockquote>\n  <p>output: EXECUTION TIME FOR THE BINARY SEARCH IS 35100.00000 SECONDS:</p>\n</blockquote>\n\n<p><br>PS: you shouldn't multiply by 100000 as it is giving wrong unit of time.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4713477"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427310018, "creation_date": 1427308469, "last_edit_date": 1427308515, "question_id": 29263770, "link": "https://stackoverflow.com/questions/29263770/execution-time-of-a-function-in-c-with-high-accuracy", "title": "Execution time of a function in C (with high accuracy)", "body": "<p>I'm trying to compare the execute time of searching algorithms,can anyone help me with the code,my problem is in the execute time,i use  and always is 0.00000 sec.</p>\n\n<p>example of calling the binary search:</p>\n\n<pre><code>//BINARY SEARCH\nclock_t start1,end1;\nstart1=clock();\nbinarySearch(a,size,search);\nend1=clock();\nextime1=(double)(end1-start1)*100000/CLOCKS_PER_SEC;\nprintf(\"EXECUTION TIME FOR THE BINARY SEARCH IS %.5f SECONDS:\\n\\n\",extime1);\n</code></pre>\n"}, {"tags": ["c", "arrays", "random"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 2, "creation_date": 1427307978, "post_id": 29263539, "comment_id": 46729157, "body": "Are we supposed to guess what function <code>fillArray</code> looks like???"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427307979, "post_id": 29263539, "comment_id": 46729158, "body": "The address of local variables (including arrays) doesn&#39;t change throughout their lifetime."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427308005, "post_id": 29263539, "comment_id": 46729184, "body": "And the most important thing is missing of course (<code>fillArray</code> definition??)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1427308686, "post_id": 29263539, "comment_id": 46729596, "body": "Is this question about filling arrays or about random numbers? Get the array stuff right first, and then if you aren&#39;t happy with <code>rand()</code> or <code>srand()</code> put in a replacement function that will leave everything else intact."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1427308778, "post_id": 29263539, "comment_id": 46729646, "body": "this statement:  &#39;srand(time())&#39; should be: &#39;srand(time(NULL))&#39;  you need to pay attention to the man page info as details count"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1427308835, "post_id": 29263539, "comment_id": 46729688, "body": "pretty sure @user3629249 has it. <code>time(time_t *ptr)</code> writes to <code>*ptr</code>. Leaving it uninitialized means it writes to a garbage location."}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427308880, "post_id": 29263539, "comment_id": 46729726, "body": "@EOF That would be my expectation. However, in the debugger it showed a different address after calling srand() on line 6 of main."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427308928, "post_id": 29263539, "comment_id": 46729757, "body": "time increments at the rate of once per second.  so the seed will be different once each second.   This is plenty fast enough.  Just wait more than one second before running the program again."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427308936, "post_id": 29263539, "comment_id": 46729763, "body": "@Bryan: undefined behaviour is not required to cause damage <i>every</i> time. You&#39;re also calling <code>time()</code> in <code>getRandomSeed()</code> incorrectly."}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427309174, "post_id": 29263539, "comment_id": 46729920, "body": "@user3629249 That does indeed seem to be the issue. I just looked for a parameter list in VS and didn&#39;t see one. I don&#39;t quite understand what is happening still though. Would you mind making that first comment into an answer?"}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427309382, "post_id": 29263539, "comment_id": 46730063, "body": "@user3629249 I am aware that it changes, but for some reason the output was very similar each run. I would have thought that, like a hash function, changing a single digit would alter the output significantly. That doesn&#39;t seem to be the case with rand() and srand(), at least in my limited experimentation."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1427311912, "post_id": 29263539, "comment_id": 46731596, "body": "...and of course, the weekly notice: take srand() outside the function/loop."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427316239, "post_id": 29263539, "comment_id": 46733992, "body": "of course the array has garbage BEFORE calling fillArray,.  It will contain what ever is in the stack memory"}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427318994, "post_id": 29263539, "comment_id": 46735451, "body": "@EOF Good point. I actually didn&#39;t realize that I was invoking undefined behavior, which was my problem."}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1427322704, "post_id": 29263539, "comment_id": 46736983, "body": "So I just saw that this question was downvoted... Could anyone help me understand why?"}], "answers": [{"comments": [{"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1427309726, "post_id": 29264074, "comment_id": 46730285, "body": "Unfortunately, the only warning I got from the compiler was:   &#39;time&#39; undefined; assuming extern returning int"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1427309807, "post_id": 29264074, "comment_id": 46730341, "body": "So you should have put <code>#include &lt;time.h&gt;</code> - I repeat: <i>pay attention to the compiler warnings</i> even if &quot;there was only one&quot;."}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1427309885, "post_id": 29264074, "comment_id": 46730389, "body": "Edit: ^^Beat me to the punch.  Oh, and now I know why. I didn&#39;t include time.h, so I have no idea what time function VS was using."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1427309997, "post_id": 29264074, "comment_id": 46730444, "body": "The linker found it, but the compiler did not know the function prototype and so its required arguments. In such a case it assumes the return value is <code>int</code>. What lesson have you learnt today? As commented above re the call to <code>srand()</code>, if the argument for <code>time()</code> is not <code>NULL</code>, in this case undefined, the function still writes the time somewhere, but who knows where?"}, {"owner": {"reputation": 155, "user_id": 2204022, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b6eaeeb96357b38664b7b1c9d37efc6?s=128&d=identicon&r=PG", "display_name": "MAKZ", "link": "https://stackoverflow.com/users/2204022/makz"}, "reply_to_user": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1427310278, "post_id": 29264074, "comment_id": 46730593, "body": "@Bryan also, since you are learning, you should have <code>-Wall</code>,  <code>-std=c99</code> (or <code>-std=c11</code>) , <code>-pedantic</code> and optionally <code>-Werror</code> flags for gcc or equivalent flags for your compilers enabled"}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "reply_to_user": {"reputation": 155, "user_id": 2204022, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b6eaeeb96357b38664b7b1c9d37efc6?s=128&d=identicon&r=PG", "display_name": "MAKZ", "link": "https://stackoverflow.com/users/2204022/makz"}, "edited": false, "score": 0, "creation_date": 1427318886, "post_id": 29264074, "comment_id": 46735410, "body": "WeatherVane - Thanks for all the insight. @MAKZ I will look into those flags, thank you. I am currently using VS as required for this course, FYI, the I used netBeans with gcc in the past."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1427309381, "creation_date": 1427309381, "answer_id": 29264074, "question_id": 29263539, "link": "https://stackoverflow.com/questions/29263539/c-array-corrupted-after-calling-a-function/29264074#29264074", "title": "C array corrupted after calling a function", "body": "<p>In your function <code>randomizeSeed()</code> you are calling <code>time()</code> three times in succession without an argument.</p>\n\n<pre><code>fullTime = time();\nModifier1 = time() &gt;&gt; (rand() % 10);\nModifier2 = (unsigned short)time();\n</code></pre>\n\n<p>The function prototype is </p>\n\n<pre><code>time_t time(time_t *timer);\n</code></pre>\n\n<p>So you should pay attention to your compiler warnings. From this point on, you have Undefined behaviour.</p>\n"}], "owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 29264074, "answer_count": 1, "score": -1, "last_activity_date": 1427309381, "creation_date": 1427307764, "last_edit_date": 1427308808, "question_id": 29263539, "link": "https://stackoverflow.com/questions/29263539/c-array-corrupted-after-calling-a-function", "title": "C array corrupted after calling a function", "body": "<p>I have a simple C program which is supposed to fill an array with random values (this is the beginning of a school assignment). I'm using rand(), seeding it with srand(time()). Because this tended to generate somewhat predictable results when run repeatedly in a certain time period, I made another very simple function to give me a somewhat more random seed value:</p>\n\n<pre><code>time_t getRandomSeed(int numberOfIterations)\n{\n    int i;\n    time_t result=time();\n\n    for (i = 0; i &lt; numberOfIterations; i++)\n    {\n        result = randomizeSeed(result);\n    }\n\n    return result;\n}\n\ntime_t randomizeSeed(time_t seed)\n{\n    time_t result, fullTime, Modifier1, Modifier2;\n\n    srand((unsigned int)seed);\n    fullTime = time();\n    Modifier1 = time() &gt;&gt; (rand() % 10);\n    Modifier2 = (unsigned short)time();\n    Modifier2 &lt;&lt;= (rand() % 9 + 9);\n\n    result = fullTime ^ Modifier1 ^ Modifier2;\n\n    return result;\n}\n</code></pre>\n\n<p>In main, I'm calling this inside srand() after declaring 2 int arrays. When I return to main, these arrays are garbage, and I can't figure out why.</p>\n\n<pre><code>int main(void)\n{   \n    int randomNumbers[ARRAY_LENGTH];\n    int sortedNumbers[ARRAY_LENGTH];\n\n    srand((unsigned int)getRandomSeed(2));\n\n    fillArray(randomNumbers, sizeof(randomNumbers) / sizeof(randomNumbers[0]));\n\n    return 0;\n}\n</code></pre>\n\n<p>I set a breakpoint at line 4, and I have a perfectly normal unititialized array (at 0x00e1ea70 in the most recent run). Then I set another breakpoint at line 8, so I could see the array just before it was passed into fillArray. At this point, the address of the array is somehow 0xfffff04c, and all the elements show \"unable to read memory\", which I guess makes sense given the address is garbage.</p>\n\n<p>Can anybody give me a clue what's happening to my array?</p>\n\n<p>*Note, this is for a school assignment, so I don't really care if the RNG is secure, nor can I use any 3rd party libraries.</p>\n\n<p>Update:\nPer request, this is the body of fillArray(). However, from my question, the problem happens before we ever get to fillArray(), as I'm setting the breakpoint before it get's called.</p>\n\n<pre><code>void fillArray(int array[], size_t length)\n{\n    size_t i;\n\n    for (i = 0; i &lt; length; i++)\n    {\n        array[i] = rand()%1000 + 1;\n    }\n\n    return;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "macos", "gcc"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 4, "creation_date": 1427309216, "post_id": 29263321, "comment_id": 46729944, "body": "if on OS X, why don&#39;t you use <code>clang</code>?"}, {"owner": {"reputation": 2815, "user_id": 4350586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IvPNx.png?s=128&g=1", "display_name": "Dmitry Grigoryev", "link": "https://stackoverflow.com/users/4350586/dmitry-grigoryev"}, "edited": false, "score": 0, "creation_date": 1427326536, "post_id": 29263321, "comment_id": 46738435, "body": "the output of <code>gcc -v</code> might help, but I&#39;m afraid you will get segfault with this command as well"}], "answers": [{"comments": [{"owner": {"reputation": 884, "user_id": 3320620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/170b760e0147792d0140e59ec78e9893?s=128&d=identicon&r=PG", "display_name": "eitanlees", "link": "https://stackoverflow.com/users/3320620/eitanlees"}, "edited": false, "score": 0, "creation_date": 1427342584, "post_id": 29263493, "comment_id": 46742439, "body": "I used the PATH manipulation they suggested and it seems to have fixed my problem. export PATH=&quot;/Applications/Xcode.app/Contents/Developer/Toolchains/&zwnj;&#8203;XcodeDefault.xctoolc&zwnj;&#8203;hain/usr/bin:/Applic&zwnj;&#8203;ations/Xcode.app/Con&zwnj;&#8203;tents/Developer/usr/&zwnj;&#8203;bin:$PATH&quot;"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 2, "last_activity_date": 1427309093, "last_edit_date": 1495540706, "creation_date": 1427307633, "answer_id": 29263493, "question_id": 29263321, "link": "https://stackoverflow.com/questions/29263321/gcc-segmentation-fault-mac/29263493#29263493", "title": "GCC Segmentation Fault Mac", "body": "<p>It seems that gcc and g++ have to be installed/added to the MAC os.</p>\n\n<p>From your description, I would expect that the wrong version of those tools was installed.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9353444/\">This answer</a> should help.</p>\n\n<p>Be sure to read all the answers to the question before proceeding with a gcc installation. </p>\n"}, {"tags": [], "owner": {"reputation": 3895, "user_id": 446464, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3da4ed7ea16825fead6120d70dc7da43?s=128&d=identicon&r=PG", "display_name": "JESii", "link": "https://stackoverflow.com/users/446464/jesii"}, "is_accepted": false, "score": -1, "last_activity_date": 1441571980, "last_edit_date": 1441571980, "creation_date": 1441560713, "answer_id": 32426334, "question_id": 29263321, "link": "https://stackoverflow.com/questions/29263321/gcc-segmentation-fault-mac/32426334#32426334", "title": "GCC Segmentation Fault Mac", "body": "<p>I had a similar problem where even <code>gcc --version</code>was giving me a \"Segmentation fault: 11\". This is on OSX 10.10.5 with XCode 6.4. After much googling and no solution, I found that clang (Apple's LLVM-based C compiler) is intended to be a compatible replacement for gcc, so I just sym-linked gcc to clang as follows:</p>\n\n<pre><code>whence gcc #=&gt; /usr/local/bin/gcc\nwhence clang #=&gt; /usr/bin/clang\ncd /usr/local/bin\nsudo mv gcc gcc_OLD\nsudo ln -s /usr/bin/clang /usr/local/bin/gcc\ngcc -v\nApple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn)\nTarget: x86_64-apple-darwin14.5.0\nThread model: posix\n</code></pre>\n\n<p>Now I am able to successfully compile c-language stuff, like my ruby extensions.</p>\n"}], "owner": {"reputation": 884, "user_id": 3320620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/170b760e0147792d0140e59ec78e9893?s=128&d=identicon&r=PG", "display_name": "eitanlees", "link": "https://stackoverflow.com/users/3320620/eitanlees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5189, "favorite_count": 0, "accepted_answer_id": 29263493, "answer_count": 2, "score": 0, "last_activity_date": 1441571980, "creation_date": 1427307098, "question_id": 29263321, "link": "https://stackoverflow.com/questions/29263321/gcc-segmentation-fault-mac", "title": "GCC Segmentation Fault Mac", "body": "<p>I have been having some trouble getting my gcc and g++ compiler to work on my\nmac (OSX Yosemite 10.10.2).</p>\n\n<p>I have written up a simple \"Hello World\" program and even these seem to not\nwork. The two program that I tried to run are </p>\n\n<p><strong>hello.c</strong></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"Hello world\\n\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>hello.cpp</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"Hello World\";\n}\n</code></pre>\n\n<p>I can compile the C program using <code>cc hello.c</code> and everything works fine, but\nwhen I do <code>gcc hello.c</code> I get this error</p>\n\n<pre><code>[1]    38508 segmentation fault  gcc hello.c\n</code></pre>\n\n<p>I get a similar error attempting to compile my C++ code</p>\n\n<pre><code>[1]    38596 segmentation fault  g++ hello.cpp\n</code></pre>\n\n<p>I did <code>which gcc</code> and I get <code>/opt/local/bin/gcc</code> and that directory is in my\npath.\n( <code>/usr/texbin /opt/local/bin /opt/local/sbin /bin /usr/sbin /sbin /usr/local/bin/usr/bin</code> )</p>\n\n<p>So I am confused as to what is happening. I thought I downloaded all of the\nXcode things that I needed. I would like to get <code>gcc</code> and <code>g++</code> running\nproperly. I hope that you can help.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "arrays", "function", "loops", "scanf"], "comments": [{"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 1, "creation_date": 1427307031, "post_id": 29263262, "comment_id": 46728564, "body": "How are the numbers input? One per line, or separated by spaces, or something else?"}, {"owner": {"reputation": 11216, "user_id": 2692688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/woiEs.png?s=128&g=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2692688/tushar"}, "edited": false, "score": 1, "creation_date": 1427307035, "post_id": 29263262, "comment_id": 46728567, "body": "How will you define the end of input?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1427307062, "post_id": 29263262, "comment_id": 46728587, "body": "You use two uninitialised variables, <code>i</code> and <code>counter</code>. Variables are not initialised to 0 in C. Then what should <code>counter</code> mean if not the number of elements read? Your call to <code>scanf</code> can return one of three values: 1 for success, 0 for failure and <code>EOF</code> for end of file."}, {"owner": {"reputation": 59, "user_id": 4766244, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/864214886955541/picture?type=large", "display_name": "user4766244", "link": "https://stackoverflow.com/users/4766244/user4766244"}, "edited": false, "score": 0, "creation_date": 1427307199, "post_id": 29263262, "comment_id": 46728671, "body": "I had no clue if that was the way to write it. I can also use a txt file to read in values but Im lost on that as well"}, {"owner": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "edited": false, "score": 0, "creation_date": 1427307225, "post_id": 29263262, "comment_id": 46728691, "body": "Do you want each digit of the number to go to each of the array indices? what&#39;s it that you want?"}, {"owner": {"reputation": 59, "user_id": 4766244, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/864214886955541/picture?type=large", "display_name": "user4766244", "link": "https://stackoverflow.com/users/4766244/user4766244"}, "edited": false, "score": 0, "creation_date": 1427307866, "post_id": 29263262, "comment_id": 46729092, "body": "I just need to know how to read values into a array using a while loop"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427308295, "post_id": 29263262, "comment_id": 46729352, "body": "Fix the existing problems, before moving on. You can&#39;t make something work based on something not working. Garbage in - garbage out."}, {"owner": {"reputation": 59, "user_id": 4766244, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/864214886955541/picture?type=large", "display_name": "user4766244", "link": "https://stackoverflow.com/users/4766244/user4766244"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427312830, "post_id": 29263262, "comment_id": 46732092, "body": "Is this better? and can you help me with the next loop. @EugeneSh."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427313435, "post_id": 29263262, "comment_id": 46732415, "body": "The next loop is to print the values? Just like the first loop with <code>printf(&quot;%d\\n&quot;, numArray[i]);</code> inside. Don&#39;t forget to reset <code>i</code>. Or use <code>for</code> loop."}, {"owner": {"reputation": 59, "user_id": 4766244, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/864214886955541/picture?type=large", "display_name": "user4766244", "link": "https://stackoverflow.com/users/4766244/user4766244"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427314094, "post_id": 29263262, "comment_id": 46732753, "body": "what do you mean reset I? like re declare as 0? @EugeneSh."}, {"owner": {"reputation": 59, "user_id": 4766244, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/864214886955541/picture?type=large", "display_name": "user4766244", "link": "https://stackoverflow.com/users/4766244/user4766244"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427314281, "post_id": 29263262, "comment_id": 46732861, "body": "this is what I did but it prints different values <code>int x = 0; \twhile(x &lt; counter){  \t\tprintf(&quot;Values: %d\\n&quot;, numArray[i]); \t\tx++; \t}</code> @EugeneSh."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427314552, "post_id": 29263262, "comment_id": 46733040, "body": "How the input numbers are separated? Spaces? Newlines?"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 4771743, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZIdP-zR9LTI/AAAAAAAAAAI/AAAAAAAAABI/kt0-IzkUnlk/photo.jpg?sz=128", "display_name": "KinoR", "link": "https://stackoverflow.com/users/4771743/kinor"}, "is_accepted": true, "score": 0, "last_activity_date": 1428769189, "last_edit_date": 1592644375, "creation_date": 1428769189, "answer_id": 29580129, "question_id": 29263262, "link": "https://stackoverflow.com/questions/29263262/while-loop-to-read-interger-values-from-standard-input/29580129#29580129", "title": "While loop to read interger values from standard input", "body": "<blockquote>\n<p>I need my program to read integer values into adjacent elements in the array, and set the counter to the total number of integers read. I also need another loop to print the values to the screen.</p>\n<p>How do I go about doing this?</p>\n</blockquote>\n<p>The overall program should work, however you need to initialize:</p>\n<pre><code>value = 0; /*Initialize Variables */\ncounter = 0;\n</code></pre>\n<p>In C when you enter a function like main variables like value and counter get initialized with random value -- if you don't initialize. It could cause you problems.</p>\n<pre><code> while(i &lt; counter) /*Scans the values into the array */\n {\n   scanf(&quot;%d&quot;, &amp;numArray[i]);\n   value = numArray[i];\n   i++;\n }\n</code></pre>\n<p>The scanf function here scans the value you entered into the array.\nI'm not sure what you would use values for; your array stores the values for you. However, it could make your code shorter if you use it in a different way.</p>\n<p>A loop to print the values would look similar to your original loop.</p>\n<pre><code>while(i &lt; counter)\n{\n  printf(&quot;%d&quot;, &amp;numArray[i]); /*Prints the values in the array */\n  i++;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4766244, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/864214886955541/picture?type=large", "display_name": "user4766244", "link": "https://stackoverflow.com/users/4766244/user4766244"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1603, "favorite_count": 0, "accepted_answer_id": 29580129, "answer_count": 1, "score": 0, "last_activity_date": 1428769189, "creation_date": 1427306905, "last_edit_date": 1427334451, "question_id": 29263262, "link": "https://stackoverflow.com/questions/29263262/while-loop-to-read-interger-values-from-standard-input", "title": "While loop to read interger values from standard input", "body": "<p>I need my program to read integer values into adjacent elements in the array, and set the counter to the total number of integers read.  I also need another loop to print the values to the screen. </p>\n\n<p>How do I go about doing this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int numArray[100];\n    int counter, value;\n\n    printf(\"Enter array length \\n\");\n    scanf(\"%d\", &amp;counter); \n\n    int i = 0;\n    while(i &lt; counter) {\n        scanf(\"%d\", &amp;numArray[i]);\n        value = numArray[i];\n        i++;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1427306857, "post_id": 29263133, "comment_id": 46728452, "body": "newvec3 make memory leak.  also To be using the C ++."}, {"owner": {"reputation": 123, "user_id": 4499696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351c577464d4989297b9e4ef336e1367?s=128&d=identicon&r=PG&f=1", "display_name": "mklingen", "link": "https://stackoverflow.com/users/4499696/mklingen"}, "edited": false, "score": 0, "creation_date": 1427306867, "post_id": 29263133, "comment_id": 46728464, "body": "yikes, this is very bad. You&#39;re getting a memory leak every time you create a new vec3. Typically the way this is done is just declaring the struct and then manually setting its members. <code>vec3 test; test.x = 0.0; test.y = 1.0; test.z = 0.4</code>. You can also make use of the fact that structs are contiguous in memory by setting it equal to an array <code>{x, y, z}</code>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1427306872, "post_id": 29263133, "comment_id": 46728466, "body": "You allocate memory, which you then effectively discard: The struct is returned by value and the access to the pointer lost. This is a memory leak."}, {"owner": {"reputation": 141, "user_id": 4694986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9397538b025572697152e6564be84c8?s=128&d=identicon&r=PG&f=1", "display_name": "TJGreen", "link": "https://stackoverflow.com/users/4694986/tjgreen"}, "edited": false, "score": 0, "creation_date": 1427310120, "post_id": 29263133, "comment_id": 46730521, "body": "I see the memory leak now, and fixed it."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4694986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9397538b025572697152e6564be84c8?s=128&d=identicon&r=PG&f=1", "display_name": "TJGreen", "link": "https://stackoverflow.com/users/4694986/tjgreen"}, "edited": false, "score": 1, "creation_date": 1427308626, "post_id": 29263204, "comment_id": 46729561, "body": "Such a simple fix that I looked over. Thanks for your comment."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1427306763, "creation_date": 1427306763, "answer_id": 29263204, "question_id": 29263133, "link": "https://stackoverflow.com/questions/29263133/c-vec3-struct-implementation/29263204#29263204", "title": "C vec3 Struct Implementation", "body": "<p>Use</p>\n\n<pre><code>vec3 test = {0.0, 1.0, 0.4};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1427307353, "last_edit_date": 1427307353, "creation_date": 1427307015, "answer_id": 29263294, "question_id": 29263133, "link": "https://stackoverflow.com/questions/29263133/c-vec3-struct-implementation/29263294#29263294", "title": "C vec3 Struct Implementation", "body": "<p>The closest you can get in C to using a type name as a constructor is to use a compound literal:</p>\n\n<pre><code>vec3 test = (vec3){ 0.0, 1.0, 0.4 };\n</code></pre>\n\n<p>This of course ditches the function body so you have no real ability to do anything outside set values (it also doesn't allocate dynamic storage; you'll have to do that separately). It gives you a few extra features that are nice to have though (automatically zeroes fields, shorter for complex structs, etc.).</p>\n\n<p>C has multiple namespaces (i.e. multiple ways to interpret the same word), but they're marked out by keywords (like <code>struct</code> or <code>enum</code>), or they're the main \"shared\" space. Once you <code>typedef</code> a type, you put it in the \"shared\" space, using up the meaning of that name so it can't also be given to a function. There's no \"named func\" space or anything like that.</p>\n\n<p>You <em>could</em> use a function-like macro to wrap <code>newvec3</code>:</p>\n\n<pre><code>#define vec3(...) newvec3(__VA_ARGS__)\n</code></pre>\n\n<p>This will only expand <code>vec3</code> into <code>newvec3</code> when it's in a function-call context, so it would allow the continued use of the name in a type context. But you probably shouldn't do this - it <em>doesn't</em> actually add a second meaning to the global namespace, it's just a replacement that sometimes fires and sometimes doesn't (and worse, will fire regardless of scope rules, which violates C semantics for normal type and function names). You have to have two separate names in the actual program space; may as well make it explicit.</p>\n"}], "owner": {"reputation": 141, "user_id": 4694986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9397538b025572697152e6564be84c8?s=128&d=identicon&r=PG&f=1", "display_name": "TJGreen", "link": "https://stackoverflow.com/users/4694986/tjgreen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 0, "accepted_answer_id": 29263204, "answer_count": 2, "score": 2, "last_activity_date": 1427307353, "creation_date": 1427306512, "last_edit_date": 1427307136, "question_id": 29263133, "link": "https://stackoverflow.com/questions/29263133/c-vec3-struct-implementation", "title": "C vec3 Struct Implementation", "body": "<p>I am attempting to implement a vec3 struct in C. I have it working, but not necessarily how I want. The current code I have is below.</p>\n\n<pre><code>typedef struct vec3 {\n    float x, y, z;\n} vec3;\n\nstruct vec3 newvec3(float x, float y, float z) {\n    struct vec3 *values = malloc(sizeof(struct vec3));\n\n    values-&gt;x = x;\n    values-&gt;y = y;\n    values-&gt;z = z;\n    return *values;\n}\n</code></pre>\n\n<p>In order to declare the struct I have to write.</p>\n\n<pre><code>vec3 test = newvec3(0.0, 1.0, 0.4);\n</code></pre>\n\n<p>What I want is.</p>\n\n<pre><code>vec3 test = vec3(0.0, 1.0, 0.4);\n</code></pre>\n\n<p>or something similar. I was wondering if there was a way to do this. Thanks.</p>\n"}, {"tags": ["c", "arrays", "quicksort", "partitioning"], "answers": [{"tags": [], "owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "is_accepted": true, "score": 1, "last_activity_date": 1427309252, "creation_date": 1427309252, "answer_id": 29264034, "question_id": 29262837, "link": "https://stackoverflow.com/questions/29262837/arguments-to-partition-function-for-quicksort/29264034#29264034", "title": "Arguments to Partition function for Quicksort", "body": "<p>Consider what happens if <code>low_int</code> is 1000 and <code>high_int</code> is 2000 and the array ends at 2000. Now you give it the array <code>B = &amp;A[1000]</code> and the value 2001. The value of 2001 causes it to access the element <code>B[2001-1] = B[2000] = A[3000]</code>. It's accessing the array out of bounds.</p>\n\n<p>Shouldn't you use something like <code>high_int - low_int + 1</code> for the second argument? Note: I haven't verified that your code doesn't have off-by-one errors with the argument <code>high_int - low_int + 1</code> but anyway it seems to me that you should be substracting <code>low_int</code> from <code>high_int</code>.</p>\n\n<p>Another option would be to give it <code>A</code>, <code>low_int</code> and <code>high_int</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 3607053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34247ca49ce454aa31cf95916cd40e7f?s=128&d=identicon&r=PG&f=1", "display_name": "KittiCat", "link": "https://stackoverflow.com/users/3607053/kitticat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 29264034, "answer_count": 1, "score": 0, "last_activity_date": 1427309252, "creation_date": 1427305513, "question_id": 29262837, "link": "https://stackoverflow.com/questions/29262837/arguments-to-partition-function-for-quicksort", "title": "Arguments to Partition function for Quicksort", "body": "<p>So I've been attempting to write a stack-based quicksort function, which calls a partition function. The header for partition() is as follows:</p>\n\n<pre><code>int partition(void **A, int n, void *pivot, int (cmp)(void *, void *));\n</code></pre>\n\n<p>where A is the array, n is the size of the array and pivot is the value of the pivot (not the index).</p>\n\n<p>My current call to partition is: </p>\n\n<pre><code>partition(&amp;A[low_int], high_int + 1, A[low_int+(high_int-low_int)/2], cmp)\n</code></pre>\n\n<p>Above, my values for low and high are the classic 'l' and 'h' used in iterative quicksort, where l begins as the lowest index (and h the highest). These values then change as the function continues.</p>\n\n<p>I'll post my partition function below:</p>\n\n<pre><code>int \npartition(void **A, int n, void *pivot, int (cmp)(void *, void *)) {\n    int k;\n\n    int i = 0;\n    for (int j = 0; j &lt;= n-2; j++) {\n        if (cmp(A[j], pivot) &lt;= 0) {\n            i++;\n            swap(A, i, j);\n        }\n    }\n    swap(A, i+1, n-1);\n    k = i + 2;\n    return k; //k is the first value after the pivot in partitioned A\n</code></pre>\n\n<p>}</p>\n\n<p>My problem is deciding on the inputs for my call to partition(). For the first argument, I've chose &amp;A[low_int], as I'm not using a \"left\" as one of my inputs and therefore am trying to create a pointer to essentially start my array later. The third argument if for pivot, where I've been trying to select an element within that range, but both this and argument 1 have been causing my code to either return an unsorted array or run infinitely.</p>\n\n<p>Could I please get some help here with what I've done wrong and how to fix it?</p>\n\n<p>I've tried to include all relevant code, but please let me know if I've missed anything important or if anything I've written is unclear, or you need more info. Thank you</p>\n"}, {"tags": ["c", "function", "pointers", "prototype"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1427305401, "post_id": 29262686, "comment_id": 46727464, "body": "Where is &quot;text&quot; defined in main?  You need to pass that to the function and remove locally-scoped test declaration."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1427305540, "post_id": 29262686, "comment_id": 46727554, "body": "<code>*p + 1</code> should be <code>*(p + 1)</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1427305655, "post_id": 29262686, "comment_id": 46727631, "body": "delete <code>char text[256] ;</code> and <code>p = text;</code> at <code>wordcount</code>. and <code>nwords = 0;</code> change to  <code>nwords = 1;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1427305832, "post_id": 29262686, "comment_id": 46727768, "body": "<code>gets_s</code> needs size parameter."}, {"owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1427305881, "post_id": 29262686, "comment_id": 46727808, "body": "iam sorry @OldProgrammer i had declared the char text[256] ; outside of main and i forgot to say it. it doesnt really matter if it is outside does it?"}, {"owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "edited": false, "score": 0, "creation_date": 1427306006, "post_id": 29262686, "comment_id": 46727892, "body": "@user3629249 the first block is the original code! yes and it has the gets() function like this, but visual studio gets an error on that telling me that i have to change it in gets_s()"}, {"owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 1, "creation_date": 1427306243, "post_id": 29262686, "comment_id": 46728050, "body": "i defined it outside of main and i forgot to show to you. as i olready told it to @OldProgrammer"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427306422, "post_id": 29262686, "comment_id": 46728150, "body": "in the wordcount() function, the &#39;for&#39; loop will fail for any of several reasons.  Here are two of those reasons.  1) the code is looking ahead of where the loop control is looking, so if the look ahead encounters a &#39;\\n&#39; or a &#39;\\0&#39; it will increment &#39;nwords&#39;  even though there is no word."}, {"owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1427306468, "post_id": 29262686, "comment_id": 46728181, "body": "@BLUEPIXY oh my God! thanks a lot! that was the fault. im trying to figure out why though... the <code>p = text;</code> was wrong inside the function"}, {"owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427306600, "post_id": 29262686, "comment_id": 46728267, "body": "yes @user3629249 you are wright! how can i avoid that? with what change in my code?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427306715, "post_id": 29262686, "comment_id": 46728357, "body": "perhaps check *(p_1) for &#39;\\n&#39; and &#39;\\0&#39; with an IF statement before incrementing nwords"}, {"owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427307213, "post_id": 29262686, "comment_id": 46728680, "body": "@user3629249 you mean not with a for loop? just with an if statement? im thinking how this can be done... just my third time writing C.so any help would be much much appreciate. considering that this is just the first part of my program solution :P"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427306813, "post_id": 29263147, "comment_id": 46728422, "body": "this has the same problem with look-a-ahead as the OPs example"}, {"owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "edited": false, "score": 0, "creation_date": 1427306999, "post_id": 29263147, "comment_id": 46728545, "body": "yes @Beowulf thanks this works too! the only thing is that i had to initialize to <code>nwords = 1;</code> instead of 0"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427307058, "post_id": 29263147, "comment_id": 46728581, "body": "parameters are passed by value, so need to copy the passed parameter to a local variable, just use the passed parameter to step through the text[] array.  For safety, and because text[] is globally visible, suggest 1) no passed parameter, 2) in for loop add &#39;&amp;&amp; (p-text) &lt; sizeof text&#39; 3) initialize &#39;p&#39; via ;p = text;;"}], "tags": [], "owner": {"reputation": 360, "user_id": 3494583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eba66c233992c8e8c4222381813684a?s=128&d=identicon&r=PG&f=1", "display_name": "Beowulf", "link": "https://stackoverflow.com/users/3494583/beowulf"}, "is_accepted": false, "score": 0, "last_activity_date": 1427306558, "creation_date": 1427306558, "answer_id": 29263147, "question_id": 29262686, "link": "https://stackoverflow.com/questions/29262686/c-program-counting-number-of-words-with-pointers-inside-a-function/29263147#29263147", "title": "C program counting number of words with pointers inside a function", "body": "<pre><code>int wordcount(char *text){   // here the pointer to the text is to be passed\nchar *p;  // no need to declare text again \nint nwords;\nnwords = 0;\n\np = text;    \nfor (; *p != '\\0'; p++)\n    if (*p == ' ' &amp;&amp; *p + 1 != ' ')\n        nwords++;\nreturn nwords;\n}\n</code></pre>\n\n<p>I hope this will work now</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "edited": false, "score": 0, "creation_date": 1427308675, "post_id": 29263441, "comment_id": 46729591, "body": "thank you very much!! the code is absolutely perfect thanks a lot!"}, {"owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "edited": false, "score": 0, "creation_date": 1427309063, "post_id": 29263441, "comment_id": 46729850, "body": "i didn&#39;e even know the function <code>isspace</code> so this was very helpful. this way my program does not take into account the spaces anymore and as a result its functionality is perfect. thanks a lot Sir!"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 1, "last_activity_date": 1427308016, "last_edit_date": 1427308016, "creation_date": 1427307465, "answer_id": 29263441, "question_id": 29262686, "link": "https://stackoverflow.com/questions/29262686/c-program-counting-number-of-words-with-pointers-inside-a-function/29263441#29263441", "title": "C program counting number of words with pointers inside a function", "body": "<p>OP approach is problematic in nature. (It assume the word exists in the first of input)<br>\nFor example to be improved as follows.</p>\n\n<pre><code>int wordcount(const char *p){\n    char prev = ' ';\n    int nwords = 0;\n\n    while(*p){\n        if(isspace(prev) &amp;&amp; !isspace(*p)){//isspace in &lt;ctype.h&gt;\n            ++nwords;\n        }\n        prev = *p++;\n    }\n    return nwords;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 4671510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4488a0d8bdca05d012b03fcbbebec463?s=128&d=identicon&r=PG&f=1", "display_name": "dekoza27", "link": "https://stackoverflow.com/users/4671510/dekoza27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2901, "favorite_count": 0, "accepted_answer_id": 29263441, "answer_count": 2, "score": 0, "last_activity_date": 1427308016, "creation_date": 1427305076, "last_edit_date": 1427305661, "question_id": 29262686, "link": "https://stackoverflow.com/questions/29262686/c-program-counting-number-of-words-with-pointers-inside-a-function", "title": "C program counting number of words with pointers inside a function", "body": "<p>i have this block of code here: what im trying to do is to convert the part with the for loop and the index <code>[i]</code>, with pointers.</p>\n\n<pre><code>int main()\n{ int i;\n  int nwords;\n\n    display_name();\n    while (TRUE)\n    {   printf(\"\\nEnter a phrase :\");\n        gets(text);\n        if (isEmpty(text))\n            return 0;\n        //  to be replaced in a function int wordcount(); - START  //\n        nwords=0;\n        for (i=0; text[i] ; i++)\n            if (text[i]==' ' &amp;&amp; text[i+1]!=' ')\n                nwords++;\n        nwords++;\n        printf(\"Text contains %d words\\n\",nwords);\n</code></pre>\n\n<p>so i did it and until here works fine:</p>\n\n<pre><code>int main()\n{ int i;\n  int nwords;\n\n    display_name();\n    while (TRUE)\n    {   printf(\"\\nEnter a phrase :\");\n        gets_s(text);\n        if (isEmpty(text))\n            return 0;\n        //  to be replaced in a function int wordcount(); - START  //\n        nwords = 0;\n        p = text;\n        for (; *p != '\\0'; p++)\n            if (*p == ' ' &amp;&amp; *p + 1 != ' ')\n                nwords++;\n\n        nwords++;\n        printf(\"Text contains %d words\\n\",nwords);\n</code></pre>\n\n<p>but my question is how can i place this code in a function <code>wordcount()</code> and then call it from the <code>main()</code>? i placed the code in the function like this:</p>\n\n<pre><code>int wordcount(char *p){\n    char text[256] ;\n    int nwords;\n    nwords = 0;\n\n    p = text;\n    for (; *p != '\\0'; p++)\n        if (*p == ' ' &amp;&amp; *p + 1 != ' ')\n            nwords++;\n    return nwords;\n}\n</code></pre>\n\n<p>and the prototype of the function:</p>\n\n<pre><code>int wordcount(char *p);\n</code></pre>\n\n<p>i call it like this but it does not count the words, just prints 0's.</p>\n\n<pre><code>int main()\n{ int i;\n  int nwords;\n\n    display_name();\n    while (TRUE)\n    {   printf(\"\\nEnter a phrase :\");\n        gets_s(text);\n        if (isEmpty(text))\n            return 0;\n        //  to be replaced in a function int wordcount(); - START  //\n\n        nwords = wordcount(text);\n        printf(\"Text contains %d words\\n\",nwords);\n\n\nStudent Name : Rasmus Lerdorf\nEnter a phrase :asd\nText contains 0 words\n\nEnter a phrase :asdasd\nText contains 0 words\n\nEnter a phrase :asd asdasd\nText contains 0 words\n\nEnter a phrase :asd as as\nText contains 0 words\n\nEnter a phrase :\n</code></pre>\n"}, {"tags": ["c", "cython", "ipython-notebook"], "comments": [{"owner": {"reputation": 358, "user_id": 1293930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125bdfa8a2b91432c072615364bc3fa1?s=128&d=identicon&r=PG", "display_name": "michitux", "link": "https://stackoverflow.com/users/1293930/michitux"}, "edited": false, "score": 4, "creation_date": 1427306832, "post_id": 29262667, "comment_id": 46728432, "body": "Currently, IPython only captures and displays the output at Python-level, have a look at this <a href=\"https://github.com/ipython/ipython/issues/1230\" rel=\"nofollow noreferrer\">issue on GitHub</a> for a discussion about this problem. However I don&#39;t know where the output goes."}], "answers": [{"tags": [], "owner": {"reputation": 3205, "user_id": 3842788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/81a5bc23ab94f25a1ee37f99a80853d2?s=128&d=identicon&r=PG&f=1", "display_name": "Aseem", "link": "https://stackoverflow.com/users/3842788/aseem"}, "is_accepted": false, "score": 1, "last_activity_date": 1522125926, "last_edit_date": 1522125926, "creation_date": 1522097263, "answer_id": 49500348, "question_id": 29262667, "link": "https://stackoverflow.com/questions/29262667/how-to-allow-c-printf-to-print-in-ipython-notebook-in-cython-cell/49500348#49500348", "title": "How to allow c printf to print in ipython notebook in cython cell?", "body": "<p>Output will be printed in your terminal (console) running Jupyter notebook. not sure how to display it in Jupyter though.</p>\n"}, {"comments": [{"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 1, "creation_date": 1595857390, "post_id": 62898890, "comment_id": 111611206, "body": "wurlitzer seems only to work for Unix-system, as it uses <code>fcntl</code> which is Unix-only library:("}], "tags": [], "owner": {"reputation": 11810, "user_id": 2063031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f2677db7242bfbcead46fbf27390160d?s=128&d=identicon&r=PG", "display_name": "ostrokach", "link": "https://stackoverflow.com/users/2063031/ostrokach"}, "is_accepted": true, "score": 2, "last_activity_date": 1594741387, "creation_date": 1594741387, "answer_id": 62898890, "question_id": 29262667, "link": "https://stackoverflow.com/questions/29262667/how-to-allow-c-printf-to-print-in-ipython-notebook-in-cython-cell/62898890#62898890", "title": "How to allow c printf to print in ipython notebook in cython cell?", "body": "<p>You can use the <a href=\"https://github.com/minrk/wurlitzer\" rel=\"nofollow noreferrer\"><code>wurlitzer</code></a> package to capture C-level stdout / stderr and redirect it to IPython.</p>\n<p>For example, include the following code blocks in your Jupyter notebook:</p>\n<pre class=\"lang-py prettyprint-override\"><code>%load_ext Cython\n%load_ext wurlitzer\n</code></pre>\n<pre class=\"lang-py prettyprint-override\"><code>%%cython\nfrom libc.stdio cimport printf\ndef test():\n    printf('abc')\n</code></pre>\n<pre class=\"lang-py prettyprint-override\"><code>test()\n# prints &quot;abc&quot;\n</code></pre>\n"}], "owner": {"reputation": 17717, "user_id": 691867, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86cad22e6f9100c801c56c099872bbc2?s=128&d=identicon&r=PG", "display_name": "colinfang", "link": "https://stackoverflow.com/users/691867/colinfang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2168, "favorite_count": 0, "accepted_answer_id": 62898890, "answer_count": 2, "score": 4, "last_activity_date": 1594741387, "creation_date": 1427305017, "question_id": 29262667, "link": "https://stackoverflow.com/questions/29262667/how-to-allow-c-printf-to-print-in-ipython-notebook-in-cython-cell", "title": "How to allow c printf to print in ipython notebook in cython cell?", "body": "<pre><code>%%cython\nfrom libc.stdio cimport printf\ndef test():\n    printf('abc')\n</code></pre>\n\n<p>If I run <code>test()</code>, it doesn't print anything.</p>\n\n<p>Currently I am doing something stupid as:</p>\n\n<pre><code>cdef char s[80]\nsprintf(s, 'something')\nprint s\n</code></pre>\n\n<p>What's a better way to use <code>printf</code> in cython? Why doesn't it print? </p>\n"}, {"tags": ["c", "cython"], "answers": [{"comments": [{"owner": {"reputation": 17717, "user_id": 691867, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86cad22e6f9100c801c56c099872bbc2?s=128&d=identicon&r=PG", "display_name": "colinfang", "link": "https://stackoverflow.com/users/691867/colinfang"}, "edited": false, "score": 0, "creation_date": 1427320788, "post_id": 29265546, "comment_id": 46736306, "body": "Very good explanation, I didn&#39;t expect the name <code>myadd</code> binds to <code>__pyx_f_7another_myadd</code> which is a pointer to the actual function."}], "tags": [], "owner": {"reputation": 789, "user_id": 4454801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d100a9778b2114c3e89b11054397c712?s=128&d=identicon&r=PG&f=1", "display_name": "Cristi&#225;n Antu&#241;a", "link": "https://stackoverflow.com/users/4454801/cristi%c3%a1n-antu%c3%b1a"}, "is_accepted": true, "score": 2, "last_activity_date": 1427314116, "creation_date": 1427314116, "answer_id": 29265546, "question_id": 29262493, "link": "https://stackoverflow.com/questions/29262493/why-myfunction-and-myfunction-have-different-addresses-for-cimport-customized-f/29265546#29265546", "title": "Why myFunction and &amp;myFunction have different addresses for cimport customized functions?", "body": "<p>If you look at the .c that Cython creates, you will see that what it declares is:</p>\n\n<pre><code>/* Module declarations from 'another' */\nstatic double (*__pyx_f_7another_myadd)(double, double); /*proto*/\n</code></pre>\n\n<p>And then prints (a lot omitted in between):</p>\n\n<pre><code>  sprintf(__pyx_v_s, __pyx_k_p, ((void *)__pyx_f_7another_myadd));\n  sprintf(__pyx_v_s, __pyx_k_p, ((void *)(&amp;__pyx_f_7another_myadd)));\n</code></pre>\n\n<p><code>__pyx_f_7another_myadd</code> is a pointer to a function. If you make it point to some particular function, it will contain it's address in <code>__pyx_f_7another_myadd</code>, but the adress of <code>__pyx_f_7another_myadd</code> itself (i.e. <code>&amp;__pyx_f_7another_myadd</code> remains the same). Since it is true that function declaration themselves ar pointers to functions, maybe a plain C++ example it can be seen what's happening:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint funcion(int a, int b)\n{\n\n  std::cout &lt;&lt; a+b &lt;&lt; std::endl;\n}\n\nint (*func) (int,int);\n\nint main()\n{\n  std::cout &lt;&lt; (void*) funcion &lt;&lt; std::endl;\n  std::cout &lt;&lt; (void*) &amp;funcion &lt;&lt; std::endl;\n\n  func = funcion;\n\n  std::cout &lt;&lt; (void*) func &lt;&lt; std::endl;\n  std::cout &lt;&lt; (void*) &amp;func &lt;&lt; std::endl;\n}\n\n0x400886\n0x400886\n0x400886\n0x601198\n</code></pre>\n\n<p>Here <code>funcion</code> was declared as a function itself, so it is its own pointer (hence the two equal initial adresses). On the other hand, <code>func</code> is a function pointer: it stores <code>funcion</code> adress (the third line), but it has an adress of its own (hence the different fourth line).</p>\n\n<p>Something like <code>(&amp;func) (1,2)</code> won't compile since this expression is not a function call, but <code>(func) (1,2)</code> is, and works.</p>\n"}], "owner": {"reputation": 17717, "user_id": 691867, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86cad22e6f9100c801c56c099872bbc2?s=128&d=identicon&r=PG", "display_name": "colinfang", "link": "https://stackoverflow.com/users/691867/colinfang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 29265546, "answer_count": 1, "score": 1, "last_activity_date": 1427317705, "creation_date": 1427304557, "last_edit_date": 1427317705, "question_id": 29262493, "link": "https://stackoverflow.com/questions/29262493/why-myfunction-and-myfunction-have-different-addresses-for-cimport-customized-f", "title": "Why myFunction and &amp;myFunction have different addresses for cimport customized functions?", "body": "<p>In <code>another.pyx</code>, I have</p>\n\n<pre><code>cdef double myadd(double a, double b):\n    cdef double c = a + b\n    return c\n</code></pre>\n\n<p>In <code>another.pxd</code>, I have</p>\n\n<pre><code>cdef double myadd(double a, double b)\n</code></pre>\n\n<p>If I run this:</p>\n\n<pre><code>from another cimport myadd\nfrom libc.math cimport exp\nfrom libc.stdio cimport sprintf\ndef test():\n    cdef char s[80]\n    sprintf(s, \"%p\", &lt;void *&gt; myadd)\n    print s\n    sprintf(s, \"%p\", &lt;void *&gt; &amp;myadd)\n    print s\n    sprintf(s, \"%p\", &lt;void *&gt; exp)\n    print s\n    sprintf(s, \"%p\", &lt;void *&gt; &amp;exp)\n    print s\n\n\n0x7f5ccc638130\n0x7f5ccc62d5e0\n0x32b9622f90\n0x32b9622f90\n</code></pre>\n\n<p>Why is <code>myadd</code> and <code>&amp;myadd</code> different? It turns out if I use <code>&amp;myadd</code> version and assign it to a function pointer, the program will crash without warning if I call the function pointer with arguments.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1427304338, "post_id": 29262294, "comment_id": 46726731, "body": "This looks like C, not C++ (don&#39;t cast <code>malloc</code> in C, use smart pointers or container classes in C++). In other words, C != C++ for many &quot;natural&quot; solutions."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1427304590, "post_id": 29262294, "comment_id": 46726910, "body": "This looks like C++, not C"}, {"owner": {"reputation": 1, "user_id": 4713016, "user_type": "registered", "profile_image": "https://graph.facebook.com/1564249340513759/picture?type=large", "display_name": "Meiky W. Wungs", "link": "https://stackoverflow.com/users/4713016/meiky-w-wungs"}, "edited": false, "score": 0, "creation_date": 1427304682, "post_id": 29262294, "comment_id": 46726977, "body": "thanks for your advice. i learn this method from my school. they apparently also can&#39;t tells which c or c++, so how to allocate the memories in C++?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1427305090, "post_id": 29262294, "comment_id": 46727249, "body": "<code>void main()</code> is invalid. In C++ you would use new and delete, or preferably a smart pointer, or preferably just use <code>std::list</code>. It depends whether you just want to use a linked list, or the exercise is to create your own."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1427305152, "post_id": 29262294, "comment_id": 46727291, "body": "In C a struct definition is <b>not</b> a typedef. In C++ it is."}, {"owner": {"reputation": 1, "user_id": 4713016, "user_type": "registered", "profile_image": "https://graph.facebook.com/1564249340513759/picture?type=large", "display_name": "Meiky W. Wungs", "link": "https://stackoverflow.com/users/4713016/meiky-w-wungs"}, "edited": false, "score": 0, "creation_date": 1427305437, "post_id": 29262294, "comment_id": 46727490, "body": "i had to use linked list..."}, {"owner": {"reputation": 2638, "user_id": 306936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/218d76bf3b9e1f5214a4e2774b445700?s=128&d=identicon&r=PG", "display_name": "GingerJack", "link": "https://stackoverflow.com/users/306936/gingerjack"}, "edited": false, "score": 0, "creation_date": 1427305561, "post_id": 29262294, "comment_id": 46727569, "body": "in c++ we use new operator to allocate memory and delete operator to release memory. these operators call constructor and destructor respectively."}, {"owner": {"reputation": 2638, "user_id": 306936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/218d76bf3b9e1f5214a4e2774b445700?s=128&d=identicon&r=PG", "display_name": "GingerJack", "link": "https://stackoverflow.com/users/306936/gingerjack"}, "edited": false, "score": 0, "creation_date": 1427305848, "post_id": 29262294, "comment_id": 46727775, "body": "Not sure why you have tail and header pointers  for nodeAddr  when you are accepting only one address for each  nodePrs.If you are capturing multiple address for each personnel then your singup() function  logic is wrong."}, {"owner": {"reputation": 1, "user_id": 4713016, "user_type": "registered", "profile_image": "https://graph.facebook.com/1564249340513759/picture?type=large", "display_name": "Meiky W. Wungs", "link": "https://stackoverflow.com/users/4713016/meiky-w-wungs"}, "edited": false, "score": 0, "creation_date": 1427306707, "post_id": 29262294, "comment_id": 46728344, "body": "the tail is for mark of the very end of the node so i can insert new node  behind the tail.. but thanks for noticing that i might going to change it afterall"}], "owner": {"reputation": 1, "user_id": 4713016, "user_type": "registered", "profile_image": "https://graph.facebook.com/1564249340513759/picture?type=large", "display_name": "Meiky W. Wungs", "link": "https://stackoverflow.com/users/4713016/meiky-w-wungs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1427305102, "creation_date": 1427303972, "last_edit_date": 1427305102, "question_id": 29262294, "link": "https://stackoverflow.com/questions/29262294/linked-list-inside-linked-list", "title": "Linked List inside Linked List", "body": "<p>I'm trying to use nested linked lists, but I can't seem to access the inner part of the linked list.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint option;\n\nstruct nodeAddr\n{\n  int idAddress;\n  char address[50];\n  struct nodeAddr *nextAddr;\n}*headAddr,*tailAddr,*newAddr,*helpAddr;\n\nstruct nodePrs\n{\n    int idPersonel;\n    char personel[50];\n    struct nodeAddr *headAddr,*tailAddr,*newAddr,*helpAddr ;\n    struct nodePrs *nextPrs;\n}*headPrs,*tailPrs,*newPrs,*helpPrs;\n\nvoid signUp()\n{\n    clrscr();\n    printf(\"\\t============================\\n\");\n    printf(\"\\t=   Sign Up New Personel   =\\n\");\n    printf(\"\\t============================\\n\\n\");\n    newPrs=(nodePrs*)malloc(sizeof(struct nodePrs));\n    newPrs-&gt;newAddr=(nodeAddr*)malloc(sizeof(struct nodeAddr));\n    printf(\"Name : \");\n    scanf(\"%s\",newPrs-&gt;personel);\n    printf(\"Address : \");\n    scanf(\"%s\",newPrs-&gt;newAddr-&gt;address);\n    newPrs-&gt;nextPrs = NULL;\n    newPrs-&gt;newAddr-&gt;nextAddr = NULL;\n    if (headPrs==NULL)\n    {\n        headPrs = newPrs;\n        headPrs-&gt;headAddr = newPrs-&gt;newAddr;\n    }\n    else\n    {\n        tailPrs-&gt;nextPrs=newPrs;\n    }\n    tailPrs=newPrs;\n    tailPrs-&gt;tailAddr=newPrs-&gt;newAddr;\n}\n\nvoid printList()\n{\n    helpPrs = headPrs;\n    nodePrs *temp = headPrs;\n    if (headPrs==NULL)\n        printf(\"Empty\");\n    else\n    {\n        printf(\"the Outputs:\\n\");\n        while(helpPrs!=NULL)\n        {\n            printf(\"%s\", helpPrs-&gt;personel);\n            printf(\" \");\n            helpPrs-&gt;helpAddr = temp-&gt;headAddr;\n            while (helpPrs-&gt;helpAddr !=NULL)\n            {\n                printf(\"%s\", helpPrs-&gt;helpAddr-&gt;address);\n                printf(\" \");\n                helpPrs-&gt;helpAddr = helpPrs-&gt;helpAddr-&gt;nextAddr;\n            }\n            helpPrs = helpPrs-&gt;nextPrs;\n            temp=temp-&gt;nextPrs;\n            printf(\"\\n\");\n       }\n    }\n}\n\nvoid main()\n{\n    do\n    {\n        clrscr();\n        printf(\"\\t==================================\\n\");\n        printf(\"\\t= Linked list inside Linked List =\\n\");\n        printf(\"\\t==================================\\n\\n\");\n        printf(\"1. Sign\\n\");\n        printf(\"2. Show\\n\");\n        printf(\"3. Exit\\n\\n\");\n        printf(\"Input (1-3) : \");\n        scanf(\"%d\",&amp;option);\n        if (option == 1)\n        {\n            signUp();\n        }\n        else if (option == 2)\n        {\n            printList();\n            getch();\n        }\n        else if(option&gt;2 || option &lt;1)\n        {\n            printf(\"Wrong choice!!!\");\n        }\n    } while(option!=5);\n    getch();\n}\n</code></pre>\n\n<p>The problem is in the <code>printList()</code> function.  It only prints the first list. After that, it can't show its address of the second entry and so on. </p>\n"}, {"tags": ["c", "linux", "blocking"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427304100, "post_id": 29262119, "comment_id": 46726573, "body": "<code>write</code> is blocking once the underlying stream is blocking. For example a socket opened in blocking mode."}], "answers": [{"comments": [{"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1427304985, "post_id": 29262521, "comment_id": 46727180, "body": "When sleep exits, yes will be killed with a broken pipe error."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1427305055, "post_id": 29262521, "comment_id": 46727232, "body": "@Random832: That&#39;s true. So if the recipe is followed precisely, you only to clean up the named pipe itself."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 6, "last_activity_date": 1427304627, "creation_date": 1427304627, "answer_id": 29262521, "question_id": 29262119, "link": "https://stackoverflow.com/questions/29262119/create-a-scenario-where-write-is-blocking/29262521#29262521", "title": "Create a scenario where write() is blocking", "body": "<p>The <code>write</code> system call copies the data into a kernel buffer associated with the file descriptor. As long as it is possible to buffer, the call will not block. But if you write enough data to a slow output device, then eventually <code>write</code> will block. </p>\n\n<p>It's a bit of work to get the write of a few bytes to block. Here's one way to do it:</p>\n\n<p>First, create a named pipe:</p>\n\n<pre><code>mkfifo /tmp/the_fifo\n</code></pre>\n\n<p>Any attempt to <em>open</em> <code>/tmp/the_fifo</code> for writing will block until some process opens the fifo for reading. You can open the fifo for reading without reading anything with something like:</p>\n\n<pre><code>sleep 1000 &lt; /tmp/the_fifo &amp;\n</code></pre>\n\n<p>Now you can fill the fifo buffer:</p>\n\n<pre><code>yes &gt; /tmp/the_fifo &amp;\n</code></pre>\n\n<p>At this point, your program should block when it tries to write to <code>/tmp/fifo</code>.</p>\n\n<p>When you're done, don't forget to kill the background processes and delete the named pipe.</p>\n"}, {"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1427305391, "creation_date": 1427305391, "answer_id": 29262791, "question_id": 29262119, "link": "https://stackoverflow.com/questions/29262119/create-a-scenario-where-write-is-blocking/29262791#29262791", "title": "Create a scenario where write() is blocking", "body": "<p>If you write into a pipe and no one reads that pipe it eventually fills up. I may be wrong, the default Linux pipe size is 64KB. </p>\n\n<p>Try piping the output of your application into an application that never reads its standard input, something like this:</p>\n\n<pre><code>./hw | sleep 1000\n</code></pre>\n\n<p><code>sleep</code> never reads its standard input, this way you will be able to fill the pipe easily.</p>\n"}], "owner": {"reputation": 385, "user_id": 1164898, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/23f531ce9eb8f99c7bed0abb639da9df?s=128&d=identicon&r=PG", "display_name": "atom", "link": "https://stackoverflow.com/users/1164898/atom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 29262521, "answer_count": 2, "score": 2, "last_activity_date": 1427305391, "creation_date": 1427303469, "question_id": 29262119, "link": "https://stackoverflow.com/questions/29262119/create-a-scenario-where-write-is-blocking", "title": "Create a scenario where write() is blocking", "body": "<p>I got this simple C program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (int argc, char *argv[])\n{\n  printf (\"Hello, world\\n\");\n\n  return 0;\n}\n</code></pre>\n\n<p>If I strace the compiled program printf() becomes write():</p>\n\n<pre><code>$ strace ./hw &gt; x\nexecve(\"./hw\", [\"./hw\"], [/* 19 vars */]) = 0\n...\nwrite(1, \"Hello, world\\n\", 13)          = 13\n...\n</code></pre>\n\n<p>My Question is the following: I want the OS blocking the program execution once it executes the write() call. Is it possible, as a simple non-root user, to create such a scenario? Note that I can not change anything to the program code.</p>\n\n<p>My gut feeling tells me it should, but yet I was unable to find a solution. Imagine write() would write to a file descriptor reffering to an unbuffered character device. Such a device, wouldn't it force write() to block?</p>\n"}, {"tags": ["c++", "c", "memory-management"], "comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1427305770, "post_id": 29262078, "comment_id": 46727717, "body": "The OS doesn&#39;t react to these things. It is the <i>cause</i> of these things. The OS rejects the memory allocation attempt. Look for <code>VirtualAlloc</code>, <code>HeapAlloc</code>, <code>mmap</code> and <code>sbrk</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1427305813, "post_id": 29262078, "comment_id": 46727750, "body": "@ZanLynx: Why are you answering in a <i>comment</i>? Use the answer section."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1427305959, "post_id": 29262078, "comment_id": 46727858, "body": "@LightnessRacesinOrbit: Because there&#39;s already a good answer and I just wanted to respond to one part of the question."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1427309016, "post_id": 29262078, "comment_id": 46729815, "body": "@ZanLynx: Stack Overflow&#39;s software supports multiple answers."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1427303590, "post_id": 29262106, "comment_id": 46726261, "body": "&quot;The OS doesn&#39;t care any more&quot; It might not even know anything happened, small allocations rarely even reach the OS levels."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1427303646, "post_id": 29262106, "comment_id": 46726303, "body": "That is not quite correct. There is OOM killer in Linux, which job is to kill process(es) in case of memory-tight situation."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 4, "creation_date": 1427303656, "post_id": 29262106, "comment_id": 46726312, "body": "@SeverinPappadeux: And it&#39;s completely irrelevant."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1427303742, "post_id": 29262106, "comment_id": 46726371, "body": "@MooingDuck OTOH, a <code>malloc</code> implementation that would fail without even trying to ask the OS for more memory would be rather strange."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 3, "creation_date": 1427303876, "post_id": 29262106, "comment_id": 46726442, "body": "@5gon12eder: Strange, but compliant (say, if there is no OS or --- perhaps more realistically outside of embedded dev --- if the implementation has a settable memory limit, which was reached)."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1427304424, "post_id": 29262106, "comment_id": 46726791, "body": "@5gon12eder nothing strange, happens all the time with ulimit, setrlimit, cgroups"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1427305508, "post_id": 29262106, "comment_id": 46727538, "body": "@5gon12eder: I have a couple different allocator classes that do exactly that. Set a memory limit and it throws the bad_alloc exception whenever it would go over the limit. Good for testing too."}, {"owner": {"reputation": 2463, "user_id": 734748, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f4c88df46d0a7ff19707848263339ee?s=128&d=identicon&r=PG", "display_name": "drdot", "link": "https://stackoverflow.com/users/734748/drdot"}, "edited": false, "score": 0, "creation_date": 1427306305, "post_id": 29262106, "comment_id": 46728089, "body": "so If the allocation failed with new, and I just start writing using the pointer, then it will over write memory regions starting from 0 (similar to a NULL pointer dereference issue when malloc fails?)?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2463, "user_id": 734748, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f4c88df46d0a7ff19707848263339ee?s=128&d=identicon&r=PG", "display_name": "drdot", "link": "https://stackoverflow.com/users/734748/drdot"}, "edited": false, "score": 0, "creation_date": 1427308998, "post_id": 29262106, "comment_id": 46729804, "body": "@dannycrane: <code>new</code>, if it throws, doesn&#39;t give you <i>any</i> pointer. It throws. If you used the non-throwing version that returns a NULL pointer then, well, that&#39;s a vast oversimplification but, yeah sort of. Just like dereferencing and writing through any other invalid pointer."}, {"owner": {"reputation": 2463, "user_id": 734748, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f4c88df46d0a7ff19707848263339ee?s=128&d=identicon&r=PG", "display_name": "drdot", "link": "https://stackoverflow.com/users/734748/drdot"}, "edited": false, "score": 0, "creation_date": 1427317612, "post_id": 29262106, "comment_id": 46734747, "body": "how to find out whether I am using the throwing version or not throwing version?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2463, "user_id": 734748, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f4c88df46d0a7ff19707848263339ee?s=128&d=identicon&r=PG", "display_name": "drdot", "link": "https://stackoverflow.com/users/734748/drdot"}, "edited": false, "score": 0, "creation_date": 1427338795, "post_id": 29262106, "comment_id": 46741589, "body": "@dannycrane: If you don&#39;t know, you are using the throwing version."}, {"owner": {"reputation": 2463, "user_id": 734748, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f4c88df46d0a7ff19707848263339ee?s=128&d=identicon&r=PG", "display_name": "drdot", "link": "https://stackoverflow.com/users/734748/drdot"}, "edited": false, "score": 0, "creation_date": 1427353690, "post_id": 29262106, "comment_id": 46745347, "body": "@LightnessRacesinOrbit, I see your point since my question is about linux or windows. But I am actually using a customized OS, could you answer this last question? If you think it is too long, I can open another thread."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2463, "user_id": 734748, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f4c88df46d0a7ff19707848263339ee?s=128&d=identicon&r=PG", "display_name": "drdot", "link": "https://stackoverflow.com/users/734748/drdot"}, "edited": false, "score": 0, "creation_date": 1427366093, "post_id": 29262106, "comment_id": 46751063, "body": "@dannycrane: &quot;I am using a customized OS&quot; Well, since you haven&#39;t told me exactly in what way it is &quot;customized&quot; then no, I obviously can&#39;t."}, {"owner": {"reputation": 2463, "user_id": 734748, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f4c88df46d0a7ff19707848263339ee?s=128&d=identicon&r=PG", "display_name": "drdot", "link": "https://stackoverflow.com/users/734748/drdot"}, "edited": false, "score": 0, "creation_date": 1427387322, "post_id": 29262106, "comment_id": 46765468, "body": "Thank you for the discussion. I have open another thread just for finding out the C++ behavior if memory allocation fails. <a href=\"http://stackoverflow.com/questions/29283847/how-to-find-out-the-return-value-if-my-c-new-memory-allocation-failure\" title=\"how to find out the return value if my c new memory allocation failure\">stackoverflow.com/questions/29283847/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1427388711, "post_id": 29262106, "comment_id": 46766358, "body": "FYI SO is not a forum or discussion board so they are <i>questions</i> not <i>threads</i>"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 6, "last_activity_date": 1427303592, "last_edit_date": 1427303592, "creation_date": 1427303426, "answer_id": 29262106, "question_id": 29262078, "link": "https://stackoverflow.com/questions/29262078/who-handles-c-new-memory-allocation-failure/29262106#29262106", "title": "Who handles C++ &quot;new&quot; memory allocation failure?", "body": "<p><strong>They don't.</strong> The OS doesn't need to \"react\" to anything. Your program might want to react to the condition, or it may leave the exception unhandled and terminate. Either way, the memory wasn't allocated and the OS doesn't care any more, if it cared (or even knew about it) in the first place!</p>\n"}], "owner": {"reputation": 2463, "user_id": 734748, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f4c88df46d0a7ff19707848263339ee?s=128&d=identicon&r=PG", "display_name": "drdot", "link": "https://stackoverflow.com/users/734748/drdot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 29262106, "answer_count": 1, "score": 0, "last_activity_date": 1427305332, "creation_date": 1427303340, "last_edit_date": 1427305332, "question_id": 29262078, "link": "https://stackoverflow.com/questions/29262078/who-handles-c-new-memory-allocation-failure", "title": "Who handles C++ &quot;new&quot; memory allocation failure?", "body": "<p>In C, people often check null pointers after using malloc. However, in C++, we will use \"new\". I have done some search and one explanation for the difference between malloc and new is below:\n<a href=\"https://isocpp.org/wiki/faq/freestore-mgmt#new-malloc-diff\" rel=\"nofollow\">https://isocpp.org/wiki/faq/freestore-mgmt#new-malloc-diff</a></p>\n\n<p>Quote from the link above:</p>\n\n<blockquote>\n  <p>malloc() reports memory exhaustion by returning 0. new reports allocation and initialization errors by throwing exceptions (bad_alloc).</p>\n</blockquote>\n\n<p>But how does OS (Linux or windows) react to this bad_alloc exception? </p>\n"}, {"tags": ["c", "portable-executable"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427303853, "post_id": 29261929, "comment_id": 46726436, "body": "are you looking at a elf file or some other object file format?  here is the link to the elf format info.  Note it is way to long and includes several images so not postable on SO.  &lt;<a href=\"http://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Executable_and_Linkable_Format</a>&gt;"}, {"owner": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427303947, "post_id": 29261929, "comment_id": 46726491, "body": "it should be exe format."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427304280, "post_id": 29261929, "comment_id": 46726698, "body": "here is a llink to the COFF format: &lt;<a href=\"http://www.skyfree.org/linux/references/coff.pdf\" rel=\"nofollow noreferrer\">skyfree.org/linux/references/coff.pdf</a>&gt;  here is a link to the .exe file format: &lt;<a href=\"http://www.delorie.com/djgpp/doc/exe/\" rel=\"nofollow noreferrer\">delorie.com/djgpp/doc/exe</a>&gt;  However, be sure to read this info: &lt;<a href=\"https://en.wikipedia.org/wiki/.exe\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/.exe</a>&gt;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427304984, "post_id": 29261929, "comment_id": 46727179, "body": "this link to a pdf file goes into more detail about how a windows executable differs from other systems. : &lt;<a href=\"http://www.openwatcom.org/ftp/devel/docs/pecoff.pdf\" rel=\"nofollow noreferrer\">openwatcom.org/ftp/devel/docs/pecoff.pdf</a>&gt;"}, {"owner": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427306211, "post_id": 29261929, "comment_id": 46728028, "body": "I already read the article(s) by Matt Pietrek but this didn&#39;t help me much with actual implementation."}], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "edited": false, "score": 0, "creation_date": 1427374827, "post_id": 29278238, "comment_id": 46756034, "body": "wow, I was completely blind... And thanks for the additional information!"}, {"owner": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "edited": false, "score": 0, "creation_date": 1427379571, "post_id": 29278238, "comment_id": 46759514, "body": "I use <i>IMAGE_FIRST_SECTION(pNTHeader);</i> from <i>winnt.h</i> to get to the first section now, will that be safe?"}, {"owner": {"reputation": 851, "user_id": 2646573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c108dcba20e4f430914b3b5f19e2d32?s=128&d=identicon&r=PG", "display_name": "Erlend Graff", "link": "https://stackoverflow.com/users/2646573/erlend-graff"}, "reply_to_user": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "edited": false, "score": 1, "creation_date": 1427388774, "post_id": 29278238, "comment_id": 46766405, "body": "@Benjoyo: yes, that will also be fine! It uses the <code>SizeOfOptionalHeader</code> field of the file header, which also includes all data directories."}], "tags": [], "owner": {"reputation": 851, "user_id": 2646573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c108dcba20e4f430914b3b5f19e2d32?s=128&d=identicon&r=PG", "display_name": "Erlend Graff", "link": "https://stackoverflow.com/users/2646573/erlend-graff"}, "is_accepted": true, "score": 3, "last_activity_date": 1427372217, "creation_date": 1427372217, "answer_id": 29278238, "question_id": 29261929, "link": "https://stackoverflow.com/questions/29261929/getting-text-section-header-of-pe-file/29278238#29278238", "title": "Getting .text section header of PE file", "body": "<p>The reason that</p>\n\n<pre><code>pLastSectionHeader = pSectionHeader + (pNtHeaders-&gt;FileHeader.NumberOfSections - 1);\n</code></pre>\n\n<p>is correct, is that <code>pSectionHeader</code> is of type <code>PIMAGE_SECTION_HEADER</code>. When you add an integer value to a pointer in C, the value will first be multiplied by the size of the object pointed to (which is <code>IMAGE_SECTION_HEADER</code>). That's just how pointer arithmetic works!</p>\n\n<p>You should not make assumptions about the order in which the linker has placed the different sections. It would be better to loop through all the section headers, and e.g. match the name of the section against <code>.text</code>.</p>\n\n<p>Also, I wouldn't recommend using <code>sizeof(IMAGE_NT_HEADERS)</code> to skip the optional header. This is because the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680339(v=vs.85).aspx\" rel=\"nofollow\"><code>IMAGE_OPTIONAL_HEADER</code></a> structure (contained in <code>IMAGE_NT_HEADERS</code>) ends with <code>IMAGE_DATA_DIRECTORY DataDirectory[IMAGE_NUMBEROF_DIRECTORY_ENTRIES];</code>, and you do not actually have any guarantee that all data directories are present in the PE image. A better approach is to read the optional header, and use the <code>NumberOfRvaAndSizes</code> field to determine how many data directories you should skip to find the section header table.</p>\n\n<p>Finally, I would recommend that you use the <code>IMAGE_XYZ32</code> and <code>IMAGE_XYZ64</code> versions of the structures, instead of just <code>IMAGE_XYZ</code>, depending on whether you want to parse PE32 (32-bit) or PE32+ (64-bit). Else, you will default to the architecture size that is default on your system.</p>\n"}], "owner": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2656, "favorite_count": 0, "accepted_answer_id": 29278238, "answer_count": 1, "score": 1, "last_activity_date": 1427372217, "creation_date": 1427302922, "question_id": 29261929, "link": "https://stackoverflow.com/questions/29261929/getting-text-section-header-of-pe-file", "title": "Getting .text section header of PE file", "body": "<p>I am trying to get the header of the <em>.text</em>-section. What <em>seems</em> to work is:</p>\n\n<pre><code>// Get the DOS header.\npDosHeader = (PIMAGE_DOS_HEADER) hMap;\n\n// Get header of first section\npSectionHeader = (PIMAGE_SECTION_HEADER) ((DWORD) hMap + pDosHeader-&gt;e_lfanew + sizeof(IMAGE_NT_HEADERS));\n\n// Get last section's header.\npLastSectionHeader = pSectionHeader + (pNtHeaders-&gt;FileHeader.NumberOfSections - 1);\n</code></pre>\n\n<p>But I don't exactly get why. I would have thought that the last instruction has to be:</p>\n\n<pre><code>// Get last section's header.\npLastSectionHeader = pSectionHeader + (pNtHeaders-&gt;FileHeader.NumberOfSections - 1) * sizeof(IMAGE_SECTION_HEADER);\n</code></pre>\n\n<p>So that the pointer is moved <em>section-header</em>-wise.  </p>\n\n<p>Also, is <code>(pNtHeaders-&gt;FileHeader.NumberOfSections - 1)</code> really the <em>.text</em>-section?</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 3, "last_activity_date": 1427301425, "creation_date": 1427301425, "answer_id": 29261402, "question_id": 29261330, "link": "https://stackoverflow.com/questions/29261330/how-to-include-multiple-directories-to-search-header-files-in-c-preprocessor/29261402#29261402", "title": "How to include multiple directories to search header files in C preprocessor", "body": "<p>You can have multiple <code>-I</code> directives, e.g.</p>\n\n<pre><code>cpp -Ifoo/bar -Ifoo/blech -I../baz ...\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4014263, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-krgRbqz5Bdc/AAAAAAAAAAI/AAAAAAAAAKI/JO3uSVu73jU/photo.jpg?sz=128", "display_name": "Aabha Geed", "link": "https://stackoverflow.com/users/4014263/aabha-geed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427302820, "creation_date": 1427301199, "last_edit_date": 1427302820, "question_id": 29261330, "link": "https://stackoverflow.com/questions/29261330/how-to-include-multiple-directories-to-search-header-files-in-c-preprocessor", "title": "How to include multiple directories to search header files in C preprocessor", "body": "<p>I am using <code>cpp -Idir_name</code> command to preprocess the source file. In <code>dir_name</code> I have header files included that need to be used for preprocessing.</p>\n\n<p>I want to add multiple directories that can be searched for header files. How can i do this?</p>\n"}, {"tags": ["c", "strstr"], "answers": [{"tags": [], "owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "is_accepted": false, "score": 0, "last_activity_date": 1427301222, "creation_date": 1427301222, "answer_id": 29261344, "question_id": 29261190, "link": "https://stackoverflow.com/questions/29261190/checking-a-char-pointer-for-null-in-strstr/29261344#29261344", "title": "checking a char pointer for NULL in strstr", "body": "<p>You have to deference the pointer to compare it's value.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1427305404, "creation_date": 1427305404, "answer_id": 29262801, "question_id": 29261190, "link": "https://stackoverflow.com/questions/29261190/checking-a-char-pointer-for-null-in-strstr/29262801#29262801", "title": "checking a char pointer for NULL in strstr", "body": "<p>The difference is that <code>a != NULL</code> is not the same  as <code>*a != 0</code>.</p>\n\n<p>Recall that a string is an array of characters up to and including the terminating null character <code>'\\0'</code>.  Rather than pass around strings, code typically passes a pointer to the first character.</p>\n\n<p><code>a != NULL</code> tests if that pointer is equal to <code>NULL</code>.  A pointer with the value <code>NULL</code> is never a string.  It is simply a pointer to a location that will never have any valid data.  </p>\n\n<p><code>*a != 0</code> tests if the pointer <code>a</code>, let us assume it is of type <code>char *</code>, points to a <code>char</code> that does not have the value of of the null character <code>'\\0'</code> as that would be the end of the string.  Thus the loop should stop.</p>\n\n<hr>\n\n<p>Note: the loop could be simplified.  By the time code reaches <code>*b != 0</code>, it already can not have the value of <code>'\\0'</code>.</p>\n\n<pre><code>// while (*a==*b &amp;&amp; *a != 0 &amp;&amp; *b != 0) {\nwhile (*a==*b &amp;&amp; *a != 0) {\n    a++\n    b++\n}\n// if (*b === 0) { // string found }  Type use ==, not ===\nif (*b == 0) { // string found }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1781626"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1427305404, "creation_date": 1427300825, "last_edit_date": 1427301269, "question_id": 29261190, "link": "https://stackoverflow.com/questions/29261190/checking-a-char-pointer-for-null-in-strstr", "title": "checking a char pointer for NULL in strstr", "body": "<p>I was trying to implement strstr in C\nbut I was stuck at this piece of code which was crashing at runtime</p>\n\n<pre><code>while (*a==*b &amp;&amp; a != NULL &amp;&amp; b != NULL) {\n    a++\n    b++\n}\nif (b == NULL || *b == '\\0') { // string found }\n</code></pre>\n\n<p>After googling for sometime I figured out the mistake\n<a href=\"https://stuff.mit.edu/afs/sipb/project/tcl80/src/tcl8.0/compat/strstr.c\" rel=\"nofollow\">https://stuff.mit.edu/afs/sipb/project/tcl80/src/tcl8.0/compat/strstr.c</a></p>\n\n<p>I should've had my loop do the following:</p>\n\n<pre><code>while (*a==*b &amp;&amp; *a != 0 &amp;&amp; *b != 0) {\n    a++\n    b++\n}\nif (*b === 0) { // string found }\n</code></pre>\n\n<p>But I'm still not clear on why wouldn't the first approach work as well?</p>\n"}, {"tags": ["c#", "c", "multithreading", "tcp", "tcplistener"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1427301126, "post_id": 29261170, "comment_id": 46724623, "body": "this is C++ not C code, please remove the &#39;C&#39; tag"}, {"owner": {"reputation": 8861, "user_id": 49251, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3b05f845f8c433de0ca3e5805bcd7a6?s=128&d=identicon&r=PG", "display_name": "DWright", "link": "https://stackoverflow.com/users/49251/dwright"}, "edited": false, "score": 0, "creation_date": 1427301350, "post_id": 29261170, "comment_id": 46724792, "body": "The server side looks like straight C?"}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 0, "creation_date": 1427301895, "post_id": 29261170, "comment_id": 46725167, "body": "making a comment about C++ is marked as useful. come on."}, {"owner": {"reputation": 13, "user_id": 2329442, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/558d9accba15982f40214beafa056a4c?s=128&d=identicon&r=PG", "display_name": "GeorgeStorm", "link": "https://stackoverflow.com/users/2329442/georgestorm"}, "edited": false, "score": 0, "creation_date": 1427302036, "post_id": 29261170, "comment_id": 46725254, "body": "I thought I had just used C for the server side stuff, which bits are C++? I&#39;m saving it as a .c, if it&#39;s got C++ could that be causing some weird issues?"}, {"owner": {"reputation": 62091, "user_id": 3538012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dcc3c1ad5e4ae4d79ba377020978d107?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Duniho", "link": "https://stackoverflow.com/users/3538012/peter-duniho"}, "edited": false, "score": 1, "creation_date": 1427306871, "post_id": 29261170, "comment_id": 46728465, "body": "Most of the code looks fine, except for the C code creating the socket handle. You are passing <code>0</code> as the protocol, when typically one would pass <code>IPPROTO_TCP</code> (which has a value of 6). For sure, the threading itself isn&#39;t the direct cause of whatever problem exists; as you say, you are getting diagnostic information that indicates the threads are executing as you expect them to. Without <a href=\"http://stackoverflow.com/help/mcve\">a good, <i>minimal</i>, <i>complete</i> code example</a> it&#39;s impossible to say for sure what the actual problem is. But try fixing the protocol parameter for your call to <code>socket()</code>."}, {"owner": {"reputation": 13, "user_id": 2329442, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/558d9accba15982f40214beafa056a4c?s=128&d=identicon&r=PG", "display_name": "GeorgeStorm", "link": "https://stackoverflow.com/users/2329442/georgestorm"}, "edited": false, "score": 0, "creation_date": 1427307665, "post_id": 29261170, "comment_id": 46728947, "body": "Thanks for the help, I think 0 means it chooses the default protocol, which I thought would be fine, but regardless, tried changing it to 6 with no luck. Having gone through line by line on the PC side, it gets to the &quot;TcpClient client = server.AcceptTcpClient();&quot; line and then just gets stuck. The server runs &quot;printf(&quot;Client created, trying to connect\\n&quot;);&quot; then eventually prints that the Connection timed out :/ Going to try another port to see if there&#39;s some clashing."}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1427311107, "post_id": 29261170, "comment_id": 46731096, "body": "This should basically work except if I have overlooked some trivial error or typo somewhere. Are you sure the network is not blocking the access? Try same machine access and disable firewalls. This usually excludes all possible network issues. Also bind on IPAddress.Any."}, {"owner": {"reputation": 13, "user_id": 2329442, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/558d9accba15982f40214beafa056a4c?s=128&d=identicon&r=PG", "display_name": "GeorgeStorm", "link": "https://stackoverflow.com/users/2329442/georgestorm"}, "edited": false, "score": 0, "creation_date": 1427411611, "post_id": 29261170, "comment_id": 46778117, "body": "I don&#39;t think it is, as I&#39;ve got a connection working the other way (coming from the PC to the server), and it seemed to work when I originally wrote it, don&#39;t think I was imagining it, I&#39;ll have more of a looksie at my laptop&#39;s network settings."}], "owner": {"reputation": 13, "user_id": 2329442, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/558d9accba15982f40214beafa056a4c?s=128&d=identicon&r=PG", "display_name": "GeorgeStorm", "link": "https://stackoverflow.com/users/2329442/georgestorm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 809, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427300795, "creation_date": 1427300795, "question_id": 29261170, "link": "https://stackoverflow.com/questions/29261170/tcplistener-not-working", "title": "TCPListener not working?", "body": "<p>As above basically, as far as I can tell, had some weird behaviour last night/this morning.\nI rewrote some of my program to make bits threaded, and it seemed to work, then tried it again today and it doesn't seem to, and I can't see why it would act differently.</p>\n\n<p>The code in question:</p>\n\n<pre><code>                Thread oThread2 = new Thread(() =&gt; test());\n                oThread2.Start();\n</code></pre>\n\n<p>To start the thread, with the beginning of the thread below:</p>\n\n<pre><code>public int test()\n    {\n\n        IPAddress localAddr = IPAddress.Parse(\"192.168.0.149\");\n\n        TcpListener server = new TcpListener(localAddr, 1234);\n        server.Start();\n\n        Debug.WriteLine(\"Waiting for a connection... \");\n\n        TcpClient client = server.AcceptTcpClient();\n        Debug.WriteLine(\"Connected!\");\n\n        NetworkStream stream = client.GetStream();\n</code></pre>\n\n<p>This thread seems to start no problems, however the acceptTcpClient() line doesn't seem to complete, despite the code on the server side being this....</p>\n\n<pre><code>pthread_t processThread;\nif(pthread_create(&amp;processThread, NULL, ProcessFrameThread, &amp;incomingframesize))\n{\n        printf(\"ERROR creating thread!\\n\");\n        close(conn_desc);\n        close(sock_descriptor); \n        return -1;\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>void *ProcessFrameThread(void *inc_framesize)\n{\n\nint incomingframesize = *((int *)inc_framesize);\nunsigned char processframebuffer[incomingframesize];\n\nint sockfd, portno, n;\nstruct sockaddr_in serv_addr;\nstruct hostent *server;\n\nsockfd = socket(AF_INET, SOCK_STREAM, 0);\nif(sockfd &lt; 0)\n    printf(\"Failed opening socket\\n\");\n\nserver = gethostbyname(\"192.168.0.149\");\nif (server == NULL)\n{\n  printf(\"ERROR, no such host\");\n  exit(0);\n}\n\nbzero((char *) &amp;serv_addr, sizeof(serv_addr));\nserv_addr.sin_family = AF_INET;\nbcopy((char *)server-&gt;h_addr,(char *)&amp;serv_addr.sin_addr.s_addr,server-&gt;h_length);\nserv_addr.sin_port = htons(1234);\nprintf(\"Client created, trying to connect\\n\");\nif (connect(sockfd, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)) &lt; 0)\n{\n    error(\"ERROR connecting\");\n}\n\nprintf(\"Connected back to host :)\\n\");\n</code></pre>\n\n<p>Taken from a tutorial I found, as I said the weirdest thing being that it seemed to work last night despite me not changing anything as far as I can tell :/</p>\n\n<p>This is my first time doing threading really, so I wouldn't be surprised that I've done something wrong it's just that I can't really tell what. On the PC I get 'Waiting for a connection...' in the debug window, and on the laptop I get 'Client created, trying to connect'. So it seems like the thread is being started, merely that they aren't finding each other? :/</p>\n\n<p>I'm connecting to the laptop over port 1235 no problem, and was previously responding over the same connection, however when trying to make it threaded I didn't see an easy way to use the same connection so thought I'd just create a separate one for the return, on port 1234.</p>\n\n<p>Any advice would be appreciated</p>\n"}, {"tags": ["c", "signals", "setitimer"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1427300330, "post_id": 29260911, "comment_id": 46724073, "body": "post your actual code, the ITIMER_VIRTUAL only decrements while processing is occurring.  If your compiler is smart, it may have noop&#39;d and your timer never decrements.  Or, change from_VIRTUAL to _REAL"}, {"owner": {"reputation": 1518, "user_id": 2717954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f9aff1ddcc010a77fca4c1840c1d294d?s=128&d=identicon&r=PG&f=1", "display_name": "user2717954", "link": "https://stackoverflow.com/users/2717954/user2717954"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1427300451, "post_id": 29260911, "comment_id": 46724163, "body": "just have (changed to ITIMER_REAL), still no change"}, {"owner": {"reputation": 1518, "user_id": 2717954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f9aff1ddcc010a77fca4c1840c1d294d?s=128&d=identicon&r=PG&f=1", "display_name": "user2717954", "link": "https://stackoverflow.com/users/2717954/user2717954"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1427300503, "post_id": 29260911, "comment_id": 46724197, "body": "and it doesn&#39;t really matter what the actual code is, if I run the code I posted it will only print &quot;hi&quot; once and that&#39;s all I care about. I want it to print &quot;hi&quot; every 2 seconds"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427302281, "post_id": 29260911, "comment_id": 46725440, "body": "if the code is changed to use ITIMER_REAL, then the signal generated is SIGALRM rather than SIGVTALRM."}, {"owner": {"reputation": 1518, "user_id": 2717954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f9aff1ddcc010a77fca4c1840c1d294d?s=128&d=identicon&r=PG&f=1", "display_name": "user2717954", "link": "https://stackoverflow.com/users/2717954/user2717954"}, "edited": false, "score": 0, "creation_date": 1427302346, "post_id": 29260911, "comment_id": 46725495, "body": "I know. that what I did."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427302917, "post_id": 29260911, "comment_id": 46725877, "body": "foo() should return in less time than the timer interval, otherwise the signal is still being processed when the next timer even occurs (2 seconds in the current case)  as it is, any repetition of the same signal will be blocked."}, {"owner": {"reputation": 1518, "user_id": 2717954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f9aff1ddcc010a77fca4c1840c1d294d?s=128&d=identicon&r=PG&f=1", "display_name": "user2717954", "link": "https://stackoverflow.com/users/2717954/user2717954"}, "edited": false, "score": 0, "creation_date": 1427303043, "post_id": 29260911, "comment_id": 46725939, "body": "is there any way to &quot;release&quot; the signal without returning form the handler? I really need it handled every 2 seconds with no matter of previous signals sent"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1427303483, "post_id": 29260911, "comment_id": 46726191, "body": "notice in the answerr the information 1) about unblocking the signal, 2) the need to re-establish the signal handler before the next signal arrives, so the default signal handler is not executed by the second signal event"}], "answers": [{"comments": [{"owner": {"reputation": 1518, "user_id": 2717954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f9aff1ddcc010a77fca4c1840c1d294d?s=128&d=identicon&r=PG&f=1", "display_name": "user2717954", "link": "https://stackoverflow.com/users/2717954/user2717954"}, "edited": false, "score": 0, "creation_date": 1427303184, "post_id": 29261968, "comment_id": 46726018, "body": "seems promosing, i&#39;ll step into it and see if it works. thanks!"}, {"owner": {"reputation": 1518, "user_id": 2717954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f9aff1ddcc010a77fca4c1840c1d294d?s=128&d=identicon&r=PG&f=1", "display_name": "user2717954", "link": "https://stackoverflow.com/users/2717954/user2717954"}, "edited": false, "score": 0, "creation_date": 1427303474, "post_id": 29261968, "comment_id": 46726181, "body": "sigprocmask nailed it :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1427306234, "post_id": 29261968, "comment_id": 46728047, "body": "I&#39;ve quoted some of the material so that the text wraps and is readable without the horizontal scroll bar.  If all you&#39;ve done is copy material from the URLs you&#39;ve quoted, maybe more of the material should be quoted, and the links made clickable."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 2, "last_activity_date": 1427305970, "last_edit_date": 1592644375, "creation_date": 1427303030, "answer_id": 29261968, "question_id": 29260911, "link": "https://stackoverflow.com/questions/29260911/c-setitimer-not-sending-signal-when-outside-its-call-scope/29261968#29261968", "title": "c setitimer not sending signal when outside its call scope", "body": "<pre><code>reference: &lt;http://www.gnu.org/software/libc/manual/html_node/Signals-in-Handler.html&gt;\n\n 24.4.4 Signals Arriving While a Handler Runs\n</code></pre>\n<p>What happens if another signal arrives while your signal handler function is running?</p>\n<p>When the handler for a particular signal is invoked, that signal is automatically blocked until the handler returns. That means that if two signals of the same kind arrive close together, the second one will be held until the first has been handled. (The handler can explicitly unblock the signal using sigprocmask, if you want to allow more signals of this type to arrive; see Process Signal Mask.)</p>\n<p>However, your handler can still be interrupted by delivery of another kind of signal. To avoid this, you can use the sa_mask member of the action structure passed to sigaction to explicitly specify which signals should be blocked while the signal handler runs. These signals are in addition to the signal for which the handler was invoked, and any other signals that are normally blocked by the process. See Blocking for Handler.</p>\n<p>When the handler returns, the set of blocked signals is restored to the value it had before the handler ran. So using sigprocmask inside the handler only affects what signals can arrive during the execution of the handler itself, not what signals can arrive once the handler returns.</p>\n<p>Portability Note: Always use sigaction to establish a handler for a signal that you expect to receive asynchronously, if you want your program to work properly on System V Unix. On this system, the handling of a signal whose handler was established with signal automatically sets the signal\u2019s action back to SIG_DFL, and the handler must re-establish itself each time it runs. This practice, while inconvenient, does work when signals cannot arrive in succession. However, if another signal can arrive right away, it may arrive before the handler can re-establish itself. Then the second signal would receive the default handling, which could terminate the process.</p>\n<pre><code>reference:&lt;http://www.gnu.org/software/libc/manual/html_node/Process-Signal-Mask.html#Process-Signal-Mask&gt;\n</code></pre>\n<p>24.7.3 Process Signal Mask</p>\n<p>The collection of signals that are currently blocked is called the signal mask. Each process has its own signal mask. When you create a new process (see Creating a Process), it inherits its parent\u2019s mask. You can block or unblock signals with total flexibility by modifying the signal mask.</p>\n<p>The prototype for the sigprocmask function is in signal.h.</p>\n<p>Note that you must not use sigprocmask in multi-threaded processes, because each thread has its own signal mask and there is no single process signal mask. According to POSIX, the behavior of sigprocmask in a multi-threaded process is \u201cunspecified\u201d. Instead, use pthread_sigmask.</p>\n<blockquote>\n<p>Function: <code>int sigprocmask (int how, const sigset_t *restrict set, sigset_t *restrict oldset)</code></p>\n<p>Preliminary: | MT-Unsafe race:sigprocmask/bsd(SIG_UNBLOCK) | AS-Unsafe lock/hurd | AC-Unsafe lock/hurd | See POSIX Safety Concepts.</p>\n<p>The sigprocmask function is used to examine or change the calling process\u2019s signal mask. The how argument determines how the signal mask is changed, and must be one of the following values:</p>\n<pre><code>SIG_BLOCK\n</code></pre>\n<p>Block the signals in set\u2014add them to the existing mask. In other words, the new mask is the union of the existing mask and set.</p>\n<pre><code>SIG_UNBLOCK\n</code></pre>\n<p>Unblock the signals in set\u2014remove them from the existing mask.</p>\n<pre><code>SIG_SETMASK\n</code></pre>\n<p>Use set for the mask; ignore the previous value of the mask.</p>\n<p>The last argument, oldset, is used to return information about the old process signal mask. If you just want to change the mask without looking at it, pass a null pointer as the oldset argument. Similarly, if you want to know what\u2019s in the mask without changing it, pass a null pointer for set (in this case the how argument is not significant). The oldset argument is often used to remember the previous signal mask in order to restore it later. (Since the signal mask is inherited over fork and exec calls, you can\u2019t predict what its contents are when your program starts running.)</p>\n<p>If invoking sigprocmask causes any pending signals to be unblocked, at least one of those signals is delivered to the process before sigprocmask returns. The order in which pending signals are delivered is not specified, but you can control the order explicitly by making multiple sigprocmask calls to unblock various signals one at a time.</p>\n<p>The sigprocmask function returns 0 if successful, and -1 to indicate an error. The following errno error conditions are defined for this function:</p>\n<p>EINVAL</p>\n<p>The how argument is invalid.</p>\n<p>You can\u2019t block the SIGKILL and SIGSTOP signals, but if the signal set includes these, sigprocmask just ignores them instead of returning an error status.</p>\n<p>Remember, too, that blocking program error signals such as SIGFPE leads to undesirable results for signals generated by an actual program error (as opposed to signals sent with raise or kill). This is because your program may be too broken to be able to continue executing to a point where the signal is unblocked again. See Program Error Signals.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1518, "user_id": 2717954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f9aff1ddcc010a77fca4c1840c1d294d?s=128&d=identicon&r=PG&f=1", "display_name": "user2717954", "link": "https://stackoverflow.com/users/2717954/user2717954"}, "edited": false, "score": 0, "creation_date": 1427307954, "post_id": 29263514, "comment_id": 46729136, "body": "thats nice but your foo returns immediatly which is exactly what my foo didn&#39;t do and thus caused me the headache.. thanks anyway"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 1518, "user_id": 2717954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f9aff1ddcc010a77fca4c1840c1d294d?s=128&d=identicon&r=PG&f=1", "display_name": "user2717954", "link": "https://stackoverflow.com/users/2717954/user2717954"}, "edited": false, "score": 0, "creation_date": 1427310608, "post_id": 29263514, "comment_id": 46730788, "body": "This is a direct copy/paste of the running code on my PC - don&#39;t know why it wouldn&#39;t work (the timing of the return of <code>foo</code> should be irrelevant)"}], "tags": [], "owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1427307692, "creation_date": 1427307692, "answer_id": 29263514, "question_id": 29260911, "link": "https://stackoverflow.com/questions/29260911/c-setitimer-not-sending-signal-when-outside-its-call-scope/29263514#29263514", "title": "c setitimer not sending signal when outside its call scope", "body": "<p>I know that this has been answered and accepted already but I made tiny changes to the OP's question as follows in accordance with my comments and had a successful result (foo being called every 2 seconds, <em>ad infinitum</em>)</p>\n\n<p>Note that addition of the memset of the <code>temp</code> variable and the changing from SIGVTALRM to SIGALRM.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/time.h&gt;\n\nvoid foo() {\n   printf(\"hi\\n\");  \n}\n\n\nint main(int argc, char **argv)\n{\n  struct sigaction temp;\n  memset(&amp;temp, 0, sizeof(temp));\n  temp.sa_handler = &amp;foo;\n  sigfillset(&amp;temp.sa_mask);\n  sigdelset(&amp;temp.sa_mask, SIGALRM);\n  sigdelset(&amp;temp.sa_mask, SIGINT );\n  sigaction(SIGALRM, &amp;temp, NULL);\n  struct itimerval tv;\n  tv.it_value.tv_sec = 2;  /* first time interval, seconds part */\n  tv.it_value.tv_usec = 0; /* first time interval, microseconds part */\n  tv.it_interval.tv_sec = 2;  /* following time intervals, seconds part */\n  tv.it_interval.tv_usec = 0; /* following time intervals, microseconds part */\n\n  if (setitimer(ITIMER_REAL, &amp;tv, NULL)){\n    fprintf (stderr, \"cannot start timer\\n\");\n    perror(NULL);\n  }\n\n  while(1) {\n    fprintf (stdout, \"sleep 1\\n\");\n    sleep (1);\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1518, "user_id": 2717954, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f9aff1ddcc010a77fca4c1840c1d294d?s=128&d=identicon&r=PG&f=1", "display_name": "user2717954", "link": "https://stackoverflow.com/users/2717954/user2717954"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1379, "favorite_count": 0, "accepted_answer_id": 29261968, "answer_count": 2, "score": 0, "last_activity_date": 1427307692, "creation_date": 1427300019, "question_id": 29260911, "link": "https://stackoverflow.com/questions/29260911/c-setitimer-not-sending-signal-when-outside-its-call-scope", "title": "c setitimer not sending signal when outside its call scope", "body": "<p>i have the following case</p>\n\n<pre><code>void foo() {\n   printf(\"hi\\n\");  \n   while(1);\n\n}\n\n\nint main(void)\n{\n  struct sigaction temp;\n  temp.sa_handler = &amp;foo;\n  sigfillset(&amp;temp.sa_mask);\n  sigdelset(&amp;temp.sa_mask, SIGVTALRM);\n  sigdelset(&amp;temp.sa_mask, SIGINT );\n  sigaction(SIGVTALRM, &amp;temp, NULL);\n  struct itimerval tv;\n  tv.it_value.tv_sec = 2;  /* first time interval, seconds part */\n  tv.it_value.tv_usec = 0; /* first time interval, microseconds part */\n  tv.it_interval.tv_sec = 2;  /* following time intervals, seconds part */\n  tv.it_interval.tv_usec = 0; /* following time intervals, microseconds part */\n\n  if (setitimer(ITIMER_VIRTUAL, &amp;tv, NULL)){\n    perror(NULL);\n  }\n  while(1);\n  return 0;\n}\n</code></pre>\n\n<p>all I want is that every 2 seconds foo will be called (foo actually does some other stuff other than while(1), just assume foo run takes more than 2 seconds), after 2 seconds foo is indeed called but then no other call is made untill foo returns. I tried playing with the signal masks (hence the sigfillset) but also when simply calling <code>signal(SIGVTALRM, foo)</code> no changes are made in the result. I also tried having the itimerval and the sigactions variables declared outside main and it didn't quite affect anything.</p>\n\n<p>is the thing I'm trying to do even possible?</p>\n\n<p>thanks!</p>\n"}, {"tags": ["c", "linux", ".bash-profile", "env"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1427299176, "post_id": 29260555, "comment_id": 46723313, "body": "If you change the PATH inside the C program, that value is lost when the C program exits.  So if you want the change to persist into a shell, you will need to have your program exec a shell (so the shell becomes either a child of the original program, or it becomes the process that was running the original program; either way, it will inherit the environment that your program modifies.)"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1427299230, "post_id": 29260555, "comment_id": 46723350, "body": "Maybe you want some sort of <code>system(&quot;export PATH=something+$PATH&quot;);</code>?"}, {"owner": {"reputation": 8288, "user_id": 254252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d86d93abcc56d7b5843cc1ce58bbfd6?s=128&d=identicon&r=PG", "display_name": "Christopher Creutzig", "link": "https://stackoverflow.com/users/254252/christopher-creutzig"}, "edited": false, "score": 0, "creation_date": 1427299598, "post_id": 29260555, "comment_id": 46723596, "body": "Welcome to SO. I&#39;m afraid I do not understand what problem you are trying to solve. Could you describe (by editing your question, not in a comment) the end effect you want to achieve, such as \u201cI want to call this command in a shell and then my <code>$PATH</code> in that shell should be changed\u201d?"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1427299980, "post_id": 29260555, "comment_id": 46723873, "body": "don&#39;t exactly know why you want to do this. but it sounds to me it&#39;s a better to have a launch script instead or call it like <code>PATH=$PATH:new_path .&#47;your_program</code>."}, {"owner": {"reputation": 1, "user_id": 4540486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d711cd10d176ea6b44145ef3e09c1e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Choi Taekyoon", "link": "https://stackoverflow.com/users/4540486/choi-taekyoon"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1427301515, "post_id": 29260555, "comment_id": 46724911, "body": "thanks for read my question @ForceBru I tried but it just only works in my process. if the program exit, then It doesn&#39;t work any..."}], "answers": [{"comments": [{"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427305160, "post_id": 29260674, "comment_id": 46727301, "body": "@EugeneSh. But that still won&#39;t set the environment variables for the parent <i>process</i>. You&#39;d have a launch a new shell or manually <code>source</code> those files for the changes to take effect, which defeats the purpose of trying to do it in a subprocess."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1427305299, "post_id": 29260674, "comment_id": 46727386, "body": "@PaulGriffiths It can be done together with <code>setenv</code>, but I agree it is unlikely to be a solution, just an ugly workaround."}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1427305369, "post_id": 29260674, "comment_id": 46727446, "body": "@EugeneSh. But <code>setenv</code> also will not affect the parent process, only the calling process."}], "tags": [], "owner": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "is_accepted": false, "score": 7, "last_activity_date": 1427299343, "creation_date": 1427299343, "answer_id": 29260674, "question_id": 29260555, "link": "https://stackoverflow.com/questions/29260555/how-to-set-path-environment-variable-in-linux-in-c-language-code/29260674#29260674", "title": "How to set path environment variable in linux in C language code", "body": "<p>You can use <code>setenv()</code> and <code>putenv()</code> to set environment variables. But these will only be set for the given program.  You cannot set environment variables for the shell or its parent process.</p>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 5842403, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKA_WZNw-iw/AAAAAAAAAAI/AAAAAAAAAuQ/gFUyztK-DPg/photo.jpg?sz=128", "display_name": "Joniale", "link": "https://stackoverflow.com/users/5842403/joniale"}, "is_accepted": false, "score": -1, "last_activity_date": 1506326244, "creation_date": 1506326244, "answer_id": 46400175, "question_id": 29260555, "link": "https://stackoverflow.com/questions/29260555/how-to-set-path-environment-variable-in-linux-in-c-language-code/46400175#46400175", "title": "How to set path environment variable in linux in C language code", "body": "<p>Here an example to define the Python path.</p>\n\n<p>It is created a string path and append it to the python path.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>char *append_path = malloc(sizeof(char) * 1000);\r\nappend_path = \"/trunk/software/hmac_sha256/:.\";\r\nprintf(\"Append to path is:\\n%s\\n\", append_path);           \r\nsetenv(\"PYTHONPATH\",append_path,1);//Set PYTHONPATH TO working directory https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.1.0/com.ibm.zos.v2r1.bpxbd00/setenv.htm\r\nchar *path = Py_GetPath();\r\nprintf(\"Python search path is:\\n%s\\n\", path);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This should append the string to the PYTHONPATH environment variable. For me it is working as stated before.\nIn case the variable is replaced and not appended, then you just need to read the environment variable before, append the new string and then do the \"setenv\".</p>\n\n<p>for example</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>//include string functions\r\n#include &lt;string.h&gt;\r\n\r\n....\r\n\r\nchar *current_path = malloc(sizeof(char) * 1000);\r\ncurrent_path = Py_GetPath();\r\nprintf(\"Current search path is:\\n%s\\n\", current_path);\r\nchar *new_path = malloc(sizeof(char) * 1000);\r\nnew_path = \"/trunk/software/hmac_sha256/:.\";\r\nprintf(\"New to add path is:\\n%s\\n\", new_path);\r\nsnprintf(current_path, sizeof(char) * 1000, \"%s%s\", current_path,new_path);//this concatenate both strings\r\nsetenv(\"PYTHONPATH\",current_path,1);//Set PYTHONPATH TO working directory https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.1.0/com.ibm.zos.v2r1.bpxbd00/setenv.htm\r\nchar *path = Py_GetPath();\r\nprintf(\"Python search path is:\\n%s\\n\", path);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1, "user_id": 4540486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d711cd10d176ea6b44145ef3e09c1e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Choi Taekyoon", "link": "https://stackoverflow.com/users/4540486/choi-taekyoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4508, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1506326244, "creation_date": 1427299001, "last_edit_date": 1427300165, "question_id": 29260555, "link": "https://stackoverflow.com/questions/29260555/how-to-set-path-environment-variable-in-linux-in-c-language-code", "title": "How to set path environment variable in linux in C language code", "body": "<p>I want to set a path environment variable in bash by C program.\nSo I coded using 'setenv' function, But it was not the answer to solve.</p>\n\n<p>Could anybody suggest another way to solve this problem in C programming?</p>\n\n<p>I thought the other solution that the program read the profile file, then modify and save, but actually when I opened this file there's no string I wanted about PATH variable.   </p>\n"}, {"tags": ["c", "data-structures", "linked-list"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4712889, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202700960884016/picture?type=large", "display_name": "Gaurav Vishwakarma", "link": "https://stackoverflow.com/users/4712889/gaurav-vishwakarma"}, "edited": false, "score": 0, "creation_date": 1427299782, "post_id": 29260567, "comment_id": 46723726, "body": "what if I don&#39;t  assign &amp;a to b ?"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 1, "user_id": 4712889, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202700960884016/picture?type=large", "display_name": "Gaurav Vishwakarma", "link": "https://stackoverflow.com/users/4712889/gaurav-vishwakarma"}, "edited": false, "score": 0, "creation_date": 1427299887, "post_id": 29260567, "comment_id": 46723800, "body": "@GauravVishwakarma: if you don&#39;t assign &amp;a to b then it is <a href=\"http://en.wikipedia.org/wiki/Dangling_pointer\" rel=\"nofollow noreferrer\">a &quot;dangling pointer&quot;</a> (one that is not guaranteed to point to anything valid or useful); dereferencing the pointer may crash the program."}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": false, "score": 0, "last_activity_date": 1427299384, "last_edit_date": 1427299384, "creation_date": 1427299056, "answer_id": 29260567, "question_id": 29260442, "link": "https://stackoverflow.com/questions/29260442/linked-list-data-structures-structure/29260567#29260567", "title": "Linked List , Data structures , Structure", "body": "<p>One is a struct <em>instance</em> (<code>struct node head</code>) and the other is a <em>pointer</em> to a struct instance (<code>struct node * head</code>).</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct node a; /* Allocate space for a new node struct \"a\". */\na.data = 123;\na.next = NULL;\n\nstruct node * b = &amp;a; /* Create a pointer \"b\" referring to \"a\". */\nb-&gt;data = 234;\n// Now a.data == 234.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159, "user_id": 2879844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dedd829c22695a9f820044a20d9af900?s=128&d=identicon&r=PG&f=1", "display_name": "user2879844", "link": "https://stackoverflow.com/users/2879844/user2879844"}, "is_accepted": false, "score": 0, "last_activity_date": 1477045201, "creation_date": 1477045201, "answer_id": 40174078, "question_id": 29260442, "link": "https://stackoverflow.com/questions/29260442/linked-list-data-structures-structure/40174078#40174078", "title": "Linked List , Data structures , Structure", "body": "<p>struct node head --> \"head\" is a variable of type \"struct node\" i.e. sizeof of head= sizeof(struct node)</p>\n\n<p>struct node *head --> \"head\" is a pointer to structure of type \"struct node\", hence sizeof head= general pointer size.</p>\n\n<p>you can do,\nhead.data=x;\nhead.next=NULL;</p>\n\n<p>but you cannot do\nhead->data=x;\nhead->next=NULL;</p>\n\n<p>since when you say \"struct node head\", the memory is already allocated for you unlike the later case where you need to do dynamic memory allocation before using those memory. </p>\n"}], "owner": {"reputation": 1, "user_id": 4712889, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202700960884016/picture?type=large", "display_name": "Gaurav Vishwakarma", "link": "https://stackoverflow.com/users/4712889/gaurav-vishwakarma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477045201, "creation_date": 1427298741, "last_edit_date": 1446976882, "question_id": 29260442, "link": "https://stackoverflow.com/questions/29260442/linked-list-data-structures-structure", "title": "Linked List , Data structures , Structure", "body": "<p>What is the exact difference between \n       struct node head \nand \n         struct node *head \nif my structure is of following form -</p>\n\n<pre><code>struct node \n{int data;\nstruct node *next;\n};\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1427299551, "post_id": 29260419, "comment_id": 46723572, "body": "Just use <code>int main()</code>, like every other C++ program."}, {"owner": {"reputation": 1328, "user_id": 4712857, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/609765894/picture?type=large", "display_name": "Daniel Bezerra De Menezes", "link": "https://stackoverflow.com/users/4712857/daniel-bezerra-de-menezes"}, "edited": false, "score": 0, "creation_date": 1427300184, "post_id": 29260419, "comment_id": 46723992, "body": "That doesnt work, i tried both ways"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1427303760, "post_id": 29260419, "comment_id": 46726380, "body": "<code>_TCHAR</code> isn&#39;t used anywhere else in your (posted) code, so @chris&#39; suggestion should&#39;ve fixed that error. Did you get different (maybe new) errors? What exactly did you do?"}, {"owner": {"reputation": 1328, "user_id": 4712857, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/609765894/picture?type=large", "display_name": "Daniel Bezerra De Menezes", "link": "https://stackoverflow.com/users/4712857/daniel-bezerra-de-menezes"}, "edited": false, "score": 0, "creation_date": 1427304215, "post_id": 29260419, "comment_id": 46726644, "body": "I changed   int _tmain(int argc, _TCHAR* argv[])  to int main().  And also typed this &gt; #include &lt;tchar.h&gt;. Still getting the same exacly error"}, {"owner": {"reputation": 4265, "user_id": 1472474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fe184097bbf00ca0b37a90730454fdc?s=128&d=identicon&r=PG", "display_name": "Jan Spurny", "link": "https://stackoverflow.com/users/1472474/jan-spurny"}, "edited": false, "score": 0, "creation_date": 1427307739, "post_id": 29260419, "comment_id": 46728988, "body": "I tried to fix the formatting (please read <a href=\"http://stackoverflow.com/editing-help\">stackoverflow.com/editing-help</a> so next time, your formatting would be perfect) and I also changed backslashes used as comment (`\\\\\\`) to regular slashes, as that&#39;s what a correct C++ comment looks like. Also I would like to suggest to try to reduce the amount of code you&#39;re showing us. Shorter code is more readable, and by trying to shorten your code example you often discover the bug yourself."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1427308186, "post_id": 29260419, "comment_id": 46729289, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/6wd819wh.aspx\" rel=\"nofollow noreferrer\">MSDN main: Program Startup</a>"}, {"owner": {"reputation": 1328, "user_id": 4712857, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/609765894/picture?type=large", "display_name": "Daniel Bezerra De Menezes", "link": "https://stackoverflow.com/users/4712857/daniel-bezerra-de-menezes"}, "edited": false, "score": 0, "creation_date": 1427311396, "post_id": 29260419, "comment_id": 46731270, "body": "Ok thanks for editing it. the original file where i read this programa is here <a href=\"http://www.gametutorials.com/tutorial/text-adventure-part1/\" rel=\"nofollow noreferrer\">gametutorials.com/tutorial/text-adventure-part1</a>. it works when i use the file from the tutorial, but not mine, and i did step by step. cant understand why it wont work"}], "answers": [{"comments": [{"owner": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 0, "creation_date": 1493590742, "post_id": 29260489, "comment_id": 74467896, "body": "No luck for the OP, but it did work for me. Thanks, Andrew Komiagin!"}], "tags": [], "owner": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "is_accepted": false, "score": 14, "last_activity_date": 1427298844, "creation_date": 1427298844, "answer_id": 29260489, "question_id": 29260419, "link": "https://stackoverflow.com/questions/29260419/c2061-syntax-error-identifier-tchar/29260489#29260489", "title": "C2061: syntax error : identifier &#39;_TCHAR&#39;", "body": "<p>You need to include it: </p>\n\n<pre><code>#include \"tchar.h\"\n</code></pre>\n"}], "owner": {"reputation": 1328, "user_id": 4712857, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/609765894/picture?type=large", "display_name": "Daniel Bezerra De Menezes", "link": "https://stackoverflow.com/users/4712857/daniel-bezerra-de-menezes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12179, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1427307739, "creation_date": 1427298673, "last_edit_date": 1427307739, "question_id": 29260419, "link": "https://stackoverflow.com/questions/29260419/c2061-syntax-error-identifier-tchar", "title": "C2061: syntax error : identifier &#39;_TCHAR&#39;", "body": "<p>Can't understand why I'm getting this error? im kinda new to  c++ and microsoft visual studio, kinda lost on this. Thanks for the help on advance.</p>\n\n<pre><code>#include &lt;iostream&gt;                          \n#include &lt;fstream&gt;                           \n#include &lt;string&gt;                       \n#include &lt;windows.h&gt;                        \n\nusing namespace std;\n#define STILL_PLAYING   1\n#define QUIT            0\n#define GAME_FILE \"Mundo.txt\";\n\n////// the main class of the game, its a room, ull be moving around to other rooms. /////////////\nstruct posicao{\n    string posAtual;\n    string Descricao;\n    string posNorte;\n    string posSul;\n    string posLeste;\n    string posOeste;\n};\n\n/////////// displays the room that you are at the moment /////\nvoid mostraposicao(posicao &amp;posicao)\n{\n    cout &lt;&lt; posicao.Descricao &lt;&lt; endl &lt;&lt; endl;\n}\n\n////////// gets all info of the present room ////\nvoid getPosicaoInfo(posicao &amp;posicao, ifstream fin) {\n    string strLine = \"\";\n    string strTemp = \"\";\n\n    string strPosicao = \"&lt;\" + posicao.posAtual + \"&gt;\";\n    fin.seekg(NULL, ios::beg);\n    fin.clear();\n\n    // reads the txt file line by line till it reaches '*' because\n    // the room description is in this format ---&gt;&gt; \"text '*'\"\n    // to identify the end of the description.\n    while (getline(fin, strLine, '\\n')) {\n        if (strLine == strPosicao) {\n            getline(fin, posicao.Descricao, '*');\n            fin &gt;&gt; strTemp &gt;&gt; posicao.posNorte;\n            fin &gt;&gt; strTemp &gt;&gt; posicao.posSul;\n            fin &gt;&gt; strTemp &gt;&gt; posicao.posLeste;\n            fin &gt;&gt; strTemp &gt;&gt; posicao.posOeste;\n            return;\n        }\n    }\n}\n\n//// moves to another room////////\nvoid Andar(ifstream fin, posicao &amp;posicao, string strPosicao) {\n    if (string == \"None\") {\n        cout &lt;&lt; \"Voc\u00ea n\u00e3o pode ir por ai!!!\" &lt;&lt; endl;\n        return;\n    }\n    posicao.posAtual = strPosicao;\n    getPosicaoInfo(fin, posicao);\n    mostraposicao(posicao);\n}\n\n//////////get the input of the player ///////////\nint getComando(ifstream fin, posicao &amp;posicao) {\n    string strComando = \"\";\n    cout &lt;&lt;endl &lt;&lt; \":\";\n    cin &gt;&gt; strComando;\n    if (strComando == \"Olhar\") {\n        mostraposicao(posicao);\n    }\n    else if(strComando == \"Norte\") {\n        Andar(fin, posicao, posicao.posNorte);\n    }\n    else if (strComando == \"Sul\") {\n        Andar(fin, posicao, posicao.posSul);\n    }\n    else if (strComando == \"Leste\") {\n        Andar(fin, posicao, posicao.posLeste);\n    }\n    else if (strComando == \"Oeste\") {\n        Andar(fin,posicao,posicao.posOeste)\n    }\n    else if (strComando == \"Sair\") {\n        cout &lt;&lt; \"Voc\u00ea j\u00e1 desistiu?\" &lt;&lt; endl;\n        return QUIT;\n    }\n    else if (strComando == \"Ajuda\" || strComando == \"?\") {\n        cout &lt;&lt; endl &lt;&lt; \"Os comandos do jogo sao : Olhar, Norte, Sul, Leste,Oeste,Sair,Ajuda\" &lt;&lt; endl;\n    }\n    else {\n        cout &lt;&lt; \"Ah\u00f1???\" &lt;&lt; endl;\n    }\n    return STILL_PLAYNG;\n}\n\n///// where the game begins //////////\nint _tmain(int argc, _TCHAR* argv[])\n{\n    ifstream fin;    /// creates the stream file ///\n    posicao posicao;   //// the room that will be used in the game ///\n    fin.open(GAME_FILE);   ///// gets the text file////\n    if (fin.fail())   /////// if the text doesnt exist, the game ends ////\n    {\n        // Display a error message and return -1 (Quit the program)\n        cout &lt;&lt; \"Jogo n\u00e3o encontrado\" &lt;&lt; endl;\n        return -1;\n    }\n    // reads twice, so it skips the &lt;start&gt; and reads the &lt;middle&gt;\n    // (first room ull be in the game\n    fin &gt;&gt; posicao.posAtual &gt;&gt; posicao.posAtual;\n    getPosicaoInfo(fin, posicao);\n    mostraposicao(posicao);\n\n    /////// if the input its quit, ends the game//////\n    while (1) {\n        if (getComando(fin, posicao) == QUIT)\n            break;\n    }\n    /////// closes the txt file, ends the game//////////\n    fin.close();\n    Sleep(3000); /// delays  the close///\n    return 0;\n}\n</code></pre>\n\n<p>the text is in this format:</p>\n\n<pre><code>&lt;Start&gt; Middle\n\n&lt;Middle&gt;\nYou step into a house where you are nearly\nblinded by the light shinning through the window.\nYou have been searching for your friend who was captured.\nThe trail has led you to this mansion.\nThere is a door in every direction.*\n&lt;north&gt; Top\n&lt;east&gt;  Right\n&lt;south&gt; Bottom\n&lt;west&gt;  Left\n\n&lt;Left&gt;\nThere is a fountain in the middle of this room.\nThe cool, crisp air swirls about and encircles you.\nThere is only one door to the east where you came.*\n&lt;north&gt; None\n&lt;east&gt;  Middle\n&lt;south&gt; None\n&lt;west&gt;  None\n\n&lt;Bottom&gt;\nYou step back outside of the mansion and grab some fresh air.\nIt is quite refreshing, comapred to the damp smell from within.\nYou here rustling from the second story of the house.  It could be your friend.\nYour only option is to go back inside and get them out of here!*\n&lt;north&gt; Middle\n&lt;east&gt;  None\n&lt;south&gt; None\n&lt;west&gt;  None\n\n&lt;Right&gt;\nAs you pass through the door you feel a chill run\ndown your spine.  It appears that there something or \nsomeone or something sitting in the corner, covered by darkness.\nThere is no where to go but back to the west.*\n&lt;north&gt; None\n&lt;east&gt;  None\n&lt;south&gt; None\n&lt;west&gt;  Middle\n\n&lt;Top&gt;\nAs you get closer to the second story of the mansion, the sounds of someone\nstruggling can be heard more distinctly.  There is no turning back now.\nOne door is to the south and one is to the north up a stairwell.*\n&lt;north&gt; End\n&lt;east&gt;  None\n&lt;south&gt; Middle\n&lt;west&gt;  None\n\n&lt;End&gt;\nYou find your friend tied to a chair.  Their hands, feet and mouth are bound,\nbut it's as if their eyes are screaming at you.  Short bursts of muffled yells\nare heard from under the cloth that holds their mouth, as if to say, \"Run!\".  \nWhat could they be trying to say?  As you walk closer to them they seem to get \nlouder and more depserate. That's when you see it.  It had been lurching in the\ncorner, feathered by darkness.   To be continued...*\n&lt;north&gt; None\n&lt;east&gt;  None\n&lt;south&gt; None\n&lt;west&gt;  None\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2033, "user_id": 3133680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPJFK.jpg?s=128&g=1", "display_name": "rageandqq", "link": "https://stackoverflow.com/users/3133680/rageandqq"}, "edited": false, "score": 1, "creation_date": 1427298837, "post_id": 29260269, "comment_id": 46723062, "body": "I&#39;ll just leave this here: <a href=\"http://www.murdoch.edu.au/TNE/Roles-and-Responsibilities/Rights-and-Responsibilities-of-Students/Academic-Integrity/\" rel=\"nofollow noreferrer\">murdoch.edu.au/TNE/Roles-and-Responsibilities/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 1810964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b8703d9594fa7f3f3ed6ba1d049683ef?s=128&d=identicon&r=PG", "display_name": "Shivarn", "link": "https://stackoverflow.com/users/1810964/shivarn"}, "edited": false, "score": 0, "creation_date": 1427298849, "post_id": 29260405, "comment_id": 46723075, "body": "haha such a silly mistake. Can&#39;t believe i missed something so small. I got a lot of learning to do. Thanks @Arun A.S .. Also what about printing a constant variable in <code>printf</code>?"}, {"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "reply_to_user": {"reputation": 283, "user_id": 1810964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b8703d9594fa7f3f3ed6ba1d049683ef?s=128&d=identicon&r=PG", "display_name": "Shivarn", "link": "https://stackoverflow.com/users/1810964/shivarn"}, "edited": false, "score": 0, "creation_date": 1427298947, "post_id": 29260405, "comment_id": 46723150, "body": "@Shivarn , <code>&amp;</code> returns the address of the variable right after it and <code>scanf()</code> stores the value in that address. But you don&#39;t need to use <code>&amp;</code> for <code>printf()</code>"}, {"owner": {"reputation": 283, "user_id": 1810964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b8703d9594fa7f3f3ed6ba1d049683ef?s=128&d=identicon&r=PG", "display_name": "Shivarn", "link": "https://stackoverflow.com/users/1810964/shivarn"}, "edited": false, "score": 0, "creation_date": 1427299013, "post_id": 29260405, "comment_id": 46723204, "body": "Ahh, that makes sense. Thanks Arun."}], "tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": true, "score": 4, "last_activity_date": 1427299892, "last_edit_date": 1427299892, "creation_date": 1427298633, "answer_id": 29260405, "question_id": 29260269, "link": "https://stackoverflow.com/questions/29260269/a-condition-in-c-prints-only-1-results-regardless-of-input/29260405#29260405", "title": "A condition in C prints only 1 results regardless of input", "body": "<p>Change </p>\n\n<pre><code>scanf(\"%d%*c\" , speed);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\"%d%*c\" , &amp;speed);\n</code></pre>\n\n<p>You need to use <code>&amp;</code> when accepting values with <code>scanf()</code>. The unary <code>&amp;</code> returns the address of the variable following it. <code>scanf()</code> stores the values in that address. So you need to use <code>&amp;</code> in <code>scanf()</code>. But you don't need to use <code>&amp;</code> for <code>printf()</code> ( unless you want to print the address of that variable for some reason )</p>\n\n<p>You should also change your 3 <code>printf()</code> statements with the fine to </p>\n\n<pre><code>printf(\"SPEEDING - You have gone over the speed limit.\\n Fined $%d.\\n\",FINE1);\nprintf(\"SPEEDING - You have gone over the speed limit.\\n Fined $%d .\\n\", FINE2);\nprintf(\"SPEEDING - You have gone over the speed limit.\\n Fined $%d .\\n\", FINE3);\n</code></pre>\n\n<p>Otherwise, it won't show the value of the FINE's</p>\n"}], "owner": {"reputation": 283, "user_id": 1810964, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b8703d9594fa7f3f3ed6ba1d049683ef?s=128&d=identicon&r=PG", "display_name": "Shivarn", "link": "https://stackoverflow.com/users/1810964/shivarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 29260405, "answer_count": 1, "score": -2, "last_activity_date": 1427299892, "creation_date": 1427298287, "question_id": 29260269, "link": "https://stackoverflow.com/questions/29260269/a-condition-in-c-prints-only-1-results-regardless-of-input", "title": "A condition in C prints only 1 results regardless of input", "body": "<p>I'm a little stumped. I have a feeling I've gone wrong somewhere in my code but can't seem to quite put my finger on it. Basically I was assigned to put together a C code which supposedly simulates a police radar gun. A user would insert an integer, and based on input the user would be advised whether that input would be speeding or not, and if it was a specific fine would be given. </p>\n\n<p>Below is my code</p>\n\n<pre><code>/* *****\n\nAuthor: Shivan Kamal\nDate: 12-3-2015\nProgram Reason: To simulate a police speed radar by getting user to insert a number\n        and to give them an answer to whether they are speed or not, and provide a warning or a fine\n        where required.\n\n*****/\n\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    /***** \n    Declaring values\n    ******/\n    int speed;\n    const int LIMIT1 = 60;\n    const int LIMIT2 = 65;\n    const int LIMIT3 = 70;\n    const int LIMIT4 = 80;\n    const int LIMIT5 = 200;\n\n    const int FINE1 = 80;\n    const int FINE2 = 150;\n    const int FINE3 = 500;\n\n    /*****\n    Beginning of the program\n    *****/\n\n    printf(\" If you want to check whether a certain speed issues you\\n\");\n    printf(\" a warning or a fine and how much, please input a number value\\n\");\n    printf(\" NOTE: the number value will be in KM/h.\\n\");\n    scanf(\"%d%*c\" , speed);\n\n    if(speed == 0)\n    {\n        printf(\" Your vehicle is not moving at '0'km/h. If your car was blocking traffic, you would be issued a fine. Please be careful.\\n\");\n    }\n    else \n        if(speed &lt;0)\n        {\n            printf(\"Your vehicle is most likely in reverse. If this is the case and your vehicle disrupts traffic. You may be issued a fine. Please be careful.\\n\");\n        }\n        else\n            if(speed &lt;= LIMIT1)\n            {\n                printf(\"You're within the speed limit.\\n\");\n            }\n            else\n                if(speed &lt;= LIMIT2)\n                {\n                    printf(\"SPEEDING - Warning! You are going over the speed limit.\\n Please slow down or you may be issued a fine\");\n                }\n                else\n                    if(speed &lt;= LIMIT3)\n                    {\n                        printf(\"SPEEDING - You have gone over the speed limit.\\n Fined $FINE1.\\n\");\n                    }\n                    else\n                        if(speed &lt;= LIMIT4)\n                        {\n                            printf(\"SPEEDING - You have gone over the speed limit.\\n Fined $FINE2.\\n\");\n                        }\n                        else\n                            if(speed &lt;= LIMIT5)\n                            {\n                                printf(\"SPEEDING - You have gone over the speed limit.\\n Fined $FINE3.\\n\");\n                            }\n                            else\n                            {\n                                printf(\" By getting caught going faster than any limit higher than 20km/h.\\n Your fine will simply keep getting bigger.\\n\");\n                                printf(\"Please stick to the speed limit and follow the rules.\\n\");\n                            }\n\nreturn(0);\n}\n</code></pre>\n\n<p>When compiling the code and running it, regardless of what a user inputs, provides one particular message over and over. The message is in the screenshot.</p>\n\n<p><img src=\"https://i.stack.imgur.com/oONbo.jpg\" alt=\"enter image description here\"></p>\n\n<p>Can anyone advise me, where I'm going wrong? </p>\n\n<p>Also exactly how do constant variables get printed in a <code>printf</code> statement. That's one other part I think I'm doing wrong as well.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 2, "creation_date": 1427298043, "post_id": 29260160, "comment_id": 46722488, "body": "Maybe you want to add a question to this post."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1427298382, "post_id": 29260160, "comment_id": 46722735, "body": "Yeah, you&#39;d better change the return type to <code>int</code> or even <code>unsigned char</code> as it only returns very small numbers. If you want to pass <i>very</i> big numbers to your function, you can use <code>unsigned long long</code> instead of <code>long long int</code> if it&#39;s supported by your compiler. Functions are quite OK, there&#39;s no need to get rid of them, I think."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1427298384, "post_id": 29260160, "comment_id": 46722736, "body": "You can halve the execution time by weeding out even values of <code>z</code> first, then testing with only odd values of <code>i</code>. You can futher reduce the execution time by iterating only up to the square root of <code>z</code>."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1427302175, "post_id": 29260160, "comment_id": 46725357, "body": "You should look into the <a href=\"http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test\" rel=\"nofollow noreferrer\">Miller-Rabin Primality Test</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427302758, "post_id": 29261625, "comment_id": 46725766, "body": "Your first option isn&#39;t feasible, considering the type is <code>long long int</code> that would be a massive array."}, {"owner": {"reputation": 3187, "user_id": 4350216, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uYP0f.jpg?s=128&g=1", "display_name": "Ali Akber", "link": "https://stackoverflow.com/users/4350216/ali-akber"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427303631, "post_id": 29261625, "comment_id": 46726294, "body": "@WeatherVane you are right (y) I assumed the input is not that big :( whatever, there is always option 2 :)"}], "tags": [], "owner": {"reputation": 3187, "user_id": 4350216, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uYP0f.jpg?s=128&g=1", "display_name": "Ali Akber", "link": "https://stackoverflow.com/users/4350216/ali-akber"}, "is_accepted": false, "score": 0, "last_activity_date": 1427302021, "creation_date": 1427302021, "answer_id": 29261625, "question_id": 29260160, "link": "https://stackoverflow.com/questions/29260160/how-to-find-a-prime-no-without-using-my-function-chk-prime-as-i-wish-to-optimize/29261625#29261625", "title": "How to find a prime no without using my function chk prime as i wish to optimize my algo", "body": "<p>Here's what you can do:</p>\n\n<pre><code>1. Determine the prime numbers upto sqrt(MaxN) using seive at the beginning of your program.(you need to calculate this only once)\n2. Then each time you call chkPrime do this :\n   -- determine sqrt(z)\n   -- check if the number can be divided with the primes upto sqrt(z)\n   -- if can not be divided then z is a prime number otherwise it is not.\n</code></pre>\n\n<p>or, if you don't want to generate prime numbers at the beginning then do the following:</p>\n\n<pre><code>   1. determine sqrt(z)\n   2. check if the number can be divided with 2\n   3. if yes then it's not a prime otherwise goto 4\n   4. check if the number can be divided with odd numbers from 3 to sqrt(z)\n   5. if yes then it's not a prime otherwise it is a prime number\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "is_accepted": false, "score": 2, "last_activity_date": 1427302544, "creation_date": 1427302544, "answer_id": 29261820, "question_id": 29260160, "link": "https://stackoverflow.com/questions/29260160/how-to-find-a-prime-no-without-using-my-function-chk-prime-as-i-wish-to-optimize/29261820#29261820", "title": "How to find a prime no without using my function chk prime as i wish to optimize my algo", "body": "<p>If you want to check if a certain number is definitely prime, the fastest (i.e. polynomial runtime) deterministic algorithm is the <a href=\"http://en.wikipedia.org/wiki/AKS_primality_test\" rel=\"nofollow\">AKS-test(Wikipedia)</a> afaik.</p>\n\n<p>If you want to create primes for a certain range, you should look at <a href=\"http://en.wikipedia.org/wiki/Generating_primes#Prime_sieves\" rel=\"nofollow\">sieving(Wikipedia)</a>, or, as I would recommend download them as list from the internet (e.g. <a href=\"http://primes.utm.edu/lists/small/10000.txt\" rel=\"nofollow\">here</a> for the first 10000).</p>\n\n<p>The wikipedia article on sieving mentions two good probabilistic primality test, so I will not mention any more. The test does however only say whether a number is a prime with a large probability (so called probable primes).</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "edited": false, "score": 0, "creation_date": 1427306448, "post_id": 29262046, "comment_id": 46728170, "body": "you do not have to go up to sqrt() I think log2() is enough"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427306845, "post_id": 29262046, "comment_id": 46728439, "body": "@GRC if you want to find a factor of 121 you have to iterate <b><i>up to 11</i></b>, its square root, since 121 has no other factors."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "edited": false, "score": 0, "creation_date": 1427311738, "post_id": 29262046, "comment_id": 46731495, "body": "you can check if sqrt() is whole number before you  enter the function"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427312330, "post_id": 29262046, "comment_id": 46731824, "body": "@GRC I am already in the function. The square root will be a whole number after it is cast to <code>long long int</code> type. If it wasn&#39;t, it will be rounded down. If it&#39;s rounded up, that can&#39;t possibly be a factor that was not already checked: that&#39;s the point of iterating up to the sqrt. There might be an error with very large numbers, since <code>double</code> does not hold as much significance as <code>long long int</code>. In that case  a dedicated square root function for <code>long long int</code> is not difficult, but if you want to post a better answer, do so."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "edited": false, "score": 0, "creation_date": 1427325797, "post_id": 29262046, "comment_id": 46738191, "body": "ok here is what I mean:   check if sqrt((double)z); is a fraction if it is than continue into the function, if it is not then it is not prime, like 121 you mentioned above. I am not saying it is bed code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427325970, "post_id": 29262046, "comment_id": 46738241, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/73819/discussion-between-grc-and-weather-vane\">continue this discussion in chat</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427326226, "post_id": 29262046, "comment_id": 46738328, "body": "@GRC sorry, I take your last point: if the square root is a whole number then <code>z</code> is a perfect square, no need to iterate."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "edited": false, "score": 0, "creation_date": 1427327831, "post_id": 29262046, "comment_id": 46738806, "body": "I apologize, I mean into for loop not function in my second comment"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1427303255, "creation_date": 1427303255, "answer_id": 29262046, "question_id": 29260160, "link": "https://stackoverflow.com/questions/29260160/how-to-find-a-prime-no-without-using-my-function-chk-prime-as-i-wish-to-optimize/29262046#29262046", "title": "How to find a prime no without using my function chk prime as i wish to optimize my algo", "body": "<p>Based on my comment above, here is a more efficient function, although OP wanted to know how to <em>\"without using my function\"</em>.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n\nint chkPrime(long long int z)\n{   \n    long long int i, rootz;\n    if (z &lt;= 1)\n        return 0;\n    if (z == 2)\n        return 1;\n    if (z % 2 == 0)\n        return 0;\n    rootz = (long long int)sqrt((double)z);\n    for (i=3; i&lt;=rootz; i+=2)\n        if (z % i == 0)\n            return 0;\n    return 1;\n}\n\nint main(void)\n{\n    long long int i;\n    for (i=0; i&lt;100; i++)\n        if (chkPrime(i)) printf(\"%5lld \", i);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4712826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8rWMQ.jpg?s=128&g=1", "display_name": "Aritra Ghosal", "link": "https://stackoverflow.com/users/4712826/aritra-ghosal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1427303255, "creation_date": 1427298004, "last_edit_date": 1427298024, "question_id": 29260160, "link": "https://stackoverflow.com/questions/29260160/how-to-find-a-prime-no-without-using-my-function-chk-prime-as-i-wish-to-optimize", "title": "How to find a prime no without using my function chk prime as i wish to optimize my algo", "body": "<pre><code>long long int chkPrime(long long int z)\n{   \n    int i;\n\n       if(z==1)\n          return 0;\n\n      if(z==2)\n           return 1;\n\n       for(i=2;i&lt;=z/2;i++)\n             if(!(z%i))\n                     return 0;\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "graph"], "comments": [{"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 2, "creation_date": 1427297549, "post_id": 29259365, "comment_id": 46722148, "body": "Please describe what your code does. The answer to this problem is very simple and shouldn&#39;t require this much effort. Here&#39;s a hint: Write an adjacency matrix (on a piece of paper) of a directed graph containing a universal sink, figure out what&#39;s special about it, and write code to detect that property. Also, use meaningful variable names. One-letter variable names are impossible to understand."}, {"owner": {"reputation": 565, "user_id": 4146344, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001662120748/picture?type=large", "display_name": "Dang Manh Truong", "link": "https://stackoverflow.com/users/4146344/dang-manh-truong"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1427299658, "post_id": 29259365, "comment_id": 46723631, "body": "My bad. My solution works as follows: From (i,j) that i=j (initially i=j=0 ) go to the right until a[i][j] =1, then all the vertices from 0 to j-1 cannot be an universal sink. If vertex j satisfies, a[i][j] =1 from column i to j-1 we just check it if it doesn&#39;t set i=j. After that you go downward (incrementing i) to see if there is any 0 if there is, set j=i, repeat again. When j=N it has checked all of the matrix, we check again at column i and row i to see if it satisfies, if it does then return i, if it doesn&#39;t then there is no universal link."}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1427302810, "post_id": 29259365, "comment_id": 46725799, "body": "There are really only 2 cases: <code>a[i][j] == 1</code>, in which case we increment <code>i</code>, and <code>a[i][j] == 0</code>, in which case we increment <code>j</code>. See <b>Problem 4</b> here: <a href=\"http://web.mst.edu/~ercal/253/SLIDES/PDF/Lec-22.pdf\" rel=\"nofollow noreferrer\">web.mst.edu/~ercal/253/SLIDES/PDF/Lec-22.pdf</a>"}, {"owner": {"reputation": 565, "user_id": 4146344, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001662120748/picture?type=large", "display_name": "Dang Manh Truong", "link": "https://stackoverflow.com/users/4146344/dang-manh-truong"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1427362202, "post_id": 29259365, "comment_id": 46748937, "body": "The algorithm there seems to have the same idea as me. However I feel strange, when a[i][j] = 1 why do we have to increment i by just 1??? Because we already know that all vertices up to (j-1) cannot possibly be a universal sink, why don&#39;t we just set i=j (since for every step it is guaranteed that i&lt;=j) , that way we would save some checkings for all those (i&lt;j). P/s: Some miscellanous here, it says &quot; If A[u][v]=0, then v cannot be a universal sink&quot; but if u=v then this does not hold true"}, {"owner": {"reputation": 565, "user_id": 4146344, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001662120748/picture?type=large", "display_name": "Dang Manh Truong", "link": "https://stackoverflow.com/users/4146344/dang-manh-truong"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1427362502, "post_id": 29259365, "comment_id": 46749081, "body": "See Problem 2 here : <a href=\"http://www.cise.ufl.edu/class/cot5405fa09/assignments/solhw3.pdf\" rel=\"nofollow noreferrer\">cise.ufl.edu/class/cot5405fa09/assignments/solhw3.pdf</a>"}, {"owner": {"reputation": 565, "user_id": 4146344, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001662120748/picture?type=large", "display_name": "Dang Manh Truong", "link": "https://stackoverflow.com/users/4146344/dang-manh-truong"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1427478215, "post_id": 29259365, "comment_id": 46808113, "body": "@beaker help me please"}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1427479486, "post_id": 29259365, "comment_id": 46808770, "body": "The reason they only increment <code>i</code> by 1 is to simplify the code into one loop. You&#39;ll get there eventually, and <code>O(2|V|)</code> is still <code>O(|V|)</code>. If you want to, you could probably do something like <code>i=max(i+1,j)</code>. They also state at the beginning of the question that <code>A[u][u] = 0</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1116, "user_id": 4151472, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NP0Gs.jpg?s=128&g=1", "display_name": "RichArt", "link": "https://stackoverflow.com/users/4151472/richart"}, "edited": false, "score": 0, "creation_date": 1507609156, "post_id": 29265072, "comment_id": 80265799, "body": "I am not convinced that your algo really works. If we take the example above: What if the sink is on the last column and (0,1) = 1 and (1,1) = 0 and (0,2) = 0? It would still detect the middle column as sink but it isn&#39;t. And the real sink would not be detected. Or did I miss something?"}, {"owner": {"reputation": 2015, "user_id": 4586108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0srZq.jpg?s=128&g=1", "display_name": "lcastillov", "link": "https://stackoverflow.com/users/4586108/lcastillov"}, "reply_to_user": {"reputation": 1116, "user_id": 4151472, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NP0Gs.jpg?s=128&g=1", "display_name": "RichArt", "link": "https://stackoverflow.com/users/4151472/richart"}, "edited": false, "score": 0, "creation_date": 1507616731, "post_id": 29265072, "comment_id": 80268251, "body": "@RichArt , create the full matrix and then execute the algorithm above."}, {"owner": {"reputation": 1116, "user_id": 4151472, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NP0Gs.jpg?s=128&g=1", "display_name": "RichArt", "link": "https://stackoverflow.com/users/4151472/richart"}, "edited": false, "score": 0, "creation_date": 1507657956, "post_id": 29265072, "comment_id": 80294332, "body": "Yes, now I am convinced: If the algo encounters a 0 it goes right, if it encounters a 1 it goes down. So, if there is a universal sink <code>k</code>, then it has out-degree = 0. So, the k-th row has to have all 0&#39;s. This represents a &quot;barrier&quot; in direction down. Furthermore <code>k</code> has in-degree = |V| -1. So, the k-th column has to have all 1&#39;s except (k, k). This represent a &quot;barrier&quot; in direction right. The last IF is needed because we didn&#39;t check if column <code>k</code> has also 1&#39;s below the 0-&quot;barrier&quot;."}], "tags": [], "owner": {"reputation": 2015, "user_id": 4586108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0srZq.jpg?s=128&g=1", "display_name": "lcastillov", "link": "https://stackoverflow.com/users/4586108/lcastillov"}, "is_accepted": false, "score": 7, "last_activity_date": 1466707733, "last_edit_date": 1466707733, "creation_date": 1427312659, "answer_id": 29265072, "question_id": 29259365, "link": "https://stackoverflow.com/questions/29259365/how-to-find-the-universal-sink-of-a-directed-graph-with-an-adjacency-matrix-repr/29265072#29265072", "title": "How to find the universal sink of a directed graph with an adjacency-matrix representation", "body": "<p>You can use the following code:</p>\n\n<pre><code>int DetectSink(matrix G, int V) {\n    int i = 0;\n    int j = 0;\n    while (i &lt; V &amp;&amp; j &lt; V)\n        if (G[i][j])\n             i = i + 1;\n        else j = j + 1;\n    if (i &lt; V &amp;&amp; IsSink(G, i)) return i;\n    return -1;\n}\n</code></pre>\n\n<p>If k is an universal sink, then  the k-th\nrow of the adjacency-matrix ( <code>G</code> ) will be\nall 0s, and the k-th column will  be  all\n1s (except <code>G[k][k] = 0</code>).</p>\n\n<p>OBS: We can conclude that there is at most one sink.</p>\n\n<p>If an univeral sink <code>k</code> exist in <code>G</code>, then eventually,\nwe get to position <code>(i = k, j)</code> or <code>(i, j = k)</code>.</p>\n\n<pre><code>            k\n  +---+---+---+---+---+\n  |   |   | 1 |   |   |\n  +---+---+---+---+---+\n  |   |   | 1 |   |   |\n  +---+---+---+---+---+\nk | 0 | 0 | 0 | 0 | 0 |\n  +---+---+---+---+---+\n  |   |   | 1 |   |   |\n  +---+---+---+---+---+\n  |   |   | 1 |   |   |\n  +---+---+---+---+---+\n</code></pre>\n\n<p>If we reach column  <code>k (j=k)</code> before row  <code>k (i=k)</code>,\nour algorithm excecutes  the  <strong>then</strong>  block  until\n<code>(i = k, j = k)</code>, then it executes  the <strong>else</strong> block\nuntil <code>(i = k, j = V)</code>.\nIn other case, if k-th row is reached first than\nk-th column, then the <strong>else</strong> block  excecutes  to\nthe end of while loop until <code>(i = k, j = V)</code>.</p>\n\n<p>At the end we must check if <code>i</code> is an universal\nsink, because we know if a sink exist it is <code>i</code>,\nbut we have not idea what our algorithm is going\nto do if an universal sink is not in <code>G</code>.</p>\n\n<p>The running time is <code>O(V)</code>, because in every step\nwe increment <code>i</code> or <code>j</code>, so at most <code>2V</code> such\noperations occurrs. The <code>IsSink</code> part is <code>O(V)</code>.</p>\n\n<p>There is a nice solution using Divide &amp; Conquer:</p>\n\n<p>In  this  solution  we  keep  a  set  of candidates\nto universal sink and in every  step  we make pairs\nof vertexs and discard one of two vertexs, in order\nto  analize  one  half  of  the initial candidates.</p>\n"}], "owner": {"reputation": 565, "user_id": 4146344, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001662120748/picture?type=large", "display_name": "Dang Manh Truong", "link": "https://stackoverflow.com/users/4146344/dang-manh-truong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9267, "favorite_count": 4, "answer_count": 1, "score": 3, "last_activity_date": 1615743973, "creation_date": 1427295971, "last_edit_date": 1615743973, "question_id": 29259365, "link": "https://stackoverflow.com/questions/29259365/how-to-find-the-universal-sink-of-a-directed-graph-with-an-adjacency-matrix-repr", "title": "How to find the universal sink of a directed graph with an adjacency-matrix representation", "body": "<p>I'm working on an excercise (self-study):\n&quot;Show how to determine whether a directed graph G contains a universal link - a vertex with in-degree (V-1) (V is the number of vertices) and out-degree 0 in time O(V), given an adjacency matrix for G.\nI have written the code here:</p>\n<pre><code>    int UniversalSink(const int *a, int N)\n{\n    int i,j,i1,j1,q;\n    i=0;\n\n\n    i=0;\n    q=YES;\n    j=-1;\n    do\n    {\n    j++;\n    if (j==N)\n        break;\n\n    while ( (*(a+i*MAX+j)) ==0 )\n    {\n        j++;\n        if (j==N)\n        {\n\n        break;\n        }\n    }\n    if (j==N)\n        break;\n    q= YES;\n\n    for (; i&lt;j; i++)\n        if ( (*(a+i*MAX+j)) ==0 )\n        {\n           i=j,j=i-1;\n           q= NO;\n           break;\n        }\n    if (q==NO)\n        continue;\n    q=YES;\n\n    /*\n    for (i=0; i&lt;=j; i++ )\n        if (a[j][i] ==1 )\n        {\n        i=j;\n        q=NO;\n        ok=NO;\n        trai = NO;\n        break;\n\n        }\n    if (q==NO)\n        continue;\n    */\n    q=YES;\n\n    for (i1= j+1; i1&lt;N; i1++)\n        if ((*(a + i1*MAX +j)) ==0 )\n        {\n        i=i1, j=i-1;\n        q=NO;\n        break;\n\n        }\n    if (q==NO)\n        continue;\n    }\n    while (j&lt;N);\n\n    {\n    i1=i;\n    for (j1=0; j1&lt;N;j1++)\n        if ( (*(a + i1*MAX +j1 ))  ==1 )\n        return -1;\n    j1=i;\n    for (i1=0; i1&lt;N;i1++)\n    {\n        if (i1==j1)\n        continue;\n        if ( (*(a + i1*MAX +j1))==0)\n        return -1;\n    }\n    return i;\n\n    }\n  \n</code></pre>\n<p>It takes a N-N matrix and returns the position of the universal sink (0 to N-1 if it exists and -1 if it doesn't)\nHowever I don't really know if it is O(V) or not, and in fact I'm not sure if it will always compute the desired result at all</p>\n<p>(Feel free to comment on any other aspect of my code e.g. using too many breaks)</p>\n"}, {"tags": ["c", "microcontroller", "pic"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427296097, "post_id": 29259074, "comment_id": 46721039, "body": "You can&#39;t just copy your loop from <code>main()</code> into an ISR and expect it to work. You even copied the command from the main loop. The ISR would be triggered on receipt of every RX data char, you would clear the interrupt status and transmit the char, and return from the interrupt. But sitting there in a loop is not what you do in an ISR."}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 2, "creation_date": 1427296121, "post_id": 29259074, "comment_id": 46721062, "body": "generally you don&#39;t want a loop of 500 things with io in an ISR... try setting a flag to tell main to do it... or something similar... you could be re-firing your ISR from inside of your ISR, or it maybe isn&#39;t getting finished before the timer fires it or something... (I don&#39;t know what your program is doing.)"}, {"owner": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "edited": false, "score": 0, "creation_date": 1427297728, "post_id": 29259074, "comment_id": 46722259, "body": "Thanks for the answers. I realize now how stupied my code looks like. I should have presented it as an psuedocode due to the missing of some details that should&#39;ve been there. I did not copy the command from main(), i corrected it with adding command = U1RXREG;  a few mins after I posted. I will disable all interrupts when entering the ISR() to make sure that nothing is interrupting it and enabling interrupts before leaving the ISR(). And I will place the loop in a function wich is going to be called by the ISR(). My program is getting GPS-data with U2RX and relaying it to an RF-transmitter."}], "answers": [{"comments": [{"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1427304945, "post_id": 29262197, "comment_id": 46727153, "body": "@Pax -note I added two edits to the answer since you first may have seen it."}, {"owner": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "edited": false, "score": 0, "creation_date": 1427308597, "post_id": 29262197, "comment_id": 46729543, "body": "I appreciate your answer and comments, 1s and 0s. As soon as I continue with the project I will experiment and try solve the problem. When its done I will report the solution and give creds to the users that earns it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "edited": false, "score": 1, "creation_date": 1427311685, "post_id": 29262197, "comment_id": 46731460, "body": "@Pax re your above comment: <i>&quot;I will disable all interrupts when entering the ISR() to make sure that nothing is interrupting it and enabling interrupts before leaving the ISR().&quot;</i> Firstly, it&#39;s a bad route to start your career in ISR handling, and contrary to the spirit of &quot;mean and lean&quot; as answered. Secondly, interrupts are disabled by default when you enter an ISR, so if yours is low priority you can re-enable interrupts so that higher priority interrupts can still function (or even allow your own ISR to be re-entrant!), although I add, this is <i>not</i> a beginner&#39;s technique."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427313114, "post_id": 29262197, "comment_id": 46732259, "body": "@1sand0s I was only trying to discourage OP from this particular technique of hogging an interrupt. He should experiment every which way he can, since if it breaks, you only have to turn it off and try again."}, {"owner": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1427315389, "post_id": 29262197, "comment_id": 46733516, "body": "@WeatherVane sorry I am not sure if I can agree with that &quot;interrupts are disabled by default when you enter an ISR so if yours is low priority you can re-enable interrupts...&quot; According to PIC24H family reference manual: &quot;Interrupts are nestable by default. Any ISR in progress can be interrupted by another source of interrupt with a higher user-assigned priority level&quot;.  I interpret it like theres no need to &quot;re-enable&quot; higher prio interrupts  to interrupt lower prio ones. The CPU copies the priority level of the interrupt and restores the priority from the stack when ISR is finished."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "edited": false, "score": 0, "creation_date": 1427315513, "post_id": 29262197, "comment_id": 46733602, "body": "@Pax you got me - well done, my PIC is rusty, but it&#39;s still not good technique to linger in an interrupt."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "edited": false, "score": 2, "creation_date": 1427315633, "post_id": 29262197, "comment_id": 46733671, "body": "@Pax I think what he meant is that equal and lower-priority interrupts are implicitly blocked when an interrupt is being serviced.  Higher ones can interrupt. That&#39;s the point of the hierarchy.  So he wonders what the point of disabling any interrupts in the ISR is in your situation if the implicit functioning of the interrupt hierarchy should cover your bases. Some interrupts on some processors can&#39;t be disabled. Those are called NMIs (Non-maskable Interrupts)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "edited": false, "score": 1, "creation_date": 1427315949, "post_id": 29262197, "comment_id": 46733826, "body": "@Pax in particular your ISR waits on status with every lower or equal priority task blocked."}, {"owner": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427316383, "post_id": 29262197, "comment_id": 46734063, "body": "@WeatherVane So do you prefer that the ISR, instead, is activating a task in main() that do &quot;all the work&quot; instead?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1427316697, "post_id": 29262197, "comment_id": 46734238, "body": "Yes, if you want to use an interrupt it should somehow pass <i>one</i> input char to <code>main()</code>, which will process it. <code>main()</code> should sit there waiting for it, and/or doing other tasks."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "edited": false, "score": 0, "creation_date": 1427317167, "post_id": 29262197, "comment_id": 46734515, "body": "@Pax the simplest way to  do that is to use two vars. One for data, one for status. The interrupt would write to the data and set the status. Main would see the status, collect the value, and clear the status. This is a basic way of doing things, it&#39;s a one-char buffer. In effect, it&#39;s a more generalised way of handling the UART itself. Now you have a driver!"}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427317247, "post_id": 29262197, "comment_id": 46734555, "body": "@WeatherVane, put it in an answer so others can see it."}, {"owner": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "edited": false, "score": 0, "creation_date": 1427318255, "post_id": 29262197, "comment_id": 46735087, "body": "You guys are the best:) Next time I continue with the project, I will definatly approach the problem as you suggest! I will report when its done!"}, {"owner": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427319350, "post_id": 29262197, "comment_id": 46735597, "body": "@WeatherVane For me, your driver-example means constant polling. I was hoping that my &quot;superloop&quot; would be empty to only listen to interrupts. But I will definatly start with your idea and work my way towards more interrupt-driven loop to that point the program is still solid. Anyway, but big thanks to both of you weather and 10101010."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "edited": false, "score": 0, "creation_date": 1427320006, "post_id": 29262197, "comment_id": 46735915, "body": "Hey @Pax thanks. I got caught up hoping you&#39;d vindicate my answers and started losing patience. Thanks for clearing up that it is worth the effort and doing you some good and you appreciate the effort and actually learning this technique.  You&#39;d be surprised at how some new users at this site are. all taking a no giving. some expect you to teach them CS and do their homework for them from scatch"}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427320249, "post_id": 29262197, "comment_id": 46736030, "body": "@WeatherVane your answer wins because it is beyond generalities and moves toward a specific solution and strategy. Brady actually pinpointed what was wrong in the initial scenario Succinctly first"}], "tags": [], "owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "is_accepted": false, "score": 1, "last_activity_date": 1427304400, "last_edit_date": 1427304400, "creation_date": 1427303717, "answer_id": 29262197, "question_id": 29259074, "link": "https://stackoverflow.com/questions/29259074/relaying-uart1-with-uart2-within-an-isr-pic24h/29262197#29262197", "title": "Relaying UART1 with UART2 within an ISR() (PIC24H)", "body": "<p>ISR's <em>must</em> be kept lean and mean and the code made hyper-efficient if there is any hope of keeping up with the buffer on a UART.  Experiment with the BAUD rate just to find the point at which your code can keep up, to help discover the right heuristic and see how far away you are from achieving your goal.</p>\n\n<p>Success could depend on how fast your micro controller is, as well, and how many tasks it is running. If the microcontroller has a built in UART theoretically you should be able to manage keeping the FIFO from overflowing.  On the other hand, if you paired up a UART with an insufficiently-powered micro controller, you might not be able to optimize your way out of the problem.</p>\n\n<p>Besides the suggestion to offload the lower-priority work to the main thread and keep the ISR fast (that someone made in the comments), you will want to carefully look at the timing of all of the lines of code and try every trick in the book to get them to run faster. One expensive instruction can ruin your whole day, so get <em>real</em> creative in finding ways to save time.</p>\n\n<p>EDIT: Another thing to consider - look at the assembly language your C compiler creates.  A good compiler should let you inline assembly language instructions to allow you to hyper-optimize for your particular case. Generally in an ISR it would just be a small number of instructions that you have to find and implement.</p>\n\n<p>EDIT 2: A PIC 24 series should be fast enough if you code it right and select a fast oscillator or crystal and run the chip at a good clock rate.  Also consider the divisor the UART might be using to achieve its rate vs. the PIC clock rate.  It is conceivable (to me) that an even division that could be accomplished internally via shifting would be better than one where math was required.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1427324861, "creation_date": 1427324861, "answer_id": 29268204, "question_id": 29259074, "link": "https://stackoverflow.com/questions/29259074/relaying-uart1-with-uart2-within-an-isr-pic24h/29268204#29268204", "title": "Relaying UART1 with UART2 within an ISR() (PIC24H)", "body": "<p>Trying to draw an answer from the various comments.</p>\n\n<p>If the <code>main()</code> has nothing else to do, and there are no other interrupts, you might be able to \"get away with\" patching all 500 chars from one UART to another under interrupt, once the first interrupt has ocurred, and perhaps it would be a useful exercise to get that working.</p>\n\n<p>But that's not how you should use an interrupt. If you have other tasks in <code>main()</code>, and equal or lower priority interrupts, the relatively huge time that this interrupt will take (500 chars at 9600 baud = half a second) will make the processor what is known as \"interrupt-bound\", that is, the other processes are frozen out.</p>\n\n<p>As your project gains complexity, you won't want to restrict <code>main()</code> to this task, and there is no need to for it be involved at all, after setting up the UARTs and IRQs. After that it can calculate <code>\u03c0</code> ad infinitum if you want.</p>\n\n<p>I am a bit perplexed as to your sequence of operations. A command <code>'d'</code> is received from U1 which tells you to patch 500 chars from U2 to U1.</p>\n\n<p>I suggest one way to tackle this (and there are many) seeing as you really want to use interrupts, is to wait until the command is received from U1 - in <code>main()</code>. You then configure, and enable, interrupts for RXD on U2.</p>\n\n<p>Then the job of the ISR will be to receive data from U2 and transmit it thru U1. If both UARTS have the same clock and the same baud rate, there should not be a synchronisation problem, since a UART is typically buffered internally: once it begins to transmit, the TXD register is available to hold another character, so any stagnation in the ISR should be minimal.</p>\n\n<p>I can't write the actual code for you, since it would be supposed to work, but here is some <em>very</em> pseudo code, and I don't have a PIC handy (or wish to research its operational details).</p>\n\n<pre><code>ISR\n    has been invoked because U2 has a char RXD\n    you *might* need to check RXD status as a required sequence to clear the interrupt\n    read the RXD register, which also might clear the interrupt status\n    if not, specifically clear the interrupt status\n    while (U1 TXD busy);\n    write char to U1\n    if (chars received == 500)\n        disable U2 RXD interrupt\n    return from interrupt\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4361611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b34f52db8a58715678b0973fb2f195c?s=128&d=identicon&r=PG&f=1", "display_name": "Pax", "link": "https://stackoverflow.com/users/4361611/pax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 29268204, "answer_count": 2, "score": 0, "last_activity_date": 1427324861, "creation_date": 1427295222, "last_edit_date": 1427296517, "question_id": 29259074, "link": "https://stackoverflow.com/questions/29259074/relaying-uart1-with-uart2-within-an-isr-pic24h", "title": "Relaying UART1 with UART2 within an ISR() (PIC24H)", "body": "<p>I am programming a microcontroller of the PIC24H family and using xc16 compiler.</p>\n\n<p>I am relaying U1RX-data to U2TX within <code>main()</code>, but when I try that in an ISR it does not work.</p>\n\n<p>I am sending commands to the U1RX and the ISR() is down below. At U2RX, there are databytes coming in constantly and I want to relay 500 of them with the U1TX. The results of this is that U1TX is relaying the first 4 databytes from U2RX but then re-sending the 4th byte over and over again.</p>\n\n<p>When I copy the <code>for</code> loop below into my <code>main()</code> it all works properly. In the ISR(), its like that U2RX's corresponding FIFObuffer is not clearing when read so the buffer overflows and stops reading further incoming data to U2RX. I would really appreciate if someone could show me how to approach the problem here. The variables <code>tmp</code> and <code>command</code> are globally declared.</p>\n\n<pre><code>void __attribute__((__interrupt__, auto_psv, shadow)) _U1RXInterrupt(void)\n{\n    command = U1RXREG;\n    if(command=='d'){\n        for(i=0;i&lt;500;i++){\n            while(U2STAbits.URXDA==0);\n            tmp=U2RXREG;\n            while(U1STAbits.UTXBF==1); //\n            U1TXREG=tmp;\n           }\n    }\n}\n</code></pre>\n\n<p>Edit: I added the first line in the ISR().</p>\n"}, {"tags": ["c", "networking", "hash", "hashtable"], "answers": [{"comments": [{"owner": {"reputation": 8814, "user_id": 560065, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/pJ3Ab.jpg?s=128&g=1", "display_name": "jwbensley", "link": "https://stackoverflow.com/users/560065/jwbensley"}, "edited": false, "score": 0, "creation_date": 1529255025, "post_id": 29377350, "comment_id": 88797241, "body": "@maxihaptop - It would really help if you explained your code (method)."}, {"owner": {"reputation": 3267, "user_id": 339937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FDw7.jpg?s=128&g=1", "display_name": "olegarch", "link": "https://stackoverflow.com/users/339937/olegarch"}, "reply_to_user": {"reputation": 8814, "user_id": 560065, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/pJ3Ab.jpg?s=128&g=1", "display_name": "jwbensley", "link": "https://stackoverflow.com/users/560065/jwbensley"}, "edited": false, "score": 0, "creation_date": 1529291315, "post_id": 29377350, "comment_id": 88804279, "body": "Cyclic shift hash-accumulator, with applying non-linear function by  Substitute Block."}], "tags": [], "owner": {"reputation": 3267, "user_id": 339937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FDw7.jpg?s=128&g=1", "display_name": "olegarch", "link": "https://stackoverflow.com/users/339937/olegarch"}, "is_accepted": true, "score": 1, "last_activity_date": 1529291359, "last_edit_date": 1529291359, "creation_date": 1427831554, "answer_id": 29377350, "question_id": 29258860, "link": "https://stackoverflow.com/questions/29258860/hash-function-for-5-tuple-ipv4-6/29377350#29377350", "title": "hash function for 5 tuple - ipv4/6", "body": "<p>For IPV4 I used following function:</p>\n\n<pre><code>uint32_t *S_block = ... \n// pointer to 1KB+ pre-defined random values.\n// It can be reference to program code segment, or to long \"help\" string.\n// For example, see: https://github.com/EvgenijM86/emercoin/blob/master/src/stun.cpp#L338\n\nuint32_t HashIPV4(uint32_t x) {\n  x += x &gt;&gt; 13;\n  for(int i = 0; i &lt; 7; i++)\n    x += ((x &lt;&lt; 11) | (x &gt;&gt; (32 - 11))) ^ S_block[(unsigned char)x];\n  x += x &gt;&gt; 17;\n  return x;\n}\n</code></pre>\n\n<p>For IPV6, you can use modification:</p>\n\n<pre><code>uint32_t HashIPV6(uint32_t *p) {\n  x = 0x55555555;\n  for(int i = 0; i &lt; 28; i++) {\n    x = ((x &lt;&lt; 11) | (x &gt;&gt; (32 - 11))); \n    x += p[i &amp; 3] ^ S_block[(unsigned char)x];\n  }\n  x += x &gt;&gt; 33;\n  return x;\n}\n</code></pre>\n"}], "owner": {"reputation": 667, "user_id": 472623, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e154aeb64be4097047f8cb541abd0ec?s=128&d=identicon&r=PG&f=1", "display_name": "embedded", "link": "https://stackoverflow.com/users/472623/embedded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2130, "favorite_count": 0, "accepted_answer_id": 29377350, "answer_count": 1, "score": 2, "last_activity_date": 1529291359, "creation_date": 1427294615, "last_edit_date": 1495541577, "question_id": 29258860, "link": "https://stackoverflow.com/questions/29258860/hash-function-for-5-tuple-ipv4-6", "title": "hash function for 5 tuple - ipv4/6", "body": "<p>I'm looking for an efficient hash function for ipv4/6 (it can be 2 separated functions, one for each family)</p>\n\n<p>I came across this question: <a href=\"https://stackoverflow.com/questions/3215232/hash-function-for-src-dest-ip-port\">hash function for src dest ip + port</a></p>\n\n<p>How do I extend it to support ipv6?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "shell", "osx-mavericks", "argc"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1427293664, "post_id": 29258415, "comment_id": 46719262, "body": "Look up &quot;globbing&quot; BTW: try <code>&#47;bin&#47;echo abc def *</code> , instead of your program."}, {"owner": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 1, "creation_date": 1427293807, "post_id": 29258415, "comment_id": 46719359, "body": "The * is probably interpreted by your shell and replaced with all the files in your current directory."}, {"owner": {"reputation": 331, "user_id": 2672154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7726fd20e41bcb588f61e7172c0708?s=128&d=identicon&r=PG", "display_name": "tf3", "link": "https://stackoverflow.com/users/2672154/tf3"}, "edited": false, "score": 0, "creation_date": 1427293810, "post_id": 29258415, "comment_id": 46719361, "body": "thanks. but whats the workaround?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427293830, "post_id": 29258415, "comment_id": 46719378, "body": "This is something your OS does before passing the parameters. You should probably tag this question with the relevant OS (I&#39;m guessing Linux). As a side note, avoid K&amp;R, it is completely outdated, filled with errors and bad programming practice."}, {"owner": {"reputation": 42418, "user_id": 912144, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/d17cb5b704821f11179ce281b8cae25e?s=128&d=identicon&r=PG", "display_name": "Shahbaz", "link": "https://stackoverflow.com/users/912144/shahbaz"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427293971, "post_id": 29258415, "comment_id": 46719471, "body": "@Lundin, not the OS, but the shell. You could run <code>bash</code> under cygwin and get the same behavior."}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427295017, "post_id": 29258415, "comment_id": 46720264, "body": "@Lundin: Can you please explain why K&amp;R is outdated, filled with errors and bad programming practice? I opened a question at <a href=\"http://stackoverflow.com/questions/29258883/why-is-the-kr-book-outdated-filled-with-errors-and-bad-programming-practice\" title=\"why is the kr book outdated filled with errors and bad programming practice\">stackoverflow.com/questions/29258883/&hellip;</a> and it seems that at least some people disagree with your claim."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 0, "creation_date": 1427354616, "post_id": 29258415, "comment_id": 46745621, "body": "@juhist <a href=\"http://stackoverflow.com/questions/13159564/explain-this-implementation-of-malloc-from-the-kr-book\">See this</a> for example. To briefly sum up why the book is bad: 1) it is filled with bad programming practice and bad program design, 2) it is filled with bugs, errors and typos, see the book&#39;s errata which is several pages, 3) It has been outdated with the release of Amendment 1 to C90, then outdated completely with the release of C99, then outdated again with the release of C11, 4) there are countless religious fanatics encouraging the use of the book for no rational reason."}], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 2672154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7726fd20e41bcb588f61e7172c0708?s=128&d=identicon&r=PG", "display_name": "tf3", "link": "https://stackoverflow.com/users/2672154/tf3"}, "edited": false, "score": 0, "creation_date": 1427294260, "post_id": 29258536, "comment_id": 46719679, "body": "Yes you are right i am running bash and I tried this expression. : ./program abc def &quot;*&quot; and it gives argc equal to 4 alright!"}, {"owner": {"reputation": 42418, "user_id": 912144, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/d17cb5b704821f11179ce281b8cae25e?s=128&d=identicon&r=PG", "display_name": "Shahbaz", "link": "https://stackoverflow.com/users/912144/shahbaz"}, "reply_to_user": {"reputation": 331, "user_id": 2672154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7726fd20e41bcb588f61e7172c0708?s=128&d=identicon&r=PG", "display_name": "tf3", "link": "https://stackoverflow.com/users/2672154/tf3"}, "edited": false, "score": 0, "creation_date": 1427294981, "post_id": 29258536, "comment_id": 46720226, "body": "@tectonicfury, globbing is a very useful feature. You just need to learn it so you can both use it effectively and not get into problems like you have."}, {"owner": {"reputation": 331, "user_id": 2672154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7726fd20e41bcb588f61e7172c0708?s=128&d=identicon&r=PG", "display_name": "tf3", "link": "https://stackoverflow.com/users/2672154/tf3"}, "edited": false, "score": 0, "creation_date": 1427295271, "post_id": 29258536, "comment_id": 46720437, "body": "i used linux at some point where i used to do commands like &#39;rm *.txt&#39; or &#39;ls *.txt&#39; so i am familiar with this behaviour but i didn&#39;t think that it would act this way even if I&#39;m running a c program.."}, {"owner": {"reputation": 42418, "user_id": 912144, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/d17cb5b704821f11179ce281b8cae25e?s=128&d=identicon&r=PG", "display_name": "Shahbaz", "link": "https://stackoverflow.com/users/912144/shahbaz"}, "reply_to_user": {"reputation": 331, "user_id": 2672154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7726fd20e41bcb588f61e7172c0708?s=128&d=identicon&r=PG", "display_name": "tf3", "link": "https://stackoverflow.com/users/2672154/tf3"}, "edited": false, "score": 0, "creation_date": 1427295604, "post_id": 29258536, "comment_id": 46720661, "body": "@tectonicfury, <code>rm</code> and <code>ls</code> are also just c programs ;) Anyway, so bottom line of what I&#39;m saying is that <code>*</code> is expanded by the shell, and the application (regardless of the language) has no idea the parameters came from an expanded <code>*</code>."}, {"owner": {"reputation": 331, "user_id": 2672154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7726fd20e41bcb588f61e7172c0708?s=128&d=identicon&r=PG", "display_name": "tf3", "link": "https://stackoverflow.com/users/2672154/tf3"}, "edited": false, "score": 0, "creation_date": 1427295781, "post_id": 29258536, "comment_id": 46720807, "body": "Thanks a ton for this info now its clear to me. perfect. theres a lot i need to learn lol."}], "tags": [], "owner": {"reputation": 42418, "user_id": 912144, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/d17cb5b704821f11179ce281b8cae25e?s=128&d=identicon&r=PG", "display_name": "Shahbaz", "link": "https://stackoverflow.com/users/912144/shahbaz"}, "is_accepted": true, "score": 9, "last_activity_date": 1427294193, "last_edit_date": 1427294193, "creation_date": 1427293827, "answer_id": 29258536, "question_id": 29258415, "link": "https://stackoverflow.com/questions/29258415/argc-giving-erroneous-value-in-c-program/29258536#29258536", "title": "argc giving erroneous value in C program", "body": "<p>Shells have a feature called <a href=\"https://en.wikipedia.org/wiki/Glob_%28programming%29\" rel=\"nofollow\">globbing</a>, where they expand certain patterns, such as <code>*</code> to the matching files. If in the current directory you have the following:</p>\n\n<pre><code>file1 file2 somethingelse dir1\n</code></pre>\n\n<p>then calling:</p>\n\n<pre><code>any_program *\n</code></pre>\n\n<p>will be equivalent to:</p>\n\n<pre><code>any_program file1 file2 somethingelse dir1\n</code></pre>\n\n<p>Or if you do:</p>\n\n<pre><code>any_program fi*\n</code></pre>\n\n<p>it will be equivalent to:</p>\n\n<pre><code>any_program file1 file2\n</code></pre>\n\n<p>This is a feature of the shell. Your C program is well-behaved.</p>\n\n<hr>\n\n<p>Since shells are different, let's assume you are using <code>bash</code>. To prevent <code>bash</code> from performing expansions, you should quote the argument. For example:</p>\n\n<pre><code>any_program \"fi*\"\n</code></pre>\n\n<p>will actually pass <code>fi*</code> to your program, without expanding it to <code>file1 file2</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": false, "score": 3, "last_activity_date": 1427293974, "creation_date": 1427293974, "answer_id": 29258596, "question_id": 29258415, "link": "https://stackoverflow.com/questions/29258415/argc-giving-erroneous-value-in-c-program/29258596#29258596", "title": "argc giving erroneous value in C program", "body": "<p>The commandline interpretter processes the <code>*</code> character as a wildcard before passing the arguments to your program, just the same as it does if you type <code>DIR *</code>.</p>\n\n<p>The simple solution is to devise a meaningful parameter that does not get interpretted.</p>\n"}, {"tags": [], "owner": {"reputation": 2815, "user_id": 4350586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IvPNx.png?s=128&g=1", "display_name": "Dmitry Grigoryev", "link": "https://stackoverflow.com/users/4350586/dmitry-grigoryev"}, "is_accepted": false, "score": 0, "last_activity_date": 1427294300, "creation_date": 1427294300, "answer_id": 29258731, "question_id": 29258415, "link": "https://stackoverflow.com/questions/29258415/argc-giving-erroneous-value-in-c-program/29258731#29258731", "title": "argc giving erroneous value in C program", "body": "<p>You can prevent * from expanding into file names by putting it into single quotes, i.e.</p>\n\n<pre><code>./program 2 4 '*'\n</code></pre>\n\n<p>This way your program will receive 3 input arguments with values \"2\", \"4\" and \"*\" in terms of C strings.</p>\n"}, {"tags": [], "owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "is_accepted": false, "score": 2, "last_activity_date": 1427294351, "creation_date": 1427294351, "answer_id": 29258745, "question_id": 29258415, "link": "https://stackoverflow.com/questions/29258415/argc-giving-erroneous-value-in-c-program/29258745#29258745", "title": "argc giving erroneous value in C program", "body": "<p>If you're using bash, start the shell with the <code>-f</code> switch to turn off expansion of things like <code>*</code></p>\n\n<p><code>bash -f</code></p>\n"}], "owner": {"reputation": 331, "user_id": 2672154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f7726fd20e41bcb588f61e7172c0708?s=128&d=identicon&r=PG", "display_name": "tf3", "link": "https://stackoverflow.com/users/2672154/tf3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 29258536, "answer_count": 4, "score": 3, "last_activity_date": 1427294354, "creation_date": 1427293556, "last_edit_date": 1427294354, "question_id": 29258415, "link": "https://stackoverflow.com/questions/29258415/argc-giving-erroneous-value-in-c-program", "title": "argc giving erroneous value in C program", "body": "<p>I want to enter some command line arguments at run time. Like</p>\n\n<pre><code>./program abc def ghi\n</code></pre>\n\n<p><code>argc</code> would be 4 in this case. No problem in this. But if I do</p>\n\n<pre><code>./program abc def *\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>./program * abc def\n</code></pre>\n\n<p>the variable <code>argc</code> gives me a value far larger than 4.</p>\n\n<p>On printing the entire <code>argv</code> array (leaving aside the 0th argument; <code>./program</code>) as strings, I am given a list where the first two elements are <code>abc</code> and <code>def</code> and the others are all file names of the files contained in the working directory.</p>\n\n<p>I am trying to learn C from K&amp;R. I was trying to make an RPN calculator where we can give expressions like <code>./program 2 4 *</code>.</p>\n\n<p>What is the reason for this? Or am I wrong somewhere?</p>\n"}, {"tags": ["c", "struct", "null", "zero"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1427292956, "post_id": 29258128, "comment_id": 46718738, "body": "Why do you expect the code to enter the <code>if</code> statement if <code>G[s].a==0</code>? NULL and 0 are guaranteed to be compatible and have the same meaning when it comes to pointers (both give a null pointer)."}, {"owner": {"reputation": 69, "user_id": 4712451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NAmKn.jpg?s=128&g=1", "display_name": "cip", "link": "https://stackoverflow.com/users/4712451/cip"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427293204, "post_id": 29258128, "comment_id": 46718906, "body": "i want to test if an element is different to -858993460 and in my programme i want the zero be like a normal integer"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427293295, "post_id": 29258128, "comment_id": 46718977, "body": "Umm... and how does that make any sense, given the code you have posted?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427293472, "post_id": 29258128, "comment_id": 46719126, "body": "How is the <code>struct</code> declared? I can&#39;t see how you can test <code>G[s].b == 2</code> and <code>G[s].b != NULL</code> without getting a compiler warning."}, {"owner": {"reputation": 69, "user_id": 4712451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NAmKn.jpg?s=128&g=1", "display_name": "cip", "link": "https://stackoverflow.com/users/4712451/cip"}, "edited": false, "score": 0, "creation_date": 1427293792, "post_id": 29258128, "comment_id": 46719350, "body": "the compiler are fine but the zero and NULL are the same in c so i do that &quot;not (A or B)&quot; is the same as &quot;(not A) and (not B)&quot;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1427293903, "post_id": 29258128, "comment_id": 46719425, "body": "<code>0</code> and <code>NULL</code> are only the same when they are pointer values. Assigning <code>NULL</code> to an <code>int</code> gives a compiler warning, as does testing if an <code>int</code> is <code>NULL</code>."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 4712504, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/156440eabca0467c29e72e3377433f78?s=128&d=identicon&r=PG", "display_name": "crazyjoecus", "link": "https://stackoverflow.com/users/4712504/crazyjoecus"}, "is_accepted": true, "score": 1, "last_activity_date": 1427293196, "creation_date": 1427293196, "answer_id": 29258282, "question_id": 29258128, "link": "https://stackoverflow.com/questions/29258128/structure-element-test-to-null/29258282#29258282", "title": "Structure element test to null", "body": "<p>re write your logic with positive logic instead of using not null.</p>\n\n<p>\"not (A or B)\" is the same as \"(not A) and (not B)\".</p>\n"}], "owner": {"reputation": 69, "user_id": 4712451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NAmKn.jpg?s=128&g=1", "display_name": "cip", "link": "https://stackoverflow.com/users/4712451/cip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 29258282, "answer_count": 1, "score": -2, "last_activity_date": 1427293196, "creation_date": 1427292773, "question_id": 29258128, "link": "https://stackoverflow.com/questions/29258128/structure-element-test-to-null", "title": "Structure element test to null", "body": "<p>I want to test an element for <code>structure</code> if he is empty or not \nbut when (ex.) the <code>G[s].a=0</code> and <code>G[s].b=2</code>\nhe never go into the <code>if</code> ,, any help ?</p>\n\n<pre><code> if (G[s].a != NULL &amp;&amp; G[s].b != NULL) \n</code></pre>\n"}, {"tags": ["c", "identifier", "variable-names", "cdecl"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1427293215, "post_id": 29258074, "comment_id": 46718916, "body": "Did you try looking at its <a href=\"http://cdecl.org/files/cdecl-blocks-2.5.tar.gz\" rel=\"nofollow noreferrer\">source code</a> to see how it interprets such identifiers?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1427355473, "post_id": 29258074, "comment_id": 46745923, "body": "@RemyLebeau , The source code is too large. It&#39;s very difficult to read and understand it."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1427424491, "post_id": 29285944, "comment_id": 46781638, "body": "<code>&quot;returning&quot;</code> is allowed if you are entering English text to translate into code, eg: <code>function returning int</code> translates to <code>int f()</code>.  So it makes sense for <code>&quot;pointer&quot;</code> and <code>&quot;array&quot;</code> to be reserved since they are used in English text as well.  But <code>&quot;ptr&quot;</code>?  Oh wait, I just tried <code>declare foo as array 5 of ptr to int</code> and it translated to <code>int *foo[5]</code>, so I guess cdecl treats <code>&quot;ptr&quot;</code> as an alias for <code>&quot;pointer&quot;</code>."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1427424745, "post_id": 29285944, "comment_id": 46781681, "body": "That makes sense. Please add that into your answer."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1427393794, "creation_date": 1427393794, "answer_id": 29285944, "question_id": 29258074, "link": "https://stackoverflow.com/questions/29258074/what-are-the-variable-names-that-are-disallowed-in-cdecl-other-than-the-ones-tha/29285944#29285944", "title": "What are the variable names that are disallowed in cdecl other than the ones that cannot be used in any program?", "body": "<p><code>pointer</code> and <code>array</code> are in cdecl's list of reserved keywords:</p>\n\n<pre><code>char *keywords[] = {\n  \"function\",\n  \"returning\",\n  \"array\",     // &lt;--\n  \"pointer\",   // &lt;--\n  \"reference\",\n  \"member\",\n  \"const\",\n  \"volatile\",\n  \"noalias\",\n  \"struct\",\n  \"union\",\n  \"enum\",\n  \"class\",\n  \"extern\",\n  \"static\",\n  \"auto\",\n  \"register\",\n  \"short\",\n  \"long\",\n  \"signed\",\n  \"unsigned\",\n  \"char\",\n  \"float\",\n  \"double\",\n  \"void\",\n  NULL\n};\n</code></pre>\n\n<p>As for <code>ptr</code>, I don't know why cdecl thinks that is invalid.  Entering the following expression into cdecl also fails:</p>\n\n<blockquote>\n  <p>declare ptr as int</p>\n</blockquote>\n\n<p>But this works:</p>\n\n<blockquote>\n  <p>declare ptr1 as int</p>\n</blockquote>\n\n<p>So clearly it does not like <code>ptr</code>, either.</p>\n"}], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 29285944, "answer_count": 1, "score": 0, "last_activity_date": 1427393794, "creation_date": 1427292646, "question_id": 29258074, "link": "https://stackoverflow.com/questions/29258074/what-are-the-variable-names-that-are-disallowed-in-cdecl-other-than-the-ones-tha", "title": "What are the variable names that are disallowed in cdecl other than the ones that cannot be used in any program?", "body": "<p>I've been playing around with <a href=\"http://cdecl.org/\" rel=\"nofollow\">cdecl</a> and I've noticed that some names are not allowed as identifiers in it although GCC compiles them perfectly.</p>\n\n<p>For example, if I write</p>\n\n<blockquote>\n  <p>int ptr;</p>\n</blockquote>\n\n<p>or</p>\n\n<blockquote>\n  <p>int pointer;</p>\n</blockquote>\n\n<p>or</p>\n\n<blockquote>\n  <p>int array;</p>\n</blockquote>\n\n<p>cdecl gives a \"syntax error\" but when I use it in a program, GCC compiles them without any problems. So, there are some identifiers that are not permitted in cdecl.</p>\n\n<p>Which are the identifiers that cannot be used in cdecl, but can be used in a program(i.e, the program compiles)? Why aren't they permitted?</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1427291936, "post_id": 29257757, "comment_id": 46717996, "body": "first of all, find the path of the headers of the openssl library and pass it to gcc with the <code>-I</code> parameter. Then go on and do the same for the lib files (or switch to a build system such as cmake that handles this awkward stuff for you: <a href=\"http://www.cmake.org/cmake/help/v3.0/module/FindOpenSSL.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.0/module/FindOpenSSL.html</a>)"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1427291942, "post_id": 29257757, "comment_id": 46718002, "body": "You need to find the path that contains <code>openssl</code> path and add <code>-IThePathYouFound</code> to <code>CFLAGS</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1427292218, "post_id": 29257757, "comment_id": 46718223, "body": "Those should be installed in standard locations and should not need a special <code>-I</code> flag. Do you have the openssl header files installed? On most distributions they don&#39;t come in the normal package and you need the matching <code>-dev</code> or <code>-devel</code> package."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1427292673, "post_id": 29257757, "comment_id": 46718526, "body": "If you are on Linux, you probably need to install <code>libssl-dev</code>, Try <code>sudo apt-get install libssl-dev</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1159, "user_id": 3347966, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/SDc9F.png?s=128&g=1", "display_name": "Jean", "link": "https://stackoverflow.com/users/3347966/jean"}, "is_accepted": false, "score": 1, "last_activity_date": 1427293536, "creation_date": 1427293536, "answer_id": 29258401, "question_id": 29257757, "link": "https://stackoverflow.com/questions/29257757/c-compile-openssl-project/29258401#29258401", "title": "C : Compile openSSL project", "body": "<p>The problem was that openssl was indeed in installed, but not the <code>-devel</code> packages.</p>\n\n<p>As I am on Opensuse, here are the packages needed, in Yast : \n<img src=\"https://i.stack.imgur.com/UWtgW.png\" alt=\"enter image description here\"></p>\n\n<p>Thanks to @Etan Reisner and @Marian</p>\n"}], "owner": {"reputation": 1159, "user_id": 3347966, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/SDc9F.png?s=128&g=1", "display_name": "Jean", "link": "https://stackoverflow.com/users/3347966/jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427293536, "creation_date": 1427291803, "question_id": 29257757, "link": "https://stackoverflow.com/questions/29257757/c-compile-openssl-project", "title": "C : Compile openSSL project", "body": "<p>I'm trying to code some c code with openssl...</p>\n\n<p>Let's say I have a file <code>hello.c</code> which use openssl. </p>\n\n<p><strong>hello.c</strong></p>\n\n<pre><code>...\n#include &lt;openssl/rand.h&gt;\n#include &lt;openssl/ssl.h&gt;\n#include &lt;openssl/err.h&gt;\n...\n</code></pre>\n\n<p>Here is my <code>makefile</code> :</p>\n\n<p><strong>makefile</strong></p>\n\n<pre><code>CC=gcc\nCFLAGS=-W -Wall -ansi -pedantic\nLDFLAGS=\nEXEC=hello\n\nall: $(EXEC)\n\nhello: hello.o main.o\n    $(CC) -o $@ $^ $(LDFLAGS)\n\n%.o: %.c\n    $(CC) -o $@ -c $&lt; $(CFLAGS)\n\nrun:\n    ./$(EXEC)\n\n.PHONY: clean mrproper\n\nclean:\n    rm -rf *.o\n\nmrproper: clean\n    rm -rf $(EXEC)`\n</code></pre>\n\n<p>When I run the makefile I get this error :</p>\n\n<pre><code>hello.c:4:26: fatal error: openssl/rand.h no such file or directory\n #include &lt;openssl/rand.h&gt;\n</code></pre>\n\n<p>What must I add to the makefile so the compilation works ?\nI wasn't able to find any clear example.</p>\n"}, {"tags": ["c++", "c", "gcc", "g++", "arm"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1427291889, "post_id": 29257724, "comment_id": 46717969, "body": "You need a cross-compiler."}, {"owner": {"reputation": 1861, "user_id": 722695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02e5730386e784c40ab552297e5c3f95?s=128&d=identicon&r=PG", "display_name": "Roby", "link": "https://stackoverflow.com/users/722695/roby"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427292323, "post_id": 29257724, "comment_id": 46718311, "body": "@EOF, thanks i only found cross-armv7hl-gcc49 this package or cross-armv6hl-gcc49 but i use a cortex 9a :-/"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427292451, "post_id": 29257724, "comment_id": 46718379, "body": "ARM instruction-set version numbering is confusing. I <i>think</i> cortex9a is arm7, but don&#39;t quote me on that. edit: Wikipedia agrees, it&#39;s arm7a. (confused yet?)"}, {"owner": {"reputation": 1861, "user_id": 722695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02e5730386e784c40ab552297e5c3f95?s=128&d=identicon&r=PG", "display_name": "Roby", "link": "https://stackoverflow.com/users/722695/roby"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427292835, "post_id": 29257724, "comment_id": 46718629, "body": "@EOF, yes :D the package manager from opensuse really confuses me too :) i think i will try to build it from scratch :-/"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 1, "creation_date": 1427292893, "post_id": 29257724, "comment_id": 46718679, "body": "Have a look at <a href=\"http://crosstool-ng.org/\" rel=\"nofollow noreferrer\">crosstool-ng</a> for building a cross-compiler; it takes away some of the headache."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1427292935, "post_id": 29257724, "comment_id": 46718715, "body": "Most of the headache, actually :)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427293151, "post_id": 29257724, "comment_id": 46718869, "body": "It&#39;s not the package-manager&#39;s fault. It&#39;s ARM&#39;s stupid nomenclature. The names for their micro-architectures are not properly name-spaced from the instruction-set version names."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427293232, "post_id": 29257724, "comment_id": 46718930, "body": "Any reason why you can&#39;t use Freescale&#39;s free compiler? I&#39;m sure there must be a way to use it as a command-line tool (I can understand why anyone would want to avoid Eclipse)."}, {"owner": {"reputation": 1861, "user_id": 722695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02e5730386e784c40ab552297e5c3f95?s=128&d=identicon&r=PG", "display_name": "Roby", "link": "https://stackoverflow.com/users/722695/roby"}, "edited": false, "score": 0, "creation_date": 1427312820, "post_id": 29257724, "comment_id": 46732087, "body": "thanks for the many replays ! for learning ive tried it with this tutorial: <a href=\"http://www.lowlevel.eu/wiki/ARM_Cross-Compiler\" rel=\"nofollow noreferrer\">lowlevel.eu/wiki/ARM_Cross-Compiler</a> all went good. but now i tried to compile with arm-unknown-linux-gnueabi-g++ i get fatal error: stdio.h: No such file or directory some ideas ? :-/"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1427315176, "post_id": 29257724, "comment_id": 46733395, "body": "Unless you specifically want to fiddle about building toolchains and libraries, I&#39;d suggest using prebuilt binary distributions with all the libraries, search paths, etc. pre-configured - e.g. <a href=\"http://www.linaro.org/downloads/\" rel=\"nofollow noreferrer\">the Linaro ones</a>"}], "owner": {"reputation": 1861, "user_id": 722695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02e5730386e784c40ab552297e5c3f95?s=128&d=identicon&r=PG", "display_name": "Roby", "link": "https://stackoverflow.com/users/722695/roby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1391, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1427448948, "creation_date": 1427291694, "last_edit_date": 1495540608, "question_id": 29257724, "link": "https://stackoverflow.com/questions/29257724/g-compile-from-x86-for-arm-cortex", "title": "g++ Compile from x86 for ARM Cortex", "body": "<p>i want to compile from my workstation for a ARM Cortex-9a.\nI found this  <a href=\"https://stackoverflow.com/questions/14962447/gcc-options-for-a-freescale-imx6q-arm-processor\">gcc options for a freescale iMX6q ARM processor</a></p>\n\n<p>If I'm right, it's possible to do this ?\nI've using  </p>\n\n<pre><code>gcc --version\ngcc (SUSE Linux) 4.8.1 20130909 [gcc-4_8-branch revision 202388]\n</code></pre>\n\n<p>and want to compile with the flags listed (<a href=\"https://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html#ARM-Options\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<pre><code>g++ -O3 -mtune=cortex-a9 main.cc -o main.o -c\nmain.cc:1:0: error: bad value (cortex-a9) for -mtune= switch\n #include &lt;stdio.h&gt;\n ^\n</code></pre>\n\n<p>do i really need the toolchains ? I thought that they are only for \"simpler\" usage ?</p>\n\n<p><strong>EDIT</strong>\nfor me, using crosstools-ng is the best &amp; easiest way</p>\n"}, {"tags": ["c", "memory-management"], "answers": [{"tags": [], "owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "is_accepted": true, "score": 2, "last_activity_date": 1427291317, "creation_date": 1427291317, "answer_id": 29257575, "question_id": 29257469, "link": "https://stackoverflow.com/questions/29257469/c-compiler-overlap-memory-error/29257575#29257575", "title": "c compiler, overlap memory error", "body": "<p>This has nothing to do with your code being incorrect.  </p>\n\n<p>These are linker errors (it even tells you <code>ld.exe</code> is the program complaining) about output sections overlapping.  This <em>probably</em> means you just ran out of space, but could also mean the linker directive file your project is using has some problems. </p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4560466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/068cc19b7a0dc57eab0cf84eda81147a?s=128&d=identicon&r=PG&f=1", "display_name": "Jays", "link": "https://stackoverflow.com/users/4560466/jays"}, "edited": false, "score": 0, "creation_date": 1427296359, "post_id": 29258346, "comment_id": 46721251, "body": "Thanks for the info I was looking for."}, {"owner": {"reputation": 13, "user_id": 4560466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/068cc19b7a0dc57eab0cf84eda81147a?s=128&d=identicon&r=PG&f=1", "display_name": "Jays", "link": "https://stackoverflow.com/users/4560466/jays"}, "edited": false, "score": 0, "creation_date": 1427296875, "post_id": 29258346, "comment_id": 46721641, "body": "Thanks for the info I was looking for. I had flexibility to adjust where .text and .data could go. This fixed the issue I had. However while trying this out, once I got &#39;overlap error&#39; due to .ctors. What is .ctors? On another try, the code compiled, but when downloading to the board, I got memory verification error, after memory had been downloaded. Why this would have occurred? BTW the RAM is 4KB, and as per compiler, the code is 3KB."}, {"owner": {"reputation": 13, "user_id": 4560466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/068cc19b7a0dc57eab0cf84eda81147a?s=128&d=identicon&r=PG&f=1", "display_name": "Jays", "link": "https://stackoverflow.com/users/4560466/jays"}, "edited": false, "score": 0, "creation_date": 1427299149, "post_id": 29258346, "comment_id": 46723296, "body": "Never mind about the .ctors. Google helped there. Though I don&#39;t get why memory download worked, but the verification not, in the context of the mentioned issue. Thanks again."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 13, "user_id": 4560466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/068cc19b7a0dc57eab0cf84eda81147a?s=128&d=identicon&r=PG&f=1", "display_name": "Jays", "link": "https://stackoverflow.com/users/4560466/jays"}, "edited": false, "score": 0, "creation_date": 1427315067, "post_id": 29258346, "comment_id": 46733334, "body": "Did you fix all the overlap messages?  Maybe the addresses you assigned actually are not valid for the hardware. There should be documentation that came with the system describing this."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1427293380, "creation_date": 1427293380, "answer_id": 29258346, "question_id": 29257469, "link": "https://stackoverflow.com/questions/29257469/c-compiler-overlap-memory-error/29258346#29258346", "title": "c compiler, overlap memory error", "body": "<p>When you add in this line, it causes the size of the compiled code to be too big for the memory area that you are loading the code into.</p>\n\n<p>You can see from the first line of the linker error message that <code>.text</code> (the code) is loaded at <code>0x500</code>, and <code>.data</code> (the non-zero static variables) is loaded at <code>0xa00</code>.  However, the .text section is so long that it is too big to fit in the space between <code>0x500</code> and <code>0xa00</code>.</p>\n\n<p>To fix this you will either need to:</p>\n\n<ul>\n<li>Make your code smaller</li>\n<li>Increase the amount of space available for <code>.text</code></li>\n</ul>\n\n<p>To do the first one, you could use <code>-Os</code> or similar compiler option to compile for minimum code size ; or manually rewrite your code to be smaller.</p>\n\n<p>For the second one you really need to understand the hardware you are loading the code into. Is it a hardware requirement that code goes at <code>0x500</code> and data goes at <code>0xa00</code>?  If not, then you may be able to load the code and/or data into different addresses.  </p>\n\n<p>These addresses are configured in your linker script (this may be hardcoded into the makefile or it may be an actual file somewhere). Hopefully the hardware device came with documentation that explains how much memory it has and where you're allowed to load your code to.</p>\n"}], "owner": {"reputation": 13, "user_id": 4560466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/068cc19b7a0dc57eab0cf84eda81147a?s=128&d=identicon&r=PG&f=1", "display_name": "Jays", "link": "https://stackoverflow.com/users/4560466/jays"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1987, "favorite_count": 0, "accepted_answer_id": 29257575, "answer_count": 2, "score": 1, "last_activity_date": 1427293380, "creation_date": 1427291073, "last_edit_date": 1427291467, "question_id": 29257469, "link": "https://stackoverflow.com/questions/29257469/c-compiler-overlap-memory-error", "title": "c compiler, overlap memory error", "body": "<p>Below is a portion of the C code I am using:</p>\n\n<pre><code>pushbutton_ISR()\n{\n\n    int press;\n    int key_pressed;\n\n    press = *(KEYS_ptr + 3);                // read the pushbutton Edge Det Register interrupt register\n    *(KEYS_ptr + 3) = 0;                    // Clear the Edge Det registers. \n\n    if (press &amp; 0x1) {                      // KEY1\n        key_pressed = KEY1;\n        //sum = sum + *NEW_NUMBER; \n        }\n    else if (press &amp; 0x2)   {               // KEY2\n        key_pressed = KEY2;\n        *GREEN_LEDS = *NEW_NUMBER;\n         sum = sum + *NEW_NUMBER;\n        *RED_LEDS = sum;\n        }\n    else                                    // i.e. (press &amp; 0x8), which is KEY3\n        sum = *(NEW_NUMBER);                // Read the SW slider switch values; store in pattern\n\n    return;\n}\n</code></pre>\n\n<p>The compiler compiles this fine and the code appears to run (on an Altera board) fine. However, when I change the first <code>if</code> statement to:</p>\n\n<pre><code>if (press &amp; 0x1) {                      // KEY1\n    //key_pressed = KEY1;\n    sum = sum + *NEW_NUMBER; \n}\n</code></pre>\n\n<p>the compiler gives the following error messages:</p>\n\n<pre><code>.../nios2-elf/bin/ld.exe: section .data loaded at [00000a00,00000e0f] overlaps section .text loaded at [00000500,00000a0f]\n.../nios2-elf/bin/ld.exe: section .ctors loaded at [00000a10,00000a13] overlaps section .data loaded at [00000a00,00000e0f]\n.../nios2-elf/bin/ld.exe: Z:/Projects/Altera/3215_W15_LabB/Part2/from_handout.elf: section .data vma 0xa00 overlaps previous sections\n.../nios2-elf/bin/ld.exe: Z:/Projects/Altera/3215_W15_LabB/Part2/from_handout.elf: section .ctors vma 0xa10 overlaps previous sections\n.../nios2-elf/bin/ld.exe: Z:/Projects/Altera/3215_W15_LabB/Part2/from_handout.elf: section .rodata vma 0xa14 overlaps previous sections\n.../nios2-elf/bin/ld.exe: Z:/Projects/Altera/3215_W15_LabB/Part2/from_handout.elf: section .sdata vma 0xe10 overlaps previous sections\n.../nios2-elf/bin/ld.exe: Z:/Projects/Altera/3215_W15_LabB/Part2/from_handout.elf: section .sbss vma 0xe18 overlaps previous sections\n</code></pre>\n\n<p>Could you please advise me about the reasons for these errors, and how to resolve them.</p>\n"}, {"tags": ["c", "string", "gcc", "binary"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427291723, "post_id": 29257313, "comment_id": 46717859, "body": "On which operating system? Please edit your question to improve it!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1427292463, "post_id": 29257313, "comment_id": 46718389, "body": "There isn&#39;t a standard way to do it.  You can use any manual technique you like, presumably encrypting or masking the text of the string before compiling and and decrypting or unmasking the text at runtime before making the call to the function.  But it is generally speaking more work than it is worth (and the security provided by it is rather minimal),"}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1427291320, "post_id": 29257483, "comment_id": 46717542, "body": "<code>s&#47;encryption&#47;encraption</code>. There&#39;s a gnu C function for that: <code>memfrob()</code>."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427297639, "post_id": 29257483, "comment_id": 46722204, "body": "@EOF, thanks for the hint. I would however avoid using <code>memfrob()</code> because each byte is xored with the constant 42. It&#39;s too easy to undo in a brute force way."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427306097, "post_id": 29257483, "comment_id": 46727961, "body": "OMG, you&#39;re right! All my encryption schemes are plummeting down, if only I&#39;d have selected a different single-byte key for my mono-alphabetic encryption every time. Oh well, too late now."}], "tags": [], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "is_accepted": false, "score": 1, "last_activity_date": 1427295423, "last_edit_date": 1427295423, "creation_date": 1427291105, "answer_id": 29257483, "question_id": 29257313, "link": "https://stackoverflow.com/questions/29257313/c-suppress-system-calls-from-binary/29257483#29257483", "title": "C: Suppress system calls from binary", "body": "<p>You could \"encrypt\" the string and store the crypted version. Then when the program needs the ASCII string, decrypt it.  </p>\n\n<p>The most simple encrypter is to do a bitwise xor with a random pattern of bits. To decrypt simply do the same bitwise xor with exacly the same random pattern of bits. </p>\n\n<p>You will need to save the string length along with the encrypted byte sequence.</p>\n\n<p>Here are simple encryption and decryption functions. These are not cryptographically secure, but good enough for the goal.\nYou can use a global constant as key. </p>\n\n<pre><code>void encrypt(char* str, unsigned long key)\n{\n  unsigned char* p = (unsigned char*)str, c;\n  do\n  {\n    key = key * 214013L + 2531011L;\n    c = *p;\n    *p ^= (unsigned char)(key&gt;&gt;24);\n    ++p;\n  }\n  while(c);\n}\n\nvoid decrypt(char* str, unsigned long key)\n{\n  unsigned char* p = (unsigned char*)str;\n  do\n  {\n    key = key * 214013L + 2531011L;\n    *p ^= (unsigned char)(key&gt;&gt;24);\n  }\n  while(*p++);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 4, "last_activity_date": 1427291687, "last_edit_date": 1427291687, "creation_date": 1427291339, "answer_id": 29257584, "question_id": 29257313, "link": "https://stackoverflow.com/questions/29257313/c-suppress-system-calls-from-binary/29257584#29257584", "title": "C: Suppress system calls from binary", "body": "<p>We don't know on which operating system you are coding. But I am guessing it is Linux (or at least some POSIX).</p>\n\n<p>Then my advice is to <strong>avoid <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow\">system(3)</a></strong> and use something else, such as <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow\">fork(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/execve.2.html\" rel=\"nofollow\">execve(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow\">waitpid(2)</a>; take time to read <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow\">Advanced Linux Programming</a> for details (they could be tricky to you).</p>\n\n<p>BTW, you are naive in thinking that by removing the string from your binary, people won't be able to understand what is happening. They could use <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow\">strace(1)</a> and guess immediately what programs and arguments your program is running (even if you encrypt the command string, etc...)</p>\n\n<p>BTW, security thru obscurity is wrong.</p>\n\n<p>At last, a bit of terminology: <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow\">system(3)</a> is a <a href=\"https://en.wikipedia.org/wiki/C_standard_library\" rel=\"nofollow\">standard C library</a> function (very poorly named, it should have been called <code>command</code>), it is not a <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow\">system call</a>, which are listed (on Linux) in <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow\">syscalls(2)</a>.</p>\n"}], "owner": {"reputation": 480, "user_id": 1921235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/006beb8ab98f6ce760f57556d2b04041?s=128&d=identicon&r=PG", "display_name": "slacker", "link": "https://stackoverflow.com/users/1921235/slacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 29257584, "answer_count": 2, "score": 0, "last_activity_date": 1427295423, "creation_date": 1427290723, "last_edit_date": 1427292185, "question_id": 29257313, "link": "https://stackoverflow.com/questions/29257313/c-suppress-system-calls-from-binary", "title": "C: Suppress system calls from binary", "body": "<p>I have in my code things like:</p>\n\n<pre><code>system(\"a system call\");\n</code></pre>\n\n<p>but, as the <code>printf</code>, the text inside the <code>system()</code> is readable in the binary code.</p>\n\n<p>I'm compiling the <code>.c</code> with </p>\n\n<pre><code>gcc -std=gnu99 code.c -o code\n</code></pre>\n\n<p>How may I compile to suppress the readable string in the binary code?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 43798, "user_id": 759019, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/a6ba85d48d057584ef57f1a648bb4577?s=128&d=identicon&r=PG", "display_name": "Anirudh Ramanathan", "link": "https://stackoverflow.com/users/759019/anirudh-ramanathan"}, "edited": false, "score": 7, "creation_date": 1427290233, "post_id": 29257097, "comment_id": 46716732, "body": "Very useful for questions of this nature: <a href=\"http://cdecl.org/\" rel=\"nofollow noreferrer\">cdecl.org</a>. <code>int (*p)[10]</code> -&gt; <i>declare p as pointer to array 10 of int</i>"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 4, "last_activity_date": 1427290257, "creation_date": 1427290257, "answer_id": 29257128, "question_id": 29257097, "link": "https://stackoverflow.com/questions/29257097/what-will-the-declaration-int-ptr30-create/29257128#29257128", "title": "What Will The Declaration int (*ptr)[30]; Create?", "body": "<pre><code>int (*ptr)[30];\n</code></pre>\n\n<p>Here ptr is a pointer to an array of type <code>int</code> with 30 elements.</p>\n\n<p>So without the parantheses </p>\n\n<pre><code>int *ptr[30];\n</code></pre>\n\n<p>will create an array <code>ptr</code> which holds 30 integer pointers. </p>\n"}, {"tags": [], "owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "is_accepted": false, "score": 2, "last_activity_date": 1427290583, "last_edit_date": 1495539806, "creation_date": 1427290583, "answer_id": 29257254, "question_id": 29257097, "link": "https://stackoverflow.com/questions/29257097/what-will-the-declaration-int-ptr30-create/29257254#29257254", "title": "What Will The Declaration int (*ptr)[30]; Create?", "body": "<p>As explained by the other answer, it's a pointer to an array of 30 integers.</p>\n\n<p>How do you actually use these kinds of declarations:</p>\n\n<pre><code>int arr[30];\nint (*ptr)[30] = &amp;arr;\n(*ptr)[0] = 5;\nprintf(\"%d\\n\", arr[0]);\n</code></pre>\n\n<p>So, it's a pointer to an array of 30 elements, not pointer to the first element of the array, although their memory addresses are the same (see <a href=\"https://stackoverflow.com/questions/29244504/casting-pointer-to-array-into-pointer\">casting pointer to array into pointer</a>).</p>\n\n<p>Note that <code>&amp;arr</code> has a different type than <code>arr</code> even though when casted into <code>void *</code> they evaluate to the same addresses.</p>\n\n<p>It's somewhat esoteric; you would use pointer to the first element of the array instead of pointer to the array itself most of the time.</p>\n"}, {"tags": [], "owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "is_accepted": true, "score": 4, "last_activity_date": 1427291353, "creation_date": 1427291353, "answer_id": 29257588, "question_id": 29257097, "link": "https://stackoverflow.com/questions/29257097/what-will-the-declaration-int-ptr30-create/29257588#29257588", "title": "What Will The Declaration int (*ptr)[30]; Create?", "body": "<p>this kind of question can always be answered by looking at the expression inside-out, with precedence considered.</p>\n\n<p>in your case:</p>\n\n<pre><code>int (*ptr)[30];\n</code></pre>\n\n<p>can be viewed as</p>\n\n<pre><code>int (*ptr)[30];\n-&gt; ptr                 a variable called ptr\n--&gt; *ptr               which is a pointer\n---&gt; (*ptr)[30]        which points to an array with length of 30\n----&gt; int (*ptr)[30]   in which each element is of type int\n</code></pre>\n\n<p>if the parens are dropped, the story becomes:</p>\n\n<pre><code>int *ptr[30];\n-&gt; ptr                 a variable called ptr\n--&gt; ptr[30]            which is an array with length of 30\n---&gt; *ptr[30]          in which each element is a pointer\n----&gt; int *ptr[30]     and each individual points to an int\n</code></pre>\n\n<p>the same trick can always be applied to any expression about variable declaration.(note that function declaration is special. but it still can be analyzed in such way up to a point.)</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1427296614, "creation_date": 1427296614, "answer_id": 29259616, "question_id": 29257097, "link": "https://stackoverflow.com/questions/29257097/what-will-the-declaration-int-ptr30-create/29259616#29259616", "title": "What Will The Declaration int (*ptr)[30]; Create?", "body": "<p>In this case, <code>ptr</code> is a pointer to a 30-element array of <code>int</code>.  </p>\n\n<p>Postfix operators such as <code>[]</code> have higher precedence than unary operators such as <code>*</code>, so the expression <code>*a[i]</code> will be parsed as <code>*(a[i])</code> (<code>a</code> is an array of pointer).  To use a <em>pointer to an array</em>, you must explicitly group the unary <code>*</code> operator with the array name, such as <code>(*a)[i]</code> (<code>a</code> is a pointer to an array).  </p>\n\n<p>Handy table:</p>\n\n<pre><code>  *a[N]         -- a is an N-element array of pointer\n(*a)[N]         -- a is a pointer to an N-element array\n   *f()         -- f is a function returning a pointer\n (*f)()         -- f is a pointer to a function.  \n</code></pre>\n"}], "owner": {"reputation": 743, "user_id": 246206, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2d4d601c3e3caab1e9a8090ea63c47a?s=128&d=identicon&r=PG", "display_name": "gbox", "link": "https://stackoverflow.com/users/246206/gbox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2688, "favorite_count": 1, "accepted_answer_id": 29257588, "answer_count": 4, "score": 3, "last_activity_date": 1427296614, "creation_date": 1427290188, "question_id": 29257097, "link": "https://stackoverflow.com/questions/29257097/what-will-the-declaration-int-ptr30-create", "title": "What Will The Declaration int (*ptr)[30]; Create?", "body": "<p>What will <code>int (*ptr)[30];</code> create?\nIn general what happens if a variable name (in this case a pointer) is in parentheses ?</p>\n"}, {"tags": ["php", "c", "openssl", "cryptoapi", "mismatch"], "comments": [{"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 0, "creation_date": 1427350518, "post_id": 29257068, "comment_id": 46744403, "body": "I think you&#39;ve forgotten to pad your data using pkcs7; see also <a href=\"http://stackoverflow.com/questions/10916284/how-to-encrypt-decrypt-data-in-php/10945097#10945097\">this answer</a>."}, {"owner": {"reputation": 43, "user_id": 4712094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af469a80fea604b03748fb847278b86f?s=128&d=identicon&r=PG&f=1", "display_name": "Cargo Tan", "link": "https://stackoverflow.com/users/4712094/cargo-tan"}, "reply_to_user": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 0, "creation_date": 1427366153, "post_id": 29257068, "comment_id": 46751085, "body": "Thanks for nice answer, it shed some light, but unfortunately did not help. According to MSDN CryptoAPI uses PKCS#5, but manually disabling it and implementing PKCS#7 padding makes no difference to result(also observing values of unallocated bytes in the end of buffer after decryption gives the nice fingerprint of PKCS#7). I tried to use AES-128 and check encoding results by RFC3602 example and get the right output(with builtin and manual padding) in PHP. But not in C program. I suggest that crypto-context misconfigured(provider name, type, hash algorithm, maybe something else)"}, {"owner": {"reputation": 43, "user_id": 4712094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af469a80fea604b03748fb847278b86f?s=128&d=identicon&r=PG&f=1", "display_name": "Cargo Tan", "link": "https://stackoverflow.com/users/4712094/cargo-tan"}, "reply_to_user": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 0, "creation_date": 1427370147, "post_id": 29257068, "comment_id": 46753224, "body": "Forgot to add the link <a href=\"https://www.ietf.org/rfc/rfc3602.txt\" rel=\"nofollow noreferrer\">RFC3602</a>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4712094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af469a80fea604b03748fb847278b86f?s=128&d=identicon&r=PG&f=1", "display_name": "Cargo Tan", "link": "https://stackoverflow.com/users/4712094/cargo-tan"}, "edited": false, "score": 0, "creation_date": 1427369992, "post_id": 29272138, "comment_id": 46753130, "body": "Thanks for answer, but I don&#39;t quite understand how to do that without hash. Maybe example or link?"}, {"owner": {"reputation": 8243, "user_id": 1629262, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/F9Q4g.jpg?s=128&g=1", "display_name": "doptimusprime", "link": "https://stackoverflow.com/users/1629262/doptimusprime"}, "reply_to_user": {"reputation": 43, "user_id": 4712094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af469a80fea604b03748fb847278b86f?s=128&d=identicon&r=PG&f=1", "display_name": "Cargo Tan", "link": "https://stackoverflow.com/users/4712094/cargo-tan"}, "edited": false, "score": 0, "creation_date": 1427376071, "post_id": 29272138, "comment_id": 46756861, "body": "In CryptDeriveKey, directly pass the password."}, {"owner": {"reputation": 43, "user_id": 4712094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af469a80fea604b03748fb847278b86f?s=128&d=identicon&r=PG&f=1", "display_name": "Cargo Tan", "link": "https://stackoverflow.com/users/4712094/cargo-tan"}, "edited": false, "score": 0, "creation_date": 1427378319, "post_id": 29272138, "comment_id": 46758555, "body": "I don&#39;t think it supposed to work that way. Here is function <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa379916%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">declaration</a> from MSDN and there are no mention of direct password input in description.  <code>BOOL WINAPI CryptDeriveKey(HCRYPTPROV hProv, ALG_ID Algid,  HCRYPTHASH hBaseData, DWORD dwFlags, HCRYPTKEY *phKey);</code>"}, {"owner": {"reputation": 43, "user_id": 4712094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af469a80fea604b03748fb847278b86f?s=128&d=identicon&r=PG&f=1", "display_name": "Cargo Tan", "link": "https://stackoverflow.com/users/4712094/cargo-tan"}, "edited": false, "score": 0, "creation_date": 1427473027, "post_id": 29272138, "comment_id": 46805085, "body": "In the end you was right. Code fixes I will post below."}], "tags": [], "owner": {"reputation": 8243, "user_id": 1629262, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/F9Q4g.jpg?s=128&g=1", "display_name": "doptimusprime", "link": "https://stackoverflow.com/users/1629262/doptimusprime"}, "is_accepted": true, "score": 0, "last_activity_date": 1427350324, "creation_date": 1427350324, "answer_id": 29272138, "question_id": 29257068, "link": "https://stackoverflow.com/questions/29257068/openssl-and-windows-cryptoapi-compatibility-issue/29272138#29272138", "title": "Openssl and Windows CryptoAPI compatibility issue", "body": "<p>Encrypted output is different. It means that key which is ultimately used is different or data is different. But data is same, hence key must be different.</p>\n\n<p>It means in the process of key generation, something is different. It might be possible that OpenSSL may be using some other key deriving function which is not visible here. Try to use some standard algorithm for key generation. Instead of hashing, try not to use hash.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4712094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af469a80fea604b03748fb847278b86f?s=128&d=identicon&r=PG&f=1", "display_name": "Cargo Tan", "link": "https://stackoverflow.com/users/4712094/cargo-tan"}, "is_accepted": false, "score": 0, "last_activity_date": 1427473202, "creation_date": 1427473202, "answer_id": 29305428, "question_id": 29257068, "link": "https://stackoverflow.com/questions/29257068/openssl-and-windows-cryptoapi-compatibility-issue/29305428#29305428", "title": "Openssl and Windows CryptoAPI compatibility issue", "body": "<p>I finally got proper results from CryptoAPI by importing key as PLAINTEXTBLOB.</p>\n\n<p>Here is not final, but workable fixes to SetKey function.</p>\n\n<pre><code>#include &lt;WinCrypt.h&gt;\n\ntypedef struct {\n  BLOBHEADER hdr;\n  DWORD      dwKeySize;\n  BYTE       rgbKeyData[16];\n} PLAINTEXTKEYBLOB_t;\n\nBOOL SetKey(BYTE* szKey, DWORD dwKeySize, HCRYPTPROV* m_hProv, HCRYPTHASH* m_hHash, HCRYPTKEY* m_hKey)\n{\n    BOOL m_fOK= TRUE;\n    if (*m_hProv == 0) {\n        m_fOK = CryptAcquireContextW(m_hProv, NULL, \n            MS_ENH_RSA_AES_PROV, //MS_DEF_PROV_A, \n            PROV_RSA_AES, \n            CRYPT_NEWKEYSET | CRYPT_VERIFYCONTEXT \n        );\n    }\n    if (m_fOK &amp;&amp; (*m_hHash != 0)) {\n        m_fOK = CryptDestroyHash(*m_hHash); \n        m_hHash = 0;\n    }\n\n    if(m_fOK) {\n        BYTE key[] = {0x06, 0xa9, 0x21, 0x40, 0x36, 0xb8, 0xa1, 0x5b, 0x51, 0x2e, 0x03, 0xd5, 0x34, 0x12, 0x00, 0x06};\n\n        PLAINTEXTKEYBLOB_t blob;\n        blob.hdr.bType = PLAINTEXTKEYBLOB;\n        blob.hdr.bVersion = 2;\n        blob.hdr.reserved = 0;\n        blob.hdr.aiKeyAlg = CALG_AES_128;\n        blob.dwKeySize = 16;\n        for(int i=0; i&lt;16; i++) {\n            //blob.rgbKeyData[16-1-i] = key[i];\n            blob.rgbKeyData[i] = key[i];\n        }\n        m_fOK = CryptImportKey(*m_hProv, (BYTE*)&amp;blob, sizeof(PLAINTEXTKEYBLOB_t), 0, NULL, m_hKey);\n    }\n\n    if (m_fOK) {\n        DWORD mode = CRYPT_MODE_CBC;\n        m_fOK = CryptSetKeyParam(*m_hKey, KP_MODE, (BYTE*)&amp;mode, 0);\n    }\n    if (m_fOK) {\n        DWORD mode = 0;\n        DWORD dwDataLen = sizeof(mode);\n        m_fOK = CryptGetKeyParam(*m_hKey, KP_PADDING, (BYTE*)&amp;mode, &amp;dwDataLen, 0);\n        mode = 0;\n        //m_fOK = CryptSetKeyParam(*m_hKey, KP_PADDING, (BYTE*)&amp;mode, 0);\n    }\n    if (m_fOK) {\n        BYTE iv[] = {0x3d, 0xaf, 0xba, 0x42, 0x9d, 0x9e, 0xb4, 0x30, 0xb4, 0x22, 0xda, 0x80, 0x2c, 0x9f, 0xac, 0x41};\n        m_fOK = CryptSetKeyParam(*m_hKey, KP_IV, (BYTE*)iv, 0);\n    }\n\n    return m_fOK;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4712094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af469a80fea604b03748fb847278b86f?s=128&d=identicon&r=PG&f=1", "display_name": "Cargo Tan", "link": "https://stackoverflow.com/users/4712094/cargo-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1432, "favorite_count": 0, "accepted_answer_id": 29272138, "answer_count": 2, "score": 0, "last_activity_date": 1427473202, "creation_date": 1427290122, "question_id": 29257068, "link": "https://stackoverflow.com/questions/29257068/openssl-and-windows-cryptoapi-compatibility-issue", "title": "Openssl and Windows CryptoAPI compatibility issue", "body": "<p>I have problem in encrypted communication between windows application and server app. Client app is running at Windows, written in C and uses CryptoAPI. Server application uses PHP and Openssl extension. As cipher algorithm AES-256-CBC was chosen. Using the same algorithm Openssl and CryptoAPI produces different results. The same problem I had with RC2-CBC algorithm. This online tool <a href=\"http://asecuritysite.com/Encryption/openssl\" rel=\"nofollow\">http://asecuritysite.com/Encryption/openssl</a> generates the same result as openssl, so I conclude that bug in C code.</p>\n\n<p>PHP code:</p>\n\n<pre><code>&lt;?php\n//$flag = OPENSSL_RAW_DATA;\n$flag = false;\n//this string will encode\n$dataString = 'some data string';\n$pass = \"1234567812345678\";\n$method = \"aes-256-cbc\";\n\n$iv = \"Zievrs8NZievrs8N\";\necho \"original:\\n\";\nvar_dump($dataString);\n$encryptedMessage = openssl_encrypt($dataString, $method, $pass, $flag, $iv);\necho \"after encrypt:\\n\";\nvar_dump($encryptedMessage);\necho \"vector:\\n\";\nvar_dump($iv);\n$decryptedMessage = openssl_decrypt($encryptedMessage, $method, $pass, $flag, $iv);\necho \"after decrypt:\\n\";\nvar_dump($decryptedMessage);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>original:\nstring(16) \"some data string\"\nafter encrypt:\nstring(44) \"9O8UAaRRCfneeRbRCeiYi9nOM8F2KA6gtkAsvPliUdA=\"\nvector:\nstring(16) \"Zievrs8NZievrs8N\"\nafter decrypt:\nstring(16) \"some data string\"\n</code></pre>\n\n<p>C code:</p>\n\n<pre><code>BOOL SetKey(BYTE* szKey, DWORD dwKeySize, HCRYPTPROV* m_hProv, HCRYPTHASH* m_hHash, HCRYPTKEY* m_hKey)\n{\n    BOOL m_fOK= TRUE;\n    if (*m_hProv == 0) {\n        m_fOK = CryptAcquireContextA(m_hProv, NULL, \n            NULL, //MS_DEF_PROV_A, \n            PROV_RSA_AES, \n            CRYPT_VERIFYCONTEXT \n        );\n    }\n    if (m_fOK &amp;&amp; (*m_hHash != 0)) {\n        m_fOK = CryptDestroyHash(*m_hHash); \n        m_hHash = 0;\n    }\n    if (m_fOK &amp;&amp; (*m_hHash == 0)) {\n        m_fOK = CryptCreateHash(*m_hProv, CALG_SHA_256, 0, 0, m_hHash);\n    }\n    if (m_fOK) {\n        m_fOK = CryptHashData(*m_hHash, (BYTE*)szKey, dwKeySize, 0);\n    }\n    if (m_fOK) {\n        m_fOK = CryptDeriveKey(*m_hProv, CALG_AES_256, *m_hHash, CRYPT_EXPORTABLE | CRYPT_NO_SALT, m_hKey);\n    }\n    if (m_fOK) {\n        DWORD mode = CRYPT_MODE_CBC;\n        m_fOK = CryptSetKeyParam(*m_hKey, KP_MODE, (BYTE*)&amp;mode, 0);\n    }\n    if (m_fOK) {\n        BYTE iv[] = {'Z','i','e','v','r','s','8','N','Z','i','e','v','r','s','8','N',0};\n        m_fOK = CryptSetKeyParam(*m_hKey, KP_IV, (BYTE*)iv, 0);\n    }\n\n    return m_fOK;\n}\n\nBOOL EncryptDecrypt(BYTE* pData, BYTE** pRes, DWORD* dwDataLen, BYTE* pKey, DWORD dwKeySize, BOOL fEncrypt)\n{\n    HCRYPTPROV m_hProv = 0;\n    HCRYPTHASH m_hHash = 0;\n    HCRYPTKEY  m_hKey  = 0;\n\n    BOOL m_fOK= TRUE;\n    m_fOK = SetKey(pKey, dwKeySize, &amp;m_hProv, &amp;m_hHash, &amp;m_hKey);\n    if (fEncrypt) {\n        DWORD dwTotalBufferSize = 0;\n        DWORD dwNewLen = *dwDataLen;\n        if((m_fOK = CryptEncrypt(m_hKey, 0, TRUE, 0, NULL, &amp;dwNewLen, dwTotalBufferSize))) {\n            *pRes = (BYTE*)malloc(dwNewLen);\n            memcpy(*pRes, pData, *dwDataLen);\n            dwTotalBufferSize = dwNewLen;\n            if(!(m_fOK = CryptEncrypt(m_hKey, 0, TRUE, 0, *pRes, dwDataLen, dwTotalBufferSize))) {\n                free(*pRes);\n                *pRes = NULL;\n                *dwDataLen = 0;\n            }\n        }\n    }\n    else  {\n        *pRes = (BYTE*)malloc(*dwDataLen);\n        memcpy(*pRes, pData, *dwDataLen);\n        if(!(m_fOK = CryptDecrypt(m_hKey, 0, TRUE, 0, *pRes, dwDataLen))) {\n            DWORD err = GetLastError();\n            char msg[100];\n            wsprintfA(msg, \"err = %d\\n\", err);\n            OutputDebugStringA(msg);\n            free(*pRes);\n            *pRes = NULL;\n            *dwDataLen = 0;\n        }\n    }\n\n    if (m_hKey)  CryptDestroyKey(m_hKey); \n    if (m_hHash) CryptDestroyHash(m_hHash); \n    if (m_hProv) CryptReleaseContext(m_hProv, 0); \n\n    return m_fOK;\n}\n\nvoid main() {\n    const char* data = \"some data string\";\n    BYTE* res = NULL;\n    DWORD len = strlen(data);\n    EncryptDecrypt((BYTE*)data, &amp;res, &amp;len, (BYTE*)\"1234567812345678\", 16, TRUE);\n    size_t len_en = 0;\n    char* base64 = base64_encode(res, len, &amp;len_en);\n    printf(\"base64 = %s\\n\", base64);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>base64 = miFMwk4/ZwjMLsnV4Po9UdWxix32TrK5BcSgSKYr384=\n</code></pre>\n"}, {"tags": ["c++", "c", "arduino", "interrupt"], "comments": [{"owner": {"reputation": 470, "user_id": 3365429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KB5cN.jpg?s=128&g=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/3365429/aleph0"}, "edited": false, "score": 0, "creation_date": 1427290076, "post_id": 29256998, "comment_id": 46716613, "body": "What is your question exactly ?"}, {"owner": {"reputation": 13, "user_id": 4712236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d58296f48efc593ac9133ee62a01bc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Raeven", "link": "https://stackoverflow.com/users/4712236/nick-raeven"}, "reply_to_user": {"reputation": 470, "user_id": 3365429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KB5cN.jpg?s=128&g=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/3365429/aleph0"}, "edited": false, "score": 0, "creation_date": 1427290229, "post_id": 29256998, "comment_id": 46716727, "body": "When the Arduino receives interrupts at 90Hz, it doesn&#39;t execute the code in the interrupt. When the motor goes below 90Hz after that, the code works again. What am I doing wrong ?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1427290404, "post_id": 29256998, "comment_id": 46716875, "body": "@NickRaeven Are you certain the opto sensor handles a frequency of &gt; 90Hz ? or - how long does it assert the signal you&#39;re measuring ?"}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1427290421, "post_id": 29256998, "comment_id": 46716890, "body": "What&#39;s the real resolution of <code>micros()</code>?  Are you certain it&#39;s not being called, or do you just no longer see output on the serial port?  Can you toggle a GPIO port and set an oscope to trigger on a level change?"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1427290498, "post_id": 29256998, "comment_id": 46716937, "body": "perhaps you should ask this on the Arduino site: <a href=\"http://arduino.stackexchange.com\">arduino.stackexchange.com</a>"}, {"owner": {"reputation": 13, "user_id": 4712236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d58296f48efc593ac9133ee62a01bc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Raeven", "link": "https://stackoverflow.com/users/4712236/nick-raeven"}, "edited": false, "score": 0, "creation_date": 1427290518, "post_id": 29256998, "comment_id": 46716956, "body": "@BrianCainThe opto gives out +5v pulses for every Hz. This works (oscilloscope) even for higher frequencies (at least up to 200Hz). I also trigger a LED on pin 13. This one stops changing status after 90+ Hz."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427291423, "post_id": 29256998, "comment_id": 46717615, "body": "Can you clarify which version of Arduino this is? Is it the 8-bit Atmel version or the ARM version?"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427291313, "post_id": 29257407, "comment_id": 46717536, "body": "Also if this is code is for a crappy 8-bit MCU, then 32 bit arithmetic alone is likely going to be too slow to be handled inside an ISR."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1427293100, "post_id": 29257407, "comment_id": 46718844, "body": "The arithmetic is far faster than serial IO, which is blocking in arduino libs. Get rid of it within the ISR."}], "tags": [], "owner": {"reputation": 2052, "user_id": 258556, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c59b2ad3f5eccd47f505117a363e506b?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/258556/bruce"}, "is_accepted": false, "score": 3, "last_activity_date": 1427290923, "creation_date": 1427290923, "answer_id": 29257407, "question_id": 29256998, "link": "https://stackoverflow.com/questions/29256998/arduino-interrupt-frequency/29257407#29257407", "title": "Arduino interrupt frequency", "body": "<p>It looks as though blink is your ISR.  If that's the case, you shouldn't be doing debug I/O within that routine for 2 reasons.  The first is that you are calling a process that could block.  The second is that ISRs should do their thing and finish (should be highly efficient).  My guess is that if you remove the debug I/O from your ISR and pass info back to the interrupted task instead (safely, of course) you will be able to service interrupts at greater than 90 hz.</p>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1427294487, "last_edit_date": 1427294487, "creation_date": 1427293491, "answer_id": 29258388, "question_id": 29256998, "link": "https://stackoverflow.com/questions/29256998/arduino-interrupt-frequency/29258388#29258388", "title": "Arduino interrupt frequency", "body": "<p>Just to add to @Bruce answer. You are using serial IO in the interrupt. Each time you are printing around 15-20 characters (depending on the values calculated). Each character is encoded by <code>8</code> bit data + <code>1</code> start bit + <code>1</code> stop bit = <code>10</code> bits. So, say <code>20*10=200</code> bits. The baud rate is <code>19200</code>bps, so time required to transmit 200 bits is <code>200/19200</code> sec, or in terms of frequency <code>19200/200=96Hz</code>. So this is the <strong>maximum</strong> frequency achievable for transmission of 20 characters, which is close to your measured <code>90Hz</code> (take in account that I am not considering any time spacing overhead between the transmits).</p>\n"}], "owner": {"reputation": 13, "user_id": 4712236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d58296f48efc593ac9133ee62a01bc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Raeven", "link": "https://stackoverflow.com/users/4712236/nick-raeven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1543, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1427294487, "creation_date": 1427289972, "last_edit_date": 1427290391, "question_id": 29256998, "link": "https://stackoverflow.com/questions/29256998/arduino-interrupt-frequency", "title": "Arduino interrupt frequency", "body": "<p>I am using an Arduino uno to measure the speed of a dc motor.\nI have a opto sensor that gives a pulse when the motor has made a full turn.\nThe problem I've got starts when the motor has a speed > 90Hz.\nAs soon as I reach 90Hz, the Arduino doesn't enter the interrupt function.</p>\n\n<p>My code:</p>\n\n<pre><code>int pin = 13;\nvolatile int state = LOW;\nvolatile unsigned long startTijd = 0;\nvolatile unsigned long eindTijd = 0;\nunsigned int frequentie = 0;\nvolatile int count = 0;\n\nvoid setup()\n{\n  pinMode(pin, OUTPUT);\n  attachInterrupt(0, blink, FALLING); //LOW, HIGH, FALLING, RISING, CHANGE\n\n  Serial.begin(19200);\n}\n\nvoid loop()\n{\n  noInterrupts();\n  digitalWrite(pin, state);\n  interrupts();\n}\n\nvoid blink()\n{\n  if (count == 0) {\n    startTijd = micros();\n  }\n  count++;\n  if (count == 31) {\n    count = 0;\n    eindTijd = micros();\n    eindTijd -= startTijd;\n    Serial.print(eindTijd);\n    Serial.print(\" ms. - \");\n\n    frequentie = 30 * 1000000 / eindTijd;\n    Serial.print(frequentie);\n    Serial.println(\" Hz.\");\n\n  }\n  state = !state;\n\n}\n</code></pre>\n\n<p>My question is : When the Arduino receives interrupts at 90Hz, it doesn't execute the code in the interrupt. When the motor goes below 90Hz after that, the code works again. What am I doing wrong ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1427289921, "post_id": 29256842, "comment_id": 46716488, "body": "Did you expect the value of the macro to change when you enter <code>&#39;x&#39;</code>?"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1427290007, "post_id": 29256842, "comment_id": 46716558, "body": "acutaly yes I&#39;Ve read this post  <a href=\"http://stackoverflow.com/questions/9274500/redefining-or-changing-macro-value\" title=\"redefining or changing macro value\">stackoverflow.com/questions/9274500/&hellip;</a> and was hopping it wil do it"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427290985, "post_id": 29256842, "comment_id": 46717300, "body": "Macros aren&#39;t variables. They are macros. If you need a variable, use a variable instead."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1427290679, "last_edit_date": 1495542495, "creation_date": 1427289681, "answer_id": 29256882, "question_id": 29256842, "link": "https://stackoverflow.com/questions/29256842/issues-by-the-redefinition-of-a-macro-in-c/29256882#29256882", "title": "Issues by the redefinition of a macro in C", "body": "<p>You can only define macros at compile time. The <a href=\"https://gcc.gnu.org/onlinedocs/cpp/\" rel=\"nofollow noreferrer\">c preprocessor</a> replaces every occurrance of a macro before actual compilation happens, with <strong>gcc</strong> you can see what code was generated after preprocessing by using the <code>-E</code> switch, if you try it experimenting with different macros, you may get to understand the preprocessor a little better, read the link to understand more.</p>\n\n<p>This</p>\n\n<pre><code>if( c =='x') {\n  #undef MAX\n  #define MAX  (65535 +amp);\n  amp+= 0.1;\n  temp = MAX;\n}\n</code></pre>\n\n<p>does not do what you think.</p>\n\n<p>If you execute the preprocessor on the source code, then what will actually happen is that the snippet above will be compiled as</p>\n\n<pre><code>if( c =='x') {\n  amp+= 0.1;\n  temp = MAX;\n}\n</code></pre>\n\n<p>so as you can see, it doesn't do what you think.</p>\n\n<p>Also, this is not related to the macro redefinition issue, but your code has a bug that can make it enter an infinite loop, this</p>\n\n<pre><code>scanf(\"%c\",&amp;c);\n</code></pre>\n\n<p>will keep scanning the <code>'\\n'</code> that is left in the <code>stdin</code> after pressing <kbd>Enter/Return</kbd>, so you need to explicitly ignore that character by adding a white space before the specifier like this</p>\n\n<pre><code>scanf(\" %c\", &amp;c);\n/*     ^ white space goes here */\n</code></pre>\n\n<p><strong>Note</strong>: another answer has suggested that you are using the incorrect data type and suggested a solution, you should <a href=\"https://stackoverflow.com/a/29257162/1983495\">take a look at it</a>, since in fact it seems your program has an integer overflow issue.</p>\n"}, {"tags": [], "owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "is_accepted": false, "score": 1, "last_activity_date": 1427290454, "last_edit_date": 1427290454, "creation_date": 1427290210, "answer_id": 29257108, "question_id": 29256842, "link": "https://stackoverflow.com/questions/29256842/issues-by-the-redefinition-of-a-macro-in-c/29257108#29257108", "title": "Issues by the redefinition of a macro in C", "body": "<p>Macros are resolved during compilation, so during program execution there is no such thing like <code>MAX</code> - each occurence was already replaced by its value (<code>65535</code>).</p>\n\n<p>However, if you need to define local constant (local in terms of translation unit), why not use static variable?</p>\n\n<pre><code>static unsigned int MAX = 65535;\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>if (c == 'x')\n{\n    MAX = 65535 + amp;\n   //...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "is_accepted": false, "score": 1, "last_activity_date": 1427290222, "creation_date": 1427290222, "answer_id": 29257114, "question_id": 29256842, "link": "https://stackoverflow.com/questions/29256842/issues-by-the-redefinition-of-a-macro-in-c/29257114#29257114", "title": "Issues by the redefinition of a macro in C", "body": "<p>Let's run your file through the C preprocessor (CPP) manually. The result is</p>\n\n<pre><code>int main ( ) {\n    float amp = 0.0;\n    float temp = 0.0 ;\n    temp = (65535 *0.5) ;\n    char c;\n\n    while (1) {\n        printf(\" MAX value %.2d.%.3d \\n \", (short)temp,(short)(temp*1000));\n        scanf(\"%c\",&amp;c);\n        if( c =='x') {\n\n\n            amp+= 0.1;\n            temp = (65535 +amp);;\n        }\n    }\n    return 0 ;\n}\n</code></pre>\n\n<p>Macros are evaluated before the compiler even sees your source code. You  cannot change the value of a macro based on a decision taken at runtime. </p>\n\n<p>Why not instead use a variable <code>float max = ...</code> and change that one's value depending on user input?</p>\n"}, {"tags": [], "owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "is_accepted": false, "score": 1, "last_activity_date": 1427290857, "last_edit_date": 1427290857, "creation_date": 1427290339, "answer_id": 29257162, "question_id": 29256842, "link": "https://stackoverflow.com/questions/29256842/issues-by-the-redefinition-of-a-macro-in-c/29257162#29257162", "title": "Issues by the redefinition of a macro in C", "body": "<p>You are using too short data type and printing the fractional part incorrectly. Consider doing this:</p>\n\n<pre><code>double i;\nprintf(\" MAX value %.2d.%.3d \\n \", (int)temp,(int)(modf(temp,&amp;i)*1000));\n</code></pre>\n\n<p>...instead of this:</p>\n\n<pre><code>printf(\" MAX value %.2d.%.3d \\n \", (short)temp,(short)(temp*1000));\n</code></pre>\n\n<p>Be sure to <code>#include &lt;math.h&gt;</code> if using <code>modf</code>.</p>\n\n<p>Your redefinition of the <code>MAX</code> macro looks strange to me, though. Macros are defined at compile time, not at run time, so most of the time you don't want to redefine macros.</p>\n\n<p>Note also that</p>\n\n<pre><code>scanf(\"%c\",&amp;c);\n</code></pre>\n\n<p>will read the newline as a separate character, so you want to do instead:</p>\n\n<pre><code>scanf(\" %c\",&amp;c);\n</code></pre>\n\n<p>...to consume whitespace. Do consider checking also for the <code>EOF</code> (end-of-file) condition; currently you don't do that.</p>\n"}], "owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 29256882, "answer_count": 4, "score": -1, "last_activity_date": 1427290857, "creation_date": 1427289566, "question_id": 29256842, "link": "https://stackoverflow.com/questions/29256842/issues-by-the-redefinition-of-a-macro-in-c", "title": "Issues by the redefinition of a macro in C", "body": "<p>I want to change the  value of a macro during the run of the program, for that I've wrote this example :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX  (65535 *0.5)\n\nint main ( ){\nfloat amp = 0.0;\nfloat temp = 0.0 ;\ntemp    = MAX ;\nchar c;\n\nwhile (1){\n  printf(\" MAX value %.2d.%.3d \\n \", (short)temp,(short)(temp*1000));\n  scanf(\"%c\",&amp;c);\n  if( c =='x') {\n    #undef MAX\n    #define MAX  (65535 +amp);\n    amp+= 0.1;\n    temp = MAX;\n  }\n}\nreturn 0 ; }\n</code></pre>\n\n<p>I've got two problems : \n1. the printf doessn't show the values as hoped, for instand 19.211, it always\n <code>-32768.-32768</code> \n2. I don't see any change  of the value of the macro. </p>\n\n<p>any idea what I'm doing wrong here ? </p>\n"}, {"tags": ["c", "embedded-linux"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1427288608, "post_id": 29256422, "comment_id": 46715542, "body": "You open a socket, call <code>connect()</code> or <code>bind()</code> depending on whether it&#39;s the client or the server socket, and the use <code>read()</code> and <code>write()</code>, but be careful with endianness."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 1, "creation_date": 1427289153, "post_id": 29256422, "comment_id": 46715941, "body": "When sending <code>double</code> you need to take care of more issues than just endianness. Some info here: <a href=\"http://stackoverflow.com/questions/6084279/host-to-network-double\" title=\"host to network double\">stackoverflow.com/questions/6084279/host-to-network-double</a>"}, {"owner": {"reputation": 1147, "user_id": 5071535, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8bc64d99de802e3fc17bedc722f6dd9e?s=128&d=identicon&r=PG&f=1", "display_name": "user5071535", "link": "https://stackoverflow.com/users/5071535/user5071535"}, "edited": false, "score": 0, "creation_date": 1437432345, "post_id": 29256422, "comment_id": 51016327, "body": "As @DrKoch recommended, JSON or something similar is worth looking into."}], "answers": [{"tags": [], "owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "is_accepted": false, "score": 1, "last_activity_date": 1437458059, "last_edit_date": 1495540270, "creation_date": 1427289510, "answer_id": 29256823, "question_id": 29256422, "link": "https://stackoverflow.com/questions/29256422/how-to-send-array-of-double-data-type-over-network-using-socket/29256823#29256823", "title": "How to send array of double data type over network using socket?", "body": "<p>On a socket connection exists nothing but raw bytes. So you have to do two things:</p>\n\n<ol>\n<li><p>Convert your double into bytes in a way the receiver can understand. This is rather complicated for doubles see <a href=\"https://stackoverflow.com/questions/6084279/host-to-network-double\">here</a></p></li>\n<li><p>Invent some field separator which you send between the individual doubles.</p></li>\n</ol>\n\n<p>After all it is a bad idea to reinvent the wheel. You could use some established format like XML or JSON.</p>\n"}], "owner": {"reputation": 21, "user_id": 4711790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0e724b5dc290227c2df8a6ff6525c27?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik", "link": "https://stackoverflow.com/users/4711790/pratik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1183, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1437458059, "creation_date": 1427288439, "last_edit_date": 1427290082, "question_id": 29256422, "link": "https://stackoverflow.com/questions/29256422/how-to-send-array-of-double-data-type-over-network-using-socket", "title": "How to send array of double data type over network using socket?", "body": "<p>I want to send a structure which contains several double data type elements using network socket. Receivers can be of different architecture. What will be better optimized approach to do this except converting it to a string?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1427287934, "post_id": 29255700, "comment_id": 46715054, "body": "It is really not clear what you are asking. &quot;the function job is to make an integer array inside of the function body and return that array&#39;s initial address to main&quot; sounds like implementing a bug on purpose, or did you intend to use dynamic allocation? Can you post the code of the function? Also I don&#39;t understand how &quot;this array&#39;s elements must be the indices of the main array&quot; corresponds to the data in your examples. It rather seems like the function gives the indices the numbers would have in a sorted array. This doesn&#39;t make any sense..."}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 1, "creation_date": 1427287958, "post_id": 29255700, "comment_id": 46715066, "body": "It isn&#39;t entirely clear to me what algorithm is used to determine the returned array from the main array. You should consider improving your question to obtain an answer."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1427288392, "post_id": 29255700, "comment_id": 46715392, "body": "As far as I unserstand you want to create an integer array whose entries describe the position the entries in the original array would have when that array were sorted, but without sorting the original array, right?"}, {"owner": {"reputation": 35, "user_id": 4702921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zt7oo.png?s=128&g=1", "display_name": "Moutasem", "link": "https://stackoverflow.com/users/4702921/moutasem"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1427290784, "post_id": 29255700, "comment_id": 46717161, "body": "@MOehm Exactly that&#39;s what i was looking for"}], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1427291086, "creation_date": 1427291086, "answer_id": 29257475, "question_id": 29255700, "link": "https://stackoverflow.com/questions/29255700/making-an-array-that-represents-an-integer-arrays-indices/29257475#29257475", "title": "Making an array that represents an integer array&#39;s indices", "body": "<p>Your task involves sorting two arrays (value and position) simultaneously. To do that, you could:</p>\n\n<ul>\n<li>create an auxiliary array where you re-organise the array to keep value and position next to each other, so that you can use <code>qsort</code> on it;</li>\n<li>use the (inconveniently) non-standard <code>qsort_r</code>, which allows you to pas extra information to the sorting routine via a <code>void *</code>  ointer or</li>\n<li>roll your own sorting algorithm that keeps both array synchronised.</li>\n</ul>\n\n<p>The first approach is the most usual and portable approach. The standard sorting function <code>qsort</code> can work on arrays, where the array elements can have any size. So: create an auxiliary array of (value, position) pairs, sort that by position and the fill the result array, which you must allocate on the heap:</p>\n\n<pre><code>struct pair {\n    int val;\n    int pos;\n};\n\nint paircmp(const void *pa, const void *pb)\n{\n    const struct pair *a = pa;\n    const struct pair *b = pb;\n\n    return (a-&gt;val &gt; b-&gt;val) - (a-&gt;val &lt; b-&gt;val);\n}\n\nint *func(int array[], int n)\n{\n    struct pair pair[n];\n    int *result;\n    int i;\n\n    for (i = 0; i &lt; n; i++) {\n        pair[i].val = array[i];\n        pair[i].pos = i;\n    }\n\n    qsort(pair, n, sizeof(*pair), paircmp);\n\n    result = malloc(n * sizeof(*result));\n\n    for (i = 0; i &lt; n; i++) {\n        result[pair[i].pos] = i;\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>Here, <code>paircmp</code> is a comparison callback function for <code>qsort</code>.</p>\n\n<p>The <code>[qsort_r][qsort_r]</code> approach is nice and clean, but the <code>qsort_r</code> function is a GNU extension that isn't portable. It still requires an auxiliary array. (There wouldn't even be any need for that if your array were an array of sorted indices.)</p>\n\n<p>The steps are roghly the same as before: Create an auxiliary array of indices, sort that so that the array entries at these indices are sorted, and then create your result array:</p>\n\n<pre><code>int indexcmp(const void *pa, const void *pb, void *data)\n{\n    const int *a = pa;\n    const int *b = pb;\n    const int *array = data;\n\n    return (array[*a] &gt; array[*b]) - (array[*a] &lt; array[*b]);\n}\n\nint *func2(int array[], int n)\n{\n    int *result = malloc(n * sizeof(*result));\n    int pos[n];\n    int i;\n\n    for (i = 0; i &lt; n; i++) pos[i] = i;\n\n    qsort_r(pos, n, sizeof(*pos), indexcmp, array);\n\n    for (i = 0; i &lt; n; i++) result[pos[i]] = i;\n\n    return result;\n}\n</code></pre>\n\n<p>The comparison function <code>indexcmp</code> takes an additional argument.</p>\n\n<p>The third option, rolling your own sorting function, ist the most fun, but I'll leave that to you.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1427291224, "creation_date": 1427291224, "answer_id": 29257537, "question_id": 29255700, "link": "https://stackoverflow.com/questions/29255700/making-an-array-that-represents-an-integer-arrays-indices/29257537#29257537", "title": "Making an array that represents an integer array&#39;s indices", "body": "<p>This should do it, but I can't help feeling there is an easier way.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\ntypedef struct {\n    int value;\n    int index;\n    int index2;\n} sorter;\n\nint cmp(const void *a, const void *b) {\n    return ((sorter*)a)-&gt;value - ((sorter*)b)-&gt;value;\n}\n\nint cmp2(const void *a, const void *b) {\n    return ((sorter*)a)-&gt;index - ((sorter*)b)-&gt;index;\n}\n\nint *func(int *list, int size) {\n    int i, *iarray;\n    sorter *sarray = malloc(size * sizeof(sorter));\n    if (sarray == NULL)\n        return NULL;\n    for (i=0; i&lt;size; i++) {\n        sarray[i].index = i;                    // original position\n        sarray[i].value = list[i];              // element value  \n    }\n    qsort (sarray, size, sizeof(sorter), cmp);  // sort by value\n    for (i=0; i&lt;size; i++)                      \n        sarray[i].index2 = i;                   // sorted position\n    qsort (sarray, size, sizeof(sorter), cmp2); // sort by original position\n    iarray = malloc(size * sizeof(int));\n    if (iarray == NULL) {\n        free (sarray);\n        return NULL;\n    }\n    for (i=0; i&lt;size; i++)\n        iarray[i] = sarray[i].index2;           // position when sorted\n    free (sarray);\n    return iarray;\n}\n\nint main(void)\n{\n    int i, size, *sorted, list[] = {3,17,9,2,11,26,5};\n    size = sizeof(list)/sizeof(int);\n    sorted = func(list, size);\n    if (sorted == NULL)\n        printf(\"Error in func\\n\");\n    else {\n        for (i=0; i&lt;size; i++)\n            printf(\"%d, \", sorted[i]);\n        printf(\"\\n\");\n        free(sorted);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>1, 5, 3, 0, 4, 6, 2,\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4702921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zt7oo.png?s=128&g=1", "display_name": "Moutasem", "link": "https://stackoverflow.com/users/4702921/moutasem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 29257537, "answer_count": 2, "score": -5, "last_activity_date": 1427291224, "creation_date": 1427286545, "last_edit_date": 1427290739, "question_id": 29255700, "link": "https://stackoverflow.com/questions/29255700/making-an-array-that-represents-an-integer-arrays-indices", "title": "Making an array that represents an integer array&#39;s indices", "body": "<p>We've been asked to make a function that returns an integer pointer and takes the parameters </p>\n\n<pre><code>int *func(int *list,int size)\n</code></pre>\n\n<p>I want to create an integer array whose entries describe the position the entries in the original array would have when that array were sorted, but without sorting the original array,this should be done inside the function\nand then return a pointer to entries array to the main function.\nEx:</p>\n\n<p><strong>Main array</strong></p>\n\n<pre><code>3,17,9,2,11,26,5\n</code></pre>\n\n<p><strong>The returned array is</strong>:</p>\n\n<pre><code>1,5,3,0,4,6,2\n</code></pre>\n\n<p>I'm thinking about sorting the main array after copying it into another array ! so the main order is not lost and then compare them together to fill the desired array of indices ,i think this is a bit long any other ideas ?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1427285829, "post_id": 29255333, "comment_id": 46713627, "body": "add an <code>fflush</code> after the <code>printf</code> in <code>read()</code>"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 2, "creation_date": 1427285912, "post_id": 29255333, "comment_id": 46713688, "body": "What do you mean by &quot;it give error&quot;?  That contradicts &quot;the cmd window stop working&quot;."}, {"owner": {"reputation": 201, "user_id": 4628452, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4a5d88575c3a1af29da6e3b75ffe6f15?s=128&d=identicon&r=PG&f=1", "display_name": "aukxn", "link": "https://stackoverflow.com/users/4628452/aukxn"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1427290695, "post_id": 29255333, "comment_id": 46717084, "body": "sorry for my use of word since I&#39;m not native english speaker. I means the window took time and can&#39;t give any result and it stop working. It is like doing infinite loop without stop condition. That&#39;s what I mean"}], "answers": [{"tags": [], "owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "is_accepted": false, "score": 2, "last_activity_date": 1427286001, "creation_date": 1427286001, "answer_id": 29255497, "question_id": 29255333, "link": "https://stackoverflow.com/questions/29255333/adding-item-to-a-linked-list/29255497#29255497", "title": "Adding item to a linked list", "body": "<pre><code>int read(void)\n{\n    printf(\"enter input id: \");\n    scanf(\"%d\", &amp;id_input); //you are missing &amp; here\n    getchar();\n}\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 4628452, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4a5d88575c3a1af29da6e3b75ffe6f15?s=128&d=identicon&r=PG&f=1", "display_name": "aukxn", "link": "https://stackoverflow.com/users/4628452/aukxn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427287099, "creation_date": 1427285537, "last_edit_date": 1427287099, "question_id": 29255333, "link": "https://stackoverflow.com/questions/29255333/adding-item-to-a-linked-list", "title": "Adding item to a linked list", "body": "<p>Hi i am trying to create a linked list to test a function with it but it gives me an error and I can't find out what the problem is with my code. When I fist enter the number, the cmd window stops working after I hit enter.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\ntypedef struct llist *link;\ntypedef struct llist{\n    int id;\n    link next, pre;\n} list;\n\nlist *location;\nint id_input, size = 0;\n\nint search (int id);\nint add(void);\nint read(void);\nint delete(short id);\n\nint main();\n\nint read(void)\n{\n    printf(\"enter input id: \");\n    scanf(\"%d\", id_input);\n    getchar();\n}\n\nint add(void)\n{\n    list *new_item;\n    new_item = (list*)malloc(sizeof(list));\n    printf(\"%p\", new_item);\n    switch(size==0){\n        case 1:{\n            location = new_item;\n            location-&gt;pre = NULL;\n            location-&gt;next = NULL;\n            break;\n        }\n        case 0:{\n            location-&gt;next=new_item;\n            new_item-&gt;pre=location;\n            new_item-&gt;next=NULL;\n            location=new_item;\n            break;\n        }\n    }\n    location-&gt;id = id_input;\n}\n\nint main()\n{\n    int x,i;\n    printf(\"start to append the list\\n\");\n    for(i=0; i&lt;10; i++){\n        read();\n        add();\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "merge", "numbers"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1427285665, "post_id": 29255317, "comment_id": 46713488, "body": "<code>char rez[100]; snprintf(rez, sizeof rez, &quot;%d.%d&quot;, num1, num2); num3 = strtod(rez, NULL);</code>"}, {"owner": {"reputation": 2821, "user_id": 3071928, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/exR74.jpg?s=128&g=1", "display_name": "Binkan Salaryman", "link": "https://stackoverflow.com/users/3071928/binkan-salaryman"}, "edited": false, "score": 0, "creation_date": 1427285719, "post_id": 29255317, "comment_id": 46713534, "body": "<code>float num3 = strtof(num1 + &quot;.&quot; + num2);</code>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1427285819, "post_id": 29255317, "comment_id": 46713617, "body": "What if <code>num2 = 3</code>? or <code>num2 = 1704821</code>?"}, {"owner": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 0, "creation_date": 1427285844, "post_id": 29255317, "comment_id": 46713640, "body": "Here&#39;s the general idea (I don&#39;t do C, so you&#39;ll need to translate) <code>(num1+(num2&#47;pow(10,ceil(log10(num2)))))</code>"}, {"owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "reply_to_user": {"reputation": 2821, "user_id": 3071928, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/exR74.jpg?s=128&g=1", "display_name": "Binkan Salaryman", "link": "https://stackoverflow.com/users/3071928/binkan-salaryman"}, "edited": false, "score": 0, "creation_date": 1427286140, "post_id": 29255317, "comment_id": 46713848, "body": "@BinkanSalaryman it is saying two few argument to statement"}], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 4108473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uszgTGkdmXU/AAAAAAAAAAI/AAAAAAAAAUo/ajrXLIdPdPI/photo.jpg?sz=128", "display_name": "Chintan Patel", "link": "https://stackoverflow.com/users/4108473/chintan-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1427285950, "creation_date": 1427285950, "answer_id": 29255481, "question_id": 29255317, "link": "https://stackoverflow.com/questions/29255317/how-to-merge-two-numbers-and-store-it-in-another-with-point-in-between-them/29255481#29255481", "title": "How to merge two numbers and store it in another with point in between them", "body": "<p>Try this (assuming num1 and num2 are already declared and assigned values)</p>\n\n<p>Find length of num2 and store it in variable \"len2\"</p>\n\n<pre><code>float num3 = (float)num1 + ((float)num2 / pow(10,len2));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 950, "user_id": 1926181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cb49d5a207b8c0771f4c26c2dcd298f?s=128&d=identicon&r=PG", "display_name": "Abdullah Nehir", "link": "https://stackoverflow.com/users/1926181/abdullah-nehir"}, "is_accepted": true, "score": 1, "last_activity_date": 1427285989, "creation_date": 1427285989, "answer_id": 29255493, "question_id": 29255317, "link": "https://stackoverflow.com/questions/29255317/how-to-merge-two-numbers-and-store-it-in-another-with-point-in-between-them/29255493#29255493", "title": "How to merge two numbers and store it in another with point in between them", "body": "<p>Some code like below might solve your problem.</p>\n\n<pre><code>float floatingNum = num2;\nwhile(floatingNum &gt; 1)\n{\n  floatingNum = floatingNum / 10;\n}\nfloat num3 = num1 + floatingNum;\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 29255493, "answer_count": 2, "score": -3, "last_activity_date": 1427285989, "creation_date": 1427285494, "question_id": 29255317, "link": "https://stackoverflow.com/questions/29255317/how-to-merge-two-numbers-and-store-it-in-another-with-point-in-between-them", "title": "How to merge two numbers and store it in another with point in between them", "body": "<p>I am making a C program in which I have two numbers <code>num1=11</code> and <code>num2=98</code> . I want them to store it in another number like <code>num3=11.98</code> That point between 11 and 98 is important. How to do this. Please help, thanks.!</p>\n"}, {"tags": ["c", "arrays", "dynamic", "malloc"], "comments": [{"owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "edited": false, "score": 2, "creation_date": 1427283467, "post_id": 29254536, "comment_id": 46712112, "body": "Don&#39;t cast your <code>malloc</code>."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1427283493, "post_id": 29254536, "comment_id": 46712125, "body": "Where did you allocate memory for <code>s</code> in <code>stack_new()</code>?"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 2, "creation_date": 1427283545, "post_id": 29254536, "comment_id": 46712156, "body": "And a link why you shouldn&#39;t cast <code>malloc</code> return value: <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1427284686, "post_id": 29254536, "comment_id": 46712882, "body": "@BlueMoon: <code>s</code> is allocated automatically. However, <code>*s</code> is not."}], "answers": [{"comments": [{"owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "reply_to_user": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "edited": false, "score": 0, "creation_date": 1427283768, "post_id": 29254590, "comment_id": 46712294, "body": "I disagree with @RickyMutschlechner, it&#39;s <code>sizeof(*s)</code> not <code>sizeof(s)</code>. This answer looks good to me."}, {"owner": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "reply_to_user": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "edited": false, "score": 0, "creation_date": 1427283837, "post_id": 29254590, "comment_id": 46712331, "body": "@Maxime just checked and I think this is correct (what you/answerer said)"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 1, "creation_date": 1427283884, "post_id": 29254590, "comment_id": 46712373, "body": "What <code>Stack *s</code> means essentially is that <code>*s</code> is a <code>Stack</code> following the declaration follows usage principle. So, it is correct. <code>malloc(sizeof(s))</code> would be 4 or 8 bytes depending on 32-bit / 64-bit arch as <code>s</code> is a <code>Stack*</code>"}, {"owner": {"reputation": 41, "user_id": 3607053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34247ca49ce454aa31cf95916cd40e7f?s=128&d=identicon&r=PG&f=1", "display_name": "KittiCat", "link": "https://stackoverflow.com/users/3607053/kitticat"}, "reply_to_user": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "edited": false, "score": 0, "creation_date": 1427284350, "post_id": 29254590, "comment_id": 46712661, "body": "Thank you!!! This is worked! I commented down below on @RickyMutschlechner&#39;s post, just confirming I understood the problem right. Just one more question (that is probably very stupid), would size still be 1 now?"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 1, "creation_date": 1427284483, "post_id": 29254590, "comment_id": 46712754, "body": "Note that this isn&#39;t the only problem in your program. You allocate 1 byte of memory even though you should allocate <code>sizeof(int)</code> bytes of memory."}, {"owner": {"reputation": 41, "user_id": 3607053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34247ca49ce454aa31cf95916cd40e7f?s=128&d=identicon&r=PG&f=1", "display_name": "KittiCat", "link": "https://stackoverflow.com/users/3607053/kitticat"}, "edited": false, "score": 0, "creation_date": 1427284959, "post_id": 29254590, "comment_id": 46713055, "body": "@juhist Oh! I think I understand. So I&#39;m not allocating enough memory for even a single int?"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 1, "creation_date": 1427285404, "post_id": 29254590, "comment_id": 46713300, "body": "Correction: you should allocate <code>sizeof(void*)</code>, not <code>sizeof(int)</code>. I have edited my post to show how you should allocate the memory."}, {"owner": {"reputation": 41, "user_id": 3607053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34247ca49ce454aa31cf95916cd40e7f?s=128&d=identicon&r=PG&f=1", "display_name": "KittiCat", "link": "https://stackoverflow.com/users/3607053/kitticat"}, "edited": false, "score": 0, "creation_date": 1427285735, "post_id": 29254590, "comment_id": 46713545, "body": "Okay, just to make sure I understand what&#39;s going on: so initially I had s, but had not allocated it memory, and so had to do so. Then I also had to allocate memory to s-&gt;A, which is fine, but instead of giving it room to fit a &quot;void*&quot; (since it&#39;s an array of void*), I had just given it 1 byte. And that&#39;s why I should use sizeof(void*) * s-&gt;size, so that s-&gt;size tells me how many void* I can fit in the array? Does that mean that when I realloc, I only realloc for s-&gt;A or should I realloc memory for s too?"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 0, "creation_date": 1427285902, "post_id": 29254590, "comment_id": 46713683, "body": "You don&#39;t need to reallocate memory for <code>s</code> too because it is fixed-size. But memory for <code>s-&gt;A</code> needs to be reallocated if <code>size</code> grows. I recommend adding <code>capacity</code> in addition to <code>size</code> and allocating memory for <code>capacity</code> entries. Then, <code>size</code> tells how many entries contain useful data and <code>capacity</code> tells how many entries fit into the array at most. Then, when <code>size</code> would exceed <code>capacity</code>, you multiply <code>capacity</code> by 2 and <code>realloc</code> memory for the new <code>capacity</code>."}], "tags": [], "owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "is_accepted": true, "score": 4, "last_activity_date": 1427284560, "last_edit_date": 1427284560, "creation_date": 1427283491, "answer_id": 29254590, "question_id": 29254536, "link": "https://stackoverflow.com/questions/29254536/segfault-using-dynamic-array/29254590#29254590", "title": "Segfault using dynamic array", "body": "<p>This is your problem:</p>\n\n<pre><code>Stack *s; \ns-&gt;size = 1;\n</code></pre>\n\n<p>you're not actually allocating a <code>Stack</code>. <code>s</code> is uninitialized and points to an arbitrary location in the memory. <code>s-&gt;size</code> will obviously fail then.</p>\n\n<p>Try:</p>\n\n<pre><code>Stack *s = malloc(sizeof(*s));\nif (s == NULL)\n{\n    fprintf(stderr, \"Memory allocation error\\n\");\n    exit(1);\n}\ns-&gt;size = 1;\n</code></pre>\n\n<p>Note: you should also check if <code>s-&gt;A</code> is <code>NULL</code>. If so, return an error code (such as <code>NULL</code>) and before that remember to free the <code>Stack</code> you allocated, or alternatively print an error message and exit the program. If you exit the program, the operating system will reclaim all memory used so no need to do it explicitly then.</p>\n\n<p>Another note: when doing</p>\n\n<pre><code>s-&gt;size = 1; \ns-&gt;top = -1; \ns-&gt;A = (void **)malloc(s-&gt;size);\n</code></pre>\n\n<p>...you allocate 1 byte of memory even though you should be allocating <code>sizeof(void*)</code> bytes of memory. Try doing</p>\n\n<pre><code>s-&gt;A = (void **)malloc(s-&gt;size*sizeof(void*));\n</code></pre>\n\n<p>instead.</p>\n"}, {"comments": [{"owner": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "edited": false, "score": 0, "creation_date": 1427283577, "post_id": 29254595, "comment_id": 46712176, "body": "Fixed some typos in the answer."}, {"owner": {"reputation": 41, "user_id": 3607053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34247ca49ce454aa31cf95916cd40e7f?s=128&d=identicon&r=PG&f=1", "display_name": "KittiCat", "link": "https://stackoverflow.com/users/3607053/kitticat"}, "edited": false, "score": 0, "creation_date": 1427284149, "post_id": 29254595, "comment_id": 46712542, "body": "Thank you! So the problem was that I was trying to access s, when I hadn&#39;t actually allocated it memory, right? Does that mean that later on when using realloc, I should also realloc s (and not s-&gt;A)?"}, {"owner": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "reply_to_user": {"reputation": 41, "user_id": 3607053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34247ca49ce454aa31cf95916cd40e7f?s=128&d=identicon&r=PG&f=1", "display_name": "KittiCat", "link": "https://stackoverflow.com/users/3607053/kitticat"}, "edited": false, "score": 0, "creation_date": 1427287895, "post_id": 29254595, "comment_id": 46715031, "body": "@KittiCat yep! Exactly."}], "tags": [], "owner": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1427283847, "last_edit_date": 1427283847, "creation_date": 1427283501, "answer_id": 29254595, "question_id": 29254536, "link": "https://stackoverflow.com/questions/29254536/segfault-using-dynamic-array/29254595#29254595", "title": "Segfault using dynamic array", "body": "<p>Here's your first problem:</p>\n\n<pre><code>Stack *s; \ns-&gt;size = 1; \n</code></pre>\n\n<p>What do you actually expect the value of <code>s</code> is at this point? It could be literally <strong><em>anything</em></strong>. You can't set a field of a struct if the struct itself isn't already allocated.</p>\n\n<p>Try:</p>\n\n<pre><code>Stack *s = malloc(sizeof(*s));\nif(!s){\n     //... error checking / exiting ..\n} \n</code></pre>\n\n<p>and then everything else you were doing. </p>\n"}, {"comments": [{"owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "edited": false, "score": 0, "creation_date": 1427283993, "post_id": 29254744, "comment_id": 46712451, "body": "Please remove all the casts... This is C, not C++."}], "tags": [], "owner": {"reputation": 187, "user_id": 4689198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb535642d33ae7414220d808ea0577ba?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Yellow", "link": "https://stackoverflow.com/users/4689198/mr-yellow"}, "is_accepted": false, "score": 1, "last_activity_date": 1427283910, "creation_date": 1427283910, "answer_id": 29254744, "question_id": 29254536, "link": "https://stackoverflow.com/questions/29254536/segfault-using-dynamic-array/29254744#29254744", "title": "Segfault using dynamic array", "body": "<p>You are accessing a not initialized pointer! </p>\n\n<pre><code>Stack \n*stack_new() {\n    Stack *s = std::nullptr;  // initialize this pointer with nullptr\n                              // and then you will see later (one line\n                              // beyond) that you will try to access a\n                              // null pointer\n    s-&gt;size = 1; // the problem occurs here!!\n                 // you are accessing a pointer, for which has never\n                 // been allocated any memory\n    s-&gt;top = -1; \n    s-&gt;A = (void **)malloc(s-&gt;size);\n    return s;\n}\n</code></pre>\n\n<p>You will have to use \"malloc\" to allocate some memory for this pointer.\nsth. like this is missing between those two lines, I commented:</p>\n\n<p>Stack </p>\n\n<pre><code>*stack_new() {\n  Stack *s = (Stack*)malloc(sizeof(Stack));\n  s-&gt;size = 1;\n  s-&gt;top = -1; \n  s-&gt;A = (void **)malloc(s-&gt;size);\n  return s;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 3607053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34247ca49ce454aa31cf95916cd40e7f?s=128&d=identicon&r=PG&f=1", "display_name": "KittiCat", "link": "https://stackoverflow.com/users/3607053/kitticat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 29254590, "answer_count": 3, "score": -1, "last_activity_date": 1427284560, "creation_date": 1427283303, "question_id": 29254536, "link": "https://stackoverflow.com/questions/29254536/segfault-using-dynamic-array", "title": "Segfault using dynamic array", "body": "<p>Apologies for the really bad question - I wasn't really sure how to word it.\nI'm executing a piece of code where I'm trying to use a dynamic array. It is segfault-ing at this line: </p>\n\n<pre><code>void myFunction(....) {\n     // other code up here\n     Stack *s = stack_new(); //segfault here\n}\n</code></pre>\n\n<p>The relevant header file for my struct is:</p>\n\n<pre><code>typedef struct {\n    void **A;   \n    int size;   \n    int top;    // the index of the current top of the stack\n} Stack;\n</code></pre>\n\n<p>and the function stack_new() is:</p>\n\n<pre><code>Stack \n*stack_new() {\n    Stack *s; \n    s-&gt;size = 1; \n    s-&gt;top = -1; \n    s-&gt;A = (void **)malloc(s-&gt;size);\n    return s;\n}\n</code></pre>\n\n<p>I think I've included everything that is relevant, but please let me know if you need more code.</p>\n\n<p>I think that the problem is with the way I'm using malloc, but have had a search online and have tried a few different options and am still getting the segfault. Is anyone able to offer some insight?</p>\n\n<p>Thank you heaps</p>\n"}, {"tags": ["c", "sockets", "dhcp"], "comments": [{"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1427283160, "post_id": 29254409, "comment_id": 46711914, "body": "How do you create your socket?"}, {"owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "edited": false, "score": 0, "creation_date": 1427283496, "post_id": 29254409, "comment_id": 46712127, "body": "And what is inside <code>dest</code>. Are you sending it to the broadcast address? What is the content of your routing tables?"}, {"owner": {"reputation": 948, "user_id": 1924068, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/09145f533a1a4bff80fdadd9e8530b81?s=128&d=identicon&r=PG", "display_name": "Yann", "link": "https://stackoverflow.com/users/1924068/yann"}, "reply_to_user": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "edited": false, "score": 0, "creation_date": 1427283886, "post_id": 29254409, "comment_id": 46712376, "body": "@mcleod_ideafix <code>dest</code> is a pointer to <code>sockaddr_bcast</code> which is filled out toward the end of <code>send_dhcp_discover</code>. And as far as routing tables, not a clue, I&#39;ll look them up."}, {"owner": {"reputation": 948, "user_id": 1924068, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/09145f533a1a4bff80fdadd9e8530b81?s=128&d=identicon&r=PG", "display_name": "Yann", "link": "https://stackoverflow.com/users/1924068/yann"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1427284170, "post_id": 29254409, "comment_id": 46712551, "body": "@Marian I updated the question to include the socket creation function"}, {"owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "edited": false, "score": 0, "creation_date": 1427284951, "post_id": 29254409, "comment_id": 46713052, "body": "Try running your program with <code>strace</code> and check return code from every system call you use for sending your packet"}, {"owner": {"reputation": 948, "user_id": 1924068, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/09145f533a1a4bff80fdadd9e8530b81?s=128&d=identicon&r=PG", "display_name": "Yann", "link": "https://stackoverflow.com/users/1924068/yann"}, "reply_to_user": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "edited": false, "score": 0, "creation_date": 1427285966, "post_id": 29254409, "comment_id": 46713729, "body": "@mcleod_ideafix The box I&#39;m running on doesn&#39;t have <code>strace</code>, irritatingly enough. Any alternatives that you know of, or just <code>printf</code>?"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 0, "creation_date": 1427288214, "post_id": 29254409, "comment_id": 46715259, "body": "Note: you should be using <code>htonl</code> for <code>INADDR_BROADCAST</code> and <code>INADDR_ANY</code>: <a href=\"http://stackoverflow.com/questions/6081892/does-sin-addr-s-addr-inaddr-any-need-htonl-at-all\" title=\"does sin addr s addr inaddr any need htonl at all\">stackoverflow.com/questions/6081892/&hellip;</a>"}, {"owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "edited": false, "score": 0, "creation_date": 1427288939, "post_id": 29254409, "comment_id": 46715790, "body": "<code>strace</code> doesn&#39;t seem to need special priviledges (it hasn&#39;t its S-UID set). Maybe you can compile it from sources"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 1, "creation_date": 1427292850, "post_id": 29254409, "comment_id": 46718642, "body": "@juhist, the various answers to the question you linked point out that you do not technically <i>need</i> to use <code>htonl()</code> with <code>INADDR_BROADCAST</code> and <code>INADDR_ANY</code>, and they demonstrate that opinions are divided over whether you <i>should</i>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1427294385, "post_id": 29254409, "comment_id": 46719792, "body": "Since the code seems to be part of a DHCP client, I presume it runs when the client machine doesn&#39;t know any of its (correct) network parameters.  It seems plausible that this would lead to routing failures (which appears to be what the error is indicating), even for a broadcast.  Perhaps it would help if you set socket option <code>SO_DONTROUTE</code>."}, {"owner": {"reputation": 342, "user_id": 5071313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-VjRd3caK_z8/AAAAAAAAAAI/AAAAAAAAAP8/LXAHpwQOYTA/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/5071313/mhk"}, "edited": false, "score": 0, "creation_date": 1469544197, "post_id": 29254409, "comment_id": 64574148, "body": "@Yann i have similar problem on a similar board... my program works on full stack linux machines but when moved to this embedded linux board it sends no broadcast packets at all... i testes it with tcpdump and there is no packets. I checked the errorno and the problem is network unreachable... I tested what proposed in comments and nothing worked do you find a working solution?"}], "owner": {"reputation": 948, "user_id": 1924068, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/09145f533a1a4bff80fdadd9e8530b81?s=128&d=identicon&r=PG", "display_name": "Yann", "link": "https://stackoverflow.com/users/1924068/yann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2165, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427284138, "creation_date": 1427282939, "last_edit_date": 1427284138, "question_id": 29254409, "link": "https://stackoverflow.com/questions/29254409/sendto-function-setting-network-is-unreachable-errno", "title": "sendto function setting &quot;network is unreachable&quot; errno", "body": "<p>I'll apologise for any lack of clarity, and I'll do my best to update with any missed info, but I'm struggling to understand what I need to do to figure out why the network is unreachable.</p>\n\n<p>I'm getting the output \"sendto failed Network is unreachable\" from the function</p>\n\n<pre><code>int send_dhcp_packet(void * buffer, int buffer_size, int sock, struct sockaddr_in* dest)\n{\n    int result;\n\n    result = sendto(sock, (char*) buffer, buffer_size, 0, (struct sockaddr*)dest, sizeof(*dest));\n\n    if(result &lt; 0)\n    {\n        printf(\"sendto failed %s\\n\", strerror(errno));\n        return -1;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Where buffer is a struct of type dhcp_packet</p>\n\n<pre><code>typedef struct dhcp_packet_struct\n{\n    uint8_t op; //Packet type\n    uint8_t htype; //Type of hardware address for this machine\n    uint8_t hlen; //Length of hardware address for this machine\n    uint8_t hops; //Number of hops to the gateway\n    uint32_t xid; //Random transaction ID to match this boot request with responses\n    uint16_t secs; //Seconds since booted\n    uint16_t flags; //Flags for the packet \n\n    struct in_addr ciaddr; //IP of this machine if it has one\n    struct in_addr yiaddr; //IP of this machine offered by the DHCP server\n    struct in_addr siaddr; //IP of the DHCP server\n    struct in_addr giaddr; //IP of the DHCP relay\n\n    unsigned char chaddr[MAX_DHCP_CHADDR_LENGTH]; //Hardware address of this machine\n    char sname[MAX_DHCP_SNAME_LENGTH]; //Name of DHCP server\n    char file[MAX_DHCP_FILE_LENGTH]; //Boot file name (full path qualified, null terminated string. Used by later sessions)\n    char options[MAX_DHCP_OPTIONS_LENGTH]; //DHCP options. Variable length octet strings\n}dhcp_packet;\n</code></pre>\n\n<p>And I'm setting it up in the following function</p>\n\n<pre><code>int send_dhcp_discover(int sock)\n{\n    dhcp_packet discover_packet;\n    struct sockaddr_in sockaddr_bcast;\n\n    //We're setting up the discover packet\n    bzero(&amp;discover_packet, sizeof(discover_packet));\n\n    discover_packet.op = BOOTREQUEST;\n\n    discover_packet.htype = ETHERNET_HARDWARE_ADDRESS;\n\n    discover_packet.hlen = ETHERNET_HARDWARE_ADDRESS_LENGTH;\n\n    discover_packet.hops = 0;\n\n    srand(time(NULL));\n    packet_xid = random();\n    discover_packet.xid = htonl(packet_xid);\n    ntohl(packet_xid);\n\n    discover_packet.secs = DHCP_PACKET_SECS;\n\n    //Tell the server to broadcast it's response\n    discover_packet.flags = htons(DHCP_BROADCAST_FLAG);\n\n    memcpy(discover_packet.chaddr, client_hardware_address, ETHERNET_HARDWARE_ADDRESS_LENGTH); //Our hw address\n\n    //First 4 bytes is a magic cookie\n    discover_packet.options[0] = '\\x63';\n    discover_packet.options[1] = '\\x82';\n    discover_packet.options[2] = '\\x53';\n    discover_packet.options[3] = '\\x63';\n\n    discover_packet.options[4] = DHCP_OPTION_MESSAGE_TYPE;\n    discover_packet.options[5] = '\\x01'; //Message option length (bytes)\n    discover_packet.options[6] = DHCPDISCOVER;\n\n    if(request_specific_address)\n    {\n        discover_packet.options[7] = DHCP_OPTION_REQUESTED_ADDRESS;\n        discover_packet.options[8] = '\\x04'; //Length (bytes)\n        memcpy(&amp;discover_packet.options[9], &amp;requested_address, sizeof(requested_address));\n    }\n\n    //Send the discover packet to the broadcast address\n    //Set up the struct\n    sockaddr_bcast.sin_family = AF_INET;\n    sockaddr_bcast.sin_port = htons(DHCP_SERVER_PORT);\n    sockaddr_bcast.sin_addr.s_addr = INADDR_BROADCAST;\n    bzero(&amp;sockaddr_bcast.sin_zero, sizeof(sockaddr_bcast.sin_zero));\n\n    //Send the damn packet already\n    send_dhcp_packet(&amp;discover_packet, sizeof(discover_packet), sock, &amp;sockaddr_bcast);\n\n    return 0;\n}\n</code></pre>\n\n<p>How the socket is set up</p>\n\n<pre><code>int create_dhcp_socket()\n{\n    struct sockaddr_in name;\n    struct ifreq interface;\n    int sock;\n    int flag = 1;\n\n    //Set up the address that we're going to use\n    bzero(&amp;name, sizeof(name));\n    name.sin_family = AF_INET;\n    name.sin_port = htons(DHCP_CLIENT_PORT); //Converts from host byte order to network byte order\n    name.sin_addr.s_addr = INADDR_ANY; //Listen on any address\n\n    //Create a socket\n    sock = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP); //Creates endpoint using ipv4, supporting datagrams over UDP\n    if(sock &lt; 0)\n    {\n        printf(\"Error: couldn't create socket\\n\");\n        return -1;\n    }\n\n    flag = 1;\n\n    //Set the reuse option so there aren't errors on restarting\n    if(setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, (char*)&amp;flag, sizeof(flag)) &lt; 0)\n    {\n        printf(\"Error: couldn't set reuse option on DHCP socket\\n\");\n        return -1;\n    }\n\n    //Set the broadcast option\n    if(setsockopt(sock, SOL_SOCKET, SO_BROADCAST, (char*)&amp;flag, sizeof(flag)) &lt; 0)\n    {\n        printf(\"Error: couldn't set broadcast option on DHCP socket\\n\");\n        return -1;\n    }\n\n    strncpy(interface.ifr_ifrn.ifrn_name, network_interface_name, IFNAMSIZ);\n\n    if(bind(sock, (struct sockaddr*)&amp;name, sizeof(name)) &lt; 0)\n    {\n        printf(\"Error: couldn't bind DHCP socket (port %d). Check yo privilage\\n\", DHCP_CLIENT_PORT);\n        return -1;\n    }\n\n    return sock;\n}\n</code></pre>\n\n<p>I guess the question is; why is the network unreachable and how do I fix it so that it's reachable?</p>\n"}, {"tags": ["c", "realloc"], "comments": [{"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 2, "creation_date": 1427282785, "post_id": 29254313, "comment_id": 46711680, "body": "Try <code>realloc(tamias-&gt;Tamies ,sizeof(TTamias) * neo_plithos);</code>"}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1427282919, "post_id": 29254313, "comment_id": 46711760, "body": "@Marian You should post that as an answer - not a comment."}], "answers": [{"comments": [{"owner": {"reputation": 114, "user_id": 4650828, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7c3ac75868538d3cb30249fc62145d9a?s=128&d=identicon&r=PG&f=1", "display_name": "aragon", "link": "https://stackoverflow.com/users/4650828/aragon"}, "edited": false, "score": 0, "creation_date": 1427314973, "post_id": 29254437, "comment_id": 46733279, "body": "I try that but the problem is remaining.The program stop exetution in the that line."}], "tags": [], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "is_accepted": false, "score": 1, "last_activity_date": 1427283030, "creation_date": 1427283030, "answer_id": 29254437, "question_id": 29254313, "link": "https://stackoverflow.com/questions/29254313/realloc-no-execute/29254437#29254437", "title": "Realloc no execute", "body": "<p>When reallocating, you have forgotten to multiply the dimension by the unit size. The correct line shall be:</p>\n\n<pre><code>tamias-&gt;Tamies = (TTamias*)realloc(tamias-&gt;Tamies , sizeof(TTamias) * neo_plithos);\n</code></pre>\n"}], "owner": {"reputation": 114, "user_id": 4650828, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7c3ac75868538d3cb30249fc62145d9a?s=128&d=identicon&r=PG&f=1", "display_name": "aragon", "link": "https://stackoverflow.com/users/4650828/aragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427283030, "creation_date": 1427282676, "question_id": 29254313, "link": "https://stackoverflow.com/questions/29254313/realloc-no-execute", "title": "Realloc no execute", "body": "<p>First of all,the names of variables are in greek.\nIt's impossible to saw all the code,because is many files.\nHowever a have a struct  </p>\n\n<pre><code>typedef struct{\n  TTamias* Tamies;\n}TPinakasTamiwn;\n</code></pre>\n\n<p>And TTamias is type</p>\n\n<pre><code>typedef struct{\n  int  time_busy;           /*xronos apasxolhshs tou tamia*/\n  int  time_inactive;       /*xronos pou o tamias einai adranhs*/\n  int  arithos_pelaton;      /*posous pelates eksipiretise o tamias*/\n  int  enapomenon_xronos;   /*enapomenon xronos eksipiretisi enos pelath*/\n}TTamias;\n</code></pre>\n\n<p>With this function in main i create an array</p>\n\n<pre><code>void DimourgiaTamiwn(TPinakasTamiwn* tamias)\n{\n  tamias-&gt;Tamies = (TTamias*)malloc(sizeof(TTamias) * TAMIES);\n}\n</code></pre>\n\n<p>After some comparisons i want to raise the size of array with this function</p>\n\n<pre><code>int ProsthikiTamia(TPinakasTamiwn* tamias,int plithos_tamiwn)\n{\n  TTamias* NeoiTamies;\n  int neo_plithos = plithos_tamiwn + 1;\n  NeoiTamies = (TTamias*)malloc(sizeof(TTamias) * neo_plithos);\n  for(int i = 0; i &lt; plithos_tamiwn; i++)\n     NeoiTamies[i] = tamias-&gt;Tamies[i];\n\n  for(int i = neo_plithos - plithos_tamiwn; i &lt; neo_plithos; i++)\n     TamiasDimiourgia(&amp;NeoiTamies[i]);//fuction to initialize the data member of extra index\n\n  tamias-&gt;Tamies = (TTamias*)realloc(tamias-&gt;Tamies , neo_plithos);//  &lt;-----PROBLEM\n\n  for(int i = 0; i &lt; neo_plithos; i++)\n     tamias-&gt;Tamies[i] = NeoiTamies[i];\n  free(NeoiTamies);\n  return neo_plithos;\n}\n</code></pre>\n\n<p>The function return the new size that is raise than one.\nI create a local array and copy to that the main array,\ni want to reallocate the main array and copy again the local array to new main array.\nDoesn't appear compile error,but in execution (also at debug) the program break at realloc.</p>\n"}, {"tags": ["c", "linux", "pthreads"], "comments": [{"owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "edited": false, "score": 1, "creation_date": 1427282668, "post_id": 29254282, "comment_id": 46711608, "body": "What does ulimit -a say?"}, {"owner": {"reputation": 3535, "user_id": 1409374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d424fe924f2139812a4a6de1ef6b79?s=128&d=identicon&r=PG", "display_name": "rickhg12hs", "link": "https://stackoverflow.com/users/1409374/rickhg12hs"}, "edited": false, "score": 0, "creation_date": 1427283269, "post_id": 29254282, "comment_id": 46711985, "body": "You may want to look at <code>man 5 core</code> and its references, as well."}, {"owner": {"reputation": 1225, "user_id": 1776857, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/HASO9.jpg?s=128&g=1", "display_name": "Jatin Bodarya", "link": "https://stackoverflow.com/users/1776857/jatin-bodarya"}, "edited": false, "score": 0, "creation_date": 1427284401, "post_id": 29254282, "comment_id": 46712697, "body": "Please find ulimit -a output at the question"}, {"owner": {"reputation": 1225, "user_id": 1776857, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/HASO9.jpg?s=128&g=1", "display_name": "Jatin Bodarya", "link": "https://stackoverflow.com/users/1776857/jatin-bodarya"}, "edited": false, "score": 0, "creation_date": 1427284814, "post_id": 29254282, "comment_id": 46712959, "body": "I can generate other core files at the same location."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1427291762, "post_id": 29254282, "comment_id": 46717891, "body": "<code>suid</code> binaries will refuse to dump core for security reasons."}, {"owner": {"reputation": 1225, "user_id": 1776857, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/HASO9.jpg?s=128&g=1", "display_name": "Jatin Bodarya", "link": "https://stackoverflow.com/users/1776857/jatin-bodarya"}, "edited": false, "score": 0, "creation_date": 1427694877, "post_id": 29254282, "comment_id": 46865998, "body": "ll /usr/sbin/skeen -rwxr-xr-x    1 root     root      2078174 Oct 15  2013 /usr/sbin/skeen"}], "owner": {"reputation": 1225, "user_id": 1776857, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/HASO9.jpg?s=128&g=1", "display_name": "Jatin Bodarya", "link": "https://stackoverflow.com/users/1776857/jatin-bodarya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1427284376, "creation_date": 1427282594, "last_edit_date": 1427284376, "question_id": 29254282, "link": "https://stackoverflow.com/questions/29254282/segmentation-fault-doesnot-give-core-file", "title": "segmentation fault doesnot give core file", "body": "<pre><code>OS : centos 5\nldd --version\nldd (GNU libc) 2.5\n</code></pre>\n\n<p>I have a binary with multiple threads,</p>\n\n<p>in /var/log/messages</p>\n\n<pre><code>Mar 25 10:57:46 1427261266 kernel: skeen[21480]: segfault at 48 ip b7706ac0 sp bfc2e448 error 4 in libpthread-2.5.so[b76fc000+15000]\n</code></pre>\n\n<p>setting is :</p>\n\n<pre><code>[root@manage ~]# ulimit -a\ncore file size          (blocks, -c) 1000000\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0\nfile size               (blocks, -f) unlimited\npending signals                 (-i) 15931\nmax locked memory       (kbytes, -l) 64\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 1024\npipe size            (512 bytes, -p) 8\nPOSIX message queues     (bytes, -q) 819200\nreal-time priority              (-r) 0\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 15931\nvirtual memory          (kbytes, -v) unlimited\nfile locks                      (-x) unlimited\n[root@manage ~]# cat /proc/sys/kernel/core_pattern\n    /var/cores/core.%e.%p.%h.%t\n</code></pre>\n\n<p>But still I couldn't get any \"core\" file in /var/cores location.\nFurther my binary is still running.What above line actually showing ? any why is not any core file generated ?</p>\n"}, {"tags": ["c", "pointers", "printing"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427282896, "post_id": 29254224, "comment_id": 46711751, "body": "Don&#39;t print pointers, except for debugging. Printing them is useless and non-portable. Pointer addresses are often non reproducible, because of <a href=\"http://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow noreferrer\">ASLR</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 1, "last_activity_date": 1427282528, "creation_date": 1427282528, "answer_id": 29254267, "question_id": 29254224, "link": "https://stackoverflow.com/questions/29254224/how-to-print-a-pointer-pointing-to-a-pointer/29254267#29254267", "title": "How to print a pointer pointing to a pointer", "body": "<p>Try this:</p>\n\n<pre><code>char **p=NULL; \nchar *sk=\"hello\"; \np=&amp;sk; // p should be a pointer-to-pointer to char\nprintf(\"%s\",*p);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>char *p=NULL; \nchar *sk=\"hello\"; \np=sk; \nprintf(\"%s\",p);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 3, "last_activity_date": 1427282561, "creation_date": 1427282561, "answer_id": 29254276, "question_id": 29254224, "link": "https://stackoverflow.com/questions/29254224/how-to-print-a-pointer-pointing-to-a-pointer/29254276#29254276", "title": "How to print a pointer pointing to a pointer", "body": "<pre><code>p = &amp;sk; // put the address of pointer sk in p\n</code></pre>\n\n<p><strong>Note that this is illegal! The type of <code>p</code> is <code>char*</code>; the type of <code>&amp;sk</code> is <code>char**</code>. These types are not compatible. Your compiler should have warned you about the assignment between incompatible types.</strong></p>\n\n<p>Turn on all your compiler warnings and mind them!</p>\n"}, {"tags": [], "owner": {"reputation": 8450, "user_id": 2842375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25280992c96f51e2b09f71beb360ef?s=128&d=identicon&r=PG&f=1", "display_name": "shauryachats", "link": "https://stackoverflow.com/users/2842375/shauryachats"}, "is_accepted": false, "score": 1, "last_activity_date": 1427282964, "last_edit_date": 1427282964, "creation_date": 1427282564, "answer_id": 29254277, "question_id": 29254224, "link": "https://stackoverflow.com/questions/29254224/how-to-print-a-pointer-pointing-to-a-pointer/29254277#29254277", "title": "How to print a pointer pointing to a pointer", "body": "<pre><code>p = &amp;sk;\n</code></pre>\n\n<p>The above statement assigns the address of <code>sk</code> into <code>p</code>, which needs <code>p</code> to be a <code>char **</code>, but in your original code, <code>p</code> is a <code>char *</code>, hence the <strong>assignment of <code>p</code> and <code>sk</code> is illegal</strong>.</p>\n\n<p>Things you could do:</p>\n\n<ol>\n<li><p>Assign <code>p</code> to <code>sk</code>. Change your code to:</p>\n\n<pre><code>p = sk;\nprintf(\"%s\",p);\n</code></pre></li>\n<li><p>Change <code>p</code> to <code>char **</code> and then assign <code>p</code> the address of pointer <code>sk</code>.</p>\n\n<pre><code>char **p;\np = &amp;sk;\nprintf(\"%s\",*p); //Prints the string pointed by the char **p\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 4711727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407cec8042c726109f11f1d8a3584258?s=128&d=identicon&r=PG&f=1", "display_name": "Michalis", "link": "https://stackoverflow.com/users/4711727/michalis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 29254276, "answer_count": 3, "score": -2, "last_activity_date": 1427283334, "creation_date": 1427282409, "last_edit_date": 1427283334, "question_id": 29254224, "link": "https://stackoverflow.com/questions/29254224/how-to-print-a-pointer-pointing-to-a-pointer", "title": "How to print a pointer pointing to a pointer", "body": "<p>I'm using this code</p>\n\n<pre><code>char *p=NULL;\nchar *sk=\"hello\";\np=&amp;sk;\nprintf(\"%s\",p);\n</code></pre>\n\n<p>I wanted to print hello but instead I take the address(or symbols in case of %s).<br>\n How do I fix that?</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1600956835, "post_id": 29254127, "comment_id": 113258530, "body": "Related: <a href=\"https://stackoverflow.com/questions/530614/print-leading-zeros-with-c-output-operator\" title=\"print leading zeros with c output operator\">stackoverflow.com/questions/530614/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3187, "user_id": 4350216, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uYP0f.jpg?s=128&g=1", "display_name": "Ali Akber", "link": "https://stackoverflow.com/users/4350216/ali-akber"}, "is_accepted": true, "score": 17, "last_activity_date": 1427288408, "last_edit_date": 1427288408, "creation_date": 1427282193, "answer_id": 29254155, "question_id": 29254127, "link": "https://stackoverflow.com/questions/29254127/printing-leading-spaces-and-zeros-in-c-c/29254155#29254155", "title": "Printing leading spaces and zeros in C/C++", "body": "<p>To print <code>leading space and zero</code> you can  use this :</p>\n\n<pre><code>int x = 119, width = 5;\n\n// Leading Space\nprintf(\"%*d\\n\",width,x);\n\n// Leading Zero\nprintf(\"%0*d\\n\",width,x);\n</code></pre>\n\n<p>So in your program just change this :</p>\n\n<pre><code>int i, digit, width=5, x=15;\n\nif(x%2==0)  // number even\n    printf(\"%*d\\n\",width,x);\nelse        // number odd\n    printf(\"%0*d\\n\",width,x);\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4711728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c09a006501bca6e09841959563d0bf61?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4711728/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9983, "favorite_count": 1, "accepted_answer_id": 29254155, "answer_count": 1, "score": 4, "last_activity_date": 1533190545, "creation_date": 1427282109, "last_edit_date": 1533190545, "question_id": 29254127, "link": "https://stackoverflow.com/questions/29254127/printing-leading-spaces-and-zeros-in-c-c", "title": "Printing leading spaces and zeros in C/C++", "body": "<p>I need to print some leading spaces and zeros before a number, so that the output will be like this:</p>\n\n<pre><code>00015\n   22\n00111\n    8\n  126\n</code></pre>\n\n<p>here, I need to print <code>leading spaces</code> when the number is <code>even</code> and <code>leading zero</code> when <code>odd</code></p>\n\n<p>Here's how I did it :</p>\n\n<pre><code>int i, digit, width=5, x=15;\n\nif(x%2==0)  // number even\n{\n    digit=log10(x)+1;  // number of digit in the number\n    for(i=digit ; i&lt;width ; i++)\n      printf(\" \");\n    printf(\"%d\\n\",x);\n}\nelse       // number odd\n{\n    digit=log10(x)+1;  // number of digit in the number\n    for(i=digit ; i&lt;width ; i++)\n      printf(\"0\");\n    printf(\"%d\\n\",x);\n}\n</code></pre>\n\n<p>Is there any shortcut way to do this ?</p>\n"}, {"tags": ["c", "arrays", "ascii"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1427281589, "post_id": 29253837, "comment_id": 46711001, "body": "That&#39;s OK, these characters you want to print are unprintable, that&#39;s why emoticons are shown"}, {"owner": {"reputation": 93, "user_id": 1797299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5e76c32028461fdc87b508a1be2756a?s=128&d=identicon&r=PG", "display_name": "jonn", "link": "https://stackoverflow.com/users/1797299/jonn"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1427281662, "post_id": 29253837, "comment_id": 46711052, "body": "I want to print those 0 and 1s in char form"}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 4, "last_activity_date": 1427281635, "creation_date": 1427281635, "answer_id": 29253942, "question_id": 29253837, "link": "https://stackoverflow.com/questions/29253837/getting-smiley-faces-instead-of-0-and-1s-when-converting-int-array-to-char-array/29253942#29253942", "title": "Getting smiley faces instead of 0 and 1s when converting int array to char array", "body": "<p>The smiley faces are symbols for \"ASCII\" characters 1 and 2 in Microsoft <a href=\"http://en.wikipedia.org/wiki/Code_page_437\" rel=\"nofollow\">codepage 437</a>; and character 0 is invisible; thus your code performs as expected, but maybe not like you intended.</p>\n\n<p>To fill the char array with the ASCII <code>'0'</code> and <code>'1'</code> characters, you can do</p>\n\n<pre><code>array2[i] = '0' + array[i];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "is_accepted": true, "score": 2, "last_activity_date": 1427281644, "creation_date": 1427281644, "answer_id": 29253947, "question_id": 29253837, "link": "https://stackoverflow.com/questions/29253837/getting-smiley-faces-instead-of-0-and-1s-when-converting-int-array-to-char-array/29253947#29253947", "title": "Getting smiley faces instead of 0 and 1s when converting int array to char array", "body": "<p>Try this:</p>\n\n<pre><code>array2[i] = array[i] + '0';\n</code></pre>\n\n<p>This converts <code>0</code> or <code>1</code> to <code>'0'</code> or <code>'1'</code></p>\n"}, {"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1427281672, "creation_date": 1427281672, "answer_id": 29253959, "question_id": 29253837, "link": "https://stackoverflow.com/questions/29253837/getting-smiley-faces-instead-of-0-and-1s-when-converting-int-array-to-char-array/29253959#29253959", "title": "Getting smiley faces instead of 0 and 1s when converting int array to char array", "body": "<p><code>c</code> conversion specifier prints a character. ASCII values (I assume you live in the ASCII world) <code>0</code> and <code>1</code> are non-printable in ASCII. The ASCII value for <code>'0'</code> and <code>'1'</code> characters are <code>0x30</code> and <code>0x31</code>. The result of printing a non-printable is implementation dependent.</p>\n"}, {"comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1427281916, "post_id": 29254041, "comment_id": 46711192, "body": "No cast needed <code>array2[i]</code> is implicitly converted to <code>int</code> here."}, {"owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1427281993, "post_id": 29254041, "comment_id": 46711226, "body": "Just because the compiler thinks it knows what you want doesn&#39;t mean you should explicitly tell it that is what you want.   Its then also clear the other readers of the code that you intended the cast to happen."}], "tags": [], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "is_accepted": false, "score": 0, "last_activity_date": 1427281862, "last_edit_date": 1495534207, "creation_date": 1427281862, "answer_id": 29254041, "question_id": 29253837, "link": "https://stackoverflow.com/questions/29253837/getting-smiley-faces-instead-of-0-and-1s-when-converting-int-array-to-char-array/29254041#29254041", "title": "Getting smiley faces instead of 0 and 1s when converting int array to char array", "body": "<p>What do you think ASCII character 0 or 1 should look like?   I'm going to guess that on your system it prints as a smiley face because it is normally unprintable.</p>\n\n<p>Maybe print the character as hex instead so you can see the bits are set.   eg :</p>\n\n<pre><code>printf(\"%x\", ch &amp; 0xff);\n</code></pre>\n\n<p>(from solution here : <a href=\"https://stackoverflow.com/questions/8060170/printing-hexadecimal-characters-in-c\">Printing hexadecimal characters in C</a> )</p>\n\n<p>If you want to print characters as ints, you just need to cast them.</p>\n\n<pre><code>printf(\"%d\\n\", (int)array2[i]);\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 1797299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5e76c32028461fdc87b508a1be2756a?s=128&d=identicon&r=PG", "display_name": "jonn", "link": "https://stackoverflow.com/users/1797299/jonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "accepted_answer_id": 29253947, "answer_count": 4, "score": 0, "last_activity_date": 1427281978, "creation_date": 1427281341, "question_id": 29253837, "link": "https://stackoverflow.com/questions/29253837/getting-smiley-faces-instead-of-0-and-1s-when-converting-int-array-to-char-array", "title": "Getting smiley faces instead of 0 and 1s when converting int array to char array", "body": "<p>So I have an array of integers. I use a for loop to transfer the contents of the int array into the char array. The problem is when I output the values, the decimal %d outputs 0 and 1s but the %c outputs a smiley emotion. </p>\n\n<pre><code>int main()\n{\n    int array[10] = {0,1,0,1,1,0,1,1,1,0,0};\n    char array2[10];\n    int i;\n    for(i=0;i&lt;10;i++)\n    {\n        array2[i] = array[i];\n        printf(\"%c %d\\n\", array2[i],array2[i]);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 0, "creation_date": 1427280623, "post_id": 29253497, "comment_id": 46710415, "body": "Are you assigning <code>list.array</code> to point to a valid array before the <code>list.array[0]</code> is accessed?"}, {"owner": {"reputation": 145, "user_id": 3955443, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb8dbb823104919fd7fe347f9babf56?s=128&d=identicon&r=PG&f=1", "display_name": "cp101020304", "link": "https://stackoverflow.com/users/3955443/cp101020304"}, "reply_to_user": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 0, "creation_date": 1427280658, "post_id": 29253497, "comment_id": 46710441, "body": "Just addressed that issue in my most recent edit in the OP"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1427280677, "post_id": 29253497, "comment_id": 46710453, "body": "<code>array</code> is a pointer to pointer to char. You have to <code>strcpy(list.array[0],&quot;a&quot;);</code> But this can crash too. You can first <code>malloc</code> it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1427280763, "post_id": 29253497, "comment_id": 46710509, "body": "<code>list</code> is the name of a type. <code>list.array[0]</code> is an error because <code>.</code> can only be applied to objects."}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 0, "creation_date": 1427280887, "post_id": 29253497, "comment_id": 46710595, "body": "Well, as my code example shows, <code>list</code> can also be a variable name in addition to being a name of a type."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1427280991, "post_id": 29253497, "comment_id": 46710655, "body": "It is however incredibly stupid practice to name your variables the same as the type..."}, {"owner": {"reputation": 243, "user_id": 4011767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba41c86519ceb89402d502b53d4ae9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/4011767/jan"}, "edited": false, "score": 1, "creation_date": 1427281127, "post_id": 29253497, "comment_id": 46710736, "body": "...if it actually was a type. This is C and AFAIK the standard library does not define a list type. Even if it was C++, it would be perfectly fine if you found yourself using namespaces as what they were designed for."}], "answers": [{"tags": [], "owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "is_accepted": false, "score": 1, "last_activity_date": 1427281022, "last_edit_date": 1427281022, "creation_date": 1427280697, "answer_id": 29253598, "question_id": 29253497, "link": "https://stackoverflow.com/questions/29253497/access-array-using-pointer-to-array-stored-in-a-struct-c/29253598#29253598", "title": "access array using pointer to array stored in a struct C", "body": "<p>Change your initialization to:</p>\n\n<pre><code>element_t differentArray[LMAX];\nlist.array = &amp;differentArray[0];\n</code></pre>\n\n<p>The rest of your code should work as is after this change. You don't need any further allocations as long as you only keep putting literals like <code>\"a\"</code> into it.</p>\n"}, {"comments": [{"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 0, "creation_date": 1427281178, "post_id": 29253621, "comment_id": 46710758, "body": "Actually, it is recommended to have the array of pointers as <code>const char *</code> when pointing at string literals, but not mandatory: in standard C, string literals are of type <code>char *</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "edited": false, "score": 1, "creation_date": 1427284959, "post_id": 29253621, "comment_id": 46713054, "body": "@juhist Yes, but that is a known &quot;bug&quot; in the C standard."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1427280751, "creation_date": 1427280751, "answer_id": 29253621, "question_id": 29253497, "link": "https://stackoverflow.com/questions/29253497/access-array-using-pointer-to-array-stored-in-a-struct-c/29253621#29253621", "title": "access array using pointer to array stored in a struct C", "body": "<p><code>typedef char *element_t;</code> Don't hide pointers behind typedefs, this is bad practice as it makes the code unreadable. <code>element_t *array</code> will be the same as <code>char** array</code>. Is this actually what you want?</p>\n\n<p><code>list.array[0] = \"a\";</code> suggests that you intended \"array\" to be an array of pointers? Where do you allocate the actual array? Where do you initialize the struct? list.array[0] is pointing into la-la-land rather than at allocated memory, as far as I can tell from the posted code.</p>\n\n<p>Also, the array of pointers need to be of type <code>const char*</code>, since you are pointing at string literals.</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 3955443, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb8dbb823104919fd7fe347f9babf56?s=128&d=identicon&r=PG&f=1", "display_name": "cp101020304", "link": "https://stackoverflow.com/users/3955443/cp101020304"}, "edited": false, "score": 0, "creation_date": 1427281247, "post_id": 29253638, "comment_id": 46710797, "body": "What if I have a string that I&#39;m going to parse using strtok, and I wish to add those tokens into the array? How would I be able to do that?"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "reply_to_user": {"reputation": 145, "user_id": 3955443, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb8dbb823104919fd7fe347f9babf56?s=128&d=identicon&r=PG&f=1", "display_name": "cp101020304", "link": "https://stackoverflow.com/users/3955443/cp101020304"}, "edited": false, "score": 0, "creation_date": 1427281531, "post_id": 29253638, "comment_id": 46710960, "body": "You need to allocate memory dynamically. Use <code>strdup(strtok(...))</code> and remember to check that memory allocation was successful (i.e. didn&#39;t return <code>NULL</code>) and exit with a clear error message it failed. Remember to also <code>free()</code> the memory allocated by <code>strdup()</code>. Note that <code>strdup()</code> isn&#39;t in standard C but it is typically nevertheless supported. <code>strtok</code> returns the same buffer every time but replaces the buffer contents which is why you need <code>strdup()</code>."}, {"owner": {"reputation": 145, "user_id": 3955443, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb8dbb823104919fd7fe347f9babf56?s=128&d=identicon&r=PG&f=1", "display_name": "cp101020304", "link": "https://stackoverflow.com/users/3955443/cp101020304"}, "edited": false, "score": 0, "creation_date": 1427281881, "post_id": 29253638, "comment_id": 46711171, "body": "What does <code>strdup(strtok(...))</code> do? I just googled it but couldn&#39;t relate it to this particular situation"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "reply_to_user": {"reputation": 145, "user_id": 3955443, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb8dbb823104919fd7fe347f9babf56?s=128&d=identicon&r=PG&f=1", "display_name": "cp101020304", "link": "https://stackoverflow.com/users/3955443/cp101020304"}, "edited": false, "score": 0, "creation_date": 1427283370, "post_id": 29253638, "comment_id": 46712051, "body": "<code>strdup()</code>  allocates a new block of memory which is populated with the argument string. So, it essentially saves the string in the memory block used by <code>strtok()</code> which will be overwritten later in another <code>strtok()</code> call. See <a href=\"http://stackoverflow.com/questions/252782/strdup-what-does-it-do-in-c\" title=\"strdup what does it do in c\">stackoverflow.com/questions/252782/strdup-what-does-it-do-in&zwnj;&#8203;-c</a>"}, {"owner": {"reputation": 145, "user_id": 3955443, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb8dbb823104919fd7fe347f9babf56?s=128&d=identicon&r=PG&f=1", "display_name": "cp101020304", "link": "https://stackoverflow.com/users/3955443/cp101020304"}, "edited": false, "score": 0, "creation_date": 1427283681, "post_id": 29253638, "comment_id": 46712243, "body": "Why is it necessary to do this? Can&#39;t we insert the token into the array right as we obtain it?"}, {"owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "reply_to_user": {"reputation": 145, "user_id": 3955443, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb8dbb823104919fd7fe347f9babf56?s=128&d=identicon&r=PG&f=1", "display_name": "cp101020304", "link": "https://stackoverflow.com/users/3955443/cp101020304"}, "edited": false, "score": 0, "creation_date": 1427283723, "post_id": 29253638, "comment_id": 46712268, "body": "Well, the token points to a memory buffer that will be reused again the next time <code>strtok</code> is called."}], "tags": [], "owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "is_accepted": false, "score": 2, "last_activity_date": 1427280787, "creation_date": 1427280787, "answer_id": 29253638, "question_id": 29253497, "link": "https://stackoverflow.com/questions/29253497/access-array-using-pointer-to-array-stored-in-a-struct-c/29253638#29253638", "title": "access array using pointer to array stored in a struct C", "body": "<p>Seems to work for me:</p>\n\n<pre><code>typedef char *element_t;\n\ntypedef\nstruct {\n  element_t *array;     /* start of the array */\n  int capacity;         /* number of elements the array */\n  int length;           /* used portion of array, 0..capacity */\n} list;\n\nint main(int argc, char **argv)\n{\n    element_t array[2] = {\"foo\", \"bar\"};\n    list list;\n    list.array = array;\n    list.capacity = sizeof(array)/sizeof(array[0]);\n    list.length = 1;\n    printf(\"%s\\n\", list.array[0]);\n    return 0;\n}\n</code></pre>\n\n<p>You are most likely forgetting to assign <code>list.array</code> to point to a valid array.</p>\n"}], "owner": {"reputation": 145, "user_id": 3955443, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb8dbb823104919fd7fe347f9babf56?s=128&d=identicon&r=PG&f=1", "display_name": "cp101020304", "link": "https://stackoverflow.com/users/3955443/cp101020304"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1427281022, "creation_date": 1427280420, "question_id": 29253497, "link": "https://stackoverflow.com/questions/29253497/access-array-using-pointer-to-array-stored-in-a-struct-c", "title": "access array using pointer to array stored in a struct C", "body": "<p>I have a struct defined as following:</p>\n\n<pre><code>typedef char *element_t;\n\ntypedef\nstruct {\n  element_t *array;     /* start of the array */\n  int capacity;         /* number of elements the array */\n  int length;           /* used portion of array, 0..capacity */\n} list;\n</code></pre>\n\n<p>I am trying to access the array that <code>*array</code> points to and assign it a char value and print it.</p>\n\n<p>I'm a bit rusty with C but this is how i'm trying to do it:</p>\n\n<pre><code>list.array[0] = \"a\";\nprintf(\"%s\\n\", list.array[0]);\n</code></pre>\n\n<p>This makes my program crash. Any fixes? </p>\n\n<p>EDIT: I should also mention that I have done the following initialisations too:</p>\n\n<pre><code>element_t* array[LMAX];\nlist.array= *differentArray;\n</code></pre>\n"}, {"tags": ["c", "embedded", "avr"], "comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 3, "creation_date": 1427281340, "post_id": 29253150, "comment_id": 46710845, "body": "What does it mean &quot;not working&quot;? Please be accurate."}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 2, "last_activity_date": 1427288330, "last_edit_date": 1427288330, "creation_date": 1427286351, "answer_id": 29255633, "question_id": 29253150, "link": "https://stackoverflow.com/questions/29253150/adc-not-working-with-atmega8/29255633#29255633", "title": "ADC not working with ATMEGA8", "body": "<p>You have not read ADCH. The data sheet says </p>\n\n<blockquote>\n  <p>When ADCL is read, the ADC Data Register is not updated until ADCH is\n  read. Consequently, if the result is left adjusted and no more than\n  8-bit precision is required, it is sufficient to read ADCH. Otherwise,\n  ADCL must be read first, then ADCH.</p>\n</blockquote>\n\n<pre><code>val = ADCL;\nval = ((ADCH&lt;&lt;8) | val) &amp; 0x3F;\n</code></pre>\n\n<p>You are writing the result to an 8-bit port. If you want an 8-bit conversion then set the ADLAR bit in ADMUX. The 10-bit conversion will then be left-shifted by 6 bits and you can ignore the ls 2 bits in ADCL.</p>\n\n<pre><code>ADMUX = 0xE0;\n...\nval = ADCH;\n</code></pre>\n\n<p>BTW read-modify-write of ADCSRA is not recomended. To clear bit 4 \u2013 ADIF, the ADC Interrupt Flag, you could try</p>\n\n<pre><code>ADCSRA = 0x97;              // rewrite config and clear ADIF\n</code></pre>\n\n<p>Which is your original configuration with the ADIF bit set to clear that flag. Alternatively, you could test bit 6 ADSC which remains high until the conversion is complete, and no action is required to clear it. Since you have not enabled the ADC interrupt, there is no need to clear the ADIF flag.</p>\n\n<pre><code>while (ADCSRA &amp; (1&lt;&lt;ADSC)); // wait for conversion to complete\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4199922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57f4ca33cef87ce2a9c61b4d51731c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Kumar", "link": "https://stackoverflow.com/users/4199922/ankit-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427288330, "creation_date": 1427279442, "last_edit_date": 1427279883, "question_id": 29253150, "link": "https://stackoverflow.com/questions/29253150/adc-not-working-with-atmega8", "title": "ADC not working with ATMEGA8", "body": "<p>I'm trying to execute the following piece of code on ATMEGA8 but the ADC doesn't seem to be working.</p>\n\n<pre><code>#include &lt;avr/io.h&gt;\n#include \"LCD.h\"\n\nint main()\n{\n    int val=0;\n    ADCSRA=0x87;//ADc enabled and prescaler set to fosc/128\n    ADMUX= 0xC0;//REFS0 and REFS1 set using internal 2.5 volts as Vref      \n    DDRC=0x00;// as input for the adc\n    PORTC=0x00;\n    DDRB=0xff;\n\n    while (1)\n    {\n        ADCSRA |=(1&lt;&lt;ADSC);\n        while(!(ADCSRA&amp;(1&lt;&lt;ADIF)));\n        lcd_string(\"Done Conversion\");\n        val=ADCL;\n        PORTB=ADCL;\n        ADCSRA |=(1&lt;&lt;ADIF);//(reseting ADIF to 1)\n        lcd_print(2,1,val,3);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c#", "c", "class"], "comments": [{"owner": {"reputation": 2156, "user_id": 2941906, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/xqttv.jpg?s=128&g=1", "display_name": "puko", "link": "https://stackoverflow.com/users/2941906/puko"}, "edited": false, "score": 0, "creation_date": 1427279897, "post_id": 29253148, "comment_id": 46710016, "body": "no need modifiers in interface and braces too ..."}, {"owner": {"reputation": 202, "user_id": 4381717, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-M7FvI-etB2I/AAAAAAAAAAI/AAAAAAAAABc/POuRV5al2OU/photo.jpg?sz=128", "display_name": "Angela Marie-Daley", "link": "https://stackoverflow.com/users/4381717/angela-marie-daley"}, "reply_to_user": {"reputation": 2156, "user_id": 2941906, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/xqttv.jpg?s=128&g=1", "display_name": "puko", "link": "https://stackoverflow.com/users/2941906/puko"}, "edited": false, "score": 0, "creation_date": 1427280041, "post_id": 29253148, "comment_id": 46710094, "body": "@puko thanks for the tip!"}], "answers": [{"comments": [{"owner": {"reputation": 202, "user_id": 4381717, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-M7FvI-etB2I/AAAAAAAAAAI/AAAAAAAAABc/POuRV5al2OU/photo.jpg?sz=128", "display_name": "Angela Marie-Daley", "link": "https://stackoverflow.com/users/4381717/angela-marie-daley"}, "edited": false, "score": 0, "creation_date": 1427279704, "post_id": 29253224, "comment_id": 46709904, "body": "Awesome, thanks for clarifying this, I can accept your answer in 10"}, {"owner": {"reputation": 50118, "user_id": 913124, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20dGq.jpg?s=128&g=1", "display_name": "Christos", "link": "https://stackoverflow.com/users/913124/christos"}, "reply_to_user": {"reputation": 202, "user_id": 4381717, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-M7FvI-etB2I/AAAAAAAAAAI/AAAAAAAAABc/POuRV5al2OU/photo.jpg?sz=128", "display_name": "Angela Marie-Daley", "link": "https://stackoverflow.com/users/4381717/angela-marie-daley"}, "edited": false, "score": 0, "creation_date": 1427279728, "post_id": 29253224, "comment_id": 46709927, "body": "@AngelaMarie-Daley you welcome. I am glad that I hepled."}], "tags": [], "owner": {"reputation": 50118, "user_id": 913124, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20dGq.jpg?s=128&g=1", "display_name": "Christos", "link": "https://stackoverflow.com/users/913124/christos"}, "is_accepted": true, "score": 2, "last_activity_date": 1427279631, "creation_date": 1427279631, "answer_id": 29253224, "question_id": 29253148, "link": "https://stackoverflow.com/questions/29253148/declare-all-methods-of-inherited-interface-within-interface/29253224#29253224", "title": "Declare all Methods of inherited interface within interface?", "body": "<blockquote>\n  <p>Do you need to redeclare all methods declared in the inherited\n  interface in your interface?</p>\n</blockquote>\n\n<p>No. Actually this is the concept of inheritance. All the methods that are declared in the base interface will be inherited to the derived.</p>\n"}], "owner": {"reputation": 202, "user_id": 4381717, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-M7FvI-etB2I/AAAAAAAAAAI/AAAAAAAAABc/POuRV5al2OU/photo.jpg?sz=128", "display_name": "Angela Marie-Daley", "link": "https://stackoverflow.com/users/4381717/angela-marie-daley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 29253224, "answer_count": 1, "score": 1, "last_activity_date": 1427283765, "creation_date": 1427279437, "last_edit_date": 1427283765, "question_id": 29253148, "link": "https://stackoverflow.com/questions/29253148/declare-all-methods-of-inherited-interface-within-interface", "title": "Declare all Methods of inherited interface within interface?", "body": "<p>Do you need to redeclare all methods declared in the inherited interface in a derived interface?</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>public interface IBoo\n{\n    void DoSomething();\n}\n\npublic interface IFoo : IBoo\n{\n    string SayHello();\n}\n</code></pre>\n\n<p>Or would I have to do this:-</p>\n\n<pre><code>public interface IFoo : IBoo\n{\n    void DoSomething();\n\n    string SayHello();\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "signals", "scanf", "eintr"], "comments": [{"owner": {"reputation": 1203, "user_id": 3775099, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DRvde.jpg?s=128&g=1", "display_name": "Bhuvanesh", "link": "https://stackoverflow.com/users/3775099/bhuvanesh"}, "edited": false, "score": 0, "creation_date": 1427279389, "post_id": 29253086, "comment_id": 46709704, "body": "EINTR is a errno not a signal"}, {"owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 0, "creation_date": 1427279483, "post_id": 29253086, "comment_id": 46709758, "body": "You can try <code>NONBLOCK</code> for getting the input. It will not help you to avoid that."}, {"owner": {"reputation": 1, "user_id": 4711482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b82825b2b2ad99466e6f6dd80cadf?s=128&d=identicon&r=PG&f=1", "display_name": "Pratham", "link": "https://stackoverflow.com/users/4711482/pratham"}, "edited": false, "score": 0, "creation_date": 1427279740, "post_id": 29253086, "comment_id": 46709934, "body": "yes, EINTR is a errno."}, {"owner": {"reputation": 1, "user_id": 4711482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b82825b2b2ad99466e6f6dd80cadf?s=128&d=identicon&r=PG&f=1", "display_name": "Pratham", "link": "https://stackoverflow.com/users/4711482/pratham"}, "edited": false, "score": 0, "creation_date": 1427279782, "post_id": 29253086, "comment_id": 46709956, "body": "below is my code snippet"}, {"owner": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1427279867, "post_id": 29253086, "comment_id": 46709994, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/10086760/program-terminates-if-i-use-scanf\">Program terminates if I use scanf</a>"}, {"owner": {"reputation": 1, "user_id": 4711482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b82825b2b2ad99466e6f6dd80cadf?s=128&d=identicon&r=PG&f=1", "display_name": "Pratham", "link": "https://stackoverflow.com/users/4711482/pratham"}, "edited": false, "score": 0, "creation_date": 1427279919, "post_id": 29253086, "comment_id": 46710030, "body": "g_SerialFileDescriptor = open(portname, O_RDWR | O_NOCTTY | O_NDELAY, 0); if (g_SerialFileDescriptor &lt; 0)  {     //error } else {   /* install the signal handler before making the device asynchronous */   saio.sa_handler = OSAL_Serial_Receive;   saio.sa_flags = 0;   saio.sa_restorer = NULL;   if(sigaction(SIGIO, &amp;saio, NULL) &lt; 0)   {     // error   } }"}, {"owner": {"reputation": 1, "user_id": 4711482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b82825b2b2ad99466e6f6dd80cadf?s=128&d=identicon&r=PG&f=1", "display_name": "Pratham", "link": "https://stackoverflow.com/users/4711482/pratham"}, "edited": false, "score": 0, "creation_date": 1427280732, "post_id": 29253086, "comment_id": 46710490, "body": "thanks Anto  this solved the problem"}, {"owner": {"reputation": 1, "user_id": 4711482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b82825b2b2ad99466e6f6dd80cadf?s=128&d=identicon&r=PG&f=1", "display_name": "Pratham", "link": "https://stackoverflow.com/users/4711482/pratham"}, "edited": false, "score": 0, "creation_date": 1427280760, "post_id": 29253086, "comment_id": 46710505, "body": "is there any other way by which scanf would not be interrupted due to signals ?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1427297959, "post_id": 29253086, "comment_id": 46722423, "body": "@Pratham: If you install the signal handler with the <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow noreferrer\"><code>SA_RESTART</code></a> flag, <code>read()</code> and <code>write()</code> calls will not return <code>EINTR</code> errors in Linux; neither will the <code>scanf()</code> family of standard I/O functions (as they use <code>read()</code> internally). See <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">man 7 signal</a> section <i>&quot;Interruption of system calls and library functions by signal handlers&quot;</i> for details. Although this behaviour is system-specific, all other Unix-like systems I&#39;ve used behave the same way."}, {"owner": {"reputation": 1, "user_id": 4711482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b82825b2b2ad99466e6f6dd80cadf?s=128&d=identicon&r=PG&f=1", "display_name": "Pratham", "link": "https://stackoverflow.com/users/4711482/pratham"}, "edited": false, "score": 0, "creation_date": 1428343836, "post_id": 29253086, "comment_id": 47114647, "body": "SA_RESTART works, thanks for the information."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1442400680, "last_edit_date": 1495539868, "creation_date": 1442400680, "answer_id": 32606542, "question_id": 29253086, "link": "https://stackoverflow.com/questions/29253086/scanf-function-and-eintr-signal/32606542#32606542", "title": "scanf function and EINTR signal", "body": "<p>If you install the signal handler with the <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow noreferrer\"><code>SA_RESTART</code></a> flag, <code>read()</code> and <code>write()</code> calls will not return <code>EINTR</code> errors in Linux; neither will the <code>scanf()</code> family of standard I/O functions (as they use <code>read()</code> internally). See <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">man 7 signal</a> section <em>\"Interruption of system calls and library functions by signal handlers\"</em> for details. Although this behaviour is system-specific, all other Unix-like systems I've used behave the same way. \u2013  <a href=\"https://stackoverflow.com/users/1475978/nominal-animal\">Nominal Animal</a></p>\n"}], "owner": {"reputation": 1, "user_id": 4711482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b82825b2b2ad99466e6f6dd80cadf?s=128&d=identicon&r=PG&f=1", "display_name": "Pratham", "link": "https://stackoverflow.com/users/4711482/pratham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 496, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1442400680, "creation_date": 1427279263, "question_id": 29253086, "link": "https://stackoverflow.com/questions/29253086/scanf-function-and-eintr-signal", "title": "scanf function and EINTR signal", "body": "<p>I am working on Linux platform.\nI have a console based multi-threaded application which loads a multi-threaded shared object library for other functionalities.\nThe shared object library internally opens a serial port for communication.\nThe library uses 'open', 'read' and 'write' Linux system calls for serial communication. Serial communication uses signal-handler to receive data.\nThe main thread in console application waits on 'scanf' statement, to get input from user.</p>\n\n<p>Whenever there is any activity on serial port, signal are generated due to which the 'scanf' call is interrupted with EINTR (interrupted system call).</p>\n\n<p>Is there any way by which 'scanf' would not be interrupted because on read-write operations on serial port ?</p>\n"}, {"tags": ["c", "string", "getchar"], "comments": [{"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 1, "creation_date": 1427279041, "post_id": 29252896, "comment_id": 46709498, "body": "You are writing &quot;\\n&quot; but then immediately overwriting the n with a newline. You need to skip <code>y[m]=x[j];</code> in the case of the substitution."}], "answers": [{"tags": [], "owner": {"reputation": 1203, "user_id": 3775099, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DRvde.jpg?s=128&g=1", "display_name": "Bhuvanesh", "link": "https://stackoverflow.com/users/3775099/bhuvanesh"}, "is_accepted": false, "score": 4, "last_activity_date": 1427279228, "last_edit_date": 1427279228, "creation_date": 1427278868, "answer_id": 29252946, "question_id": 29252896, "link": "https://stackoverflow.com/questions/29252896/i-am-not-getting-desired-o-p-for-this/29252946#29252946", "title": "I am not getting desired o/p for this", "body": "<p>Here It self you can simply add that</p>\n\n<pre><code>  for(i=0; (c=getchar())!=EOF &amp;&amp; i&lt;MAX;i++){\n       if(c=='\\n'){\n          s[i++]='\\\\';\n          s[i]='n';\n       }\n       else\n         s[i]=c;\n     }\n</code></pre>\n\n<p>After Adding you <code>\\ and n</code> on your code you need to <code>conitnue</code> the loop from \nstarting (or), remaining blocks you need to add on the <code>else</code> part</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1427279173, "creation_date": 1427279173, "answer_id": 29253055, "question_id": 29252896, "link": "https://stackoverflow.com/questions/29252896/i-am-not-getting-desired-o-p-for-this/29253055#29253055", "title": "I am not getting desired o/p for this", "body": "<p>You missed out an <code>else</code> in the <code>escape()</code> function, hence the <code>'n'</code> is being overwritten</p>\n\n<pre><code>if (x[j]=='\\n')\n{\n    y[m++] = '\\\\';\n    y[m] = 'n';   \n}\nelse            // &lt;&lt;&lt;--- added a line\n    y[m]=x[j]; \n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 4711450, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a7a901932c4e7214a4cd8a9a8455b45?s=128&d=identicon&r=PG&f=1", "display_name": "amol singh", "link": "https://stackoverflow.com/users/4711450/amol-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 29253055, "answer_count": 2, "score": 1, "last_activity_date": 1427279228, "creation_date": 1427278685, "question_id": 29252896, "link": "https://stackoverflow.com/questions/29252896/i-am-not-getting-desired-o-p-for-this", "title": "I am not getting desired o/p for this", "body": "<p>i want to replace the <code>newline</code> by <code>\\n</code> in a string and i am unable to do this</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define MAX 1000\nvoid escape(char x[],char  y[]);\nmain()\n{\nint c=0,i;\nchar s[MAX],t[MAX];\nfor(i=0; (c=getchar())!=EOF &amp;&amp; i&lt;MAX;i++)\n s[i]=c;\n\ns[i]='\\0';\nfor(int k=0;k&lt;i;k++)\n printf(\"%c\",s[k]);\n\nescape(s,t); \n}\n\nvoid escape(char x[],char y[])\n{\nint j=0,m=0;\nwhile(x[j]!='\\0')\n {\n    if (x[j]=='\\n')\n    {\n      y[m++] = '\\\\';\n      y[m] = 'n';   \n     }\n    y[m]=x[j]; \n    j++; \n    m++;   \n }\n y[m]='\\0';\n for(int k=0;y[k]!='\\0';k++)\n printf(\"%c\",y[k]);  \n}\n</code></pre>\n\n<p>the o/p i get is:</p>\n\n<p>my name is amol</p>\n\n<p>^Z</p>\n\n<p>my name is amol</p>\n\n<p>my name is amol\\</p>\n"}, {"tags": ["c", "merge", "numbers", "hex", "decimal"], "comments": [{"owner": {"reputation": 1447, "user_id": 763394, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/77215be0704e4397fce59a91a95ea903?s=128&d=identicon&r=PG", "display_name": "paykoob", "link": "https://stackoverflow.com/users/763394/paykoob"}, "edited": false, "score": 0, "creation_date": 1427277124, "post_id": 29252261, "comment_id": 46708302, "body": "which language? c++,js,..."}, {"owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "reply_to_user": {"reputation": 1447, "user_id": 763394, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/77215be0704e4397fce59a91a95ea903?s=128&d=identicon&r=PG", "display_name": "paykoob", "link": "https://stackoverflow.com/users/763394/paykoob"}, "edited": false, "score": 0, "creation_date": 1427277317, "post_id": 29252261, "comment_id": 46708424, "body": "sorry I forgot to mention it , I am using C"}], "answers": [{"comments": [{"owner": {"reputation": 242, "user_id": 4697393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8J1Rr.jpg?s=128&g=1", "display_name": "Mariano Macchi", "link": "https://stackoverflow.com/users/4697393/mariano-macchi"}, "edited": false, "score": 0, "creation_date": 1427279102, "post_id": 29252644, "comment_id": 46709534, "body": "This works :)  but there&#39;s no need for &amp;: num3= ((num1&lt;&lt;8)|(num2));"}, {"owner": {"reputation": 868, "user_id": 4402433, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9bce35bd631fc9215f7885d6d0c84366?s=128&d=identicon&r=PG&f=1", "display_name": "Sathiya", "link": "https://stackoverflow.com/users/4402433/sathiya"}, "reply_to_user": {"reputation": 242, "user_id": 4697393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8J1Rr.jpg?s=128&g=1", "display_name": "Mariano Macchi", "link": "https://stackoverflow.com/users/4697393/mariano-macchi"}, "edited": false, "score": 1, "creation_date": 1427279681, "post_id": 29252644, "comment_id": 46709884, "body": "ya.. I have made the change thanks    @MarianoMacchi"}, {"owner": {"reputation": 868, "user_id": 4402433, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9bce35bd631fc9215f7885d6d0c84366?s=128&d=identicon&r=PG&f=1", "display_name": "Sathiya", "link": "https://stackoverflow.com/users/4402433/sathiya"}, "edited": false, "score": 1, "creation_date": 1427280244, "post_id": 29252644, "comment_id": 46710213, "body": "You need to place 25 (0025) followed by 71 (0071) in  a variable, so you have to left shift the first number by 8 bits (0025 to 2500) and combine num2 .Logical or is the equivalent for combining, hence the <code>| </code> symbol."}, {"owner": {"reputation": 457, "user_id": 3125700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ba1P2.png?s=128&g=1", "display_name": "Hridaynath", "link": "https://stackoverflow.com/users/3125700/hridaynath"}, "edited": false, "score": 0, "creation_date": 1508151683, "post_id": 29252644, "comment_id": 80482650, "body": "Excellent! Answer"}], "tags": [], "owner": {"reputation": 868, "user_id": 4402433, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9bce35bd631fc9215f7885d6d0c84366?s=128&d=identicon&r=PG&f=1", "display_name": "Sathiya", "link": "https://stackoverflow.com/users/4402433/sathiya"}, "is_accepted": true, "score": 16, "last_activity_date": 1575414794, "last_edit_date": 1575414794, "creation_date": 1427277928, "answer_id": 29252644, "question_id": 29252261, "link": "https://stackoverflow.com/questions/29252261/how-to-merge-two-hex-numbers-to-one-number-and-then-convert-it-into-decimal/29252644#29252644", "title": "How to merge two Hex numbers to one number and then convert it into decimal.?", "body": "<p>Just shift the digits and combine </p>\n\n<pre><code>int num1,num2,num3;\nnum1=0x25;\nnum2=0x71;\nnum3=(num1&lt;&lt;8)|(num2);\nprintf(\"%x %d\",num3,num3);\n</code></pre>\n\n<p>You need to place 25 (0025) followed by 71 (0071) in a variable, so you have to left shift the first number by 8 bits (0025 to 2500) and combine it with num2. Logical Or is the equivalent for combining, hence the <code>|</code> symbol.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1427280671, "creation_date": 1427280671, "answer_id": 29253592, "question_id": 29252261, "link": "https://stackoverflow.com/questions/29252261/how-to-merge-two-hex-numbers-to-one-number-and-then-convert-it-into-decimal/29253592#29253592", "title": "How to merge two Hex numbers to one number and then convert it into decimal.?", "body": "<p>Numbers are not stored as \"decimal\" or \"hexadecimal\", that is how they are written for humans to see. Assigning a value such as hexadecimal <code>num1 = 0x25</code> or as decimal <code>num1 = 37</code> makes no difference: <code>num1</code> will hold the same value.</p>\n\n<pre><code>num3 = 256 * num1 + num2;\n</code></pre>\n\n<p>Your question hasn't said what you would want to happen if the two hexadecimal humbers are <code>25</code> and <code>7</code>. Would the answer be <code>2507</code> or <code>257</code>? If the latter,</p>\n\n<pre><code>num3 = 16 * num1 + num2;\n</code></pre>\n\n<p>In either case, the corollary of my first paragraph applies: numbers aren't \"decimal\" or \"hexadecimal\" until you print them.</p>\n\n<pre><code>printf (\"Decimal %d\", num3);\nprintf (\"Hexadecimal %x\", num3);\n</code></pre>\n\n<p>The question makes more sense if the two numbers are strings - in human readable format!</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n    char num1[] = \"25\";\n    char num2[] = \"71\";\n    char num[20];\n    int num3;\n    strcpy (num, num1);\n    strcat (num, num2);\n    printf (\"Hexadecimal string %s\\n\", num);\n    sscanf(num,\"%x\", &amp;num3);\n    printf (\"Decimal number %d\\n\", num3);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>Hexadecimal string 2571\nDecimal number 9585\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19129, "favorite_count": 0, "accepted_answer_id": 29252644, "answer_count": 2, "score": 4, "last_activity_date": 1575414794, "creation_date": 1427276923, "last_edit_date": 1466878632, "question_id": 29252261, "link": "https://stackoverflow.com/questions/29252261/how-to-merge-two-hex-numbers-to-one-number-and-then-convert-it-into-decimal", "title": "How to merge two Hex numbers to one number and then convert it into decimal.?", "body": "<p>I am making a C program in which I have two hex numbers, i.e. <code>num1=25</code> <code>num2=71</code> which are in hex. I want to make it as <code>num3=2571</code> and then I have to convert <code>2571</code> into a decimal number. How do I do this? Please help, Thanks!</p>\n"}, {"tags": ["c", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1427277677, "post_id": 29252255, "comment_id": 46708664, "body": "<code>matrix_custom_get()</code> returns a pointer, so you must dereference it."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1427277720, "last_edit_date": 1427277720, "creation_date": 1427276914, "answer_id": 29252255, "question_id": 29252119, "link": "https://stackoverflow.com/questions/29252119/bad-management-of-pointers-in-c/29252255#29252255", "title": "bad management of pointers in C", "body": "<p><code>matrix_policy</code> is an array and address of a array element can't be a modifiable lvalue in C so there is an error.</p>\n\n<pre><code>&amp;(matrix_policy[3]) = matrix_custom_get();\n</code></pre>\n\n<p>But you can store value in the array like</p>\n\n<pre><code>matrix_policy[3] = &lt;value&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 4108473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uszgTGkdmXU/AAAAAAAAAAI/AAAAAAAAAUo/ajrXLIdPdPI/photo.jpg?sz=128", "display_name": "Chintan Patel", "link": "https://stackoverflow.com/users/4108473/chintan-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1427277028, "creation_date": 1427277028, "answer_id": 29252302, "question_id": 29252119, "link": "https://stackoverflow.com/questions/29252119/bad-management-of-pointers-in-c/29252302#29252302", "title": "bad management of pointers in C", "body": "<p>in main() function, you are using &amp; operator which will return an address of the variable. object present on left side of assignment operator should be able to hold the value you are assigning. Don't use &amp; with array member as it will represent only address instead of array member.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1427278500, "last_edit_date": 1427278500, "creation_date": 1427277462, "answer_id": 29252465, "question_id": 29252119, "link": "https://stackoverflow.com/questions/29252119/bad-management-of-pointers-in-c/29252465#29252465", "title": "bad management of pointers in C", "body": "<p>This expression</p>\n\n<pre><code> &amp;(matrix_policy[3]) \n</code></pre>\n\n<p>creates a temporary object that equivalent to expression</p>\n\n<pre><code>matrix_policy + 3\n</code></pre>\n\n<p>that in turn is not an lvalue and may not be assigned.</p>\n\n<p>In fact statement</p>\n\n<pre><code>&amp;(matrix_policy[3]) = matrix_custom_get();\n</code></pre>\n\n<p>may be rewritten like</p>\n\n<pre><code>(matrix_policy +3 ) = matrix_custom_get();\n</code></pre>\n\n<p>and of course is an invalid statement.</p>\n\n<p>Take into account that you are using wrong index in this statement because the valid range of indices according to the definition of the array</p>\n\n<pre><code>static matrix_info_t matrix_policy[3] =\n{\n   //...\n};\n</code></pre>\n\n<p>is <code>[0, 2]</code></p>\n\n<p>Do you mean something like the following?</p>\n\n<pre><code>matrix_policy[2] = *matrix_custom_get();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 0, "last_activity_date": 1427277619, "creation_date": 1427277619, "answer_id": 29252526, "question_id": 29252119, "link": "https://stackoverflow.com/questions/29252119/bad-management-of-pointers-in-c/29252526#29252526", "title": "bad management of pointers in C", "body": "<p><code>&amp;</code> takes the address of a variable. The result is an \"rvalue\", i.e. a read-only value that can appear on the right-hand side of an assignment. An \"lvalue\" is something that may appear at the left-hand side of an assignment and can be assigned to. You can't re-assign the address of a variable.</p>\n\n<p>Your <code>matrix_custom_get</code> returns a pointer to <code>matrix_info_t</code>. You want to overwrite the contents of a <code>matrix_info_t</code> with the custom matrix, so you must dereference the pointer you obtained:</p>\n\n<pre><code>matrix_policy[2] = *matrix_custom_get();\n</code></pre>\n\n<p>Note that you can't access the item at index 3 in an array of three entries, as Anton H has pointed out.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4711254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25f063d6f513bb517dba9b8f53f3905?s=128&d=identicon&r=PG&f=1", "display_name": "Tabiboujoi", "link": "https://stackoverflow.com/users/4711254/tabiboujoi"}, "is_accepted": false, "score": 0, "last_activity_date": 1427281506, "creation_date": 1427281506, "answer_id": 29253899, "question_id": 29252119, "link": "https://stackoverflow.com/questions/29252119/bad-management-of-pointers-in-c/29253899#29253899", "title": "bad management of pointers in C", "body": "<p>Thank you for your answers and explanations.</p>\n\n<p>Of course, the index was wrong [3], typo error :)</p>\n\n<p>So now I understand, I can't change the address but only the value.\nThe solution from M Ohem works fine and also from Vlad from Moscow by dereferencing the pointer.</p>\n\n<p>Thank you so much.</p>\n"}], "owner": {"reputation": 11, "user_id": 4711254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25f063d6f513bb517dba9b8f53f3905?s=128&d=identicon&r=PG&f=1", "display_name": "Tabiboujoi", "link": "https://stackoverflow.com/users/4711254/tabiboujoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1427281506, "creation_date": 1427276567, "question_id": 29252119, "link": "https://stackoverflow.com/questions/29252119/bad-management-of-pointers-in-c", "title": "bad management of pointers in C", "body": "<p>I have a small issue, and I'd like to understand regarding pointers...\nwhen compiling I've this error:</p>\n\n<pre><code>error: lvalue required as left operand of assignment\n</code></pre>\n\n<p>my code is this one :</p>\n\n<pre><code>typedef struct _matrix_info\n{\n    unsigned int matrix[2][5][4];\n}matrix_info_t;\n\nstatic  matrix_info_t matrix_custom_policy = {....}\nmatrix_info_t* matrix_custom_get(void)\n{\n    return &amp;matrix_custom_policy;\n}\n\n\nstatic matrix_info_t matrix_policy[3] =\n{\n    // Only the first 2 cases are initialized\n    ........\n}\n\nmain()\n{\n    .....\n\n    // the third case is initialized here;\n    &amp;(matrix_policy[3]) = matrix_custom_get();\n}\n</code></pre>\n\n<p>Do you have an idea why I've this error? Should I do a memcpy instead of ? \nThanks in advance.</p>\n"}, {"tags": ["c", "stack", "iteration", "quicksort"], "comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1427275928, "post_id": 29251789, "comment_id": 46707486, "body": "Could you give some info on the symptoms ? What happens ? Are you sure that your stack implementation is Ok ?"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1427276221, "post_id": 29251789, "comment_id": 46707671, "body": "A is an array of pointers to void. You cast the pointer to void with <code>long</code>. You will get unexpected results if long and void* don&#39;t have the same byte size. Beside do you want to sort by address ?"}, {"owner": {"reputation": 11, "user_id": 4711265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a97eae12114801901c8e0932ef2f85?s=128&d=identicon&r=PG&f=1", "display_name": "ws2133", "link": "https://stackoverflow.com/users/4711265/ws2133"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1427276359, "post_id": 29251789, "comment_id": 46707770, "body": "it just doesnt sort properly and sometimes it goes to infinite loop with left and right getting stuck on the same value"}, {"owner": {"reputation": 11, "user_id": 4711265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a97eae12114801901c8e0932ef2f85?s=128&d=identicon&r=PG&f=1", "display_name": "ws2133", "link": "https://stackoverflow.com/users/4711265/ws2133"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1427276562, "post_id": 29251789, "comment_id": 46707914, "body": "its a pointer to array of pointers that points to long"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1427276627, "post_id": 29251789, "comment_id": 46707955, "body": "Do you want to sort by address in decreasing order ?"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1427276684, "post_id": 29251789, "comment_id": 46707990, "body": "You want it to be sorted in increasing or decreasing order ?"}, {"owner": {"reputation": 11, "user_id": 4711265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a97eae12114801901c8e0932ef2f85?s=128&d=identicon&r=PG&f=1", "display_name": "ws2133", "link": "https://stackoverflow.com/users/4711265/ws2133"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1427276785, "post_id": 29251789, "comment_id": 46708073, "body": "increasing and i want to use stack"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4711265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a97eae12114801901c8e0932ef2f85?s=128&d=identicon&r=PG&f=1", "display_name": "ws2133", "link": "https://stackoverflow.com/users/4711265/ws2133"}, "edited": false, "score": 0, "creation_date": 1427281725, "post_id": 29253051, "comment_id": 46711079, "body": "my stack takes void *  so i can cast it to int also you need to pop highest first since u pushed high"}, {"owner": {"reputation": 11, "user_id": 4711265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a97eae12114801901c8e0932ef2f85?s=128&d=identicon&r=PG&f=1", "display_name": "ws2133", "link": "https://stackoverflow.com/users/4711265/ws2133"}, "edited": false, "score": 0, "creation_date": 1427288548, "post_id": 29253051, "comment_id": 46715500, "body": "Ok i have just changed my partition function to another method but right now my program runs fine if most of the unsorted partition are on the left however if the unsorted array is on the right e.g if the array is sorted in reverse order it doesnt work"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 11, "user_id": 4711265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a97eae12114801901c8e0932ef2f85?s=128&d=identicon&r=PG&f=1", "display_name": "ws2133", "link": "https://stackoverflow.com/users/4711265/ws2133"}, "edited": false, "score": 0, "creation_date": 1427290267, "post_id": 29253051, "comment_id": 46716763, "body": "I can&#39;t help you without code. Why changing the partition method and not using the initial one ?"}, {"owner": {"reputation": 11, "user_id": 4711265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a97eae12114801901c8e0932ef2f85?s=128&d=identicon&r=PG&f=1", "display_name": "ws2133", "link": "https://stackoverflow.com/users/4711265/ws2133"}, "edited": false, "score": 0, "creation_date": 1427292339, "post_id": 29253051, "comment_id": 46718323, "body": "I can only use these 2 partition arguments int partition(void **A, int n, void *pivot)"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 11, "user_id": 4711265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a97eae12114801901c8e0932ef2f85?s=128&d=identicon&r=PG&f=1", "display_name": "ws2133", "link": "https://stackoverflow.com/users/4711265/ws2133"}, "edited": false, "score": 0, "creation_date": 1427359785, "post_id": 29253051, "comment_id": 46747737, "body": "I have updated my answer and suggest two new implementation of partition using the <code>int partition(void **A, int n, void *pivot)</code> function signature."}], "tags": [], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "is_accepted": false, "score": 0, "last_activity_date": 1427359743, "last_edit_date": 1427359743, "creation_date": 1427279162, "answer_id": 29253051, "question_id": 29251789, "link": "https://stackoverflow.com/questions/29251789/iterative-quicksort-using-stack/29253051#29253051", "title": "iterative quicksort using stack", "body": "<p>Apparently this is the quicksort algorithm you want to implement <a href=\"http://en.wikipedia.org/wiki/Quicksort#Algorithm\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Quicksort#Algorithm</a></p>\n\n<p>First a handy function to swap two pointers to long in A.</p>\n\n<pre><code>void swap(long **A, int i, int j)\n{\n   long *temp = A[i];\n   A[i] = A[j];\n   A[j] = temp;\n}\n</code></pre>\n\n<p>The partition function is below. </p>\n\n<p>Note that your code is missing the first swap. You don't need it if you choose hi as pivotIndex. But that is not what you do. </p>\n\n<p>Note also that you do a preincrement of i (storeIndex) which is an error. You should first do the swap and then increment i. I combine the swap and increment in one instruction by using postincrement. Swapping i+1 and returning i+1 at the end is thus wrong. </p>\n\n<pre><code>int partition(long **A, int lo, int hi)\n{\n    int pivotIndex = (hi+lo)/2, storeIndex = lo, i;\n    long pivotValue = *A[pivotIndex];\n\n    swap(A, pivotIndex, hi);\n    for (i = lo; i &lt; hi; ++i)\n        if (*A[i] &lt; pivotValue)\n            swap(A, i, storeIndex++); /* Note: post increment of storeIndex */\n    swap(A, storeIndex, hi);\n    return storeIndex;\n}\n</code></pre>\n\n<p>Your function \nJe ne serai donc pas disponible mercredi prochain \u00e0 11h comme nous avions convenu. myQuickSort then becomes as follow.\nNote that your stack must now store int (indexes) and not int*.</p>\n\n<pre><code>void myQuicksort(void **A, int n) \n{\n    int lo, hi, p;\n    Stack *s = stack_new();     /* making new stack and allocating memory */\n    stack_push(s, 0);      /* pushes initial lo and hi values */\n    stack_push(s, n-1);    \n    while (!stack_isEmpty(s))\n    {\n        hi = stack_pop(s);  \n        lo = stack_pop(s);\n        if (lo &lt; hi)\n        {\n            p = partition(A, lo, hi);\n            stack_push(s, lo);  \n            stack_push(s, p-1);\n            stack_push(s, p+1);\n            stack_push(s, hi);\n        }\n    }\n}\n</code></pre>\n\n<p>This code has not been tested because I don't have the stack and the array at hand. </p>\n\n<p>In order to use this code you have to fix your stack so that it stores integers. </p>\n\n<p>I changed your variable name and use hi and lo instead of your method because in this way you only stored integer values on the stack. It's simpler and more clear. </p>\n\n<p><strong>Update</strong>:</p>\n\n<p>Since the signature of <code>partition()</code> is imposed here is a new code proposal. \nThe problem with this signature is that you don't know where the pivot was stored in A. When partition() ends, the pivot value must be stored in A[i]. So we have to find it and store it in A[right] before we start the partitioning.</p>\n\n<pre><code>int partition(void **A, int n, void *pivot){\n    void * temp;\n    int left = 0, j = 0;\n    int right = n-1;\n    int i = left;\n\n    // locate the pivot\n    for (j = 0; j &lt; n; ++j)\n        if (*(long*)A[j] == *(long*)pivot)\n            break;\n\n    // swap it with the right most value in A\n    temp = A[j];\n    A[j] = A[right];\n    A[right] = temp;\n\n    // do the partition\n    for (j = 0; j &lt; right; j++){\n        if (*(long*)A[j] &lt; *(long*)pivot){\n            temp = A[i];\n            A[i] = A[j];\n            A[j] = temp;\n            i++; // post increment i\n        }\n    }\n\n    // store the pivot in place\n    temp = A[i];\n    A[right] = A[i];\n    A[i] = temp;\n\n    // return the index of the pivot\n    return i;\n}\n</code></pre>\n\n<p>Here is another possible implementation</p>\n\n<pre><code>int partition(void **A, int n, void *pivot){\n    void * temp;\n    int left = 0, j = 0;\n    int right = n-1;\n    int i = left;\n\n    // do the partition\n    for (j = 0; j &lt; n; j++){\n        if (*(long*)A[j] &lt; *(long*)pivot){\n            temp = A[i];\n            A[i] = A[j];\n            A[j] = temp;\n            i++; // post increment i\n        }\n    }\n    // At this stage the pivot is somewhere in the range A[i] to A[right]\n\n    // Lets find it and put it in A[i] if it's not already there\n    if (*(long*)A[i] != *(long*)pivot){\n        for (j = i+1; j &lt; n; ++j){\n            if (*(long*)A[j] == *(long*)pivot){\n                temp = A[i];\n                A[i] = A[j];\n                A[j] = temp;\n                break;\n            }\n        }\n    }\n\n    // return the index of the pivot\n    return i;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 0, "last_activity_date": 1427360085, "creation_date": 1427360085, "answer_id": 29274327, "question_id": 29251789, "link": "https://stackoverflow.com/questions/29251789/iterative-quicksort-using-stack/29274327#29274327", "title": "iterative quicksort using stack", "body": "<p>There is an obvious bug in your code. Your myQuickSort function pushes and pops integers that are indexes into the array A. But \"partition\" doesn't know about the whole array; the value that it returns is relative to the start of the array that it was given. </p>\n\n<p>Say you sort an array of 200 items, and eventually you pass the range from 100 to 200 to partition. If it partitions right in the middle, it won't return 150 as you expect, but 50. </p>\n\n<p>I wonder if you actually tried debugging your code. </p>\n"}], "owner": {"reputation": 11, "user_id": 4711265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a97eae12114801901c8e0932ef2f85?s=128&d=identicon&r=PG&f=1", "display_name": "ws2133", "link": "https://stackoverflow.com/users/4711265/ws2133"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4275, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1427360085, "creation_date": 1427275601, "question_id": 29251789, "link": "https://stackoverflow.com/questions/29251789/iterative-quicksort-using-stack", "title": "iterative quicksort using stack", "body": "<p>Hi can someone help me with my code im not sure where I went wrong\nthis is for iterative quicksort using stack the arrays are passed by using void ** pointers </p>\n\n<pre><code>int partition(void **A, int n, void *pivot){\n    void * temp;\n    int left = 0,j = 0;\n    int right = n-1;\n    int i = left;\n    for (j=left;j&lt;right;j++){\n        if ((long)A[j] &lt; (long)pivot){\n            i++;\n            temp = A[i];\n            A[i] = A[j];\n            A[j] = temp;\n        }\n    }\n    temp = A[i+1];\n    A[right] = A[i+1];\n    A[i+1] = temp;\n    return i+1;\n}\nvoid myQuicksort(void **A, int n) {\n    Stack *s = stack_new();     /*making new stack and allocating memory*/\n    stack_push(s,(int*)0);      /*pushing left and then right*/\n    stack_push(s,(int*)(n-1));\n    while (!stack_isEmpty(s)){\n        int right = (int)stack_pop(s);  /*poping return right then left*/\n        int left = (int)stack_pop(s);\n        if (right-left &gt;=1){\n            int pivot = (right+left)/2;  /* taking middle element as pivot */\n            int p = partition(A+left , right-left+1 , A[pivot]);/*getting partition index*/\n            stack_push(s, (int*)left);  \n            stack_push(s, (int*)(p-1));\n            stack_push(s,(int*)(p+1));\n            stack_push(s,(int*)right);\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "multithreading", "winapi", "beginthreadex"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 7, "creation_date": 1427275519, "post_id": 29251723, "comment_id": 46707246, "body": "You&#39;ll have to fix your code, you need to give the thread an exit condition.  Run dangerous and uncooperative code in another process if necessary."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1427275539, "post_id": 29251723, "comment_id": 46707255, "body": "is this c <b>or</b> c++, windows specific? etc..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427275714, "post_id": 29251723, "comment_id": 46707362, "body": "Added winapi tag since this is indeed Windows-specific."}, {"owner": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1427275767, "post_id": 29251723, "comment_id": 46707397, "body": "@UmNyobe yes it is c,c++ windows."}, {"owner": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1427275826, "post_id": 29251723, "comment_id": 46707432, "body": "@Hans  that&#39;s the last thing I wanna do , so is there any other way possible to do this."}, {"owner": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "edited": false, "score": 0, "creation_date": 1427275870, "post_id": 29251723, "comment_id": 46707453, "body": "@ Lundin thanks...ill remember it next time"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "edited": false, "score": 0, "creation_date": 1427275942, "post_id": 29251816, "comment_id": 46707497, "body": "while(1) loop is inside the thread function. I am not waiting for thread too terminate in an infinite while loop ."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "edited": false, "score": 0, "creation_date": 1427276076, "post_id": 29251816, "comment_id": 46707582, "body": "@lsrawat Yes I understood that, my answer is written with that assumption. I&#39;ll clarify the answer a bit."}, {"owner": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "edited": false, "score": 0, "creation_date": 1427276095, "post_id": 29251816, "comment_id": 46707593, "body": "@Israwat - You don&#39;t6 have to. Lundin advises you to examine the state of the event, not the thread."}, {"owner": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "edited": false, "score": 0, "creation_date": 1427276436, "post_id": 29251816, "comment_id": 46707832, "body": "Ok now I under stood , I hope its similar to what mg30rg or simurg suggested in below answer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "edited": false, "score": 0, "creation_date": 1427276647, "post_id": 29251816, "comment_id": 46707967, "body": "@lsrawat Added an example."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1551592"}, "edited": false, "score": 2, "creation_date": 1427276699, "post_id": 29251816, "comment_id": 46708000, "body": "Use a bool variable, then test it everytime in the while(1) loop...?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427276784, "post_id": 29251816, "comment_id": 46708072, "body": "@user9000 Events are better, as you can wait for them effectively with your thread/process asleep. Suppose you don&#39;t need your thread to work 100% of the time, for example."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1551592"}, "edited": false, "score": 0, "creation_date": 1427276849, "post_id": 29251816, "comment_id": 46708115, "body": "@Lundin I&#39;d rather stay away from Winblows state of the art technologies and use an enum since Winblows successfully defeated the purpose of portable languages.  Using Assembly nowadays is better than coding under Windows"}, {"owner": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "edited": false, "score": 0, "creation_date": 1427277083, "post_id": 29251816, "comment_id": 46708273, "body": "@user9000 Or even better, don&#39;t use a &#39;while(1)&#39;/&#39;while(true)&#39; loop, but one which has a proper exit condition. (More of an advice than a rule.) You will have a source code easier to maintain, and no additional headache when a problem like this occurs."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1427277360, "post_id": 29251816, "comment_id": 46708455, "body": "@user9000 Good for you. This question is however about the Windows-specific beginthread() function, so your rant isn&#39;t relevant. If it makes you happier, I believe the very same code could be written with POSIX functions instead."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1551592"}, "edited": false, "score": 0, "creation_date": 1427280743, "post_id": 29251816, "comment_id": 46710497, "body": "@Lundin Even if it&#39;s Windows specific, pointing OP at portable code is not irrelevant, because it&#39;s one of the purposes of C/C++ existent...  Plus, yes, there is POSIX equivalent, pthread condition variables... It all depends on what hes doing exactly, so.  Would suggest C++11 std::condition_variable instead"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1427281183, "post_id": 29251816, "comment_id": 46710765, "body": "@user9000: To someone that doesn&#39;t understand the semantics of <code>volatile</code>, a portable solution might look simpler than it is. In reality, a portable solution generally adds complexity. The solution offered by Lundin is perfectly valid, and fairly simple to follow."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1551592"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1427283341, "post_id": 29251816, "comment_id": 46712033, "body": "@IInspectable Never said it&#39;s invalid, I just wanted to state a point nothing more."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 8, "last_activity_date": 1427276591, "last_edit_date": 1427276591, "creation_date": 1427275659, "answer_id": 29251816, "question_id": 29251723, "link": "https://stackoverflow.com/questions/29251723/how-to-safely-close-a-thread-which-has-a-infinite-loop-in-it/29251816#29251816", "title": "How to safely close a THREAD which has a infinite loop in it", "body": "<p>The proper way is to create an event \"kill me\", by using CreateEvent, then flag this event when you wish to kill the thread. Instead of having your thread wait <code>while(1)</code>, have it wait <code>while(WaitForSingleObject(hevent_killme, 0))</code>. And then you can simply let the thread callback finish and return, no need to call _endthreadex or such.</p>\n\n<p>Example of callback function:</p>\n\n<pre><code>static DWORD WINAPI thread_callback (LPVOID param)\n{\n  ...\n  while(WaitForSingleObject(hevent_killme, 0) != WAIT_OBJECT_0)\n  {\n    // do stuff\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Caller:</p>\n\n<pre><code>HANDLE hevent_killme = CreateEvent(...);\n...\n\nvoid killthread (void)\n{\n  SetEvent(hevent_killme);\n  WaitForSingleObject(hthread_the_thread, INFINITE);\n  CloseHandle(hevent_killme);\n  CloseHandle(hthread_the_thread);\n} \n</code></pre>\n\n<p>Never use TerminateThread.</p>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "edited": false, "score": 0, "creation_date": 1427276246, "post_id": 29251834, "comment_id": 46707692, "body": "Yes I read all this on msdn also. But I thought may be if there is a way to do this (kill thread safely from outside). Actually to modify the while loop that is inside the thread was my last option. But it seems that&#39;s the only option."}, {"owner": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "reply_to_user": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "edited": false, "score": 0, "creation_date": 1427276453, "post_id": 29251834, "comment_id": 46707843, "body": "@Israwat - Believe me, I develop heavily multithreaded applications (servers mostly), and killing a thread from the outside is a really bad practice leading to enormous headache. Also, if you are using a framework like MFC, you will leak a lot of memory, since MFC threads reserve a lot of memory for background MFC objects."}], "tags": [], "owner": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "is_accepted": true, "score": 14, "last_activity_date": 1427275723, "creation_date": 1427275723, "answer_id": 29251834, "question_id": 29251723, "link": "https://stackoverflow.com/questions/29251723/how-to-safely-close-a-thread-which-has-a-infinite-loop-in-it/29251834#29251834", "title": "How to safely close a THREAD which has a infinite loop in it", "body": "<p><strong>You should</strong> - literally - <strong>never use <em>TerminateThread()</em>.</strong> And I'm not even joking. If you are terminating a thread from the outside, all resources reserved in it will be leaked, all state variables accessed inside will have an undetermined state and so on.</p>\n\n<hr>\n\n<p>The solution for your problem might be signaling your thread to finish itself. It can be done by a volatile variable changed by thread-safe means (see <em>InterlockedIncrement()</em> on that), a Windows event, or something like that. If your thread has a message loop you can even do it by sending a message to ask it to stop.</p>\n"}, {"comments": [{"owner": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "edited": false, "score": 2, "creation_date": 1427276645, "post_id": 29251876, "comment_id": 46707965, "body": "And remember to declare &#39;continue_running&#39; as volatile, because otherwise optimisation might break your code. (In Visual Studio or gcc, in other IDEs it might differ.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1551592"}, "reply_to_user": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "edited": false, "score": 1, "creation_date": 1427276747, "post_id": 29251876, "comment_id": 46708033, "body": "@mg30rg on most CPUs, bools are atomic operations"}, {"owner": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "edited": false, "score": 3, "creation_date": 1427276798, "post_id": 29251876, "comment_id": 46708080, "body": "@user9000 - It is not about booleans but compiler optimization. If your compiler isn&#39;t avare of the multithreaded nature of your variable it might caches/replicates/multi-instatiates/skips/etc. it for performance reasons."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1427276939, "post_id": 29251876, "comment_id": 46708173, "body": "Thread-safety for such a variable might not be a concern anyhow, if there is only one thread setting it to a non-zero value, and another thread reading it. volatile to prevent incorrect optimizations is indeed good practice, but I think most compilers don&#39;t make such optimization assumption mistakes nowadays?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1551592"}, "reply_to_user": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "edited": false, "score": 2, "creation_date": 1427277033, "post_id": 29251876, "comment_id": 46708243, "body": "@mg30rg True, it&#39;s always a good idea to take extra caution, you might also want to add that volatile will cause it to always read from memory as this is one of the reasons one would use volatile in a single/multi threaded application."}, {"owner": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427277231, "post_id": 29251876, "comment_id": 46708378, "body": "@Lundin In <b>most cases</b> (let&#39;s say 85%) it won&#39;t cause trouble. Int he remaining cases (let&#39;s say 15%) it causes a heisenbug. Does it really worth creating an opportunity of a heisenbug to save yourself some typing?"}, {"owner": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427277436, "post_id": 29251876, "comment_id": 46708503, "body": "@Lundin - I have also met situations where not setting a variable volatile did not cause trouble for years and then on one day when a patch was added to a seemingly unconnected part of the code it started to act strange."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "edited": false, "score": 0, "creation_date": 1427278675, "post_id": 29251876, "comment_id": 46709254, "body": "@mg30rg Ok was curious about the state of mainstream desktop OS compilers, I would have thought they&#39;d solved this by now. I mainly work with embedded systems, where the compilers are generally less smart. In such systems you simply <i>must</i> declare everything shared with a thread/callback/isr as volatile."}, {"owner": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1427279356, "post_id": 29251876, "comment_id": 46709683, "body": "@Lundin - As I hobby I develop PIC software, but PIC18 is not multi-threaded, so I didn&#39;t face this issue there. I also develop for my own Raspberry Pi, but I follow the same guidelines  I do when I develop desktop sw."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1301, "user_id": 2144232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4610fad58b93d52ed57d7e1beee418?s=128&d=identicon&r=PG", "display_name": "mg30rg", "link": "https://stackoverflow.com/users/2144232/mg30rg"}, "edited": false, "score": 1, "creation_date": 1427279710, "post_id": 29251876, "comment_id": 46709912, "body": "@mg30rg You do have the same issue there, whenever you have an interrupt service routine."}, {"owner": {"reputation": 433, "user_id": 4739800, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b1687ae4d9a77820fefd234cd9722943?s=128&d=identicon&r=PG", "display_name": "Pedro Vicente", "link": "https://stackoverflow.com/users/4739800/pedro-vicente"}, "edited": false, "score": 0, "creation_date": 1599438840, "post_id": 29251876, "comment_id": 112766406, "body": "Why the deletion of my answer @martijn-pieters ? <a href=\"https://stackoverflow.com/users/100297/martijn-pieters\">stackoverflow.com/users/100297/martijn-pieters</a>"}], "tags": [], "owner": {"reputation": 1177, "user_id": 2261179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/viYo6.gif?s=128&g=1", "display_name": "simurg", "link": "https://stackoverflow.com/users/2261179/simurg"}, "is_accepted": false, "score": 7, "last_activity_date": 1427275848, "creation_date": 1427275848, "answer_id": 29251876, "question_id": 29251723, "link": "https://stackoverflow.com/questions/29251723/how-to-safely-close-a-thread-which-has-a-infinite-loop-in-it/29251876#29251876", "title": "How to safely close a THREAD which has a infinite loop in it", "body": "<p>Instead of <code>while(1)</code>, you can use <code>while(continue_running)</code>, where <code>continue_running</code> is <code>True</code> when the thread loop should run. When you want to stop the thread, make the controlling thread set <code>continue_running</code> to <code>False</code>. Of course make sure that you properly guard <code>continue_running</code> with mutexes as it is a variable whose value can be modified from two threads.</p>\n"}], "owner": {"reputation": 157, "user_id": 1958709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GiYpK.jpg?s=128&g=1", "display_name": "lsrawat", "link": "https://stackoverflow.com/users/1958709/lsrawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6298, "favorite_count": 1, "accepted_answer_id": 29251834, "answer_count": 3, "score": 8, "last_activity_date": 1599414107, "creation_date": 1427275383, "last_edit_date": 1427275794, "question_id": 29251723, "link": "https://stackoverflow.com/questions/29251723/how-to-safely-close-a-thread-which-has-a-infinite-loop-in-it", "title": "How to safely close a THREAD which has a infinite loop in it", "body": "<p>I am creating a thread using <code>_beginthreadex</code> function. The function address I am passing in it has an infinite while loop (<code>while(1)</code>) . I have the <code>threadid</code> and <code>threadhandle</code>.</p>\n\n<p>I can use <code>TerminateThread(threadhandle,1);</code> But it is dangerous.   </p>\n\n<p>The safe way is to kill thread using <code>_endthreadex</code> but it can only be used from inside the thread, and I wanted to kill the thread from outside.</p>\n\n<p>So please suggest if there is a safe way to close,end or kill the thread safely from outside using <code>threadid</code> or <code>threadhandle</code>.</p>\n"}, {"tags": ["c", "algorithm", "scheduling"], "answers": [{"comments": [{"owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 0, "creation_date": 1427295781, "post_id": 29258749, "comment_id": 46720806, "body": "the problem is : in some course (like magistral courses) 2+ groups of students can be in the same time in the same room... which is the difficulty.. :/"}, {"owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 0, "creation_date": 1427297164, "post_id": 29258749, "comment_id": 46721866, "body": "Ohhh <i>-</i> indeed this representation can avoid any other problem.  If I have the course Java CM, this course has to be scheduled somewhere, and the 2+ groups will attend it.  if I have the course Java Grp1, then it&#39;s a different course than Java CM...   That&#39;s what you mean, right ?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 0, "creation_date": 1427297525, "post_id": 29258749, "comment_id": 46722128, "body": "Yes. A real course, <code>Java 101</code>, may have to be separated into several &quot;courses&quot; in your system: <code>Java 101 - common lectures</code> for the lectures where all students attend, and <code>Java 101 - group1</code> and <code>Java 101 - group2</code> for the lectures in smaller groups."}, {"owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "edited": false, "score": 0, "creation_date": 1427297656, "post_id": 29258749, "comment_id": 46722214, "body": "I will try this solution, but I don&#39;t see any reason why it shouldn&#39;t work :) thank you so much. I spend so much time finding constraints with @Amit, that I don&#39;t even think anymore about splitting course into sub-courses :)"}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 1, "last_activity_date": 1427297034, "last_edit_date": 1427297034, "creation_date": 1427294361, "answer_id": 29258749, "question_id": 29251041, "link": "https://stackoverflow.com/questions/29251041/class-scheduling-to-boolean-satisfiability-polynomial-time-reduction-final-par/29258749#29258749", "title": "Class Scheduling to Boolean satisfiability [Polynomial-time reduction] Final Part", "body": "<p>Since a student can only be in one place at a time:</p>\n\n<p>Lectures for courses attached to the same student group should not overlap in time.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>There should be no constraint on different student groups overlapping. If you have such a constraint you should remove it!</p>\n\n<p>The constraints are on courses. If you schdeule a lecture for course A, then it may not overlap a lecture for any other course for the student group(s) that attend course A. It may also not overlap any other course held by the same teacher.</p>\n\n<p>So, you have a many-to-many relationship between students and courses and a many-to-many relationship between teachers and courses.</p>\n\n<p>You want to schedule a number of lectures for each course with the constraint that no teacher and no student has overlapping lectures.</p>\n\n<p><strong>Regarding</strong></p>\n\n<blockquote>\n  <p>2+ groups can be in the same room in the same time only for specific courses (like Magistral course for example)</p>\n</blockquote>\n\n<p>If the groups may not mix, then it is not the same course (even though the subject may be the same). So if two student groups can not mix for Java, then you need to model it as two separate courses, <code>Java group1</code> and <code>Java group2</code>.</p>\n"}], "owner": {"reputation": 2451, "user_id": 3493433, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Rv0Vj.jpg?s=128&g=1", "display_name": "Valentin Montmirail", "link": "https://stackoverflow.com/users/3493433/valentin-montmirail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 29258749, "answer_count": 1, "score": 2, "last_activity_date": 1427297034, "creation_date": 1427273283, "last_edit_date": 1495541642, "question_id": 29251041, "link": "https://stackoverflow.com/questions/29251041/class-scheduling-to-boolean-satisfiability-polynomial-time-reduction-final-par", "title": "Class Scheduling to Boolean satisfiability [Polynomial-time reduction] Final Part", "body": "<p>I'm working since few weeks now on a project really interesting but unfortunately with a very complex background.</p>\n\n<p>I already asked 3 questions : </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/29251041/class-scheduling-to-boolean-satisfiability-polynomial-time-reduction-final-par\">Class Scheduling to Boolean satisfiability [Polynomial-time reduction] Final Part</a> (here)</li>\n<li><a href=\"https://stackoverflow.com/questions/29140280/class-scheduling-to-boolean-satisfiability-polynomial-time-reduction-part-2?lq=1\">Class Scheduling to Boolean satisfiability [Polynomial-time reduction] part 2</a></li>\n<li><a href=\"https://stackoverflow.com/questions/28983729/class-scheduling-to-boolean-satisfiability-polynomial-time-reduction?lq=1\">Class Scheduling to Boolean satisfiability [Polynomial-time reduction]</a></li>\n</ul>\n\n<p>in both of them, I get my answer (thank you again @Amit) but now arrived the final part, who will make this project useable :)</p>\n\n<p>I for now can manage : </p>\n\n<ul>\n<li>N time-intervals.</li>\n<li>C courses.</li>\n<li>T teachers.</li>\n<li>S rooms.</li>\n</ul>\n\n<p>My constraints are the follow:</p>\n\n<ul>\n<li>2 teachers cannot be in the same room in the same time.</li>\n<li>2 courses  cannot be in the same room in the same time.</li>\n<li>Teachers can teach only specific courses.</li>\n<li>Some courses can happen only on specific time-intervals.</li>\n</ul>\n\n<p>So this is for now, my result : </p>\n\n<p><img src=\"https://i.stack.imgur.com/gUZ5q.png\" alt=\"Illustration of my final output for now\"></p>\n\n<p>But here comes the final part that I want to add : I want to manage group of students, with the following constraints : </p>\n\n<ul>\n<li>A group has only some courses to do.</li>\n<li>2+ groups can be in the same room in the same time only for specific courses (like Magistral course for example)</li>\n</ul>\n\n<p>Again, I success to isolate the constraint, but I have no idea on how to transform this constraint into a \"time-intervals should not overlap\" constraint.</p>\n\n<p>Thanks in advance,\nBest regards,</p>\n"}, {"tags": ["python", "c", "garbage-collection", "segmentation-fault", "refcounting"], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 3094833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d18f7a71aae839f89fe70cc7789c8ea?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/3094833/tommy"}, "edited": false, "score": 0, "creation_date": 1427311089, "post_id": 29251900, "comment_id": 46731079, "body": "No luck. Not sure which compiler my python was compiled with, so I tried them all and got the same results."}], "tags": [], "owner": {"reputation": 1291, "user_id": 3052835, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/g7JWE.jpg?s=128&g=1", "display_name": "Dennis Sakva", "link": "https://stackoverflow.com/users/3052835/dennis-sakva"}, "is_accepted": false, "score": 0, "last_activity_date": 1427275920, "creation_date": 1427275920, "answer_id": 29251900, "question_id": 29250982, "link": "https://stackoverflow.com/questions/29250982/c-python-extension-causes-python-script-to-exit-with-segfault-due-to-garbage-col/29251900#29251900", "title": "c python extension causes python script to exit with segfault due to garbage collection error", "body": "<p>Not directly related to garbage collection, but are you using the same compiler that was used to build your python version? Sometimes it matters. I was once debugging segfault for several weeks which went away only when I replaced MinGW with Microsoft Visual C++ Compiler for python.</p>\n"}], "owner": {"reputation": 530, "user_id": 3094833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d18f7a71aae839f89fe70cc7789c8ea?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/3094833/tommy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1427275920, "creation_date": 1427273089, "question_id": 29250982, "link": "https://stackoverflow.com/questions/29250982/c-python-extension-causes-python-script-to-exit-with-segfault-due-to-garbage-col", "title": "c python extension causes python script to exit with segfault due to garbage collection error", "body": "<p>I have the following routine in C that I use to turn an array of strings into a python list of strings</p>\n\n<pre><code>PyObject* build_pylist(char** strings, unsigned int string_cnt){\n\n    PyObject* list = PyList_New(string_cnt);\n    int i;\n    for(i = 0; i &lt; string_cnt; i++){\n\n        PyObject* pystring = PyString_FromStringAndSize(\n            (const char*) strings[i], \n            (Py_ssize_t) strlen(strings[i])\n        );\n\n        #per http://www.kbs.twi.tudelft.nl/Documentation/Programming/python-2.1/ext/thinIce.html\n        #apparently the inc/dec is necessary...doesn't seem\n        #to make a difference\n\n        Py_INCREF(pystring);\n        PyList_SET_ITEM(\n            list, \n            (Py_ssize_t) i, \n            pystring\n        );\n        Py_DECREF(pystring);\n\n        free(strings[i]);\n    }\n\n    free(strings);\n    return list;\n}\n</code></pre>\n\n<p>The <code>PyString_FromStringAndSize</code> function makes a copy of the given string, so I free the unnecessary strings as they are copied, and then free the container of those strings' pointers. This all seems to work fine. The python list is returned up to the script, the strings all look good, and the refcounts look good when checked via <code>sys.getrefcount</code> on the strings in the list, and the list itself. </p>\n\n<p>The refcounts all return 2 which seems right because the call to getrefcount causes an increment of 1 temporarily. I'm pretty sure it's got something to do with the ref counting based on core dump analysis</p>\n\n<pre><code>Thread 0 Crashed:: Dispatch queue: com.apple.main-thread\n0   org.python.python               0x000000010abfc52a collect + 482\n1   org.python.python               0x000000010abfc33f PyGC_Collect + 35\n2   org.python.python               0x000000010abea056 Py_Finalize + 290\n3   org.python.python               0x000000010abfbe9b Py_Main + 3143\n4   libdyld.dylib                   0x00007fff8843a7e1 start + 1\n</code></pre>\n\n<p>The error is occurring at the exit of the script and you can clearly see the crash is happening in the garbage collector. Bad refcounting is the only thing I can think of for this error. </p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 0, "creation_date": 1427272210, "post_id": 29250665, "comment_id": 46705485, "body": "This is not duplicate at all, where is the typedef as in the link you provided ?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1427272376, "post_id": 29250665, "comment_id": 46705563, "body": "Something else (some other data) would tell which union member to use. And you really should show more code, and choose between C and C++ (which are different languages). So ask a new question or strongly edit this one."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427272414, "post_id": 29250665, "comment_id": 46705582, "body": "@BasileStarynkevitch The core of the question is not &quot;what is a union for?&quot; but &quot;why does this union type not have a name, and why?&quot;"}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 0, "creation_date": 1427272518, "post_id": 29250665, "comment_id": 46705634, "body": "that is what I meant, question is updated ;-) thanks angew."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427272621, "post_id": 29250665, "comment_id": 46705694, "body": "@PhilipStuyck: you still need to improve your question (so edit it please again) to show much more code and choose between C and C++."}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 1, "creation_date": 1427272689, "post_id": 29250665, "comment_id": 46705731, "body": "How can I show more code as I don&#39;t know why this unnamed type is useful for, I am basically asking for an example."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1427272711, "post_id": 29250665, "comment_id": 46705742, "body": "@BasileStarynkevitch I suspect the answer to this question is exactly the same in C or C++."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427272743, "post_id": 29250665, "comment_id": 46705760, "body": "For C++, a useful example is <a href=\"http://stackoverflow.com/a/26522663/841108\">here</a>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427272846, "post_id": 29250665, "comment_id": 46705795, "body": "@BasileStarynkevitch No, I don&#39;t think that&#39;s an example. This is a <i>named</i> union of unnamed type. So it cannot be used as the &quot;trailing variadic member.&quot;"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427272927, "post_id": 29250665, "comment_id": 46705827, "body": "No, my example is exactly an <i>unamed</i> <code>union</code>. A <i>named</i> union would be <code>union unionname</code>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427273064, "post_id": 29250665, "comment_id": 46705913, "body": "@BasileStarynkevitch Right, sorry. I meant a &quot;named object of unnamed union type.&quot; Which still disqualifies it as the trailing variant."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427273191, "post_id": 29250665, "comment_id": 46705969, "body": "I believe your &quot;trailing variant&quot; is non-standard terminology, and suggests that you think <i>wrongly</i> about unions. So pick a book on <a href=\"http://www.stroustrup.com/Programming/\" rel=\"nofollow noreferrer\">C++ programming</a>, and read it more."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1427273260, "post_id": 29250665, "comment_id": 46706001, "body": "@BasileStarynkevitch OK, it&#39;s a part of the language I use quite rarely. Still, C++11 9.5/5+7 prevent an &quot;anonymous union&quot; from having a named instance. The &quot;trailing variant&quot; is indeed non-standard, I didn&#39;t mean it as a term; the standard term is &quot;union-like class&quot; and &quot;variant members,&quot; 9.5/8"}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 0, "creation_date": 1427273666, "post_id": 29250665, "comment_id": 46706228, "body": "So I did. I was reluctant to remove it in the first place but some reactions were rather heavy."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 1, "creation_date": 1427273686, "post_id": 29250665, "comment_id": 46706244, "body": "@PhilipStuyck Agree ... :) and I don&#39;t understand downvote on such sensible questions"}], "answers": [{"tags": [], "owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "is_accepted": false, "score": 2, "last_activity_date": 1427272746, "creation_date": 1427272746, "answer_id": 29250880, "question_id": 29250665, "link": "https://stackoverflow.com/questions/29250665/what-is-the-use-case-for-an-anonymous-union-type/29250880#29250880", "title": "What is the use case for an anonymous union type", "body": "<p>In C++, it is valid. The code defines a local variable called price, which can either store an integer value in <code>yens</code> or a float value in <code>dollars</code>.</p>\n\n<p>Without seeing how it is used, I can only conclude that the variable is a local/temporary variable (and probably, in a function that attempts to do too much).</p>\n\n<p>Example:</p>\n\n<pre><code>union\n{\n     float dollars;\n     int yens;\n} price;\n\nif(currency != \"USD\")\n    price.yens = ConvertToYEN(fullPrice);\nelse\n    price.dollars = GetUpdatedPriceInUSD(abc, currency);\n\nif(currency == \"YEN\")\n   std::cout &lt;&lt; \"Using price in yens: \" &lt;&lt; price.yens &lt;&lt; \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1427273778, "last_edit_date": 1427273778, "creation_date": 1427272939, "answer_id": 29250946, "question_id": 29250665, "link": "https://stackoverflow.com/questions/29250665/what-is-the-use-case-for-an-anonymous-union-type/29250946#29250946", "title": "What is the use case for an anonymous union type", "body": "<p>In C according to this link</p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html#Unnamed-Fields\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html#Unnamed-Fields</a></p>\n\n<p>You can just access the the member of the union like <code>price.dollars</code> and <code>price.yens</code> because <code>price</code> is already an variable of type union and there is no need to create a new object of same type.</p>\n\n<pre><code>union\n{\n     float dollars;\n     int yens;\n}price;\n\nint main(void) {\n    price.dollars = 90.5;\n    printf(\"%f\\n\",price.dollars);\n    price.yens = 20;\n    printf(\"%d\\n\",price.yens);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 5, "last_activity_date": 1427273203, "creation_date": 1427273203, "answer_id": 29251016, "question_id": 29250665, "link": "https://stackoverflow.com/questions/29250665/what-is-the-use-case-for-an-anonymous-union-type/29251016#29251016", "title": "What is the use case for an anonymous union type", "body": "<p>The fact that the type does not have a name has very little effect on the use of the <code>price</code> variable. All it means is that you cannot (easily) create another object of this type.</p>\n\n<p>This construct makes the most sense if <code>price</code> is a local variable inside a function. If you only ever want one object of this type, you don't need to name the type, so why bother. It doesn't differ at all from:</p>\n\n<pre><code>union SomeNameIPromiseNotToUseAnywhereAndWhichDoesntConflictWithAnything\n{\n  float dollars;\n  int yens;\n} price;\n</code></pre>\n\n<p>Notice that in C++11 and beyond, you <em>can</em> actually create another object:</p>\n\n<pre><code>decltype(price) anotherPrice;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7162, "user_id": 3800782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d6d5273f12d5fd7a7cc4c31769558918?s=128&d=identicon&r=PG&f=1", "display_name": "rghome", "link": "https://stackoverflow.com/users/3800782/rghome"}, "is_accepted": false, "score": 1, "last_activity_date": 1427273668, "creation_date": 1427273668, "answer_id": 29251167, "question_id": 29250665, "link": "https://stackoverflow.com/questions/29250665/what-is-the-use-case-for-an-anonymous-union-type/29251167#29251167", "title": "What is the use case for an anonymous union type", "body": "<p>I have used unions in the past as mechanisms for handling storage formats and translating between them.</p>\n\n<p>For example, it could be that the program includes code for storing amounts in a a file in float format and that the storage function accepts/returns a float. Later,  it is discovered we need to use an integer, so we simply use the union so access the data in the format we know it to be. For example:</p>\n\n<pre><code>price.dollars = load_from_file();\nif (yen_flag)\n    // use price.yen\nelse\n    // use price.dollars\n</code></pre>\n\n<p>It is also commonly used for implementation independent storage of ints.</p>\n\n<pre><code>union {\n    int int_val;\n    char as_bytes[4];\n} int_store;\n</code></pre>\n\n<p>Sorry if there are any syntax errors, it's been a while ...</p>\n"}, {"tags": [], "owner": {"reputation": 241, "user_id": 3410653, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dcc30d237aab42585ee6bc1c1750d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Buni", "link": "https://stackoverflow.com/users/3410653/buni"}, "is_accepted": false, "score": 0, "last_activity_date": 1427294179, "last_edit_date": 1495541179, "creation_date": 1427293787, "answer_id": 29258517, "question_id": 29250665, "link": "https://stackoverflow.com/questions/29250665/what-is-the-use-case-for-an-anonymous-union-type/29258517#29258517", "title": "What is the use case for an anonymous union type", "body": "<p>I saw code like this in alot of mathematical libraries for 2D/3D calculation:</p>\n\n<pre><code>struct Matrix3x3\n{\n    union\n    {\n        struct\n        {\n            float m00 , m01 , m02;\n            float m10 , m11 , m12;\n            float m20 , m21 , m22;\n        };\n\n        float m[ 3 ][ 3 ];\n    };\n};\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/2253878/why-does-c-disallow-anonymous-structs-and-unions\">see also this Q</a></p>\n\n<hr>\n\n<p>iirc, I read somewhere that using such methods leads to violating the <em>strict aliasing rule</em></p>\n"}, {"tags": [], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "is_accepted": false, "score": 0, "last_activity_date": 1427307956, "creation_date": 1427307956, "answer_id": 29263606, "question_id": 29250665, "link": "https://stackoverflow.com/questions/29250665/what-is-the-use-case-for-an-anonymous-union-type/29263606#29263606", "title": "What is the use case for an anonymous union type", "body": "<pre><code>struct FooBar\n{\n    union\n    {\n        Foo foo;\n        char dummy[128];\n    };\n    Bar bar;\n};\n</code></pre>\n\n<p>I've seen people use nameless unions to control the offset of <code>struct</code> members.</p>\n\n<p>There's no trivial way to align a <code>struct</code> member to a certain boundary, but there are ways to align the beginning of the <code>struct</code> to arbitrary boundaries, then pad the member to the next boundary.</p>\n"}], "owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 29251016, "answer_count": 6, "score": 3, "last_activity_date": 1427307956, "creation_date": 1427271937, "last_edit_date": 1427273619, "question_id": 29250665, "link": "https://stackoverflow.com/questions/29250665/what-is-the-use-case-for-an-anonymous-union-type", "title": "What is the use case for an anonymous union type", "body": "<p>A saw a question with the following code :</p>\n\n<pre><code>union\n{\n     float dollars;\n     int yens;\n}price;\n</code></pre>\n\n<p><code>price</code> is a variable whose type does not have a name.\nWhat is such an unnamed type useful for? Lambda expressions?\nIs this valid in both C and C++?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 3331, "user_id": 2581593, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NtHku.jpg?s=128&g=1", "display_name": "zubergu", "link": "https://stackoverflow.com/users/2581593/zubergu"}, "edited": false, "score": 1, "creation_date": 1427271895, "post_id": 29250618, "comment_id": 46705330, "body": "strncpy is the word. This question is also an exact copy of one that already exists, flagged as duplicate."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1427272141, "post_id": 29250618, "comment_id": 46705445, "body": "... and the <code>n</code>th character of the string is at <code>&amp;str[n]</code>, assuming you start counting from zero for <code>n</code>."}, {"owner": {"reputation": 4190, "user_id": 1520248, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/vySwn.jpg?s=128&g=1", "display_name": "niyasc", "link": "https://stackoverflow.com/users/1520248/niyasc"}, "reply_to_user": {"reputation": 190, "user_id": 4108473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uszgTGkdmXU/AAAAAAAAAAI/AAAAAAAAAUo/ajrXLIdPdPI/photo.jpg?sz=128", "display_name": "Chintan Patel", "link": "https://stackoverflow.com/users/4108473/chintan-patel"}, "edited": false, "score": 0, "creation_date": 1427272339, "post_id": 29250618, "comment_id": 46705543, "body": "@ChintanPatel How does it matter btw?"}], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 4108473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uszgTGkdmXU/AAAAAAAAAAI/AAAAAAAAAUo/ajrXLIdPdPI/photo.jpg?sz=128", "display_name": "Chintan Patel", "link": "https://stackoverflow.com/users/4108473/chintan-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1427272150, "creation_date": 1427272150, "answer_id": 29250724, "question_id": 29250618, "link": "https://stackoverflow.com/questions/29250618/how-to-get-substring-of-char/29250724#29250724", "title": "How to get substring of char*", "body": "<p>Try using this code</p>\n\n<pre><code>char *str = \"Some string\"\nchar temp[100];\nchar *ch1, *ch2;\nch1 = strchr(str,'m');\nch2 = strchr(str,'n');\nlen = ch2-ch1;\nstrncpy(temp,ch1,len);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1427272226, "creation_date": 1427272226, "answer_id": 29250747, "question_id": 29250618, "link": "https://stackoverflow.com/questions/29250618/how-to-get-substring-of-char/29250747#29250747", "title": "How to get substring of char*", "body": "<pre><code>char destStr[30];\nint j=0;\nfor(i=n;i&lt;=m;i++)\ndestStr[j++] = str[i];\n\ndestStr[j] = '\\0';\n</code></pre>\n\n<p>Just copy the required characters using the loop as shown above. If you opt not to use the existing string family functions.</p>\n"}, {"tags": [], "owner": {"reputation": 34, "user_id": 4691200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5WuCm.jpg?s=128&g=1", "display_name": "TinyBox", "link": "https://stackoverflow.com/users/4691200/tinybox"}, "is_accepted": false, "score": 1, "last_activity_date": 1427272575, "creation_date": 1427272575, "answer_id": 29250839, "question_id": 29250618, "link": "https://stackoverflow.com/questions/29250618/how-to-get-substring-of-char/29250839#29250839", "title": "How to get substring of char*", "body": "<p>As following code\uff1a</p>\n\n<pre><code>int m = 2, n = 6;\nchar *p = (char *)malloc(sizeof(char) * (n - m));\nfor (size_t i = m; i &lt; n; i++)\n{\n    p[i - m] = str[i];\n}\nif(p)  \n    printf(\"Memory Allocated at: %x/n\",p);  \nelse  \n    printf(\"Not Enough Memory!/n\");  \nfree(p);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1427273132, "last_edit_date": 1427273132, "creation_date": 1427272662, "answer_id": 29250860, "question_id": 29250618, "link": "https://stackoverflow.com/questions/29250618/how-to-get-substring-of-char/29250860#29250860", "title": "How to get substring of char*", "body": "<p>You can use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strspn.html\" rel=\"nofollow\"><code>strscpn</code></a> function. Try this  </p>\n\n<pre><code>int start, end;\nstart = strcspn(str, \"m\");  // start = 2\nend = strcspn(str, \"n\");    // end = 9\nchar *temp = malloc(end-start + 2);   // 9 - 2 + 1 (for 'n') + 1(for '\\0')\n\nstrncpy(temp, &amp;str[start], end-start + 1);\ntemp[end-start + 1] = '\\0';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1427274202, "creation_date": 1427274202, "answer_id": 29251358, "question_id": 29250618, "link": "https://stackoverflow.com/questions/29250618/how-to-get-substring-of-char/29251358#29251358", "title": "How to get substring of char*", "body": "<p>Here is a demonstrative program that shows how the function can be written.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\nchar * substr( const char *s, size_t pos, size_t n )\n{\n    size_t length = strlen( s );\n\n    if ( !( pos &lt; length ) ) return NULL;\n\n    if ( length - pos &lt; n ) n = length - pos;\n\n    char *t = malloc( ( n + 1 ) * sizeof( char ) );\n\n    if ( t )\n    {\n        strncpy( t, s + pos, n );\n        t[n] = '\\0';\n    }\n\n    return t;\n}\n\nint main(void) \n{\n    char* s = \"Some string\";\n\n    char *t = substr( s, 0, strlen( s ) );\n\n    assert( strlen( s ) == strlen( t ) &amp;&amp; strcmp( t, s ) == 0 );\n\n    puts( t );\n\n    free( t );\n\n    size_t n = 5, m = 10;\n\n    t = substr( s, n, m - n + 1 );\n\n    assert( strlen( t ) == m - n + 1 &amp;&amp; strcmp( t, \"string\" ) == 0 );\n\n    puts( t );\n\n    free( t );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Some string\nstring\n</code></pre>\n"}], "owner": {"reputation": 5749, "user_id": 3663882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bdc173d17ed7af94626f5939b7ad5484?s=128&d=identicon&r=PG&f=1", "display_name": "user3663882", "link": "https://stackoverflow.com/users/3663882/user3663882"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 1, "closed_date": 1427275400, "answer_count": 5, "score": -3, "last_activity_date": 1427274202, "creation_date": 1427271791, "question_id": 29250618, "link": "https://stackoverflow.com/questions/29250618/how-to-get-substring-of-char", "closed_reason": "Duplicate", "title": "How to get substring of char*", "body": "<p>I have the following </p>\n\n<pre><code>char* str = \"Some string\";\n</code></pre>\n\n<p>How can I get a substring, from <code>n</code> to <code>m</code> symbols of <code>str</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6704, "user_id": 2905768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7ec074d0dd19cfb71ea8275e3b68a700?s=128&d=identicon&r=PG&f=1", "display_name": "PMF", "link": "https://stackoverflow.com/users/2905768/pmf"}, "edited": false, "score": 8, "creation_date": 1427271496, "post_id": 29250471, "comment_id": 46705134, "body": "Show the section of code that reads the IP together with relevant variable declarations. <code>char</code> would certainly be wrong, if at all, it should be <code>char[]</code>."}, {"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 2, "creation_date": 1427271505, "post_id": 29250471, "comment_id": 46705138, "body": "There shouldn&#39;t be any problem with char[] containing &quot;multiple dots&quot;. Revise your code."}, {"owner": {"reputation": 779, "user_id": 2611355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iil2x.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/2611355/james"}, "edited": false, "score": 0, "creation_date": 1427272072, "post_id": 29250471, "comment_id": 46705411, "body": "you could use <code>char*</code> to store the characters and convert the string into a <code>struct</code> of <code>int</code>s not including the <code>&#39;.&#39;</code>"}, {"owner": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 2, "creation_date": 1427272211, "post_id": 29250471, "comment_id": 46705488, "body": "There is no space allocated for <code>target_IP</code>."}, {"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1427272481, "post_id": 29250471, "comment_id": 46705615, "body": "I don&#39;t understand the downvotes. This is not a trivial question, if you want to be portable."}, {"owner": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1427272550, "post_id": 29250471, "comment_id": 46705657, "body": "Check <a href=\"http://stackoverflow.com/questions/13447891/segmentation-fault-using-scanf\">segmentation fault using scanf</a>."}], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 4108473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uszgTGkdmXU/AAAAAAAAAAI/AAAAAAAAAUo/ajrXLIdPdPI/photo.jpg?sz=128", "display_name": "Chintan Patel", "link": "https://stackoverflow.com/users/4108473/chintan-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1427271761, "creation_date": 1427271761, "answer_id": 29250610, "question_id": 29250471, "link": "https://stackoverflow.com/questions/29250471/c-programming-int-variable-with-multiple-s/29250610#29250610", "title": "c programming int variable with multiple &#39;.&#39;s", "body": "<p>save your input in a string and use strtok() using delimiter as '.'\nThen store it in char array or 4 different char variables</p>\n"}, {"comments": [{"owner": {"reputation": 371, "user_id": 4493605, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de634ffd4d8a90ffbf4c4c6ad023e8b6?s=128&d=identicon&r=PG&f=1", "display_name": "user4493605", "link": "https://stackoverflow.com/users/4493605/user4493605"}, "edited": false, "score": 0, "creation_date": 1427277663, "post_id": 29250699, "comment_id": 46708651, "body": "Thank you @itchee, although there are a lot of good answers this is definitely the simplest and easiest to use for a newbe like me."}], "tags": [], "owner": {"reputation": 800, "user_id": 4706284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52XTn.png?s=128&g=1", "display_name": "itchee", "link": "https://stackoverflow.com/users/4706284/itchee"}, "is_accepted": true, "score": 0, "last_activity_date": 1427272077, "creation_date": 1427272077, "answer_id": 29250699, "question_id": 29250471, "link": "https://stackoverflow.com/questions/29250471/c-programming-int-variable-with-multiple-s/29250699#29250699", "title": "c programming int variable with multiple &#39;.&#39;s", "body": "<p>Have a look at this example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int part1, part2, part3, part4;\n    printf(\"Enter IP (e.g. 127.0.0.1): \");\n    scanf(\"%d.%d.%d.%d\", &amp;part1, &amp;part2, &amp;part3, &amp;part4);\n    printf(\"IP is %d - %d - %d - %d\\r\\n\", part1, part2, part3, part4);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "is_accepted": false, "score": 0, "last_activity_date": 1427272102, "creation_date": 1427272102, "answer_id": 29250708, "question_id": 29250471, "link": "https://stackoverflow.com/questions/29250471/c-programming-int-variable-with-multiple-s/29250708#29250708", "title": "c programming int variable with multiple &#39;.&#39;s", "body": "<p>If you are working in a POSIX (or even Windows) environment. You can use: <code>inet_addr</code>:</p>\n\n<ul>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/inet_addr.html\" rel=\"nofollow\">http://pubs.opengroup.org/onlinepubs/009695399/functions/inet_addr.html</a></li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms738563(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms738563(v=vs.85).aspx</a></li>\n</ul>\n\n<p>Both these functions returns an integer type suitable for the IPv4 adresses. In practice you should use a variable of type <code>in_addr</code> which contains a member named <code>s_addr</code> (<code>S_addr</code>under windows) of the correct type.</p>\n\n<p>But, beware, it only works for IPv4. As things go, you'd better to prepare for IPv6 addresses too (and these addresses are NOT separated by <code>.</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "is_accepted": false, "score": 1, "last_activity_date": 1427273058, "creation_date": 1427273058, "answer_id": 29250973, "question_id": 29250471, "link": "https://stackoverflow.com/questions/29250471/c-programming-int-variable-with-multiple-s/29250973#29250973", "title": "c programming int variable with multiple &#39;.&#39;s", "body": "<p>The current POSIX standard allows that scanf does a memory allocation to the variable. Notice the additional <code>&amp;</code> to change the variable.</p>\n\n<pre><code>char *target_IP;\nscanf(\"%ms\", &amp;target_IP);\n</code></pre>\n\n<p>Otherwise you need to do</p>\n\n<pre><code>char target_IP[200];\nscanf(\"%s\", target_IP);\n</code></pre>\n\n<p>and still risk a malicious buffer overflow.</p>\n"}, {"tags": [], "owner": {"reputation": 4190, "user_id": 1520248, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/vySwn.jpg?s=128&g=1", "display_name": "niyasc", "link": "https://stackoverflow.com/users/1520248/niyasc"}, "is_accepted": false, "score": 0, "last_activity_date": 1427273593, "creation_date": 1427273593, "answer_id": 29251139, "question_id": 29250471, "link": "https://stackoverflow.com/questions/29250471/c-programming-int-variable-with-multiple-s/29251139#29251139", "title": "c programming int variable with multiple &#39;.&#39;s", "body": "<p>I thing the problem is with <code>target_IP</code> itself.<br>\nYou are declaring <code>target_IP</code> as a character pointer and nowhere allocating memory to char pointer. Then you are trying to write value to unallocated memory location which will definitely cause segmentation fault.\n<br><br>\nSo first allocate memory to target_IP and then use it as you do.</p>\n\n<pre><code>target_IP = malloc(16); \nscanf(\"%s\", target_IP);\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 4493605, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de634ffd4d8a90ffbf4c4c6ad023e8b6?s=128&d=identicon&r=PG&f=1", "display_name": "user4493605", "link": "https://stackoverflow.com/users/4493605/user4493605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 29250699, "answer_count": 5, "score": -2, "last_activity_date": 1427273593, "creation_date": 1427271314, "last_edit_date": 1427271965, "question_id": 29250471, "link": "https://stackoverflow.com/questions/29250471/c-programming-int-variable-with-multiple-s", "title": "c programming int variable with multiple &#39;.&#39;s", "body": "<p>basically im building a port scanner of sorts (well technically it piggy-backs another ports-canner but thats not important). The problem lies within the code in which the user inputs the target IP address to be scanned.\nThe program runs smoothly until it returns a 'segmentation fault: 11' error after the user inputs the IP address.</p>\n\n<p>I have done some research into segmentation faults and i believe that this particular error is thanks to the fact that my code has declared the <code>targetIP</code> variable as a char, yet contains numbers with multiple '.'s as you would need for an IP address. </p>\n\n<p><strong>So my question is, what variable type will i need that can handle numbers with multiple '.'s? eg: <code>225.1.1.24</code></strong></p>\n\n<p>code: </p>\n\n<pre><code> char *target_IP;\n    scanf(\"%s\",target_IP);\n\n    // segmentation fault occurs here so bellow printf is never displayed vv\n\n    printf(\"\\nWriting target IP [%s] to file\\n\",target_IP);\n</code></pre>\n"}, {"tags": ["c", "linux", "memory", "embedded-linux", "mmap"], "comments": [{"owner": {"reputation": 1177, "user_id": 2261179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/viYo6.gif?s=128&g=1", "display_name": "simurg", "link": "https://stackoverflow.com/users/2261179/simurg"}, "edited": false, "score": 5, "creation_date": 1427291733, "post_id": 29250435, "comment_id": 46717870, "body": "I was gonna tell you that 327680 / 64170 is exactly 5, which is a hint that shows that your loop is too &quot;fast&quot; but than I realized that you&#39;re calling <code>mmap()</code> in the loop. That&#39;s wrong! <code>mmap()</code> the physical memory once and then use it."}, {"owner": {"reputation": 61, "user_id": 2422160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li9f6.jpg?s=128&g=1", "display_name": "Kshitij Agrawal", "link": "https://stackoverflow.com/users/2422160/kshitij-agrawal"}, "reply_to_user": {"reputation": 1177, "user_id": 2261179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/viYo6.gif?s=128&g=1", "display_name": "simurg", "link": "https://stackoverflow.com/users/2261179/simurg"}, "edited": false, "score": 0, "creation_date": 1427297111, "post_id": 29250435, "comment_id": 46721826, "body": "@simurg thnx I think that should work. Right now my data is &lt;4kB (which is the page size) but what if it is larger than 4kB ?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1427303214, "post_id": 29250435, "comment_id": 46726039, "body": "Also, what&#39;s a &quot;hex file&quot;?"}, {"owner": {"reputation": 61, "user_id": 2422160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li9f6.jpg?s=128&g=1", "display_name": "Kshitij Agrawal", "link": "https://stackoverflow.com/users/2422160/kshitij-agrawal"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1427462036, "post_id": 29250435, "comment_id": 46797649, "body": "@MooingDuck a text file with all hex values."}], "owner": {"reputation": 61, "user_id": 2422160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li9f6.jpg?s=128&g=1", "display_name": "Kshitij Agrawal", "link": "https://stackoverflow.com/users/2422160/kshitij-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 793, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1427302864, "creation_date": 1427271193, "last_edit_date": 1427302864, "question_id": 29250435, "link": "https://stackoverflow.com/questions/29250435/c-memory-access-with-mmap", "title": "C - Memory access with mmap", "body": "<p>I have a hex file of 327680 characters which I'm writing to physical address 0x30000000 - 0x3004FFFF on the memory on my ARM linux system.  </p>\n\n<p>While reading back from the memory I'm getting a segfault after reading 64170 characters from the start address, ie at 0x3000FAAA. \nIf I change my starting address to 0x3000FA64, then also I get a segfault after 64170 characters. </p>\n\n<p>How do I ensure data is accessed correctly if Data > 4kB (page size) ?</p>\n\n<p>I'm unable to understand the exact problem, so I'm adding the snippet of my code below:</p>\n\n<pre><code>#define MAX_RANGE 327679\n\nint fd;\nFILE* fd_table=NULL;\nunsigned long int count = 0 ;\nvoid * mem;\nvoid * aligned_vaddr;\nunsigned long aligned_paddr;\nuint32_t aligned_size;\nunsigned long int addr_phys;\n\nuint8_t *addr;\nint g_size = 1;\nunsigned long int g_paddr = 0x30000000; //Starting physical address\n\nwhile((count&lt;MAX_RANGE)){\n  g_paddr = addr_phys;\n  g_paddr &amp;= ~(g_size - 1);\n\n  aligned_paddr = g_paddr &amp; ~(4096 - 1);\n  aligned_size = g_paddr - aligned_paddr + (g_count * g_size);\n  aligned_size = (aligned_size + 4096 - 1) &amp; ~(4096 - 1);\n\n  /* Align address to access size */\n  aligned_vaddr = mmap(NULL, aligned_size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, aligned_paddr);\n  if (aligned_vaddr == NULL) {\n    printf(\"Error mapping address\\n\");\n    close(fd);\n    return 1;\n  }\n\n  mem = (void *)((uint32_t)aligned_vaddr + (g_paddr - aligned_paddr));\n  addr = mem;\n  fprintf(fd_table, \"%02X\\n\",addr[0]);\n  addr_phys +=1; //Increment byte address\n  count++;\n}\n</code></pre>\n\n<p>Note: \n1. There is no error in the write process, I have verified by viewing the segfault address with memtool.\n2. The address 0x30000000 onwards is not used by the system (I have ensured that in the u-boot). </p>\n"}, {"tags": ["c", "linux", "linux-kernel", "network-programming", "ioctl"], "comments": [{"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 1, "creation_date": 1427270295, "post_id": 29249665, "comment_id": 46704580, "body": "You can&#39;t get nameserver with ioctl because name resolution is not handled by kernel. It lives in deeps of glibc library."}, {"owner": {"reputation": 253, "user_id": 3332593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/90cddbbb899e7850ee4e0824bf818be1?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Bhushan", "link": "https://stackoverflow.com/users/3332593/ravi-bhushan"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1427272998, "post_id": 29249665, "comment_id": 46705867, "body": "@myaut : But what about gateway? then from where do i get nameserver IP?  can you help me??"}, {"owner": {"reputation": 229, "user_id": 4688882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c662bf9b1f853555856b03758cfdebe?s=128&d=identicon&r=PG&f=1", "display_name": "Max Fomichev", "link": "https://stackoverflow.com/users/4688882/max-fomichev"}, "edited": false, "score": 0, "creation_date": 1427273679, "post_id": 29249665, "comment_id": 46706240, "body": "check the following code - <a href=\"http://www.linuxquestions.org/questions/linux-networking-3/howto-find-gateway-address-through-code-397078/#post4913964\" rel=\"nofollow noreferrer\">link</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2175, "user_id": 1009901, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pUwqu.jpg?s=128&g=1", "display_name": "Yeti", "link": "https://stackoverflow.com/users/1009901/yeti"}, "edited": false, "score": 0, "creation_date": 1510066371, "post_id": 29253016, "comment_id": 81271197, "body": "Please be careful when using <code>&#47;etc&#47;resolv.conf</code>, in my case DHCPCD overrides the nameservers (execute <code>resolvconf -l</code>) that are listed in <code>&#47;etc&#47;resolv.conf</code> without updating that file. Therefore the actual nameservers used are different from what is listed in the configuration."}, {"owner": {"reputation": 2815, "user_id": 4350586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IvPNx.png?s=128&g=1", "display_name": "Dmitry Grigoryev", "link": "https://stackoverflow.com/users/4350586/dmitry-grigoryev"}, "reply_to_user": {"reputation": 2175, "user_id": 1009901, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pUwqu.jpg?s=128&g=1", "display_name": "Yeti", "link": "https://stackoverflow.com/users/1009901/yeti"}, "edited": false, "score": 0, "creation_date": 1510135761, "post_id": 29253016, "comment_id": 81302680, "body": "@Yeti You probably have set <code>nohook resolv.conf</code> in your DHCPCD config. That option prevents DHCPCD from updating the file."}], "tags": [], "owner": {"reputation": 2815, "user_id": 4350586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IvPNx.png?s=128&g=1", "display_name": "Dmitry Grigoryev", "link": "https://stackoverflow.com/users/4350586/dmitry-grigoryev"}, "is_accepted": true, "score": 1, "last_activity_date": 1427279057, "creation_date": 1427279057, "answer_id": 29253016, "question_id": 29249665, "link": "https://stackoverflow.com/questions/29249665/how-to-get-gateway-ip-and-nameserver-ip-using-ioctl-in-linux/29253016#29253016", "title": "How to get gateway ip and nameserver ip using ioctl in linux", "body": "<p>To get the default gateway you can parse <code>/proc/net/route</code>:</p>\n\n<pre><code># cat /proc/net/route\nIface   Destination     Gateway         Flags   RefCnt  Use     Metric  Mask   MTU      Window  IRTT\neth0    00000000        010110AC        0003    0       0       0       000000000       0       0\n</code></pre>\n\n<p>If you need nameserver address, parsing <code>/etc/resolv.conf</code> seems like a reliable option to me.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14656538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XY3S2vQXTXw/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuclszHX2aXCPMPl-sE11OXhPdxy7Hw/s96-c/photo.jpg?sz=128", "display_name": "F A Fern&#225;ndez", "link": "https://stackoverflow.com/users/14656538/f-a-fern%c3%a1ndez"}, "is_accepted": false, "score": 0, "last_activity_date": 1617119699, "creation_date": 1617119699, "answer_id": 66874336, "question_id": 29249665, "link": "https://stackoverflow.com/questions/29249665/how-to-get-gateway-ip-and-nameserver-ip-using-ioctl-in-linux/66874336#66874336", "title": "How to get gateway ip and nameserver ip using ioctl in linux", "body": "<p>You can use</p>\n<pre><code>struct rtentry route;\n(...)\nioctl(sck, SIOCADDRT, &amp;route)\n</code></pre>\n<p>More information her:</p>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/22733967/linux-how-to-set-default-route-from-c/22751236\">How to change default gateway vie C</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/57178084/how-to-change-default-gateway-vie-c\">Linux how to set default route from C</a></p>\n</li>\n</ul>\n"}], "owner": {"reputation": 253, "user_id": 3332593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/90cddbbb899e7850ee4e0824bf818be1?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Bhushan", "link": "https://stackoverflow.com/users/3332593/ravi-bhushan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3048, "favorite_count": 0, "accepted_answer_id": 29253016, "answer_count": 2, "score": 2, "last_activity_date": 1617119699, "creation_date": 1427268021, "last_edit_date": 1427273148, "question_id": 29249665, "link": "https://stackoverflow.com/questions/29249665/how-to-get-gateway-ip-and-nameserver-ip-using-ioctl-in-linux", "title": "How to get gateway ip and nameserver ip using ioctl in linux", "body": "<p>I have got ip, subnet and broadcast address using ioctl call.\nbut don't know how to get default gateway and nameserver ip.\nif I pick nameserver from <code>/etc/resolv.conf</code> then is it reliable?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>int main(void)\n{\nchar buf[1024];\nstruct ifconf ifc;\nstruct ifreq *ifr;\nint sck, nInterfaces;\nint i;\nunsigned char mac[6];\n\nsck = socket(AF_INET, SOCK_DGRAM, 0);\nif(sck &lt; 0)\n{\n    perror(\"socket\");\n    return 1;\n}\n\nifc.ifc_len = sizeof(buf);\nifc.ifc_buf = buf;\nif(ioctl(sck, SIOCGIFCONF, &amp;ifc) &lt; 0)\n{\n    perror(\"ioctl(SIOCGIFCONF)\");\n    return 1;\n}\n\nifr = ifc.ifc_req;\nnInterfaces = ifc.ifc_len / sizeof(struct ifreq);\nfor(i = 0; i &lt; nInterfaces; i++)\n{\n    struct ifreq *item = &amp;ifr[i];\n    printf(\"Interface Name = %s\\nIP = %s\\n\",\n           item-&gt;ifr_name,\n           inet_ntoa(((struct sockaddr_in *)&amp;item-&gt;ifr_addr)-&gt;sin_addr));\n\n    ioctl(sck, SIOCGIFNETMASK, item);\n    printf(\"SubNet Mask = %s\\n\", inet_ntoa(((struct sockaddr_in *)&amp;item-&gt;ifr_netmask)-&gt;sin_addr));\n\n    ioctl(sck, SIOCGIFBRDADDR, item);\n    printf(\"BroadCat Address = %s\\n\", inet_ntoa(((struct sockaddr_in *)&amp;item-&gt;ifr_broadaddr)-&gt;sin_addr));\n\n    ioctl(sck, SIOCGIFHWADDR, item);\n    memcpy(mac, item-&gt;ifr_hwaddr.sa_data, 6);\n    printf(\"MAC:%02X:%02X:%02X:%02X:%02X:%02X\\n\",mac[0],mac[1],mac[2],mac[3],mac[4],mac[5]); \n}\n return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "oracle", "oracle-call-interface"], "answers": [{"tags": [], "owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "is_accepted": false, "score": 1, "last_activity_date": 1427361502, "last_edit_date": 1427361502, "creation_date": 1427322848, "answer_id": 29267820, "question_id": 29249293, "link": "https://stackoverflow.com/questions/29249293/how-to-use-oci-for-xmltype-columns-in-oracle/29267820#29267820", "title": "How to use OCI for XMLType columns in Oracle?", "body": "<p>This really is not easy task. Especially it's still questionable what are Oracle's intentions with the whole XML support. The API got changed between ver. 9i and 10i and now again there were some changes in 12c. But on the other hand in order to manipulate XMLTYPE as it was is \"real\" XML you need also a library called libxml.a (aside from usual libclntsh.so - oci.dll). This library is no more downloadable as part of \"XDK toolkit\", nether is missing in InstantClient, neither is not present in OracleXE. You realy need to install the \"thick\" Oracle client to get this library.</p>\n\n<p>Then you have to bind XML column it as if it was a \"complex\" type. It really\nis a complex type called <code>SYS.XMLTYPE</code> (this <code>SYS.</code> prefix is important).</p>\n\n<p>So it should be:</p>\n\n<pre><code>b_IsErr = OCIBindByPos(p_sql, &amp;p_bnd, p_DBCon-&gt;p_err, iPos,\n(dvoid*)pzValue, iSize, SQLT_NTY, 0, 0, 0, 0, 0, OCI_DEFAULT);\n</code></pre>\n\n<p>Once bound as SQLT_NTY, you have to manipulate it by using functions\nfrom libxml.a library.</p>\n\n<p>Best you should look at some complex OCI examples on Metalink or read source code of some open-source OCI wrapper library. For example <a href=\"http://sourceforge.net/p/tora/code/HEAD/tree/trunk/tora/extlibs/trotl/src/trotl_xml.cpp\" rel=\"nofollow\">mine.</a>.\nBut I have to admit that today there are better and actively maintained \nlibs today.</p>\n"}, {"tags": [], "owner": {"reputation": 4855, "user_id": 2510347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b8b4592704ce48913b5e75f20f3727d?s=128&d=identicon&r=PG", "display_name": "Anthony Tuininga", "link": "https://stackoverflow.com/users/2510347/anthony-tuininga"}, "is_accepted": false, "score": 0, "last_activity_date": 1493847979, "creation_date": 1493847979, "answer_id": 43770521, "question_id": 29249293, "link": "https://stackoverflow.com/questions/29249293/how-to-use-oci-for-xmltype-columns-in-oracle/43770521#43770521", "title": "How to use OCI for XMLType columns in Oracle?", "body": "<p>Another solution which is far easier to use is to specify SQLT_CHR as the type. Then the server will automatically convert the XMLType to string and you can manipulate that string using whatever library you care to use. You do have to specify the maximum length of string you will accept -- or get into the more complex aspects of dynamic binding/fetching!</p>\n"}], "owner": {"reputation": 1095, "user_id": 2878256, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/JkziT.png?s=128&g=1", "display_name": "Sujith Gunawardhane", "link": "https://stackoverflow.com/users/2878256/sujith-gunawardhane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493847979, "creation_date": 1427266562, "question_id": 29249293, "link": "https://stackoverflow.com/questions/29249293/how-to-use-oci-for-xmltype-columns-in-oracle", "title": "How to use OCI for XMLType columns in Oracle?", "body": "<p>In my application a new XMLType column was added to the database table. I have to read and write to that table using Oracle C API.\nAs I got from the web, the underlying data type of the XMLType is CLOB and as per my understanding the same API I used to manage CLOB columns should support XMLType columns as well.</p>\n\n<p>My table is as follows (This table was not the actual one and using as POC).</p>\n\n<pre><code>CREATE TABLE STUDENT\n(\n    NIC NUMBER(10),\n    MESSAGE XMLTYPE\n);\n</code></pre>\n\n<p>SQL for select data</p>\n\n<pre><code>SELECT MESSAGE FROM STUDENT\n</code></pre>\n\n<p>However when fetching data it gave me the following error to the application.</p>\n\n<pre><code>ORA-00932: inconsistent datatypes: expected CLOB got OPAQUE TYPE\n</code></pre>\n\n<p>I defines the variable as follows.</p>\n\n<pre><code>pLocator = new OCILobLocator*;\n*pLocator = NULL;\n\nOCIDescriptorAlloc(p_DBCon-&gt;p_env, (dvoid **)pLocator, OCI_DTYPE_LOB, \n    (size_t)0, (dvoid **)0);\n\nb_IsErr = OCIDefineByPos(p_sql, &amp;p_dfn, p_DBCon-&gt;p_err, iPos, \n    (dvoid*)pLocator, -1, SQLT_CLOB, 0, 0, 0, OCI_DEFAULT);\n</code></pre>\n\n<p>However I modified the SQL as follows and not it is working without any errors even for larger XMLs (More than 4k)</p>\n\n<pre><code>SELECT A.MESSAGE.GETCLOBVAL() FROM STUDENT A\n</code></pre>\n\n<p>So one part has been completed.</p>\n\n<p>However, my second part which is for inserting data was failed.</p>\n\n<p>My SQL is</p>\n\n<pre><code>INSERT INTO STUDENT (MESSAGE) VALUES (:1)\n</code></pre>\n\n<p>I do data binding as follows.</p>\n\n<pre><code>b_IsErr = OCIBindByPos(p_sql, &amp;p_bnd, p_DBCon-&gt;p_err, iPos,\n    (dvoid*)pzValue, iSize, SQLT_STR, 0, 0, 0, 0, 0, OCI_DEFAULT);\n</code></pre>\n\n<p>In the execution it gives follows error.</p>\n\n<pre><code>ORA-01461: can bind a LONG value only for insert into a LONG column\n</code></pre>\n\n<p>Please help me in getting this resolved.</p>\n"}, {"tags": ["c", "eclipse", "clang", "llvm", "eclipse-cdt"], "comments": [{"owner": {"reputation": 147, "user_id": 4838346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcbd62290b95760c3e68e82ec9345a9c?s=128&d=identicon&r=PG&f=1", "display_name": "elika kohen", "link": "https://stackoverflow.com/users/4838346/elika-kohen"}, "edited": false, "score": 0, "creation_date": 1435524639, "post_id": 29249099, "comment_id": 50224401, "body": "Just wanted to ask if you found a solution you could post.  I can confirm this is an issue in C++ projects in Windows using the LLVM/Clang Toolchain for Eclipse Luna, (+ CDT and MinGW).  The GUI provides some static library flags, but not for executables.  The settings have to provided manually."}, {"owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "edited": false, "score": 0, "creation_date": 1492765788, "post_id": 29249099, "comment_id": 74128886, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5802448/how-to-use-clang-llvm-with-eclipse-cdt\">How to use clang/llvm with Eclipse CDT</a>"}], "owner": {"reputation": 106, "user_id": 818295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54136891fe951cdc9c79414e842b38b5?s=128&d=identicon&r=PG", "display_name": "Sergey Pereverzov", "link": "https://stackoverflow.com/users/818295/sergey-pereverzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427265787, "creation_date": 1427265787, "question_id": 29249099, "link": "https://stackoverflow.com/questions/29249099/cannot-build-executable-from-eclipse-cdt-when-using-llvm-clang", "title": "Cannot build executable from eclipse + CDT when using llvm + clang", "body": "<p>I'm trying to use Eclipse Luna + CDT + Linux + clang 3.6. \nI'm not able to let eclipse + clang build native executable file. There is no option to select \"executable\" in Project -> Properties -> c\\c++ build -> Settings -> Build Artifact -> Artifact type. There is only \"Static library\" is shown. \nCould please somebody advise?</p>\n\n<p>Thank you.</p>\n"}]